import{e as nb,f as dI,g as it,r as A,u as wi,N as Dn,h as nt,L as Hl,i as ua,R as D,j as fI,k as th,l as Se,m as xu,a as hI,B as pI}from"./react-vendor-DxvHgwPz.js";import{C as CC,s as _,S as et,I as he,_ as pe,L as Qe,R as Ct,M as lc,B as P,D as kC,a as mI,b as ie,c as $,d as V,e as ty,f as EC,g as Un,A as at,h as ra,i as rh,j as Dt,k as ur,l as Rr,T as le,m as de,n as Be,o as z,p as fe,q,r as Gt,E as Bt,t as ve,u as Mt,F as E,U as Pt,v as Hn,w as Sn,x as ys,y as su,z as ry,G as Cr,H as un,J as Ia,K as nh,N as no,O as ao,P as Cn,Q as ft,V as br,W as gI,X as rt,Y as Ar,Z as so,$ as Nr,a0 as ab,a1 as He,a2 as kr,a3 as Nn,a4 as sb,a5 as vs,a6 as OC,a7 as xI,a8 as Qn,a9 as nn,aa as Ma}from"./antd-vendor-CaGc8u-0.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var cp={exports:{}},ol={};var sj;function yI(){if(sj)return ol;sj=1;var t=nb(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var d,f={},h=null,p=null;u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),c.ref!==void 0&&(p=c.ref);for(d in c)n.call(c,d)&&!i.hasOwnProperty(d)&&(f[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:e,type:l,key:h,ref:p,props:f,_owner:a.current}}return ol.Fragment=r,ol.jsx=o,ol.jsxs=o,ol}var ij;function vI(){return ij||(ij=1,cp.exports=yI()),cp.exports}var s=vI(),yu={},oj;function bI(){if(oj)return yu;oj=1;var t=dI();return yu.createRoot=t.createRoot,yu.hydrateRoot=t.hydrateRoot,yu}var jI=bI();const wI=it(jI);var ll={},up={exports:{}},lj;function bs(){return lj||(lj=1,(function(t){function e(r){return r&&r.__esModule?r:{default:r}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(up)),up.exports}var cl={},cj;function SI(){if(cj)return cl;cj=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.default=void 0;var t={items_per_page:"/ الصفحة",jump_to:"الذهاب إلى",jump_to_confirm:"تأكيد",page:"الصفحة",prev_page:"الصفحة السابقة",next_page:"الصفحة التالية",prev_5:"خمس صفحات سابقة",next_5:"خمس صفحات تالية",prev_3:"ثلاث صفحات سابقة",next_3:"ثلاث صفحات تالية",page_size:"مقاس الصفحه"};return cl.default=t,cl}var ul={},dl={},fl={},dp={exports:{}},fp={exports:{}},hp={exports:{}},pp={exports:{}},uj;function PC(){return uj||(uj=1,(function(t){function e(r){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(pp)),pp.exports}var mp={exports:{}},dj;function NI(){return dj||(dj=1,(function(t){var e=PC().default;function r(n,a){if(e(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,a||"default");if(e(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(mp)),mp.exports}var fj;function AI(){return fj||(fj=1,(function(t){var e=PC().default,r=NI();function n(a){var i=r(a,"string");return e(i)=="symbol"?i:i+""}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(hp)),hp.exports}var hj;function CI(){return hj||(hj=1,(function(t){var e=AI();function r(n,a,i){return(a=e(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(fp)),fp.exports}var pj;function TC(){return pj||(pj=1,(function(t){var e=CI();function r(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable})),o.push.apply(o,l)}return o}function n(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?r(Object(o),!0).forEach(function(l){e(a,l,o[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(o,l))})}return a}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(dp)),dp.exports}var hl={},mj;function IC(){return mj||(mj=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.commonLocale=void 0,hl.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),hl}var gj;function kI(){if(gj)return fl;gj=1;var t=bs().default;Object.defineProperty(fl,"__esModule",{value:!0}),fl.default=void 0;var e=t(TC()),r=IC(),n=(0,e.default)((0,e.default)({},r.commonLocale),{},{locale:"ar_EG",today:"اليوم",now:"الأن",backToToday:"العودة إلى اليوم",ok:"تأكيد",clear:"مسح",week:"الأسبوع",month:"الشهر",year:"السنة",timeSelect:"اختيار الوقت",dateSelect:"اختيار التاريخ",monthSelect:"اختيار الشهر",yearSelect:"اختيار السنة",decadeSelect:"اختيار العقد",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"الشهر السابق (PageUp)",nextMonth:"الشهر التالى(PageDown)",previousYear:"العام السابق (Control + left)",nextYear:"العام التالى (Control + right)",previousDecade:"العقد السابق",nextDecade:"العقد التالى",previousCentury:"القرن السابق",nextCentury:"القرن التالى"});return fl.default=n,fl}var pl={},xj;function MC(){if(xj)return pl;xj=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.default=void 0;const t={placeholder:"اختيار الوقت",rangePlaceholder:["وقت البدء","وقت الانتهاء"]};return pl.default=t,pl}var yj;function RC(){if(yj)return dl;yj=1;var t=bs().default;Object.defineProperty(dl,"__esModule",{value:!0}),dl.default=void 0;var e=t(kI()),r=t(MC());const n={lang:Object.assign({placeholder:"اختيار التاريخ",rangePlaceholder:["البداية","النهاية"],yearFormat:"YYYY",monthFormat:"MMMM",monthBeforeYear:!0,shortWeekDays:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],shortMonths:["يناير","فبراير","مارس","إبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},e.default),timePickerLocale:Object.assign({},r.default)};return dl.default=n,dl}var vj;function EI(){if(vj)return ul;vj=1;var t=bs().default;Object.defineProperty(ul,"__esModule",{value:!0}),ul.default=void 0;var e=t(RC());return ul.default=e.default,ul}var bj;function OI(){if(bj)return ll;bj=1;var t=bs().default;Object.defineProperty(ll,"__esModule",{value:!0}),ll.default=void 0;var e=t(SI()),r=t(EI()),n=t(RC()),a=t(MC());const i="ليس ${label} من نوع ${type} صالحًا",o={locale:"ar",Pagination:e.default,DatePicker:n.default,TimePicker:a.default,Calendar:r.default,global:{placeholder:"يرجى التحديد",close:"إغلاق"},Table:{filterTitle:"الفلاتر",filterConfirm:"تأكيد",filterReset:"إعادة ضبط",selectAll:"اختيار الكل",selectInvert:"إلغاء الاختيار",selectionAll:"حدد جميع البيانات",sortTitle:"رتب",expand:"توسيع الصف",collapse:"طي الصف",triggerDesc:"ترتيب تنازلي",triggerAsc:"ترتيب تصاعدي",cancelSort:"إلغاء الترتيب"},Tour:{Next:"التالي",Previous:"السابق",Finish:"إنهاء"},Modal:{okText:"تأكيد",cancelText:"إلغاء",justOkText:"تأكيد"},Popconfirm:{okText:"تأكيد",cancelText:"إلغاء"},Transfer:{titles:["",""],searchPlaceholder:"ابحث هنا",itemUnit:"عنصر",itemsUnit:"عناصر"},Upload:{uploading:"جاري الرفع...",removeFile:"احذف الملف",uploadError:"مشكلة فى الرفع",previewFile:"استعرض الملف",downloadFile:"تحميل الملف"},Empty:{description:"لا توجد بيانات"},Icon:{icon:"أيقونة"},Text:{edit:"تعديل",copy:"نسخ",copied:"نقل",expand:"وسع"},Form:{defaultValidateMessages:{default:"خطأ في حقل الإدخال ${label}",required:"يرجى إدخال ${label}",enum:"${label} يجب أن يكون واحدا من [${enum}]",whitespace:"${label} لا يمكن أن يكون حرفًا فارغًا",date:{format:"${label} تنسيق التاريخ غير صحيح",parse:"${label} لا يمكن تحويلها إلى تاريخ",invalid:"تاريخ ${label} غير صحيح"},types:{string:i,method:i,array:i,object:i,number:i,date:i,boolean:i,integer:i,float:i,regexp:i,email:i,url:i,hex:i},string:{len:"يجب ${label} ان يكون ${len} أحرف",min:"${label} على الأقل ${min} أحرف",max:"${label} يصل إلى ${max} أحرف",range:"يجب ${label} ان يكون مابين ${min}-${max} أحرف"},number:{len:"${len} ان يساوي ${label} يجب",min:"${min} الأدنى هو ${label} حد",max:"${max} الأقصى هو ${label} حد",range:"${max}-${min} ان يكون مابين ${label} يجب"},array:{len:"يجب أن يكون ${label} طوله ${len}",min:"يجب أن يكون ${label} طوله الأدنى ${min}",max:"يجب أن يكون ${label} طوله الأقصى ${max}",range:"يجب أن يكون ${label} طوله مابين ${min}-${max}"},pattern:{mismatch:"لا يتطابق ${label} مع ${pattern}"}}},Image:{preview:"معاينة"},QRCode:{expired:"انتهت صلاحية رمز الاستجابة السريعة",refresh:"انقر للتحديث",scanned:"تم المسح"},ColorPicker:{presetEmpty:"لا يوجد",transparent:"شفاف",singleColor:"لون واحد",gradientColor:"تدرج لوني"}};return ll.default=o,ll}var gp,jj;function PI(){return jj||(jj=1,gp=OI()),gp}var TI=PI();const _C=it(TI);var ml={},gl={},wj;function II(){if(wj)return gl;wj=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.default=void 0;var t={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};return gl.default=t,gl}var xl={},yl={},vl={},Sj;function MI(){if(Sj)return vl;Sj=1;var t=bs().default;Object.defineProperty(vl,"__esModule",{value:!0}),vl.default=void 0;var e=t(TC()),r=IC(),n=(0,e.default)((0,e.default)({},r.commonLocale),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});return vl.default=n,vl}var bl={},Nj;function DC(){if(Nj)return bl;Nj=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.default=void 0;const t={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};return bl.default=t,bl}var Aj;function $C(){if(Aj)return yl;Aj=1;var t=bs().default;Object.defineProperty(yl,"__esModule",{value:!0}),yl.default=void 0;var e=t(MI()),r=t(DC());const n={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},e.default),timePickerLocale:Object.assign({},r.default)};return yl.default=n,yl}var Cj;function RI(){if(Cj)return xl;Cj=1;var t=bs().default;Object.defineProperty(xl,"__esModule",{value:!0}),xl.default=void 0;var e=t($C());return xl.default=e.default,xl}var kj;function _I(){if(kj)return ml;kj=1;var t=bs().default;Object.defineProperty(ml,"__esModule",{value:!0}),ml.default=void 0;var e=t(II()),r=t(RI()),n=t($C()),a=t(DC());const i="${label} is not a valid ${type}",o={locale:"en",Pagination:e.default,DatePicker:n.default,TimePicker:a.default,Calendar:r.default,global:{placeholder:"Please select",close:"Close"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:i,method:i,array:i,object:i,number:i,date:i,boolean:i,integer:i,float:i,regexp:i,email:i,url:i,hex:i},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};return ml.default=o,ml}var xp,Ej;function DI(){return Ej||(Ej=1,xp=_I()),xp}var $I=DI();const LI=it($I),LC=A.createContext(),je=()=>{const t=A.useContext(LC);if(!t)throw new Error("useLanguage must be used within LanguageProvider");return t},zI={ar:{home:"الرئيسية",about:"من نحن",consultants:"المستشارون",blog:"المدونة",contact:"اتصل بنا",login:"تسجيل الدخول",myAccount:"حسابي",requestConsultation:"طلب استشارة",heroTitle:"نحو قرارات اقتصادية واستثمارية أكثر جدوى",heroSubtitle:"استشارات اقتصادية وإدارية قائمة على التحليلات والقياس",bookConsultation:"احجز استشارة الآن",exploreServices:"استكشف الخدمات",services:"خدماتنا",economicConsulting:"الاستشارات الاقتصادية",feasibilityStudies:"دراسات الجدوى",economicAnalysis:"التحليل الاقتصادي والقياسي",videoConsultation:"استشارة فيديو/محادثة",reportsTemplates:"التقارير الاقتصادية والقوالب",ourConsultants:"مستشارونا",viewAllConsultants:"عرض جميع المستشارين",smartPlatform:"المنصة الذكية",instantBooking:"حجز استشارة فوري",dashboardReports:"تقارير لوحة تحليلية",supportSectors:"دعم القطاعين الحكومي والخاص",reports:"التقارير والتحليلات",viewAllReports:"عرض جميع التقارير",saudiEconomy2025:"اتجاهات الاقتصاد السعودي 2025",meccaProjects:"تحليل تأثير المشاريع الضخمة - مكة",investmentIndex:"مؤشر نشاط الاستثمار جدوى",testimonials:"آراء العملاء",partners:"شركاؤنا",quickLinks:"روابط سريعة",contactInfo:"معلومات الاتصال",privacy:"سياسة الخصوصية",terms:"الشروط والأحكام",copyright:"© 2025 منصة جدوى للاستشارات",dashboardOverview:"لوحة التحكم",platformPerformance:"نظرة عامة على أداء المنصة",activeClients:"العملاء النشطون",totalClients:"إجمالي العملاء",activeConsultants:"المستشارون النشطون",totalConsultants:"إجمالي المستشارين",completedSessions:"الجلسات المكتملة",totalSessions:"إجمالي الجلسات",pendingSessions:"الجلسات المعلقة",confirmedSessions:"الجلسات المؤكدة",monthlyRevenue:"الإيرادات الشهرية",totalRevenue:"إجمالي الإيرادات",revenueGrowth:"نمو الإيرادات",averageRating:"متوسط التقييم",totalRatings:"إجمالي التقييمات",cancelledSessions:"الجلسات الملغاة",totalBookings:"إجمالي الحجوزات",totalServices:"إجمالي الخدمات",activeServices:"الخدمات النشطة",totalArticles:"إجمالي المقالات",publishedArticles:"المقالات المنشورة",totalPayments:"إجمالي المدفوعات",pendingPayments:"المدفوعات المعلقة",totalReports:"إجمالي التقارير",monthlyRevenueTrend:"اتجاه الإيرادات الشهرية",sessionsStatus:"حالة الجلسات",servicesDistribution:"توزيع الخدمات",performanceComparison:"مقارنة الأداء",topConsultants:"أفضل المستشارين",recentBookings:"الحجوزات الأخيرة",revenueByMonth:"الإيرادات حسب الشهر",sessionsByStatus:"الجلسات حسب الحالة"},en:{home:"Home",about:"About",consultants:"Consultants",blog:"Blog",contact:"Contact Us",login:"Login",myAccount:"My Account",requestConsultation:"Request Consultation",heroTitle:"Towards More Viable Economic and Investment Decisions",heroSubtitle:"Economic and administrative consulting based on analytics and measurement",bookConsultation:"Book Consultation Now",exploreServices:"Explore Services",services:"Our Services",economicConsulting:"Economic Consultations",feasibilityStudies:"Feasibility Studies",economicAnalysis:"Economic & Econometric Analysis",videoConsultation:"Video/Chat Consultation",reportsTemplates:"Economic Reports & Templates",ourConsultants:"Our Consultants",viewAllConsultants:"View All Consultants",smartPlatform:"Smart Platform",instantBooking:"Instant Consultation Booking",dashboardReports:"Analytical Dashboard Reports",supportSectors:"Support for Government & Private Sectors",reports:"Reports & Analytics",viewAllReports:"View All Reports",saudiEconomy2025:"Saudi Economy Trends 2025",meccaProjects:"Mega Projects Impact Analysis – Makkah",investmentIndex:"Jadwa Investment Activity Index",testimonials:"Testimonials",partners:"Our Partners",quickLinks:"Quick Links",contactInfo:"Contact Information",privacy:"Privacy Policy",terms:"Terms & Conditions",copyright:"© 2025 Jadwa Consulting Platform",dashboardOverview:"Dashboard Overview",platformPerformance:"Platform performance overview",activeClients:"Active Clients",totalClients:"Total Clients",activeConsultants:"Active Consultants",totalConsultants:"Total Consultants",completedSessions:"Completed Sessions",totalSessions:"Total Sessions",pendingSessions:"Pending Sessions",confirmedSessions:"Confirmed Sessions",monthlyRevenue:"Monthly Revenue",totalRevenue:"Total Revenue",revenueGrowth:"Revenue Growth",averageRating:"Average Rating",totalRatings:"Total Ratings",cancelledSessions:"Cancelled Sessions",totalBookings:"Total Bookings",totalServices:"Total Services",activeServices:"Active Services",totalArticles:"Total Articles",publishedArticles:"Published Articles",totalPayments:"Total Payments",pendingPayments:"Pending Payments",totalReports:"Total Reports",monthlyRevenueTrend:"Monthly Revenue Trend",sessionsStatus:"Sessions Status",servicesDistribution:"Services Distribution",performanceComparison:"Performance Comparison",topConsultants:"Top Consultants",recentBookings:"Recent Bookings",revenueByMonth:"Revenue by Month",sessionsByStatus:"Sessions by Status"}},FI=({children:t})=>{const[e,r]=A.useState(()=>localStorage.getItem("language")||"ar");A.useEffect(()=>{localStorage.setItem("language",e),document.documentElement.setAttribute("dir",e==="ar"?"rtl":"ltr"),document.documentElement.setAttribute("lang",e)},[e]);const n=()=>{r(o=>o==="ar"?"en":"ar")},a=o=>zI[e]?.[o]||o,i=e==="ar"?_C:LI;return s.jsx(LC.Provider,{value:{language:e,setLanguage:r,toggleLanguage:n,t:a},children:s.jsx(CC,{locale:i,direction:e==="ar"?"rtl":"ltr",children:t})})},zC=A.createContext(),Fa=()=>{const t=A.useContext(zC);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t},BI=({children:t})=>{const[e,r]=A.useState("light"),[n,a]=A.useState(()=>{const l=localStorage.getItem("dashboardSettings");return l?JSON.parse(l):{logo:null,dashboardName:"Jadwa",dashboardNameAr:"جدوى",websiteLogo:null,websiteName:"Jadwa",websiteNameAr:"جدوى",primaryFont:"Titillium Web",arabicFont:"Amiri",animationsEnabled:!0,animationSpeed:"normal",primaryColor:"#7a8c66",secondaryColor:"#14b8a6"}});A.useEffect(()=>{document.documentElement.setAttribute("data-theme","light"),document.documentElement.classList.remove("dark");const l=document.documentElement;l.style.setProperty("--bg-primary","#ffffff"),l.style.setProperty("--bg-secondary","#f8f9fa"),l.style.setProperty("--text-primary","#1a1a1a"),l.style.setProperty("--text-secondary","#666666")},[]),A.useEffect(()=>{localStorage.setItem("dashboardSettings",JSON.stringify(n));const l=document.documentElement;l.style.setProperty("--font-primary",n.primaryFont),l.style.setProperty("--font-arabic",n.arabicFont),l.style.setProperty("--animation-enabled",n.animationsEnabled?"1":"0"),l.style.setProperty("--animation-speed",n.animationSpeed==="slow"?"0.5s":n.animationSpeed==="fast"?"0.2s":"0.3s"),l.style.setProperty("--color-primary",n.primaryColor),l.style.setProperty("--color-secondary",n.secondaryColor)},[n]);const i=()=>{},o=l=>{a(c=>({...c,...l}))};return s.jsx(zC.Provider,{value:{theme:e,toggleTheme:i,settings:n,updateSettings:o},children:t})},ci=t=>{if(typeof document>"u")return null;const r=`; ${document.cookie}`.split(`; ${t}=`);return r.length===2?r.pop().split(";").shift():null},vu=(t,e,r=7)=>{if(typeof document>"u")return;const n=new Date;n.setTime(n.getTime()+r*24*60*60*1e3),document.cookie=`${t}=${e};expires=${n.toUTCString()};path=/;SameSite=Lax`},id=t=>{typeof document>"u"||(document.cookie=`${t}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`)},ti="http://localhost:5000/api",od=()=>ci("accessToken"),qI=()=>{id("accessToken"),id("refreshToken")},G=async(t,e={})=>{const r=od(),n={...e,headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...e.headers}};try{const a=await fetch(`${ti}${t}`,n);if(!a)throw new Error("Cannot connect to server. Please make sure the backend server is running on http://localhost:5000");if(!a.ok){const i=await a.json().catch(()=>({error:"Network error"}));if(a.status===401&&(qI(),(window.location.pathname.startsWith("/admin")||window.location.pathname.startsWith("/client")||window.location.pathname.startsWith("/consultant"))&&window.location.pathname!=="/login"&&(sessionStorage.getItem("redirecting")||(sessionStorage.setItem("redirecting","true"),setTimeout(()=>{sessionStorage.removeItem("redirecting"),window.location.href="/login"},100)))),a.status!==401){const o=new Error(i.error||`HTTP error! status: ${a.status}`);throw o.status=a.status,o.response={status:a.status},o}else{const o=new Error(i.error||"Unauthorized. Please login again.");throw o.status=401,o.response={status:401},o}}return await a.json()}catch(a){if(a.message?.includes("Access denied")||a.message?.includes("not found")||a.message?.includes("Session not found")||a.message?.includes("Booking not found")||a.status===404||a.response?.status===404||a.message?.includes("403")||a.message?.includes("404")||console.error("API Error:",a),a.message.includes("Failed to fetch")||a.message.includes("ERR_CONNECTION_REFUSED")||a.name==="TypeError"){const o=new Error(`Cannot connect to backend server. Please:
1. Make sure the backend server is running (npm run dev in backend folder)
2. Check that the server is running on http://localhost:5000
3. Verify your .env file is configured correctly`);throw o.name="ConnectionError",o}throw a}},Ju={login:(t,e)=>G("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:e})}),register:t=>G("/auth/register",{method:"POST",body:JSON.stringify(t)}),getProfile:()=>G("/auth/profile"),updateProfile:t=>G("/auth/profile",{method:"PUT",body:JSON.stringify(t)}),changePassword:(t,e)=>G("/auth/change-password",{method:"PUT",body:JSON.stringify({currentPassword:t,newPassword:e})})},FC={getDashboardStats:()=>G("/client/dashboard/stats"),getBookings:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/client/bookings${e?`?${e}`:""}`)},getConsultations:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/client/consultations${e?`?${e}`:""}`)}},Ra={getEarnings:()=>G("/consultants/earnings"),getDashboardStats:()=>G("/consultants/dashboard/stats"),getConsultants:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/consultants${e?`?${e}`:""}`)},getConsultantById:t=>G(`/consultants/${t}`),getAvailability:(t,e)=>G(`/consultants/${t}/availability${e?`?date=${e}`:""}`),updateProfile:t=>G("/consultants/profile",{method:"PUT",body:JSON.stringify(t)}),requestWithdrawal:t=>G("/consultants/withdrawals/request",{method:"POST",body:JSON.stringify(t)}),setAvailability:t=>G("/consultants/availability",{method:"PUT",body:JSON.stringify({slots:t})})},Je={getDashboardStats:()=>G("/admin/dashboard/stats"),getClients:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/admin/clients${e?`?${e}`:""}`)},getConsultants:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/admin/consultants${e?`?${e}`:""}`)},getBookings:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/admin/bookings${e?`?${e}`:""}`)},updateBooking:(t,e)=>G(`/admin/bookings/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteBooking:t=>G(`/admin/bookings/${t}`,{method:"DELETE"}),createClient:t=>G("/admin/clients",{method:"POST",body:JSON.stringify(t)}),updateClient:(t,e)=>G(`/admin/clients/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteClient:t=>G(`/admin/clients/${t}`,{method:"DELETE"}),createConsultant:t=>G("/admin/consultants",{method:"POST",body:JSON.stringify(t)}),updateConsultant:(t,e)=>G(`/admin/consultants/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteConsultant:t=>G(`/admin/consultants/${t}`,{method:"DELETE"}),getPayments:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/admin/payments${e?`?${e}`:""}`)},getReports:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/admin/reports${e?`?${e}`:""}`)},reviewConsultant:(t,e)=>G(`/admin/consultants/${t}/review`,{method:"PUT",body:JSON.stringify({action:e})}),toggleUserStatus:(t,e)=>G(`/admin/users/${t}/status`,{method:"PUT",body:JSON.stringify({isActive:e})}),resetUserPassword:(t,e)=>G(`/admin/users/${t}/reset-password`,{method:"PUT",body:JSON.stringify({newPassword:e})}),getClientById:t=>G(`/admin/clients/${t}`),getClientBookings:t=>G(`/admin/clients/${t}/bookings`),getClientPayments:t=>G(`/admin/clients/${t}/payments`),getClientReports:t=>G(`/admin/clients/${t}/reports`),sendProfitToClient:(t,e,r)=>G(`/admin/clients/${t}/profit`,{method:"POST",body:JSON.stringify({amount:e,notes:r})}),deductFromClient:(t,e,r)=>G(`/admin/clients/${t}/deduct`,{method:"POST",body:JSON.stringify({amount:e,reason:r})}),suspendClient:(t,e,r)=>G(`/admin/clients/${t}/suspend`,{method:"POST",body:JSON.stringify({reason:e,duration:r})}),getConsultantById:t=>G(`/admin/consultants/${t}`),getConsultantBookings:t=>G(`/admin/consultants/${t}/bookings`),getConsultantEarnings:t=>G(`/admin/consultants/${t}/earnings`),getConsultantWithdrawals:t=>G(`/admin/consultants/${t}/withdrawals`),sendProfitToConsultant:(t,e,r)=>G(`/admin/consultants/${t}/profit`,{method:"POST",body:JSON.stringify({amount:e,notes:r})}),deductFromConsultant:(t,e,r)=>G(`/admin/consultants/${t}/deduct`,{method:"POST",body:JSON.stringify({amount:e,reason:r})}),suspendConsultant:(t,e,r)=>G(`/admin/consultants/${t}/suspend`,{method:"POST",body:JSON.stringify({reason:e,duration:r})}),exportReportsPDF:(t={})=>{const e=new URLSearchParams(t).toString();return`${ti}/admin/reports/export/pdf${e?`?${e}`:""}`},exportReportsCSV:(t={})=>{const e=new URLSearchParams(t).toString();return`${ti}/admin/reports/export/csv${e?`?${e}`:""}`},exportPaymentsCSV:(t={})=>{const e=new URLSearchParams(t).toString();return`${ti}/admin/payments/export/csv${e?`?${e}`:""}`},createDirectSession:(t,e="chat")=>G("/admin/sessions/direct",{method:"POST",body:JSON.stringify({userId:t,sessionType:e})}),deleteSession:t=>G(`/admin/sessions/${t}`,{method:"DELETE"}),stopSession:t=>G(`/admin/sessions/${t}/stop`,{method:"PUT"}),getAllUsers:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/admin/users${e?`?${e}`:""}`)}},Fs={getGeneralSettings:()=>G("/settings/general"),updateGeneralSettings:t=>G("/settings/general",{method:"PUT",body:JSON.stringify(t)}),getPaymentSettings:()=>G("/settings/payment"),updatePaymentSettings:t=>G("/settings/payment",{method:"PUT",body:JSON.stringify(t)}),getIntegrationSettings:()=>G("/settings/integration"),updateIntegrationSettings:t=>G("/settings/integration",{method:"PUT",body:JSON.stringify(t)})},rs={getServices:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/services${e?`?${e}`:""}`)},getServiceById:t=>G(`/services/${t}`),createService:t=>G("/services",{method:"POST",body:JSON.stringify(t)}),updateService:(t,e)=>G(`/services/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteService:t=>G(`/services/${t}`,{method:"DELETE"})},Ir={getBookings:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/bookings${e?`?${e}`:""}`)},getBookingById:t=>G(`/bookings/${t}`),createBooking:t=>G("/bookings",{method:"POST",body:JSON.stringify(t)}),updateBookingStatus:(t,e,r)=>G(`/bookings/${t}/status`,{method:"PUT",body:JSON.stringify({status:e,consultantNotes:r})}),cancelBooking:t=>G(`/bookings/${t}/cancel`,{method:"PUT"}),rateBooking:(t,e,r)=>G(`/bookings/${t}/rate`,{method:"POST",body:JSON.stringify({rating:e,comment:r})})},_l={getPages:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/cms${e?`?${e}`:""}`)},getPageBySlug:t=>G(`/cms/${t}`),createPage:t=>G("/cms",{method:"POST",body:JSON.stringify(t)}),updatePage:(t,e)=>G(`/cms/${t}`,{method:"PUT",body:JSON.stringify(e)}),deletePage:t=>G(`/cms/${t}`,{method:"DELETE"})},cr={getArticles:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/articles${e?`?${e}`:""}`)},getArticleById:t=>G(`/articles/id/${t}`),getArticleBySlug:t=>G(`/articles/${t}`),createArticle:t=>G("/articles",{method:"POST",body:JSON.stringify(t)}),updateArticle:(t,e)=>G(`/articles/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteArticle:t=>G(`/articles/${t}`,{method:"DELETE"}),publishArticle:t=>G(`/articles/${t}`,{method:"PUT",body:JSON.stringify({status:"PUBLISHED",publishedAt:new Date().toISOString()})})},Bs={getPermissions:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/permissions/permissions${e?`?${e}`:""}`)},getRoles:()=>G("/permissions/roles"),createRole:t=>G("/permissions/roles",{method:"POST",body:JSON.stringify(t)}),updateRole:(t,e)=>G(`/permissions/roles/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteRole:t=>G(`/permissions/roles/${t}`,{method:"DELETE"}),assignRoleToUser:(t,e,r)=>G(`/permissions/users/${t}/roles`,{method:"POST",body:JSON.stringify({roleId:e,expiresAt:r})}),getUserPermissions:t=>G(`/permissions/users/${t}/permissions`),initializePermissions:()=>G("/permissions/initialize",{method:"POST"})},Hr={uploadFile:async t=>{const e=od(),r=await fetch(`${ti}/files/upload`,{method:"POST",headers:{...e&&{Authorization:`Bearer ${e}`}},body:t});if(!r.ok){const n=await r.json().catch(()=>({error:`HTTP error! status: ${r.status}`}));throw new Error(n.error||`Failed to upload file: ${r.status}`)}return await r.json()},getFilesByOwner:(t,e)=>G(`/files/files?ownerType=${t}&ownerId=${e}`),downloadFile:t=>`${ti}/files/files/${t}/download?token=${od()}`,deleteFile:t=>G(`/files/files/${t}`,{method:"DELETE"})},It={getConversations:()=>G("/messages/conversations"),getMessages:t=>G(`/messages/session/${t}`),sendMessage:(t,e)=>G(`/messages/session/${t}`,{method:"POST",body:JSON.stringify(e)}),sendMessageAsAdmin:(t,e)=>G(`/messages/session/${t}/admin`,{method:"POST",body:JSON.stringify(e)}),markAsRead:t=>G(`/messages/session/${t}/read`,{method:"PUT"})},Tt={getSessionByBooking:t=>G(`/sessions/booking/${t}`),startSession:(t,e)=>G(`/sessions/booking/${t}/start`,{method:"POST",body:JSON.stringify({roomId:e})}),endSession:t=>G(`/sessions/booking/${t}/end`,{method:"POST"}),generateVideoRoom:t=>G(`/sessions/booking/${t}/video-room`,{method:"POST"}),getVideoRoom:t=>G(`/sessions/booking/${t}/video-room`)},Xu={getSystemLogs:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/monitoring/logs/system${e?`?${e}`:""}`)},getAuditLogs:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/monitoring/logs/audit${e?`?${e}`:""}`)},getSecurityStats:()=>G("/monitoring/security/stats")},Dl={getNotifications:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/notifications${e?`?${e}`:""}`)},markAsRead:t=>G(`/notifications/${t}/read`,{method:"PUT"}),markAllAsRead:()=>G("/notifications/read-all",{method:"PUT"}),deleteNotification:t=>G(`/notifications/${t}`,{method:"DELETE"}),sendNotification:t=>G("/notifications/send",{method:"POST",body:JSON.stringify(t)}),sendBulkNotifications:t=>G("/notifications/send-bulk",{method:"POST",body:JSON.stringify(t)}),getAllNotifications:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/notifications/all${e?`?${e}`:""}`)},getNotificationStats:()=>G("/notifications/stats")},Mr={getMyTickets:()=>G("/support/my-tickets"),getAllTickets:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/support${e?`?${e}`:""}`)},getTicketById:t=>G(`/support/${t}`),createTicket:t=>G("/support",{method:"POST",body:JSON.stringify(t)}),updateTicket:(t,e)=>G(`/support/${t}`,{method:"PUT",body:JSON.stringify(e)}),addComment:(t,e)=>G(`/support/${t}/comments`,{method:"POST",body:JSON.stringify({content:e})}),getTicketStats:()=>G("/support/stats/overview")},ld={getReports:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/reports${e?`?${e}`:""}`)},getReportById:t=>G(`/reports/${t}`),getPublicReports:()=>G("/reports/public"),getPublicReportById:t=>G(`/reports/public/${t}`),uploadReport:t=>{const e=od();return fetch(`${ti}/reports`,{method:"POST",headers:{...e&&{Authorization:`Bearer ${e}`}},body:t}).then(r=>r.json())},reviewReport:(t,e)=>G(`/reports/${t}/review`,{method:"PUT",body:JSON.stringify({status:e})})},Ui={getPartners:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/partners${e?`?${e}`:""}`)},getPartnerById:t=>G(`/partners/${t}`),createPartner:t=>G("/partners",{method:"POST",body:JSON.stringify(t)}),updatePartner:(t,e)=>G(`/partners/${t}`,{method:"PUT",body:JSON.stringify(e)}),deletePartner:t=>G(`/partners/${t}`,{method:"DELETE"})},$l={getCategories:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/categories${e?`?${e}`:""}`)},getCategoryById:t=>G(`/categories/${t}`),createCategory:t=>G("/categories",{method:"POST",body:JSON.stringify(t)}),updateCategory:(t,e)=>G(`/categories/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteCategory:t=>G(`/categories/${t}`,{method:"DELETE"})},Vi={getSliders:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/sliders${e?`?${e}`:""}`)},getSliderById:t=>G(`/sliders/${t}`),createSlider:t=>G("/sliders",{method:"POST",body:JSON.stringify(t)}),updateSlider:(t,e)=>G(`/sliders/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteSlider:t=>G(`/sliders/${t}`,{method:"DELETE"})},_a={authAPI:Ju,clientAPI:FC,consultantAPI:Ra,adminAPI:Je,servicesAPI:rs,bookingsAPI:Ir,notificationsAPI:Dl,cmsAPI:_l,articlesAPI:cr,permissionsAPI:Bs,filesAPI:Hr,sessionsAPI:Tt,monitoringAPI:Xu,messageAPI:It,settingsAPI:Fs,supportAPI:Mr,reportAPI:ld,partnersAPI:Ui,categoriesAPI:$l,slidersAPI:Vi},BC=A.createContext(null),UI=({children:t})=>{const[e,r]=A.useState(null),[n,a]=A.useState(!0),[i,o]=A.useState(!1);A.useEffect(()=>{l()},[]);const l=async()=>{if(!ci("accessToken")){a(!1);return}try{const g=await Ju.getProfile();r(g.user),o(!0)}catch(g){console.error("Auth check failed:",g),g.message&&g.message.includes("Unauthorized")?d():a(!1)}finally{a(!1)}},c=async(p,g)=>{try{const x=await Ju.login(p,g);return vu("accessToken",x.tokens.accessToken,7),vu("refreshToken",x.tokens.refreshToken,7),localStorage.setItem("accessToken",x.tokens.accessToken),localStorage.setItem("refreshToken",x.tokens.refreshToken),r(x.user),o(!0),_.success("Login successful!"),{success:!0,user:x.user}}catch(x){return _.error(x.message||"Login failed"),{success:!1,error:x.message}}},u=async p=>{try{const g=await Ju.register(p);return vu("accessToken",g.tokens.accessToken,7),vu("refreshToken",g.tokens.refreshToken,7),localStorage.setItem("accessToken",g.tokens.accessToken),localStorage.setItem("refreshToken",g.tokens.refreshToken),r(g.user),o(!0),_.success("Registration successful!"),{success:!0,user:g.user}}catch(g){return _.error(g.message||"Registration failed"),{success:!1,error:g.message}}},d=()=>{id("accessToken"),id("refreshToken"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),r(null),o(!1),_.info("Logged out successfully")},h={user:e,isAuthenticated:i,loading:n,login:c,register:u,logout:d,updateUser:p=>{r({...e,...p})},checkAuth:l};return s.jsx(BC.Provider,{value:h,children:t})},pr=()=>{const t=A.useContext(BC);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},yp=({children:t,requiredRole:e=null,adminOnly:r=!1})=>{let n;try{n=pr()}catch{return s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx(et,{size:"large"})})}const{isAuthenticated:a,loading:i,user:o,checkAuth:l}=n,c=wi();if(A.useEffect(()=>{ci("accessToken")&&!a&&!i&&l()},[c.pathname]),i)return s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx(et,{size:"large"})});const u=ci("accessToken");return!a&&!u?s.jsx(Dn,{to:"/login",state:{from:c},replace:!0}):u&&!a&&!i?s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx(et,{size:"large"})}):r&&!["ADMIN","SUPER_ADMIN","ANALYST","SUPPORT","FINANCE"].includes(o?.role)?o?.role==="CLIENT"?s.jsx(Dn,{to:"/client",replace:!0}):o?.role==="CONSULTANT"?s.jsx(Dn,{to:"/consultant",replace:!0}):s.jsx(Dn,{to:"/",replace:!0}):e&&o?.role!==e?o?.role==="CLIENT"?s.jsx(Dn,{to:"/client",replace:!0}):o?.role==="CONSULTANT"?s.jsx(Dn,{to:"/consultant",replace:!0}):["ADMIN","SUPER_ADMIN","ANALYST","SUPPORT","FINANCE"].includes(o?.role)?s.jsx(Dn,{to:"/admin",replace:!0}):s.jsx(Dn,{to:"/",replace:!0}):t};var VI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"}},{tag:"path",attrs:{d:"M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"}}]},name:"aim",theme:"outlined"},HI=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:VI}))},WI=A.forwardRef(HI),GI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"},YI=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:GI}))},Oj=A.forwardRef(YI),KI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"},JI=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:KI}))},ui=A.forwardRef(JI),XI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},QI=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:XI}))},Da=A.forwardRef(QI),ZI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},e5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:ZI}))},cd=A.forwardRef(e5),t5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},r5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:t5}))},n5=A.forwardRef(r5),a5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z"}}]},name:"audio",theme:"outlined"},s5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:a5}))},io=A.forwardRef(s5),i5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z"}}]},name:"bank",theme:"outlined"},o5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:i5}))},ib=A.forwardRef(o5),l5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},c5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:l5}))},oo=A.forwardRef(c5),u5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z"}}]},name:"bell",theme:"outlined"},d5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:u5}))},cc=A.forwardRef(d5),f5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zm-377.1-44.1c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-.6-.6-1.3-1.2-2-1.7l-78.2-78.2a9.11 9.11 0 00-12.8 0l-48 48a9.11 9.11 0 000 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256zm12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z"}}]},name:"bg-colors",theme:"outlined"},h5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:f5}))},Pj=A.forwardRef(h5),p5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"},m5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:p5}))},lo=A.forwardRef(m5),g5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M632 888H392c-4.4 0-8 3.6-8 8v32c0 17.7 14.3 32 32 32h192c17.7 0 32-14.3 32-32v-32c0-4.4-3.6-8-8-8zM512 64c-181.1 0-328 146.9-328 328 0 121.4 66 227.4 164 284.1V792c0 17.7 14.3 32 32 32h264c17.7 0 32-14.3 32-32V676.1c98-56.7 164-162.7 164-284.1 0-181.1-146.9-328-328-328zm127.9 549.8L604 634.6V752H420V634.6l-35.9-20.8C305.4 568.3 256 484.5 256 392c0-141.4 114.6-256 256-256s256 114.6 256 256c0 92.5-49.4 176.3-128.1 221.8z"}}]},name:"bulb",theme:"outlined"},x5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:g5}))},ud=A.forwardRef(x5),y5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M251.2 387H320v68.8c0 1.8 1.8 3.2 4 3.2h48c2.2 0 4-1.4 4-3.3V387h68.8c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H376v-68.8c0-1.8-1.8-3.2-4-3.2h-48c-2.2 0-4 1.4-4 3.2V331h-68.8c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm328 0h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 265h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 104h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm-195.7-81l61.2-74.9c4.3-5.2.7-13.1-5.9-13.1H388c-2.3 0-4.5 1-5.9 2.9l-34 41.6-34-41.6a7.85 7.85 0 00-5.9-2.9h-50.9c-6.6 0-10.2 7.9-5.9 13.1l61.2 74.9-62.7 76.8c-4.4 5.2-.8 13.1 5.8 13.1h50.8c2.3 0 4.5-1 5.9-2.9l35.5-43.5 35.5 43.5c1.5 1.8 3.7 2.9 5.9 2.9h50.8c6.6 0 10.2-7.9 5.9-13.1L383.5 675zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-36 732H180V180h664v664z"}}]},name:"calculator",theme:"outlined"},v5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:y5}))},qC=A.forwardRef(v5),b5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"},j5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:b5}))},ah=A.forwardRef(j5),w5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},S5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:w5}))},vt=A.forwardRef(S5),N5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},A5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:N5}))},UC=A.forwardRef(A5),C5={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},k5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:C5}))},uc=A.forwardRef(k5),E5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M594.3 601.5a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1 8 8 0 008 8.4H407c4.2 0 7.6-3.3 7.9-7.5 3.8-50.6 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H661a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.7-126.1zM512 578c-28.5 0-51.7-23.3-51.7-52s23.2-52 51.7-52 51.7 23.3 51.7 52-23.2 52-51.7 52zm416-354H768v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H548v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H328v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H96c-17.7 0-32 14.3-32 32v576c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32zm-40 568H136V296h120v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56h148v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56h148v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56h120v496z"}}]},name:"contacts",theme:"outlined"},O5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:E5}))},P5=A.forwardRef(O5),T5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},I5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:T5}))},ob=A.forwardRef(I5),M5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"},R5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:M5}))},VC=A.forwardRef(R5),_5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar",theme:"outlined"},D5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:_5}))},tr=A.forwardRef(D5),$5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 289.1a362.49 362.49 0 00-79.9-115.7 370.83 370.83 0 00-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 00169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0022.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"}}]},name:"environment",theme:"outlined"},L5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:$5}))},sh=A.forwardRef(L5),z5={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},F5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:z5}))},B5=A.forwardRef(F5),q5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z"}}]},name:"facebook",theme:"outlined"},U5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:q5}))},V5=A.forwardRef(U5),H5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},W5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:H5}))},G5=A.forwardRef(W5),Y5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0010.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 00-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"}}]},name:"file-excel",theme:"outlined"},K5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:Y5}))},J5=A.forwardRef(K5),X5={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"},Q5=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:X5}))},Z5=A.forwardRef(Q5),eM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-.7-29.9 8.3-33.4 21.4-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-pdf",theme:"outlined"},tM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:eM}))},dd=A.forwardRef(tM),rM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},nM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:rM}))},aM=A.forwardRef(nM),sM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 416H616c-4.4 0-8 3.6-8 8v112c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-56h60v320h-46c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h164c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8h-46V480h60v56c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V424c0-4.4-3.6-8-8-8zM656 296V168c0-4.4-3.6-8-8-8H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8z"}}]},name:"font-size",theme:"outlined"},iM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:sM}))},oM=A.forwardRef(iM),lM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.4 800.9c.2-.3.5-.6.7-.9C920.6 722.1 960 621.7 960 512s-39.4-210.1-104.8-288c-.2-.3-.5-.5-.7-.8-1.1-1.3-2.1-2.5-3.2-3.7-.4-.5-.8-.9-1.2-1.4l-4.1-4.7-.1-.1c-1.5-1.7-3.1-3.4-4.6-5.1l-.1-.1c-3.2-3.4-6.4-6.8-9.7-10.1l-.1-.1-4.8-4.8-.3-.3c-1.5-1.5-3-2.9-4.5-4.3-.5-.5-1-1-1.6-1.5-1-1-2-1.9-3-2.8-.3-.3-.7-.6-1-1C736.4 109.2 629.5 64 512 64s-224.4 45.2-304.3 119.2c-.3.3-.7.6-1 1-1 .9-2 1.9-3 2.9-.5.5-1 1-1.6 1.5-1.5 1.4-3 2.9-4.5 4.3l-.3.3-4.8 4.8-.1.1c-3.3 3.3-6.5 6.7-9.7 10.1l-.1.1c-1.6 1.7-3.1 3.4-4.6 5.1l-.1.1c-1.4 1.5-2.8 3.1-4.1 4.7-.4.5-.8.9-1.2 1.4-1.1 1.2-2.1 2.5-3.2 3.7-.2.3-.5.5-.7.8C103.4 301.9 64 402.3 64 512s39.4 210.1 104.8 288c.2.3.5.6.7.9l3.1 3.7c.4.5.8.9 1.2 1.4l4.1 4.7c0 .1.1.1.1.2 1.5 1.7 3 3.4 4.6 5l.1.1c3.2 3.4 6.4 6.8 9.6 10.1l.1.1c1.6 1.6 3.1 3.2 4.7 4.7l.3.3c3.3 3.3 6.7 6.5 10.1 9.6 80.1 74 187 119.2 304.5 119.2s224.4-45.2 304.3-119.2a300 300 0 0010-9.6l.3-.3c1.6-1.6 3.2-3.1 4.7-4.7l.1-.1c3.3-3.3 6.5-6.7 9.6-10.1l.1-.1c1.5-1.7 3.1-3.3 4.6-5 0-.1.1-.1.1-.2 1.4-1.5 2.8-3.1 4.1-4.7.4-.5.8-.9 1.2-1.4a99 99 0 003.3-3.7zm4.1-142.6c-13.8 32.6-32 62.8-54.2 90.2a444.07 444.07 0 00-81.5-55.9c11.6-46.9 18.8-98.4 20.7-152.6H887c-3 40.9-12.6 80.6-28.5 118.3zM887 484H743.5c-1.9-54.2-9.1-105.7-20.7-152.6 29.3-15.6 56.6-34.4 81.5-55.9A373.86 373.86 0 01887 484zM658.3 165.5c39.7 16.8 75.8 40 107.6 69.2a394.72 394.72 0 01-59.4 41.8c-15.7-45-35.8-84.1-59.2-115.4 3.7 1.4 7.4 2.9 11 4.4zm-90.6 700.6c-9.2 7.2-18.4 12.7-27.7 16.4V697a389.1 389.1 0 01115.7 26.2c-8.3 24.6-17.9 47.3-29 67.8-17.4 32.4-37.8 58.3-59 75.1zm59-633.1c11 20.6 20.7 43.3 29 67.8A389.1 389.1 0 01540 327V141.6c9.2 3.7 18.5 9.1 27.7 16.4 21.2 16.7 41.6 42.6 59 75zM540 640.9V540h147.5c-1.6 44.2-7.1 87.1-16.3 127.8l-.3 1.2A445.02 445.02 0 00540 640.9zm0-156.9V383.1c45.8-2.8 89.8-12.5 130.9-28.1l.3 1.2c9.2 40.7 14.7 83.5 16.3 127.8H540zm-56 56v100.9c-45.8 2.8-89.8 12.5-130.9 28.1l-.3-1.2c-9.2-40.7-14.7-83.5-16.3-127.8H484zm-147.5-56c1.6-44.2 7.1-87.1 16.3-127.8l.3-1.2c41.1 15.6 85 25.3 130.9 28.1V484H336.5zM484 697v185.4c-9.2-3.7-18.5-9.1-27.7-16.4-21.2-16.7-41.7-42.7-59.1-75.1-11-20.6-20.7-43.3-29-67.8 37.2-14.6 75.9-23.3 115.8-26.1zm0-370a389.1 389.1 0 01-115.7-26.2c8.3-24.6 17.9-47.3 29-67.8 17.4-32.4 37.8-58.4 59.1-75.1 9.2-7.2 18.4-12.7 27.7-16.4V327zM365.7 165.5c3.7-1.5 7.3-3 11-4.4-23.4 31.3-43.5 70.4-59.2 115.4-21-12-40.9-26-59.4-41.8 31.8-29.2 67.9-52.4 107.6-69.2zM165.5 365.7c13.8-32.6 32-62.8 54.2-90.2 24.9 21.5 52.2 40.3 81.5 55.9-11.6 46.9-18.8 98.4-20.7 152.6H137c3-40.9 12.6-80.6 28.5-118.3zM137 540h143.5c1.9 54.2 9.1 105.7 20.7 152.6a444.07 444.07 0 00-81.5 55.9A373.86 373.86 0 01137 540zm228.7 318.5c-39.7-16.8-75.8-40-107.6-69.2 18.5-15.8 38.4-29.7 59.4-41.8 15.7 45 35.8 84.1 59.2 115.4-3.7-1.4-7.4-2.9-11-4.4zm292.6 0c-3.7 1.5-7.3 3-11 4.4 23.4-31.3 43.5-70.4 59.2-115.4 21 12 40.9 26 59.4 41.8a373.81 373.81 0 01-107.6 69.2z"}}]},name:"global",theme:"outlined"},cM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:lM}))},na=A.forwardRef(cM),uM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"},dM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:uM}))},ny=A.forwardRef(dM),fM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},hM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:fM}))},ih=A.forwardRef(hM),pM={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},mM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:pM}))},gM=A.forwardRef(mM),xM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},yM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:xM}))},Qu=A.forwardRef(yM),vM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 306.9c-113.5 0-205.1 91.6-205.1 205.1S398.5 717.1 512 717.1 717.1 625.5 717.1 512 625.5 306.9 512 306.9zm0 338.4c-73.4 0-133.3-59.9-133.3-133.3S438.6 378.7 512 378.7 645.3 438.6 645.3 512 585.4 645.3 512 645.3zm213.5-394.6c-26.5 0-47.9 21.4-47.9 47.9s21.4 47.9 47.9 47.9 47.9-21.3 47.9-47.9a47.84 47.84 0 00-47.9-47.9zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zm-88 235.8c-7.3 18.2-16.1 31.8-30.2 45.8-14.1 14.1-27.6 22.9-45.8 30.2C695.2 844.7 570.3 840 512 840c-58.3 0-183.3 4.7-235.9-16.1-18.2-7.3-31.8-16.1-45.8-30.2-14.1-14.1-22.9-27.6-30.2-45.8C179.3 695.2 184 570.3 184 512c0-58.3-4.7-183.3 16.1-235.9 7.3-18.2 16.1-31.8 30.2-45.8s27.6-22.9 45.8-30.2C328.7 179.3 453.7 184 512 184s183.3-4.7 235.9 16.1c18.2 7.3 31.8 16.1 45.8 30.2 14.1 14.1 22.9 27.6 30.2 45.8C844.7 328.7 840 453.7 840 512c0 58.3 4.7 183.2-16.2 235.8z"}}]},name:"instagram",theme:"outlined"},bM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:vM}))},jM=A.forwardRef(bM),wM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.7 112H176.3c-35.5 0-64.3 28.8-64.3 64.3v671.4c0 35.5 28.8 64.3 64.3 64.3h671.4c35.5 0 64.3-28.8 64.3-64.3V176.3c0-35.5-28.8-64.3-64.3-64.3zm0 736c-447.8-.1-671.7-.2-671.7-.3.1-447.8.2-671.7.3-671.7 447.8.1 671.7.2 671.7.3-.1 447.8-.2 671.7-.3 671.7zM230.6 411.9h118.7v381.8H230.6zm59.4-52.2c37.9 0 68.8-30.8 68.8-68.8a68.8 68.8 0 10-137.6 0c-.1 38 30.7 68.8 68.8 68.8zm252.3 245.1c0-49.8 9.5-98 71.2-98 60.8 0 61.7 56.9 61.7 101.2v185.7h118.6V584.3c0-102.8-22.2-181.9-142.3-181.9-57.7 0-96.4 31.7-112.3 61.7h-1.6v-52.2H423.7v381.8h118.6V604.8z"}}]},name:"linkedin",theme:"outlined"},SM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:wM}))},NM=A.forwardRef(SM),AM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},CM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:AM}))},Ht=A.forwardRef(CM),kM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"},EM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:kM}))},lb=A.forwardRef(EM),OM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},PM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:OM}))},an=A.forwardRef(PM),TM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"},IM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:TM}))},oh=A.forwardRef(IM),MM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},RM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:MM}))},Ut=A.forwardRef(RM),_M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},DM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:_M}))},HC=A.forwardRef(DM),$M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},LM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:$M}))},zM=A.forwardRef(LM),FM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"},BM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:FM}))},cb=A.forwardRef(BM),qM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M877.1 238.7L770.6 132.3c-13-13-30.4-20.3-48.8-20.3s-35.8 7.2-48.8 20.3L558.3 246.8c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l89.6 89.7a405.46 405.46 0 01-86.4 127.3c-36.7 36.9-79.6 66-127.2 86.6l-89.6-89.7c-13-13-30.4-20.3-48.8-20.3a68.2 68.2 0 00-48.8 20.3L132.3 673c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l106.4 106.4c22.2 22.2 52.8 34.9 84.2 34.9 6.5 0 12.8-.5 19.2-1.6 132.4-21.8 263.8-92.3 369.9-198.3C818 606 888.4 474.6 910.4 342.1c6.3-37.6-6.3-76.3-33.3-103.4zm-37.6 91.5c-19.5 117.9-82.9 235.5-178.4 331s-213 158.9-330.9 178.4c-14.8 2.5-30-2.5-40.8-13.2L184.9 721.9 295.7 611l119.8 120 .9.9 21.6-8a481.29 481.29 0 00285.7-285.8l8-21.6-120.8-120.7 110.8-110.9 104.5 104.5c10.8 10.8 15.8 26 13.3 40.8z"}}]},name:"phone",theme:"outlined"},UM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:qM}))},aa=A.forwardRef(UM),VM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"},HM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:VM}))},ub=A.forwardRef(HM),WM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},GM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:WM}))},Zn=A.forwardRef(GM),YM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},KM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:YM}))},JM=A.forwardRef(KM),XM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917 211.1l-199.2 24c-6.6.8-9.4 8.9-4.7 13.6l59.3 59.3-226 226-101.8-101.7c-6.3-6.3-16.4-6.2-22.6 0L100.3 754.1a8.03 8.03 0 000 11.3l45 45.2c3.1 3.1 8.2 3.1 11.3 0L433.3 534 535 635.7c6.3 6.2 16.4 6.2 22.6 0L829 364.5l59.3 59.3a8.01 8.01 0 0013.6-4.7l24-199.2c.7-5.1-3.7-9.5-8.9-8.8z"}}]},name:"rise",theme:"outlined"},QM=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:XM}))},Tj=A.forwardRef(QM),ZM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"},eR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:ZM}))},fd=A.forwardRef(eR),tR={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"},rR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:tR}))},Kn=A.forwardRef(rR),nR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},aR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:nR}))},wa=A.forwardRef(aR),sR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zM402.9 528.8l-77.5 77.5a8.03 8.03 0 000 11.3l34 34c3.1 3.1 8.2 3.1 11.3 0l77.5-77.5c55.7 35.1 130.1 28.4 178.6-20.1 56.3-56.3 56.3-147.5 0-203.8-56.3-56.3-147.5-56.3-203.8 0-48.5 48.5-55.2 123-20.1 178.6zm65.4-133.3c31.3-31.3 82-31.3 113.2 0 31.3 31.3 31.3 82 0 113.2-31.3 31.3-82 31.3-113.2 0s-31.3-81.9 0-113.2z"}}]},name:"security-scan",theme:"outlined"},iR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:sR}))},oR=A.forwardRef(iR),lR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},cR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:lR}))},lh=A.forwardRef(cR),uR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},dR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:uR}))},co=A.forwardRef(dR),fR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},hR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:fR}))},pR=A.forwardRef(hR),mR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},gR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:mR}))},db=A.forwardRef(gR),xR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 264c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48zm-8 136H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM480 544H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 308H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm356.8-74.4c29-26.3 47.2-64.3 47.2-106.6 0-79.5-64.5-144-144-144s-144 64.5-144 144c0 42.3 18.2 80.3 47.2 106.6-57 32.5-96.2 92.7-99.2 162.1-.2 4.5 3.5 8.3 8 8.3h48.1c4.2 0 7.7-3.3 8-7.6C564 871.2 621.7 816 692 816s128 55.2 131.9 124.4c.2 4.2 3.7 7.6 8 7.6H880c4.6 0 8.2-3.8 8-8.3-2.9-69.5-42.2-129.6-99.2-162.1zM692 591c44.2 0 80 35.8 80 80s-35.8 80-80 80-80-35.8-80-80 35.8-80 80-80z"}}]},name:"solution",theme:"outlined"},yR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:xR}))},vR=A.forwardRef(yR),bR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1zM586 803L293.4 611.7l-18-11.7H146V424h129.4l17.9-11.7L586 221v582zm348-327H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zm-41.9 261.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344z"}}]},name:"sound",theme:"outlined"},jR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:bR}))},wR=A.forwardRef(jR),SR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},NR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:SR}))},uo=A.forwardRef(NR),AR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},CR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:AR}))},fo=A.forwardRef(CR),kR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},ER=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:kR}))},en=A.forwardRef(ER),OR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 160h-92v-40c0-4.4-3.6-8-8-8H256c-4.4 0-8 3.6-8 8v40h-92a44 44 0 00-44 44v148c0 81.7 60 149.6 138.2 162C265.7 630.2 359 721.7 476 734.5v105.2H280c-17.7 0-32 14.3-32 32V904c0 4.4 3.6 8 8 8h512c4.4 0 8-3.6 8-8v-32.3c0-17.7-14.3-32-32-32H548V734.5C665 721.7 758.3 630.2 773.8 514 852 501.6 912 433.7 912 352V204a44 44 0 00-44-44zM184 352V232h64v207.6a91.99 91.99 0 01-64-87.6zm520 128c0 49.1-19.1 95.4-53.9 130.1-34.8 34.8-81 53.9-130.1 53.9h-16c-49.1 0-95.4-19.1-130.1-53.9-34.8-34.8-53.9-81-53.9-130.1V184h384v296zm136-128c0 41-26.9 75.8-64 87.6V232h64v120z"}}]},name:"trophy",theme:"outlined"},PR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:OR}))},dc=A.forwardRef(PR),TR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 254.3c-30.6 13.2-63.9 22.7-98.2 26.4a170.1 170.1 0 0075-94 336.64 336.64 0 01-108.2 41.2A170.1 170.1 0 00672 174c-94.5 0-170.5 76.6-170.5 170.6 0 13.2 1.6 26.4 4.2 39.1-141.5-7.4-267.7-75-351.6-178.5a169.32 169.32 0 00-23.2 86.1c0 59.2 30.1 111.4 76 142.1a172 172 0 01-77.1-21.7v2.1c0 82.9 58.6 151.6 136.7 167.4a180.6 180.6 0 01-44.9 5.8c-11.1 0-21.6-1.1-32.2-2.6C211 652 273.9 701.1 348.8 702.7c-58.6 45.9-132 72.9-211.7 72.9-14.3 0-27.5-.5-41.2-2.1C171.5 822 261.2 850 357.8 850 671.4 850 843 590.2 843 364.7c0-7.4 0-14.8-.5-22.2 33.2-24.3 62.3-54.4 85.5-88.2z"}}]},name:"twitter",theme:"outlined"},IR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:TR}))},MR=A.forwardRef(IR),RR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zm-40 376H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"unlock",theme:"outlined"},_R=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:RR}))},Ij=A.forwardRef(_R),DR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},$R=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:DR}))},ir=A.forwardRef($R),LR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-delete",theme:"outlined"},zR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:LR}))},FR=A.forwardRef(zR),BR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},qR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:BR}))},ke=A.forwardRef(qR),UR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560zm176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"video-camera",theme:"outlined"},VR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:UR}))},ms=A.forwardRef(VR),HR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 464H528V448h312v128zm0 264H184V184h656v200H496c-17.7 0-32 14.3-32 32v192c0 17.7 14.3 32 32 32h344v200zM580 512a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"wallet",theme:"outlined"},WR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:HR}))},GR=A.forwardRef(WR),YR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},KR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:YR}))},JR=A.forwardRef(KR),XR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M713.5 599.9c-10.9-5.6-65.2-32.2-75.3-35.8-10.1-3.8-17.5-5.6-24.8 5.6-7.4 11.1-28.4 35.8-35 43.3-6.4 7.4-12.9 8.3-23.8 2.8-64.8-32.4-107.3-57.8-150-131.1-11.3-19.5 11.3-18.1 32.4-60.2 3.6-7.4 1.8-13.7-1-19.3-2.8-5.6-24.8-59.8-34-81.9-8.9-21.5-18.1-18.5-24.8-18.9-6.4-.4-13.7-.4-21.1-.4-7.4 0-19.3 2.8-29.4 13.7-10.1 11.1-38.6 37.8-38.6 92s39.5 106.7 44.9 114.1c5.6 7.4 77.7 118.6 188.4 166.5 70 30.2 97.4 32.8 132.4 27.6 21.3-3.2 65.2-26.6 74.3-52.5 9.1-25.8 9.1-47.9 6.4-52.5-2.7-4.9-10.1-7.7-21-13z"}},{tag:"path",attrs:{d:"M925.2 338.4c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"whats-app",theme:"outlined"},QR=function(e,r){return A.createElement(he,pe({},e,{ref:r,icon:XR}))},WC=A.forwardRef(QR);const{Header:ZR}=Qe,sn=()=>{const{t,language:e,toggleLanguage:r}=je(),{settings:n}=Fa(),a=nt(),i=wi(),[o,l]=A.useState(!1),c=()=>{const f=i.pathname;return f==="/"?"home":f.startsWith("/about")?"about":f.startsWith("/services")?"services":f.startsWith("/consultants")?"consultants":f.startsWith("/reports")?"reports":f.startsWith("/blog")?"blog":f.startsWith("/contact")?"contact":""},u=({key:f})=>{const h={home:"/",about:"/about",services:"/services",consultants:"/consultants",reports:"/reports",blog:"/blog",contact:"/contact"};h[f]&&(a(h[f]),l(!1))},d=[{key:"home",icon:s.jsx(ih,{}),label:t("home")},{key:"about",icon:s.jsx(Qu,{}),label:t("about")},{key:"services",icon:s.jsx(ui,{}),label:t("services")},{key:"consultants",icon:s.jsx(en,{}),label:t("consultants")},{key:"reports",icon:s.jsx(Ct,{}),label:t("reports")},{key:"blog",icon:s.jsx(lo,{}),label:t("blog")},{key:"contact",icon:s.jsx(P5,{}),label:t("contact")}];return s.jsxs(ZR,{className:"bg-white shadow-lg sticky top-0 z-50 px-3 sm:px-4 md:px-8 backdrop-blur-sm bg-white/95",style:{height:"auto",minHeight:"80px",paddingTop:"12px",paddingBottom:"12px"},children:[s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between h-20 sm:h-24 md:h-28",children:[s.jsx(Hl,{to:"/",className:"flex items-center gap-2 sm:gap-3 group flex-shrink-0",children:s.jsx("div",{className:"flex items-center mx-3 gap-2",children:n.websiteLogo?s.jsx("img",{src:n.websiteLogo,alt:n.websiteName||"Logo",className:"h-10 sm:h-12 md:h-14 w-auto object-contain"}):s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] rounded-lg flex items-center justify-center shadow-md group-hover:shadow-lg transition-all duration-300 group-hover:scale-110 group-hover:rotate-3",children:s.jsx(oo,{className:"text-white text-lg sm:text-xl md:text-2xl"})})})}),s.jsx("div",{className:"hidden lg:flex items-center gap-6 xl:gap-8 flex-1 justify-center",children:s.jsx(lc,{mode:"horizontal",items:d,onClick:u,selectedKeys:[c()],className:`border-0 bg-transparent font-semibold justify-center ${e==="ar"?"text-sm xl:text-base":"text-base xl:text-lg"}`,style:{borderBottom:"none"}})}),s.jsxs("div",{className:"hidden lg:flex items-center gap-3 xl:gap-4",children:[s.jsx(P,{type:"text",onClick:r,className:"text-[#1a4d3a] hover:text-[#2d5f4f] font-medium text-base xl:text-lg h-10 xl:h-11",children:e==="ar"?"EN":"AR"}),s.jsx(P,{type:"text",icon:s.jsx(ke,{}),onClick:()=>a("/login"),className:"text-gray-700 hover:text-[#1a4d3a] font-medium text-base xl:text-lg h-10 xl:h-11",children:t("login")}),s.jsx(P,{type:"primary",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] font-semibold shadow-md hover:shadow-lg transition-all hover:scale-105 h-10 xl:h-12 px-4 xl:px-6 text-sm xl:text-base",onClick:()=>a("/register"),children:t("requestConsultation")})]}),s.jsx(P,{type:"text",icon:s.jsx(oh,{}),className:"lg:hidden text-[#1a4d3a] hover:bg-gray-100",size:"large",onClick:()=>l(!0)})]}),s.jsxs(kC,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[n.websiteLogo?s.jsx("img",{src:n.websiteLogo,alt:n.websiteName||"Logo",className:"h-8 w-auto object-contain"}):s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] rounded-lg flex items-center justify-center",children:s.jsx(oo,{className:"text-white text-base"})}),s.jsx("span",{className:"font-bold text-lg",children:n.websiteName||"Jadwa"})]}),placement:e==="ar"?"right":"left",onClose:()=>l(!1),open:o,width:280,className:"mobile-drawer",children:[s.jsx(lc,{mode:"vertical",items:d,className:"border-0 mobile-menu",onClick:u}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 space-y-3",children:[s.jsx(P,{block:!0,onClick:()=>{r(),l(!1)},className:"mb-2 h-11 text-base",children:e==="ar"?"Switch to English":"التبديل إلى العربية"}),s.jsx(P,{block:!0,type:"primary",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] font-semibold h-11 text-base",onClick:()=>{a("/register"),l(!1)},children:t("requestConsultation")}),s.jsx(P,{block:!0,type:"text",icon:s.jsx(ke,{}),className:"h-11 text-base",onClick:()=>{a("/login"),l(!1)},children:t("login")})]})]})]})},e_=()=>{const{t,language:e}=je(),r=nt(),[n,a]=A.useState([]),[i,o]=A.useState(!0);A.useEffect(()=>{l()},[]);const l=async()=>{try{o(!0);const c=await Vi.getSliders({isActive:"true"});if(!c||!c.sliders){console.warn("Invalid slider response structure:",c),a([]);return}const u="http://localhost:5000/api".replace("/api","")||"http://localhost:5000",d=(c.sliders||[]).map(f=>{if(f.image){let h=f.image;/^https?:\/\//.test(h)?(h.includes(`${u}${u}`)&&(h=h.replace(`${u}${u}`,u)),f.image=h):(h=h.startsWith("/")?`${u}${h}`:`${u}/${h}`,f.image=h)}if(f.icon){let h=f.icon;/^https?:\/\//.test(h)?(h.includes(`${u}${u}`)&&(h=h.replace(`${u}${u}`,u)),f.icon=h):(h=h.startsWith("/")?`${u}${h}`:`${u}/${h}`,f.icon=h)}return f});a(d)}catch(c){console.error("Error fetching sliders:",c),a([])}finally{o(!1)}};return!i&&n.length===0?s.jsxs("div",{className:"relative min-h-[500px] lg:min-h-[600px] flex items-center justify-center overflow-hidden py-12 md:py-0",children:[s.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(https://images.unsplash.com/photo-1552664730-d307ca884978?w=1920)",filter:"brightness(0.3)"},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#1a4d3a]/60 via-[#2d5f4f]/50 to-[#1a4d3a]/60"})}),s.jsx("div",{className:`relative z-10 max-w-7xl mx-auto px-4 sm:px-6 md:px-8 ${e==="ar"?"text-right":"text-left"} w-full`,children:s.jsxs("div",{className:"max-w-4xl",children:[s.jsx("h1",{className:"!text-white text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold mb-4 sm:mb-6 leading-tight tracking-tight animate-fade-in-down",children:e==="ar"?"نحو قرارات اقتصادية أكثر جدوى":"Towards More Viable Economic Decisions"}),s.jsx("p",{className:"!text-white text-base sm:text-lg md:text-xl lg:text-2xl mb-6 sm:mb-8 md:mb-10 leading-relaxed font-light animate-fade-in-up animate-delay-200",children:e==="ar"?"منصة استشارية متكاملة تقدم حلولاً اقتصادية وإدارية ومالية قائمة على التحليل الكمي والقياس العلمي، لتساعد الشركات والأفراد والجهات الحكومية على اتخاذ قرارات أكثر دقة وكفاءة":"An integrated consulting platform offering economic, administrative, and financial solutions based on quantitative analysis and scientific measurement, helping companies, individuals, and government entities make more accurate and efficient decisions"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center animate-fade-in-up animate-delay-400",children:[s.jsx(P,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 h-12 sm:h-14 px-6 sm:px-8 md:px-10 text-base sm:text-lg font-semibold text-[#1a4d3a] shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 animate-pulse-once w-full sm:w-auto",icon:e==="ar"?s.jsx(Da,{}):s.jsx(Zn,{}),onClick:()=>r("/register"),children:e==="ar"?"احجز استشارة الآن":"Book a Consultation Now"}),s.jsx(P,{size:"large",className:"bg-transparent hover:bg-white/10 border-2 border-white text-white h-12 sm:h-14 px-6 sm:px-8 md:px-10 text-base sm:text-lg font-semibold backdrop-blur-sm hover:border-[#d4af37] hover:text-[#d4af37] transition-all duration-300 hover-scale w-full sm:w-auto",onClick:()=>r("/services"),children:e==="ar"?"تعرف على خدماتنا":"Learn More About Our Services"})]})]})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-white via-white/90 to-transparent"})]}):s.jsx(mI,{autoplay:!0,effect:"fade",className:"slider-carousel",children:n.map((c,u)=>{const d=e==="ar"&&c.titleAr||c.title,f=e==="ar"&&c.subtitleAr||c.subtitle,h=e==="ar"&&c.descriptionAr||c.description,p=e==="ar"&&c.buttonTextAr||c.buttonText;return s.jsx("div",{children:s.jsxs("div",{className:"relative min-h-[500px] lg:min-h-[600px] flex items-center justify-center overflow-hidden py-12 md:py-0",children:[s.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:c.image?`url(${c.image})`:"url(https://images.unsplash.com/photo-1552664730-d307ca884978?w=1920)",filter:"brightness(0.3)"},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#1a4d3a]/60 via-[#2d5f4f]/50 to-[#1a4d3a]/60"})}),s.jsx("div",{className:`relative z-10 max-w-7xl mx-auto px-4 sm:px-6 md:px-8 ${e==="ar"?"text-right":"text-left"} w-full`,children:s.jsxs("div",{className:"max-w-4xl",children:[c.icon&&s.jsx("div",{className:"mb-4 sm:mb-6 animate-fade-in-down",children:s.jsx("img",{src:c.icon,alt:"Slider Icon",className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 object-contain"})}),d&&s.jsx("h1",{className:"!text-white text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold mb-4 sm:mb-6 leading-tight tracking-tight animate-fade-in-down",children:d}),f&&s.jsx("p",{className:"!text-white text-base sm:text-lg md:text-xl lg:text-2xl mb-3 sm:mb-4 leading-relaxed font-light animate-fade-in-up animate-delay-200",children:f}),h&&s.jsx("p",{className:"!text-gray-200 text-sm sm:text-base md:text-lg mb-6 sm:mb-8 md:mb-10 leading-relaxed font-light animate-fade-in-up animate-delay-300",children:h}),p&&c.buttonLink&&s.jsx("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center animate-fade-in-up animate-delay-400",children:s.jsx(P,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 h-12 sm:h-14 px-6 sm:px-8 md:px-10 text-base sm:text-lg font-semibold text-[#1a4d3a] shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 w-full sm:w-auto",icon:e==="ar"?s.jsx(Da,{}):s.jsx(Zn,{}),onClick:()=>{c.buttonLink.startsWith("http")?window.open(c.buttonLink,"_blank"):r(c.buttonLink)},children:p})})]})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-white via-white/90 to-transparent"})]})},c.id)})})},t_=()=>{const{language:t}=je(),e=[{icon:Kn,title:t==="ar"?"النزاهة":"Integrity",description:t==="ar"?"نلتزم بأعلى معايير الأخلاقيات والشفافية":"We commit to the highest standards of ethics and transparency"},{icon:fd,title:t==="ar"?"الاحتراف":"Professionalism",description:t==="ar"?"فريق من الخبراء المعتمدين ذوي الخبرة الواسعة":"A team of certified experts with extensive experience"},{icon:ud,title:t==="ar"?"التحليل العلمي":"Scientific Analysis",description:t==="ar"?"اعتماد على أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي":"Relying on econometric analysis tools and artificial intelligence"},{icon:fd,title:t==="ar"?"الابتكار":"Innovation",description:t==="ar"?"استخدام أحدث التقنيات والأدوات في التحليل والاستشارات":"Using the latest technologies and tools in analysis and consulting"},{icon:ny,title:t==="ar"?"الموثوقية":"Reliability",description:t==="ar"?"نتائج موثوقة ودقيقة قائمة على البيانات والأبحاث":"Reliable and accurate results based on data and research"}],r=({Icon:n})=>s.jsx(n,{className:"text-2xl sm:text-3xl"});return s.jsx("section",{className:"py-12 sm:py-16 md:py-20 lg:py-28 bg-gradient-to-b from-white to-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[s.jsxs("div",{className:"text-center mb-8 sm:mb-12 md:mb-16 animate-fade-in-down",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold mb-3 sm:mb-4 text-gray-900",children:t==="ar"?"من نحن":"About Us"}),s.jsx("div",{className:"w-16 sm:w-20 md:w-24 h-1 bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] mx-auto mb-6 sm:mb-8"})]}),s.jsxs(ie,{gutter:[16,24],className:"sm:gutter-[24] md:gutter-[32] mb-8 sm:mb-12 md:mb-16",children:[s.jsx($,{xs:24,lg:12,children:s.jsxs("div",{className:`${t==="ar"?"text-right":"text-left"}`,children:[s.jsx("h3",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-4 sm:mb-6 text-[#1a4d3a]",children:t==="ar"?"جدوى للاستشارات الإدارية والاقتصادية":"Jadwa for Administrative and Economic Consulting"}),s.jsx("p",{className:"text-sm sm:text-base md:text-lg text-gray-700 mb-4 sm:mb-6 leading-relaxed",children:t==="ar"?"هي منصة سعودية متخصصة في تقديم الخدمات الاستشارية عالية الجودة في مجالات الاقتصاد، الإدارة، والتمويل. نسعى من خلال فريق من الخبراء الأكاديميين والمستشارين المعتمدين إلى تمكين القرارات الاستثمارية والإدارية بالاعتماد على أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي.":"A Saudi platform specialized in providing high-quality consulting services in the fields of economics, management, and finance. Through a team of academic experts and certified consultants, we seek to empower investment and administrative decisions by relying on econometric analysis tools and artificial intelligence."})]})}),s.jsx($,{xs:24,lg:12,children:s.jsx("div",{className:`${t==="ar"?"text-right":"text-left"}`,children:s.jsx(V,{className:"h-full border-0 shadow-lg rounded-xl sm:rounded-2xl bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] text-white",children:s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 flex items-center gap-2",children:[s.jsx(vt,{}),t==="ar"?"رسالتنا":"Our Mission"]}),s.jsx("p",{className:"text-sm sm:text-base text-gray-100 leading-relaxed",children:t==="ar"?"دعم صُنّاع القرار والمستثمرين والمشروعات عبر استشارات علمية وعملية موثوقة.":"Supporting decision-makers, investors, and projects through reliable scientific and practical consultations."})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 flex items-center gap-2",children:[s.jsx(ud,{}),t==="ar"?"رؤيتنا":"Our Vision"]}),s.jsx("p",{className:"text-sm sm:text-base text-gray-100 leading-relaxed",children:t==="ar"?"أن نكون المنصة الأولى في العالم العربي في التحليل والاستشارات الاقتصادية المبنية على القياس الكمي.":"To be the leading platform in the Arab world for quantitative-based economic analysis and consulting."})]})]})})})})]}),s.jsxs("div",{className:"mt-8 sm:mt-12 md:mt-16",children:[s.jsx("h3",{className:"text-2xl sm:text-3xl font-bold mb-6 sm:mb-8 text-center text-gray-900",children:t==="ar"?"قيمنا":"Our Values"}),s.jsx(ie,{gutter:[16,16],className:"sm:gutter-[20] md:gutter-[24]",children:e.map((n,a)=>s.jsx($,{xs:24,sm:12,lg:6,children:s.jsxs(V,{className:"h-full border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-xl sm:rounded-2xl text-center hover-lift card-entrance",style:{animationDelay:`${a*.1}s`},styles:{body:{padding:"24px 20px"}},children:[s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] flex items-center justify-center text-white mx-auto mb-4 sm:mb-6 shadow-lg",children:s.jsx(r,{Icon:n.icon})}),s.jsx("h4",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-gray-900",children:n.title}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 leading-relaxed",children:n.description})]})},a))})]})]})})},r_=()=>{const{t,language:e}=je(),r=nt(),[n,a]=A.useState([]),[i,o]=A.useState(!0);A.useEffect(()=>{l()},[]);const l=async()=>{try{o(!0);const d=await rs.getServices({status:"ACTIVE"});a(d.services||[])}catch(d){console.error("Error fetching services:",d),a([])}finally{o(!1)}},c=d=>({ECONOMIC:s.jsx(oo,{}),ADMINISTRATIVE:s.jsx(en,{}),FINANCIAL_ACCOUNTING:s.jsx(tr,{}),ANALYSIS_REPORTS:s.jsx(Ct,{}),FIELD_SURVEY:s.jsx(Un,{}),DIGITAL_CUSTOMER:s.jsx(ms,{})})[d]||s.jsx(EC,{}),u=d=>({ECONOMIC:"from-olive-green-500 to-olive-green-600",ADMINISTRATIVE:"from-turquoise-500 to-turquoise-600",FINANCIAL_ACCOUNTING:"from-olive-green-400 to-turquoise-500",ANALYSIS_REPORTS:"from-turquoise-400 to-olive-green-500",FIELD_SURVEY:"from-olive-green-600 to-turquoise-600",DIGITAL_CUSTOMER:"from-turquoise-500 to-olive-green-500"})[d]||"from-olive-green-500 to-turquoise-500";return s.jsx("section",{className:"py-12 sm:py-16 md:py-20 lg:py-28 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[s.jsxs("div",{className:"text-center mb-8 sm:mb-12 md:mb-16 animate-fade-in-down",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold mb-3 sm:mb-4 text-gray-900",children:t("services")}),s.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-gray-600 max-w-3xl mx-auto px-4",children:e==="ar"?"نقدم مجموعة شاملة من الخدمات الاستشارية المتخصصة":"We offer a comprehensive range of specialized consulting services"})]}),i?s.jsx("div",{className:"flex justify-center items-center py-12 sm:py-16 md:py-20",children:s.jsx(et,{size:"large"})}):n.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5 md:gap-6",children:n.slice(0,4).map((d,f)=>s.jsxs(V,{className:"h-full border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-xl sm:rounded-2xl overflow-hidden group hover-lift card-entrance flex flex-col",style:{animationDelay:`${f*.1}s`},styles:{body:{padding:"20px 16px",display:"flex",flexDirection:"column",flex:1}},children:[s.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold mb-3 sm:mb-4 text-gray-900 min-h-[48px] sm:min-h-[56px]",children:e==="ar"&&d.titleAr||d.title}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6 leading-relaxed min-h-[60px] sm:min-h-[72px] line-clamp-3 flex-grow",children:e==="ar"&&d.descriptionAr||d.description}),d.price&&d.price>0&&s.jsxs("div",{className:"mb-3 sm:mb-4 text-[#1a4d3a] font-bold text-base sm:text-lg",children:[d.price," ",e==="ar"?"ريال":"SAR"]}),s.jsx(P,{type:"primary",className:"w-full bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 h-10 sm:h-11 font-semibold text-sm sm:text-base shadow-md hover:shadow-lg transition-all duration-300 mb-4",onClick:()=>r("/services"),children:e==="ar"?"طلب عرض تجريبي":"Request Demo"}),s.jsx("div",{className:`w-12 h-12 sm:w-14 sm:h-14 rounded-xl sm:rounded-2xl bg-gradient-to-br ${u(d.category)} flex items-center justify-center text-white mx-auto group-hover:scale-110 transition-transform duration-300 shadow-lg text-xl sm:text-2xl`,children:c(d.category)})]},d.id))}),n.length>4&&s.jsx("div",{className:"text-center mt-8 sm:mt-10 md:mt-12",children:s.jsx(P,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-12 sm:h-14 px-8 sm:px-10 md:px-12 text-base sm:text-lg font-semibold shadow-lg hover:shadow-xl transition-all",icon:e==="ar"?s.jsx(Da,{}):s.jsx(ty,{}),onClick:()=>r("/services"),children:e==="ar"?"عرض جميع الخدمات":"Show All Services"})})]}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:e==="ar"?"لا توجد خدمات متاحة حالياً":"No services available at the moment"})]})})},n_=({limit:t=null,showViewAll:e=!0})=>{const{t:r,language:n}=je(),a=nt(),[i,o]=A.useState([]),[l,c]=A.useState(!0);A.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const d={isAvailable:!0};t&&(d.limit=t);const f=await Ra.getConsultants(d);o(f.consultants||[])}catch(d){console.error("Error fetching consultants:",d)}finally{c(!1)}};return s.jsx("section",{className:"py-12 sm:py-16 md:py-20 lg:py-28 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[s.jsxs("div",{className:"text-center mb-8 sm:mb-12 md:mb-16",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold mb-3 sm:mb-4 text-gray-900",children:r("ourConsultants")}),s.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-gray-600 max-w-3xl mx-auto px-4",children:n==="ar"?"فريق من المستشارين المتخصصين ذوي الخبرة الواسعة":"A team of specialized consultants with extensive experience"})]}),l?s.jsx("div",{className:"flex justify-center items-center py-12 sm:py-16 md:py-20",children:s.jsx(et,{size:"large"})}):i.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8 mb-8 sm:mb-10 md:mb-12",children:i.map((d,f)=>{const h=`${d.firstName||""} ${d.lastName||""}`.trim()||d.user?.email||"Consultant";return s.jsxs(V,{className:"text-center border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-xl sm:rounded-2xl hover-lift card-entrance",style:{animationDelay:`${f*.1}s`},styles:{body:{padding:"24px 20px"}},hoverable:!0,children:[s.jsx(at,{size:{xs:80,sm:100,md:120},src:d.user?.avatar,icon:s.jsx(ke,{}),className:"mb-4 sm:mb-6 border-4 border-white shadow-xl"}),s.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-gray-900",children:h}),d.specialization&&s.jsx("p",{className:"text-[#1a4d3a] mb-3 sm:mb-4 font-semibold text-sm sm:text-base",children:d.specialization}),d.rating&&s.jsx(ra,{disabled:!0,defaultValue:d.rating,allowHalf:!0,className:"mb-4 sm:mb-6 text-sm sm:text-base",style:{color:"#d4af37"}}),s.jsx(P,{type:"primary",className:"w-full bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 h-10 sm:h-11 font-semibold text-sm sm:text-base shadow-md hover:shadow-lg transition-all",onClick:()=>a(`/consultants/${d.id}`),children:n==="ar"?"عرض الملف الشخصي":"View Profile"})]},d.id)})}):s.jsx("div",{className:"text-center py-8 sm:py-12 text-gray-500 text-sm sm:text-base",children:n==="ar"?"لا يوجد مستشارون متاحون حالياً":"No consultants available at the moment"}),e&&s.jsx("div",{className:"text-center",children:s.jsx(P,{size:"large",type:"primary",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-12 sm:h-14 px-8 sm:px-10 md:px-12 text-base sm:text-lg font-semibold shadow-lg hover:shadow-xl transition-all w-full sm:w-auto",icon:n==="ar"?s.jsx(ty,{}):s.jsx(ty,{}),onClick:()=>a("/consultants"),children:r("viewAllConsultants")})})]})})},a_=()=>{const{language:t}=je(),e=[{title:t==="ar"?"اختر نوع الاستشارة":"Choose Service Type",description:t==="ar"?"اقتصادية – مالية – إدارية – دراسة جدوى – تحليل قياسي":"Economic – Financial – Administrative – Feasibility Study – Econometric Analysis",icon:s.jsx(vt,{className:"text-3xl"})},{title:t==="ar"?"احجز موعدك":"Book Your Appointment",description:t==="ar"?"عبر الجلسة المرئية أو الدردشة أو الطلب الكتابي":"Via video session, chat, or written request",icon:s.jsx(Dt,{className:"text-3xl"})},{title:t==="ar"?"قم بالدفع الإلكتروني":"Make Payment",description:t==="ar"?"باستخدام مدى أو Apple Pay أو البطاقة الائتمانية":"Using Mada, Apple Pay, or credit card",icon:s.jsx(ob,{className:"text-3xl"})},{title:t==="ar"?"احصل على تقريرك":"Get Your Report",description:t==="ar"?"عبر لوحة التحكم الخاصة بك أو البريد الإلكتروني":"Via your dashboard or email",icon:s.jsx(Ct,{className:"text-3xl"})}];return s.jsx("section",{className:"py-20 md:py-28 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:t==="ar"?"آلية العمل في المنصة":"How It Works"}),s.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:t==="ar"?"خطوات بسيطة للحصول على استشارة متخصصة":"Simple steps to get specialized consultation"})]}),s.jsx("div",{className:"max-w-5xl mx-auto",children:s.jsx(rh,{direction:"horizontal",current:-1,items:e.map((r,n)=>({title:s.jsxs("div",{className:`${t==="ar"?"text-right":"text-left"} mt-4`,children:[s.jsx("div",{className:"text-xl font-bold text-gray-900 mb-2",children:r.title}),s.jsx("div",{className:"text-gray-600 text-sm",children:r.description})]}),icon:s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] flex items-center justify-center text-white shadow-lg",children:r.icon}),status:"finish"})),className:"mb-12"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mt-12",children:e.map((r,n)=>s.jsxs(V,{className:"border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl text-center",styles:{body:{padding:"32px"}},children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] flex items-center justify-center text-white mx-auto mb-6 shadow-lg",children:r.icon}),s.jsx("div",{className:"text-3xl font-bold text-[#1a4d3a] mb-3",children:n+1}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:r.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:r.description})]},n))})]})})},s_=()=>{const{t,language:e}=je(),r=[{icon:s.jsx(Dt,{className:"text-4xl"}),title:t("instantBooking"),description:e==="ar"?"احجز استشارة في أي وقت مع مستشارك المفضل بسهولة وسرعة":"Book a consultation anytime with your preferred consultant easily and quickly",color:"from-olive-green-500 to-olive-green-600"},{icon:s.jsx(VC,{className:"text-4xl"}),title:t("dashboardReports"),description:e==="ar"?"لوحة تحليلية شاملة مع تقارير مفصلة ورسوم بيانية تفاعلية":"Comprehensive analytical dashboard with detailed reports and interactive charts",color:"from-turquoise-500 to-turquoise-600"},{icon:s.jsx(ib,{className:"text-4xl"}),title:t("supportSectors"),description:e==="ar"?"خدمات مخصصة للقطاعين الحكومي والخاص مع حلول متكاملة":"Customized services for government and private sectors with integrated solutions",color:"from-olive-green-400 to-turquoise-500"}];return s.jsx("section",{className:"py-20 md:py-28 bg-gradient-to-br from-[#f0f7f4] to-[#e8f5f0]",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:t("smartPlatform")}),s.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"منصة ذكية تجمع بين التكنولوجيا والخبرة الاستشارية":"A smart platform that combines technology and consulting expertise"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:r.map((n,a)=>s.jsxs(V,{className:"text-center bg-white border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl",styles:{body:{padding:"40px 32px"}},children:[s.jsx("div",{className:`w-24 h-24 rounded-2xl bg-gradient-to-br ${n.color} flex items-center justify-center text-white mx-auto mb-6 shadow-lg`,children:n.icon}),s.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:n.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:n.description})]},a))})]})})},GC=()=>{const{t,language:e}=je(),r=nt(),n=[{id:1,title:t("saudiEconomy2025"),description:e==="ar"?"تحليل شامل لاتجاهات الاقتصاد السعودي وتوقعات 2025":"Comprehensive analysis of Saudi economy trends and 2025 forecasts",image:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=800",category:e==="ar"?"تحليل اقتصادي":"Economic Analysis"},{id:2,title:t("meccaProjects"),description:e==="ar"?"دراسة تأثير المشاريع الضخمة في مكة المكرمة على الاقتصاد":"Study of mega projects impact in Makkah on the economy",image:"https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=800",category:e==="ar"?"دراسة جدوى":"Feasibility Study"},{id:3,title:t("investmentIndex"),description:e==="ar"?"مؤشر نشاط الاستثمار في المملكة العربية السعودية":"Investment activity index in Saudi Arabia",image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800",category:e==="ar"?"مؤشرات":"Indicators"}];return s.jsx("section",{className:"py-20 md:py-28 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:t("reports")}),s.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"تقارير وتحليلات اقتصادية شاملة ومحدثة":"Comprehensive and up-to-date economic reports and analyses"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:n.map(a=>s.jsx(V,{className:"overflow-hidden border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl group",styles:{body:{padding:"0"}},hoverable:!0,cover:s.jsxs("div",{className:"relative h-64 overflow-hidden",children:[s.jsx("img",{alt:a.title,src:a.image,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),s.jsx("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-[#d4af37] to-[#f4d03f] text-[#1a4d3a] px-4 py-2 rounded-full text-sm font-semibold shadow-lg",children:a.category}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Ct,{className:"text-[#1a4d3a] text-xl mr-2"}),s.jsx("span",{className:"text-sm text-gray-500 font-medium",children:a.category})]}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900 min-h-[56px]",children:a.title}),s.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed min-h-[72px]",children:a.description}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(P,{type:"primary",icon:s.jsx(ur,{}),className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 flex-1 font-semibold shadow-md hover:shadow-lg transition-all",onClick:()=>r(`/reports/${a.id}`),children:e==="ar"?"عرض":"View"}),s.jsx(P,{icon:s.jsx(Rr,{}),className:"border-2 border-[#1a4d3a] text-[#1a4d3a] hover:bg-[#1a4d3a] hover:text-white font-semibold transition-all",children:e==="ar"?"تحميل":"Download"})]})]})},a.id))}),s.jsx("div",{className:"text-center",children:s.jsx(P,{size:"large",type:"primary",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-14 px-12 text-lg font-semibold shadow-lg hover:shadow-xl transition-all",onClick:()=>r("/reports"),children:t("viewAllReports")})})]})})},i_=()=>{const{t,language:e}=je(),r=[{id:1,name:e==="ar"?"أحد عملاء المنصة":"Platform Client",company:e==="ar"?"شركة تطوير الأعمال 2025":"Business Development Company 2025",rating:5,text:e==="ar"?"خدمة متميزة تجمع بين التحليل العلمي والرؤية الاقتصادية الدقيقة.":"Distinguished service that combines scientific analysis and accurate economic vision.",avatar:"https://i.pravatar.cc/150?img=12"},{id:2,name:e==="ar"?"مستثمر من مكة المكرمة":"Investor from Makkah",company:e==="ar"?"مستثمر":"Investor",rating:5,text:e==="ar"?"دراسة الجدوى التي حصلنا عليها من جدوى ساعدتنا في اتخاذ قرار استثماري ناجح.":"The feasibility study we obtained from Jadwa helped us make a successful investment decision.",avatar:"https://i.pravatar.cc/150?img=47"},{id:3,name:e==="ar"?"أحد عملاء المنصة":"Platform Client",company:e==="ar"?"شركة استثمارية":"Investment Company",rating:5,text:e==="ar"?"التحليلات الاقتصادية المقدمة ساعدتنا في فهم السوق بشكل أفضل واتخاذ قرارات مدروسة.":"The economic analyses provided helped us better understand the market and make informed decisions.",avatar:"https://i.pravatar.cc/150?img=33"}];return s.jsx("section",{className:"py-16 md:py-24 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"section-title",children:t("testimonials")}),s.jsx("p",{className:"section-subtitle",children:e==="ar"?"ماذا يقول عملاؤنا عن خدماتنا":"What our clients say about our services"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.map(n=>s.jsxs(V,{className:"card relative",variant:"borderless",children:[s.jsx("div",{className:"text-6xl text-olive-green-200 absolute top-4 right-4 font-serif leading-none",children:'"'}),s.jsxs("div",{className:"mb-4",children:[s.jsx(ra,{disabled:!0,defaultValue:n.rating,className:"mb-3"}),s.jsx("p",{className:"text-gray-700 italic",children:n.text})]}),s.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mt-6 pt-4 border-t border-gray-200",children:[s.jsx(at,{src:n.avatar,size:50}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:n.name}),s.jsx("div",{className:"text-sm text-gray-500",children:n.company})]})]})]},n.id))})]})})},o_=()=>{const{t,language:e}=je(),[r,n]=A.useState([]),[a,i]=A.useState(!0);A.useEffect(()=>{l()},[]);const o=c=>{if(!c||/file:\/\//.test(c)||/[A-Za-z]:[\\\/]/.test(c)||/fakepath/i.test(c))return null;if(/^https?:\/\//.test(c))return c;const u="http://localhost:5000/api".replace("/api","")||"http://localhost:5000";return c.startsWith("/")?`${u}${c}`:`${u}/${c}`},l=async()=>{try{i(!0);const u=((await Ui.getPartners({isActive:"true"})).partners||[]).map(d=>({...d,logo:o(d.logo)}));n(u)}catch(c){console.error("Error fetching partners:",c)}finally{i(!1)}};return a?s.jsx("section",{className:"py-20 md:py-28 bg-gray-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(et,{size:"large"})})})}):r.length===0?null:s.jsx("section",{className:"py-20 md:py-28 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:t("partners")}),s.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"نفتخر بشراكاتنا مع المؤسسات الرائدة":"We are proud of our partnerships with leading institutions"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8 items-center",children:r.map(c=>s.jsx("div",{className:"flex items-center justify-center p-6 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2",children:c.logo?s.jsx("img",{src:c.logo,alt:e==="ar"&&c.nameAr?c.nameAr:c.name,className:"max-w-full h-auto max-h-16 opacity-70 hover:opacity-100 transition-opacity duration-300",onError:u=>{c.logo&&(/[A-Za-z]:[\\\/]/.test(c.logo)||/fakepath/i.test(c.logo))||console.error("Failed to load partner logo:",c.logo),u.target.style.display="none"}}):s.jsx("span",{className:"text-gray-400 text-sm",children:e==="ar"&&c.nameAr?c.nameAr:c.name})},c.id))})]})})},l_=()=>{const{language:t}=je(),e=nt(),[r,n]=A.useState([]),[a,i]=A.useState(!0);A.useEffect(()=>{o()},[]);const o=async()=>{try{const l=await cr.getArticles({status:"PUBLISHED",limit:3}),c="http://localhost:5000/api".replace("/api","")||"http://localhost:5000",u=(l.articles?.slice(0,3)||[]).map(d=>{if(d.featuredImage){let f=d.featuredImage;/^https?:\/\//.test(f)?(f.includes(`${c}${c}`)||f.match(/http:\/\/localhost:5000/g)?.length>1)&&(f=f.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),f=`http://localhost:5000/${f}`):f=f.startsWith("/")?`${c}${f}`:`${c}/${f}`,d.featuredImage=f}return d});n(u)}catch(l){console.error("Error fetching articles:",l)}finally{i(!1)}};return a?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(et,{size:"large"})}):r.length===0?null:s.jsx("section",{className:"py-16 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-4xl font-bold mb-4",children:t==="ar"?"آخر المقالات":"Latest Articles"}),s.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:t==="ar"?"اكتشف آخر الأخبار والمقالات حول الاستشارات والدراسات الاقتصادية":"Discover the latest news and articles about consulting and economic studies"})]}),s.jsx(ie,{gutter:[24,24],children:r.map(l=>s.jsx($,{xs:24,sm:12,lg:8,children:s.jsx(V,{hoverable:!0,className:"h-full transition-all duration-300 hover:shadow-xl",style:{borderRadius:"12px",overflow:"hidden"},cover:l.featuredImage?s.jsxs("div",{className:"relative h-56 overflow-hidden",children:[s.jsx("img",{alt:t==="ar"&&l.titleAr||l.title,src:l.featuredImage,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:c=>{console.error("Failed to load article image:",l.featuredImage),c.target.style.display="none"}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}):s.jsx("div",{className:"h-56 bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] flex items-center justify-center",children:s.jsx("span",{className:"text-white text-5xl font-bold",children:t==="ar"?(l.titleAr||l.title).charAt(0):l.title.charAt(0)})}),onClick:()=>e(`/blog/${l.slug}`),children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-3",children:l.category&&s.jsx(le,{color:"blue",className:"mb-2",children:l.category})}),s.jsx("h3",{className:"text-xl font-bold mb-3 line-clamp-2 text-gray-900 group-hover:text-[#1a4d3a] transition-colors min-h-[56px]",children:t==="ar"&&l.titleAr||l.title}),l.excerpt&&s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3 leading-relaxed min-h-[72px]",children:t==="ar"&&l.excerptAr||l.excerpt}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4 pb-4 border-b border-gray-100",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Dt,{}),de(l.publishedAt||l.createdAt).format("YYYY-MM-DD")]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ur,{}),l.views||0]})]}),s.jsx(P,{type:"link",icon:s.jsx(cd,{}),className:"p-0 text-[#1a4d3a] hover:text-[#2d5f4f] font-semibold",onClick:c=>{c.stopPropagation(),e(`/blog/${l.slug}`)},children:t==="ar"?"اقرأ المزيد":"Read More"})]})})},l.id))}),s.jsx("div",{className:"text-center mt-8",children:s.jsx(P,{type:"primary",size:"large",className:"bg-olive-green-600 hover:bg-olive-green-700",onClick:()=>e("/blog"),children:t==="ar"?"عرض جميع المقالات":"View All Articles"})})]})})},{Footer:c_}=Qe,on=()=>{const{t,language:e}=je(),{settings:r}=Fa(),n=[{label:t("home"),path:"/"},{label:t("about"),path:"/about"},{label:t("services"),path:"/services"},{label:t("consultants"),path:"/consultants"},{label:t("reports"),path:"/reports"},{label:t("blog"),path:"/blog"},{label:t("contact"),path:"/contact"}];return s.jsx(c_,{className:"bg-gray-900 text-white py-8 sm:py-10 md:py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[s.jsxs(ie,{gutter:[24,32],className:"sm:gutter-[32]",children:[s.jsxs($,{xs:24,sm:12,md:6,children:[s.jsx("div",{className:"flex items-center mb-4",children:r.websiteLogo?s.jsx("img",{src:r.websiteLogo,alt:`${r.websiteName||"Jadwa"} - ${r.websiteNameAr||"جدوى"}`,className:"h-12 sm:h-14 md:h-16 w-auto object-contain",style:{filter:"brightness(0) invert(1)"}}):s.jsx("div",{className:"text-white text-xl sm:text-2xl font-bold",children:r.websiteName||"Jadwa"})}),s.jsx("p",{className:"text-gray-400 text-xs sm:text-sm mb-4 leading-relaxed",children:e==="ar"?"منصة متخصصة في الاستشارات الاقتصادية والإدارية":"A specialized platform for economic and administrative consulting"}),s.jsxs("div",{className:"flex space-x-4 space-x-reverse",children:[s.jsx("a",{href:"#",className:"text-gray-400 hover:text-turquoise-400 transition-colors",children:s.jsx(V5,{className:"text-lg sm:text-xl"})}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-turquoise-400 transition-colors",children:s.jsx(MR,{className:"text-lg sm:text-xl"})}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-turquoise-400 transition-colors",children:s.jsx(NM,{className:"text-lg sm:text-xl"})}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-turquoise-400 transition-colors",children:s.jsx(jM,{className:"text-lg sm:text-xl"})})]})]}),s.jsxs($,{xs:24,sm:12,md:6,children:[s.jsx("h3",{className:"text-base sm:text-lg font-bold mb-3 sm:mb-4",children:t("quickLinks")}),s.jsx("ul",{className:"space-y-2",children:n.map((a,i)=>s.jsx("li",{children:s.jsx(Hl,{to:a.path,className:"text-gray-400 hover:text-turquoise-400 transition-colors text-xs sm:text-sm block py-1",children:a.label})},i))})]}),s.jsxs($,{xs:24,sm:12,md:6,children:[s.jsx("h3",{className:"text-base sm:text-lg font-bold mb-3 sm:mb-4",children:t("contactInfo")}),s.jsxs("ul",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("li",{className:"flex items-center space-x-2 space-x-reverse text-gray-400 text-xs sm:text-sm",children:[s.jsx(aa,{className:"text-turquoise-400 flex-shrink-0"}),s.jsx("span",{children:"9200 00000"})]}),s.jsxs("li",{className:"flex items-center space-x-2 space-x-reverse text-gray-400 text-xs sm:text-sm",children:[s.jsx(an,{className:"text-turquoise-400 flex-shrink-0"}),s.jsx("span",{className:"break-all",children:"info@jadwa.sa"})]}),s.jsxs("li",{className:"flex items-center space-x-2 space-x-reverse text-gray-400 text-xs sm:text-sm",children:[s.jsx(WC,{className:"text-turquoise-400 flex-shrink-0"}),s.jsx("a",{href:"#",className:"hover:text-turquoise-400",children:e==="ar"?"واتساب":"WhatsApp"})]}),s.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse text-gray-400 text-xs sm:text-sm",children:[s.jsx(sh,{className:"text-turquoise-400 mt-1 flex-shrink-0"}),s.jsx("span",{className:"leading-relaxed",children:e==="ar"?"مكة المكرمة – المملكة العربية السعودية":"Makkah Al-Mukarramah – Saudi Arabia"})]}),s.jsx("li",{className:"flex items-center space-x-2 space-x-reverse text-gray-400 text-xs sm:text-sm",children:s.jsx("a",{href:"https://www.jadwa.sa",className:"hover:text-turquoise-400 break-all",children:"www.jadwa.sa"})})]})]}),s.jsxs($,{xs:24,sm:12,md:6,children:[s.jsx("h3",{className:"text-base sm:text-lg font-bold mb-3 sm:mb-4",children:e==="ar"?"معلومات قانونية":"Legal"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Hl,{to:"/privacy",className:"text-gray-400 hover:text-turquoise-400 transition-colors text-xs sm:text-sm block py-1",children:t("privacy")})}),s.jsx("li",{children:s.jsx(Hl,{to:"/terms",className:"text-gray-400 hover:text-turquoise-400 transition-colors text-xs sm:text-sm block py-1",children:t("terms")})})]})]})]}),s.jsx("div",{className:"border-t border-gray-800 mt-6 sm:mt-8 pt-6 sm:pt-8 text-center text-gray-400 text-xs sm:text-sm px-4",children:e==="ar"?`© 2025 ${r.websiteNameAr||"جدوى"} للاستشارات الإدارية والاقتصادية – جميع الحقوق محفوظة`:`© 2025 ${r.websiteName||"Jadwa"} for Administrative and Economic Consulting – All Rights Reserved`})]})})},Si=()=>{const[t,e]=A.useState(!1);A.useEffect(()=>{const n=()=>{window.pageYOffset>300?e(!0):e(!1)};return window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}},[]);const r=()=>{window.scrollTo({top:0,behavior:"smooth"})};return t?s.jsx(P,{type:"primary",shape:"circle",icon:s.jsx(n5,{}),onClick:r,className:"scroll-to-top-btn",size:"large",style:{position:"fixed",bottom:"30px",right:"30px",zIndex:1e3,width:"50px",height:"50px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",background:"linear-gradient(135deg, #7a8c66 0%, #14b8a6 100%)",border:"none"}}):null},{Content:u_}=Qe,d_=()=>s.jsxs(Qe,{className:"min-h-screen",children:[s.jsx(sn,{}),s.jsxs(u_,{children:[s.jsx(e_,{}),s.jsx(t_,{}),s.jsx(r_,{}),s.jsx(n_,{}),s.jsx(a_,{}),s.jsx(s_,{}),s.jsx(GC,{}),s.jsx(l_,{}),s.jsx(i_,{}),s.jsx(o_,{})]}),s.jsx(on,{}),s.jsx(Si,{})]}),{Content:f_}=Qe,h_=()=>{const{t,language:e}=je(),r=[{icon:s.jsx(Kn,{className:"text-4xl"}),title:e==="ar"?"النزاهة والشفافية":"Integrity & Transparency",description:e==="ar"?"نلتزم بأعلى معايير الأخلاقيات والشفافية في جميع تعاملاتنا مع العملاء":"We commit to the highest standards of ethics and transparency in all our client interactions"},{icon:s.jsx(fd,{className:"text-4xl"}),title:e==="ar"?"الاحترافية":"Professionalism",description:e==="ar"?"فريق من الخبراء المعتمدين ذوي الخبرة الواسعة في مختلف المجالات الاستشارية":"A team of certified experts with extensive experience in various consulting fields"},{icon:s.jsx(ud,{className:"text-4xl"}),title:e==="ar"?"التحليل العلمي":"Scientific Analysis",description:e==="ar"?"اعتماد على أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي في تقديم الحلول":"Relying on econometric analysis tools and artificial intelligence in providing solutions"},{icon:s.jsx(ny,{className:"text-4xl"}),title:e==="ar"?"الموثوقية":"Reliability",description:e==="ar"?"نتائج موثوقة ودقيقة قائمة على البيانات والأبحاث العلمية المعتمدة":"Reliable and accurate results based on data and accredited scientific research"}],n=[{icon:s.jsx(oo,{className:"text-3xl"}),title:e==="ar"?"الاستشارات الاقتصادية":"Economic Consulting",description:e==="ar"?"تحليل اقتصادي شامل ودراسات جدوى للمشاريع الاستثمارية":"Comprehensive economic analysis and feasibility studies for investment projects"},{icon:s.jsx(en,{className:"text-3xl"}),title:e==="ar"?"الاستشارات الإدارية":"Administrative Consulting",description:e==="ar"?"تحسين الهياكل التنظيمية وإدارة الموارد البشرية":"Organizational structure improvement and human resources management"},{icon:s.jsx(qC,{className:"text-3xl"}),title:e==="ar"?"الاستشارات المالية والمحاسبية":"Financial & Accounting Consulting",description:e==="ar"?"تحليل مالي متقدم وخدمات محاسبية متخصصة":"Advanced financial analysis and specialized accounting services"},{icon:s.jsx(Ct,{className:"text-3xl"}),title:e==="ar"?"التقارير والدراسات":"Reports & Studies",description:e==="ar"?"إعداد تقارير احترافية ودراسات متخصصة في مختلف المجالات":"Professional report preparation and specialized studies in various fields"}];return s.jsxs(Qe,{className:"min-h-screen bg-gray-50",children:[s.jsx(sn,{}),s.jsx(f_,{className:"py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold text-gray-900 mb-6",children:e==="ar"?"من نحن":"About Us"}),s.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-olive-green-600 to-turquoise-500 mx-auto mb-8"}),s.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-4xl mx-auto leading-relaxed",children:e==="ar"?"منصة جدوى للاستشارات الإدارية والاقتصادية - منصة سعودية رائدة في تقديم الحلول الاستشارية المتخصصة":"Jadwa for Administrative and Economic Consulting - A leading Saudi platform providing specialized consulting solutions"})]}),s.jsx(V,{className:"bg-white shadow-lg rounded-2xl border-0 mb-12",children:s.jsxs(ie,{gutter:[32,32],align:"middle",children:[s.jsx($,{xs:24,lg:12,children:s.jsxs("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 text-gray-900",children:e==="ar"?"من نحن":"Who We Are"}),s.jsx("p",{className:"text-lg text-gray-700 mb-6 leading-relaxed",children:e==="ar"?"منصة جدوى هي منصة سعودية متخصصة في تقديم الخدمات الاستشارية عالية الجودة في مجالات الاقتصاد، الإدارة، والتمويل. نسعى من خلال فريق من الخبراء الأكاديميين والمستشارين المعتمدين إلى تمكين القرارات الاستثمارية والإدارية بالاعتماد على أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي.":"Jadwa is a Saudi platform specialized in providing high-quality consulting services in the fields of economics, management, and finance. Through a team of academic experts and certified consultants, we seek to empower investment and administrative decisions by relying on econometric analysis tools and artificial intelligence."}),s.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:e==="ar"?"نقدم حلولاً شاملة ومتكاملة تساعد الشركات والأفراد والجهات الحكومية على اتخاذ قرارات مدروسة ومبنية على بيانات دقيقة وتحليلات علمية متقدمة.":"We provide comprehensive and integrated solutions that help companies, individuals, and government entities make informed decisions based on accurate data and advanced scientific analysis."})]})}),s.jsx($,{xs:24,lg:12,children:s.jsx("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:s.jsx(V,{className:"border-0 shadow-lg bg-gradient-to-br from-olive-green-600 to-turquoise-500 text-white",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xl font-bold mb-3 flex items-center gap-2",children:[s.jsx(ud,{}),e==="ar"?"رؤيتنا":"Our Vision"]}),s.jsx("p",{className:"text-gray-100 leading-relaxed",children:e==="ar"?"أن نكون المنصة الأولى في العالم العربي في التحليل والاستشارات الاقتصادية المبنية على القياس الكمي والذكاء الاصطناعي، وأن نكون الشريك المفضل لصُنّاع القرار والمستثمرين.":"To be the leading platform in the Arab world for quantitative-based economic analysis and consulting, and to be the preferred partner for decision-makers and investors."})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xl font-bold mb-3 flex items-center gap-2",children:[s.jsx(fd,{}),e==="ar"?"مهمتنا":"Our Mission"]}),s.jsx("p",{className:"text-gray-100 leading-relaxed",children:e==="ar"?"دعم صُنّاع القرار والمستثمرين والمشروعات عبر استشارات علمية وعملية موثوقة، وتمكينهم من اتخاذ قرارات استراتيجية مبنية على تحليلات دقيقة وبيانات موثوقة.":"Supporting decision-makers, investors, and projects through reliable scientific and practical consultations, enabling them to make strategic decisions based on accurate analysis and reliable data."})]})]})})})})]})}),s.jsxs(ie,{gutter:[16,16],className:"mb-12",children:[s.jsx($,{xs:12,sm:6,children:s.jsx(V,{className:"bg-white shadow-lg border-0 text-center hover:shadow-xl transition-shadow",children:s.jsx(Be,{title:e==="ar"?"مستشارون خبراء":"Expert Consultants",value:50,prefix:s.jsx(ke,{className:"text-olive-green-600"}),valueStyle:{color:"#7a8c66",fontSize:"28px",fontWeight:"bold"}})})}),s.jsx($,{xs:12,sm:6,children:s.jsx(V,{className:"bg-white shadow-lg border-0 text-center hover:shadow-xl transition-shadow",children:s.jsx(Be,{title:e==="ar"?"مشروع مكتمل":"Completed Projects",value:500,prefix:s.jsx(vt,{className:"text-turquoise-500"}),valueStyle:{color:"#14b8a6",fontSize:"28px",fontWeight:"bold"}})})}),s.jsx($,{xs:12,sm:6,children:s.jsx(V,{className:"bg-white shadow-lg border-0 text-center hover:shadow-xl transition-shadow",children:s.jsx(Be,{title:e==="ar"?"عميل راضٍ":"Satisfied Clients",value:1e3,prefix:s.jsx(ny,{className:"text-pink-500"}),valueStyle:{color:"#ec4899",fontSize:"28px",fontWeight:"bold"}})})}),s.jsx($,{xs:12,sm:6,children:s.jsx(V,{className:"bg-white shadow-lg border-0 text-center hover:shadow-xl transition-shadow",children:s.jsx(Be,{title:e==="ar"?"سنة خبرة":"Years of Experience",value:10,prefix:s.jsx(dc,{className:"text-yellow-500"}),valueStyle:{color:"#eab308",fontSize:"28px",fontWeight:"bold"}})})})]}),s.jsxs("div",{className:"mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900",children:e==="ar"?"خدماتنا":"Our Services"}),s.jsx(ie,{gutter:[24,24],children:n.map((a,i)=>s.jsx($,{xs:24,sm:12,lg:6,children:s.jsxs(V,{className:"bg-white shadow-lg border-0 h-full text-center hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-olive-green-600 to-turquoise-500 flex items-center justify-center text-white mx-auto mb-6 shadow-md",children:a.icon}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:a.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:a.description})]})},i))})]}),s.jsxs("div",{className:"mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900",children:e==="ar"?"قيمنا الأساسية":"Our Core Values"}),s.jsx(ie,{gutter:[24,24],children:r.map((a,i)=>s.jsx($,{xs:24,sm:12,lg:6,children:s.jsxs(V,{className:"bg-white shadow-lg border-0 h-full text-center hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-olive-green-600 to-turquoise-500 flex items-center justify-center text-white mx-auto mb-6 shadow-md",children:a.icon}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:a.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:a.description})]})},i))})]}),s.jsxs(V,{className:"bg-white shadow-xl rounded-2xl border-0 mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900",children:e==="ar"?"لماذا تختار جدوى؟":"Why Choose Jadwa?"}),s.jsxs(ie,{gutter:[32,32],children:[s.jsx($,{xs:24,md:12,children:s.jsx("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:s.jsxs("ul",{className:"space-y-4 text-lg text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(vt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),s.jsx("span",{children:e==="ar"?"فريق من الخبراء المعتمدين ذوي الخبرة الواسعة في مختلف المجالات":"A team of certified experts with extensive experience in various fields"})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(vt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),s.jsx("span",{children:e==="ar"?"استخدام أحدث أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي":"Using the latest econometric analysis tools and artificial intelligence"})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(vt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),s.jsx("span",{children:e==="ar"?"نتائج موثوقة ودقيقة قائمة على البيانات والأبحاث العلمية":"Reliable and accurate results based on data and scientific research"})]})]})})}),s.jsx($,{xs:24,md:12,children:s.jsx("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:s.jsxs("ul",{className:"space-y-4 text-lg text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(vt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),s.jsx("span",{children:e==="ar"?"حلول مخصصة تلبي احتياجات كل عميل بشكل فريد":"Customized solutions that uniquely meet each client's needs"})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(vt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),s.jsx("span",{children:e==="ar"?"التزام بأعلى معايير الجودة والشفافية في جميع الخدمات":"Commitment to the highest standards of quality and transparency in all services"})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(vt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),s.jsx("span",{children:e==="ar"?"دعم مستمر ومتابعة بعد تقديم الخدمة لضمان تحقيق النتائج":"Continuous support and follow-up after service delivery to ensure results"})]})]})})})]})]}),s.jsx(V,{className:"bg-white shadow-lg rounded-2xl border-0 mb-12",children:s.jsxs(ie,{gutter:[32,32],align:"middle",children:[s.jsx($,{xs:24,lg:12,children:s.jsxs("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 text-gray-900",children:e==="ar"?"قصتنا":"Our Story"}),s.jsx("p",{className:"text-lg text-gray-700 mb-4 leading-relaxed",children:e==="ar"?"بدأت منصة جدوى رحلتها بهدف واضح: تمكين الشركات والأفراد من اتخاذ قرارات اقتصادية وإدارية مدروسة ومبنية على بيانات دقيقة. تأسست المنصة على يد مجموعة من الخبراء الأكاديميين والمستشارين المعتمدين الذين يجمعون بين المعرفة النظرية العميقة والخبرة العملية الواسعة.":"Jadwa Platform began its journey with a clear goal: to enable companies and individuals to make informed economic and administrative decisions based on accurate data. The platform was founded by a group of academic experts and certified consultants who combine deep theoretical knowledge with extensive practical experience."}),s.jsx("p",{className:"text-lg text-gray-700 mb-4 leading-relaxed",children:e==="ar"?"على مر السنين، طورنا منهجيات متقدمة في التحليل الاقتصادي القياسي، ودمجنا أحدث تقنيات الذكاء الاصطناعي في عملياتنا لضمان تقديم تحليلات دقيقة وموثوقة. نحن فخورون بكوننا شريكاً موثوقاً للعديد من الشركات الكبرى والمؤسسات الحكومية في المملكة العربية السعودية.":"Over the years, we have developed advanced methodologies in econometric analysis and integrated the latest artificial intelligence technologies into our processes to ensure accurate and reliable analysis. We are proud to be a trusted partner for many major companies and government institutions in Saudi Arabia."})]})}),s.jsx($,{xs:24,lg:12,children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-olive-green-50 to-turquoise-50 p-6 rounded-lg text-center",children:[s.jsx(dc,{className:"text-4xl text-olive-green-600 mb-3"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e==="ar"?"الجودة":"Quality"}),s.jsx("p",{className:"text-gray-600 text-sm",children:e==="ar"?"نلتزم بأعلى معايير الجودة في جميع خدماتنا":"We commit to the highest quality standards in all our services"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-turquoise-50 to-olive-green-50 p-6 rounded-lg text-center",children:[s.jsx(WI,{className:"text-4xl text-turquoise-600 mb-3"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e==="ar"?"الدقة":"Accuracy"}),s.jsx("p",{className:"text-gray-600 text-sm",children:e==="ar"?"تحليلات دقيقة مبنية على بيانات موثوقة":"Accurate analysis based on reliable data"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-olive-green-50 to-turquoise-50 p-6 rounded-lg text-center",children:[s.jsx(vR,{className:"text-4xl text-olive-green-600 mb-3"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e==="ar"?"الحلول":"Solutions"}),s.jsx("p",{className:"text-gray-600 text-sm",children:e==="ar"?"حلول مخصصة تلبي احتياجات كل عميل":"Customized solutions that meet each client's needs"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-turquoise-50 to-olive-green-50 p-6 rounded-lg text-center",children:[s.jsx(ib,{className:"text-4xl text-turquoise-600 mb-3"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e==="ar"?"الخبرة":"Expertise"}),s.jsx("p",{className:"text-gray-600 text-sm",children:e==="ar"?"فريق من الخبراء المعتمدين":"A team of certified experts"})]})]})})]})}),s.jsxs(V,{className:"bg-white shadow-lg rounded-2xl border-0 mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900",children:e==="ar"?"منهجيتنا":"Our Approach"}),s.jsxs(ie,{gutter:[24,24],children:[s.jsx($,{xs:24,md:8,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-olive-green-100 flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-2xl font-bold text-olive-green-600",children:"1"})}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:e==="ar"?"التحليل":"Analysis"}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:e==="ar"?"نبدأ بتحليل شامل للوضع الحالي وجمع البيانات اللازمة لفهم التحديات والفرص المتاحة":"We start with a comprehensive analysis of the current situation and collect the necessary data to understand challenges and opportunities"})]})}),s.jsx($,{xs:24,md:8,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-turquoise-100 flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-2xl font-bold text-turquoise-600",children:"2"})}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:e==="ar"?"التخطيط":"Planning"}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:e==="ar"?"نطور استراتيجية واضحة وخطة عمل مفصلة مبنية على التحليل والبيانات المتاحة":"We develop a clear strategy and detailed action plan based on analysis and available data"})]})}),s.jsx($,{xs:24,md:8,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-olive-green-100 flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-2xl font-bold text-olive-green-600",children:"3"})}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:e==="ar"?"التنفيذ":"Implementation"}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:e==="ar"?"ننفذ الحلول المقترحة مع متابعة مستمرة وضمان تحقيق النتائج المرجوة":"We implement the proposed solutions with continuous follow-up and ensure achieving the desired results"})]})})]})]}),s.jsxs(V,{className:"bg-gradient-to-r from-olive-green-600 to-turquoise-500 text-white rounded-2xl border-0 text-center p-8",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:e==="ar"?"هل تريد معرفة المزيد؟":"Want to Know More?"}),s.jsx("p",{className:"text-xl mb-6 text-gray-100",children:e==="ar"?"تواصل معنا اليوم واحصل على استشارة مجانية":"Contact us today and get a free consultation"}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(na,{className:"text-2xl"}),s.jsx("span",{className:"text-lg",children:"www.jadwa.com"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(en,{className:"text-2xl"}),s.jsx("span",{className:"text-lg",children:e==="ar"?"فريق الدعم متاح 24/7":"Support team available 24/7"})]})]})]})]})})}),s.jsx(on,{}),s.jsx(Si,{})]})},{Content:p_}=Qe,{Search:_se}=z,m_=()=>{const{language:t}=je(),e=nt(),[r,n]=A.useState([]),[a,i]=A.useState(!0),[o,l]=A.useState(null),[c,u]=A.useState(""),[d,f]=A.useState("all");A.useEffect(()=>{h()},[c,d]);const h=async()=>{try{i(!0),l(null);const N={status:"ACTIVE"};c&&(N.search=c),d!=="all"&&(N.category=d);const b=await rs.getServices(N);n(b.services||[])}catch(N){console.error("Error fetching services:",N),l(N.message||"Failed to load services")}finally{i(!1)}},p=()=>{u(""),f("all")},g=c||d!=="all",x=N=>N?typeof N=="string"?N:typeof N=="object"?N.name||N.slug||"":String(N):"",m=N=>{const b=x(N);return{ECONOMIC:s.jsx(oo,{className:"text-4xl"}),ADMINISTRATIVE:s.jsx(en,{className:"text-4xl"}),FINANCIAL_ACCOUNTING:s.jsx(tr,{className:"text-4xl"}),ANALYSIS_REPORTS:s.jsx(Ct,{className:"text-4xl"}),FIELD_SURVEY:s.jsx(Un,{className:"text-4xl"}),DIGITAL_CUSTOMER:s.jsx(ms,{className:"text-4xl"})}[b]||s.jsx(Ct,{className:"text-4xl"})},y=N=>{const b=x(N);return{ECONOMIC:"from-olive-green-500 to-olive-green-600",ADMINISTRATIVE:"from-turquoise-500 to-turquoise-600",FINANCIAL_ACCOUNTING:"from-olive-green-400 to-turquoise-500",ANALYSIS_REPORTS:"from-turquoise-400 to-olive-green-500",FIELD_SURVEY:"from-olive-green-600 to-turquoise-600",DIGITAL_CUSTOMER:"from-turquoise-500 to-olive-green-500"}[b]||"from-olive-green-500 to-turquoise-500"},v=N=>{const b=x(N);if(typeof N=="object"&&N!==null){if(t==="ar"&&N.nameAr)return N.nameAr;if(N.name)return N.name}return{ECONOMIC:t==="ar"?"اقتصادية":"Economic",ADMINISTRATIVE:t==="ar"?"إدارية":"Administrative",FINANCIAL_ACCOUNTING:t==="ar"?"مالية ومحاسبية":"Financial & Accounting",ANALYSIS_REPORTS:t==="ar"?"تحليل وتقارير":"Analysis & Reports",FIELD_SURVEY:t==="ar"?"ميدانية":"Field Survey",DIGITAL_CUSTOMER:t==="ar"?"رقمية":"Digital"}[b]||b||"Category"},w=[{value:"all",label:t==="ar"?"الكل":"All"},{value:"ECONOMIC",label:t==="ar"?"اقتصادية":"Economic"},{value:"ADMINISTRATIVE",label:t==="ar"?"إدارية":"Administrative"},{value:"FINANCIAL_ACCOUNTING",label:t==="ar"?"مالية ومحاسبية":"Financial & Accounting"},{value:"ANALYSIS_REPORTS",label:t==="ar"?"تحليل وتقارير":"Analysis & Reports"},{value:"FIELD_SURVEY",label:t==="ar"?"ميدانية":"Field Survey"},{value:"DIGITAL_CUSTOMER",label:t==="ar"?"رقمية":"Digital"}];return s.jsxs(Qe,{className:"min-h-screen",children:[s.jsx(sn,{}),s.jsx(p_,{className:"py-12 md:py-20 bg-gradient-to-b from-gray-50 to-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[s.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[s.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 text-gray-900",children:t==="ar"?"الخدمات":"Our Services"}),s.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto",children:t==="ar"?"القائمة الكاملة لخدمات منصة جدوى الاستشارية والاقتصادية":"Complete list of Jadwa Platform consulting and economic services"})]}),s.jsx("div",{className:"mb-8 space-y-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx(z,{placeholder:t==="ar"?"ابحث عن خدمة...":"Search for a service...",prefix:s.jsx(Un,{className:"text-gray-400"}),value:c,onChange:N=>u(N.target.value),onPressEnter:h,size:"large",allowClear:!0,className:"flex-1",style:{borderRadius:"12px"}}),s.jsxs(fe.Compact,{className:"flex flex-col md:flex-row gap-2 md:gap-0",children:[s.jsx(q,{value:d,onChange:f,options:w,size:"large",style:{width:200},placeholder:t==="ar"?"الفئة":"Category"}),g&&s.jsx(P,{icon:s.jsx(UC,{}),onClick:p,size:"large",className:"border-gray-300",children:t==="ar"?"مسح":"Clear"})]})]})}),o&&s.jsx(Gt,{message:t==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:o,type:"error",showIcon:!0,closable:!0,onClose:()=>l(null),className:"mb-6"}),!a&&s.jsx("div",{className:"mb-6 text-gray-600 font-medium",children:t==="ar"?`تم العثور على ${r.length} خدمة`:`Found ${r.length} service${r.length!==1?"s":""}`}),a?s.jsx("div",{className:"flex justify-center items-center py-20",children:s.jsx(et,{size:"large"})}):r.length===0?s.jsx(Bt,{description:t==="ar"?"لا توجد خدمات متاحة":"No services available",className:"py-20"}):s.jsx(ie,{gutter:[16,16],className:"sm:gutter-[24]",children:r.map(N=>s.jsx($,{xs:24,sm:12,lg:8,xl:6,children:s.jsx(V,{hoverable:!0,className:"h-full border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl overflow-hidden group",styles:{body:{padding:"0"}},children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:`w-20 h-20 rounded-2xl bg-gradient-to-br ${y(N.category)} flex items-center justify-center text-white mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg mx-auto`,children:m(N.category)}),s.jsx(le,{color:"blue",className:"mb-3 text-xs px-2 py-1",children:v(N.category)}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900 line-clamp-2",children:t==="ar"&&N.titleAr||N.title}),s.jsx("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed line-clamp-3 min-h-[60px]",children:t==="ar"&&N.descriptionAr||N.description}),N.price&&N.price>0&&s.jsxs("div",{className:"mb-4 text-[#1a4d3a] font-bold text-lg",children:[N.price," ",t==="ar"?"ريال":"SAR"]}),N.targetAudience&&s.jsxs("div",{className:"mb-4 text-xs text-gray-500",children:[s.jsx("strong",{children:t==="ar"?"الفئة المستهدفة: ":"Target Audience: "}),N.targetAudience]}),s.jsx(P,{type:"primary",block:!0,size:"large",className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 font-semibold shadow-md hover:shadow-lg transition-all",onClick:()=>e("/login"),children:t==="ar"?"طلب الخدمة":"Request Service"})]})})},N.id))})]})}),s.jsx(on,{}),s.jsx(Si,{})]})},{Content:g_}=Qe,{Search:x_}=z,y_=()=>{const{language:t}=je(),e=nt(),[r,n]=A.useState([]),[a,i]=A.useState(!0),[o,l]=A.useState(null),[c,u]=A.useState(""),[d,f]=A.useState("all"),[h,p]=A.useState("all"),[g,x]=A.useState("all");A.useEffect(()=>{m()},[c,d,h,g]);const m=async()=>{try{i(!0),l(null);const N={};c&&(N.search=c),d!=="all"&&(N.specialization=d),h!=="all"&&(N.minRating=parseFloat(h)),g==="available"&&(N.isAvailable=!0),g==="unavailable"&&(N.isAvailable=!1);const b=await Ra.getConsultants(N);n(b.consultants||[])}catch(N){console.error("Error fetching consultants:",N),l(N.message||"Failed to load consultants")}finally{i(!1)}},y=()=>{u(""),f("all"),p("all"),x("all")},v=c||d!=="all"||h!=="all"||g!=="all",w=[...new Set(r.map(N=>N.specialization).filter(Boolean))];return s.jsxs(Qe,{className:"min-h-screen bg-white",children:[s.jsx(sn,{}),s.jsx(g_,{className:"py-12 md:py-20 bg-gradient-to-b from-gray-50 to-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[s.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 text-gray-900",children:t==="ar"?"المستشارون":"Our Consultants"}),s.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto",children:t==="ar"?"فريق من المستشارين المتخصصين ذوي الخبرة الواسعة في مختلف المجالات الاقتصادية والإدارية":"A team of specialized consultants with extensive experience in various economic and administrative fields"})]}),s.jsx("div",{className:"mb-8 space-y-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx(x_,{placeholder:t==="ar"?"ابحث عن مستشار...":"Search for a consultant...",allowClear:!0,size:"large",value:c,onChange:N=>u(N.target.value),onSearch:m,className:"flex-1",prefix:s.jsx(Un,{className:"text-gray-400"}),style:{borderRadius:"12px"}}),s.jsxs(fe.Compact,{className:"flex flex-col md:flex-row gap-2 md:gap-0",children:[s.jsxs(q,{value:d,onChange:f,placeholder:t==="ar"?"التخصص":"Specialization",style:{width:200},size:"large",allowClear:!0,children:[s.jsx(q.Option,{value:"all",children:t==="ar"?"جميع التخصصات":"All Specializations"}),w.map(N=>s.jsx(q.Option,{value:N,children:N},N))]}),s.jsxs(q,{value:h,onChange:p,placeholder:t==="ar"?"التقييم":"Rating",style:{width:150},size:"large",children:[s.jsx(q.Option,{value:"all",children:t==="ar"?"جميع التقييمات":"All Ratings"}),s.jsx(q.Option,{value:"4.5",children:"4.5+ ⭐"}),s.jsx(q.Option,{value:"4.0",children:"4.0+ ⭐"}),s.jsx(q.Option,{value:"3.5",children:"3.5+ ⭐"}),s.jsx(q.Option,{value:"3.0",children:"3.0+ ⭐"})]}),s.jsxs(q,{value:g,onChange:x,placeholder:t==="ar"?"الحالة":"Status",style:{width:150},size:"large",children:[s.jsx(q.Option,{value:"all",children:t==="ar"?"الكل":"All"}),s.jsx(q.Option,{value:"available",children:t==="ar"?"متاح":"Available"}),s.jsx(q.Option,{value:"unavailable",children:t==="ar"?"غير متاح":"Unavailable"})]}),v&&s.jsx(P,{icon:s.jsx(UC,{}),onClick:y,size:"large",className:"border-gray-300",children:t==="ar"?"مسح":"Clear"})]})]})}),o&&s.jsx(Gt,{message:t==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:o,type:"error",showIcon:!0,closable:!0,onClose:()=>l(null),className:"mb-6"}),!a&&s.jsx("div",{className:"mb-6 text-gray-600",children:t==="ar"?`تم العثور على ${r.length} مستشار`:`Found ${r.length} consultant${r.length!==1?"s":""}`}),a?s.jsx("div",{className:"flex justify-center py-20",children:s.jsx(et,{size:"large"})}):r.length===0?s.jsx(Bt,{description:t==="ar"?"لا يوجد مستشارون متاحون":"No consultants available",className:"py-20"}):s.jsx(ie,{gutter:[24,24],children:r.map(N=>{const b=`${N.firstName||""} ${N.lastName||""}`.trim()||N.user?.email||"Consultant",S="http://localhost:5000/api".replace("/api","")||"http://localhost:5000",j=N.user?.avatar?N.user.avatar.startsWith("http")?N.user.avatar:`${S}${N.user.avatar.startsWith("/")?"":"/"}${N.user.avatar}`:null;return s.jsx($,{xs:24,sm:12,lg:8,xl:6,children:s.jsx(V,{hoverable:!0,className:"h-full transition-all duration-300 hover:shadow-2xl border-0 rounded-2xl overflow-hidden group",styles:{body:{padding:"0"}},onClick:()=>e(`/consultants/${N.id}`),children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"bg-gradient-to-br from-olive-green-50 to-turquoise-50 p-8 flex items-center justify-center",children:s.jsx(at,{size:120,src:j,icon:s.jsx(ke,{}),className:"border-4 border-white shadow-xl group-hover:scale-110 transition-transform duration-300"})}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900 line-clamp-1",children:b}),N.specialization&&s.jsx(le,{color:"blue",className:"mb-3 text-xs px-2 py-1",children:N.specialization}),N.rating&&s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(ra,{disabled:!0,defaultValue:N.rating,allowHalf:!0,style:{fontSize:"14px",color:"#d4af37"}}),s.jsx("span",{className:"text-sm text-gray-600",children:N.rating.toFixed(1)})]}),N.bio&&s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:t==="ar"&&N.bioAr?N.bioAr:N.bio}),s.jsx(P,{type:"primary",block:!0,size:"large",className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 font-semibold shadow-md hover:shadow-lg transition-all",onClick:C=>{C.stopPropagation(),e(`/consultants/${N.id}`)},children:t==="ar"?"عرض الملف الشخصي":"View Profile"})]})]})})},N.id)})})]})}),s.jsx(on,{}),s.jsx(Si,{})]})},{Content:vp}=Qe,v_=()=>{const{id:t}=ua(),e=nt(),{language:r}=je(),[n,a]=A.useState(null),[i,o]=A.useState(!0),[l,c]=A.useState(null);A.useEffect(()=>{t&&u()},[t]);const u=async()=>{try{o(!0),c(null);const f=await Ra.getConsultantById(t);a(f.consultant)}catch(f){console.error("Error fetching consultant:",f),c(f.message||"Failed to load consultant")}finally{o(!1)}};if(i)return s.jsxs(Qe,{className:"min-h-screen",children:[s.jsx(sn,{}),s.jsx(vp,{className:"py-20",children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})})}),s.jsx(on,{})]});if(l||!n)return s.jsxs(Qe,{className:"min-h-screen",children:[s.jsx(sn,{}),s.jsx(vp,{className:"py-20",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4",children:s.jsx(Gt,{message:r==="ar"?"خطأ":"Error",description:l||(r==="ar"?"المستشار غير موجود":"Consultant not found"),type:"error",showIcon:!0,action:s.jsx(P,{onClick:()=>e("/consultants"),children:r==="ar"?"العودة":"Go Back"})})})}),s.jsx(on,{})]});const d=n.user?`${n.firstName||""} ${n.lastName||""}`.trim()||n.user.email:`${n.firstName||""} ${n.lastName||""}`.trim()||"Consultant";return s.jsxs(Qe,{className:"min-h-screen",children:[s.jsx(sn,{}),s.jsx(vp,{className:"py-20 bg-white",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-8",children:[s.jsx(P,{icon:s.jsx(Da,{}),onClick:()=>e("/consultants"),className:"mb-8 text-[#1a4d3a] hover:text-[#2d5f4f] border-[#1a4d3a] hover:border-[#2d5f4f] font-semibold",children:r==="ar"?"العودة":"Back to Consultants"}),s.jsx(V,{className:"mb-8 border-0 shadow-lg rounded-2xl overflow-hidden",styles:{body:{padding:"48px"}},children:s.jsxs(ie,{gutter:[32,32],align:"middle",children:[s.jsx($,{xs:24,md:6,className:"text-center md:text-left",children:s.jsx(at,{size:160,src:n.user?.avatar,icon:s.jsx(ke,{}),className:"border-4 border-[#1a4d3a] shadow-xl mb-4 md:mb-0"})}),s.jsxs($,{xs:24,md:18,children:[s.jsx("div",{className:"mb-4",children:s.jsx(le,{color:"green",className:"mb-3 text-sm px-4 py-1 font-semibold",children:n.status==="APPROVED"?r==="ar"?"موافق عليه":"Approved":r==="ar"?"قيد المراجعة":"Pending Review"})}),s.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:d}),n.academicDegree&&s.jsx("p",{className:"text-2xl text-[#1a4d3a] mb-4 font-semibold",children:n.academicDegree}),n.specialization&&s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:n.specialization}),n.rating&&s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(uo,{className:"text-[#d4af37] text-xl"}),s.jsx("span",{className:"text-2xl font-bold text-gray-900",children:n.rating.toFixed(1)}),s.jsx("span",{className:"text-gray-500",children:"/ 5.0"})]}),s.jsxs(fe,{size:"large",wrap:!0,children:[s.jsx(P,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-12 px-8 text-lg font-semibold shadow-lg hover:shadow-xl transition-all hover:scale-105",onClick:()=>e("/register"),children:r==="ar"?"احجز استشارة":"Book Consultation"}),s.jsx(P,{size:"large",className:"border-2 border-[#1a4d3a] text-[#1a4d3a] hover:bg-[#1a4d3a] hover:text-white h-12 px-8 text-lg font-semibold transition-all",onClick:()=>e("/contact"),children:r==="ar"?"تواصل معنا":"Contact Us"})]})]})]})}),s.jsxs(ie,{gutter:[24,24],children:[s.jsxs($,{xs:24,lg:16,children:[n.bio&&s.jsxs(V,{className:"mb-6 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"32px"}},children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:r==="ar"?"نبذة عن المستشار":"About"}),s.jsx("p",{className:"text-gray-700 leading-relaxed text-lg whitespace-pre-line",children:n.bio})]}),s.jsxs(V,{className:"mb-6 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"32px"}},children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:r==="ar"?"المؤهلات والخبرة":"Qualifications & Experience"}),s.jsxs(ve,{column:1,bordered:!0,children:[n.yearsOfExperience&&s.jsxs(ve.Item,{label:r==="ar"?"سنوات الخبرة":"Years of Experience",children:[n.yearsOfExperience," ",r==="ar"?"سنة":"years"]}),n.academicDegree&&s.jsx(ve.Item,{label:r==="ar"?"الدرجة العلمية":"Academic Degree",children:n.academicDegree}),n.specialization&&s.jsx(ve.Item,{label:r==="ar"?"التخصص":"Specialization",children:n.specialization}),n.pricePerSession&&s.jsx(ve.Item,{label:r==="ar"?"سعر الجلسة":"Price Per Session",children:s.jsxs("span",{className:"text-[#1a4d3a] font-bold text-lg",children:[n.pricePerSession," ",r==="ar"?"ريال":"SAR"]})})]})]})]}),s.jsxs($,{xs:24,lg:8,children:[s.jsxs(V,{className:"mb-6 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"32px"}},children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:r==="ar"?"معلومات الاتصال":"Contact Information"}),s.jsxs(fe,{direction:"vertical",size:"large",className:"w-full",children:[n.user?.email&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(an,{className:"text-[#1a4d3a] text-xl"}),s.jsx("span",{className:"text-gray-700",children:n.user.email})]}),n.user?.phone&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(aa,{className:"text-[#1a4d3a] text-xl"}),s.jsx("span",{className:"text-gray-700",children:n.user.phone})]})]})]}),s.jsxs(V,{className:"border-0 shadow-lg rounded-2xl",styles:{body:{padding:"32px"}},children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:r==="ar"?"الإحصائيات":"Statistics"}),s.jsxs(fe,{direction:"vertical",size:"large",className:"w-full",children:[n.rating&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:r==="ar"?"التقييم":"Rating"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(uo,{className:"text-[#d4af37]"}),s.jsx("span",{className:"font-bold text-lg",children:n.rating.toFixed(1)})]})]}),n.totalSessions!==void 0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:r==="ar"?"إجمالي الجلسات":"Total Sessions"}),s.jsx("span",{className:"font-bold text-lg",children:n.totalSessions||0})]}),n.totalClients!==void 0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:r==="ar"?"عدد العملاء":"Total Clients"}),s.jsx("span",{className:"font-bold text-lg",children:n.totalClients||0})]})]})]})]})]})]})}),s.jsx(on,{})]})},b_=({reportId:t})=>{const{language:e}=je(),r=nt(),[n,a]=A.useState(null),[i,o]=A.useState(!0);A.useEffect(()=>{t&&l()},[t]);const l=async()=>{try{o(!0),_.info(e==="ar"?"هذه الصفحة قيد التطوير":"This page is under development"),r("/reports")}catch(c){_.error(c.message||(e==="ar"?"فشل تحميل التقرير":"Failed to load report")),r("/reports")}finally{o(!1)}};return i?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(et,{size:"large"})}):n?s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 md:px-8",children:[s.jsx(P,{icon:s.jsx(Da,{}),onClick:()=>r("/reports"),className:"mb-6",children:e==="ar"?"العودة":"Back"}),s.jsxs(V,{className:"shadow-lg",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:n.title}),s.jsxs(fe,{wrap:!0,children:[s.jsx(le,{color:"blue",children:n.reportType}),s.jsx(le,{color:n.status==="APPROVED"?"green":"orange",children:n.status})]})]}),n.summary&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:e==="ar"?"ملخص":"Summary"}),s.jsx("p",{className:"text-gray-700",children:n.summary})]}),s.jsxs(ve,{bordered:!0,column:{xs:1,sm:2},children:[n.booking&&s.jsxs(s.Fragment,{children:[s.jsx(ve.Item,{label:e==="ar"?"الحجز":"Booking",children:n.booking.id}),n.booking.service&&s.jsx(ve.Item,{label:e==="ar"?"الخدمة":"Service",children:e==="ar"?n.booking.service.titleAr:n.booking.service.title})]}),n.createdAt&&s.jsx(ve.Item,{label:e==="ar"?"تاريخ الإنشاء":"Created At",children:new Date(n.createdAt).toLocaleDateString()})]}),s.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:[n.pdfUrl&&s.jsx(P,{type:"primary",icon:s.jsx(Rr,{}),size:"large",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",href:n.pdfUrl,download:!0,children:e==="ar"?"تحميل PDF":"Download PDF"}),n.wordUrl&&s.jsx(P,{icon:s.jsx(Ct,{}),size:"large",href:n.wordUrl,download:!0,children:e==="ar"?"تحميل Word":"Download Word"})]})]})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs(V,{children:[s.jsx("p",{children:e==="ar"?"التقرير غير موجود":"Report not found"}),s.jsx(P,{onClick:()=>r("/reports"),children:e==="ar"?"العودة":"Go Back"})]})})},{Content:j_}=Qe,Mj=()=>{const{id:t}=ua();return s.jsxs(Qe,{className:"min-h-screen",children:[s.jsx(sn,{}),s.jsx(j_,{children:t?s.jsx(b_,{reportId:t}):s.jsx(GC,{})}),s.jsx(on,{}),s.jsx(Si,{})]})},{Content:w_}=Qe,S_=()=>{const{t,language:e}=je(),r=nt(),[n,a]=A.useState([]),[i,o]=A.useState(!0),[l,c]=A.useState(""),[u,d]=A.useState("all");A.useEffect(()=>{f()},[l,u]);const f=async()=>{try{o(!0);const p={status:"PUBLISHED"};l&&(p.search=l),u!=="all"&&(p.category=u);const g=await cr.getArticles(p),x="http://localhost:5000/api".replace("/api","")||"http://localhost:5000",m=(g.articles||[]).map(y=>{if(y.featuredImage){let v=y.featuredImage;/^https?:\/\//.test(v)?(v.includes(`${x}${x}`)||v.match(/http:\/\/localhost:5000/g)?.length>1)&&(v=v.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),v=`http://localhost:5000/${v}`):v=v.startsWith("/")?`${x}${v}`:`${x}/${v}`,y.featuredImage=v}return y});a(m)}catch(p){console.error("Error fetching articles:",p)}finally{o(!1)}},h=[...new Set(n.map(p=>p.category).filter(Boolean))];return s.jsxs(Qe,{className:"min-h-screen",children:[s.jsx(sn,{}),s.jsx(w_,{className:"py-20 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 text-gray-900",children:e==="ar"?"المدونة":"Blog"}),s.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"اكتشف آخر المقالات والأخبار حول الاستشارات والدراسات الاقتصادية":"Discover the latest articles and news about consulting and economic studies"})]}),s.jsxs("div",{className:"mb-12 flex flex-col md:flex-row gap-4",children:[s.jsxs(fe.Compact,{className:"flex-1",children:[s.jsx(z,{placeholder:e==="ar"?"ابحث في المقالات...":"Search articles...",allowClear:!0,size:"large",value:l,onChange:p=>c(p.target.value),onPressEnter:()=>{},className:"flex-1 border-2 border-gray-200 focus:border-[#1a4d3a] rounded-lg"}),s.jsx(P,{type:"primary",icon:s.jsx(Un,{}),size:"large",className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 font-semibold",onClick:()=>{}})]}),s.jsxs(q,{value:u,onChange:d,style:{width:200},size:"large",className:"border-2 border-gray-200 focus:border-[#1a4d3a] rounded-lg",children:[s.jsx(q.Option,{value:"all",children:e==="ar"?"جميع الفئات":"All Categories"}),h.map(p=>s.jsx(q.Option,{value:p,children:p},p))]})]}),i?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(et,{size:"large"})}):n.length===0?s.jsx(Bt,{description:e==="ar"?"لا توجد مقالات متاحة":"No articles available",className:"py-12"}):s.jsxs(s.Fragment,{children:[n.length>0&&s.jsx(V,{className:"mb-12 overflow-hidden border-0 shadow-2xl",styles:{body:{padding:"0"}},style:{borderRadius:"24px"},cover:n[0].featuredImage?s.jsxs("div",{className:"relative h-[500px] overflow-hidden",children:[s.jsx("img",{src:n[0].featuredImage,alt:e==="ar"&&n[0].titleAr||n[0].title,className:"w-full h-full object-cover",onError:p=>{console.error("Failed to load featured image:",n[0].featuredImage),p.target.style.display="none"}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 md:p-12 text-white",children:[n[0].category&&s.jsx(le,{color:"blue",className:"mb-4 text-sm px-4 py-1 font-semibold",children:n[0].category}),s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 leading-tight",children:e==="ar"&&n[0].titleAr||n[0].title}),n[0].excerpt&&s.jsx("p",{className:"text-xl text-gray-100 mb-6 line-clamp-2 leading-relaxed",children:e==="ar"&&n[0].excerptAr||n[0].excerpt}),s.jsxs("div",{className:"flex items-center gap-6 text-base mb-6",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Dt,{}),de(n[0].publishedAt||n[0].createdAt).format("YYYY-MM-DD")]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(ur,{}),n[0].views||0]})]}),s.jsx(P,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-14 px-10 text-lg font-semibold shadow-lg hover:shadow-xl transition-all",onClick:()=>r(`/blog/${n[0].slug}`),children:e==="ar"?"اقرأ المزيد":"Read More"})]})]}):null}),s.jsx(ie,{gutter:[32,32],children:n.slice(1).map(p=>s.jsx($,{xs:24,sm:12,lg:8,children:s.jsxs(V,{hoverable:!0,className:"h-full transition-all duration-300 hover:shadow-2xl border-0 rounded-2xl overflow-hidden group",styles:{body:{padding:"0"}},cover:p.featuredImage?s.jsx("div",{className:"relative h-48 overflow-hidden",children:s.jsx("img",{alt:e==="ar"&&p.titleAr||p.title,src:p.featuredImage,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110",onError:g=>{console.error("Failed to load article image:",p.featuredImage),g.target.style.display="none"}})}):s.jsx("div",{className:"h-48 bg-gradient-to-br from-olive-green-400 to-turquoise-400 flex items-center justify-center",children:s.jsx("span",{className:"text-white text-4xl font-bold",children:e==="ar"?(p.titleAr||p.title).charAt(0):p.title.charAt(0)})}),onClick:()=>r(`/blog/${p.slug}`),children:[s.jsx("div",{className:"mb-2",children:p.category&&s.jsx(le,{color:"blue",className:"mb-2",children:p.category})}),s.jsx("h3",{className:"text-xl font-bold mb-2 line-clamp-2 hover:text-olive-green-600 transition-colors",children:e==="ar"&&p.titleAr||p.title}),p.excerpt&&s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:e==="ar"&&p.excerptAr||p.excerpt}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Dt,{}),de(p.publishedAt||p.createdAt).format("YYYY-MM-DD")]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ur,{}),p.views||0]})]})]})},p.id))})]})]})}),s.jsx(on,{}),s.jsx(Si,{})]})},{Content:bp}=Qe,N_=()=>{const{slug:t}=ua(),e=nt(),{t:r,language:n}=je(),[a,i]=A.useState(null),[o,l]=A.useState(!0),[c,u]=A.useState(null),[d,f]=A.useState([]);A.useEffect(()=>{t&&(h(),p())},[t]);const h=async()=>{try{l(!0),u(null);const m=(await cr.getArticleBySlug(t)).article;if(m&&m.featuredImage){const y="http://localhost:5000/api".replace("/api","")||"http://localhost:5000";let v=m.featuredImage;/^https?:\/\//.test(v)?(v.includes(`${y}${y}`)||v.match(/http:\/\/localhost:5000/g)?.length>1)&&(v=v.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),v=`http://localhost:5000/${v}`):v=v.startsWith("/")?`${y}${v}`:`${y}/${v}`,m.featuredImage=v}if(m&&(m.content||m.contentAr)){const y="http://localhost:5000/api".replace("/api","")||"http://localhost:5000",v=w=>w&&w.replace(/<img([^>]+)src=["']([^"']+)["']/gi,(N,b,S)=>{let j=S;return S.startsWith("http://")||S.startsWith("https://")?(S.includes(`${y}${y}`)||S.match(/http:\/\/localhost:5000/g)?.length>1)&&(j=S.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),j=`http://localhost:5000/${j}`):j=S.startsWith("/")?`${y}${S}`:`${y}/${S}`,`<img${b}src="${j}"`});m.content&&(m.content=v(m.content)),m.contentAr&&(m.contentAr=v(m.contentAr))}i(m)}catch(x){console.error("Error fetching article:",x),u(x.message||"Failed to load article")}finally{l(!1)}},p=async()=>{try{const x=await cr.getArticles({status:"PUBLISHED",category:a?.category,limit:3});f(x.articles?.filter(m=>m.slug!==t).slice(0,3)||[])}catch(x){console.error("Error fetching related articles:",x)}},g=()=>{navigator.share?navigator.share({title:n==="ar"&&a?.titleAr||a?.title,text:n==="ar"&&a?.excerptAr||a?.excerpt,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert(n==="ar"?"تم نسخ الرابط":"Link copied to clipboard"))};return o?s.jsxs(Qe,{className:"min-h-screen",children:[s.jsx(sn,{}),s.jsx(bp,{className:"py-16",children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})})}),s.jsx(on,{})]}):c||!a?s.jsxs(Qe,{className:"min-h-screen",children:[s.jsx(sn,{}),s.jsx(bp,{className:"py-16",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4",children:s.jsx(Gt,{message:n==="ar"?"خطأ":"Error",description:c||(n==="ar"?"المقال غير موجود":"Article not found"),type:"error",showIcon:!0,action:s.jsx(P,{onClick:()=>e("/blog"),children:n==="ar"?"العودة للمدونة":"Back to Blog"})})})}),s.jsx(on,{})]}):s.jsxs(Qe,{className:"min-h-screen",children:[s.jsx(sn,{}),s.jsx(bp,{className:"py-20 bg-white",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 md:px-8",children:[s.jsx(P,{icon:s.jsx(Da,{}),onClick:()=>e("/blog"),className:"mb-8 text-[#1a4d3a] hover:text-[#2d5f4f] border-[#1a4d3a] hover:border-[#2d5f4f] font-semibold",children:n==="ar"?"العودة للمدونة":"Back to Blog"}),a.featuredImage&&s.jsx("div",{className:"relative h-[400px] md:h-[500px] rounded-2xl overflow-hidden mb-8 shadow-2xl",children:s.jsx("img",{src:a.featuredImage,alt:n==="ar"&&a.titleAr||a.title,className:"w-full h-full object-cover",onError:x=>{console.error("Failed to load featured image:",a.featuredImage),x.target.style.display="none"}})}),s.jsxs(V,{className:"mb-8 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"40px"}},children:[s.jsxs("div",{className:"mb-6",children:[a.category&&s.jsx(le,{color:"blue",className:"mb-3 text-sm px-4 py-1 font-semibold",children:a.category}),s.jsx(le,{color:a.status==="PUBLISHED"?"green":"orange",className:"text-sm px-4 py-1 font-semibold",children:a.status==="PUBLISHED"?n==="ar"?"منشور":"Published":n==="ar"?"مسودة":"Draft"})]}),s.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 text-gray-900 leading-tight",children:n==="ar"&&a.titleAr||a.title}),a.excerpt&&s.jsx("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 leading-relaxed",children:n==="ar"&&a.excerptAr||a.excerpt}),s.jsx(Mt,{className:"my-6"}),s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(at,{size:56,icon:s.jsx(ke,{}),className:"border-2 border-[#1a4d3a]"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-900",children:a.author?.email||"Admin"}),s.jsxs("div",{className:"text-base text-gray-500 flex items-center gap-3 mt-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Dt,{}),de(a.publishedAt||a.createdAt).format("YYYY-MM-DD")]}),s.jsx("span",{className:"mx-2",children:"•"}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ur,{}),a.views||0," ",n==="ar"?"مشاهدة":"views"]})]})]})]}),s.jsx(P,{icon:s.jsx(pR,{}),onClick:g,className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 text-white font-semibold shadow-md hover:shadow-lg transition-all",children:n==="ar"?"مشاركة":"Share"})]})]}),s.jsx(V,{className:"mb-8 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"48px"}},children:s.jsx("div",{className:"prose prose-lg max-w-none article-content",style:{fontSize:"18px",lineHeight:"1.8",color:"#374151"},dangerouslySetInnerHTML:{__html:n==="ar"&&a.contentAr||a.content}})}),a.tags&&s.jsxs(V,{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:n==="ar"?"العلامات":"Tags"}),s.jsx(fe,{wrap:!0,children:JSON.parse(a.tags||"[]").map((x,m)=>s.jsx(le,{color:"blue",children:x},m))})]}),d.length>0&&s.jsxs("div",{className:"mt-12",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",children:n==="ar"?"مقالات ذات صلة":"Related Articles"}),s.jsx(ie,{gutter:[24,24],children:d.map(x=>s.jsx($,{xs:24,sm:12,lg:8,children:s.jsxs(V,{hoverable:!0,className:"h-full",cover:x.featuredImage?s.jsx("img",{alt:n==="ar"&&x.titleAr||x.title,src:x.featuredImage,className:"h-48 object-cover"}):null,onClick:()=>e(`/blog/${x.slug}`),children:[s.jsx("h3",{className:"text-lg font-bold mb-2 line-clamp-2",children:n==="ar"&&x.titleAr||x.title}),x.excerpt&&s.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-2",children:n==="ar"&&x.excerptAr||x.excerpt}),s.jsx("div",{className:"text-xs text-gray-500",children:de(x.publishedAt||x.createdAt).format("YYYY-MM-DD")})]})},x.id))})]})]})}),s.jsx(on,{})]})},{Content:A_}=Qe,{TextArea:C_}=z,k_=()=>{const{language:t}=je(),[e]=E.useForm(),[r,n]=A.useState(!1),[a,i]=A.useState(null),[o,l]=A.useState(!1),c=async u=>{try{n(!0),i(null),l(!1),await Mr.createTicket({subject:`Contact Form: ${u.name}`,description:`Name: ${u.name}
Email: ${u.email}
Phone: ${u.phone||"N/A"}

Message:
${u.message}`,priority:"MEDIUM",category:"GENERAL_INQUIRY"}),l(!0),e.resetFields(),_.success(t==="ar"?"تم إرسال رسالتك بنجاح!":"Your message has been sent successfully!")}catch(d){console.error("Error sending message:",d),i(d.message||(t==="ar"?"فشل إرسال الرسالة":"Failed to send message")),_.error(t==="ar"?"فشل إرسال الرسالة":"Failed to send message")}finally{n(!1)}};return s.jsxs(Qe,{className:"min-h-screen",children:[s.jsx(sn,{}),s.jsx(A_,{className:"py-12 md:py-20 bg-gradient-to-b from-gray-50 to-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[s.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 text-gray-900",children:t==="ar"?"اتصل بنا":"Contact Us"}),s.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto",children:t==="ar"?"نحن هنا لمساعدتك. تواصل معنا اليوم وسنكون سعداء للرد على استفساراتك":"We are here to help. Contact us today and we will be happy to answer your inquiries"})]}),o&&s.jsx(Gt,{message:t==="ar"?"تم الإرسال بنجاح!":"Message Sent Successfully!",description:t==="ar"?"شكراً لتواصلك معنا. سنرد عليك في أقرب وقت ممكن.":"Thank you for contacting us. We will get back to you as soon as possible.",type:"success",showIcon:!0,closable:!0,onClose:()=>l(!1),className:"mb-6"}),a&&s.jsx(Gt,{message:t==="ar"?"خطأ في الإرسال":"Error Sending Message",description:a,type:"error",showIcon:!0,closable:!0,onClose:()=>i(null),className:"mb-6"}),s.jsxs(ie,{gutter:[32,32],children:[s.jsx($,{xs:24,lg:14,children:s.jsxs(V,{className:"shadow-xl border-0 rounded-2xl",styles:{body:{padding:"32px"}},children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-gray-900",children:t==="ar"?"إرسال رسالة":"Send Us a Message"}),s.jsxs(E,{form:e,onFinish:c,layout:"vertical",size:"large",children:[s.jsx(E.Item,{name:"name",label:t==="ar"?"الاسم الكامل":"Full Name",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال الاسم":"Please enter your name"}],children:s.jsx(z,{placeholder:t==="ar"?"أدخل اسمك الكامل":"Enter your full name",className:"rounded-lg"})}),s.jsx(E.Item,{name:"email",label:t==="ar"?"البريد الإلكتروني":"Email Address",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال البريد الإلكتروني":"Please enter your email"},{type:"email",message:t==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email address"}],children:s.jsx(z,{type:"email",placeholder:"example@email.com",prefix:s.jsx(an,{className:"text-gray-400"}),className:"rounded-lg"})}),s.jsx(E.Item,{name:"phone",label:t==="ar"?"رقم الهاتف (اختياري)":"Phone Number (Optional)",children:s.jsx(z,{placeholder:"+966 5XX XXX XXX",prefix:s.jsx(aa,{className:"text-gray-400"}),className:"rounded-lg"})}),s.jsx(E.Item,{name:"message",label:t==="ar"?"الرسالة":"Message",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال الرسالة":"Please enter your message"},{min:10,message:t==="ar"?"الرسالة يجب أن تكون على الأقل 10 أحرف":"Message must be at least 10 characters"}],children:s.jsx(C_,{rows:6,placeholder:t==="ar"?"اكتب رسالتك هنا...":"Write your message here...",className:"rounded-lg",showCount:!0,maxLength:1e3})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",loading:r,icon:s.jsx(lh,{}),className:"w-full bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 h-12 font-semibold text-base shadow-lg hover:shadow-xl transition-all rounded-lg",children:t==="ar"?"إرسال الرسالة":"Send Message"})})]})]})}),s.jsx($,{xs:24,lg:10,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs(V,{className:"shadow-xl border-0 rounded-2xl bg-gradient-to-br from-olive-green-50 to-turquoise-50",styles:{body:{padding:"32px"}},children:[s.jsx("h3",{className:"text-2xl font-bold mb-6 text-gray-900",children:t==="ar"?"معلومات الاتصال":"Contact Information"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 rounded-xl bg-white shadow-md",children:s.jsx(aa,{className:"text-2xl text-olive-green-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:t==="ar"?"الهاتف":"Phone"}),s.jsx("a",{href:"tel:+966123456789",className:"text-gray-600 hover:text-olive-green-600 transition-colors",children:"+966 12 345 6789"})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 rounded-xl bg-white shadow-md",children:s.jsx(an,{className:"text-2xl text-olive-green-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:t==="ar"?"البريد الإلكتروني":"Email"}),s.jsx("a",{href:"mailto:info@jadwa.com",className:"text-gray-600 hover:text-olive-green-600 transition-colors",children:"info@jadwa.com"})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 rounded-xl bg-white shadow-md",children:s.jsx(WC,{className:"text-2xl text-olive-green-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:"WhatsApp"}),s.jsx("a",{href:"https://wa.me/966123456789",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-olive-green-600 transition-colors",children:t==="ar"?"تواصل عبر واتساب":"Contact via WhatsApp"})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 rounded-xl bg-white shadow-md",children:s.jsx(sh,{className:"text-2xl text-olive-green-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:t==="ar"?"العنوان":"Address"}),s.jsx("div",{className:"text-gray-600",children:t==="ar"?"الرياض، المملكة العربية السعودية":"Riyadh, Saudi Arabia"})]})]})]})]}),s.jsx(V,{className:"shadow-xl border-0 rounded-2xl overflow-hidden",styles:{body:{padding:"0"}},children:s.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3624.5!2d46.6753!3d24.7136!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMjTCsDQyJzQ5LjAiTiA0NsKwNDAnMzEuMSJF!5e0!3m2!1sen!2s!4v1234567890",width:"100%",height:"300",style:{border:0},allowFullScreen:!0,loading:"lazy",title:"Location Map"})})]})})]})]})}),s.jsx(on,{}),s.jsx(Si,{})]})},{Content:E_}=Qe,O_=()=>{const{language:t}=je(),e=nt(),r=wi(),{login:n,isAuthenticated:a}=pr(),[i]=E.useForm(),[o,l]=A.useState(!1);D.useEffect(()=>{if(a){const u=r.state?.from?.pathname||"/";e(u,{replace:!0})}},[a,e,r]);const c=async u=>{l(!0);try{const d=await n(u.email,u.password);if(d.success){const f=d.user.role,h=r.state?.from?.pathname;h?e(h,{replace:!0}):f==="CLIENT"?e("/client",{replace:!0}):f==="CONSULTANT"?e("/consultant",{replace:!0}):["ADMIN","SUPER_ADMIN","ANALYST","SUPPORT","FINANCE"].includes(f)?e("/admin",{replace:!0}):e("/",{replace:!0})}}catch(d){console.error("Login error:",d)}finally{l(!1)}};return s.jsx(Qe,{className:"min-h-screen bg-gradient-to-br from-olive-green-50 to-turquoise-50",children:s.jsx(E_,{className:"flex items-center justify-center py-8 px-4",children:s.jsxs(V,{className:"w-full max-w-md shadow-xl",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-olive-green-600 to-turquoise-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-white font-bold text-3xl",children:"ج"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Jadwa"}),s.jsx("p",{className:"text-gray-600",children:t==="ar"?"تسجيل الدخول":"Login"}),!1]}),s.jsxs(E,{form:i,onFinish:c,layout:"vertical",size:"large",children:[s.jsx(E.Item,{name:"email",label:t==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"},{type:"email",message:t==="ar"?"بريد إلكتروني غير صحيح":"Invalid email"}],children:s.jsx(z,{prefix:s.jsx(an,{}),placeholder:t==="ar"?"أدخل بريدك الإلكتروني":"Enter your email"})}),s.jsx(E.Item,{name:"password",label:t==="ar"?"كلمة المرور":"Password",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsx(z.Password,{prefix:s.jsx(Ht,{}),placeholder:t==="ar"?"أدخل كلمة المرور":"Enter your password"})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 w-full",loading:o,disabled:o,children:t==="ar"?"تسجيل الدخول":"Login"})})]}),s.jsx(Mt,{children:t==="ar"?"أو":"OR"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(P,{type:"default",size:"large",className:"border-turquoise-500 text-turquoise-600 hover:bg-turquoise-50 w-full",onClick:()=>e("/register"),children:t==="ar"?"إنشاء حساب جديد":"Create New Account"}),s.jsx(P,{type:"text",size:"large",className:"w-full",onClick:()=>e("/"),children:t==="ar"?"العودة للصفحة الرئيسية":"Back to Home"})]})]})})})},{Content:P_}=Qe,{Option:Ie}=q,{TextArea:Ms}=z,{Step:T_}=rh,I_=({value:t,onChange:e})=>{const{language:r}=je(),[n,a]=A.useState([]),[i,o]=A.useState(!1);A.useEffect(()=>{l()},[]);const l=async()=>{try{o(!0);const c=await Ra.getConsultants({isAvailable:!0});a(c.consultants||[])}catch(c){console.error("Error fetching consultants:",c)}finally{o(!1)}};return s.jsx(q,{value:t,onChange:e,placeholder:r==="ar"?"اختر مستشار (اختياري)":"Select Consultant (Optional)",allowClear:!0,loading:i,showSearch:!0,filterOption:(c,u)=>(u?.label??"").toLowerCase().includes(c.toLowerCase()),children:n.map(c=>s.jsx(Ie,{value:c.id,label:`${c.firstName} ${c.lastName}`,children:`${c.firstName} ${c.lastName} - ${c.specialization}`},c.id))})},M_=()=>{const{language:t}=je(),e=nt(),{register:r,isAuthenticated:n}=pr(),[a]=E.useForm(),[i,o]=A.useState(!1),[l,c]=A.useState(0);D.useEffect(()=>{n&&e("/",{replace:!0})},[n,e]);const u=async(C,k="USER")=>{if(!C||!C.originFileObj)return null;try{const O=new FormData;return O.append("file",C.originFileObj),O.append("ownerType",k),(await Hr.uploadFile(O))?.file?.fileUrl||null}catch(O){return console.error("Error uploading file:",O),null}},d=async(C,k="USER")=>{if(!C||!Array.isArray(C)||C.length===0)return[];const O=C.map(M=>u(M,k));return(await Promise.all(O)).filter(M=>M!==null)},f=async C=>{o(!0);try{const k=C.role||"client",O={email:C.email,password:C.password,role:k?k.toUpperCase():"CLIENT",firstName:C.firstName,lastName:C.lastName,phone:C.phone,dateOfBirth:C.dateOfBirth?C.dateOfBirth.toISOString():null,gender:C.gender,country:C.country||"Saudi Arabia",city:C.city,address:C.address,postalCode:C.postalCode,preferredLanguage:C.preferredLanguage||"ar",termsAccepted:C.termsAccepted||!1};if(k==="client")O.accountType=C.accountType,O.sector=C.sector,O.companyName=C.companyName,O.commercialName=C.commercialName,O.preferredServices=C.preferredServices||[],O.registrationPurpose=C.registrationPurpose,O.preferredConsultantId=C.preferredConsultantId,O.preferredPaymentMethod=C.preferredPaymentMethod,O.invoiceAddress=C.invoiceAddress,O.taxNumber=C.taxNumber,O.notificationEmail=C.notificationEmail!==!1,O.notificationApp=C.notificationApp!==!1,O.notificationWhatsApp=C.notificationWhatsApp||!1,(C.accountType==="COMPANY"||C.accountType==="GOVERNMENT_ENTITY")&&(O.commercialRegister=C.commercialRegister,O.taxNumber=C.taxNumber,O.economicSector=C.economicSector,O.industry=C.industry,O.numberOfEmployees=C.numberOfEmployees,C.entityDefinition&&C.entityDefinition.length>0&&(O.entityDefinition=await u(C.entityDefinition[0],"GENERAL")),C.commercialRegisterFile&&C.commercialRegisterFile.length>0&&(O.commercialRegisterFile=await u(C.commercialRegisterFile[0],"GENERAL")),C.companyLogo&&C.companyLogo.length>0&&(O.companyLogo=await u(C.companyLogo[0],"GENERAL")));else if(k==="consultant"){if(O.academicTitle=C.academicTitle,O.academicDegree=C.academicDegree,O.university=C.university,O.graduationYear=C.graduationYear,O.specialization=C.specialization,O.specificSpecialization=C.specificSpecialization,O.bio=C.bio,O.pricePerSession=C.pricePerSession||0,O.sessionDuration=C.sessionDuration||60,O.consultationMode=C.consultationMode||[],O.yearsOfExperience=C.yearsOfExperience||0,O.previousEmployers=C.previousEmployers,O.areasOfExpertise=C.areasOfExpertise||[],O.implementedProjects=C.implementedProjects||[],O.languages=C.languages||[],O.certifications=C.certifications||[],O.professionalCourses=C.professionalCourses,C.profilePicture&&C.profilePicture.length>0&&(O.profilePicture=await u(C.profilePicture[0],"USER")),C.cvUrl&&C.cvUrl.length>0&&(O.cvUrl=await u(C.cvUrl[0],"GENERAL")),C.academicCertificates&&C.academicCertificates.length>0){const M=await d(C.academicCertificates,"GENERAL");O.academicCertificates=M}C.nationalId&&C.nationalId.length>0&&(O.nationalId=await u(C.nationalId[0],"GENERAL")),C.consultingLicense&&C.consultingLicense.length>0&&(O.consultingLicense=await u(C.consultingLicense[0],"GENERAL")),O.bankAccount=C.bankAccount,O.bankName=C.bankName,O.iban=C.iban,O.acceptsSessions=C.acceptsSessions!==!1}const I=await r(O);if(I.success){_.success(t==="ar"?"تم إنشاء الحساب بنجاح":"Account created successfully");const M=I.user.role;M==="CLIENT"?e("/client",{replace:!0}):M==="CONSULTANT"?e("/consultant",{replace:!0}):e("/",{replace:!0})}}catch(k){_.error(k.message||(t==="ar"?"فشل إنشاء الحساب":"Failed to create account")),console.error("Registration error:",k)}finally{o(!1)}},h=E.useWatch("role",a),p=E.useWatch("accountType",a),g=[{title:t==="ar"?"المعلومات الأساسية":"Basic Information",content:"basic"},{title:h==="client"?t==="ar"?"معلومات العميل":"Client Information":t==="ar"?"المؤهلات الأكاديمية":"Academic Qualifications",content:"role-specific"},{title:h==="client"?t==="ar"?"الخدمات والإعدادات":"Services & Settings":t==="ar"?"الخبرات والخدمات":"Experience & Services",content:"additional"},{title:h==="client"?t==="ar"?"المعلومات المالية":"Financial Information":t==="ar"?"المعلومات المالية والوثائق":"Financial Info & Documents",content:"financial"}],x=()=>s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"role",label:t==="ar"?"نوع الحساب":"Account Type",rules:[{required:!0,message:t==="ar"?"يرجى اختيار نوع الحساب":"Please select account type"}],initialValue:"client",children:s.jsxs(q,{placeholder:t==="ar"?"اختر نوع الحساب":"Select account type",children:[s.jsx(Ie,{value:"client",children:t==="ar"?"عميل":"Client"}),s.jsx(Ie,{value:"consultant",children:t==="ar"?"مستشار":"Consultant"})]})}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"firstName",label:t==="ar"?"الاسم الأول":"First Name",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsx(z,{prefix:s.jsx(ke,{}),placeholder:t==="ar"?"الاسم الأول":"First Name"})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"lastName",label:t==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsx(z,{prefix:s.jsx(ke,{}),placeholder:t==="ar"?"اسم العائلة":"Last Name"})})})]}),s.jsx(E.Item,{name:"email",label:t==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"},{type:"email",message:t==="ar"?"بريد إلكتروني غير صحيح":"Invalid email"}],children:s.jsx(z,{prefix:s.jsx(an,{}),placeholder:t==="ar"?"البريد الإلكتروني":"Email"})}),s.jsx(E.Item,{name:"phone",label:t==="ar"?"رقم الهاتف":"Phone Number",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsx(z,{prefix:s.jsx(aa,{}),placeholder:"+966 5XX XXX XXX"})}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"password",label:t==="ar"?"كلمة المرور":"Password",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"},{min:8,message:t==="ar"?"8 أحرف على الأقل":"At least 8 characters"},{validator:(C,k)=>k?k.length<8?Promise.reject(new Error(t==="ar"?"يجب أن تكون كلمة المرور 8 أحرف على الأقل":"Password must be at least 8 characters")):/[A-Z]/.test(k)?/[a-z]/.test(k)?/[0-9]/.test(k)?Promise.resolve():Promise.reject(new Error(t==="ar"?"يجب أن تحتوي كلمة المرور على رقم واحد على الأقل":"Password must contain at least one number")):Promise.reject(new Error(t==="ar"?"يجب أن تحتوي كلمة المرور على حرف صغير واحد على الأقل":"Password must contain at least one lowercase letter")):Promise.reject(new Error(t==="ar"?"يجب أن تحتوي كلمة المرور على حرف كبير واحد على الأقل":"Password must contain at least one uppercase letter")):Promise.resolve()}],help:t==="ar"?"يجب أن تحتوي على 8 أحرف على الأقل، حرف كبير، حرف صغير، ورقم":"Must contain at least 8 characters with uppercase, lowercase, and number",children:s.jsx(z.Password,{prefix:s.jsx(Ht,{}),placeholder:t==="ar"?"كلمة المرور":"Password"})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"confirmPassword",label:t==="ar"?"تأكيد كلمة المرور":"Confirm Password",dependencies:["password"],rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"},({getFieldValue:C})=>({validator(k,O){return!O||C("password")===O?Promise.resolve():Promise.reject(new Error(t==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match"))}})],children:s.jsx(z.Password,{prefix:s.jsx(Ht,{}),placeholder:t==="ar"?"تأكيد كلمة المرور":"Confirm Password"})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:8,children:s.jsx(E.Item,{name:"dateOfBirth",label:t==="ar"?"تاريخ الميلاد":"Date of Birth",children:s.jsx(ys,{className:"w-full",placeholder:t==="ar"?"تاريخ الميلاد":"Date of Birth"})})}),s.jsx($,{xs:24,sm:8,children:s.jsx(E.Item,{name:"gender",label:t==="ar"?"الجنس":"Gender",children:s.jsxs(q,{placeholder:t==="ar"?"اختر الجنس":"Select Gender",children:[s.jsx(Ie,{value:"MALE",children:t==="ar"?"ذكر":"Male"}),s.jsx(Ie,{value:"FEMALE",children:t==="ar"?"أنثى":"Female"}),s.jsx(Ie,{value:"OTHER",children:t==="ar"?"أخرى":"Other"})]})})}),s.jsx($,{xs:24,sm:8,children:s.jsx(E.Item,{name:"preferredLanguage",label:t==="ar"?"اللغة المفضلة":"Preferred Language",children:s.jsxs(q,{children:[s.jsx(Ie,{value:"ar",children:t==="ar"?"العربية":"Arabic"}),s.jsx(Ie,{value:"en",children:t==="ar"?"الإنجليزية":"English"})]})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"city",label:t==="ar"?"المدينة":"City",children:s.jsx(z,{prefix:s.jsx(ih,{}),placeholder:t==="ar"?"المدينة":"City"})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"country",label:t==="ar"?"الدولة":"Country",children:s.jsx(q,{children:s.jsx(Ie,{value:"Saudi Arabia",children:t==="ar"?"السعودية":"Saudi Arabia"})})})})]}),s.jsx(E.Item,{name:"address",label:t==="ar"?"العنوان":"Address",children:s.jsx(Ms,{rows:2,placeholder:t==="ar"?"العنوان الكامل":"Full Address"})}),s.jsx(E.Item,{name:"postalCode",label:t==="ar"?"الرمز البريدي":"Postal Code",children:s.jsx(z,{placeholder:t==="ar"?"الرمز البريدي":"Postal Code"})})]}),m=()=>s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"accountType",label:t==="ar"?"نوع الحساب":"Account Type",rules:[{required:!0}],children:s.jsxs(Sn.Group,{children:[s.jsx(Sn,{value:"INDIVIDUAL",children:t==="ar"?"فرد":"Individual"}),s.jsx(Sn,{value:"COMPANY",children:t==="ar"?"شركة":"Company"}),s.jsx(Sn,{value:"GOVERNMENT_ENTITY",children:t==="ar"?"جهة حكومية":"Government Entity"})]})}),(p==="COMPANY"||p==="GOVERNMENT_ENTITY")&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"companyName",label:t==="ar"?"اسم المنشأة":"Establishment Name",children:s.jsx(z,{placeholder:t==="ar"?"اسم المنشأة":"Establishment Name"})}),s.jsx(E.Item,{name:"commercialName",label:t==="ar"?"الاسم التجاري":"Commercial Name",children:s.jsx(z,{placeholder:t==="ar"?"الاسم التجاري":"Commercial Name"})}),s.jsx(E.Item,{name:"commercialRegister",label:t==="ar"?"رقم السجل التجاري":"Commercial Register Number",children:s.jsx(z,{placeholder:t==="ar"?"رقم السجل التجاري":"Commercial Register Number"})}),s.jsx(E.Item,{name:"taxNumber",label:t==="ar"?"الرقم الضريبي":"Tax Number",children:s.jsx(z,{placeholder:t==="ar"?"الرقم الضريبي (اختياري)":"Tax Number (Optional)"})}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"economicSector",label:t==="ar"?"القطاع الاقتصادي":"Economic Sector",children:s.jsxs(q,{placeholder:t==="ar"?"اختر القطاع":"Select Sector",children:[s.jsx(Ie,{value:"GOVERNMENT",children:t==="ar"?"حكومي":"Government"}),s.jsx(Ie,{value:"PRIVATE",children:t==="ar"?"خاص":"Private"}),s.jsx(Ie,{value:"NON_PROFIT",children:t==="ar"?"غير ربحي":"Non-profit"})]})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"industry",label:t==="ar"?"المجال":"Industry",children:s.jsxs(q,{placeholder:t==="ar"?"اختر المجال":"Select Industry",children:[s.jsx(Ie,{value:"INDUSTRIAL",children:t==="ar"?"صناعي":"Industrial"}),s.jsx(Ie,{value:"COMMERCIAL",children:t==="ar"?"تجاري":"Commercial"}),s.jsx(Ie,{value:"SERVICE",children:t==="ar"?"خدمي":"Service"}),s.jsx(Ie,{value:"FINANCIAL",children:t==="ar"?"مالي":"Financial"}),s.jsx(Ie,{value:"CONSULTING",children:t==="ar"?"استشاري":"Consulting"}),s.jsx(Ie,{value:"EDUCATIONAL",children:t==="ar"?"تعليمي":"Educational"})]})})})]}),s.jsx(E.Item,{name:"numberOfEmployees",label:t==="ar"?"عدد الموظفين (تقديري)":"Number of Employees (Estimated)",children:s.jsx(z,{type:"number",min:0,placeholder:t==="ar"?"عدد الموظفين":"Number of Employees"})}),s.jsx(Mt,{children:t==="ar"?"المرفقات (اختيارية)":"Attachments (Optional)"}),s.jsx(E.Item,{name:"entityDefinition",label:t==="ar"?"مرفق تعريف بالمنشأة":"Entity Definition Document",valuePropName:"fileList",getValueFromEvent:C=>Array.isArray(C)?C:C?.fileList,children:s.jsx(Pt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf",children:s.jsx(P,{icon:s.jsx(ir,{}),children:t==="ar"?"رفع ملف PDF":"Upload PDF"})})}),s.jsx(E.Item,{name:"commercialRegisterFile",label:t==="ar"?"السجل التجاري أو الهوية":"Commercial Register or ID",valuePropName:"fileList",getValueFromEvent:C=>Array.isArray(C)?C:C?.fileList,children:s.jsx(Pt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf,.jpg,.jpeg,.png",children:s.jsx(P,{icon:s.jsx(ir,{}),children:t==="ar"?"رفع ملف PDF أو صورة":"Upload PDF or Image"})})}),s.jsx(E.Item,{name:"companyLogo",label:t==="ar"?"شعار الشركة":"Company Logo",valuePropName:"fileList",getValueFromEvent:C=>Array.isArray(C)?C:C?.fileList,children:s.jsx(Pt,{beforeUpload:()=>!1,maxCount:1,accept:".jpg,.jpeg,.png",listType:"picture-card",children:s.jsxs("div",{children:[s.jsx(ir,{}),s.jsx("div",{style:{marginTop:8},children:t==="ar"?"رفع":"Upload"})]})})})]}),s.jsx(E.Item,{name:"sector",label:t==="ar"?"القطاع":"Sector",children:s.jsx(z,{placeholder:t==="ar"?"القطاع":"Sector"})})]}),y=()=>s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"academicTitle",label:t==="ar"?"اللقب العلمي":"Academic Title",children:s.jsxs(q,{placeholder:t==="ar"?"اختر اللقب العلمي":"Select Academic Title",children:[s.jsx(Ie,{value:"DOCTOR",children:t==="ar"?"دكتور":"Doctor"}),s.jsx(Ie,{value:"PROFESSOR",children:t==="ar"?"أستاذ":"Professor"}),s.jsx(Ie,{value:"CONSULTANT",children:t==="ar"?"مستشار":"Consultant"}),s.jsx(Ie,{value:"EXPERT",children:t==="ar"?"خبير":"Expert"}),s.jsx(Ie,{value:"ASSOCIATE_PROFESSOR",children:t==="ar"?"أ.مشارك":"Associate Professor"})]})}),s.jsx(E.Item,{name:"academicDegree",label:t==="ar"?"أعلى مؤهل علمي":"Highest Academic Qualification",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsxs(q,{placeholder:t==="ar"?"اختر المؤهل العلمي":"Select Academic Qualification",children:[s.jsx(Ie,{value:"BACHELOR",children:t==="ar"?"بكالوريوس":"Bachelor"}),s.jsx(Ie,{value:"MASTER",children:t==="ar"?"ماجستير":"Master"}),s.jsx(Ie,{value:"PHD",children:t==="ar"?"دكتوراه":"PhD"})]})}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"university",label:t==="ar"?"الجامعة المانحة":"Issuing University",children:s.jsx(z,{placeholder:t==="ar"?"اسم الجامعة":"University Name"})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"graduationYear",label:t==="ar"?"سنة التخرج":"Graduation Year",children:s.jsx(z,{type:"number",min:1950,max:new Date().getFullYear(),placeholder:"YYYY"})})})]}),s.jsx(E.Item,{name:"profilePicture",label:t==="ar"?"الصورة الشخصية":"Profile Picture",valuePropName:"fileList",getValueFromEvent:C=>Array.isArray(C)?C:C?.fileList,children:s.jsx(Pt,{beforeUpload:()=>!1,maxCount:1,accept:".jpg,.jpeg,.png",listType:"picture-card",children:s.jsxs("div",{children:[s.jsx(ir,{}),s.jsx("div",{style:{marginTop:8},children:t==="ar"?"رفع":"Upload"})]})})}),s.jsx(E.Item,{name:"specialization",label:t==="ar"?"التخصص العام":"General Specialization",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsxs(q,{placeholder:t==="ar"?"اختر التخصص":"Select Specialization",children:[s.jsx(Ie,{value:"ECONOMICS",children:t==="ar"?"اقتصاد":"Economics"}),s.jsx(Ie,{value:"MANAGEMENT",children:t==="ar"?"إدارة":"Management"}),s.jsx(Ie,{value:"FINANCE",children:t==="ar"?"مالية":"Finance"}),s.jsx(Ie,{value:"MARKETING",children:t==="ar"?"تسويق":"Marketing"}),s.jsx(Ie,{value:"ACCOUNTING",children:t==="ar"?"محاسبة":"Accounting"})]})}),s.jsx(E.Item,{name:"specificSpecialization",label:t==="ar"?"التخصص الدقيق":"Specific Specialization",children:s.jsx(z,{placeholder:t==="ar"?"مثل: اقتصاد قياسي / تمويل / موارد بشرية":"e.g., Econometrics / Finance / HR"})}),s.jsx(E.Item,{name:"bio",label:t==="ar"?"نبذة مختصرة":"Brief Biography",children:s.jsx(Ms,{rows:4,placeholder:t==="ar"?"اكتب نبذة عنك":"Write about yourself"})}),s.jsx(E.Item,{name:"yearsOfExperience",label:t==="ar"?"عدد سنوات الخبرة":"Years of Experience",children:s.jsx(z,{type:"number",min:0,placeholder:t==="ar"?"عدد السنوات":"Years"})}),s.jsx(E.Item,{name:"previousEmployers",label:t==="ar"?"الجهات السابقة":"Previous Employers",children:s.jsx(Ms,{rows:3,placeholder:t==="ar"?"أهم المناصب السابقة":"Most important previous positions"})}),s.jsx(E.Item,{name:"areasOfExpertise",label:t==="ar"?"مجالات الخبرة":"Areas of Expertise",children:s.jsx(q,{mode:"tags",placeholder:t==="ar"?"مثل: دراسات جدوى - استشارات مالية":"e.g., Feasibility Studies - Financial Consulting"})}),s.jsx(E.Item,{name:"implementedProjects",label:t==="ar"?"المشاريع المنفذة":"Implemented Projects",children:s.jsx(Ms,{rows:3,placeholder:t==="ar"?"أمثلة مختصرة":"Brief examples"})}),s.jsx(E.Item,{name:"languages",label:t==="ar"?"اللغات":"Languages",children:s.jsx(q,{mode:"tags",placeholder:t==="ar"?"اللغات التي تتحدثها":"Languages you speak"})}),s.jsx(E.Item,{name:"certifications",label:t==="ar"?"الشهادات المهنية":"Professional Certifications",children:s.jsx(q,{mode:"tags",placeholder:t==="ar"?"مثل: CFA / PMP / CMA":"e.g., CFA / PMP / CMA"})}),s.jsx(E.Item,{name:"professionalCourses",label:t==="ar"?"الدورات المهنية":"Professional Courses",children:s.jsx(Ms,{rows:3,placeholder:t==="ar"?"مثل: CFA / PMP / CMA":"e.g., CFA / PMP / CMA"})})]}),v=()=>s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"preferredServices",label:t==="ar"?"نوع الخدمة المطلوبة":"Type of Required Service",children:s.jsxs(q,{mode:"multiple",placeholder:t==="ar"?"اختر الخدمات":"Select Services",children:[s.jsx(Ie,{value:"ECONOMIC",children:t==="ar"?"اقتصادية":"Economic"}),s.jsx(Ie,{value:"FINANCIAL",children:t==="ar"?"مالية":"Financial"}),s.jsx(Ie,{value:"ADMINISTRATIVE",children:t==="ar"?"إدارية":"Administrative"}),s.jsx(Ie,{value:"FEASIBILITY_STUDY",children:t==="ar"?"دراسات جدوى":"Feasibility Studies"}),s.jsx(Ie,{value:"ANALYSIS",children:t==="ar"?"تحليل":"Analysis"})]})}),s.jsx(E.Item,{name:"registrationPurpose",label:t==="ar"?"الهدف من التسجيل":"Purpose of Registration",children:s.jsx(Ms,{rows:3,placeholder:t==="ar"?"مثل: تأسيس مشروع / استشارة مالية / تحليل سوق":"e.g., Project establishment / Financial consultation / Market analysis"})}),s.jsx(E.Item,{name:"preferredConsultantId",label:t==="ar"?"المستشار المفضل (اختياري)":"Preferred Consultant (Optional)",children:s.jsx(I_,{})}),s.jsx(Mt,{children:t==="ar"?"الإشعارات":"Notifications"}),s.jsx(E.Item,{name:"notificationEmail",valuePropName:"checked",children:s.jsx(Hn,{children:t==="ar"?"تفعيل إشعارات البريد الإلكتروني":"Activate Email Notifications"})}),s.jsx(E.Item,{name:"notificationApp",valuePropName:"checked",children:s.jsx(Hn,{children:t==="ar"?"تفعيل إشعارات التطبيق":"Activate Application Notifications"})}),s.jsx(E.Item,{name:"notificationWhatsApp",valuePropName:"checked",children:s.jsx(Hn,{children:t==="ar"?"تفعيل إشعارات واتساب / الجوال":"Activate WhatsApp / Mobile Notifications"})}),s.jsx(E.Item,{name:"termsAccepted",valuePropName:"checked",rules:[{required:!0,message:t==="ar"?"يجب قبول الشروط والأحكام":"Must accept terms and conditions"}],children:s.jsx(Hn,{children:t==="ar"?"أوافق على الشروط والأحكام":"I accept the terms and conditions"})})]}),w=()=>s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"pricePerSession",label:t==="ar"?"سعر الجلسة (ريال سعودي)":"Session Price (SAR)",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsx(z,{type:"number",min:0,placeholder:"500"})}),s.jsx(E.Item,{name:"sessionDuration",label:t==="ar"?"مدة الجلسة الافتراضية":"Default Session Duration",children:s.jsxs(q,{children:[s.jsxs(Ie,{value:30,children:["30 ",t==="ar"?"دقيقة":"minutes"]}),s.jsxs(Ie,{value:60,children:["60 ",t==="ar"?"دقيقة":"minutes"]}),s.jsxs(Ie,{value:90,children:["90 ",t==="ar"?"دقيقة":"minutes"]})]})}),s.jsx(E.Item,{name:"consultationMode",label:t==="ar"?"نمط الاستشارة":"Consultation Mode",children:s.jsxs(q,{mode:"multiple",placeholder:t==="ar"?"اختر أنماط الاستشارة":"Select Consultation Modes",children:[s.jsx(Ie,{value:"VIDEO",children:t==="ar"?"مرئية":"Video"}),s.jsx(Ie,{value:"CHAT",children:t==="ar"?"شات":"Chat"}),s.jsx(Ie,{value:"REPORT",children:t==="ar"?"تقارير":"Reports"}),s.jsx(Ie,{value:"WRITTEN_STUDY",children:t==="ar"?"دراسات مكتوبة":"Written Studies"})]})}),s.jsx(E.Item,{name:"acceptsSessions",valuePropName:"checked",children:s.jsx(Hn,{children:t==="ar"?"تفعيل استقبال الجلسات":"Activate Session Reception"})})]}),N=()=>h==="client"?s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"preferredPaymentMethod",label:t==="ar"?"طريقة الدفع المفضلة":"Preferred Payment Method",children:s.jsxs(q,{placeholder:t==="ar"?"اختر طريقة الدفع":"Select Payment Method",children:[s.jsx(Ie,{value:"CREDIT_CARD",children:t==="ar"?"بطاقة":"Card"}),s.jsx(Ie,{value:"MADA",children:"Mada"}),s.jsx(Ie,{value:"APPLE_PAY",children:"Apple Pay"}),s.jsx(Ie,{value:"BANK_TRANSFER",children:t==="ar"?"تحويل بنكي":"Bank Transfer"})]})}),s.jsx(E.Item,{name:"taxNumber",label:t==="ar"?"رقم الهوية أو السجل الضريبي":"ID Number or Tax Register",children:s.jsx(z,{placeholder:t==="ar"?"يظهر في الفاتورة":"Appears in Invoice"})}),s.jsx(E.Item,{name:"invoiceAddress",label:t==="ar"?"عنوان الفاتورة":"Invoice Address",children:s.jsx(Ms,{rows:3,placeholder:t==="ar"?"يظهر في الفواتير الإلكترونية":"Appears in Electronic Invoices"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"bankAccount",label:t==="ar"?"رقم الحساب البنكي / الأيبان":"Bank Account Number / IBAN",children:s.jsx(z,{placeholder:t==="ar"?"للتحويل المستحقات":"For transferring dues"})}),s.jsx(E.Item,{name:"bankName",label:t==="ar"?"اسم البنك":"Bank Name",children:s.jsxs(q,{placeholder:t==="ar"?"بنوك المملكة":"Banks of the Kingdom",children:[s.jsx(Ie,{value:"AL_RAJHI",children:t==="ar"?"الراجحي":"Al Rajhi"}),s.jsx(Ie,{value:"AL_AHLI",children:t==="ar"?"الأهلي":"Al Ahli"}),s.jsx(Ie,{value:"RIYAD",children:t==="ar"?"الرياض":"Riyad"}),s.jsx(Ie,{value:"SABB",children:t==="ar"?"ساب":"SABB"}),s.jsx(Ie,{value:"NCB",children:t==="ar"?"الوطني":"NCB"})]})}),s.jsx(E.Item,{name:"iban",label:t==="ar"?"الأيبان":"IBAN",children:s.jsx(z,{placeholder:"SA..."})}),s.jsx(Mt,{children:t==="ar"?"الوثائق والمرفقات":"Documents & Attachments"}),s.jsx(E.Item,{name:"cvUrl",label:t==="ar"?"السيرة الذاتية (CV)":"Curriculum Vitae (CV)",valuePropName:"fileList",getValueFromEvent:C=>Array.isArray(C)?C:C?.fileList,children:s.jsx(Pt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf",children:s.jsx(P,{icon:s.jsx(ir,{}),children:t==="ar"?"رفع ملف PDF":"Upload PDF"})})}),s.jsx(E.Item,{name:"academicCertificates",label:t==="ar"?"الشهادات الأكاديمية":"Academic Certificates",valuePropName:"fileList",getValueFromEvent:C=>Array.isArray(C)?C:C?.fileList,children:s.jsx(Pt,{beforeUpload:()=>!1,multiple:!0,accept:".pdf,.jpg,.jpeg,.png",children:s.jsx(P,{icon:s.jsx(ir,{}),children:t==="ar"?"رفع ملفات متعددة":"Upload Multiple Files"})})}),s.jsx(E.Item,{name:"nationalId",label:t==="ar"?"الهوية الوطنية / الإقامة":"National ID / Residence",valuePropName:"fileList",getValueFromEvent:C=>Array.isArray(C)?C:C?.fileList,children:s.jsx(Pt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf,.jpg,.jpeg,.png",children:s.jsx(P,{icon:s.jsx(ir,{}),children:t==="ar"?"رفع ملف PDF أو صورة":"Upload PDF or Image"})})}),s.jsx(E.Item,{name:"consultingLicense",label:t==="ar"?"رخصة مزاولة الاستشارات (إن وجدت)":"Consulting License (If Available)",valuePropName:"fileList",getValueFromEvent:C=>Array.isArray(C)?C:C?.fileList,children:s.jsx(Pt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf,.jpg,.jpeg,.png",children:s.jsx(P,{icon:s.jsx(ir,{}),children:t==="ar"?"رفع ملف":"Upload File"})})}),s.jsx(Mt,{children:t==="ar"?"الإعدادات":"Settings"}),s.jsx(E.Item,{name:"notificationEmail",valuePropName:"checked",children:s.jsx(Hn,{children:t==="ar"?"إشعارات البريد الإلكتروني":"Email Notifications"})}),s.jsx(E.Item,{name:"notificationApp",valuePropName:"checked",children:s.jsx(Hn,{children:t==="ar"?"إشعارات التطبيق":"Application Notifications"})}),s.jsx(E.Item,{name:"termsAccepted",valuePropName:"checked",rules:[{required:!0,message:t==="ar"?"يجب قبول الشروط والأحكام":"Must accept terms and conditions"}],children:s.jsx(Hn,{children:t==="ar"?"أوافق على الشروط والأحكام":"I accept the terms and conditions"})})]}),b=()=>{switch(l){case 0:return x();case 1:return h==="client"?m():y();case 2:return h==="client"?v():w();case 3:return N();default:return null}},S=()=>{const C=l===0?["role","firstName","lastName","email","phone","password","confirmPassword"]:[];a.validateFields(C).then(()=>{c(l+1)}).catch(k=>{if(console.log("Validation failed:",k),k.errorFields&&k.errorFields.length>0){const O=k.errorFields[0];O.name&&O.name[0]==="role"&&_.error(t==="ar"?"يرجى اختيار نوع الحساب":"Please select account type")}})},j=()=>{c(l-1)};return s.jsx(Qe,{className:"min-h-screen bg-gradient-to-br from-olive-green-50 to-turquoise-50",children:s.jsx(P_,{className:"flex items-center justify-center py-8 px-4",children:s.jsxs(V,{className:"w-full max-w-4xl shadow-xl",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-olive-green-600 to-turquoise-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-white font-bold text-3xl",children:"ج"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Jadwa"}),s.jsx("p",{className:"text-gray-600",children:t==="ar"?"إنشاء حساب جديد":"Create New Account"})]}),s.jsx(rh,{current:l,className:"mb-8",children:g.map((C,k)=>s.jsx(T_,{title:C.title},k))}),s.jsxs(E,{form:a,onFinish:f,layout:"vertical",initialValues:{role:"client",preferredLanguage:"ar",country:"Saudi Arabia",sessionDuration:60,notificationEmail:!0,notificationApp:!0,acceptsSessions:!0},size:"large",children:[b(),s.jsxs("div",{className:"flex justify-between mt-6",children:[l>0&&s.jsx(P,{onClick:j,children:t==="ar"?"السابق":"Previous"}),s.jsx("div",{className:"flex-1"}),l<g.length-1?s.jsx(P,{type:"primary",onClick:S,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:t==="ar"?"التالي":"Next"}):s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",loading:i,disabled:i,children:t==="ar"?"إنشاء حساب":"Create Account"})]}),s.jsxs("div",{className:"text-center mt-4",children:[s.jsxs("span",{className:"text-gray-600",children:[t==="ar"?"لديك حساب بالفعل؟":"Already have an account?"," "]}),s.jsx(Hl,{to:"/login",className:"text-olive-green-600 hover:text-olive-green-700 font-semibold",children:t==="ar"?"تسجيل الدخول":"Login"})]})]})]})})})};var Zu={exports:{}},R_=Zu.exports,Rj;function __(){return Rj||(Rj=1,(function(t,e){(function(r,n){t.exports=n()})(R_,(function(){return function(r,n,a){r=r||{};var i=n.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l(u,d,f,h){return i.fromToBase(u,d,f,h)}a.en.relativeTime=o,i.fromToBase=function(u,d,f,h,p){for(var g,x,m,y=f.$locale().relativeTime||o,v=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],w=v.length,N=0;N<w;N+=1){var b=v[N];b.d&&(g=h?a(u).diff(f,b.d,!0):f.diff(u,b.d,!0));var S=(r.rounding||Math.round)(Math.abs(g));if(m=g>0,S<=b.r||!b.r){S<=1&&N>0&&(b=v[N-1]);var j=y[b.l];p&&(S=p(""+S)),x=typeof j=="string"?j.replace("%d",S):j(S,d,b.l,m);break}}if(d)return x;var C=m?y.future:y.past;return typeof C=="function"?C(x):C.replace("%s",x)},i.to=function(u,d){return l(u,d,this,!0)},i.from=function(u,d){return l(u,d,this)};var c=function(u){return u.$u?a.utc():a()};i.toNow=function(u){return this.to(c(this),u)},i.fromNow=function(u){return this.from(c(this),u)}}}))})(Zu)),Zu.exports}var D_=__();const $_=it(D_);de.extend($_);const{Text:bu}=su,fb=({userId:t})=>{const{language:e}=je(),{user:r}=pr(),[n,a]=A.useState([]),[i,o]=A.useState(!1),[l,c]=A.useState(0),[u,d]=A.useState(!1);A.useEffect(()=>{if(t){f();const v=setInterval(f,3e4);return()=>clearInterval(v)}},[t]);const f=async()=>{if(!t){console.warn("NotificationDropdown: userId is not provided");return}try{o(!0);const v=await Dl.getNotifications();if(v&&v.notifications){const w=v.notifications.sort((N,b)=>new Date(b.createdAt)-new Date(N.createdAt));a(w),c(w.filter(N=>!N.isRead).length)}else console.warn("NotificationDropdown: Invalid response format",v),a([]),c(0)}catch(v){console.error("Error fetching notifications:",v),a([]),c(0)}finally{o(!1)}},h=async(v,w)=>{w.stopPropagation();try{await Dl.markAsRead(v),a(N=>N.map(b=>b.id===v?{...b,isRead:!0,readAt:new Date}:b)),c(N=>Math.max(0,N-1))}catch(N){console.error("Error marking as read:",N)}},p=async v=>{v.stopPropagation();try{await Dl.markAllAsRead(),a(w=>w.map(N=>({...N,isRead:!0,readAt:new Date}))),c(0)}catch(w){console.error("Error marking all as read:",w)}},g=async(v,w)=>{w.stopPropagation();try{await Dl.deleteNotification(v),a(N=>N.filter(b=>b.id!==v)),c(N=>{const b=n.find(S=>S.id===v);return b&&!b.isRead?Math.max(0,N-1):N})}catch(N){console.error("Error deleting notification:",N)}},x=v=>{switch(v){case"BOOKING":return"📅";case"MESSAGE":return"💬";case"PAYMENT":return"💰";case"SYSTEM":return"🔔";case"SUPPORT":return"🎫";default:return"📢"}},m=v=>{switch(v){case"BOOKING":return"blue";case"MESSAGE":return"green";case"PAYMENT":return"gold";case"SYSTEM":return"red";case"SUPPORT":return"orange";default:return"default"}},y=[{key:"header",label:s.jsxs("div",{className:"flex items-center justify-between p-2 border-b",children:[s.jsx(bu,{strong:!0,children:e==="ar"?"الإشعارات":"Notifications"}),s.jsxs(fe,{children:[l>0&&s.jsx(P,{type:"link",size:"small",icon:s.jsx(ry,{}),onClick:v=>{v.stopPropagation(),p(v)},children:e==="ar"?"قراءة الكل":"Mark all read"}),s.jsx(P,{type:"link",size:"small",icon:s.jsx(Cr,{}),onClick:v=>{v.stopPropagation(),f()},loading:i})]})]})},...n.slice(0,10).map(v=>({key:v.id,label:s.jsx("div",{className:`p-3 hover:bg-gray-50 ${v.isRead?"":"bg-blue-50 border-r-4 border-blue-500"}`,onMouseDown:w=>{w.stopPropagation(),w.preventDefault()},onClick:w=>{if(w.stopPropagation(),w.preventDefault(),v.link){let N=v.link;if(N.startsWith("/sessions/")){const b=N.replace("/sessions/",""),S=r?.role;S==="CLIENT"?N=`/client/chat/session/${b}`:S==="CONSULTANT"?N=`/consultant/chat/session/${b}`:["ADMIN","SUPER_ADMIN"].includes(S)&&(N=`/admin/chat/${b}`)}else if(N.startsWith("/chat/")){const b=N.replace("/chat/",""),S=r?.role;S==="CLIENT"?N=`/client/chat/${b}`:S==="CONSULTANT"?N=`/consultant/chat/${b}`:["ADMIN","SUPER_ADMIN"].includes(S)&&(N=`/admin/chat/${b}`)}window.location.href=N}v.isRead||h(v.id,{stopPropagation:()=>{}})},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"text-2xl",children:x(v.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(bu,{strong:!0,className:v.isRead?"":"text-blue-600",children:v.title}),s.jsx(le,{color:m(v.type),size:"small",children:v.type})]}),s.jsx(bu,{className:"text-sm text-gray-600 block mb-2",ellipsis:!0,children:v.message}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(bu,{className:"text-xs text-gray-400",children:de(v.createdAt).fromNow()}),s.jsxs(fe,{size:"small",children:[!v.isRead&&s.jsx(P,{type:"text",size:"small",icon:s.jsx(ry,{}),onClick:w=>h(v.id,w),title:e==="ar"?"قراءة":"Mark as read"}),s.jsx(P,{type:"text",size:"small",danger:!0,icon:s.jsx(un,{}),onClick:w=>g(v.id,w),title:e==="ar"?"حذف":"Delete"})]})]})]})]})})})),...n.length===0?[{key:"empty",label:s.jsx("div",{className:"p-8 text-center",children:s.jsx(Bt,{description:e==="ar"?"لا توجد إشعارات":"No notifications",image:Bt.PRESENTED_IMAGE_SIMPLE})})}]:[]];return s.jsx(Ia,{count:l,size:"small",offset:[-5,5],style:{pointerEvents:"auto"},children:s.jsx(nh,{menu:{items:y},trigger:["click"],placement:e==="ar"?"bottomLeft":"bottomRight",open:u,dropdownStyle:{width:"400px",zIndex:1050},destroyTooltipOnHide:!1,transitionName:"",popupRender:v=>s.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden flex flex-col",style:{pointerEvents:"auto",maxHeight:"500px",display:"flex",flexDirection:"column"},onMouseDown:w=>{w.stopPropagation(),w.preventDefault()},onClick:w=>{w.stopPropagation()},children:s.jsx("div",{className:"overflow-y-auto flex-1",style:{maxHeight:"450px",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch"},children:v})}),getPopupContainer:()=>document.body,onOpenChange:v=>{v!==u&&d(v)},children:s.jsx(P,{type:"text",icon:s.jsx(cc,{}),className:"text-lg hover:bg-olive-green-50 text-gray-600 rounded-lg",style:{pointerEvents:"auto"}})})})},{Header:L_,Sider:z_,Content:F_}=Qe,B_=({children:t})=>{const{t:e,language:r,toggleLanguage:n}=je(),{user:a,logout:i}=pr(),{settings:o}=Fa(),l=nt(),c=wi(),[u,d]=A.useState(!1),[f,h]=A.useState(!1),p=r==="ar";A.useEffect(()=>{const w=document.querySelector(".client-content");w&&(w.classList.add("fade-in"),setTimeout(()=>{w.classList.remove("fade-in")},500))},[c.pathname]);const g=()=>{i(),l("/login",{replace:!0})},x=[{key:"/client",icon:s.jsx(ih,{}),label:r==="ar"?"الرئيسية":"Home"},{key:"/client/bookings",icon:s.jsx(Dt,{}),label:r==="ar"?"حجوزاتي":"My Bookings"},{key:"/client/consultations",icon:s.jsx(Ct,{}),label:r==="ar"?"استشاراتي":"My Consultations"},{key:"/client/reports",icon:s.jsx(dd,{}),label:r==="ar"?"التقارير":"Reports"},{key:"/client/chat",icon:s.jsx(Ut,{}),label:r==="ar"?"الرسائل":"Messages"},{key:"/client/support",icon:s.jsx(Ct,{}),label:r==="ar"?"الدعم الفني":"Support"},{key:"/client/profile",icon:s.jsx(ke,{}),label:r==="ar"?"حسابي":"My Account"}],m=[{key:"profile",icon:s.jsx(ke,{}),label:r==="ar"?"الملف الشخصي":"Profile",onClick:({domEvent:w})=>{w&&(w.stopPropagation(),w.preventDefault()),setTimeout(()=>{h(!1),l("/client/profile")},100)}},{key:"settings",icon:s.jsx(co,{}),label:r==="ar"?"الإعدادات":"Settings",onClick:({domEvent:w})=>{w&&(w.stopPropagation(),w.preventDefault()),setTimeout(()=>{h(!1),l("/client/profile")},100)}},{type:"divider"},{key:"logout",icon:s.jsx(lb,{}),label:r==="ar"?"تسجيل الخروج":"Logout",onClick:({domEvent:w})=>{w&&(w.stopPropagation(),w.preventDefault()),setTimeout(()=>{h(!1),g()},100)}}],y={overflow:"auto",height:"100vh",position:"fixed",top:0,bottom:0,[p?"right":"left"]:0,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",zIndex:1e3},v={transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",[p?"marginRight":"marginLeft"]:u?80:250};return s.jsxs(Qe,{className:"min-h-screen",children:[s.jsxs(z_,{trigger:null,collapsible:!0,collapsed:u,width:250,className:"client-sidebar bg-gradient-to-b from-white to-gray-50 shadow-2xl border-r border-gray-200",style:y,children:[s.jsx("div",{className:"p-6 flex items-center justify-between border-b border-gray-200",children:s.jsxs("div",{className:`flex items-center gap-3 transition-all duration-300 ${u?"justify-center w-full":""}`,children:[o.logo?s.jsx("img",{src:o.logo,alt:"Logo",className:`${u?"w-12 h-12":"h-10"} object-contain cursor-pointer transition-all duration-300`,onClick:()=>l("/client")}):s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-olive-green-600 via-olive-green-500 to-turquoise-500 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300 cursor-pointer",style:{backgroundColor:o.primaryColor},onClick:()=>l("/client"),children:s.jsx("span",{className:"text-white font-bold text-xl",children:r==="ar"?o.dashboardNameAr?.[0]||"ج":o.dashboardName?.[0]||"J"})}),!u&&s.jsxs("div",{className:"animate-fade-in cursor-pointer",onClick:()=>l("/client"),children:[s.jsx("div",{className:"text-base font-bold text-olive-green-700",style:{color:o.primaryColor},children:o.dashboardName||"Jadwa"}),s.jsx("div",{className:"text-xs text-gray-500",children:o.dashboardNameAr||"جدوى"})]})]})}),s.jsx(lc,{mode:"inline",selectedKeys:[c.pathname],items:x,onClick:({key:w})=>l(w),className:"border-0 mt-4 px-2",style:{background:"transparent"}}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 px-4",children:s.jsx(P,{type:"text",icon:u?p?s.jsx(no,{}):s.jsx(ao,{}):p?s.jsx(ao,{}):s.jsx(no,{}),onClick:()=>d(!u),className:"w-full hover:bg-olive-green-50 text-olive-green-600 border border-olive-green-200 rounded-lg transition-all duration-300",children:!u&&s.jsx("span",{className:"ml-2",children:r==="ar"?"طي":"Collapse"})})})]}),s.jsxs(Qe,{style:v,className:"transition-all duration-300",children:[s.jsxs(L_,{className:"bg-white shadow-md px-3 md:px-6 flex items-center justify-between fixed top-0 z-[1001] backdrop-blur-sm bg-white/95",style:{position:"fixed",width:`calc(100% - ${u?80:250}px)`,[p?"right":"left"]:u?80:250,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)"},children:[s.jsx(P,{type:"text",icon:s.jsx(oh,{}),onClick:()=>d(!u),className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300",style:{pointerEvents:"auto"}}),s.jsxs("div",{className:"flex items-center gap-2 md:gap-4",style:{pointerEvents:"auto",position:"relative",zIndex:1002},children:[s.jsx(P,{type:"text",icon:s.jsx(na,{}),onClick:n,className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300 font-semibold",title:r==="ar"?"Switch to English":"التبديل إلى العربية",style:{pointerEvents:"auto"},children:r==="ar"?"EN":"AR"}),s.jsx(fb,{userId:a?.id}),s.jsx(nh,{menu:{items:m},placement:p?"bottomLeft":"bottomRight",trigger:["click"],open:f,destroyTooltipOnHide:!1,transitionName:"",getPopupContainer:()=>document.body,popupRender:w=>s.jsx("div",{onMouseDown:N=>{N.stopPropagation(),N.preventDefault()},onClick:N=>{N.stopPropagation()},children:w}),onOpenChange:w=>{w!==f&&h(w)},children:s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-3 py-2 rounded-lg group",children:[s.jsx(at,{src:a?.avatar||a?.client?.profilePicture,icon:s.jsx(ke,{}),className:"ring-2 ring-olive-green-200 group-hover:ring-olive-green-400 transition-all duration-300"}),s.jsx("span",{className:"hidden md:inline font-medium text-gray-700",children:a?.client?`${a.client.firstName} ${a.client.lastName}`:a?.email})]})})]})]}),s.jsx(F_,{className:"p-3 md:p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen client-content",style:{marginTop:"64px"},children:s.jsx("div",{className:"animate-fade-in",children:t})})]})]})},q_=()=>{const{language:t}=je(),{user:e}=pr(),r=nt(),[n,a]=A.useState(!0),[i,o]=A.useState(null),[l,c]=A.useState({totalBookings:0,pendingBookings:0,completedBookings:0,totalSpent:0}),[u,d]=A.useState([]),[f,h]=A.useState([]);A.useEffect(()=>{p()},[]);const p=async()=>{try{a(!0),o(null);const y=await FC.getDashboardStats();c(y.stats),d(y.upcomingBookings||[]),h(y.recentBookings||[])}catch(y){console.error("Error fetching dashboard data:",y),o(y.message||"Failed to load dashboard data")}finally{a(!1)}},g=({title:y,value:v,icon:w,color:N,suffix:b="",delay:S=0})=>s.jsxs(V,{className:"modern-kpi-card card-hover shadow-professional-lg relative overflow-hidden h-full border-0",style:{animationDelay:`${S}s`},styles:{body:{padding:"20px"}},children:[s.jsx("div",{className:`absolute -top-8 -right-8 w-32 h-32 rounded-full ${N} opacity-5 blur-2xl`}),s.jsx("div",{className:`absolute -bottom-6 -left-6 w-24 h-24 rounded-full ${N} opacity-5 blur-xl`}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsx("div",{className:`p-3 rounded-2xl ${N} bg-opacity-10 shadow-sm`,children:s.jsx("div",{className:"text-2xl sm:text-3xl",children:w})})}),s.jsx(Be,{title:s.jsx("span",{className:"text-gray-600 font-semibold text-xs sm:text-sm uppercase tracking-wide",children:y}),value:v,suffix:b,valueStyle:{color:N.includes("teal")?"#14b8a6":N.includes("olive")?"#7a8c66":N.includes("blue")?"#1890ff":"#faad14",fontWeight:800,fontSize:"clamp(20px, 4vw, 28px)",lineHeight:1.2}})]})]}),x=[{icon:s.jsx(oo,{className:"text-3xl"}),title:t==="ar"?"الاستشارات الاقتصادية":"Economic Consultations",color:"from-olive-green-500 to-olive-green-600",path:"/client/bookings"},{icon:s.jsx(Ct,{className:"text-3xl"}),title:t==="ar"?"دراسات الجدوى":"Feasibility Studies",color:"from-turquoise-500 to-turquoise-600",path:"/client/bookings"},{icon:s.jsx(qC,{className:"text-3xl"}),title:t==="ar"?"التحليل الاقتصادي":"Econometric Analysis",color:"from-olive-green-400 to-turquoise-500",path:"/client/bookings"},{icon:s.jsx(ms,{className:"text-3xl"}),title:t==="ar"?"استشارة فيديو/محادثة":"Video/Chat Consultation",color:"from-turquoise-400 to-olive-green-500",path:"/client/bookings"},{icon:s.jsx(EC,{className:"text-3xl"}),title:t==="ar"?"التقارير الاقتصادية":"Ready Economic Reports",color:"from-olive-green-600 to-turquoise-600",path:"/client/consultations"}],m=e?.client?`${e.client.firstName||""} ${e.client.lastName||""}`.trim():e?.email||(t==="ar"?"عميل":"Client");return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 md:mb-10 relative z-10 px-2 sm:px-0",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?`مرحباً، ${m}`:`Welcome, ${m}`}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"إليك نظرة سريعة على حسابك":"Here is a quick overview of your account"})]}),s.jsx("div",{className:"text-sm sm:text-base text-gray-700 glass-card px-4 py-3 rounded-xl shadow-professional whitespace-nowrap font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Dt,{className:"text-olive-green-600"}),new Date().toLocaleDateString(t==="ar"?"ar-SA":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]}),n?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})}):i?s.jsx(Gt,{message:t==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:i,type:"error",showIcon:!0,closable:!0,onClose:()=>o(null),className:"mb-6"}):s.jsxs(s.Fragment,{children:[s.jsxs(ie,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx($,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(g,{title:t==="ar"?"إجمالي الحجوزات":"Total Bookings",value:l.totalBookings,icon:s.jsx(Dt,{className:"text-xl sm:text-2xl text-teal-500"}),color:"bg-teal-500",delay:.1})}),s.jsx($,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(g,{title:t==="ar"?"الحجوزات المعلقة":"Pending Bookings",value:l.pendingBookings,icon:s.jsx(Cn,{className:"text-xl sm:text-2xl text-orange-500"}),color:"bg-orange-500",delay:.2})}),s.jsx($,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(g,{title:t==="ar"?"الحجوزات المكتملة":"Completed Bookings",value:l.completedBookings,icon:s.jsx(vt,{className:"text-xl sm:text-2xl text-green-500"}),color:"bg-green-500",delay:.3})}),s.jsx($,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(g,{title:t==="ar"?"إجمالي الإنفاق":"Total Spent",value:l.totalSpent,icon:s.jsx(tr,{className:"text-xl sm:text-2xl text-olive-green-600"}),color:"bg-olive-green-600",suffix:t==="ar"?" ريال":" SAR",delay:.4})})]}),s.jsxs(ie,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx($,{xs:24,sm:24,md:24,lg:12,xl:12,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-olive-green-500 to-olive-green-600",children:s.jsx(Dt,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t==="ar"?"الحجوزات القادمة":"Upcoming Bookings"})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0 h-full",style:{animationDelay:"0.2s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},extra:u.length>0&&s.jsxs(P,{type:"link",onClick:()=>r("/client/bookings"),className:"text-olive-green-600 text-xs sm:text-sm p-0",children:[t==="ar"?"عرض الكل":"View All"," ",s.jsx(cd,{})]}),children:u.length>0?s.jsx(ft,{dataSource:u,renderItem:y=>s.jsx(ft.Item,{className:"hover:bg-gray-50 rounded-lg p-2 sm:p-3 transition-colors",children:s.jsx(ft.Item.Meta,{avatar:s.jsx(at,{src:y.consultant?.user?.avatar,icon:s.jsx(ke,{}),size:{xs:40,sm:48}}),title:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 flex-wrap",children:[s.jsx("span",{className:"font-semibold text-sm sm:text-base",children:y.service?.title||y.service?.titleAr||"Consultation"}),s.jsx(le,{color:"blue",className:"text-xs",children:de(y.scheduledAt).format("MMM DD, YYYY")})]}),description:s.jsxs("div",{children:[s.jsxs("div",{className:"text-gray-600 text-xs sm:text-sm",children:[y.consultant?.firstName," ",y.consultant?.lastName]}),y.selectedTimeSlot&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.jsx(Cn,{})," ",y.selectedTimeSlot]})]})})})}):s.jsx(Bt,{description:t==="ar"?"لا توجد حجوزات قادمة":"No upcoming bookings",image:Bt.PRESENTED_IMAGE_SIMPLE,className:"py-8"})})}),s.jsx($,{xs:24,sm:24,md:24,lg:12,xl:12,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-teal-500 to-teal-600",children:s.jsx(Ct,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t==="ar"?"إجراءات سريعة":"Quick Actions"})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0 h-full",style:{animationDelay:"0.3s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsx(P,{type:"primary",size:"large",block:!0,icon:s.jsx(br,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 h-11 sm:h-12 text-sm sm:text-base",onClick:()=>r("/client/bookings"),children:t==="ar"?"حجز استشارة جديدة":"Book New Consultation"}),s.jsx(P,{size:"large",block:!0,icon:s.jsx(Ct,{}),className:"border-olive-green-600 text-olive-green-600 hover:bg-olive-green-50 h-11 sm:h-12 text-sm sm:text-base",onClick:()=>r("/client/consultations"),children:t==="ar"?"عرض الاستشارات السابقة":"View Previous Consultations"}),s.jsx(P,{size:"large",block:!0,icon:s.jsx(Ut,{}),className:"border-turquoise-500 text-turquoise-500 hover:bg-turquoise-50 h-11 sm:h-12 text-sm sm:text-base",onClick:()=>r("/client/chat"),children:t==="ar"?"فتح المحادثة":"Open Chat"})]})})})]})]}),s.jsxs("div",{className:"mb-6 md:mb-8 relative z-10 px-2 sm:px-0",children:[s.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-4 sm:mb-6 text-gray-900",children:t==="ar"?"خدماتنا":"Our Services"}),s.jsx(ie,{gutter:[12,12],className:"sm:gutter-[16]",children:x.map((y,v)=>s.jsx($,{xs:12,sm:12,md:8,lg:6,xl:6,children:s.jsxs(V,{className:"glass-card text-center cursor-pointer shadow-professional-xl border-0 card-hover h-full",onClick:()=>r(y.path),style:{animationDelay:`${.4+v*.1}s`},styles:{body:{padding:"20px"}},children:[s.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 rounded-xl bg-gradient-to-br ${y.color} flex items-center justify-center text-white mx-auto mb-3 sm:mb-4 shadow-lg`,children:s.jsx("div",{className:"text-xl sm:text-3xl",children:y.icon})}),s.jsx("h3",{className:"font-semibold mb-2 sm:mb-3 text-gray-900 text-sm sm:text-base line-clamp-2",children:y.title}),s.jsx(P,{type:"primary",size:"small",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 w-full text-xs sm:text-sm",onClick:w=>{w.stopPropagation(),r(y.path)},children:t==="ar"?"طلب الخدمة":"Request Service"})]})},v))})]})]})},{TextArea:U_}=z,V_=()=>{const{language:t}=je(),{user:e}=pr(),r=nt(),[n]=E.useForm(),[a,i]=A.useState(0),[o,l]=A.useState([]),[c,u]=A.useState([]),[d,f]=A.useState(!1),[h,p]=A.useState(!1),[g,x]=A.useState(null),[m,y]=A.useState(null);A.useEffect(()=>{e&&e.role!=="CLIENT"&&(_.error(t==="ar"?"غير مصرح لك بالوصول إلى هذه الصفحة":"You are not authorized to access this page"),e.role==="CONSULTANT"?r("/consultant",{replace:!0}):["ADMIN","SUPER_ADMIN"].includes(e.role)?r("/admin",{replace:!0}):r("/",{replace:!0}))},[e,r,t]),A.useEffect(()=>{e?.role==="CLIENT"&&(v(),w())},[e]);const v=async()=>{try{f(!0);const C=await Ra.getConsultants({isAvailable:!0});l(C.consultants||[])}catch(C){console.error("Error fetching consultants:",C),_.error(t==="ar"?"فشل تحميل المستشارين":"Failed to load consultants")}finally{f(!1)}},w=async()=>{try{const C=await rs.getServices({status:"active"});u(C.services||[])}catch(C){console.error("Error fetching services:",C)}},N=[{value:"economic",label:t==="ar"?"اقتصادي":"Economic"},{value:"administrative",label:t==="ar"?"إداري":"Administrative"},{value:"financial",label:t==="ar"?"مالي":"Financial"},{value:"accounting",label:t==="ar"?"محاسبي":"Accounting"}],b=[{value:"card",label:t==="ar"?"بطاقة ائتمانية":"Credit Card"},{value:"mada",label:"Mada"},{value:"applepay",label:"Apple Pay"},{value:"bank",label:t==="ar"?"تحويل بنكي":"Bank Transfer"}],S=[{title:t==="ar"?"نوع الاستشارة":"Consultation Type",icon:s.jsx(Dt,{})},{title:t==="ar"?"اختيار المستشار":"Select Consultant",icon:s.jsx(ke,{})},{title:t==="ar"?"التاريخ والوقت":"Date & Time",icon:s.jsx(Dt,{})},{title:t==="ar"?"الدفع":"Payment",icon:s.jsx(ob,{})}],j=async C=>{if(!g){_.error(t==="ar"?"يرجى اختيار مستشار":"Please select a consultant"),i(1);return}try{p(!0);const k=de(C.date).hour(de(C.time).hour()).minute(de(C.time).minute()).second(0).millisecond(0),O={consultantId:g.id,serviceId:m?.id||null,bookingType:C.consultationType?.toUpperCase()||"CONSULTATION",scheduledAt:k.toISOString(),selectedTimeSlot:de(C.time).format("HH:mm"),duration:g.duration||60,price:g.pricePerSession||0,clientNotes:C.details||""},I=await Ir.createBooking(O);_.success(t==="ar"?"تم إنشاء الحجز بنجاح":"Booking created successfully"),r("/client/bookings")}catch(k){console.error("Error creating booking:",k),_.error(k.message||(t==="ar"?"فشل إنشاء الحجز":"Failed to create booking"))}finally{p(!1)}};return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"mb-8 relative z-10",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?"حجز استشارة":"Book Consultation"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"احجز استشارة مع أحد مستشارينا الخبراء":"Book a consultation with one of our expert consultants"})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 mb-6 relative z-10",children:s.jsx(rh,{current:a,items:S})}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsxs(E,{form:n,onFinish:j,layout:"vertical",children:[a===0&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"serviceId",label:t==="ar"?"نوع الخدمة":"Service Type",rules:[{required:!0,message:t==="ar"?"يرجى اختيار نوع الخدمة":"Please select a service type"}],children:s.jsx(q,{size:"large",placeholder:t==="ar"?"اختر نوع الخدمة":"Select Service Type",onChange:C=>{const k=c.find(O=>O.id===C);y(k)},children:c.map(C=>s.jsx(q.Option,{value:C.id,children:t==="ar"&&C.titleAr||C.title},C.id))})}),s.jsx(E.Item,{name:"consultationType",label:t==="ar"?"نوع الاستشارة":"Consultation Type",rules:[{required:!0}],children:s.jsx(Sn.Group,{children:s.jsx(ie,{gutter:[16,16],children:N.map(C=>s.jsx($,{xs:24,sm:12,children:s.jsx(Sn.Button,{value:C.value,className:"w-full text-center h-12",children:C.label})},C.value))})})})]}),a===1&&s.jsx(E.Item,{name:"consultantId",label:t==="ar"?"اختر المستشار":"Select Consultant",rules:[{required:!0,message:t==="ar"?"يرجى اختيار مستشار":"Please select a consultant"}],children:d?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(et,{size:"large"})}):s.jsx("div",{className:"space-y-4",children:o.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:t==="ar"?"لا توجد مستشارين متاحين":"No available consultants"}):o.map(C=>{const k=g?.id===C.id;return s.jsx(V,{className:`glass-card card-hover cursor-pointer ${k?"border-olive-green-500 border-2 shadow-professional-lg":"hover:border-olive-green-500"}`,onClick:()=>{x(C),n.setFieldsValue({consultantId:C.id})},children:s.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[s.jsx(at,{src:C.user?.avatar,size:64,icon:s.jsx(ke,{})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"text-lg font-bold",children:[C.firstName," ",C.lastName]}),s.jsx("p",{className:"text-gray-600",children:C.specialization||(t==="ar"?"مستشار":"Consultant")}),C.rating&&s.jsx(ra,{disabled:!0,defaultValue:C.rating,className:"mb-2"}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsxs("span",{className:"text-olive-green-600 font-bold",children:[C.pricePerSession||0," ",t==="ar"?"ريال":"SAR"]}),s.jsxs("span",{className:"text-gray-500",children:[C.sessionDuration||60," ",t==="ar"?"دقيقة":"minutes"]})]})]})]})},C.id)})})}),a===2&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"date",label:t==="ar"?"التاريخ":"Date",rules:[{required:!0}],children:s.jsx(ys,{size:"large",className:"w-full",disabledDate:C=>C&&C<de().startOf("day")})}),s.jsx(E.Item,{name:"time",label:t==="ar"?"الوقت":"Time",rules:[{required:!0}],children:s.jsx(gI,{size:"large",className:"w-full",format:"HH:mm"})}),s.jsx(E.Item,{name:"details",label:t==="ar"?"تفاصيل إضافية":"Additional Details",children:s.jsx(U_,{rows:4,placeholder:t==="ar"?"أدخل أي تفاصيل إضافية...":"Enter any additional details..."})})]}),a===3&&s.jsxs(s.Fragment,{children:[s.jsxs(V,{className:"glass-card shadow-professional-lg rounded-xl border-0 mb-4",children:[s.jsx("h3",{className:"font-bold mb-4",children:t==="ar"?"ملخص الحجز":"Booking Summary"}),s.jsxs("div",{className:"space-y-2 text-gray-700",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:t==="ar"?"المستشار:":"Consultant:"}),s.jsx("span",{className:"font-semibold",children:g?`${g.firstName} ${g.lastName}`:"-"})]}),m&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:t==="ar"?"الخدمة:":"Service:"}),s.jsx("span",{className:"font-semibold",children:t==="ar"&&m.titleAr||m.title})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:t==="ar"?"التاريخ والوقت:":"Date & Time:"}),s.jsx("span",{className:"font-semibold",children:n.getFieldValue("date")&&n.getFieldValue("time")?de(n.getFieldValue("date")).format("YYYY-MM-DD")+" "+de(n.getFieldValue("time")).format("HH:mm"):"-"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:t==="ar"?"المبلغ:":"Amount:"}),s.jsxs("span",{className:"font-semibold text-olive-green-600",children:[g?.pricePerSession||0," ",t==="ar"?"ريال":"SAR"]})]})]})]}),s.jsx(E.Item,{name:"paymentMethod",label:t==="ar"?"طريقة الدفع":"Payment Method",rules:[{required:!0}],children:s.jsx(Sn.Group,{children:s.jsx(ie,{gutter:[16,16],children:b.map(C=>s.jsx($,{xs:24,sm:12,children:s.jsx(Sn.Button,{value:C.value,className:"w-full text-center h-12",children:C.label})},C.value))})})})]}),s.jsxs("div",{className:"flex justify-between mt-6",children:[s.jsx(P,{onClick:()=>i(Math.max(0,a-1)),disabled:a===0,children:t==="ar"?"السابق":"Previous"}),a<S.length-1?s.jsx(P,{type:"primary",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{if(a===1&&!g){_.error(t==="ar"?"يرجى اختيار مستشار":"Please select a consultant");return}n.validateFields().then(()=>{i(a+1)}).catch(()=>{})},children:t==="ar"?"التالي":"Next"}):s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-turquoise-500 hover:bg-turquoise-600 border-0",loading:h,children:t==="ar"?"إتمام الحجز":"Complete Booking"})]})]})})]})},H_=()=>{const{t,language:e}=je(),r=nt(),[n,a]=A.useState([]),[i,o]=A.useState(!0);A.useEffect(()=>{l()},[]);const l=async()=>{try{o(!0);const f=(await Ir.getBookings()).bookings.map(h=>({id:h.id,bookingId:h.id,consultant:h.consultant?`${h.consultant.firstName} ${h.consultant.lastName}`:e==="ar"?"غير متوفر":"N/A",type:h.service?e==="ar"?h.service.titleAr:h.service.title:e==="ar"?"غير محدد":"Not specified",date:h.scheduledAt?de(h.scheduledAt).format("YYYY-MM-DD"):"-",status:h.status?.toLowerCase()||"pending",rating:h.rating||null,session:h.session}));a(f)}catch(d){console.error("Error fetching consultations:",d),_.error(e==="ar"?"فشل تحميل الاستشارات":"Failed to load consultations")}finally{o(!1)}},c=async d=>{try{const f=await Tt.generateVideoRoom(d);await Tt.startSession(d,f.room?.roomId),_.success(e==="ar"?"تم بدء الجلسة بنجاح":"Session started successfully"),l(),r(`/client/chat/${d}`)}catch(f){_.error(f.message||(e==="ar"?"فشل بدء الجلسة":"Failed to start session"))}},u=[{title:e==="ar"?"المستشار":"Consultant",dataIndex:"consultant",key:"consultant"},{title:e==="ar"?"النوع":"Type",dataIndex:"type",key:"type"},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:d=>{const f={completed:"green",pending:"orange",cancelled:"red",confirmed:"blue",in_progress:"green"},h={completed:e==="ar"?"مكتمل":"Completed",pending:e==="ar"?"قيد الانتظار":"Pending",cancelled:e==="ar"?"ملغي":"Cancelled",confirmed:e==="ar"?"مؤكد":"Confirmed",in_progress:e==="ar"?"قيد التنفيذ":"In Progress"};return s.jsx(le,{color:f[d]||"default",children:h[d]||d})}},{title:e==="ar"?"التقييم":"Rating",dataIndex:"rating",key:"rating",render:d=>d?s.jsx(ra,{disabled:!0,defaultValue:d}):"-"},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(d,f)=>s.jsxs(fe,{children:[(f.status==="confirmed"||f.status==="pending")&&s.jsx(P,{type:"primary",icon:s.jsx(Zn,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>c(f.bookingId),children:e==="ar"?"بدء الجلسة":"Start Session"}),f.status==="in_progress"&&s.jsx(P,{icon:s.jsx(Ut,{}),onClick:()=>r(`/client/chat/${f.bookingId}`),children:e==="ar"?"فتح المحادثة":"Open Chat"}),s.jsx(P,{type:"link",icon:s.jsx(Ct,{}),onClick:()=>r(`/client/reports?bookingId=${f.bookingId}`),children:e==="ar"?"عرض التقرير":"View Report"}),f.status==="completed"&&!f.rating&&s.jsx(P,{type:"link",onClick:()=>console.log("Rate",f.id),children:e==="ar"?"تقييم":"Rate"})]})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"mb-8 relative z-10",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"استشاراتي":"My Consultations"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"عرض جميع استشاراتك السابقة والحالية":"View all your past and current consultations"})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:u,dataSource:n,rowKey:"id",loading:i,pagination:{pageSize:10}})})]})},hb=()=>{const[t,e]=A.useState(!1),[r,n]=A.useState(0),[a,i]=A.useState(null),[o,l]=A.useState(null),c=A.useRef(null),u=A.useRef([]),d=A.useRef(null);A.useEffect(()=>()=>{c.current&&c.current.state!=="inactive"&&c.current.stop(),o&&URL.revokeObjectURL(o),d.current&&clearInterval(d.current)},[o]);const f=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("MediaDevices API is not supported in this browser");if((await navigator.mediaDevices.enumerateDevices()).filter(N=>N.kind==="audioinput").length===0)throw new Error("No audio input device found");const y=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});let v="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(v)||(v="audio/webm",MediaRecorder.isTypeSupported(v)||(v="audio/mp4",MediaRecorder.isTypeSupported(v)||(v="")));const w=new MediaRecorder(y,v?{mimeType:v}:void 0);u.current=[],w.ondataavailable=N=>{N.data.size>0&&u.current.push(N.data)},w.onstop=()=>{const N=new Blob(u.current,{type:v||"audio/webm"});i(N);const b=URL.createObjectURL(N);l(b),y.getTracks().forEach(S=>S.stop())},c.current=w,w.start(),e(!0),n(0),d.current=setInterval(()=>{n(N=>N+1)},1e3)}catch(x){console.error("Error starting recording:",x);let m="Failed to access microphone. ";x.name==="NotFoundError"||x.name==="DevicesNotFoundError"?m+="No microphone found. Please connect a microphone and try again.":x.name==="NotAllowedError"||x.name==="PermissionDeniedError"?m+="Microphone permission denied. Please allow microphone access in your browser settings.":x.name==="NotReadableError"||x.name==="TrackStartError"?m+="Microphone is being used by another application. Please close it and try again.":m+=x.message||"Please check your microphone permissions.",_.error(m),e(!1)}},h=()=>{c.current&&c.current.state!=="inactive"&&(c.current.stop(),e(!1),d.current&&(clearInterval(d.current),d.current=null))};return{isRecording:t,recordingTime:r,audioBlob:a,audioUrl:o,startRecording:f,stopRecording:h,cancelRecording:()=>{h(),i(null),o&&(URL.revokeObjectURL(o),l(null)),n(0),u.current=[]},formatTime:x=>{const m=Math.floor(x/60),y=x%60;return`${m}:${y.toString().padStart(2,"0")}`}}},W_=()=>{const[t,e]=A.useState(!1),[r,n]=A.useState(0),[a,i]=A.useState(null),[o,l]=A.useState(null),c=A.useRef(null),u=A.useRef([]),d=A.useRef(null),f=A.useRef(null),h=A.useRef(null);A.useEffect(()=>()=>{c.current&&c.current.state!=="inactive"&&c.current.stop(),d.current&&d.current.getTracks().forEach(y=>y.stop()),o&&URL.revokeObjectURL(o),f.current&&clearInterval(f.current)},[o]);const p=async y=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("MediaDevices API is not supported in this browser");const v=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});d.current=v,h.current=y,y&&(y.srcObject=v,y.play());let w="video/webm;codecs=vp9,opus";MediaRecorder.isTypeSupported(w)||(w="video/webm;codecs=vp8,opus",MediaRecorder.isTypeSupported(w)||(w="video/webm",MediaRecorder.isTypeSupported(w)||(w="video/mp4",MediaRecorder.isTypeSupported(w)||(w=""))));const N=new MediaRecorder(v,w?{mimeType:w}:void 0);u.current=[],N.ondataavailable=b=>{b.data.size>0&&u.current.push(b.data)},N.onstop=()=>{const b=new Blob(u.current,{type:w||"video/webm"});i(b);const S=URL.createObjectURL(b);l(S),v.getTracks().forEach(j=>j.stop()),y&&(y.srcObject=null)},c.current=N,N.start(),e(!0),n(0),f.current=setInterval(()=>{n(b=>b+1)},1e3)}catch(v){console.error("Error starting video recording:",v);let w="Failed to access camera/microphone. ";v.name==="NotFoundError"||v.name==="DevicesNotFoundError"?w+="No camera/microphone found. Please connect a device and try again.":v.name==="NotAllowedError"||v.name==="PermissionDeniedError"?w+="Camera/microphone permission denied. Please allow access in your browser settings.":v.name==="NotReadableError"||v.name==="TrackStartError"?w+="Camera/microphone is being used by another application. Please close it and try again.":w+=v.message||"Please check your device permissions.",_.error(w),e(!1)}},g=()=>{c.current&&c.current.state!=="inactive"&&(c.current.stop(),e(!1),f.current&&(clearInterval(f.current),f.current=null),d.current&&d.current.getTracks().forEach(y=>y.stop()),h.current&&(h.current.srcObject=null))};return{isRecording:t,recordingTime:r,videoBlob:a,videoUrl:o,startRecording:p,stopRecording:g,cancelRecording:()=>{g(),i(null),o&&(URL.revokeObjectURL(o),l(null)),n(0),u.current=[]},formatTime:y=>{const v=Math.floor(y/60),w=y%60;return`${v}:${w.toString().padStart(2,"0")}`}}},pb=({src:t,isOwnMessage:e=!1,language:r="en"})=>{const[n,a]=A.useState(!1),[i,o]=A.useState(0),[l,c]=A.useState(0),[u,d]=A.useState(!0),[f,h]=A.useState(!1),p=A.useRef(null);A.useEffect(()=>{const v=p.current;if(!v)return;h(!1),d(!0),a(!1),o(0),c(0);const w=()=>o(v.currentTime),N=()=>{c(v.duration||0),d(!1)},b=()=>a(!0),S=()=>a(!1),j=()=>{a(!1),o(0)},C=O=>{d(!1),h(!0),a(!1)},k=()=>{d(!1),c(v.duration||0)};return v.addEventListener("timeupdate",w),v.addEventListener("loadedmetadata",N),v.addEventListener("canplay",k),v.addEventListener("play",b),v.addEventListener("pause",S),v.addEventListener("ended",j),v.addEventListener("error",C),v.load(),()=>{v.removeEventListener("timeupdate",w),v.removeEventListener("loadedmetadata",N),v.removeEventListener("canplay",k),v.removeEventListener("play",b),v.removeEventListener("pause",S),v.removeEventListener("ended",j),v.removeEventListener("error",C)}},[t]);const g=()=>{const v=p.current;if(!(!v||f)){if(v.error){h(!0),a(!1);return}n?v.pause():v.play().catch(w=>{a(!1),h(!0),(w.name==="NotSupportedError"||w.message?.includes("no supported sources"))&&h(!0)})}},x=v=>{const w=p.current,b=v.currentTarget.getBoundingClientRect(),S=v.clientX-b.left,j=b.width,C=S/j;w&&l&&(w.currentTime=C*l)},m=v=>{if(!v||isNaN(v))return"0:00";const w=Math.floor(v/60),N=Math.floor(v%60);return`${w}:${N.toString().padStart(2,"0")}`},y=l>0?i/l*100:0;return f?s.jsxs("div",{className:`whatsapp-audio-player flex items-center gap-3 ${e?"flex-row-reverse":""} opacity-60`,children:[s.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${e?"bg-gray-400 text-white":"bg-gray-300 text-gray-600"}`,children:s.jsx(wR,{className:"text-lg"})}),s.jsx("div",{className:"flex-1",children:s.jsx("span",{className:`text-xs ${e?"text-gray-700":"text-gray-500"}`,children:r==="ar"?"تعذر تحميل الملف الصوتي":"Audio unavailable"})})]}):s.jsxs("div",{className:`whatsapp-audio-player flex items-center gap-3 ${e?"flex-row-reverse":""}`,children:[s.jsx("audio",{ref:p,src:t,preload:"metadata",crossOrigin:"anonymous"}),s.jsx(P,{type:"text",icon:u?s.jsx("div",{className:"w-8 h-8 border-2 border-current border-t-transparent rounded-full animate-spin"}):n?s.jsx(zM,{className:"text-2xl"}):s.jsx(Zn,{className:"text-2xl"}),onClick:g,className:`flex items-center justify-center w-10 h-10 rounded-full transition-colors ${e?"bg-[#25D366] hover:bg-[#20BD5A] text-white":"bg-[#e5e7eb] hover:bg-[#d1d5db] text-gray-700"}`,disabled:u,style:{minWidth:"40px",padding:0}}),s.jsxs("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:[s.jsxs("div",{className:`flex-1 h-2 rounded-full cursor-pointer relative overflow-hidden ${e?"bg-white/40":"bg-gray-300"}`,onClick:x,children:[s.jsx("div",{className:`h-full transition-all duration-100 ${e?"bg-white":"bg-[#25D366]"}`,style:{width:`${y}%`}}),n&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center gap-1",children:[0,1,2,3].map(v=>s.jsx("div",{className:"w-1 bg-white/50 rounded-full animate-pulse",style:{height:`${20+Math.sin(Date.now()/200+v)*10}%`,animationDelay:`${v*.1}s`}},v))})]}),s.jsxs("span",{className:`text-xs font-medium whitespace-nowrap ${e?"text-gray-800":"text-gray-600"}`,children:[m(i)," / ",m(l)]})]})]})},{TextArea:_j}=z,ju=()=>{const{sessionId:t,bookingId:e,id:r}=ua(),n=t||e||r,a=!!t||!!r&&!e,{language:i}=je(),{user:o}=pr(),l=nt(),[c,u]=A.useState([]),[d,f]=A.useState(""),[h,p]=A.useState(!0),[g,x]=A.useState(!1),[m,y]=A.useState(null),[v,w]=A.useState(null),[N,b]=A.useState(null),[S,j]=A.useState([]),[C,k]=A.useState(!1),[O,I]=A.useState(!1),[M,T]=A.useState(!1),[R,L]=A.useState(null),[B,H]=A.useState([]),[Q,te]=A.useState([]),[K,ne]=A.useState(!1),W=A.useRef(null);A.useRef(null);const ee=A.useRef(!1),ue=A.useRef(null),oe=A.useRef(!1),_e=A.useRef(null),Ee=A.useRef(new Set),{isRecording:be,recordingTime:X,audioBlob:xe,audioUrl:Ae,startRecording:Z,stopRecording:ot,cancelRecording:F,formatTime:ce}=hb(),{isRecording:me,recordingTime:Ze,videoBlob:xt,videoUrl:yt,startRecording:wt,stopRecording:De,cancelRecording:ht,formatTime:dn}=W_(),[Ha,Kr]=A.useState(!1),[al,fn]=A.useState(!1),[sl,Os]=A.useState(!1),[Pr,U]=A.useState(0),[Ne,Le]=A.useState(""),[ze,Xe]=A.useState(!1),ct=A.useRef(null),[Fe]=E.useForm();A.useEffect(()=>{o&&o.role!=="CLIENT"&&(_.error(i==="ar"?"غير مصرح لك بالوصول إلى هذه الصفحة":"You are not authorized to access this page"),o.role==="CONSULTANT"?l("/consultant",{replace:!0}):["ADMIN","SUPER_ADMIN"].includes(o.role)?l("/admin",{replace:!0}):l("/",{replace:!0}))},[o,l,i]),A.useEffect(()=>{if(ue.current!==n&&(ee.current=!1,oe.current=!1,_e.current=null,T(!1),ue.current=n),I(!1),n&&o){if(Ee.current.has(n)){ee.current||(ee.current=!0,T(!0),p(!1),oe.current=!1,_e.current=null,setTimeout(()=>{l("/client/chat",{replace:!0})},0));return}const Y=_e.current&&_e.current!==n;if(ee.current||M||Y){p(!1);return}_e.current!==n&&(_e.current=n,oe.current=!0,Tr())}else n||(p(!1),I(!1),T(!1),ee.current=!1,oe.current=!1,_e.current=null,o&&(sI(),iI()))},[n,o]),A.useEffect(()=>{if(M)return;if(m?.id||n&&a&&O){Ps();const we=setInterval(()=>{Ps()},5e3);return()=>clearInterval(we)}},[m?.id,n,a,O,M]),A.useEffect(()=>{kt()},[c]),A.useEffect(()=>{!a&&v&&n&&m?.status==="COMPLETED"&&v.status==="COMPLETED"&&!v.rating&&!sl&&Os(!0)},[m?.status,v?.status,v?.rating,a,n]);const kt=()=>{W.current?.scrollIntoView({behavior:"smooth"})},Tr=async()=>{if(Ee.current.has(n)){ee.current||(ee.current=!0,T(!0),p(!1),oe.current=!1,_e.current=null,setTimeout(()=>{l("/client/chat",{replace:!0})},0));return}if(ee.current||M){oe.current=!1,_e.current=null;return}if(!n||!o){p(!1),oe.current=!1,_e.current=null;return}if(!(_e.current&&_e.current!==n)){oe.current=!0,_e.current=n;try{p(!0);let Y=!!t;if(r&&!t&&!e){let We=!1;try{const ut=(await It.getConversations()).conversations?.find(Oe=>Oe.sessionId===r||Oe.isDirect&&Oe.id===r);if(ut&&(ut.isDirect||ut.sessionId===r)){We=!0,y({id:r,status:ut.status||"IN_PROGRESS",sessionType:"chat"}),w(null),L(ut),I(!0),p(!1),oe.current=!1,_e.current=null;return}}catch{}try{const Ke=await Ir.getBookingById(r);Y=!1;const ut=Ke.booking;if(o?.role==="CLIENT"&&ut.client?.userId!==o.id){_.error(i==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),l("/client/bookings",{replace:!0});return}w(ut);try{const Oe=await Tt.getSessionByBooking(r);if(y(Oe.session),I(!0),Oe.session?.roomId)try{const lt=await Tt.getVideoRoom(r);b(lt.room)}catch{console.log("Video room not accessible yet")}}catch{console.log("Session not found yet, will be created when starting"),y(null),I(!0)}p(!1);return}catch(Ke){if(Ke.status===404||Ke.response?.status===404||Ke.message?.toLowerCase().includes("not found")||Ke.message?.includes("404")){if(ee.current){oe.current=!1,_e.current=null;return}Ee.current.add(n),ee.current=!0,T(!0),p(!1),oe.current=!1,_e.current=null,l("/client/chat",{replace:!0});return}Y=!0}}if(Y){try{const Ke=(await It.getConversations()).conversations?.find(ut=>ut.sessionId===n);if(Ke)y({id:n,status:Ke.status||"IN_PROGRESS",sessionType:"chat"}),w(null),L(Ke),I(!0);else try{await It.getMessages(n),y({id:n,status:"IN_PROGRESS",sessionType:"chat"}),w(null),I(!0)}catch(ut){if(ut.message?.includes("not found")||ut.message?.includes("404")||ut.message?.includes("Access denied")||ut.message?.includes("403")){I(!1),T(!0),_.error(i==="ar"?"الجلسة غير موجودة أو غير مصرح لك بالوصول":"Session not found or access denied"),l("/client/bookings",{replace:!0});return}else throw ut}}catch(We){console.error("Error fetching direct session:",We),!We.message?.includes("not found")&&!We.message?.includes("404")&&!We.message?.includes("Access denied")&&!We.message?.includes("403")&&_.error(i==="ar"?"فشل تحميل الجلسة":"Failed to load session"),l("/client/bookings",{replace:!0})}finally{p(!1),oe.current=!1,_e.current=null}return}const Me=(await Ir.getBookingById(n)).booking;if(o?.role==="CLIENT"&&Me.client?.userId!==o.id){_.error(i==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),l("/client/bookings",{replace:!0});return}w(Me);try{const We=await Tt.getSessionByBooking(n);if(y(We.session),I(!0),We.session?.roomId)try{const Ke=await Tt.getVideoRoom(n);b(Ke.room)}catch{console.log("Video room not accessible yet")}}catch{console.log("Session not found yet, will be created when starting"),y(null),I(!0)}oe.current=!1,_e.current=null,Ee.current.delete(n)}catch(Y){const we=Y.message||Y.response?.data?.error||(i==="ar"?"فشل تحميل الجلسة":"Failed to load session"),Me=Y.message?.toLowerCase().includes("not found")||Y.message?.includes("404")||Y.response?.status===404,We=Y.message?.includes("Access denied")||Y.message?.includes("403")||Y.response?.status===403;if(Me){if(ee.current){p(!1);return}ee.current=!0,T(!0),p(!1),l("/client/chat",{replace:!0});return}if(We){_.error(i==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),T(!0),p(!1),l("/client/chat",{replace:!0});return}console.error("Error fetching session:",Y),_.error(we),p(!1)}finally{oe.current=!1,_e.current=null,!M&&!ee.current&&p(!1)}}},Ps=async()=>{if(!(M||!m?.id&&!(n&&a&&O)))try{const Y=m?.id||n;if(!Y)return;const we=await It.getMessages(Y);if(u(we.messages||[]),!O&&we.messages&&I(!0),we.messages&&we.messages.length>0)try{await It.markAsRead(Y)}catch(Me){console.error("Error marking messages as read:",Me)}setTimeout(()=>{W.current?.scrollIntoView({behavior:"smooth"})},100)}catch(Y){const we=Y.message?.includes("Access denied")||Y.message?.includes("403"),Me=Y.message?.includes("not found")||Y.message?.includes("404");if(we){T(!0),u([]);return}if(Me){u([]);return}console.error("Error fetching messages:",Y),u([])}},gu=async()=>{const Y=m?.id||(a?n:null);if(!(!d.trim()&&S.length===0||!Y)){if(!m?.id&&!a&&n)try{const we=await Tt.generateVideoRoom(n),Me=await Tt.startSession(n,we.room?.roomId);y(Me.session),b(we.room)}catch(we){_.error(we.message||(i==="ar"?"فشل بدء الجلسة":"Failed to start session"));return}try{x(!0);let we="text";if(S.length>0){const Ke=S.some(lt=>/\.(jpg|jpeg|png|gif|webp)$/i.test(lt)),ut=S.some(lt=>/\.(mp3|wav|ogg|m4a|webm)$/i.test(lt)),Oe=S.some(lt=>/\.(mp4|webm|ogg)$/i.test(lt));Ke?we="image":ut?we="audio":Oe?we="video":we="file"}const Me=m?.id||Y,We={content:d||(S.length>0?"📎 ملف مرفق":""),messageType:we,attachments:S.length>0?S:[]};if(a&&R){let Ke=null;R.clientId&&R.clientId!==o?.id?Ke=R.clientId:R.consultantUserId&&R.consultantUserId!==o?.id&&(Ke=R.consultantUserId),Ke&&(We.receiverId=Ke)}await It.sendMessage(Me,We),f(""),j([]),a&&!m?.id&&y({id:Me,status:"IN_PROGRESS",sessionType:"chat"}),Ps()}catch(we){_.error(we.message||(i==="ar"?"فشل إرسال الرسالة":"Failed to send message"))}finally{x(!1)}}},ip=async()=>{be?ot():await Z()},ha=async()=>{if(!xe)return;const Y=m?.id||(a?n:null);if(!Y){_.error(i==="ar"?"لا توجد جلسة نشطة":"No active session"),F();return}try{x(!0);const we=new File([xe],`voice-${Date.now()}.webm`,{type:"audio/webm"}),Me=new FormData;Me.append("file",we),Me.append("ownerType","MESSAGE"),Me.append("ownerId",Y);const We=await Hr.uploadFile(Me);if(!We||!We.file||!We.file.fileUrl)throw console.error("Invalid file upload response:",We),new Error("Invalid file response from server - file may not have been uploaded");const Ke=We.file.fileUrl;if(!Ke||typeof Ke!="string")throw console.error("Invalid audio URL from upload:",Ke),new Error("Invalid audio file URL - please try recording again");const ut=m?.id||Y,Oe={content:i==="ar"?"رسالة صوتية":"Voice message",messageType:"audio",attachments:[Ke]};if(a&&R){let lt=null;R.clientId&&R.clientId!==o?.id?lt=R.clientId:R.consultantUserId&&R.consultantUserId!==o?.id&&(lt=R.consultantUserId),lt&&(Oe.receiverId=lt)}await It.sendMessage(ut,Oe),F(),Ps(),_.success(i==="ar"?"تم إرسال الرسالة الصوتية":"Voice message sent")}catch(we){console.error("Error sending voice message:",we),_.error(we.message||(i==="ar"?"فشل إرسال الرسالة الصوتية":"Failed to send voice message"))}finally{x(!1)}},In=async()=>{me?(De(),Kr(!1)):Kr(!0)},Br=async()=>{ct.current&&await wt(ct.current)},Jr=async()=>{if(!xt)return;const Y=m?.id||(a?n:null);if(!Y){_.error(i==="ar"?"لا توجد جلسة نشطة":"No active session"),ht(),Kr(!1);return}try{x(!0);const we=new File([xt],`video-${Date.now()}.webm`,{type:"video/webm"}),Me=new FormData;Me.append("file",we),Me.append("ownerType","MESSAGE"),Me.append("ownerId",Y);const We=await Hr.uploadFile(Me);if(!We||!We.file||!We.file.fileUrl)throw new Error("Invalid file response from server");const Ke=We.file.fileUrl,ut=m?.id||Y,Oe={content:i==="ar"?"رسالة فيديو":"Video message",messageType:"video",attachments:[Ke]};if(a&&R){let lt=null;R.clientId&&R.clientId!==o?.id?lt=R.clientId:R.consultantUserId&&R.consultantUserId!==o?.id&&(lt=R.consultantUserId),lt&&(Oe.receiverId=lt)}await It.sendMessage(ut,Oe),ht(),Kr(!1),Ps(),_.success(i==="ar"?"تم إرسال الرسالة بالفيديو":"Video message sent")}catch(we){console.error("Error sending video message:",we),_.error(we.message||(i==="ar"?"فشل إرسال الرسالة بالفيديو":"Failed to send video message"))}finally{x(!1)}},il=async Y=>{const we=m?.id||(a?n:null);if(!we)return _.error(i==="ar"?"لا توجد جلسة نشطة":"No active session"),!1;try{const Me=new FormData;Me.append("file",Y),Me.append("ownerType","MESSAGE"),Me.append("ownerId",we);const We=await Hr.uploadFile(Me);if(!We||!We.file||!We.file.fileUrl)throw new Error("Invalid file response from server");const Ke=[...S,We.file.fileUrl];j(Ke),_.success(i==="ar"?"تم رفع الملف":"File uploaded")}catch(Me){console.error("File upload error:",Me),_.error(Me.message||(i==="ar"?"فشل رفع الملف":"Failed to upload file"))}return!1},nI=async()=>{if(a){_.warning(i==="ar"?"مكالمات الفيديو متاحة فقط للجلسات المرتبطة بالحجوزات":"Video calls are only available for booking-based sessions");return}if(n)try{p(!0);let Y=N;Y||(Y=(await Tt.generateVideoRoom(n)).room,b(Y),_.success(i==="ar"?"تم إنشاء غرفة الفيديو":"Video room created")),await Tt.startSession(n,Y?.roomId),_.success(i==="ar"?"تم بدء الجلسة":"Session started"),Y?.joinUrl?window.open(Y.joinUrl,"JitsiMeet","width=1200,height=800,menubar=no,toolbar=no,location=no,status=no,resizable=yes,scrollbars=yes")?(fn(!0),_.success(i==="ar"?"تم فتح المكالمة في نافذة جديدة":"Video call opened in new window")):(fn(!0),_.info(i==="ar"?'تم فتح المكالمة في النافذة المنبثقة. إذا لم تفتح، استخدم زر "فتح في نافذة جديدة"':'Video call opened. If popup was blocked, use "Open in New Window" button')):_.warning(i==="ar"?"لم يتم العثور على رابط المكالمة":"Video call URL not found"),Tr()}catch(Y){console.error("Video call error:",Y),_.error(Y.message||(i==="ar"?"فشل بدء المكالمة":"Failed to start video call"))}finally{p(!1)}},aI=async()=>{if(!(!n||a))try{await Tt.endSession(n),_.success(i==="ar"?"تم إنهاء الجلسة":"Session ended successfully");const we=(await Ir.getBookingById(n)).booking;w(we);try{const Me=await Tt.getSessionByBooking(n);y(Me.session)}catch(Me){console.error("Error fetching session:",Me)}we.rating?l("/client/bookings"):Os(!0)}catch(Y){_.error(Y.message||(i==="ar"?"فشل إنهاء الجلسة":"Failed to end session"))}},sI=async()=>{try{const Y=await It.getConversations();H(Y.conversations||[])}catch(Y){console.error("Error fetching conversations:",Y)}},iI=async()=>{try{ne(!0);const Y=await Ir.getBookings({status:"CONFIRMED,COMPLETED"});te(Y.bookings||[])}catch(Y){console.error("Error fetching bookings:",Y)}finally{ne(!1)}},aj=Y=>{l(`/client/chat/${Y}`)},oI=async()=>{if(!v||!n)return;if(!Pr||Pr<1||Pr>5){_.error(i==="ar"?"يرجى إضافة تقييم من 1 إلى 5":"Please add a rating from 1 to 5");return}const Y=Ne.trim();if(!Y||Y.length<10){_.error(i==="ar"?"يرجى إضافة تعليق للمراجعة (10 أحرف على الأقل)":"Please add a review comment (at least 10 characters)");return}try{Xe(!0),await Ir.rateBooking(n,Pr,Y),_.success(i==="ar"?"تم إرسال المراجعة بنجاح":"Review submitted successfully");const we=await Ir.getBookingById(n);w(we.booking),Os(!1),U(0),Le(""),Fe.resetFields(),l("/client/bookings")}catch(we){console.error("Error submitting review:",we),_.error(we.message||(i==="ar"?"فشل إرسال المراجعة":"Failed to submit review"))}finally{Xe(!1)}};if(h)return s.jsx("div",{className:"flex justify-center items-center h-screen dashboard-bg",children:s.jsx(et,{size:"large"})});if(!n)return s.jsxs("div",{className:"flex h-[calc(100vh-200px)] gap-4",children:[s.jsx("div",{className:"w-1/3 min-w-[300px]",children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ut,{}),s.jsx("span",{children:i==="ar"?"المحادثات والحجوزات":"Conversations & Bookings"})]}),className:"h-full shadow-professional-lg border-0 bg-gradient-to-br from-white to-gray-50",styles:{body:{padding:0,height:"calc(100% - 57px)",overflow:"auto"}},children:K?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(et,{size:"large"})}):B.length===0&&Q.length===0?s.jsxs("div",{className:"py-12",children:[s.jsx(Bt,{description:i==="ar"?"لا توجد محادثات أو حجوزات":"No conversations or bookings",image:Bt.PRESENTED_IMAGE_SIMPLE}),s.jsx("div",{className:"text-center mt-4",children:s.jsx(P,{type:"primary",onClick:()=>l("/client/bookings"),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:i==="ar"?"حجز جديد":"New Booking"})})]}):s.jsxs("div",{children:[B.length>0&&s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h3",{className:"font-semibold text-sm text-gray-600 mb-2",children:i==="ar"?"المحادثات النشطة":"Active Conversations"}),s.jsx(ft,{dataSource:B,renderItem:Y=>{const we=Y.unreadCount||0;return s.jsx(ft.Item,{className:"cursor-pointer hover:bg-gray-50 px-4 py-3 border-b ",onClick:()=>aj(Y.bookingId||Y.sessionId),children:s.jsx(ft.Item.Meta,{avatar:s.jsx(Ia,{count:we,size:"small",offset:[-5,5],children:s.jsx(at,{src:Y.avatar,icon:s.jsx(ke,{}),size:48})}),title:s.jsx("span",{className:"font-medium text-gray-900",children:Y.name||Y.consultantName||Y.clientName||(i==="ar"?"محادثة":"Conversation")}),description:s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 truncate",children:Y.lastMessage||(i==="ar"?"لا توجد رسائل":"No messages")}),Y.lastMessageTime&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:de(Y.lastMessageTime).fromNow()})]})})})}})]}),Q.length>0&&s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-sm text-gray-600 mb-2",children:i==="ar"?"الحجوزات المتاحة":"Available Bookings"}),s.jsx(ft,{dataSource:Q,renderItem:Y=>{const we=B.some(Me=>Me.bookingId===Y.id);return s.jsx(ft.Item,{className:`cursor-pointer hover:bg-gray-50 px-4 py-3 border-b  ${we?"opacity-75":""}`,onClick:()=>aj(Y.id),children:s.jsx(ft.Item.Meta,{avatar:s.jsx(at,{src:Y.consultant?.user?.avatar,icon:s.jsx(ke,{}),size:48}),title:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-medium text-gray-900",children:Y.consultant?`${Y.consultant.firstName} ${Y.consultant.lastName}`:i==="ar"?"مستشار":"Consultant"}),s.jsx(le,{color:Y.status==="CONFIRMED"?"green":Y.status==="COMPLETED"?"blue":"default",size:"small",children:Y.status})]}),description:s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:Y.service?i==="ar"?Y.service.titleAr:Y.service.title:i==="ar"?"استشارة":"Consultation"}),Y.scheduledAt&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:de(Y.scheduledAt).format("YYYY-MM-DD HH:mm")})]})})})}})]})]})})}),s.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"text-center py-12 px-6",children:[s.jsx("div",{className:"mb-6",children:s.jsx(Ut,{className:"text-7xl text-gray-300"})}),s.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700",children:i==="ar"?"اختر محادثة للبدء":"Select a Conversation to Start"}),s.jsx("p",{className:"text-gray-500 max-w-md mx-auto text-base",children:i==="ar"?"اختر محادثة من القائمة الجانبية للبدء في الدردشة مع المستشار":"Select a conversation from the sidebar to start chatting with your consultant"}),s.jsx("div",{className:"mt-6",children:s.jsx(P,{type:"primary",size:"large",onClick:()=>l("/client/bookings"),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:i==="ar"?"حجز استشارة جديدة":"Book New Consultation"})})]})})]});const Ts=v?.consultant;o?.role;const op=a&&R?{name:R.name||R.clientName||R.consultantName||"User",avatar:R.avatar}:null;return!v&&n&&!a&&!O?s.jsx("div",{className:"flex justify-center items-center h-screen dashboard-bg",children:s.jsx(et,{size:"large"})}):a&&!O&&!M?s.jsx("div",{className:"flex justify-center items-center h-screen dashboard-bg",children:s.jsx(et,{size:"large"})}):s.jsxs("div",{className:"flex flex-col dashboard-bg relative",style:{height:"calc(100vh - 64px)",margin:"-12px -12px 0 -12px",width:"calc(100% + 24px)"},children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/20 to-turquoise-100/20 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/20 to-olive-green-100/20 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"glass-card border-b border-gray-200/50 px-4 py-3 flex items-center justify-between shadow-professional z-10 sticky top-0 flex-shrink-0 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(at,{src:a?op?.avatar:Ts?.user?.avatar||Ts?.profilePicture,size:40,icon:s.jsx(ke,{}),className:"flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-base font-semibold text-gray-900 truncate",children:a?op?.name||(i==="ar"?"المستخدم":"User"):Ts?`${Ts.firstName} ${Ts.lastName}`:i==="ar"?"المستشار":"Consultant"}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:a?i==="ar"?"محادثة مباشرة":"Direct Message":v?.service?i==="ar"?v.service.titleAr:v.service.title:i==="ar"?"استشارة":"Consultation"})]})]}),s.jsxs(fe,{className:"flex-shrink-0",children:[s.jsx(P,{type:"text",icon:s.jsx(ms,{}),className:"text-gray-600 hover:text-gray-900",onClick:nI,disabled:m?.status==="COMPLETED",title:i==="ar"?"مكالمة فيديو":"Video Call"}),m?.status==="IN_PROGRESS"&&!a&&s.jsx(P,{type:"text",danger:!0,onClick:aI,title:i==="ar"?"إنهاء الجلسة":"End Session",children:i==="ar"?"إنهاء":"End"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 min-h-0",style:{scrollBehavior:"smooth"},children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-3",children:[c.length===0?s.jsxs("div",{className:"text-center text-gray-400 py-12",children:[s.jsx("div",{className:"text-4xl mb-2",children:"💬"}),s.jsx("p",{children:i==="ar"?"لا توجد رسائل بعد":"No messages yet"})]}):c.map((Y,we)=>{const Me=Y.senderId===o?.id,We=Y.attachments?JSON.parse(Y.attachments):[],Ke=we>0?c[we-1]:null;!Ke||(Ke.senderId,Y.senderId);const ut=!Ke||de(Y.createdAt).diff(de(Ke.createdAt),"minute")>5;return s.jsxs("div",{className:`flex ${Me?"justify-end":"justify-start"} items-end gap-2 ${ut?"mt-4":""}`,children:[!Me&&s.jsx(at,{src:a?op?.avatar:Ts?.user?.avatar||Ts?.profilePicture,size:32,icon:s.jsx(ke,{}),className:"flex-shrink-0"}),s.jsxs("div",{className:`flex flex-col ${Me?"items-end":"items-start"} max-w-[70%] md:max-w-[60%]`,children:[ut&&s.jsx("div",{className:"text-center w-full mb-2",children:s.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:de(Y.createdAt).format("MMM DD, YYYY HH:mm")})}),s.jsxs("div",{className:`rounded-2xl px-4 py-2 ${Me?"bg-[#dcf8c6] text-gray-900 rounded-tr-sm":"bg-white text-gray-900 rounded-tl-sm shadow-sm"}`,children:[We.length>0&&s.jsx("div",{className:"mb-2 space-y-2",children:We.map((Oe,lt)=>{const hn=Oe.startsWith("data:image/")||Oe.startsWith("data:video/")||Oe.startsWith("data:audio/"),lI=Y.messageType==="image"||/\.(jpg|jpeg|png|gif|webp)$/i.test(Oe)||hn&&Oe.startsWith("data:image/"),cI=Y.messageType==="audio"||/\.(mp3|wav|ogg|m4a|webm)$/i.test(Oe)||hn&&Oe.startsWith("data:audio/"),uI=Y.messageType==="video"||/\.(mp4|webm)$/i.test(Oe)&&Y.messageType!=="audio"||hn&&Oe.startsWith("data:video/");if(lI)return s.jsx("div",{className:"image-attachment mb-2 -mx-2",children:hn?s.jsx("img",{src:Oe,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},onError:Is=>{const pa=Is.target;if(pa){pa.style.display="none";const Mn=pa.closest(".image-attachment");if(Mn&&!Mn.querySelector(".image-error-fallback")){const Rn=document.createElement("div");Rn.className="image-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",Rn.textContent=i==="ar"?"تعذر تحميل الصورة":"Image unavailable",Mn.appendChild(Rn)}}}}):s.jsx(Ar,{src:Oe.startsWith("http")?Oe:Oe.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Oe}`:Oe.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Oe}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Oe.split("/").pop()}`,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},preview:{mask:i==="ar"?"معاينة":"Preview"},onError:Is=>{const pa=Is.target;if(pa){pa.style.display="none";const Mn=pa.closest(".image-attachment");if(Mn&&!Mn.querySelector(".image-error-fallback")){const Rn=document.createElement("div");Rn.className="image-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",Rn.textContent=i==="ar"?"تعذر تحميل الصورة":"Image unavailable",Mn.appendChild(Rn)}}}},lt)},lt);if(cI){const Is=Oe.startsWith("http")?Oe:Oe.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Oe}`:Oe.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Oe}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Oe.split("/").pop()}`;return s.jsx("div",{className:"audio-attachment",children:s.jsx(pb,{src:Is,isOwnMessage:Me,language:i})},lt)}else if(uI){const Is=Oe.startsWith("http")?Oe:Oe.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Oe}`:Oe.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Oe}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Oe.split("/").pop()}`;return s.jsx("div",{className:"video-attachment",children:s.jsx("video",{controls:!0,src:Is,className:"w-full max-w-md rounded",onError:pa=>{const Mn=pa.target;if(Mn){Mn.style.display="none";const Rn=Mn.closest(".video-attachment");if(Rn&&!Rn.querySelector(".video-error-fallback")){const lp=document.createElement("div");lp.className="video-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",lp.textContent=i==="ar"?"تعذر تحميل الفيديو":"Video unavailable",Rn.appendChild(lp)}}}})},lt)}else return s.jsxs("div",{className:`file-attachment flex items-center gap-2 p-2 rounded ${Me?"bg-white/50":"bg-gray-100"}`,children:[s.jsx(so,{className:Me?"text-gray-700":"text-blue-600"}),s.jsx("a",{href:Oe,download:!0,target:"_blank",rel:"noopener noreferrer",className:`text-sm ${Me?"text-gray-700 hover:text-gray-900":"text-blue-600 hover:text-blue-800"}`,children:Oe.split("/").pop()})]},lt)})}),Y.content&&Y.content.trim()&&!(Y.messageType==="image"&&We.length>0&&!Y.content.includes("📎"))&&s.jsx("p",{className:`text-sm ${We.length>0?"mt-2":""} whitespace-pre-wrap break-words`,children:Y.content}),s.jsx("span",{className:`text-xs mt-1 ${Me?"text-gray-600":"text-gray-500"} self-end`,children:de(Y.createdAt).format("HH:mm")})]})]}),Me&&s.jsx(at,{src:o?.avatar,size:32,icon:s.jsx(ke,{}),className:"flex-shrink-0"})]},Y.id)}),s.jsx("div",{ref:W})]})}),s.jsxs("div",{className:"border-t border-gray-200/50 px-4 py-3 shadow-professional backdrop-blur-sm flex-shrink-0 bg-white/80",children:[Ae&&!be&&s.jsxs("div",{className:"mb-2 p-3 bg-gray-100 rounded-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("audio",{src:Ae,controls:!0,className:"max-w-xs"}),s.jsx("span",{className:"text-sm text-gray-600",children:ce(X)})]}),s.jsxs(fe,{children:[s.jsx(P,{type:"primary",size:"small",onClick:ha,loading:g,children:i==="ar"?"إرسال":"Send"}),s.jsx(P,{size:"small",icon:s.jsx(Nr,{}),onClick:F})]})]}),be&&s.jsxs("div",{className:"mb-2 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsxs("span",{className:"text-red-600 font-semibold",children:[i==="ar"?"جاري التسجيل...":"Recording..."," ",ce(X)]})]}),s.jsx(P,{danger:!0,size:"small",icon:s.jsx(fo,{}),onClick:ot,children:i==="ar"?"إيقاف":"Stop"})]}),S.length>0&&s.jsx("div",{className:"mb-3 pb-3 border-b border-gray-200",children:s.jsx("div",{className:"flex flex-wrap gap-3",children:S.map((Y,we)=>{const Me=/\.(jpg|jpeg|png|gif|webp)$/i.test(Y),We=/\.(mp4|webm|ogg)$/i.test(Y),Ke=/\.(mp3|wav|ogg|m4a|webm)$/i.test(Y),ut=Y.split("/").pop(),Oe=Y.startsWith("http")?Y:Y.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Y}`:Y.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Y}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Y.split("/").pop()}`;return s.jsx("div",{className:"relative group",children:Me?s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm",children:[s.jsx(Ar,{src:Oe,alt:ut,width:200,height:200,className:"object-cover",preview:!1,onError:lt=>{lt.target.style.display="none"}}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Nr,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>j(S.filter((lt,hn)=>hn!==we))})]}):We?s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm w-[200px]",children:[s.jsx("video",{src:Oe,className:"w-full h-[150px] object-cover",controls:!1,muted:!0,onError:lt=>{console.error("Video failed to load:",Oe)}}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:s.jsx(ms,{className:"text-white text-2xl"})}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Nr,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>j(S.filter((lt,hn)=>hn!==we))})]}):Ke?s.jsxs("div",{className:"relative rounded-lg border border-gray-200 shadow-sm bg-gray-50 p-3 min-w-[200px]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(io,{className:"text-gray-600 text-lg"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs text-gray-600 truncate",children:ut}),s.jsx("audio",{src:Oe,controls:!0,className:"w-full mt-1",preload:"metadata"})]})]}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Nr,{}),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center",onClick:()=>j(S.filter((lt,hn)=>hn!==we))})]}):s.jsxs("div",{className:"relative flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 shadow-sm min-w-[200px]",children:[s.jsx(so,{className:"text-gray-600 text-xl"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-gray-700 truncate font-medium",children:ut}),s.jsx("p",{className:"text-xs text-gray-500",children:i==="ar"?"ملف":"File"})]}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Nr,{}),className:"bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center flex-shrink-0",onClick:()=>j(S.filter((lt,hn)=>hn!==we))})]})},we)})})}),s.jsxs("div",{className:"flex items-end gap-2 relative",children:[s.jsx(Pt,{showUploadList:!1,beforeUpload:il,accept:"image/*,audio/*,video/*,.pdf,.doc,.docx",multiple:!0,children:s.jsx(P,{type:"text",icon:s.jsx(ab,{}),className:"text-gray-600 hover:text-gray-900 text-xl",disabled:m?.status==="COMPLETED"||be||me})}),s.jsx(P,{type:be?"primary":"text",danger:be,icon:be?s.jsx(cb,{}):s.jsx(io,{}),onClick:ip,disabled:m?.status==="COMPLETED"||me,className:be?"bg-red-500 hover:bg-red-600":"text-gray-600 hover:text-gray-900",title:i==="ar"?"تسجيل صوتي":"Voice recording"}),s.jsx(P,{type:me?"primary":"text",danger:me,icon:s.jsx(ah,{}),onClick:In,disabled:m?.status==="COMPLETED"||be,className:me?"bg-red-500 hover:bg-red-600":"text-gray-600 hover:text-gray-900",title:i==="ar"?"تسجيل فيديو":"Video recording"}),s.jsx(P,{icon:s.jsx(db,{}),onClick:()=>k(!C),type:"text",className:"text-gray-600 hover:text-gray-900",disabled:m?.status==="COMPLETED"||be||me}),s.jsx("div",{className:"flex-1 bg-gray-100 rounded-3xl px-4 py-2 border border-gray-200 focus-within:border-blue-500 focus-within:bg-white ",children:s.jsx(_j,{value:d,onChange:Y=>f(Y.target.value),placeholder:i==="ar"?"اكتب رسالة...":"Type a message...",autoSize:{minRows:1,maxRows:4},variant:"borderless",disabled:m?.status==="COMPLETED"||be||me,className:"resize-none",onPressEnter:Y=>{Y.shiftKey||(Y.preventDefault(),gu())}})}),s.jsx(P,{type:"primary",icon:s.jsx(lh,{}),className:"bg-[#25D366] hover:bg-[#20BA5A] border-0 rounded-full w-10 h-10 p-0 flex items-center justify-center",onClick:gu,loading:g,disabled:m?.status==="COMPLETED"||!d.trim()&&S.length===0||be||me})]}),C&&s.jsx("div",{className:"absolute bottom-full left-0 mb-2 p-3 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto z-50",children:s.jsx("div",{className:"grid grid-cols-8 gap-1",children:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃"].map(Y=>s.jsx(P,{type:"text",className:"text-xl p-1 hover:bg-gray-100",onClick:()=>{f(we=>we+Y),k(!1)},children:Y},Y))})})]}),s.jsx(He,{title:i==="ar"?"تسجيل فيديو":"Record Video",open:Ha,onCancel:()=>{me&&ht(),Kr(!1)},footer:[s.jsx(P,{onClick:()=>{ht(),Kr(!1)},children:i==="ar"?"إلغاء":"Cancel"},"cancel"),me?s.jsx(P,{danger:!0,onClick:()=>{De()},children:i==="ar"?"إيقاف":"Stop"},"stop"):yt?s.jsxs(s.Fragment,{children:[s.jsx(P,{onClick:()=>{ht(),Br()},children:i==="ar"?"إعادة":"Retake"},"retake"),s.jsx(P,{type:"primary",onClick:Jr,loading:g,children:i==="ar"?"إرسال":"Send"},"send")]}):s.jsx(P,{type:"primary",onClick:Br,children:i==="ar"?"بدء التسجيل":"Start Recording"},"start")],width:600,children:s.jsxs("div",{className:"text-center",children:[me&&s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsxs("span",{className:"text-red-600 font-semibold",children:[i==="ar"?"جاري التسجيل...":"Recording..."," ",dn(Ze)]})]})}),s.jsx("video",{ref:ct,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full max-w-md mx-auto rounded-lg",style:{display:me||yt?"block":"none"}}),yt&&!me&&s.jsx("video",{src:yt,controls:!0,className:"w-full max-w-md mx-auto rounded-lg mt-4"}),!me&&!yt&&s.jsx("div",{className:"py-8 text-gray-500",children:i==="ar"?'اضغط على "بدء التسجيل" لبدء تسجيل الفيديو':'Click "Start Recording" to begin video recording'})]})}),s.jsx(He,{title:i==="ar"?"مكالمة فيديو - Jitsi Meet":"Video Call - Jitsi Meet",open:al,onCancel:()=>fn(!1),footer:[s.jsx(P,{onClick:()=>fn(!1),children:i==="ar"?"إغلاق":"Close"},"close"),s.jsx(P,{type:"primary",onClick:()=>{N?.joinUrl&&window.open(N.joinUrl,"_blank","width=1200,height=800")},children:i==="ar"?"فتح في نافذة جديدة":"Open in New Window"},"openNew")],width:"90%",style:{top:20},styles:{body:{height:"80vh",padding:0}},destroyOnHidden:!0,children:N?.joinUrl?s.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",padding:"20px"},children:[s.jsx("p",{style:{fontSize:"16px",color:"#666",textAlign:"center"},children:i==="ar"?'لأفضل تجربة، يرجى استخدام زر "فتح في نافذة جديدة" لفتح المكالمة':'For the best experience, please use the "Open in New Window" button to open the call'}),s.jsx(P,{type:"primary",size:"large",onClick:()=>{N?.joinUrl&&window.open(N.joinUrl,"_blank","width=1200,height=800")},children:i==="ar"?"فتح المكالمة في نافذة جديدة":"Open Call in New Window"}),s.jsx("div",{style:{width:"100%",height:"70%",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},children:s.jsx("iframe",{src:N.joinUrl,allow:"camera; microphone; fullscreen; speaker; display-capture; autoplay",style:{width:"100%",height:"100%",border:"none"},title:"Jitsi Meet Video Call",allowFullScreen:!0})})]}):s.jsx("div",{style:{padding:"20px",textAlign:"center"},children:s.jsx("p",{children:i==="ar"?"لا يوجد رابط للمكالمة":"No call URL available"})})}),s.jsx(He,{title:i==="ar"?"تقييم المستشار":"Rate Consultant",open:sl,onCancel:()=>{v?.rating||_.warning(i==="ar"?"يجب إضافة تقييم ومراجعة قبل المتابعة":"Please add a rating and review before continuing")},footer:null,closable:!1,maskClosable:!1,width:600,children:s.jsxs("div",{className:"py-4",children:[s.jsx("p",{className:"text-gray-600 mb-6",children:i==="ar"?"يرجى إضافة تقييمك ومراجعتك للمستشار بناءً على الجلسة التي انتهت للتو.":"Please provide your rating and review for the consultant based on the session that just ended."}),s.jsxs(E,{form:Fe,layout:"vertical",children:[s.jsx(E.Item,{label:i==="ar"?"التقييم (مطلوب)":"Rating (Required)",required:!0,rules:[{required:!0,message:i==="ar"?"يرجى إضافة تقييم":"Please add a rating"}],children:s.jsx(ra,{value:Pr,onChange:U,allowClear:!1,style:{fontSize:"28px"}})}),s.jsx(E.Item,{label:i==="ar"?"المراجعة/التعليق (مطلوب)":"Review/Comment (Required)",required:!0,rules:[{required:!0,message:i==="ar"?"يرجى إضافة مراجعة أو تعليق":"Please add a review or comment"},{min:10,message:i==="ar"?"يجب أن يكون التعليق 10 أحرف على الأقل":"Comment must be at least 10 characters"}],children:s.jsx(_j,{value:Ne,onChange:Y=>Le(Y.target.value),placeholder:i==="ar"?"اكتب مراجعتك هنا...":"Write your review here...",rows:6,maxLength:500,showCount:!0})}),s.jsx(E.Item,{className:"mb-0",children:s.jsx("div",{className:"flex justify-end gap-3",children:s.jsx(P,{type:"primary",onClick:oI,loading:ze,disabled:!Pr||Pr<1||!Ne.trim()||Ne.trim().length<10,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:i==="ar"?"إرسال المراجعة":"Submit Review"})})})]})]})})]})},{authAPI:jl,filesAPI:Dj}=_a,{TextArea:G_}=z,{Option:Ti}=q,Y_=()=>{const{t,language:e}=je(),{theme:r}=Fa(),{user:n}=pr(),[a]=E.useForm(),[i,o]=A.useState(!1),[l,c]=A.useState(null),[u,d]=A.useState(!1);A.useEffect(()=>{f()},[]);const f=async()=>{try{o(!0);const m=await jl.getProfile();console.log("Profile response:",m),m.user&&(c(m.user),m.user.client&&a.setFieldsValue({firstName:m.user.client.firstName||"",lastName:m.user.client.lastName||"",email:m.user.email||"",phone:m.user.phone||"",city:m.user.client.city||"",country:m.user.client.country||"Saudi Arabia",address:m.user.client.address||"",postalCode:m.user.client.postalCode||"",sector:m.user.client.sector||"",companyName:m.user.client.companyName||"",companySize:m.user.client.companySize||"",jobTitle:m.user.client.jobTitle||"",website:m.user.client.website||"",linkedin:m.user.client.linkedin||"",twitter:m.user.client.twitter||"",dateOfBirth:m.user.client.dateOfBirth?de(m.user.client.dateOfBirth):null,gender:m.user.client.gender||"",notificationEmail:m.user.client.notificationEmail!==void 0?m.user.client.notificationEmail:!0,notificationApp:m.user.client.notificationApp!==void 0?m.user.client.notificationApp:!0,notificationWhatsApp:m.user.client.notificationWhatsApp!==void 0?m.user.client.notificationWhatsApp:!0}))}catch(m){console.error("Error fetching profile:",m),_.error(m.message||(e==="ar"?"فشل تحميل الملف الشخصي":"Failed to load profile"))}finally{o(!1)}},h=async m=>{const y=Dj||_a?.filesAPI;if(!y)return console.error("filesAPI is not defined",{filesAPI:Dj,apiService:_a}),_.error(e==="ar"?"خطأ في تحميل API":"API loading error"),!1;const v=new FormData;v.append("file",m),v.append("ownerType","USER"),v.append("ownerId",n?.id||"");try{o(!0);const w=await y.uploadFile(v);w.file?.fileUrl&&(await jl.updateProfile({avatar:w.file.fileUrl}),_.success(e==="ar"?"تم رفع الصورة بنجاح":"Avatar uploaded successfully"),c(N=>({...N,avatar:w.file.fileUrl})),await f())}catch(w){_.error(w.message||(e==="ar"?"فشل رفع الصورة":"Failed to upload avatar"))}finally{o(!1)}return!1},p=async m=>{try{o(!0);const y={...m,dateOfBirth:m.dateOfBirth?m.dateOfBirth.toISOString():null};m.email&&m.email!==l?.email&&await jl.updateEmail(m.email),await jl.updateProfile(y),_.success(e==="ar"?"تم حفظ التغييرات بنجاح":"Profile updated successfully"),d(!1),f()}catch(y){_.error(y.message||(e==="ar"?"فشل حفظ التغييرات":"Failed to save changes"))}finally{o(!1)}},g=async m=>{try{o(!0),await jl.changePassword(m.currentPassword,m.newPassword),_.success(e==="ar"?"تم تغيير كلمة المرور بنجاح":"Password changed successfully"),a.setFieldsValue({currentPassword:"",newPassword:"",confirmPassword:""})}catch(y){_.error(y.message||(e==="ar"?"فشل تغيير كلمة المرور":"Failed to change password"))}finally{o(!1)}},x=l?.client?{totalBookings:0,completedSessions:0,totalSpent:0}:null;return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 relative z-10",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الملف الشخصي":"Profile Settings"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة معلوماتك الشخصية وإعدادات الحساب":"Manage your personal information and account settings"})]}),s.jsxs(ie,{gutter:[24,24],children:[s.jsx($,{xs:24,md:8,children:s.jsxs(V,{className:"glass-card text-center shadow-professional-xl rounded-2xl border-0",children:[s.jsx(Pt,{showUploadList:!1,beforeUpload:h,accept:"image/*",children:s.jsxs("div",{className:"relative inline-block mb-4",children:[s.jsx(at,{size:140,src:l?.avatar||n?.avatar||l?.client?.profilePicture,icon:s.jsx(ke,{}),className:"ring-4 ring-olive-green-200"}),s.jsx(P,{type:"primary",shape:"circle",icon:s.jsx(ah,{}),className:"absolute bottom-0 right-0 shadow-lg",size:"small",style:{backgroundColor:"#7a8c66"}})]})}),s.jsx("h2",{className:`text-2xl font-bold mb-2 ${r==="dark"?"text-white":"text-gray-900"}`,children:l?.client&&`${l.client.firstName||""} ${l.client.lastName||""}`.trim()||n?.email}),s.jsx(le,{color:"blue",className:"mb-4",children:e==="ar"?"عميل":"Client"}),x&&s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsx(Mt,{className:"my-4"}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{span:8,children:s.jsx(Be,{title:e==="ar"?"الحجوزات":"Bookings",value:x.totalBookings,valueStyle:{fontSize:"18px",color:r==="dark"?"#fff":"#7a8c66"}})}),s.jsx($,{span:8,children:s.jsx(Be,{title:e==="ar"?"مكتملة":"Completed",value:x.completedSessions,valueStyle:{fontSize:"18px",color:r==="dark"?"#fff":"#14b8a6"}})}),s.jsx($,{span:8,children:s.jsx(Be,{title:e==="ar"?"إجمالي":"Total",value:x.totalSpent,prefix:"SAR",valueStyle:{fontSize:"18px",color:r==="dark"?"#fff":"#7a8c66"}})})]})]})]})}),s.jsx($,{xs:24,md:16,children:s.jsxs(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:`text-2xl font-bold ${r==="dark"?"text-white":"text-gray-900"}`,children:e==="ar"?"المعلومات الشخصية":"Personal Information"}),s.jsx(P,{icon:u?s.jsx(vt,{}):s.jsx(kr,{}),onClick:()=>d(!u),type:u?"default":"primary",children:u?e==="ar"?"إلغاء":"Cancel":e==="ar"?"تعديل":"Edit"})]}),s.jsxs(E,{form:a,onFinish:p,layout:"vertical",disabled:!u,children:[s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"firstName",label:e==="ar"?"الاسم الأول":"First Name",rules:[{required:!0}],children:s.jsx(z,{size:"large",prefix:s.jsx(ke,{})})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"lastName",label:e==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0}],children:s.jsx(z,{size:"large",prefix:s.jsx(ke,{})})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,type:"email"}],children:s.jsx(z,{size:"large",prefix:s.jsx(an,{})})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:s.jsx(z,{size:"large",prefix:s.jsx(aa,{})})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:8,children:s.jsx(E.Item,{name:"dateOfBirth",label:e==="ar"?"تاريخ الميلاد":"Date of Birth",children:s.jsx(ys,{size:"large",className:"w-full"})})}),s.jsx($,{xs:24,sm:8,children:s.jsx(E.Item,{name:"gender",label:e==="ar"?"الجنس":"Gender",children:s.jsxs(q,{size:"large",children:[s.jsx(Ti,{value:"MALE",children:e==="ar"?"ذكر":"Male"}),s.jsx(Ti,{value:"FEMALE",children:e==="ar"?"أنثى":"Female"}),s.jsx(Ti,{value:"OTHER",children:e==="ar"?"أخرى":"Other"})]})})})]}),s.jsx(Mt,{children:e==="ar"?"العنوان":"Address"}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"city",label:e==="ar"?"المدينة":"City",children:s.jsx(z,{size:"large",prefix:s.jsx(sh,{})})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"country",label:e==="ar"?"الدولة":"Country",children:s.jsx(z,{size:"large",prefix:s.jsx(na,{})})})})]}),s.jsx(E.Item,{name:"address",label:e==="ar"?"العنوان الكامل":"Full Address",children:s.jsx(G_,{rows:3,size:"large"})}),s.jsx(E.Item,{name:"postalCode",label:e==="ar"?"الرمز البريدي":"Postal Code",children:s.jsx(z,{size:"large"})}),s.jsx(Mt,{children:e==="ar"?"معلومات الشركة":"Company Information"}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"companyName",label:e==="ar"?"اسم الشركة":"Company Name",children:s.jsx(z,{size:"large",prefix:s.jsx(ib,{})})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"jobTitle",label:e==="ar"?"المسمى الوظيفي":"Job Title",children:s.jsx(z,{size:"large"})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"sector",label:e==="ar"?"القطاع":"Sector",children:s.jsx(z,{size:"large"})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"companySize",label:e==="ar"?"حجم الشركة":"Company Size",children:s.jsxs(q,{size:"large",children:[s.jsx(Ti,{value:"SMALL",children:e==="ar"?"صغيرة":"Small"}),s.jsx(Ti,{value:"MEDIUM",children:e==="ar"?"متوسطة":"Medium"}),s.jsx(Ti,{value:"LARGE",children:e==="ar"?"كبيرة":"Large"})]})})})]}),s.jsx(Mt,{children:e==="ar"?"روابط التواصل":"Social Links"}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"website",label:e==="ar"?"الموقع الإلكتروني":"Website",children:s.jsx(z,{size:"large",prefix:s.jsx(na,{}),placeholder:"https://"})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"linkedin",label:"LinkedIn",children:s.jsx(z,{size:"large",placeholder:"linkedin.com/in/..."})})})]}),s.jsx(E.Item,{name:"twitter",label:"Twitter",children:s.jsx(z,{size:"large",placeholder:"@username"})}),u&&s.jsx(E.Item,{className:"mt-6",children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",icon:s.jsx(wa,{}),loading:i,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"حفظ التغييرات":"Save Changes"})})]}),s.jsx(Mt,{children:e==="ar"?"تغيير كلمة المرور":"Change Password"}),s.jsxs(E,{onFinish:g,layout:"vertical",children:[s.jsx(E.Item,{name:"currentPassword",label:e==="ar"?"كلمة المرور الحالية":"Current Password",rules:[{required:!0}],children:s.jsx(z.Password,{size:"large",prefix:s.jsx(Ht,{})})}),s.jsx(E.Item,{name:"newPassword",label:e==="ar"?"كلمة المرور الجديدة":"New Password",rules:[{required:!0,min:8}],children:s.jsx(z.Password,{size:"large",prefix:s.jsx(Ht,{})})}),s.jsx(E.Item,{name:"confirmPassword",label:e==="ar"?"تأكيد كلمة المرور":"Confirm Password",dependencies:["newPassword"],rules:[{required:!0},({getFieldValue:m})=>({validator(y,v){return!v||m("newPassword")===v?Promise.resolve():Promise.reject(new Error(e==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match"))}})],children:s.jsx(z.Password,{size:"large",prefix:s.jsx(Ht,{})})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",loading:i,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"تغيير كلمة المرور":"Change Password"})})]}),s.jsx(Mt,{children:e==="ar"?"تفضيلات الإشعارات":"Notification Preferences"}),s.jsxs(E,{form:a,layout:"vertical",children:[s.jsx(E.Item,{name:"notificationEmail",label:e==="ar"?"الإشعارات عبر البريد الإلكتروني":"Email Notifications",valuePropName:"checked",children:s.jsx(Nn,{checkedChildren:e==="ar"?"مفعل":"On",unCheckedChildren:e==="ar"?"معطل":"Off"})}),s.jsx(E.Item,{name:"notificationApp",label:e==="ar"?"إشعارات التطبيق":"App Notifications",valuePropName:"checked",children:s.jsx(Nn,{checkedChildren:e==="ar"?"مفعل":"On",unCheckedChildren:e==="ar"?"معطل":"Off"})}),s.jsx(E.Item,{name:"notificationWhatsApp",label:e==="ar"?"إشعارات واتساب":"WhatsApp Notifications",valuePropName:"checked",children:s.jsx(Nn,{checkedChildren:e==="ar"?"مفعل":"On",unCheckedChildren:e==="ar"?"معطل":"Off"})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",icon:s.jsx(cc,{}),loading:i,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"حفظ تفضيلات الإشعارات":"Save Notification Preferences"})})]})]})})]})]})]})},{TextArea:$j}=z,{Option:Rs}=q,K_=()=>{const{language:t}=je(),[e,r]=A.useState([]),[n,a]=A.useState(!1),[i,o]=A.useState(!1),[l,c]=A.useState(!1),[u,d]=A.useState(null),[f,h]=A.useState(!1),[p]=E.useForm(),[g]=E.useForm();A.useEffect(()=>{x()},[]);const x=async()=>{try{a(!0);const b=await Mr.getMyTickets();r(b.tickets||[])}catch{_.error(t==="ar"?"فشل تحميل التذاكر":"Failed to load tickets")}finally{a(!1)}},m=async b=>{try{await Mr.createTicket(b),_.success(t==="ar"?"تم إنشاء التذكرة بنجاح":"Ticket created successfully"),o(!1),p.resetFields(),x()}catch{_.error(t==="ar"?"فشل إنشاء التذكرة":"Failed to create ticket")}},y=async b=>{try{if(await Mr.addComment(u.id,b.content),_.success(t==="ar"?"تم إضافة التعليق":"Comment added"),h(!1),g.resetFields(),x(),l){const S=await Mr.getTicketById(u.id);d(S.ticket)}}catch{_.error(t==="ar"?"فشل إضافة التعليق":"Failed to add comment")}},v=b=>({OPEN:"blue",IN_PROGRESS:"orange",RESOLVED:"green",CLOSED:"default"})[b]||"default",w=b=>({LOW:"default",MEDIUM:"blue",HIGH:"orange",URGENT:"red"})[b]||"default",N=[{title:t==="ar"?"رقم التذكرة":"Ticket Number",dataIndex:"ticketNumber",key:"ticketNumber"},{title:t==="ar"?"الموضوع":"Subject",dataIndex:"subject",key:"subject"},{title:t==="ar"?"الفئة":"Category",dataIndex:"category",key:"category",render:b=>b||"-"},{title:t==="ar"?"الأولوية":"Priority",dataIndex:"priority",key:"priority",render:b=>s.jsx(le,{color:w(b),children:b})},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:b=>s.jsx(le,{color:v(b),children:b})},{title:t==="ar"?"تاريخ الإنشاء":"Created At",dataIndex:"createdAt",key:"createdAt",render:b=>de(b).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"الإجراءات":"Actions",key:"actions",render:(b,S)=>s.jsx(fe,{children:s.jsx(P,{icon:s.jsx(ur,{}),size:"small",onClick:()=>{d(S),c(!0)},children:t==="ar"?"عرض":"View"})})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?"تذاكر الدعم الفني":"Support Tickets"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"إنشاء ومتابعة تذاكر الدعم الفني":"Create and track support tickets"})]}),s.jsx(P,{type:"primary",size:"large",icon:s.jsx(br,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-professional",onClick:()=>o(!0),children:t==="ar"?"إنشاء تذكرة جديدة":"Create New Ticket"})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:N,dataSource:e,loading:n,rowKey:"id",locale:{emptyText:s.jsx(Bt,{description:t==="ar"?"لا توجد تذاكر":"No tickets"})}})}),s.jsx(He,{title:t==="ar"?"إنشاء تذكرة جديدة":"Create New Ticket",open:i,onCancel:()=>{o(!1),p.resetFields()},footer:null,width:600,className:"modern-modal",children:s.jsxs(E,{form:p,layout:"vertical",onFinish:m,children:[s.jsx(E.Item,{name:"subject",label:t==="ar"?"الموضوع":"Subject",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال الموضوع":"Please enter subject"}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"category",label:t==="ar"?"الفئة":"Category",children:s.jsxs(q,{children:[s.jsx(Rs,{value:"technical",children:t==="ar"?"تقني":"Technical"}),s.jsx(Rs,{value:"billing",children:t==="ar"?"مالي":"Billing"}),s.jsx(Rs,{value:"general",children:t==="ar"?"عام":"General"})]})}),s.jsx(E.Item,{name:"priority",label:t==="ar"?"الأولوية":"Priority",initialValue:"MEDIUM",children:s.jsxs(q,{children:[s.jsx(Rs,{value:"LOW",children:t==="ar"?"منخفضة":"Low"}),s.jsx(Rs,{value:"MEDIUM",children:t==="ar"?"متوسطة":"Medium"}),s.jsx(Rs,{value:"HIGH",children:t==="ar"?"عالية":"High"}),s.jsx(Rs,{value:"URGENT",children:t==="ar"?"عاجلة":"Urgent"})]})}),s.jsx(E.Item,{name:"description",label:t==="ar"?"الوصف":"Description",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال الوصف":"Please enter description"}],children:s.jsx($j,{rows:6})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"إنشاء التذكرة":"Create Ticket"})})]})}),s.jsx(He,{title:t==="ar"?"تفاصيل التذكرة":"Ticket Details",open:l,onCancel:()=>{c(!1),d(null)},footer:null,width:800,className:"modern-modal",children:u&&s.jsxs("div",{children:[s.jsxs(ve,{bordered:!0,column:2,children:[s.jsx(ve.Item,{label:t==="ar"?"رقم التذكرة":"Ticket Number",children:u.ticketNumber}),s.jsx(ve.Item,{label:t==="ar"?"الحالة":"Status",children:s.jsx(le,{color:v(u.status),children:u.status})}),s.jsx(ve.Item,{label:t==="ar"?"الأولوية":"Priority",children:s.jsx(le,{color:w(u.priority),children:u.priority})}),s.jsx(ve.Item,{label:t==="ar"?"الفئة":"Category",children:u.category||"-"}),s.jsx(ve.Item,{label:t==="ar"?"الموضوع":"Subject",span:2,children:u.subject}),s.jsx(ve.Item,{label:t==="ar"?"الوصف":"Description",span:2,children:u.description})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:t==="ar"?"التعليقات":"Comments"}),s.jsx(P,{type:"primary",icon:s.jsx(Ut,{}),onClick:()=>h(!0),children:t==="ar"?"إضافة تعليق":"Add Comment"})]}),s.jsx(sb,{items:u.comments?.map(b=>({key:b.id,children:s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"font-semibold",children:b.user?.email}),s.jsx("span",{className:"text-gray-500 text-sm",children:de(b.createdAt).format("YYYY-MM-DD HH:mm")})]}),s.jsx("p",{children:b.comment||b.content})]})}))||[]}),(!u.comments||u.comments.length===0)&&s.jsx(Bt,{description:t==="ar"?"لا توجد تعليقات":"No comments"})]})]})}),s.jsx(He,{title:t==="ar"?"إضافة تعليق":"Add Comment",open:f,onCancel:()=>{h(!1),g.resetFields()},footer:null,className:"modern-modal",children:s.jsxs(E,{form:g,layout:"vertical",onFinish:y,children:[s.jsx(E.Item,{name:"content",label:t==="ar"?"التعليق":"Comment",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال التعليق":"Please enter comment"}],children:s.jsx($j,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"إضافة التعليق":"Add Comment"})})]})})]})},{Text:J_,Paragraph:X_}=su,Q_=()=>{const{language:t}=je(),[e]=fI(),r=e.get("bookingId"),[n,a]=A.useState([]),[i,o]=A.useState(!0),[l,c]=A.useState(!1),[u,d]=A.useState(null);A.useEffect(()=>{f()},[r]);const f=async()=>{try{o(!0);const g={};r&&(g.bookingId=r);const x=await ld.getReports(g);a(x.reports||[])}catch(g){console.error("Error fetching reports:",g),_.error(t==="ar"?"فشل تحميل التقارير":"Failed to load reports")}finally{o(!1)}},h=(g,x)=>{if(!g){_.warning(t==="ar"?"الملف غير متوفر":"File not available");return}const m=document.createElement("a");m.href=g,m.download=x||"report.pdf",m.target="_blank",document.body.appendChild(m),m.click(),document.body.removeChild(m),_.success(t==="ar"?"جاري تحميل الملف...":"Downloading file...")},p=[{title:t==="ar"?"عنوان التقرير":"Report Title",dataIndex:"title",key:"title",render:g=>s.jsx(J_,{strong:!0,children:g})},{title:t==="ar"?"نوع التقرير":"Report Type",dataIndex:"reportType",key:"reportType",render:g=>{const x={FEASIBILITY_STUDY:t==="ar"?"دراسة جدوى":"Feasibility Study",ECONOMIC_ANALYSIS:t==="ar"?"تحليل اقتصادي":"Economic Analysis",FINANCIAL_REPORT:t==="ar"?"تقرير مالي":"Financial Report",CONSULTATION_SUMMARY:t==="ar"?"ملخص استشارة":"Consultation Summary"};return s.jsx(le,{color:"blue",children:x[g]||g})}},{title:t==="ar"?"المستشار":"Consultant",key:"consultant",render:(g,x)=>x.consultant?`${x.consultant.firstName||""} ${x.consultant.lastName||""}`.trim():x.booking?.consultant?`${x.booking.consultant.firstName||""} ${x.booking.consultant.lastName||""}`.trim():"-"},{title:t==="ar"?"تاريخ الرفع":"Upload Date",dataIndex:"createdAt",key:"createdAt",render:g=>de(g).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:g=>{const x={DRAFT:"default",UNDER_REVIEW:"processing",APPROVED:"success",REJECTED:"error",COMPLETED:"success"},m={DRAFT:t==="ar"?"مسودة":"Draft",UNDER_REVIEW:t==="ar"?"قيد المراجعة":"Under Review",APPROVED:t==="ar"?"موافق عليه":"Approved",REJECTED:t==="ar"?"مرفوض":"Rejected",COMPLETED:t==="ar"?"مكتمل":"Completed"};return s.jsx(le,{color:x[g]||"default",icon:g==="APPROVED"||g==="COMPLETED"?s.jsx(vt,{}):g==="UNDER_REVIEW"?s.jsx(Cn,{}):s.jsx(uc,{}),children:m[g]||g})}},{title:t==="ar"?"الإجراءات":"Actions",key:"actions",render:(g,x)=>s.jsxs(fe,{children:[s.jsx(P,{icon:s.jsx(ur,{}),onClick:()=>{d(x),c(!0)},children:t==="ar"?"معاينة":"Preview"}),(x.status==="APPROVED"||x.status==="COMPLETED")&&s.jsxs(s.Fragment,{children:[x.pdfUrl&&s.jsx(P,{type:"primary",icon:s.jsx(Rr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>h(x.pdfUrl,`${x.title||"report"}.pdf`),children:t==="ar"?"تحميل PDF":"Download PDF"}),x.wordUrl&&s.jsx(P,{icon:s.jsx(Rr,{}),onClick:()=>h(x.wordUrl,`${x.title||"report"}.docx`),children:t==="ar"?"تحميل Word":"Download Word"})]})]})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?"التقارير":"Reports"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"عرض وتحميل التقارير المرفوعة من المستشارين":"View and download reports uploaded by consultants"})]})}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:p,dataSource:n,rowKey:"id",loading:i,pagination:{pageSize:10},locale:{emptyText:t==="ar"?"لا توجد تقارير متاحة":"No reports available"}})}),s.jsx(He,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ct,{className:"text-olive-green-600"}),s.jsx("span",{children:t==="ar"?"تفاصيل التقرير":"Report Details"})]}),open:l,onCancel:()=>{c(!1),d(null)},footer:(()=>{const g=[s.jsx(P,{onClick:()=>{c(!1),d(null)},children:t==="ar"?"إغلاق":"Close"},"close")];return u&&(u.status==="APPROVED"||u.status==="COMPLETED")&&(u.pdfUrl&&g.push(s.jsx(P,{type:"primary",icon:s.jsx(Rr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>h(u.pdfUrl,`${u.title||"report"}.pdf`),children:t==="ar"?"تحميل PDF":"Download PDF"},"pdf")),u.wordUrl&&g.push(s.jsx(P,{icon:s.jsx(Rr,{}),onClick:()=>h(u.wordUrl,`${u.title||"report"}.docx`),children:t==="ar"?"تحميل Word":"Download Word"},"word"))),g})(),width:800,children:u&&s.jsxs(ve,{column:1,bordered:!0,children:[s.jsx(ve.Item,{label:t==="ar"?"العنوان":"Title",children:u.title}),s.jsx(ve.Item,{label:t==="ar"?"نوع التقرير":"Report Type",children:s.jsx(le,{color:"blue",children:u.reportType==="FEASIBILITY_STUDY"?t==="ar"?"دراسة جدوى":"Feasibility Study":u.reportType==="ECONOMIC_ANALYSIS"?t==="ar"?"تحليل اقتصادي":"Economic Analysis":u.reportType==="FINANCIAL_REPORT"?t==="ar"?"تقرير مالي":"Financial Report":t==="ar"?"ملخص استشارة":"Consultation Summary"})}),s.jsx(ve.Item,{label:t==="ar"?"المستشار":"Consultant",children:u.consultant?`${u.consultant.firstName||""} ${u.consultant.lastName||""}`.trim():u.booking?.consultant?`${u.booking.consultant.firstName||""} ${u.booking.consultant.lastName||""}`.trim():"-"}),s.jsx(ve.Item,{label:t==="ar"?"الحالة":"Status",children:s.jsx(le,{color:u.status==="APPROVED"||u.status==="COMPLETED"?"success":u.status==="UNDER_REVIEW"?"processing":u.status==="REJECTED"?"error":"default",children:u.status==="APPROVED"?t==="ar"?"موافق عليه":"Approved":u.status==="COMPLETED"?t==="ar"?"مكتمل":"Completed":u.status==="UNDER_REVIEW"?t==="ar"?"قيد المراجعة":"Under Review":u.status==="REJECTED"?t==="ar"?"مرفوض":"Rejected":t==="ar"?"مسودة":"Draft"})}),u.summary&&s.jsx(ve.Item,{label:t==="ar"?"ملخص":"Summary",children:s.jsx(X_,{children:u.summary})}),s.jsx(ve.Item,{label:t==="ar"?"تاريخ الرفع":"Upload Date",children:de(u.createdAt).format("YYYY-MM-DD HH:mm")}),u.updatedAt&&s.jsx(ve.Item,{label:t==="ar"?"آخر تحديث":"Last Updated",children:de(u.updatedAt).format("YYYY-MM-DD HH:mm")})]})})]})},Z_=()=>s.jsx(B_,{children:s.jsxs(th,{children:[s.jsx(Se,{path:"/",element:s.jsx(q_,{})}),s.jsx(Se,{path:"/bookings",element:s.jsx(V_,{})}),s.jsx(Se,{path:"/consultations",element:s.jsx(H_,{})}),s.jsx(Se,{path:"/chat",element:s.jsx(ju,{})}),s.jsx(Se,{path:"/chat/session/:sessionId",element:s.jsx(ju,{})}),s.jsx(Se,{path:"/sessions/:sessionId",element:s.jsx(ju,{})}),s.jsx(Se,{path:"/chat/:id",element:s.jsx(ju,{})}),s.jsx(Se,{path:"/reports",element:s.jsx(Q_,{})}),s.jsx(Se,{path:"/support",element:s.jsx(K_,{})}),s.jsx(Se,{path:"/profile",element:s.jsx(Y_,{})}),s.jsx(Se,{path:"*",element:s.jsx(Dn,{to:"/client",replace:!0})})]})}),{Header:eD,Sider:tD,Content:rD}=Qe,nD=({children:t})=>{const{t:e,language:r,toggleLanguage:n}=je(),{user:a,logout:i}=pr(),{settings:o}=Fa(),l=nt(),c=wi(),[u,d]=A.useState(!1),[f,h]=A.useState(!1),p=r==="ar";A.useEffect(()=>{const w=document.querySelector(".consultant-content");w&&(w.classList.add("fade-in"),setTimeout(()=>{w.classList.remove("fade-in")},500))},[c.pathname]);const g=()=>{i(),l("/login",{replace:!0})},x=[{key:"/consultant",icon:s.jsx(ih,{}),label:r==="ar"?"الرئيسية":"Home"},{key:"/consultant/bookings",icon:s.jsx(Dt,{}),label:r==="ar"?"الحجوزات":"Bookings"},{key:"/consultant/sessions",icon:s.jsx(Dt,{}),label:r==="ar"?"الجلسات":"Sessions"},{key:"/consultant/chat",icon:s.jsx(Ut,{}),label:r==="ar"?"الرسائل":"Messages"},{key:"/consultant/reports",icon:s.jsx(Ct,{}),label:r==="ar"?"التقارير":"Reports"},{key:"/consultant/profile",icon:s.jsx(ke,{}),label:r==="ar"?"الملف الشخصي":"Profile"},{key:"/consultant/earnings",icon:s.jsx(tr,{}),label:r==="ar"?"الأرباح":"Earnings"},{key:"/consultant/support",icon:s.jsx(Ct,{}),label:r==="ar"?"الدعم الفني":"Support"}],m=[{key:"profile",icon:s.jsx(ke,{}),label:r==="ar"?"الملف الشخصي":"Profile",onClick:({domEvent:w})=>{w&&(w.stopPropagation(),w.preventDefault()),setTimeout(()=>{h(!1),l("/consultant/profile")},100)}},{key:"settings",icon:s.jsx(co,{}),label:r==="ar"?"الإعدادات":"Settings",onClick:({domEvent:w})=>{w&&(w.stopPropagation(),w.preventDefault()),setTimeout(()=>{h(!1),l("/consultant/profile")},100)}},{type:"divider"},{key:"logout",icon:s.jsx(lb,{}),label:r==="ar"?"تسجيل الخروج":"Logout",onClick:({domEvent:w})=>{w&&(w.stopPropagation(),w.preventDefault()),setTimeout(()=>{h(!1),g()},100)}}],y={overflow:"auto",height:"100vh",position:"fixed",top:0,bottom:0,[p?"right":"left"]:0,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",zIndex:1e3},v={transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",[p?"marginRight":"marginLeft"]:u?80:250};return s.jsxs(Qe,{className:"min-h-screen",children:[s.jsxs(tD,{trigger:null,collapsible:!0,collapsed:u,width:250,className:"consultant-sidebar bg-gradient-to-b from-white to-gray-50 shadow-2xl border-r border-gray-200",style:y,children:[s.jsx("div",{className:"p-6 flex items-center justify-between border-b border-gray-200",children:s.jsxs("div",{className:`flex items-center gap-3 transition-all duration-300 ${u?"justify-center w-full":""}`,children:[o.logo?s.jsx("img",{src:o.logo,alt:"Logo",className:`${u?"w-12 h-12":"h-10"} object-contain cursor-pointer transition-all duration-300`,onClick:()=>l("/consultant")}):s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-olive-green-600 via-olive-green-500 to-turquoise-500 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300 cursor-pointer",style:{backgroundColor:o.primaryColor},onClick:()=>l("/consultant"),children:s.jsx("span",{className:"text-white font-bold text-xl",children:r==="ar"?o.dashboardNameAr?.[0]||"ج":o.dashboardName?.[0]||"J"})}),!u&&s.jsxs("div",{className:"animate-fade-in cursor-pointer",onClick:()=>l("/consultant"),children:[s.jsx("div",{className:"text-base font-bold text-olive-green-700",style:{color:o.primaryColor},children:o.dashboardName||"Jadwa"}),s.jsx("div",{className:"text-xs text-gray-500",children:o.dashboardNameAr||"جدوى"})]})]})}),s.jsx(lc,{mode:"inline",selectedKeys:[c.pathname],items:x,onClick:({key:w})=>l(w),className:"border-0 mt-4 px-2",style:{background:"transparent"}}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 px-4",children:s.jsx(P,{type:"text",icon:u?p?s.jsx(no,{}):s.jsx(ao,{}):p?s.jsx(ao,{}):s.jsx(no,{}),onClick:()=>d(!u),className:"w-full hover:bg-olive-green-50 text-olive-green-600 border border-olive-green-200 rounded-lg transition-all duration-300",children:!u&&s.jsx("span",{className:"ml-2",children:r==="ar"?"طي":"Collapse"})})})]}),s.jsxs(Qe,{style:v,className:"transition-all duration-300",children:[s.jsxs(eD,{className:"bg-white shadow-md px-3 md:px-6 flex items-center justify-between fixed top-0 z-[1001] backdrop-blur-sm bg-white/95",style:{position:"fixed",width:`calc(100% - ${u?80:250}px)`,[p?"right":"left"]:u?80:250,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)"},children:[s.jsx(P,{type:"text",icon:s.jsx(oh,{}),onClick:()=>d(!u),className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300",style:{pointerEvents:"auto"}}),s.jsxs("div",{className:"flex items-center gap-2 md:gap-4",style:{pointerEvents:"auto",position:"relative",zIndex:1002},children:[s.jsx(P,{type:"text",icon:s.jsx(na,{}),onClick:n,className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300 font-semibold",title:r==="ar"?"Switch to English":"التبديل إلى العربية",style:{pointerEvents:"auto"},children:r==="ar"?"EN":"AR"}),s.jsx(fb,{userId:a?.id}),s.jsx(nh,{menu:{items:m},placement:p?"bottomLeft":"bottomRight",trigger:["click"],open:f,destroyTooltipOnHide:!1,transitionName:"",getPopupContainer:()=>document.body,popupRender:w=>s.jsx("div",{onMouseDown:N=>{N.stopPropagation(),N.preventDefault()},onClick:N=>{N.stopPropagation()},children:w}),onOpenChange:w=>{w!==f&&h(w)},children:s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-3 py-2 rounded-lg group",children:[s.jsx(at,{src:a?.avatar||a?.consultant?.profilePicture,icon:s.jsx(ke,{}),className:"ring-2 ring-olive-green-200 group-hover:ring-olive-green-400 transition-all duration-300"}),s.jsx("span",{className:"hidden md:inline font-medium text-gray-700",children:a?.consultant?`${a.consultant.firstName} ${a.consultant.lastName}`:a?.email})]})})]})]}),s.jsx(rD,{className:"p-3 md:p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen consultant-content",style:{marginTop:"64px"},children:s.jsx("div",{className:"animate-fade-in",children:t})})]})]})},aD=()=>{const{language:t}=je(),{user:e}=pr(),r=nt(),[n,a]=A.useState(!0),[i,o]=A.useState(null),[l,c]=A.useState({totalSessions:0,pendingSessions:0,completedSessions:0,totalEarnings:0,rating:0,totalRatings:0}),[u,d]=A.useState([]),[f,h]=A.useState([]);A.useEffect(()=>{p()},[]);const p=async()=>{try{a(!0),o(null);const m=await Ra.getDashboardStats();c(m.stats),d(m.upcomingSessions||[]),h(m.recentSessions||[])}catch(m){console.error("Error fetching dashboard data:",m),o(m.message||"Failed to load dashboard data")}finally{a(!1)}},g=({title:m,value:y,icon:v,color:w,suffix:N="",subtitle:b=null,delay:S=0})=>s.jsxs(V,{className:"modern-kpi-card card-hover shadow-professional-lg relative overflow-hidden h-full border-0",style:{animationDelay:`${S}s`},styles:{body:{padding:"20px"}},children:[s.jsx("div",{className:`absolute -top-8 -right-8 w-32 h-32 rounded-full ${w} opacity-5 blur-2xl`}),s.jsx("div",{className:`absolute -bottom-6 -left-6 w-24 h-24 rounded-full ${w} opacity-5 blur-xl`}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsx("div",{className:`p-3 rounded-2xl ${w} bg-opacity-10 shadow-sm`,children:s.jsx("div",{className:"text-2xl sm:text-3xl",children:v})})}),s.jsx(Be,{title:s.jsx("span",{className:"text-gray-600 font-semibold text-xs sm:text-sm uppercase tracking-wide",children:m}),value:y,suffix:N,valueStyle:{color:w.includes("teal")?"#14b8a6":w.includes("olive")?"#7a8c66":w.includes("yellow")?"#faad14":w.includes("green")?"#52c41a":"#1890ff",fontWeight:800,fontSize:"clamp(20px, 4vw, 28px)",lineHeight:1.2}}),b&&s.jsx("div",{className:"mt-3 text-xs text-gray-500 font-medium",children:b})]})]});if(n)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})});if(i)return s.jsx(Gt,{message:t==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:i,type:"error",showIcon:!0,closable:!0,onClose:()=>o(null)});const x=e?.consultant?`${e.consultant.firstName||""} ${e.consultant.lastName||""}`.trim():e?.email||(t==="ar"?"المستشار":"Consultant");return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 md:mb-10 relative z-10 px-2 sm:px-0",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?`مرحباً، ${x}`:`Welcome, ${x}`}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"نظرة عامة على أدائك":"Overview of your performance"})]}),s.jsx("div",{className:"text-sm sm:text-base text-gray-700 glass-card px-4 py-3 rounded-xl shadow-professional whitespace-nowrap font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Dt,{className:"text-olive-green-600"}),new Date().toLocaleDateString(t==="ar"?"ar-SA":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]}),s.jsxs(ie,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx($,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(g,{title:t==="ar"?"إجمالي الجلسات":"Total Sessions",value:l.totalSessions,icon:s.jsx(Dt,{className:"text-xl sm:text-2xl text-teal-500"}),color:"bg-teal-500",delay:.1})}),s.jsx($,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(g,{title:t==="ar"?"الجلسات المعلقة":"Pending Sessions",value:l.pendingSessions,icon:s.jsx(Cn,{className:"text-xl sm:text-2xl text-orange-500"}),color:"bg-orange-500",delay:.2})}),s.jsx($,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(g,{title:t==="ar"?"التقييم":"Rating",value:l.rating,precision:1,icon:s.jsx(uo,{className:"text-xl sm:text-2xl text-yellow-500"}),color:"bg-yellow-500",suffix:"/ 5",subtitle:t==="ar"?`${l.totalRatings} تقييمات`:`${l.totalRatings} ratings`,delay:.3})}),s.jsx($,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(g,{title:t==="ar"?"إجمالي الأرباح":"Total Earnings",value:l.totalEarnings,icon:s.jsx(tr,{className:"text-xl sm:text-2xl text-olive-green-600"}),color:"bg-olive-green-600",suffix:t==="ar"?" ريال":" SAR",delay:.4})})]}),s.jsxs(ie,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx($,{xs:24,sm:24,md:24,lg:12,xl:12,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-olive-green-500 to-olive-green-600",children:s.jsx(Dt,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t==="ar"?"الجلسات القادمة":"Upcoming Sessions"})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0 h-full",style:{animationDelay:"0.2s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},extra:u.length>0&&s.jsxs(P,{type:"link",onClick:()=>r("/consultant/sessions"),className:"text-olive-green-600 text-xs sm:text-sm p-0",children:[t==="ar"?"عرض الكل":"View All"," ",s.jsx(cd,{})]}),children:u.length>0?s.jsx(ft,{itemLayout:"horizontal",dataSource:u,renderItem:m=>s.jsx(ft.Item,{className:"hover:bg-gray-50 rounded-lg p-2 sm:p-3 transition-colors",actions:[s.jsx(P,{type:"primary",size:"small",icon:s.jsx(Zn,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 text-xs sm:text-sm",onClick:()=>r(`/consultant/chat/${m.bookingId||m.id}`),children:t==="ar"?"بدء":"Start"})],children:s.jsx(ft.Item.Meta,{avatar:s.jsx(at,{src:m.client?.user?.avatar,icon:s.jsx(ke,{}),size:{xs:40,sm:48}}),title:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 flex-wrap",children:[s.jsxs("span",{className:"font-semibold text-sm sm:text-base",children:[m.client?.firstName," ",m.client?.lastName]}),s.jsx(le,{color:"blue",className:"text-xs",children:de(m.scheduledAt).format("MMM DD, YYYY")})]}),description:s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-600 text-xs sm:text-sm",children:m.service?.title||m.service?.titleAr||"Consultation"}),m.selectedTimeSlot&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.jsx(Cn,{})," ",m.selectedTimeSlot]})]})})})}):s.jsx(Bt,{description:t==="ar"?"لا توجد جلسات قادمة":"No upcoming sessions",image:Bt.PRESENTED_IMAGE_SIMPLE,className:"py-8"})})}),s.jsx($,{xs:24,sm:24,md:24,lg:12,xl:12,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-yellow-500 to-yellow-600",children:s.jsx(dc,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t==="ar"?"الجلسات الأخيرة":"Recent Sessions"})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0 h-full",style:{animationDelay:"0.3s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},extra:f.length>0&&s.jsxs(P,{type:"link",onClick:()=>r("/consultant/sessions"),className:"text-olive-green-600 text-xs sm:text-sm p-0",children:[t==="ar"?"عرض الكل":"View All"," ",s.jsx(cd,{})]}),children:f.length>0?s.jsx(ft,{dataSource:f,renderItem:m=>s.jsx(ft.Item,{className:"hover:bg-gray-50 rounded-lg p-2 sm:p-3 transition-colors",children:s.jsx(ft.Item.Meta,{avatar:s.jsx(at,{src:m.client?.user?.avatar,icon:s.jsx(ke,{}),size:{xs:40,sm:48}}),title:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 flex-wrap",children:[s.jsxs("span",{className:"font-semibold text-sm sm:text-base",children:[m.client?.firstName," ",m.client?.lastName]}),s.jsx(le,{color:m.status==="COMPLETED"?"green":m.status==="IN_PROGRESS"?"blue":"orange",className:"text-xs",children:m.status==="COMPLETED"?t==="ar"?"مكتملة":"Completed":m.status==="IN_PROGRESS"?t==="ar"?"قيد التنفيذ":"In Progress":m.status})]}),description:s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-600 text-xs sm:text-sm",children:m.service?.title||m.service?.titleAr||"Consultation"}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.jsx(Cn,{})," ",de(m.createdAt).format("MMM DD, YYYY")]})]})})})}):s.jsx(Bt,{description:t==="ar"?"لا توجد جلسات حديثة":"No recent sessions",image:Bt.PRESENTED_IMAGE_SIMPLE,className:"py-8"})})})]})]})},{TextArea:Dse}=z,sD=()=>{const{t,language:e}=je(),r=nt(),[n,a]=A.useState([]),[i,o]=A.useState([]),[l,c]=A.useState(!0),[u,d]=A.useState("all");A.useEffect(()=>{f()},[]);const f=async()=>{try{c(!0);const w=(await Ir.getBookings()).bookings.filter(N=>["CONFIRMED","COMPLETED"].includes(N.status)).map(N=>{const b=N.session||{};return{id:N.id,bookingId:N.id,client:N.client?`${N.client.firstName} ${N.client.lastName}`:e==="ar"?"غير متوفر":"N/A",type:N.service?e==="ar"?N.service.titleAr:N.service.title:e==="ar"?"غير محدد":"Not specified",date:N.scheduledAt?de(N.scheduledAt).format("YYYY-MM-DD"):"-",time:N.scheduledAt?de(N.scheduledAt).format("HH:mm"):"-",duration:N.duration||60,status:b.status||N.status?.toLowerCase()||"upcoming",sessionId:b.id}});o(w),h(w,u)}catch(y){console.error("Error fetching sessions:",y),_.error(e==="ar"?"فشل تحميل الجلسات":"Failed to load sessions")}finally{c(!1)}},h=(y,v)=>{let w=y;v==="pending"?w=y.filter(N=>N.status==="confirmed"||N.status==="scheduled"||N.status==="upcoming"):v==="in_progress"?w=y.filter(N=>N.status==="in_progress"):v==="completed"&&(w=y.filter(N=>N.status==="completed")),a(w)},p=y=>{d(y),h(i,y)},g=async y=>{try{const v=await Tt.generateVideoRoom(y);await Tt.startSession(y,v.room?.roomId),_.success(e==="ar"?"تم بدء الجلسة بنجاح":"Session started successfully"),f(),r(`/consultant/chat/${y}`)}catch(v){_.error(v.message||(e==="ar"?"فشل بدء الجلسة":"Failed to start session"))}},x=[{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client"},{title:e==="ar"?"النوع":"Type",dataIndex:"type",key:"type"},{title:e==="ar"?"التاريخ والوقت":"Date & Time",key:"datetime",render:(y,v)=>`${v.date} - ${v.time}`},{title:e==="ar"?"المدة":"Duration",dataIndex:"duration",key:"duration",render:y=>`${y} ${e==="ar"?"دقيقة":"min"}`},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:y=>{const v={upcoming:"blue",in_progress:"green",completed:"green",cancelled:"red",scheduled:"blue",confirmed:"blue"},w={upcoming:e==="ar"?"قادمة":"Upcoming",in_progress:e==="ar"?"قيد التنفيذ":"In Progress",completed:e==="ar"?"مكتملة":"Completed",cancelled:e==="ar"?"ملغية":"Cancelled",scheduled:e==="ar"?"مجدولة":"Scheduled",confirmed:e==="ar"?"مؤكدة":"Confirmed"};return s.jsx(le,{color:v[y]||"default",children:w[y]||y})}},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(y,v)=>s.jsxs(fe,{children:[(v.status==="upcoming"||v.status==="scheduled"||v.status==="confirmed")&&s.jsx(P,{type:"primary",icon:s.jsx(Zn,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>g(v.bookingId),children:e==="ar"?"بدء الجلسة":"Start Session"}),v.status==="in_progress"&&s.jsx(P,{icon:s.jsx(Ut,{}),onClick:()=>r(`/consultant/chat/${v.bookingId}`),children:e==="ar"?"فتح المحادثة":"Open Chat"}),s.jsx(P,{icon:s.jsx(ir,{}),onClick:()=>r(`/consultant/reports?bookingId=${v.bookingId}`),children:e==="ar"?"رفع تقرير":"Upload Report"})]})}],m=[{key:"all",label:e==="ar"?"الكل":"All",icon:s.jsx(Ct,{})},{key:"pending",label:e==="ar"?"الطلبات الواردة":"Incoming Requests",icon:s.jsx(gM,{})},{key:"in_progress",label:e==="ar"?"قيد التنفيذ":"In Progress",icon:s.jsx(Zn,{})},{key:"completed",label:e==="ar"?"مكتملة":"Completed",icon:s.jsx(vt,{})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"mb-8 relative z-10",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الجلسات":"Sessions"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع جلساتك":"Manage all your sessions"})]}),s.jsxs(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:[s.jsx(vs,{activeKey:u,onChange:p,items:m,className:"mb-4"}),s.jsx(rt,{columns:x,dataSource:n,rowKey:"id",loading:l,pagination:{pageSize:10,showSizeChanger:!0,showTotal:y=>e==="ar"?`إجمالي ${y} جلسة`:`Total ${y} sessions`}})]})]})},{authAPI:wu,consultantAPI:iD,filesAPI:Lj}=_a,{TextArea:wl}=z,{Option:jp}=q,oD=()=>{const{t,language:e}=je(),{theme:r}=Fa(),{user:n}=pr(),[a]=E.useForm(),[i,o]=A.useState(!1),[l,c]=A.useState(null),[u,d]=A.useState(!1);A.useEffect(()=>{f()},[]);const f=async()=>{try{o(!0);const m=await wu.getProfile();if(console.log("Profile response:",m),m.user&&(c(m.user),m.user.consultant)){const y=m.user.consultant;a.setFieldsValue({firstName:y.firstName||"",lastName:y.lastName||"",email:m.user.email||"",phone:m.user.phone||"",academicDegree:y.academicDegree||"",specialization:y.specialization||"",bio:y.bio||"",expertiseFields:y.expertiseFields?typeof y.expertiseFields=="string"?y.expertiseFields:JSON.parse(y.expertiseFields).join(", "):"",city:y.city||"",country:y.country||"Saudi Arabia",address:y.address||"",postalCode:y.postalCode||"",yearsOfExperience:y.yearsOfExperience||0,languages:y.languages?typeof y.languages=="string"?y.languages:JSON.parse(y.languages).join(", "):"",certifications:y.certifications?typeof y.certifications=="string"?y.certifications:JSON.parse(y.certifications).join(", "):"",education:y.education?typeof y.education=="string"?y.education:JSON.parse(y.education).join(", "):"",website:y.website||"",linkedin:y.linkedin||"",twitter:y.twitter||"",pricePerSession:y.pricePerSession||0,dateOfBirth:y.dateOfBirth?de(y.dateOfBirth):null,gender:y.gender||"",isAvailable:y.isAvailable!==void 0?y.isAvailable:!0})}}catch(m){console.error("Error fetching profile:",m),_.error(m.message||(e==="ar"?"فشل تحميل الملف الشخصي":"Failed to load profile"))}finally{o(!1)}},h=async m=>{const y=Lj||_a?.filesAPI;if(!y)return console.error("filesAPI is not defined",{filesAPI:Lj,apiService:_a}),_.error(e==="ar"?"خطأ في تحميل API":"API loading error"),!1;const v=new FormData;v.append("file",m),v.append("ownerType","USER"),v.append("ownerId",n?.id||"");try{o(!0);const w=await y.uploadFile(v);w.file?.fileUrl&&(await wu.updateProfile({avatar:w.file.fileUrl}),_.success(e==="ar"?"تم رفع الصورة بنجاح":"Profile picture uploaded successfully"),c(N=>({...N,avatar:w.file.fileUrl})),await f())}catch(w){_.error(w.message||(e==="ar"?"فشل رفع الصورة":"Failed to upload profile picture"))}finally{o(!1)}return!1},p=async m=>{try{o(!0);const y={...m,dateOfBirth:m.dateOfBirth?m.dateOfBirth.toISOString():null,expertiseFields:m.expertiseFields?JSON.stringify(m.expertiseFields.split(",").map(v=>v.trim())):"[]",languages:m.languages?JSON.stringify(m.languages.split(",").map(v=>v.trim())):"[]",certifications:m.certifications?JSON.stringify(m.certifications.split(",").map(v=>v.trim())):"[]",education:m.education?JSON.stringify(m.education.split(",").map(v=>v.trim())):"[]"};m.email&&m.email!==l?.email&&await wu.updateEmail(m.email),await iD.updateProfile(y),_.success(e==="ar"?"تم حفظ التغييرات بنجاح":"Profile updated successfully"),d(!1),f()}catch(y){_.error(y.message||(e==="ar"?"فشل حفظ التغييرات":"Failed to save changes"))}finally{o(!1)}},g=async m=>{try{o(!0),await wu.changePassword(m.currentPassword,m.newPassword),_.success(e==="ar"?"تم تغيير كلمة المرور بنجاح":"Password changed successfully"),a.setFieldsValue({currentPassword:"",newPassword:"",confirmPassword:""})}catch(y){_.error(y.message||(e==="ar"?"فشل تغيير كلمة المرور":"Failed to change password"))}finally{o(!1)}},x=l?.consultant?{totalSessions:0,completedSessions:0,totalEarnings:l.consultant.totalEarnings||0,rating:l.consultant.rating||0,totalRatings:l.consultant.totalRatings||0}:null;return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 relative z-10",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الملف الشخصي":"Profile Settings"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة معلوماتك الشخصية والمهنية":"Manage your personal and professional information"})]}),s.jsxs(ie,{gutter:[24,24],children:[s.jsx($,{xs:24,md:8,children:s.jsxs(V,{className:"glass-card text-center shadow-professional-xl rounded-2xl border-0",children:[s.jsx(Pt,{showUploadList:!1,beforeUpload:h,accept:"image/*",children:s.jsxs("div",{className:"relative inline-block mb-4",children:[s.jsx(at,{size:140,src:l?.avatar||n?.avatar||l?.consultant?.profilePicture,icon:s.jsx(ke,{}),className:"ring-4 ring-olive-green-200"}),s.jsx(P,{type:"primary",shape:"circle",icon:s.jsx(ah,{}),className:"absolute bottom-0 right-0 shadow-lg",size:"small",style:{backgroundColor:"#7a8c66"}})]})}),s.jsx("h2",{className:`text-2xl font-bold mb-2 ${r==="dark"?"text-white":"text-gray-900"}`,children:l?.consultant?`${l.consultant.firstName} ${l.consultant.lastName}`:n?.email}),s.jsxs("div",{className:"mb-3",children:[s.jsx(le,{color:"green",className:"mb-2",children:e==="ar"?"مستشار":"Consultant"}),l?.consultant?.isVerified&&s.jsx(le,{color:"blue",icon:s.jsx(OC,{}),children:e==="ar"?"موثق":"Verified"})]}),x&&s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsx(Mt,{className:"my-4"}),s.jsxs("div",{className:"text-center mb-4",children:[s.jsx(ra,{disabled:!0,value:x.rating,allowHalf:!0,className:"text-2xl"}),s.jsxs("div",{className:`mt-2 ${r==="dark"?"text-gray-400":"text-gray-600"}`,children:[x.rating.toFixed(1)," (",x.totalRatings," ",e==="ar"?"تقييم":"ratings",")"]})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{span:12,children:s.jsx(Be,{title:e==="ar"?"الجلسات":"Sessions",value:x.totalSessions,valueStyle:{fontSize:"18px",color:r==="dark"?"#fff":"#7a8c66"}})}),s.jsx($,{span:12,children:s.jsx(Be,{title:e==="ar"?"مكتملة":"Completed",value:x.completedSessions,valueStyle:{fontSize:"18px",color:r==="dark"?"#fff":"#14b8a6"}})})]}),s.jsx(Mt,{className:"my-4"}),s.jsx(Be,{title:e==="ar"?"إجمالي الأرباح":"Total Earnings",value:x.totalEarnings,prefix:"SAR",valueStyle:{fontSize:"20px",color:r==="dark"?"#fff":"#7a8c66",fontWeight:"bold"}})]})]})}),s.jsx($,{xs:24,md:16,children:s.jsxs(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:`text-2xl font-bold ${r==="dark"?"text-white":"text-gray-900"}`,children:e==="ar"?"المعلومات الشخصية":"Personal Information"}),s.jsx(P,{icon:u?s.jsx(vt,{}):s.jsx(kr,{}),onClick:()=>d(!u),type:u?"default":"primary",children:u?e==="ar"?"إلغاء":"Cancel":e==="ar"?"تعديل":"Edit"})]}),s.jsxs(E,{form:a,onFinish:p,layout:"vertical",disabled:!u,children:[s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"firstName",label:e==="ar"?"الاسم الأول":"First Name",rules:[{required:!0}],children:s.jsx(z,{size:"large",prefix:s.jsx(ke,{})})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"lastName",label:e==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0}],children:s.jsx(z,{size:"large",prefix:s.jsx(ke,{})})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,type:"email"}],children:s.jsx(z,{size:"large",prefix:s.jsx(an,{}),disabled:!0})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:s.jsx(z,{size:"large",prefix:s.jsx(aa,{})})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:8,children:s.jsx(E.Item,{name:"dateOfBirth",label:e==="ar"?"تاريخ الميلاد":"Date of Birth",children:s.jsx(ys,{size:"large",className:"w-full"})})}),s.jsx($,{xs:24,sm:8,children:s.jsx(E.Item,{name:"gender",label:e==="ar"?"الجنس":"Gender",children:s.jsxs(q,{size:"large",children:[s.jsx(jp,{value:"MALE",children:e==="ar"?"ذكر":"Male"}),s.jsx(jp,{value:"FEMALE",children:e==="ar"?"أنثى":"Female"}),s.jsx(jp,{value:"OTHER",children:e==="ar"?"أخرى":"Other"})]})})})]}),s.jsx(Mt,{children:e==="ar"?"المعلومات المهنية":"Professional Information"}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"academicDegree",label:e==="ar"?"الدرجة العلمية":"Academic Degree",rules:[{required:!0}],children:s.jsx(z,{size:"large",prefix:s.jsx(lo,{})})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"specialization",label:e==="ar"?"التخصص":"Specialization",rules:[{required:!0}],children:s.jsx(z,{size:"large"})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"yearsOfExperience",label:e==="ar"?"سنوات الخبرة":"Years of Experience",children:s.jsx(z,{type:"number",size:"large",min:0})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"pricePerSession",label:e==="ar"?"سعر الجلسة (ريال)":"Price Per Session (SAR)",rules:[{required:!0}],children:s.jsx(z,{type:"number",size:"large",prefix:s.jsx(tr,{}),min:0})})})]}),s.jsx(E.Item,{name:"bio",label:e==="ar"?"السيرة الذاتية":"Bio",children:s.jsx(wl,{rows:4,size:"large"})}),s.jsx(E.Item,{name:"expertiseFields",label:e==="ar"?"مجالات الخبرة (مفصولة بفواصل)":"Expertise Fields (comma-separated)",children:s.jsx(wl,{rows:3,size:"large",placeholder:e==="ar"?"مثال: اقتصاد، تحليل مالي، دراسات جدوى":"Example: Economics, Financial Analysis, Feasibility Studies"})}),s.jsx(Mt,{children:e==="ar"?"التعليم والشهادات":"Education & Certifications"}),s.jsx(E.Item,{name:"education",label:e==="ar"?"التعليم (مفصول بفواصل)":"Education (comma-separated)",children:s.jsx(wl,{rows:2,size:"large",placeholder:e==="ar"?"مثال: بكالوريوس اقتصاد، ماجستير إدارة أعمال":"Example: BSc Economics, MBA"})}),s.jsx(E.Item,{name:"certifications",label:e==="ar"?"الشهادات (مفصولة بفواصل)":"Certifications (comma-separated)",children:s.jsx(wl,{rows:2,size:"large",placeholder:e==="ar"?"مثال: شهادة محلل مالي معتمد":"Example: Certified Financial Analyst"})}),s.jsx(E.Item,{name:"languages",label:e==="ar"?"اللغات (مفصولة بفواصل)":"Languages (comma-separated)",children:s.jsx(z,{size:"large",placeholder:e==="ar"?"مثال: العربية، الإنجليزية":"Example: Arabic, English"})}),s.jsx(Mt,{children:e==="ar"?"العنوان":"Address"}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"city",label:e==="ar"?"المدينة":"City",children:s.jsx(z,{size:"large",prefix:s.jsx(sh,{})})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"country",label:e==="ar"?"الدولة":"Country",children:s.jsx(z,{size:"large",prefix:s.jsx(na,{})})})})]}),s.jsx(E.Item,{name:"address",label:e==="ar"?"العنوان الكامل":"Full Address",children:s.jsx(wl,{rows:3,size:"large"})}),s.jsx(E.Item,{name:"postalCode",label:e==="ar"?"الرمز البريدي":"Postal Code",children:s.jsx(z,{size:"large"})}),s.jsx(Mt,{children:e==="ar"?"روابط التواصل":"Social Links"}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"website",label:e==="ar"?"الموقع الإلكتروني":"Website",children:s.jsx(z,{size:"large",prefix:s.jsx(na,{}),placeholder:"https://"})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"linkedin",label:"LinkedIn",children:s.jsx(z,{size:"large",placeholder:"linkedin.com/in/..."})})})]}),s.jsx(E.Item,{name:"twitter",label:"Twitter",children:s.jsx(z,{size:"large",placeholder:"@username"})}),s.jsx(Mt,{children:e==="ar"?"الحالة":"Status"}),s.jsx(E.Item,{name:"isAvailable",label:e==="ar"?"متاح للاستشارات":"Available for Consultations",valuePropName:"checked",children:s.jsx(Nn,{checkedChildren:e==="ar"?"متاح":"Available",unCheckedChildren:e==="ar"?"غير متاح":"Unavailable"})}),u&&s.jsx(E.Item,{className:"mt-6",children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",icon:s.jsx(wa,{}),loading:i,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"حفظ التغييرات":"Save Changes"})})]}),s.jsx(Mt,{children:e==="ar"?"تغيير كلمة المرور":"Change Password"}),s.jsxs(E,{onFinish:g,layout:"vertical",children:[s.jsx(E.Item,{name:"currentPassword",label:e==="ar"?"كلمة المرور الحالية":"Current Password",rules:[{required:!0}],children:s.jsx(z.Password,{size:"large",prefix:s.jsx(Ht,{})})}),s.jsx(E.Item,{name:"newPassword",label:e==="ar"?"كلمة المرور الجديدة":"New Password",rules:[{required:!0,min:8}],children:s.jsx(z.Password,{size:"large",prefix:s.jsx(Ht,{})})}),s.jsx(E.Item,{name:"confirmPassword",label:e==="ar"?"تأكيد كلمة المرور":"Confirm Password",dependencies:["newPassword"],rules:[{required:!0},({getFieldValue:m})=>({validator(y,v){return!v||m("newPassword")===v?Promise.resolve():Promise.reject(new Error(e==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match"))}})],children:s.jsx(z.Password,{size:"large",prefix:s.jsx(Ht,{})})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",loading:i,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"تغيير كلمة المرور":"Change Password"})})]})]})})]})]})]})},lD=()=>{const{t,language:e}=je(),{user:r}=pr(),[n]=E.useForm(),[a,i]=A.useState(!1),[o,l]=A.useState(!1),[c,u]=A.useState([]),[d,f]=A.useState(0),[h,p]=A.useState(0),[g,x]=A.useState(0);A.useEffect(()=>{m()},[]);const m=async()=>{try{i(!0);const w=await Ra.getEarnings();u(w.earnings||[]),f(w.availableBalance||0),p(w.totalEarnings||0),x(w.pendingEarnings||0)}catch(w){console.error("Error fetching earnings:",w),_.error(w.message||(e==="ar"?"فشل تحميل الأرباح":"Failed to load earnings"))}finally{i(!1)}},y=async w=>{try{i(!0),await Ra.requestWithdrawal({amount:w.amount,bankName:w.bankName,accountNumber:w.accountNumber,iban:w.iban}),_.success(e==="ar"?"تم إرسال طلب السحب بنجاح":"Withdrawal request submitted successfully"),l(!1),n.resetFields(),m()}catch(N){_.error(N.message||(e==="ar"?"فشل إرسال طلب السحب":"Failed to submit withdrawal request"))}finally{i(!1)}},v=[{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client"},{title:e==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:w=>`${w} ${e==="ar"?"ريال":"SAR"}`},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:w=>{const N={paid:"green",pending:"orange"},b={paid:e==="ar"?"مدفوع":"Paid",pending:e==="ar"?"قيد الانتظار":"Pending"};return s.jsx(le,{color:N[w],children:b[w]})}}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"mb-8 relative z-10",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الأرباح":"Earnings"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"عرض تفاصيل أرباحك وإحصائياتك المالية":"View your earnings details and financial statistics"})]}),s.jsxs(ie,{gutter:[16,16],className:"mb-8 relative z-10",children:[s.jsx($,{xs:24,sm:8,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"إجمالي الأرباح":"Total Earnings",value:h||0,prefix:s.jsx(tr,{}),suffix:e==="ar"?"ريال":"SAR",valueStyle:{color:"#14b8a6"}})})}),s.jsx($,{xs:24,sm:8,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"المتاح للسحب":"Available for Withdrawal",value:d||0,prefix:s.jsx(vt,{}),suffix:e==="ar"?"ريال":"SAR",valueStyle:{color:"#7a8c66"}})})}),s.jsx($,{xs:24,sm:8,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"قيد الانتظار":"Pending",value:g||0,prefix:s.jsx(Cn,{}),suffix:e==="ar"?"ريال":"SAR",valueStyle:{color:"#faad14"}})})})]}),s.jsx(V,{title:e==="ar"?"سجل الأرباح":"Earnings History",extra:s.jsxs(fe,{children:[s.jsx(P,{icon:s.jsx(Rr,{}),onClick:()=>console.log("Export PDF"),children:e==="ar"?"تصدير PDF":"Export PDF"}),s.jsx(P,{icon:s.jsx(Rr,{}),onClick:()=>console.log("Export Excel"),children:e==="ar"?"تصدير Excel":"Export Excel"}),s.jsx(P,{type:"primary",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>l(!0),disabled:d<=0,children:e==="ar"?"طلب سحب":"Request Payout"})]}),children:s.jsx(rt,{columns:v,dataSource:c,rowKey:"id",loading:a,pagination:{pageSize:10}})}),s.jsx(He,{title:e==="ar"?"طلب سحب":"Request Withdrawal",open:o,onCancel:()=>{l(!1),n.resetFields()},footer:null,children:s.jsxs(E,{form:n,layout:"vertical",onFinish:y,children:[s.jsx(E.Item,{name:"amount",label:e==="ar"?"المبلغ":"Amount",rules:[{required:!0,message:e==="ar"?"يرجى إدخال المبلغ":"Please enter amount"},{validator:(w,N)=>N&&parseFloat(N)>d?Promise.reject(new Error(e==="ar"?`المبلغ المتاح: ${d} ريال`:`Available balance: ${d} SAR`)):N&&parseFloat(N)<=0?Promise.reject(new Error(e==="ar"?"المبلغ يجب أن يكون أكبر من صفر":"Amount must be greater than zero")):Promise.resolve()}],children:s.jsx(z,{type:"number",prefix:s.jsx(tr,{}),suffix:e==="ar"?"ريال":"SAR",placeholder:e==="ar"?"أدخل المبلغ":"Enter amount"})}),s.jsx(E.Item,{name:"bankName",label:e==="ar"?"اسم البنك":"Bank Name",rules:[{required:!0,message:e==="ar"?"يرجى إدخال اسم البنك":"Please enter bank name"}],children:s.jsx(z,{placeholder:e==="ar"?"اسم البنك":"Bank Name"})}),s.jsx(E.Item,{name:"accountNumber",label:e==="ar"?"رقم الحساب":"Account Number",rules:[{required:!0,message:e==="ar"?"يرجى إدخال رقم الحساب":"Please enter account number"}],children:s.jsx(z,{placeholder:e==="ar"?"رقم الحساب":"Account Number"})}),s.jsx(E.Item,{name:"iban",label:"IBAN",rules:[{required:!0,message:e==="ar"?"يرجى إدخال IBAN":"Please enter IBAN"}],children:s.jsx(z,{placeholder:"IBAN"})}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{onClick:()=>{l(!1),n.resetFields()},children:e==="ar"?"إلغاء":"Cancel"}),s.jsx(P,{type:"primary",htmlType:"submit",loading:a,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"إرسال الطلب":"Submit Request"})]})})]})})]})},{TextArea:zj}=z,{Option:_s}=q,cD=()=>{const{language:t}=je(),[e,r]=A.useState([]),[n,a]=A.useState(!1),[i,o]=A.useState(!1),[l,c]=A.useState(!1),[u,d]=A.useState(null),[f,h]=A.useState(!1),[p]=E.useForm(),[g]=E.useForm();A.useEffect(()=>{x()},[]);const x=async()=>{try{a(!0);const b=await Mr.getMyTickets();r(b.tickets||[])}catch{_.error(t==="ar"?"فشل تحميل التذاكر":"Failed to load tickets")}finally{a(!1)}},m=async b=>{try{await Mr.createTicket(b),_.success(t==="ar"?"تم إنشاء التذكرة بنجاح":"Ticket created successfully"),o(!1),p.resetFields(),x()}catch{_.error(t==="ar"?"فشل إنشاء التذكرة":"Failed to create ticket")}},y=async b=>{try{if(await Mr.addComment(u.id,b.content),_.success(t==="ar"?"تم إضافة التعليق":"Comment added"),h(!1),g.resetFields(),x(),l){const S=await Mr.getTicketById(u.id);d(S.ticket)}}catch{_.error(t==="ar"?"فشل إضافة التعليق":"Failed to add comment")}},v=b=>({OPEN:"blue",IN_PROGRESS:"orange",RESOLVED:"green",CLOSED:"default"})[b]||"default",w=b=>({LOW:"default",MEDIUM:"blue",HIGH:"orange",URGENT:"red"})[b]||"default",N=[{title:t==="ar"?"رقم التذكرة":"Ticket Number",dataIndex:"ticketNumber",key:"ticketNumber"},{title:t==="ar"?"الموضوع":"Subject",dataIndex:"subject",key:"subject"},{title:t==="ar"?"الفئة":"Category",dataIndex:"category",key:"category",render:b=>b||"-"},{title:t==="ar"?"الأولوية":"Priority",dataIndex:"priority",key:"priority",render:b=>s.jsx(le,{color:w(b),children:b})},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:b=>s.jsx(le,{color:v(b),children:b})},{title:t==="ar"?"تاريخ الإنشاء":"Created At",dataIndex:"createdAt",key:"createdAt",render:b=>de(b).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"الإجراءات":"Actions",key:"actions",render:(b,S)=>s.jsx(fe,{children:s.jsx(P,{icon:s.jsx(ur,{}),size:"small",onClick:()=>{d(S),c(!0)},children:t==="ar"?"عرض":"View"})})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?"تذاكر الدعم الفني":"Support Tickets"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"إنشاء ومتابعة تذاكر الدعم الفني":"Create and track support tickets"})]}),s.jsx(P,{type:"primary",size:"large",icon:s.jsx(br,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-professional",onClick:()=>o(!0),children:t==="ar"?"إنشاء تذكرة جديدة":"Create New Ticket"})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:N,dataSource:e,loading:n,rowKey:"id",locale:{emptyText:s.jsx(Bt,{description:t==="ar"?"لا توجد تذاكر":"No tickets"})}})}),s.jsx(He,{title:t==="ar"?"إنشاء تذكرة جديدة":"Create New Ticket",open:i,onCancel:()=>{o(!1),p.resetFields()},footer:null,width:600,className:"modern-modal",children:s.jsxs(E,{form:p,layout:"vertical",onFinish:m,children:[s.jsx(E.Item,{name:"subject",label:t==="ar"?"الموضوع":"Subject",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال الموضوع":"Please enter subject"}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"category",label:t==="ar"?"الفئة":"Category",children:s.jsxs(q,{children:[s.jsx(_s,{value:"technical",children:t==="ar"?"تقني":"Technical"}),s.jsx(_s,{value:"billing",children:t==="ar"?"مالي":"Billing"}),s.jsx(_s,{value:"general",children:t==="ar"?"عام":"General"})]})}),s.jsx(E.Item,{name:"priority",label:t==="ar"?"الأولوية":"Priority",initialValue:"MEDIUM",children:s.jsxs(q,{children:[s.jsx(_s,{value:"LOW",children:t==="ar"?"منخفضة":"Low"}),s.jsx(_s,{value:"MEDIUM",children:t==="ar"?"متوسطة":"Medium"}),s.jsx(_s,{value:"HIGH",children:t==="ar"?"عالية":"High"}),s.jsx(_s,{value:"URGENT",children:t==="ar"?"عاجلة":"Urgent"})]})}),s.jsx(E.Item,{name:"description",label:t==="ar"?"الوصف":"Description",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال الوصف":"Please enter description"}],children:s.jsx(zj,{rows:6})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"إنشاء التذكرة":"Create Ticket"})})]})}),s.jsx(He,{title:t==="ar"?"تفاصيل التذكرة":"Ticket Details",open:l,onCancel:()=>{c(!1),d(null)},footer:null,width:800,className:"modern-modal",children:u&&s.jsxs("div",{children:[s.jsxs(ve,{bordered:!0,column:2,children:[s.jsx(ve.Item,{label:t==="ar"?"رقم التذكرة":"Ticket Number",children:u.ticketNumber}),s.jsx(ve.Item,{label:t==="ar"?"الحالة":"Status",children:s.jsx(le,{color:v(u.status),children:u.status})}),s.jsx(ve.Item,{label:t==="ar"?"الأولوية":"Priority",children:s.jsx(le,{color:w(u.priority),children:u.priority})}),s.jsx(ve.Item,{label:t==="ar"?"الفئة":"Category",children:u.category||"-"}),s.jsx(ve.Item,{label:t==="ar"?"الموضوع":"Subject",span:2,children:u.subject}),s.jsx(ve.Item,{label:t==="ar"?"الوصف":"Description",span:2,children:u.description})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:t==="ar"?"التعليقات":"Comments"}),s.jsx(P,{type:"primary",icon:s.jsx(Ut,{}),onClick:()=>h(!0),children:t==="ar"?"إضافة تعليق":"Add Comment"})]}),s.jsx(sb,{items:u.comments?.map(b=>({key:b.id,children:s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"font-semibold",children:b.user?.email}),s.jsx("span",{className:"text-gray-500 text-sm",children:de(b.createdAt).format("YYYY-MM-DD HH:mm")})]}),s.jsx("p",{children:b.comment||b.content})]})}))||[]}),(!u.comments||u.comments.length===0)&&s.jsx(Bt,{description:t==="ar"?"لا توجد تعليقات":"No comments"})]})]})}),s.jsx(He,{title:t==="ar"?"إضافة تعليق":"Add Comment",open:f,onCancel:()=>{h(!1),g.resetFields()},footer:null,className:"modern-modal",children:s.jsxs(E,{form:g,layout:"vertical",onFinish:y,children:[s.jsx(E.Item,{name:"content",label:t==="ar"?"التعليق":"Comment",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال التعليق":"Please enter comment"}],children:s.jsx(zj,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"إضافة التعليق":"Add Comment"})})]})})]})},{TextArea:uD}=z,wp=()=>{const{sessionId:t,bookingId:e}=ua(),r=e||t,n=!!t&&!e,{t:a,language:i}=je(),{user:o}=pr(),l=nt(),[c,u]=A.useState([]),[d,f]=A.useState(""),[h,p]=A.useState(!0),[g,x]=A.useState(!1),[m,y]=A.useState([]),[v,w]=A.useState(!1),[N,b]=A.useState(null),[S,j]=A.useState(null),[C,k]=A.useState(null),[O,I]=A.useState([]),[M,T]=A.useState([]),[R,L]=A.useState(!1),[B,H]=A.useState(!1),[Q,te]=A.useState(!1),[K,ne]=A.useState(null),[W,ee]=A.useState(!1),ue=A.useRef(null),oe=A.useRef(!1),_e=A.useRef(null),Ee=A.useRef(!1),be=A.useRef(null),X=A.useRef(new Set),{isRecording:xe,recordingTime:Ae,audioBlob:Z,audioUrl:ot,startRecording:F,stopRecording:ce,cancelRecording:me,formatTime:Ze}=hb();A.useEffect(()=>{o&&o.role!=="CONSULTANT"&&(_.error(i==="ar"?"غير مصرح لك بالوصول إلى هذه الصفحة":"You are not authorized to access this page"),o.role==="CLIENT"?l("/client",{replace:!0}):["ADMIN","SUPER_ADMIN"].includes(o.role)?l("/admin",{replace:!0}):l("/",{replace:!0}))},[o,l,i]),A.useEffect(()=>{if(_e.current!==r&&(oe.current=!1,Ee.current=!1,be.current=null,te(!1),_e.current=r),H(!1),r&&o){if(X.current.has(r)){oe.current||(oe.current=!0,te(!0),p(!1),Ee.current=!1,be.current=null,setTimeout(()=>{l("/consultant/chat",{replace:!0})},0));return}const U=be.current&&be.current!==r;if(oe.current||Q||U){p(!1);return}be.current!==r&&(be.current=r,Ee.current=!0,yt())}else r||(p(!1),H(!1),te(!1),oe.current=!1,Ee.current=!1,be.current=null,fn(),sl())},[r,o]),A.useEffect(()=>{if(Q)return;if(N?.id||r&&n&&B){wt();const Ne=setInterval(wt,5e3);return()=>clearInterval(Ne)}},[N?.id,r,n,B,Q]),A.useEffect(()=>{if(!r){const U=setInterval(()=>{sl()},1e4);return()=>clearInterval(U)}},[r]),A.useEffect(()=>{xt()},[c]);const xt=()=>{ue.current?.scrollIntoView({behavior:"smooth"})},yt=async()=>{if(X.current.has(r)){oe.current||(oe.current=!0,te(!0),p(!1),Ee.current=!1,be.current=null,setTimeout(()=>{l("/consultant/chat",{replace:!0})},0));return}if(oe.current||Q){Ee.current=!1,be.current=null;return}if(!r||!o){p(!1),Ee.current=!1,be.current=null;return}if(!(be.current&&be.current!==r)){Ee.current=!0,be.current=r,Ee.current=!0;try{let U=n;if(!n)try{const Xe=(await It.getConversations()).conversations?.find(ct=>ct.sessionId===r||ct.isDirect&&ct.id===r);Xe&&(Xe.isDirect||Xe.sessionId===r)&&(U=!0)}catch(ze){console.warn("Could not fetch conversations to verify session type:",ze)}if(U){try{const Xe=(await It.getConversations()).conversations?.find(ct=>ct.sessionId===r);if(Xe)b({id:r,status:Xe.status||"IN_PROGRESS",sessionType:"chat"}),j(null),ne(Xe),H(!0);else try{await It.getMessages(r),b({id:r,status:"IN_PROGRESS",sessionType:"chat"}),j(null),H(!0)}catch(ct){if(ct.message?.includes("not found")||ct.message?.includes("404")||ct.message?.includes("Access denied")||ct.message?.includes("403")){H(!1),te(!0),_.error(i==="ar"?"الجلسة غير موجودة أو غير مصرح لك بالوصول":"Session not found or access denied"),l("/consultant/chat",{replace:!0});return}else throw ct}}catch(ze){console.error("Error fetching direct session:",ze),!ze.message?.includes("not found")&&!ze.message?.includes("404")&&!ze.message?.includes("Access denied")&&!ze.message?.includes("403")&&_.error(i==="ar"?"فشل تحميل الجلسة":"Failed to load session"),l("/consultant/chat",{replace:!0})}finally{p(!1),Ee.current=!1}return}let Ne=!1;try{const Xe=(await It.getConversations()).conversations?.find(ct=>ct.sessionId===r||ct.isDirect&&ct.id===r);if(Xe&&(Xe.isDirect||Xe.sessionId===r)){Ne=!0,b({id:r,status:Xe.status||"IN_PROGRESS",sessionType:"chat"}),j(null),ne(Xe),H(!0),p(!1),Ee.current=!1,be.current=null;return}}catch{}let Le;try{Le=(await Ir.getBookingById(r)).booking}catch(ze){if(ze.status===404||ze.response?.status===404||ze.message?.toLowerCase().includes("not found")||ze.message?.includes("404")){if(X.current.add(r),oe.current){p(!1),Ee.current=!1,be.current=null;return}oe.current=!0,te(!0),p(!1),Ee.current=!1,be.current=null,l("/consultant/chat",{replace:!0});return}throw ze}if(o?.role==="CONSULTANT"&&Le.consultant?.userId!==o.id){if(oe.current){p(!1),Ee.current=!1;return}oe.current=!0,_.error(i==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),te(!0),p(!1),Ee.current=!1,l("/consultant/chat",{replace:!0});return}j(Le);try{const ze=await Tt.getSessionByBooking(r);if(b(ze.session),H(!0),ze.session?.roomId){const Xe=await Tt.getVideoRoom(r);k(Xe.room)}}catch{console.log("Session not found yet, will be created when starting"),b(null),H(!0)}Ee.current=!1,be.current=null,X.current.delete(r)}catch(U){const Ne=U.message||U.response?.data?.error||(i==="ar"?"فشل تحميل الجلسة":"Failed to load session"),Le=U.message?.toLowerCase().includes("not found")||U.message?.includes("404")||U.response?.status===404,ze=U.message?.includes("Access denied")||U.message?.includes("403")||U.response?.status===403;if(Le){if(oe.current){p(!1),Ee.current=!1;return}oe.current=!0,te(!0),p(!1),Ee.current=!1,l("/consultant/chat",{replace:!0});return}if(ze){if(oe.current){p(!1),Ee.current=!1;return}oe.current=!0,_.error(i==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),te(!0),p(!1),Ee.current=!1,l("/consultant/chat",{replace:!0});return}console.error("Error fetching session:",U),_.error(Ne),p(!1)}finally{Ee.current=!1,be.current=null,!Q&&!oe.current&&p(!1)}}},wt=async()=>{if(!(Q||!N?.id&&!(r&&n&&B)))try{const U=N?.id||r;if(!U)return;const Ne=await It.getMessages(U);if(u(Ne.messages||[]),!B&&Ne.messages&&H(!0),Ne.messages&&Ne.messages.length>0)try{await It.markAsRead(U)}catch(Le){console.error("Error marking messages as read:",Le)}setTimeout(()=>{ue.current?.scrollIntoView({behavior:"smooth"})},100)}catch(U){const Ne=U.message?.includes("Access denied")||U.message?.includes("403"),Le=U.message?.includes("not found")||U.message?.includes("404");if(Ne){te(!0),u([]);return}if(Le){u([]);return}console.error("Error fetching messages:",U),u([])}},De=async()=>{const U=N?.id||(n?r:null);if(!(!d.trim()&&m.length===0||!U)){if(!N?.id&&!n&&r)try{const Ne=await Tt.generateVideoRoom(r),Le=await Tt.startSession(r,Ne.room?.roomId);b(Le.session),k(Ne.room)}catch(Ne){_.error(Ne.message||(i==="ar"?"فشل بدء الجلسة":"Failed to start session"));return}try{x(!0);let Ne="text";if(m.length>0){const Xe=m.some(kt=>/\.(jpg|jpeg|png|gif|webp)$/i.test(kt)),ct=m.some(kt=>/\.(mp3|wav|ogg|m4a|webm)$/i.test(kt)),Fe=m.some(kt=>/\.(mp4|webm|ogg)$/i.test(kt));Xe?Ne="image":ct?Ne="audio":Fe?Ne="video":Ne="file"}const Le=N?.id||U,ze={content:d||(m.length>0?"📎 ملف مرفق":""),messageType:Ne,attachments:m.length>0?m:[]};if(n&&K){let Xe=null;K.clientId&&K.clientId!==o?.id?Xe=K.clientId:K.consultantUserId&&K.consultantUserId!==o?.id&&(Xe=K.consultantUserId),Xe&&(ze.receiverId=Xe)}await It.sendMessage(Le,ze),f(""),y([]),n&&!N?.id&&b({id:Le,status:"IN_PROGRESS",sessionType:"chat"}),wt()}catch(Ne){_.error(Ne.message||(i==="ar"?"فشل إرسال الرسالة":"Failed to send message"))}finally{x(!1)}}},ht=async()=>{xe?ce():await F()},dn=async()=>{if(!Z)return;const U=N?.id||(n?r:null);if(!U){_.error(i==="ar"?"لا توجد جلسة نشطة":"No active session"),me();return}try{x(!0);const Ne=new File([Z],`voice-${Date.now()}.webm`,{type:"audio/webm"}),Le=new FormData;Le.append("file",Ne),Le.append("ownerType","MESSAGE"),Le.append("ownerId",U);const ze=await Hr.uploadFile(Le);if(!ze||!ze.file||!ze.file.fileUrl)throw new Error("Invalid file response from server");const Xe=ze.file.fileUrl,ct=N?.id||U,Fe={content:i==="ar"?"رسالة صوتية":"Voice message",messageType:"audio",attachments:[Xe]};if(n&&K){let kt=null;K.clientId&&K.clientId!==o?.id?kt=K.clientId:K.consultantUserId&&K.consultantUserId!==o?.id&&(kt=K.consultantUserId),kt&&(Fe.receiverId=kt)}await It.sendMessage(ct,Fe),me(),wt(),_.success(i==="ar"?"تم إرسال الرسالة الصوتية":"Voice message sent")}catch(Ne){console.error("Error sending voice message:",Ne),_.error(Ne.message||(i==="ar"?"فشل إرسال الرسالة الصوتية":"Failed to send voice message"))}finally{x(!1)}},Ha=async U=>{const Ne=N?.id||(n?r:null);if(!Ne)return _.error(i==="ar"?"لا توجد جلسة نشطة":"No active session"),!1;try{const Le=new FormData;Le.append("file",U),Le.append("ownerType","MESSAGE"),Le.append("ownerId",Ne);const ze=await Hr.uploadFile(Le);if(!ze||!ze.file||!ze.file.fileUrl)throw new Error("Invalid file response from server");const Xe=[...m,ze.file.fileUrl];y(Xe),_.success(i==="ar"?"تم رفع الملف":"File uploaded")}catch(Le){console.error("File upload error:",Le),_.error(Le.message||(i==="ar"?"فشل رفع الملف":"Failed to upload file"))}return!1},Kr=async()=>{if(r)try{p(!0);let U=C;U||(U=(await Tt.generateVideoRoom(r)).room,k(U),_.success(i==="ar"?"تم إنشاء غرفة الفيديو":"Video room created")),await Tt.startSession(r,U?.roomId),_.success(i==="ar"?"تم بدء الجلسة":"Session started"),U?.joinUrl?window.open(U.joinUrl,"JitsiMeet","width=1200,height=800,menubar=no,toolbar=no,location=no,status=no,resizable=yes,scrollbars=yes")?(ee(!0),_.success(i==="ar"?"تم فتح المكالمة في نافذة جديدة":"Video call opened in new window")):(ee(!0),_.info(i==="ar"?'تم فتح المكالمة في النافذة المنبثقة. إذا لم تفتح، استخدم زر "فتح في نافذة جديدة"':'Video call opened. If popup was blocked, use "Open in New Window" button')):_.warning(i==="ar"?"لم يتم العثور على رابط المكالمة":"Video call URL not found"),yt()}catch(U){console.error("Video call error:",U),_.error(U.message||(i==="ar"?"فشل بدء المكالمة":"Failed to start video call"))}finally{p(!1)}},al=async()=>{if(r)try{await Tt.endSession(r),_.success(i==="ar"?"تم إنهاء الجلسة":"Session ended successfully"),l("/consultant/chat")}catch(U){_.error(U.message||(i==="ar"?"فشل إنهاء الجلسة":"Failed to end session"))}},fn=async()=>{try{L(!0);const U=await Ir.getBookings({status:"CONFIRMED"});I(U.bookings||[])}catch(U){console.error("Error fetching bookings:",U)}finally{L(!1)}},sl=async()=>{try{const U=await It.getConversations();T(U.conversations||[])}catch(U){console.error("Error fetching conversations:",U)}},Os=U=>{l(`/consultant/chat/${U}`)};if(h)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})});if(!r)return s.jsxs("div",{className:"flex h-[calc(100vh-200px)] gap-4",children:[s.jsx("div",{className:"w-1/3 min-w-[300px]",children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ut,{}),s.jsx("span",{children:i==="ar"?"المحادثات والحجوزات":"Conversations & Bookings"})]}),className:"h-full",styles:{body:{padding:0,height:"calc(100% - 57px)",overflow:"auto"}},children:R?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(et,{size:"large"})}):M.length===0&&O.length===0?s.jsx(Bt,{description:i==="ar"?"لا توجد محادثات أو حجوزات":"No conversations or bookings",className:"py-12"}):s.jsxs("div",{children:[M.length>0&&s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h3",{className:"font-semibold text-sm text-gray-600 mb-2",children:i==="ar"?"المحادثات النشطة":"Active Conversations"}),s.jsx(ft,{dataSource:M,renderItem:U=>{const Ne=U.unreadCount||0;return s.jsx(ft.Item,{className:"cursor-pointer hover:bg-gray-50 px-4 py-3 border-b",onClick:()=>Os(U.bookingId||U.sessionId),children:s.jsx(ft.Item.Meta,{avatar:s.jsx(Ia,{count:Ne,size:"small",children:s.jsx(at,{icon:s.jsx(ke,{})})}),title:s.jsx("span",{className:"font-medium",children:U.name}),description:s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 truncate",children:U.lastMessage||(i==="ar"?"لا توجد رسائل":"No messages")}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:de(U.lastMessageTime).fromNow()})]})})})}})]}),O.length>0&&s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-sm text-gray-600 mb-2",children:i==="ar"?"الحجوزات المتاحة":"Available Bookings"}),s.jsx(ft,{dataSource:O,renderItem:U=>{const Ne=M.some(Le=>Le.bookingId===U.id);return s.jsx(ft.Item,{className:`cursor-pointer hover:bg-gray-50 px-4 py-3 border-b ${Ne?"opacity-75":""}`,onClick:()=>Os(U.id),children:s.jsx(ft.Item.Meta,{avatar:s.jsx(at,{icon:s.jsx(ke,{})}),title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:U.client?`${U.client.firstName} ${U.client.lastName}`:i==="ar"?"عميل":"Client"}),s.jsx(le,{color:U.status==="CONFIRMED"?"green":"blue",size:"small",children:U.status})]}),description:s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:U.service?i==="ar"?U.service.titleAr:U.service.title:i==="ar"?"استشارة":"Consultation"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:de(U.scheduledAt).format("YYYY-MM-DD HH:mm")})]})})})}})]})]})})}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center py-12 px-6",children:[s.jsx("div",{className:"mb-6",children:s.jsx(Ut,{className:"text-7xl text-gray-300"})}),s.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700",children:i==="ar"?"اختر محادثة للبدء":"Select a Conversation to Start"}),s.jsx("p",{className:"text-gray-500 max-w-md mx-auto text-base",children:i==="ar"?"اختر محادثة من القائمة الجانبية للبدء في الدردشة مع العميل":"Select a conversation from the sidebar to start chatting with the client"})]})})]});const Pr=S?.client;return!S&&r&&!n&&!B&&h?s.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)] dashboard-bg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(et,{size:"large"}),s.jsx("p",{className:"mt-4 text-gray-500",children:i==="ar"?"جاري التحميل...":"Loading..."})]})}):n&&!B&&!Q&&h?s.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)] dashboard-bg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(et,{size:"large"}),s.jsx("p",{className:"mt-4 text-gray-500",children:i==="ar"?"جاري التحميل...":"Loading..."})]})}):r&&!S&&!n&&!h&&!B?s.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)] dashboard-bg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Bt,{description:i==="ar"?"لم يتم العثور على المحادثة":"Conversation not found"}),s.jsx(P,{type:"primary",onClick:()=>l("/consultant/chat"),className:"mt-4",children:i==="ar"?"العودة إلى المحادثات":"Back to Conversations"})]})}):n&&!B&&!h&&!Q?s.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)] dashboard-bg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Bt,{description:i==="ar"?"لم يتم العثور على المحادثة":"Conversation not found"}),s.jsx(P,{type:"primary",onClick:()=>l("/consultant/chat"),className:"mt-4",children:i==="ar"?"العودة إلى المحادثات":"Back to Conversations"})]})}):s.jsxs("div",{className:"flex h-[calc(100vh-64px)] gap-4 dashboard-bg relative",style:{margin:"-12px -12px 0 -12px",width:"calc(100% + 24px)"},children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/20 to-turquoise-100/20 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/20 to-olive-green-100/20 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"w-1/3 min-w-[300px] max-w-[400px] glass-card border-r border-gray-200/50 flex flex-col shadow-professional-lg relative z-10",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200/50 backdrop-blur-sm flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ut,{className:"text-olive-green-600"}),s.jsx("span",{className:"font-semibold text-gray-900",children:i==="ar"?"المحادثات":"Conversations"})]}),s.jsx(P,{type:"text",size:"small",onClick:()=>l("/consultant/chat"),className:"text-gray-500 hover:text-gray-700",children:i==="ar"?"عرض الكل":"View All"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:R?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(et,{size:"small"})}):s.jsx(ft,{className:"px-0",dataSource:[...M.map(U=>({...U,type:"conversation"})),...O.filter(U=>!M.some(Ne=>Ne.bookingId===U.id)).map(U=>({...U,type:"booking"}))],renderItem:U=>{const Ne=U.id===r||U.bookingId===r||U.id===S?.id,Le=U.unreadCount||0,ze=U.type==="conversation"?U.name:U.client?`${U.client.firstName} ${U.client.lastName}`:i==="ar"?"عميل":"Client";return s.jsx(ft.Item,{className:`cursor-pointer px-4 py-3 border-b border-gray-100  ${Ne?"bg-olive-green-50 border-l-4 border-l-olive-green-600":"hover:bg-gray-50"}`,onClick:()=>Os(U.bookingId||U.id),children:s.jsx(ft.Item.Meta,{avatar:s.jsx(Ia,{count:Le>0?Le:0,size:"small",offset:[-5,5],showZero:!1,children:s.jsx(at,{icon:s.jsx(ke,{}),size:48,className:"shadow-sm"})}),title:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:`font-semibold text-sm ${Ne?"text-olive-green-700":"text-gray-900"}`,children:ze}),U.status&&s.jsx(le,{color:U.status==="CONFIRMED"?"green":U.status==="IN_PROGRESS"?"blue":"default",size:"small",className:"text-xs",children:U.status})]}),description:s.jsxs("div",{className:"mt-1",children:[s.jsx("p",{className:"text-xs text-gray-600 truncate mb-1",children:U.lastMessage||(U.service?i==="ar"?U.service.titleAr:U.service.title:i==="ar"?"استشارة":"Consultation")}),s.jsx("p",{className:"text-xs text-gray-400",children:U.lastMessageTime?de(U.lastMessageTime).fromNow():U.scheduledAt?de(U.scheduledAt).format("MMM DD, HH:mm"):""})]})})})}})})]}),s.jsx("div",{className:"flex-1 flex flex-col glass-card overflow-hidden shadow-professional-lg relative z-10",children:(r&&!n&&!S&&!B||n&&!B&&!Q)&&h?s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(et,{size:"large"}),s.jsx("p",{className:"mt-4 text-gray-500",children:i==="ar"?"جاري تحميل المحادثة...":"Loading conversation..."})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"border-b border-gray-200/50 px-4 py-3 flex items-center justify-between shadow-professional z-10 sticky top-0 flex-shrink-0 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(at,{src:n?K?.avatar:Pr?.user?.avatar||Pr?.profilePicture,size:40,icon:s.jsx(ke,{}),className:"flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-base font-semibold text-gray-900 truncate",children:n?K?.name||K?.clientName||K?.consultantName||(i==="ar"?"المستخدم":"User"):Pr?`${Pr.firstName} ${Pr.lastName}`:i==="ar"?"العميل":"Client"}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:n?i==="ar"?"محادثة مباشرة":"Direct Message":S?.service?i==="ar"?S.service.titleAr:S.service.title:i==="ar"?"استشارة":"Consultation"})]})]}),s.jsxs(fe,{className:"flex-shrink-0",children:[s.jsx(P,{type:"text",icon:s.jsx(ms,{}),className:"text-gray-600 hover:text-gray-900",onClick:Kr,disabled:N?.status==="COMPLETED"||n,title:i==="ar"?"مكالمة فيديو":"Video Call"}),N?.status==="IN_PROGRESS"&&!n&&s.jsx(P,{type:"text",danger:!0,onClick:al,title:i==="ar"?"إنهاء الجلسة":"End Session",children:i==="ar"?"إنهاء":"End"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 min-h-0",style:{scrollBehavior:"smooth",backgroundImage:"radial-gradient(circle, rgba(122, 140, 102, 0.1) 1px, transparent 1px)",backgroundSize:"20px 20px"},children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-3",children:[c.length===0?s.jsxs("div",{className:"text-center text-gray-400 py-12",children:[s.jsx("div",{className:"text-4xl mb-2",children:"💬"}),s.jsx("p",{children:i==="ar"?"لا توجد رسائل بعد":"No messages yet"})]}):c.map((U,Ne)=>{const Le=U.senderId===o?.id,ze=U.attachments?typeof U.attachments=="string"?JSON.parse(U.attachments):U.attachments:[],Xe=Ne>0?c[Ne-1]:null;!Xe||(Xe.senderId,U.senderId);const ct=!Xe||de(U.createdAt).diff(de(Xe.createdAt),"minute")>5;return s.jsxs("div",{className:`flex ${Le?"justify-end":"justify-start"} items-end gap-2 ${ct?"mt-4":""}`,children:[!Le&&s.jsx(at,{src:n?K?.avatar:Pr?.user?.avatar||Pr?.profilePicture,size:32,icon:s.jsx(ke,{}),className:"flex-shrink-0"}),s.jsxs("div",{className:`flex flex-col ${Le?"items-end":"items-start"} max-w-[70%] md:max-w-[60%]`,children:[ct&&s.jsx("div",{className:"text-center w-full mb-2",children:s.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:de(U.createdAt).format("MMM DD, YYYY HH:mm")})}),s.jsxs("div",{className:`rounded-2xl px-4 py-2 ${Le?"bg-[#dcf8c6] text-gray-900 rounded-tr-sm":"bg-white text-gray-900 rounded-tl-sm shadow-sm"}`,children:[ze.length>0&&s.jsx("div",{className:"mb-2 space-y-2",children:ze.map((Fe,kt)=>{const Tr=Fe.startsWith("data:image/")||Fe.startsWith("data:video/")||Fe.startsWith("data:audio/"),Ps=U.messageType==="image"||/\.(jpg|jpeg|png|gif|webp)$/i.test(Fe)||Tr&&Fe.startsWith("data:image/"),gu=U.messageType==="audio"||/\.(mp3|wav|ogg|m4a|webm)$/i.test(Fe)||Tr&&Fe.startsWith("data:audio/"),ip=U.messageType==="video"||/\.(mp4|webm)$/i.test(Fe)&&U.messageType!=="audio"||Tr&&Fe.startsWith("data:video/");if(Ps)return s.jsx("div",{className:"image-attachment mb-2 -mx-2",children:Tr?s.jsx("img",{src:Fe,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},onError:ha=>{const In=ha.target;if(In){In.style.display="none";const Br=In.closest(".image-attachment");if(Br&&!Br.querySelector(".image-error-fallback")){const Jr=document.createElement("div");Jr.className="image-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",Jr.textContent=i==="ar"?"تعذر تحميل الصورة":"Image unavailable",Br.appendChild(Jr)}}}}):s.jsx(Ar,{src:Fe.startsWith("http")?Fe:Fe.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Fe}`:Fe.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Fe}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Fe.split("/").pop()}`,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},preview:{mask:i==="ar"?"معاينة":"Preview"},onError:ha=>{const In=ha.target;if(In){In.style.display="none";const Br=In.closest(".image-attachment");if(Br&&!Br.querySelector(".image-error-fallback")){const Jr=document.createElement("div");Jr.className="image-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",Jr.textContent=i==="ar"?"تعذر تحميل الصورة":"Image unavailable",Br.appendChild(Jr)}}}},kt)},kt);if(gu){const ha=Fe.startsWith("http")?Fe:Fe.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Fe}`:Fe.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Fe}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Fe.split("/").pop()}`;return s.jsx("div",{className:"audio-attachment",children:s.jsx(pb,{src:ha,isOwnMessage:Le,language:i})},kt)}else if(ip){const ha=Fe.startsWith("http")?Fe:Fe.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Fe}`:Fe.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Fe}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Fe.split("/").pop()}`;return s.jsx("div",{className:"video-attachment",children:s.jsx("video",{controls:!0,src:ha,className:"w-full max-w-md rounded",onError:In=>{const Br=In.target;if(Br){Br.style.display="none";const Jr=Br.closest(".video-attachment");if(Jr&&!Jr.querySelector(".video-error-fallback")){const il=document.createElement("div");il.className="video-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",il.textContent=i==="ar"?"تعذر تحميل الفيديو":"Video unavailable",Jr.appendChild(il)}}}})},kt)}else return s.jsxs("div",{className:`file-attachment flex items-center gap-2 p-2 rounded ${Le?"bg-white/50":"bg-gray-100"}`,children:[s.jsx(so,{className:Le?"text-gray-700":"text-blue-600"}),s.jsx("a",{href:Fe,download:!0,target:"_blank",rel:"noopener noreferrer",className:`text-sm ${Le?"text-gray-700 hover:text-gray-900":"text-blue-600 hover:text-blue-800"}`,children:Fe.split("/").pop()})]},kt)})}),U.content&&U.content.trim()&&!(U.messageType==="image"&&ze.length>0&&!U.content.includes("📎"))&&s.jsx("p",{className:`text-sm ${ze.length>0?"mt-2":""} whitespace-pre-wrap break-words`,children:U.content}),s.jsx("span",{className:`text-xs mt-1 ${Le?"text-gray-600":"text-gray-500"} self-end`,children:de(U.createdAt).format("HH:mm")})]})]}),Le&&s.jsx(at,{src:o?.avatar,size:32,icon:s.jsx(ke,{}),className:"flex-shrink-0"})]},U.id)}),s.jsx("div",{ref:ue})]})}),m.length>0&&s.jsx("div",{className:"mb-3 pb-3 border-b border-gray-200 px-4",children:s.jsx("div",{className:"flex flex-wrap gap-3",children:m.map((U,Ne)=>{const Le=/\.(jpg|jpeg|png|gif|webp)$/i.test(U),ze=/\.(mp4|webm|ogg)$/i.test(U),Xe=/\.(mp3|wav|ogg|m4a|webm)$/i.test(U),ct=U.split("/").pop(),Fe=U.startsWith("http")?U:U.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${U}`:U.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${U}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${U.split("/").pop()}`;return s.jsx("div",{className:"relative group",children:Le?s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm",children:[s.jsx(Ar,{src:Fe,alt:ct,width:200,height:200,className:"object-cover",preview:!1,onError:kt=>{console.error("Image failed to load:",Fe),kt.target.style.display="none"}}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Nr,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>y(m.filter((kt,Tr)=>Tr!==Ne))})]}):ze?s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm w-[200px]",children:[s.jsx("video",{src:Fe,className:"w-full h-[150px] object-cover",controls:!1,muted:!0,onError:kt=>{console.error("Video failed to load:",Fe)}}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:s.jsx(ms,{className:"text-white text-2xl"})}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Nr,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>y(m.filter((kt,Tr)=>Tr!==Ne))})]}):Xe?s.jsxs("div",{className:"relative rounded-lg border border-gray-200 shadow-sm bg-gray-50 p-3 min-w-[200px]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(io,{className:"text-gray-600 text-lg"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs text-gray-600 truncate",children:ct}),s.jsx("audio",{src:Fe,controls:!0,className:"w-full mt-1",preload:"metadata"})]})]}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Nr,{}),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center",onClick:()=>y(m.filter((kt,Tr)=>Tr!==Ne))})]}):s.jsxs("div",{className:"relative flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 shadow-sm min-w-[200px]",children:[s.jsx(so,{className:"text-gray-600 text-xl"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-gray-700 truncate font-medium",children:ct}),s.jsx("p",{className:"text-xs text-gray-500",children:i==="ar"?"ملف":"File"})]}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Nr,{}),className:"bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center flex-shrink-0",onClick:()=>y(m.filter((kt,Tr)=>Tr!==Ne))})]})},Ne)})})}),ot&&!xe&&s.jsxs("div",{className:"p-3 bg-blue-50 border-t border-blue-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("audio",{src:ot,controls:!0,className:"max-w-xs"}),s.jsx("span",{className:"text-sm text-gray-600",children:Ze(Ae)})]}),s.jsxs(fe,{children:[s.jsx(P,{type:"primary",size:"small",onClick:dn,loading:g,children:i==="ar"?"إرسال":"Send"}),s.jsx(P,{size:"small",icon:s.jsx(Nr,{}),onClick:me})]})]}),xe&&s.jsxs("div",{className:"p-3 bg-red-50 border-t border-red-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsxs("span",{className:"text-red-600 font-semibold",children:[i==="ar"?"جاري التسجيل...":"Recording..."," ",Ze(Ae)]})]}),s.jsx(P,{danger:!0,size:"small",icon:s.jsx(fo,{}),onClick:ce,children:i==="ar"?"إيقاف":"Stop"})]}),s.jsxs("div",{className:"border-t border-gray-200/50 px-4 py-3 shadow-professional backdrop-blur-sm flex-shrink-0 bg-white/80",children:[s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx(Pt,{showUploadList:!1,beforeUpload:Ha,accept:"image/*,audio/*,video/*,.pdf,.doc,.docx",multiple:!0,children:s.jsx(P,{icon:s.jsx(ab,{}),type:"text",className:"text-gray-600 hover:text-gray-900",size:"large"})}),s.jsx(P,{type:xe?"primary":"text",danger:xe,icon:xe?s.jsx(cb,{}):s.jsx(io,{}),onClick:ht,disabled:N?.status==="COMPLETED",title:i==="ar"?"تسجيل صوتي":"Voice recording",className:xe?"":"text-gray-600 hover:text-gray-900",size:"large"}),s.jsx(P,{icon:s.jsx(db,{}),onClick:()=>w(!v),type:"text",className:`text-gray-600 hover:text-gray-900 ${v?"bg-gray-100":""}`,size:"large"}),s.jsx("div",{className:"flex-1 relative",children:s.jsx(uD,{value:d,onChange:U=>f(U.target.value),placeholder:i==="ar"?"اكتب رسالتك...":"Type your message...",rows:1,autoSize:{minRows:1,maxRows:4},variant:"borderless",disabled:N?.status==="COMPLETED"||xe,onPressEnter:U=>{U.shiftKey||(U.preventDefault(),De())},style:{resize:"none",borderRadius:"24px",padding:"10px 16px",backgroundColor:"#f0f0f0",border:"none",fontSize:"14px"}})}),s.jsx(P,{type:"primary",icon:s.jsx(lh,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 rounded-full",onClick:De,loading:g,disabled:!d.trim()&&m.length===0||N?.status==="COMPLETED",size:"large",shape:"circle"})]}),v&&s.jsx("div",{className:"p-3 bg-white border-t border-gray-200 max-h-48 overflow-y-auto shadow-inner",children:s.jsx("div",{className:"grid grid-cols-8 gap-1",children:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃"].map(U=>s.jsx(P,{type:"text",className:"text-xl p-1",onClick:()=>{f(Ne=>Ne+U),w(!1)},children:U},U))})})]})]})}),s.jsx(He,{title:i==="ar"?"مكالمة فيديو - Jitsi Meet":"Video Call - Jitsi Meet",open:W,onCancel:()=>ee(!1),footer:[s.jsx(P,{onClick:()=>ee(!1),children:i==="ar"?"إغلاق":"Close"},"close"),s.jsx(P,{type:"primary",onClick:()=>{C?.joinUrl&&window.open(C.joinUrl,"_blank","width=1200,height=800")},children:i==="ar"?"فتح في نافذة جديدة":"Open in New Window"},"openNew")],width:"90%",style:{top:20},styles:{body:{height:"80vh",padding:0}},destroyOnHidden:!0,children:C?.joinUrl?s.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",padding:"20px"},children:[s.jsx("p",{style:{fontSize:"16px",color:"#666",textAlign:"center"},children:i==="ar"?'لأفضل تجربة، يرجى استخدام زر "فتح في نافذة جديدة" لفتح المكالمة':'For the best experience, please use the "Open in New Window" button to open the call'}),s.jsx(P,{type:"primary",size:"large",onClick:()=>{C?.joinUrl&&window.open(C.joinUrl,"_blank","width=1200,height=800")},children:i==="ar"?"فتح المكالمة في نافذة جديدة":"Open Call in New Window"}),s.jsx("div",{style:{width:"100%",height:"70%",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},children:s.jsx("iframe",{src:C.joinUrl,allow:"camera; microphone; fullscreen; speaker; display-capture; autoplay",style:{width:"100%",height:"100%",border:"none"},title:"Jitsi Meet Video Call",allowFullScreen:!0})})]}):s.jsx("div",{style:{padding:"20px",textAlign:"center"},children:s.jsx("p",{children:i==="ar"?"لا يوجد رابط للمكالمة":"No call URL available"})})})]})},dD=()=>{const{t,language:e}=je(),r=nt(),[n,a]=A.useState([]),[i,o]=A.useState(!0),[l,c]=A.useState("all");A.useEffect(()=>{u()},[l]);const u=async()=>{try{o(!0);const p={};l!=="all"&&(p.status=l);const x=(await Ir.getBookings(p)).bookings.map(m=>({id:m.id,client:m.client?`${m.client.firstName} ${m.client.lastName}`:e==="ar"?"غير متوفر":"N/A",service:m.service?e==="ar"?m.service.titleAr:m.service.title:e==="ar"?"غير محدد":"Not specified",date:m.scheduledAt?de(m.scheduledAt).format("YYYY-MM-DD HH:mm"):"-",status:m.status,price:m.price,bookingType:m.bookingType}));a(x)}catch(p){console.error("Error fetching bookings:",p),_.error(e==="ar"?"فشل تحميل الحجوزات":"Failed to load bookings")}finally{o(!1)}},d=async(p,g)=>{try{await Ir.updateBookingStatus(p,g),_.success(e==="ar"?"تم تحديث الحالة بنجاح":"Status updated successfully"),u()}catch(x){_.error(x.message||(e==="ar"?"فشل تحديث الحالة":"Failed to update status"))}},f=async p=>{try{const g=await Tt.generateVideoRoom(p);await Tt.startSession(p,g.room?.roomId),_.success(e==="ar"?"تم بدء الجلسة بنجاح":"Session started successfully"),u(),r(`/consultant/chat/${p}`)}catch(g){_.error(g.message||(e==="ar"?"فشل بدء الجلسة":"Failed to start session"))}},h=[{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client"},{title:e==="ar"?"الخدمة":"Service",dataIndex:"service",key:"service"},{title:e==="ar"?"التاريخ والوقت":"Date & Time",dataIndex:"date",key:"date"},{title:e==="ar"?"المبلغ":"Amount",dataIndex:"price",key:"price",render:p=>p?`${p} ${e==="ar"?"ريال":"SAR"}`:"-"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:p=>{const g={PENDING:"orange",CONFIRMED:"blue",IN_PROGRESS:"green",COMPLETED:"green",CANCELLED:"red"},x={PENDING:e==="ar"?"قيد الانتظار":"Pending",CONFIRMED:e==="ar"?"مؤكد":"Confirmed",IN_PROGRESS:e==="ar"?"قيد التنفيذ":"In Progress",COMPLETED:e==="ar"?"مكتمل":"Completed",CANCELLED:e==="ar"?"ملغي":"Cancelled"};return s.jsx(le,{color:g[p],children:x[p]||p})}},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(p,g)=>s.jsxs(fe,{children:[s.jsx(P,{icon:s.jsx(Ut,{}),onClick:()=>r(`/consultant/chat/${g.id}`),children:e==="ar"?"محادثة":"Chat"}),g.status==="PENDING"&&s.jsxs(s.Fragment,{children:[s.jsx(P,{type:"primary",icon:s.jsx(vt,{}),className:"bg-green-600",onClick:()=>d(g.id,"CONFIRMED"),children:e==="ar"?"قبول":"Accept"}),s.jsx(P,{danger:!0,icon:s.jsx(uc,{}),onClick:()=>d(g.id,"CANCELLED"),children:e==="ar"?"رفض":"Reject"})]}),g.status==="CONFIRMED"&&s.jsx(P,{type:"primary",className:"bg-olive-green-600",onClick:()=>f(g.id),children:e==="ar"?"بدء الجلسة":"Start Session"})]})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الحجوزات":"Bookings"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع حجوزات الاستشارات":"Manage all consultation bookings"})]}),s.jsxs(q,{value:l,onChange:c,style:{width:200},size:"large",children:[s.jsx(q.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(q.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),s.jsx(q.Option,{value:"CONFIRMED",children:e==="ar"?"مؤكد":"Confirmed"}),s.jsx(q.Option,{value:"IN_PROGRESS",children:e==="ar"?"قيد التنفيذ":"In Progress"}),s.jsx(q.Option,{value:"COMPLETED",children:e==="ar"?"مكتمل":"Completed"})]})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:h,dataSource:n,rowKey:"id",loading:i,pagination:{pageSize:10,showSizeChanger:!0,showTotal:p=>e==="ar"?`إجمالي ${p} حجز`:`Total ${p} bookings`}})})]})},{Text:Fj,Paragraph:fD}=su,{TextArea:hD}=z,pD=()=>{const{t,language:e}=je(),[r,n]=A.useState([]),[a,i]=A.useState([]),[o,l]=A.useState(!0),[c,u]=A.useState(!1),[d,f]=A.useState(!1),[h,p]=A.useState(null),[g,x]=A.useState(null),[m]=E.useForm();A.useEffect(()=>{y(),v()},[]);const y=async()=>{try{l(!0);const S=(await ld.getReports()).reports.map(j=>({id:j.id,title:j.title,client:j.client?`${j.client.firstName} ${j.client.lastName}`:e==="ar"?"غير متوفر":"N/A",date:de(j.createdAt).format("YYYY-MM-DD"),status:j.status,reportType:j.reportType,pdfUrl:j.pdfUrl,wordUrl:j.wordUrl}));n(S)}catch(b){console.error("Error fetching reports:",b),_.error(e==="ar"?"فشل تحميل التقارير":"Failed to load reports")}finally{l(!1)}},v=async()=>{try{const b=await Ir.getBookings({status:"COMPLETED"});i((b.bookings||[]).filter(S=>!S.report))}catch(b){console.error("Error fetching bookings:",b)}},w=async b=>{try{if(!h&&!b.bookingId){_.error(e==="ar"?"يرجى اختيار حجز":"Please select a booking");return}const S=h?.id||b.bookingId,j=new FormData;b.pdf&&b.pdf.fileList&&b.pdf.fileList[0]&&j.append("pdf",b.pdf.fileList[0].originFileObj),b.word&&b.word.fileList&&b.word.fileList[0]&&j.append("word",b.word.fileList[0].originFileObj),j.append("bookingId",S),j.append("title",b.title),j.append("reportType",b.reportType),b.summary&&j.append("summary",b.summary),await ld.uploadReport(j),_.success(e==="ar"?"تم رفع التقرير بنجاح":"Report uploaded successfully"),u(!1),m.resetFields(),p(null),y(),v()}catch(S){_.error(S.message||(e==="ar"?"فشل رفع التقرير":"Failed to upload report"))}},N=[{title:e==="ar"?"عنوان التقرير":"Report Title",dataIndex:"title",key:"title"},{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client"},{title:e==="ar"?"النوع":"Type",dataIndex:"reportType",key:"reportType"},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:b=>{const S={UNDER_REVIEW:"orange",APPROVED:"green",REJECTED:"red"},j={UNDER_REVIEW:e==="ar"?"قيد المراجعة":"Under Review",APPROVED:e==="ar"?"موافق عليه":"Approved",REJECTED:e==="ar"?"مرفوض":"Rejected"},C={UNDER_REVIEW:s.jsx(Cn,{}),APPROVED:s.jsx(vt,{}),REJECTED:s.jsx(uc,{})};return s.jsx(le,{color:S[b],icon:C[b],children:j[b]||b})}},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(b,S)=>s.jsxs(fe,{children:[s.jsx(P,{icon:s.jsx(ur,{}),onClick:()=>{x(S),f(!0)},children:e==="ar"?"معاينة":"Preview"}),S.pdfUrl&&s.jsx(P,{icon:s.jsx(Rr,{}),onClick:()=>window.open(S.pdfUrl,"_blank"),children:"PDF"}),S.wordUrl&&s.jsx(P,{icon:s.jsx(Rr,{}),onClick:()=>window.open(S.wordUrl,"_blank"),children:"Word"})]})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"التقارير":"Reports"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة وتحميل التقارير":"Manage and upload reports"})]}),s.jsx(P,{type:"primary",size:"large",icon:s.jsx(br,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-professional",onClick:()=>{m.resetFields(),u(!0)},children:e==="ar"?"رفع تقرير جديد":"Upload New Report"})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:N,dataSource:r,rowKey:"id",loading:o,pagination:{pageSize:10,showSizeChanger:!0,showTotal:b=>e==="ar"?`إجمالي ${b} تقرير`:`Total ${b} reports`}})}),s.jsx(He,{title:e==="ar"?"رفع تقرير جديد":"Upload New Report",open:c,onCancel:()=>{u(!1),m.resetFields()},footer:null,width:700,children:s.jsxs(E,{form:m,layout:"vertical",onFinish:w,children:[s.jsx(E.Item,{name:"bookingId",label:e==="ar"?"اختر الحجز":"Select Booking",rules:[{required:!0,message:e==="ar"?"يرجى اختيار حجز":"Please select a booking"}],children:s.jsx(q,{placeholder:e==="ar"?"اختر الحجز":"Select booking",onChange:b=>{const S=a.find(j=>j.id===b);p(S),m.setFieldValue("bookingId",b)},children:a.map(b=>s.jsxs(q.Option,{value:b.id,children:[b.client?`${b.client.firstName} ${b.client.lastName}`:b.id," - ",b.service?e==="ar"?b.service.titleAr:b.service.title:""]},b.id))})}),s.jsx(E.Item,{name:"title",label:e==="ar"?"عنوان التقرير":"Report Title",rules:[{required:!0}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"reportType",label:e==="ar"?"نوع التقرير":"Report Type",rules:[{required:!0}],children:s.jsxs(q,{children:[s.jsx(q.Option,{value:"FEASIBILITY_STUDY",children:e==="ar"?"دراسة جدوى":"Feasibility Study"}),s.jsx(q.Option,{value:"ECONOMIC_ANALYSIS",children:e==="ar"?"تحليل اقتصادي":"Economic Analysis"}),s.jsx(q.Option,{value:"FINANCIAL_REPORT",children:e==="ar"?"تقرير مالي":"Financial Report"}),s.jsx(q.Option,{value:"CONSULTATION_SUMMARY",children:e==="ar"?"ملخص استشارة":"Consultation Summary"})]})}),s.jsx(E.Item,{name:"summary",label:e==="ar"?"ملخص التقرير":"Report Summary",children:s.jsx(hD,{rows:4})}),s.jsx(E.Item,{name:"pdf",label:e==="ar"?"ملف PDF":"PDF File",rules:[{required:!0,message:e==="ar"?"يرجى رفع ملف PDF":"Please upload PDF file"}],valuePropName:"fileList",getValueFromEvent:b=>Array.isArray(b)?b:b?.fileList,children:s.jsx(Pt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf",children:s.jsx(P,{icon:s.jsx(ir,{}),children:e==="ar"?"اختر ملف PDF":"Select PDF File"})})}),s.jsx(E.Item,{name:"word",label:e==="ar"?"ملف Word (اختياري)":"Word File (Optional)",valuePropName:"fileList",getValueFromEvent:b=>Array.isArray(b)?b:b?.fileList,children:s.jsx(Pt,{beforeUpload:()=>!1,maxCount:1,accept:".doc,.docx",children:s.jsx(P,{icon:s.jsx(ir,{}),children:e==="ar"?"اختر ملف Word":"Select Word File"})})}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"رفع":"Upload"}),s.jsx(P,{onClick:()=>{u(!1),m.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),s.jsx(He,{title:e==="ar"?"معاينة التقرير":"Report Preview",open:d,onCancel:()=>{f(!1),x(null)},footer:[s.jsx(P,{onClick:()=>{f(!1),x(null)},children:e==="ar"?"إغلاق":"Close"},"close"),g?.pdfUrl&&s.jsx(P,{type:"primary",icon:s.jsx(Rr,{}),onClick:()=>window.open(g.pdfUrl,"_blank"),children:e==="ar"?"تحميل PDF":"Download PDF"},"pdf"),g?.wordUrl&&s.jsx(P,{icon:s.jsx(Rr,{}),onClick:()=>window.open(g.wordUrl,"_blank"),children:e==="ar"?"تحميل Word":"Download Word"},"word")],width:800,children:g&&s.jsxs("div",{children:[s.jsxs(ve,{bordered:!0,column:2,className:"mb-4",children:[s.jsx(ve.Item,{label:e==="ar"?"عنوان التقرير":"Report Title",span:2,children:s.jsx(Fj,{strong:!0,children:g.title})}),s.jsx(ve.Item,{label:e==="ar"?"العميل":"Client",children:g.client}),s.jsx(ve.Item,{label:e==="ar"?"نوع التقرير":"Report Type",children:g.reportType}),s.jsx(ve.Item,{label:e==="ar"?"التاريخ":"Date",children:g.date}),s.jsx(ve.Item,{label:e==="ar"?"الحالة":"Status",span:2,children:s.jsx(le,{color:g.status==="APPROVED"?"green":g.status==="REJECTED"?"red":"orange",icon:g.status==="APPROVED"?s.jsx(vt,{}):g.status==="REJECTED"?s.jsx(uc,{}):s.jsx(Cn,{}),children:g.status==="UNDER_REVIEW"?e==="ar"?"قيد المراجعة":"Under Review":g.status==="APPROVED"?e==="ar"?"موافق عليه":"Approved":e==="ar"?"مرفوض":"Rejected"})})]}),g.pdfUrl&&s.jsxs("div",{className:"mt-4",children:[s.jsx(Fj,{strong:!0,className:"block mb-2",children:e==="ar"?"معاينة PDF:":"PDF Preview:"}),s.jsx("iframe",{src:g.pdfUrl,style:{width:"100%",height:"500px",border:"1px solid #d9d9d9"},title:"PDF Preview"})]}),!g.pdfUrl&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Ct,{style:{fontSize:"48px",marginBottom:"16px"}}),s.jsx(fD,{children:e==="ar"?"لا توجد معاينة متاحة":"No preview available"})]})]})})]})},mD=()=>s.jsx(nD,{children:s.jsxs(th,{children:[s.jsx(Se,{path:"/",element:s.jsx(aD,{})}),s.jsx(Se,{path:"/sessions",element:s.jsx(sD,{})}),s.jsx(Se,{path:"/bookings",element:s.jsx(dD,{})}),s.jsx(Se,{path:"/chat/:bookingId?",element:s.jsx(wp,{})}),s.jsx(Se,{path:"/chat/session/:sessionId",element:s.jsx(wp,{})}),s.jsx(Se,{path:"/sessions/:sessionId",element:s.jsx(wp,{})}),s.jsx(Se,{path:"/reports",element:s.jsx(pD,{})}),s.jsx(Se,{path:"/profile",element:s.jsx(oD,{})}),s.jsx(Se,{path:"/earnings",element:s.jsx(lD,{})}),s.jsx(Se,{path:"/support",element:s.jsx(cD,{})}),s.jsx(Se,{path:"*",element:s.jsx(Dn,{to:"/consultant",replace:!0})})]})}),YC=()=>{const[t,e]=A.useState({width:typeof window<"u"?window.innerWidth:1024,height:typeof window<"u"?window.innerHeight:768});return A.useEffect(()=>{function r(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),t},{Header:gD,Sider:xD,Content:yD}=Qe,vD=({children:t})=>{const{t:e,language:r,toggleLanguage:n}=je(),{theme:a,settings:i}=Fa(),{user:o,logout:l}=pr(),c=nt(),u=wi(),{width:d}=YC(),f=d<768,[h,p]=A.useState(f),[g,x]=A.useState(!1),[m,y]=A.useState(!1),v=r==="ar";A.useEffect(()=>{f&&p(!0)},[f]),A.useEffect(()=>{const k=document.querySelector(".admin-content");k&&(k.classList.add("fade-in"),setTimeout(()=>{k.classList.remove("fade-in")},500))},[u.pathname]);const w=()=>{l(),c("/login",{replace:!0})},N=[{key:"/admin",icon:s.jsx(VC,{}),label:r==="ar"?"لوحة التحكم":"Dashboard"},{key:"/admin/clients",icon:s.jsx(ke,{}),label:r==="ar"?"العملاء":"Clients"},{key:"/admin/consultants",icon:s.jsx(en,{}),label:r==="ar"?"المستشارون":"Consultants"},{key:"/admin/sessions",icon:s.jsx(Dt,{}),label:r==="ar"?"الجلسات":"Sessions"},{key:"/admin/payments",icon:s.jsx(tr,{}),label:r==="ar"?"المدفوعات":"Payments"},{key:"/admin/articles",icon:s.jsx(lo,{}),label:r==="ar"?"المقالات":"Articles"},{key:"/admin/services",icon:s.jsx(ui,{}),label:r==="ar"?"الخدمات":"Services"},{key:"/admin/sliders",icon:s.jsx(ub,{}),label:r==="ar"?"السلايدرات":"Sliders"},{key:"/admin/reports",icon:s.jsx(Ct,{}),label:r==="ar"?"التقارير":"Reports"},{key:"/admin/partners",icon:s.jsx(en,{}),label:r==="ar"?"الشركاء":"Partners"},{key:"/admin/categories",icon:s.jsx(ui,{}),label:r==="ar"?"الفئات":"Categories"},{key:"/admin/monitoring",icon:s.jsx(cc,{}),label:r==="ar"?"المراقبة":"Monitoring"},{key:"/admin/chat",icon:s.jsx(Ut,{}),label:r==="ar"?"المحادثات":"Chat"},{key:"/admin/support",icon:s.jsx(Ct,{}),label:r==="ar"?"الدعم الفني":"Support"},{key:"/admin/permissions",icon:s.jsx(ke,{}),label:r==="ar"?"الصلاحيات":"Permissions"},{key:"/admin/settings",icon:s.jsx(co,{}),label:r==="ar"?"الإعدادات":"Settings"}],b=[{key:"profile",icon:s.jsx(ke,{}),label:r==="ar"?"الملف الشخصي":"Profile",onClick:({domEvent:k})=>{k&&(k.stopPropagation(),k.preventDefault()),setTimeout(()=>{y(!1),c("/admin/profile")},100)}},{key:"settings",icon:s.jsx(co,{}),label:r==="ar"?"الإعدادات":"Settings",onClick:({domEvent:k})=>{k&&(k.stopPropagation(),k.preventDefault()),setTimeout(()=>{y(!1),c("/admin/settings")},100)}},{type:"divider"},{key:"logout",icon:s.jsx(lb,{}),label:r==="ar"?"تسجيل الخروج":"Logout",onClick:({domEvent:k})=>{k&&(k.stopPropagation(),k.preventDefault()),setTimeout(()=>{y(!1),w()},100)}}],S=f?{display:"none"}:{overflow:"auto",height:"100vh",position:"fixed",top:0,bottom:0,[v?"right":"left"]:0,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",zIndex:1e3},j=f?{[v?"marginRight":"marginLeft"]:0}:{transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",[v?"marginRight":"marginLeft"]:h?80:250},C=s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`p-4 sm:p-6 flex items-center justify-between border-b ${a==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-gradient-to-r from-white to-gray-50"}`,children:s.jsxs("div",{className:`flex items-center gap-3 transition-all duration-300 ${h&&!f?"justify-center w-full":""}`,children:[i.logo?s.jsx("img",{src:i.logo,alt:"Logo",className:`${h&&!f?"w-15 h-12":"h-10"} object-contain cursor-pointer transition-all duration-300`,onClick:()=>c("/admin")}):s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-olive-green-600 via-olive-green-500 to-turquoise-500 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300 cursor-pointer",onClick:()=>c("/admin"),style:{backgroundColor:i.primaryColor},children:s.jsx("span",{className:"text-white font-bold text-xl",children:r==="ar"?i.dashboardNameAr?.[0]||"ج":i.dashboardName?.[0]||"J"})}),!h&&!f&&s.jsx("div",{className:"animate-fade-in cursor-pointer",onClick:()=>c("/admin"),children:s.jsx("div",{className:`text-xs ${a==="dark"?"text-gray-400":"text-gray-500"}`})})]})}),s.jsx(lc,{mode:"inline",selectedKeys:[u.pathname],items:N,onClick:({key:k})=>{c(k),f&&x(!1)},className:"border-0 mt-4 px-2 admin-menu",style:{background:"transparent"}}),!f&&s.jsx("div",{className:"absolute bottom-4 left-0 right-0 px-4",children:s.jsx(P,{type:"text",icon:h?v?s.jsx(no,{}):s.jsx(ao,{}):v?s.jsx(ao,{}):s.jsx(no,{}),onClick:()=>p(!h),className:"w-full hover:bg-olive-green-50 text-olive-green-600 border border-olive-green-200 rounded-lg transition-all duration-300",children:!h&&s.jsx("span",{className:"ml-2",children:r==="ar"?"طي":"Collapse"})})})]});return s.jsxs(Qe,{className:"min-h-screen",children:[!f&&s.jsx(xD,{trigger:null,collapsible:!0,collapsed:h,width:250,className:"admin-sidebar bg-gradient-to-b from-white to-gray-50 shadow-2xl border-r border-gray-200",style:S,children:C}),f&&s.jsx(kC,{title:s.jsx("div",{className:"flex items-center gap-3",children:i.logo?s.jsx("img",{src:i.logo,alt:"Logo",className:"h-10 object-contain",onClick:()=>{c("/admin"),x(!1)}}):s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-olive-green-600 via-olive-green-500 to-turquoise-500 rounded-xl flex items-center justify-center shadow-lg",style:{backgroundColor:i.primaryColor},onClick:()=>{c("/admin"),x(!1)},children:s.jsx("span",{className:"text-white font-bold text-xl",children:r==="ar"?i.dashboardNameAr?.[0]||"ج":i.dashboardName?.[0]||"J"})})}),placement:v?"right":"left",onClose:()=>x(!1),open:g,width:280,className:"admin-drawer",styles:{body:{padding:0}},children:s.jsx("div",{className:"h-full flex flex-col",children:s.jsx("div",{className:"flex-1 overflow-y-auto",children:C})})}),s.jsxs(Qe,{style:j,className:"transition-all duration-300",children:[s.jsxs(gD,{className:"bg-white shadow-professional-lg px-3 sm:px-6 flex items-center justify-between fixed top-0 z-[1001] backdrop-blur-sm bg-white/95 glass-effect",style:{position:"fixed",width:f?"100%":`calc(100% - ${h?80:250}px)`,[v?"right":"left"]:f?0:h?80:250,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)"},children:[s.jsx(P,{type:"text",icon:s.jsx(oh,{}),onClick:()=>f?x(!0):p(!h),className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300",style:{pointerEvents:"auto"}}),!f&&s.jsx(z,{placeholder:r==="ar"?"بحث...":"Search...",prefix:s.jsx(Un,{className:"text-gray-400"}),className:"max-w-md mx-4 rounded-lg border-gray-200 focus:border-olive-green-500 transition-all duration-300 hidden md:block",allowClear:!0,style:{pointerEvents:"auto"}}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",style:{pointerEvents:"auto",position:"relative",zIndex:1002},children:[s.jsx(P,{type:"text",icon:s.jsx(na,{}),onClick:n,className:"text-base sm:text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300 font-semibold px-2 sm:px-4",title:r==="ar"?"Switch to English":"التبديل إلى العربية",style:{pointerEvents:"auto"},children:s.jsx("span",{className:"hidden xs:inline",children:r==="ar"?"EN":"AR"})}),s.jsx(fb,{userId:o?.id}),s.jsx(P,{type:"text",icon:s.jsx(Ut,{}),className:"text-base sm:text-lg hover:bg-olive-green-50 text-gray-600 rounded-lg transition-all duration-300 hidden sm:inline-flex",style:{pointerEvents:"auto"}}),s.jsx(nh,{menu:{items:b},placement:v?"bottomLeft":"bottomRight",trigger:["click"],open:m,destroyTooltipOnHide:!1,transitionName:"",getPopupContainer:()=>document.body,popupRender:k=>s.jsx("div",{onMouseDown:O=>{O.stopPropagation(),O.preventDefault()},onClick:O=>{O.stopPropagation()},children:k}),onOpenChange:k=>{k!==m&&y(k)},children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 cursor-pointer hover:bg-gray-100 px-2 sm:px-3 py-1 sm:py-2 rounded-lg group",children:[s.jsx(at,{src:o?.avatar||o?.admin?.profilePicture,icon:s.jsx(ke,{}),size:f?"default":"large",className:"ring-2 ring-olive-green-200 group-hover:ring-olive-green-400 transition-all duration-300"}),s.jsx("span",{className:"hidden lg:inline font-medium text-gray-700 text-sm sm:text-base",children:o?.admin?`${o.admin.firstName} ${o.admin.lastName}`:o?.email||(r==="ar"?"المدير":"Admin")})]})})]})]}),s.jsx(yD,{className:"p-3 sm:p-4 md:p-6 bg-gradient-to-br from-gray-50 via-white to-gray-50 min-h-screen admin-content",style:{marginTop:f?"56px":"64px"},children:s.jsx("div",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:t})})]})]})};function KC(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=KC(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Ve(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=KC(t))&&(n&&(n+=" "),n+=e);return n}var Sp,Bj;function Gr(){if(Bj)return Sp;Bj=1;var t=Array.isArray;return Sp=t,Sp}var Np,qj;function JC(){if(qj)return Np;qj=1;var t=typeof xu=="object"&&xu&&xu.Object===Object&&xu;return Np=t,Np}var Ap,Uj;function da(){if(Uj)return Ap;Uj=1;var t=JC(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return Ap=r,Ap}var Cp,Vj;function iu(){if(Vj)return Cp;Vj=1;var t=da(),e=t.Symbol;return Cp=e,Cp}var kp,Hj;function bD(){if(Hj)return kp;Hj=1;var t=iu(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var l=r.call(o,a),c=o[a];try{o[a]=void 0;var u=!0}catch{}var d=n.call(o);return u&&(l?o[a]=c:delete o[a]),d}return kp=i,kp}var Ep,Wj;function jD(){if(Wj)return Ep;Wj=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return Ep=r,Ep}var Op,Gj;function Ba(){if(Gj)return Op;Gj=1;var t=iu(),e=bD(),r=jD(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?a:n:i&&i in Object(l)?e(l):r(l)}return Op=o,Op}var Pp,Yj;function qa(){if(Yj)return Pp;Yj=1;function t(e){return e!=null&&typeof e=="object"}return Pp=t,Pp}var Tp,Kj;function Yo(){if(Kj)return Tp;Kj=1;var t=Ba(),e=qa(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Tp=n,Tp}var Ip,Jj;function mb(){if(Jj)return Ip;Jj=1;var t=Gr(),e=Yo(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return Ip=a,Ip}var Mp,Xj;function js(){if(Xj)return Mp;Xj=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Mp=t,Mp}var Rp,Qj;function gb(){if(Qj)return Rp;Qj=1;var t=Ba(),e=js(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==n||c==a||c==r||c==i}return Rp=o,Rp}var _p,Zj;function wD(){if(Zj)return _p;Zj=1;var t=da(),e=t["__core-js_shared__"];return _p=e,_p}var Dp,ew;function SD(){if(ew)return Dp;ew=1;var t=wD(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return Dp=r,Dp}var $p,tw;function XC(){if(tw)return $p;tw=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return $p=r,$p}var Lp,rw;function ND(){if(rw)return Lp;rw=1;var t=gb(),e=SD(),r=js(),n=XC(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!r(h)||e(h))return!1;var p=t(h)?d:i;return p.test(n(h))}return Lp=f,Lp}var zp,nw;function AD(){if(nw)return zp;nw=1;function t(e,r){return e?.[r]}return zp=t,zp}var Fp,aw;function Ni(){if(aw)return Fp;aw=1;var t=ND(),e=AD();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return Fp=r,Fp}var Bp,sw;function ch(){if(sw)return Bp;sw=1;var t=Ni(),e=t(Object,"create");return Bp=e,Bp}var qp,iw;function CD(){if(iw)return qp;iw=1;var t=ch();function e(){this.__data__=t?t(null):{},this.size=0}return qp=e,qp}var Up,ow;function kD(){if(ow)return Up;ow=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Up=t,Up}var Vp,lw;function ED(){if(lw)return Vp;lw=1;var t=ch(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var l=o[i];return l===e?void 0:l}return n.call(o,i)?o[i]:void 0}return Vp=a,Vp}var Hp,cw;function OD(){if(cw)return Hp;cw=1;var t=ch(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Hp=n,Hp}var Wp,uw;function PD(){if(uw)return Wp;uw=1;var t=ch(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Wp=r,Wp}var Gp,dw;function TD(){if(dw)return Gp;dw=1;var t=CD(),e=kD(),r=ED(),n=OD(),a=PD();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Gp=i,Gp}var Yp,fw;function ID(){if(fw)return Yp;fw=1;function t(){this.__data__=[],this.size=0}return Yp=t,Yp}var Kp,hw;function xb(){if(hw)return Kp;hw=1;function t(e,r){return e===r||e!==e&&r!==r}return Kp=t,Kp}var Jp,pw;function uh(){if(pw)return Jp;pw=1;var t=xb();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return Jp=e,Jp}var Xp,mw;function MD(){if(mw)return Xp;mw=1;var t=uh(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return Xp=n,Xp}var Qp,gw;function RD(){if(gw)return Qp;gw=1;var t=uh();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return Qp=e,Qp}var Zp,xw;function _D(){if(xw)return Zp;xw=1;var t=uh();function e(r){return t(this.__data__,r)>-1}return Zp=e,Zp}var em,yw;function DD(){if(yw)return em;yw=1;var t=uh();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return em=e,em}var tm,vw;function dh(){if(vw)return tm;vw=1;var t=ID(),e=MD(),r=RD(),n=_D(),a=DD();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,tm=i,tm}var rm,bw;function yb(){if(bw)return rm;bw=1;var t=Ni(),e=da(),r=t(e,"Map");return rm=r,rm}var nm,jw;function $D(){if(jw)return nm;jw=1;var t=TD(),e=dh(),r=yb();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return nm=n,nm}var am,ww;function LD(){if(ww)return am;ww=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return am=t,am}var sm,Sw;function fh(){if(Sw)return sm;Sw=1;var t=LD();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return sm=e,sm}var im,Nw;function zD(){if(Nw)return im;Nw=1;var t=fh();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return im=e,im}var om,Aw;function FD(){if(Aw)return om;Aw=1;var t=fh();function e(r){return t(this,r).get(r)}return om=e,om}var lm,Cw;function BD(){if(Cw)return lm;Cw=1;var t=fh();function e(r){return t(this,r).has(r)}return lm=e,lm}var cm,kw;function qD(){if(kw)return cm;kw=1;var t=fh();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return cm=e,cm}var um,Ew;function vb(){if(Ew)return um;Ew=1;var t=$D(),e=zD(),r=FD(),n=BD(),a=qD();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,um=i,um}var dm,Ow;function QC(){if(Ow)return dm;Ow=1;var t=vb(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,l=a?a.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var u=n.apply(this,o);return i.cache=c.set(l,u)||c,u};return i.cache=new(r.Cache||t),i}return r.Cache=t,dm=r,dm}var fm,Pw;function UD(){if(Pw)return fm;Pw=1;var t=QC(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return fm=r,fm}var hm,Tw;function VD(){if(Tw)return hm;Tw=1;var t=UD(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,l,c,u){i.push(c?u.replace(r,"$1"):l||o)}),i});return hm=n,hm}var pm,Iw;function bb(){if(Iw)return pm;Iw=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return pm=t,pm}var mm,Mw;function HD(){if(Mw)return mm;Mw=1;var t=iu(),e=bb(),r=Gr(),n=Yo(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return e(l,o)+"";if(n(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return mm=o,mm}var gm,Rw;function ZC(){if(Rw)return gm;Rw=1;var t=HD();function e(r){return r==null?"":t(r)}return gm=e,gm}var xm,_w;function ek(){if(_w)return xm;_w=1;var t=Gr(),e=mb(),r=VD(),n=ZC();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return xm=a,xm}var ym,Dw;function hh(){if(Dw)return ym;Dw=1;var t=Yo();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return ym=e,ym}var vm,$w;function jb(){if($w)return vm;$w=1;var t=ek(),e=hh();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return vm=r,vm}var bm,Lw;function tk(){if(Lw)return bm;Lw=1;var t=jb();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return bm=e,bm}var WD=tk();const ln=it(WD);var jm,zw;function GD(){if(zw)return jm;zw=1;function t(e){return e==null}return jm=t,jm}var YD=GD();const Ue=it(YD);var wm,Fw;function KD(){if(Fw)return wm;Fw=1;var t=Ba(),e=Gr(),r=qa(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return wm=a,wm}var JD=KD();const di=it(JD);var XD=gb();const $e=it(XD);var QD=js();const Ko=it(QD);var Sm,Bw;function rk(){if(Bw)return Sm;Bw=1;var t=Ba(),e=qa(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return Sm=n,Sm}var Nm,qw;function ZD(){if(qw)return Nm;qw=1;var t=rk();function e(r){return t(r)&&r!=+r}return Nm=e,Nm}var e7=ZD();const Jo=it(e7);var t7=rk();const r7=it(t7);var _r=function(e){return e===0?0:e>0?1:-1},Ws=function(e){return di(e)&&e.indexOf("%")===e.length-1},se=function(e){return r7(e)&&!Jo(e)},n7=function(e){return Ue(e)},er=function(e){return se(e)||di(e)},a7=0,Xo=function(e){var r=++a7;return"".concat(e||"").concat(r)},Dr=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!se(e)&&!di(e))return n;var i;if(Ws(e)){var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return Jo(i)&&(i=n),a&&i>r&&(i=r),i},Za=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},s7=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},qr=function(e,r){return se(e)&&se(r)?function(n){return e+n*(r-e)}:function(){return r}};function hd(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):ln(n,e))===r})}var i7=function(e,r){return se(e)&&se(r)?e-r:di(e)&&di(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Xi(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function ay(t){"@babel/helpers - typeof";return ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ay(t)}var o7=["viewBox","children"],l7=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Uw=["points","pathLength"],Am={svg:o7,polygon:Uw,polyline:Uw},wb=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],pd=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(A.isValidElement(e)&&(n=e.props),!Ko(n))return null;var a={};return Object.keys(n).forEach(function(i){wb.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},c7=function(e,r,n){return function(a){return e(r,n,a),null}},fi=function(e,r,n){if(!Ko(e)||ay(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var o=e[i];wb.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=c7(o,r,n))}),a},u7=["children"],d7=["children"];function Vw(t,e){if(t==null)return{};var r=f7(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function f7(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function sy(t){"@babel/helpers - typeof";return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sy(t)}var Hw={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ka=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},Ww=null,Cm=null,Sb=function t(e){if(e===Ww&&Array.isArray(Cm))return Cm;var r=[];return A.Children.forEach(e,function(n){Ue(n)||(xI.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),Cm=r,Ww=e,r};function kn(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return ka(a)}):n=[ka(e)],Sb(t).forEach(function(a){var i=ln(a,"type.displayName")||ln(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Qr(t,e){var r=kn(t,e);return r&&r[0]}var Gw=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!se(n)||n<=0||!se(a)||a<=0)},h7=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],p7=function(e){return e&&e.type&&di(e.type)&&h7.indexOf(e.type)>=0},m7=function(e){return e&&sy(e)==="object"&&"clipDot"in e},g7=function(e,r,n,a){var i,o=(i=Am?.[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!$e(e)&&(a&&o.includes(r)||l7.includes(r))||n&&wb.includes(r)},Pe=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(A.isValidElement(e)&&(a=e.props),!Ko(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;g7((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},iy=function t(e,r){if(e===r)return!0;var n=A.Children.count(e);if(n!==A.Children.count(r))return!1;if(n===0)return!0;if(n===1)return Yw(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!Yw(i,o))return!1}return!0},Yw=function(e,r){if(Ue(e)&&Ue(r))return!0;if(!Ue(e)&&!Ue(r)){var n=e.props||{},a=n.children,i=Vw(n,u7),o=r.props||{},l=o.children,c=Vw(o,d7);return a&&l?Xi(i,c)&&iy(a,l):!a&&!l?Xi(i,c):!1}return!1},Kw=function(e,r){var n=[],a={};return Sb(e).forEach(function(i,o){if(p7(i))n.push(i);else if(i){var l=ka(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,o);n.push(f),a[l]=!0}}}),n},x7=function(e){var r=e&&e.type;return r&&Hw[r]?Hw[r]:null},y7=function(e,r){return Sb(r).indexOf(e)},v7=["children","width","height","viewBox","className","style","title","desc"];function oy(){return oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oy.apply(this,arguments)}function b7(t,e){if(t==null)return{};var r=j7(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function j7(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ly(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,o=t.style,l=t.title,c=t.desc,u=b7(t,v7),d=a||{width:r,height:n,x:0,y:0},f=Ve("recharts-surface",i);return D.createElement("svg",oy({},Pe(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),D.createElement("title",null,l),D.createElement("desc",null,c),e)}var w7=["children","className"];function cy(){return cy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cy.apply(this,arguments)}function S7(t,e){if(t==null)return{};var r=N7(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function N7(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var tt=D.forwardRef(function(t,e){var r=t.children,n=t.className,a=S7(t,w7),i=Ve("recharts-layer",n);return D.createElement("g",cy({className:i},Pe(a,!0),{ref:e}),r)}),Bn=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},km,Jw;function A7(){if(Jw)return km;Jw=1;function t(e,r,n){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=e[a+r];return o}return km=t,km}var Em,Xw;function C7(){if(Xw)return Em;Xw=1;var t=A7();function e(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:t(r,n,a)}return Em=e,Em}var Om,Qw;function nk(){if(Qw)return Om;Qw=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+a+i+"]");function c(u){return l.test(u)}return Om=c,Om}var Pm,Zw;function k7(){if(Zw)return Pm;Zw=1;function t(e){return e.split("")}return Pm=t,Pm}var Tm,e2;function E7(){if(e2)return Tm;e2=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="["+t+"]",l="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",d="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",g=u+"?",x="["+i+"]?",m="(?:"+p+"(?:"+[d,f,h].join("|")+")"+x+g+")*",y=x+g+m,v="(?:"+[d+l+"?",l,f,h,o].join("|")+")",w=RegExp(c+"(?="+c+")|"+v+y,"g");function N(b){return b.match(w)||[]}return Tm=N,Tm}var Im,t2;function O7(){if(t2)return Im;t2=1;var t=k7(),e=nk(),r=E7();function n(a){return e(a)?r(a):t(a)}return Im=n,Im}var Mm,r2;function P7(){if(r2)return Mm;r2=1;var t=C7(),e=nk(),r=O7(),n=ZC();function a(i){return function(o){o=n(o);var l=e(o)?r(o):void 0,c=l?l[0]:o.charAt(0),u=l?t(l,1).join(""):o.slice(1);return c[i]()+u}}return Mm=a,Mm}var Rm,n2;function T7(){if(n2)return Rm;n2=1;var t=P7(),e=t("toUpperCase");return Rm=e,Rm}var I7=T7();const ph=it(I7);function Nt(t){return function(){return t}}const ak=Math.cos,md=Math.sin,Vn=Math.sqrt,gd=Math.PI,mh=2*gd,uy=Math.PI,dy=2*uy,qs=1e-6,M7=dy-qs;function sk(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function R7(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return sk;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class _7{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?sk:R7(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-e,u=a-r,d=o-e,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>qs)if(!(Math.abs(f*c-u*d)>qs)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-o,g=a-l,x=c*c+u*u,m=p*p+g*g,y=Math.sqrt(x),v=Math.sqrt(h),w=i*Math.tan((uy-Math.acos((x+h-m)/(2*y*v)))/2),N=w/v,b=w/y;Math.abs(N-1)>qs&&this._append`L${e+N*d},${r+N*f}`,this._append`A${i},${i},0,0,${+(f*p>d*g)},${this._x1=e+b*c},${this._y1=r+b*u}`}}arc(e,r,n,a,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>qs||Math.abs(this._y1-d)>qs)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%dy+dy),h>M7?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>qs&&this._append`A${n},${n},0,${+(h>=uy)},${f},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Nb(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new _7(e)}function Ab(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ik(t){this._context=t}ik.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function gh(t){return new ik(t)}function ok(t){return t[0]}function lk(t){return t[1]}function ck(t,e){var r=Nt(!0),n=null,a=gh,i=null,o=Nb(l);t=typeof t=="function"?t:t===void 0?ok:Nt(t),e=typeof e=="function"?e:e===void 0?lk:Nt(e);function l(c){var u,d=(c=Ab(c)).length,f,h=!1,p;for(n==null&&(i=a(p=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(f,u,c),+e(f,u,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Nt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Nt(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Nt(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function Su(t,e,r){var n=null,a=Nt(!0),i=null,o=gh,l=null,c=Nb(u);t=typeof t=="function"?t:t===void 0?ok:Nt(+t),e=typeof e=="function"?e:Nt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?lk:Nt(+r);function u(f){var h,p,g,x=(f=Ab(f)).length,m,y=!1,v,w=new Array(x),N=new Array(x);for(i==null&&(l=o(v=c())),h=0;h<=x;++h){if(!(h<x&&a(m=f[h],h,f))===y)if(y=!y)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=p;--g)l.point(w[g],N[g]);l.lineEnd(),l.areaEnd()}y&&(w[h]=+t(m,h,f),N[h]=+e(m,h,f),l.point(n?+n(m,h,f):w[h],r?+r(m,h,f):N[h]))}if(v)return l=null,v+""||null}function d(){return ck().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Nt(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Nt(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Nt(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Nt(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Nt(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Nt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Nt(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class uk{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function D7(t){return new uk(t,!0)}function $7(t){return new uk(t,!1)}const Cb={draw(t,e){const r=Vn(e/gd);t.moveTo(r,0),t.arc(0,0,r,0,mh)}},L7={draw(t,e){const r=Vn(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},dk=Vn(1/3),z7=dk*2,F7={draw(t,e){const r=Vn(e/z7),n=r*dk;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},B7={draw(t,e){const r=Vn(e),n=-r/2;t.rect(n,n,r,r)}},q7=.8908130915292852,fk=md(gd/10)/md(7*gd/10),U7=md(mh/10)*fk,V7=-ak(mh/10)*fk,H7={draw(t,e){const r=Vn(e*q7),n=U7*r,a=V7*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const o=mh*i/5,l=ak(o),c=md(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},_m=Vn(3),W7={draw(t,e){const r=-Vn(e/(_m*3));t.moveTo(0,r*2),t.lineTo(-_m*r,-r),t.lineTo(_m*r,-r),t.closePath()}},pn=-.5,mn=Vn(3)/2,fy=1/Vn(12),G7=(fy/2+1)*3,Y7={draw(t,e){const r=Vn(e/G7),n=r/2,a=r*fy,i=n,o=r*fy+r,l=-i,c=o;t.moveTo(n,a),t.lineTo(i,o),t.lineTo(l,c),t.lineTo(pn*n-mn*a,mn*n+pn*a),t.lineTo(pn*i-mn*o,mn*i+pn*o),t.lineTo(pn*l-mn*c,mn*l+pn*c),t.lineTo(pn*n+mn*a,pn*a-mn*n),t.lineTo(pn*i+mn*o,pn*o-mn*i),t.lineTo(pn*l+mn*c,pn*c-mn*l),t.closePath()}};function K7(t,e){let r=null,n=Nb(a);t=typeof t=="function"?t:Nt(t||Cb),e=typeof e=="function"?e:Nt(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Nt(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:Nt(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function xd(){}function yd(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function hk(t){this._context=t}hk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function J7(t){return new hk(t)}function pk(t){this._context=t}pk.prototype={areaStart:xd,areaEnd:xd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:yd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function X7(t){return new pk(t)}function mk(t){this._context=t}mk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:yd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Q7(t){return new mk(t)}function gk(t){this._context=t}gk.prototype={areaStart:xd,areaEnd:xd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Z7(t){return new gk(t)}function a2(t){return t<0?-1:1}function s2(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(a2(i)+a2(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function i2(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Dm(t,e,r){var n=t._x0,a=t._y0,i=t._x1,o=t._y1,l=(i-n)/3;t._context.bezierCurveTo(n+l,a+l*e,i-l,o-l*r,i,o)}function vd(t){this._context=t}vd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Dm(this,this._t0,i2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Dm(this,i2(this,r=s2(this,t,e)),r);break;default:Dm(this,this._t0,r=s2(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function xk(t){this._context=new yk(t)}(xk.prototype=Object.create(vd.prototype)).point=function(t,e){vd.prototype.point.call(this,e,t)};function yk(t){this._context=t}yk.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function e$(t){return new vd(t)}function t$(t){return new xk(t)}function vk(t){this._context=t}vk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=o2(t),a=o2(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function o2(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function r$(t){return new vk(t)}function xh(t,e){this._context=t,this._t=e}xh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function n$(t){return new xh(t,.5)}function a$(t){return new xh(t,0)}function s$(t){return new xh(t,1)}function ho(t,e){if((o=t.length)>1)for(var r=1,n,a,i=t[e[0]],o,l=i.length;r<o;++r)for(a=i,i=t[e[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function hy(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function i$(t,e){return t[e]}function o$(t){const e=[];return e.key=t,e}function l$(){var t=Nt([]),e=hy,r=ho,n=i$;function a(i){var o=Array.from(t.apply(this,arguments),o$),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=Ab(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Nt(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Nt(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?hy:typeof i=="function"?i:Nt(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??ho,a):r},a}function c$(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}ho(t,e)}}function u$(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}ho(t,e)}}function d$(t,e){if(!(!((o=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,g=0;g<l;++g){var x=t[e[g]],m=x[n][1]||0,y=x[n-1][1]||0;p+=m-y}c+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,ho(t,e)}}function fc(t){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fc(t)}var f$=["type","size","sizeType"];function py(){return py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},py.apply(this,arguments)}function l2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function c2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?l2(Object(r),!0).forEach(function(n){h$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function h$(t,e,r){return e=p$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p$(t){var e=m$(t,"string");return fc(e)=="symbol"?e:e+""}function m$(t,e){if(fc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function g$(t,e){if(t==null)return{};var r=x$(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function x$(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var bk={symbolCircle:Cb,symbolCross:L7,symbolDiamond:F7,symbolSquare:B7,symbolStar:H7,symbolTriangle:W7,symbolWye:Y7},y$=Math.PI/180,v$=function(e){var r="symbol".concat(ph(e));return bk[r]||Cb},b$=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*y$;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},j$=function(e,r){bk["symbol".concat(ph(e))]=r},kb=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,o=e.sizeType,l=o===void 0?"area":o,c=g$(e,f$),u=c2(c2({},c),{},{type:n,size:i,sizeType:l}),d=function(){var m=v$(n),y=K7().type(m).size(b$(i,l,n));return y()},f=u.className,h=u.cx,p=u.cy,g=Pe(u,!0);return h===+h&&p===+p&&i===+i?D.createElement("path",py({},g,{className:Ve("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};kb.registerSymbol=j$;function po(t){"@babel/helpers - typeof";return po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},po(t)}function my(){return my=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},my.apply(this,arguments)}function u2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function w$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u2(Object(r),!0).forEach(function(n){hc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function S$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wk(n.key),n)}}function A$(t,e,r){return e&&N$(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function C$(t,e,r){return e=bd(e),k$(t,jk()?Reflect.construct(e,r||[],bd(t).constructor):e.apply(t,r))}function k$(t,e){if(e&&(po(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E$(t)}function E$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jk=function(){return!!t})()}function bd(t){return bd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bd(t)}function O$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gy(t,e)}function gy(t,e){return gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gy(t,e)}function hc(t,e,r){return e=wk(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wk(t){var e=P$(t,"string");return po(e)=="symbol"?e:e+""}function P$(t,e){if(po(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(po(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gn=32,Eb=(function(t){function e(){return S$(this,e),C$(this,e,arguments)}return O$(e,t),A$(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=gn/2,o=gn/6,l=gn/3,c=n.inactive?a:n.color;if(n.type==="plainline")return D.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:gn,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return D.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(gn,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return D.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(gn/8,"h").concat(gn,"v").concat(gn*3/4,"h").concat(-gn,"z"),className:"recharts-legend-icon"});if(D.isValidElement(n.legendIcon)){var u=w$({},n);return delete u.legendIcon,D.cloneElement(n.legendIcon,u)}return D.createElement(kb,{fill:c,cx:i,cy:i,size:gn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:gn,height:gn},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,g){var x=p.formatter||c,m=Ve(hc(hc({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",p.inactive));if(p.type==="none")return null;var y=$e(p.value)?null:p.value;Bn(!$e(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=p.inactive?u:p.color;return D.createElement("li",my({className:m,style:f,key:"legend-item-".concat(g)},fi(n.props,p,g)),D.createElement(ly,{width:o,height:o,viewBox:d,style:h},n.renderIcon(p)),D.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},x?x(y,p,g):y))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return D.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(A.PureComponent);hc(Eb,"displayName","Legend");hc(Eb,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var $m,d2;function T$(){if(d2)return $m;d2=1;var t=dh();function e(){this.__data__=new t,this.size=0}return $m=e,$m}var Lm,f2;function I$(){if(f2)return Lm;f2=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return Lm=t,Lm}var zm,h2;function M$(){if(h2)return zm;h2=1;function t(e){return this.__data__.get(e)}return zm=t,zm}var Fm,p2;function R$(){if(p2)return Fm;p2=1;function t(e){return this.__data__.has(e)}return Fm=t,Fm}var Bm,m2;function _$(){if(m2)return Bm;m2=1;var t=dh(),e=yb(),r=vb(),n=200;function a(i,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<n-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(i,o),this.size=l.size,this}return Bm=a,Bm}var qm,g2;function Sk(){if(g2)return qm;g2=1;var t=dh(),e=T$(),r=I$(),n=M$(),a=R$(),i=_$();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,qm=o,qm}var Um,x2;function D$(){if(x2)return Um;x2=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return Um=e,Um}var Vm,y2;function $$(){if(y2)return Vm;y2=1;function t(e){return this.__data__.has(e)}return Vm=t,Vm}var Hm,v2;function Nk(){if(v2)return Hm;v2=1;var t=vb(),e=D$(),r=$$();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,Hm=n,Hm}var Wm,b2;function Ak(){if(b2)return Wm;b2=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return Wm=t,Wm}var Gm,j2;function Ck(){if(j2)return Gm;j2=1;function t(e,r){return e.has(r)}return Gm=t,Gm}var Ym,w2;function kk(){if(w2)return Ym;w2=1;var t=Nk(),e=Ak(),r=Ck(),n=1,a=2;function i(o,l,c,u,d,f){var h=c&n,p=o.length,g=l.length;if(p!=g&&!(h&&g>p))return!1;var x=f.get(o),m=f.get(l);if(x&&m)return x==l&&m==o;var y=-1,v=!0,w=c&a?new t:void 0;for(f.set(o,l),f.set(l,o);++y<p;){var N=o[y],b=l[y];if(u)var S=h?u(b,N,y,l,o,f):u(N,b,y,o,l,f);if(S!==void 0){if(S)continue;v=!1;break}if(w){if(!e(l,function(j,C){if(!r(w,C)&&(N===j||d(N,j,c,u,f)))return w.push(C)})){v=!1;break}}else if(!(N===b||d(N,b,c,u,f))){v=!1;break}}return f.delete(o),f.delete(l),v}return Ym=i,Ym}var Km,S2;function L$(){if(S2)return Km;S2=1;var t=da(),e=t.Uint8Array;return Km=e,Km}var Jm,N2;function z$(){if(N2)return Jm;N2=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return Jm=t,Jm}var Xm,A2;function Ob(){if(A2)return Xm;A2=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return Xm=t,Xm}var Qm,C2;function F$(){if(C2)return Qm;C2=1;var t=iu(),e=L$(),r=xb(),n=kk(),a=z$(),i=Ob(),o=1,l=2,c="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Map]",h="[object Number]",p="[object RegExp]",g="[object Set]",x="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",v="[object DataView]",w=t?t.prototype:void 0,N=w?w.valueOf:void 0;function b(S,j,C,k,O,I,M){switch(C){case v:if(S.byteLength!=j.byteLength||S.byteOffset!=j.byteOffset)return!1;S=S.buffer,j=j.buffer;case y:return!(S.byteLength!=j.byteLength||!I(new e(S),new e(j)));case c:case u:case h:return r(+S,+j);case d:return S.name==j.name&&S.message==j.message;case p:case x:return S==j+"";case f:var T=a;case g:var R=k&o;if(T||(T=i),S.size!=j.size&&!R)return!1;var L=M.get(S);if(L)return L==j;k|=l,M.set(S,j);var B=n(T(S),T(j),k,O,I,M);return M.delete(S),B;case m:if(N)return N.call(S)==N.call(j)}return!1}return Qm=b,Qm}var Zm,k2;function Ek(){if(k2)return Zm;k2=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return Zm=t,Zm}var eg,E2;function B$(){if(E2)return eg;E2=1;var t=Ek(),e=Gr();function r(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return eg=r,eg}var tg,O2;function q$(){if(O2)return tg;O2=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var l=e[n];r(l,n,e)&&(o[i++]=l)}return o}return tg=t,tg}var rg,P2;function U$(){if(P2)return rg;P2=1;function t(){return[]}return rg=t,rg}var ng,T2;function V$(){if(T2)return ng;T2=1;var t=q$(),e=U$(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(l){return n.call(o,l)}))}:e;return ng=i,ng}var ag,I2;function H$(){if(I2)return ag;I2=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return ag=t,ag}var sg,M2;function W$(){if(M2)return sg;M2=1;var t=Ba(),e=qa(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return sg=n,sg}var ig,R2;function Pb(){if(R2)return ig;R2=1;var t=W$(),e=qa(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return ig=i,ig}var Ll={exports:{}},og,_2;function G$(){if(_2)return og;_2=1;function t(){return!1}return og=t,og}Ll.exports;var D2;function Ok(){return D2||(D2=1,(function(t,e){var r=da(),n=G$(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;t.exports=u})(Ll,Ll.exports)),Ll.exports}var lg,$2;function Tb(){if($2)return lg;$2=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return lg=r,lg}var cg,L2;function Ib(){if(L2)return cg;L2=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return cg=e,cg}var ug,z2;function Y$(){if(z2)return ug;z2=1;var t=Ba(),e=Ib(),r=qa(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",f="[object Object]",h="[object RegExp]",p="[object Set]",g="[object String]",x="[object WeakMap]",m="[object ArrayBuffer]",y="[object DataView]",v="[object Float32Array]",w="[object Float64Array]",N="[object Int8Array]",b="[object Int16Array]",S="[object Int32Array]",j="[object Uint8Array]",C="[object Uint8ClampedArray]",k="[object Uint16Array]",O="[object Uint32Array]",I={};I[v]=I[w]=I[N]=I[b]=I[S]=I[j]=I[C]=I[k]=I[O]=!0,I[n]=I[a]=I[m]=I[i]=I[y]=I[o]=I[l]=I[c]=I[u]=I[d]=I[f]=I[h]=I[p]=I[g]=I[x]=!1;function M(T){return r(T)&&e(T.length)&&!!I[t(T)]}return ug=M,ug}var dg,F2;function Pk(){if(F2)return dg;F2=1;function t(e){return function(r){return e(r)}}return dg=t,dg}var zl={exports:{}};zl.exports;var B2;function K$(){return B2||(B2=1,(function(t,e){var r=JC(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,l=(function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();t.exports=l})(zl,zl.exports)),zl.exports}var fg,q2;function Tk(){if(q2)return fg;q2=1;var t=Y$(),e=Pk(),r=K$(),n=r&&r.isTypedArray,a=n?e(n):t;return fg=a,fg}var hg,U2;function J$(){if(U2)return hg;U2=1;var t=H$(),e=Pb(),r=Gr(),n=Ok(),a=Tb(),i=Tk(),o=Object.prototype,l=o.hasOwnProperty;function c(u,d){var f=r(u),h=!f&&e(u),p=!f&&!h&&n(u),g=!f&&!h&&!p&&i(u),x=f||h||p||g,m=x?t(u.length,String):[],y=m.length;for(var v in u)(d||l.call(u,v))&&!(x&&(v=="length"||p&&(v=="offset"||v=="parent")||g&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||a(v,y)))&&m.push(v);return m}return hg=c,hg}var pg,V2;function X$(){if(V2)return pg;V2=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return pg=e,pg}var mg,H2;function Ik(){if(H2)return mg;H2=1;function t(e,r){return function(n){return e(r(n))}}return mg=t,mg}var gg,W2;function Q$(){if(W2)return gg;W2=1;var t=Ik(),e=t(Object.keys,Object);return gg=e,gg}var xg,G2;function Z$(){if(G2)return xg;G2=1;var t=X$(),e=Q$(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&o.push(l);return o}return xg=a,xg}var yg,Y2;function ou(){if(Y2)return yg;Y2=1;var t=gb(),e=Ib();function r(n){return n!=null&&e(n.length)&&!t(n)}return yg=r,yg}var vg,K2;function yh(){if(K2)return vg;K2=1;var t=J$(),e=Z$(),r=ou();function n(a){return r(a)?t(a):e(a)}return vg=n,vg}var bg,J2;function e9(){if(J2)return bg;J2=1;var t=B$(),e=V$(),r=yh();function n(a){return t(a,r,e)}return bg=n,bg}var jg,X2;function t9(){if(X2)return jg;X2=1;var t=e9(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,l,c,u,d){var f=l&e,h=t(i),p=h.length,g=t(o),x=g.length;if(p!=x&&!f)return!1;for(var m=p;m--;){var y=h[m];if(!(f?y in o:n.call(o,y)))return!1}var v=d.get(i),w=d.get(o);if(v&&w)return v==o&&w==i;var N=!0;d.set(i,o),d.set(o,i);for(var b=f;++m<p;){y=h[m];var S=i[y],j=o[y];if(c)var C=f?c(j,S,y,o,i,d):c(S,j,y,i,o,d);if(!(C===void 0?S===j||u(S,j,l,c,d):C)){N=!1;break}b||(b=y=="constructor")}if(N&&!b){var k=i.constructor,O=o.constructor;k!=O&&"constructor"in i&&"constructor"in o&&!(typeof k=="function"&&k instanceof k&&typeof O=="function"&&O instanceof O)&&(N=!1)}return d.delete(i),d.delete(o),N}return jg=a,jg}var wg,Q2;function r9(){if(Q2)return wg;Q2=1;var t=Ni(),e=da(),r=t(e,"DataView");return wg=r,wg}var Sg,Z2;function n9(){if(Z2)return Sg;Z2=1;var t=Ni(),e=da(),r=t(e,"Promise");return Sg=r,Sg}var Ng,eS;function Mk(){if(eS)return Ng;eS=1;var t=Ni(),e=da(),r=t(e,"Set");return Ng=r,Ng}var Ag,tS;function a9(){if(tS)return Ag;tS=1;var t=Ni(),e=da(),r=t(e,"WeakMap");return Ag=r,Ag}var Cg,rS;function s9(){if(rS)return Cg;rS=1;var t=r9(),e=yb(),r=n9(),n=Mk(),a=a9(),i=Ba(),o=XC(),l="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",h="[object DataView]",p=o(t),g=o(e),x=o(r),m=o(n),y=o(a),v=i;return(t&&v(new t(new ArrayBuffer(1)))!=h||e&&v(new e)!=l||r&&v(r.resolve())!=u||n&&v(new n)!=d||a&&v(new a)!=f)&&(v=function(w){var N=i(w),b=N==c?w.constructor:void 0,S=b?o(b):"";if(S)switch(S){case p:return h;case g:return l;case x:return u;case m:return d;case y:return f}return N}),Cg=v,Cg}var kg,nS;function i9(){if(nS)return kg;nS=1;var t=Sk(),e=kk(),r=F$(),n=t9(),a=s9(),i=Gr(),o=Ok(),l=Tk(),c=1,u="[object Arguments]",d="[object Array]",f="[object Object]",h=Object.prototype,p=h.hasOwnProperty;function g(x,m,y,v,w,N){var b=i(x),S=i(m),j=b?d:a(x),C=S?d:a(m);j=j==u?f:j,C=C==u?f:C;var k=j==f,O=C==f,I=j==C;if(I&&o(x)){if(!o(m))return!1;b=!0,k=!1}if(I&&!k)return N||(N=new t),b||l(x)?e(x,m,y,v,w,N):r(x,m,j,y,v,w,N);if(!(y&c)){var M=k&&p.call(x,"__wrapped__"),T=O&&p.call(m,"__wrapped__");if(M||T){var R=M?x.value():x,L=T?m.value():m;return N||(N=new t),w(R,L,y,v,N)}}return I?(N||(N=new t),n(x,m,y,v,w,N)):!1}return kg=g,kg}var Eg,aS;function Mb(){if(aS)return Eg;aS=1;var t=i9(),e=qa();function r(n,a,i,o,l){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,r,l)}return Eg=r,Eg}var Og,sS;function o9(){if(sS)return Og;sS=1;var t=Sk(),e=Mb(),r=1,n=2;function a(i,o,l,c){var u=l.length,d=u,f=!c;if(i==null)return!d;for(i=Object(i);u--;){var h=l[u];if(f&&h[2]?h[1]!==i[h[0]]:!(h[0]in i))return!1}for(;++u<d;){h=l[u];var p=h[0],g=i[p],x=h[1];if(f&&h[2]){if(g===void 0&&!(p in i))return!1}else{var m=new t;if(c)var y=c(g,x,p,i,o,m);if(!(y===void 0?e(x,g,r|n,c,m):y))return!1}}return!0}return Og=a,Og}var Pg,iS;function Rk(){if(iS)return Pg;iS=1;var t=js();function e(r){return r===r&&!t(r)}return Pg=e,Pg}var Tg,oS;function l9(){if(oS)return Tg;oS=1;var t=Rk(),e=yh();function r(n){for(var a=e(n),i=a.length;i--;){var o=a[i],l=n[o];a[i]=[o,l,t(l)]}return a}return Tg=r,Tg}var Ig,lS;function _k(){if(lS)return Ig;lS=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return Ig=t,Ig}var Mg,cS;function c9(){if(cS)return Mg;cS=1;var t=o9(),e=l9(),r=_k();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return Mg=n,Mg}var Rg,uS;function u9(){if(uS)return Rg;uS=1;function t(e,r){return e!=null&&r in Object(e)}return Rg=t,Rg}var _g,dS;function d9(){if(dS)return _g;dS=1;var t=ek(),e=Pb(),r=Gr(),n=Tb(),a=Ib(),i=hh();function o(l,c,u){c=t(c,l);for(var d=-1,f=c.length,h=!1;++d<f;){var p=i(c[d]);if(!(h=l!=null&&u(l,p)))break;l=l[p]}return h||++d!=f?h:(f=l==null?0:l.length,!!f&&a(f)&&n(p,f)&&(r(l)||e(l)))}return _g=o,_g}var Dg,fS;function f9(){if(fS)return Dg;fS=1;var t=u9(),e=d9();function r(n,a){return n!=null&&e(n,a,t)}return Dg=r,Dg}var $g,hS;function h9(){if(hS)return $g;hS=1;var t=Mb(),e=tk(),r=f9(),n=mb(),a=Rk(),i=_k(),o=hh(),l=1,c=2;function u(d,f){return n(d)&&a(f)?i(o(d),f):function(h){var p=e(h,d);return p===void 0&&p===f?r(h,d):t(f,p,l|c)}}return $g=u,$g}var Lg,pS;function Qo(){if(pS)return Lg;pS=1;function t(e){return e}return Lg=t,Lg}var zg,mS;function p9(){if(mS)return zg;mS=1;function t(e){return function(r){return r?.[e]}}return zg=t,zg}var Fg,gS;function m9(){if(gS)return Fg;gS=1;var t=jb();function e(r){return function(n){return t(n,r)}}return Fg=e,Fg}var Bg,xS;function g9(){if(xS)return Bg;xS=1;var t=p9(),e=m9(),r=mb(),n=hh();function a(i){return r(i)?t(n(i)):e(i)}return Bg=a,Bg}var qg,yS;function fa(){if(yS)return qg;yS=1;var t=c9(),e=h9(),r=Qo(),n=Gr(),a=g9();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return qg=i,qg}var Ug,vS;function Dk(){if(vS)return Ug;vS=1;function t(e,r,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(r(e[o],o,e))return o;return-1}return Ug=t,Ug}var Vg,bS;function x9(){if(bS)return Vg;bS=1;function t(e){return e!==e}return Vg=t,Vg}var Hg,jS;function y9(){if(jS)return Hg;jS=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return Hg=t,Hg}var Wg,wS;function v9(){if(wS)return Wg;wS=1;var t=Dk(),e=x9(),r=y9();function n(a,i,o){return i===i?r(a,i,o):t(a,e,o)}return Wg=n,Wg}var Gg,SS;function b9(){if(SS)return Gg;SS=1;var t=v9();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return Gg=e,Gg}var Yg,NS;function j9(){if(NS)return Yg;NS=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return Yg=t,Yg}var Kg,AS;function w9(){if(AS)return Kg;AS=1;function t(){}return Kg=t,Kg}var Jg,CS;function S9(){if(CS)return Jg;CS=1;var t=Mk(),e=w9(),r=Ob(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return Jg=a,Jg}var Xg,kS;function N9(){if(kS)return Xg;kS=1;var t=Nk(),e=b9(),r=j9(),n=Ck(),a=S9(),i=Ob(),o=200;function l(c,u,d){var f=-1,h=e,p=c.length,g=!0,x=[],m=x;if(d)g=!1,h=r;else if(p>=o){var y=u?null:a(c);if(y)return i(y);g=!1,h=n,m=new t}else m=u?[]:x;e:for(;++f<p;){var v=c[f],w=u?u(v):v;if(v=d||v!==0?v:0,g&&w===w){for(var N=m.length;N--;)if(m[N]===w)continue e;u&&m.push(w),x.push(v)}else h(m,w,d)||(m!==x&&m.push(w),x.push(v))}return x}return Xg=l,Xg}var Qg,ES;function A9(){if(ES)return Qg;ES=1;var t=fa(),e=N9();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return Qg=r,Qg}var C9=A9();const OS=it(C9);function $k(t,e,r){return e===!0?OS(t,r):$e(e)?OS(t,e):t}function mo(t){"@babel/helpers - typeof";return mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mo(t)}var k9=["ref"];function PS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ma(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PS(Object(r),!0).forEach(function(n){vh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function E9(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zk(n.key),n)}}function O9(t,e,r){return e&&TS(t.prototype,e),r&&TS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function P9(t,e,r){return e=jd(e),T9(t,Lk()?Reflect.construct(e,r||[],jd(t).constructor):e.apply(t,r))}function T9(t,e){if(e&&(mo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I9(t)}function I9(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lk=function(){return!!t})()}function jd(t){return jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jd(t)}function M9(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xy(t,e)}function xy(t,e){return xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xy(t,e)}function vh(t,e,r){return e=zk(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zk(t){var e=R9(t,"string");return mo(e)=="symbol"?e:e+""}function R9(t,e){if(mo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _9(t,e){if(t==null)return{};var r=D9(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function D9(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $9(t){return t.value}function L9(t,e){if(D.isValidElement(t))return D.cloneElement(t,e);if(typeof t=="function")return D.createElement(t,e);e.ref;var r=_9(e,k9);return D.createElement(Eb,r)}var IS=1,cs=(function(t){function e(){var r;E9(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=P9(this,e,[].concat(a)),vh(r,"lastBoundingBox",{width:-1,height:-1}),r}return M9(e,t),O9(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>IS||Math.abs(a.height-this.lastBoundingBox.height)>IS)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ma({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ma(ma({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=ma(ma({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return D.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},L9(i,ma(ma({},this.props),{},{payload:$k(d,u,$9)})))}}],[{key:"getWithHeight",value:function(n,a){var i=ma(ma({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&se(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])})(A.PureComponent);vh(cs,"displayName","Legend");vh(cs,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Zg,MS;function z9(){if(MS)return Zg;MS=1;var t=iu(),e=Pb(),r=Gr(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return Zg=a,Zg}var ex,RS;function Fk(){if(RS)return ex;RS=1;var t=Ek(),e=z9();function r(n,a,i,o,l){var c=-1,u=n.length;for(i||(i=e),l||(l=[]);++c<u;){var d=n[c];a>0&&i(d)?a>1?r(d,a-1,i,o,l):t(l,d):o||(l[l.length]=d)}return l}return ex=r,ex}var tx,_S;function F9(){if(_S)return tx;_S=1;function t(e){return function(r,n,a){for(var i=-1,o=Object(r),l=a(r),c=l.length;c--;){var u=l[e?c:++i];if(n(o[u],u,o)===!1)break}return r}}return tx=t,tx}var rx,DS;function B9(){if(DS)return rx;DS=1;var t=F9(),e=t();return rx=e,rx}var nx,$S;function Bk(){if($S)return nx;$S=1;var t=B9(),e=yh();function r(n,a){return n&&t(n,a,e)}return nx=r,nx}var ax,LS;function q9(){if(LS)return ax;LS=1;var t=ou();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,l=n?o:-1,c=Object(a);(n?l--:++l<o)&&i(c[l],l,c)!==!1;);return a}}return ax=e,ax}var sx,zS;function Rb(){if(zS)return sx;zS=1;var t=Bk(),e=q9(),r=e(t);return sx=r,sx}var ix,FS;function qk(){if(FS)return ix;FS=1;var t=Rb(),e=ou();function r(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(l,c,u){o[++i]=a(l,c,u)}),o}return ix=r,ix}var ox,BS;function U9(){if(BS)return ox;BS=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return ox=t,ox}var lx,qS;function V9(){if(qS)return lx;qS=1;var t=Yo();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,o=r===r,l=t(r),c=n!==void 0,u=n===null,d=n===n,f=t(n);if(!u&&!f&&!l&&r>n||l&&c&&d&&!u&&!f||i&&c&&d||!a&&d||!o)return 1;if(!i&&!l&&!f&&r<n||f&&a&&o&&!i&&!l||u&&a&&o||!c&&o||!d)return-1}return 0}return lx=e,lx}var cx,US;function H9(){if(US)return cx;US=1;var t=V9();function e(r,n,a){for(var i=-1,o=r.criteria,l=n.criteria,c=o.length,u=a.length;++i<c;){var d=t(o[i],l[i]);if(d){if(i>=u)return d;var f=a[i];return d*(f=="desc"?-1:1)}}return r.index-n.index}return cx=e,cx}var ux,VS;function W9(){if(VS)return ux;VS=1;var t=bb(),e=jb(),r=fa(),n=qk(),a=U9(),i=Pk(),o=H9(),l=Qo(),c=Gr();function u(d,f,h){f.length?f=t(f,function(x){return c(x)?function(m){return e(m,x.length===1?x[0]:x)}:x}):f=[l];var p=-1;f=t(f,i(r));var g=n(d,function(x,m,y){var v=t(f,function(w){return w(x)});return{criteria:v,index:++p,value:x}});return a(g,function(x,m){return o(x,m,h)})}return ux=u,ux}var dx,HS;function G9(){if(HS)return dx;HS=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return dx=t,dx}var fx,WS;function Y9(){if(WS)return fx;WS=1;var t=G9(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,l=-1,c=e(o.length-a,0),u=Array(c);++l<c;)u[l]=o[a+l];l=-1;for(var d=Array(a+1);++l<a;)d[l]=o[l];return d[a]=i(u),t(n,this,d)}}return fx=r,fx}var hx,GS;function K9(){if(GS)return hx;GS=1;function t(e){return function(){return e}}return hx=t,hx}var px,YS;function Uk(){if(YS)return px;YS=1;var t=Ni(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return px=e,px}var mx,KS;function J9(){if(KS)return mx;KS=1;var t=K9(),e=Uk(),r=Qo(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return mx=n,mx}var gx,JS;function X9(){if(JS)return gx;JS=1;var t=800,e=16,r=Date.now;function n(a){var i=0,o=0;return function(){var l=r(),c=e-(l-o);if(o=l,c>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return gx=n,gx}var xx,XS;function Q9(){if(XS)return xx;XS=1;var t=J9(),e=X9(),r=e(t);return xx=r,xx}var yx,QS;function Z9(){if(QS)return yx;QS=1;var t=Qo(),e=Y9(),r=Q9();function n(a,i){return r(e(a,i,t),a+"")}return yx=n,yx}var vx,ZS;function bh(){if(ZS)return vx;ZS=1;var t=xb(),e=ou(),r=Tb(),n=js();function a(i,o,l){if(!n(l))return!1;var c=typeof o;return(c=="number"?e(l)&&r(o,l.length):c=="string"&&o in l)?t(l[o],i):!1}return vx=a,vx}var bx,e4;function eL(){if(e4)return bx;e4=1;var t=Fk(),e=W9(),r=Z9(),n=bh(),a=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&n(i,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return bx=a,bx}var tL=eL();const _b=it(tL);function pc(t){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pc(t)}function yy(){return yy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yy.apply(this,arguments)}function rL(t,e){return iL(t)||sL(t,e)||aL(t,e)||nL()}function nL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aL(t,e){if(t){if(typeof t=="string")return t4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t4(t,e)}}function t4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sL(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function iL(t){if(Array.isArray(t))return t}function r4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?r4(Object(r),!0).forEach(function(n){oL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oL(t,e,r){return e=lL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lL(t){var e=cL(t,"string");return pc(e)=="symbol"?e:e+""}function cL(t,e){if(pc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uL(t){return Array.isArray(t)&&er(t[0])&&er(t[1])?t.join(" ~ "):t}var dL=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,f=e.formatter,h=e.itemSorter,p=e.wrapperClassName,g=e.labelClassName,x=e.label,m=e.labelFormatter,y=e.accessibilityLayer,v=y===void 0?!1:y,w=function(){if(d&&d.length){var M={padding:0,margin:0},T=(h?_b(d,h):d).map(function(R,L){if(R.type==="none")return null;var B=jx({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},l),H=R.formatter||f||uL,Q=R.value,te=R.name,K=Q,ne=te;if(H&&K!=null&&ne!=null){var W=H(Q,te,R,L,d);if(Array.isArray(W)){var ee=rL(W,2);K=ee[0],ne=ee[1]}else K=W}return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:B},er(ne)?D.createElement("span",{className:"recharts-tooltip-item-name"},ne):null,er(ne)?D.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,D.createElement("span",{className:"recharts-tooltip-item-value"},K),D.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:M},T)}return null},N=jx({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),b=jx({margin:0},u),S=!Ue(x),j=S?x:"",C=Ve("recharts-default-tooltip",p),k=Ve("recharts-tooltip-label",g);S&&m&&d!==void 0&&d!==null&&(j=m(x,d));var O=v?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",yy({className:C,style:N},O),D.createElement("p",{className:k,style:b},D.isValidElement(j)?j:"".concat(j)),w())};function mc(t){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc(t)}function Nu(t,e,r){return e=fL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fL(t){var e=hL(t,"string");return mc(e)=="symbol"?e:e+""}function hL(t,e){if(mc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sl="recharts-tooltip-wrapper",pL={visibility:"hidden"};function mL(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return Ve(Sl,Nu(Nu(Nu(Nu({},"".concat(Sl,"-right"),se(r)&&e&&se(e.x)&&r>=e.x),"".concat(Sl,"-left"),se(r)&&e&&se(e.x)&&r<e.x),"".concat(Sl,"-bottom"),se(n)&&e&&se(e.y)&&n>=e.y),"".concat(Sl,"-top"),se(n)&&e&&se(e.y)&&n<e.y))}function n4(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(i&&se(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(e[n])return o[n]?d:f;if(o[n]){var h=d,p=c[n];return h<p?Math.max(f,c[n]):Math.max(d,c[n])}var g=f+l,x=c[n]+u;return g>x?Math.max(d,c[n]):Math.max(f,c[n])}function gL(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function xL(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=n4({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=n4({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=gL({translateX:d,translateY:f,useTranslate3d:l})):u=pL,{cssProperties:u,cssClasses:mL({translateX:d,translateY:f,coordinate:r})}}function go(t){"@babel/helpers - typeof";return go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},go(t)}function a4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function s4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a4(Object(r),!0).forEach(function(n){by(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hk(n.key),n)}}function bL(t,e,r){return e&&vL(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jL(t,e,r){return e=wd(e),wL(t,Vk()?Reflect.construct(e,r||[],wd(t).constructor):e.apply(t,r))}function wL(t,e){if(e&&(go(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SL(t)}function SL(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vk=function(){return!!t})()}function wd(t){return wd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wd(t)}function NL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vy(t,e)}function vy(t,e){return vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},vy(t,e)}function by(t,e,r){return e=Hk(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hk(t){var e=AL(t,"string");return go(e)=="symbol"?e:e+""}function AL(t,e){if(go(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(go(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var i4=1,CL=(function(t){function e(){var r;yL(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=jL(this,e,[].concat(a)),by(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),by(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return NL(e,t),bL(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>i4||Math.abs(n.height-this.state.lastBoundingBox.height)>i4)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,p=a.offset,g=a.position,x=a.reverseDirection,m=a.useTranslate3d,y=a.viewBox,v=a.wrapperStyle,w=xL({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:p,position:g,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:y}),N=w.cssClasses,b=w.cssProperties,S=s4(s4({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},v);return D.createElement("div",{tabIndex:-1,className:N,style:S,ref:function(C){n.wrapperNode=C}},u)}}])})(A.PureComponent),kL=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ai={isSsr:kL()};function xo(t){"@babel/helpers - typeof";return xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xo(t)}function o4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function l4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o4(Object(r),!0).forEach(function(n){Db(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gk(n.key),n)}}function PL(t,e,r){return e&&OL(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TL(t,e,r){return e=Sd(e),IL(t,Wk()?Reflect.construct(e,r||[],Sd(t).constructor):e.apply(t,r))}function IL(t,e){if(e&&(xo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ML(t)}function ML(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wk=function(){return!!t})()}function Sd(t){return Sd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sd(t)}function RL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jy(t,e)}function jy(t,e){return jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jy(t,e)}function Db(t,e,r){return e=Gk(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gk(t){var e=_L(t,"string");return xo(e)=="symbol"?e:e+""}function _L(t,e){if(xo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function DL(t){return t.dataKey}function $L(t,e){return D.isValidElement(t)?D.cloneElement(t,e):typeof t=="function"?D.createElement(t,e):D.createElement(dL,e)}var Zr=(function(t){function e(){return EL(this,e),TL(this,e,arguments)}return RL(e,t),PL(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,p=a.offset,g=a.payload,x=a.payloadUniqBy,m=a.position,y=a.reverseDirection,v=a.useTranslate3d,w=a.viewBox,N=a.wrapperStyle,b=g??[];f&&b.length&&(b=$k(g.filter(function(j){return j.value!=null&&(j.hide!==!0||n.props.includeHidden)}),x,DL));var S=b.length>0;return D.createElement(CL,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:S,offset:p,position:m,reverseDirection:y,useTranslate3d:v,viewBox:w,wrapperStyle:N},$L(u,l4(l4({},this.props),{},{payload:b})))}}])})(A.PureComponent);Db(Zr,"displayName","Tooltip");Db(Zr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ai.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var wx,c4;function LL(){if(c4)return wx;c4=1;var t=da(),e=function(){return t.Date.now()};return wx=e,wx}var Sx,u4;function zL(){if(u4)return Sx;u4=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return Sx=e,Sx}var Nx,d4;function FL(){if(d4)return Nx;d4=1;var t=zL(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return Nx=r,Nx}var Ax,f4;function Yk(){if(f4)return Ax;f4=1;var t=FL(),e=js(),r=Yo(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(r(u))return n;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=i.test(u);return f||o.test(u)?l(u.slice(2),f?2:8):a.test(u)?n:+u}return Ax=c,Ax}var Cx,h4;function BL(){if(h4)return Cx;h4=1;var t=js(),e=LL(),r=Yk(),n="Expected a function",a=Math.max,i=Math.min;function o(l,c,u){var d,f,h,p,g,x,m=0,y=!1,v=!1,w=!0;if(typeof l!="function")throw new TypeError(n);c=r(c)||0,t(u)&&(y=!!u.leading,v="maxWait"in u,h=v?a(r(u.maxWait)||0,c):h,w="trailing"in u?!!u.trailing:w);function N(T){var R=d,L=f;return d=f=void 0,m=T,p=l.apply(L,R),p}function b(T){return m=T,g=setTimeout(C,c),y?N(T):p}function S(T){var R=T-x,L=T-m,B=c-R;return v?i(B,h-L):B}function j(T){var R=T-x,L=T-m;return x===void 0||R>=c||R<0||v&&L>=h}function C(){var T=e();if(j(T))return k(T);g=setTimeout(C,S(T))}function k(T){return g=void 0,w&&d?N(T):(d=f=void 0,p)}function O(){g!==void 0&&clearTimeout(g),m=0,d=x=f=g=void 0}function I(){return g===void 0?p:k(e())}function M(){var T=e(),R=j(T);if(d=arguments,f=this,x=T,R){if(g===void 0)return b(x);if(v)return clearTimeout(g),g=setTimeout(C,c),N(x)}return g===void 0&&(g=setTimeout(C,c)),p}return M.cancel=O,M.flush=I,M}return Cx=o,Cx}var kx,p4;function qL(){if(p4)return kx;p4=1;var t=BL(),e=js(),r="Expected a function";function n(a,i,o){var l=!0,c=!0;if(typeof a!="function")throw new TypeError(r);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(a,i,{leading:l,maxWait:i,trailing:c})}return kx=n,kx}var UL=qL();const Kk=it(UL);function gc(t){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(t)}function m4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Au(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m4(Object(r),!0).forEach(function(n){VL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VL(t,e,r){return e=HL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HL(t){var e=WL(t,"string");return gc(e)=="symbol"?e:e+""}function WL(t,e){if(gc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GL(t,e){return XL(t)||JL(t,e)||KL(t,e)||YL()}function YL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KL(t,e){if(t){if(typeof t=="string")return g4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g4(t,e)}}function g4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function JL(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function XL(t){if(Array.isArray(t))return t}var Cu=A.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,o=i===void 0?"100%":i,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,h=t.maxHeight,p=t.children,g=t.debounce,x=g===void 0?0:g,m=t.id,y=t.className,v=t.onResize,w=t.style,N=w===void 0?{}:w,b=A.useRef(null),S=A.useRef();S.current=v,A.useImperativeHandle(e,function(){return Object.defineProperty(b.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),b.current},configurable:!0})});var j=A.useState({containerWidth:a.width,containerHeight:a.height}),C=GL(j,2),k=C[0],O=C[1],I=A.useCallback(function(T,R){O(function(L){var B=Math.round(T),H=Math.round(R);return L.containerWidth===B&&L.containerHeight===H?L:{containerWidth:B,containerHeight:H}})},[]);A.useEffect(function(){var T=function(te){var K,ne=te[0].contentRect,W=ne.width,ee=ne.height;I(W,ee),(K=S.current)===null||K===void 0||K.call(S,W,ee)};x>0&&(T=Kk(T,x,{trailing:!0,leading:!1}));var R=new ResizeObserver(T),L=b.current.getBoundingClientRect(),B=L.width,H=L.height;return I(B,H),R.observe(b.current),function(){R.disconnect()}},[I,x]);var M=A.useMemo(function(){var T=k.containerWidth,R=k.containerHeight;if(T<0||R<0)return null;Bn(Ws(o)||Ws(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Bn(!r||r>0,"The aspect(%s) must be greater than zero.",r);var L=Ws(o)?T:o,B=Ws(c)?R:c;r&&r>0&&(L?B=L/r:B&&(L=B*r),h&&B>h&&(B=h)),Bn(L>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,B,o,c,d,f,r);var H=!Array.isArray(p)&&ka(p.type).endsWith("Chart");return D.Children.map(p,function(Q){return D.isValidElement(Q)?A.cloneElement(Q,Au({width:L,height:B},H?{style:Au({height:"100%",width:"100%",maxHeight:B,maxWidth:L},Q.props.style)}:{})):Q})},[r,p,c,h,f,d,k,o]);return D.createElement("div",{id:m?"".concat(m):void 0,className:Ve("recharts-responsive-container",y),style:Au(Au({},N),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:b},M)}),xc=function(e){return null};xc.displayName="Cell";function yc(t){"@babel/helpers - typeof";return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yc(t)}function x4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x4(Object(r),!0).forEach(function(n){QL(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QL(t,e,r){return e=ZL(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZL(t){var e=ez(t,"string");return yc(e)=="symbol"?e:e+""}function ez(t,e){if(yc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ii={widthCache:{},cacheCount:0},tz=2e3,rz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},y4="recharts_measurement_span";function nz(t){var e=wy({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Wl=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ai.isSsr)return{width:0,height:0};var n=nz(r),a=JSON.stringify({text:e,copyStyle:n});if(Ii.widthCache[a])return Ii.widthCache[a];try{var i=document.getElementById(y4);i||(i=document.createElement("span"),i.setAttribute("id",y4),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=wy(wy({},rz),n);Object.assign(i.style,o),i.textContent="".concat(e);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Ii.widthCache[a]=c,++Ii.cacheCount>tz&&(Ii.cacheCount=0,Ii.widthCache={}),c}catch{return{width:0,height:0}}},az=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function vc(t){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vc(t)}function Nd(t,e){return lz(t)||oz(t,e)||iz(t,e)||sz()}function sz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iz(t,e){if(t){if(typeof t=="string")return v4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v4(t,e)}}function v4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oz(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function lz(t){if(Array.isArray(t))return t}function cz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dz(n.key),n)}}function uz(t,e,r){return e&&b4(t.prototype,e),r&&b4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function dz(t){var e=fz(t,"string");return vc(e)=="symbol"?e:e+""}function fz(t,e){if(vc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var j4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,w4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,pz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Jk={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},mz=Object.keys(Jk),Hi="NaN";function gz(t,e){return t*Jk[e]}var ku=(function(){function t(e,r){cz(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!hz.test(r)&&(this.num=NaN,this.unit=""),mz.includes(r)&&(this.num=gz(e,r),this.unit="px")}return uz(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=pz.exec(r))!==null&&n!==void 0?n:[],i=Nd(a,3),o=i[1],l=i[2];return new t(parseFloat(o),l??"")}}])})();function Xk(t){if(t.includes(Hi))return Hi;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=j4.exec(e))!==null&&r!==void 0?r:[],a=Nd(n,4),i=a[1],o=a[2],l=a[3],c=ku.parse(i??""),u=ku.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Hi;e=e.replace(j4,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=w4.exec(e))!==null&&f!==void 0?f:[],p=Nd(h,4),g=p[1],x=p[2],m=p[3],y=ku.parse(g??""),v=ku.parse(m??""),w=x==="+"?y.add(v):y.subtract(v);if(w.isNaN())return Hi;e=e.replace(w4,w.toString())}return e}var S4=/\(([^()]*)\)/;function xz(t){for(var e=t;e.includes("(");){var r=S4.exec(e),n=Nd(r,2),a=n[1];e=e.replace(S4,Xk(a))}return e}function yz(t){var e=t.replace(/\s+/g,"");return e=xz(e),e=Xk(e),e}function vz(t){try{return yz(t)}catch{return Hi}}function Ex(t){var e=vz(t.slice(5,-1));return e===Hi?"":e}var bz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jz=["dx","dy","angle","className","breakAll"];function Sy(){return Sy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sy.apply(this,arguments)}function N4(t,e){if(t==null)return{};var r=wz(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wz(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function A4(t,e){return Cz(t)||Az(t,e)||Nz(t,e)||Sz()}function Sz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nz(t,e){if(t){if(typeof t=="string")return C4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C4(t,e)}}function C4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Az(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Cz(t){if(Array.isArray(t))return t}var Qk=/[ \f\n\r\t\v\u2028\u2029]+/,Zk=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];Ue(r)||(n?i=r.toString().split(""):i=r.toString().split(Qk));var o=i.map(function(c){return{word:c,width:Wl(c,a).width}}),l=n?0:Wl(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},kz=function(e,r,n,a,i){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=se(o),f=l,h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(B,H){var Q=H.word,te=H.width,K=B[B.length-1];if(K&&(a==null||i||K.width+te+n<Number(a)))K.words.push(Q),K.width+=te+n;else{var ne={words:[Q],width:te};B.push(ne)}return B},[])},p=h(r),g=function(L){return L.reduce(function(B,H){return B.width>H.width?B:H})};if(!d)return p;for(var x="…",m=function(L){var B=f.slice(0,L),H=Zk({breakAll:u,style:c,children:B+x}).wordsWithComputedWidth,Q=h(H),te=Q.length>o||g(Q).width>Number(a);return[te,Q]},y=0,v=f.length-1,w=0,N;y<=v&&w<=f.length-1;){var b=Math.floor((y+v)/2),S=b-1,j=m(S),C=A4(j,2),k=C[0],O=C[1],I=m(b),M=A4(I,1),T=M[0];if(!k&&!T&&(y=b+1),k&&T&&(v=b-1),!k&&T){N=O;break}w++}return N||p},k4=function(e){var r=Ue(e)?[]:e.toString().split(Qk);return[{words:r}]},Ez=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,o=e.breakAll,l=e.maxLines;if((r||n)&&!Ai.isSsr){var c,u,d=Zk({breakAll:o,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return k4(a);return kz({breakAll:o,children:a,maxLines:l,style:i},c,u,r,n)}return k4(a)},E4="#808080",hi=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,f=d===void 0?!1:d,h=e.textAnchor,p=h===void 0?"start":h,g=e.verticalAnchor,x=g===void 0?"end":g,m=e.fill,y=m===void 0?E4:m,v=N4(e,bz),w=A.useMemo(function(){return Ez({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),N=v.dx,b=v.dy,S=v.angle,j=v.className,C=v.breakAll,k=N4(v,jz);if(!er(n)||!er(i))return null;var O=n+(se(N)?N:0),I=i+(se(b)?b:0),M;switch(x){case"start":M=Ex("calc(".concat(u,")"));break;case"middle":M=Ex("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:M=Ex("calc(".concat(w.length-1," * -").concat(l,")"));break}var T=[];if(f){var R=w[0].width,L=v.width;T.push("scale(".concat((se(L)?L/R:1)/R,")"))}return S&&T.push("rotate(".concat(S,", ").concat(O,", ").concat(I,")")),T.length&&(k.transform=T.join(" ")),D.createElement("text",Sy({},Pe(k,!0),{x:O,y:I,className:Ve("recharts-text",j),textAnchor:p,fill:y.includes("url")?E4:y}),w.map(function(B,H){var Q=B.words.join(C?"":" ");return D.createElement("tspan",{x:O,dy:H===0?M:l,key:"".concat(Q,"-").concat(H)},Q)}))};function us(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Oz(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $b(t){let e,r,n;t.length!==2?(e=us,r=(l,c)=>us(t(l),c),n=(l,c)=>t(l)-c):(e=t===us||t===Oz?t:Pz,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function Pz(){return 0}function eE(t){return t===null?NaN:+t}function*Tz(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Iz=$b(us),lu=Iz.right;$b(eE).center;class O4 extends Map{constructor(e,r=_z){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(P4(this,e))}has(e){return super.has(P4(this,e))}set(e,r){return super.set(Mz(this,e),r)}delete(e){return super.delete(Rz(this,e))}}function P4({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Mz({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Rz({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function _z(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Dz(t=us){if(t===us)return tE;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function tE(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const $z=Math.sqrt(50),Lz=Math.sqrt(10),zz=Math.sqrt(2);function Ad(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=$z?10:i>=Lz?5:i>=zz?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?Ad(t,e,r*2):[l,c,u]}function Ny(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,o]=n?Ad(e,t,r):Ad(t,e,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function Ay(t,e,r){return e=+e,t=+t,r=+r,Ad(t,e,r)[2]}function Cy(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?Ay(e,t,r):Ay(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function T4(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function I4(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function rE(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?tE:Dz(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(e-u*f/c+h)),g=Math.min(n,Math.floor(e+(c-u)*f/c+h));rE(t,e,p,g,a)}const i=t[e];let o=r,l=n;for(Nl(t,r,e),a(t[n],i)>0&&Nl(t,r,n);o<l;){for(Nl(t,o,l),++o,--l;a(t[o],i)<0;)++o;for(;a(t[l],i)>0;)--l}a(t[r],i)===0?Nl(t,r,l):(++l,Nl(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function Nl(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Fz(t,e,r){if(t=Float64Array.from(Tz(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return I4(t);if(e>=1)return T4(t);var n,a=(n-1)*e,i=Math.floor(a),o=T4(rE(t,i).subarray(0,i+1)),l=I4(t.subarray(i+1));return o+(l-o)*(a-i)}}function Bz(t,e,r=eE){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),o=+r(t[i],i,t),l=+r(t[i+1],i+1,t);return o+(l-o)*(a-i)}}function qz(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function Tn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ua(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ky=Symbol("implicit");function Lb(){var t=new O4,e=[],r=[],n=ky;function a(i){let o=t.get(i);if(o===void 0){if(n!==ky)return n;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new O4;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Lb(e,r).unknown(n)},Tn.apply(a,arguments),a}function bc(){var t=Lb().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,p=a<n,g=p?a:n,x=p?n:a;i=(x-g)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),g+=(x-g-i*(h-c))*d,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var m=qz(h).map(function(y){return g+i*y});return r(p?m.reverse():m)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(h){return arguments.length?(l=!!h,f()):l},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return bc(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Tn.apply(f(),arguments)}function nE(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return nE(e())},t}function Gl(){return nE(bc.apply(null,arguments).paddingInner(1))}function zb(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function aE(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function cu(){}var jc=.7,Cd=1/jc,Qi="\\s*([+-]?\\d+)\\s*",wc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ea="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Uz=/^#([0-9a-f]{3,8})$/,Vz=new RegExp(`^rgb\\(${Qi},${Qi},${Qi}\\)$`),Hz=new RegExp(`^rgb\\(${ea},${ea},${ea}\\)$`),Wz=new RegExp(`^rgba\\(${Qi},${Qi},${Qi},${wc}\\)$`),Gz=new RegExp(`^rgba\\(${ea},${ea},${ea},${wc}\\)$`),Yz=new RegExp(`^hsl\\(${wc},${ea},${ea}\\)$`),Kz=new RegExp(`^hsla\\(${wc},${ea},${ea},${wc}\\)$`),M4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zb(cu,Sc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:R4,formatHex:R4,formatHex8:Jz,formatHsl:Xz,formatRgb:_4,toString:_4});function R4(){return this.rgb().formatHex()}function Jz(){return this.rgb().formatHex8()}function Xz(){return sE(this).formatHsl()}function _4(){return this.rgb().formatRgb()}function Sc(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Uz.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?D4(e):r===3?new Vr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Eu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Eu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Vz.exec(t))?new Vr(e[1],e[2],e[3],1):(e=Hz.exec(t))?new Vr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Wz.exec(t))?Eu(e[1],e[2],e[3],e[4]):(e=Gz.exec(t))?Eu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Yz.exec(t))?z4(e[1],e[2]/100,e[3]/100,1):(e=Kz.exec(t))?z4(e[1],e[2]/100,e[3]/100,e[4]):M4.hasOwnProperty(t)?D4(M4[t]):t==="transparent"?new Vr(NaN,NaN,NaN,0):null}function D4(t){return new Vr(t>>16&255,t>>8&255,t&255,1)}function Eu(t,e,r,n){return n<=0&&(t=e=r=NaN),new Vr(t,e,r,n)}function Qz(t){return t instanceof cu||(t=Sc(t)),t?(t=t.rgb(),new Vr(t.r,t.g,t.b,t.opacity)):new Vr}function Ey(t,e,r,n){return arguments.length===1?Qz(t):new Vr(t,e,r,n??1)}function Vr(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}zb(Vr,Ey,aE(cu,{brighter(t){return t=t==null?Cd:Math.pow(Cd,t),new Vr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?jc:Math.pow(jc,t),new Vr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Vr(ri(this.r),ri(this.g),ri(this.b),kd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$4,formatHex:$4,formatHex8:Zz,formatRgb:L4,toString:L4}));function $4(){return`#${Gs(this.r)}${Gs(this.g)}${Gs(this.b)}`}function Zz(){return`#${Gs(this.r)}${Gs(this.g)}${Gs(this.b)}${Gs((isNaN(this.opacity)?1:this.opacity)*255)}`}function L4(){const t=kd(this.opacity);return`${t===1?"rgb(":"rgba("}${ri(this.r)}, ${ri(this.g)}, ${ri(this.b)}${t===1?")":`, ${t})`}`}function kd(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ri(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Gs(t){return t=ri(t),(t<16?"0":"")+t.toString(16)}function z4(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ln(t,e,r,n)}function sE(t){if(t instanceof Ln)return new Ln(t.h,t.s,t.l,t.opacity);if(t instanceof cu||(t=Sc(t)),!t)return new Ln;if(t instanceof Ln)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(e===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Ln(o,l,c,t.opacity)}function eF(t,e,r,n){return arguments.length===1?sE(t):new Ln(t,e,r,n??1)}function Ln(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}zb(Ln,eF,aE(cu,{brighter(t){return t=t==null?Cd:Math.pow(Cd,t),new Ln(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?jc:Math.pow(jc,t),new Ln(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Vr(Ox(t>=240?t-240:t+120,a,n),Ox(t,a,n),Ox(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Ln(F4(this.h),Ou(this.s),Ou(this.l),kd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=kd(this.opacity);return`${t===1?"hsl(":"hsla("}${F4(this.h)}, ${Ou(this.s)*100}%, ${Ou(this.l)*100}%${t===1?")":`, ${t})`}`}}));function F4(t){return t=(t||0)%360,t<0?t+360:t}function Ou(t){return Math.max(0,Math.min(1,t||0))}function Ox(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const Fb=t=>()=>t;function tF(t,e){return function(r){return t+r*e}}function rF(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function nF(t){return(t=+t)==1?iE:function(e,r){return r-e?rF(e,r,t):Fb(isNaN(e)?r:e)}}function iE(t,e){var r=e-t;return r?tF(t,r):Fb(isNaN(t)?e:t)}const B4=(function t(e){var r=nF(e);function n(a,i){var o=r((a=Ey(a)).r,(i=Ey(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=iE(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n})(1);function aF(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function sF(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function iF(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Zo(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function oF(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Ed(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function lF(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Zo(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Oy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Px=new RegExp(Oy.source,"g");function cF(t){return function(){return t}}function uF(t){return function(e){return t(e)+""}}function dF(t,e){var r=Oy.lastIndex=Px.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=Oy.exec(t))&&(a=Px.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Ed(n,a)})),r=Px.lastIndex;return r<e.length&&(i=e.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?uF(c[0].x):cF(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Zo(t,e){var r=typeof e,n;return e==null||r==="boolean"?Fb(e):(r==="number"?Ed:r==="string"?(n=Sc(e))?(e=n,B4):dF:e instanceof Sc?B4:e instanceof Date?oF:sF(e)?aF:Array.isArray(e)?iF:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?lF:Ed)(t,e)}function Bb(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function fF(t,e){e===void 0&&(e=t,t=Zo);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function hF(t){return function(){return t}}function Od(t){return+t}var q4=[0,1];function $r(t){return t}function Py(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:hF(isNaN(e)?NaN:.5)}function pF(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function mF(t,e,r){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=Py(a,n),i=r(o,i)):(n=Py(n,a),i=r(i,o)),function(l){return i(n(l))}}function gF(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=Py(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(l){var c=lu(t,l,1,n)-1;return i[c](a[c](l))}}function uu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function jh(){var t=q4,e=q4,r=Zo,n,a,i,o=$r,l,c,u;function d(){var h=Math.min(t.length,e.length);return o!==$r&&(o=pF(t[0],t[h-1])),l=h>2?gF:mF,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(t.map(n),e,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(e,t.map(n),Ed)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Od),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=Bb,d()},f.clamp=function(h){return arguments.length?(o=h?!0:$r,d()):o!==$r},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,p){return n=h,a=p,d()}}function qb(){return jh()($r,$r)}function xF(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Pd(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function yo(t){return t=Pd(Math.abs(t)),t?t[1]:NaN}function yF(t,e){return function(r,n){for(var a=r.length,i=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return i.reverse().join(e)}}function vF(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var bF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nc(t){if(!(e=bF.exec(t)))throw new Error("invalid format: "+t);var e;return new Ub({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Nc.prototype=Ub.prototype;function Ub(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ub.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jF(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var oE;function wF(t,e){var r=Pd(t,e);if(!r)return t+"";var n=r[0],a=r[1],i=a-(oE=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Pd(t,Math.max(0,e+i-1))[0]}function U4(t,e){var r=Pd(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const V4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:xF,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>U4(t*100,e),r:U4,s:wF,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function H4(t){return t}var W4=Array.prototype.map,G4=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function SF(t){var e=t.grouping===void 0||t.thousands===void 0?H4:yF(W4.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?H4:vF(W4.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Nc(f);var h=f.fill,p=f.align,g=f.sign,x=f.symbol,m=f.zero,y=f.width,v=f.comma,w=f.precision,N=f.trim,b=f.type;b==="n"?(v=!0,b="g"):V4[b]||(w===void 0&&(w=12),N=!0,b="g"),(m||h==="0"&&p==="=")&&(m=!0,h="0",p="=");var S=x==="$"?r:x==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",j=x==="$"?n:/[%p]/.test(b)?o:"",C=V4[b],k=/[defgprs%]/.test(b);w=w===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function O(I){var M=S,T=j,R,L,B;if(b==="c")T=C(I)+T,I="";else{I=+I;var H=I<0||1/I<0;if(I=isNaN(I)?c:C(Math.abs(I),w),N&&(I=jF(I)),H&&+I==0&&g!=="+"&&(H=!1),M=(H?g==="("?g:l:g==="-"||g==="("?"":g)+M,T=(b==="s"?G4[8+oE/3]:"")+T+(H&&g==="("?")":""),k){for(R=-1,L=I.length;++R<L;)if(B=I.charCodeAt(R),48>B||B>57){T=(B===46?a+I.slice(R+1):I.slice(R))+T,I=I.slice(0,R);break}}}v&&!m&&(I=e(I,1/0));var Q=M.length+I.length+T.length,te=Q<y?new Array(y-Q+1).join(h):"";switch(v&&m&&(I=e(te+I,te.length?y-T.length:1/0),te=""),p){case"<":I=M+I+T+te;break;case"=":I=M+te+I+T;break;case"^":I=te.slice(0,Q=te.length>>1)+M+I+T+te.slice(Q);break;default:I=te+M+I+T;break}return i(I)}return O.toString=function(){return f+""},O}function d(f,h){var p=u((f=Nc(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(yo(h)/3)))*3,x=Math.pow(10,-g),m=G4[8+g/3];return function(y){return p(x*y)+m}}return{format:u,formatPrefix:d}}var Pu,Vb,lE;NF({thousands:",",grouping:[3],currency:["$",""]});function NF(t){return Pu=SF(t),Vb=Pu.format,lE=Pu.formatPrefix,Pu}function AF(t){return Math.max(0,-yo(Math.abs(t)))}function CF(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yo(e)/3)))*3-yo(Math.abs(t)))}function kF(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,yo(e)-yo(t))+1}function cE(t,e,r,n){var a=Cy(t,e,r),i;switch(n=Nc(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=CF(a,o))&&(n.precision=i),lE(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=kF(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=AF(a))&&(n.precision=i-(n.type==="%")*2);break}}return Vb(n)}function ws(t){var e=t.domain;return t.ticks=function(r){var n=e();return Ny(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return cE(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=Ay(o,l,r),u===c)return n[a]=o,n[i]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function Td(){var t=qb();return t.copy=function(){return uu(t,Td())},Tn.apply(t,arguments),ws(t)}function uE(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Od),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return uE(t).unknown(e)},t=arguments.length?Array.from(t,Od):[0,1],ws(r)}function dE(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),t[r]=e.floor(a),t[n]=e.ceil(i),t}function Y4(t){return Math.log(t)}function K4(t){return Math.exp(t)}function EF(t){return-Math.log(-t)}function OF(t){return-Math.exp(-t)}function PF(t){return isFinite(t)?+("1e"+t):t<0?0:t}function TF(t){return t===10?PF:t===Math.E?Math.exp:e=>Math.pow(t,e)}function IF(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function J4(t){return(e,r)=>-t(-e,r)}function Hb(t){const e=t(Y4,K4),r=e.domain;let n=10,a,i;function o(){return a=IF(n),i=TF(n),r()[0]<0?(a=J4(a),i=J4(i),t(EF,OF)):t(Y4,K4),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),g,x;const m=l==null?10:+l;let y=[];if(!(n%1)&&p-h<m){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<n;++g)if(x=h<0?g/i(-h):g*i(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=p;++h)for(g=n-1;g>=1;--g)if(x=h>0?g/i(-h):g*i(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<m&&(y=Ny(u,d,m))}else y=Ny(h,p,Math.min(p-h,m)).map(i);return f?y.reverse():y},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Nc(c)).precision==null&&(c.trim=!0),c=Vb(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(dE(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),e}function fE(){const t=Hb(jh()).domain([1,10]);return t.copy=()=>uu(t,fE()).base(t.base()),Tn.apply(t,arguments),t}function X4(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Q4(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Wb(t){var e=1,r=t(X4(e),Q4(e));return r.constant=function(n){return arguments.length?t(X4(e=+n),Q4(e)):e},ws(r)}function hE(){var t=Wb(jh());return t.copy=function(){return uu(t,hE()).constant(t.constant())},Tn.apply(t,arguments)}function Z4(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function MF(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function RF(t){return t<0?-t*t:t*t}function Gb(t){var e=t($r,$r),r=1;function n(){return r===1?t($r,$r):r===.5?t(MF,RF):t(Z4(r),Z4(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},ws(e)}function Yb(){var t=Gb(jh());return t.copy=function(){return uu(t,Yb()).exponent(t.exponent())},Tn.apply(t,arguments),t}function _F(){return Yb.apply(null,arguments).exponent(.5)}function eN(t){return Math.sign(t)*t*t}function DF(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function pE(){var t=qb(),e=[0,1],r=!1,n;function a(i){var o=DF(t(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return t.invert(eN(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,Od)).map(eN)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return pE(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Tn.apply(a,arguments),ws(a)}function mE(){var t=[],e=[],r=[],n;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=Bz(t,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:e[lu(r,o)]}return i.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(us),a()},i.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return mE().domain(t).range(e).unknown(n)},Tn.apply(i,arguments)}function gE(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[lu(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return gE().domain([t,e]).range(a).unknown(i)},Tn.apply(ws(o),arguments)}function xE(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[lu(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return xE().domain(t).range(e).unknown(r)},Tn.apply(a,arguments)}const Tx=new Date,Ix=new Date;function rr(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),e(i,l),t(i);while(u<i&&i<o);return c},a.filter=i=>rr(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!i(o););else for(;--l>=0;)for(;e(o,1),!i(o););}),r&&(a.count=(i,o)=>(Tx.setTime(+i),Ix.setTime(+o),t(Tx),t(Ix),Math.floor(r(Tx,Ix))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Id=rr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Id.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?rr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Id);Id.range;const Sa=1e3,An=Sa*60,Na=An*60,$a=Na*24,Kb=$a*7,tN=$a*30,Mx=$a*365,Ys=rr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Sa)},(t,e)=>(e-t)/Sa,t=>t.getUTCSeconds());Ys.range;const Jb=rr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sa)},(t,e)=>{t.setTime(+t+e*An)},(t,e)=>(e-t)/An,t=>t.getMinutes());Jb.range;const Xb=rr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*An)},(t,e)=>(e-t)/An,t=>t.getUTCMinutes());Xb.range;const Qb=rr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sa-t.getMinutes()*An)},(t,e)=>{t.setTime(+t+e*Na)},(t,e)=>(e-t)/Na,t=>t.getHours());Qb.range;const Zb=rr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Na)},(t,e)=>(e-t)/Na,t=>t.getUTCHours());Zb.range;const du=rr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*An)/$a,t=>t.getDate()-1);du.range;const wh=rr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$a,t=>t.getUTCDate()-1);wh.range;const yE=rr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$a,t=>Math.floor(t/$a));yE.range;function Ci(t){return rr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*An)/Kb)}const Sh=Ci(0),Md=Ci(1),$F=Ci(2),LF=Ci(3),vo=Ci(4),zF=Ci(5),FF=Ci(6);Sh.range;Md.range;$F.range;LF.range;vo.range;zF.range;FF.range;function ki(t){return rr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/Kb)}const Nh=ki(0),Rd=ki(1),BF=ki(2),qF=ki(3),bo=ki(4),UF=ki(5),VF=ki(6);Nh.range;Rd.range;BF.range;qF.range;bo.range;UF.range;VF.range;const e1=rr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());e1.range;const t1=rr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());t1.range;const La=rr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());La.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:rr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});La.range;const za=rr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());za.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:rr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});za.range;function vE(t,e,r,n,a,i){const o=[[Ys,1,Sa],[Ys,5,5*Sa],[Ys,15,15*Sa],[Ys,30,30*Sa],[i,1,An],[i,5,5*An],[i,15,15*An],[i,30,30*An],[a,1,Na],[a,3,3*Na],[a,6,6*Na],[a,12,12*Na],[n,1,$a],[n,2,2*$a],[r,1,Kb],[e,1,tN],[e,3,3*tN],[t,1,Mx]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,p=$b(([,,m])=>m).right(o,h);if(p===o.length)return t.every(Cy(u/Mx,d/Mx,f));if(p===0)return Id.every(Math.max(Cy(u,d,f),1));const[g,x]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return g.every(x)}return[l,c]}const[HF,WF]=vE(za,t1,Nh,yE,Zb,Xb),[GF,YF]=vE(La,e1,Sh,du,Qb,Jb);function Rx(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _x(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Al(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function KF(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Cl(a),d=kl(a),f=Cl(i),h=kl(i),p=Cl(o),g=kl(o),x=Cl(l),m=kl(l),y=Cl(c),v=kl(c),w={a:H,A:Q,b:te,B:K,c:null,d:oN,e:oN,f:yB,g:EB,G:PB,H:mB,I:gB,j:xB,L:bE,m:vB,M:bB,p:ne,q:W,Q:uN,s:dN,S:jB,u:wB,U:SB,V:NB,w:AB,W:CB,x:null,X:null,y:kB,Y:OB,Z:TB,"%":cN},N={a:ee,A:ue,b:oe,B:_e,c:null,d:lN,e:lN,f:_B,g:HB,G:GB,H:IB,I:MB,j:RB,L:wE,m:DB,M:$B,p:Ee,q:be,Q:uN,s:dN,S:LB,u:zB,U:FB,V:BB,w:qB,W:UB,x:null,X:null,y:VB,Y:WB,Z:YB,"%":cN},b={a:O,A:I,b:M,B:T,c:R,d:sN,e:sN,f:dB,g:aN,G:nN,H:iN,I:iN,j:oB,L:uB,m:iB,M:lB,p:k,q:sB,Q:hB,s:pB,S:cB,u:eB,U:tB,V:rB,w:ZF,W:nB,x:L,X:B,y:aN,Y:nN,Z:aB,"%":fB};w.x=S(r,w),w.X=S(n,w),w.c=S(e,w),N.x=S(r,N),N.X=S(n,N),N.c=S(e,N);function S(X,xe){return function(Ae){var Z=[],ot=-1,F=0,ce=X.length,me,Ze,xt;for(Ae instanceof Date||(Ae=new Date(+Ae));++ot<ce;)X.charCodeAt(ot)===37&&(Z.push(X.slice(F,ot)),(Ze=rN[me=X.charAt(++ot)])!=null?me=X.charAt(++ot):Ze=me==="e"?" ":"0",(xt=xe[me])&&(me=xt(Ae,Ze)),Z.push(me),F=ot+1);return Z.push(X.slice(F,ot)),Z.join("")}}function j(X,xe){return function(Ae){var Z=Al(1900,void 0,1),ot=C(Z,X,Ae+="",0),F,ce;if(ot!=Ae.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(xe&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(F=_x(Al(Z.y,0,1)),ce=F.getUTCDay(),F=ce>4||ce===0?Rd.ceil(F):Rd(F),F=wh.offset(F,(Z.V-1)*7),Z.y=F.getUTCFullYear(),Z.m=F.getUTCMonth(),Z.d=F.getUTCDate()+(Z.w+6)%7):(F=Rx(Al(Z.y,0,1)),ce=F.getDay(),F=ce>4||ce===0?Md.ceil(F):Md(F),F=du.offset(F,(Z.V-1)*7),Z.y=F.getFullYear(),Z.m=F.getMonth(),Z.d=F.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),ce="Z"in Z?_x(Al(Z.y,0,1)).getUTCDay():Rx(Al(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(ce+5)%7:Z.w+Z.U*7-(ce+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,_x(Z)):Rx(Z)}}function C(X,xe,Ae,Z){for(var ot=0,F=xe.length,ce=Ae.length,me,Ze;ot<F;){if(Z>=ce)return-1;if(me=xe.charCodeAt(ot++),me===37){if(me=xe.charAt(ot++),Ze=b[me in rN?xe.charAt(ot++):me],!Ze||(Z=Ze(X,Ae,Z))<0)return-1}else if(me!=Ae.charCodeAt(Z++))return-1}return Z}function k(X,xe,Ae){var Z=u.exec(xe.slice(Ae));return Z?(X.p=d.get(Z[0].toLowerCase()),Ae+Z[0].length):-1}function O(X,xe,Ae){var Z=p.exec(xe.slice(Ae));return Z?(X.w=g.get(Z[0].toLowerCase()),Ae+Z[0].length):-1}function I(X,xe,Ae){var Z=f.exec(xe.slice(Ae));return Z?(X.w=h.get(Z[0].toLowerCase()),Ae+Z[0].length):-1}function M(X,xe,Ae){var Z=y.exec(xe.slice(Ae));return Z?(X.m=v.get(Z[0].toLowerCase()),Ae+Z[0].length):-1}function T(X,xe,Ae){var Z=x.exec(xe.slice(Ae));return Z?(X.m=m.get(Z[0].toLowerCase()),Ae+Z[0].length):-1}function R(X,xe,Ae){return C(X,e,xe,Ae)}function L(X,xe,Ae){return C(X,r,xe,Ae)}function B(X,xe,Ae){return C(X,n,xe,Ae)}function H(X){return o[X.getDay()]}function Q(X){return i[X.getDay()]}function te(X){return c[X.getMonth()]}function K(X){return l[X.getMonth()]}function ne(X){return a[+(X.getHours()>=12)]}function W(X){return 1+~~(X.getMonth()/3)}function ee(X){return o[X.getUTCDay()]}function ue(X){return i[X.getUTCDay()]}function oe(X){return c[X.getUTCMonth()]}function _e(X){return l[X.getUTCMonth()]}function Ee(X){return a[+(X.getUTCHours()>=12)]}function be(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var xe=S(X+="",w);return xe.toString=function(){return X},xe},parse:function(X){var xe=j(X+="",!1);return xe.toString=function(){return X},xe},utcFormat:function(X){var xe=S(X+="",N);return xe.toString=function(){return X},xe},utcParse:function(X){var xe=j(X+="",!0);return xe.toString=function(){return X},xe}}}var rN={"-":"",_:" ",0:"0"},mr=/^\s*\d+/,JF=/^%/,XF=/[\\^$*+?|[\]().{}]/g;function st(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function QF(t){return t.replace(XF,"\\$&")}function Cl(t){return new RegExp("^(?:"+t.map(QF).join("|")+")","i")}function kl(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function ZF(t,e,r){var n=mr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function eB(t,e,r){var n=mr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function tB(t,e,r){var n=mr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function rB(t,e,r){var n=mr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function nB(t,e,r){var n=mr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function nN(t,e,r){var n=mr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function aN(t,e,r){var n=mr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function aB(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function sB(t,e,r){var n=mr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function iB(t,e,r){var n=mr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function sN(t,e,r){var n=mr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function oB(t,e,r){var n=mr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function iN(t,e,r){var n=mr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function lB(t,e,r){var n=mr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function cB(t,e,r){var n=mr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function uB(t,e,r){var n=mr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function dB(t,e,r){var n=mr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function fB(t,e,r){var n=JF.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function hB(t,e,r){var n=mr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function pB(t,e,r){var n=mr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function oN(t,e){return st(t.getDate(),e,2)}function mB(t,e){return st(t.getHours(),e,2)}function gB(t,e){return st(t.getHours()%12||12,e,2)}function xB(t,e){return st(1+du.count(La(t),t),e,3)}function bE(t,e){return st(t.getMilliseconds(),e,3)}function yB(t,e){return bE(t,e)+"000"}function vB(t,e){return st(t.getMonth()+1,e,2)}function bB(t,e){return st(t.getMinutes(),e,2)}function jB(t,e){return st(t.getSeconds(),e,2)}function wB(t){var e=t.getDay();return e===0?7:e}function SB(t,e){return st(Sh.count(La(t)-1,t),e,2)}function jE(t){var e=t.getDay();return e>=4||e===0?vo(t):vo.ceil(t)}function NB(t,e){return t=jE(t),st(vo.count(La(t),t)+(La(t).getDay()===4),e,2)}function AB(t){return t.getDay()}function CB(t,e){return st(Md.count(La(t)-1,t),e,2)}function kB(t,e){return st(t.getFullYear()%100,e,2)}function EB(t,e){return t=jE(t),st(t.getFullYear()%100,e,2)}function OB(t,e){return st(t.getFullYear()%1e4,e,4)}function PB(t,e){var r=t.getDay();return t=r>=4||r===0?vo(t):vo.ceil(t),st(t.getFullYear()%1e4,e,4)}function TB(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+st(e/60|0,"0",2)+st(e%60,"0",2)}function lN(t,e){return st(t.getUTCDate(),e,2)}function IB(t,e){return st(t.getUTCHours(),e,2)}function MB(t,e){return st(t.getUTCHours()%12||12,e,2)}function RB(t,e){return st(1+wh.count(za(t),t),e,3)}function wE(t,e){return st(t.getUTCMilliseconds(),e,3)}function _B(t,e){return wE(t,e)+"000"}function DB(t,e){return st(t.getUTCMonth()+1,e,2)}function $B(t,e){return st(t.getUTCMinutes(),e,2)}function LB(t,e){return st(t.getUTCSeconds(),e,2)}function zB(t){var e=t.getUTCDay();return e===0?7:e}function FB(t,e){return st(Nh.count(za(t)-1,t),e,2)}function SE(t){var e=t.getUTCDay();return e>=4||e===0?bo(t):bo.ceil(t)}function BB(t,e){return t=SE(t),st(bo.count(za(t),t)+(za(t).getUTCDay()===4),e,2)}function qB(t){return t.getUTCDay()}function UB(t,e){return st(Rd.count(za(t)-1,t),e,2)}function VB(t,e){return st(t.getUTCFullYear()%100,e,2)}function HB(t,e){return t=SE(t),st(t.getUTCFullYear()%100,e,2)}function WB(t,e){return st(t.getUTCFullYear()%1e4,e,4)}function GB(t,e){var r=t.getUTCDay();return t=r>=4||r===0?bo(t):bo.ceil(t),st(t.getUTCFullYear()%1e4,e,4)}function YB(){return"+0000"}function cN(){return"%"}function uN(t){return+t}function dN(t){return Math.floor(+t/1e3)}var Mi,NE,AE;KB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function KB(t){return Mi=KF(t),NE=Mi.format,Mi.parse,AE=Mi.utcFormat,Mi.utcParse,Mi}function JB(t){return new Date(t)}function XB(t){return t instanceof Date?+t:+new Date(+t)}function r1(t,e,r,n,a,i,o,l,c,u){var d=qb(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),x=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),w=u("%B"),N=u("%Y");function b(S){return(c(S)<S?p:l(S)<S?g:o(S)<S?x:i(S)<S?m:n(S)<S?a(S)<S?y:v:r(S)<S?w:N)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?h(Array.from(S,XB)):h().map(JB)},d.ticks=function(S){var j=h();return t(j[0],j[j.length-1],S??10)},d.tickFormat=function(S,j){return j==null?b:u(j)},d.nice=function(S){var j=h();return(!S||typeof S.range!="function")&&(S=e(j[0],j[j.length-1],S??10)),S?h(dE(j,S)):d},d.copy=function(){return uu(d,r1(t,e,r,n,a,i,o,l,c,u))},d}function QB(){return Tn.apply(r1(GF,YF,La,e1,Sh,du,Qb,Jb,Ys,NE).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ZB(){return Tn.apply(r1(HF,WF,za,t1,Nh,wh,Zb,Xb,Ys,AE).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ah(){var t=0,e=1,r,n,a,i,o=$r,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,o=f(p,g),u):[o(0),o(1)]}}return u.range=d(Zo),u.rangeRound=d(Bb),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),u}}function Ss(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function CE(){var t=ws(Ah()($r));return t.copy=function(){return Ss(t,CE())},Ua.apply(t,arguments)}function kE(){var t=Hb(Ah()).domain([1,10]);return t.copy=function(){return Ss(t,kE()).base(t.base())},Ua.apply(t,arguments)}function EE(){var t=Wb(Ah());return t.copy=function(){return Ss(t,EE()).constant(t.constant())},Ua.apply(t,arguments)}function n1(){var t=Gb(Ah());return t.copy=function(){return Ss(t,n1()).exponent(t.exponent())},Ua.apply(t,arguments)}function eq(){return n1.apply(null,arguments).exponent(.5)}function OE(){var t=[],e=$r;function r(n){if(n!=null&&!isNaN(n=+n))return e((lu(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(us),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>Fz(t,i/n))},r.copy=function(){return OE(e).domain(t)},Ua.apply(r,arguments)}function Ch(){var t=0,e=.5,r=1,n=1,a,i,o,l,c,u=$r,d,f=!1,h;function p(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-i)*(n*x<n*i?l:c),u(f?Math.max(0,Math.min(1,x)):x))}p.domain=function(x){return arguments.length?([t,e,r]=x,a=d(t=+t),i=d(e=+e),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,p):[t,e,r]},p.clamp=function(x){return arguments.length?(f=!!x,p):f},p.interpolator=function(x){return arguments.length?(u=x,p):u};function g(x){return function(m){var y,v,w;return arguments.length?([y,v,w]=m,u=fF(x,[y,v,w]),p):[u(0),u(.5),u(1)]}}return p.range=g(Zo),p.rangeRound=g(Bb),p.unknown=function(x){return arguments.length?(h=x,p):h},function(x){return d=x,a=x(t),i=x(e),o=x(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,p}}function PE(){var t=ws(Ch()($r));return t.copy=function(){return Ss(t,PE())},Ua.apply(t,arguments)}function TE(){var t=Hb(Ch()).domain([.1,1,10]);return t.copy=function(){return Ss(t,TE()).base(t.base())},Ua.apply(t,arguments)}function IE(){var t=Wb(Ch());return t.copy=function(){return Ss(t,IE()).constant(t.constant())},Ua.apply(t,arguments)}function a1(){var t=Gb(Ch());return t.copy=function(){return Ss(t,a1()).exponent(t.exponent())},Ua.apply(t,arguments)}function tq(){return a1.apply(null,arguments).exponent(.5)}const fN=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:bc,scaleDiverging:PE,scaleDivergingLog:TE,scaleDivergingPow:a1,scaleDivergingSqrt:tq,scaleDivergingSymlog:IE,scaleIdentity:uE,scaleImplicit:ky,scaleLinear:Td,scaleLog:fE,scaleOrdinal:Lb,scalePoint:Gl,scalePow:Yb,scaleQuantile:mE,scaleQuantize:gE,scaleRadial:pE,scaleSequential:CE,scaleSequentialLog:kE,scaleSequentialPow:n1,scaleSequentialQuantile:OE,scaleSequentialSqrt:eq,scaleSequentialSymlog:EE,scaleSqrt:_F,scaleSymlog:hE,scaleThreshold:xE,scaleTime:QB,scaleUtc:ZB,tickFormat:cE},Symbol.toStringTag,{value:"Module"}));var Dx,hN;function kh(){if(hN)return Dx;hN=1;var t=Yo();function e(r,n,a){for(var i=-1,o=r.length;++i<o;){var l=r[i],c=n(l);if(c!=null&&(u===void 0?c===c&&!t(c):a(c,u)))var u=c,d=l}return d}return Dx=e,Dx}var $x,pN;function ME(){if(pN)return $x;pN=1;function t(e,r){return e>r}return $x=t,$x}var Lx,mN;function rq(){if(mN)return Lx;mN=1;var t=kh(),e=ME(),r=Qo();function n(a){return a&&a.length?t(a,r,e):void 0}return Lx=n,Lx}var nq=rq();const ns=it(nq);var zx,gN;function RE(){if(gN)return zx;gN=1;function t(e,r){return e<r}return zx=t,zx}var Fx,xN;function aq(){if(xN)return Fx;xN=1;var t=kh(),e=RE(),r=Qo();function n(a){return a&&a.length?t(a,r,e):void 0}return Fx=n,Fx}var sq=aq();const Eh=it(sq);var Bx,yN;function iq(){if(yN)return Bx;yN=1;var t=bb(),e=fa(),r=qk(),n=Gr();function a(i,o){var l=n(i)?t:r;return l(i,e(o,3))}return Bx=a,Bx}var qx,vN;function oq(){if(vN)return qx;vN=1;var t=Fk(),e=iq();function r(n,a){return t(e(n,a),1)}return qx=r,qx}var lq=oq();const cq=it(lq);var Ux,bN;function uq(){if(bN)return Ux;bN=1;var t=Mb();function e(r,n){return t(r,n)}return Ux=e,Ux}var dq=uq();const jo=it(dq);var el=1e9,fq={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},i1,Rt=!0,Pn="[DecimalError] ",ni=Pn+"Invalid argument: ",s1=Pn+"Exponent out of range: ",tl=Math.floor,Us=Math.pow,hq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,tn,sr=1e7,Ot=7,_E=9007199254740991,_d=tl(_E/Ot),ye={};ye.absoluteValue=ye.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ye.comparedTo=ye.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};ye.decimalPlaces=ye.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Ot;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};ye.dividedBy=ye.div=function(t){return Ea(this,new this.constructor(t))};ye.dividedToIntegerBy=ye.idiv=function(t){var e=this,r=e.constructor;return jt(Ea(e,new r(t),0,1),r.precision)};ye.equals=ye.eq=function(t){return!this.cmp(t)};ye.exponent=function(){return Yt(this)};ye.greaterThan=ye.gt=function(t){return this.cmp(t)>0};ye.greaterThanOrEqualTo=ye.gte=function(t){return this.cmp(t)>=0};ye.isInteger=ye.isint=function(){return this.e>this.d.length-2};ye.isNegative=ye.isneg=function(){return this.s<0};ye.isPositive=ye.ispos=function(){return this.s>0};ye.isZero=function(){return this.s===0};ye.lessThan=ye.lt=function(t){return this.cmp(t)<0};ye.lessThanOrEqualTo=ye.lte=function(t){return this.cmp(t)<1};ye.logarithm=ye.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(tn))throw Error(Pn+"NaN");if(r.s<1)throw Error(Pn+(r.s?"NaN":"-Infinity"));return r.eq(tn)?new n(0):(Rt=!1,e=Ea(Ac(r,i),Ac(t,i),i),Rt=!0,jt(e,a))};ye.minus=ye.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?LE(e,t):DE(e,(t.s=-t.s,t))};ye.modulo=ye.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Pn+"NaN");return r.s?(Rt=!1,e=Ea(r,t,0,1).times(t),Rt=!0,r.minus(e)):jt(new n(r),a)};ye.naturalExponential=ye.exp=function(){return $E(this)};ye.naturalLogarithm=ye.ln=function(){return Ac(this)};ye.negated=ye.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ye.plus=ye.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?DE(e,t):LE(e,(t.s=-t.s,t))};ye.precision=ye.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ni+t);if(e=Yt(a)+1,n=a.d.length-1,r=n*Ot+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};ye.squareRoot=ye.sqrt=function(){var t,e,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Pn+"NaN")}for(t=Yt(l),Rt=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=Jn(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=tl((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(Ea(l,i,o+2)).times(.5),Jn(i.d).slice(0,o)===(e=Jn(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(jt(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(e!="9999")break;o+=4}return Rt=!0,jt(n,r)};ye.times=ye.mul=function(t){var e,r,n,a,i,o,l,c,u,d=this,f=d.constructor,h=d.d,p=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=h.length,u=p.length,c<u&&(i=h,h=p,p=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=i[a]+p[n]*h[a-n-1]+e,i[a--]=l%sr|0,e=l/sr|0;i[a]=(i[a]+e)%sr|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,Rt?jt(t,f.precision):t};ye.toDecimalPlaces=ye.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(sa(t,0,el),e===void 0?e=n.rounding:sa(e,0,8),jt(r,t+Yt(r)+1,e))};ye.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=pi(n,!0):(sa(t,0,el),e===void 0?e=a.rounding:sa(e,0,8),n=jt(new a(n),t+1,e),r=pi(n,!0,t+1)),r};ye.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?pi(a):(sa(t,0,el),e===void 0?e=i.rounding:sa(e,0,8),n=jt(new i(a),t+Yt(a)+1,e),r=pi(n.abs(),!1,t+Yt(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};ye.toInteger=ye.toint=function(){var t=this,e=t.constructor;return jt(new e(t),Yt(t)+1,e.rounding)};ye.toNumber=function(){return+this};ye.toPower=ye.pow=function(t){var e,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(tn);if(l=new c(l),!l.s){if(t.s<1)throw Error(Pn+"Infinity");return l}if(l.eq(tn))return l;if(n=c.precision,t.eq(tn))return jt(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,i=l.s,o){if((r=d<0?-d:d)<=_E){for(a=new c(tn),e=Math.ceil(n/Ot+4),Rt=!1;r%2&&(a=a.times(l),wN(a.d,e)),r=tl(r/2),r!==0;)l=l.times(l),wN(l.d,e);return Rt=!0,t.s<0?new c(tn).div(a):jt(a,n)}}else if(i<0)throw Error(Pn+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Rt=!1,a=t.times(Ac(l,n+u)),Rt=!0,a=$E(a),a.s=i,a};ye.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=Yt(a),n=pi(a,r<=i.toExpNeg||r>=i.toExpPos)):(sa(t,1,el),e===void 0?e=i.rounding:sa(e,0,8),a=jt(new i(a),t,e),r=Yt(a),n=pi(a,t<=r||r<=i.toExpNeg,t)),n};ye.toSignificantDigits=ye.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(sa(t,1,el),e===void 0?e=n.rounding:sa(e,0,8)),jt(new n(r),t,e)};ye.toString=ye.valueOf=ye.val=ye.toJSON=ye[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Yt(t),r=t.constructor;return pi(t,e<=r.toExpNeg||e>=r.toExpPos)};function DE(t,e){var r,n,a,i,o,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Rt?jt(e,f):e;if(c=t.d,u=e.d,o=t.e,a=e.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/Ot),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/sr|0,c[i]%=sr;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,Rt?jt(e,f):e}function sa(t,e,r){if(t!==~~t||t<e||t>r)throw Error(ni+t)}function Jn(t){var e,r,n,a=t.length-1,i="",o=t[0];if(a>0){for(i+=o,e=1;e<a;e++)n=t[e]+"",r=Ot-n.length,r&&(i+=Ka(r)),i+=n;o=t[e],n=o+"",r=Ot-n.length,r&&(i+=Ka(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ea=(function(){function t(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%sr|0,o=i/sr|0;return o&&n.unshift(o),n}function e(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*sr+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,h,p,g,x,m,y,v,w,N,b,S,j,C,k=n.constructor,O=n.s==a.s?1:-1,I=n.d,M=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(Pn+"Division by zero");for(c=n.e-a.e,j=M.length,b=I.length,p=new k(O),g=p.d=[],u=0;M[u]==(I[u]||0);)++u;if(M[u]>(I[u]||0)&&--c,i==null?v=i=k.precision:o?v=i+(Yt(n)-Yt(a))+1:v=i,v<0)return new k(0);if(v=v/Ot+2|0,u=0,j==1)for(d=0,M=M[0],v++;(u<b||d)&&v--;u++)w=d*sr+(I[u]||0),g[u]=w/M|0,d=w%M|0;else{for(d=sr/(M[0]+1)|0,d>1&&(M=t(M,d),I=t(I,d),j=M.length,b=I.length),N=j,x=I.slice(0,j),m=x.length;m<j;)x[m++]=0;C=M.slice(),C.unshift(0),S=M[0],M[1]>=sr/2&&++S;do d=0,l=e(M,x,j,m),l<0?(y=x[0],j!=m&&(y=y*sr+(x[1]||0)),d=y/S|0,d>1?(d>=sr&&(d=sr-1),f=t(M,d),h=f.length,m=x.length,l=e(f,x,h,m),l==1&&(d--,r(f,j<h?C:M,h))):(d==0&&(l=d=1),f=M.slice()),h=f.length,h<m&&f.unshift(0),r(x,f,m),l==-1&&(m=x.length,l=e(M,x,j,m),l<1&&(d++,r(x,j<m?C:M,m))),m=x.length):l===0&&(d++,x=[0]),g[u++]=d,l&&x[0]?x[m++]=I[N]||0:(x=[I[N]],m=1);while((N++<b||x[0]!==void 0)&&v--)}return g[0]||g.shift(),p.e=c,jt(p,o?i+Yt(p)+1:i)}})();function $E(t,e){var r,n,a,i,o,l,c=0,u=0,d=t.constructor,f=d.precision;if(Yt(t)>16)throw Error(s1+Yt(t));if(!t.s)return new d(tn);for(Rt=!1,l=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(Us(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(tn),d.precision=l;;){if(a=jt(a.times(t),l),r=r.times(++c),o=i.plus(Ea(a,r,l)),Jn(o.d).slice(0,l)===Jn(i.d).slice(0,l)){for(;u--;)i=jt(i.times(i),l);return d.precision=f,e==null?(Rt=!0,jt(i,f)):i}i=o}}function Yt(t){for(var e=t.e*Ot,r=t.d[0];r>=10;r/=10)e++;return e}function Vx(t,e,r){if(e>t.LN10.sd())throw Rt=!0,r&&(t.precision=r),Error(Pn+"LN10 precision limit exceeded");return jt(new t(t.LN10),e)}function Ka(t){for(var e="";t--;)e+="0";return e}function Ac(t,e){var r,n,a,i,o,l,c,u,d,f=1,h=10,p=t,g=p.d,x=p.constructor,m=x.precision;if(p.s<1)throw Error(Pn+(p.s?"NaN":"-Infinity"));if(p.eq(tn))return new x(0);if(e==null?(Rt=!1,u=m):u=e,p.eq(10))return e==null&&(Rt=!0),Vx(x,u);if(u+=h,x.precision=u,r=Jn(g),n=r.charAt(0),i=Yt(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(t),r=Jn(p.d),n=r.charAt(0),f++;i=Yt(p),n>1?(p=new x("0."+r),i++):p=new x(n+"."+r.slice(1))}else return c=Vx(x,u+2,m).times(i+""),p=Ac(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=m,e==null?(Rt=!0,jt(p,m)):p;for(l=o=p=Ea(p.minus(tn),p.plus(tn),u),d=jt(p.times(p),u),a=3;;){if(o=jt(o.times(d),u),c=l.plus(Ea(o,new x(a),u)),Jn(c.d).slice(0,u)===Jn(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(Vx(x,u+2,m).times(i+""))),l=Ea(l,new x(f),u),x.precision=m,e==null?(Rt=!0,jt(l,m)):l;l=c,a+=2}}function jN(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=tl(r/Ot),t.d=[],n=(r+1)%Ot,r<0&&(n+=Ot),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Ot;n<a;)t.d.push(+e.slice(n,n+=Ot));e=e.slice(n),n=Ot-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Rt&&(t.e>_d||t.e<-_d))throw Error(s1+r)}else t.s=0,t.e=0,t.d=[0];return t}function jt(t,e,r){var n,a,i,o,l,c,u,d,f=t.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=Ot,a=e,u=f[d=0];else{if(d=Math.ceil((n+1)/Ot),i=f.length,d>=i)return t;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=Ot,a=n-Ot+o}if(r!==void 0&&(i=Us(10,o-a-1),l=u/i%10|0,c=e<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Us(10,o-a):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(i=Yt(t),f.length=1,e=e-i-1,f[0]=Us(10,(Ot-e%Ot)%Ot),t.e=tl(-e/Ot)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Us(10,Ot-n),f[d]=a>0?(u/Us(10,o-a)%Us(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==sr&&(f[0]=1,++t.e);break}else{if(f[d]+=i,f[d]!=sr)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Rt&&(t.e>_d||t.e<-_d))throw Error(s1+Yt(t));return t}function LE(t,e){var r,n,a,i,o,l,c,u,d,f,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Rt?jt(e,p):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(p/Ot),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=sr-1;--c[i],c[a]+=sr}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Rt?jt(e,p):e):new h(0)}function pi(t,e,r){var n,a=Yt(t),i=Jn(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Ka(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Ka(-a-1)+i,r&&(n=r-o)>0&&(i+=Ka(n))):a>=o?(i+=Ka(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Ka(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Ka(n))),t.s<0?"-"+i:i}function wN(t,e){if(t.length>e)return t.length=e,!0}function zE(t){var e,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ni+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return jN(o,i.toString())}else if(typeof i!="string")throw Error(ni+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,hq.test(i))jN(o,i);else throw Error(ni+i)}if(a.prototype=ye,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=zE,a.config=a.set=pq,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function pq(t){if(!t||typeof t!="object")throw Error(Pn+"Object expected");var e,r,n,a=["precision",1,el,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(tl(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(ni+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ni+r+": "+n);return this}var i1=zE(fq);tn=new i1(1);const mt=i1;function mq(t){return vq(t)||yq(t)||xq(t)||gq()}function gq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xq(t,e){if(t){if(typeof t=="string")return Ty(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ty(t,e)}}function yq(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function vq(t){if(Array.isArray(t))return Ty(t)}function Ty(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var bq=function(e){return e},FE={},BE=function(e){return e===FE},SN=function(e){return function r(){return arguments.length===0||arguments.length===1&&BE(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},jq=function t(e,r){return e===1?r:SN(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==FE}).length;return o>=e?r.apply(void 0,a):t(e-o,SN(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return BE(f)?c.shift():f});return r.apply(void 0,mq(d).concat(c))}))})},Oh=function(e){return jq(e.length,e)},Iy=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},wq=Oh(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),Sq=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return bq;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},My=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},qE=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=e.apply(void 0,i)),n}};function Nq(t){var e;return t===0?e=1:e=Math.floor(new mt(t).abs().log(10).toNumber())+1,e}function Aq(t,e,r){for(var n=new mt(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var Cq=Oh(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),kq=Oh(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),Eq=Oh(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Ph={rangeStep:Aq,getDigitCount:Nq,interpolateNumber:Cq,uninterpolateNumber:kq,uninterpolateTruncation:Eq};function Ry(t){return Tq(t)||Pq(t)||UE(t)||Oq()}function Oq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pq(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Tq(t){if(Array.isArray(t))return _y(t)}function Cc(t,e){return Rq(t)||Mq(t,e)||UE(t,e)||Iq()}function Iq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UE(t,e){if(t){if(typeof t=="string")return _y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _y(t,e)}}function _y(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mq(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function Rq(t){if(Array.isArray(t))return t}function VE(t){var e=Cc(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function HE(t,e,r){if(t.lte(0))return new mt(0);var n=Ph.getDigitCount(t.toNumber()),a=new mt(10).pow(n),i=t.div(a),o=n!==1?.05:.1,l=new mt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return e?c:new mt(Math.ceil(c))}function _q(t,e,r){var n=1,a=new mt(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new mt(10).pow(Ph.getDigitCount(t)-1),a=new mt(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new mt(Math.floor(t)))}else t===0?a=new mt(Math.floor((e-1)/2)):r||(a=new mt(Math.floor(t)));var o=Math.floor((e-1)/2),l=Sq(wq(function(c){return a.add(new mt(c-o).mul(n)).toNumber()}),Iy);return l(0,e)}function WE(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var i=HE(new mt(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new mt(0):(o=new mt(t).add(e).div(2),o=o.sub(new mt(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),c=Math.ceil(new mt(e).sub(o).div(i).toNumber()),u=l+c+1;return u>r?WE(t,e,r,n,a+1):(u<r&&(c=e>0?c+(r-u):c,l=e>0?l:l+(r-u)),{step:i,tickMin:o.sub(new mt(l).mul(i)),tickMax:o.add(new mt(c).mul(i))})}function Dq(t){var e=Cc(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=VE([r,n]),c=Cc(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(Ry(Iy(0,a-1).map(function(){return 1/0}))):[].concat(Ry(Iy(0,a-1).map(function(){return-1/0})),[d]);return r>n?My(f):f}if(u===d)return _q(u,a,i);var h=WE(u,d,o,i),p=h.step,g=h.tickMin,x=h.tickMax,m=Ph.rangeStep(g,x.add(new mt(.1).mul(p)),p);return r>n?My(m):m}function $q(t,e){var r=Cc(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=VE([n,a]),l=Cc(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(e,2),f=HE(new mt(u).sub(c).div(d-1),i,0),h=[].concat(Ry(Ph.rangeStep(new mt(c),new mt(u).sub(new mt(.99).mul(f)),f)),[u]);return n>a?My(h):h}var Lq=qE(Dq),zq=qE($q),Fq="Invariant failed";function mi(t,e){throw new Error(Fq)}var Bq=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function wo(t){"@babel/helpers - typeof";return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(t)}function Dd(){return Dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dd.apply(this,arguments)}function qq(t,e){return Wq(t)||Hq(t,e)||Vq(t,e)||Uq()}function Uq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vq(t,e){if(t){if(typeof t=="string")return NN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NN(t,e)}}function NN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hq(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Wq(t){if(Array.isArray(t))return t}function Gq(t,e){if(t==null)return{};var r=Yq(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yq(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Kq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KE(n.key),n)}}function Xq(t,e,r){return e&&Jq(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qq(t,e,r){return e=$d(e),Zq(t,GE()?Reflect.construct(e,r||[],$d(t).constructor):e.apply(t,r))}function Zq(t,e){if(e&&(wo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eU(t)}function eU(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GE=function(){return!!t})()}function $d(t){return $d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$d(t)}function tU(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dy(t,e)}function Dy(t,e){return Dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Dy(t,e)}function YE(t,e,r){return e=KE(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KE(t){var e=rU(t,"string");return wo(e)=="symbol"?e:e+""}function rU(t,e){if(wo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Th=(function(t){function e(){return Kq(this,e),Qq(this,e,arguments)}return tU(e,t),Xq(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=Gq(n,Bq),p=Pe(h,!1);this.props.direction==="x"&&d.type!=="number"&&mi();var g=c.map(function(x){var m=u(x,l),y=m.x,v=m.y,w=m.value,N=m.errorVal;if(!N)return null;var b=[],S,j;if(Array.isArray(N)){var C=qq(N,2);S=C[0],j=C[1]}else S=j=N;if(i==="vertical"){var k=d.scale,O=v+a,I=O+o,M=O-o,T=k(w-S),R=k(w+j);b.push({x1:R,y1:I,x2:R,y2:M}),b.push({x1:T,y1:O,x2:R,y2:O}),b.push({x1:T,y1:I,x2:T,y2:M})}else if(i==="horizontal"){var L=f.scale,B=y+a,H=B-o,Q=B+o,te=L(w-S),K=L(w+j);b.push({x1:H,y1:K,x2:Q,y2:K}),b.push({x1:B,y1:te,x2:B,y2:K}),b.push({x1:H,y1:te,x2:Q,y2:te})}return D.createElement(tt,Dd({className:"recharts-errorBar",key:"bar-".concat(b.map(function(ne){return"".concat(ne.x1,"-").concat(ne.x2,"-").concat(ne.y1,"-").concat(ne.y2)}))},p),b.map(function(ne){return D.createElement("line",Dd({},ne,{key:"line-".concat(ne.x1,"-").concat(ne.x2,"-").concat(ne.y1,"-").concat(ne.y2)}))}))});return D.createElement(tt,{className:"recharts-errorBars"},g)}}])})(D.Component);YE(Th,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});YE(Th,"displayName","ErrorBar");function kc(t){"@babel/helpers - typeof";return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kc(t)}function AN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ds(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AN(Object(r),!0).forEach(function(n){nU(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nU(t,e,r){return e=aU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aU(t){var e=sU(t,"string");return kc(e)=="symbol"?e:e+""}function sU(t,e){if(kc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JE=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=Qr(r,cs);if(!o)return null;var l=cs.defaultProps,c=l!==void 0?Ds(Ds({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,p=f.props,g=p.sectors||p.data||[];return d.concat(g.map(function(x){return{type:o.props.iconType||h.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,p=h!==void 0?Ds(Ds({},h),f.props):{},g=p.dataKey,x=p.name,m=p.legendType,y=p.hide;return{inactive:y,dataKey:g,type:c.iconType||m||"square",color:o1(f),value:x||g,payload:p}}),Ds(Ds(Ds({},c),cs.getWithHeight(o,a)),{},{payload:u,item:o})};function Ec(t){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(t)}function CN(t){return cU(t)||lU(t)||oU(t)||iU()}function iU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oU(t,e){if(t){if(typeof t=="string")return $y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $y(t,e)}}function lU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cU(t){if(Array.isArray(t))return $y(t)}function $y(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kN(Object(r),!0).forEach(function(n){Zi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zi(t,e,r){return e=uU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uU(t){var e=dU(t,"string");return Ec(e)=="symbol"?e:e+""}function dU(t,e){if(Ec(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ec(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zt(t,e,r){return Ue(t)||Ue(e)?r:er(e)?ln(t,e,r):$e(e)?e(t):r}function Yl(t,e,r,n){var a=cq(t,function(l){return Zt(l,e)});if(r==="number"){var i=a.filter(function(l){return se(l)||parseFloat(l)});return i.length?[Eh(i),ns(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!Ue(l)}):a;return o.map(function(l){return er(l)||l instanceof Date?l:""})}var fU=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(_r(f-d)!==_r(h-f)){var g=[];if(_r(h-f)===_r(c[1]-c[0])){p=h;var x=f+c[1]-c[0];g[0]=Math.min(x,(x+d)/2),g[1]=Math.max(x,(x+d)/2)}else{p=d;var m=h+c[1]-c[0];g[0]=Math.min(f,(m+f)/2),g[1]=Math.max(f,(m+f)/2)}var y=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(e>y[0]&&e<=y[1]||e>=g[0]&&e<=g[1]){o=a[u].index;break}}else{var v=Math.min(d,h),w=Math.max(d,h);if(e>(v+f)/2&&e<=(w+f)/2){o=a[u].index;break}}}else for(var N=0;N<l;N++)if(N===0&&e<=(n[N].coordinate+n[N+1].coordinate)/2||N>0&&N<l-1&&e>(n[N].coordinate+n[N-1].coordinate)/2&&e<=(n[N].coordinate+n[N+1].coordinate)/2||N===l-1&&e>(n[N].coordinate+n[N-1].coordinate)/2){o=n[N].index;break}return o},o1=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?zt(zt({},e.type.defaultProps),e.props):e.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},hU=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,p=f.length;h<p;h++){var g=d[f[h]],x=g.items,m=g.cateAxisId,y=x.filter(function(j){return ka(j.type).indexOf("Bar")>=0});if(y&&y.length){var v=y[0].type.defaultProps,w=v!==void 0?zt(zt({},v),y[0].props):y[0].props,N=w.barSize,b=w[m];o[b]||(o[b]=[]);var S=Ue(N)?r:N;o[b].push({item:y[0],stackList:y.slice(1),barSize:Ue(S)?void 0:Dr(S,n,0)})}}return o},pU=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Dr(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,p=a/c,g=o.reduce(function(N,b){return N+b.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&p>0&&(h=!0,p*=.9,g=c*p);var x=(a-g)/2>>0,m={offset:x-u,size:0};d=o.reduce(function(N,b){var S={item:b.item,position:{offset:m.offset+m.size+u,size:h?p:b.barSize}},j=[].concat(CN(N),[S]);return m=j[j.length-1].position,b.stackList&&b.stackList.length&&b.stackList.forEach(function(C){j.push({item:C,position:m})}),j},f)}else{var y=Dr(n,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var v=(a-2*y-(c-1)*u)/c;v>1&&(v>>=0);var w=l===+l?Math.min(v,l):v;d=o.reduce(function(N,b,S){var j=[].concat(CN(N),[{item:b.item,position:{offset:y+(v+u)*S+(v-w)/2,size:w}}]);return b.stackList&&b.stackList.length&&b.stackList.forEach(function(C){j.push({item:C,position:j[j.length-1].position})}),j},f)}return d},mU=function(e,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=JE({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,p=u.align,g=u.verticalAlign,x=u.layout;if((x==="vertical"||x==="horizontal"&&g==="middle")&&p!=="center"&&se(e[p]))return zt(zt({},e),{},Zi({},p,e[p]+(f||0)));if((x==="horizontal"||x==="vertical"&&p==="center")&&g!=="middle"&&se(e[g]))return zt(zt({},e),{},Zi({},g,e[g]+(h||0)))}return e},gU=function(e,r,n){return Ue(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},XE=function(e,r,n,a,i){var o=r.props.children,l=kn(o,Th).filter(function(u){return gU(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=Zt(d,n);if(Ue(f))return u;var h=Array.isArray(f)?[Eh(f),ns(f)]:[f,f],p=c.reduce(function(g,x){var m=Zt(d,x,0),y=h[0]-Math.abs(Array.isArray(m)?m[0]:m),v=h[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(y,g[0]),Math.max(v,g[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},xU=function(e,r,n,a,i){var o=r.map(function(l){return XE(e,l,n,i,a)}).filter(function(l){return!Ue(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},QE=function(e,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&XE(e,c,u,a)||Yl(e,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},ZE=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},eO=function(e,r,n,a){if(a)return e.map(function(c){return c.coordinate});var i,o,l=e.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},Aa=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&l?.length>=2?_r(l[0]-l[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!Jo(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},Hx=new WeakMap,Tu=function(e,r){if(typeof r!="function")return e;Hx.has(e)||Hx.set(e,new WeakMap);var n=Hx.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},tO=function(e,r,n){var a=e.scale,i=e.type,o=e.layout,l=e.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:bc(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Td(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Gl(),realScaleType:"point"}:i==="category"?{scale:bc(),realScaleType:"band"}:{scale:Td(),realScaleType:"linear"};if(di(a)){var c="scale".concat(ph(a));return{scale:(fN[c]||Gl)(),realScaleType:fN[c]?c:"point"}}return $e(a)?{scale:a}:{scale:Gl(),realScaleType:"point"}},EN=1e-4,rO=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-EN,o=Math.max(a[0],a[1])+EN,l=e(r[0]),c=e(r[n-1]);(l<i||l>o||c<i||c>o)&&e.domain([r[0],r[n-1]])}},yU=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},vU=function(e,r){if(!r||r.length!==2||!se(r[0])||!se(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!se(e[0])||e[0]<n)&&(i[0]=n),(!se(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},bU=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Jo(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=i,e[l][n][1]=i+c,i=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+c,o=e[l][n][1])}},jU=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=Jo(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},wU={sign:bU,expand:c$,none:ho,silhouette:u$,wiggle:d$,positive:jU},SU=function(e,r,n){var a=r.map(function(l){return l.props.dataKey}),i=wU[n],o=l$().keys(a).value(function(l,c){return+Zt(l,c,0)}).order(hy).offset(i);return o(e)},NU=function(e,r,n,a,i,o){if(!e)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,h){var p,g=(p=h.type)!==null&&p!==void 0&&p.defaultProps?zt(zt({},h.type.defaultProps),h.props):h.props,x=g.stackId,m=g.hide;if(m)return f;var y=g[n],v=f[y]||{hasStack:!1,stackGroups:{}};if(er(x)){var w=v.stackGroups[x]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(h),v.hasStack=!0,v.stackGroups[x]=w}else v.stackGroups[Xo("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return zt(zt({},f),{},Zi({},y,v))},c),d={};return Object.keys(u).reduce(function(f,h){var p=u[h];if(p.hasStack){var g={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(x,m){var y=p.stackGroups[m];return zt(zt({},x),{},Zi({},m,{numericAxisId:n,cateAxisId:a,items:y.items,stackedData:SU(e,y.items,i)}))},g)}return zt(zt({},f),{},Zi({},h,p))},d)},nO=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=Lq(u,i,l);return e.domain([Eh(d),ns(d)]),{niceTicks:d}}if(i&&a==="number"){var f=e.domain(),h=zq(f,i,l);return{niceTicks:h}}return null};function ON(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ue(a[e.dataKey])){var l=hd(r,"value",a[e.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Zt(a,Ue(o)?e.dataKey:o);return Ue(c)?null:e.scale(c)}var PN=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,o=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=Zt(o,r.dataKey,r.domain[l]);return Ue(c)?null:r.scale(c)-i/2+a},AU=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},CU=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?zt(zt({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(er(i)){var o=r[i];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},kU=function(e){return e.reduce(function(r,n){return[Eh(n.concat([r[0]]).filter(se)),ns(n.concat([r[1]]).filter(se))]},[1/0,-1/0])},aO=function(e,r,n){return Object.keys(e).reduce(function(a,i){var o=e[i],l=o.stackedData,c=l.reduce(function(u,d){var f=kU(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},TN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,IN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ly=function(e,r,n){if($e(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(se(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(TN.test(e[0])){var i=+TN.exec(e[0])[1];a[0]=r[0]-i}else $e(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(se(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(IN.test(e[1])){var o=+IN.exec(e[1])[1];a[1]=r[1]+o}else $e(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},Ld=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=_b(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},MN=function(e,r,n){return!e||!e.length||jo(e,ln(n,"type.defaultProps.domain"))?r:e},sO=function(e,r){var n=e.type.defaultProps?zt(zt({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return zt(zt({},Pe(e,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:o1(e),value:Zt(r,a),type:c,payload:r,chartType:u,hide:d})};function Oc(t){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(t)}function RN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ba(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RN(Object(r),!0).forEach(function(n){iO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iO(t,e,r){return e=EU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EU(t){var e=OU(t,"string");return Oc(e)=="symbol"?e:e+""}function OU(t,e){if(Oc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PU(t,e){return RU(t)||MU(t,e)||IU(t,e)||TU()}function TU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IU(t,e){if(t){if(typeof t=="string")return _N(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _N(t,e)}}function _N(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MU(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function RU(t){if(Array.isArray(t))return t}var zd=Math.PI/180,_U=function(e){return e*180/Math.PI},At=function(e,r,n,a){return{x:e+Math.cos(-zd*a)*n,y:r+Math.sin(-zd*a)*n}},oO=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},DU=function(e,r,n,a,i){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=Dr(e.cx,o,o/2),f=Dr(e.cy,l,l/2),h=oO(o,l,n),p=Dr(e.innerRadius,h,0),g=Dr(e.outerRadius,h,h*.8),x=Object.keys(r);return x.reduce(function(m,y){var v=r[y],w=v.domain,N=v.reversed,b;if(Ue(v.range))a==="angleAxis"?b=[c,u]:a==="radiusAxis"&&(b=[p,g]),N&&(b=[b[1],b[0]]);else{b=v.range;var S=b,j=PU(S,2);c=j[0],u=j[1]}var C=tO(v,i),k=C.realScaleType,O=C.scale;O.domain(w).range(b),rO(O);var I=nO(O,ba(ba({},v),{},{realScaleType:k})),M=ba(ba(ba({},v),I),{},{range:b,radius:g,realScaleType:k,scale:O,cx:d,cy:f,innerRadius:p,outerRadius:g,startAngle:c,endAngle:u});return ba(ba({},m),{},iO({},y,M))},{})},$U=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},LU=function(e,r){var n=e.x,a=e.y,i=r.cx,o=r.cy,l=$U({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:_U(u),angleInRadian:u}},zU=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},FU=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return e+l*360},DN=function(e,r){var n=e.x,a=e.y,i=LU({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=zU(r),f=d.startAngle,h=d.endAngle,p=l,g;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}return g?ba(ba({},r),{},{radius:o,angle:FU(p,r)}):null},lO=function(e){return!A.isValidElement(e)&&!$e(e)&&typeof e!="boolean"?e.className:""};function Pc(t){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(t)}var BU=["offset"];function qU(t){return WU(t)||HU(t)||VU(t)||UU()}function UU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VU(t,e){if(t){if(typeof t=="string")return zy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zy(t,e)}}function HU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WU(t){if(Array.isArray(t))return zy(t)}function zy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function GU(t,e){if(t==null)return{};var r=YU(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function YU(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Qt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$N(Object(r),!0).forEach(function(n){KU(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$N(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KU(t,e,r){return e=JU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JU(t){var e=XU(t,"string");return Pc(e)=="symbol"?e:e+""}function XU(t,e){if(Pc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tc.apply(this,arguments)}var QU=function(e){var r=e.value,n=e.formatter,a=Ue(e.children)?r:e.children;return $e(n)?n(a):a},ZU=function(e,r){var n=_r(r-e),a=Math.min(Math.abs(r-e),360);return n*a},eV=function(e,r,n){var a=e.position,i=e.viewBox,o=e.offset,l=e.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,p=c.startAngle,g=c.endAngle,x=c.clockWise,m=(f+h)/2,y=ZU(p,g),v=y>=0?1:-1,w,N;a==="insideStart"?(w=p+v*o,N=x):a==="insideEnd"?(w=g-v*o,N=!x):a==="end"&&(w=g+v*o,N=x),N=y<=0?N:!N;var b=At(u,d,m,w),S=At(u,d,m,w+(N?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(N?0:1,`,
    `).concat(S.x,",").concat(S.y),C=Ue(e.id)?Xo("recharts-radial-line-"):e.id;return D.createElement("text",Tc({},n,{dominantBaseline:"central",className:Ve("recharts-radial-bar-label",l)}),D.createElement("defs",null,D.createElement("path",{id:C,d:j})),D.createElement("textPath",{xlinkHref:"#".concat(C)},r))},tV=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var p=At(o,l,u+n,h),g=p.x,x=p.y;return{x:g,y:x,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var m=(c+u)/2,y=At(o,l,m,h),v=y.x,w=y.y;return{x:v,y:w,textAnchor:"middle",verticalAnchor:"middle"}},rV=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*a,p=f>0?"end":"start",g=f>0?"start":"end",x=u>=0?1:-1,m=x*a,y=x>0?"end":"start",v=x>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:p};return Qt(Qt({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var N={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:g};return Qt(Qt({},N),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var b={x:l-m,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return Qt(Qt({},b),n?{width:Math.max(b.x-n.x,0),height:d}:{})}if(i==="right"){var S={x:l+u+m,y:c+d/2,textAnchor:v,verticalAnchor:"middle"};return Qt(Qt({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:d}:{})}var j=n?{width:u,height:d}:{};return i==="insideLeft"?Qt({x:l+m,y:c+d/2,textAnchor:v,verticalAnchor:"middle"},j):i==="insideRight"?Qt({x:l+u-m,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},j):i==="insideTop"?Qt({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},j):i==="insideBottom"?Qt({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:p},j):i==="insideTopLeft"?Qt({x:l+m,y:c+h,textAnchor:v,verticalAnchor:g},j):i==="insideTopRight"?Qt({x:l+u-m,y:c+h,textAnchor:y,verticalAnchor:g},j):i==="insideBottomLeft"?Qt({x:l+m,y:c+d-h,textAnchor:v,verticalAnchor:p},j):i==="insideBottomRight"?Qt({x:l+u-m,y:c+d-h,textAnchor:y,verticalAnchor:p},j):Ko(i)&&(se(i.x)||Ws(i.x))&&(se(i.y)||Ws(i.y))?Qt({x:l+Dr(i.x,u),y:c+Dr(i.y,d),textAnchor:"end",verticalAnchor:"end"},j):Qt({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},nV=function(e){return"cx"in e&&se(e.cx)};function or(t){var e=t.offset,r=e===void 0?5:e,n=GU(t,BU),a=Qt({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||Ue(l)&&Ue(c)&&!A.isValidElement(u)&&!$e(u))return null;if(A.isValidElement(u))return A.cloneElement(u,a);var p;if($e(u)){if(p=A.createElement(u,a),A.isValidElement(p))return p}else p=QU(a);var g=nV(i),x=Pe(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return eV(a,p,x);var m=g?tV(a):rV(a);return D.createElement(hi,Tc({className:Ve("recharts-label",f)},x,m,{breakAll:h}),p)}or.displayName="Label";var cO=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,h=e.y,p=e.top,g=e.left,x=e.width,m=e.height,y=e.clockWise,v=e.labelViewBox;if(v)return v;if(se(x)&&se(m)){if(se(f)&&se(h))return{x:f,y:h,width:x,height:m};if(se(p)&&se(g))return{x:p,y:g,width:x,height:m}}return se(f)&&se(h)?{x:f,y:h,width:0,height:0}:se(r)&&se(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:y}:e.viewBox?e.viewBox:{}},aV=function(e,r){return e?e===!0?D.createElement(or,{key:"label-implicit",viewBox:r}):er(e)?D.createElement(or,{key:"label-implicit",viewBox:r,value:e}):A.isValidElement(e)?e.type===or?A.cloneElement(e,{key:"label-implicit",viewBox:r}):D.createElement(or,{key:"label-implicit",content:e,viewBox:r}):$e(e)?D.createElement(or,{key:"label-implicit",content:e,viewBox:r}):Ko(e)?D.createElement(or,Tc({viewBox:r},e,{key:"label-implicit"})):null:null},sV=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=cO(e),o=kn(a,or).map(function(c,u){return A.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=aV(e.label,r||i);return[l].concat(qU(o))};or.parseViewBox=cO;or.renderCallByParent=sV;var Wx,LN;function iV(){if(LN)return Wx;LN=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return Wx=t,Wx}var oV=iV();const lV=it(oV);function Ic(t){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(t)}var cV=["valueAccessor"],uV=["data","dataKey","clockWise","id","textBreakAll"];function dV(t){return mV(t)||pV(t)||hV(t)||fV()}function fV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hV(t,e){if(t){if(typeof t=="string")return Fy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fy(t,e)}}function pV(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mV(t){if(Array.isArray(t))return Fy(t)}function Fy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fd(){return Fd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fd.apply(this,arguments)}function zN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function FN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zN(Object(r),!0).forEach(function(n){gV(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gV(t,e,r){return e=xV(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xV(t){var e=yV(t,"string");return Ic(e)=="symbol"?e:e+""}function yV(t,e){if(Ic(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ic(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BN(t,e){if(t==null)return{};var r=vV(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vV(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var bV=function(e){return Array.isArray(e.value)?lV(e.value):e.value};function Oa(t){var e=t.valueAccessor,r=e===void 0?bV:e,n=BN(t,cV),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=BN(n,uV);return!a||!a.length?null:D.createElement(tt,{className:"recharts-label-list"},a.map(function(d,f){var h=Ue(i)?r(d,f):Zt(d&&d.payload,i),p=Ue(l)?{}:{id:"".concat(l,"-").concat(f)};return D.createElement(or,Fd({},Pe(d,!0),u,p,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:or.parseViewBox(Ue(o)?d:FN(FN({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Oa.displayName="LabelList";function jV(t,e){return t?t===!0?D.createElement(Oa,{key:"labelList-implicit",data:e}):D.isValidElement(t)||$e(t)?D.createElement(Oa,{key:"labelList-implicit",data:e,content:t}):Ko(t)?D.createElement(Oa,Fd({data:e},t,{key:"labelList-implicit"})):null:null}function wV(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=kn(n,Oa).map(function(o,l){return A.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!r)return a;var i=jV(t.label,e);return[i].concat(dV(a))}Oa.renderCallByParent=wV;function Mc(t){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mc(t)}function By(){return By=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},By.apply(this,arguments)}function qN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function UN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qN(Object(r),!0).forEach(function(n){SV(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SV(t,e,r){return e=NV(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NV(t){var e=AV(t,"string");return Mc(e)=="symbol"?e:e+""}function AV(t,e){if(Mc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CV=function(e,r){var n=_r(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},Iu=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/zd,h=u?i:i+o*f,p=At(r,n,d,h),g=At(r,n,a,h),x=u?i-o*f:i,m=At(r,n,d*Math.cos(f*zd),x);return{center:p,circleTangency:g,lineTangency:m,theta:f}},uO=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.startAngle,l=e.endAngle,c=CV(o,l),u=o+c,d=At(r,n,i,o),f=At(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var p=At(r,n,a,o),g=At(r,n,a,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},kV=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=_r(d-u),h=Iu({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),p=h.circleTangency,g=h.lineTangency,x=h.theta,m=Iu({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),y=m.circleTangency,v=m.lineTangency,w=m.theta,N=c?Math.abs(u-d):Math.abs(u-d)-x-w;if(N<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):uO({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var b="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
  `);if(a>0){var S=Iu({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),j=S.circleTangency,C=S.lineTangency,k=S.theta,O=Iu({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=O.circleTangency,M=O.lineTangency,T=O.theta,R=c?Math.abs(u-d):Math.abs(u-d)-k-T;if(R<0&&o===0)return"".concat(b,"L").concat(r,",").concat(n,"Z");b+="L".concat(M.x,",").concat(M.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(R>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else b+="L".concat(r,",").concat(n,"Z");return b},EV={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},dO=function(e){var r=UN(UN({},EV),e),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<i||d===f)return null;var p=Ve("recharts-sector",h),g=o-i,x=Dr(l,g,0,!0),m;return x>0&&Math.abs(d-f)<360?m=kV({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(x,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):m=uO({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),D.createElement("path",By({},Pe(r,!0),{className:p,d:m,role:"img"}))};function Rc(t){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(t)}function qy(){return qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qy.apply(this,arguments)}function VN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VN(Object(r),!0).forEach(function(n){OV(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OV(t,e,r){return e=PV(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PV(t){var e=TV(t,"string");return Rc(e)=="symbol"?e:e+""}function TV(t,e){if(Rc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WN={curveBasisClosed:X7,curveBasisOpen:Q7,curveBasis:J7,curveBumpX:D7,curveBumpY:$7,curveLinearClosed:Z7,curveLinear:gh,curveMonotoneX:e$,curveMonotoneY:t$,curveNatural:r$,curveStep:n$,curveStepAfter:s$,curveStepBefore:a$},Mu=function(e){return e.x===+e.x&&e.y===+e.y},El=function(e){return e.x},Ol=function(e){return e.y},IV=function(e,r){if($e(e))return e;var n="curve".concat(ph(e));return(n==="curveMonotone"||n==="curveBump")&&r?WN["".concat(n).concat(r==="vertical"?"Y":"X")]:WN[n]||gh},MV=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=IV(n,l),f=u?i.filter(function(x){return Mu(x)}):i,h;if(Array.isArray(o)){var p=u?o.filter(function(x){return Mu(x)}):o,g=f.map(function(x,m){return HN(HN({},x),{},{base:p[m]})});return l==="vertical"?h=Su().y(Ol).x1(El).x0(function(x){return x.base.x}):h=Su().x(El).y1(Ol).y0(function(x){return x.base.y}),h.defined(Mu).curve(d),h(g)}return l==="vertical"&&se(o)?h=Su().y(Ol).x1(El).x0(o):se(o)?h=Su().x(El).y1(Ol).y0(o):h=ck().x(El).y(Ol),h.defined(Mu).curve(d),h(f)},eo=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?MV(e):a;return A.createElement("path",qy({},Pe(e,!1),pd(e),{className:Ve("recharts-curve",r),d:o,ref:i}))},Gx={exports:{}},Yx,GN;function RV(){if(GN)return Yx;GN=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Yx=t,Yx}var Kx,YN;function _V(){if(YN)return Kx;YN=1;var t=RV();function e(){}function r(){}return r.resetWarningCache=e,Kx=function(){function n(o,l,c,u,d,f){if(f!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},Kx}var KN;function DV(){return KN||(KN=1,Gx.exports=_V()()),Gx.exports}var $V=DV();const dt=it($V),{getOwnPropertyNames:LV,getOwnPropertySymbols:zV}=Object,{hasOwnProperty:FV}=Object.prototype;function Jx(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function Ru(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);const{cache:i}=a,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const c=t(r,n,a);return i.delete(r),i.delete(n),c}}function BV(t){return t?.[Symbol.toStringTag]}function JN(t){return LV(t).concat(zV(t))}const qV=Object.hasOwn||((t,e)=>FV.call(t,e));function Ei(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const UV="__v",VV="__o",HV="_owner",{getOwnPropertyDescriptor:XN,keys:QN}=Object;function WV(t,e){return t.byteLength===e.byteLength&&Bd(new Uint8Array(t),new Uint8Array(e))}function GV(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function YV(t,e){return t.byteLength===e.byteLength&&Bd(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function KV(t,e){return Ei(t.getTime(),e.getTime())}function JV(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function XV(t,e){return t===e}function ZN(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const u=e.entries();let d=!1,f=0;for(;(l=u.next())&&!l.done;){if(a[f]){f++;continue}const h=o.value,p=l.value;if(r.equals(h[0],p[0],c,f,t,e,r)&&r.equals(h[1],p[1],h[0],p[0],t,e,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}const QV=Ei;function ZV(t,e,r){const n=QN(t);let a=n.length;if(QN(e).length!==a)return!1;for(;a-- >0;)if(!fO(t,e,r,n[a]))return!1;return!0}function Pl(t,e,r){const n=JN(t);let a=n.length;if(JN(e).length!==a)return!1;let i,o,l;for(;a-- >0;)if(i=n[a],!fO(t,e,r,i)||(o=XN(t,i),l=XN(e,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function eH(t,e){return Ei(t.valueOf(),e.valueOf())}function tH(t,e){return t.source===e.source&&t.flags===e.flags}function e3(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.values();let o,l;for(;(o=i.next())&&!o.done;){const c=e.values();let u=!1,d=0;for(;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(o.value,l.value,o.value,l.value,t,e,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function Bd(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function rH(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function fO(t,e,r,n){return(n===HV||n===VV||n===UV)&&(t.$$typeof||e.$$typeof)?!0:qV(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const nH="[object ArrayBuffer]",aH="[object Arguments]",sH="[object Boolean]",iH="[object DataView]",oH="[object Date]",lH="[object Error]",cH="[object Map]",uH="[object Number]",dH="[object Object]",fH="[object RegExp]",hH="[object Set]",pH="[object String]",mH={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},gH="[object URL]",xH=Object.prototype.toString;function yH({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:h,areUrlsEqual:p,unknownTagComparators:g}){return function(m,y,v){if(m===y)return!0;if(m==null||y==null)return!1;const w=typeof m;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?l(m,y,v):w==="function"?i(m,y,v):!1;const N=m.constructor;if(N!==y.constructor)return!1;if(N===Object)return c(m,y,v);if(Array.isArray(m))return e(m,y,v);if(N===Date)return n(m,y,v);if(N===RegExp)return d(m,y,v);if(N===Map)return o(m,y,v);if(N===Set)return f(m,y,v);const b=xH.call(m);if(b===oH)return n(m,y,v);if(b===fH)return d(m,y,v);if(b===cH)return o(m,y,v);if(b===hH)return f(m,y,v);if(b===dH)return typeof m.then!="function"&&typeof y.then!="function"&&c(m,y,v);if(b===gH)return p(m,y,v);if(b===lH)return a(m,y,v);if(b===aH)return c(m,y,v);if(mH[b])return h(m,y,v);if(b===nH)return t(m,y,v);if(b===iH)return r(m,y,v);if(b===sH||b===uH||b===pH)return u(m,y,v);if(g){let S=g[b];if(!S){const j=BV(m);j&&(S=g[j])}if(S)return S(m,y,v)}return!1}}function vH({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:WV,areArraysEqual:r?Pl:GV,areDataViewsEqual:YV,areDatesEqual:KV,areErrorsEqual:JV,areFunctionsEqual:XV,areMapsEqual:r?Jx(ZN,Pl):ZN,areNumbersEqual:QV,areObjectsEqual:r?Pl:ZV,arePrimitiveWrappersEqual:eH,areRegExpsEqual:tH,areSetsEqual:r?Jx(e3,Pl):e3,areTypedArraysEqual:r?Jx(Bd,Pl):Bd,areUrlsEqual:rH,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=Ru(n.areArraysEqual),i=Ru(n.areMapsEqual),o=Ru(n.areObjectsEqual),l=Ru(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function bH(t){return function(e,r,n,a,i,o,l){return t(e,r,l)}}function jH({circular:t,comparator:e,createState:r,equals:n,strict:a}){if(r)return function(l,c){const{cache:u=t?new WeakMap:void 0,meta:d}=r();return e(l,c,{cache:u,equals:n,meta:d,strict:a})};if(t)return function(l,c){return e(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(l,c){return e(l,c,i)}}const hO=Ns();Ns({strict:!0});Ns({circular:!0});Ns({circular:!0,strict:!0});Ns({createInternalComparator:()=>Ei});Ns({strict:!0,createInternalComparator:()=>Ei});Ns({circular:!0,createInternalComparator:()=>Ei});Ns({circular:!0,createInternalComparator:()=>Ei,strict:!0});function Ns(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:a=!1}=t,i=vH(t),o=yH(i),l=r?r(o):bH(o);return jH({circular:e,comparator:o,createState:n,equals:l,strict:a})}function wH(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function t3(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):wH(a)};requestAnimationFrame(n)}function Uy(t){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(t)}function SH(t){return kH(t)||CH(t)||AH(t)||NH()}function NH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AH(t,e){if(t){if(typeof t=="string")return r3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r3(t,e)}}function r3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function CH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kH(t){if(Array.isArray(t))return t}function EH(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=SH(o),c=l[0],u=l.slice(1);if(typeof c=="number"){t3(a.bind(null,u),c);return}a(c),t3(a.bind(null,u));return}Uy(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function _c(t){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_c(t)}function n3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function a3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n3(Object(r),!0).forEach(function(n){pO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pO(t,e,r){return e=OH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OH(t){var e=PH(t,"string");return _c(e)==="symbol"?e:String(e)}function PH(t,e){if(_c(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_c(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TH=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},IH=function(e){return e},MH=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Kl=function(e,r){return Object.keys(r).reduce(function(n,a){return a3(a3({},n),{},pO({},a,e(a,r[a])))},{})},s3=function(e,r,n){return e.map(function(a){return"".concat(MH(a)," ").concat(r,"ms ").concat(n)}).join(",")};function RH(t,e){return $H(t)||DH(t,e)||mO(t,e)||_H()}function _H(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DH(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function $H(t){if(Array.isArray(t))return t}function LH(t){return BH(t)||FH(t)||mO(t)||zH()}function zH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mO(t,e){if(t){if(typeof t=="string")return Vy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vy(t,e)}}function FH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BH(t){if(Array.isArray(t))return Vy(t)}function Vy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var qd=1e-4,gO=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},xO=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},i3=function(e,r){return function(n){var a=gO(e,r);return xO(a,n)}},qH=function(e,r){return function(n){var a=gO(e,r),i=[].concat(LH(a.map(function(o,l){return o*l}).slice(1)),[0]);return xO(i,n)}},o3=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),d=RH(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var f=i3(a,o),h=i3(i,l),p=qH(a,o),g=function(y){return y>1?1:y<0?0:y},x=function(y){for(var v=y>1?1:y,w=v,N=0;N<8;++N){var b=f(w)-v,S=p(w);if(Math.abs(b-v)<qd||S<qd)return h(w);w=g(w-b/S)}return h(w)};return x.isStepper=!1,x},UH=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,o=e.dt,l=o===void 0?17:o,c=function(d,f,h){var p=-(d-f)*n,g=h*i,x=h+(p-g)*l/1e3,m=h*l/1e3+d;return Math.abs(m-f)<qd&&Math.abs(x)<qd?[f,0]:[m,x]};return c.isStepper=!0,c.dt=l,c},VH=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return o3(a);case"spring":return UH();default:if(a.split("(")[0]==="cubic-bezier")return o3(a)}return typeof a=="function"?a:null};function Dc(t){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dc(t)}function l3(t){return GH(t)||WH(t)||yO(t)||HH()}function HH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GH(t){if(Array.isArray(t))return Wy(t)}function c3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c3(Object(r),!0).forEach(function(n){Hy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hy(t,e,r){return e=YH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YH(t){var e=KH(t,"string");return Dc(e)==="symbol"?e:String(e)}function KH(t,e){if(Dc(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JH(t,e){return ZH(t)||QH(t,e)||yO(t,e)||XH()}function XH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yO(t,e){if(t){if(typeof t=="string")return Wy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wy(t,e)}}function Wy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function QH(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ZH(t){if(Array.isArray(t))return t}var Ud=function(e,r,n){return e+(r-e)*n},Gy=function(e){var r=e.from,n=e.to;return r!==n},eW=function t(e,r,n){var a=Kl(function(i,o){if(Gy(o)){var l=e(o.from,o.to,o.velocity),c=JH(l,2),u=c[0],d=c[1];return gr(gr({},o),{},{from:u,velocity:d})}return o},r);return n<1?Kl(function(i,o){return Gy(o)?gr(gr({},o),{},{velocity:Ud(o.velocity,a[i].velocity,n),from:Ud(o.from,a[i].from,n)}):o},r):t(e,a,n-1)};const tW=(function(t,e,r,n,a){var i=TH(t,e),o=i.reduce(function(m,y){return gr(gr({},m),{},Hy({},y,[t[y],e[y]]))},{}),l=i.reduce(function(m,y){return gr(gr({},m),{},Hy({},y,{from:t[y],velocity:0,to:e[y]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Kl(function(y,v){return v.from},l)},p=function(){return!Object.values(l).filter(Gy).length},g=function(y){u||(u=y);var v=y-u,w=v/r.dt;l=eW(r,l,w),a(gr(gr(gr({},t),e),h())),u=y,p()||(c=requestAnimationFrame(f))},x=function(y){d||(d=y);var v=(y-d)/n,w=Kl(function(b,S){return Ud.apply(void 0,l3(S).concat([r(v)]))},o);if(a(gr(gr(gr({},t),e),w)),v<1)c=requestAnimationFrame(f);else{var N=Kl(function(b,S){return Ud.apply(void 0,l3(S).concat([r(1)]))},o);a(gr(gr(gr({},t),e),N))}};return f=r.isStepper?g:x,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}});function So(t){"@babel/helpers - typeof";return So=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},So(t)}var rW=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function nW(t,e){if(t==null)return{};var r=aW(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function aW(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Xx(t){return lW(t)||oW(t)||iW(t)||sW()}function sW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iW(t,e){if(t){if(typeof t=="string")return Yy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yy(t,e)}}function oW(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lW(t){if(Array.isArray(t))return Yy(t)}function Yy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _n(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u3(Object(r),!0).forEach(function(n){Fl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fl(t,e,r){return e=vO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vO(n.key),n)}}function dW(t,e,r){return e&&uW(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vO(t){var e=fW(t,"string");return So(e)==="symbol"?e:String(e)}function fW(t,e){if(So(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(So(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hW(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ky(t,e)}function Ky(t,e){return Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ky(t,e)}function pW(t){var e=mW();return function(){var n=Vd(t),a;if(e){var i=Vd(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Jy(this,a)}}function Jy(t,e){if(e&&(So(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xy(t)}function Xy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vd(t){return Vd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vd(t)}var ia=(function(t){hW(r,t);var e=pW(r);function r(n,a){var i;cW(this,r),i=e.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Xy(i)),i.changeStyle=i.changeStyle.bind(Xy(i)),!l||p<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),Jy(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},Jy(i);i.state={style:c?Fl({},c,u):u}}else i.state={style:{}};return i}return dW(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!o){var p={style:c?Fl({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(p);return}if(!(hO(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=g||u?f:a.to;if(this.state&&h){var m={style:c?Fl({},c,x):x};(c&&h[c]!==x||!c&&h!==x)&&this.setState(m)}this.runAnimation(_n(_n({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,p=tW(o,l,VH(u),c,this.changeStyle),g=function(){i.stopJSAnimation=p()};this.manager.start([h,d,g,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,p=function(x,m,y){if(y===0)return x;var v=m.duration,w=m.easing,N=w===void 0?"ease":w,b=m.style,S=m.properties,j=m.onAnimationEnd,C=y>0?o[y-1]:m,k=S||Object.keys(b);if(typeof N=="function"||N==="spring")return[].concat(Xx(x),[i.runJSAnimation.bind(i,{from:C.style,to:b,duration:v,easing:N}),v]);var O=s3(k,v,N),I=_n(_n(_n({},C.style),b),{},{transition:O});return[].concat(Xx(x),[I,v,j]).filter(IH)};return this.manager.start([c].concat(Xx(o.reduce(p,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=EH());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,p=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var x=l?Fl({},l,c):c,m=s3(Object.keys(x),o,u);g.start([d,i,_n(_n({},x),{},{transition:m}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=nW(a,rW),u=A.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(p){var g=p.props,x=g.style,m=x===void 0?{}:x,y=g.className,v=A.cloneElement(p,_n(_n({},c),{},{style:_n(_n({},m),d),className:y}));return v};return u===1?f(A.Children.only(i)):D.createElement("div",null,A.Children.map(i,function(h){return f(h)}))}}]),r})(A.PureComponent);ia.displayName="Animate";ia.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ia.propTypes={from:dt.oneOfType([dt.object,dt.string]),to:dt.oneOfType([dt.object,dt.string]),attributeName:dt.string,duration:dt.number,begin:dt.number,easing:dt.oneOfType([dt.string,dt.func]),steps:dt.arrayOf(dt.shape({duration:dt.number.isRequired,style:dt.object.isRequired,easing:dt.oneOfType([dt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),dt.func]),properties:dt.arrayOf("string"),onAnimationEnd:dt.func})),children:dt.oneOfType([dt.node,dt.func]),isActive:dt.bool,canBegin:dt.bool,onAnimationEnd:dt.func,shouldReAnimate:dt.bool,onAnimationStart:dt.func,onAnimationReStart:dt.func};function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}function Hd(){return Hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hd.apply(this,arguments)}function gW(t,e){return bW(t)||vW(t,e)||yW(t,e)||xW()}function xW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yW(t,e){if(t){if(typeof t=="string")return d3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d3(t,e)}}function d3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vW(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function bW(t){if(Array.isArray(t))return t}function f3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function h3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f3(Object(r),!0).forEach(function(n){jW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jW(t,e,r){return e=wW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wW(t){var e=SW(t,"string");return $c(e)=="symbol"?e:e+""}function SW(t,e){if($c(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p3=function(e,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=i[h]>o?o:i[h];d="M".concat(e,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+c*f[0],",").concat(r)),d+="L ".concat(e+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(r+l*f[1])),d+="L ".concat(e+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+n-c*f[2],",").concat(r+a)),d+="L ".concat(e+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);d="M ".concat(e,",").concat(r+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+c*g,",").concat(r,`
            L `).concat(e+n-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+n,",").concat(r+l*g,`
            L `).concat(e+n,",").concat(r+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+n-c*g,",").concat(r+a,`
            L `).concat(e+c*g,",").concat(r+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e,",").concat(r+a-l*g," Z")}else d="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},NW=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},AW={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},l1=function(e){var r=h3(h3({},AW),e),n=A.useRef(),a=A.useState(-1),i=gW(a,2),o=i[0],l=i[1];A.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var N=n.current.getTotalLength();N&&l(N)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,p=r.className,g=r.animationEasing,x=r.animationDuration,m=r.animationBegin,y=r.isAnimationActive,v=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var w=Ve("recharts-rectangle",p);return v?D.createElement(ia,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:x,animationEasing:g,isActive:v},function(N){var b=N.width,S=N.height,j=N.x,C=N.y;return D.createElement(ia,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:x,isActive:y,easing:g},D.createElement("path",Hd({},Pe(r,!0),{className:w,d:p3(j,C,b,S,h),ref:n})))}):D.createElement("path",Hd({},Pe(r,!0),{className:w,d:p3(c,u,d,f,h)}))},CW=["points","className","baseLinePoints","connectNulls"];function Wi(){return Wi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wi.apply(this,arguments)}function kW(t,e){if(t==null)return{};var r=EW(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function EW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function m3(t){return IW(t)||TW(t)||PW(t)||OW()}function OW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PW(t,e){if(t){if(typeof t=="string")return Qy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qy(t,e)}}function TW(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function IW(t){if(Array.isArray(t))return Qy(t)}function Qy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var g3=function(e){return e&&e.x===+e.x&&e.y===+e.y},MW=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){g3(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),g3(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Jl=function(e,r){var n=MW(e);r&&(n=[n.reduce(function(i,o){return[].concat(m3(i),m3(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},RW=function(e,r,n){var a=Jl(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Jl(r.reverse(),n).slice(1))},_W=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,o=kW(e,CW);if(!r||!r.length)return null;var l=Ve("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=RW(r,a,i);return D.createElement("g",{className:l},D.createElement("path",Wi({},Pe(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?D.createElement("path",Wi({},Pe(o,!0),{fill:"none",d:Jl(r,i)})):null,c?D.createElement("path",Wi({},Pe(o,!0),{fill:"none",d:Jl(a,i)})):null)}var d=Jl(r,i);return D.createElement("path",Wi({},Pe(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function Zy(){return Zy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zy.apply(this,arguments)}var Ih=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,o=Ve("recharts-dot",i);return r===+r&&n===+n&&a===+a?A.createElement("circle",Zy({},Pe(e,!1),pd(e),{className:o,cx:r,cy:n,r:a})):null};function Lc(t){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(t)}var DW=["x","y","top","left","width","height","className"];function ev(){return ev=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ev.apply(this,arguments)}function x3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $W(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x3(Object(r),!0).forEach(function(n){LW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LW(t,e,r){return e=zW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zW(t){var e=FW(t,"string");return Lc(e)=="symbol"?e:e+""}function FW(t,e){if(Lc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BW(t,e){if(t==null)return{};var r=qW(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var UW=function(e,r,n,a,i,o){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},VW=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,f=d===void 0?0:d,h=e.height,p=h===void 0?0:h,g=e.className,x=BW(e,DW),m=$W({x:n,y:i,top:l,left:u,width:f,height:p},x);return!se(n)||!se(i)||!se(f)||!se(p)||!se(l)||!se(u)?null:D.createElement("path",ev({},Pe(m,!0),{className:Ve("recharts-cross",g),d:UW(n,i,f,p,l,u)}))},Qx,y3;function HW(){if(y3)return Qx;y3=1;var t=kh(),e=ME(),r=fa();function n(a,i){return a&&a.length?t(a,r(i,2),e):void 0}return Qx=n,Qx}var WW=HW();const GW=it(WW);var Zx,v3;function YW(){if(v3)return Zx;v3=1;var t=kh(),e=fa(),r=RE();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return Zx=n,Zx}var KW=YW();const JW=it(KW);var XW=["cx","cy","angle","ticks","axisLine"],QW=["ticks","tick","angle","tickFormatter","stroke"];function No(t){"@babel/helpers - typeof";return No=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},No(t)}function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xl.apply(this,arguments)}function b3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $s(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b3(Object(r),!0).forEach(function(n){Mh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function j3(t,e){if(t==null)return{};var r=ZW(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ZW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function eG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jO(n.key),n)}}function tG(t,e,r){return e&&w3(t.prototype,e),r&&w3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rG(t,e,r){return e=Wd(e),nG(t,bO()?Reflect.construct(e,r||[],Wd(t).constructor):e.apply(t,r))}function nG(t,e){if(e&&(No(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aG(t)}function aG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bO=function(){return!!t})()}function Wd(t){return Wd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wd(t)}function sG(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tv(t,e)}function tv(t,e){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tv(t,e)}function Mh(t,e,r){return e=jO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jO(t){var e=iG(t,"string");return No(e)=="symbol"?e:e+""}function iG(t,e){if(No(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(No(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rh=(function(t){function e(){return eG(this,e),rG(this,e,arguments)}return sG(e,t),tG(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return At(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=GW(l,function(d){return d.coordinate||0}),u=JW(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=j3(n,XW),d=l.reduce(function(g,x){return[Math.min(g[0],x.coordinate),Math.max(g[1],x.coordinate)]},[1/0,-1/0]),f=At(a,i,d[0],o),h=At(a,i,d[1],o),p=$s($s($s({},Pe(u,!1)),{},{fill:"none"},Pe(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return D.createElement("line",Xl({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=j3(a,QW),f=this.getTickTextAnchor(),h=Pe(d,!1),p=Pe(o,!1),g=i.map(function(x,m){var y=n.getTickValueCoord(x),v=$s($s($s($s({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(y.x,", ").concat(y.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:m},y),{},{payload:x});return D.createElement(tt,Xl({className:Ve("recharts-polar-radius-axis-tick",lO(o)),key:"tick-".concat(x.coordinate)},fi(n.props,x,m)),e.renderTickItem(o,v,c?c(x.value,m):x.value))});return D.createElement(tt,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:D.createElement(tt,{className:Ve("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),or.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return D.isValidElement(n)?o=D.cloneElement(n,a):$e(n)?o=n(a):o=D.createElement(hi,Xl({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(A.PureComponent);Mh(Rh,"displayName","PolarRadiusAxis");Mh(Rh,"axisType","radiusAxis");Mh(Rh,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ao(t){"@babel/helpers - typeof";return Ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ao(t)}function Vs(){return Vs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vs.apply(this,arguments)}function S3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ls(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S3(Object(r),!0).forEach(function(n){_h(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SO(n.key),n)}}function lG(t,e,r){return e&&N3(t.prototype,e),r&&N3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cG(t,e,r){return e=Gd(e),uG(t,wO()?Reflect.construct(e,r||[],Gd(t).constructor):e.apply(t,r))}function uG(t,e){if(e&&(Ao(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dG(t)}function dG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wO=function(){return!!t})()}function Gd(t){return Gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gd(t)}function fG(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rv(t,e)}function rv(t,e){return rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rv(t,e)}function _h(t,e,r){return e=SO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SO(t){var e=hG(t,"string");return Ao(e)=="symbol"?e:e+""}function hG(t,e){if(Ao(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ao(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pG=Math.PI/180,A3=1e-5,Dh=(function(t){function e(){return oG(this,e),cG(this,e,arguments)}return fG(e,t),lG(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=At(i,o,l,n.coordinate),h=At(i,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*pG),o;return i>A3?o=a==="outer"?"start":"end":i<-A3?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=Ls(Ls({},Pe(this.props,!1)),{},{fill:"none"},Pe(l,!1));if(c==="circle")return D.createElement(Ih,Vs({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,f=d.map(function(h){return At(a,i,o,h.coordinate)});return D.createElement(_W,Vs({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Pe(this.props,!1),f=Pe(o,!1),h=Ls(Ls({},d),{},{fill:"none"},Pe(l,!1)),p=i.map(function(g,x){var m=n.getTickLineCoord(g),y=n.getTickTextAnchor(g),v=Ls(Ls(Ls({textAnchor:y},d),{},{stroke:"none",fill:u},f),{},{index:x,payload:g,x:m.x2,y:m.y2});return D.createElement(tt,Vs({className:Ve("recharts-polar-angle-axis-tick",lO(o)),key:"tick-".concat(g.coordinate)},fi(n.props,g,x)),l&&D.createElement("line",Vs({className:"recharts-polar-angle-axis-tick-line"},h,m)),o&&e.renderTickItem(o,v,c?c(g.value,x):g.value))});return D.createElement(tt,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:D.createElement(tt,{className:Ve("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return D.isValidElement(n)?o=D.cloneElement(n,a):$e(n)?o=n(a):o=D.createElement(hi,Vs({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(A.PureComponent);_h(Dh,"displayName","PolarAngleAxis");_h(Dh,"axisType","angleAxis");_h(Dh,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var e0,C3;function mG(){if(C3)return e0;C3=1;var t=Ik(),e=t(Object.getPrototypeOf,Object);return e0=e,e0}var t0,k3;function gG(){if(k3)return t0;k3=1;var t=Ba(),e=mG(),r=qa(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,l=i.hasOwnProperty,c=o.call(Object);function u(d){if(!r(d)||t(d)!=n)return!1;var f=e(d);if(f===null)return!0;var h=l.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&o.call(h)==c}return t0=u,t0}var xG=gG();const yG=it(xG);var r0,E3;function vG(){if(E3)return r0;E3=1;var t=Ba(),e=qa(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return r0=n,r0}var bG=vG();const jG=it(bG);function zc(t){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(t)}function Yd(){return Yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yd.apply(this,arguments)}function wG(t,e){return CG(t)||AG(t,e)||NG(t,e)||SG()}function SG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NG(t,e){if(t){if(typeof t=="string")return O3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O3(t,e)}}function O3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function AG(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function CG(t){if(Array.isArray(t))return t}function P3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function T3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P3(Object(r),!0).forEach(function(n){kG(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kG(t,e,r){return e=EG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EG(t){var e=OG(t,"string");return zc(e)=="symbol"?e:e+""}function OG(t,e){if(zc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var I3=function(e,r,n,a,i){var o=n-a,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-o/2,",").concat(r+i),l+="L ".concat(e+n-o/2-a,",").concat(r+i),l+="L ".concat(e,",").concat(r," Z"),l},PG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TG=function(e){var r=T3(T3({},PG),e),n=A.useRef(),a=A.useState(-1),i=wG(a,2),o=i[0],l=i[1];A.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,p=r.className,g=r.animationEasing,x=r.animationDuration,m=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var v=Ve("recharts-trapezoid",p);return y?D.createElement(ia,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:x,animationEasing:g,isActive:y},function(w){var N=w.upperWidth,b=w.lowerWidth,S=w.height,j=w.x,C=w.y;return D.createElement(ia,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:x,easing:g},D.createElement("path",Yd({},Pe(r,!0),{className:v,d:I3(j,C,N,b,S),ref:n})))}):D.createElement("g",null,D.createElement("path",Yd({},Pe(r,!0),{className:v,d:I3(c,u,d,f,h)})))},IG=["option","shapeType","propTransformer","activeClassName","isActive"];function Fc(t){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(t)}function MG(t,e){if(t==null)return{};var r=RG(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function RG(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function M3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Kd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M3(Object(r),!0).forEach(function(n){_G(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _G(t,e,r){return e=DG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DG(t){var e=$G(t,"string");return Fc(e)=="symbol"?e:e+""}function $G(t,e){if(Fc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LG(t,e){return Kd(Kd({},e),t)}function zG(t,e){return t==="symbols"}function R3(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return D.createElement(l1,r);case"trapezoid":return D.createElement(TG,r);case"sector":return D.createElement(dO,r);case"symbols":if(zG(e))return D.createElement(kb,r);break;default:return null}}function FG(t){return A.isValidElement(t)?t.props:t}function NO(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?LG:n,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,l=t.isActive,c=MG(t,IG),u;if(A.isValidElement(e))u=A.cloneElement(e,Kd(Kd({},c),FG(e)));else if($e(e))u=e(c);else if(yG(e)&&!jG(e)){var d=a(e,c);u=D.createElement(R3,{shapeType:r,elementProps:d})}else{var f=c;u=D.createElement(R3,{shapeType:r,elementProps:f})}return l?D.createElement(tt,{className:o},u):u}function $h(t,e){return e!=null&&"trapezoids"in t.props}function Lh(t,e){return e!=null&&"sectors"in t.props}function Bc(t,e){return e!=null&&"points"in t.props}function BG(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function qG(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function UG(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function VG(t,e){var r;return $h(t,e)?r=BG:Lh(t,e)?r=qG:Bc(t,e)&&(r=UG),r}function HG(t,e){var r;return $h(t,e)?r="trapezoids":Lh(t,e)?r="sectors":Bc(t,e)&&(r="points"),r}function WG(t,e){if($h(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Lh(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Bc(t,e)?e.payload:{}}function GG(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=HG(r,e),i=WG(r,e),o=n.filter(function(c,u){var d=jo(i,c),f=r.props[a].filter(function(g){var x=VG(r,e);return x(g,e)}),h=r.props[a].indexOf(f[f.length-1]),p=u===h;return d&&p}),l=n.indexOf(o[o.length-1]);return l}var ed;function Co(t){"@babel/helpers - typeof";return Co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Co(t)}function Gi(){return Gi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gi.apply(this,arguments)}function _3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function St(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_3(Object(r),!0).forEach(function(n){jn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CO(n.key),n)}}function KG(t,e,r){return e&&D3(t.prototype,e),r&&D3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function JG(t,e,r){return e=Jd(e),XG(t,AO()?Reflect.construct(e,r||[],Jd(t).constructor):e.apply(t,r))}function XG(t,e){if(e&&(Co(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QG(t)}function QG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AO=function(){return!!t})()}function Jd(t){return Jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jd(t)}function ZG(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nv(t,e)}function nv(t,e){return nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nv(t,e)}function jn(t,e,r){return e=CO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CO(t){var e=eY(t,"string");return Co(e)=="symbol"?e:e+""}function eY(t,e){if(Co(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Co(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oa=(function(t){function e(r){var n;return YG(this,e),n=JG(this,e,[r]),jn(n,"pieRef",null),jn(n,"sectorRefs",[]),jn(n,"id",Xo("recharts-pie-")),jn(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),$e(a)&&a()}),jn(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),$e(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return ZG(e,t),KG(e,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=Pe(this.props,!1),f=Pe(o,!1),h=Pe(l,!1),p=o&&o.offsetRadius||20,g=n.map(function(x,m){var y=(x.startAngle+x.endAngle)/2,v=At(x.cx,x.cy,x.outerRadius+p,y),w=St(St(St(St({},d),x),{},{stroke:"none"},f),{},{index:m,textAnchor:e.getTextAnchor(v.x,x.cx)},v),N=St(St(St(St({},d),x),{},{fill:"none",stroke:x.fill},h),{},{index:m,points:[At(x.cx,x.cy,x.outerRadius,y),v]}),b=c;return Ue(c)&&Ue(u)?b="value":Ue(c)&&(b=u),D.createElement(tt,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(m)},l&&e.renderLabelLineItem(l,N,"line"),e.renderLabelItem(o,w,Zt(x,b)))});return D.createElement(tt,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if(u?.startAngle===0&&u?.endAngle===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,p=f?o:h,g=St(St({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return D.createElement(tt,Gi({ref:function(m){m&&!a.sectorRefs.includes(m)&&a.sectorRefs.push(m)},tabIndex:-1,className:"recharts-pie-sector"},fi(a.props,u,d),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(d)}),D.createElement(NO,Gi({option:p,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,p=f.prevIsAnimationActive;return D.createElement(ia,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var x=g.t,m=[],y=i&&i[0],v=y.startAngle;return i.forEach(function(w,N){var b=h&&h[N],S=N>0?ln(w,"paddingAngle",0):0;if(b){var j=qr(b.endAngle-b.startAngle,w.endAngle-w.startAngle),C=St(St({},w),{},{startAngle:v+S,endAngle:v+j(x)+S});m.push(C),v=C.endAngle}else{var k=w.endAngle,O=w.startAngle,I=qr(0,k-O),M=I(x),T=St(St({},w),{},{startAngle:v+S,endAngle:v+M+S});m.push(T),v=T.endAngle}}),D.createElement(tt,null,n.renderSectorsStatically(m))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!jo(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,p=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!o||!o.length||!se(u)||!se(d)||!se(f)||!se(h))return null;var x=Ve("recharts-pie",l);return D.createElement(tt,{tabIndex:this.props.rootTabIndex,className:x,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(o),or.renderCallByParent(this.props,null,!1),(!p||g)&&Oa.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(D.isValidElement(n))return D.cloneElement(n,a);if($e(n))return n(a);var o=Ve("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return D.createElement(eo,Gi({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if(D.isValidElement(n))return D.cloneElement(n,a);var o=i;if($e(n)&&(o=n(a),D.isValidElement(o)))return o;var l=Ve("recharts-pie-label-text",typeof n!="boolean"&&!$e(n)?n.className:"");return D.createElement(hi,Gi({},a,{alignmentBaseline:"middle",className:l}),o)}}])})(A.PureComponent);ed=oa;jn(oa,"displayName","Pie");jn(oa,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ai.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});jn(oa,"parseDeltaAngle",function(t,e){var r=_r(e-t),n=Math.min(Math.abs(e-t),360);return r*n});jn(oa,"getRealPieData",function(t){var e=t.data,r=t.children,n=Pe(t,!1),a=kn(r,xc);return e&&e.length?e.map(function(i,o){return St(St(St({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return St(St({},n),i.props)}):[]});jn(oa,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,a=e.width,i=e.height,o=oO(a,i),l=n+Dr(t.cx,a,a/2),c=r+Dr(t.cy,i,i/2),u=Dr(t.innerRadius,o,0),d=Dr(t.outerRadius,o,o*.8),f=t.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});jn(oa,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?St(St({},e.type.defaultProps),e.props):e.props,a=ed.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,p=Math.abs(n.minAngle),g=ed.parseCoordinateOfPie(n,r),x=ed.parseDeltaAngle(o,l),m=Math.abs(x),y=u;Ue(u)&&Ue(f)?(Bn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):Ue(u)&&(Bn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var v=a.filter(function(C){return Zt(C,y,0)!==0}).length,w=(m>=360?v:v-1)*c,N=m-v*p-w,b=a.reduce(function(C,k){var O=Zt(k,y,0);return C+(se(O)?O:0)},0),S;if(b>0){var j;S=a.map(function(C,k){var O=Zt(C,y,0),I=Zt(C,d,k),M=(se(O)?O:0)/b,T;k?T=j.endAngle+_r(x)*c*(O!==0?1:0):T=o;var R=T+_r(x)*((O!==0?p:0)+M*N),L=(T+R)/2,B=(g.innerRadius+g.outerRadius)/2,H=[{name:I,value:O,payload:C,dataKey:y,type:h}],Q=At(g.cx,g.cy,B,L);return j=St(St(St({percent:M,cornerRadius:i,name:I,tooltipPayload:H,midAngle:L,middleRadius:B,tooltipPosition:Q},C),g),{},{value:Zt(C,y),startAngle:T,endAngle:R,payload:C,paddingAngle:_r(x)*c}),j})}return St(St({},g),{},{sectors:S,data:a})});var n0,$3;function tY(){if($3)return n0;$3=1;var t=Math.ceil,e=Math.max;function r(n,a,i,o){for(var l=-1,c=e(t((a-n)/(i||1)),0),u=Array(c);c--;)u[o?c:++l]=n,n+=i;return u}return n0=r,n0}var a0,L3;function kO(){if(L3)return a0;L3=1;var t=Yk(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return a0=n,a0}var s0,z3;function rY(){if(z3)return s0;z3=1;var t=tY(),e=bh(),r=kO();function n(a){return function(i,o,l){return l&&typeof l!="number"&&e(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),t(i,o,l,a)}}return s0=n,s0}var i0,F3;function nY(){if(F3)return i0;F3=1;var t=rY(),e=t();return i0=e,i0}var aY=nY();const Xd=it(aY);function qc(t){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qc(t)}function B3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function q3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B3(Object(r),!0).forEach(function(n){EO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EO(t,e,r){return e=sY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sY(t){var e=iY(t,"string");return qc(e)=="symbol"?e:e+""}function iY(t,e){if(qc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oY=["Webkit","Moz","O","ms"],lY=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=oY.reduce(function(i,o){return q3(q3({},i),{},EO({},o+n,r))},{});return a[e]=r,a};function ko(t){"@babel/helpers - typeof";return ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ko(t)}function Qd(){return Qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qd.apply(this,arguments)}function U3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function o0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U3(Object(r),!0).forEach(function(n){Xr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PO(n.key),n)}}function uY(t,e,r){return e&&V3(t.prototype,e),r&&V3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function dY(t,e,r){return e=Zd(e),fY(t,OO()?Reflect.construct(e,r||[],Zd(t).constructor):e.apply(t,r))}function fY(t,e){if(e&&(ko(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hY(t)}function hY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OO=function(){return!!t})()}function Zd(t){return Zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zd(t)}function pY(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&av(t,e)}function av(t,e){return av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},av(t,e)}function Xr(t,e,r){return e=PO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PO(t){var e=mY(t,"string");return ko(e)=="symbol"?e:e+""}function mY(t,e){if(ko(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ko(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gY=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,o=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Gl().domain(Xd(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},H3=function(e){return e.changedTouches&&!!e.changedTouches.length},Eo=(function(t){function e(r){var n;return cY(this,e),n=dY(this,e,[r]),Xr(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Xr(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Xr(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Xr(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Xr(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Xr(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Xr(n,"handleSlideDragStart",function(a){var i=H3(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return pY(e,t),uY(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),p=e.getIndexInRange(o,f),g=e.getIndexInRange(o,h);return{startIndex:p-p%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=Zt(i[n],l,n);return $e(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,p=c.endIndex,g=c.onChange,x=n.pageX-i;x>0?x=Math.min(x,u+d-f-l,u+d-f-o):x<0&&(x=Math.max(x,u-o,u-l));var m=this.getIndex({startX:o+x,endX:l+x});(m.startIndex!==h||m.endIndex!==p)&&g&&g(m),this.setState({startX:o+x,endX:l+x,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=H3(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,p=d.travellerWidth,g=d.onChange,x=d.gap,m=d.data,y={startX:this.state.startX,endX:this.state.endX},v=n.pageX-i;v>0?v=Math.min(v,f+h-p-u):v<0&&(v=Math.max(v,f-u)),y[o]=u+v;var w=this.getIndex(y),N=w.startIndex,b=w.endIndex,S=function(){var C=m.length-1;return o==="startX"&&(l>c?N%x===0:b%x===0)||l<c&&b===C||o==="endX"&&(l>c?b%x===0:N%x===0)||l>c&&b===C};this.setState(Xr(Xr({},o,u+v),"brushMoveStartX",n.pageX),function(){g&&S()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var p=l[h];a==="startX"&&p>=u||a==="endX"&&p<=c||this.setState(Xr({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return D.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=A.Children.only(u);return f?D.cloneElement(f,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,p=c.ariaLabel,g=c.data,x=c.startIndex,m=c.endIndex,y=Math.max(n,this.props.x),v=o0(o0({},Pe(this.props,!1)),{},{x:y,y:u,width:d,height:f}),w=p||"Min value: ".concat((i=g[x])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=g[m])===null||o===void 0?void 0:o.name);return D.createElement(tt,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(b){["ArrowLeft","ArrowRight"].includes(b.key)&&(b.preventDefault(),b.stopPropagation(),l.handleTravellerMoveKeyboard(b.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,v))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return D.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,p=5,g={pointerEvents:"none",fill:u};return D.createElement(tt,{className:"recharts-brush-texts"},D.createElement(hi,Qd({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:o+l/2},g),this.getTextOfTick(a)),D.createElement(hi,Qd({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+p,y:o+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,p=h.startX,g=h.endX,x=h.isTextActive,m=h.isSlideMoving,y=h.isTravellerMoving,v=h.isTravellerFocused;if(!a||!a.length||!se(l)||!se(c)||!se(u)||!se(d)||u<=0||d<=0)return null;var w=Ve("recharts-brush",i),N=D.Children.count(o)===1,b=lY("userSelect","none");return D.createElement(tt,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(p,g),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(g,"endX"),(x||m||y||v||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return D.createElement(D.Fragment,null,D.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),D.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),D.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return D.isValidElement(n)?i=D.cloneElement(n,a):$e(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return o0({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?gY({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])})(A.PureComponent);Xr(Eo,"displayName","Brush");Xr(Eo,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var l0,W3;function xY(){if(W3)return l0;W3=1;var t=Rb();function e(r,n){var a;return t(r,function(i,o,l){return a=n(i,o,l),!a}),!!a}return l0=e,l0}var c0,G3;function yY(){if(G3)return c0;G3=1;var t=Ak(),e=fa(),r=xY(),n=Gr(),a=bh();function i(o,l,c){var u=n(o)?t:r;return c&&a(o,l,c)&&(l=void 0),u(o,e(l,3))}return c0=i,c0}var vY=yY();const bY=it(vY);var ta=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},u0,Y3;function jY(){if(Y3)return u0;Y3=1;var t=Uk();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return u0=e,u0}var d0,K3;function wY(){if(K3)return d0;K3=1;var t=jY(),e=Bk(),r=fa();function n(a,i){var o={};return i=r(i,3),e(a,function(l,c,u){t(o,c,i(l,c,u))}),o}return d0=n,d0}var SY=wY();const NY=it(SY);var f0,J3;function AY(){if(J3)return f0;J3=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return f0=t,f0}var h0,X3;function CY(){if(X3)return h0;X3=1;var t=Rb();function e(r,n){var a=!0;return t(r,function(i,o,l){return a=!!n(i,o,l),a}),a}return h0=e,h0}var p0,Q3;function kY(){if(Q3)return p0;Q3=1;var t=AY(),e=CY(),r=fa(),n=Gr(),a=bh();function i(o,l,c){var u=n(o)?t:e;return c&&a(o,l,c)&&(l=void 0),u(o,r(l,3))}return p0=i,p0}var EY=kY();const TO=it(EY);var OY=["x","y"];function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function sv(){return sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sv.apply(this,arguments)}function Z3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Tl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z3(Object(r),!0).forEach(function(n){PY(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PY(t,e,r){return e=TY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TY(t){var e=IY(t,"string");return Uc(e)=="symbol"?e:e+""}function IY(t,e){if(Uc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MY(t,e){if(t==null)return{};var r=RY(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function RY(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _Y(t,e){var r=t.x,n=t.y,a=MY(t,OY),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(e.height||a.height),d=parseInt(u,10),f="".concat(e.width||a.width),h=parseInt(f,10);return Tl(Tl(Tl(Tl(Tl({},e),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:e.name,radius:e.radius})}function e6(t){return D.createElement(NO,sv({shapeType:"rectangle",propTransformer:_Y,activeClassName:"recharts-active-bar"},t))}var DY=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=se(n)||n7(n);return i?e(n,a):(i||mi(),r)}},$Y=["value","background"],IO;function Oo(t){"@babel/helpers - typeof";return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(t)}function LY(t,e){if(t==null)return{};var r=zY(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zY(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ef(){return ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ef.apply(this,arguments)}function t6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t6(Object(r),!0).forEach(function(n){as(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RO(n.key),n)}}function BY(t,e,r){return e&&r6(t.prototype,e),r&&r6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function qY(t,e,r){return e=tf(e),UY(t,MO()?Reflect.construct(e,r||[],tf(t).constructor):e.apply(t,r))}function UY(t,e){if(e&&(Oo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VY(t)}function VY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MO=function(){return!!t})()}function tf(t){return tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tf(t)}function HY(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iv(t,e)}function iv(t,e){return iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},iv(t,e)}function as(t,e,r){return e=RO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RO(t){var e=WY(t,"string");return Oo(e)=="symbol"?e:e+""}function WY(t,e){if(Oo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Oo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Oi=(function(t){function e(){var r;FY(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=qY(this,e,[].concat(a)),as(r,"state",{isAnimationFinished:!1}),as(r,"id",Xo("recharts-bar-")),as(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),as(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return HY(e,t),BY(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Pe(this.props,!1);return n&&n.map(function(f,h){var p=h===c,g=p?u:o,x=Vt(Vt(Vt({},d),f),{},{isActive:p,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return D.createElement(tt,ef({className:"recharts-bar-rectangle"},fi(a.props,f,h),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(h)}),D.createElement(e6,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return D.createElement(ia,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,x=i.map(function(m,y){var v=h&&h[y];if(v){var w=qr(v.x,m.x),N=qr(v.y,m.y),b=qr(v.width,m.width),S=qr(v.height,m.height);return Vt(Vt({},m),{},{x:w(g),y:N(g),width:b(g),height:S(g)})}if(o==="horizontal"){var j=qr(0,m.height),C=j(g);return Vt(Vt({},m),{},{y:m.y+m.height-C,height:C})}var k=qr(0,m.width),O=k(g);return Vt(Vt({},m),{},{width:O})});return D.createElement(tt,null,n.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!jo(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Pe(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=LY(u,$Y);if(!f)return null;var p=Vt(Vt(Vt(Vt(Vt({},h),{},{fill:"#eee"},f),c),fi(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return D.createElement(e6,ef({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=kn(d,Th);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,p=function(m,y){var v=Array.isArray(m.value)?m.value[1]:m.value;return{x:m.x,y:m.y,value:v,errorVal:Zt(m,y)}},g={clipPath:n?"url(#clipPath-".concat(a,")"):null};return D.createElement(tt,g,f.map(function(x){return D.cloneElement(x,{key:"error-bar-".concat(a,"-").concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,p=n.isAnimationActive,g=n.background,x=n.id;if(a||!i||!i.length)return null;var m=this.state.isAnimationFinished,y=Ve("recharts-bar",o),v=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,N=v||w,b=Ue(x)?this.id:x;return D.createElement(tt,{className:y},v||w?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(b)},D.createElement("rect",{x:v?u:u-f/2,y:w?d:d-h/2,width:v?f:f*2,height:w?h:h*2}))):null,D.createElement(tt,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(b,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,b),(!p||m)&&Oa.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(A.PureComponent);IO=Oi;as(Oi,"displayName","Bar");as(Oi,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ai.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});as(Oi,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,p=yU(n,r);if(!p)return null;var g=e.layout,x=r.type.defaultProps,m=x!==void 0?Vt(Vt({},x),r.props):r.props,y=m.dataKey,v=m.children,w=m.minPointSize,N=g==="horizontal"?o:i,b=u?N.scale.domain():null,S=AU({numericAxis:N}),j=kn(v,xc),C=f.map(function(k,O){var I,M,T,R,L,B;u?I=vU(u[d+O],b):(I=Zt(k,y),Array.isArray(I)||(I=[S,I]));var H=DY(w,IO.defaultProps.minPointSize)(I[1],O);if(g==="horizontal"){var Q,te=[o.scale(I[0]),o.scale(I[1])],K=te[0],ne=te[1];M=PN({axis:i,ticks:l,bandSize:a,offset:p.offset,entry:k,index:O}),T=(Q=ne??K)!==null&&Q!==void 0?Q:void 0,R=p.size;var W=K-ne;if(L=Number.isNaN(W)?0:W,B={x:M,y:o.y,width:R,height:o.height},Math.abs(H)>0&&Math.abs(L)<Math.abs(H)){var ee=_r(L||H)*(Math.abs(H)-Math.abs(L));T-=ee,L+=ee}}else{var ue=[i.scale(I[0]),i.scale(I[1])],oe=ue[0],_e=ue[1];if(M=oe,T=PN({axis:o,ticks:c,bandSize:a,offset:p.offset,entry:k,index:O}),R=_e-oe,L=p.size,B={x:i.x,y:T,width:i.width,height:L},Math.abs(H)>0&&Math.abs(R)<Math.abs(H)){var Ee=_r(R||H)*(Math.abs(H)-Math.abs(R));R+=Ee}}return Vt(Vt(Vt({},k),{},{x:M,y:T,width:R,height:L,value:u?I:I[1],payload:k,background:B},j&&j[O]&&j[O].props),{},{tooltipPayload:[sO(r,k)],tooltipPosition:{x:M+R/2,y:T+L/2}})});return Vt({data:C,layout:g},h)});function Vc(t){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(t)}function GY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_O(n.key),n)}}function YY(t,e,r){return e&&n6(t.prototype,e),r&&n6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $n(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a6(Object(r),!0).forEach(function(n){zh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zh(t,e,r){return e=_O(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _O(t){var e=KY(t,"string");return Vc(e)=="symbol"?e:e+""}function KY(t,e){if(Vc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DO=function(e,r,n,a,i){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!Qr(u,Oi);return d.reduce(function(p,g){var x=r[g],m=x.orientation,y=x.domain,v=x.padding,w=v===void 0?{}:v,N=x.mirror,b=x.reversed,S="".concat(m).concat(N?"Mirror":""),j,C,k,O,I;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var M=y[1]-y[0],T=1/0,R=x.categoricalDomain.sort(i7);if(R.forEach(function(ue,oe){oe>0&&(T=Math.min((ue||0)-(R[oe-1]||0),T))}),Number.isFinite(T)){var L=T/M,B=x.layout==="vertical"?n.height:n.width;if(x.padding==="gap"&&(j=L*B/2),x.padding==="no-gap"){var H=Dr(e.barCategoryGap,L*B),Q=L*B/2;j=Q-H-(Q-H)/B*H}}}a==="xAxis"?C=[n.left+(w.left||0)+(j||0),n.left+n.width-(w.right||0)-(j||0)]:a==="yAxis"?C=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(j||0),n.top+n.height-(w.bottom||0)-(j||0)]:C=x.range,b&&(C=[C[1],C[0]]);var te=tO(x,i,h),K=te.scale,ne=te.realScaleType;K.domain(y).range(C),rO(K);var W=nO(K,$n($n({},x),{},{realScaleType:ne}));a==="xAxis"?(I=m==="top"&&!N||m==="bottom"&&N,k=n.left,O=f[S]-I*x.height):a==="yAxis"&&(I=m==="left"&&!N||m==="right"&&N,k=f[S]-I*x.width,O=n.top);var ee=$n($n($n({},x),W),{},{realScaleType:ne,x:k,y:O,scale:K,width:a==="xAxis"?n.width:x.width,height:a==="yAxis"?n.height:x.height});return ee.bandSize=Ld(ee,W),!x.hide&&a==="xAxis"?f[S]+=(I?-1:1)*ee.height:x.hide||(f[S]+=(I?-1:1)*ee.width),$n($n({},p),{},zh({},g,ee))},{})},$O=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},JY=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return $O({x:r,y:n},{x:a,y:i})},LO=(function(){function t(e){GY(this,t),this.scale=e}return YY(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();zh(LO,"EPS",1e-4);var c1=function(e){var r=Object.keys(e).reduce(function(n,a){return $n($n({},n),{},zh({},a,LO.create(e[a])))},{});return $n($n({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return NY(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return TO(a,function(i,o){return r[o].isInRange(i)})}})};function XY(t){return(t%180+180)%180}var QY=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=XY(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},m0,s6;function ZY(){if(s6)return m0;s6=1;var t=fa(),e=ou(),r=yh();function n(a){return function(i,o,l){var c=Object(i);if(!e(i)){var u=t(o,3);i=r(i),o=function(f){return u(c[f],f,c)}}var d=a(i,o,l);return d>-1?c[u?i[d]:d]:void 0}}return m0=n,m0}var g0,i6;function eK(){if(i6)return g0;i6=1;var t=kO();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return g0=e,g0}var x0,o6;function tK(){if(o6)return x0;o6=1;var t=Dk(),e=fa(),r=eK(),n=Math.max;function a(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var u=l==null?0:r(l);return u<0&&(u=n(c+u,0)),t(i,e(o,3),u)}return x0=a,x0}var y0,l6;function rK(){if(l6)return y0;l6=1;var t=ZY(),e=tK(),r=t(e);return y0=r,y0}var nK=rK();const aK=it(nK);var sK=QC();const iK=it(sK);var oK=iK(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),u1=A.createContext(void 0),d1=A.createContext(void 0),zO=A.createContext(void 0),FO=A.createContext({}),BO=A.createContext(void 0),qO=A.createContext(0),UO=A.createContext(0),c6=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=oK(i);return D.createElement(u1.Provider,{value:n},D.createElement(d1.Provider,{value:a},D.createElement(FO.Provider,{value:i},D.createElement(zO.Provider,{value:d},D.createElement(BO.Provider,{value:o},D.createElement(qO.Provider,{value:u},D.createElement(UO.Provider,{value:c},l)))))))},lK=function(){return A.useContext(BO)},VO=function(e){var r=A.useContext(u1);r==null&&mi();var n=r[e];return n==null&&mi(),n},cK=function(){var e=A.useContext(u1);return Za(e)},uK=function(){var e=A.useContext(d1),r=aK(e,function(n){return TO(n.domain,Number.isFinite)});return r||Za(e)},HO=function(e){var r=A.useContext(d1);r==null&&mi();var n=r[e];return n==null&&mi(),n},dK=function(){var e=A.useContext(zO);return e},fK=function(){return A.useContext(FO)},f1=function(){return A.useContext(UO)},h1=function(){return A.useContext(qO)};function Po(t){"@babel/helpers - typeof";return Po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Po(t)}function hK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GO(n.key),n)}}function mK(t,e,r){return e&&pK(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gK(t,e,r){return e=rf(e),xK(t,WO()?Reflect.construct(e,r||[],rf(t).constructor):e.apply(t,r))}function xK(t,e){if(e&&(Po(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yK(t)}function yK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WO=function(){return!!t})()}function rf(t){return rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rf(t)}function vK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ov(t,e)}function ov(t,e){return ov=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ov(t,e)}function u6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function d6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u6(Object(r),!0).forEach(function(n){p1(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p1(t,e,r){return e=GO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GO(t){var e=bK(t,"string");return Po(e)=="symbol"?e:e+""}function bK(t,e){if(Po(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Po(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function jK(t,e){return AK(t)||NK(t,e)||SK(t,e)||wK()}function wK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SK(t,e){if(t){if(typeof t=="string")return f6(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f6(t,e)}}function f6(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function NK(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function AK(t){if(Array.isArray(t))return t}function lv(){return lv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lv.apply(this,arguments)}var CK=function(e,r){var n;return D.isValidElement(e)?n=D.cloneElement(e,r):$e(e)?n=e(r):n=D.createElement("line",lv({},r,{className:"recharts-reference-line-line"})),n},kK=function(e,r,n,a,i,o,l,c,u){var d=i.x,f=i.y,h=i.width,p=i.height;if(n){var g=u.y,x=e.y.apply(g,{position:o});if(ta(u,"discard")&&!e.y.isInRange(x))return null;var m=[{x:d+h,y:x},{x:d,y:x}];return c==="left"?m.reverse():m}if(r){var y=u.x,v=e.x.apply(y,{position:o});if(ta(u,"discard")&&!e.x.isInRange(v))return null;var w=[{x:v,y:f+p},{x:v,y:f}];return l==="top"?w.reverse():w}if(a){var N=u.segment,b=N.map(function(S){return e.apply(S,{position:o})});return ta(u,"discard")&&bY(b,function(S){return!e.isInRange(S)})?null:b}return null};function EK(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=lK(),d=VO(a),f=HO(i),h=dK();if(!u||!h)return null;Bn(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=c1({x:d.scale,y:f.scale}),g=er(e),x=er(r),m=n&&n.length===2,y=kK(p,g,x,m,h,t.position,d.orientation,f.orientation,t);if(!y)return null;var v=jK(y,2),w=v[0],N=w.x,b=w.y,S=v[1],j=S.x,C=S.y,k=ta(t,"hidden")?"url(#".concat(u,")"):void 0,O=d6(d6({clipPath:k},Pe(t,!0)),{},{x1:N,y1:b,x2:j,y2:C});return D.createElement(tt,{className:Ve("recharts-reference-line",l)},CK(o,O),or.renderCallByParent(t,JY({x1:N,y1:b,x2:j,y2:C})))}var m1=(function(t){function e(){return hK(this,e),gK(this,e,arguments)}return vK(e,t),mK(e,[{key:"render",value:function(){return D.createElement(EK,this.props)}}])})(D.Component);p1(m1,"displayName","ReferenceLine");p1(m1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function cv(){return cv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cv.apply(this,arguments)}function To(t){"@babel/helpers - typeof";return To=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},To(t)}function h6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function p6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h6(Object(r),!0).forEach(function(n){Fh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KO(n.key),n)}}function TK(t,e,r){return e&&PK(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IK(t,e,r){return e=nf(e),MK(t,YO()?Reflect.construct(e,r||[],nf(t).constructor):e.apply(t,r))}function MK(t,e){if(e&&(To(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RK(t)}function RK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YO=function(){return!!t})()}function nf(t){return nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nf(t)}function _K(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uv(t,e)}function uv(t,e){return uv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uv(t,e)}function Fh(t,e,r){return e=KO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KO(t){var e=DK(t,"string");return To(e)=="symbol"?e:e+""}function DK(t,e){if(To(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(To(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $K=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,o=c1({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return ta(e,"discard")&&!o.isInRange(l)?null:l},Bh=(function(t){function e(){return OK(this,e),IK(this,e,arguments)}return _K(e,t),TK(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=er(a),d=er(i);if(Bn(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=$K(this.props);if(!f)return null;var h=f.x,p=f.y,g=this.props,x=g.shape,m=g.className,y=ta(this.props,"hidden")?"url(#".concat(c,")"):void 0,v=p6(p6({clipPath:y},Pe(this.props,!0)),{},{cx:h,cy:p});return D.createElement(tt,{className:Ve("recharts-reference-dot",m)},e.renderDot(x,v),or.renderCallByParent(this.props,{x:h-o,y:p-o,width:2*o,height:2*o}))}}])})(D.Component);Fh(Bh,"displayName","ReferenceDot");Fh(Bh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Fh(Bh,"renderDot",function(t,e){var r;return D.isValidElement(t)?r=D.cloneElement(t,e):$e(t)?r=t(e):r=D.createElement(Ih,cv({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function dv(){return dv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dv.apply(this,arguments)}function Io(t){"@babel/helpers - typeof";return Io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Io(t)}function m6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function g6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m6(Object(r),!0).forEach(function(n){qh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XO(n.key),n)}}function FK(t,e,r){return e&&zK(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BK(t,e,r){return e=af(e),qK(t,JO()?Reflect.construct(e,r||[],af(t).constructor):e.apply(t,r))}function qK(t,e){if(e&&(Io(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UK(t)}function UK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JO=function(){return!!t})()}function af(t){return af=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},af(t)}function VK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fv(t,e)}function fv(t,e){return fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fv(t,e)}function qh(t,e,r){return e=XO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XO(t){var e=HK(t,"string");return Io(e)=="symbol"?e:e+""}function HK(t,e){if(Io(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Io(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var WK=function(e,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=c1({x:d.scale,y:f.scale}),p={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return ta(i,"discard")&&(!h.isInRange(p)||!h.isInRange(g))?null:$O(p,g)},Uh=(function(t){function e(){return LK(this,e),BK(this,e,arguments)}return VK(e,t),FK(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Bn(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=er(a),h=er(i),p=er(o),g=er(l),x=this.props.shape;if(!f&&!h&&!p&&!g&&!x)return null;var m=WK(f,h,p,g,this.props);if(!m&&!x)return null;var y=ta(this.props,"hidden")?"url(#".concat(d,")"):void 0;return D.createElement(tt,{className:Ve("recharts-reference-area",c)},e.renderRect(x,g6(g6({clipPath:y},Pe(this.props,!0)),m)),or.renderCallByParent(this.props,m))}}])})(D.Component);qh(Uh,"displayName","ReferenceArea");qh(Uh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});qh(Uh,"renderRect",function(t,e){var r;return D.isValidElement(t)?r=D.cloneElement(t,e):$e(t)?r=t(e):r=D.createElement(l1,dv({},e,{className:"recharts-reference-area-rect"})),r});function QO(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function GK(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return QY(n,r)}function YK(t,e,r){var n=r==="width",a=t.x,i=t.y,o=t.width,l=t.height;return e===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function sf(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function KK(t,e){return QO(t,e+1)}function JK(t,e,r,n,a){for(var i=(n||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,f=function(){var g=n?.[c];if(g===void 0)return{v:QO(n,u)};var x=c,m,y=function(){return m===void 0&&(m=r(g,x)),m},v=g.coordinate,w=c===0||sf(t,v,y,d,l);w||(c=0,d=o,u+=1),w&&(d=v+t*(y()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function Hc(t){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(t)}function x6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x6(Object(r),!0).forEach(function(n){XK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XK(t,e,r){return e=QK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QK(t){var e=ZK(t,"string");return Hc(e)=="symbol"?e:e+""}function ZK(t,e){if(Hc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eJ(t,e,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=e.start,c=e.end,u=function(h){var p=i[h],g,x=function(){return g===void 0&&(g=r(p,h)),g};if(h===o-1){var m=t*(p.coordinate+t*x()/2-c);i[h]=p=jr(jr({},p),{},{tickCoord:m>0?p.coordinate-m*t:p.coordinate})}else i[h]=p=jr(jr({},p),{},{tickCoord:p.coordinate});var y=sf(t,p.tickCoord,x,l,c);y&&(c=p.tickCoord-t*(x()/2+a),i[h]=jr(jr({},p),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function tJ(t,e,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=e.start,u=e.end;if(i){var d=n[l-1],f=r(d,l-1),h=t*(d.coordinate+t*f/2-u);o[l-1]=d=jr(jr({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate});var p=sf(t,d.tickCoord,function(){return f},c,u);p&&(u=d.tickCoord-t*(f/2+a),o[l-1]=jr(jr({},d),{},{isShow:!0}))}for(var g=i?l-1:l,x=function(v){var w=o[v],N,b=function(){return N===void 0&&(N=r(w,v)),N};if(v===0){var S=t*(w.coordinate-t*b()/2-c);o[v]=w=jr(jr({},w),{},{tickCoord:S<0?w.coordinate-S*t:w.coordinate})}else o[v]=w=jr(jr({},w),{},{tickCoord:w.coordinate});var j=sf(t,w.tickCoord,b,c,u);j&&(c=w.tickCoord+t*(b()/2+a),o[v]=jr(jr({},w),{},{isShow:!0}))},m=0;m<g;m++)x(m);return o}function g1(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!a||!a.length||!n)return[];if(se(c)||Ai.isSsr)return KK(a,typeof c=="number"&&se(c)?c:0);var h=[],p=l==="top"||l==="bottom"?"width":"height",g=d&&p==="width"?Wl(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},x=function(w,N){var b=$e(u)?u(w.value,N):w.value;return p==="width"?GK(Wl(b,{fontSize:e,letterSpacing:r}),g,f):Wl(b,{fontSize:e,letterSpacing:r})[p]},m=a.length>=2?_r(a[1].coordinate-a[0].coordinate):1,y=YK(i,m,p);return c==="equidistantPreserveStart"?JK(m,y,x,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=tJ(m,y,x,a,o,c==="preserveStartEnd"):h=eJ(m,y,x,a,o),h.filter(function(v){return v.isShow}))}var rJ=["viewBox"],nJ=["viewBox"],aJ=["ticks"];function Mo(t){"@babel/helpers - typeof";return Mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mo(t)}function Yi(){return Yi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yi.apply(this,arguments)}function y6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Jt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y6(Object(r),!0).forEach(function(n){x1(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function v0(t,e){if(t==null)return{};var r=sJ(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sJ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function iJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,e8(n.key),n)}}function oJ(t,e,r){return e&&v6(t.prototype,e),r&&v6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function lJ(t,e,r){return e=of(e),cJ(t,ZO()?Reflect.construct(e,r||[],of(t).constructor):e.apply(t,r))}function cJ(t,e){if(e&&(Mo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uJ(t)}function uJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZO=function(){return!!t})()}function of(t){return of=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},of(t)}function dJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hv(t,e)}function hv(t,e){return hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hv(t,e)}function x1(t,e,r){return e=e8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e8(t){var e=fJ(t,"string");return Mo(e)=="symbol"?e:e+""}function fJ(t,e){if(Mo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rl=(function(t){function e(r){var n;return iJ(this,e),n=lJ(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return dJ(e,t),oJ(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=v0(n,rJ),l=this.props,c=l.viewBox,u=v0(l,nJ);return!Xi(i,c)||!Xi(o,u)||!Xi(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,p,g,x,m,y,v,w=f?-1:1,N=n.tickSize||d,b=se(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=g=n.coordinate,m=o+ +!f*c,x=m-w*N,v=x-w*h,y=b;break;case"left":x=m=n.coordinate,g=i+ +!f*l,p=g-w*N,y=p-w*h,v=b;break;case"right":x=m=n.coordinate,g=i+ +f*l,p=g+w*N,y=p+w*h,v=b;break;default:p=g=n.coordinate,m=o+ +f*c,x=m+w*N,v=x+w*h,y=b;break}return{line:{x1:p,y1:x,x2:g,y2:m},tick:{x:y,y:v}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=Jt(Jt(Jt({},Pe(this.props,!1)),Pe(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=Jt(Jt({},f),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=Jt(Jt({},f),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+l})}return D.createElement("line",Yi({},f,{className:Ve("recharts-cartesian-axis-line",ln(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,p=g1(Jt(Jt({},this.props),{},{ticks:n}),a,i),g=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),m=Pe(this.props,!1),y=Pe(d,!1),v=Jt(Jt({},m),{},{fill:"none"},Pe(c,!1)),w=p.map(function(N,b){var S=o.getTickLineCoord(N),j=S.line,C=S.tick,k=Jt(Jt(Jt(Jt({textAnchor:g,verticalAnchor:x},m),{},{stroke:"none",fill:u},y),C),{},{index:b,payload:N,visibleTicksCount:p.length,tickFormatter:f});return D.createElement(tt,Yi({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},fi(o.props,N,b)),c&&D.createElement("line",Yi({},v,j,{className:Ve("recharts-cartesian-axis-tick-line",ln(c,"className"))})),d&&e.renderTickItem(d,k,"".concat($e(f)?f(N.value,b):N.value).concat(h||"")))});return D.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,p=v0(f,aJ),g=h;return $e(c)&&(g=h&&h.length>0?c(this.props):c(p)),o<=0||l<=0||!g||!g.length?null:D.createElement(tt,{className:Ve("recharts-cartesian-axis",u),ref:function(m){n.layerReference=m}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),or.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=Ve(a.className,"recharts-cartesian-axis-tick-value");return D.isValidElement(n)?o=D.cloneElement(n,Jt(Jt({},a),{},{className:l})):$e(n)?o=n(Jt(Jt({},a),{},{className:l})):o=D.createElement(hi,Yi({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(A.Component);x1(rl,"displayName","CartesianAxis");x1(rl,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var hJ=["x1","y1","x2","y2","key"],pJ=["offset"];function gi(t){"@babel/helpers - typeof";return gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gi(t)}function b6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Sr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b6(Object(r),!0).forEach(function(n){mJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mJ(t,e,r){return e=gJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gJ(t){var e=xJ(t,"string");return gi(e)=="symbol"?e:e+""}function xJ(t,e){if(gi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ks(){return Ks=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ks.apply(this,arguments)}function j6(t,e){if(t==null)return{};var r=yJ(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function yJ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var vJ=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,o=e.width,l=e.height,c=e.ry;return D.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function t8(t,e){var r;if(D.isValidElement(t))r=D.cloneElement(t,e);else if($e(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,o=e.y2,l=e.key,c=j6(e,hJ),u=Pe(c,!1);u.offset;var d=j6(u,pJ);r=D.createElement("line",Ks({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function bJ(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Sr(Sr({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return t8(a,u)});return D.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function jJ(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Sr(Sr({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return t8(a,u)});return D.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function wJ(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var g=!d[p+1],x=g?a+o-h:d[p+1]-h;if(x<=0)return null;var m=p%e.length;return D.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:x,width:i,stroke:"none",fill:e[m],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function SJ(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var g=!d[p+1],x=g?i+l-h:d[p+1]-h;if(x<=0)return null;var m=p%n.length;return D.createElement("rect",{key:"react-".concat(p),x:h,y:o,width:x,height:c,stroke:"none",fill:n[m],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var NJ=function(e,r){var n=e.xAxis,a=e.width,i=e.height,o=e.offset;return eO(g1(Sr(Sr(Sr({},rl.defaultProps),n),{},{ticks:Aa(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},AJ=function(e,r){var n=e.yAxis,a=e.width,i=e.height,o=e.offset;return eO(g1(Sr(Sr(Sr({},rl.defaultProps),n),{},{ticks:Aa(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Ri={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pv(t){var e,r,n,a,i,o,l=f1(),c=h1(),u=fK(),d=Sr(Sr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Ri.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Ri.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Ri.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:Ri.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:Ri.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Ri.verticalFill,x:se(t.x)?t.x:u.left,y:se(t.y)?t.y:u.top,width:se(t.width)?t.width:u.width,height:se(t.height)?t.height:u.height}),f=d.x,h=d.y,p=d.width,g=d.height,x=d.syncWithTicks,m=d.horizontalValues,y=d.verticalValues,v=cK(),w=uK();if(!se(p)||p<=0||!se(g)||g<=0||!se(f)||f!==+f||!se(h)||h!==+h)return null;var N=d.verticalCoordinatesGenerator||NJ,b=d.horizontalCoordinatesGenerator||AJ,S=d.horizontalPoints,j=d.verticalPoints;if((!S||!S.length)&&$e(b)){var C=m&&m.length,k=b({yAxis:w?Sr(Sr({},w),{},{ticks:C?m:w.ticks}):void 0,width:l,height:c,offset:u},C?!0:x);Bn(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(gi(k),"]")),Array.isArray(k)&&(S=k)}if((!j||!j.length)&&$e(N)){var O=y&&y.length,I=N({xAxis:v?Sr(Sr({},v),{},{ticks:O?y:v.ticks}):void 0,width:l,height:c,offset:u},O?!0:x);Bn(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(gi(I),"]")),Array.isArray(I)&&(j=I)}return D.createElement("g",{className:"recharts-cartesian-grid"},D.createElement(vJ,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),D.createElement(bJ,Ks({},d,{offset:u,horizontalPoints:S,xAxis:v,yAxis:w})),D.createElement(jJ,Ks({},d,{offset:u,verticalPoints:j,xAxis:v,yAxis:w})),D.createElement(wJ,Ks({},d,{horizontalPoints:S})),D.createElement(SJ,Ks({},d,{verticalPoints:j})))}pv.displayName="CartesianGrid";var CJ=["layout","type","stroke","connectNulls","isRange","ref"],kJ=["key"],r8;function Ro(t){"@babel/helpers - typeof";return Ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ro(t)}function n8(t,e){if(t==null)return{};var r=EJ(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function EJ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Js(){return Js=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Js.apply(this,arguments)}function w6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ga(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?w6(Object(r),!0).forEach(function(n){Xn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s8(n.key),n)}}function PJ(t,e,r){return e&&S6(t.prototype,e),r&&S6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function TJ(t,e,r){return e=lf(e),IJ(t,a8()?Reflect.construct(e,r||[],lf(t).constructor):e.apply(t,r))}function IJ(t,e){if(e&&(Ro(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MJ(t)}function MJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a8=function(){return!!t})()}function lf(t){return lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lf(t)}function RJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mv(t,e)}function mv(t,e){return mv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mv(t,e)}function Xn(t,e,r){return e=s8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s8(t){var e=_J(t,"string");return Ro(e)=="symbol"?e:e+""}function _J(t,e){if(Ro(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ro(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var As=(function(t){function e(){var r;OJ(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=TJ(this,e,[].concat(a)),Xn(r,"state",{isAnimationFinished:!0}),Xn(r,"id",Xo("recharts-area-")),Xn(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),$e(o)&&o()}),Xn(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),$e(o)&&o()}),r}return RJ(e,t),PJ(e,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=Pe(this.props,!1),p=Pe(u,!0),g=d.map(function(m,y){var v=Ga(Ga(Ga({key:"dot-".concat(y),r:3},h),p),{},{index:y,cx:m.x,cy:m.y,dataKey:f,value:m.value,payload:m.payload,points:d});return e.renderDotItem(u,v)}),x={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return D.createElement(tt,Js({className:"recharts-area-dots"},x),g)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=n*Math.abs(c-u),f=ns(o.map(function(h){return h.y||0}));return se(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(ns(i.map(function(h){return h.y||0})),f)),se(f)?D.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=n*Math.abs(c-u),f=ns(o.map(function(h){return h.x||0}));return se(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(ns(i.map(function(h){return h.x||0})),f)),se(f)?D.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,h=l.isRange;l.ref;var p=n8(l,CJ);return D.createElement(tt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},D.createElement(eo,Js({},Pe(p,!0),{points:n,connectNulls:f,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&D.createElement(eo,Js({},Pe(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:n})),d!=="none"&&h&&D.createElement(eo,Js({},Pe(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,p=o.animationId,g=this.state,x=g.prevPoints,m=g.prevBaseLine;return D.createElement(ia,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var v=y.t;if(x){var w=x.length/l.length,N=l.map(function(C,k){var O=Math.floor(k*w);if(x[O]){var I=x[O],M=qr(I.x,C.x),T=qr(I.y,C.y);return Ga(Ga({},C),{},{x:M(v),y:T(v)})}return C}),b;if(se(c)&&typeof c=="number"){var S=qr(m,c);b=S(v)}else if(Ue(c)||Jo(c)){var j=qr(m,0);b=j(v)}else b=c.map(function(C,k){var O=Math.floor(k*w);if(m[O]){var I=m[O],M=qr(I.x,C.x),T=qr(I.y,C.y);return Ga(Ga({},C),{},{x:M(v),y:T(v)})}return C});return i.renderAreaStatically(N,b,n,a)}return D.createElement(tt,null,D.createElement("defs",null,D.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(v))),D.createElement(tt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&o&&o.length&&(!d&&h>0||!jo(d,o)||!jo(f,l))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,f=a.xAxis,h=a.yAxis,p=a.width,g=a.height,x=a.isAnimationActive,m=a.id;if(i||!l||!l.length)return null;var y=this.state.isAnimationFinished,v=l.length===1,w=Ve("recharts-area",c),N=f&&f.allowDataOverflow,b=h&&h.allowDataOverflow,S=N||b,j=Ue(m)?this.id:m,C=(n=Pe(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},k=C.r,O=k===void 0?3:k,I=C.strokeWidth,M=I===void 0?2:I,T=m7(o)?o:{},R=T.clipDot,L=R===void 0?!0:R,B=O*2+M;return D.createElement(tt,{className:w},N||b?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(j)},D.createElement("rect",{x:N?d:d-p/2,y:b?u:u-g/2,width:N?p:p*2,height:b?g:g*2})),!L&&D.createElement("clipPath",{id:"clipPath-dots-".concat(j)},D.createElement("rect",{x:d-B/2,y:u-B/2,width:p+B,height:g+B}))):null,v?null:this.renderArea(S,j),(o||v)&&this.renderDots(S,L,j),(!x||y)&&Oa.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])})(A.PureComponent);r8=As;Xn(As,"displayName","Area");Xn(As,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ai.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Xn(As,"getBaseValue",function(t,e,r,n){var a=t.layout,i=t.baseValue,o=e.props.baseValue,l=o??i;if(se(l)&&typeof l=="number")return l;var c=a==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Xn(As,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,a=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,p=e.layout,g=u&&u.length,x=r8.getBaseValue(e,r,n,a),m=p==="horizontal",y=!1,v=f.map(function(N,b){var S;g?S=u[d+b]:(S=Zt(N,c),Array.isArray(S)?y=!0:S=[x,S]);var j=S[1]==null||g&&Zt(N,c)==null;return m?{x:ON({axis:n,ticks:i,bandSize:l,entry:N,index:b}),y:j?null:a.scale(S[1]),value:S,payload:N}:{x:j?null:n.scale(S[1]),y:ON({axis:a,ticks:o,bandSize:l,entry:N,index:b}),value:S,payload:N}}),w;return g||y?w=v.map(function(N){var b=Array.isArray(N.value)?N.value[0]:null;return m?{x:N.x,y:b!=null&&N.y!=null?a.scale(b):null}:{x:b!=null?n.scale(b):null,y:N.y}}):w=m?a.scale(x):n.scale(x),Ga({points:v,baseLine:w,layout:p,isRange:y},h)});Xn(As,"renderDotItem",function(t,e){var r;if(D.isValidElement(t))r=D.cloneElement(t,e);else if($e(t))r=t(e);else{var n=Ve("recharts-area-dot",typeof t!="boolean"?t.className:""),a=e.key,i=n8(e,kJ);r=D.createElement(Ih,Js({},i,{key:a,className:n}))}return r});function _o(t){"@babel/helpers - typeof";return _o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_o(t)}function DJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l8(n.key),n)}}function LJ(t,e,r){return e&&$J(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zJ(t,e,r){return e=cf(e),FJ(t,i8()?Reflect.construct(e,r||[],cf(t).constructor):e.apply(t,r))}function FJ(t,e){if(e&&(_o(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BJ(t)}function BJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i8=function(){return!!t})()}function cf(t){return cf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cf(t)}function qJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gv(t,e)}function gv(t,e){return gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gv(t,e)}function o8(t,e,r){return e=l8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l8(t){var e=UJ(t,"string");return _o(e)=="symbol"?e:e+""}function UJ(t,e){if(_o(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_o(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function xv(){return xv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xv.apply(this,arguments)}function VJ(t){var e=t.xAxisId,r=f1(),n=h1(),a=VO(e);return a==null?null:A.createElement(rl,xv({},a,{className:Ve("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Aa(o,!0)}}))}var Do=(function(t){function e(){return DJ(this,e),zJ(this,e,arguments)}return qJ(e,t),LJ(e,[{key:"render",value:function(){return A.createElement(VJ,this.props)}}])})(A.Component);o8(Do,"displayName","XAxis");o8(Do,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function $o(t){"@babel/helpers - typeof";return $o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$o(t)}function HJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d8(n.key),n)}}function GJ(t,e,r){return e&&WJ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function YJ(t,e,r){return e=uf(e),KJ(t,c8()?Reflect.construct(e,r||[],uf(t).constructor):e.apply(t,r))}function KJ(t,e){if(e&&($o(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JJ(t)}function JJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c8=function(){return!!t})()}function uf(t){return uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uf(t)}function XJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yv(t,e)}function yv(t,e){return yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},yv(t,e)}function u8(t,e,r){return e=d8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d8(t){var e=QJ(t,"string");return $o(e)=="symbol"?e:e+""}function QJ(t,e){if($o(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($o(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function vv(){return vv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vv.apply(this,arguments)}var ZJ=function(e){var r=e.yAxisId,n=f1(),a=h1(),i=HO(r);return i==null?null:A.createElement(rl,vv({},i,{className:Ve("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return Aa(l,!0)}}))},Lo=(function(t){function e(){return HJ(this,e),YJ(this,e,arguments)}return XJ(e,t),GJ(e,[{key:"render",value:function(){return A.createElement(ZJ,this.props)}}])})(A.Component);u8(Lo,"displayName","YAxis");u8(Lo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function N6(t){return nX(t)||rX(t)||tX(t)||eX()}function eX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tX(t,e){if(t){if(typeof t=="string")return bv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bv(t,e)}}function rX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nX(t){if(Array.isArray(t))return bv(t)}function bv(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var jv=function(e,r,n,a,i){var o=kn(e,m1),l=kn(e,Bh),c=[].concat(N6(o),N6(l)),u=kn(e,Uh),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(x,m){if(m.props[d]===n&&ta(m.props,"extendDomain")&&se(m.props[f])){var y=m.props[f];return[Math.min(x[0],y),Math.max(x[1],y)]}return x},h)),u.length){var p="".concat(f,"1"),g="".concat(f,"2");h=u.reduce(function(x,m){if(m.props[d]===n&&ta(m.props,"extendDomain")&&se(m.props[p])&&se(m.props[g])){var y=m.props[p],v=m.props[g];return[Math.min(x[0],y,v),Math.max(x[1],y,v)]}return x},h)}return i&&i.length&&(h=i.reduce(function(x,m){return se(m)?[Math.min(x[0],m),Math.max(x[1],m)]:x},h)),h},b0={exports:{}},A6;function aX(){return A6||(A6=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,p,g){var x=r?r+u:u;if(!this._events[x])return!1;var m=this._events[x],y=arguments.length,v,w;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,d),!0;case 3:return m.fn.call(m.context,d,f),!0;case 4:return m.fn.call(m.context,d,f,h),!0;case 5:return m.fn.call(m.context,d,f,h,p),!0;case 6:return m.fn.call(m.context,d,f,h,p,g),!0}for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];m.fn.apply(m.context,v)}else{var N=m.length,b;for(w=0;w<N;w++)switch(m[w].once&&this.removeListener(u,m[w].fn,void 0,!0),y){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,d);break;case 3:m[w].fn.call(m[w].context,d,f);break;case 4:m[w].fn.call(m[w].context,d,f,h);break;default:if(!v)for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];m[w].fn.apply(m[w].context,v)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,p);else{for(var x=0,m=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&m.push(g[x]);m.length?this._events[p]=m.length===1?m[0]:m:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(b0)),b0.exports}var sX=aX();const iX=it(sX);var j0=new iX,w0="recharts.syncMouseEvents";function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function oX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f8(n.key),n)}}function cX(t,e,r){return e&&lX(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function S0(t,e,r){return e=f8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f8(t){var e=uX(t,"string");return Wc(e)=="symbol"?e:e+""}function uX(t,e){if(Wc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dX=(function(){function t(){oX(this,t),S0(this,"activeIndex",0),S0(this,"coordinateList",[]),S0(this,"layout","horizontal")}return cX(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])})();function fX(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t?.[0],a=t?.[1];if(n&&a&&se(n)&&se(a))return!0}return!1}function hX(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function h8(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,o=At(e,r,n,a),l=At(e,r,n,i);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function pX(t,e,r){var n,a,i,o;if(t==="horizontal")n=e.x,i=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,h=At(l,c,u,f),p=At(l,c,d,f);n=h.x,a=h.y,i=p.x,o=p.y}else return h8(e);return[{x:n,y:a},{x:i,y:o}]}function Gc(t){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gc(t)}function C6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _u(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?C6(Object(r),!0).forEach(function(n){mX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mX(t,e,r){return e=gX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gX(t){var e=xX(t,"string");return Gc(e)=="symbol"?e:e+""}function xX(t,e){if(Gc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yX(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,p=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var g,x=eo;if(h==="ScatterChart")g=o,x=VW;else if(h==="BarChart")g=hX(f,o,c,d),x=l1;else if(f==="radial"){var m=h8(o),y=m.cx,v=m.cy,w=m.radius,N=m.startAngle,b=m.endAngle;g={cx:y,cy:v,startAngle:N,endAngle:b,innerRadius:w,outerRadius:w},x=dO}else g={points:pX(f,o,c)},x=eo;var S=_u(_u(_u(_u({stroke:"#ccc",pointerEvents:"none"},c),g),Pe(p,!1)),{},{payload:l,payloadIndex:u,className:Ve("recharts-tooltip-cursor",p.className)});return A.isValidElement(p)?A.cloneElement(p,S):A.createElement(x,S)}var vX=["item"],bX=["children","className","width","height","style","compact","title","desc"];function zo(t){"@babel/helpers - typeof";return zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zo(t)}function Ki(){return Ki=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ki.apply(this,arguments)}function k6(t,e){return SX(t)||wX(t,e)||m8(t,e)||jX()}function jX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wX(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function SX(t){if(Array.isArray(t))return t}function E6(t,e){if(t==null)return{};var r=NX(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function NX(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function AX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g8(n.key),n)}}function kX(t,e,r){return e&&CX(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function EX(t,e,r){return e=df(e),OX(t,p8()?Reflect.construct(e,r||[],df(t).constructor):e.apply(t,r))}function OX(t,e){if(e&&(zo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PX(t)}function PX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p8=function(){return!!t})()}function df(t){return df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},df(t)}function TX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wv(t,e)}function wv(t,e){return wv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},wv(t,e)}function Fo(t){return RX(t)||MX(t)||m8(t)||IX()}function IX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m8(t,e){if(t){if(typeof t=="string")return Sv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sv(t,e)}}function MX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RX(t){if(Array.isArray(t))return Sv(t)}function Sv(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function O6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?O6(Object(r),!0).forEach(function(n){Re(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O6(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Re(t,e,r){return e=g8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g8(t){var e=_X(t,"string");return zo(e)=="symbol"?e:e+""}function _X(t,e){if(zo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DX={xAxis:["bottom","top"],yAxis:["left","right"]},$X={width:"100%",height:"100%"},x8={x:0,y:0};function Du(t){return t}var LX=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},zX=function(e,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,l=a.radius;return J(J(J({},a),At(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return J(J(J({},a),At(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return x8},Vh=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Fo(l),Fo(u)):l},[]);return o.length>0?o:e&&e.length&&se(a)&&se(i)?e.slice(a,i+1):[]};function y8(t){return t==="number"?[0,"auto"]:void 0}var Nv=function(e,r,n,a){var i=e.graphicalItems,o=e.tooltipAxis,l=Vh(r,e);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var p=f===void 0?l:f;h=hd(p,o.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(Fo(c),[sO(u,h)]):c},[])},P6=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},o=LX(i,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=fU(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=Nv(e,r,d,f),p=zX(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},FX=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,f=e.children,h=e.stackOffset,p=ZE(d,i);return n.reduce(function(g,x){var m,y=x.type.defaultProps!==void 0?J(J({},x.type.defaultProps),x.props):x.props,v=y.type,w=y.dataKey,N=y.allowDataOverflow,b=y.allowDuplicatedCategory,S=y.scale,j=y.ticks,C=y.includeHidden,k=y[o];if(g[k])return g;var O=Vh(e.data,{graphicalItems:a.filter(function(W){var ee,ue=o in W.props?W.props[o]:(ee=W.type.defaultProps)===null||ee===void 0?void 0:ee[o];return ue===k}),dataStartIndex:c,dataEndIndex:u}),I=O.length,M,T,R;fX(y.domain,N,v)&&(M=Ly(y.domain,null,N),p&&(v==="number"||S!=="auto")&&(R=Yl(O,w,"category")));var L=y8(v);if(!M||M.length===0){var B,H=(B=y.domain)!==null&&B!==void 0?B:L;if(w){if(M=Yl(O,w,v),v==="category"&&p){var Q=s7(M);b&&Q?(T=M,M=Xd(0,I)):b||(M=MN(H,M,x).reduce(function(W,ee){return W.indexOf(ee)>=0?W:[].concat(Fo(W),[ee])},[]))}else if(v==="category")b?M=M.filter(function(W){return W!==""&&!Ue(W)}):M=MN(H,M,x).reduce(function(W,ee){return W.indexOf(ee)>=0||ee===""||Ue(ee)?W:[].concat(Fo(W),[ee])},[]);else if(v==="number"){var te=xU(O,a.filter(function(W){var ee,ue,oe=o in W.props?W.props[o]:(ee=W.type.defaultProps)===null||ee===void 0?void 0:ee[o],_e="hide"in W.props?W.props.hide:(ue=W.type.defaultProps)===null||ue===void 0?void 0:ue.hide;return oe===k&&(C||!_e)}),w,i,d);te&&(M=te)}p&&(v==="number"||S!=="auto")&&(R=Yl(O,w,"category"))}else p?M=Xd(0,I):l&&l[k]&&l[k].hasStack&&v==="number"?M=h==="expand"?[0,1]:aO(l[k].stackGroups,c,u):M=QE(O,a.filter(function(W){var ee=o in W.props?W.props[o]:W.type.defaultProps[o],ue="hide"in W.props?W.props.hide:W.type.defaultProps.hide;return ee===k&&(C||!ue)}),v,d,!0);if(v==="number")M=jv(f,M,k,i,j),H&&(M=Ly(H,M,N));else if(v==="category"&&H){var K=H,ne=M.every(function(W){return K.indexOf(W)>=0});ne&&(M=K)}}return J(J({},g),{},Re({},k,J(J({},y),{},{axisType:i,domain:M,categoricalDomain:R,duplicateDomain:T,originalDomain:(m=y.domain)!==null&&m!==void 0?m:L,isCategorical:p,layout:d})))},{})},BX=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,f=e.children,h=Vh(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),p=h.length,g=ZE(d,i),x=-1;return n.reduce(function(m,y){var v=y.type.defaultProps!==void 0?J(J({},y.type.defaultProps),y.props):y.props,w=v[o],N=y8("number");if(!m[w]){x++;var b;return g?b=Xd(0,p):l&&l[w]&&l[w].hasStack?(b=aO(l[w].stackGroups,c,u),b=jv(f,b,w,i)):(b=Ly(N,QE(h,n.filter(function(S){var j,C,k=o in S.props?S.props[o]:(j=S.type.defaultProps)===null||j===void 0?void 0:j[o],O="hide"in S.props?S.props.hide:(C=S.type.defaultProps)===null||C===void 0?void 0:C.hide;return k===w&&!O}),"number",d),a.defaultProps.allowDataOverflow),b=jv(f,b,w,i)),J(J({},m),{},Re({},w,J(J({axisType:i},a.defaultProps),{},{hide:!0,orientation:ln(DX,"".concat(i,".").concat(x%2),null),domain:b,originalDomain:N,isCategorical:g,layout:d})))}return m},{})},qX=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.children,f="".concat(a,"Id"),h=kn(d,i),p={};return h&&h.length?p=FX(e,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=BX(e,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},UX=function(e){var r=Za(e),n=Aa(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:_b(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Ld(r,n)}},T6=function(e){var r=e.children,n=e.defaultShowTooltip,a=Qr(r,Eo),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},VX=function(e){return!e||!e.length?!1:e.some(function(r){var n=ka(r&&r.type);return n&&n.indexOf("Bar")>=0})},I6=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},HX=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,l=e.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},p=Qr(f,Eo),g=Qr(f,cs),x=Object.keys(c).reduce(function(b,S){var j=c[S],C=j.orientation;return!j.mirror&&!j.hide?J(J({},b),{},Re({},C,b[C]+j.width)):b},{left:h.left||0,right:h.right||0}),m=Object.keys(o).reduce(function(b,S){var j=o[S],C=j.orientation;return!j.mirror&&!j.hide?J(J({},b),{},Re({},C,ln(b,"".concat(C))+j.height)):b},{top:h.top||0,bottom:h.bottom||0}),y=J(J({},m),x),v=y.bottom;p&&(y.bottom+=p.props.height||Eo.defaultProps.height),g&&r&&(y=mU(y,a,n,r));var w=u-y.left-y.right,N=d-y.top-y.bottom;return J(J({brushBottom:v},y),{},{width:Math.max(w,0),height:Math.max(N,0)})},WX=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},y1=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,h=function(y,v){var w=v.graphicalItems,N=v.stackGroups,b=v.offset,S=v.updateId,j=v.dataStartIndex,C=v.dataEndIndex,k=y.barSize,O=y.layout,I=y.barGap,M=y.barCategoryGap,T=y.maxBarSize,R=I6(O),L=R.numericAxisName,B=R.cateAxisName,H=VX(w),Q=[];return w.forEach(function(te,K){var ne=Vh(y.data,{graphicalItems:[te],dataStartIndex:j,dataEndIndex:C}),W=te.type.defaultProps!==void 0?J(J({},te.type.defaultProps),te.props):te.props,ee=W.dataKey,ue=W.maxBarSize,oe=W["".concat(L,"Id")],_e=W["".concat(B,"Id")],Ee={},be=c.reduce(function(De,ht){var dn=v["".concat(ht.axisType,"Map")],Ha=W["".concat(ht.axisType,"Id")];dn&&dn[Ha]||ht.axisType==="zAxis"||mi();var Kr=dn[Ha];return J(J({},De),{},Re(Re({},ht.axisType,Kr),"".concat(ht.axisType,"Ticks"),Aa(Kr)))},Ee),X=be[B],xe=be["".concat(B,"Ticks")],Ae=N&&N[oe]&&N[oe].hasStack&&CU(te,N[oe].stackGroups),Z=ka(te.type).indexOf("Bar")>=0,ot=Ld(X,xe),F=[],ce=H&&hU({barSize:k,stackGroups:N,totalSize:WX(be,B)});if(Z){var me,Ze,xt=Ue(ue)?T:ue,yt=(me=(Ze=Ld(X,xe,!0))!==null&&Ze!==void 0?Ze:xt)!==null&&me!==void 0?me:0;F=pU({barGap:I,barCategoryGap:M,bandSize:yt!==ot?yt:ot,sizeList:ce[_e],maxBarSize:xt}),yt!==ot&&(F=F.map(function(De){return J(J({},De),{},{position:J(J({},De.position),{},{offset:De.position.offset-yt/2})})}))}var wt=te&&te.type&&te.type.getComposedData;wt&&Q.push({props:J(J({},wt(J(J({},be),{},{displayedData:ne,props:y,dataKey:ee,item:te,bandSize:ot,barPosition:F,offset:b,stackedData:Ae,layout:O,dataStartIndex:j,dataEndIndex:C}))),{},Re(Re(Re({key:te.key||"item-".concat(K)},L,be[L]),B,be[B]),"animationId",S)),childIndex:y7(te,y.children),item:te})}),Q},p=function(y,v){var w=y.props,N=y.dataStartIndex,b=y.dataEndIndex,S=y.updateId;if(!Gw({props:w}))return null;var j=w.children,C=w.layout,k=w.stackOffset,O=w.data,I=w.reverseStackOrder,M=I6(C),T=M.numericAxisName,R=M.cateAxisName,L=kn(j,n),B=NU(O,L,"".concat(T,"Id"),"".concat(R,"Id"),k,I),H=c.reduce(function(W,ee){var ue="".concat(ee.axisType,"Map");return J(J({},W),{},Re({},ue,qX(w,J(J({},ee),{},{graphicalItems:L,stackGroups:ee.axisType===T&&B,dataStartIndex:N,dataEndIndex:b}))))},{}),Q=HX(J(J({},H),{},{props:w,graphicalItems:L}),v?.legendBBox);Object.keys(H).forEach(function(W){H[W]=d(w,H[W],Q,W.replace("Map",""),r)});var te=H["".concat(R,"Map")],K=UX(te),ne=h(w,J(J({},H),{},{dataStartIndex:N,dataEndIndex:b,updateId:S,graphicalItems:L,stackGroups:B,offset:Q}));return J(J({formattedGraphicalItems:ne,graphicalItems:L,offset:Q,stackGroups:B},K),H)},g=(function(m){function y(v){var w,N,b;return AX(this,y),b=EX(this,y,[v]),Re(b,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Re(b,"accessibilityManager",new dX),Re(b,"handleLegendBBoxUpdate",function(S){if(S){var j=b.state,C=j.dataStartIndex,k=j.dataEndIndex,O=j.updateId;b.setState(J({legendBBox:S},p({props:b.props,dataStartIndex:C,dataEndIndex:k,updateId:O},J(J({},b.state),{},{legendBBox:S}))))}}),Re(b,"handleReceiveSyncEvent",function(S,j,C){if(b.props.syncId===S){if(C===b.eventEmitterSymbol&&typeof b.props.syncMethod!="function")return;b.applySyncEvent(j)}}),Re(b,"handleBrushChange",function(S){var j=S.startIndex,C=S.endIndex;if(j!==b.state.dataStartIndex||C!==b.state.dataEndIndex){var k=b.state.updateId;b.setState(function(){return J({dataStartIndex:j,dataEndIndex:C},p({props:b.props,dataStartIndex:j,dataEndIndex:C,updateId:k},b.state))}),b.triggerSyncEvent({dataStartIndex:j,dataEndIndex:C})}}),Re(b,"handleMouseEnter",function(S){var j=b.getMouseInfo(S);if(j){var C=J(J({},j),{},{isTooltipActive:!0});b.setState(C),b.triggerSyncEvent(C);var k=b.props.onMouseEnter;$e(k)&&k(C,S)}}),Re(b,"triggeredAfterMouseMove",function(S){var j=b.getMouseInfo(S),C=j?J(J({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};b.setState(C),b.triggerSyncEvent(C);var k=b.props.onMouseMove;$e(k)&&k(C,S)}),Re(b,"handleItemMouseEnter",function(S){b.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Re(b,"handleItemMouseLeave",function(){b.setState(function(){return{isTooltipActive:!1}})}),Re(b,"handleMouseMove",function(S){S.persist(),b.throttleTriggeredAfterMouseMove(S)}),Re(b,"handleMouseLeave",function(S){b.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};b.setState(j),b.triggerSyncEvent(j);var C=b.props.onMouseLeave;$e(C)&&C(j,S)}),Re(b,"handleOuterEvent",function(S){var j=x7(S),C=ln(b.props,"".concat(j));if(j&&$e(C)){var k,O;/.*touch.*/i.test(j)?O=b.getMouseInfo(S.changedTouches[0]):O=b.getMouseInfo(S),C((k=O)!==null&&k!==void 0?k:{},S)}}),Re(b,"handleClick",function(S){var j=b.getMouseInfo(S);if(j){var C=J(J({},j),{},{isTooltipActive:!0});b.setState(C),b.triggerSyncEvent(C);var k=b.props.onClick;$e(k)&&k(C,S)}}),Re(b,"handleMouseDown",function(S){var j=b.props.onMouseDown;if($e(j)){var C=b.getMouseInfo(S);j(C,S)}}),Re(b,"handleMouseUp",function(S){var j=b.props.onMouseUp;if($e(j)){var C=b.getMouseInfo(S);j(C,S)}}),Re(b,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&b.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Re(b,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&b.handleMouseDown(S.changedTouches[0])}),Re(b,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&b.handleMouseUp(S.changedTouches[0])}),Re(b,"handleDoubleClick",function(S){var j=b.props.onDoubleClick;if($e(j)){var C=b.getMouseInfo(S);j(C,S)}}),Re(b,"handleContextMenu",function(S){var j=b.props.onContextMenu;if($e(j)){var C=b.getMouseInfo(S);j(C,S)}}),Re(b,"triggerSyncEvent",function(S){b.props.syncId!==void 0&&j0.emit(w0,b.props.syncId,S,b.eventEmitterSymbol)}),Re(b,"applySyncEvent",function(S){var j=b.props,C=j.layout,k=j.syncMethod,O=b.state.updateId,I=S.dataStartIndex,M=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)b.setState(J({dataStartIndex:I,dataEndIndex:M},p({props:b.props,dataStartIndex:I,dataEndIndex:M,updateId:O},b.state)));else if(S.activeTooltipIndex!==void 0){var T=S.chartX,R=S.chartY,L=S.activeTooltipIndex,B=b.state,H=B.offset,Q=B.tooltipTicks;if(!H)return;if(typeof k=="function")L=k(Q,S);else if(k==="value"){L=-1;for(var te=0;te<Q.length;te++)if(Q[te].value===S.activeLabel){L=te;break}}var K=J(J({},H),{},{x:H.left,y:H.top}),ne=Math.min(T,K.x+K.width),W=Math.min(R,K.y+K.height),ee=Q[L]&&Q[L].value,ue=Nv(b.state,b.props.data,L),oe=Q[L]?{x:C==="horizontal"?Q[L].coordinate:ne,y:C==="horizontal"?W:Q[L].coordinate}:x8;b.setState(J(J({},S),{},{activeLabel:ee,activeCoordinate:oe,activePayload:ue,activeTooltipIndex:L}))}else b.setState(S)}),Re(b,"renderCursor",function(S){var j,C=b.state,k=C.isTooltipActive,O=C.activeCoordinate,I=C.activePayload,M=C.offset,T=C.activeTooltipIndex,R=C.tooltipAxisBandSize,L=b.getTooltipEventType(),B=(j=S.props.active)!==null&&j!==void 0?j:k,H=b.props.layout,Q=S.key||"_recharts-cursor";return D.createElement(yX,{key:Q,activeCoordinate:O,activePayload:I,activeTooltipIndex:T,chartName:r,element:S,isActive:B,layout:H,offset:M,tooltipAxisBandSize:R,tooltipEventType:L})}),Re(b,"renderPolarAxis",function(S,j,C){var k=ln(S,"type.axisType"),O=ln(b.state,"".concat(k,"Map")),I=S.type.defaultProps,M=I!==void 0?J(J({},I),S.props):S.props,T=O&&O[M["".concat(k,"Id")]];return A.cloneElement(S,J(J({},T),{},{className:Ve(k,T.className),key:S.key||"".concat(j,"-").concat(C),ticks:Aa(T,!0)}))}),Re(b,"renderPolarGrid",function(S){var j=S.props,C=j.radialLines,k=j.polarAngles,O=j.polarRadius,I=b.state,M=I.radiusAxisMap,T=I.angleAxisMap,R=Za(M),L=Za(T),B=L.cx,H=L.cy,Q=L.innerRadius,te=L.outerRadius;return A.cloneElement(S,{polarAngles:Array.isArray(k)?k:Aa(L,!0).map(function(K){return K.coordinate}),polarRadius:Array.isArray(O)?O:Aa(R,!0).map(function(K){return K.coordinate}),cx:B,cy:H,innerRadius:Q,outerRadius:te,key:S.key||"polar-grid",radialLines:C})}),Re(b,"renderLegend",function(){var S=b.state.formattedGraphicalItems,j=b.props,C=j.children,k=j.width,O=j.height,I=b.props.margin||{},M=k-(I.left||0)-(I.right||0),T=JE({children:C,formattedGraphicalItems:S,legendWidth:M,legendContent:u});if(!T)return null;var R=T.item,L=E6(T,vX);return A.cloneElement(R,J(J({},L),{},{chartWidth:k,chartHeight:O,margin:I,onBBoxUpdate:b.handleLegendBBoxUpdate}))}),Re(b,"renderTooltip",function(){var S,j=b.props,C=j.children,k=j.accessibilityLayer,O=Qr(C,Zr);if(!O)return null;var I=b.state,M=I.isTooltipActive,T=I.activeCoordinate,R=I.activePayload,L=I.activeLabel,B=I.offset,H=(S=O.props.active)!==null&&S!==void 0?S:M;return A.cloneElement(O,{viewBox:J(J({},B),{},{x:B.left,y:B.top}),active:H,label:L,payload:H?R:[],coordinate:T,accessibilityLayer:k})}),Re(b,"renderBrush",function(S){var j=b.props,C=j.margin,k=j.data,O=b.state,I=O.offset,M=O.dataStartIndex,T=O.dataEndIndex,R=O.updateId;return A.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Tu(b.handleBrushChange,S.props.onChange),data:k,x:se(S.props.x)?S.props.x:I.left,y:se(S.props.y)?S.props.y:I.top+I.height+I.brushBottom-(C.bottom||0),width:se(S.props.width)?S.props.width:I.width,startIndex:M,endIndex:T,updateId:"brush-".concat(R)})}),Re(b,"renderReferenceElement",function(S,j,C){if(!S)return null;var k=b,O=k.clipPathId,I=b.state,M=I.xAxisMap,T=I.yAxisMap,R=I.offset,L=S.type.defaultProps||{},B=S.props,H=B.xAxisId,Q=H===void 0?L.xAxisId:H,te=B.yAxisId,K=te===void 0?L.yAxisId:te;return A.cloneElement(S,{key:S.key||"".concat(j,"-").concat(C),xAxis:M[Q],yAxis:T[K],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:O})}),Re(b,"renderActivePoints",function(S){var j=S.item,C=S.activePoint,k=S.basePoint,O=S.childIndex,I=S.isRange,M=[],T=j.props.key,R=j.item.type.defaultProps!==void 0?J(J({},j.item.type.defaultProps),j.item.props):j.item.props,L=R.activeDot,B=R.dataKey,H=J(J({index:O,dataKey:B,cx:C.x,cy:C.y,r:4,fill:o1(j.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Pe(L,!1)),pd(L));return M.push(y.renderActiveDot(L,H,"".concat(T,"-activePoint-").concat(O))),k?M.push(y.renderActiveDot(L,J(J({},H),{},{cx:k.x,cy:k.y}),"".concat(T,"-basePoint-").concat(O))):I&&M.push(null),M}),Re(b,"renderGraphicChild",function(S,j,C){var k=b.filterFormatItem(S,j,C);if(!k)return null;var O=b.getTooltipEventType(),I=b.state,M=I.isTooltipActive,T=I.tooltipAxis,R=I.activeTooltipIndex,L=I.activeLabel,B=b.props.children,H=Qr(B,Zr),Q=k.props,te=Q.points,K=Q.isRange,ne=Q.baseLine,W=k.item.type.defaultProps!==void 0?J(J({},k.item.type.defaultProps),k.item.props):k.item.props,ee=W.activeDot,ue=W.hide,oe=W.activeBar,_e=W.activeShape,Ee=!!(!ue&&M&&H&&(ee||oe||_e)),be={};O!=="axis"&&H&&H.props.trigger==="click"?be={onClick:Tu(b.handleItemMouseEnter,S.props.onClick)}:O!=="axis"&&(be={onMouseLeave:Tu(b.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Tu(b.handleItemMouseEnter,S.props.onMouseEnter)});var X=A.cloneElement(S,J(J({},k.props),be));function xe(ht){return typeof T.dataKey=="function"?T.dataKey(ht.payload):null}if(Ee)if(R>=0){var Ae,Z;if(T.dataKey&&!T.allowDuplicatedCategory){var ot=typeof T.dataKey=="function"?xe:"payload.".concat(T.dataKey.toString());Ae=hd(te,ot,L),Z=K&&ne&&hd(ne,ot,L)}else Ae=te?.[R],Z=K&&ne&&ne[R];if(_e||oe){var F=S.props.activeIndex!==void 0?S.props.activeIndex:R;return[A.cloneElement(S,J(J(J({},k.props),be),{},{activeIndex:F})),null,null]}if(!Ue(Ae))return[X].concat(Fo(b.renderActivePoints({item:k,activePoint:Ae,basePoint:Z,childIndex:R,isRange:K})))}else{var ce,me=(ce=b.getItemByXY(b.state.activeCoordinate))!==null&&ce!==void 0?ce:{graphicalItem:X},Ze=me.graphicalItem,xt=Ze.item,yt=xt===void 0?S:xt,wt=Ze.childIndex,De=J(J(J({},k.props),be),{},{activeIndex:wt});return[A.cloneElement(yt,De),null,null]}return K?[X,null,null]:[X,null]}),Re(b,"renderCustomized",function(S,j,C){return A.cloneElement(S,J(J({key:"recharts-customized-".concat(C)},b.props),b.state))}),Re(b,"renderMap",{CartesianGrid:{handler:Du,once:!0},ReferenceArea:{handler:b.renderReferenceElement},ReferenceLine:{handler:Du},ReferenceDot:{handler:b.renderReferenceElement},XAxis:{handler:Du},YAxis:{handler:Du},Brush:{handler:b.renderBrush,once:!0},Bar:{handler:b.renderGraphicChild},Line:{handler:b.renderGraphicChild},Area:{handler:b.renderGraphicChild},Radar:{handler:b.renderGraphicChild},RadialBar:{handler:b.renderGraphicChild},Scatter:{handler:b.renderGraphicChild},Pie:{handler:b.renderGraphicChild},Funnel:{handler:b.renderGraphicChild},Tooltip:{handler:b.renderCursor,once:!0},PolarGrid:{handler:b.renderPolarGrid,once:!0},PolarAngleAxis:{handler:b.renderPolarAxis},PolarRadiusAxis:{handler:b.renderPolarAxis},Customized:{handler:b.renderCustomized}}),b.clipPathId="".concat((w=v.id)!==null&&w!==void 0?w:Xo("recharts"),"-clip"),b.throttleTriggeredAfterMouseMove=Kk(b.triggeredAfterMouseMove,(N=v.throttleDelay)!==null&&N!==void 0?N:1e3/60),b.state={},b}return TX(y,m),kX(y,[{key:"componentDidMount",value:function(){var w,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,N=w.children,b=w.data,S=w.height,j=w.layout,C=Qr(N,Zr);if(C){var k=C.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,I=Nv(this.state,b,k,O),M=this.state.tooltipTicks[k].coordinate,T=(this.state.offset.top+S)/2,R=j==="horizontal",L=R?{x:M,y:T}:{y:M,x:T},B=this.state.formattedGraphicalItems.find(function(Q){var te=Q.item;return te.type.name==="Scatter"});B&&(L=J(J({},L),B.props.points[k].tooltipPosition),I=B.props.points[k].tooltipPayload);var H={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:O,activePayload:I,activeCoordinate:L};this.setState(H),this.renderCursor(C),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var b,S;this.accessibilityManager.setDetails({offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(w){iy([Qr(w.children,Zr)],[Qr(this.props.children,Zr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Qr(this.props.children,Zr);if(w&&typeof w.props.shared=="boolean"){var N=w.props.shared?"axis":"item";return l.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var N=this.container,b=N.getBoundingClientRect(),S=az(b),j={chartX:Math.round(w.pageX-S.left),chartY:Math.round(w.pageY-S.top)},C=b.width/N.offsetWidth||1,k=this.inRange(j.chartX,j.chartY,C);if(!k)return null;var O=this.state,I=O.xAxisMap,M=O.yAxisMap,T=this.getTooltipEventType(),R=P6(this.state,this.props.data,this.props.layout,k);if(T!=="axis"&&I&&M){var L=Za(I).scale,B=Za(M).scale,H=L&&L.invert?L.invert(j.chartX):null,Q=B&&B.invert?B.invert(j.chartY):null;return J(J({},j),{},{xValue:H,yValue:Q},R)}return R?J(J({},j),R):null}},{key:"inRange",value:function(w,N){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,j=w/b,C=N/b;if(S==="horizontal"||S==="vertical"){var k=this.state.offset,O=j>=k.left&&j<=k.left+k.width&&C>=k.top&&C<=k.top+k.height;return O?{x:j,y:C}:null}var I=this.state,M=I.angleAxisMap,T=I.radiusAxisMap;if(M&&T){var R=Za(M);return DN({x:j,y:C},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,N=this.getTooltipEventType(),b=Qr(w,Zr),S={};b&&N==="axis"&&(b.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=pd(this.props,this.handleOuterEvent);return J(J({},j),S)}},{key:"addListener",value:function(){j0.on(w0,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){j0.removeListener(w0,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,N,b){for(var S=this.state.formattedGraphicalItems,j=0,C=S.length;j<C;j++){var k=S[j];if(k.item===w||k.props.key===w.key||N===ka(k.item.type)&&b===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,N=this.state.offset,b=N.left,S=N.top,j=N.height,C=N.width;return D.createElement("defs",null,D.createElement("clipPath",{id:w},D.createElement("rect",{x:b,y:S,height:j,width:C})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(N,b){var S=k6(b,2),j=S[0],C=S[1];return J(J({},N),{},Re({},j,C.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(N,b){var S=k6(b,2),j=S[0],C=S[1];return J(J({},N),{},Re({},j,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[w])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(w){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[w])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(w){var N=this.state,b=N.formattedGraphicalItems,S=N.activeItem;if(b&&b.length)for(var j=0,C=b.length;j<C;j++){var k=b[j],O=k.props,I=k.item,M=I.type.defaultProps!==void 0?J(J({},I.type.defaultProps),I.props):I.props,T=ka(I.type);if(T==="Bar"){var R=(O.data||[]).find(function(Q){return NW(w,Q)});if(R)return{graphicalItem:k,payload:R}}else if(T==="RadialBar"){var L=(O.data||[]).find(function(Q){return DN(w,Q)});if(L)return{graphicalItem:k,payload:L}}else if($h(k,S)||Lh(k,S)||Bc(k,S)){var B=GG({graphicalItem:k,activeTooltipItem:S,itemData:M.data}),H=M.activeIndex===void 0?B:M.activeIndex;return{graphicalItem:J(J({},k),{},{childIndex:H}),payload:Bc(k,S)?M.data[B]:k.props.data[B]}}}return null}},{key:"render",value:function(){var w=this;if(!Gw(this))return null;var N=this.props,b=N.children,S=N.className,j=N.width,C=N.height,k=N.style,O=N.compact,I=N.title,M=N.desc,T=E6(N,bX),R=Pe(T,!1);if(O)return D.createElement(c6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement(ly,Ki({},R,{width:j,height:C,title:I,desc:M}),this.renderClipPath(),Kw(b,this.renderMap)));if(this.props.accessibilityLayer){var L,B;R.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,R.role=(B=this.props.role)!==null&&B!==void 0?B:"application",R.onKeyDown=function(Q){w.accessibilityManager.keyboardEvent(Q)},R.onFocus=function(){w.accessibilityManager.focus()}}var H=this.parseEventsOfWrapper();return D.createElement(c6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement("div",Ki({className:Ve("recharts-wrapper",S),style:J({position:"relative",cursor:"default",width:j,height:C},k)},H,{ref:function(te){w.container=te}}),D.createElement(ly,Ki({},R,{width:j,height:C,title:I,desc:M,style:$X}),this.renderClipPath(),Kw(b,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(A.Component);Re(g,"displayName",r),Re(g,"defaultProps",J({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Re(g,"getDerivedStateFromProps",function(m,y){var v=m.dataKey,w=m.data,N=m.children,b=m.width,S=m.height,j=m.layout,C=m.stackOffset,k=m.margin,O=y.dataStartIndex,I=y.dataEndIndex;if(y.updateId===void 0){var M=T6(m);return J(J(J({},M),{},{updateId:0},p(J(J({props:m},M),{},{updateId:0}),y)),{},{prevDataKey:v,prevData:w,prevWidth:b,prevHeight:S,prevLayout:j,prevStackOffset:C,prevMargin:k,prevChildren:N})}if(v!==y.prevDataKey||w!==y.prevData||b!==y.prevWidth||S!==y.prevHeight||j!==y.prevLayout||C!==y.prevStackOffset||!Xi(k,y.prevMargin)){var T=T6(m),R={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},L=J(J({},P6(y,w,j)),{},{updateId:y.updateId+1}),B=J(J(J({},T),R),L);return J(J(J({},B),p(J({props:m},B),y)),{},{prevDataKey:v,prevData:w,prevWidth:b,prevHeight:S,prevLayout:j,prevStackOffset:C,prevMargin:k,prevChildren:N})}if(!iy(N,y.prevChildren)){var H,Q,te,K,ne=Qr(N,Eo),W=ne&&(H=(Q=ne.props)===null||Q===void 0?void 0:Q.startIndex)!==null&&H!==void 0?H:O,ee=ne&&(te=(K=ne.props)===null||K===void 0?void 0:K.endIndex)!==null&&te!==void 0?te:I,ue=W!==O||ee!==I,oe=!Ue(w),_e=oe&&!ue?y.updateId:y.updateId+1;return J(J({updateId:_e},p(J(J({props:m},y),{},{updateId:_e,dataStartIndex:W,dataEndIndex:ee}),y)),{},{prevChildren:N,dataStartIndex:W,dataEndIndex:ee})}return null}),Re(g,"renderActiveDot",function(m,y,v){var w;return A.isValidElement(m)?w=A.cloneElement(m,y):$e(m)?w=m(y):w=D.createElement(Ih,y),D.createElement(tt,{className:"recharts-active-dot",key:v},w)});var x=A.forwardRef(function(y,v){return D.createElement(g,Ki({},y,{ref:v}))});return x.displayName=g.displayName,x},GX=y1({chartName:"BarChart",GraphicalChild:Oi,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Do},{axisType:"yAxis",AxisComp:Lo}],formatAxisMap:DO}),M6=y1({chartName:"PieChart",GraphicalChild:oa,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Dh},{axisType:"radiusAxis",AxisComp:Rh}],formatAxisMap:DU,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),YX=y1({chartName:"AreaChart",GraphicalChild:As,axisComponents:[{axisType:"xAxis",AxisComp:Do},{axisType:"yAxis",AxisComp:Lo}],formatAxisMap:DO});const KX=()=>{const{t,language:e}=je(),{width:r}=YC(),[n,a]=A.useState(!0),[i,o]=A.useState(null),[l,c]=A.useState({activeClients:0,totalClients:0,activeConsultants:0,totalConsultants:0,completedSessions:0,totalSessions:0,pendingSessions:0,confirmedSessions:0,monthlyRevenue:0,totalRevenue:0,lastMonthRevenue:0,revenueGrowth:0,averageRating:0,totalRatings:0,cancelledSessions:0,totalBookings:0,totalServices:0,activeServices:0,totalArticles:0,publishedArticles:0,totalPayments:0,pendingPayments:0,totalReports:0,monthlyRevenueData:[],sessionsByStatus:[],topConsultants:[],recentBookings:[]});A.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0),o(null);const m=await Je.getDashboardStats();c(m.stats)}catch(m){console.error("Error fetching dashboard stats:",m),o(m.message||"Failed to load dashboard data")}finally{a(!1)}},d=({title:m,value:y,icon:v,suffix:w="",prefix:N=null,growth:b=null,delay:S=0,subtitle:j=null})=>s.jsx(V,{className:"relative overflow-hidden h-full border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-orange-50/30 to-amber-50/50 hover:shadow-lg transition-all duration-300",style:{animationDelay:`${S}s`},styles:{body:{padding:"clamp(16px, 3vw, 24px)"}},children:s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-start justify-between mb-5",children:[s.jsx("div",{className:"p-3 rounded-xl bg-amber-100/50 border border-amber-200/50",style:{width:"clamp(48px, 8vw, 56px)",height:"clamp(48px, 8vw, 56px)"},children:s.jsx("div",{className:"text-amber-700 text-lg xs:text-xl sm:text-2xl",children:v})}),b!==null&&s.jsxs("div",{className:`flex items-center gap-1 xs:gap-1.5 px-2 xs:px-3 py-1 xs:py-1.5 rounded-lg xs:rounded-xl text-[10px] xs:text-xs font-bold ${b>=0?"bg-amber-100 text-amber-700 border border-amber-200":"bg-orange-100 text-orange-700 border border-orange-200"}`,children:[b>=0?s.jsx(Tj,{className:"text-xs xs:text-sm"}):s.jsx(G5,{className:"text-xs xs:text-sm"}),Math.abs(b).toFixed(1),"%"]})]}),s.jsx(Be,{title:s.jsx("span",{className:"text-amber-900/70 font-semibold text-[10px] xs:text-xs sm:text-sm uppercase tracking-wider",children:m}),value:y,prefix:N,suffix:w,valueStyle:{color:"#92400e",fontWeight:700,fontSize:"clamp(20px, 4vw + 8px, 28px)",lineHeight:1.2,letterSpacing:"-0.01em"}}),j&&s.jsxs("div",{className:"mt-3 xs:mt-4 text-[11px] xs:text-xs sm:text-sm text-amber-800/60 font-medium flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-1 xs:w-1.5 xs:h-1.5 rounded-full bg-amber-400"}),j]})]})}),f=l.monthlyRevenueData?.length>0?l.monthlyRevenueData.map(m=>({month:m.month,revenue:m.revenue||0})):[{month:e==="ar"?"يناير":"Jan",revenue:5e4},{month:e==="ar"?"فبراير":"Feb",revenue:75e3},{month:e==="ar"?"مارس":"Mar",revenue:6e4},{month:e==="ar"?"أبريل":"Apr",revenue:9e4},{month:e==="ar"?"مايو":"May",revenue:l.monthlyRevenue||85e3}],h=l.sessionsByStatus?.length>0?l.sessionsByStatus.map(m=>({name:e==="ar"?m.status==="COMPLETED"?"مكتملة":m.status==="PENDING"?"معلقة":m.status==="CONFIRMED"?"مؤكدة":m.status==="CANCELLED"?"ملغاة":m.status:m.status,value:m.count,color:m.status==="COMPLETED"?"#52c41a":m.status==="PENDING"?"#faad14":m.status==="CONFIRMED"?"#1890ff":m.status==="CANCELLED"?"#ff4d4f":"#8c8c8c"})):[{name:e==="ar"?"مكتملة":"Completed",value:l.completedSessions,color:"#52c41a"},{name:e==="ar"?"ملغاة":"Cancelled",value:l.cancelledSessions,color:"#ff4d4f"}],p=[{name:e==="ar"?"استشارات":"Consultations",value:35,color:"#14b8a6"},{name:e==="ar"?"دراسات جدوى":"Feasibility",value:25,color:"#7a8c66"},{name:e==="ar"?"تحليلات":"Analysis",value:40,color:"#faad14"}],g=[{title:e==="ar"?"العميل":"Client",dataIndex:"clientName",key:"clientName"},{title:e==="ar"?"المستشار":"Consultant",dataIndex:"consultantName",key:"consultantName"},{title:e==="ar"?"الخدمة":"Service",dataIndex:"serviceName",key:"serviceName"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:m=>{const v={COMPLETED:{color:"green",text:e==="ar"?"مكتملة":"Completed"},PENDING:{color:"orange",text:e==="ar"?"معلقة":"Pending"},CONFIRMED:{color:"blue",text:e==="ar"?"مؤكدة":"Confirmed"},CANCELLED:{color:"red",text:e==="ar"?"ملغاة":"Cancelled"}}[m]||{color:"default",text:m};return s.jsx(le,{color:v.color,children:v.text})}},{title:e==="ar"?"التاريخ":"Date",dataIndex:"scheduledAt",key:"scheduledAt",render:m=>m?de(m).format("YYYY-MM-DD HH:mm"):"-"}],x=[{title:e==="ar"?"المستشار":"Consultant",dataIndex:"name",key:"name",render:m=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(at,{icon:s.jsx(ke,{})}),s.jsx("span",{className:"font-medium",children:m})]})},{title:e==="ar"?"الحجوزات":"Bookings",dataIndex:"bookings",key:"bookings",render:m=>s.jsx("span",{className:"font-semibold",children:m})},{title:e==="ar"?"التقييم":"Rating",dataIndex:"rating",key:"rating",render:m=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(uo,{className:"text-yellow-500"}),s.jsx("span",{className:"font-semibold",children:m?.toFixed(1)||"0.0"})]})}];return n?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})}):i?s.jsx(Gt,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:i,type:"error",showIcon:!0,closable:!0,onClose:()=>o(null)}):s.jsxs("div",{className:"relative min-h-screen pb-8 bg-gradient-to-br from-amber-50 via-orange-50/50 to-amber-50",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-amber-200/30 to-orange-200/30 rounded-full blur-3xl opacity-40 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-orange-200/30 to-amber-200/30 rounded-full blur-3xl opacity-40 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6 mb-10 md:mb-12 relative z-10 px-2 sm:px-0",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl xs:text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-black gradient-text-modern mb-3 sm:mb-4 leading-tight",style:{fontSize:"clamp(1.5rem, 4vw + 1rem, 4.5rem)"},children:t("dashboardOverview")}),s.jsx("p",{className:"text-sm xs:text-base sm:text-lg md:text-xl text-gray-600 font-medium max-w-2xl",style:{fontSize:"clamp(0.875rem, 2vw + 0.5rem, 1.25rem)"},children:t("platformPerformance")})]}),s.jsx("div",{className:"text-xs xs:text-sm sm:text-base text-amber-900 bg-amber-100/50 px-3 xs:px-4 sm:px-5 py-2 xs:py-3 sm:py-4 rounded-xl sm:rounded-2xl shadow-md whitespace-nowrap font-semibold border border-amber-200/50",children:s.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[s.jsx("div",{className:"p-1.5 xs:p-2 rounded-lg xs:rounded-xl bg-amber-500 border border-amber-400",children:s.jsx(Dt,{className:"text-white text-sm xs:text-base sm:text-lg"})}),s.jsx("span",{className:"text-[10px] xs:text-xs sm:text-sm md:text-base",children:new Date().toLocaleDateString(e==="ar"?"ar-SA":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})})]}),s.jsxs(ie,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx($,{xs:12,sm:12,md:8,lg:6,xl:4,children:s.jsx(d,{title:t("activeClients"),value:l.activeClients,icon:s.jsx(ke,{className:"text-base xs:text-lg sm:text-xl md:text-2xl text-amber-700"}),subtitle:t("totalClients")+`: ${l.totalClients}`,delay:.1})}),s.jsx($,{xs:12,sm:12,md:8,lg:6,xl:4,children:s.jsx(d,{title:t("activeConsultants"),value:l.activeConsultants,icon:s.jsx(en,{className:"text-xl sm:text-2xl text-olive-green-600"}),subtitle:t("totalConsultants")+`: ${l.totalConsultants}`,delay:.2})}),s.jsx($,{xs:12,sm:12,md:8,lg:6,xl:4,children:s.jsx(d,{title:t("completedSessions"),value:l.completedSessions,icon:s.jsx(vt,{className:"text-xl sm:text-2xl text-teal-500"}),color:"bg-teal-500",subtitle:t("totalSessions")+`: ${l.totalSessions}`,delay:.3})}),s.jsx($,{xs:12,sm:12,md:8,lg:6,xl:4,children:s.jsx(d,{title:t("monthlyRevenue"),value:l.monthlyRevenue,icon:s.jsx(tr,{className:"text-xl sm:text-2xl text-olive-green-600"}),suffix:e==="ar"?" ريال":" SAR",growth:l.revenueGrowth,delay:.4})}),s.jsx($,{xs:12,sm:12,md:8,lg:6,xl:4,children:s.jsx(d,{title:t("averageRating"),value:l.averageRating,icon:s.jsx(uo,{className:"text-xl sm:text-2xl text-yellow-500"}),suffix:"/ 5",subtitle:t("totalRatings")+`: ${l.totalRatings}`,delay:.5})}),s.jsx($,{xs:12,sm:12,md:8,lg:6,xl:4,children:s.jsx(d,{title:t("cancelledSessions"),value:l.cancelledSessions,icon:s.jsx(uc,{className:"text-xl sm:text-2xl text-red-500"}),delay:.6})})]}),s.jsxs(ie,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx($,{xs:12,sm:12,md:6,lg:4,xl:4,children:s.jsx(d,{title:t("totalServices"),value:l.totalServices,icon:s.jsx(ui,{className:"text-base xs:text-lg sm:text-xl text-blue-500"}),subtitle:t("activeServices")+`: ${l.activeServices}`,delay:.7})}),s.jsx($,{xs:12,sm:12,md:6,lg:4,xl:4,children:s.jsx(d,{title:t("totalArticles"),value:l.totalArticles,icon:s.jsx(lo,{className:"text-lg sm:text-xl text-purple-500"}),subtitle:t("publishedArticles")+`: ${l.publishedArticles}`,delay:.8})}),s.jsx($,{xs:12,sm:12,md:6,lg:4,xl:4,children:s.jsx(d,{title:t("totalPayments"),value:l.totalPayments,icon:s.jsx(ob,{className:"text-lg sm:text-xl text-green-500"}),subtitle:t("pendingPayments")+`: ${l.pendingPayments}`,delay:.9})}),s.jsx($,{xs:12,sm:12,md:6,lg:4,xl:4,children:s.jsx(d,{title:t("pendingSessions"),value:l.pendingSessions,icon:s.jsx(Cn,{className:"text-lg sm:text-xl text-orange-500"}),delay:1})}),s.jsx($,{xs:12,sm:12,md:6,lg:4,xl:4,children:s.jsx(d,{title:t("confirmedSessions"),value:l.confirmedSessions,icon:s.jsx(vt,{className:"text-lg sm:text-xl text-blue-500"}),delay:1.1})}),s.jsx($,{xs:12,sm:12,md:6,lg:4,xl:4,children:s.jsx(d,{title:t("totalReports"),value:l.totalReports,icon:s.jsx(Ct,{className:"text-lg sm:text-xl text-indigo-500"}),delay:1.2})})]}),s.jsxs(ie,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx($,{xs:24,sm:24,md:24,lg:16,xl:16,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"icon-container-modern bg-gradient-to-br from-olive-green-500 to-turquoise-500",style:{width:"clamp(40px, 8vw, 56px)",height:"clamp(40px, 8vw, 56px)"},children:s.jsx(dc,{className:"text-white text-base xs:text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base xs:text-lg sm:text-xl font-bold text-amber-900",style:{fontSize:"clamp(1rem, 2vw + 0.5rem, 1.25rem)"},children:t("monthlyRevenueTrend")})]}),className:"modern-chart-container border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-white to-amber-50/50",style:{animationDelay:"0.2s"},styles:{body:{padding:"clamp(16px, 4vw, 32px)"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.06)",padding:"clamp(16px, 3vw, 24px) clamp(16px, 4vw, 32px)"}},children:s.jsx(Cu,{width:"100%",height:r<640?200:r<1024?250:300,children:s.jsxs(YX,{data:f,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#7a8c66",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#7a8c66",stopOpacity:0})]})}),s.jsx(pv,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(Do,{dataKey:"month",stroke:"#6b7280"}),s.jsx(Lo,{stroke:"#6b7280"}),s.jsx(Zr,{formatter:m=>[`${m} ${e==="ar"?"ريال":"SAR"}`,e==="ar"?"الإيرادات":"Revenue"],contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}),s.jsx(As,{type:"monotone",dataKey:"revenue",stroke:"#7a8c66",strokeWidth:3,fillOpacity:1,fill:"url(#colorRevenue)"})]})})})}),s.jsx($,{xs:24,sm:24,md:24,lg:8,xl:8,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"icon-container-modern bg-amber-600 border border-amber-500",children:s.jsx(vt,{className:"text-white text-xl"})}),s.jsx("span",{className:"text-xl font-bold gradient-text-modern",children:t("sessionsStatus")})]}),className:"modern-chart-container border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-white to-amber-50/50",style:{animationDelay:"0.3s"},styles:{body:{padding:"clamp(16px, 4vw, 32px)"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.06)",padding:"clamp(16px, 3vw, 24px) clamp(16px, 4vw, 32px)"}},children:s.jsx(Cu,{width:"100%",height:r<640?200:r<1024?250:300,children:s.jsxs(M6,{children:[s.jsx(oa,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:({name:m,percent:y})=>`${m}: ${(y*100).toFixed(0)}%`,outerRadius:90,fill:"#8884d8",dataKey:"value",children:h.map((m,y)=>s.jsx(xc,{fill:m.color},`cell-${y}`))}),s.jsx(Zr,{})]})})})})]}),s.jsxs(ie,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx($,{xs:24,sm:24,md:24,lg:12,xl:12,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"icon-container-modern bg-orange-500 border border-orange-400",children:s.jsx(ui,{className:"text-white text-xl"})}),s.jsx("span",{className:"text-xl font-bold gradient-text-modern",children:t("servicesDistribution")})]}),className:"modern-chart-container border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-white to-amber-50/50",style:{animationDelay:"0.4s"},styles:{body:{padding:"clamp(16px, 4vw, 32px)"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.06)",padding:"clamp(16px, 3vw, 24px) clamp(16px, 4vw, 32px)"}},children:s.jsx(Cu,{width:"100%",height:r<640?200:r<1024?250:300,children:s.jsxs(M6,{children:[s.jsx(oa,{data:p,cx:"50%",cy:"50%",labelLine:!1,label:({name:m,percent:y})=>`${m}: ${(y*100).toFixed(0)}%`,outerRadius:90,fill:"#8884d8",dataKey:"value",children:p.map((m,y)=>s.jsx(xc,{fill:m.color},`cell-${y}`))}),s.jsx(Zr,{}),s.jsx(cs,{})]})})})}),s.jsx($,{xs:24,sm:24,md:24,lg:12,xl:12,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"icon-container-modern bg-amber-600 border border-amber-500",children:s.jsx(Tj,{className:"text-white text-xl"})}),s.jsx("span",{className:"text-xl font-bold gradient-text-modern",children:t("performanceComparison")})]}),className:"modern-chart-container border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-white to-amber-50/50",style:{animationDelay:"0.5s"},styles:{body:{padding:"clamp(16px, 4vw, 32px)"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.06)",padding:"clamp(16px, 3vw, 24px) clamp(16px, 4vw, 32px)"}},children:s.jsx(Cu,{width:"100%",height:r<640?200:r<1024?250:300,children:s.jsxs(GX,{data:f,children:[s.jsx(pv,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(Do,{dataKey:"month",stroke:"#6b7280"}),s.jsx(Lo,{stroke:"#6b7280"}),s.jsx(Zr,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}),s.jsx(cs,{}),s.jsx(Oi,{dataKey:"revenue",fill:"#7a8c66",radius:[8,8,0,0]})]})})})})]}),s.jsxs(ie,{gutter:[12,12],children:[s.jsx($,{xs:24,sm:24,md:24,lg:14,xl:14,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"icon-container-modern bg-orange-500 border border-orange-400",children:s.jsx(Cn,{className:"text-white text-xl"})}),s.jsx("span",{className:"text-xl font-bold gradient-text-modern",children:t("recentBookings")})]}),className:"modern-table-container border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-white to-amber-50/50",style:{animationDelay:"0.6s"},styles:{body:{padding:"32px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx("div",{className:"overflow-x-auto",children:s.jsx(rt,{dataSource:l.recentBookings||[],columns:g,pagination:{pageSize:5,responsive:!0},size:"small",rowKey:"id",scroll:{x:"max-content"}})})})}),s.jsx($,{xs:24,sm:24,md:24,lg:10,xl:10,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"icon-container-modern bg-amber-500 border border-amber-400",children:s.jsx(dc,{className:"text-white text-xl"})}),s.jsx("span",{className:"text-xl font-bold gradient-text-modern",children:t("topConsultants")})]}),className:"modern-table-container border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-white to-amber-50/50",style:{animationDelay:"0.7s"},styles:{body:{padding:"clamp(16px, 4vw, 32px)"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.06)",padding:"clamp(16px, 3vw, 24px) clamp(16px, 4vw, 32px)"}},children:s.jsx("div",{className:"overflow-x-auto",children:s.jsx(rt,{dataSource:l.topConsultants||[],columns:x,pagination:!1,size:"small",rowKey:"id",scroll:{x:"max-content"}})})})})]})]})},JX=()=>{const{t,language:e}=je(),r=nt(),[n,a]=A.useState([]),[i,o]=A.useState(!0),[l,c]=A.useState(null),[u,d]=A.useState(""),[f,h]=A.useState("all"),[p,g]=A.useState({visible:!1,userId:null}),[x,m]=A.useState({visible:!1,editing:null}),[y]=E.useForm(),[v]=E.useForm(),[w,N]=A.useState(null);A.useEffect(()=>{b()},[u,f]);const b=async()=>{try{o(!0),c(null);const T={};u&&(T.search=u),f!=="all"&&(T.status=f);const L=(await Je.getClients(T)).clients.map(B=>({id:B.id,userId:B.user.id,name:`${B.firstName} ${B.lastName}`,email:B.user.email,phone:B.user.phone,sessions:B._count?.bookings||0,lastLogin:B.user.lastLogin?new Date(B.user.lastLogin).toLocaleDateString(e==="ar"?"ar-SA":"en-US"):e==="ar"?"لم يسجل دخول":"Never",status:B.user.isActive?"active":"suspended",isActive:B.user.isActive}));a(L)}catch(T){console.error("Error fetching clients:",T),c(T.message||"Failed to load clients"),_.error(e==="ar"?"فشل تحميل العملاء":"Failed to load clients")}finally{o(!1)}},S=async(T,R)=>{try{const L=!R;await Je.toggleUserStatus(T,L),_.success(e==="ar"?`تم ${L?"تفعيل":"تعطيل"} المستخدم بنجاح`:`User ${L?"activated":"suspended"} successfully`),b()}catch(L){_.error(L.message||(e==="ar"?"فشل تحديث الحالة":"Failed to update status"))}},j=async T=>{try{await Je.resetUserPassword(p.userId,T.newPassword),_.success(e==="ar"?"تم إعادة تعيين كلمة المرور بنجاح":"Password reset successfully"),g({visible:!1,userId:null}),y.resetFields()}catch(R){_.error(R.message||(e==="ar"?"فشل إعادة تعيين كلمة المرور":"Failed to reset password"))}},C=T=>{if(!T||/file:\/\//.test(T)||/[A-Za-z]:[\\\/]/.test(T)||/fakepath/i.test(T))return null;if(/^https?:\/\//.test(T))return T;const R="http://localhost:5000/api".replace("/api","")||"http://localhost:5000";return T.startsWith("/")?`${R}${T}`:`${R}/${T}`},k=async T=>{try{const R=new FormData;R.append("file",T),R.append("ownerType","USER"),R.append("ownerId",x.editing?.id||"new");const L=await Hr.uploadFile(R);if(L.success&&L.file){const B="http://localhost:5000/api".replace("/api","")||"http://localhost:5000";let H=L.file.fileUrl||L.file.url;H&&!/^https?:\/\//.test(H)&&(H=H.startsWith("/")?`${B}${H}`:`${B}/${H}`);const Q=C(H);return Q?(N(Q),v.setFieldsValue({companyLogo:Q}),_.success(e==="ar"?"تم رفع الشعار بنجاح":"Logo uploaded successfully")):_.error(e==="ar"?"فشل رفع الشعار: رابط غير صالح":"Failed to upload logo: Invalid URL"),!1}}catch(R){console.error("Error uploading logo:",R),_.error(e==="ar"?"فشل رفع الشعار":"Failed to upload logo")}return!1},O=async T=>{try{const R=v.getFieldValue("companyLogo")||w||T.companyLogo||null,L={...T,companyLogo:R};x.editing?(await Je.updateClient(x.editing.id,L),_.success(e==="ar"?"تم تحديث العميل بنجاح":"Client updated successfully")):(await Je.createClient(L),_.success(e==="ar"?"تم إنشاء العميل بنجاح":"Client created successfully")),m({visible:!1,editing:null}),N(null),v.resetFields(),b()}catch(R){_.error(R.message||(e==="ar"?"فشل حفظ العميل":"Failed to save client"))}},I=async T=>{try{await Je.deleteClient(T),_.success(e==="ar"?"تم حذف العميل بنجاح":"Client deleted successfully"),b()}catch(R){_.error(R.message||(e==="ar"?"فشل حذف العميل":"Failed to delete client"))}},M=[{title:e==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",sorter:(T,R)=>T.name.localeCompare(R.name)},{title:e==="ar"?"البريد الإلكتروني":"Email",dataIndex:"email",key:"email"},{title:e==="ar"?"رقم الهاتف":"Phone",dataIndex:"phone",key:"phone"},{title:e==="ar"?"عدد الجلسات":"Sessions Count",dataIndex:"sessions",key:"sessions",sorter:(T,R)=>T.sessions-R.sessions},{title:e==="ar"?"آخر تسجيل دخول":"Last Login",dataIndex:"lastLogin",key:"lastLogin"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:(T,R)=>{const L={active:"green",suspended:"red"},B={active:e==="ar"?"نشط":"Active",suspended:e==="ar"?"معلق":"Suspended"};return s.jsx(le,{color:L[T],children:B[T]})},filters:[{text:e==="ar"?"نشط":"Active",value:"active"},{text:e==="ar"?"معلق":"Suspended",value:"suspended"}],onFilter:(T,R)=>R.status===T},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(T,R)=>s.jsxs(fe,{children:[s.jsx(P,{type:"link",onClick:()=>r(`/admin/clients/${R.id}`),children:e==="ar"?"عرض التفاصيل":"View Details"}),s.jsx(P,{icon:s.jsx(kr,{}),onClick:async()=>{try{const B=(await Je.getClientById(R.id)).client,H=C(B?.companyLogo);N(H),v.setFieldsValue({firstName:B?.firstName||"",lastName:B?.lastName||"",email:B?.user?.email||"",phone:B?.user?.phone||"",city:B?.city||"",sector:B?.sector||"",companyName:B?.companyName||"",companyLogo:H||null}),m({visible:!0,editing:R})}catch{_.error(e==="ar"?"فشل تحميل بيانات العميل":"Failed to load client data")}},children:e==="ar"?"تعديل":"Edit"}),s.jsx(P,{type:R.isActive?"default":"primary",onClick:()=>S(R.userId,R.isActive),children:R.isActive?e==="ar"?"تعطيل":"Suspend":e==="ar"?"تفعيل":"Activate"}),s.jsx(P,{danger:!0,icon:s.jsx(FR,{}),onClick:()=>g({visible:!0,userId:R.userId}),children:e==="ar"?"إعادة تعيين كلمة المرور":"Reset Password"}),s.jsx(P,{danger:!0,onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذا العميل؟":"Are you sure you want to delete this client?")&&I(R.id)},children:e==="ar"?"حذف":"Delete"})]})}];return l&&!i?s.jsx(Gt,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:l,type:"error",showIcon:!0,action:s.jsx(P,{size:"small",onClick:b,children:e==="ar"?"إعادة المحاولة":"Retry"})}):s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"العملاء":"Clients"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع العملاء المسجلين":"Manage all registered clients"})]}),s.jsxs(fe,{children:[s.jsx(z,{placeholder:e==="ar"?"بحث بالاسم أو البريد...":"Search by name or email...",prefix:s.jsx(Un,{}),className:"w-64",value:u,onChange:T=>d(T.target.value),allowClear:!0}),s.jsxs(q,{value:f,onChange:h,style:{width:150},children:[s.jsx(q.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(q.Option,{value:"active",children:e==="ar"?"نشط":"Active"}),s.jsx(q.Option,{value:"inactive",children:e==="ar"?"معلق":"Inactive"})]}),s.jsx(P,{icon:s.jsx(Cr,{}),onClick:b,loading:i,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{v.resetFields(),N(null),m({visible:!0,editing:null})},children:e==="ar"?"إضافة عميل جديد":"Add New Client"})]})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsx(rt,{columns:M,dataSource:n,rowKey:"id",loading:i,pagination:{pageSize:10,showSizeChanger:!0,showTotal:T=>e==="ar"?`إجمالي ${T} عميل`:`Total ${T} clients`},scroll:{x:"max-content"}})})}),s.jsx(He,{title:e==="ar"?"إعادة تعيين كلمة المرور":"Reset Password",open:p.visible,onCancel:()=>{g({visible:!1,userId:null}),y.resetFields()},maskClosable:!0,keyboard:!0,footer:null,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:y,layout:"vertical",onFinish:j,children:[s.jsx(E.Item,{name:"newPassword",label:e==="ar"?"كلمة المرور الجديدة":"New Password",rules:[{required:!0,message:e==="ar"?"يرجى إدخال كلمة المرور":"Please enter password"},{min:8,message:e==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters"}],children:s.jsx(z.Password,{placeholder:e==="ar"?"أدخل كلمة المرور الجديدة":"Enter new password"})}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{g({visible:!1,userId:null}),y.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),s.jsx(He,{title:x.editing?e==="ar"?"تعديل العميل":"Edit Client":e==="ar"?"إضافة عميل جديد":"Add New Client",open:x.visible,onCancel:()=>{m({visible:!1,editing:null}),N(null),v.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:600,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:v,layout:"vertical",onFinish:O,children:[!x.editing&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:e==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email"},{type:"email",message:e==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email"}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"password",label:e==="ar"?"كلمة المرور":"Password",rules:[{required:!x.editing,message:e==="ar"?"يرجى إدخال كلمة المرور":"Please enter password"},{min:8,message:e==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters"}],children:s.jsx(z.Password,{})})]}),s.jsx(E.Item,{name:"firstName",label:e==="ar"?"الاسم الأول":"First Name",rules:[{required:!0}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"lastName",label:e==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:s.jsx(z,{})}),s.jsx(E.Item,{name:"city",label:e==="ar"?"المدينة":"City",children:s.jsx(z,{})}),s.jsx(E.Item,{name:"sector",label:e==="ar"?"القطاع":"Sector",children:s.jsx(z,{})}),s.jsx(E.Item,{name:"companyName",label:e==="ar"?"اسم الشركة":"Company Name",children:s.jsx(z,{})}),s.jsx(E.Item,{name:"companyLogo",label:e==="ar"?"شعار الشركة":"Company Logo",children:s.jsxs(fe,{direction:"vertical",style:{width:"100%"},children:[s.jsx(Pt,{beforeUpload:k,showUploadList:!1,accept:"image/*",children:s.jsx(P,{icon:s.jsx(ir,{}),children:e==="ar"?"رفع الشعار":"Upload Logo"})}),(()=>{const T=w||v.getFieldValue("companyLogo");return T?s.jsx(Ar,{src:C(T),alt:"Company Logo",width:200,height:100,style:{objectFit:"contain"},onError:R=>{console.error("Failed to load logo:",T),R.target.style.display="none"}}):null})(),s.jsx(z,{placeholder:e==="ar"?"أو أدخل رابط الشعار":"Or enter logo URL",value:w||v.getFieldValue("companyLogo")||"",onChange:T=>{const R=T.target.value.trim();N(R),v.setFieldsValue({companyLogo:R||null})}})]})}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{m({visible:!1,editing:null}),v.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},XX=()=>{const{t,language:e}=je(),r=nt(),[n,a]=A.useState([]),[i,o]=A.useState(!0),[l,c]=A.useState(null),[u,d]=A.useState(""),[f,h]=A.useState("all"),[p,g]=A.useState(null),[x,m]=A.useState(!1),[y,v]=A.useState({visible:!1,editing:null}),[w]=E.useForm();A.useEffect(()=>{N()},[u,f]);const N=async()=>{try{o(!0),c(null);const k={};u&&(k.search=u),f!=="all"&&(k.status=f);const I=(await Je.getConsultants(k)).consultants.map(M=>({id:M.id,userId:M.user.id,name:`${M.firstName} ${M.lastName}`,email:M.user.email,phone:M.user.phone,rating:M.averageRating||0,sessions:M._count?.bookings||0,status:M.isVerified?"approved":"pending",isVerified:M.isVerified,specialization:M.specialization,bio:M.bio,isAvailable:M.isAvailable}));a(I)}catch(k){console.error("Error fetching consultants:",k),c(k.message||"Failed to load consultants"),_.error(e==="ar"?"فشل تحميل المستشارين":"Failed to load consultants")}finally{o(!1)}},b=async(k,O)=>{try{await Je.reviewConsultant(k,O),_.success(e==="ar"?`تم ${O==="approve"?"الموافقة على":"رفض"} المستشار بنجاح`:`Consultant ${O}d successfully`),N()}catch(I){_.error(I.message||(e==="ar"?"فشل تحديث الحالة":"Failed to update status"))}},S=async k=>{try{y.editing?(await Je.updateConsultant(y.editing.id,k),_.success(e==="ar"?"تم تحديث المستشار بنجاح":"Consultant updated successfully")):(await Je.createConsultant(k),_.success(e==="ar"?"تم إنشاء المستشار بنجاح":"Consultant created successfully")),v({visible:!1,editing:null}),w.resetFields(),N()}catch(O){_.error(O.message||(e==="ar"?"فشل حفظ المستشار":"Failed to save consultant"))}},j=async k=>{try{await Je.deleteConsultant(k),_.success(e==="ar"?"تم حذف المستشار بنجاح":"Consultant deleted successfully"),N()}catch(O){_.error(O.message||(e==="ar"?"فشل حذف المستشار":"Failed to delete consultant"))}},C=[{title:e==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",sorter:(k,O)=>k.name.localeCompare(O.name)},{title:e==="ar"?"البريد الإلكتروني":"Email",dataIndex:"email",key:"email"},{title:e==="ar"?"التخصص":"Specialization",dataIndex:"specialization",key:"specialization",render:k=>k||(e==="ar"?"غير محدد":"Not specified")},{title:e==="ar"?"التقييم":"Rating",dataIndex:"rating",key:"rating",render:k=>k>0?s.jsxs(fe,{children:[s.jsx(ra,{disabled:!0,defaultValue:k,allowHalf:!0}),s.jsxs("span",{children:["(",k.toFixed(1),")"]})]}):s.jsx("span",{className:"text-gray-400",children:e==="ar"?"لا يوجد تقييم":"No rating"}),sorter:(k,O)=>k.rating-O.rating},{title:e==="ar"?"الجلسات":"Sessions",dataIndex:"sessions",key:"sessions",sorter:(k,O)=>k.sessions-O.sessions},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:(k,O)=>{const I={approved:"green",pending:"orange",rejected:"red"},M={approved:e==="ar"?"موافق عليه":"Approved",pending:e==="ar"?"قيد المراجعة":"Pending",rejected:e==="ar"?"مرفوض":"Rejected"};return s.jsxs(fe,{children:[s.jsx(le,{color:I[k],children:M[k]}),O.isAvailable&&s.jsx(le,{color:"blue",children:e==="ar"?"متاح":"Available"})]})},filters:[{text:e==="ar"?"موافق عليه":"Approved",value:"approved"},{text:e==="ar"?"قيد المراجعة":"Pending",value:"pending"}],onFilter:(k,O)=>O.status===k},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(k,O)=>s.jsxs(fe,{children:[s.jsx(P,{type:"link",onClick:()=>r(`/admin/consultants/${O.id}`),children:e==="ar"?"عرض التفاصيل":"View Details"}),s.jsx(P,{icon:s.jsx(kr,{}),onClick:async()=>{try{const M=(await Je.getConsultantById(O.id)).consultant;w.setFieldsValue({firstName:M?.firstName||"",lastName:M?.lastName||"",phone:M?.user?.phone||"",academicDegree:M?.academicDegree||"",specialization:M?.specialization||"",bio:M?.bio||"",pricePerSession:M?.pricePerSession||"",isVerified:M?.isVerified||!1,isAvailable:M?.isAvailable||!1}),v({visible:!0,editing:O})}catch{_.error(e==="ar"?"فشل تحميل بيانات المستشار":"Failed to load consultant data")}},children:e==="ar"?"تعديل":"Edit"}),O.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsx(P,{type:"primary",icon:s.jsx(ry,{}),className:"bg-green-600",onClick:()=>b(O.id,"approve"),children:e==="ar"?"موافقة":"Approve"}),s.jsx(P,{danger:!0,icon:s.jsx(Nr,{}),onClick:()=>b(O.id,"reject"),children:e==="ar"?"رفض":"Reject"})]}),s.jsx(P,{danger:!0,onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذا المستشار؟":"Are you sure you want to delete this consultant?")&&j(O.id)},children:e==="ar"?"حذف":"Delete"})]})}];return l&&!i?s.jsx(Gt,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:l,type:"error",showIcon:!0,action:s.jsx(P,{size:"small",onClick:N,children:e==="ar"?"إعادة المحاولة":"Retry"})}):s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"المستشارون":"Consultants"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع المستشارين المسجلين":"Manage all registered consultants"})]}),s.jsxs(fe,{className:"flex-wrap",children:[s.jsx(z,{placeholder:e==="ar"?"بحث بالاسم أو البريد...":"Search by name or email...",prefix:s.jsx(Un,{}),className:"w-64",size:"large",value:u,onChange:k=>d(k.target.value),allowClear:!0}),s.jsxs(q,{value:f,onChange:h,style:{width:150},children:[s.jsx(q.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(q.Option,{value:"approved",children:e==="ar"?"موافق عليه":"Approved"}),s.jsx(q.Option,{value:"pending",children:e==="ar"?"قيد المراجعة":"Pending"})]}),s.jsx(P,{icon:s.jsx(Cr,{}),onClick:N,loading:i,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx(br,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{w.resetFields(),v({visible:!0,editing:null})},children:e==="ar"?"إضافة مستشار جديد":"Add New Consultant"})]})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsx(rt,{columns:C,dataSource:n,rowKey:"id",loading:i,pagination:{pageSize:10,showSizeChanger:!0,showTotal:k=>e==="ar"?`إجمالي ${k} مستشار`:`Total ${k} consultants`},scroll:{x:"max-content"}})})}),s.jsx(He,{title:e==="ar"?"تفاصيل المستشار":"Consultant Details",open:x,onCancel:()=>{m(!1),g(null)},maskClosable:!0,keyboard:!0,footer:null,width:600,destroyOnHidden:!0,className:"modern-modal",children:p&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"الاسم:":"Name:"})," ",p.name]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"البريد الإلكتروني:":"Email:"})," ",p.email]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"رقم الهاتف:":"Phone:"})," ",p.phone||(e==="ar"?"غير متوفر":"Not available")]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"التخصص:":"Specialization:"})," ",p.specialization||(e==="ar"?"غير محدد":"Not specified")]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"التقييم:":"Rating:"}),s.jsx(ra,{disabled:!0,defaultValue:p.rating,allowHalf:!0,className:"ml-2"}),s.jsxs("span",{className:"ml-2",children:["(",p.rating.toFixed(1),")"]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"عدد الجلسات:":"Sessions:"})," ",p.sessions]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"الحالة:":"Status:"}),s.jsx(le,{color:p.status==="approved"?"green":"orange",className:"ml-2",children:p.status==="approved"?e==="ar"?"موافق عليه":"Approved":e==="ar"?"قيد المراجعة":"Pending"})]}),p.bio&&s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"السيرة الذاتية:":"Bio:"}),s.jsx("p",{className:"mt-2 text-gray-600",children:p.bio})]})]})}),s.jsx(He,{title:y.editing?e==="ar"?"تعديل المستشار":"Edit Consultant":e==="ar"?"إضافة مستشار جديد":"Add New Consultant",open:y.visible,onCancel:()=>{v({visible:!1,editing:null}),w.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:700,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:w,layout:"vertical",onFinish:S,children:[!y.editing&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:e==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email"},{type:"email",message:e==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email"}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"password",label:e==="ar"?"كلمة المرور":"Password",rules:[{required:!y.editing,message:e==="ar"?"يرجى إدخال كلمة المرور":"Please enter password"},{min:8,message:e==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters"}],children:s.jsx(z.Password,{})})]}),s.jsx(E.Item,{name:"firstName",label:e==="ar"?"الاسم الأول":"First Name",rules:[{required:!0}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"lastName",label:e==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:s.jsx(z,{})}),s.jsx(E.Item,{name:"academicDegree",label:e==="ar"?"الدرجة العلمية":"Academic Degree",rules:[{required:!0}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"specialization",label:e==="ar"?"التخصص":"Specialization",rules:[{required:!0}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"bio",label:e==="ar"?"السيرة الذاتية":"Bio",children:s.jsx(z.TextArea,{rows:4})}),s.jsx(E.Item,{name:"pricePerSession",label:e==="ar"?"سعر الجلسة":"Price Per Session",rules:[{required:!0}],children:s.jsx(z,{type:"number"})}),y.editing&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"isVerified",valuePropName:"checked",label:e==="ar"?"موافق عليه":"Verified",children:s.jsx(Switch,{checkedChildren:e==="ar"?"نعم":"Yes",unCheckedChildren:e==="ar"?"لا":"No"})}),s.jsx(E.Item,{name:"isAvailable",valuePropName:"checked",label:e==="ar"?"متاح":"Available",children:s.jsx(Switch,{checkedChildren:e==="ar"?"نعم":"Yes",unCheckedChildren:e==="ar"?"لا":"No"})})]}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{v({visible:!1,editing:null}),w.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},QX=()=>{const{t,language:e}=je(),[r,n]=A.useState([]),[a,i]=A.useState(!0),[o,l]=A.useState(null),[c,u]=A.useState("all"),[d,f]=A.useState(null),[h,p]=A.useState(!1),[g,x]=A.useState(!1),[m]=E.useForm();A.useEffect(()=>{y()},[c]);const y=async()=>{try{i(!0),l(null);const j={};c!=="all"&&(j.status=c);const k=(await Je.getBookings(j)).bookings.map(O=>({id:O.id,client:O.client?`${O.client.firstName} ${O.client.lastName}`:e==="ar"?"غير متوفر":"N/A",consultant:O.consultant?`${O.consultant.firstName} ${O.consultant.lastName}`:e==="ar"?"غير متوفر":"N/A",type:O.service?e==="ar"?O.service.titleAr:O.service.title:O.bookingType||(e==="ar"?"غير محدد":"Not specified"),date:O.scheduledAt?de(O.scheduledAt).format("YYYY-MM-DD HH:mm"):e==="ar"?"غير محدد":"Not scheduled",status:O.status,price:O.price,duration:O.duration,notes:O.notes,rating:O.rating,paymentStatus:O.paymentStatus,fullData:O}));n(k)}catch(j){console.error("Error fetching bookings:",j),l(j.message||"Failed to load bookings"),_.error(e==="ar"?"فشل تحميل الجلسات":"Failed to load sessions")}finally{i(!1)}},v=j=>({PENDING:"orange",CONFIRMED:"blue",COMPLETED:"green",CANCELLED:"red",IN_PROGRESS:"purple"})[j]||"default",w=j=>({PENDING:e==="ar"?"قيد الانتظار":"Pending",CONFIRMED:e==="ar"?"مؤكدة":"Confirmed",COMPLETED:e==="ar"?"مكتملة":"Completed",CANCELLED:e==="ar"?"ملغية":"Cancelled",IN_PROGRESS:e==="ar"?"قيد التنفيذ":"In Progress"})[j]||j,N=async j=>{try{const C={...j,scheduledAt:j.scheduledAt?j.scheduledAt.toISOString():null};d?(await Je.updateBooking(d.id,C),_.success(e==="ar"?"تم تحديث الجلسة بنجاح":"Session updated successfully")):(await Je.createBooking(C),_.success(e==="ar"?"تم إنشاء الجلسة بنجاح":"Session created successfully")),x(!1),f(null),m.resetFields(),y()}catch(C){_.error(C.message||(e==="ar"?"فشل حفظ الجلسة":"Failed to save session"))}},b=async j=>{try{await Je.deleteBooking(j),_.success(e==="ar"?"تم حذف الجلسة بنجاح":"Session deleted successfully"),y()}catch(C){_.error(C.message||(e==="ar"?"فشل حذف الجلسة":"Failed to delete session"))}},S=[{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client",sorter:(j,C)=>j.client.localeCompare(C.client)},{title:e==="ar"?"المستشار":"Consultant",dataIndex:"consultant",key:"consultant",sorter:(j,C)=>j.consultant.localeCompare(C.consultant)},{title:e==="ar"?"النوع":"Type",dataIndex:"type",key:"type"},{title:e==="ar"?"التاريخ والوقت":"Date & Time",dataIndex:"date",key:"date",sorter:(j,C)=>new Date(j.date)-new Date(C.date)},{title:e==="ar"?"المبلغ":"Amount",dataIndex:"price",key:"price",render:j=>j?`${j} ${e==="ar"?"ريال":"SAR"}`:"-",sorter:(j,C)=>(j.price||0)-(C.price||0)},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:j=>s.jsx(le,{color:v(j),children:w(j)}),filters:[{text:e==="ar"?"قيد الانتظار":"Pending",value:"PENDING"},{text:e==="ar"?"مؤكدة":"Confirmed",value:"CONFIRMED"},{text:e==="ar"?"مكتملة":"Completed",value:"COMPLETED"},{text:e==="ar"?"ملغية":"Cancelled",value:"CANCELLED"}],onFilter:(j,C)=>C.status===j},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(j,C)=>s.jsxs(fe,{children:[s.jsx(P,{icon:s.jsx(ur,{}),onClick:()=>{f(C),p(!0)},children:e==="ar"?"عرض":"View"}),s.jsx(P,{icon:s.jsx(kr,{}),onClick:()=>{f(C),m.setFieldsValue({status:C.status,scheduledAt:C.date?de(C.date):null,price:C.price,duration:C.duration,consultantNotes:C.notes}),x(!0)},children:e==="ar"?"تعديل":"Edit"}),s.jsx(P,{danger:!0,icon:s.jsx(un,{}),onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذه الجلسة؟":"Are you sure you want to delete this session?")&&b(C.id)},children:e==="ar"?"حذف":"Delete"})]})}];return o&&!a?s.jsx(Gt,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:o,type:"error",showIcon:!0,action:s.jsx(P,{size:"small",onClick:y,children:e==="ar"?"إعادة المحاولة":"Retry"})}):s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الجلسات":"Sessions"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع الجلسات والحجوزات":"Manage all sessions and bookings"})]}),s.jsxs(fe,{className:"flex-wrap",children:[s.jsxs(q,{value:c,onChange:u,placeholder:e==="ar"?"الحالة":"Status",style:{width:150},size:"large",children:[s.jsx(q.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(q.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),s.jsx(q.Option,{value:"CONFIRMED",children:e==="ar"?"مؤكدة":"Confirmed"}),s.jsx(q.Option,{value:"COMPLETED",children:e==="ar"?"مكتملة":"Completed"}),s.jsx(q.Option,{value:"CANCELLED",children:e==="ar"?"ملغية":"Cancelled"})]}),s.jsx(P,{icon:s.jsx(Cr,{}),onClick:y,loading:a,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx(br,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{f(null),m.resetFields(),x(!0)},children:e==="ar"?"إضافة جلسة":"Add Session"})]})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsx(rt,{columns:S,dataSource:r,rowKey:"id",loading:a,pagination:{pageSize:10,showSizeChanger:!0,showTotal:j=>e==="ar"?`إجمالي ${j} جلسة`:`Total ${j} sessions`},scroll:{x:"max-content"}})})}),s.jsx(He,{title:e==="ar"?"تفاصيل الجلسة":"Session Details",open:h,onCancel:()=>{p(!1),f(null)},maskClosable:!0,keyboard:!0,footer:null,width:700,destroyOnHidden:!0,className:"modern-modal",children:d&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"العميل:":"Client:"})," ",d.client]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"المستشار:":"Consultant:"})," ",d.consultant]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"النوع:":"Type:"})," ",d.type]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"التاريخ:":"Date:"})," ",d.date]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"المبلغ:":"Amount:"})," ",d.price?`${d.price} ${e==="ar"?"ريال":"SAR"}`:"-"]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"المدة:":"Duration:"})," ",d.duration?`${d.duration} ${e==="ar"?"دقيقة":"minutes"}`:"-"]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"الحالة:":"Status:"}),s.jsx(le,{color:v(d.status),className:"ml-2",children:w(d.status)})]}),d.rating&&s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"التقييم:":"Rating:"})," ",d.rating,"/5"]})]}),d.notes&&s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"ملاحظات:":"Notes:"}),s.jsx("p",{className:"mt-2 text-gray-600",children:d.notes})]})]})}),s.jsx(He,{title:d?e==="ar"?"تعديل الجلسة":"Edit Session":e==="ar"?"إضافة جلسة جديدة":"Add New Session",open:g,onCancel:()=>{x(!1),f(null),m.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:700,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:m,layout:"vertical",onFinish:N,initialValues:d?{status:d.status,scheduledAt:d.date?de(d.date):null,price:d.price,duration:d.duration,consultantNotes:d.notes}:{status:"PENDING"},children:[!d&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"clientId",label:e==="ar"?"العميل":"Client",rules:[{required:!0}],children:s.jsx(z,{placeholder:e==="ar"?"معرف العميل":"Client ID"})}),s.jsx(E.Item,{name:"consultantId",label:e==="ar"?"المستشار":"Consultant",rules:[{required:!0}],children:s.jsx(z,{placeholder:e==="ar"?"معرف المستشار":"Consultant ID"})}),s.jsx(E.Item,{name:"serviceId",label:e==="ar"?"الخدمة":"Service",children:s.jsx(z,{placeholder:e==="ar"?"معرف الخدمة":"Service ID"})})]}),s.jsx(E.Item,{name:"status",label:e==="ar"?"الحالة":"Status",rules:[{required:!0}],children:s.jsxs(q,{children:[s.jsx(q.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),s.jsx(q.Option,{value:"CONFIRMED",children:e==="ar"?"مؤكدة":"Confirmed"}),s.jsx(q.Option,{value:"COMPLETED",children:e==="ar"?"مكتملة":"Completed"}),s.jsx(q.Option,{value:"CANCELLED",children:e==="ar"?"ملغية":"Cancelled"}),s.jsx(q.Option,{value:"IN_PROGRESS",children:e==="ar"?"قيد التنفيذ":"In Progress"})]})}),s.jsx(E.Item,{name:"scheduledAt",label:e==="ar"?"التاريخ والوقت":"Date & Time",children:s.jsx(ys,{showTime:!0,format:"YYYY-MM-DD HH:mm",className:"w-full"})}),s.jsx(E.Item,{name:"price",label:e==="ar"?"السعر":"Price",children:s.jsx(z,{type:"number"})}),s.jsx(E.Item,{name:"duration",label:e==="ar"?"المدة (بالدقائق)":"Duration (minutes)",children:s.jsx(z,{type:"number"})}),s.jsx(E.Item,{name:"consultantNotes",label:e==="ar"?"ملاحظات المستشار":"Consultant Notes",children:s.jsx(z.TextArea,{rows:4})}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{x(!1),f(null),m.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},R6=({invoice:t,language:e})=>{const r=a=>({CARD:e==="ar"?"بطاقة":"Card",MADA:e==="ar"?"مدى":"Mada",BANK_TRANSFER:e==="ar"?"تحويل بنكي":"Bank Transfer",APPLE_PAY:"Apple Pay",GOOGLE_PAY:"Google Pay"})[a]||a,n=a=>({COMPLETED:e==="ar"?"مكتمل":"Completed",PENDING:e==="ar"?"قيد الانتظار":"Pending",FAILED:e==="ar"?"فشل":"Failed"})[a]||a;return s.jsxs("div",{id:"invoice-content",style:{width:"210mm",minHeight:"297mm",margin:"0 auto",padding:"20mm",backgroundColor:"#fff",fontFamily:"Arial, sans-serif",direction:e==="ar"?"rtl":"ltr"},children:[s.jsx("div",{style:{borderBottom:"3px solid #7a8c66",paddingBottom:"20px",marginBottom:"30px"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("h1",{style:{margin:0,fontSize:"32px",fontWeight:"bold",color:"#7a8c66",background:"linear-gradient(135deg, #7a8c66 0%, #14b8a6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:e==="ar"?"جدوى":"Jadwa"}),s.jsx("p",{style:{margin:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"منصة الاستشارات الإدارية والاقتصادية":"Administrative and Economic Consulting Platform"})]}),s.jsxs("div",{style:{textAlign:e==="ar"?"left":"right"},children:[s.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:"bold",color:"#333"},children:e==="ar"?"فاتورة":"INVOICE"}),s.jsx("p",{style:{margin:"5px 0",color:"#666",fontSize:"12px"},children:e==="ar"?"رقم الفاتورة":"Invoice Number"})]})]})}),s.jsx("div",{style:{marginBottom:"30px"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px",color:"#333"},children:e==="ar"?"معلومات الفاتورة":"Invoice Information"}),s.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"رقم الفاتورة:":"Invoice Number:"}),s.jsx("td",{style:{padding:"5px 0",fontWeight:"bold",fontSize:"14px"},children:t.invoiceNumber})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"تاريخ الإصدار:":"Issue Date:"}),s.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:de(t.date).format("YYYY-MM-DD")})]}),t.paidAt&&s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"تاريخ الدفع:":"Paid Date:"}),s.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:de(t.paidAt).format("YYYY-MM-DD")})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"رقم المعاملة:":"Transaction ID:"}),s.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:t.transactionId||"N/A"})]})]})})]}),s.jsxs("div",{style:{flex:1,textAlign:e==="ar"?"right":"left"},children:[s.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px",color:"#333"},children:e==="ar"?"معلومات العميل":"Client Information"}),s.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"الاسم:":"Name:"}),s.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:t.client?.name||(e==="ar"?"غير محدد":"N/A")})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"البريد الإلكتروني:":"Email:"}),s.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:t.client?.email||(e==="ar"?"غير محدد":"N/A")})]}),t.client?.phone&&s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"الهاتف:":"Phone:"}),s.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:t.client.phone})]})]})})]})]})}),s.jsxs("div",{style:{marginBottom:"30px"},children:[s.jsx("h3",{style:{margin:"0 0 15px 0",fontSize:"16px",color:"#333"},children:e==="ar"?"تفاصيل الخدمة":"Service Details"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[s.jsx("th",{style:{padding:"12px",textAlign:e==="ar"?"right":"left",borderBottom:"2px solid #7a8c66",fontSize:"14px",fontWeight:"bold"},children:e==="ar"?"الخدمة":"Service"}),s.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #7a8c66",fontSize:"14px",fontWeight:"bold"},children:e==="ar"?"المستشار":"Consultant"}),s.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #7a8c66",fontSize:"14px",fontWeight:"bold"},children:e==="ar"?"طريقة الدفع":"Payment Method"}),s.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #7a8c66",fontSize:"14px",fontWeight:"bold"},children:e==="ar"?"المبلغ":"Amount"})]})}),s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #eee",fontSize:"14px"},children:t.service?.title||(e==="ar"?t.service?.titleAr:null)||(e==="ar"?"غير محدد":"N/A")}),s.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #eee",textAlign:"center",fontSize:"14px"},children:t.consultant?.name||(e==="ar"?"غير محدد":"N/A")}),s.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #eee",textAlign:"center",fontSize:"14px"},children:r(t.method)}),s.jsxs("td",{style:{padding:"12px",borderBottom:"1px solid #eee",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:[typeof t.amount=="string"?parseFloat(t.amount).toFixed(2):t.amount?.toFixed(2)||"0.00"," ",t.currency||"SAR"]})]})})]})]}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"30px",marginBottom:"30px"},children:s.jsx("div",{style:{width:"300px"},children:s.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"10px",textAlign:e==="ar"?"right":"left",fontSize:"16px",fontWeight:"bold",borderTop:"2px solid #7a8c66",borderBottom:"2px solid #7a8c66"},children:e==="ar"?"الإجمالي:":"Total:"}),s.jsxs("td",{style:{padding:"10px",textAlign:"center",fontSize:"18px",fontWeight:"bold",color:"#7a8c66",borderTop:"2px solid #7a8c66",borderBottom:"2px solid #7a8c66"},children:[typeof t.amount=="string"?parseFloat(t.amount).toFixed(2):t.amount?.toFixed(2)||"0.00"," ",t.currency||"SAR"]})]})})})})}),s.jsx("div",{style:{marginTop:"40px",padding:"20px",backgroundColor:"#f9f9f9",borderRadius:"8px"},children:s.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#666"},children:[e==="ar"?"حالة الدفع:":"Payment Status:"," ",s.jsx("span",{style:{fontWeight:"bold",color:"#7a8c66"},children:n(t.status)})]})}),s.jsxs("div",{style:{marginTop:"50px",paddingTop:"20px",borderTop:"1px solid #ddd",textAlign:"center",color:"#999",fontSize:"12px"},children:[s.jsx("p",{style:{margin:"5px 0"},children:e==="ar"?"شكراً لاستخدامك منصة جدوى للاستشارات":"Thank you for using Jadwa Consulting Platform"}),s.jsx("p",{style:{margin:"5px 0"},children:e==="ar"?"للاستفسارات: info@jadwa.sa | الهاتف: 9200 00000":"For inquiries: info@jadwa.sa | Phone: 9200 00000"})]})]})},{RangePicker:ZX}=ys,eQ=()=>{const{t,language:e}=je(),[r,n]=A.useState([]),[a,i]=A.useState([]),[o,l]=A.useState(!0),[c,u]=A.useState(null),[d,f]=A.useState("all"),[h,p]=A.useState("all"),[g,x]=A.useState(null),[m,y]=A.useState(""),[v,w]=A.useState(!1),[N]=E.useForm(),[b,S]=A.useState(!1),[j,C]=A.useState(null),[k,O]=A.useState({total:0,completed:0,pending:0,failed:0});A.useEffect(()=>{M()},[d]);const I=W=>{let ee=[...W];if(d!=="all"&&(ee=ee.filter(ue=>ue.status===d)),h!=="all"&&(ee=ee.filter(ue=>ue.method===h)),g&&g.length===2){const ue=de(g[0]).startOf("day"),oe=de(g[1]).endOf("day");ee=ee.filter(_e=>{const Ee=de(_e.date);return Ee.isAfter(ue)&&Ee.isBefore(oe)})}m&&(ee=ee.filter(ue=>ue.client.toLowerCase().includes(m.toLowerCase()))),n(ee)};A.useEffect(()=>{a.length>0&&I(a)},[d,h,g,m]);const M=async()=>{try{l(!0),u(null);const W={};d!=="all"&&(W.status=d);const ue=((await Je.getPayments(W)).payments||[]).map(X=>{const xe=typeof X.amount=="string"||X.amount?parseFloat(X.amount):0;let Ae=e==="ar"?"غير متوفر":"N/A";X.booking?.client&&(Ae=`${X.booking.client.firstName||""} ${X.booking.client.lastName||""}`.trim()||Ae);let Z=e==="ar"?"غير متوفر":"N/A";return X.booking?.consultant&&(Z=`${X.booking.consultant.firstName||""} ${X.booking.consultant.lastName||""}`.trim()||Z),{id:X.id,invoiceNumber:X.invoiceNumber,client:Ae,consultant:Z,amount:isNaN(xe)?0:xe,date:X.createdAt?de(X.createdAt).format("YYYY-MM-DD HH:mm"):"-",paidAt:X.paidAt?de(X.paidAt).format("YYYY-MM-DD HH:mm"):null,status:X.status,method:X.method,transactionId:X.transactionId,currency:X.currency||"SAR",service:X.booking?.service?e==="ar"&&X.booking.service.titleAr||X.booking.service.title:"-"}}),oe=ue.reduce((X,xe)=>{const Ae=typeof xe.amount=="string"?parseFloat(xe.amount):xe.amount||0;return X+(isNaN(Ae)?0:Ae)},0),_e=ue.filter(X=>X.status==="COMPLETED").reduce((X,xe)=>{const Ae=typeof xe.amount=="string"?parseFloat(xe.amount):xe.amount||0;return X+(isNaN(Ae)?0:Ae)},0),Ee=ue.filter(X=>X.status==="PENDING").length,be=ue.filter(X=>X.status==="FAILED").length;O({total:Number(oe.toFixed(2)),completed:Number(_e.toFixed(2)),pending:Ee,failed:be}),i(ue),I(ue)}catch(W){console.error("Error fetching payments:",W),u(W.message||"Failed to load payments"),_.error(e==="ar"?"فشل تحميل المدفوعات":"Failed to load payments")}finally{l(!1)}},T=W=>({COMPLETED:"green",PENDING:"orange",FAILED:"red",REFUNDED:"purple"})[W]||"default",R=W=>({COMPLETED:e==="ar"?"مكتمل":"Completed",PENDING:e==="ar"?"قيد الانتظار":"Pending",FAILED:e==="ar"?"فشل":"Failed",REFUNDED:e==="ar"?"مسترد":"Refunded"})[W]||W,L=W=>({CARD:e==="ar"?"بطاقة":"Card",MADA:e==="ar"?"مدى":"Mada",BANK_TRANSFER:e==="ar"?"تحويل بنكي":"Bank Transfer",APPLE_PAY:"Apple Pay",GOOGLE_PAY:"Google Pay"})[W]||W,B=async()=>{try{const W={};d!=="all"&&(W.status=d),h!=="all"&&(W.method=h);const ee=localStorage.getItem("accessToken")||"",ue=`http://localhost:5000/api/admin/payments/export/csv?${new URLSearchParams(W).toString()}`,oe=await fetch(ue,{headers:{Authorization:`Bearer ${ee}`}});if(!oe.ok)throw new Error("Failed to download CSV");const _e=await oe.blob(),Ee=window.URL.createObjectURL(_e),be=document.createElement("a");be.href=Ee,be.download=`payments-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(be),be.click(),document.body.removeChild(be),window.URL.revokeObjectURL(Ee),_.success(e==="ar"?"تم تصدير ملف CSV بنجاح":"CSV exported successfully")}catch(W){console.error("Export CSV error:",W),_.error(e==="ar"?"فشل تصدير CSV":"Failed to export CSV")}},H=()=>{try{const ee=[[e==="ar"?"رقم الفاتورة":"Invoice #",e==="ar"?"العميل":"Client",e==="ar"?"المستشار":"Consultant",e==="ar"?"المبلغ":"Amount",e==="ar"?"طريقة الدفع":"Payment Method",e==="ar"?"التاريخ":"Date",e==="ar"?"الحالة":"Status"].join(","),...r.map(be=>[be.invoiceNumber||"",`"${be.client}"`,`"${be.consultant}"`,be.amount,be.method,be.date,be.status].join(","))].join(`
`),ue="\uFEFF",oe=new Blob([ue+ee],{type:"text/csv;charset=utf-8;"}),_e=window.URL.createObjectURL(oe),Ee=document.createElement("a");Ee.href=_e,Ee.download=`payments-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),window.URL.revokeObjectURL(_e),_.success(e==="ar"?"تم تصدير ملف Excel بنجاح":"Excel exported successfully")}catch(W){console.error("Export Excel error:",W),_.error(e==="ar"?"فشل تصدير Excel":"Failed to export Excel")}},Q=()=>{_.info(e==="ar"?"ميزة تصدير PDF قيد التطوير":"PDF export feature is under development")},te=W=>{f(W.status||"all"),p(W.method||"all"),x(W.dateRange||null),y(W.client||""),w(!1)},K=()=>{f("all"),p("all"),x(null),y(""),N.resetFields()},ne=[{title:e==="ar"?"رقم الفاتورة":"Invoice #",dataIndex:"invoiceNumber",key:"invoiceNumber"},{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client",sorter:(W,ee)=>W.client.localeCompare(ee.client)},{title:e==="ar"?"المستشار":"Consultant",dataIndex:"consultant",key:"consultant"},{title:e==="ar"?"الخدمة":"Service",dataIndex:"service",key:"service"},{title:e==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:(W,ee)=>{const ue=typeof W=="string"?parseFloat(W):W||0;return`${isNaN(ue)?0:ue.toFixed(2)} ${ee.currency||"SAR"}`},sorter:(W,ee)=>{const ue=typeof W.amount=="string"?parseFloat(W.amount):W.amount||0,oe=typeof ee.amount=="string"?parseFloat(ee.amount):ee.amount||0;return(isNaN(ue)?0:ue)-(isNaN(oe)?0:oe)}},{title:e==="ar"?"طريقة الدفع":"Payment Method",dataIndex:"method",key:"method",render:W=>L(W)},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date",sorter:(W,ee)=>new Date(W.date)-new Date(ee.date)},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:W=>s.jsx(le,{color:T(W),children:R(W)}),filters:[{text:e==="ar"?"مكتمل":"Completed",value:"COMPLETED"},{text:e==="ar"?"قيد الانتظار":"Pending",value:"PENDING"},{text:e==="ar"?"فشل":"Failed",value:"FAILED"}],onFilter:(W,ee)=>ee.status===W},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(W,ee)=>s.jsx(P,{icon:s.jsx(Rr,{}),onClick:async()=>{try{const ue=localStorage.getItem("accessToken")||"",oe=`http://localhost:5000/api/admin/payments/${ee.id}/invoice`,Ee=await(await fetch(oe,{headers:{Authorization:`Bearer ${ue}`}})).json();Ee.success&&Ee.invoice?(C(Ee.invoice),S(!0)):_.error(e==="ar"?"فشل تحميل بيانات الفاتورة":"Failed to load invoice data")}catch{_.error(e==="ar"?"فشل تحميل الفاتورة":"Failed to download invoice")}},disabled:ee.status!=="COMPLETED",children:e==="ar"?"فاتورة":"Invoice"})}];return c&&!o?s.jsx(Gt,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:c,type:"error",showIcon:!0,action:s.jsx(P,{size:"small",onClick:M,children:e==="ar"?"إعادة المحاولة":"Retry"})}):s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"المدفوعات":"Payments"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع المعاملات المالية":"Manage all financial transactions"})]}),s.jsxs(fe,{className:"flex-wrap",children:[s.jsx(P,{icon:s.jsx(aM,{}),onClick:()=>w(!0),children:e==="ar"?"فلترة متقدمة":"Advanced Filter"}),s.jsxs(q,{value:d,onChange:f,style:{width:150},children:[s.jsx(q.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(q.Option,{value:"COMPLETED",children:e==="ar"?"مكتمل":"Completed"}),s.jsx(q.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),s.jsx(q.Option,{value:"FAILED",children:e==="ar"?"فشل":"Failed"})]}),s.jsx(P,{icon:s.jsx(Cr,{}),onClick:M,loading:o,children:e==="ar"?"تحديث":"Refresh"}),s.jsxs(fe.Compact,{children:[s.jsx(P,{icon:s.jsx(J5,{}),onClick:H,children:"Excel"}),s.jsx(P,{icon:s.jsx(Rr,{}),onClick:B,children:"CSV"}),s.jsx(P,{icon:s.jsx(dd,{}),onClick:Q,children:"PDF"})]})]})]}),s.jsxs(ie,{gutter:[16,16],className:"mb-6",children:[s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Be,{title:e==="ar"?"إجمالي المدفوعات":"Total Payments",value:Number(k.total).toFixed(2),prefix:s.jsx(tr,{}),suffix:"SAR",valueStyle:{color:"#7a8c66"}})})}),s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Be,{title:e==="ar"?"المكتملة":"Completed",value:Number(k.completed).toFixed(2),prefix:s.jsx(tr,{}),suffix:"SAR",valueStyle:{color:"#52c41a"}})})}),s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Be,{title:e==="ar"?"قيد الانتظار":"Pending",value:k.pending,valueStyle:{color:"#faad14"}})})}),s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Be,{title:e==="ar"?"فاشلة":"Failed",value:k.failed,valueStyle:{color:"#ff4d4f"}})})})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsx(rt,{columns:ne,dataSource:r,rowKey:"id",loading:o,pagination:{pageSize:10,showSizeChanger:!0,showTotal:W=>e==="ar"?`إجمالي ${W} دفعة`:`Total ${W} payments`},scroll:{x:"max-content"}})})}),s.jsx(He,{title:e==="ar"?"فلترة متقدمة":"Advanced Filter",open:v,onCancel:()=>w(!1),footer:null,width:600,children:s.jsxs(E,{form:N,layout:"vertical",onFinish:te,initialValues:{status:d,method:h,dateRange:g,client:m},children:[s.jsx(E.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:s.jsxs(q,{placeholder:e==="ar"?"اختر الحالة":"Select status",children:[s.jsx(q.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(q.Option,{value:"COMPLETED",children:e==="ar"?"مكتمل":"Completed"}),s.jsx(q.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),s.jsx(q.Option,{value:"FAILED",children:e==="ar"?"فشل":"Failed"})]})}),s.jsx(E.Item,{name:"method",label:e==="ar"?"طريقة الدفع":"Payment Method",children:s.jsxs(q,{placeholder:e==="ar"?"اختر طريقة الدفع":"Select payment method",children:[s.jsx(q.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(q.Option,{value:"CARD",children:e==="ar"?"بطاقة":"Card"}),s.jsx(q.Option,{value:"MADA",children:e==="ar"?"مدى":"Mada"}),s.jsx(q.Option,{value:"BANK_TRANSFER",children:e==="ar"?"تحويل بنكي":"Bank Transfer"})]})}),s.jsx(E.Item,{name:"dateRange",label:e==="ar"?"نطاق التاريخ":"Date Range",children:s.jsx(ZX,{style:{width:"100%"}})}),s.jsx(E.Item,{name:"client",label:e==="ar"?"اسم العميل":"Client Name",children:s.jsx(z,{placeholder:e==="ar"?"ابحث عن عميل":"Search client",allowClear:!0})}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",children:e==="ar"?"تطبيق":"Apply"}),s.jsx(P,{onClick:K,children:e==="ar"?"إعادة تعيين":"Reset"}),s.jsx(P,{onClick:()=>w(!1),children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),s.jsxs(He,{title:e==="ar"?"فاتورة":"Invoice",open:b,onCancel:()=>{S(!1),C(null)},footer:[s.jsx(P,{onClick:()=>{S(!1),C(null)},children:e==="ar"?"إغلاق":"Close"},"close"),s.jsx(P,{type:"primary",icon:s.jsx(dd,{}),onClick:()=>{if(!j)return;const W=window.open("","_blank");if(!W){_.error(e==="ar"?"يرجى السماح بالنوافذ المنبثقة لتحميل الفاتورة":"Please allow popups to download invoice");return}W.document.write(`
                <!DOCTYPE html>
                <html>
                  <head>
                    <title>Invoice ${j.invoiceNumber}</title>
                    <style>
                      @media print {
                        @page {
                          size: A4;
                          margin: 0;
                        }
                        body {
                          margin: 0;
                          padding: 0;
                        }
                      }
                    </style>
                  </head>
                  <body>
                    ${document.getElementById("invoice-print-content")?.innerHTML||""}
                  </body>
                </html>
              `),W.document.close(),setTimeout(()=>{W.print(),_.success(e==="ar"?"جاري تحميل الفاتورة...":"Downloading invoice...")},250)},className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"تحميل PDF":"Download PDF"},"download")],width:900,style:{top:20},children:[s.jsx("div",{id:"invoice-print-content",style:{display:"none"},children:j&&s.jsx(R6,{invoice:j,language:e})}),s.jsx("div",{style:{maxHeight:"70vh",overflow:"auto"},children:j&&s.jsx(R6,{invoice:j,language:e})})]})]})},{TextArea:_i}=z,tQ=()=>{const{t,language:e}=je(),[r,n]=A.useState([]),[a,i]=A.useState([]),[o,l]=A.useState({pages:!1,articles:!1}),[c,u]=A.useState(null),[d,f]=A.useState(!1),[h,p]=A.useState(!1),[g,x]=A.useState(null),[m]=E.useForm(),[y]=E.useForm();A.useEffect(()=>{v(),w()},[]);const v=async()=>{try{l(R=>({...R,pages:!0})),u(null);const T=(await _l.getPages({isPublished:!1})).pages.map(R=>({id:R.id,title:e==="ar"&&R.titleAr||R.title,slug:R.slug,status:R.isPublished?"published":"draft",isPublished:R.isPublished,order:R.order}));n(T)}catch(M){console.error("Error fetching pages:",M),u(M.message||"Failed to load pages"),_.error(e==="ar"?"فشل تحميل الصفحات":"Failed to load pages")}finally{l(M=>({...M,pages:!1}))}},w=async()=>{try{l(R=>({...R,articles:!0})),u(null);const T=(await cr.getArticles({status:"all"})).articles.map(R=>({id:R.id,title:e==="ar"&&R.titleAr||R.title,date:R.publishedAt?de(R.publishedAt).format("YYYY-MM-DD"):de(R.createdAt).format("YYYY-MM-DD"),status:R.status,views:R.views||0,category:R.category}));i(T)}catch(M){console.error("Error fetching articles:",M),u(M.message||"Failed to load articles"),_.error(e==="ar"?"فشل تحميل المقالات":"Failed to load articles")}finally{l(M=>({...M,articles:!1}))}},N=async M=>{try{g?(await _l.updatePage(g.id,M),_.success(e==="ar"?"تم تحديث الصفحة بنجاح":"Page updated successfully")):(await _l.createPage(M),_.success(e==="ar"?"تم إنشاء الصفحة بنجاح":"Page created successfully")),f(!1),x(null),m.resetFields(),v()}catch(T){_.error(T.message||(e==="ar"?"فشل حفظ الصفحة":"Failed to save page"))}},b=async M=>{try{M.tags&&typeof M.tags=="string"&&(M.tags=M.tags.split(",").map(T=>T.trim()).filter(Boolean)),g?(await cr.updateArticle(g.id,M),_.success(e==="ar"?"تم تحديث المقال بنجاح":"Article updated successfully")):(await cr.createArticle(M),_.success(e==="ar"?"تم إنشاء المقال بنجاح":"Article created successfully")),p(!1),x(null),y.resetFields(),w()}catch(T){_.error(T.message||(e==="ar"?"فشل حفظ المقال":"Failed to save article"))}},S=async M=>{try{await cr.publishArticle(M),_.success(e==="ar"?"تم نشر المقال بنجاح":"Article published successfully"),w()}catch(T){_.error(T.message||(e==="ar"?"فشل نشر المقال":"Failed to publish article"))}},j=async M=>{try{await _l.deletePage(M),_.success(e==="ar"?"تم حذف الصفحة بنجاح":"Page deleted successfully"),v()}catch(T){_.error(T.message||(e==="ar"?"فشل حذف الصفحة":"Failed to delete page"))}},C=async M=>{try{await cr.deleteArticle(M),_.success(e==="ar"?"تم حذف المقال بنجاح":"Article deleted successfully"),w()}catch(T){_.error(T.message||(e==="ar"?"فشل حذف المقال":"Failed to delete article"))}},k=[{title:e==="ar"?"العنوان":"Title",dataIndex:"title",key:"title",sorter:(M,T)=>M.title.localeCompare(T.title)},{title:e==="ar"?"الرابط":"Slug",dataIndex:"slug",key:"slug"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:M=>s.jsx(le,{color:M==="published"?"green":"orange",children:M==="published"?e==="ar"?"منشور":"Published":e==="ar"?"مسودة":"Draft"}),filters:[{text:e==="ar"?"منشور":"Published",value:"published"},{text:e==="ar"?"مسودة":"Draft",value:"draft"}],onFilter:(M,T)=>T.status===M},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(M,T)=>s.jsxs(fe,{children:[s.jsx(P,{icon:s.jsx(kr,{}),onClick:()=>{x(T),f(!0)},children:e==="ar"?"تعديل":"Edit"}),s.jsx(P,{danger:!0,icon:s.jsx(un,{}),onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذه الصفحة؟":"Are you sure you want to delete this page?")&&j(T.id)},children:e==="ar"?"حذف":"Delete"})]})}],O=[{title:e==="ar"?"العنوان":"Title",dataIndex:"title",key:"title",sorter:(M,T)=>M.title.localeCompare(T.title)},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date",sorter:(M,T)=>new Date(M.date)-new Date(T.date)},{title:e==="ar"?"الفئة":"Category",dataIndex:"category",key:"category"},{title:e==="ar"?"المشاهدات":"Views",dataIndex:"views",key:"views",sorter:(M,T)=>M.views-T.views},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:M=>{const T={PUBLISHED:"green",DRAFT:"orange",ARCHIVED:"gray"},R={PUBLISHED:e==="ar"?"منشور":"Published",DRAFT:e==="ar"?"مسودة":"Draft",ARCHIVED:e==="ar"?"مؤرشف":"Archived"};return s.jsx(le,{color:T[M],children:R[M]})}},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(M,T)=>s.jsxs(fe,{children:[T.status!=="PUBLISHED"&&s.jsx(P,{type:"primary",icon:s.jsx(vt,{}),className:"bg-green-600",onClick:()=>S(T.id),children:e==="ar"?"نشر":"Publish"}),s.jsx(P,{icon:s.jsx(kr,{}),onClick:()=>{x(T),p(!0)},children:e==="ar"?"تعديل":"Edit"}),s.jsx(P,{danger:!0,icon:s.jsx(un,{}),onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذا المقال؟":"Are you sure you want to delete this article?")&&C(T.id)},children:e==="ar"?"حذف":"Delete"})]})}],I=[{key:"pages",label:e==="ar"?"الصفحات":"Pages",children:s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[s.jsx(P,{icon:s.jsx(Cr,{}),onClick:v,loading:o.pages,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx(br,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{x(null),m.resetFields(),f(!0)},children:e==="ar"?"إضافة صفحة":"Add Page"})]}),s.jsx(rt,{columns:k,dataSource:r,rowKey:"id",loading:o.pages,pagination:{pageSize:10}})]})},{key:"blog",label:e==="ar"?"المدونة":"Blog",children:s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[s.jsx(P,{icon:s.jsx(Cr,{}),onClick:w,loading:o.articles,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx(br,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{x(null),y.resetFields(),p(!0)},children:e==="ar"?"إضافة مقال":"Add Post"})]}),s.jsx(rt,{columns:O,dataSource:a,rowKey:"id",loading:o.articles,pagination:{pageSize:10}})]})}];return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:"CMS"}),s.jsx("p",{className:"text-gray-500",children:e==="ar"?"إدارة المحتوى والصفحات والمقالات":"Manage content, pages, and articles"})]}),c&&s.jsx(Gt,{message:e==="ar"?"خطأ":"Error",description:c,type:"error",closable:!0,onClose:()=>u(null),className:"mb-4"}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(vs,{items:I})}),s.jsx(He,{title:g?e==="ar"?"تعديل الصفحة":"Edit Page":e==="ar"?"إضافة صفحة":"Add Page",open:d,onCancel:()=>{f(!1),x(null),m.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:800,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:m,layout:"vertical",onFinish:N,initialValues:g||{isPublished:!1,order:0},children:[s.jsx(E.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:s.jsx(z,{})}),s.jsx(E.Item,{name:"slug",label:"Slug",rules:[{required:!0}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"content",label:e==="ar"?"المحتوى (إنجليزي)":"Content (English)",children:s.jsx(_i,{rows:6})}),s.jsx(E.Item,{name:"contentAr",label:e==="ar"?"المحتوى (عربي)":"Content (Arabic)",children:s.jsx(_i,{rows:6})}),s.jsx(E.Item,{name:"order",label:e==="ar"?"الترتيب":"Order",children:s.jsx(Qn,{min:0})}),s.jsx(E.Item,{name:"isPublished",valuePropName:"checked",children:s.jsx(Nn,{checkedChildren:e==="ar"?"منشور":"Published",unCheckedChildren:e==="ar"?"مسودة":"Draft"})}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{f(!1),x(null),m.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),s.jsx(He,{title:g?e==="ar"?"تعديل المقال":"Edit Article":e==="ar"?"إضافة مقال":"Add Article",open:h,onCancel:()=>{p(!1),x(null),y.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:800,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:y,layout:"vertical",onFinish:b,initialValues:g?{...g,tags:g.tags?typeof g.tags=="string"?JSON.parse(g.tags).join(", "):g.tags.join(", "):""}:{status:"DRAFT"},children:[s.jsx(E.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0}],children:s.jsx(z,{})}),s.jsx(E.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:s.jsx(z,{})}),s.jsx(E.Item,{name:"content",label:e==="ar"?"المحتوى (إنجليزي)":"Content (English)",children:s.jsx(_i,{rows:8})}),s.jsx(E.Item,{name:"contentAr",label:e==="ar"?"المحتوى (عربي)":"Content (Arabic)",children:s.jsx(_i,{rows:8})}),s.jsx(E.Item,{name:"excerpt",label:e==="ar"?"الملخص (إنجليزي)":"Excerpt (English)",children:s.jsx(_i,{rows:3})}),s.jsx(E.Item,{name:"excerptAr",label:e==="ar"?"الملخص (عربي)":"Excerpt (Arabic)",children:s.jsx(_i,{rows:3})}),s.jsx(E.Item,{name:"category",label:e==="ar"?"الفئة":"Category",children:s.jsx(z,{placeholder:e==="ar"?"الفئة":"Category"})}),s.jsx(E.Item,{name:"featuredImage",label:e==="ar"?"صورة مميزة":"Featured Image",children:s.jsx(z,{placeholder:e==="ar"?"رابط الصورة":"Image URL"})}),s.jsx(E.Item,{name:"tags",label:e==="ar"?"العلامات":"Tags",children:s.jsx(z,{placeholder:e==="ar"?"علامات مفصولة بفواصل":"Tags separated by commas"})}),s.jsx(E.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:s.jsxs(q,{children:[s.jsx(q.Option,{value:"DRAFT",children:e==="ar"?"مسودة":"Draft"}),s.jsx(q.Option,{value:"PUBLISHED",children:e==="ar"?"منشور":"Published"})]})}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{p(!1),x(null),y.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{TextArea:$u}=z,{RangePicker:$se}=ys,rQ=()=>{const{t,language:e}=je(),r=nt(),n=wi(),[a,i]=A.useState([]),[o,l]=A.useState(!1),[c,u]=A.useState(null),[d,f]=A.useState(""),[h,p]=A.useState("all"),[g,x]=A.useState("all"),[m,y]=A.useState(!1),[v,w]=A.useState(!1),[N,b]=A.useState(null),[S,j]=A.useState(null),[C]=E.useForm(),[k,O]=A.useState({total:0,published:0,draft:0,views:0});A.useEffect(()=>{I()},[d,h,g]),A.useEffect(()=>{n.pathname==="/admin/articles"&&I()},[n.pathname]),A.useEffect(()=>{M()},[a]);const I=async()=>{try{l(!0),u(null);const K={};h&&h!=="all"&&(K.status=h),d&&(K.search=d),g&&g!=="all"&&(K.category=g);const ne=await cr.getArticles(K),W="http://localhost:5000/api".replace("/api","")||"http://localhost:5000",ee=ne.articles.map(ue=>{let oe=ue.featuredImage;return oe&&(/^https?:\/\//.test(oe)?(oe.includes(`${W}${W}`)||oe.match(/http:\/\/localhost:5000/g)?.length>1)&&(oe=oe.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),oe=`http://localhost:5000/${oe}`):oe=oe.startsWith("/")?`${W}${oe}`:`${W}/${oe}`),{...ue,key:ue.id,title:e==="ar"&&ue.titleAr||ue.title,date:ue.publishedAt?de(ue.publishedAt).format("YYYY-MM-DD"):de(ue.createdAt).format("YYYY-MM-DD"),featuredImage:oe}});i(ee)}catch(K){console.error("Error fetching articles:",K),u(K.message||"Failed to load articles"),_.error(e==="ar"?"فشل تحميل المقالات":"Failed to load articles")}finally{l(!1)}},M=()=>{const K=a.length,ne=a.filter(ue=>ue.status==="PUBLISHED").length,W=a.filter(ue=>ue.status==="DRAFT").length,ee=a.reduce((ue,oe)=>ue+(oe.views||0),0);O({total:K,published:ne,draft:W,views:ee})},T=async K=>{try{K.tags&&typeof K.tags=="string"&&(K.tags=K.tags.split(",").map(ne=>ne.trim()).filter(Boolean)),N?(await cr.updateArticle(N.id,K),_.success(e==="ar"?"تم تحديث المقال بنجاح":"Article updated successfully")):(await cr.createArticle(K),_.success(e==="ar"?"تم إنشاء المقال بنجاح":"Article created successfully")),y(!1),b(null),C.resetFields(),I()}catch(ne){_.error(ne.message||(e==="ar"?"فشل حفظ المقال":"Failed to save article"))}},R=async K=>{try{await cr.publishArticle(K),_.success(e==="ar"?"تم نشر المقال بنجاح":"Article published successfully"),I()}catch(ne){_.error(ne.message||(e==="ar"?"فشل نشر المقال":"Failed to publish article"))}},L=async K=>{try{await cr.deleteArticle(K),_.success(e==="ar"?"تم حذف المقال بنجاح":"Article deleted successfully"),I()}catch(ne){_.error(ne.message||(e==="ar"?"فشل حذف المقال":"Failed to delete article"))}},B=K=>{j(K),w(!0)},H=[...new Set(a.map(K=>K.category).filter(Boolean))],Q=[{title:e==="ar"?"المقال":"Article",key:"article",width:300,render:(K,ne)=>s.jsxs("div",{className:"flex items-center gap-3",children:[ne.featuredImage?s.jsx(Ar,{src:ne.featuredImage,alt:ne.title,width:60,height:60,className:"rounded-lg object-cover",preview:!1}):s.jsx("div",{className:"w-15 h-15 bg-gradient-to-br from-olive-green-400 to-turquoise-400 rounded-lg flex items-center justify-center",children:s.jsx(lo,{className:"text-white text-xl"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-gray-900 truncate",children:ne.title}),ne.category&&s.jsx(le,{color:"blue",className:"mt-1",children:ne.category})]})]})},{title:e==="ar"?"المؤلف":"Author",dataIndex:["author","email"],key:"author",render:K=>K||"-"},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date",sorter:(K,ne)=>new Date(K.date)-new Date(ne.date)},{title:e==="ar"?"المشاهدات":"Views",dataIndex:"views",key:"views",sorter:(K,ne)=>(K.views||0)-(ne.views||0),render:K=>s.jsx(Ia,{count:K||0,showZero:!0,style:{backgroundColor:"#52c41a"}})},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:K=>{const ne={PUBLISHED:"green",DRAFT:"orange",ARCHIVED:"gray"},W={PUBLISHED:e==="ar"?"منشور":"Published",DRAFT:e==="ar"?"مسودة":"Draft",ARCHIVED:e==="ar"?"مؤرشف":"Archived"};return s.jsx(le,{color:ne[K],children:W[K]})},filters:[{text:e==="ar"?"منشور":"Published",value:"PUBLISHED"},{text:e==="ar"?"مسودة":"Draft",value:"DRAFT"},{text:e==="ar"?"مؤرشف":"Archived",value:"ARCHIVED"}],onFilter:(K,ne)=>ne.status===K},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",fixed:"right",width:200,render:(K,ne)=>s.jsxs(fe,{size:"small",children:[s.jsx(nn,{title:e==="ar"?"معاينة":"Preview",children:s.jsx(P,{icon:s.jsx(ur,{}),size:"small",onClick:()=>B(ne)})}),s.jsx(nn,{title:e==="ar"?"تعديل":"Edit",children:s.jsx(P,{icon:s.jsx(kr,{}),size:"small",onClick:()=>r(`/admin/articles/edit/${ne.id}`)})}),ne.status!=="PUBLISHED"&&s.jsx(nn,{title:e==="ar"?"نشر":"Publish",children:s.jsx(Ma,{title:e==="ar"?"هل أنت متأكد من نشر هذا المقال؟":"Are you sure to publish this article?",onConfirm:()=>R(ne.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:s.jsx(P,{type:"primary",icon:s.jsx(vt,{}),size:"small",className:"bg-green-600"})})}),s.jsx(nn,{title:e==="ar"?"حذف":"Delete",children:s.jsx(Ma,{title:e==="ar"?"هل أنت متأكد من حذف هذا المقال؟":"Are you sure to delete this article?",onConfirm:()=>L(ne.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:s.jsx(P,{danger:!0,icon:s.jsx(un,{}),size:"small"})})})]})}],te=K=>e==="ar"?`إجمالي ${K} مقال`:`Total ${K} articles`;return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"المقالات":"Articles"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع المقالات والمدونة":"Manage all articles and blog posts"})]}),s.jsxs(fe,{className:"flex-wrap",children:[s.jsx(P,{icon:s.jsx(Cr,{}),onClick:I,loading:o,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{icon:s.jsx(B5,{}),children:e==="ar"?"تصدير":"Export"}),s.jsx(P,{type:"primary",icon:s.jsx(br,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-lg",size:"large",onClick:()=>r("/admin/articles/new"),children:e==="ar"?"إضافة مقال جديد":"Add New Article"})]})]}),s.jsxs(ie,{gutter:[16,16],className:"mb-6",children:[s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"إجمالي المقالات":"Total Articles",value:k.total,prefix:s.jsx(lo,{className:"text-olive-green-600"}),valueStyle:{color:"#7a8c66"}})})}),s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"منشورة":"Published",value:k.published,prefix:s.jsx(vt,{className:"text-green-600"}),valueStyle:{color:"#52c41a"}})})}),s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"مسودات":"Drafts",value:k.draft,prefix:s.jsx(Z5,{className:"text-orange-600"}),valueStyle:{color:"#faad14"}})})}),s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"إجمالي المشاهدات":"Total Views",value:k.views,prefix:s.jsx(ur,{className:"text-blue-600"}),valueStyle:{color:"#1890ff"}})})})]}),s.jsx(V,{className:"glass-card shadow-professional-lg rounded-xl border-0 mb-6",children:s.jsxs(ie,{gutter:[16,16],children:[s.jsx($,{xs:24,sm:12,md:8,children:s.jsx(z,{placeholder:e==="ar"?"ابحث في المقالات...":"Search articles...",prefix:s.jsx(Un,{}),value:d,onChange:K=>f(K.target.value),allowClear:!0,size:"large"})}),s.jsx($,{xs:24,sm:12,md:4,children:s.jsxs(q,{value:h,onChange:p,style:{width:"100%"},size:"large",children:[s.jsx(q.Option,{value:"all",children:e==="ar"?"جميع الحالات":"All Status"}),s.jsx(q.Option,{value:"PUBLISHED",children:e==="ar"?"منشور":"Published"}),s.jsx(q.Option,{value:"DRAFT",children:e==="ar"?"مسودة":"Draft"}),s.jsx(q.Option,{value:"ARCHIVED",children:e==="ar"?"مؤرشف":"Archived"})]})}),s.jsx($,{xs:24,sm:12,md:4,children:s.jsxs(q,{value:g,onChange:x,style:{width:"100%"},size:"large",children:[s.jsx(q.Option,{value:"all",children:e==="ar"?"جميع الفئات":"All Categories"}),H.map(K=>s.jsx(q.Option,{value:K,children:K},K))]})})]})}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:Q,dataSource:a,rowKey:"id",loading:o,pagination:{pageSize:10,showSizeChanger:!0,showTotal:te,showQuickJumper:!0},scroll:{x:1200}})}),s.jsx(He,{title:N?e==="ar"?"تعديل المقال":"Edit Article":e==="ar"?"إضافة مقال جديد":"Add New Article",open:m,onCancel:()=>{y(!1),b(null),C.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:900,destroyOnHidden:!0,className:"modern-modal article-modal",children:s.jsxs(E,{form:C,layout:"vertical",onFinish:T,initialValues:N||{status:"DRAFT"},children:[s.jsxs(ie,{gutter:16,children:[s.jsx($,{span:12,children:s.jsx(E.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0}],children:s.jsx(z,{placeholder:e==="ar"?"العنوان بالإنجليزية":"Title in English"})})}),s.jsx($,{span:12,children:s.jsx(E.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:s.jsx(z,{placeholder:e==="ar"?"العنوان بالعربية":"Title in Arabic"})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{span:12,children:s.jsx(E.Item,{name:"content",label:e==="ar"?"المحتوى (إنجليزي)":"Content (English)",children:s.jsx($u,{rows:8,placeholder:e==="ar"?"المحتوى بالإنجليزية":"Content in English"})})}),s.jsx($,{span:12,children:s.jsx(E.Item,{name:"contentAr",label:e==="ar"?"المحتوى (عربي)":"Content (Arabic)",children:s.jsx($u,{rows:8,placeholder:e==="ar"?"المحتوى بالعربية":"Content in Arabic"})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{span:12,children:s.jsx(E.Item,{name:"excerpt",label:e==="ar"?"الملخص (إنجليزي)":"Excerpt (English)",children:s.jsx($u,{rows:3,placeholder:e==="ar"?"ملخص المقال بالإنجليزية":"Article excerpt in English"})})}),s.jsx($,{span:12,children:s.jsx(E.Item,{name:"excerptAr",label:e==="ar"?"الملخص (عربي)":"Excerpt (Arabic)",children:s.jsx($u,{rows:3,placeholder:e==="ar"?"ملخص المقال بالعربية":"Article excerpt in Arabic"})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{span:8,children:s.jsx(E.Item,{name:"category",label:e==="ar"?"الفئة":"Category",children:s.jsx(z,{placeholder:e==="ar"?"الفئة":"Category"})})}),s.jsx($,{span:8,children:s.jsx(E.Item,{name:"featuredImage",label:e==="ar"?"صورة مميزة":"Featured Image",children:s.jsx(z,{placeholder:e==="ar"?"رابط الصورة":"Image URL"})})}),s.jsx($,{span:8,children:s.jsx(E.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:s.jsxs(q,{children:[s.jsx(q.Option,{value:"DRAFT",children:e==="ar"?"مسودة":"Draft"}),s.jsx(q.Option,{value:"PUBLISHED",children:e==="ar"?"منشور":"Published"}),s.jsx(q.Option,{value:"ARCHIVED",children:e==="ar"?"مؤرشف":"Archived"})]})})})]}),s.jsx(E.Item,{name:"tags",label:e==="ar"?"العلامات":"Tags",children:s.jsx(z,{placeholder:e==="ar"?"علامات مفصولة بفواصل":"Tags separated by commas"})}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{y(!1),b(null),C.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),s.jsx(He,{title:e==="ar"?"معاينة المقال":"Article Preview",open:v,onCancel:()=>{w(!1),j(null)},maskClosable:!0,keyboard:!0,footer:null,width:800,destroyOnHidden:!0,className:"modern-modal",children:S&&s.jsxs("div",{children:[S.featuredImage&&s.jsx(Ar,{src:S.featuredImage,alt:S.title,className:"w-full mb-4 rounded-lg"}),s.jsx("h2",{className:"text-2xl font-bold mb-4",children:S.title}),s.jsx("div",{dangerouslySetInnerHTML:{__html:S.content||S.contentAr||""}})]})})]})},{TextArea:_6}=z,nQ=()=>{const{t,language:e}=je(),[r,n]=A.useState([]),[a,i]=A.useState(!1),[o,l]=A.useState(null),[c,u]=A.useState(""),[d,f]=A.useState(!1),[h,p]=A.useState(null),[g,x]=A.useState(null),[m]=E.useForm(),[y,v]=A.useState({total:0,active:0,revenue:0});A.useEffect(()=>{w()},[c]),A.useEffect(()=>{N()},[r]);const w=async()=>{try{i(!0),l(null);const k={};c&&(k.search=c);const I=(await rs.getServices(k)).services.map(M=>({...M,key:M.id,title:e==="ar"&&M.titleAr||M.title}));n(I)}catch(k){console.error("Error fetching services:",k),l(k.message||"Failed to load services"),_.error(e==="ar"?"فشل تحميل الخدمات":"Failed to load services")}finally{i(!1)}},N=()=>{const k=r.length,O=r.filter(M=>M.status==="ACTIVE").length,I=r.reduce((M,T)=>M+(parseFloat(T.price)||0),0);v({total:k,active:O,revenue:I})},b=async k=>{try{const O=new FormData;O.append("file",k),O.append("ownerType","SERVICE"),O.append("ownerId",h?.id||"new");const I=await Hr.uploadFile(O);if(I.file&&I.file.fileUrl)x(I.file.fileUrl),m.setFieldsValue({image:I.file.fileUrl}),_.success(e==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully");else throw new Error("File upload failed")}catch(O){_.error(O.message||(e==="ar"?"فشل رفع الصورة":"Failed to upload image"))}return!1},S=async k=>{try{let O=g||h?.image;k.image&&typeof k.image=="string"&&(O=k.image);const I={...k,price:parseFloat(k.price),order:parseInt(k.order||0),image:O};delete I.duration,h?(await rs.updateService(h.id,I),_.success(e==="ar"?"تم تحديث الخدمة بنجاح":"Service updated successfully")):(await rs.createService(I),_.success(e==="ar"?"تم إنشاء الخدمة بنجاح":"Service created successfully")),f(!1),p(null),x(null),m.resetFields(),w()}catch(O){_.error(O.message||(e==="ar"?"فشل حفظ الخدمة":"Failed to save service"))}},j=async k=>{try{await rs.deleteService(k),_.success(e==="ar"?"تم حذف الخدمة بنجاح":"Service deleted successfully"),w()}catch(O){_.error(O.message||(e==="ar"?"فشل حذف الخدمة":"Failed to delete service"))}},C=[{title:e==="ar"?"الخدمة":"Service",key:"service",width:300,render:(k,O)=>s.jsxs("div",{className:"flex items-center gap-3",children:[O.icon?s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-olive-green-400 to-turquoise-400 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xl",children:O.icon})}):s.jsx(ui,{className:"text-2xl text-olive-green-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:O.title}),O.category&&s.jsx(le,{color:"blue",className:"mt-1",children:O.category})]})]})},{title:e==="ar"?"السعر":"Price",dataIndex:"price",key:"price",render:k=>k?`${k} ${e==="ar"?"ريال":"SAR"}`:"-",sorter:(k,O)=>(k.price||0)-(O.price||0)},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:k=>s.jsx(le,{color:k==="ACTIVE"?"green":"red",children:k==="ACTIVE"?e==="ar"?"نشط":"Active":e==="ar"?"غير نشط":"Inactive"})},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",fixed:"right",width:150,render:(k,O)=>s.jsxs(fe,{size:"small",children:[s.jsx(nn,{title:e==="ar"?"تعديل":"Edit",children:s.jsx(P,{icon:s.jsx(kr,{}),size:"small",onClick:()=>{p(O),x(O.image),m.setFieldsValue(O),f(!0)}})}),s.jsx(nn,{title:e==="ar"?"حذف":"Delete",children:s.jsx(Ma,{title:e==="ar"?"هل أنت متأكد من حذف هذه الخدمة؟":"Are you sure to delete this service?",onConfirm:()=>j(O.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:s.jsx(P,{danger:!0,icon:s.jsx(un,{}),size:"small"})})})]})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الخدمات":"Services"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع الخدمات المتاحة":"Manage all available services"})]}),s.jsxs(fe,{className:"flex-wrap",children:[s.jsx(z,{placeholder:e==="ar"?"ابحث في الخدمات...":"Search services...",prefix:s.jsx(Un,{}),value:c,onChange:k=>u(k.target.value),allowClear:!0,style:{width:250}}),s.jsx(P,{icon:s.jsx(Cr,{}),onClick:w,loading:a,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx(br,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-lg",size:"large",onClick:()=>{p(null),x(null),m.resetFields(),f(!0)},children:e==="ar"?"إضافة خدمة جديدة":"Add New Service"})]})]}),s.jsxs(ie,{gutter:[16,16],className:"mb-6 relative z-10",children:[s.jsx($,{xs:24,sm:12,md:8,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"إجمالي الخدمات":"Total Services",value:y.total,prefix:s.jsx(ui,{className:"text-olive-green-600"}),valueStyle:{color:"#7a8c66"}})})}),s.jsx($,{xs:24,sm:12,md:8,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"نشطة":"Active",value:y.active,prefix:s.jsx(Cn,{className:"text-green-600"}),valueStyle:{color:"#52c41a"}})})}),s.jsx($,{xs:24,sm:12,md:8,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"إجمالي الإيرادات":"Total Revenue",value:y.revenue,prefix:s.jsx(tr,{className:"text-blue-600"}),suffix:"SAR",valueStyle:{color:"#1890ff"}})})})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:C,dataSource:r,rowKey:"id",loading:a,pagination:{pageSize:10,showSizeChanger:!0,showTotal:k=>e==="ar"?`إجمالي ${k} خدمة`:`Total ${k} services`},scroll:{x:1e3}})}),s.jsx(He,{title:h?e==="ar"?"تعديل الخدمة":"Edit Service":e==="ar"?"إضافة خدمة جديدة":"Add New Service",open:d,onCancel:()=>{f(!1),p(null),x(null),m.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:700,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:m,layout:"vertical",onFinish:S,initialValues:h||{status:"ACTIVE"},children:[s.jsxs(ie,{gutter:16,children:[s.jsx($,{span:12,children:s.jsx(E.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0}],children:s.jsx(z,{})})}),s.jsx($,{span:12,children:s.jsx(E.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:s.jsx(z,{})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{span:12,children:s.jsx(E.Item,{name:"description",label:e==="ar"?"الوصف (إنجليزي)":"Description (English)",children:s.jsx(_6,{rows:4})})}),s.jsx($,{span:12,children:s.jsx(E.Item,{name:"descriptionAr",label:e==="ar"?"الوصف (عربي)":"Description (Arabic)",children:s.jsx(_6,{rows:4})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{span:8,children:s.jsx(E.Item,{name:"price",label:e==="ar"?"السعر":"Price",children:s.jsx(Qn,{min:0,style:{width:"100%"}})})}),s.jsx($,{span:12,children:s.jsx(E.Item,{name:"category",label:e==="ar"?"الفئة":"Category",rules:[{required:!0}],children:s.jsxs(q,{placeholder:e==="ar"?"اختر الفئة":"Select Category",children:[s.jsx(q.Option,{value:"ECONOMIC",children:e==="ar"?"اقتصادي":"Economic"}),s.jsx(q.Option,{value:"ADMINISTRATIVE",children:e==="ar"?"إداري":"Administrative"}),s.jsx(q.Option,{value:"FINANCIAL_ACCOUNTING",children:e==="ar"?"مالي ومحاسبي":"Financial & Accounting"}),s.jsx(q.Option,{value:"ANALYSIS_REPORTS",children:e==="ar"?"تحليل وتقارير":"Analysis & Reports"}),s.jsx(q.Option,{value:"FIELD_SURVEY",children:e==="ar"?"مسح ميداني":"Field Survey"}),s.jsx(q.Option,{value:"DIGITAL_CUSTOMER",children:e==="ar"?"عميل رقمي":"Digital Customer"})]})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{span:12,children:s.jsx(E.Item,{name:"icon",label:e==="ar"?"الأيقونة":"Icon",children:s.jsx(z,{placeholder:e==="ar"?"رمز الأيقونة (emoji)":"Icon emoji"})})}),s.jsx($,{span:12,children:s.jsx(E.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:s.jsxs(q,{children:[s.jsx(q.Option,{value:"ACTIVE",children:e==="ar"?"نشط":"Active"}),s.jsx(q.Option,{value:"INACTIVE",children:e==="ar"?"غير نشط":"Inactive"})]})})})]}),s.jsx(E.Item,{name:"image",label:e==="ar"?"صورة الخدمة":"Service Image",children:s.jsx(Pt,{name:"image",listType:"picture-card",maxCount:1,beforeUpload:b,accept:"image/*",onRemove:()=>{x(null),m.setFieldsValue({image:null})},children:g||h?.image?s.jsx("img",{src:g||h?.image,alt:"service",style:{width:"100%"}}):s.jsxs("div",{children:[s.jsx(br,{}),s.jsx("div",{style:{marginTop:8},children:e==="ar"?"رفع صورة":"Upload"})]})})}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{f(!1),p(null),x(null),m.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{RangePicker:aQ}=ys,sQ=()=>{const{t,language:e}=je(),[r,n]=A.useState([]),[a,i]=A.useState(!1),[o,l]=A.useState(null),[c,u]=A.useState({totalRevenue:0,totalSessions:0,totalClients:0,averageRating:0});A.useEffect(()=>{d()},[o]);const d=async()=>{try{i(!0);const g={};o&&o.length===2&&(g.startDate=o[0].format("YYYY-MM-DD"),g.endDate=o[1].format("YYYY-MM-DD"));const x=await Je.getReports(g);n(x.reports||[]);const m=x.reports?.reduce((v,w)=>v+(w.revenue||0),0)||0,y=x.reports?.length||0;u({totalRevenue:m,totalSessions:y,totalClients:x.stats?.totalClients||0,averageRating:x.stats?.averageRating||0})}catch(g){console.error("Error fetching reports:",g),_.error(e==="ar"?"فشل تحميل التقارير":"Failed to load reports")}finally{i(!1)}},f=async()=>{try{const g={};o&&o.length===2&&(g.startDate=o[0].format("YYYY-MM-DD"),g.endDate=o[1].format("YYYY-MM-DD"));const x=localStorage.getItem("accessToken")||ci("accessToken")||"",y=`http://localhost:5000/api/admin/reports/export/pdf?${new URLSearchParams(g).toString()}`,v=await fetch(y,{headers:{Authorization:`Bearer ${x}`}});if(!v.ok)throw new Error("Failed to download PDF");const w=await v.text(),N=new Blob([w],{type:"text/html"}),b=window.URL.createObjectURL(N),S=document.createElement("a");S.href=b,S.download=`reports-${de().format("YYYY-MM-DD")}.html`,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(b);const j=window.open("","_blank");j&&(j.document.write(w),j.document.close(),setTimeout(()=>{j.print()},500)),_.success(e==="ar"?"تم تحميل ملف PDF بنجاح - استخدم Print to PDF في المتصفح":"PDF downloaded successfully - Use Print to PDF in browser")}catch(g){console.error("Export PDF error:",g),_.error(e==="ar"?"فشل تحميل PDF":"Failed to download PDF")}},h=async()=>{try{const g={};o&&o.length===2&&(g.startDate=o[0].format("YYYY-MM-DD"),g.endDate=o[1].format("YYYY-MM-DD"));const x=localStorage.getItem("accessToken")||ci("accessToken")||"",y=`http://localhost:5000/api/admin/reports/export/csv?${new URLSearchParams(g).toString()}`,v=await fetch(y,{headers:{Authorization:`Bearer ${x}`}});if(!v.ok)throw new Error("Failed to download CSV");const w=await v.blob(),N=window.URL.createObjectURL(w),b=document.createElement("a");b.href=N,b.download=`reports-${de().format("YYYY-MM-DD")}.csv`,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(N),_.success(e==="ar"?"تم تحميل ملف CSV بنجاح":"CSV downloaded successfully")}catch(g){console.error("Export CSV error:",g),_.error(e==="ar"?"فشل تحميل CSV":"Failed to download CSV")}},p=[{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date",render:g=>de(g).format("YYYY-MM-DD HH:mm"),sorter:(g,x)=>new Date(g.date)-new Date(x.date)},{title:e==="ar"?"الإيرادات":"Revenue",dataIndex:"revenue",key:"revenue",render:g=>`${g||0} ${e==="ar"?"ريال":"SAR"}`,sorter:(g,x)=>(g.revenue||0)-(x.revenue||0)},{title:e==="ar"?"عدد الجلسات":"Sessions",dataIndex:"sessions",key:"sessions",sorter:(g,x)=>(g.sessions||0)-(x.sessions||0)},{title:e==="ar"?"عدد العملاء":"Clients",dataIndex:"clients",key:"clients",sorter:(g,x)=>(g.clients||0)-(x.clients||0)}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"التقارير":"Reports"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"تحميل وتصدير جميع التقارير":"Download and export all reports"})]}),s.jsxs(fe,{wrap:!0,children:[s.jsx(aQ,{value:o,onChange:l,size:"large",format:"YYYY-MM-DD"}),s.jsx(P,{icon:s.jsx(Cr,{}),onClick:d,loading:a,size:"large",children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx(dd,{}),onClick:f,size:"large",className:"bg-red-600 hover:bg-red-700 border-0",children:e==="ar"?"تحميل PDF":"Download PDF"}),s.jsx(P,{type:"primary",icon:s.jsx(Rr,{}),onClick:h,size:"large",className:"bg-green-600 hover:bg-green-700 border-0",children:e==="ar"?"تحميل CSV":"Download CSV"})]})]}),s.jsxs(ie,{gutter:[16,16],className:"mb-6",children:[s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"إجمالي الإيرادات":"Total Revenue",value:c.totalRevenue,prefix:s.jsx(tr,{className:"text-olive-green-600"}),suffix:"SAR",valueStyle:{color:"#7a8c66",fontSize:"24px",fontWeight:"bold"}})})}),s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"إجمالي الجلسات":"Total Sessions",value:c.totalSessions,prefix:s.jsx(Dt,{className:"text-blue-600"}),valueStyle:{color:"#1890ff",fontSize:"24px",fontWeight:"bold"}})})}),s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"إجمالي العملاء":"Total Clients",value:c.totalClients,prefix:s.jsx(ke,{className:"text-green-600"}),valueStyle:{color:"#52c41a",fontSize:"24px",fontWeight:"bold"}})})}),s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Be,{title:e==="ar"?"عدد التقارير":"Total Reports",value:r.length,prefix:s.jsx(Ct,{className:"text-purple-600"}),valueStyle:{color:"#722ed1",fontSize:"24px",fontWeight:"bold"}})})})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsx(rt,{columns:p,dataSource:r,rowKey:"id",loading:a,pagination:{pageSize:20,showSizeChanger:!0,showTotal:g=>e==="ar"?`إجمالي ${g} تقرير`:`Total ${g} reports`,pageSizeOptions:["10","20","50","100"]},scroll:{x:"max-content"}})})})]})},{TextArea:D6}=z,iQ=()=>{const{language:t}=je(),[e,r]=A.useState([]),[n,a]=A.useState(!1),[i,o]=A.useState(""),[l,c]=A.useState(!1),[u,d]=A.useState(null),[f,h]=A.useState(null),[p]=E.useForm();A.useEffect(()=>{x()},[]),A.useEffect(()=>{f&&p.setFieldsValue({logo:f})},[f,p]);const g=j=>{if(!j||/file:\/\//.test(j)||/[A-Za-z]:[\\\/]/.test(j)||/fakepath/i.test(j))return null;if(/^https?:\/\//.test(j))return j;const C="http://localhost:5000/api".replace("/api","")||"http://localhost:5000";return j.startsWith("/")?`${C}${j}`:`${C}/${j}`},x=async()=>{try{a(!0);const C=((await Ui.getPartners()).partners||[]).map(k=>({...k,logo:g(k.logo)}));r(C)}catch(j){console.error("Error fetching partners:",j),_.error(t==="ar"?"فشل تحميل الشركاء":"Failed to load partners")}finally{a(!1)}},m=async j=>{try{const C=new FormData;C.append("file",j),C.append("ownerType","USER"),C.append("ownerId",u?.id||"new");const k=await Hr.uploadFile(C);if(k.success&&k.file){const O="http://localhost:5000/api".replace("/api","")||"http://localhost:5000";let I=k.file.fileUrl||k.file.url;I&&!/^https?:\/\//.test(I)&&(I=I.startsWith("/")?`${O}${I}`:`${O}/${I}`);const M=g(I);return M?(h(M),p.setFieldsValue({logo:M}),_.success(t==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully")):_.error(t==="ar"?"فشل رفع الصورة: رابط غير صالح":"Failed to upload image: Invalid URL"),!1}}catch(C){console.error("Error uploading image:",C),_.error(t==="ar"?"فشل رفع الصورة":"Failed to upload image")}return!1},y=async j=>{try{const C=p.getFieldValue("logo");let k=null;f&&typeof f=="string"&&f.trim()?k=f.trim():C&&typeof C=="string"&&C.trim()?k=C.trim():j.logo&&typeof j.logo=="string"&&j.logo.trim()&&(k=j.logo.trim());const O={...j,logo:k||null};u?(await Ui.updatePartner(u.id,O),_.success(t==="ar"?"تم تحديث الشريك بنجاح":"Partner updated successfully")):(await Ui.createPartner(O),_.success(t==="ar"?"تم إضافة الشريك بنجاح":"Partner created successfully")),c(!1),d(null),h(null),p.resetFields(),x()}catch(C){console.error("Error saving partner:",C),_.error(t==="ar"?"فشل حفظ الشريك":"Failed to save partner")}},v=async j=>{try{await Ui.deletePartner(j),_.success(t==="ar"?"تم حذف الشريك بنجاح":"Partner deleted successfully"),x()}catch(C){console.error("Error deleting partner:",C),_.error(t==="ar"?"فشل حذف الشريك":"Failed to delete partner")}},w=j=>{d(j);const C=g(j.logo);h(C),p.setFieldsValue({name:j.name,nameAr:j.nameAr,logo:C,website:j.website,description:j.description,descriptionAr:j.descriptionAr,isActive:j.isActive,order:j.order}),c(!0)},N=()=>{d(null),h(null),p.resetFields(),c(!0)},b=e.filter(j=>j.name?.toLowerCase().includes(i.toLowerCase())||j.nameAr?.toLowerCase().includes(i.toLowerCase())),S=[{title:t==="ar"?"الشعار":"Logo",dataIndex:"logo",key:"logo",width:100,render:j=>{const C=g(j);return C?s.jsx(Ar,{src:C,alt:"Partner logo",width:80,height:50,style:{objectFit:"contain"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RnG4W+FgYxN",onError:k=>{k.target.style.display="none",k.target.nextSibling?.style?.setProperty("display","flex")}}):s.jsx("div",{style:{width:80,height:50,background:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"},children:t==="ar"?"لا يوجد":"No logo"})}},{title:t==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",render:(j,C)=>t==="ar"&&C.nameAr?C.nameAr:j},{title:t==="ar"?"الوصف":"Description",dataIndex:"description",key:"description",ellipsis:!0,render:(j,C)=>{const k=t==="ar"&&C.descriptionAr?C.descriptionAr:j||C.descriptionAr||"-";return s.jsx("span",{title:k,children:k})}},{title:t==="ar"?"الموقع الإلكتروني":"Website",dataIndex:"website",key:"website",ellipsis:!0,render:j=>j?s.jsx("a",{href:j,target:"_blank",rel:"noopener noreferrer",title:j,children:j}):"-"},{title:t==="ar"?"الحالة":"Status",dataIndex:"isActive",key:"isActive",render:j=>s.jsx(le,{color:j?"green":"red",children:j?t==="ar"?"نشط":"Active":t==="ar"?"غير نشط":"Inactive"})},{title:t==="ar"?"الترتيب":"Order",dataIndex:"order",key:"order",sorter:(j,C)=>j.order-C.order},{title:t==="ar"?"الإجراءات":"Actions",key:"actions",render:(j,C)=>s.jsxs(fe,{children:[s.jsx(P,{icon:s.jsx(kr,{}),onClick:()=>w(C),size:"small",children:t==="ar"?"تعديل":"Edit"}),s.jsx(Ma,{title:t==="ar"?"هل أنت متأكد من الحذف؟":"Are you sure you want to delete?",onConfirm:()=>v(C.id),okText:t==="ar"?"نعم":"Yes",cancelText:t==="ar"?"لا":"No",children:s.jsx(P,{icon:s.jsx(un,{}),danger:!0,size:"small",children:t==="ar"?"حذف":"Delete"})})]})}];return s.jsxs("div",{className:"animate-fade-in",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:t==="ar"?"إدارة الشركاء":"Partners Management"}),s.jsx("p",{className:"text-gray-500",children:t==="ar"?"إدارة شركاء المنصة وعرضهم في الصفحة الرئيسية":"Manage platform partners and display them on the homepage"})]}),s.jsxs(fe,{children:[s.jsx(z,{placeholder:t==="ar"?"بحث...":"Search...",prefix:s.jsx(Un,{}),value:i,onChange:j=>o(j.target.value),style:{width:250},allowClear:!0}),s.jsx(P,{icon:s.jsx(Cr,{}),onClick:x,loading:n,children:t==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx(br,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:N,children:t==="ar"?"إضافة شريك جديد":"Add New Partner"})]})]})}),s.jsx(V,{className:"shadow-lg rounded-xl border-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsx(rt,{columns:S,dataSource:b,rowKey:"id",loading:n,pagination:{pageSize:10,showSizeChanger:!0,showTotal:j=>t==="ar"?`إجمالي ${j} شريك`:`Total ${j} partners`},scroll:{x:"max-content"}})})}),s.jsx(He,{title:u?t==="ar"?"تعديل الشريك":"Edit Partner":t==="ar"?"إضافة شريك جديد":"Add New Partner",open:l,onCancel:()=>{c(!1),d(null),h(null),p.resetFields()},footer:null,width:700,destroyOnHidden:!0,children:s.jsxs(E,{form:p,layout:"vertical",onFinish:y,initialValues:{isActive:!0,order:0},children:[s.jsx(E.Item,{name:"name",label:t==="ar"?"الاسم (إنجليزي)":"Name (English)",rules:[{required:!0,message:t==="ar"?"يرجى إدخال الاسم":"Please enter name"}],children:s.jsx(z,{placeholder:t==="ar"?"اسم الشريك بالإنجليزية":"Partner name in English"})}),s.jsx(E.Item,{name:"nameAr",label:t==="ar"?"الاسم (عربي)":"Name (Arabic)",children:s.jsx(z,{placeholder:t==="ar"?"اسم الشريك بالعربية":"Partner name in Arabic"})}),s.jsx(E.Item,{name:"logo",label:t==="ar"?"الشعار":"Logo",children:s.jsx(z,{type:"hidden"})}),s.jsx(E.Item,{label:" ",colon:!1,children:s.jsxs(fe,{direction:"vertical",style:{width:"100%"},children:[s.jsx(Pt,{beforeUpload:m,showUploadList:!1,accept:"image/*",children:s.jsx(P,{icon:s.jsx(ir,{}),children:t==="ar"?"رفع الشعار":"Upload Logo"})}),(()=>{const j=f||p.getFieldValue("logo");return j?s.jsx(Ar,{src:g(j),alt:"Partner logo",width:200,height:100,style:{objectFit:"contain"},onError:C=>{console.error("Failed to load image:",j),C.target.style.display="none"}}):null})(),s.jsx(z,{placeholder:t==="ar"?"أو أدخل رابط الصورة":"Or enter image URL",value:f||p.getFieldValue("logo")||"",onChange:j=>{const C=j.target.value.trim();C?(h(C),p.setFieldsValue({logo:C})):p.setFieldsValue({logo:null})}})]})}),s.jsx(E.Item,{name:"website",label:t==="ar"?"الموقع الإلكتروني":"Website",children:s.jsx(z,{placeholder:"https://example.com"})}),s.jsx(E.Item,{name:"description",label:t==="ar"?"الوصف (إنجليزي)":"Description (English)",children:s.jsx(D6,{rows:3,placeholder:t==="ar"?"وصف الشريك بالإنجليزية":"Partner description in English"})}),s.jsx(E.Item,{name:"descriptionAr",label:t==="ar"?"الوصف (عربي)":"Description (Arabic)",children:s.jsx(D6,{rows:3,placeholder:t==="ar"?"وصف الشريك بالعربية":"Partner description in Arabic"})}),s.jsx(E.Item,{name:"order",label:t==="ar"?"الترتيب":"Order",tooltip:t==="ar"?"رقم الترتيب لعرض الشركاء (الأقل يظهر أولاً)":"Order number for displaying partners (lower numbers appear first)",children:s.jsx(Qn,{min:0,style:{width:"100%"}})}),s.jsx(E.Item,{name:"isActive",label:t==="ar"?"الحالة":"Status",valuePropName:"checked",children:s.jsx(Nn,{})}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:u?t==="ar"?"تحديث":"Update":t==="ar"?"إضافة":"Add"}),s.jsx(P,{onClick:()=>{c(!1),d(null),h(null),p.resetFields()},children:t==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{TextArea:$6}=z,oQ=()=>{const{language:t}=je(),[e,r]=A.useState([]),[n,a]=A.useState(!0),[i,o]=A.useState(null),[l,c]=A.useState(!1),[u,d]=A.useState(null),[f]=E.useForm();A.useEffect(()=>{h()},[]);const h=async()=>{try{a(!0),o(null);const w=await $l.getCategories();r(w.categories||[])}catch(w){console.error("Error fetching categories:",w),o(w.message||"Failed to load categories"),_.error(t==="ar"?"فشل تحميل الفئات":"Failed to load categories")}finally{a(!1)}},p=async w=>{try{u?(await $l.updateCategory(u.id,w),_.success(t==="ar"?"تم تحديث الفئة بنجاح":"Category updated successfully")):(await $l.createCategory(w),_.success(t==="ar"?"تم إنشاء الفئة بنجاح":"Category created successfully")),c(!1),f.resetFields(),d(null),h()}catch(N){console.error("Error saving category:",N),_.error(N.message||(t==="ar"?"فشل حفظ الفئة":"Failed to save category"))}},g=w=>{d(w),f.setFieldsValue({...w,parentId:w.parentId||void 0}),c(!0)},x=async w=>{try{await $l.deleteCategory(w),_.success(t==="ar"?"تم حذف الفئة بنجاح":"Category deleted successfully"),h()}catch(N){console.error("Error deleting category:",N),_.error(N.message||(t==="ar"?"فشل حذف الفئة":"Failed to delete category"))}},m=()=>{c(!1),f.resetFields(),d(null)},y=[{title:t==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",render:(w,N)=>s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:w}),N.nameAr&&s.jsx("div",{className:"text-sm text-gray-500",children:N.nameAr})]})},{title:t==="ar"?"الرابط":"Slug",dataIndex:"slug",key:"slug"},{title:t==="ar"?"الأب":"Parent",dataIndex:"parent",key:"parent",render:w=>w?w.name:"-"},{title:t==="ar"?"الاستخدام":"Usage",key:"usage",render:(w,N)=>{const b=(N._count?.consultants||0)+(N._count?.services||0)+(N._count?.articles||0);return s.jsxs("div",{className:"flex gap-2",children:[N._count?.consultants>0&&s.jsxs(le,{color:"blue",children:[N._count.consultants," ",t==="ar"?"مستشار":"Consultants"]}),N._count?.services>0&&s.jsxs(le,{color:"green",children:[N._count.services," ",t==="ar"?"خدمة":"Services"]}),N._count?.articles>0&&s.jsxs(le,{color:"orange",children:[N._count.articles," ",t==="ar"?"مقال":"Articles"]}),b===0&&s.jsx("span",{className:"text-gray-400",children:"-"})]})}},{title:t==="ar"?"الحالة":"Status",dataIndex:"isActive",key:"isActive",render:w=>s.jsx(le,{color:w?"green":"red",children:w?t==="ar"?"نشط":"Active":t==="ar"?"غير نشط":"Inactive"})},{title:t==="ar"?"الترتيب":"Order",dataIndex:"order",key:"order"},{title:t==="ar"?"الإجراءات":"Actions",key:"actions",fixed:"right",width:150,render:(w,N)=>s.jsxs(fe,{size:"small",children:[s.jsx(nn,{title:t==="ar"?"تعديل":"Edit",children:s.jsx(P,{icon:s.jsx(kr,{}),size:"small",onClick:()=>g(N)})}),s.jsx(Ma,{title:t==="ar"?"هل أنت متأكد من حذف هذه الفئة؟":"Are you sure to delete this category?",onConfirm:()=>x(N.id),okText:t==="ar"?"نعم":"Yes",cancelText:t==="ar"?"لا":"No",disabled:(N._count?.consultants||0)+(N._count?.services||0)+(N._count?.articles||0)>0,children:s.jsx(nn,{title:(N._count?.consultants||0)+(N._count?.services||0)+(N._count?.articles||0)>0?t==="ar"?"لا يمكن الحذف: الفئة مستخدمة":"Cannot delete: category is in use":t==="ar"?"حذف":"Delete",children:s.jsx(P,{danger:!0,icon:s.jsx(un,{}),size:"small",disabled:(N._count?.consultants||0)+(N._count?.services||0)+(N._count?.articles||0)>0})})})]})}],v=e.filter(w=>!u||w.id!==u.id).map(w=>({value:w.id,label:`${w.name}${w.nameAr?` (${w.nameAr})`:""}`}));return s.jsxs("div",{className:"animate-fade-in",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:t==="ar"?"الفئات":"Categories"}),s.jsx("p",{className:"text-gray-500",children:t==="ar"?"إدارة الفئات المستخدمة في المستشارين والخدمات والمقالات":"Manage categories for consultants, services, and articles"})]}),s.jsxs(fe,{children:[s.jsx(P,{icon:s.jsx(Cr,{}),onClick:h,loading:n,children:t==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx(br,{}),onClick:()=>{d(null),f.resetFields(),c(!0)},children:t==="ar"?"إضافة فئة":"Add Category"})]})]})}),i&&s.jsx(Gt,{message:i,type:"error",showIcon:!0,closable:!0,onClose:()=>o(null),className:"mb-6"}),s.jsx(V,{className:"border-0 shadow-lg rounded-2xl",children:s.jsx(rt,{columns:y,dataSource:e,loading:n,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:w=>t==="ar"?`إجمالي ${w} فئة`:`Total ${w} categories`}})}),s.jsx(He,{title:u?t==="ar"?"تعديل الفئة":"Edit Category":t==="ar"?"إضافة فئة جديدة":"Add New Category",open:l,onCancel:m,footer:null,width:600,children:s.jsxs(E,{form:f,layout:"vertical",onFinish:p,initialValues:{isActive:!0,order:0},children:[s.jsx(E.Item,{name:"name",label:t==="ar"?"الاسم (إنجليزي)":"Name (English)",rules:[{required:!0,message:t==="ar"?"الاسم مطلوب":"Name is required"}],children:s.jsx(z,{placeholder:t==="ar"?"أدخل الاسم":"Enter name"})}),s.jsx(E.Item,{name:"nameAr",label:t==="ar"?"الاسم (عربي)":"Name (Arabic)",children:s.jsx(z,{placeholder:t==="ar"?"أدخل الاسم بالعربية":"Enter name in Arabic"})}),s.jsx(E.Item,{name:"slug",label:t==="ar"?"الرابط":"Slug",tooltip:t==="ar"?"سيتم إنشاؤه تلقائياً إذا لم يتم تحديده":"Will be auto-generated if not provided",children:s.jsx(z,{placeholder:"category-slug"})}),s.jsx(E.Item,{name:"description",label:t==="ar"?"الوصف (إنجليزي)":"Description (English)",children:s.jsx($6,{rows:3,placeholder:t==="ar"?"أدخل الوصف":"Enter description"})}),s.jsx(E.Item,{name:"descriptionAr",label:t==="ar"?"الوصف (عربي)":"Description (Arabic)",children:s.jsx($6,{rows:3,placeholder:t==="ar"?"أدخل الوصف بالعربية":"Enter description in Arabic"})}),s.jsx(E.Item,{name:"parentId",label:t==="ar"?"الفئة الأب":"Parent Category",children:s.jsx(q,{placeholder:t==="ar"?"اختر الفئة الأب (اختياري)":"Select parent category (optional)",allowClear:!0,options:v})}),s.jsx(E.Item,{name:"icon",label:t==="ar"?"الأيقونة":"Icon",tooltip:t==="ar"?"اسم الأيقونة أو رابط الصورة":"Icon name or image URL",children:s.jsx(z,{placeholder:t==="ar"?"مثال: HomeOutlined":"e.g., HomeOutlined"})}),s.jsx(E.Item,{name:"color",label:t==="ar"?"اللون":"Color",tooltip:t==="ar"?"كود اللون (Hex)":"Color code (Hex)",children:s.jsx(z,{placeholder:"#1a4d3a"})}),s.jsx(E.Item,{name:"order",label:t==="ar"?"الترتيب":"Order",children:s.jsx(Qn,{min:0,style:{width:"100%"}})}),s.jsx(E.Item,{name:"isActive",label:t==="ar"?"الحالة":"Status",valuePropName:"checked",children:s.jsx(Nn,{})}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",children:u?t==="ar"?"تحديث":"Update":t==="ar"?"إنشاء":"Create"}),s.jsx(P,{onClick:m,children:t==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{TextArea:L6}=z,lQ=()=>{const{t,language:e}=je(),[r,n]=A.useState([]),[a,i]=A.useState(!1),[o,l]=A.useState(null),[c,u]=A.useState(!1),[d,f]=A.useState(null),[h,p]=A.useState(null),[g,x]=A.useState(null),[m]=E.useForm();A.useEffect(()=>{y()},[]);const y=async()=>{try{i(!0),l(null);const C=(await Vi.getSliders()).sliders.map(k=>({...k,key:k.id,title:e==="ar"&&k.titleAr||k.title}));n(C)}catch(j){console.error("Error fetching sliders:",j),l(j.message||"Failed to load sliders"),_.error(e==="ar"?"فشل تحميل السلايدرات":"Failed to load sliders")}finally{i(!1)}},v=async j=>{try{const C=new FormData;C.append("file",j),C.append("ownerType","GENERAL");const k=await Hr.uploadFile(C);if(k.file&&k.file.fileUrl)p(k.file.fileUrl),m.setFieldsValue({image:k.file.fileUrl}),_.success(e==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully");else throw new Error("File upload failed")}catch(C){_.error(C.message||(e==="ar"?"فشل رفع الصورة":"Failed to upload image"))}return!1},w=async j=>{try{const C=new FormData;C.append("file",j),C.append("ownerType","GENERAL");const k=await Hr.uploadFile(C);if(k.file&&k.file.fileUrl)x(k.file.fileUrl),m.setFieldsValue({icon:k.file.fileUrl}),_.success(e==="ar"?"تم رفع الأيقونة بنجاح":"Icon uploaded successfully");else throw new Error("File upload failed")}catch(C){_.error(C.message||(e==="ar"?"فشل رفع الأيقونة":"Failed to upload icon"))}return!1},N=async j=>{try{let C=h||d?.image,k=g||d?.icon;j.image&&typeof j.image=="string"&&(C=j.image),j.icon&&typeof j.icon=="string"&&(k=j.icon);const O={...j,order:parseInt(j.order||0),image:C,icon:k||null,isActive:j.isActive!==void 0?j.isActive:!0};d?(await Vi.updateSlider(d.id,O),_.success(e==="ar"?"تم تحديث السلايدر بنجاح":"Slider updated successfully")):(await Vi.createSlider(O),_.success(e==="ar"?"تم إنشاء السلايدر بنجاح":"Slider created successfully")),u(!1),f(null),p(null),x(null),m.resetFields(),y()}catch(C){_.error(C.message||(e==="ar"?"فشل حفظ السلايدر":"Failed to save slider"))}},b=async j=>{try{await Vi.deleteSlider(j),_.success(e==="ar"?"تم حذف السلايدر بنجاح":"Slider deleted successfully"),y()}catch(C){_.error(C.message||(e==="ar"?"فشل حذف السلايدر":"Failed to delete slider"))}},S=[{title:e==="ar"?"السلايدر":"Slider",key:"slider",width:300,render:(j,C)=>s.jsxs("div",{className:"flex items-center gap-3",children:[C.image?s.jsx(Ar,{src:C.image,alt:C.title,width:80,height:60,className:"object-cover rounded",preview:!1}):s.jsx("div",{className:"w-20 h-15 bg-gray-200 rounded flex items-center justify-center",children:s.jsx(ub,{className:"text-2xl text-gray-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:C.title}),C.subtitle&&s.jsx("div",{className:"text-sm text-gray-500",children:C.subtitle})]})]})},{title:e==="ar"?"الترتيب":"Order",dataIndex:"order",key:"order",sorter:(j,C)=>j.order-C.order},{title:e==="ar"?"الحالة":"Status",dataIndex:"isActive",key:"isActive",render:j=>s.jsx(le,{color:j?"green":"red",children:j?e==="ar"?"نشط":"Active":e==="ar"?"غير نشط":"Inactive"})},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",fixed:"right",width:150,render:(j,C)=>s.jsxs(fe,{size:"small",children:[s.jsx(nn,{title:e==="ar"?"تعديل":"Edit",children:s.jsx(P,{icon:s.jsx(kr,{}),size:"small",onClick:()=>{f(C),p(C.image),x(C.icon),m.setFieldsValue({...C,isActive:C.isActive}),u(!0)}})}),s.jsx(nn,{title:e==="ar"?"حذف":"Delete",children:s.jsx(Ma,{title:e==="ar"?"هل أنت متأكد من حذف هذا السلايدر؟":"Are you sure to delete this slider?",onConfirm:()=>b(C.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:s.jsx(P,{danger:!0,icon:s.jsx(un,{}),size:"small"})})})]})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 bg-gradient-to-br from-amber-50 via-orange-50/50 to-amber-50",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold text-amber-900 mb-3",children:e==="ar"?"إدارة السلايدرات":"Manage Sliders"}),s.jsx("p",{className:"text-base sm:text-lg text-amber-800/70 font-medium",children:e==="ar"?"إدارة السلايدرات المعروضة في الصفحة الرئيسية":"Manage sliders displayed on the home page"})]}),s.jsxs(fe,{className:"flex-wrap",children:[s.jsx(P,{icon:s.jsx(Cr,{}),onClick:y,loading:a,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx(br,{}),className:"bg-amber-600 hover:bg-amber-700 border-0 shadow-lg",size:"large",onClick:()=>{f(null),p(null),x(null),m.resetFields(),u(!0)},children:e==="ar"?"إضافة سلايدر جديد":"Add New Slider"})]})]}),s.jsx(V,{className:"border border-amber-200/50 bg-white/80 backdrop-blur-sm",children:s.jsx(rt,{columns:S,dataSource:r,loading:a,pagination:{pageSize:10},scroll:{x:"max-content"}})}),s.jsx(He,{title:d?e==="ar"?"تعديل السلايدر":"Edit Slider":e==="ar"?"إضافة سلايدر جديد":"Add New Slider",open:c,onCancel:()=>{u(!1),f(null),p(null),x(null),m.resetFields()},footer:null,width:800,destroyOnHidden:!0,children:s.jsxs(E,{form:m,layout:"vertical",onFinish:N,initialValues:{isActive:!0,order:0},children:[s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0,message:e==="ar"?"يرجى إدخال العنوان":"Please enter title"}],children:s.jsx(z,{placeholder:e==="ar"?"أدخل العنوان":"Enter title"})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:s.jsx(z,{placeholder:e==="ar"?"أدخل العنوان العربي":"Enter Arabic title"})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"subtitle",label:e==="ar"?"العنوان الفرعي (إنجليزي)":"Subtitle (English)",children:s.jsx(z,{placeholder:e==="ar"?"أدخل العنوان الفرعي":"Enter subtitle"})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"subtitleAr",label:e==="ar"?"العنوان الفرعي (عربي)":"Subtitle (Arabic)",children:s.jsx(z,{placeholder:e==="ar"?"أدخل العنوان الفرعي العربي":"Enter Arabic subtitle"})})})]}),s.jsx(E.Item,{name:"description",label:e==="ar"?"الوصف (إنجليزي)":"Description (English)",children:s.jsx(L6,{rows:3,placeholder:e==="ar"?"أدخل الوصف":"Enter description"})}),s.jsx(E.Item,{name:"descriptionAr",label:e==="ar"?"الوصف (عربي)":"Description (Arabic)",children:s.jsx(L6,{rows:3,placeholder:e==="ar"?"أدخل الوصف العربي":"Enter Arabic description"})}),s.jsxs(E.Item,{name:"image",label:e==="ar"?"الصورة":"Image",rules:[{required:!0,message:e==="ar"?"يرجى رفع الصورة":"Please upload image"}],children:[s.jsx(Pt,{beforeUpload:v,showUploadList:!1,accept:"image/*",children:s.jsx(P,{icon:s.jsx(ir,{}),children:e==="ar"?"رفع الصورة":"Upload Image"})}),(h||m.getFieldValue("image"))&&s.jsx("div",{className:"mt-4",children:s.jsx(Ar,{src:h||m.getFieldValue("image"),alt:"Preview",width:200,className:"rounded"})})]}),s.jsxs(E.Item,{name:"icon",label:e==="ar"?"الأيقونة (اختياري)":"Icon (Optional)",children:[s.jsx(Pt,{beforeUpload:w,showUploadList:!1,accept:"image/*",children:s.jsx(P,{icon:s.jsx(ir,{}),children:e==="ar"?"رفع الأيقونة":"Upload Icon"})}),(g||m.getFieldValue("icon"))&&s.jsx("div",{className:"mt-4",children:s.jsx(Ar,{src:g||m.getFieldValue("icon"),alt:"Icon Preview",width:80,height:80,className:"rounded object-contain"})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"buttonText",label:e==="ar"?"نص الزر (إنجليزي)":"Button Text (English)",children:s.jsx(z,{placeholder:e==="ar"?"مثال: ابدأ الآن":"e.g., Get Started"})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"buttonTextAr",label:e==="ar"?"نص الزر (عربي)":"Button Text (Arabic)",children:s.jsx(z,{placeholder:e==="ar"?"مثال: ابدأ الآن":"e.g., ابدأ الآن"})})})]}),s.jsx(E.Item,{name:"buttonLink",label:e==="ar"?"رابط الزر":"Button Link",children:s.jsx(z,{placeholder:e==="ar"?"مثال: /services":"e.g., /services"})}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"order",label:e==="ar"?"الترتيب":"Order",children:s.jsx(Qn,{min:0,style:{width:"100%"}})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"isActive",label:e==="ar"?"الحالة":"Status",valuePropName:"checked",children:s.jsx(Nn,{checkedChildren:e==="ar"?"نشط":"Active",unCheckedChildren:e==="ar"?"غير نشط":"Inactive"})})})]}),s.jsx(E.Item,{children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-amber-600 hover:bg-amber-700",children:d?e==="ar"?"تحديث":"Update":e==="ar"?"إنشاء":"Create"}),s.jsx(P,{onClick:()=>{u(!1),f(null),p(null),x(null),m.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{Title:xn,Text:ar,Paragraph:Lse}=su,{TextArea:cQ}=z,uQ=()=>{const{t,language:e}=je(),{theme:r,toggleTheme:n,settings:a,updateSettings:i}=Fa(),[o]=E.useForm(),[l]=E.useForm(),[c]=E.useForm(),[u]=E.useForm(),[d,f]=A.useState(!1),[h,p]=A.useState("general");A.useEffect(()=>{u.setFieldsValue({dashboardName:a.dashboardName,dashboardNameAr:a.dashboardNameAr,websiteName:a.websiteName||a.dashboardName,websiteNameAr:a.websiteNameAr||a.dashboardNameAr,primaryFont:a.primaryFont,arabicFont:a.arabicFont,animationsEnabled:a.animationsEnabled,animationSpeed:a.animationSpeed,primaryColor:a.primaryColor,secondaryColor:a.secondaryColor})},[a,u]),A.useEffect(()=>{g()},[]);const g=async()=>{try{const j=await Fs.getGeneralSettings();j.settings&&o.setFieldsValue({platformName:j.settings.platformName||"Jadwa Consulting",email:j.settings.platformEmail||"info@jadwa.com",phone:j.settings.platformPhone||"+966 12 345 6789",address:j.settings.platformAddress||"",enableNotifications:j.settings.enableNotifications!==!1,enableEmailNotifications:j.settings.enableEmailNotifications!==!1})}catch(j){console.error("Error fetching general settings:",j)}},x=async j=>{try{f(!0),await Fs.updateGeneralSettings({platformName:j.platformName,platformEmail:j.email,platformPhone:j.phone,platformAddress:j.address,enableNotifications:j.enableNotifications,enableEmailNotifications:j.enableEmailNotifications}),_.success(e==="ar"?"تم حفظ الإعدادات العامة بنجاح":"General settings saved successfully")}catch(C){_.error(C.message||(e==="ar"?"فشل حفظ الإعدادات":"Failed to save settings"))}finally{f(!1)}};A.useEffect(()=>{m()},[]);const m=async()=>{try{const j=await Fs.getPaymentSettings();j.settings&&l.setFieldsValue({gateway:j.settings.paymentGateway||"tap",apiKey:j.settings.paymentApiKey||"",secretKey:j.settings.paymentSecretKey||"",commissionRate:j.settings.commissionRate||15,enableAutoPayout:j.settings.enableAutoPayout||!1})}catch(j){console.error("Error fetching payment settings:",j)}},y=async j=>{try{f(!0),await Fs.updatePaymentSettings({paymentGateway:j.gateway,paymentApiKey:j.apiKey,paymentSecretKey:j.secretKey,commissionRate:j.commissionRate,enableAutoPayout:j.enableAutoPayout}),_.success(e==="ar"?"تم حفظ إعدادات الدفع بنجاح":"Payment settings saved successfully")}catch(C){_.error(C.message||(e==="ar"?"فشل حفظ الإعدادات":"Failed to save settings"))}finally{f(!1)}};A.useEffect(()=>{v()},[]);const v=async()=>{try{const j=await Fs.getIntegrationSettings();j.settings&&c.setFieldsValue({videoService:j.settings.videoService||"zoom",videoApiKey:j.settings.videoApiKey||"",emailService:j.settings.emailService||"smtp",smtpHost:j.settings.smtpHost||"",smtpPort:j.settings.smtpPort||"",smtpUser:j.settings.smtpUser||"",smtpPassword:j.settings.smtpPassword||""})}catch(j){console.error("Error fetching integration settings:",j)}},w=async j=>{try{f(!0),await Fs.updateIntegrationSettings({videoService:j.videoService,videoApiKey:j.videoApiKey,emailService:j.emailService,smtpHost:j.smtpHost,smtpPort:j.smtpPort,smtpUser:j.smtpUser,smtpPassword:j.smtpPassword}),_.success(e==="ar"?"تم حفظ إعدادات التكامل بنجاح":"Integration settings saved successfully")}catch(C){_.error(C.message||(e==="ar"?"فشل حفظ الإعدادات":"Failed to save settings"))}finally{f(!1)}},N=j=>{const C=new FileReader;return C.onload=k=>{i({logo:k.target.result}),_.success(e==="ar"?"تم رفع الشعار بنجاح":"Logo uploaded successfully")},C.readAsDataURL(j),!1},b=j=>{const C=new FileReader;return C.onload=k=>{i({websiteLogo:k.target.result}),_.success(e==="ar"?"تم رفع شعار الموقع بنجاح":"Website logo uploaded successfully")},C.readAsDataURL(j),!1},S=[{key:"general",label:s.jsxs(fe,{children:[s.jsx(co,{}),s.jsx("span",{children:e==="ar"?"عام":"General"})]}),children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(V,{className:"glass-card border-0 shadow-professional-lg rounded-xl mb-6",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:s.jsx(na,{className:"text-white text-xl"})}),s.jsxs("div",{children:[s.jsx(xn,{level:4,className:"mb-1 font-bold",children:e==="ar"?"معلومات المنصة":"Platform Information"}),s.jsx(ar,{type:"secondary",className:"text-sm",children:e==="ar"?"المعلومات الأساسية للمنصة":"Basic platform information"})]})]}),styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx(E,{form:o,layout:"vertical",onFinish:x,children:s.jsxs(ie,{gutter:[16,0],children:[s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"platformName",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم المنصة":"Platform Name"}),rules:[{required:!0,message:e==="ar"?"يرجى إدخال اسم المنصة":"Please enter platform name"}],children:s.jsx(z,{size:"large",placeholder:e==="ar"?"اسم المنصة":"Platform Name",prefix:s.jsx(na,{className:"text-gray-400"})})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"email",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"البريد الإلكتروني":"Email"}),rules:[{required:!0,message:e==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email"},{type:"email",message:e==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email"}],children:s.jsx(z,{size:"large",type:"email",placeholder:e==="ar"?"البريد الإلكتروني":"Email",prefix:s.jsx(an,{className:"text-gray-400"})})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"phone",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"رقم الهاتف":"Phone"}),rules:[{required:!0,message:e==="ar"?"يرجى إدخال رقم الهاتف":"Please enter phone number"}],children:s.jsx(z,{size:"large",placeholder:e==="ar"?"رقم الهاتف":"Phone",prefix:s.jsx(aa,{className:"text-gray-400"})})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"address",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"العنوان":"Address"}),children:s.jsx(cQ,{rows:3,placeholder:e==="ar"?"العنوان":"Address",size:"large"})})})]})})}),s.jsx(V,{className:"glass-card border-0 shadow-professional-lg rounded-xl mb-6",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-lg",children:s.jsx(cc,{className:"text-white text-xl"})}),s.jsxs("div",{children:[s.jsx(xn,{level:4,className:"mb-1 font-bold",children:e==="ar"?"الإشعارات":"Notifications"}),s.jsx(ar,{type:"secondary",className:"text-sm",children:e==="ar"?"إعدادات الإشعارات":"Notification settings"})]})]}),styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx(E,{form:o,layout:"vertical",children:s.jsxs(ie,{gutter:[16,16],children:[s.jsx($,{xs:24,md:12,children:s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(cc,{className:"text-lg text-gray-600"}),s.jsxs("div",{children:[s.jsx(ar,{strong:!0,children:e==="ar"?"تفعيل الإشعارات":"Enable Notifications"}),s.jsx("br",{}),s.jsx(ar,{type:"secondary",className:"text-xs",children:e==="ar"?"تفعيل الإشعارات العامة":"Enable general notifications"})]})]}),s.jsx(E.Item,{name:"enableNotifications",valuePropName:"checked",className:"mb-0",children:s.jsx(Nn,{})})]})}),s.jsx($,{xs:24,md:12,children:s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(an,{className:"text-lg text-gray-600"}),s.jsxs("div",{children:[s.jsx(ar,{strong:!0,children:e==="ar"?"إشعارات البريد الإلكتروني":"Email Notifications"}),s.jsx("br",{}),s.jsx(ar,{type:"secondary",className:"text-xs",children:e==="ar"?"تفعيل إشعارات البريد الإلكتروني":"Enable email notifications"})]})]}),s.jsx(E.Item,{name:"enableEmailNotifications",valuePropName:"checked",className:"mb-0",children:s.jsx(Nn,{})})]})})]})})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(P,{size:"large",onClick:()=>o.resetFields(),children:e==="ar"?"إعادة تعيين":"Reset"}),s.jsx(P,{type:"primary",htmlType:"submit",icon:s.jsx(wa,{}),size:"large",loading:d,onClick:()=>o.submit(),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ الإعدادات":"Save Settings"})]})]})},{key:"payment",label:s.jsxs(fe,{children:[s.jsx(tr,{}),s.jsx("span",{children:e==="ar"?"المدفوعات":"Payments"})]}),children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Gt,{message:e==="ar"?"إعدادات الدفع":"Payment Settings",description:e==="ar"?"قم بتكوين إعدادات بوابة الدفع الخاصة بك. تأكد من الحفاظ على أمان مفاتيح API.":"Configure your payment gateway settings. Make sure to keep API keys secure.",type:"info",showIcon:!0,icon:s.jsx(Qu,{}),className:"mb-6"}),s.jsx(V,{className:"glass-card border-0 shadow-professional-lg rounded-xl mb-6",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg",children:s.jsx(tr,{className:"text-white text-xl"})}),s.jsxs("div",{children:[s.jsx(xn,{level:4,className:"mb-1 font-bold",children:e==="ar"?"بوابة الدفع":"Payment Gateway"}),s.jsx(ar,{type:"secondary",className:"text-sm",children:e==="ar"?"إعدادات بوابة الدفع":"Payment gateway configuration"})]})]}),styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx(E,{form:l,layout:"vertical",onFinish:y,children:s.jsxs(ie,{gutter:[16,0],children:[s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"gateway",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"بوابة الدفع":"Payment Gateway"}),rules:[{required:!0}],children:s.jsxs(q,{size:"large",children:[s.jsx(q.Option,{value:"tap",children:"Tap Payments"}),s.jsx(q.Option,{value:"moyasar",children:"Moyasar"}),s.jsx(q.Option,{value:"stc",children:"STC Pay"}),s.jsx(q.Option,{value:"paypal",children:"PayPal"})]})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"commissionRate",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"نسبة العمولة (%)":"Commission Rate (%)"}),rules:[{required:!0,type:"number",min:0,max:100}],children:s.jsx(z,{type:"number",min:0,max:100,placeholder:"15",size:"large",suffix:"%"})})}),s.jsx($,{xs:24,children:s.jsx(E.Item,{name:"apiKey",label:s.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[s.jsx(Ht,{}),e==="ar"?"مفتاح API":"API Key"]}),rules:[{required:!0}],children:s.jsx(z.Password,{size:"large",placeholder:e==="ar"?"أدخل مفتاح API":"Enter API Key",iconRender:j=>j?s.jsx(ur,{}):s.jsx(Ht,{})})})}),s.jsx($,{xs:24,children:s.jsx(E.Item,{name:"secretKey",label:s.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[s.jsx(Ht,{}),e==="ar"?"المفتاح السري":"Secret Key"]}),rules:[{required:!0}],children:s.jsx(z.Password,{size:"large",placeholder:e==="ar"?"أدخل المفتاح السري":"Enter Secret Key",iconRender:j=>j?s.jsx(ur,{}):s.jsx(Ht,{})})})}),s.jsx($,{xs:24,children:s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(vt,{className:"text-lg text-gray-600"}),s.jsxs("div",{children:[s.jsx(ar,{strong:!0,children:e==="ar"?"الدفع التلقائي للمستشارين":"Auto Payout for Consultants"}),s.jsx("br",{}),s.jsx(ar,{type:"secondary",className:"text-xs",children:e==="ar"?"تفعيل الدفع التلقائي للمستشارين":"Enable automatic payout for consultants"})]})]}),s.jsx(E.Item,{name:"enableAutoPayout",valuePropName:"checked",className:"mb-0",children:s.jsx(Nn,{})})]})})]})})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(P,{size:"large",onClick:()=>l.resetFields(),children:e==="ar"?"إعادة تعيين":"Reset"}),s.jsx(P,{type:"primary",htmlType:"submit",icon:s.jsx(wa,{}),size:"large",loading:d,onClick:()=>l.submit(),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ الإعدادات":"Save Settings"})]})]})},{key:"integrations",label:s.jsxs(fe,{children:[s.jsx(Oj,{}),s.jsx("span",{children:e==="ar"?"التكاملات":"Integrations"})]}),children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Gt,{message:e==="ar"?"التكاملات الخارجية":"External Integrations",description:e==="ar"?"قم بتكوين التكاملات مع الخدمات الخارجية مثل خدمات الفيديو والبريد الإلكتروني.":"Configure integrations with external services such as video services and email.",type:"info",showIcon:!0,icon:s.jsx(Qu,{}),className:"mb-6"}),s.jsx(V,{className:"border-0 shadow-sm",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center",children:s.jsx(Zn,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx(xn,{level:5,className:"mb-0",children:e==="ar"?"خدمة الفيديو":"Video Service"}),s.jsx(ar,{type:"secondary",className:"text-xs",children:e==="ar"?"إعدادات خدمة الفيديو":"Video service configuration"})]})]}),children:s.jsx(E,{form:c,layout:"vertical",onFinish:w,children:s.jsxs(ie,{gutter:[16,0],children:[s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"videoService",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"خدمة الفيديو":"Video Service"}),rules:[{required:!0}],children:s.jsxs(q,{size:"large",children:[s.jsx(q.Option,{value:"zoom",children:"Zoom"}),s.jsx(q.Option,{value:"twilio",children:"Twilio"}),s.jsx(q.Option,{value:"jitsi",children:"Jitsi Meet"}),s.jsx(q.Option,{value:"google-meet",children:"Google Meet"})]})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"videoApiKey",label:s.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[s.jsx(Oj,{}),e==="ar"?"مفتاح API للفيديو":"Video API Key"]}),children:s.jsx(z.Password,{size:"large",placeholder:e==="ar"?"أدخل مفتاح API":"Enter API Key",iconRender:j=>j?s.jsx(ur,{}):s.jsx(Ht,{})})})})]})})}),s.jsx(V,{className:"border-0 shadow-sm",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:s.jsx(an,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx(xn,{level:5,className:"mb-0",children:e==="ar"?"خدمة البريد الإلكتروني":"Email Service"}),s.jsx(ar,{type:"secondary",className:"text-xs",children:e==="ar"?"إعدادات خدمة البريد الإلكتروني":"Email service configuration"})]})]}),children:s.jsx(E,{form:c,layout:"vertical",children:s.jsxs(ie,{gutter:[16,0],children:[s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"emailService",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"خدمة البريد الإلكتروني":"Email Service"}),rules:[{required:!0}],children:s.jsxs(q,{size:"large",children:[s.jsx(q.Option,{value:"smtp",children:"SMTP"}),s.jsx(q.Option,{value:"sendgrid",children:"SendGrid"}),s.jsx(q.Option,{value:"mailgun",children:"Mailgun"}),s.jsx(q.Option,{value:"ses",children:"AWS SES"})]})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"smtpHost",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"خادم SMTP":"SMTP Host"}),children:s.jsx(z,{size:"large",placeholder:"smtp.example.com"})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"smtpPort",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"منفذ SMTP":"SMTP Port"}),children:s.jsx(z,{type:"number",size:"large",placeholder:"587"})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"smtpUser",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم المستخدم":"Username"}),children:s.jsx(z,{size:"large",placeholder:e==="ar"?"اسم المستخدم":"Username"})})}),s.jsx($,{xs:24,children:s.jsx(E.Item,{name:"smtpPassword",label:s.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[s.jsx(Ht,{}),e==="ar"?"كلمة المرور":"Password"]}),children:s.jsx(z.Password,{size:"large",placeholder:e==="ar"?"كلمة المرور":"Password",iconRender:j=>j?s.jsx(ur,{}):s.jsx(Ht,{})})})})]})})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(P,{size:"large",onClick:()=>c.resetFields(),children:e==="ar"?"إعادة تعيين":"Reset"}),s.jsx(P,{type:"primary",htmlType:"submit",icon:s.jsx(wa,{}),size:"large",loading:d,onClick:()=>c.submit(),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ الإعدادات":"Save Settings"})]})]})},{key:"appearance",label:s.jsxs(fe,{children:[s.jsx(Pj,{}),s.jsx("span",{children:e==="ar"?"المظهر":"Appearance"})]}),children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(V,{className:"border-0 shadow-sm",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center",children:s.jsx(ub,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx(xn,{level:5,className:"mb-0",children:e==="ar"?"الشعار والاسم":"Logo & Name"}),s.jsx(ar,{type:"secondary",className:"text-xs",children:e==="ar"?"تخصيص شعار واسم لوحة التحكم":"Customize dashboard logo and name"})]})]}),children:s.jsx(E,{form:u,layout:"vertical",children:s.jsxs(ie,{gutter:[16,16],children:[s.jsx($,{xs:24,children:s.jsx("div",{className:"mb-4 pb-4 border-b border-gray-200",children:s.jsx(xn,{level:5,className:"mb-2",children:e==="ar"?"إعدادات لوحة التحكم":"Dashboard Settings"})})}),s.jsx($,{xs:24,md:12,children:s.jsxs(E.Item,{name:"logo",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"شعار لوحة التحكم":"Dashboard Logo"}),children:[s.jsx(Pt,{beforeUpload:N,showUploadList:!1,accept:"image/*",children:s.jsx(P,{icon:s.jsx(ir,{}),size:"large",block:!0,children:e==="ar"?"رفع شعار":"Upload Logo"})}),a.logo&&s.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsx("img",{src:a.logo,alt:"Dashboard Logo",className:"h-20 object-contain mx-auto"}),s.jsx(P,{type:"link",danger:!0,size:"small",className:"mt-2",onClick:()=>{i({logo:null}),_.success(e==="ar"?"تم حذف الشعار":"Logo removed")},children:e==="ar"?"حذف الشعار":"Remove Logo"})]})]})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"dashboardName",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم لوحة التحكم (إنجليزي)":"Dashboard Name (English)"}),rules:[{required:!0}],children:s.jsx(z,{size:"large",placeholder:"Jadwa"})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"dashboardNameAr",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم لوحة التحكم (عربي)":"Dashboard Name (Arabic)"}),rules:[{required:!0}],children:s.jsx(z,{size:"large",placeholder:"جدوى"})})}),s.jsx($,{xs:24,children:s.jsx("div",{className:"mb-4 pb-4 mt-6 border-b border-gray-200",children:s.jsx(xn,{level:5,className:"mb-2",children:e==="ar"?"إعدادات الموقع":"Website Settings"})})}),s.jsx($,{xs:24,md:12,children:s.jsxs(E.Item,{name:"websiteLogo",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"شعار الموقع":"Website Logo"}),children:[s.jsx(Pt,{beforeUpload:b,showUploadList:!1,accept:"image/*",children:s.jsx(P,{icon:s.jsx(ir,{}),size:"large",block:!0,children:e==="ar"?"رفع شعار الموقع":"Upload Website Logo"})}),a.websiteLogo&&s.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsx("img",{src:a.websiteLogo,alt:"Website Logo",className:"h-20 object-contain mx-auto"}),s.jsx(P,{type:"link",danger:!0,size:"small",className:"mt-2",onClick:()=>{i({websiteLogo:null}),_.success(e==="ar"?"تم حذف شعار الموقع":"Website logo removed")},children:e==="ar"?"حذف شعار الموقع":"Remove Logo"})]})]})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"websiteName",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم الموقع (إنجليزي)":"Website Name (English)"}),rules:[{required:!0}],children:s.jsx(z,{size:"large",placeholder:"Jadwa"})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"websiteNameAr",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم الموقع (عربي)":"Website Name (Arabic)"}),rules:[{required:!0}],children:s.jsx(z,{size:"large",placeholder:"جدوى"})})})]})})}),s.jsx(V,{className:"border-0 shadow-sm",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center",children:s.jsx(oM,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx(xn,{level:5,className:"mb-0",children:e==="ar"?"الخطوط":"Fonts"}),s.jsx(ar,{type:"secondary",className:"text-xs",children:e==="ar"?"تخصيص الخطوط":"Customize fonts"})]})]}),children:s.jsx(E,{form:u,layout:"vertical",children:s.jsxs(ie,{gutter:[16,0],children:[s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"primaryFont",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"الخط الأساسي (إنجليزي)":"Primary Font (English)"}),rules:[{required:!0}],children:s.jsxs(q,{size:"large",children:[s.jsx(q.Option,{value:"Inter",children:"Inter"}),s.jsx(q.Option,{value:"Roboto",children:"Roboto"}),s.jsx(q.Option,{value:"Open Sans",children:"Open Sans"}),s.jsx(q.Option,{value:"Poppins",children:"Poppins"}),s.jsx(q.Option,{value:"Montserrat",children:"Montserrat"}),s.jsx(q.Option,{value:"Lato",children:"Lato"})]})})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"arabicFont",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"الخط العربي":"Arabic Font"}),rules:[{required:!0}],children:s.jsxs(q,{size:"large",children:[s.jsx(q.Option,{value:"Cairo",children:"Cairo"}),s.jsx(q.Option,{value:"Tajawal",children:"Tajawal"}),s.jsx(q.Option,{value:"Almarai",children:"Almarai"}),s.jsx(q.Option,{value:"Changa",children:"Changa"}),s.jsx(q.Option,{value:"IBM Plex Sans Arabic",children:"IBM Plex Sans Arabic"}),s.jsx(q.Option,{value:"Noto Sans Arabic",children:"Noto Sans Arabic"})]})})})]})})}),s.jsx(V,{className:"border-0 shadow-sm",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500 to-pink-600 flex items-center justify-center",children:s.jsx(Pj,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx(xn,{level:5,className:"mb-0",children:e==="ar"?"الألوان":"Colors"}),s.jsx(ar,{type:"secondary",className:"text-xs",children:e==="ar"?"تخصيص ألوان المنصة":"Customize platform colors"})]})]}),children:s.jsx(E,{form:u,layout:"vertical",children:s.jsxs(ie,{gutter:[16,16],children:[s.jsx($,{xs:24,md:12,children:s.jsxs(E.Item,{name:"primaryColor",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اللون الأساسي":"Primary Color"}),rules:[{required:!0}],children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(z,{type:"color",value:a.primaryColor,onChange:j=>{u.setFieldValue("primaryColor",j.target.value),i({primaryColor:j.target.value})},className:"w-16 h-12 rounded-lg cursor-pointer",style:{border:"none"}}),s.jsx(z,{size:"large",value:a.primaryColor,onChange:j=>{u.setFieldValue("primaryColor",j.target.value),i({primaryColor:j.target.value})},placeholder:"#7a8c66"})]}),s.jsx("div",{className:"mt-2 h-8 rounded-lg",style:{backgroundColor:a.primaryColor}})]})}),s.jsx($,{xs:24,md:12,children:s.jsxs(E.Item,{name:"secondaryColor",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اللون الثانوي":"Secondary Color"}),rules:[{required:!0}],children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(z,{type:"color",value:a.secondaryColor,onChange:j=>{u.setFieldValue("secondaryColor",j.target.value),i({secondaryColor:j.target.value})},className:"w-16 h-12 rounded-lg cursor-pointer",style:{border:"none"}}),s.jsx(z,{size:"large",value:a.secondaryColor,onChange:j=>{u.setFieldValue("secondaryColor",j.target.value),i({secondaryColor:j.target.value})},placeholder:"#14b8a6"})]}),s.jsx("div",{className:"mt-2 h-8 rounded-lg",style:{backgroundColor:a.secondaryColor}})]})})]})})}),s.jsx(V,{className:"border-0 shadow-sm",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center",children:s.jsx(Zn,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx(xn,{level:5,className:"mb-0",children:e==="ar"?"الرسوم المتحركة":"Animations"}),s.jsx(ar,{type:"secondary",className:"text-xs",children:e==="ar"?"إعدادات الرسوم المتحركة":"Animation settings"})]})]}),children:s.jsx(E,{form:u,layout:"vertical",children:s.jsxs(ie,{gutter:[16,16],children:[s.jsx($,{xs:24,md:12,children:s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zn,{className:"text-lg text-gray-600"}),s.jsxs("div",{children:[s.jsx(ar,{strong:!0,children:e==="ar"?"تفعيل الرسوم المتحركة":"Enable Animations"}),s.jsx("br",{}),s.jsx(ar,{type:"secondary",className:"text-xs",children:e==="ar"?"تفعيل أو تعطيل الرسوم المتحركة":"Enable or disable animations"})]})]}),s.jsx(E.Item,{name:"animationsEnabled",valuePropName:"checked",className:"mb-0",children:s.jsx(Nn,{})})]})}),s.jsx($,{xs:24,md:12,children:s.jsx(E.Item,{name:"animationSpeed",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"سرعة الرسوم المتحركة":"Animation Speed"}),children:s.jsxs(Sn.Group,{size:"large",children:[s.jsx(Sn.Button,{value:"slow",children:e==="ar"?"بطيء":"Slow"}),s.jsx(Sn.Button,{value:"normal",children:e==="ar"?"عادي":"Normal"}),s.jsx(Sn.Button,{value:"fast",children:e==="ar"?"سريع":"Fast"})]})})})]})})}),s.jsx(Gt,{message:e==="ar"?"الوضع الفاتح فقط":"Light Mode Only",description:e==="ar"?"المنصة تعمل في الوضع الفاتح فقط لضمان تجربة مستخدم أفضل":"Platform operates in light mode only for better user experience",type:"info",showIcon:!0,icon:s.jsx(Qu,{}),className:"mb-4"}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(P,{size:"large",onClick:()=>{u.setFieldsValue({dashboardName:a.dashboardName,dashboardNameAr:a.dashboardNameAr,websiteName:a.websiteName||a.dashboardName,websiteNameAr:a.websiteNameAr||a.dashboardNameAr,primaryFont:a.primaryFont,arabicFont:a.arabicFont,animationsEnabled:a.animationsEnabled,animationSpeed:a.animationSpeed,primaryColor:a.primaryColor,secondaryColor:a.secondaryColor})},children:e==="ar"?"إعادة تعيين":"Reset"}),s.jsx(P,{type:"primary",htmlType:"submit",icon:s.jsx(wa,{}),size:"large",loading:d,onClick:()=>u.submit(),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ الإعدادات":"Save Settings"})]})]})}];return s.jsx("div",{className:"min-h-screen dashboard-bg",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx(xn,{level:1,className:"mb-3 gradient-text text-4xl sm:text-5xl font-extrabold",children:e==="ar"?"الإعدادات":"Settings"}),s.jsx(ar,{className:"text-gray-600 text-lg font-medium",children:e==="ar"?"إدارة إعدادات المنصة والتكاملات والمظهر":"Manage platform settings, integrations, and appearance"})]}),s.jsx(Ia,{count:4,showZero:!1,children:s.jsx(P,{icon:s.jsx(co,{}),size:"large",className:"glass-card border-0 shadow-professional",children:e==="ar"?"الإعدادات السريعة":"Quick Settings"})})]})}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 overflow-hidden",styles:{body:{padding:0}},children:s.jsx(vs,{items:S,activeKey:h,onChange:p,size:"large",type:"line",className:"settings-tabs px-6 pt-4",tabBarStyle:{marginBottom:0,borderBottom:"1px solid #f0f0f0"}})})]})})},dQ=()=>{const{t,language:e}=je(),[r,n]=A.useState([]),[a,i]=A.useState([]),[o,l]=A.useState(null),[c,u]=A.useState({logs:!1,stats:!1}),[d,f]=A.useState("all"),[h,p]=A.useState("all");A.useEffect(()=>{g(),x(),m()},[d,h]);const g=async()=>{try{u(j=>({...j,stats:!0}));const S=await Xu.getSecurityStats();l(S)}catch(S){console.error("Error fetching security stats:",S)}finally{u(S=>({...S,stats:!1}))}},x=async()=>{try{u(C=>({...C,logs:!0}));const S={};d!=="all"&&(S.level=d);const j=await Xu.getSystemLogs(S);n(j.logs||[])}catch(S){console.error("Error fetching system logs:",S)}finally{u(S=>({...S,logs:!1}))}},m=async()=>{try{const S={};h!=="all"&&(S.action=h);const j=await Xu.getAuditLogs(S);i(j.logs||[])}catch(S){console.error("Error fetching audit logs:",S)}},y=S=>({INFO:"blue",WARNING:"orange",ERROR:"red",CRITICAL:"magenta"})[S]||"default",v=S=>({CREATE:"green",UPDATE:"blue",DELETE:"red",LOGIN:"cyan",LOGOUT:"gray"})[S]||"default",w=[{title:e==="ar"?"المستوى":"Level",dataIndex:"level",key:"level",render:S=>s.jsx(le,{color:y(S),children:S})},{title:e==="ar"?"الرسالة":"Message",dataIndex:"message",key:"message",ellipsis:!0},{title:e==="ar"?"المستخدم":"User",dataIndex:["user","email"],key:"user",render:S=>S||"-"},{title:e==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:S=>de(S).format("YYYY-MM-DD HH:mm:ss")}],N=[{title:e==="ar"?"الإجراء":"Action",dataIndex:"action",key:"action",render:S=>s.jsx(le,{color:v(S),children:S})},{title:e==="ar"?"النوع":"Resource Type",dataIndex:"resourceType",key:"resourceType"},{title:e==="ar"?"المستخدم":"User",dataIndex:["user","email"],key:"user"},{title:e==="ar"?"الوصف":"Description",dataIndex:"description",key:"description",ellipsis:!0},{title:e==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:S=>de(S).format("YYYY-MM-DD HH:mm:ss")}],b=[{key:"security",label:e==="ar"?"الأمان":"Security",icon:s.jsx(oR,{}),children:s.jsxs("div",{children:[o&&s.jsxs(ie,{gutter:[16,16],className:"mb-6",children:[s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Be,{title:e==="ar"?"تسجيلات الدخول":"Total Logins",value:o.stats?.totalLogins||0,valueStyle:{color:"#1890ff"}})})}),s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Be,{title:e==="ar"?"فشل تسجيل الدخول":"Failed Logins",value:o.stats?.failedLogins||0,valueStyle:{color:"#ff4d4f"}})})}),s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Be,{title:e==="ar"?"أنشطة مشبوهة":"Suspicious Activities",value:o.stats?.suspiciousActivities||0,valueStyle:{color:"#faad14"}})})}),s.jsx($,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Be,{title:e==="ar"?"المستخدمون النشطون":"Active Users",value:o.stats?.activeUsers||0,valueStyle:{color:"#52c41a"}})})})]}),o?.recentAudits&&o.recentAudits.length>0&&s.jsx(V,{title:e==="ar"?"العمليات الأخيرة":"Recent Activities",children:s.jsx(rt,{columns:N,dataSource:o.recentAudits,rowKey:"id",pagination:!1,size:"small"})})]})},{key:"system-logs",label:e==="ar"?"سجلات النظام":"System Logs",icon:s.jsx(Ct,{}),children:s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[s.jsxs(q,{value:d,onChange:f,style:{width:150},children:[s.jsx(q.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(q.Option,{value:"INFO",children:"INFO"}),s.jsx(q.Option,{value:"WARNING",children:"WARNING"}),s.jsx(q.Option,{value:"ERROR",children:"ERROR"}),s.jsx(q.Option,{value:"CRITICAL",children:"CRITICAL"})]}),s.jsx(P,{icon:s.jsx(Cr,{}),onClick:x,loading:c.logs,children:e==="ar"?"تحديث":"Refresh"})]}),s.jsx(V,{children:s.jsx(rt,{columns:w,dataSource:r,rowKey:"id",loading:c.logs,pagination:{pageSize:20}})})]})},{key:"audit-logs",label:e==="ar"?"سجلات التدقيق":"Audit Logs",icon:s.jsx(JR,{}),children:s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[s.jsxs(q,{value:h,onChange:p,style:{width:150},children:[s.jsx(q.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(q.Option,{value:"CREATE",children:"CREATE"}),s.jsx(q.Option,{value:"UPDATE",children:"UPDATE"}),s.jsx(q.Option,{value:"DELETE",children:"DELETE"}),s.jsx(q.Option,{value:"LOGIN",children:"LOGIN"})]}),s.jsx(P,{icon:s.jsx(Cr,{}),onClick:m,children:e==="ar"?"تحديث":"Refresh"})]}),s.jsx(V,{children:s.jsx(rt,{columns:N,dataSource:a,rowKey:"id",pagination:{pageSize:20}})})]})}];return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:e==="ar"?"المراقبة والأمان":"Monitoring & Security"}),s.jsx("p",{className:"text-gray-500",children:e==="ar"?"مراقبة النظام وسجلات الأمان":"System monitoring and security logs"})]}),s.jsx("h1",{className:"text-3xl font-bold mb-6",children:e==="ar"?"المراقبة والأمان":"Monitoring & Security"}),s.jsx(V,{className:"shadow-lg rounded-xl border-0",children:s.jsx(vs,{items:b})})]})},fQ=()=>{const{t,language:e}=je(),[r,n]=A.useState([]),[a,i]=A.useState([]),[o,l]=A.useState(!1),[c,u]=A.useState(!1),[d,f]=A.useState(null),[h]=E.useForm();A.useEffect(()=>{p(),g()},[]);const p=async()=>{try{l(!0);const S=await Bs.getPermissions();n(S.permissions||[])}catch(S){console.error("Error fetching permissions:",S),_.error(e==="ar"?"فشل تحميل الصلاحيات":"Failed to load permissions")}finally{l(!1)}},g=async()=>{try{const S=await Bs.getRoles();i(S.roles||[])}catch(S){console.error("Error fetching roles:",S),_.error(e==="ar"?"فشل تحميل الأدوار":"Failed to load roles")}},x=async()=>{try{await Bs.initializePermissions(),_.success(e==="ar"?"تم تهيئة الصلاحيات بنجاح":"Permissions initialized successfully"),p()}catch(S){_.error(S.message||(e==="ar"?"فشل تهيئة الصلاحيات":"Failed to initialize permissions"))}},m=async S=>{try{d?(await Bs.updateRole(d.id,S),_.success(e==="ar"?"تم تحديث الدور بنجاح":"Role updated successfully")):(await Bs.createRole(S),_.success(e==="ar"?"تم إنشاء الدور بنجاح":"Role created successfully")),u(!1),f(null),h.resetFields(),g()}catch(j){_.error(j.message||(e==="ar"?"فشل حفظ الدور":"Failed to save role"))}},y=async S=>{try{await Bs.deleteRole(S),_.success(e==="ar"?"تم حذف الدور بنجاح":"Role deleted successfully"),g()}catch(j){_.error(j.message||(e==="ar"?"فشل حذف الدور":"Failed to delete role"))}},v={totalPermissions:r.length,totalRoles:a.length,systemRoles:a.filter(S=>S.isSystem).length,customRoles:a.filter(S=>!S.isSystem).length},w=[{title:e==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",render:(S,j)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"text-olive-green-600"}),s.jsx("span",{className:"font-semibold",children:S}),j.nameAr&&s.jsx(le,{color:"blue",className:"text-xs",children:j.nameAr})]})},{title:e==="ar"?"المورد":"Resource",dataIndex:"resource",key:"resource",render:S=>s.jsx(le,{color:"purple",children:S})},{title:e==="ar"?"الإجراء":"Action",dataIndex:"action",key:"action",render:S=>s.jsx(le,{color:"orange",children:S})},{title:e==="ar"?"الوصف":"Description",dataIndex:"description",key:"description",ellipsis:{showTitle:!1},render:S=>s.jsx(nn,{placement:"topLeft",title:S,children:S||"-"})}],N=[{title:e==="ar"?"الدور":"Role",key:"role",render:(S,j)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-olive-green-400 to-turquoise-400 rounded-lg flex items-center justify-center",children:s.jsx(en,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:j.name}),j.nameAr&&s.jsx("div",{className:"text-sm text-gray-500",children:j.nameAr})]})]})},{title:e==="ar"?"الصلاحيات":"Permissions",key:"permissions",render:(S,j)=>s.jsx(Ia,{count:j.permissions?.length||0,showZero:!0,style:{backgroundColor:"#52c41a"},children:s.jsxs(le,{color:"green",icon:s.jsx(vt,{}),children:[j.permissions?.length||0," ",e==="ar"?"صلاحية":"permissions"]})})},{title:e==="ar"?"المستخدمون":"Users",key:"users",render:(S,j)=>s.jsx(Ia,{count:j._count?.userRoles||0,showZero:!0,style:{backgroundColor:"#1890ff"},children:s.jsxs(le,{color:"blue",icon:s.jsx(ke,{}),children:[j._count?.userRoles||0," ",e==="ar"?"مستخدم":"users"]})})},{title:e==="ar"?"النوع":"Type",key:"type",render:(S,j)=>s.jsx(le,{color:j.isSystem?"blue":"default",icon:j.isSystem?s.jsx(Ht,{}):s.jsx(Ij,{}),children:j.isSystem?e==="ar"?"نظام":"System":e==="ar"?"مخصص":"Custom"})},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(S,j)=>s.jsxs(fe,{children:[s.jsx(nn,{title:e==="ar"?"تعديل":"Edit",children:s.jsx(P,{type:"primary",icon:s.jsx(kr,{}),onClick:()=>{f(j),h.setFieldsValue({name:j.name,nameAr:j.nameAr,description:j.description,permissionIds:j.permissions?.map(C=>C.permissionId)||[]}),u(!0)}})}),!j.isSystem&&s.jsx(Ma,{title:e==="ar"?"حذف الدور":"Delete Role",description:e==="ar"?"هل أنت متأكد من حذف هذا الدور؟":"Are you sure you want to delete this role?",onConfirm:()=>y(j.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:s.jsx(nn,{title:e==="ar"?"حذف":"Delete",children:s.jsx(P,{danger:!0,icon:s.jsx(un,{})})})})]})}],b=[{key:"permissions",label:s.jsxs("span",{children:[s.jsx(Kn,{className:"mr-2"}),e==="ar"?"الصلاحيات":"Permissions"]}),children:s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[s.jsx(P,{icon:s.jsx(Cr,{}),onClick:p,loading:o,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx(vt,{}),onClick:x,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"تهيئة الصلاحيات الافتراضية":"Initialize Default Permissions"})]}),s.jsx(V,{className:"shadow-sm",children:s.jsx(rt,{columns:w,dataSource:r,rowKey:"id",loading:o,pagination:{pageSize:20}})})]})},{key:"roles",label:s.jsxs("span",{children:[s.jsx(en,{className:"mr-2"}),e==="ar"?"الأدوار":"Roles"]}),children:s.jsxs("div",{children:[s.jsx("div",{className:"mb-6 flex justify-end",children:s.jsx(P,{type:"primary",icon:s.jsx(br,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{f(null),h.resetFields(),u(!0)},children:e==="ar"?"إضافة دور":"Add Role"})}),s.jsx(V,{className:"shadow-sm",children:s.jsx(rt,{columns:N,dataSource:a,rowKey:"id",pagination:{pageSize:10}})})]})}];return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:e==="ar"?"الصلاحيات والأدوار":"Permissions & Roles"}),s.jsx("p",{className:"text-gray-500 text-lg",children:e==="ar"?"إدارة الصلاحيات والأدوار للمستخدمين والتحكم في الوصول":"Manage user permissions and roles, control access"})]}),s.jsxs(ie,{gutter:[16,16],className:"mb-6",children:[s.jsx($,{xs:24,sm:12,lg:6,children:s.jsx(V,{className:"shadow-sm border-l-4 border-l-blue-500",children:s.jsx(Be,{title:e==="ar"?"إجمالي الصلاحيات":"Total Permissions",value:v.totalPermissions,prefix:s.jsx(Kn,{className:"text-blue-500"}),valueStyle:{color:"#1890ff"}})})}),s.jsx($,{xs:24,sm:12,lg:6,children:s.jsx(V,{className:"shadow-sm border-l-4 border-l-green-500",children:s.jsx(Be,{title:e==="ar"?"إجمالي الأدوار":"Total Roles",value:v.totalRoles,prefix:s.jsx(en,{className:"text-green-500"}),valueStyle:{color:"#52c41a"}})})}),s.jsx($,{xs:24,sm:12,lg:6,children:s.jsx(V,{className:"shadow-sm border-l-4 border-l-purple-500",children:s.jsx(Be,{title:e==="ar"?"أدوار النظام":"System Roles",value:v.systemRoles,prefix:s.jsx(Ht,{className:"text-purple-500"}),valueStyle:{color:"#722ed1"}})})}),s.jsx($,{xs:24,sm:12,lg:6,children:s.jsx(V,{className:"shadow-sm border-l-4 border-l-orange-500",children:s.jsx(Be,{title:e==="ar"?"أدوار مخصصة":"Custom Roles",value:v.customRoles,prefix:s.jsx(Ij,{className:"text-orange-500"}),valueStyle:{color:"#fa8c16"}})})})]}),s.jsx(V,{className:"shadow-lg rounded-xl border-0",children:s.jsx(vs,{items:b,size:"large"})}),s.jsx(He,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(en,{className:"text-olive-green-600"}),s.jsx("span",{children:d?e==="ar"?"تعديل الدور":"Edit Role":e==="ar"?"إضافة دور":"Add Role"})]}),open:c,onCancel:()=>{u(!1),f(null),h.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:800,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:h,layout:"vertical",onFinish:m,className:"mt-4",children:[s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"name",label:e==="ar"?"الاسم":"Name",rules:[{required:!0,message:e==="ar"?"الرجاء إدخال الاسم":"Please enter name"}],children:s.jsx(z,{placeholder:e==="ar"?"اسم الدور":"Role name",prefix:s.jsx(en,{})})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"nameAr",label:e==="ar"?"الاسم (عربي)":"Name (Arabic)",children:s.jsx(z,{placeholder:e==="ar"?"اسم الدور بالعربية":"Role name in Arabic"})})})]}),s.jsx(E.Item,{name:"description",label:e==="ar"?"الوصف":"Description",children:s.jsx(z.TextArea,{rows:3,placeholder:e==="ar"?"وصف الدور":"Role description"})}),s.jsxs(Mt,{orientation:"left",children:[s.jsx(Kn,{className:"mr-2"}),e==="ar"?"الصلاحيات":"Permissions"]}),s.jsx(E.Item,{name:"permissionIds",label:e==="ar"?"اختر الصلاحيات":"Select Permissions",children:s.jsx(Hn.Group,{className:"w-full",children:s.jsx(ie,{gutter:[16,16],children:r.map(S=>s.jsx($,{xs:24,sm:12,lg:8,children:s.jsx(Hn,{value:S.id,className:"w-full",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"text-olive-green-600"}),s.jsx("span",{className:"font-medium",children:S.nameAr||S.name}),s.jsx(le,{color:"purple",className:"text-xs",children:S.resource})]})})},S.id))})})}),s.jsx(Mt,{}),s.jsx(E.Item,{className:"mb-0",children:s.jsxs(fe,{className:"w-full justify-end",children:[s.jsx(P,{onClick:()=>{u(!1),f(null),h.resetFields()},children:e==="ar"?"إلغاء":"Cancel"}),s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",icon:d?s.jsx(kr,{}):s.jsx(br,{}),children:d?e==="ar"?"تحديث":"Update":e==="ar"?"إنشاء":"Create"})]})})]})})]})},{TextArea:z6}=z,hQ=()=>{const{id:t}=ua(),e=nt(),{language:r}=je(),[n,a]=A.useState(!0),[i,o]=A.useState(null),[l,c]=A.useState([]),[u,d]=A.useState([]),[f,h]=A.useState([]),[p,g]=A.useState({deduction:!1,suspend:!1}),[x]=E.useForm();A.useEffect(()=>{m()},[t]);const m=async()=>{try{a(!0);const[S,j,C,k]=await Promise.all([Je.getClientById(t),Je.getClientBookings(t),Je.getClientPayments(t),Je.getClientReports(t)]);o(S.client),c(j.bookings||[]),d(C.payments||[]),h(k.reports||[])}catch(S){console.error("Error fetching client details:",S),_.error(S.message||(r==="ar"?"فشل تحميل البيانات":"Failed to load data"))}finally{a(!1)}},y=async S=>{try{await Je.deductFromClient(t,S.amount,S.reason),_.success(r==="ar"?"تم خصم المبلغ بنجاح":"Amount deducted successfully"),g({...p,deduction:!1}),x.resetFields(),m()}catch(j){_.error(j.message||(r==="ar"?"فشل الخصم":"Failed to deduct"))}},v=async S=>{try{await Je.suspendClient(t,S.reason,S.duration),_.success(r==="ar"?"تم تعليق الحساب بنجاح":"Account suspended successfully"),g({...p,suspend:!1}),x.resetFields(),m()}catch(j){_.error(j.message||(r==="ar"?"فشل تعليق الحساب":"Failed to suspend account"))}},w=[{title:r==="ar"?"التاريخ":"Date",dataIndex:"scheduledAt",key:"scheduledAt",render:S=>de(S).format("YYYY-MM-DD HH:mm")},{title:r==="ar"?"المستشار":"Consultant",dataIndex:"consultantName",key:"consultantName"},{title:r==="ar"?"الخدمة":"Service",dataIndex:"serviceName",key:"serviceName"},{title:r==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:S=>{const j={PENDING:"orange",CONFIRMED:"blue",COMPLETED:"green",CANCELLED:"red"};return s.jsx(le,{color:j[S],children:S})}},{title:r==="ar"?"السعر":"Price",dataIndex:"price",key:"price",render:S=>`${S} SAR`}],N=[{title:r==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:S=>de(S).format("YYYY-MM-DD HH:mm")},{title:r==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:S=>`${S} SAR`},{title:r==="ar"?"الطريقة":"Method",dataIndex:"method",key:"method"},{title:r==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:S=>{const j={PENDING:"orange",COMPLETED:"green",FAILED:"red",REFUNDED:"blue"};return s.jsx(le,{color:j[S],children:S})}},{title:r==="ar"?"رقم المعاملة":"Transaction ID",dataIndex:"transactionId",key:"transactionId"}];if(n)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})});if(!i)return s.jsx(Gt,{message:r==="ar"?"العميل غير موجود":"Client not found",type:"error",action:s.jsx(P,{onClick:()=>e("/admin/clients"),children:r==="ar"?"العودة":"Go Back"})});const b=[{key:"overview",label:r==="ar"?"نظرة عامة":"Overview",icon:s.jsx(ke,{}),children:s.jsx(V,{children:s.jsxs(ve,{title:r==="ar"?"معلومات العميل":"Client Information",column:2,children:[s.jsxs(ve.Item,{label:r==="ar"?"الاسم الكامل":"Full Name",children:[i.firstName," ",i.lastName]}),s.jsx(ve.Item,{label:r==="ar"?"البريد الإلكتروني":"Email",children:i.user?.email}),s.jsx(ve.Item,{label:r==="ar"?"رقم الهاتف":"Phone",children:i.user?.phone||"-"}),s.jsx(ve.Item,{label:r==="ar"?"المدينة":"City",children:i.city||"-"}),s.jsx(ve.Item,{label:r==="ar"?"القطاع":"Sector",children:i.sector||"-"}),s.jsx(ve.Item,{label:r==="ar"?"اسم الشركة":"Company Name",children:i.companyName||"-"}),s.jsx(ve.Item,{label:r==="ar"?"الحالة":"Status",children:s.jsx(le,{color:i.user?.isActive?"green":"red",children:i.user?.isActive?r==="ar"?"نشط":"Active":r==="ar"?"معلق":"Suspended"})}),s.jsx(ve.Item,{label:r==="ar"?"تاريخ التسجيل":"Registration Date",children:de(i.createdAt).format("YYYY-MM-DD")})]})})},{key:"bookings",label:r==="ar"?"الحجوزات":"Bookings",icon:s.jsx(Dt,{}),children:s.jsx(rt,{columns:w,dataSource:l,rowKey:"id",pagination:{pageSize:10}})},{key:"payments",label:r==="ar"?"المدفوعات":"Payments",icon:s.jsx(tr,{}),children:s.jsx(rt,{columns:N,dataSource:u,rowKey:"id",pagination:{pageSize:10}})},{key:"reports",label:r==="ar"?"التقارير":"Reports",icon:s.jsx(Ct,{}),children:s.jsx("div",{children:f.map(S=>s.jsxs(V,{className:"mb-4",children:[s.jsx("h3",{children:S.title}),s.jsx("p",{className:"text-gray-600",children:S.summary}),s.jsx(le,{children:S.status})]},S.id))})}];return s.jsx("div",{className:"min-h-screen bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(P,{icon:s.jsx(Da,{}),onClick:()=>e("/admin/clients"),children:r==="ar"?"العودة":"Back"}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[i.firstName," ",i.lastName]}),s.jsx("p",{className:"text-gray-500",children:i.user?.email})]})]}),s.jsxs(fe,{children:[s.jsx(P,{icon:s.jsx(HC,{}),onClick:()=>g({...p,deduction:!0}),children:r==="ar"?"خصم":"Deduction"}),s.jsx(P,{danger:!0,icon:s.jsx(fo,{}),onClick:()=>g({...p,suspend:!0}),children:r==="ar"?"تعليق الحساب":"Suspend Account"})]})]}),s.jsxs(ie,{gutter:16,className:"mb-6",children:[s.jsx($,{span:6,children:s.jsx(V,{children:s.jsx(Be,{title:r==="ar"?"إجمالي الحجوزات":"Total Bookings",value:l.length,prefix:s.jsx(Dt,{})})})}),s.jsx($,{span:6,children:s.jsx(V,{children:s.jsx(Be,{title:r==="ar"?"إجمالي المدفوعات":"Total Payments",value:u.reduce((S,j)=>S+(parseFloat(j.amount)||0),0),prefix:s.jsx(tr,{}),suffix:"SAR"})})}),s.jsx($,{span:6,children:s.jsx(V,{children:s.jsx(Be,{title:r==="ar"?"التقارير":"Reports",value:f.length,prefix:s.jsx(Ct,{})})})}),s.jsx($,{span:6,children:s.jsx(V,{children:s.jsx(Be,{title:r==="ar"?"الحالة":"Status",value:i.user?.isActive?r==="ar"?"نشط":"Active":r==="ar"?"معلق":"Suspended",valueStyle:{color:i.user?.isActive?"#52c41a":"#ff4d4f"}})})})]}),s.jsx(V,{children:s.jsx(vs,{items:b})}),s.jsx(He,{title:r==="ar"?"خصم من العميل":"Deduct from Client",open:p.deduction,onCancel:()=>{g({...p,deduction:!1}),x.resetFields()},footer:null,children:s.jsxs(E,{form:x,onFinish:y,layout:"vertical",children:[s.jsx(E.Item,{name:"amount",label:r==="ar"?"المبلغ":"Amount",rules:[{required:!0,type:"number",min:.01}],children:s.jsx(Qn,{prefix:"SAR",style:{width:"100%"},min:.01,step:.01})}),s.jsx(E.Item,{name:"reason",label:r==="ar"?"السبب":"Reason",rules:[{required:!0}],children:s.jsx(z6,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",danger:!0,block:!0,children:r==="ar"?"خصم":"Deduct"})})]})}),s.jsx(He,{title:r==="ar"?"تعليق حساب العميل":"Suspend Client Account",open:p.suspend,onCancel:()=>{g({...p,suspend:!1}),x.resetFields()},footer:null,children:s.jsxs(E,{form:x,onFinish:v,layout:"vertical",children:[s.jsx(E.Item,{name:"reason",label:r==="ar"?"السبب":"Reason",rules:[{required:!0}],children:s.jsx(z6,{rows:4})}),s.jsx(E.Item,{name:"duration",label:r==="ar"?"المدة (أيام)":"Duration (days)",rules:[{required:!0,type:"number",min:1}],children:s.jsx(Qn,{style:{width:"100%"},min:1,placeholder:r==="ar"?"0 = دائم":"0 = Permanent"})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",danger:!0,block:!0,children:r==="ar"?"تعليق":"Suspend"})})]})})]})})},{TextArea:N0}=z,pQ=()=>{const{id:t}=ua(),e=nt(),{language:r}=je(),[n,a]=A.useState(!0),[i,o]=A.useState(null),[l,c]=A.useState([]),[u,d]=A.useState([]),[f,h]=A.useState([]),[p,g]=A.useState({profit:!1,deduction:!1,suspend:!1}),[x]=E.useForm();A.useEffect(()=>{m()},[t]);const m=async()=>{try{a(!0);const[O,I,M,T]=await Promise.all([Je.getConsultantById(t),Je.getConsultantBookings(t),Je.getConsultantEarnings(t),Je.getConsultantWithdrawals(t)]);o(O.consultant),c(I.bookings||[]),d(M.earnings||[]),h(T.withdrawals||[])}catch(O){console.error("Error fetching consultant details:",O),_.error(O.message||(r==="ar"?"فشل تحميل البيانات":"Failed to load data"))}finally{a(!1)}},y=async O=>{try{await Je.sendProfitToConsultant(t,O.amount,O.notes),_.success(r==="ar"?"تم إرسال الربح بنجاح":"Profit sent successfully"),g({...p,profit:!1}),x.resetFields(),m()}catch(I){_.error(I.message||(r==="ar"?"فشل إرسال الربح":"Failed to send profit"))}},v=async O=>{try{await Je.deductFromConsultant(t,O.amount,O.reason),_.success(r==="ar"?"تم خصم المبلغ بنجاح":"Amount deducted successfully"),g({...p,deduction:!1}),x.resetFields(),m()}catch(I){_.error(I.message||(r==="ar"?"فشل الخصم":"Failed to deduct"))}},w=async O=>{try{await Je.suspendConsultant(t,O.reason,O.duration),_.success(r==="ar"?"تم تعليق الحساب بنجاح":"Account suspended successfully"),g({...p,suspend:!1}),x.resetFields(),m()}catch(I){_.error(I.message||(r==="ar"?"فشل تعليق الحساب":"Failed to suspend account"))}},N=[{title:r==="ar"?"التاريخ":"Date",dataIndex:"scheduledAt",key:"scheduledAt",render:O=>de(O).format("YYYY-MM-DD HH:mm")},{title:r==="ar"?"العميل":"Client",dataIndex:"clientName",key:"clientName"},{title:r==="ar"?"الخدمة":"Service",dataIndex:"serviceName",key:"serviceName"},{title:r==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:O=>{const I={PENDING:"orange",CONFIRMED:"blue",COMPLETED:"green",CANCELLED:"red"};return s.jsx(le,{color:I[O],children:O})}},{title:r==="ar"?"السعر":"Price",dataIndex:"price",key:"price",render:O=>`${O} SAR`}],b=[{title:r==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:O=>de(O).format("YYYY-MM-DD HH:mm")},{title:r==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:O=>`${O} SAR`},{title:r==="ar"?"العمولة":"Platform Fee",dataIndex:"platformFee",key:"platformFee",render:O=>`${O} SAR`},{title:r==="ar"?"صافي المبلغ":"Net Amount",dataIndex:"netAmount",key:"netAmount",render:O=>`${O} SAR`},{title:r==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:O=>{const I={pending:"orange",available:"green",withdrawn:"blue"};return s.jsx(le,{color:I[O],children:O})}}],S=[{title:r==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:O=>de(O).format("YYYY-MM-DD HH:mm")},{title:r==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:O=>`${O} SAR`},{title:r==="ar"?"اسم البنك":"Bank Name",dataIndex:"bankName",key:"bankName"},{title:r==="ar"?"رقم الحساب":"Account Number",dataIndex:"accountNumber",key:"accountNumber"},{title:r==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:O=>{const I={PENDING:"orange",APPROVED:"green",REJECTED:"red",COMPLETED:"blue"};return s.jsx(le,{color:I[O],children:O})}}];if(n)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})});if(!i)return s.jsx(Gt,{message:r==="ar"?"المستشار غير موجود":"Consultant not found",type:"error",action:s.jsx(P,{onClick:()=>e("/admin/consultants"),children:r==="ar"?"العودة":"Go Back"})});const j=u.reduce((O,I)=>O+(parseFloat(I.netAmount)||0),0),C=u.filter(O=>O.status==="available").reduce((O,I)=>O+(parseFloat(I.netAmount)||0),0),k=[{key:"overview",label:r==="ar"?"نظرة عامة":"Overview",children:s.jsxs(V,{children:[s.jsxs(ve,{title:r==="ar"?"معلومات المستشار":"Consultant Information",column:2,children:[s.jsxs(ve.Item,{label:r==="ar"?"الاسم الكامل":"Full Name",children:[i.firstName," ",i.lastName]}),s.jsx(ve.Item,{label:r==="ar"?"البريد الإلكتروني":"Email",children:i.user?.email}),s.jsx(ve.Item,{label:r==="ar"?"الدرجة العلمية":"Academic Degree",children:i.academicDegree}),s.jsx(ve.Item,{label:r==="ar"?"التخصص":"Specialization",children:i.specialization}),s.jsxs(ve.Item,{label:r==="ar"?"سعر الجلسة":"Price Per Session",children:[i.pricePerSession," SAR"]}),s.jsxs(ve.Item,{label:r==="ar"?"التقييم":"Rating",children:[s.jsx(ra,{disabled:!0,value:i.rating||0,allowHalf:!0}),s.jsxs("span",{className:"ml-2",children:["(",i.totalRatings||0," ",r==="ar"?"تقييم":"ratings",")"]})]}),s.jsx(ve.Item,{label:r==="ar"?"الحالة":"Status",children:s.jsxs(fe,{children:[s.jsx(le,{color:i.user?.isActive?"green":"red",children:i.user?.isActive?r==="ar"?"نشط":"Active":r==="ar"?"معلق":"Suspended"}),i.isVerified&&s.jsx(le,{color:"blue",icon:s.jsx(OC,{}),children:r==="ar"?"موثق":"Verified"}),s.jsx(le,{color:i.isAvailable?"green":"orange",children:i.isAvailable?r==="ar"?"متاح":"Available":r==="ar"?"غير متاح":"Unavailable"})]})}),s.jsxs(ve.Item,{label:r==="ar"?"إجمالي الأرباح":"Total Earnings",children:[i.totalEarnings||0," SAR"]})]}),i.bio&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"font-bold mb-2",children:r==="ar"?"السيرة الذاتية":"Bio"}),s.jsx("p",{className:"text-gray-600",children:i.bio})]})]})},{key:"bookings",label:r==="ar"?"الحجوزات":"Bookings",children:s.jsx(rt,{columns:N,dataSource:l,rowKey:"id",pagination:{pageSize:10}})},{key:"earnings",label:r==="ar"?"الأرباح":"Earnings",children:s.jsx(rt,{columns:b,dataSource:u,rowKey:"id",pagination:{pageSize:10}})},{key:"withdrawals",label:r==="ar"?"السحوبات":"Withdrawals",children:s.jsx(rt,{columns:S,dataSource:f,rowKey:"id",pagination:{pageSize:10}})}];return s.jsx("div",{className:"min-h-screen bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(P,{icon:s.jsx(Da,{}),onClick:()=>e("/admin/consultants"),children:r==="ar"?"العودة":"Back"}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[i.firstName," ",i.lastName]}),s.jsx("p",{className:"text-gray-500",children:i.user?.email})]})]}),s.jsxs(fe,{children:[s.jsx(P,{type:"primary",icon:s.jsx(JM,{}),onClick:()=>g({...p,profit:!0}),children:r==="ar"?"إرسال ربح":"Send Profit"}),s.jsx(P,{icon:s.jsx(HC,{}),onClick:()=>g({...p,deduction:!0}),children:r==="ar"?"خصم":"Deduction"}),s.jsx(P,{danger:!0,icon:s.jsx(fo,{}),onClick:()=>g({...p,suspend:!0}),children:r==="ar"?"تعليق الحساب":"Suspend Account"})]})]}),s.jsxs(ie,{gutter:16,className:"mb-6",children:[s.jsx($,{span:6,children:s.jsx(V,{children:s.jsx(Be,{title:r==="ar"?"إجمالي الحجوزات":"Total Bookings",value:l.length,prefix:s.jsx(Dt,{})})})}),s.jsx($,{span:6,children:s.jsx(V,{children:s.jsx(Be,{title:r==="ar"?"إجمالي الأرباح":"Total Earnings",value:j,prefix:s.jsx(tr,{}),suffix:"SAR"})})}),s.jsx($,{span:6,children:s.jsx(V,{children:s.jsx(Be,{title:r==="ar"?"الأرباح المتاحة":"Available Earnings",value:C,prefix:s.jsx(GR,{}),suffix:"SAR",valueStyle:{color:"#52c41a"}})})}),s.jsx($,{span:6,children:s.jsx(V,{children:s.jsx(Be,{title:r==="ar"?"التقييم":"Rating",value:i.rating||0,prefix:s.jsx(uo,{}),suffix:"/ 5",valueStyle:{color:"#faad14"}})})})]}),s.jsx(V,{children:s.jsx(vs,{items:k})}),s.jsx(He,{title:r==="ar"?"إرسال ربح للمستشار":"Send Profit to Consultant",open:p.profit,onCancel:()=>{g({...p,profit:!1}),x.resetFields()},footer:null,children:s.jsxs(E,{form:x,onFinish:y,layout:"vertical",children:[s.jsx(E.Item,{name:"amount",label:r==="ar"?"المبلغ":"Amount",rules:[{required:!0,type:"number",min:.01}],children:s.jsx(Qn,{prefix:"SAR",style:{width:"100%"},min:.01,step:.01})}),s.jsx(E.Item,{name:"notes",label:r==="ar"?"ملاحظات":"Notes",children:s.jsx(N0,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:r==="ar"?"إرسال":"Send"})})]})}),s.jsx(He,{title:r==="ar"?"خصم من المستشار":"Deduct from Consultant",open:p.deduction,onCancel:()=>{g({...p,deduction:!1}),x.resetFields()},footer:null,children:s.jsxs(E,{form:x,onFinish:v,layout:"vertical",children:[s.jsx(E.Item,{name:"amount",label:r==="ar"?"المبلغ":"Amount",rules:[{required:!0,type:"number",min:.01}],children:s.jsx(Qn,{prefix:"SAR",style:{width:"100%"},min:.01,step:.01})}),s.jsx(E.Item,{name:"reason",label:r==="ar"?"السبب":"Reason",rules:[{required:!0}],children:s.jsx(N0,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",danger:!0,block:!0,children:r==="ar"?"خصم":"Deduct"})})]})}),s.jsx(He,{title:r==="ar"?"تعليق حساب المستشار":"Suspend Consultant Account",open:p.suspend,onCancel:()=>{g({...p,suspend:!1}),x.resetFields()},footer:null,children:s.jsxs(E,{form:x,onFinish:w,layout:"vertical",children:[s.jsx(E.Item,{name:"reason",label:r==="ar"?"السبب":"Reason",rules:[{required:!0}],children:s.jsx(N0,{rows:4})}),s.jsx(E.Item,{name:"duration",label:r==="ar"?"المدة (أيام)":"Duration (days)",rules:[{required:!0,type:"number",min:1}],children:s.jsx(Qn,{style:{width:"100%"},min:1,placeholder:r==="ar"?"0 = دائم":"0 = Permanent"})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",danger:!0,block:!0,children:r==="ar"?"تعليق":"Suspend"})})]})})]})})};var A0={exports:{}},C0={};var F6;function mQ(){if(F6)return C0;F6=1;var t=nb();function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,a=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function l(f,h){var p=h(),g=n({inst:{value:p,getSnapshot:h}}),x=g[0].inst,m=g[1];return i(function(){x.value=p,x.getSnapshot=h,c(x)&&m({inst:x})},[f,p,h]),a(function(){return c(x)&&m({inst:x}),f(function(){c(x)&&m({inst:x})})},[f]),o(p),p}function c(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!r(f,p)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return C0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,C0}var B6;function v8(){return B6||(B6=1,A0.exports=mQ()),A0.exports}var b8=v8();function xr(t){this.content=t}xr.prototype={constructor:xr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,a=n.find(t),i=n.content.slice();return a==-1?i.push(r||t,e):(i[a+1]=e,r&&(i[a]=r)),new xr(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new xr(r)},addToStart:function(t,e){return new xr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new xr(r)},addBefore:function(t,e,r){var n=this.remove(e),a=n.content.slice(),i=n.find(t);return a.splice(i==-1?a.length:i,0,e,r),new xr(a)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=xr.from(t),t.size?new xr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=xr.from(t),t.size?new xr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=xr.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};xr.from=function(t){if(t instanceof xr)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new xr(e)};function j8(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let a=t.child(n),i=e.child(n);if(a==i){r+=a.nodeSize;continue}if(!a.sameMarkup(i))return r;if(a.isText&&a.text!=i.text){for(let o=0;a.text[o]==i.text[o];o++)r++;return r}if(a.content.size||i.content.size){let o=j8(a.content,i.content,r+1);if(o!=null)return o}r+=a.nodeSize}}function w8(t,e,r,n){for(let a=t.childCount,i=e.childCount;;){if(a==0||i==0)return a==i?null:{a:r,b:n};let o=t.child(--a),l=e.child(--i),c=o.nodeSize;if(o==l){r-=c,n-=c;continue}if(!o.sameMarkup(l))return{a:r,b:n};if(o.isText&&o.text!=l.text){let u=0,d=Math.min(o.text.length,l.text.length);for(;u<d&&o.text[o.text.length-u-1]==l.text[l.text.length-u-1];)u++,r--,n--;return{a:r,b:n}}if(o.content.size||l.content.size){let u=w8(o.content,l.content,r-1,n-1);if(u)return u}r-=c,n-=c}}class re{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,a=0,i){for(let o=0,l=0;l<r;o++){let c=this.content[o],u=l+c.nodeSize;if(u>e&&n(c,a+l,i||null,o)!==!1&&c.content.size){let d=l+1;c.nodesBetween(Math.max(0,e-d),Math.min(c.content.size,r-d),n,a+d)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,a){let i="",o=!0;return this.nodesBetween(e,r,(l,c)=>{let u=l.isText?l.text.slice(Math.max(e,c)-c,r-c):l.isLeaf?a?typeof a=="function"?a(l):a:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&n&&(o?o=!1:i+=n),i+=u},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,a=this.content.slice(),i=0;for(r.isText&&r.sameMarkup(n)&&(a[a.length-1]=r.withText(r.text+n.text),i=1);i<e.content.length;i++)a.push(e.content[i]);return new re(a,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],a=0;if(r>e)for(let i=0,o=0;o<r;i++){let l=this.content[i],c=o+l.nodeSize;c>e&&((o<e||c>r)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,r-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,r-o-1))),n.push(l),a+=l.nodeSize),o=c}return new re(n,a)}cutByIndex(e,r){return e==r?re.empty:e==0&&r==this.content.length?this:new re(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let a=this.content.slice(),i=this.size+r.nodeSize-n.nodeSize;return a[e]=r,new re(a,i)}addToStart(e){return new re([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new re(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let a=this.content[r];e(a,n,r),n+=a.nodeSize}}findDiffStart(e,r=0){return j8(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return w8(this,e,r,n)}findIndex(e){if(e==0)return Lu(0,e);if(e==this.size)return Lu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let a=this.child(r),i=n+a.nodeSize;if(i>=e)return i==e?Lu(r+1,i):Lu(r,n);n=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return re.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new re(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return re.empty;let r,n=0;for(let a=0;a<e.length;a++){let i=e[a];n+=i.nodeSize,a&&i.isText&&e[a-1].sameMarkup(i)?(r||(r=e.slice(0,a)),r[r.length-1]=i.withText(r[r.length-1].text+i.text)):r&&r.push(i)}return new re(r||e,n)}static from(e){if(!e)return re.empty;if(e instanceof re)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new re([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}re.empty=new re([],0);const k0={index:0,offset:0};function Lu(t,e){return k0.index=t,k0.offset=e,k0}function ff(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!ff(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!ff(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let bt=class Av{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let a=0;a<e.length;a++){let i=e[a];if(this.eq(i))return e;if(this.type.excludes(i.type))r||(r=e.slice(0,a));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(r||(r=e.slice(0,a)),r.push(this),n=!0),r&&r.push(i)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ff(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let a=n.create(r.attrs);return n.checkAttrs(a.attrs),a}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Av.none;if(e instanceof Av)return[e];let r=e.slice();return r.sort((n,a)=>n.type.rank-a.type.rank),r}};bt.none=[];class hf extends Error{}class ge{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=N8(this.content,e+this.openStart,r);return n&&new ge(n,this.openStart,this.openEnd)}removeBetween(e,r){return new ge(S8(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return ge.empty;let n=r.openStart||0,a=r.openEnd||0;if(typeof n!="number"||typeof a!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ge(re.fromJSON(e,r.content),n,a)}static maxOpen(e,r=!0){let n=0,a=0;for(let i=e.firstChild;i&&!i.isLeaf&&(r||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(r||!i.type.spec.isolating);i=i.lastChild)a++;return new ge(e,n,a)}}ge.empty=new ge(re.empty,0,0);function S8(t,e,r){let{index:n,offset:a}=t.findIndex(e),i=t.maybeChild(n),{index:o,offset:l}=t.findIndex(r);if(a==e||i.isText){if(l!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,i.copy(S8(i.content,e-a-1,r-a-1)))}function N8(t,e,r,n){let{index:a,offset:i}=t.findIndex(e),o=t.maybeChild(a);if(i==e||o.isText)return n&&!n.canReplace(a,a,r)?null:t.cut(0,e).append(r).append(t.cut(e));let l=N8(o.content,e-i-1,r,o);return l&&t.replaceChild(a,o.copy(l))}function gQ(t,e,r){if(r.openStart>t.depth)throw new hf("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new hf("Inconsistent open depths");return A8(t,e,r,0)}function A8(t,e,r,n){let a=t.index(n),i=t.node(n);if(a==e.index(n)&&n<t.depth-r.openStart){let o=A8(t,e,r,n+1);return i.copy(i.content.replaceChild(a,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,l=o.content;return si(o,l.cut(0,t.parentOffset).append(r.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=xQ(r,t);return si(i,k8(t,o,l,e,n))}else return si(i,pf(t,e,n))}function C8(t,e){if(!e.type.compatibleContent(t.type))throw new hf("Cannot join "+e.type.name+" onto "+t.type.name)}function Cv(t,e,r){let n=t.node(r);return C8(n,e.node(r)),n}function ai(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Ql(t,e,r,n){let a=(e||t).node(r),i=0,o=e?e.index(r):a.childCount;t&&(i=t.index(r),t.depth>r?i++:t.textOffset&&(ai(t.nodeAfter,n),i++));for(let l=i;l<o;l++)ai(a.child(l),n);e&&e.depth==r&&e.textOffset&&ai(e.nodeBefore,n)}function si(t,e){return t.type.checkContent(e),t.copy(e)}function k8(t,e,r,n,a){let i=t.depth>a&&Cv(t,e,a+1),o=n.depth>a&&Cv(r,n,a+1),l=[];return Ql(null,t,a,l),i&&o&&e.index(a)==r.index(a)?(C8(i,o),ai(si(i,k8(t,e,r,n,a+1)),l)):(i&&ai(si(i,pf(t,e,a+1)),l),Ql(e,r,a,l),o&&ai(si(o,pf(r,n,a+1)),l)),Ql(n,null,a,l),new re(l)}function pf(t,e,r){let n=[];if(Ql(null,t,r,n),t.depth>r){let a=Cv(t,e,r+1);ai(si(a,pf(t,e,r+1)),n)}return Ql(e,null,r,n),new re(n)}function xQ(t,e){let r=e.depth-t.openStart,a=e.node(r).copy(t.content);for(let i=r-1;i>=0;i--)a=e.node(i).copy(re.from(a));return{start:a.resolveNoCache(t.openStart+r),end:a.resolveNoCache(a.content.size-t.openEnd-r)}}class Yc{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],a=e.child(r);return n?e.child(r).cut(n):a}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],a=r==0?0:this.path[r*3-1]+1;for(let i=0;i<e;i++)a+=n.child(i).nodeSize;return a}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return bt.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),a=e.maybeChild(r);if(!n){let l=n;n=a,a=l}let i=n.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!a||!i[o].isInSet(a.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,a=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)n[i].type.spec.inclusive===!1&&(!a||!n[i].isInSet(a.marks))&&(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new mf(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],a=0,i=r;for(let o=e;;){let{index:l,offset:c}=o.content.findIndex(i),u=i-c;if(n.push(o,l,a+c),!u||(o=o.child(l),o.isText))break;i=u-1,a+=c+1}return new Yc(r,n,i)}static resolveCached(e,r){let n=q6.get(e);if(n)for(let i=0;i<n.elts.length;i++){let o=n.elts[i];if(o.pos==r)return o}else q6.set(e,n=new yQ);let a=n.elts[n.i]=Yc.resolve(e,r);return n.i=(n.i+1)%vQ,a}}class yQ{constructor(){this.elts=[],this.i=0}}const vQ=12,q6=new WeakMap;class mf{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const bQ=Object.create(null);class qn{constructor(e,r,n,a=bt.none){this.type=e,this.attrs=r,this.marks=a,this.content=n||re.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,a=0){this.content.nodesBetween(e,r,n,a,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,a){return this.content.textBetween(e,r,n,a)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&ff(this.attrs,r||e.defaultAttrs||bQ)&&bt.sameSet(this.marks,n||bt.none)}copy(e=null){return e==this.content?this:new qn(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new qn(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return ge.empty;let a=this.resolve(e),i=this.resolve(r),o=n?0:a.sharedDepth(r),l=a.start(o),u=a.node(o).content.cut(a.pos-l,i.pos-l);return new ge(u,a.depth-o,i.depth-o)}replace(e,r,n){return gQ(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:a}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(a==e||r.isText)return r;e-=a+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let a=this.content.child(r-1);return{node:a,index:r-1,offset:n-a.nodeSize}}resolve(e){return Yc.resolveCached(this,e)}resolveNoCache(e){return Yc.resolve(this,e)}rangeHasMark(e,r,n){let a=!1;return r>e&&this.nodesBetween(e,r,i=>(n.isInSet(i.marks)&&(a=!0),!a)),a}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),E8(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=re.empty,a=0,i=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,a,i),l=o&&o.matchFragment(this.content,r);if(!l||!l.validEnd)return!1;for(let c=a;c<i;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0}canReplaceWith(e,r,n,a){if(a&&!this.type.allowsMarks(a))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=bt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!bt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let a=re.fromJSON(e,r.content),i=e.nodeType(r.type).create(r.attrs,a,n);return i.type.checkAttrs(i.attrs),i}}qn.prototype.text=void 0;class gf extends qn{constructor(e,r,n,a){if(super(e,r,null,a),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):E8(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new gf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new gf(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function E8(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class xi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new jQ(e,r);if(n.next==null)return xi.empty;let a=O8(n);n.next&&n.err("Unexpected trailing text");let i=EQ(kQ(a));return OQ(i,n),i}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let a=this;for(let i=r;a&&i<n;i++)a=a.matchType(e.child(i).type);return a}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let a=[this];function i(o,l){let c=o.matchFragment(e,n);if(c&&(!r||c.validEnd))return re.from(l.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:d,next:f}=o.next[u];if(!(d.isText||d.hasRequiredAttrs())&&a.indexOf(f)==-1){a.push(f);let h=i(f,l.concat(d));if(h)return h}}return null}return i(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let a=n.shift(),i=a.match;if(i.matchType(e)){let o=[];for(let l=a;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:l,next:c}=i.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in r)&&(!a.type||c.validEnd)&&(n.push({match:l.contentMatch,type:l,via:a}),r[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let a=0;a<n.next.length;a++)e.indexOf(n.next[a].next)==-1&&r(n.next[a].next)}return r(this),e.map((n,a)=>{let i=a+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)i+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return i}).join(`
`)}}xi.empty=new xi(!0);class jQ{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function O8(t){let e=[];do e.push(wQ(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function wQ(t){let e=[];do e.push(SQ(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function SQ(t){let e=CQ(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=NQ(t,e);else break;return e}function U6(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function NQ(t,e){let r=U6(t),n=r;return t.eat(",")&&(t.next!="}"?n=U6(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function AQ(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let a=[];for(let i in r){let o=r[i];o.isInGroup(e)&&a.push(o)}return a.length==0&&t.err("No node type or group '"+e+"' found"),a}function CQ(t){if(t.eat("(")){let e=O8(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=AQ(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function kQ(t){let e=[[]];return a(i(t,0),r()),e;function r(){return e.push([])-1}function n(o,l,c){let u={term:c,to:l};return e[o].push(u),u}function a(o,l){o.forEach(c=>c.to=l)}function i(o,l){if(o.type=="choice")return o.exprs.reduce((c,u)=>c.concat(i(u,l)),[]);if(o.type=="seq")for(let c=0;;c++){let u=i(o.exprs[c],l);if(c==o.exprs.length-1)return u;a(u,l=r())}else if(o.type=="star"){let c=r();return n(l,c),a(i(o.expr,c),c),[n(c)]}else if(o.type=="plus"){let c=r();return a(i(o.expr,l),c),a(i(o.expr,c),c),[n(c)]}else{if(o.type=="opt")return[n(l)].concat(i(o.expr,l));if(o.type=="range"){let c=l;for(let u=0;u<o.min;u++){let d=r();a(i(o.expr,c),d),c=d}if(o.max==-1)a(i(o.expr,c),c);else for(let u=o.min;u<o.max;u++){let d=r();n(c,d),a(i(o.expr,c),d),c=d}return[n(c)]}else{if(o.type=="name")return[n(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function P8(t,e){return e-t}function V6(t,e){let r=[];return n(e),r.sort(P8);function n(a){let i=t[a];if(i.length==1&&!i[0].term)return n(i[0].to);r.push(a);for(let o=0;o<i.length;o++){let{term:l,to:c}=i[o];!l&&r.indexOf(c)==-1&&n(c)}}}function EQ(t){let e=Object.create(null);return r(V6(t,0));function r(n){let a=[];n.forEach(o=>{t[o].forEach(({term:l,to:c})=>{if(!l)return;let u;for(let d=0;d<a.length;d++)a[d][0]==l&&(u=a[d][1]);V6(t,c).forEach(d=>{u||a.push([l,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let i=e[n.join(",")]=new xi(n.indexOf(t.length-1)>-1);for(let o=0;o<a.length;o++){let l=a[o][1].sort(P8);i.next.push({type:a[o][0],next:e[l.join(",")]||r(l)})}return i}}function OQ(t,e){for(let r=0,n=[t];r<n.length;r++){let a=n[r],i=!a.validEnd,o=[];for(let l=0;l<a.next.length;l++){let{type:c,next:u}=a.next[l];o.push(c.name),i&&!(c.isText||c.hasRequiredAttrs())&&(i=!1),n.indexOf(u)==-1&&n.push(u)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function T8(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function I8(t,e){let r=Object.create(null);for(let n in t){let a=e&&e[n];if(a===void 0){let i=t[n];if(i.hasDefault)a=i.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=a}return r}function M8(t,e,r,n){for(let a in e)if(!(a in t))throw new RangeError(`Unsupported attribute ${a} for ${r} of type ${a}`);for(let a in t){let i=t[a];i.validate&&i.validate(e[a])}}function R8(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new TQ(t,n,e[n]);return r}let H6=class _8{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=R8(e,n.attrs),this.defaultAttrs=T8(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==xi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:I8(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new qn(this,this.computeAttrs(e),re.from(r),bt.setFrom(n))}createChecked(e=null,r,n){return r=re.from(r),this.checkContent(r),new qn(this,this.computeAttrs(e),r,bt.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=re.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let a=this.contentMatch.matchFragment(r),i=a&&a.fillBefore(re.empty,!0);return i?new qn(this,e,r.append(i),bt.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){M8(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:bt.none:e}static compile(e,r){let n=Object.create(null);e.forEach((i,o)=>n[i]=new _8(i,r,o));let a=r.spec.topNode||"doc";if(!n[a])throw new RangeError("Schema is missing its top node type ('"+a+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function PQ(t,e,r){let n=r.split("|");return a=>{let i=a===null?"null":typeof a;if(n.indexOf(i)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${i}`)}}class TQ{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?PQ(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class Hh{constructor(e,r,n,a){this.name=e,this.rank=r,this.schema=n,this.spec=a,this.attrs=R8(e,a.attrs),this.excluded=null;let i=T8(this.attrs);this.instance=i?new bt(this,i):null}create(e=null){return!e&&this.instance?this.instance:new bt(this,I8(this.attrs,e))}static compile(e,r){let n=Object.create(null),a=0;return e.forEach((i,o)=>n[i]=new Hh(i,a++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){M8(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class D8{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let a in e)r[a]=e[a];r.nodes=xr.from(e.nodes),r.marks=xr.from(e.marks||{}),this.nodes=H6.compile(this.spec.nodes,this),this.marks=Hh.compile(this.spec.marks,this);let n=Object.create(null);for(let a in this.nodes){if(a in this.marks)throw new RangeError(a+" can not be both a node and a mark");let i=this.nodes[a],o=i.spec.content||"",l=i.spec.marks;if(i.contentMatch=n[o]||(n[o]=xi.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=l=="_"?null:l?W6(this,l.split(" ")):l==""||!i.inlineContent?[]:null}for(let a in this.marks){let i=this.marks[a],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:W6(this,o.split(" "))}this.nodeFromJSON=a=>qn.fromJSON(this,a),this.markFromJSON=a=>bt.fromJSON(this,a),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,a){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof H6){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,a)}text(e,r){let n=this.nodes.text;return new gf(n,n.defaultAttrs,e,bt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function W6(t,e){let r=[];for(let n=0;n<e.length;n++){let a=e[n],i=t.marks[a],o=i;if(i)r.push(i);else for(let l in t.marks){let c=t.marks[l];(a=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(a)>-1)&&r.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function IQ(t){return t.tag!=null}function MQ(t){return t.style!=null}class ds{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(a=>{if(IQ(a))this.tags.push(a);else if(MQ(a)){let i=/[^=]*/.exec(a.style)[0];n.indexOf(i)<0&&n.push(i),this.styles.push(a)}}),this.normalizeLists=!this.tags.some(a=>{if(!/^(ul|ol)\b/.test(a.tag)||!a.node)return!1;let i=e.nodes[a.node];return i.contentMatch.matchType(i)})}parse(e,r={}){let n=new Y6(this,r,!1);return n.addAll(e,bt.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new Y6(this,r,!0);return n.addAll(e,bt.none,r.from,r.to),ge.maxOpen(n.finish())}matchTag(e,r,n){for(let a=n?this.tags.indexOf(n)+1:0;a<this.tags.length;a++){let i=this.tags[a];if(DQ(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||r.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,r,n,a){for(let i=a?this.styles.indexOf(a)+1:0;i<this.styles.length;i++){let o=this.styles[i],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=r))){if(o.getAttrs){let c=o.getAttrs(r);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(e){let r=[];function n(a){let i=a.priority==null?50:a.priority,o=0;for(;o<r.length;o++){let l=r[o];if((l.priority==null?50:l.priority)<i)break}r.splice(o,0,a)}for(let a in e.marks){let i=e.marks[a].spec.parseDOM;i&&i.forEach(o=>{n(o=K6(o)),o.mark||o.ignore||o.clearMark||(o.mark=a)})}for(let a in e.nodes){let i=e.nodes[a].spec.parseDOM;i&&i.forEach(o=>{n(o=K6(o)),o.node||o.ignore||o.mark||(o.node=a)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ds(e,ds.schemaRules(e)))}}const $8={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},RQ={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},L8={ol:!0,ul:!0},Kc=1,kv=2,Zl=4;function G6(t,e,r){return e!=null?(e?Kc:0)|(e==="full"?kv:0):t&&t.whitespace=="pre"?Kc|kv:r&~Zl}class zu{constructor(e,r,n,a,i,o){this.type=e,this.attrs=r,this.marks=n,this.solid=a,this.options=o,this.content=[],this.activeMarks=bt.none,this.match=i||(o&Zl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(re.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,a;return(a=n.findWrapping(e.type))?(this.match=n,a):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Kc)){let n=this.content[this.content.length-1],a;if(n&&n.isText&&(a=/[ \t\r\n\u000c]+$/.exec(n.text))){let i=n;n.text.length==a[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-a[0].length))}}let r=re.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(re.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!$8.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Y6{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let a=r.topNode,i,o=G6(null,r.preserveWhitespace,0)|(n?Zl:0);a?i=new zu(a.type,a.attrs,bt.none,!0,r.topMatch||a.type.contentMatch,o):n?i=new zu(null,null,bt.none,!0,null,o):i=new zu(e.schema.topNodeType,null,bt.none,!0,null,o),this.nodes=[i],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,a=this.top,i=a.options&kv?"full":this.localPreserveWS||(a.options&Kc)>0,{schema:o}=this.parser;if(i==="full"||a.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)if(i==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let l=n.split(/\r?\n|\r/);for(let c=0;c<l.length;c++)c&&this.insertNode(o.linebreakReplacement.create(),r,!0),l[c]&&this.insertNode(o.text(l[c]),r,!/\S/.test(l[c]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let l=a.content[a.content.length-1],c=e.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let a=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;L8.hasOwnProperty(o)&&this.parser.normalizeLists&&_Q(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,n));e:if(c?c.ignore:RQ.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let u,d=this.needsBlock;if($8.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),u=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let f=c&&c.skip?r:this.readStyles(e,r);f&&this.addAll(e,f),u&&this.sync(i),this.needsBlock=d}else{let u=this.readStyles(e,r);u&&this.addElementByRule(e,c,u,c.consuming===!1?l:void 0)}this.localPreserveWS=a}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let a=0;a<this.parser.matchedStyles.length;a++){let i=this.parser.matchedStyles[a],o=n.getPropertyValue(i);if(o)for(let l=void 0;;){let c=this.parser.matchStyle(i,o,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?r=r.filter(u=>!c.clearMark(u)):r=r.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return r}addElementByRule(e,r,n,a){let i,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let c=this.enter(o,r.attrs||null,n,r.preserveWhitespace);c&&(i=!0,n=c)}else{let c=this.parser.schema.marks[r.mark];n=n.concat(c.create(r.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(a)this.addElement(e,n,a);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,n,!1));else{let c=e;typeof r.contentElement=="string"?c=e.querySelector(r.contentElement):typeof r.contentElement=="function"?c=r.contentElement(e):r.contentElement&&(c=r.contentElement),this.findAround(e,c,!0),this.addAll(c,n),this.findAround(e,c,!1)}i&&this.sync(l)&&this.open--}addAll(e,r,n,a){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,l=a==null?null:e.childNodes[a];o!=l;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,r);this.findAtPoint(e,i)}findPlace(e,r,n){let a,i;for(let o=this.open,l=0;o>=0;o--){let c=this.nodes[o],u=c.findWrapping(e);if(u&&(!a||a.length>u.length+l)&&(a=u,i=c,!u.length))break;if(c.solid){if(n)break;l+=2}}if(!a)return null;this.sync(i);for(let o=0;o<a.length;o++)r=this.enterInner(a[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(r=this.enterInner(i,null,r))}let a=this.findPlace(e,r,n);if(a){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=bt.none;for(let l of a.concat(e.marks))(i.type?i.type.allowsMarkType(l.type):J6(l.type,e.type))&&(o=l.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,r,n,a){let i=this.findPlace(e.create(r),n,!1);return i&&(i=this.enterInner(e,r,n,!0,a)),i}enterInner(e,r,n,a=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=G6(e,i,o.options);o.options&Zl&&o.content.length==0&&(l|=Zl);let c=bt.none;return n=n.filter(u=>(o.type?o.type.allowsMarkType(u.type):J6(u.type,e))?(c=u.addToSet(c),!1):!0),this.nodes.push(new zu(e,r,c,a,null,l)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=Kc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let a=n.length-1;a>=0;a--)e+=n[a].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let a=0;a<this.find.length;a++)this.find[a].pos==null&&e.nodeType==1&&e.contains(this.find[a].node)&&r.compareDocumentPosition(this.find[a].node)&(n?2:4)&&(this.find[a].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,a=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(a?0:1),o=(l,c)=>{for(;l>=0;l--){let u=r[l];if(u==""){if(l==r.length-1||l==0)continue;for(;c>=i;c--)if(o(l-1,c))return!0;return!1}else{let d=c>0||c==0&&a?this.nodes[c].type:n&&c>=i?n.node(c-i).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;c--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function _Q(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&L8.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function DQ(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function K6(t){let e={};for(let r in t)e[r]=t[r];return e}function J6(t,e){let r=e.schema.nodes;for(let n in r){let a=r[n];if(!a.allowsMarkType(t))continue;let i=[],o=l=>{i.push(l);for(let c=0;c<l.edgeCount;c++){let{type:u,next:d}=l.edge(c);if(u==e||i.indexOf(d)<0&&o(d))return!0}};if(o(a.contentMatch))return!0}}class Pi{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=E0(r).createDocumentFragment());let a=n,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let l=0,c=0;for(;l<i.length&&c<o.marks.length;){let u=o.marks[c];if(!this.marks[u.type.name]){c++;continue}if(!u.eq(i[l][0])||u.type.spec.spanning===!1)break;l++,c++}for(;l<i.length;)a=i.pop()[1];for(;c<o.marks.length;){let u=o.marks[c++],d=this.serializeMark(u,o.isInline,r);d&&(i.push([u,a]),a.appendChild(d.dom),a=d.contentDOM||d.dom)}}a.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:a}=td(E0(r),this.nodes[e.type.name](e),null,e.attrs);if(a){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,a)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let a=e.marks.length-1;a>=0;a--){let i=this.serializeMark(e.marks[a],e.isInline,r);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,r,n={}){let a=this.marks[e.type.name];return a&&td(E0(n),a(e,r),null,e.attrs)}static renderSpec(e,r,n=null,a){return td(e,r,n,a)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Pi(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=X6(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return X6(e.marks)}}function X6(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function E0(t){return t.document||window.document}const Q6=new WeakMap;function $Q(t){let e=Q6.get(t);return e===void 0&&Q6.set(t,e=LQ(t)),e}function LQ(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let a=0;a<n.length;a++)r(n[a]);else for(let a in n)r(n[a])}return r(t),e}function td(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let a=e[0],i;if(typeof a!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(i=$Q(n))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=a.indexOf(" ");o>0&&(r=a.slice(0,o),a=a.slice(o+1));let l,c=r?t.createElementNS(r,a):t.createElement(a),u=e[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let f in u)if(u[f]!=null){let h=f.indexOf(" ");h>0?c.setAttributeNS(f.slice(0,h),f.slice(h+1),u[f]):f=="style"&&c.style?c.style.cssText=u[f]:c.setAttribute(f,u[f])}}for(let f=d;f<e.length;f++){let h=e[f];if(h===0){if(f<e.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:p,contentDOM:g}=td(t,h,r,n);if(c.appendChild(p),g){if(l)throw new RangeError("Multiple content holes");l=g}}}return{dom:c,contentDOM:l}}const z8=65535,F8=Math.pow(2,16);function zQ(t,e){return t+e*F8}function Z6(t){return t&z8}function FQ(t){return(t-(t&z8))/F8}const B8=1,q8=2,rd=4,U8=8;class Ev{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&U8)>0}get deletedBefore(){return(this.delInfo&(B8|rd))>0}get deletedAfter(){return(this.delInfo&(q8|rd))>0}get deletedAcross(){return(this.delInfo&rd)>0}}class rn{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&rn.empty)return rn.empty}recover(e){let r=0,n=Z6(e);if(!this.inverted)for(let a=0;a<n;a++)r+=this.ranges[a*3+2]-this.ranges[a*3+1];return this.ranges[n*3]+r+FQ(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let a=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?a:0);if(c>e)break;let u=this.ranges[l+i],d=this.ranges[l+o],f=c+u;if(e<=f){let h=u?e==c?-1:e==f?1:r:r,p=c+a+(h<0?0:d);if(n)return p;let g=e==(r<0?c:f)?null:zQ(l/3,e-c),x=e==c?q8:e==f?B8:rd;return(r<0?e!=c:e!=f)&&(x|=U8),new Ev(p,x,g)}a+=d-u}return n?e+a:new Ev(e+a,0,null)}touches(e,r){let n=0,a=Z6(r),i=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?n:0);if(c>e)break;let u=this.ranges[l+i],d=c+u;if(e<=d&&l==a*3)return!0;n+=this.ranges[l+o]-u}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let a=0,i=0;a<this.ranges.length;a+=3){let o=this.ranges[a],l=o-(this.inverted?i:0),c=o+(this.inverted?0:i),u=this.ranges[a+r],d=this.ranges[a+n];e(l,l+u,c,c+d),i+=d-u}}invert(){return new rn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?rn.empty:new rn(e<0?[0,-e,0]:[0,0,e])}}rn.empty=new rn([]);class Jc{constructor(e,r,n=0,a=e?e.length:0){this.mirror=r,this.from=n,this.to=a,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new Jc(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let a=e.getMirror(r);this.appendMap(e._maps[r],a!=null&&a<r?n+a:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let a=e.getMirror(r);this.appendMap(e._maps[r].invert(),a!=null&&a>r?n-a-1:void 0)}}invert(){let e=new Jc;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let a=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],l=o.mapResult(e,r);if(l.recover!=null){let c=this.getMirror(i);if(c!=null&&c>i&&c<this.to){i=c,e=this._maps[c].recover(l.recover);continue}}a|=l.delInfo,e=l.pos}return n?e:new Ev(e,a,null)}}const O0=Object.create(null);class Or{getMap(){return rn.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=O0[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in O0)throw new RangeError("Duplicate use of step JSON ID "+e);return O0[e]=r,r.prototype.jsonID=e,r}}class Wt{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new Wt(e,null)}static fail(e){return new Wt(null,e)}static fromReplace(e,r,n,a){try{return Wt.ok(e.replace(r,n,a))}catch(i){if(i instanceof hf)return Wt.fail(i.message);throw i}}}function v1(t,e,r){let n=[];for(let a=0;a<t.childCount;a++){let i=t.child(a);i.content.size&&(i=i.copy(v1(i.content,e,i))),i.isInline&&(i=e(i,r,a)),n.push(i)}return re.fromArray(n)}class ss extends Or{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),a=n.node(n.sharedDepth(this.to)),i=new ge(v1(r.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),a),r.openStart,r.openEnd);return Wt.fromReplace(e,this.from,this.to,i)}invert(){return new Fn(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new ss(r.pos,n.pos,this.mark)}merge(e){return e instanceof ss&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ss(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ss(r.from,r.to,e.markFromJSON(r.mark))}}Or.jsonID("addMark",ss);class Fn extends Or{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new ge(v1(r.content,a=>a.mark(this.mark.removeFromSet(a.marks)),e),r.openStart,r.openEnd);return Wt.fromReplace(e,this.from,this.to,n)}invert(){return new ss(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Fn(r.pos,n.pos,this.mark)}merge(e){return e instanceof Fn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Fn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Fn(r.from,r.to,e.markFromJSON(r.mark))}}Or.jsonID("removeMark",Fn);class is extends Or{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return Wt.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return Wt.fromReplace(e,this.pos,this.pos+1,new ge(re.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let a=0;a<r.marks.length;a++)if(!r.marks[a].isInSet(n))return new is(this.pos,r.marks[a]);return new is(this.pos,this.mark)}}return new yi(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new is(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new is(r.pos,e.markFromJSON(r.mark))}}Or.jsonID("addNodeMark",is);class yi extends Or{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return Wt.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return Wt.fromReplace(e,this.pos,this.pos+1,new ge(re.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new is(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new yi(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new yi(r.pos,e.markFromJSON(r.mark))}}Or.jsonID("removeNodeMark",yi);class lr extends Or{constructor(e,r,n,a=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=a}apply(e){return this.structure&&Ov(e,this.from,this.to)?Wt.fail("Structure replace would overwrite content"):Wt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new rn([this.from,this.to-this.from,this.slice.size])}invert(e){return new lr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new lr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof lr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?ge.empty:new ge(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new lr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?ge.empty:new ge(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new lr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new lr(r.from,r.to,ge.fromJSON(e,r.slice),!!r.structure)}}Or.jsonID("replace",lr);class fr extends Or{constructor(e,r,n,a,i,o,l=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=a,this.slice=i,this.insert=o,this.structure=l}apply(e){if(this.structure&&(Ov(e,this.from,this.gapFrom)||Ov(e,this.gapTo,this.to)))return Wt.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Wt.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?Wt.fromReplace(e,this.from,this.to,n):Wt.fail("Content does not fit in gap")}getMap(){return new rn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new fr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),a=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||a<r.pos||i>n.pos?null:new fr(r.pos,n.pos,a,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fr(r.from,r.to,r.gapFrom,r.gapTo,ge.fromJSON(e,r.slice),r.insert,!!r.structure)}}Or.jsonID("replaceAround",fr);function Ov(t,e,r){let n=t.resolve(e),a=r-e,i=n.depth;for(;a>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,a--;if(a>0){let o=n.node(i).maybeChild(n.indexAfter(i));for(;a>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,a--}}return!1}function BQ(t,e,r,n){let a=[],i=[],o,l;t.doc.nodesBetween(e,r,(c,u,d)=>{if(!c.isInline)return;let f=c.marks;if(!n.isInSet(f)&&d.type.allowsMarkType(n.type)){let h=Math.max(u,e),p=Math.min(u+c.nodeSize,r),g=n.addToSet(f);for(let x=0;x<f.length;x++)f[x].isInSet(g)||(o&&o.to==h&&o.mark.eq(f[x])?o.to=p:a.push(o=new Fn(h,p,f[x])));l&&l.to==h?l.to=p:i.push(l=new ss(h,p,n))}}),a.forEach(c=>t.step(c)),i.forEach(c=>t.step(c))}function qQ(t,e,r,n){let a=[],i=0;t.doc.nodesBetween(e,r,(o,l)=>{if(!o.isInline)return;i++;let c=null;if(n instanceof Hh){let u=o.marks,d;for(;d=n.isInSet(u);)(c||(c=[])).push(d),u=d.removeFromSet(u)}else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length){let u=Math.min(l+o.nodeSize,r);for(let d=0;d<c.length;d++){let f=c[d],h;for(let p=0;p<a.length;p++){let g=a[p];g.step==i-1&&f.eq(a[p].style)&&(h=g)}h?(h.to=u,h.step=i):a.push({style:f,from:Math.max(l,e),to:u,step:i})}}}),a.forEach(o=>t.step(new Fn(o.from,o.to,o.style)))}function b1(t,e,r,n=r.contentMatch,a=!0){let i=t.doc.nodeAt(e),o=[],l=e+1;for(let c=0;c<i.childCount;c++){let u=i.child(c),d=l+u.nodeSize,f=n.matchType(u.type);if(!f)o.push(new lr(l,d,ge.empty));else{n=f;for(let h=0;h<u.marks.length;h++)r.allowsMarkType(u.marks[h].type)||t.step(new Fn(l,d,u.marks[h]));if(a&&u.isText&&r.whitespace!="pre"){let h,p=/\r?\n|\r/g,g;for(;h=p.exec(u.text);)g||(g=new ge(re.from(r.schema.text(" ",r.allowedMarks(u.marks))),0,0)),o.push(new lr(l+h.index,l+h.index+h[0].length,g))}}l=d}if(!n.validEnd){let c=n.fillBefore(re.empty,!0);t.replace(l,l,new ge(c,0,0))}for(let c=o.length-1;c>=0;c--)t.step(o[c])}function UQ(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function nl(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,a=0,i=0;;--n){let o=t.$from.node(n),l=t.$from.index(n)+a,c=t.$to.indexAfter(n)-i;if(n<t.depth&&o.canReplace(l,c,r))return n;if(n==0||o.type.spec.isolating||!UQ(o,l,c))break;l&&(a=1),c<o.childCount&&(i=1)}return null}function VQ(t,e,r){let{$from:n,$to:a,depth:i}=e,o=n.before(i+1),l=a.after(i+1),c=o,u=l,d=re.empty,f=0;for(let g=i,x=!1;g>r;g--)x||n.index(g)>0?(x=!0,d=re.from(n.node(g).copy(d)),f++):c--;let h=re.empty,p=0;for(let g=i,x=!1;g>r;g--)x||a.after(g+1)<a.end(g)?(x=!0,h=re.from(a.node(g).copy(h)),p++):u++;t.step(new fr(c,u,o,l,new ge(d.append(h),f,p),d.size-f,!0))}function j1(t,e,r=null,n=t){let a=HQ(t,e),i=a&&WQ(n,e);return i?a.map(eA).concat({type:e,attrs:r}).concat(i.map(eA)):null}function eA(t){return{type:t,attrs:null}}function HQ(t,e){let{parent:r,startIndex:n,endIndex:a}=t,i=r.contentMatchAt(n).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return r.canReplaceWith(n,a,o)?i:null}function WQ(t,e){let{parent:r,startIndex:n,endIndex:a}=t,i=r.child(n),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let c=(o.length?o[o.length-1]:e).contentMatch;for(let u=n;c&&u<a;u++)c=c.matchType(r.child(u).type);return!c||!c.validEnd?null:o}function GQ(t,e,r){let n=re.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let l=r[o].type.contentMatch.matchFragment(n);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=re.from(r[o].type.create(r[o].attrs,n))}let a=e.start,i=e.end;t.step(new fr(a,i,a,i,new ge(n,0,0),r.length,!0))}function YQ(t,e,r,n,a){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,r,(o,l)=>{let c=typeof a=="function"?a(o):a;if(o.isTextblock&&!o.hasMarkup(n,c)&&KQ(t.doc,t.mapping.slice(i).map(l),n)){let u=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",g=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!g?u=!1:!p&&g&&(u=!0)}u===!1&&H8(t,o,l,i),b1(t,t.mapping.slice(i).map(l,1),n,void 0,u===null);let d=t.mapping.slice(i),f=d.map(l,1),h=d.map(l+o.nodeSize,1);return t.step(new fr(f,h,f+1,h-1,new ge(re.from(n.create(c,null,o.marks)),0,0),1,!0)),u===!0&&V8(t,o,l,i),!1}})}function V8(t,e,r,n){e.forEach((a,i)=>{if(a.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(a.text);){let c=t.mapping.slice(n).map(r+1+i+o.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function H8(t,e,r,n){e.forEach((a,i)=>{if(a.type==a.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function KQ(t,e,r){let n=t.resolve(e),a=n.index();return n.parent.canReplaceWith(a,a+1,r)}function JQ(t,e,r,n,a){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");r||(r=i.type);let o=r.create(n,null,a||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!r.validContent(i.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new fr(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new ge(re.from(o),0,0),1,!0))}function Pa(t,e,r=1,n){let a=t.resolve(e),i=a.depth-r,o=n&&n[n.length-1]||a.parent;if(i<0||a.parent.type.spec.isolating||!a.parent.canReplace(a.index(),a.parent.childCount)||!o.type.validContent(a.parent.content.cutByIndex(a.index(),a.parent.childCount)))return!1;for(let u=a.depth-1,d=r-2;u>i;u--,d--){let f=a.node(u),h=a.index(u);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(h,f.childCount),g=n&&n[d+1];g&&(p=p.replaceChild(0,g.type.create(g.attrs)));let x=n&&n[d]||f;if(!f.canReplace(h+1,f.childCount)||!x.type.validContent(p))return!1}let l=a.indexAfter(i),c=n&&n[0];return a.node(i).canReplaceWith(l,l,c?c.type:a.node(i+1).type)}function XQ(t,e,r=1,n){let a=t.doc.resolve(e),i=re.empty,o=re.empty;for(let l=a.depth,c=a.depth-r,u=r-1;l>c;l--,u--){i=re.from(a.node(l).copy(i));let d=n&&n[u];o=re.from(d?d.type.create(d.attrs,o):a.node(l).copy(o))}t.step(new lr(e,e,new ge(i.append(o),r,r),!0))}function Cs(t,e){let r=t.resolve(e),n=r.index();return W8(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function QQ(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let a=0;a<e.childCount;a++){let i=e.child(a),o=i.type==n?t.type.schema.nodes.text:i.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(i.marks))return!1}return r.validEnd}function W8(t,e){return!!(t&&e&&!t.isLeaf&&QQ(t,e))}function Wh(t,e,r=-1){let n=t.resolve(e);for(let a=n.depth;;a--){let i,o,l=n.index(a);if(a==n.depth?(i=n.nodeBefore,o=n.nodeAfter):r>0?(i=n.node(a+1),l++,o=n.node(a).maybeChild(l)):(i=n.node(a).maybeChild(l-1),o=n.node(a+1)),i&&!i.isTextblock&&W8(i,o)&&n.node(a).canReplace(l,l+1))return e;if(a==0)break;e=r<0?n.before(a):n.after(a)}}function ZQ(t,e,r){let n=null,{linebreakReplacement:a}=t.doc.type.schema,i=t.doc.resolve(e-r),o=i.node().type;if(a&&o.inlineContent){let d=o.whitespace=="pre",f=!!o.contentMatch.matchType(a);d&&!f?n=!1:!d&&f&&(n=!0)}let l=t.steps.length;if(n===!1){let d=t.doc.resolve(e+r);H8(t,d.node(),d.before(),l)}o.inlineContent&&b1(t,e+r-1,o,i.node().contentMatchAt(i.index()),n==null);let c=t.mapping.slice(l),u=c.map(e-r);if(t.step(new lr(u,c.map(e+r,-1),ge.empty,!0)),n===!0){let d=t.doc.resolve(u);V8(t,d.node(),d.before(),t.steps.length)}return t}function eZ(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let a=n.depth-1;a>=0;a--){let i=n.index(a);if(n.node(a).canReplaceWith(i,i,r))return n.before(a+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(let a=n.depth-1;a>=0;a--){let i=n.indexAfter(a);if(n.node(a).canReplaceWith(i,i,r))return n.after(a+1);if(i<n.node(a).childCount)return null}return null}function G8(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let a=r.content;for(let i=0;i<r.openStart;i++)a=a.firstChild.content;for(let i=1;i<=(r.openStart==0&&r.size?2:1);i++)for(let o=n.depth;o>=0;o--){let l=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,c=n.index(o)+(l>0?1:0),u=n.node(o),d=!1;if(i==1)d=u.canReplace(c,c,a);else{let f=u.contentMatchAt(c).findWrapping(a.firstChild.type);d=f&&u.canReplaceWith(c,c,f[0])}if(d)return l==0?n.pos:l<0?n.before(o+1):n.after(o+1)}return null}function Gh(t,e,r=e,n=ge.empty){if(e==r&&!n.size)return null;let a=t.resolve(e),i=t.resolve(r);return Y8(a,i,n)?new lr(e,r,n):new tZ(a,i,n).fit()}function Y8(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class tZ{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=re.empty;for(let a=0;a<=e.depth;a++){let i=e.node(a);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(a))})}for(let a=e.depth;a>0;a--)this.placed=re.from(e.node(a).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,a=this.close(e<0?this.$to:n.doc.resolve(e));if(!a)return null;let i=this.placed,o=n.depth,l=a.depth;for(;o&&l&&i.childCount==1;)i=i.firstChild.content,o--,l--;let c=new ge(i,o,l);return e>-1?new fr(n.pos,e,this.$to.pos,this.$to.end(),c,r):c.size||n.pos!=this.$to.pos?new lr(n.pos,a.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,a=this.unplaced.openEnd;n<e;n++){let i=r.firstChild;if(r.childCount>1&&(a=0),i.type.spec.isolating&&a<=n){e=n;break}r=i.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let a,i=null;n?(i=P0(this.unplaced.content,n-1).firstChild,a=i.content):a=this.unplaced.content;let o=a.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:u}=this.frontier[l],d,f=null;if(r==1&&(o?u.matchType(o.type)||(f=u.fillBefore(re.from(o),!1)):i&&c.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:l,parent:i,inject:f};if(r==2&&o&&(d=u.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:l,parent:i,wrap:d};if(i&&u.matchType(i.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,a=P0(e,r);return!a.childCount||a.firstChild.isLeaf?!1:(this.unplaced=new ge(e,r+1,Math.max(n,a.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,a=P0(e,r);if(a.childCount<=1&&r>0){let i=e.size-r<=r+a.size;this.unplaced=new ge(Bl(e,r-1,1),r-1,i?r-1:n)}else this.unplaced=new ge(Bl(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:a,wrap:i}){for(;this.depth>r;)this.closeFrontierNode();if(i)for(let x=0;x<i.length;x++)this.openFrontierNode(i[x]);let o=this.unplaced,l=n?n.content:o.content,c=o.openStart-e,u=0,d=[],{match:f,type:h}=this.frontier[r];if(a){for(let x=0;x<a.childCount;x++)d.push(a.child(x));f=f.matchFragment(a)}let p=l.size+e-(o.content.size-o.openEnd);for(;u<l.childCount;){let x=l.child(u),m=f.matchType(x.type);if(!m)break;u++,(u>1||c==0||x.content.size)&&(f=m,d.push(K8(x.mark(h.allowedMarks(x.marks)),u==1?c:0,u==l.childCount?p:-1)))}let g=u==l.childCount;g||(p=-1),this.placed=ql(this.placed,r,re.from(d)),this.frontier[r].match=f,g&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,m=l;x<p;x++){let y=m.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),m=y.content}this.unplaced=g?e==0?ge.empty:new ge(Bl(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new ge(Bl(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!T0(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,a=this.$to.after(n);for(;n>1&&a==this.$to.end(--n);)++a;return a}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:a}=this.frontier[r],i=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=T0(e,r,a,n,i);if(o){for(let l=r-1;l>=0;l--){let{match:c,type:u}=this.frontier[l],d=T0(e,l,u,c,!0);if(!d||d.childCount)continue e}return{depth:r,fit:o,move:i?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=ql(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let a=e.node(n),i=a.type.contentMatch.fillBefore(a.content,!0,e.index(n));this.openFrontierNode(a.type,a.attrs,i)}return e}openFrontierNode(e,r=null,n){let a=this.frontier[this.depth];a.match=a.match.matchType(e),this.placed=ql(this.placed,this.depth,re.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(re.empty,!0);r.childCount&&(this.placed=ql(this.placed,this.frontier.length,r))}}function Bl(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(Bl(t.firstChild.content,e-1,r)))}function ql(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(ql(t.lastChild.content,e-1,r)))}function P0(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function K8(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,K8(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(re.empty,!0)))),t.copy(n)}function T0(t,e,r,n,a){let i=t.node(e),o=a?t.indexAfter(e):t.index(e);if(o==i.childCount&&!r.compatibleContent(i.type))return null;let l=n.fillBefore(i.content,!0,o);return l&&!rZ(r,i.content,o)?l:null}function rZ(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function nZ(t){return t.spec.defining||t.spec.definingForContent}function aZ(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let a=t.doc.resolve(e),i=t.doc.resolve(r);if(Y8(a,i,n))return t.step(new lr(e,r,n));let o=X8(a,i);o[o.length-1]==0&&o.pop();let l=-(a.depth+1);o.unshift(l);for(let h=a.depth,p=a.pos-1;h>0;h--,p--){let g=a.node(h).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;o.indexOf(h)>-1?l=h:a.before(h)==p&&o.splice(1,0,-h)}let c=o.indexOf(l),u=[],d=n.openStart;for(let h=n.content,p=0;;p++){let g=h.firstChild;if(u.push(g),p==n.openStart)break;h=g.content}for(let h=d-1;h>=0;h--){let p=u[h],g=nZ(p.type);if(g&&!p.sameMarkup(a.node(Math.abs(l)-1)))d=h;else if(g||!p.type.isTextblock)break}for(let h=n.openStart;h>=0;h--){let p=(h+d+1)%(n.openStart+1),g=u[p];if(g)for(let x=0;x<o.length;x++){let m=o[(x+c)%o.length],y=!0;m<0&&(y=!1,m=-m);let v=a.node(m-1),w=a.index(m-1);if(v.canReplaceWith(w,w,g.type,g.marks))return t.replace(a.before(m),y?i.after(m):r,new ge(J8(n.content,0,n.openStart,p),p,n.openEnd))}}let f=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,r,n),!(t.steps.length>f));h--){let p=o[h];p<0||(e=a.before(p),r=i.after(p))}}function J8(t,e,r,n,a){if(e<r){let i=t.firstChild;t=t.replaceChild(0,i.copy(J8(i.content,e+1,r,n,i)))}if(e>n){let i=a.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(re.empty,!0))}return t}function sZ(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let a=eZ(t.doc,e,n.type);a!=null&&(e=r=a)}t.replaceRange(e,r,new ge(re.from(n),0,0))}function iZ(t,e,r){let n=t.doc.resolve(e),a=t.doc.resolve(r),i=X8(n,a);for(let o=0;o<i.length;o++){let l=i[o],c=o==i.length-1;if(c&&l==0||n.node(l).type.contentMatch.validEnd)return t.delete(n.start(l),a.end(l));if(l>0&&(c||n.node(l-1).canReplace(n.index(l-1),a.indexAfter(l-1))))return t.delete(n.before(l),a.after(l))}for(let o=1;o<=n.depth&&o<=a.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&a.end(o)-r!=a.depth-o&&n.start(o-1)==a.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),a.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function X8(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let a=n;a>=0;a--){let i=t.start(a);if(i<t.pos-(t.depth-a)||e.end(a)>e.pos+(e.depth-a)||t.node(a).type.spec.isolating||e.node(a).type.spec.isolating)break;(i==e.start(a)||a==t.depth&&a==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&a&&e.start(a-1)==i-1)&&r.push(a)}return r}class to extends Or{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return Wt.fail("No node at attribute step's position");let n=Object.create(null);for(let i in r.attrs)n[i]=r.attrs[i];n[this.attr]=this.value;let a=r.type.create(n,null,r.marks);return Wt.fromReplace(e,this.pos,this.pos+1,new ge(re.from(a),0,r.isLeaf?0:1))}getMap(){return rn.empty}invert(e){return new to(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new to(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new to(r.pos,r.attr,r.value)}}Or.jsonID("attr",to);class Xc extends Or{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let a in e.attrs)r[a]=e.attrs[a];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return Wt.ok(n)}getMap(){return rn.empty}invert(e){return new Xc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Xc(r.attr,r.value)}}Or.jsonID("docAttr",Xc);let Bo=class extends Error{};Bo=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};Bo.prototype=Object.create(Error.prototype);Bo.prototype.constructor=Bo;Bo.prototype.name="TransformError";class Q8{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Jc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new Bo(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=ge.empty){let a=Gh(this.doc,e,r,n);return a&&this.step(a),this}replaceWith(e,r,n){return this.replace(e,r,new ge(re.from(n),0,0))}delete(e,r){return this.replace(e,r,ge.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return aZ(this,e,r,n),this}replaceRangeWith(e,r,n){return sZ(this,e,r,n),this}deleteRange(e,r){return iZ(this,e,r),this}lift(e,r){return VQ(this,e,r),this}join(e,r=1){return ZQ(this,e,r),this}wrap(e,r){return GQ(this,e,r),this}setBlockType(e,r=e,n,a=null){return YQ(this,e,r,n,a),this}setNodeMarkup(e,r,n=null,a){return JQ(this,e,r,n,a),this}setNodeAttribute(e,r,n){return this.step(new to(e,r,n)),this}setDocAttribute(e,r){return this.step(new Xc(e,r)),this}addNodeMark(e,r){return this.step(new is(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof bt)r.isInSet(n.marks)&&this.step(new yi(e,r));else{let a=n.marks,i,o=[];for(;i=r.isInSet(a);)o.push(new yi(e,i)),a=i.removeFromSet(a);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,r=1,n){return XQ(this,e,r,n),this}addMark(e,r,n){return BQ(this,e,r,n),this}removeMark(e,r,n){return qQ(this,e,r,n),this}clearIncompatible(e,r,n){return b1(this,e,r,n),this}}const I0=Object.create(null);class Ye{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new oZ(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=ge.empty){let n=r.content.lastChild,a=null;for(let l=0;l<r.openEnd;l++)a=n,n=n.lastChild;let i=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:c,$to:u}=o[l],d=e.mapping.slice(i);e.replaceRange(d.map(c.pos),d.map(u.pos),l?ge.empty:r),l==0&&nA(e,i,(n?n.isInline:a&&a.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,a=this.ranges;for(let i=0;i<a.length;i++){let{$from:o,$to:l}=a[i],c=e.mapping.slice(n),u=c.map(o.pos),d=c.map(l.pos);i?e.deleteRange(u,d):(e.replaceRangeWith(u,d,r),nA(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let a=e.parent.inlineContent?new qe(e):zi(e.node(0),e.parent,e.pos,e.index(),r,n);if(a)return a;for(let i=e.depth-1;i>=0;i--){let o=r<0?zi(e.node(0),e.node(i),e.before(i+1),e.index(i),r,n):zi(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new cn(e.node(0))}static atStart(e){return zi(e,e,0,0,1)||new cn(e)}static atEnd(e){return zi(e,e,e.content.size,e.childCount,-1)||new cn(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=I0[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in I0)throw new RangeError("Duplicate use of selection JSON ID "+e);return I0[e]=r,r.prototype.jsonID=e,r}getBookmark(){return qe.between(this.$anchor,this.$head).getBookmark()}}Ye.prototype.visible=!0;class oZ{constructor(e,r){this.$from=e,this.$to=r}}let tA=!1;function rA(t){!tA&&!t.parent.inlineContent&&(tA=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class qe extends Ye{constructor(e,r=e){rA(e),rA(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return Ye.near(n);let a=e.resolve(r.map(this.anchor));return new qe(a.parent.inlineContent?a:n,n)}replace(e,r=ge.empty){if(super.replace(e,r),r==ge.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof qe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Yh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new qe(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let a=e.resolve(r);return new this(a,n==r?a:e.resolve(n))}static between(e,r,n){let a=e.pos-r.pos;if((!n||a)&&(n=a>=0?1:-1),!r.parent.inlineContent){let i=Ye.findFrom(r,n,!0)||Ye.findFrom(r,-n,!0);if(i)r=i.$head;else return Ye.near(r,n)}return e.parent.inlineContent||(a==0?e=r:(e=(Ye.findFrom(e,-n,!0)||Ye.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=a<0&&(e=r))),new qe(e,r)}}Ye.jsonID("text",qe);class Yh{constructor(e,r){this.anchor=e,this.head=r}map(e){return new Yh(e.map(this.anchor),e.map(this.head))}resolve(e){return qe.between(e.resolve(this.anchor),e.resolve(this.head))}}class Te extends Ye{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:a}=r.mapResult(this.anchor),i=e.resolve(a);return n?Ye.near(i):new Te(i)}content(){return new ge(re.from(this.node),0,0)}eq(e){return e instanceof Te&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new w1(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Te(e.resolve(r.anchor))}static create(e,r){return new Te(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Te.prototype.visible=!1;Ye.jsonID("node",Te);class w1{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new Yh(n,n):new w1(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&Te.isSelectable(n)?new Te(r):Ye.near(r)}}class cn extends Ye{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=ge.empty){if(r==ge.empty){e.delete(0,e.doc.content.size);let n=Ye.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new cn(e)}map(e){return new cn(e)}eq(e){return e instanceof cn}getBookmark(){return lZ}}Ye.jsonID("all",cn);const lZ={map(){return this},resolve(t){return new cn(t)}};function zi(t,e,r,n,a,i=!1){if(e.inlineContent)return qe.create(t,r);for(let o=n-(a>0?0:1);a>0?o<e.childCount:o>=0;o+=a){let l=e.child(o);if(l.isAtom){if(!i&&Te.isSelectable(l))return Te.create(t,r-(a<0?l.nodeSize:0))}else{let c=zi(t,l,r+a,a<0?l.childCount:0,a,i);if(c)return c}r+=l.nodeSize*a}return null}function nA(t,e,r){let n=t.steps.length-1;if(n<e)return;let a=t.steps[n];if(!(a instanceof lr||a instanceof fr))return;let i=t.mapping.maps[n],o;i.forEach((l,c,u,d)=>{o==null&&(o=d)}),t.setSelection(Ye.near(t.doc.resolve(o),r))}const aA=1,Fu=2,sA=4;class cZ extends Q8{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|aA)&~Fu,this.storedMarks=null,this}get selectionSet(){return(this.updated&aA)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Fu,this}ensureMarks(e){return bt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Fu)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~Fu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||bt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let a=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(a.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let i=this.storedMarks;if(!i){let o=this.doc.resolve(r);i=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,a.text(e,i)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(Ye.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=sA,this}get scrolledIntoView(){return(this.updated&sA)>0}}function iA(t,e){return!e||!t?t:t.bind(e)}class Ul{constructor(e,r,n){this.name=e,this.init=iA(r.init,n),this.apply=iA(r.apply,n)}}const uZ=[new Ul("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ul("selection",{init(t,e){return t.selection||Ye.atStart(e.doc)},apply(t){return t.selection}}),new Ul("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new Ul("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class M0{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=uZ.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Ul(n.key,n.spec.state,n))})}}class Ji{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let a=this.config.plugins[n];if(a.spec.filterTransaction&&!a.spec.filterTransaction.call(a,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),a=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let c=a?a[o].n:0,u=a?a[o].state:this,d=c<r.length&&l.spec.appendTransaction.call(l,c?r.slice(c):r,u,n);if(d&&n.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!a){a=[];for(let f=0;f<this.config.plugins.length;f++)a.push(f<o?{state:n,n:r.length}:{state:this,n:0})}r.push(d),n=n.applyInner(d),i=!0}a&&(a[o]={state:n,n:r.length})}}if(!i)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Ji(this.config),n=this.config.fields;for(let a=0;a<n.length;a++){let i=n[a];r[i.name]=i.apply(e,this[i.name],this,r)}return r}get tr(){return new cZ(this)}static create(e){let r=new M0(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Ji(r);for(let a=0;a<r.fields.length;a++)n[r.fields[a].name]=r.fields[a].init(e,n);return n}reconfigure(e){let r=new M0(this.schema,e.plugins),n=r.fields,a=new Ji(r);for(let i=0;i<n.length;i++){let o=n[i].name;a[o]=this.hasOwnProperty(o)?this[o]:n[i].init(e,a)}return a}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let a=e[n],i=a.spec.state;i&&i.toJSON&&(r[n]=i.toJSON.call(a,this[a.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let a=new M0(e.schema,e.plugins),i=new Ji(a);return a.fields.forEach(o=>{if(o.name=="doc")i.doc=qn.fromJSON(e.schema,r.doc);else if(o.name=="selection")i.selection=Ye.fromJSON(i.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(i.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let l in n){let c=n[l],u=c.spec.state;if(c.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(r,l)){i[o.name]=u.fromJSON.call(c,e,r[l],i);return}}i[o.name]=o.init(e,i)}}),i}}function Z8(t,e,r){for(let n in t){let a=t[n];a instanceof Function?a=a.bind(e):n=="handleDOMEvents"&&(a=Z8(a,e,{})),r[n]=a}return r}class $t{constructor(e){this.spec=e,this.props={},e.props&&Z8(e.props,this,this.props),this.key=e.key?e.key.key:eP("plugin")}getState(e){return e[this.key]}}const R0=Object.create(null);function eP(t){return t in R0?t+"$"+ ++R0[t]:(R0[t]=0,t+"$")}class nr{constructor(e="key"){this.key=eP(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const S1=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function tP(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const rP=(t,e,r)=>{let n=tP(t,r);if(!n)return!1;let a=N1(n);if(!a){let o=n.blockRange(),l=o&&nl(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let i=a.nodeBefore;if(dP(t,a,e,-1))return!0;if(n.parent.content.size==0&&(qo(i,"end")||Te.isSelectable(i)))for(let o=n.depth;;o--){let l=Gh(t.doc,n.before(o),n.after(o),ge.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(qo(i,"end")?Ye.findFrom(c.doc.resolve(c.mapping.map(a.pos,-1)),-1):Te.create(c.doc,a.pos-i.nodeSize)),e(c.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return i.isAtom&&a.depth==n.depth-1?(e&&e(t.tr.delete(a.pos-i.nodeSize,a.pos).scrollIntoView()),!0):!1},dZ=(t,e,r)=>{let n=tP(t,r);if(!n)return!1;let a=N1(n);return a?nP(t,a,e):!1},fZ=(t,e,r)=>{let n=sP(t,r);if(!n)return!1;let a=A1(n);return a?nP(t,a,e):!1};function nP(t,e,r){let n=e.nodeBefore,a=n,i=e.pos-1;for(;!a.isTextblock;i--){if(a.type.spec.isolating)return!1;let d=a.lastChild;if(!d)return!1;a=d}let o=e.nodeAfter,l=o,c=e.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let d=l.firstChild;if(!d)return!1;l=d}let u=Gh(t.doc,i,c,ge.empty);if(!u||u.from!=i||u instanceof lr&&u.slice.size>=c-i)return!1;if(r){let d=t.tr.step(u);d.setSelection(qe.create(d.doc,i)),r(d.scrollIntoView())}return!0}function qo(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const aP=(t,e,r)=>{let{$head:n,empty:a}=t.selection,i=n;if(!a)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;i=N1(n)}let o=i&&i.nodeBefore;return!o||!Te.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Te.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function N1(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function sP(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const iP=(t,e,r)=>{let n=sP(t,r);if(!n)return!1;let a=A1(n);if(!a)return!1;let i=a.nodeAfter;if(dP(t,a,e,1))return!0;if(n.parent.content.size==0&&(qo(i,"start")||Te.isSelectable(i))){let o=Gh(t.doc,n.before(),n.after(),ge.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(qo(i,"start")?Ye.findFrom(l.doc.resolve(l.mapping.map(a.pos)),1):Te.create(l.doc,l.mapping.map(a.pos))),e(l.scrollIntoView())}return!0}}return i.isAtom&&a.depth==n.depth-1?(e&&e(t.tr.delete(a.pos,a.pos+i.nodeSize).scrollIntoView()),!0):!1},oP=(t,e,r)=>{let{$head:n,empty:a}=t.selection,i=n;if(!a)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;i=A1(n)}let o=i&&i.nodeAfter;return!o||!Te.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Te.create(t.doc,i.pos)).scrollIntoView()),!0)};function A1(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const hZ=(t,e)=>{let r=t.selection,n=r instanceof Te,a;if(n){if(r.node.isTextblock||!Cs(t.doc,r.from))return!1;a=r.from}else if(a=Wh(t.doc,r.from,-1),a==null)return!1;if(e){let i=t.tr.join(a);n&&i.setSelection(Te.create(i.doc,a-t.doc.resolve(a).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},pZ=(t,e)=>{let r=t.selection,n;if(r instanceof Te){if(r.node.isTextblock||!Cs(t.doc,r.to))return!1;n=r.to}else if(n=Wh(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},mZ=(t,e)=>{let{$from:r,$to:n}=t.selection,a=r.blockRange(n),i=a&&nl(a);return i==null?!1:(e&&e(t.tr.lift(a,i).scrollIntoView()),!0)},lP=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function C1(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const gZ=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let a=r.node(-1),i=r.indexAfter(-1),o=C1(a.contentMatchAt(i));if(!o||!a.canReplaceWith(i,i,o))return!1;if(e){let l=r.after(),c=t.tr.replaceWith(l,l,o.createAndFill());c.setSelection(Ye.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},cP=(t,e)=>{let r=t.selection,{$from:n,$to:a}=r;if(r instanceof cn||n.parent.inlineContent||a.parent.inlineContent)return!1;let i=C1(a.parent.contentMatchAt(a.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!n.parentOffset&&a.index()<a.parent.childCount?n:a).pos,l=t.tr.insert(o,i.createAndFill());l.setSelection(qe.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},uP=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let i=r.before();if(Pa(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let n=r.blockRange(),a=n&&nl(n);return a==null?!1:(e&&e(t.tr.lift(n,a).scrollIntoView()),!0)};function xZ(t){return(e,r)=>{let{$from:n,$to:a}=e.selection;if(e.selection instanceof Te&&e.selection.node.isBlock)return!n.parentOffset||!Pa(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i=[],o,l,c=!1,u=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){c=n.end(p)==n.pos+(n.depth-p),u=n.start(p)==n.pos-(n.depth-p),l=C1(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),i.unshift(c&&l?{type:l}:null),o=p;break}else{if(p==1)return!1;i.unshift(null)}let d=e.tr;(e.selection instanceof qe||e.selection instanceof cn)&&d.deleteSelection();let f=d.mapping.map(n.pos),h=Pa(d.doc,f,i.length,i);if(h||(i[0]=l?{type:l}:null,h=Pa(d.doc,f,i.length,i)),!h)return!1;if(d.split(f,i.length,i),!c&&u&&n.node(o).type!=l){let p=d.mapping.map(n.before(o)),g=d.doc.resolve(p);l&&n.node(o-1).canReplaceWith(g.index(),g.index()+1,l)&&d.setNodeMarkup(d.mapping.map(n.before(o)),l)}return r&&r(d.scrollIntoView()),!0}}const yZ=xZ(),vZ=(t,e)=>{let{$from:r,to:n}=t.selection,a,i=r.sharedDepth(n);return i==0?!1:(a=r.before(i),e&&e(t.tr.setSelection(Te.create(t.doc,a))),!0)};function bZ(t,e,r){let n=e.nodeBefore,a=e.nodeAfter,i=e.index();return!n||!a||!n.type.compatibleContent(a.type)?!1:!n.content.size&&e.parent.canReplace(i-1,i)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(a.isTextblock||Cs(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function dP(t,e,r,n){let a=e.nodeBefore,i=e.nodeAfter,o,l,c=a.type.spec.isolating||i.type.spec.isolating;if(!c&&bZ(t,e,r))return!0;let u=!c&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(l=a.contentMatchAt(a.childCount)).findWrapping(i.type))&&l.matchType(o[0]||i.type).validEnd){if(r){let p=e.pos+i.nodeSize,g=re.empty;for(let y=o.length-1;y>=0;y--)g=re.from(o[y].create(null,g));g=re.from(a.copy(g));let x=t.tr.step(new fr(e.pos-1,p,e.pos,p,new ge(g,1,0),o.length,!0)),m=x.doc.resolve(p+2*o.length);m.nodeAfter&&m.nodeAfter.type==a.type&&Cs(x.doc,m.pos)&&x.join(m.pos),r(x.scrollIntoView())}return!0}let d=i.type.spec.isolating||n>0&&c?null:Ye.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),h=f&&nl(f);if(h!=null&&h>=e.depth)return r&&r(t.tr.lift(f,h).scrollIntoView()),!0;if(u&&qo(i,"start",!0)&&qo(a,"end")){let p=a,g=[];for(;g.push(p),!p.isTextblock;)p=p.lastChild;let x=i,m=1;for(;!x.isTextblock;x=x.firstChild)m++;if(p.canReplace(p.childCount,p.childCount,x.content)){if(r){let y=re.empty;for(let w=g.length-1;w>=0;w--)y=re.from(g[w].copy(y));let v=t.tr.step(new fr(e.pos-g.length,e.pos+i.nodeSize,e.pos+m,e.pos+i.nodeSize-m,new ge(y,g.length,0),0,!0));r(v.scrollIntoView())}return!0}}return!1}function fP(t){return function(e,r){let n=e.selection,a=t<0?n.$from:n.$to,i=a.depth;for(;a.node(i).isInline;){if(!i)return!1;i--}return a.node(i).isTextblock?(r&&r(e.tr.setSelection(qe.create(e.doc,t<0?a.start(i):a.end(i)))),!0):!1}}const jZ=fP(-1),wZ=fP(1);function SZ(t,e=null){return function(r,n){let{$from:a,$to:i}=r.selection,o=a.blockRange(i),l=o&&j1(o,t,e);return l?(n&&n(r.tr.wrap(o,l).scrollIntoView()),!0):!1}}function oA(t,e=null){return function(r,n){let a=!1;for(let i=0;i<r.selection.ranges.length&&!a;i++){let{$from:{pos:o},$to:{pos:l}}=r.selection.ranges[i];r.doc.nodesBetween(o,l,(c,u)=>{if(a)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)a=!0;else{let d=r.doc.resolve(u),f=d.index();a=d.parent.canReplaceWith(f,f+1,t)}})}if(!a)return!1;if(n){let i=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:c}}=r.selection.ranges[o];i.setBlockType(l,c,t,e)}n(i.scrollIntoView())}return!0}}function k1(...t){return function(e,r,n){for(let a=0;a<t.length;a++)if(t[a](e,r,n))return!0;return!1}}k1(S1,rP,aP);k1(S1,iP,oP);k1(lP,cP,uP,yZ);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function NZ(t,e=null){return function(r,n){let{$from:a,$to:i}=r.selection,o=a.blockRange(i);if(!o)return!1;let l=n?r.tr:null;return AZ(l,o,t,e)?(n&&n(l.scrollIntoView()),!0):!1}}function AZ(t,e,r,n=null){let a=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=o.resolve(e.start-2);i=new mf(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new mf(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),a=!0}let l=j1(i,r,n,e);return l?(t&&CZ(t,e,l,a,r),!0):!1}function CZ(t,e,r,n,a){let i=re.empty;for(let d=r.length-1;d>=0;d--)i=re.from(r[d].type.create(r[d].attrs,i));t.step(new fr(e.start-(n?2:0),e.end,e.start,e.end,new ge(i,0,0),r.length,!0));let o=0;for(let d=0;d<r.length;d++)r[d].type==a&&(o=d+1);let l=r.length-o,c=e.start+r.length-(n?2:0),u=e.parent;for(let d=e.startIndex,f=e.endIndex,h=!0;d<f;d++,h=!1)!h&&Pa(t.doc,c,l)&&(t.split(c,l),c+=2*l),c+=u.child(d).nodeSize;return t}function kZ(t){return function(e,r){let{$from:n,$to:a}=e.selection,i=n.blockRange(a,o=>o.childCount>0&&o.firstChild.type==t);return i?r?n.node(i.depth-1).type==t?EZ(e,r,t,i):OZ(e,r,i):!0:!1}}function EZ(t,e,r,n){let a=t.tr,i=n.end,o=n.$to.end(n.depth);i<o&&(a.step(new fr(i-1,o,i,o,new ge(re.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new mf(a.doc.resolve(n.$from.pos),a.doc.resolve(o),n.depth));const l=nl(n);if(l==null)return!1;a.lift(n,l);let c=a.doc.resolve(a.mapping.map(i,-1)-1);return Cs(a.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&a.join(c.pos),e(a.scrollIntoView()),!0}function OZ(t,e,r){let n=t.tr,a=r.parent;for(let p=r.end,g=r.endIndex-1,x=r.startIndex;g>x;g--)p-=a.child(g).nodeSize,n.delete(p-1,p+1);let i=n.doc.resolve(r.start),o=i.nodeAfter;if(n.mapping.map(r.end)!=r.start+i.nodeAfter.nodeSize)return!1;let l=r.startIndex==0,c=r.endIndex==a.childCount,u=i.node(-1),d=i.index(-1);if(!u.canReplace(d+(l?0:1),d+1,o.content.append(c?re.empty:re.from(a))))return!1;let f=i.pos,h=f+o.nodeSize;return n.step(new fr(f-(l?1:0),h+(c?1:0),f+1,h-1,new ge((l?re.empty:re.from(a.copy(re.empty))).append(c?re.empty:re.from(a.copy(re.empty))),l?0:1,c?0:1),l?0:1)),e(n.scrollIntoView()),!0}function PZ(t){return function(e,r){let{$from:n,$to:a}=e.selection,i=n.blockRange(a,u=>u.childCount>0&&u.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let l=i.parent,c=l.child(o-1);if(c.type!=t)return!1;if(r){let u=c.lastChild&&c.lastChild.type==l.type,d=re.from(u?t.create():null),f=new ge(re.from(t.create(null,re.from(l.type.create(null,d)))),u?3:1,0),h=i.start,p=i.end;r(e.tr.step(new fr(h-(u?3:1),p,h,p,f,1,!0)).scrollIntoView())}return!0}}const yr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Uo=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Pv=null;const ja=function(t,e,r){let n=Pv||(Pv=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},TZ=function(){Pv=null},vi=function(t,e,r,n){return r&&(lA(t,e,r,n,-1)||lA(t,e,r,n,1))},IZ=/^(img|br|input|textarea|hr)$/i;function lA(t,e,r,n,a){for(var i;;){if(t==r&&e==n)return!0;if(e==(a<0?0:wn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||fu(t)||IZ.test(t.nodeName)||t.contentEditable=="false")return!1;e=yr(t)+(a<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(a<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=a;else return!1;else t=o,e=a<0?wn(t):0}else return!1}}function wn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function MZ(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=wn(t)}else if(t.parentNode&&!fu(t))e=yr(t),t=t.parentNode;else return null}}function RZ(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!fu(t))e=yr(t)+1,t=t.parentNode;else return null}}function _Z(t,e,r){for(let n=e==0,a=e==wn(t);n||a;){if(t==r)return!0;let i=yr(t);if(t=t.parentNode,!t)return!1;n=n&&i==0,a=a&&i==wn(t)}}function fu(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Kh=function(t){return t.focusNode&&vi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Hs(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function DZ(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function $Z(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(wn(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(wn(n.startContainer),n.startOffset)}}}const la=typeof navigator<"u"?navigator:null,cA=typeof document<"u"?document:null,ks=la&&la.userAgent||"",Tv=/Edge\/(\d+)/.exec(ks),hP=/MSIE \d/.exec(ks),Iv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ks),Wr=!!(hP||Iv||Tv),fs=hP?document.documentMode:Iv?+Iv[1]:Tv?+Tv[1]:0,En=!Wr&&/gecko\/(\d+)/i.test(ks);En&&+(/Firefox\/(\d+)/.exec(ks)||[0,0])[1];const Mv=!Wr&&/Chrome\/(\d+)/.exec(ks),dr=!!Mv,pP=Mv?+Mv[1]:0,Er=!Wr&&!!la&&/Apple Computer/.test(la.vendor),Vo=Er&&(/Mobile\/\w+/.test(ks)||!!la&&la.maxTouchPoints>2),bn=Vo||(la?/Mac/.test(la.platform):!1),mP=la?/Win/.test(la.platform):!1,Ca=/Android \d/.test(ks),hu=!!cA&&"webkitFontSmoothing"in cA.documentElement.style,LZ=hu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function zZ(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ga(t,e){return typeof t=="number"?t:t[e]}function FZ(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function uA(t,e,r){let n=t.someProp("scrollThreshold")||0,a=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=Uo(o);continue}let l=o,c=l==i.body,u=c?zZ(i):FZ(l),d=0,f=0;if(e.top<u.top+ga(n,"top")?f=-(u.top-e.top+ga(a,"top")):e.bottom>u.bottom-ga(n,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+ga(a,"top")-u.top:e.bottom-u.bottom+ga(a,"bottom")),e.left<u.left+ga(n,"left")?d=-(u.left-e.left+ga(a,"left")):e.right>u.right-ga(n,"right")&&(d=e.right-u.right+ga(a,"right")),d||f)if(c)i.defaultView.scrollBy(d,f);else{let p=l.scrollLeft,g=l.scrollTop;f&&(l.scrollTop+=f),d&&(l.scrollLeft+=d);let x=l.scrollLeft-p,m=l.scrollTop-g;e={left:e.left-x,top:e.top-m,right:e.right-x,bottom:e.bottom-m}}let h=c?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:Uo(o)}}function BZ(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,a;for(let i=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(i,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=r-20){n=l,a=c.top;break}}return{refDOM:n,refTop:a,stack:gP(t.dom)}}function gP(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=Uo(n));return e}function qZ({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;xP(r,n==0?0:n-e)}function xP(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:a,left:i}=t[r];n.scrollTop!=a+e&&(n.scrollTop=a+e),n.scrollLeft!=i&&(n.scrollLeft=i)}}let Di=null;function UZ(t){if(t.setActive)return t.setActive();if(Di)return t.focus(Di);let e=gP(t);t.focus(Di==null?{get preventScroll(){return Di={preventScroll:!0},!0}}:void 0),Di||(Di=!1,xP(e,0))}function yP(t,e){let r,n=2e8,a,i=0,o=e.top,l=e.top,c,u;for(let d=t.firstChild,f=0;d;d=d.nextSibling,f++){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=ja(d).getClientRects();else continue;for(let p=0;p<h.length;p++){let g=h[p];if(g.top<=o&&g.bottom>=l){o=Math.max(g.bottom,o),l=Math.min(g.top,l);let x=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(x<n){r=d,n=x,a=x&&r.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,d.nodeType==1&&x&&(i=f+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!c&&g.left<=e.left&&g.right>=e.left&&(c=d,u={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!r&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(i=f+1)}}return!r&&c&&(r=c,a=u,n=0),r&&r.nodeType==3?VZ(r,a):!r||n&&r.nodeType==1?{node:t,offset:i}:yP(r,a)}function VZ(t,e){let r=t.nodeValue.length,n=document.createRange(),a;for(let i=0;i<r;i++){n.setEnd(t,i+1),n.setStart(t,i);let o=Ya(n,1);if(o.top!=o.bottom&&E1(e,o)){a={node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),a||{node:t,offset:0}}function E1(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function HZ(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function WZ(t,e,r){let{node:n,offset:a}=yP(e,r),i=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();i=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,a,i)}function GZ(t,e,r,n){let a=-1;for(let i=e,o=!1;i!=t.dom;){let l=t.docView.nearestDesc(i,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&c.left>n.left||c.top>n.top?a=l.posBefore:(!o&&c.right<n.left||c.bottom<n.top)&&(a=l.posAfter),o=!0),!l.contentDOM&&a<0&&!l.node.isText))return(l.node.isBlock?n.top<(c.top+c.bottom)/2:n.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;i=l.dom.parentNode}return a>-1?a:t.docView.posFromDOM(e,r,-1)}function vP(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let a=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),i=a;;){let o=t.childNodes[i];if(o.nodeType==1){let l=o.getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(E1(e,u))return vP(o,e,u)}}if((i=(i+1)%n)==a)break}return t}function YZ(t,e){let r=t.dom.ownerDocument,n,a=0,i=$Z(r,e.left,e.top);i&&({node:n,offset:a}=i);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!E1(e,u)||(o=vP(t.dom,e,u),!o))return null}if(Er)for(let u=o;n&&u;u=Uo(u))u.draggable&&(n=void 0);if(o=HZ(o,e),n){if(En&&n.nodeType==1&&(a=Math.min(a,n.childNodes.length),a<n.childNodes.length)){let d=n.childNodes[a],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&a++}let u;hu&&a&&n.nodeType==1&&(u=n.childNodes[a-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&a--,n==t.dom&&a==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(a==0||n.nodeType!=1||n.childNodes[a-1].nodeName!="BR")&&(l=GZ(t,n,a,e))}l==null&&(l=WZ(t,o,e));let c=t.docView.nearestDesc(o,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function dA(t){return t.top<t.bottom||t.left<t.right}function Ya(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(dA(n))return n}return Array.prototype.find.call(r,dA)||t.getBoundingClientRect()}const KZ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function bP(t,e,r){let{node:n,offset:a,atom:i}=t.docView.domFromPos(e,r<0?-1:1),o=hu||En;if(n.nodeType==3)if(o&&(KZ.test(n.nodeValue)||(r<0?!a:a==n.nodeValue.length))){let c=Ya(ja(n,a,a),r);if(En&&a&&/\s/.test(n.nodeValue[a-1])&&a<n.nodeValue.length){let u=Ya(ja(n,a-1,a-1),-1);if(u.top==c.top){let d=Ya(ja(n,a,a+1),-1);if(d.top!=c.top)return Il(d,d.left<u.left)}}return c}else{let c=a,u=a,d=r<0?1:-1;return r<0&&!a?(u++,d=-1):r>=0&&a==n.nodeValue.length?(c--,d=1):r<0?c--:u++,Il(Ya(ja(n,c,u),d),d<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&a&&(r<0||a==wn(n))){let c=n.childNodes[a-1];if(c.nodeType==1)return _0(c.getBoundingClientRect(),!1)}if(i==null&&a<wn(n)){let c=n.childNodes[a];if(c.nodeType==1)return _0(c.getBoundingClientRect(),!0)}return _0(n.getBoundingClientRect(),r>=0)}if(i==null&&a&&(r<0||a==wn(n))){let c=n.childNodes[a-1],u=c.nodeType==3?ja(c,wn(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(u)return Il(Ya(u,1),!1)}if(i==null&&a<wn(n)){let c=n.childNodes[a];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let u=c?c.nodeType==3?ja(c,0,o?0:1):c.nodeType==1?c:null:null;if(u)return Il(Ya(u,-1),!0)}return Il(Ya(n.nodeType==3?ja(n):n,-r),r>=0)}function Il(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function _0(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function jP(t,e,r){let n=t.state,a=t.root.activeElement;n!=e&&t.updateState(e),a!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),a!=t.dom&&a&&a.focus()}}function JZ(t,e,r){let n=e.selection,a=r=="up"?n.$from:n.$to;return jP(t,e,()=>{let{node:i}=t.docView.domFromPos(a.pos,r=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(i,!0);if(!l)break;if(l.node.isBlock){i=l.contentDOM||l.dom;break}i=l.dom.parentNode}let o=bP(t,a.pos,1);for(let l=i.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=ja(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<c.length;u++){let d=c[u];if(d.bottom>d.top+1&&(r=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const XZ=/[\u0590-\u08ac]/;function QZ(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let a=n.parentOffset,i=!a,o=a==n.parent.content.size,l=t.domSelection();return l?!XZ.test(n.parent.textContent)||!l.modify?r=="left"||r=="backward"?i:o:jP(t,e,()=>{let{focusNode:c,focusOffset:u,anchorNode:d,anchorOffset:f}=t.domSelectionRange(),h=l.caretBidiLevel;l.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:g,focusOffset:x}=t.domSelectionRange(),m=g&&!p.contains(g.nodeType==1?g:g.parentNode)||c==g&&u==x;try{l.collapse(d,f),c&&(c!=d||u!=f)&&l.extend&&l.extend(c,u)}catch{}return h!=null&&(l.caretBidiLevel=h),m}):n.pos==n.start()||n.pos==n.end()}let fA=null,hA=null,pA=!1;function ZZ(t,e,r){return fA==e&&hA==r?pA:(fA=e,hA=r,pA=r=="up"||r=="down"?JZ(t,e,r):QZ(t,e,r))}const On=0,mA=1,Xs=2,ca=3;class pu{constructor(e,r,n,a){this.parent=e,this.children=r,this.dom=n,this.contentDOM=a,this.dirty=On,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let a=this.children[r];if(a==e)return n;n+=a.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let i,o;if(e==this.contentDOM)i=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let a;if(e==this.dom&&this.contentDOM)a=r>yr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let i=e;;i=i.parentNode){if(i==this.dom){a=!1;break}if(i.previousSibling)break}if(a==null&&r==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){a=!0;break}if(i.nextSibling)break}}return a??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,a=e;a;a=a.parentNode){let i=this.getDesc(a),o;if(i&&(!r||i.node))if(n&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return i}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let a=e;a;a=a.parentNode){let i=this.getDesc(a);if(i)return i.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let a=this.children[r],i=n+a.size;if(n==e&&i!=n){for(;!a.border&&a.children.length;)for(let o=0;o<a.children.length;o++){let l=a.children[o];if(l.size){a=l;break}}return a}if(e<i)return a.descAt(e-n-a.border);n=i}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,a=0;for(let i=0;n<this.children.length;n++){let o=this.children[n],l=i+o.size;if(l>e||o instanceof SP){a=e-i;break}i=l}if(a)return this.children[n].domFromPos(a-this.children[n].border,r);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof wP&&i.side>=0;n--);if(r<=0){let i,o=!0;for(;i=n?this.children[n-1]:null,!(!i||i.dom.parentNode==this.contentDOM);n--,o=!1);return i&&r&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,r):{node:this.contentDOM,offset:i?yr(i.dom)+1:0}}else{let i,o=!0;for(;i=n<this.children.length?this.children[n]:null,!(!i||i.dom.parentNode==this.contentDOM);n++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,r):{node:this.contentDOM,offset:i?yr(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let a=-1,i=-1;for(let o=n,l=0;;l++){let c=this.children[l],u=o+c.size;if(a==-1&&e<=u){let d=o+c.border;if(e>=d&&r<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,r,d);e=o;for(let f=l;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){a=yr(h.dom)+1;break}e-=h.size}a==-1&&(a=0)}if(a>-1&&(u>r||l==this.children.length-1)){r=u;for(let d=l+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){i=yr(f.dom);break}r+=f.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:r,fromOffset:a,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,a=!1){let i=Math.min(e,r),o=Math.max(e,r);for(let p=0,g=0;p<this.children.length;p++){let x=this.children[p],m=g+x.size;if(i>g&&o<m)return x.setSelection(e-g-x.border,r-g-x.border,n,a);g=m}let l=this.domFromPos(e,e?-1:1),c=r==e?l:this.domFromPos(r,r?-1:1),u=n.root.getSelection(),d=n.domSelectionRange(),f=!1;if((En||Er)&&e==r){let{node:p,offset:g}=l;if(p.nodeType==3){if(f=!!(g&&p.nodeValue[g-1]==`
`),f&&g==p.nodeValue.length)for(let x=p,m;x;x=x.parentNode){if(m=x.nextSibling){m.nodeName=="BR"&&(l=c={node:m.parentNode,offset:yr(m)+1});break}let y=x.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let x=p.childNodes[g-1];f=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(En&&d.focusNode&&d.focusNode!=c.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(a=!0)}if(!(a||f&&Er)&&vi(l.node,l.offset,d.anchorNode,d.anchorOffset)&&vi(c.node,c.offset,d.focusNode,d.focusOffset))return;let h=!1;if((u.extend||e==r)&&!(f&&En)){u.collapse(l.node,l.offset);try{e!=r&&u.extend(c.node,c.offset),h=!0}catch{}}if(!h){if(e>r){let g=l;l=c,c=g}let p=document.createRange();p.setEnd(c.node,c.offset),p.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,a=0;a<this.children.length;a++){let i=this.children[a],o=n+i.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let l=n+i.border,c=o-i.border;if(e>=l&&r<=c){this.dirty=e==n||r==o?Xs:mA,e==l&&r==c&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=ca:i.markDirty(e-l,r-l);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Xs:ca}n=o}this.dirty=Xs}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?Xs:mA;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class wP extends pu{constructor(e,r,n,a){let i,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!i)return a;if(i.parent)return i.parent.posBeforeChild(i)})),!r.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,i=this}matchesWidget(e){return this.dirty==On&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class eee extends pu{constructor(e,r,n,a){super(e,[],r,null),this.textDOM=n,this.text=a}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class bi extends pu{constructor(e,r,n,a,i){super(e,[],n,a),this.mark=r,this.spec=i}static create(e,r,n,a){let i=a.nodeViews[r.type.name],o=i&&i(r,a,n);return(!o||!o.dom)&&(o=Pi.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new bi(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&ca||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ca&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=On){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=On}}slice(e,r,n){let a=bi.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;r<o&&(i=_v(i,r,o,n)),e>0&&(i=_v(i,0,e,n));for(let l=0;l<i.length;l++)i[l].parent=a;return a.children=i,a}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class hs extends pu{constructor(e,r,n,a,i,o,l,c,u){super(e,[],i,o),this.node=r,this.outerDeco=n,this.innerDeco=a,this.nodeDOM=l}static create(e,r,n,a,i,o){let l=i.nodeViews[r.type.name],c,u=l&&l(r,i,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},n,a),d=u&&u.dom,f=u&&u.contentDOM;if(r.isText){if(!d)d=document.createTextNode(r.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=Pi.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!f&&!r.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),r.type.spec.draggable&&(d.draggable=!0));let h=d;return d=CP(d,n,r),u?c=new tee(e,r,n,a,d,f||null,h,u,i,o+1):r.isText?new Jh(e,r,n,a,d,h,i):new hs(e,r,n,a,d,f||null,h,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>re.empty)}return e}matchesNode(e,r,n){return this.dirty==On&&e.eq(this.node)&&xf(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,a=r,i=e.composing?this.localCompositionInfo(e,r):null,o=i&&i.pos>-1?i:null,l=i&&i.pos<0,c=new nee(this,o&&o.node,e);iee(this.node,this.innerDeco,(u,d,f)=>{u.spec.marks?c.syncToMarks(u.spec.marks,n,e):u.type.side>=0&&!f&&c.syncToMarks(d==this.node.childCount?bt.none:this.node.child(d).marks,n,e),c.placeWidget(u,e,a)},(u,d,f,h)=>{c.syncToMarks(u.marks,n,e);let p;c.findNodeMatch(u,d,f,h)||l&&e.state.selection.from>a&&e.state.selection.to<a+u.nodeSize&&(p=c.findIndexWithChild(i.node))>-1&&c.updateNodeAt(u,d,f,p,e)||c.updateNextNode(u,d,f,e,h,a)||c.addNode(u,d,f,e,a),a+=u.nodeSize}),c.syncToMarks([],n,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Xs)&&(o&&this.protectLocalComposition(e,o),NP(this.contentDOM,this.children,e),Vo&&oee(this.dom))}localCompositionInfo(e,r){let{from:n,to:a}=e.state.selection;if(!(e.state.selection instanceof qe)||n<r||a>r+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,l=lee(this.node.content,o,n-r,a-r);return l<0?null:{node:i,pos:l,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:a}){if(this.getDesc(r))return;let i=r;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new eee(this,i,r,a);e.input.compositionNodes.push(o),this.children=_v(this.children,n,n+a.length,e,o)}update(e,r,n,a){return this.dirty==ca||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,a),!0)}updateInner(e,r,n,a){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(a,this.posAtStart),this.dirty=On}updateOuterDeco(e){if(xf(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=AP(this.dom,this.nodeDOM,Rv(this.outerDeco,this.node,r),Rv(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function gA(t,e,r,n,a){CP(n,e,t);let i=new hs(void 0,t,e,r,n,n,n,a,0);return i.contentDOM&&i.updateChildren(a,0),i}class Jh extends hs{constructor(e,r,n,a,i,o,l){super(e,r,n,a,i,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,a){return this.dirty==ca||this.dirty!=On&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=On||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,a.trackWrites==this.nodeDOM&&(a.trackWrites=null)),this.node=e,this.dirty=On,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let a=this.node.cut(e,r),i=document.createTextNode(a.text);return new Jh(this.parent,a,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=ca)}get domAtom(){return!1}isText(e){return this.node.text==e}}class SP extends pu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==On&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class tee extends hs{constructor(e,r,n,a,i,o,l,c,u,d){super(e,r,n,a,i,o,l,u,d),this.spec=c}update(e,r,n,a){if(this.dirty==ca)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,r,n);return i&&this.updateInner(e,r,n,a),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,a)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,a){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,a)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function NP(t,e,r){let n=t.firstChild,a=!1;for(let i=0;i<e.length;i++){let o=e[i],l=o.dom;if(l.parentNode==t){for(;l!=n;)n=xA(n),a=!0;n=n.nextSibling}else a=!0,t.insertBefore(l,n);if(o instanceof bi){let c=n?n.previousSibling:t.lastChild;NP(o.contentDOM,o.children,r),n=c?c.nextSibling:t.firstChild}}for(;n;)n=xA(n),a=!0;a&&r.trackWrites==t&&(r.trackWrites=null)}const ec=function(t){t&&(this.nodeName=t)};ec.prototype=Object.create(null);const Qs=[new ec];function Rv(t,e,r){if(t.length==0)return Qs;let n=r?Qs[0]:new ec,a=[n];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&a.push(n=new ec(o.nodeName));for(let l in o){let c=o[l];c!=null&&(r&&a.length==1&&a.push(n=new ec(e.isInline?"span":"div")),l=="class"?n.class=(n.class?n.class+" ":"")+c:l=="style"?n.style=(n.style?n.style+";":"")+c:l!="nodeName"&&(n[l]=c))}}}return a}function AP(t,e,r,n){if(r==Qs&&n==Qs)return e;let a=e;for(let i=0;i<n.length;i++){let o=n[i],l=r[i];if(i){let c;l&&l.nodeName==o.nodeName&&a!=t&&(c=a.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(a),l=Qs[0]),a=c}ree(a,l||Qs[0],o)}return a}function ree(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],a=r.class?r.class.split(" ").filter(Boolean):[];for(let i=0;i<n.length;i++)a.indexOf(n[i])==-1&&t.classList.remove(n[i]);for(let i=0;i<a.length;i++)n.indexOf(a[i])==-1&&t.classList.add(a[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,a;for(;a=n.exec(e.style);)t.style.removeProperty(a[1])}r.style&&(t.style.cssText+=r.style)}}function CP(t,e,r){return AP(t,t,Qs,Rv(e,r,t.nodeType!=1))}function xf(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function xA(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class nee{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=aee(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let a=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;a<o&&(a==i-1?this.top:this.stack[a+1<<1]).matchesMark(e[a])&&e[a].type.spec.spanning!==!1;)a++;for(;a<i;)this.destroyRest(),this.top.dirty=On,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let u=this.top.children[c];if(u.matchesMark(e[i])&&!this.isLocked(u.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=bi.create(this.top,e[i],r,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}}findNodeMatch(e,r,n,a){let i=-1,o;if(a>=this.preMatch.index&&(o=this.preMatch.matches[a-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))i=this.top.children.indexOf(o,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let u=this.top.children[l];if(u.matchesNode(e,r,n)&&!this.preMatch.matched.has(u)){i=l;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,r,n,a,i){let o=this.top.children[a];return o.dirty==ca&&o.dom==o.contentDOM&&(o.dirty=Xs),o.update(e,r,n,i)?(this.destroyBetween(this.index,a),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let a=this.index;a<this.top.children.length;a++)if(this.top.children[a]==n)return a}return-1}e=r}}updateNextNode(e,r,n,a,i,o){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof hs){let u=this.preMatch.matched.get(c);if(u!=null&&u!=i)return!1;let d=c.dom,f,h=this.isLocked(d)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=ca&&xf(r,c.outerDeco));if(!h&&c.update(e,r,n,a))return this.destroyBetween(this.index,l),c.dom!=d&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(c,e,r,n,a,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Xs,f.updateChildren(a,o+1),f.dirty=On),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,a,i,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!xf(n,e.outerDeco)||!a.eq(e.innerDeco))return null;let l=hs.create(this.top,r,n,a,i,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let c of l.children)c.parent=l}return e.destroy(),l}addNode(e,r,n,a,i){let o=hs.create(this.top,e,r,n,a,i);o.contentDOM&&o.updateChildren(a,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let a=this.index<this.top.children.length?this.top.children[this.index]:null;if(a&&a.matchesWidget(e)&&(e==a.widget||!a.widget.type.toDOM.parentNode))this.index++;else{let i=new wP(this.top,e,r,n);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof bi;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof Jh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Er||dr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let a=new SP(this.top,[],n,null);r!=this.top?r.children.push(a):r.children.splice(this.index++,0,a),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function aee(t,e){let r=e,n=r.children.length,a=t.childCount,i=new Map,o=[];e:for(;a>0;){let l;for(;;)if(n){let u=r.children[n-1];if(u instanceof bi)r=u,n=u.children.length;else{l=u,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let c=l.node;if(c){if(c!=t.child(a-1))break;--a,i.set(l,a),o.push(l)}}return{index:a,matched:i,matches:o.reverse()}}function see(t,e){return t.type.side-e.type.side}function iee(t,e,r,n){let a=e.locals(t),i=0;if(a.length==0){for(let u=0;u<t.childCount;u++){let d=t.child(u);n(d,a,e.forChild(i,d),u),i+=d.nodeSize}return}let o=0,l=[],c=null;for(let u=0;;){let d,f;for(;o<a.length&&a[o].to==i;){let m=a[o++];m.widget&&(d?(f||(f=[d])).push(m):d=m)}if(d)if(f){f.sort(see);for(let m=0;m<f.length;m++)r(f[m],u,!!c)}else r(d,u,!!c);let h,p;if(c)p=-1,h=c,c=null;else if(u<t.childCount)p=u,h=t.child(u++);else break;for(let m=0;m<l.length;m++)l[m].to<=i&&l.splice(m--,1);for(;o<a.length&&a[o].from<=i&&a[o].to>i;)l.push(a[o++]);let g=i+h.nodeSize;if(h.isText){let m=g;o<a.length&&a[o].from<m&&(m=a[o].from);for(let y=0;y<l.length;y++)l[y].to<m&&(m=l[y].to);m<g&&(c=h.cut(m-i),h=h.cut(0,m-i),g=m,p=-1)}else for(;o<a.length&&a[o].to<g;)o++;let x=h.isInline&&!h.isLeaf?l.filter(m=>!m.inline):l.slice();n(h,x,e.forChild(i,h),p),i=g}}function oee(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function lee(t,e,r,n){for(let a=0,i=0;a<t.childCount&&i<=n;){let o=t.child(a++),l=i;if(i+=o.nodeSize,!o.isText)continue;let c=o.text;for(;a<t.childCount;){let u=t.child(a++);if(i+=u.nodeSize,!u.isText)break;c+=u.text}if(i>=r){if(i>=n&&c.slice(n-e.length-l,n-l)==e)return n-e.length;let u=l<n?c.lastIndexOf(e,n-l-1):-1;if(u>=0&&u+e.length+l>=r)return l+u;if(r==n&&c.length>=n+e.length-l&&c.slice(n-l,n-l+e.length)==e)return n}}return-1}function _v(t,e,r,n,a){let i=[];for(let o=0,l=0;o<t.length;o++){let c=t[o],u=l,d=l+=c.size;u>=r||d<=e?i.push(c):(u<e&&i.push(c.slice(0,e-u,n)),a&&(i.push(a),a=void 0),d>r&&i.push(c.slice(r-u,c.size,n)))}return i}function O1(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let a=t.docView.nearestDesc(r.focusNode),i=a&&a.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let l=n.resolve(o),c,u;if(Kh(r)){for(c=o;a&&!a.node;)a=a.parent;let f=a.node;if(a&&f.isAtom&&Te.isSelectable(f)&&a.parent&&!(f.isInline&&_Z(r.focusNode,r.focusOffset,a.dom))){let h=a.posBefore;u=new Te(o==h?l:n.resolve(h))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let f=o,h=o;for(let p=0;p<r.rangeCount;p++){let g=r.getRangeAt(p);f=Math.min(f,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(f<0)return null;[c,o]=h==t.state.selection.anchor?[h,f]:[f,h],l=n.resolve(o)}else c=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(c<0)return null}let d=n.resolve(c);if(!u){let f=e=="pointer"||t.state.selection.head<l.pos&&!i?1:-1;u=P1(t,d,l,f)}return u}function kP(t){return t.editable?t.hasFocus():OP(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ta(t,e=!1){let r=t.state.selection;if(EP(t,r),!!kP(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&dr){let n=t.domSelectionRange(),a=t.domObserver.currentSelection;if(n.anchorNode&&a.anchorNode&&vi(n.anchorNode,n.anchorOffset,a.anchorNode,a.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)uee(t);else{let{anchor:n,head:a}=r,i,o;yA&&!(r instanceof qe)&&(r.$from.parent.inlineContent||(i=vA(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=vA(t,r.to))),t.docView.setSelection(n,a,t,e),yA&&(i&&bA(i),o&&bA(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&cee(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const yA=Er||dr&&pP<63;function vA(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),a=n<r.childNodes.length?r.childNodes[n]:null,i=n?r.childNodes[n-1]:null;if(Er&&a&&a.contentEditable=="false")return D0(a);if((!a||a.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(a)return D0(a);if(i)return D0(i)}}function D0(t){return t.contentEditable="true",Er&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function bA(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function cee(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,a=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=a)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!kP(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function uee(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,yr(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&Wr&&fs<=11&&(r.disabled=!0,r.disabled=!1)}function EP(t,e){if(e instanceof Te){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(jA(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else jA(t)}function jA(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function P1(t,e,r,n){return t.someProp("createSelectionBetween",a=>a(t,e,r))||qe.between(e,r,n)}function wA(t){return t.editable&&!t.hasFocus()?!1:OP(t)}function OP(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function dee(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return vi(e.node,e.offset,r.anchorNode,r.anchorOffset)}function Dv(t,e){let{$anchor:r,$head:n}=t.selection,a=e>0?r.max(n):r.min(n),i=a.parent.inlineContent?a.depth?t.doc.resolve(e>0?a.after():a.before()):null:a;return i&&Ye.findFrom(i,e)}function Ja(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function SA(t,e,r){let n=t.state.selection;if(n instanceof qe)if(r.indexOf("s")>-1){let{$head:a}=n,i=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(a.pos+i.nodeSize*(e<0?-1:1));return Ja(t,new qe(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let a=Dv(t.state,e);return a&&a instanceof Te?Ja(t,a):!1}else if(!(bn&&r.indexOf("m")>-1)){let a=n.$head,i=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter,o;if(!i||i.isText)return!1;let l=e<0?a.pos-i.nodeSize:a.pos;return i.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?Te.isSelectable(i)?Ja(t,new Te(e<0?t.state.doc.resolve(a.pos-i.nodeSize):a)):hu?Ja(t,new qe(t.state.doc.resolve(e<0?l:l+i.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Te&&n.node.isInline)return Ja(t,new qe(e>0?n.$to:n.$from));{let a=Dv(t.state,e);return a?Ja(t,a):!1}}}function yf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function tc(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function $i(t,e){return e<0?fee(t):hee(t)}function fee(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let a,i,o=!1;for(En&&r.nodeType==1&&n<yf(r)&&tc(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let l=r.childNodes[n-1];if(tc(l,-1))a=r,i=--n;else if(l.nodeType==3)r=l,n=r.nodeValue.length;else break}}else{if(PP(r))break;{let l=r.previousSibling;for(;l&&tc(l,-1);)a=r.parentNode,i=yr(l),l=l.previousSibling;if(l)r=l,n=yf(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?$v(t,r,n):a&&$v(t,a,i)}function hee(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let a=yf(r),i,o;for(;;)if(n<a){if(r.nodeType!=1)break;let l=r.childNodes[n];if(tc(l,1))i=r,o=++n;else break}else{if(PP(r))break;{let l=r.nextSibling;for(;l&&tc(l,1);)i=l.parentNode,o=yr(l)+1,l=l.nextSibling;if(l)r=l,n=0,a=yf(r);else{if(r=r.parentNode,r==t.dom)break;n=a=0}}}i&&$v(t,i,o)}function PP(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function pee(t,e){for(;t&&e==t.childNodes.length&&!fu(t);)e=yr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function mee(t,e){for(;t&&!e&&!fu(t);)e=yr(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function $v(t,e,r){if(e.nodeType!=3){let i,o;(o=pee(e,r))?(e=o,r=0):(i=mee(e,r))&&(e=i,r=i.nodeValue.length)}let n=t.domSelection();if(!n)return;if(Kh(n)){let i=document.createRange();i.setEnd(e,r),i.setStart(e,r),n.removeAllRanges(),n.addRange(i)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:a}=t;setTimeout(()=>{t.state==a&&Ta(t)},50)}function NA(t,e){let r=t.state.doc.resolve(e);if(!(dr||mP)&&r.parent.inlineContent){let a=t.coordsAtPos(e);if(e>r.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>a.top&&o<a.bottom&&Math.abs(i.left-a.left)>1)return i.left<a.left?"ltr":"rtl"}if(e<r.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>a.top&&o<a.bottom&&Math.abs(i.left-a.left)>1)return i.left>a.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function AA(t,e,r){let n=t.state.selection;if(n instanceof qe&&!n.empty||r.indexOf("s")>-1||bn&&r.indexOf("m")>-1)return!1;let{$from:a,$to:i}=n;if(!a.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Dv(t.state,e);if(o&&o instanceof Te)return Ja(t,o)}if(!a.parent.inlineContent){let o=e<0?a:i,l=n instanceof cn?Ye.near(o,e):Ye.findFrom(o,e);return l?Ja(t,l):!1}return!1}function CA(t,e){if(!(t.state.selection instanceof qe))return!0;let{$head:r,$anchor:n,empty:a}=t.state.selection;if(!r.sameParent(n))return!0;if(!a)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(r.pos-i.nodeSize,r.pos):o.delete(r.pos,r.pos+i.nodeSize),t.dispatch(o),!0}return!1}function kA(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function gee(t){if(!Er||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;kA(t,n,"true"),setTimeout(()=>kA(t,n,"false"),20)}return!1}function xee(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function yee(t,e){let r=e.keyCode,n=xee(e);if(r==8||bn&&r==72&&n=="c")return CA(t,-1)||$i(t,-1);if(r==46&&!e.shiftKey||bn&&r==68&&n=="c")return CA(t,1)||$i(t,1);if(r==13||r==27)return!0;if(r==37||bn&&r==66&&n=="c"){let a=r==37?NA(t,t.state.selection.from)=="ltr"?-1:1:-1;return SA(t,a,n)||$i(t,a)}else if(r==39||bn&&r==70&&n=="c"){let a=r==39?NA(t,t.state.selection.from)=="ltr"?1:-1:1;return SA(t,a,n)||$i(t,a)}else{if(r==38||bn&&r==80&&n=="c")return AA(t,-1,n)||$i(t,-1);if(r==40||bn&&r==78&&n=="c")return gee(t)||AA(t,1,n)||$i(t,1);if(n==(bn?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function T1(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:a,openEnd:i}=e;for(;a>1&&i>1&&n.childCount==1&&n.firstChild.childCount==1;){a--,i--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Pi.fromSchema(t.state.schema),l=DP(),c=l.createElement("div");c.appendChild(o.serializeFragment(n,{document:l}));let u=c.firstChild,d,f=0;for(;u&&u.nodeType==1&&(d=_P[u.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let g=l.createElement(d[p]);for(;c.firstChild;)g.appendChild(c.firstChild);c.appendChild(g),f++}u=c.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${a} ${i}${f?` -${f}`:""} ${JSON.stringify(r)}`);let h=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:h,slice:e}}function TP(t,e,r,n,a){let i=a.parent.type.spec.code,o,l;if(!r&&!e)return null;let c=!!e&&(n||i||!r);if(c){if(t.someProp("transformPastedText",h=>{e=h(e,i||n,t)}),i)return l=new ge(re.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",h=>{l=h(l,t,!0)}),l;let f=t.someProp("clipboardTextParser",h=>h(e,a,n,t));if(f)l=f;else{let h=a.marks(),{schema:p}=t.state,g=Pi.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(x=>{let m=o.appendChild(document.createElement("p"));x&&m.appendChild(g.serializeNode(p.text(x,h)))})}}else t.someProp("transformPastedHTML",f=>{r=f(r,t)}),o=wee(r),hu&&See(o);let u=o&&o.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||ds.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||d),context:a,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!vee.test(h.parentNode.nodeName)?{ignore:!0}:null}})),d)l=Nee(EA(l,+d[1],+d[2]),d[4]);else if(l=ge.maxOpen(bee(l.content,a),!0),l.openStart||l.openEnd){let f=0,h=0;for(let p=l.content.firstChild;f<l.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=l.content.lastChild;h<l.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);l=EA(l,f,h)}return t.someProp("transformPasted",f=>{l=f(l,t,c)}),l}const vee=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function bee(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let a=e.node(r).contentMatchAt(e.index(r)),i,o=[];if(t.forEach(l=>{if(!o)return;let c=a.findWrapping(l.type),u;if(!c)return o=null;if(u=o.length&&i.length&&MP(c,i,l,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=RP(o[o.length-1],i.length));let d=IP(l,c);o.push(d),a=a.matchType(d.type),i=c}}),o)return re.from(o)}return t}function IP(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,re.from(t));return t}function MP(t,e,r,n,a){if(a<t.length&&a<e.length&&t[a]==e[a]){let i=MP(t,e,r,n.lastChild,a+1);if(i)return n.copy(n.content.replaceChild(n.childCount-1,i));if(n.contentMatchAt(n.childCount).matchType(a==t.length-1?r.type:t[a+1]))return n.copy(n.content.append(re.from(IP(r,t,a+1))))}}function RP(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,RP(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(re.empty,!0);return t.copy(r.append(n))}function Lv(t,e,r,n,a,i){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(i=0),a<n-1&&(l=Lv(l,e,r,n,a+1,i)),a>=r&&(l=e<0?o.contentMatchAt(0).fillBefore(l,i<=a).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(re.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function EA(t,e,r){return e<t.openStart&&(t=new ge(Lv(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new ge(Lv(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const _P={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let OA=null;function DP(){return OA||(OA=document.implementation.createHTMLDocument("title"))}let $0=null;function jee(t){let e=window.trustedTypes;return e?($0||($0=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),$0.createHTML(t)):t}function wee(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=DP().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),a;if((a=n&&_P[n[1].toLowerCase()])&&(t=a.map(i=>"<"+i+">").join("")+t+a.map(i=>"</"+i+">").reverse().join("")),r.innerHTML=jee(t),a)for(let i=0;i<a.length;i++)r=r.querySelector(a[i])||r;return r}function See(t){let e=t.querySelectorAll(dr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==" "&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function Nee(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:a,openStart:i,openEnd:o}=t;for(let l=n.length-2;l>=0;l-=2){let c=r.nodes[n[l]];if(!c||c.hasRequiredAttrs())break;a=re.from(c.create(n[l+1],a)),i++,o++}return new ge(a,i,o)}const zr={},Fr={},Aee={touchstart:!0,touchmove:!0};class Cee{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function kee(t){for(let e in zr){let r=zr[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{Oee(t,n)&&!I1(t,n)&&(t.editable||!(n.type in Fr))&&r(t,n)},Aee[e]?{passive:!0}:void 0)}Er&&t.dom.addEventListener("input",()=>null),zv(t)}function ls(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Eee(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function zv(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>I1(t,n))})}function I1(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function Oee(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function Pee(t,e){!I1(t,e)&&zr[e.type]&&(t.editable||!(e.type in Fr))&&zr[e.type](t,e)}Fr.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!LP(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Ca&&dr&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),Vo&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",a=>a(t,Hs(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||yee(t,r)?r.preventDefault():ls(t,"key")};Fr.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Fr.keypress=(t,e)=>{let r=e;if(LP(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||bn&&r.metaKey)return;if(t.someProp("handleKeyPress",a=>a(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof qe)||!n.$from.sameParent(n.$to)){let a=String.fromCharCode(r.charCode),i=()=>t.state.tr.insertText(a).scrollIntoView();!/[\r\n]/.test(a)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,a,i))&&t.dispatch(i()),r.preventDefault()}};function Xh(t){return{left:t.clientX,top:t.clientY}}function Tee(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function M1(t,e,r,n,a){if(n==-1)return!1;let i=t.state.doc.resolve(n);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,l=>o>i.depth?l(t,r,i.nodeAfter,i.before(o),a,!0):l(t,r,i.node(o),i.before(o),a,!1)))return!0;return!1}function ro(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function Iee(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&Te.isSelectable(n)?(ro(t,new Te(r)),!0):!1}function Mee(t,e){if(e==-1)return!1;let r=t.state.selection,n,a;r instanceof Te&&(n=r.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o);if(Te.isSelectable(l)){n&&r.$from.depth>0&&o>=r.$from.depth&&i.before(r.$from.depth+1)==r.$from.pos?a=i.before(r.$from.depth):a=i.before(o);break}}return a!=null?(ro(t,Te.create(t.state.doc,a)),!0):!1}function Ree(t,e,r,n,a){return M1(t,"handleClickOn",e,r,n)||t.someProp("handleClick",i=>i(t,e,n))||(a?Mee(t,r):Iee(t,r))}function _ee(t,e,r,n){return M1(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",a=>a(t,e,n))}function Dee(t,e,r,n){return M1(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",a=>a(t,e,n))||$ee(t,r,n)}function $ee(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(ro(t,qe.create(n,0,n.content.size)),!0):!1;let a=n.resolve(e);for(let i=a.depth+1;i>0;i--){let o=i>a.depth?a.nodeAfter:a.node(i),l=a.before(i);if(o.inlineContent)ro(t,qe.create(n,l+1,l+1+o.content.size));else if(Te.isSelectable(o))ro(t,Te.create(n,l));else continue;return!0}}function R1(t){return vf(t)}const $P=bn?"metaKey":"ctrlKey";zr.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=R1(t),a=Date.now(),i="singleClick";a-t.input.lastClick.time<500&&Tee(r,t.input.lastClick)&&!r[$P]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:a,x:r.clientX,y:r.clientY,type:i,button:r.button};let o=t.posAtCoords(Xh(r));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Lee(t,o,r,!!n)):(i=="doubleClick"?_ee:Dee)(t,o.pos,o.inside,r)?r.preventDefault():ls(t,"pointer"))};class Lee{constructor(e,r,n,a){this.view=e,this.pos=r,this.event=n,this.flushed=a,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[$P],this.allowDefault=n.shiftKey;let i,o;if(r.inside>-1)i=e.state.doc.nodeAt(r.inside),o=r.inside;else{let d=e.state.doc.resolve(r.pos);i=d.parent,o=d.depth?d.before():0}const l=a?null:n.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:u}=e.state;(n.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||u instanceof Te&&u.from<=o&&u.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&En&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ls(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ta(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(Xh(e))),this.updateAllowDefault(e),this.allowDefault||!r?ls(this.view,"pointer"):Ree(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Er&&this.mightDrag&&!this.mightDrag.node.isAtom||dr&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(ro(this.view,Ye.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):ls(this.view,"pointer")}move(e){this.updateAllowDefault(e),ls(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}zr.touchstart=t=>{t.input.lastTouch=Date.now(),R1(t),ls(t,"pointer")};zr.touchmove=t=>{t.input.lastTouch=Date.now(),ls(t,"pointer")};zr.contextmenu=t=>R1(t);function LP(t,e){return t.composing?!0:Er&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const zee=Ca?5e3:-1;Fr.compositionstart=Fr.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof qe&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||dr&&mP&&Fee(t)))t.markCursor=t.state.storedMarks||r.marks(),vf(t,!0),t.markCursor=null;else if(vf(t,!e.selection.empty),En&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let a=n.focusNode,i=n.focusOffset;a&&a.nodeType==1&&i!=0;){let o=i<0?a.lastChild:a.childNodes[i-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else a=o,i=-1}}t.input.composing=!0}zP(t,zee)};function Fee(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Fr.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,zP(t,20))};function zP(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>vf(t),e))}function FP(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=qee());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Bee(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=MZ(e.focusNode,e.focusOffset),n=RZ(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let a=n.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(r==i||n==i)return i;if(!a||!a.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function qee(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function vf(t,e=!1){if(!(Ca&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),FP(t),e||t.docView&&t.docView.dirty){let r=O1(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Uee(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),a=document.createRange();a.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(a),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const Qc=Wr&&fs<15||Vo&&LZ<604;zr.copy=Fr.cut=(t,e)=>{let r=e,n=t.state.selection,a=r.type=="cut";if(n.empty)return;let i=Qc?null:r.clipboardData,o=n.content(),{dom:l,text:c}=T1(t,o);i?(r.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",c)):Uee(t,l),a&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Vee(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Hee(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let a=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?Zc(t,n.value,null,a,e):Zc(t,n.textContent,n.innerHTML,a,e)},50)}function Zc(t,e,r,n,a){let i=TP(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,a,i||ge.empty)))return!0;if(!i)return!1;let o=Vee(i),l=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(i);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function BP(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Fr.paste=(t,e)=>{let r=e;if(t.composing&&!Ca)return;let n=Qc?null:r.clipboardData,a=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&Zc(t,BP(n),n.getData("text/html"),a,r)?r.preventDefault():Hee(t,r)};class qP{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const Wee=bn?"altKey":"ctrlKey";function UP(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[Wee]}zr.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let a=t.state.selection,i=a.empty?null:t.posAtCoords(Xh(r)),o;if(!(i&&i.pos>=a.from&&i.pos<=(a instanceof Te?a.to-1:a.to))){if(n&&n.mightDrag)o=Te.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let f=t.docView.nearestDesc(r.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(o=Te.create(t.state.doc,f.posBefore))}}let l=(o||t.state.selection).content(),{dom:c,text:u,slice:d}=T1(t,l);(!r.dataTransfer.files.length||!dr||pP>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(Qc?"Text":"text/html",c.innerHTML),r.dataTransfer.effectAllowed="copyMove",Qc||r.dataTransfer.setData("text/plain",u),t.dragging=new qP(d,UP(t,r),o)};zr.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Fr.dragover=Fr.dragenter=(t,e)=>e.preventDefault();Fr.drop=(t,e)=>{try{Gee(t,e,t.dragging)}finally{t.dragging=null}};function Gee(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(Xh(e));if(!n)return;let a=t.state.doc.resolve(n.pos),i=r&&r.slice;i?t.someProp("transformPasted",p=>{i=p(i,t,!1)}):i=TP(t,BP(e.dataTransfer),Qc?null:e.dataTransfer.getData("text/html"),!1,a);let o=!!(r&&UP(t,e));if(t.someProp("handleDrop",p=>p(t,e,i||ge.empty,o))){e.preventDefault();return}if(!i)return;e.preventDefault();let l=i?G8(t.state.doc,a.pos,i):a.pos;l==null&&(l=a.pos);let c=t.state.tr;if(o){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,i.content.firstChild):c.replaceRange(u,u,i),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&Te.isSelectable(i.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new Te(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,x,m,y)=>p=y),c.setSelection(P1(t,h,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))}zr.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ta(t)},20))};zr.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};zr.beforeinput=(t,e)=>{if(dr&&Ca&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Hs(8,"Backspace")))))return;let{$cursor:a}=t.state.selection;a&&a.pos>0&&t.dispatch(t.state.tr.delete(a.pos-1,a.pos).scrollIntoView())},50)}};for(let t in Fr)zr[t]=Fr[t];function eu(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class bf{constructor(e,r){this.toDOM=e,this.spec=r||ii,this.side=this.spec.side||0}map(e,r,n,a){let{pos:i,deleted:o}=e.mapResult(r.from+a,this.side<0?-1:1);return o?null:new Lr(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof bf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&eu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ps{constructor(e,r){this.attrs=e,this.spec=r||ii}map(e,r,n,a){let i=e.map(r.from+a,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+a,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new Lr(i,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof ps&&eu(this.attrs,e.attrs)&&eu(this.spec,e.spec)}static is(e){return e.type instanceof ps}destroy(){}}class _1{constructor(e,r){this.attrs=e,this.spec=r||ii}map(e,r,n,a){let i=e.mapResult(r.from+a,1);if(i.deleted)return null;let o=e.mapResult(r.to+a,-1);return o.deleted||o.pos<=i.pos?null:new Lr(i.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:a}=e.content.findIndex(r.from),i;return a==r.from&&!(i=e.child(n)).isText&&a+i.nodeSize==r.to}eq(e){return this==e||e instanceof _1&&eu(this.attrs,e.attrs)&&eu(this.spec,e.spec)}destroy(){}}class Lr{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new Lr(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new Lr(e,e,new bf(r,n))}static inline(e,r,n,a){return new Lr(e,r,new ps(n,a))}static node(e,r,n,a){return new Lr(e,r,new _1(n,a))}get spec(){return this.type.spec}get inline(){return this.type instanceof ps}get widget(){return this.type instanceof bf}}const Fi=[],ii={};class _t{constructor(e,r){this.local=e.length?e:Fi,this.children=r.length?r:Fi}static create(e,r){return r.length?jf(r,e,0,ii):wr}find(e,r,n){let a=[];return this.findInner(e??0,r??1e9,a,0,n),a}findInner(e,r,n,a,i){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=r&&l.to>=e&&(!i||i(l.spec))&&n.push(l.copy(l.from+a,l.to+a))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,r-l,n,a+l,i)}}map(e,r,n){return this==wr||e.maps.length==0?this:this.mapInner(e,r,0,0,n||ii)}mapInner(e,r,n,a,i){let o;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(e,n,a);c&&c.type.valid(r,c)?(o||(o=[])).push(c):i.onRemove&&i.onRemove(this.local[l].spec)}return this.children.length?Yee(this.children,o||[],e,r,n,a,i):o?new _t(o.sort(oi),Fi):wr}add(e,r){return r.length?this==wr?_t.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let a,i=0;e.forEach((l,c)=>{let u=c+n,d;if(d=HP(r,l,u)){for(a||(a=this.children.slice());i<a.length&&a[i]<c;)i+=3;a[i]==c?a[i+2]=a[i+2].addInner(l,d,u+1):a.splice(i,0,c,c+l.nodeSize,jf(d,l,u+1,ii)),i+=3}});let o=VP(i?WP(r):r,-n);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new _t(o.length?this.local.concat(o).sort(oi):this.local,a||this.children)}remove(e){return e.length==0||this==wr?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,a=this.local;for(let i=0;i<n.length;i+=3){let o,l=n[i]+r,c=n[i+1]+r;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>l&&f.to<c&&(e[d]=null,(o||(o=[])).push(f));if(!o)continue;n==this.children&&(n=this.children.slice());let u=n[i+2].removeInner(o,l+1);u!=wr?n[i+2]=u:(n.splice(i,3),i-=3)}if(a.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let l=0;l<a.length;l++)a[l].eq(o,r)&&(a==this.local&&(a=this.local.slice()),a.splice(l--,1))}return n==this.children&&a==this.local?this:a.length||n.length?new _t(a,n):wr}forChild(e,r){if(this==wr)return this;if(r.isLeaf)return _t.empty;let n,a;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(n=this.children[l+2]);break}let i=e+1,o=i+r.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<o&&c.to>i&&c.type instanceof ps){let u=Math.max(i,c.from)-i,d=Math.min(o,c.to)-i;u<d&&(a||(a=[])).push(c.copy(u,d))}}if(a){let l=new _t(a.sort(oi),Fi);return n?new es([l,n]):l}return n||wr}eq(e){if(this==e)return!0;if(!(e instanceof _t)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return D1(this.localsInner(e))}localsInner(e){if(this==wr)return Fi;if(e.inlineContent||!this.local.some(ps.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof ps||r.push(this.local[n]);return r}forEachSet(e){e(this)}}_t.empty=new _t([],[]);_t.removeOverlap=D1;const wr=_t.empty;class es{constructor(e){this.members=e}map(e,r){const n=this.members.map(a=>a.map(e,r,ii));return es.from(n)}forChild(e,r){if(r.isLeaf)return _t.empty;let n=[];for(let a=0;a<this.members.length;a++){let i=this.members[a].forChild(e,r);i!=wr&&(i instanceof es?n=n.concat(i.members):n.push(i))}return es.from(n)}eq(e){if(!(e instanceof es)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let a=0;a<this.members.length;a++){let i=this.members[a].localsInner(e);if(i.length)if(!r)r=i;else{n&&(r=r.slice(),n=!1);for(let o=0;o<i.length;o++)r.push(i[o])}}return r?D1(n?r:r.sort(oi)):Fi}static from(e){switch(e.length){case 0:return wr;case 1:return e[0];default:return new es(e.every(r=>r instanceof _t)?e:e.reduce((r,n)=>r.concat(n instanceof _t?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function Yee(t,e,r,n,a,i,o){let l=t.slice();for(let u=0,d=i;u<r.maps.length;u++){let f=0;r.maps[u].forEach((h,p,g,x)=>{let m=x-g-(p-h);for(let y=0;y<l.length;y+=3){let v=l[y+1];if(v<0||h>v+d-f)continue;let w=l[y]+d-f;p>=w?l[y+1]=h<=w?-2:-1:h>=d&&m&&(l[y]+=m,l[y+1]+=m)}f+=m}),d=r.maps[u].map(d,-1)}let c=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){c=!0,l[u+1]=-1;continue}let d=r.map(t[u]+i),f=d-a;if(f<0||f>=n.content.size){c=!0;continue}let h=r.map(t[u+1]+i,-1),p=h-a,{index:g,offset:x}=n.content.findIndex(f),m=n.maybeChild(g);if(m&&x==f&&x+m.nodeSize==p){let y=l[u+2].mapInner(r,m,d+1,t[u]+i+1,o);y!=wr?(l[u]=f,l[u+1]=p,l[u+2]=y):(l[u+1]=-2,c=!0)}else c=!0}if(c){let u=Kee(l,t,e,r,a,i,o),d=jf(u,n,0,o);e=d.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,h=0;f<d.children.length;f+=3){let p=d.children[f];for(;h<l.length&&l[h]<p;)h+=3;l.splice(h,0,d.children[f],d.children[f+1],d.children[f+2])}}return new _t(e.sort(oi),l)}function VP(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let a=t[n];r.push(new Lr(a.from+e,a.to+e,a.type))}return r}function Kee(t,e,r,n,a,i,o){function l(c,u){for(let d=0;d<c.local.length;d++){let f=c.local[d].map(n,a,u);f?r.push(f):o.onRemove&&o.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)l(c.children[d+2],c.children[d]+u+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&l(t[c+2],e[c]+i+1);return r}function HP(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,a=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>r&&o.to<n&&((a||(a=[])).push(o),t[i]=null);return a}function WP(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function jf(t,e,r,n){let a=[],i=!1;e.forEach((l,c)=>{let u=HP(t,l,c+r);if(u){i=!0;let d=jf(u,l,r+c+1,n);d!=wr&&a.push(c,c+l.nodeSize,d)}});let o=VP(i?WP(t):t,-r).sort(oi);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(n.onRemove&&n.onRemove(o[l].spec),o.splice(l--,1));return o.length||a.length?new _t(o,a):wr}function oi(t,e){return t.from-e.from||t.to-e.to}function D1(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let a=r+1;a<e.length;a++){let i=e[a];if(i.from==n.from){i.to!=n.to&&(e==t&&(e=t.slice()),e[a]=i.copy(i.from,n.to),PA(e,a+1,i.copy(n.to,i.to)));continue}else{i.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,i.from),PA(e,a,n.copy(i.from,n.to)));break}}}return e}function PA(t,e,r){for(;e<t.length&&oi(r,t[e])>0;)e++;t.splice(e,0,r)}function L0(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=wr&&e.push(n)}),t.cursorWrapper&&e.push(_t.create(t.state.doc,[t.cursorWrapper.deco])),es.from(e)}const Jee={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Xee=Wr&&fs<=11;class Qee{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Zee{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Qee,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let a=0;a<n.length;a++)this.queue.push(n[a]);Wr&&fs<=11&&n.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),Xee&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Jee)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(wA(this.view)){if(this.suppressingSelectionUpdates)return Ta(this.view);if(Wr&&fs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&vi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let i=e.focusNode;i;i=Uo(i))r.add(i);for(let i=e.anchorNode;i;i=Uo(i))if(r.has(i)){n=i;break}let a=n&&this.view.docView.nearestDesc(n);if(a&&a.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),a=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&wA(e)&&!this.ignoreSelectionChange(n),i=-1,o=-1,l=!1,c=[];if(e.editable)for(let d=0;d<r.length;d++){let f=this.registerMutation(r[d],c);f&&(i=i<0?f.from:Math.min(f.from,i),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(l=!0))}if(En&&c.length){let d=c.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,h]=d;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of d){let p=h.parentNode;p&&p.nodeName=="LI"&&(!f||rte(e,f)!=p)&&h.remove()}}}else if((dr||Er)&&c.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of c)if(d.nodeName=="BR"&&d.parentNode){let f=d.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&d.parentNode.removeChild(d)}}let u=null;i<0&&a&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Kh(n)&&(u=O1(e))&&u.eq(Ye.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ta(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||a)&&(i>-1&&(e.docView.markDirty(i,o),ete(e)),this.handleDOMChange(i,o,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Ta(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let f=e.addedNodes[d];r.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let a=e.previousSibling,i=e.nextSibling;if(Wr&&fs<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:f,nextSibling:h}=e.addedNodes[d];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(a=f),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h)}let o=a&&a.parentNode==e.target?yr(a)+1:0,l=n.localPosFromDOM(e.target,o,-1),c=i&&i.parentNode==e.target?yr(i):e.target.childNodes.length,u=n.localPosFromDOM(e.target,c,1);return{from:l,to:u}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let TA=new WeakMap,IA=!1;function ete(t){if(!TA.has(t)&&(TA.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=En,IA)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),IA=!0}}function MA(t,e){let r=e.startContainer,n=e.startOffset,a=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return vi(o.node,o.offset,a,i)&&([r,n,a,i]=[a,i,r,n]),{anchorNode:r,anchorOffset:n,focusNode:a,focusOffset:i}}function tte(t,e){if(e.getComposedRanges){let a=e.getComposedRanges(t.root)[0];if(a)return MA(t,a)}let r;function n(a){a.preventDefault(),a.stopImmediatePropagation(),r=a.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?MA(t,r):null}function rte(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function nte(t,e,r){let{node:n,fromOffset:a,toOffset:i,from:o,to:l}=t.docView.parseRange(e,r),c=t.domSelectionRange(),u,d=c.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:c.anchorOffset}],Kh(c)||u.push({node:c.focusNode,offset:c.focusOffset})),dr&&t.input.lastKeyCode===8)for(let m=i;m>a;m--){let y=n.childNodes[m-1],v=y.pmViewDesc;if(y.nodeName=="BR"&&!v){i=m;break}if(!v||v.size)break}let f=t.state.doc,h=t.someProp("domParser")||ds.fromSchema(t.state.schema),p=f.resolve(o),g=null,x=h.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:a,to:i,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:ate,context:p});if(u&&u[0].pos!=null){let m=u[0].pos,y=u[1]&&u[1].pos;y==null&&(y=m),g={anchor:m+o,head:y+o}}return{doc:x,sel:g,from:o,to:l}}function ate(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Er&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||Er&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ste=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ite(t,e,r,n,a){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let j=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,C=O1(t,j);if(C&&!t.state.selection.eq(C)){if(dr&&Ca&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",O=>O(t,Hs(13,"Enter"))))return;let k=t.state.tr.setSelection(C);j=="pointer"?k.setMeta("pointer",!0):j=="key"&&k.scrollIntoView(),i&&k.setMeta("composition",i),t.dispatch(k)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(r);e=o.before(l+1),r=t.state.doc.resolve(r).after(l+1);let c=t.state.selection,u=nte(t,e,r),d=t.state.doc,f=d.slice(u.from,u.to),h,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let g=cte(f.content,u.doc.content,u.from,h,p);if(g&&t.input.domChangeCount++,(Vo&&t.input.lastIOSEnter>Date.now()-225||Ca)&&a.some(j=>j.nodeType==1&&!ste.test(j.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",j=>j(t,Hs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(n&&c instanceof qe&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))g={start:c.from,endA:c.to,endB:c.to};else{if(u.sel){let j=RA(t,t.state.doc,u.sel);if(j&&!j.eq(t.state.selection)){let C=t.state.tr.setSelection(j);i&&C.setMeta("composition",i),t.dispatch(C)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof qe&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),Wr&&fs<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>u.from&&u.doc.textBetween(g.start-u.from-1,g.start-u.from+1)=="  "&&(g.start--,g.endA--,g.endB--);let x=u.doc.resolveNoCache(g.start-u.from),m=u.doc.resolveNoCache(g.endB-u.from),y=d.resolve(g.start),v=x.sameParent(m)&&x.parent.inlineContent&&y.end()>=g.endA;if((Vo&&t.input.lastIOSEnter>Date.now()-225&&(!v||a.some(j=>j.nodeName=="DIV"||j.nodeName=="P"))||!v&&x.pos<u.doc.content.size&&(!x.sameParent(m)||!x.parent.inlineContent)&&x.pos<m.pos&&!/\S/.test(u.doc.textBetween(x.pos,m.pos,"","")))&&t.someProp("handleKeyDown",j=>j(t,Hs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&lte(d,g.start,g.endA,x,m)&&t.someProp("handleKeyDown",j=>j(t,Hs(8,"Backspace")))){Ca&&dr&&t.domObserver.suppressSelectionUpdates();return}dr&&g.endB==g.start&&(t.input.lastChromeDelete=Date.now()),Ca&&!v&&x.start()!=m.start()&&m.parentOffset==0&&x.depth==m.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==g.endA&&(g.endB-=2,m=u.doc.resolveNoCache(g.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(j){return j(t,Hs(13,"Enter"))})},20));let w=g.start,N=g.endA,b=j=>{let C=j||t.state.tr.replace(w,N,u.doc.slice(g.start-u.from,g.endB-u.from));if(u.sel){let k=RA(t,C.doc,u.sel);k&&!(dr&&t.composing&&k.empty&&(g.start!=g.endB||t.input.lastChromeDelete<Date.now()-100)&&(k.head==w||k.head==C.mapping.map(N)-1)||Wr&&k.empty&&k.head==w)&&C.setSelection(k)}return i&&C.setMeta("composition",i),C.scrollIntoView()},S;if(v)if(x.pos==m.pos){Wr&&fs<=11&&x.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ta(t),20));let j=b(t.state.tr.delete(w,N)),C=d.resolve(g.start).marksAcross(d.resolve(g.endA));C&&j.ensureMarks(C),t.dispatch(j)}else if(g.endA==g.endB&&(S=ote(x.parent.content.cut(x.parentOffset,m.parentOffset),y.parent.content.cut(y.parentOffset,g.endA-y.start())))){let j=b(t.state.tr);S.type=="add"?j.addMark(w,N,S.mark):j.removeMark(w,N,S.mark),t.dispatch(j)}else if(x.parent.child(x.index()).isText&&x.index()==m.index()-(m.textOffset?0:1)){let j=x.parent.textBetween(x.parentOffset,m.parentOffset),C=()=>b(t.state.tr.insertText(j,w,N));t.someProp("handleTextInput",k=>k(t,w,N,j,C))||t.dispatch(C())}else t.dispatch(b());else t.dispatch(b())}function RA(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:P1(t,e.resolve(r.anchor),e.resolve(r.head))}function ote(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,a=r,i=n,o,l,c;for(let d=0;d<n.length;d++)a=n[d].removeFromSet(a);for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);if(a.length==1&&i.length==0)l=a[0],o="add",c=d=>d.mark(l.addToSet(d.marks));else if(a.length==0&&i.length==1)l=i[0],o="remove",c=d=>d.mark(l.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<e.childCount;d++)u.push(c(e.child(d)));if(re.from(u).eq(t))return{mark:l,type:o}}function lte(t,e,r,n,a){if(r-e<=a.pos-n.pos||z0(n,!0,!1)<a.pos)return!1;let i=t.resolve(e);if(!n.parent.isTextblock){let l=i.nodeAfter;return l!=null&&r==e+l.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(z0(i,!0,!0));return!o.parent.isTextblock||o.pos>r||z0(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function z0(t,e,r){let n=t.depth,a=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,a++,e=!1;if(r){let i=t.node(n).maybeChild(t.indexAfter(n));for(;i&&!i.isLeaf;)i=i.firstChild,a++}return a}function cte(t,e,r,n,a){let i=t.findDiffStart(e,r);if(i==null)return null;let{a:o,b:l}=t.findDiffEnd(e,r+t.size,r+e.size);if(a=="end"){let c=Math.max(0,i-Math.min(o,l));n-=o+c-i}if(o<i&&t.size<e.size){let c=n<=i&&n>=o?i-n:0;i-=c,i&&i<e.size&&_A(e.textBetween(i-1,i+1))&&(i+=c?1:-1),l=i+(l-o),o=i}else if(l<i){let c=n<=i&&n>=l?i-n:0;i-=c,i&&i<t.size&&_A(t.textBetween(i-1,i+1))&&(i+=c?1:-1),o=i+(o-l),l=i}return{start:i,endA:o,endB:l}}function _A(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class GP{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Cee,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(FA),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=LA(this),$A(this),this.nodeViews=zA(this),this.docView=gA(this.state.doc,DA(this),L0(this),this.dom,this),this.domObserver=new Zee(this,(n,a,i,o)=>ite(this,n,a,i,o)),this.domObserver.start(),kee(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&zv(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(FA),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let a=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(FP(this),o=!0),this.state=e;let l=a.plugins!=e.plugins||this._props.plugins!=r.plugins;if(l||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=zA(this);dte(p,this.nodeViews)&&(this.nodeViews=p,i=!0)}(l||r.handleDOMEvents!=this._props.handleDOMEvents)&&zv(this),this.editable=LA(this),$A(this);let c=L0(this),u=DA(this),d=a.plugins!=e.plugins&&!a.doc.eq(e.doc)?"reset":e.scrollToSelection>a.scrollToSelection?"to selection":"preserve",f=i||!this.docView.matchesNode(e.doc,u,c);(f||!e.selection.eq(a.selection))&&(o=!0);let h=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&BZ(this);if(o){this.domObserver.stop();let p=f&&(Wr||dr)&&!this.composing&&!a.selection.empty&&!e.selection.empty&&ute(a.selection,e.selection);if(f){let g=dr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Bee(this)),(i||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=gA(e.doc,u,c,this.dom,this)),g&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&dee(this))?Ta(this,p):(EP(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(a),!((n=this.dragging)===null||n===void 0)&&n.node&&!a.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,a),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():h&&qZ(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Te){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&uA(this,r.getBoundingClientRect(),e)}else uA(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,a=-1;if(this.state.doc.nodeAt(n.from)==n.node)a=n.from;else{let i=n.from+(this.state.doc.content.size-r.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==n.node&&(a=i)}this.dragging=new qP(e.slice,e.move,a<0?void 0:Te.create(this.state.doc,a))}someProp(e,r){let n=this._props&&this._props[e],a;if(n!=null&&(a=r?r(n):n))return a;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(a=r?r(l):l))return a}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let l=i[o].props[e];if(l!=null&&(a=r?r(l):l))return a}}hasFocus(){if(Wr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&UZ(this.dom),Ta(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return YZ(this,e)}coordsAtPos(e,r=1){return bP(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let a=this.docView.posFromDOM(e,r,n);if(a==null)throw new RangeError("DOM position not inside the editor");return a}endOfTextblock(e,r){return ZZ(this,r||this.state,e)}pasteHTML(e,r){return Zc(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return Zc(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return T1(this,e)}destroy(){this.docView&&(Eee(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],L0(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,TZ())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Pee(this,e)}domSelectionRange(){let e=this.domSelection();return e?Er&&this.root.nodeType===11&&DZ(this.dom.ownerDocument)==this.dom&&tte(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}GP.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function DA(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[Lr.node(0,t.state.doc.content.size,e)]}function $A(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Lr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function LA(t){return!t.someProp("editable",e=>e(t.state)===!1)}function ute(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function zA(t){let e=Object.create(null);function r(n){for(let a in n)Object.prototype.hasOwnProperty.call(e,a)||(e[a]=n[a])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function dte(t,e){let r=0,n=0;for(let a in t){if(t[a]!=e[a])return!0;r++}for(let a in e)n++;return r!=n}function FA(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var gs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},wf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},fte=typeof navigator<"u"&&/Mac/.test(navigator.platform),hte=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var vr=0;vr<10;vr++)gs[48+vr]=gs[96+vr]=String(vr);for(var vr=1;vr<=24;vr++)gs[vr+111]="F"+vr;for(var vr=65;vr<=90;vr++)gs[vr]=String.fromCharCode(vr+32),wf[vr]=String.fromCharCode(vr);for(var F0 in gs)wf.hasOwnProperty(F0)||(wf[F0]=gs[F0]);function pte(t){var e=fte&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||hte&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?wf:gs)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const mte=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),gte=typeof navigator<"u"&&/Win/.test(navigator.platform);function xte(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,a,i,o;for(let l=0;l<e.length-1;l++){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))a=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))mte?o=!0:a=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(r="Alt-"+r),a&&(r="Ctrl-"+r),o&&(r="Meta-"+r),i&&(r="Shift-"+r),r}function yte(t){let e=Object.create(null);for(let r in t)e[xte(r)]=t[r];return e}function B0(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function vte(t){return new $t({props:{handleKeyDown:YP(t)}})}function YP(t){let e=yte(t);return function(r,n){let a=pte(n),i,o=e[B0(a,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(a.length==1&&a!=" "){if(n.shiftKey){let l=e[B0(a,n,!1)];if(l&&l(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(gte&&n.ctrlKey&&n.altKey)&&(i=gs[n.keyCode])&&i!=a){let l=e[B0(i,n)];if(l&&l(r.state,r.dispatch,r))return!0}}return!1}}var bte=Object.defineProperty,$1=(t,e)=>{for(var r in e)bte(t,r,{get:e[r],enumerable:!0})};function Qh(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:a}=r,{storedMarks:i}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return n},get doc(){return a},get tr(){return n=r.selection,a=r.doc,i=r.storedMarks,r}}}var Zh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:a}=r,i=this.buildProps(a);return Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...u)=>{const d=l(...u)(i);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(a),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:a}=this,{view:i}=n,o=[],l=!!t,c=t||a.tr,u=()=>(!l&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),o.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...g)=>{const x=this.buildProps(c,e),m=h(...g)(x);return o.push(m),d}])),run:u};return d}createCan(t){const{rawCommands:e,state:r}=this,n=!1,a=t||r.tr,i=this.buildProps(a,n);return{...Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...u)=>c(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(a,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:a}=this,{view:i}=n,o={tr:t,editor:n,view:i,state:Qh({state:a,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(o)]))}};return o}},KP={};$1(KP,{blur:()=>jte,clearContent:()=>wte,clearNodes:()=>Ste,command:()=>Nte,createParagraphNear:()=>Ate,cut:()=>Cte,deleteCurrentNode:()=>kte,deleteNode:()=>Ete,deleteRange:()=>Ote,deleteSelection:()=>Pte,enter:()=>Tte,exitCode:()=>Ite,extendMarkRange:()=>Mte,first:()=>Rte,focus:()=>Dte,forEach:()=>$te,insertContent:()=>Lte,insertContentAt:()=>Bte,joinBackward:()=>Vte,joinDown:()=>Ute,joinForward:()=>Hte,joinItemBackward:()=>Wte,joinItemForward:()=>Gte,joinTextblockBackward:()=>Yte,joinTextblockForward:()=>Kte,joinUp:()=>qte,keyboardShortcut:()=>Xte,lift:()=>Qte,liftEmptyBlock:()=>Zte,liftListItem:()=>ere,newlineInCode:()=>tre,resetAttributes:()=>rre,scrollIntoView:()=>nre,selectAll:()=>are,selectNodeBackward:()=>sre,selectNodeForward:()=>ire,selectParentNode:()=>ore,selectTextblockEnd:()=>lre,selectTextblockStart:()=>cre,setContent:()=>ure,setMark:()=>Pre,setMeta:()=>Tre,setNode:()=>Ire,setNodeSelection:()=>Mre,setTextDirection:()=>Rre,setTextSelection:()=>_re,sinkListItem:()=>Dre,splitBlock:()=>$re,splitListItem:()=>Lre,toggleList:()=>zre,toggleMark:()=>Fre,toggleNode:()=>Bre,toggleWrap:()=>qre,undoInputRule:()=>Ure,unsetAllMarks:()=>Vre,unsetMark:()=>Hre,unsetTextDirection:()=>Wre,updateAttributes:()=>Gre,wrapIn:()=>Yre,wrapInList:()=>Kre});var jte=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window?.getSelection())==null||r.removeAllRanges())}),!0),wte=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Ste=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:a}=n;return r&&a.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(l,c)=>{if(l.type.isText)return;const{doc:u,mapping:d}=e,f=u.resolve(d.map(c)),h=u.resolve(d.map(c+l.nodeSize)),p=f.blockRange(h);if(!p)return;const g=nl(p);if(l.type.isTextblock){const{defaultType:x}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(p.start,x)}(g||g===0)&&e.lift(p,g)})}),!0},Nte=t=>e=>t(e),Ate=()=>({state:t,dispatch:e})=>cP(t,e),Cte=(t,e)=>({editor:r,tr:n})=>{const{state:a}=r,i=a.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,i.content),n.setSelection(new qe(n.doc.resolve(Math.max(o-1,0)))),!0},kte=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const a=t.selection.$anchor;for(let i=a.depth;i>0;i-=1)if(a.node(i).type===n.type){if(e){const l=a.before(i),c=a.after(i);t.delete(l,c).scrollIntoView()}return!0}return!1};function Kt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var Ete=t=>({tr:e,state:r,dispatch:n})=>{const a=Kt(t,r.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===a){if(n){const c=i.before(o),u=i.after(o);e.delete(c,u).scrollIntoView()}return!0}return!1},Ote=t=>({tr:e,dispatch:r})=>{const{from:n,to:a}=t;return r&&e.delete(n,a),!0},Pte=()=>({state:t,dispatch:e})=>S1(t,e),Tte=()=>({commands:t})=>t.keyboardShortcut("Enter"),Ite=()=>({state:t,dispatch:e})=>gZ(t,e);function L1(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Sf(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(a=>r.strict?e[a]===t[a]:L1(e[a])?e[a].test(t[a]):e[a]===t[a]):!0}function JP(t,e,r={}){return t.find(n=>n.type===e&&Sf(Object.fromEntries(Object.keys(r).map(a=>[a,n.attrs[a]])),r))}function BA(t,e,r={}){return!!JP(t,e,r)}function z1(t,e,r){var n;if(!t||!e)return;let a=t.parent.childAfter(t.parentOffset);if((!a.node||!a.node.marks.some(d=>d.type===e))&&(a=t.parent.childBefore(t.parentOffset)),!a.node||!a.node.marks.some(d=>d.type===e)||(r=r||((n=a.node.marks[0])==null?void 0:n.attrs),!JP([...a.node.marks],e,r)))return;let o=a.index,l=t.start()+a.offset,c=o+1,u=l+a.node.nodeSize;for(;o>0&&BA([...t.parent.child(o-1).marks],e,r);)o-=1,l-=t.parent.child(o).nodeSize;for(;c<t.parent.childCount&&BA([...t.parent.child(c).marks],e,r);)u+=t.parent.child(c).nodeSize,c+=1;return{from:l,to:u}}function Va(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Mte=(t,e={})=>({tr:r,state:n,dispatch:a})=>{const i=Va(t,n.schema),{doc:o,selection:l}=r,{$from:c,from:u,to:d}=l;if(a){const f=z1(c,i,e);if(f&&f.from<=u&&f.to>=d){const h=qe.create(o,f.from,f.to);r.setSelection(h)}}return!0},Rte=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function XP(t){return t instanceof qe}function Zs(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function QP(t,e=null){if(!e)return null;const r=Ye.atStart(t),n=Ye.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const a=r.from,i=n.to;return e==="all"?qe.create(t,Zs(0,a,i),Zs(t.content.size,a,i)):qe.create(t,Zs(e,a,i),Zs(e,a,i))}function qA(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Nf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function _te(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Dte=(t=null,e={})=>({editor:r,view:n,tr:a,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(Nf()||qA())&&n.dom.focus(),_te()&&!Nf()&&!qA()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e?.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!XP(r.state.selection))return o(),!0;const l=QP(a.doc,t)||r.state.selection,c=r.state.selection.eq(l);return i&&(c||a.setSelection(l),c&&a.storedMarks&&a.setStoredMarks(a.storedMarks),o()),!0},$te=(t,e)=>r=>t.every((n,a)=>e(n,{...r,index:a})),Lte=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),ZP=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&ZP(n)}return t};function Bu(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return ZP(r)}function tu(t,e,r){if(t instanceof qn||t instanceof re)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,a=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return re.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(i){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),tu("",e,r)}if(a){if(r.errorOnInvalidContent){let o=!1,l="";const c=new D8({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(r.slice?ds.fromSchema(c).parseSlice(Bu(t),r.parseOptions):ds.fromSchema(c).parse(Bu(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const i=ds.fromSchema(e);return r.slice?i.parseSlice(Bu(t),r.parseOptions).content:i.parse(Bu(t),r.parseOptions)}return tu("",e,r)}function zte(t,e,r){const n=t.steps.length-1;if(n<e)return;const a=t.steps[n];if(!(a instanceof lr||a instanceof fr))return;const i=t.mapping.maps[n];let o=0;i.forEach((l,c,u,d)=>{o===0&&(o=d)}),t.setSelection(Ye.near(t.doc.resolve(o),r))}var Fte=t=>!("type"in t),Bte=(t,e,r)=>({tr:n,dispatch:a,editor:i})=>{var o;if(a){r={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let l;const c=m=>{i.emit("contentError",{editor:i,error:m,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{tu(e,i.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(m){c(m)}try{l=tu(e,i.schema,{parseOptions:u,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(m){return c(m),!1}let{from:d,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,p=!0;if((Fte(l)?l:[l]).forEach(m=>{m.check(),h=h?m.isText&&m.marks.length===0:!1,p=p?m.isBlock:!1}),d===f&&p){const{parent:m}=n.doc.resolve(d);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(d-=1,f+=1)}let x;if(h){if(Array.isArray(e))x=e.map(m=>m.text||"").join("");else if(e instanceof re){let m="";e.forEach(y=>{y.text&&(m+=y.text)}),x=m}else typeof e=="object"&&e&&e.text?x=e.text:x=e;n.insertText(x,d,f)}else{x=l;const m=n.doc.resolve(d),y=m.node(),v=m.parentOffset===0,w=y.isText||y.isTextblock,N=y.content.size>0;v&&w&&N&&(d=Math.max(0,d-1)),n.replaceWith(d,f,x)}r.updateSelection&&zte(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:d,text:x}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:d,text:x})}return!0},qte=()=>({state:t,dispatch:e})=>hZ(t,e),Ute=()=>({state:t,dispatch:e})=>pZ(t,e),Vte=()=>({state:t,dispatch:e})=>rP(t,e),Hte=()=>({state:t,dispatch:e})=>iP(t,e),Wte=()=>({state:t,dispatch:e,tr:r})=>{try{const n=Wh(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},Gte=()=>({state:t,dispatch:e,tr:r})=>{try{const n=Wh(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},Yte=()=>({state:t,dispatch:e})=>dZ(t,e),Kte=()=>({state:t,dispatch:e})=>fZ(t,e);function eT(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Jte(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,a,i,o;for(let l=0;l<e.length-1;l+=1){const c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))a=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))Nf()||eT()?o=!0:a=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return n&&(r=`Alt-${r}`),a&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),i&&(r=`Shift-${r}`),r}var Xte=t=>({editor:e,view:r,tr:n,dispatch:a})=>{const i=Jte(t).split(/-(?!$)/),o=i.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{r.someProp("handleKeyDown",u=>u(r,l))});return c?.steps.forEach(u=>{const d=u.map(n.mapping);d&&a&&n.maybeStep(d)}),!0};function xs(t,e,r={}){const{from:n,to:a,empty:i}=t.selection,o=e?Kt(e,t.schema):null,l=[];t.doc.nodesBetween(n,a,(f,h)=>{if(f.isText)return;const p=Math.max(n,h),g=Math.min(a,h+f.nodeSize);l.push({node:f,from:p,to:g})});const c=a-n,u=l.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>Sf(f.node.attrs,r,{strict:!1}));return i?!!u.length:u.reduce((f,h)=>f+h.to-h.from,0)>=c}var Qte=(t,e={})=>({state:r,dispatch:n})=>{const a=Kt(t,r.schema);return xs(r,a,e)?mZ(r,n):!1},Zte=()=>({state:t,dispatch:e})=>uP(t,e),ere=t=>({state:e,dispatch:r})=>{const n=Kt(t,e.schema);return kZ(n)(e,r)},tre=()=>({state:t,dispatch:e})=>lP(t,e);function ep(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function UA(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,a)=>(r.includes(a)||(n[a]=t[a]),n),{})}var rre=(t,e)=>({tr:r,state:n,dispatch:a})=>{let i=null,o=null;const l=ep(typeof t=="string"?t:t.name,n.schema);if(!l)return!1;l==="node"&&(i=Kt(t,n.schema)),l==="mark"&&(o=Va(t,n.schema));let c=!1;return r.selection.ranges.forEach(u=>{n.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,f)=>{i&&i===d.type&&(c=!0,a&&r.setNodeMarkup(f,void 0,UA(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(h=>{o===h.type&&(c=!0,a&&r.addMark(f,f+d.nodeSize,o.create(UA(h.attrs,e))))})})}),c},nre=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),are=()=>({tr:t,dispatch:e})=>{if(e){const r=new cn(t.doc);t.setSelection(r)}return!0},sre=()=>({state:t,dispatch:e})=>aP(t,e),ire=()=>({state:t,dispatch:e})=>oP(t,e),ore=()=>({state:t,dispatch:e})=>vZ(t,e),lre=()=>({state:t,dispatch:e})=>wZ(t,e),cre=()=>({state:t,dispatch:e})=>jZ(t,e);function Fv(t,e,r={},n={}){return tu(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var ure=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:a,tr:i,dispatch:o,commands:l})=>{const{doc:c}=i;if(n.preserveWhitespace!=="full"){const u=Fv(t,a.schema,n,{errorOnInvalidContent:e??a.options.enableContentCheck});return o&&i.replaceWith(0,c.content.size,u).setMeta("preventUpdate",!r),!0}return o&&i.setMeta("preventUpdate",!r),l.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:e??a.options.enableContentCheck})};function tT(t,e){const r=Va(e,t.schema),{from:n,to:a,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,a,c=>{o.push(...c.marks)});const l=o.find(c=>c.type.name===r.name);return l?{...l.attrs}:{}}function rT(t,e){const r=new Q8(t);return e.forEach(n=>{n.steps.forEach(a=>{r.step(a)})}),r}function dre(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function fre(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(a,i)=>{r(a)&&n.push({node:a,pos:i})}),n}function hre(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function tp(t){return e=>hre(e.$from,t)}function Ce(t,e,r){return t.config[e]===void 0&&t.parent?Ce(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?Ce(t.parent,e,r):null}):t.config[e]}function F1(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=Ce(e,"addExtensions",r);return n?[e,...F1(n())]:e}).flat(10)}function B1(t,e){const r=Pi.fromSchema(e).serializeFragment(t),a=document.implementation.createHTMLDocument().createElement("div");return a.appendChild(r),a.innerHTML}function nT(t){return typeof t=="function"}function pt(t,e=void 0,...r){return nT(t)?e?t.bind(e)(...r):t(...r):t}function pre(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ho(t){const e=t.filter(a=>a.type==="extension"),r=t.filter(a=>a.type==="node"),n=t.filter(a=>a.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function aT(t){const e=[],{nodeExtensions:r,markExtensions:n}=Ho(t),a=[...r,...n],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:a},c=Ce(o,"addGlobalAttributes",l);if(!c)return;c().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([h,p])=>{e.push({type:f,name:h,attribute:{...i,...p}})})})})}),a.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},c=Ce(o,"addAttributes",l);if(!c)return;const u=c();Object.entries(u).forEach(([d,f])=>{const h={...i,...f};typeof h?.default=="function"&&(h.default=h.default()),h?.isRequired&&h?.default===void 0&&delete h.default,e.push({type:o.name,name:d,attribute:h})})}),e}function qt(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([a,i])=>{if(!n[a]){n[a]=i;return}if(a==="class"){const l=i?String(i).split(" "):[],c=n[a]?n[a].split(" "):[],u=l.filter(d=>!c.includes(d));n[a]=[...c,...u].join(" ")}else if(a==="style"){const l=i?i.split(";").map(d=>d.trim()).filter(Boolean):[],c=n[a]?n[a].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;c.forEach(d=>{const[f,h]=d.split(":").map(p=>p.trim());u.set(f,h)}),l.forEach(d=>{const[f,h]=d.split(":").map(p=>p.trim());u.set(f,h)}),n[a]=Array.from(u.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else n[a]=i}),n},{})}function ru(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>qt(r,n),{})}function mre(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function VA(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const a=e.reduce((i,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(r):mre(r.getAttribute(o.name));return l==null?i:{...i,[o.name]:l}},{});return{...n,...a}}}}function HA(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&pre(r)?!1:r!=null))}function WA(t){var e,r;const n={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(n.default=t.attribute.default),((r=t?.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function gre(t,e){var r;const n=aT(t),{nodeExtensions:a,markExtensions:i}=Ho(t),o=(r=a.find(u=>Ce(u,"topNode")))==null?void 0:r.name,l=Object.fromEntries(a.map(u=>{const d=n.filter(y=>y.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},h=t.reduce((y,v)=>{const w=Ce(v,"extendNodeSchema",f);return{...y,...w?w(u):{}}},{}),p=HA({...h,content:pt(Ce(u,"content",f)),marks:pt(Ce(u,"marks",f)),group:pt(Ce(u,"group",f)),inline:pt(Ce(u,"inline",f)),atom:pt(Ce(u,"atom",f)),selectable:pt(Ce(u,"selectable",f)),draggable:pt(Ce(u,"draggable",f)),code:pt(Ce(u,"code",f)),whitespace:pt(Ce(u,"whitespace",f)),linebreakReplacement:pt(Ce(u,"linebreakReplacement",f)),defining:pt(Ce(u,"defining",f)),isolating:pt(Ce(u,"isolating",f)),attrs:Object.fromEntries(d.map(WA))}),g=pt(Ce(u,"parseHTML",f));g&&(p.parseDOM=g.map(y=>VA(y,d)));const x=Ce(u,"renderHTML",f);x&&(p.toDOM=y=>x({node:y,HTMLAttributes:ru(y,d)}));const m=Ce(u,"renderText",f);return m&&(p.toText=m),[u.name,p]})),c=Object.fromEntries(i.map(u=>{const d=n.filter(m=>m.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},h=t.reduce((m,y)=>{const v=Ce(y,"extendMarkSchema",f);return{...m,...v?v(u):{}}},{}),p=HA({...h,inclusive:pt(Ce(u,"inclusive",f)),excludes:pt(Ce(u,"excludes",f)),group:pt(Ce(u,"group",f)),spanning:pt(Ce(u,"spanning",f)),code:pt(Ce(u,"code",f)),attrs:Object.fromEntries(d.map(WA))}),g=pt(Ce(u,"parseHTML",f));g&&(p.parseDOM=g.map(m=>VA(m,d)));const x=Ce(u,"renderHTML",f);return x&&(p.toDOM=m=>x({mark:m,HTMLAttributes:ru(m,d)})),[u.name,p]}));return new D8({topNode:o,nodes:l,marks:c})}function xre(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function Af(t){return t.sort((r,n)=>{const a=Ce(r,"priority")||100,i=Ce(n,"priority")||100;return a>i?-1:a<i?1:0})}function sT(t){const e=Af(F1(t)),r=xre(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function iT(t,e,r){const{from:n,to:a}=e,{blockSeparator:i=`

`,textSerializers:o={}}=r||{};let l="";return t.nodesBetween(n,a,(c,u,d,f)=>{var h;c.isBlock&&u>n&&(l+=i);const p=o?.[c.type.name];if(p)return d&&(l+=p({node:c,pos:u,parent:d,index:f,range:e})),!1;c.isText&&(l+=(h=c?.text)==null?void 0:h.slice(Math.max(n,u)-u,a-u))}),l}function yre(t,e){const r={from:0,to:t.content.size};return iT(t,r,e)}function oT(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function vre(t,e){const r=Kt(e,t.schema),{from:n,to:a}=t.selection,i=[];t.doc.nodesBetween(n,a,l=>{i.push(l)});const o=i.reverse().find(l=>l.type.name===r.name);return o?{...o.attrs}:{}}function lT(t,e){const r=ep(typeof e=="string"?e:e.name,t.schema);return r==="node"?vre(t,e):r==="mark"?tT(t,e):{}}function bre(t,e=JSON.stringify){const r={};return t.filter(n=>{const a=e(n);return Object.prototype.hasOwnProperty.call(r,a)?!1:r[a]=!0})}function jre(t){const e=bre(t);return e.length===1?e:e.filter((r,n)=>!e.filter((i,o)=>o!==n).some(i=>r.oldRange.from>=i.oldRange.from&&r.oldRange.to<=i.oldRange.to&&r.newRange.from>=i.newRange.from&&r.newRange.to<=i.newRange.to))}function cT(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((a,i)=>{const o=[];if(a.ranges.length)a.forEach((l,c)=>{o.push({from:l,to:c})});else{const{from:l,to:c}=r[i];if(l===void 0||c===void 0)return;o.push({from:l,to:c})}o.forEach(({from:l,to:c})=>{const u=e.slice(i).map(l,-1),d=e.slice(i).map(c),f=e.invert().map(u,-1),h=e.invert().map(d);n.push({oldRange:{from:f,to:h},newRange:{from:u,to:d}})})}),jre(n)}function q1(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(a=>{const i=r.resolve(t),o=z1(i,a.type);o&&n.push({mark:a,...o})}):r.nodesBetween(t,e,(a,i)=>{!a||a?.nodeSize===void 0||n.push(...a.marks.map(o=>({from:i,to:i+a.nodeSize,mark:o})))}),n}var wre=(t,e,r,n=20)=>{const a=t.doc.resolve(r);let i=n,o=null;for(;i>0&&o===null;){const l=a.node(i);l?.type.name===e?o=l:i-=1}return[o,i]};function qu(t,e){return e.nodes[t]||e.marks[t]||null}function nd(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const a=t.find(i=>i.type===e&&i.name===n);return a?a.attribute.keepOnSplit:!1}))}var Sre=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(a,i,o,l)=>{var c,u;const d=((u=(c=a.type.spec).toText)==null?void 0:u.call(c,{node:a,pos:i,parent:o,index:l}))||a.textContent||"%leaf%";r+=a.isAtom&&!a.isText?d:d.slice(0,Math.max(0,n-i))}),r};function Bv(t,e,r={}){const{empty:n,ranges:a}=t.selection,i=e?Va(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>i?i.name===f.type.name:!0).find(f=>Sf(f.attrs,r,{strict:!1}));let o=0;const l=[];if(a.forEach(({$from:f,$to:h})=>{const p=f.pos,g=h.pos;t.doc.nodesBetween(p,g,(x,m)=>{if(!x.isText&&!x.marks.length)return;const y=Math.max(p,m),v=Math.min(g,m+x.nodeSize),w=v-y;o+=w,l.push(...x.marks.map(N=>({mark:N,from:y,to:v})))})}),o===0)return!1;const c=l.filter(f=>i?i.name===f.mark.type.name:!0).filter(f=>Sf(f.mark.attrs,r,{strict:!1})).reduce((f,h)=>f+h.to-h.from,0),u=l.filter(f=>i?f.mark.type!==i&&f.mark.type.excludes(i):!0).reduce((f,h)=>f+h.to-h.from,0);return(c>0?c+u:c)>=o}function Nre(t,e,r={}){if(!e)return xs(t,null,r)||Bv(t,null,r);const n=ep(e,t.schema);return n==="node"?xs(t,e,r):n==="mark"?Bv(t,e,r):!1}var Are=(t,e)=>{const{$from:r,$to:n,$anchor:a}=t.selection;if(e){const i=tp(l=>l.type.name===e)(t.selection);if(!i)return!1;const o=t.doc.resolve(i.pos+1);return a.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},Cre=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function GA(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function YA(t,e){const{nodeExtensions:r}=Ho(e),n=r.find(o=>o.name===t);if(!n)return!1;const a={name:n.name,options:n.options,storage:n.storage},i=pt(Ce(n,"group",a));return typeof i!="string"?!1:i.split(" ").includes("list")}function rp(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let a=!0;return t.content.forEach(i=>{a!==!1&&(rp(i,{ignoreWhitespace:r,checkChildren:e})||(a=!1))}),a}return!1}function uT(t){return t instanceof Te}var dT=class fT{constructor(e){this.position=e}static fromJSON(e){return new fT(e.position)}toJSON(){return{position:this.position}}};function kre(t,e){const r=e.mapping.mapResult(t.position);return{position:new dT(r.pos),mapResult:r}}function Ere(t){return new dT(t)}function Ore(t,e,r){var n;const{selection:a}=e;let i=null;if(XP(a)&&(i=a.$cursor),i){const l=(n=t.storedMarks)!=null?n:i.marks();return i.parent.type.allowsMarkType(r)&&(!!r.isInSet(l)||!l.some(u=>u.type.excludes(r)))}const{ranges:o}=a;return o.some(({$from:l,$to:c})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(l.pos,c.pos,(d,f,h)=>{if(u)return!1;if(d.isInline){const p=!h||h.type.allowsMarkType(r),g=!!r.isInSet(d.marks)||!d.marks.some(x=>x.type.excludes(r));u=p&&g}return!u}),u})}var Pre=(t,e={})=>({tr:r,state:n,dispatch:a})=>{const{selection:i}=r,{empty:o,ranges:l}=i,c=Va(t,n.schema);if(a)if(o){const u=tT(n,c);r.addStoredMark(c.create({...u,...e}))}else l.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;n.doc.nodesBetween(d,f,(h,p)=>{const g=Math.max(p,d),x=Math.min(p+h.nodeSize,f);h.marks.find(y=>y.type===c)?h.marks.forEach(y=>{c===y.type&&r.addMark(g,x,c.create({...y.attrs,...e}))}):r.addMark(g,x,c.create(e))})});return Ore(n,r,c)},Tre=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),Ire=(t,e={})=>({state:r,dispatch:n,chain:a})=>{const i=Kt(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),i.isTextblock?a().command(({commands:l})=>oA(i,{...o,...e})(r)?!0:l.clearNodes()).command(({state:l})=>oA(i,{...o,...e})(l,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Mre=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,a=Zs(t,0,n.content.size),i=Te.create(n,a);e.setSelection(i)}return!0},Rre=(t,e)=>({tr:r,state:n,dispatch:a})=>{const{selection:i}=n;let o,l;return typeof e=="number"?(o=e,l=e):e&&"from"in e&&"to"in e?(o=e.from,l=e.to):(o=i.from,l=i.to),a&&r.doc.nodesBetween(o,l,(c,u)=>{c.isText||r.setNodeMarkup(u,void 0,{...c.attrs,dir:t})}),!0},_re=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:a,to:i}=typeof t=="number"?{from:t,to:t}:t,o=qe.atStart(n).from,l=qe.atEnd(n).to,c=Zs(a,o,l),u=Zs(i,o,l),d=qe.create(n,c,u);e.setSelection(d)}return!0},Dre=t=>({state:e,dispatch:r})=>{const n=Kt(t,e.schema);return PZ(n)(e,r)};function KA(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(a=>e?.includes(a.type.name));t.tr.ensureMarks(n)}}var $re=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:a})=>{const{selection:i,doc:o}=e,{$from:l,$to:c}=i,u=a.extensionManager.attributes,d=nd(u,l.node().type.name,l.node().attrs);if(i instanceof Te&&i.node.isBlock)return!l.parentOffset||!Pa(o,l.pos)?!1:(n&&(t&&KA(r,a.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const f=c.parentOffset===c.parent.content.size,h=l.depth===0?void 0:dre(l.node(-1).contentMatchAt(l.indexAfter(-1)));let p=f&&h?[{type:h,attrs:d}]:void 0,g=Pa(e.doc,e.mapping.map(l.pos),1,p);if(!p&&!g&&Pa(e.doc,e.mapping.map(l.pos),1,h?[{type:h}]:void 0)&&(g=!0,p=h?[{type:h,attrs:d}]:void 0),n){if(g&&(i instanceof qe&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,p),h&&!f&&!l.parentOffset&&l.parent.type!==h)){const x=e.mapping.map(l.before()),m=e.doc.resolve(x);l.node(-1).canReplaceWith(m.index(),m.index()+1,h)&&e.setNodeMarkup(e.mapping.map(l.before()),h)}t&&KA(r,a.extensionManager.splittableMarks),e.scrollIntoView()}return g},Lre=(t,e={})=>({tr:r,state:n,dispatch:a,editor:i})=>{var o;const l=Kt(t,n.schema),{$from:c,$to:u}=n.selection,d=n.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(u))return!1;const f=c.node(-1);if(f.type!==l)return!1;const h=i.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(a){let y=re.empty;const v=c.index(-1)?1:c.index(-2)?2:3;for(let C=c.depth-v;C>=c.depth-3;C-=1)y=re.from(c.node(C).copy(y));const w=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,N={...nd(h,c.node().type.name,c.node().attrs),...e},b=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(N))||void 0;y=y.append(re.from(l.createAndFill(null,b)||void 0));const S=c.before(c.depth-(v-1));r.replace(S,c.after(-w),new ge(y,4-v,0));let j=-1;r.doc.nodesBetween(S,r.doc.content.size,(C,k)=>{if(j>-1)return!1;C.isTextblock&&C.content.size===0&&(j=k+1)}),j>-1&&r.setSelection(qe.near(r.doc.resolve(j))),r.scrollIntoView()}return!0}const p=u.pos===c.end()?f.contentMatchAt(0).defaultType:null,g={...nd(h,f.type.name,f.attrs),...e},x={...nd(h,c.node().type.name,c.node().attrs),...e};r.delete(c.pos,u.pos);const m=p?[{type:l,attrs:g},{type:p,attrs:x}]:[{type:l,attrs:g}];if(!Pa(r.doc,c.pos,2))return!1;if(a){const{selection:y,storedMarks:v}=n,{splittableMarks:w}=i.extensionManager,N=v||y.$to.parentOffset&&y.$from.marks();if(r.split(c.pos,2,m).scrollIntoView(),!N||!a)return!0;const b=N.filter(S=>w.includes(S.type.name));r.ensureMarks(b)}return!0},q0=(t,e)=>{const r=tp(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const a=t.doc.nodeAt(n);return r.node.type===a?.type&&Cs(t.doc,r.pos)&&t.join(r.pos),!0},U0=(t,e)=>{const r=tp(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const a=t.doc.nodeAt(n);return r.node.type===a?.type&&Cs(t.doc,n)&&t.join(n),!0},zre=(t,e,r,n={})=>({editor:a,tr:i,state:o,dispatch:l,chain:c,commands:u,can:d})=>{const{extensions:f,splittableMarks:h}=a.extensionManager,p=Kt(t,o.schema),g=Kt(e,o.schema),{selection:x,storedMarks:m}=o,{$from:y,$to:v}=x,w=y.blockRange(v),N=m||x.$to.parentOffset&&x.$from.marks();if(!w)return!1;const b=tp(S=>YA(S.type.name,f))(x);if(w.depth>=1&&b&&w.depth-b.depth<=1){if(b.node.type===p)return u.liftListItem(g);if(YA(b.node.type.name,f)&&p.validContent(b.node.content)&&l)return c().command(()=>(i.setNodeMarkup(b.pos,p),!0)).command(()=>q0(i,p)).command(()=>U0(i,p)).run()}return!r||!N||!l?c().command(()=>d().wrapInList(p,n)?!0:u.clearNodes()).wrapInList(p,n).command(()=>q0(i,p)).command(()=>U0(i,p)).run():c().command(()=>{const S=d().wrapInList(p,n),j=N.filter(C=>h.includes(C.type.name));return i.ensureMarks(j),S?!0:u.clearNodes()}).wrapInList(p,n).command(()=>q0(i,p)).command(()=>U0(i,p)).run()},Fre=(t,e={},r={})=>({state:n,commands:a})=>{const{extendEmptyMarkRange:i=!1}=r,o=Va(t,n.schema);return Bv(n,o,e)?a.unsetMark(o,{extendEmptyMarkRange:i}):a.setMark(o,e)},Bre=(t,e,r={})=>({state:n,commands:a})=>{const i=Kt(t,n.schema),o=Kt(e,n.schema),l=xs(n,i,r);let c;return n.selection.$anchor.sameParent(n.selection.$head)&&(c=n.selection.$anchor.parent.attrs),l?a.setNode(o,c):a.setNode(i,{...c,...r})},qre=(t,e={})=>({state:r,commands:n})=>{const a=Kt(t,r.schema);return xs(r,a,e)?n.lift(a):n.wrapIn(a,e)},Ure=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const a=r[n];let i;if(a.spec.isInputRules&&(i=a.getState(t))){if(e){const o=t.tr,l=i.transform;for(let c=l.steps.length-1;c>=0;c-=1)o.step(l.steps[c].invert(l.docs[c]));if(i.text){const c=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,c))}else o.delete(i.from,i.to)}return!0}}return!1},Vre=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:a}=r;return n||e&&a.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},Hre=(t,e={})=>({tr:r,state:n,dispatch:a})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=r,c=Va(t,n.schema),{$from:u,empty:d,ranges:f}=l;if(!a)return!0;if(d&&o){let{from:h,to:p}=l;const g=(i=u.marks().find(m=>m.type===c))==null?void 0:i.attrs,x=z1(u,c,g);x&&(h=x.from,p=x.to),r.removeMark(h,p,c)}else f.forEach(h=>{r.removeMark(h.$from.pos,h.$to.pos,c)});return r.removeStoredMark(c),!0},Wre=t=>({tr:e,state:r,dispatch:n})=>{const{selection:a}=r;let i,o;return typeof t=="number"?(i=t,o=t):t&&"from"in t&&"to"in t?(i=t.from,o=t.to):(i=a.from,o=a.to),n&&e.doc.nodesBetween(i,o,(l,c)=>{if(l.isText)return;const u={...l.attrs};delete u.dir,e.setNodeMarkup(c,void 0,u)}),!0},Gre=(t,e={})=>({tr:r,state:n,dispatch:a})=>{let i=null,o=null;const l=ep(typeof t=="string"?t:t.name,n.schema);if(!l)return!1;l==="node"&&(i=Kt(t,n.schema)),l==="mark"&&(o=Va(t,n.schema));let c=!1;return r.selection.ranges.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;let h,p,g,x;r.selection.empty?n.doc.nodesBetween(d,f,(m,y)=>{i&&i===m.type&&(c=!0,g=Math.max(y,d),x=Math.min(y+m.nodeSize,f),h=y,p=m)}):n.doc.nodesBetween(d,f,(m,y)=>{y<d&&i&&i===m.type&&(c=!0,g=Math.max(y,d),x=Math.min(y+m.nodeSize,f),h=y,p=m),y>=d&&y<=f&&(i&&i===m.type&&(c=!0,a&&r.setNodeMarkup(y,void 0,{...m.attrs,...e})),o&&m.marks.length&&m.marks.forEach(v=>{if(o===v.type&&(c=!0,a)){const w=Math.max(y,d),N=Math.min(y+m.nodeSize,f);r.addMark(w,N,o.create({...v.attrs,...e}))}}))}),p&&(h!==void 0&&a&&r.setNodeMarkup(h,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(m=>{o===m.type&&a&&r.addMark(g,x,o.create({...m.attrs,...e}))}))}),c},Yre=(t,e={})=>({state:r,dispatch:n})=>{const a=Kt(t,r.schema);return SZ(a,e)(r,n)},Kre=(t,e={})=>({state:r,dispatch:n})=>{const a=Kt(t,r.schema);return NZ(a,e)(r,n)},Jre=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},np=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},Xre=(t,e)=>{if(L1(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function Uu(t){var e;const{editor:r,from:n,to:a,text:i,rules:o,plugin:l}=t,{view:c}=r;if(c.composing)return!1;const u=c.state.doc.resolve(n);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(h=>h.type.spec.code))return!1;let d=!1;const f=Sre(u)+i;return o.forEach(h=>{if(d)return;const p=Xre(f,h.find);if(!p)return;const g=c.state.tr,x=Qh({state:c.state,transaction:g}),m={from:n-(p[0].length-i.length),to:a},{commands:y,chain:v,can:w}=new Zh({editor:r,state:x});h.handler({state:x,range:m,match:p,commands:y,chain:v,can:w})===null||!g.steps.length||(h.undoable&&g.setMeta(l,{transform:g,from:n,to:a,text:i}),c.dispatch(g),d=!0)}),d}function Qre(t){const{editor:e,rules:r}=t,n=new $t({state:{init(){return null},apply(a,i,o){const l=a.getMeta(n);if(l)return l;const c=a.getMeta("applyInputRules");return c&&setTimeout(()=>{let{text:d}=c;typeof d=="string"?d=d:d=B1(re.from(d),o.schema);const{from:f}=c,h=f+d.length;Uu({editor:e,from:f,to:h,text:d,rules:r,plugin:n})}),a.selectionSet||a.docChanged?null:i}},props:{handleTextInput(a,i,o,l){return Uu({editor:e,from:i,to:o,text:l,rules:r,plugin:n})},handleDOMEvents:{compositionend:a=>(setTimeout(()=>{const{$cursor:i}=a.state.selection;i&&Uu({editor:e,from:i.pos,to:i.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(a,i){if(i.key!=="Enter")return!1;const{$cursor:o}=a.state.selection;return o?Uu({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function Zre(t){return Object.prototype.toString.call(t).slice(8,-1)}function Vu(t){return Zre(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function hT(t,e){const r={...t};return Vu(t)&&Vu(e)&&Object.keys(e).forEach(n=>{Vu(e[n])&&Vu(t[n])?r[n]=hT(t[n],e[n]):r[n]=e[n]}),r}var U1=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...pt(Ce(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...pt(Ce(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>hT(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Es=class pT extends U1{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new pT(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,a=e.state.selection.$from;if(a.pos===a.end()){const o=a.marks();if(!!!o.find(u=>u?.type.name===r.name))return!1;const c=o.find(u=>u?.type.name===r.name);return c&&n.removeStoredMark(c),n.insertText(" ",a.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function ene(t){return typeof t=="number"}var tne=class{constructor(t){this.find=t.find,this.handler=t.handler}},rne=(t,e,r)=>{if(L1(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(a=>{const i=[a.text];return i.index=a.index,i.input=t,i.data=a.data,a.replaceWith&&(a.text.includes(a.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(a.replaceWith)),i}):[]};function nne(t){const{editor:e,state:r,from:n,to:a,rule:i,pasteEvent:o,dropEvent:l}=t,{commands:c,chain:u,can:d}=new Zh({editor:e,state:r}),f=[];return r.doc.nodesBetween(n,a,(p,g)=>{var x,m,y,v,w;if((m=(x=p.type)==null?void 0:x.spec)!=null&&m.code||!(p.isText||p.isTextblock||p.isInline))return;const N=(w=(v=(y=p.content)==null?void 0:y.size)!=null?v:p.nodeSize)!=null?w:0,b=Math.max(n,g),S=Math.min(a,g+N);if(b>=S)return;const j=p.isText?p.text||"":p.textBetween(b-g,S-g,void 0,"￼");rne(j,i.find,o).forEach(k=>{if(k.index===void 0)return;const O=b+k.index+1,I=O+k[0].length,M={from:r.tr.mapping.map(O),to:r.tr.mapping.map(I)},T=i.handler({state:r,range:M,match:k,commands:c,chain:u,can:d,pasteEvent:o,dropEvent:l});f.push(T)})}),f.every(p=>p!==null)}var Hu=null,ane=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function sne(t){const{editor:e,rules:r}=t;let n=null,a=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:d,from:f,to:h,rule:p,pasteEvt:g})=>{const x=d.tr,m=Qh({state:d,transaction:x});if(!(!nne({editor:e,state:m,from:Math.max(f-1,0),to:h.b-1,rule:p,pasteEvent:g,dropEvent:l})||!x.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x}};return r.map(d=>new $t({view(f){const h=g=>{var x;n=(x=f.dom.parentElement)!=null&&x.contains(g.target)?f.dom.parentElement:null,n&&(Hu=e)},p=()=>{Hu&&(Hu=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(f,h)=>{if(i=n===f.dom.parentElement,l=h,!i){const p=Hu;p?.isEditable&&setTimeout(()=>{const g=p.state.selection;g&&p.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(f,h)=>{var p;const g=(p=h.clipboardData)==null?void 0:p.getData("text/html");return o=h,a=!!g?.includes("data-pm-slice"),!1}}},appendTransaction:(f,h,p)=>{const g=f[0],x=g.getMeta("uiEvent")==="paste"&&!a,m=g.getMeta("uiEvent")==="drop"&&!i,y=g.getMeta("applyPasteRules"),v=!!y;if(!x&&!m&&!v)return;if(v){let{text:b}=y;typeof b=="string"?b=b:b=B1(re.from(b),p.schema);const{from:S}=y,j=S+b.length,C=ane(b);return c({rule:d,state:p,from:S,to:{b:j},pasteEvt:C})}const w=h.doc.content.findDiffStart(p.doc.content),N=h.doc.content.findDiffEnd(p.doc.content);if(!(!ene(w)||!N||w===N.b))return c({rule:d,state:p,from:w,to:N,pasteEvt:o})}}))}var ap=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=sT(t),this.schema=gre(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:qu(e.name,this.schema)},n=Ce(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return Af([...this.extensions].reverse()).flatMap(n=>{const a={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:qu(n.name,this.schema)},i=[],o=Ce(n,"addKeyboardShortcuts",a);let l={};if(n.type==="mark"&&Ce(n,"exitable",a)&&(l.ArrowRight=()=>Es.handleExit({editor:t,mark:n})),o){const h=Object.fromEntries(Object.entries(o()).map(([p,g])=>[p,()=>g({editor:t})]));l={...l,...h}}const c=vte(l);i.push(c);const u=Ce(n,"addInputRules",a);if(GA(n,t.options.enableInputRules)&&u){const h=u();if(h&&h.length){const p=Qre({editor:t,rules:h}),g=Array.isArray(p)?p:[p];i.push(...g)}}const d=Ce(n,"addPasteRules",a);if(GA(n,t.options.enablePasteRules)&&d){const h=d();if(h&&h.length){const p=sne({editor:t,rules:h});i.push(...p)}}const f=Ce(n,"addProseMirrorPlugins",a);if(f){const h=f();i.push(...h)}return i})}get attributes(){return aT(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ho(this.extensions);return Object.fromEntries(e.filter(r=>!!Ce(r,"addNodeView")).map(r=>{const n=this.attributes.filter(c=>c.type===r.name),a={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Kt(r.name,this.schema)},i=Ce(r,"addNodeView",a);if(!i)return[];const o=i();if(!o)return[];const l=(c,u,d,f,h)=>{const p=ru(c,n);return o({node:c,view:u,getPos:d,decorations:f,innerDecorations:h,editor:t,extension:r,HTMLAttributes:p})};return[r.name,l]}))}dispatchTransaction(t){const{editor:e}=this;return Af([...this.extensions].reverse()).reduceRight((n,a)=>{const i={name:a.name,options:a.options,storage:this.editor.extensionStorage[a.name],editor:e,type:qu(a.name,this.schema)},o=Ce(a,"dispatchTransaction",i);return o?l=>{o.call(i,{transaction:l,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Ho(this.extensions);return Object.fromEntries(e.filter(r=>!!Ce(r,"addMarkView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),a={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Va(r.name,this.schema)},i=Ce(r,"addMarkView",a);if(!i)return[];const o=(l,c,u)=>{const d=ru(l,n);return i()({mark:l,view:c,inline:u,editor:t,extension:r,HTMLAttributes:d,updateAttributes:f=>{bne(l,t,f)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:qu(e.name,this.schema)};e.type==="mark"&&((r=pt(Ce(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const a=Ce(e,"onBeforeCreate",n),i=Ce(e,"onCreate",n),o=Ce(e,"onUpdate",n),l=Ce(e,"onSelectionUpdate",n),c=Ce(e,"onTransaction",n),u=Ce(e,"onFocus",n),d=Ce(e,"onBlur",n),f=Ce(e,"onDestroy",n);a&&this.editor.on("beforeCreate",a),i&&this.editor.on("create",i),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}};ap.resolve=sT;ap.sort=Af;ap.flatten=F1;var ine={};$1(ine,{ClipboardTextSerializer:()=>gT,Commands:()=>xT,Delete:()=>yT,Drop:()=>vT,Editable:()=>bT,FocusEvents:()=>wT,Keymap:()=>ST,Paste:()=>NT,Tabindex:()=>AT,TextDirection:()=>CT,focusEventsPluginKey:()=>jT});var gt=class mT extends U1{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new mT(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},gT=gt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new $t({key:new nr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:a}=e,{ranges:i}=a,o=Math.min(...i.map(d=>d.$from.pos)),l=Math.max(...i.map(d=>d.$to.pos)),c=oT(r);return iT(n,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),xT=gt.create({name:"commands",addCommands(){return{...KP}}}),yT=gt.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,a;const i=()=>{var o,l,c,u;if((u=(c=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:c.call(l,t))!=null?u:t.getMeta("y-sync$"))return;const d=rT(t.before,[t,...e]);cT(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(g,x)=>{const m=x+g.nodeSize-2,y=p.oldRange.from<=x&&m<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:g,from:x,to:m,newFrom:d.mapping.map(x),newTo:d.mapping.map(m),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:d})})});const h=d.mapping;d.steps.forEach((p,g)=>{var x,m;if(p instanceof Fn){const y=h.slice(g).map(p.from,-1),v=h.slice(g).map(p.to),w=h.invert().map(y,-1),N=h.invert().map(v),b=(x=d.doc.nodeAt(y-1))==null?void 0:x.marks.some(j=>j.eq(p.mark)),S=(m=d.doc.nodeAt(v))==null?void 0:m.marks.some(j=>j.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:N},newRange:{from:y,to:v},partial:!!(S||b),editor:this.editor,transaction:t,combinedTransform:d})}})};(a=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||a?setTimeout(i,0):i()}}),vT=gt.create({name:"drop",addProseMirrorPlugins(){return[new $t({key:new nr("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),bT=gt.create({name:"editable",addProseMirrorPlugins(){return[new $t({key:new nr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),jT=new nr("focusEvents"),wT=gt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new $t({key:jT,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),ST=gt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:c,doc:u}=l,{empty:d,$anchor:f}=c,{pos:h,parent:p}=f,g=f.parent.isTextblock&&h>0?l.doc.resolve(h-1):f,x=g.parent.type.spec.isolating,m=f.pos-f.parentOffset,y=x&&g.parent.childCount===1?m===f.pos:Ye.atStart(u).from===h;return!d||!p.type.isTextblock||p.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},a={...n},i={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Nf()||eT()?i:a},addProseMirrorPlugins(){return[new $t({key:new nr("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(x=>x.getMeta("composition")))return;const n=t.some(x=>x.docChanged)&&!e.doc.eq(r.doc),a=t.some(x=>x.getMeta("preventClearDocument"));if(!n||a)return;const{empty:i,from:o,to:l}=e.selection,c=Ye.atStart(e.doc).from,u=Ye.atEnd(e.doc).to;if(i||!(o===c&&l===u)||!rp(r.doc))return;const h=r.tr,p=Qh({state:r,transaction:h}),{commands:g}=new Zh({editor:this.editor,state:p});if(g.clearNodes(),!!h.steps.length)return h}})]}}),NT=gt.create({name:"paste",addProseMirrorPlugins(){return[new $t({key:new nr("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),AT=gt.create({name:"tabindex",addProseMirrorPlugins(){return[new $t({key:new nr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),CT=gt.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Ho(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new $t({key:new nr("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),one=class Bi{constructor(e,r,n=!1,a=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=a}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Bi(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Bi(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Bi(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const a=r.isBlock&&!r.isTextblock,i=r.isAtom&&!r.isText,o=this.pos+n+(i?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!a&&l.depth<=this.depth)return;const c=new Bi(l,this.editor,a,a?r:null);a&&(c.actualDepth=this.depth+1),e.push(new Bi(l,this.editor,a,a?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,a=this.parent;for(;a&&!n;){if(a.node.type.name===e)if(Object.keys(r).length>0){const i=a.node.attrs,o=Object.keys(r);for(let l=0;l<o.length;l+=1){const c=o[l];if(i[c]!==r[c])break}}else n=a;a=a.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let a=[];if(!this.children||this.children.length===0)return a;const i=Object.keys(r);return this.children.forEach(o=>{n&&a.length>0||(o.node.type.name===e&&i.every(c=>r[c]===o.node.attrs[c])&&a.push(o),!(n&&a.length>0)&&(a=a.concat(o.querySelectorAll(e,r,n))))}),a}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},lne=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function cne(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const a=document.createElement("style");return e&&a.setAttribute("nonce",e),a.setAttribute("data-tiptap-style",""),a.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(a),a}var une=class extends Jre{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:kre,createMappablePosition:Ere},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:a,moved:i})=>this.options.onDrop(n,a,i)),this.on("paste",({event:n,slice:a})=>this.options.onPaste(n,a)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=QP(e,this.options.autofocus);this.editorState=Ji.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=cne(lne,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=nT(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(a=>{const i=typeof a=="string"?`${a}$`:a.key;r=r.filter(o=>!o.key.startsWith(i))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[bT,gT.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),xT,wT,ST,AT,vT,NT,yT,CT.configure({direction:this.options.textDirection})].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a?.type));this.extensionManager=new ap(n,this)}createCommandManager(){this.commandManager=new Zh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Fv(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=Fv(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),a=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new GP(t,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:a,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(u)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),a=r.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!a)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),l=o?.getMeta("focus"),c=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),c&&this.emit("blur",{editor:this,event:c.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(u=>u.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return lT(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return Nre(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return B1(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return yre(this.state.doc,{blockSeparator:e,textSerializers:{...oT(this.schema),...r}})}get isEmpty(){return rp(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new one(e,this)}get $doc(){return this.$pos(0)}};function Wo(t){return new np({find:t.find,handler:({state:e,range:r,match:n})=>{const a=pt(t.getAttributes,void 0,n);if(a===!1||a===null)return null;const{tr:i}=e,o=n[n.length-1],l=n[0];if(o){const c=l.search(/\S/),u=r.from+l.indexOf(o),d=u+o.length;if(q1(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(x=>x===t.type&&x!==p.mark.type)).filter(p=>p.to>u).length)return null;d<r.to&&i.delete(d,r.to),u>r.from&&i.delete(r.from+c,u);const h=r.from+c+o.length;i.addMark(r.from+c,h,t.type.create(a||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}function kT(t){return new np({find:t.find,handler:({state:e,range:r,match:n})=>{const a=pt(t.getAttributes,void 0,n)||{},{tr:i}=e,o=r.from;let l=r.to;const c=t.type.create(a);if(n[1]){const u=n[0].lastIndexOf(n[1]);let d=o+u;d>l?d=l:l=d+n[1].length;const f=n[0][n[0].length-1];i.insertText(f,o+n[0].length-1),i.replaceWith(d,l,c)}else if(n[0]){const u=t.type.isInline?o:o-1;i.insert(u,t.type.create(a)).delete(i.mapping.map(o),i.mapping.map(l))}i.scrollIntoView()},undoable:t.undoable})}function qv(t){return new np({find:t.find,handler:({state:e,range:r,match:n})=>{const a=e.doc.resolve(r.from),i=pt(t.getAttributes,void 0,n)||{};if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,i)},undoable:t.undoable})}function Go(t){return new np({find:t.find,handler:({state:e,range:r,match:n,chain:a})=>{const i=pt(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),c=o.doc.resolve(r.from).blockRange(),u=c&&j1(c,t.type,i);if(!u)return null;if(o.wrap(c,u),t.keepMarks&&t.editor){const{selection:f,storedMarks:h}=e,{splittableMarks:p}=t.editor.extensionManager,g=h||f.$to.parentOffset&&f.$from.marks();if(g){const x=g.filter(m=>p.includes(m.type.name));o.ensureMarks(x)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";a().updateAttributes(f,i).run()}const d=o.doc.resolve(r.from-1).nodeBefore;d&&d.type===t.type&&Cs(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,d))&&o.join(r.from-1)},undoable:t.undoable})}var dne=t=>"touches"in t,fne=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=l=>{if(!this.isResizing||!this.activeHandle)return;const c=l.clientX-this.startX,u=l.clientY-this.startY;this.handleResize(c,u)},this.handleTouchMove=l=>{if(!this.isResizing||!this.activeHandle)return;const c=l.touches[0];if(!c)return;const u=c.clientX-this.startX,d=c.clientY-this.startY;this.handleResize(u,d)},this.handleMouseUp=()=>{if(!this.isResizing)return;const l=this.element.offsetWidth,c=this.element.offsetHeight;this.onCommit(l,c),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=l=>{l.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=l=>{l.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,r,n,a,i,o;this.node=t.node,this.editor=t.editor,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(e=t.options)!=null&&e.min&&(this.minSize={...this.minSize,...t.options.min}),(r=t.options)!=null&&r.max&&(this.maxSize=t.options.max),(n=t?.options)!=null&&n.directions&&(this.directions=t.options.directions),(a=t.options)!=null&&a.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(i=t.options)!=null&&i.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),(o=t.options)!=null&&o.createCustomHandle&&(this.createCustomHandle=t.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const t=this.editor.isEditable;t!==this.lastEditableState&&(this.lastEditableState=t,t?t&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(t,e,r){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,e,r):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const e=document.createElement("div");return e.dataset.resizeHandle=t,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(t,e){const r=e.includes("top"),n=e.includes("bottom"),a=e.includes("left"),i=e.includes("right");r&&(t.style.top="0"),n&&(t.style.bottom="0"),a&&(t.style.left="0"),i&&(t.style.right="0"),(e==="top"||e==="bottom")&&(t.style.left="0",t.style.right="0"),(e==="left"||e==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{let e;this.createCustomHandle?e=this.createCustomHandle(t):e=this.createHandle(t),e instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${t}") did not return an HTMLElement. Falling back to default handle.`),e=this.createHandle(t)),this.createCustomHandle||this.positionHandle(e,t),e.addEventListener("mousedown",r=>this.handleResizeStart(r,t)),e.addEventListener("touchstart",r=>this.handleResizeStart(r,t)),this.handleMap.set(t,e),this.wrapper.appendChild(e)})}removeHandles(){this.handleMap.forEach(t=>t.remove()),this.handleMap.clear()}applyInitialSize(){const t=this.node.attrs.width,e=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=e,dne(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,e){if(!this.activeHandle)return;const r=this.preserveAspectRatio||this.isShiftKeyPressed,{width:n,height:a}=this.calculateNewDimensions(this.activeHandle,t,e),i=this.applyConstraints(n,a,r);this.element.style.width=`${i.width}px`,this.element.style.height=`${i.height}px`,this.onResize&&this.onResize(i.width,i.height)}calculateNewDimensions(t,e,r){let n=this.startWidth,a=this.startHeight;const i=t.includes("right"),o=t.includes("left"),l=t.includes("bottom"),c=t.includes("top");return i?n=this.startWidth+e:o&&(n=this.startWidth-e),l?a=this.startHeight+r:c&&(a=this.startHeight-r),(t==="right"||t==="left")&&(n=this.startWidth+(i?e:-e)),(t==="top"||t==="bottom")&&(a=this.startHeight+(l?r:-r)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(n,a,t):{width:n,height:a}}applyConstraints(t,e,r){var n,a,i,o;if(!r){let u=Math.max(this.minSize.width,t),d=Math.max(this.minSize.height,e);return(n=this.maxSize)!=null&&n.width&&(u=Math.min(this.maxSize.width,u)),(a=this.maxSize)!=null&&a.height&&(d=Math.min(this.maxSize.height,d)),{width:u,height:d}}let l=t,c=e;return l<this.minSize.width&&(l=this.minSize.width,c=l/this.aspectRatio),c<this.minSize.height&&(c=this.minSize.height,l=c*this.aspectRatio),(i=this.maxSize)!=null&&i.width&&l>this.maxSize.width&&(l=this.maxSize.width,c=l/this.aspectRatio),(o=this.maxSize)!=null&&o.height&&c>this.maxSize.height&&(c=this.maxSize.height,l=c*this.aspectRatio),{width:l,height:c}}applyAspectRatio(t,e,r){const n=r==="left"||r==="right",a=r==="top"||r==="bottom";return n?{width:t,height:t/this.aspectRatio}:a?{width:e*this.aspectRatio,height:e}:{width:t,height:t/this.aspectRatio}}};function hne(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof Te){const i=n.index();return n.parent.canReplaceWith(i,i+1,e)}let a=n.depth;for(;a>=0;){const i=n.index(a);if(n.node(a).contentMatchAt(i).matchType(e))return!0;a-=1}return!1}var pne={};$1(pne,{createAtomBlockMarkdownSpec:()=>mne,createBlockMarkdownSpec:()=>gne,createInlineMarkdownSpec:()=>vne,parseAttributes:()=>V1,parseIndentedBlocks:()=>Uv,renderNestedMarkdownContent:()=>W1,serializeAttributes:()=>H1});function V1(t){if(!t?.trim())return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,u=>(r.push(u),`__QUOTED_${r.length-1}__`)),a=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(a){const u=a.map(d=>d.trim().slice(1));e.class=u.join(" ")}const i=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,u,d])=>{var f;const h=parseInt(((f=d.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),p=r[h];p&&(e[u]=p.slice(1,-1))});const c=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function H1(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function mne(t){const{nodeName:e,name:r,parseAttributes:n=V1,serializeAttributes:a=H1,defaultAttributes:i={},requiredAttributes:o=[],allowedAttributes:l}=t,c=r||e,u=d=>{if(!l)return d;const f={};return l.forEach(h=>{h in d&&(f[h]=d[h])}),f};return{parseMarkdown:(d,f)=>{const h={...i,...d.attributes};return f.createNode(e,h,[])},markdownTokenizer:{name:e,level:"block",start(d){var f;const h=new RegExp(`^:::${c}(?:\\s|$)`,"m"),p=(f=d.match(h))==null?void 0:f.index;return p!==void 0?p:-1},tokenize(d,f,h){const p=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),g=d.match(p);if(!g)return;const x=g[1]||"",m=n(x);if(!o.find(v=>!(v in m)))return{type:e,raw:g[0],attributes:m}}},renderMarkdown:d=>{const f=u(d.attrs||{}),h=a(f),p=h?` {${h}}`:"";return`:::${c}${p} :::`}}}function gne(t){const{nodeName:e,name:r,getContent:n,parseAttributes:a=V1,serializeAttributes:i=H1,defaultAttributes:o={},content:l="block",allowedAttributes:c}=t,u=r||e,d=f=>{if(!c)return f;const h={};return c.forEach(p=>{p in f&&(h[p]=f[p])}),h};return{parseMarkdown:(f,h)=>{let p;if(n){const x=n(f);p=typeof x=="string"?[{type:"text",text:x}]:x}else l==="block"?p=h.parseChildren(f.tokens||[]):p=h.parseInline(f.tokens||[]);const g={...o,...f.attributes};return h.createNode(e,g,p)},markdownTokenizer:{name:e,level:"block",start(f){var h;const p=new RegExp(`^:::${u}`,"m"),g=(h=f.match(p))==null?void 0:h.index;return g!==void 0?g:-1},tokenize(f,h,p){var g;const x=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),m=f.match(x);if(!m)return;const[y,v=""]=m,w=a(v);let N=1;const b=y.length;let S="";const j=/^:::([\w-]*)(\s.*)?/gm,C=f.slice(b);for(j.lastIndex=0;;){const k=j.exec(C);if(k===null)break;const O=k.index,I=k[1];if(!((g=k[2])!=null&&g.endsWith(":::"))){if(I)N+=1;else if(N-=1,N===0){const M=C.slice(0,O);S=M.trim();const T=f.slice(0,b+O+k[0].length);let R=[];if(S)if(l==="block")for(R=p.blockTokens(M),R.forEach(L=>{L.text&&(!L.tokens||L.tokens.length===0)&&(L.tokens=p.inlineTokens(L.text))});R.length>0;){const L=R[R.length-1];if(L.type==="paragraph"&&(!L.text||L.text.trim()===""))R.pop();else break}else R=p.inlineTokens(S);return{type:e,raw:T,attributes:w,content:S,tokens:R}}}}}},renderMarkdown:(f,h)=>{const p=d(f.attrs||{}),g=i(p),x=g?` {${g}}`:"",m=h.renderChildren(f.content||[],`

`);return`:::${u}${x}

${m}

:::`}}}function xne(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,a,i,o]=n;e[a]=i||o,n=r.exec(t)}return e}function yne(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function vne(t){const{nodeName:e,name:r,getContent:n,parseAttributes:a=xne,serializeAttributes:i=yne,defaultAttributes:o={},selfClosing:l=!1,allowedAttributes:c}=t,u=r||e,d=h=>{if(!c)return h;const p={};return c.forEach(g=>{const x=typeof g=="string"?g:g.name,m=typeof g=="string"?void 0:g.skipIfDefault;if(x in h){const y=h[x];if(m!==void 0&&y===m)return;p[x]=y}}),p},f=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(h,p)=>{const g={...o,...h.attributes};if(l)return p.createNode(e,g);const x=n?n(h):h.content||"";return x?p.createNode(e,g,[p.createTextNode(x)]):p.createNode(e,g,[])},markdownTokenizer:{name:e,level:"inline",start(h){const p=l?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),g=h.match(p),x=g?.index;return x!==void 0?x:-1},tokenize(h,p,g){const x=l?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),m=h.match(x);if(!m)return;let y="",v="";if(l){const[,N]=m;v=N}else{const[,N,b]=m;v=N,y=b||""}const w=a(v.trim());return{type:e,raw:m[0],content:y.trim(),attributes:w}}},renderMarkdown:h=>{let p="";n?p=n(h):h.content&&h.content.length>0&&(p=h.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const g=d(h.attrs||{}),x=i(g),m=x?` ${x}`:"";return l?`[${u}${m}]`:`[${u}${m}]${p}[/${u}]`}}}function Uv(t,e,r){var n,a,i,o;const l=t.split(`
`),c=[];let u="",d=0;const f=e.baseIndentSize||2;for(;d<l.length;){const h=l[d],p=h.match(e.itemPattern);if(!p){if(c.length>0)break;if(h.trim()===""){d+=1,u=`${u}${h}
`;continue}else return}const g=e.extractItemData(p),{indentLevel:x,mainContent:m}=g;u=`${u}${h}
`;const y=[m];for(d+=1;d<l.length;){const b=l[d];if(b.trim()===""){const j=l.slice(d+1).findIndex(O=>O.trim()!=="");if(j===-1)break;if((((a=(n=l[d+1+j].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:a.length)||0)>x){y.push(b),u=`${u}${b}
`,d+=1;continue}else break}if((((o=(i=b.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:o.length)||0)>x)y.push(b),u=`${u}${b}
`,d+=1;else break}let v;const w=y.slice(1);if(w.length>0){const b=w.map(S=>S.slice(x+f)).join(`
`);b.trim()&&(e.customNestedParser?v=e.customNestedParser(b):v=r.blockTokens(b))}const N=e.createToken(g,v);c.push(N)}if(c.length!==0)return{items:c,raw:u}}function W1(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const a=typeof r=="function"?r(n):r,[i,...o]=t.content,l=e.renderChildren([i]),c=[`${a}${l}`];return o&&o.length>0&&o.forEach(u=>{const d=e.renderChildren([u]);if(d){const f=d.split(`
`).map(h=>h?e.indent(h):"").join(`
`);c.push(f)}}),c.join(`
`)}function bne(t,e,r={}){const{state:n}=e,{doc:a,tr:i}=n,o=t;a.descendants((l,c)=>{const u=i.mapping.map(c),d=i.mapping.map(c)+l.nodeSize;let f=null;if(l.marks.forEach(p=>{if(p!==o)return!1;f=p}),!f)return;let h=!1;if(Object.keys(r).forEach(p=>{r[p]!==f.attrs[p]&&(h=!0)}),h){const p=t.type.create({...t.attrs,...r});i.removeMark(u,d,t.type),i.addMark(u,d,p)}}),i.docChanged&&e.view.dispatch(i)}var Yr=class ET extends U1{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new ET(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function ji(t){return new tne({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:a})=>{const i=pt(t.getAttributes,void 0,n,a);if(i===!1||i===null)return null;const{tr:o}=e,l=n[n.length-1],c=n[0];let u=r.to;if(l){const d=c.search(/\S/),f=r.from+c.indexOf(l),h=f+l.length;if(q1(r.from,r.to,e.doc).filter(g=>g.mark.type.excluded.find(m=>m===t.type&&m!==g.mark.type)).filter(g=>g.to>f).length)return null;h<r.to&&o.delete(h,r.to),f>r.from&&o.delete(r.from+d,f),u=r.from+d+l.length,o.addMark(r.from+d,u,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}var V0={exports:{}},H0={};var JA;function jne(){if(JA)return H0;JA=1;var t=nb(),e=v8();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=e.useSyncExternalStore,i=t.useRef,o=t.useEffect,l=t.useMemo,c=t.useDebugValue;return H0.useSyncExternalStoreWithSelector=function(u,d,f,h,p){var g=i(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=l(function(){function y(S){if(!v){if(v=!0,w=S,S=h(S),p!==void 0&&x.hasValue){var j=x.value;if(p(j,S))return N=j}return N=S}if(j=N,n(w,S))return j;var C=h(S);return p!==void 0&&p(j,C)?(w=S,j):(w=S,N=C)}var v=!1,w,N,b=f===void 0?null:f;return[function(){return y(d())},b===null?void 0:function(){return y(b())}]},[d,f,h,p]);var m=a(u,g[0],g[1]);return o(function(){x.hasValue=!0,x.value=m},[m]),c(m),m},H0}var XA;function wne(){return XA||(XA=1,V0.exports=jne()),V0.exports}var Sne=wne(),Nne=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},Ane=({contentComponent:t})=>{const e=b8.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return s.jsx(s.Fragment,{children:Object.values(e)})};function Cne(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:hI.createPortal(n.reactElement,n.element,r)},t.forEach(a=>a())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(a=>a())}}}var kne=class extends D.Component{constructor(t){var e;super(t),this.editorContentRef=D.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=Cne(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:Nne(e,this.editorContentRef),...r}),t?.contentComponent&&s.jsx(Ane,{contentComponent:t.contentComponent})]})}},Ene=A.forwardRef((t,e)=>{const r=D.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return D.createElement(kne,{key:r,innerRef:e,...t})}),QA=D.memo(Ene),One=typeof window<"u"?A.useLayoutEffect:A.useEffect,Pne=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function Tne(t){var e;const[r]=A.useState(()=>new Pne(t.editor)),n=Sne.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:hO);return One(()=>r.watch(t.editor),[t.editor,r]),A.useDebugValue(n),n}var Ine=!1,Vv=typeof window>"u",Mne=Vv||!!(typeof window<"u"&&window.next),Rne=class OT{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Vv||Mne?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var a,i;return(i=(a=this.options.current).onBeforeCreate)==null?void 0:i.call(a,...n)},onBlur:(...n)=>{var a,i;return(i=(a=this.options.current).onBlur)==null?void 0:i.call(a,...n)},onCreate:(...n)=>{var a,i;return(i=(a=this.options.current).onCreate)==null?void 0:i.call(a,...n)},onDestroy:(...n)=>{var a,i;return(i=(a=this.options.current).onDestroy)==null?void 0:i.call(a,...n)},onFocus:(...n)=>{var a,i;return(i=(a=this.options.current).onFocus)==null?void 0:i.call(a,...n)},onSelectionUpdate:(...n)=>{var a,i;return(i=(a=this.options.current).onSelectionUpdate)==null?void 0:i.call(a,...n)},onTransaction:(...n)=>{var a,i;return(i=(a=this.options.current).onTransaction)==null?void 0:i.call(a,...n)},onUpdate:(...n)=>{var a,i;return(i=(a=this.options.current).onUpdate)==null?void 0:i.call(a,...n)},onContentError:(...n)=>{var a,i;return(i=(a=this.options.current).onContentError)==null?void 0:i.call(a,...n)},onDrop:(...n)=>{var a,i;return(i=(a=this.options.current).onDrop)==null?void 0:i.call(a,...n)},onPaste:(...n)=>{var a,i;return(i=(a=this.options.current).onPaste)==null?void 0:i.call(a,...n)},onDelete:(...n)=>{var a,i;return(i=(a=this.options.current).onDelete)==null?void 0:i.call(a,...n)}};return new une(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((a,i)=>{var o;return a===((o=r.extensions)==null?void 0:o[i])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?OT.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,a)=>n===e[a]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function ZA(t={},e=[]){const r=A.useRef(t);r.current=t;const[n]=A.useState(()=>new Rne(r)),a=b8.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return A.useDebugValue(a),A.useEffect(n.onRender(e)),Tne({editor:a,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),a}var _ne=A.createContext({editor:null});_ne.Consumer;var Dne=A.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),$ne=()=>A.useContext(Dne);D.forwardRef((t,e)=>{const{onDragStart:r}=$ne(),n=t.as||"div";return s.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});D.createContext({markViewContentRef:()=>{}});var Cf=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},Lne=/^\s*>\s$/,zne=Yr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Cf("blockquote",{...qt(this.options.HTMLAttributes,t),children:Cf("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(a=>{const l=e.renderChildren([a]).split(`
`).map(c=>c.trim()===""?r:`${r} ${c}`);n.push(l.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Go({find:Lne,type:this.type})]}}),Fne=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Bne=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,qne=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Une=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Vne=Es.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Cf("strong",{...qt(this.options.HTMLAttributes,t),children:Cf("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Wo({find:Fne,type:this.type}),Wo({find:qne,type:this.type})]},addPasteRules(){return[ji({find:Bne,type:this.type}),ji({find:Une,type:this.type})]}}),Hne=/(^|[^`])`([^`]+)`(?!`)$/,Wne=/(^|[^`])`([^`]+)`(?!`)/g,Gne=Es.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",qt(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Wo({find:Hne,type:this.type})]},addPasteRules(){return[ji({find:Wne,type:this.type})]}}),W0=4,Yne=/^```([a-z]+)?[\s\n]$/,Kne=/^~~~([a-z]+)?[\s\n]$/,Jne=Yr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:W0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",qt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const a=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${a}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${a}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:W0,{state:n}=t,{selection:a}=n,{$from:i,empty:o}=a;if(i.parent.type!==this.type)return!1;const l=" ".repeat(r);return o?t.commands.insertContent(l):t.commands.command(({tr:c})=>{const{from:u,to:d}=a,p=n.doc.textBetween(u,d,`
`,`
`).split(`
`).map(g=>l+g).join(`
`);return c.replaceWith(u,d,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:W0,{state:n}=t,{selection:a}=n,{$from:i,empty:o}=a;return i.parent.type!==this.type?!1:o?t.commands.command(({tr:l})=>{var c;const{pos:u}=i,d=i.start(),f=i.end(),p=n.doc.textBetween(d,f,`
`,`
`).split(`
`);let g=0,x=0;const m=u-d;for(let S=0;S<p.length;S+=1){if(x+p[S].length>=m){g=S;break}x+=p[S].length+1}const v=((c=p[g].match(/^ */))==null?void 0:c[0])||"",w=Math.min(v.length,r);if(w===0)return!0;let N=d;for(let S=0;S<g;S+=1)N+=p[S].length+1;return l.delete(N,N+w),u-N<=w&&l.setSelection(qe.create(l.doc,N)),!0}):t.commands.command(({tr:l})=>{const{from:c,to:u}=a,h=n.doc.textBetween(c,u,`
`,`
`).split(`
`).map(p=>{var g;const x=((g=p.match(/^ */))==null?void 0:g[0])||"",m=Math.min(x.length,r);return p.slice(m)}).join(`
`);return l.replaceWith(c,u,n.schema.text(h)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:a}=r;if(!a||n.parent.type!==this.type)return!1;const i=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:l})=>(l.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:a,empty:i}=r;if(!i||a.parent.type!==this.type||!(a.parentOffset===a.parent.nodeSize-2))return!1;const l=a.after();return l===void 0?!1:n.nodeAt(l)?t.commands.command(({tr:u})=>(u.setSelection(Ye.near(n.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[qv({find:Yne,type:this.type,getAttributes:t=>({language:t[1]})}),qv({find:Kne,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new $t({key:new nr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),a=n?JSON.parse(n):void 0,i=a?.mode;if(!r||!i)return!1;const{tr:o,schema:l}=t.state,c=l.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(qe.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),Xne=Yr.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),Qne=Yr.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",qt(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:a,storedMarks:i}=r;if(a.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=n.extensionManager,c=i||a.$to.parentOffset&&a.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&c&&o){const f=c.filter(h=>l.includes(h.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Zne=Yr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,qt(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,a="#".repeat(n);return t.content?`${a} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>qv({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),eae=Yr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",qt(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!hne(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,a=t();return uT(r)?a.insertContentAt(n.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({state:i,tr:o,dispatch:l})=>{if(l){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(qe.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Te.create(o.doc,c.pos)):o.setSelection(qe.create(o.doc,c.pos));else{const d=i.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,f=d?.create();f&&(o.insert(u,f),o.setSelection(qe.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[kT({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),tae=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,rae=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,nae=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,aae=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,sae=Es.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Wo({find:tae,type:this.type}),Wo({find:nae,type:this.type})]},addPasteRules(){return[ji({find:rae,type:this.type}),ji({find:aae,type:this.type})]}});const iae="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",oae="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Hv="numeric",Wv="ascii",Gv="alpha",rc="asciinumeric",Vl="alphanumeric",Yv="domain",PT="emoji",lae="scheme",cae="slashscheme",G0="whitespace";function uae(t,e){return t in e||(e[t]=[]),e[t]}function ei(t,e,r){e[Hv]&&(e[rc]=!0,e[Vl]=!0),e[Wv]&&(e[rc]=!0,e[Gv]=!0),e[rc]&&(e[Vl]=!0),e[Gv]&&(e[Vl]=!0),e[Vl]&&(e[Yv]=!0),e[PT]&&(e[Yv]=!0);for(const n in e){const a=uae(n,r);a.indexOf(t)<0&&a.push(t)}}function dae(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function Ur(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Ur.groups={};Ur.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const a=e.jr[n][0],i=e.jr[n][1];if(i&&a.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let a=0;a<t.length;a++)this.tt(t[a],e,r,n)},tr(t,e,r,n){n=n||Ur.groups;let a;return e&&e.j?a=e:(a=new Ur(e),r&&n&&ei(e,r,n)),this.jr.push([t,a]),a},ts(t,e,r,n){let a=this;const i=t.length;if(!i)return a;for(let o=0;o<i-1;o++)a=a.tt(t[o]);return a.tt(t[i-1],e,r,n)},tt(t,e,r,n){n=n||Ur.groups;const a=this;if(e&&e.j)return a.j[t]=e,e;const i=e;let o,l=a.go(t);if(l?(o=new Ur,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Ur,i){if(n)if(o.t&&typeof o.t=="string"){const c=Object.assign(dae(o.t,n),r);ei(i,c,n)}else r&&ei(i,r,n);o.t=i}return a.j[t]=o,o}};const Ge=(t,e,r,n,a)=>t.ta(e,r,n,a),Lt=(t,e,r,n,a)=>t.tr(e,r,n,a),eC=(t,e,r,n,a)=>t.ts(e,r,n,a),ae=(t,e,r,n,a)=>t.tt(e,r,n,a),va="WORD",Kv="UWORD",TT="ASCIINUMERICAL",IT="ALPHANUMERICAL",nu="LOCALHOST",Jv="TLD",Xv="UTLD",ad="SCHEME",qi="SLASH_SCHEME",G1="NUM",Qv="WS",Y1="NL",nc="OPENBRACE",ac="CLOSEBRACE",kf="OPENBRACKET",Ef="CLOSEBRACKET",Of="OPENPAREN",Pf="CLOSEPAREN",Tf="OPENANGLEBRACKET",If="CLOSEANGLEBRACKET",Mf="FULLWIDTHLEFTPAREN",Rf="FULLWIDTHRIGHTPAREN",_f="LEFTCORNERBRACKET",Df="RIGHTCORNERBRACKET",$f="LEFTWHITECORNERBRACKET",Lf="RIGHTWHITECORNERBRACKET",zf="FULLWIDTHLESSTHAN",Ff="FULLWIDTHGREATERTHAN",Bf="AMPERSAND",qf="APOSTROPHE",Uf="ASTERISK",Xa="AT",Vf="BACKSLASH",Hf="BACKTICK",Wf="CARET",ts="COLON",K1="COMMA",Gf="DOLLAR",Wn="DOT",Yf="EQUALS",J1="EXCLAMATION",vn="HYPHEN",sc="PERCENT",Kf="PIPE",Jf="PLUS",Xf="POUND",ic="QUERY",X1="QUOTE",MT="FULLWIDTHMIDDLEDOT",Q1="SEMI",Gn="SLASH",oc="TILDE",Qf="UNDERSCORE",RT="EMOJI",Zf="SYM";var _T=Object.freeze({__proto__:null,ALPHANUMERICAL:IT,AMPERSAND:Bf,APOSTROPHE:qf,ASCIINUMERICAL:TT,ASTERISK:Uf,AT:Xa,BACKSLASH:Vf,BACKTICK:Hf,CARET:Wf,CLOSEANGLEBRACKET:If,CLOSEBRACE:ac,CLOSEBRACKET:Ef,CLOSEPAREN:Pf,COLON:ts,COMMA:K1,DOLLAR:Gf,DOT:Wn,EMOJI:RT,EQUALS:Yf,EXCLAMATION:J1,FULLWIDTHGREATERTHAN:Ff,FULLWIDTHLEFTPAREN:Mf,FULLWIDTHLESSTHAN:zf,FULLWIDTHMIDDLEDOT:MT,FULLWIDTHRIGHTPAREN:Rf,HYPHEN:vn,LEFTCORNERBRACKET:_f,LEFTWHITECORNERBRACKET:$f,LOCALHOST:nu,NL:Y1,NUM:G1,OPENANGLEBRACKET:Tf,OPENBRACE:nc,OPENBRACKET:kf,OPENPAREN:Of,PERCENT:sc,PIPE:Kf,PLUS:Jf,POUND:Xf,QUERY:ic,QUOTE:X1,RIGHTCORNERBRACKET:Df,RIGHTWHITECORNERBRACKET:Lf,SCHEME:ad,SEMI:Q1,SLASH:Gn,SLASH_SCHEME:qi,SYM:Zf,TILDE:oc,TLD:Jv,UNDERSCORE:Qf,UTLD:Xv,UWORD:Kv,WORD:va,WS:Qv});const xa=/[a-z]/,Ml=new RegExp("\\p{L}","u"),Y0=new RegExp("\\p{Emoji}","u"),ya=/\d/,K0=/\s/,tC="\r",J0=`
`,fae="️",hae="‍",X0="￼";let Wu=null,Gu=null;function pae(t=[]){const e={};Ur.groups=e;const r=new Ur;Wu==null&&(Wu=rC(iae)),Gu==null&&(Gu=rC(oae)),ae(r,"'",qf),ae(r,"{",nc),ae(r,"}",ac),ae(r,"[",kf),ae(r,"]",Ef),ae(r,"(",Of),ae(r,")",Pf),ae(r,"<",Tf),ae(r,">",If),ae(r,"（",Mf),ae(r,"）",Rf),ae(r,"「",_f),ae(r,"」",Df),ae(r,"『",$f),ae(r,"』",Lf),ae(r,"＜",zf),ae(r,"＞",Ff),ae(r,"&",Bf),ae(r,"*",Uf),ae(r,"@",Xa),ae(r,"`",Hf),ae(r,"^",Wf),ae(r,":",ts),ae(r,",",K1),ae(r,"$",Gf),ae(r,".",Wn),ae(r,"=",Yf),ae(r,"!",J1),ae(r,"-",vn),ae(r,"%",sc),ae(r,"|",Kf),ae(r,"+",Jf),ae(r,"#",Xf),ae(r,"?",ic),ae(r,'"',X1),ae(r,"/",Gn),ae(r,";",Q1),ae(r,"~",oc),ae(r,"_",Qf),ae(r,"\\",Vf),ae(r,"・",MT);const n=Lt(r,ya,G1,{[Hv]:!0});Lt(n,ya,n);const a=Lt(n,xa,TT,{[rc]:!0}),i=Lt(n,Ml,IT,{[Vl]:!0}),o=Lt(r,xa,va,{[Wv]:!0});Lt(o,ya,a),Lt(o,xa,o),Lt(a,ya,a),Lt(a,xa,a);const l=Lt(r,Ml,Kv,{[Gv]:!0});Lt(l,xa),Lt(l,ya,i),Lt(l,Ml,l),Lt(i,ya,i),Lt(i,xa),Lt(i,Ml,i);const c=ae(r,J0,Y1,{[G0]:!0}),u=ae(r,tC,Qv,{[G0]:!0}),d=Lt(r,K0,Qv,{[G0]:!0});ae(r,X0,d),ae(u,J0,c),ae(u,X0,d),Lt(u,K0,d),ae(d,tC),ae(d,J0),Lt(d,K0,d),ae(d,X0,d);const f=Lt(r,Y0,RT,{[PT]:!0});ae(f,"#"),Lt(f,Y0,f),ae(f,fae,f);const h=ae(f,hae);ae(h,"#"),Lt(h,Y0,f);const p=[[xa,o],[ya,a]],g=[[xa,null],[Ml,l],[ya,i]];for(let x=0;x<Wu.length;x++)Wa(r,Wu[x],Jv,va,p);for(let x=0;x<Gu.length;x++)Wa(r,Gu[x],Xv,Kv,g);ei(Jv,{tld:!0,ascii:!0},e),ei(Xv,{utld:!0,alpha:!0},e),Wa(r,"file",ad,va,p),Wa(r,"mailto",ad,va,p),Wa(r,"http",qi,va,p),Wa(r,"https",qi,va,p),Wa(r,"ftp",qi,va,p),Wa(r,"ftps",qi,va,p),ei(ad,{scheme:!0,ascii:!0},e),ei(qi,{slashscheme:!0,ascii:!0},e),t=t.sort((x,m)=>x[0]>m[0]?1:-1);for(let x=0;x<t.length;x++){const m=t[x][0],v=t[x][1]?{[lae]:!0}:{[cae]:!0};m.indexOf("-")>=0?v[Yv]=!0:xa.test(m)?ya.test(m)?v[rc]=!0:v[Wv]=!0:v[Hv]=!0,eC(r,m,m,v)}return eC(r,"localhost",nu,{ascii:!0}),r.jd=new Ur(Zf),{start:r,tokens:Object.assign({groups:e},_T)}}function DT(t,e){const r=mae(e.replace(/[A-Z]/g,l=>l.toLowerCase())),n=r.length,a=[];let i=0,o=0;for(;o<n;){let l=t,c=null,u=0,d=null,f=-1,h=-1;for(;o<n&&(c=l.go(r[o]));)l=c,l.accepts()?(f=0,h=0,d=l):f>=0&&(f+=r[o].length,h++),u+=r[o].length,i+=r[o].length,o++;i-=f,o-=h,u-=f,a.push({t:d.t,v:e.slice(i-u,i),s:i-u,e:i})}return a}function mae(t){const e=[],r=t.length;let n=0;for(;n<r;){let a=t.charCodeAt(n),i,o=a<55296||a>56319||n+1===r||(i=t.charCodeAt(n+1))<56320||i>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function Wa(t,e,r,n,a){let i;const o=e.length;for(let l=0;l<o-1;l++){const c=e[l];t.j[c]?i=t.j[c]:(i=new Ur(n),i.jr=a.slice(),t.j[c]=i),t=i}return i=new Ur(r),i.jr=a.slice(),t.j[e[o-1]]=i,i}function rC(t){const e=[],r=[];let n=0,a="0123456789";for(;n<t.length;){let i=0;for(;a.indexOf(t[n+i])>=0;)i++;if(i>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+i),10);o>0;o--)r.pop();n+=i}else r.push(t[n]),n++}return e}const au={defaultProtocol:"http",events:null,format:nC,formatHref:nC,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Z1(t,e=null){let r=Object.assign({},au);t&&(r=Object.assign(r,t instanceof Z1?t.o:t));const n=r.ignoreTags,a=[];for(let i=0;i<n.length;i++)a.push(n[i].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=a}Z1.prototype={o:au,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let a=this.o[t];return a&&(typeof a=="object"?(a=r.t in a?a[r.t]:au[t],typeof a=="function"&&n&&(a=a(e,r))):typeof a=="function"&&n&&(a=a(e,r.t,r)),a)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function nC(t){return t}function $T(t,e){this.t="token",this.v=t,this.tk=e}$T.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"…":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=au.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),a=t.get("tagName",r,e),i=this.toFormattedString(t),o={},l=t.get("className",r,e),c=t.get("target",r,e),u=t.get("rel",r,e),d=t.getObj("attributes",r,e),f=t.getObj("events",r,e);return o.href=n,l&&(o.class=l),c&&(o.target=c),u&&(o.rel=u),d&&Object.assign(o,d),{tagName:a,attributes:o,content:i,eventListeners:f}}};function sp(t,e){class r extends $T{constructor(a,i){super(a,i),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const aC=sp("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),sC=sp("text"),gae=sp("nl"),Yu=sp("url",{isLink:!0,toHref(t=au.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==nu&&t[1].t===ts}}),yn=t=>new Ur(t);function xae({groups:t}){const e=t.domain.concat([Bf,Uf,Xa,Vf,Hf,Wf,Gf,Yf,vn,G1,sc,Kf,Jf,Xf,Gn,Zf,oc,Qf]),r=[qf,ts,K1,Wn,J1,sc,ic,X1,Q1,Tf,If,nc,ac,Ef,kf,Of,Pf,Mf,Rf,_f,Df,$f,Lf,zf,Ff],n=[Bf,qf,Uf,Vf,Hf,Wf,Gf,Yf,vn,nc,ac,sc,Kf,Jf,Xf,ic,Gn,Zf,oc,Qf],a=yn(),i=ae(a,oc);Ge(i,n,i),Ge(i,t.domain,i);const o=yn(),l=yn(),c=yn();Ge(a,t.domain,o),Ge(a,t.scheme,l),Ge(a,t.slashscheme,c),Ge(o,n,i),Ge(o,t.domain,o);const u=ae(o,Xa);ae(i,Xa,u),ae(l,Xa,u),ae(c,Xa,u);const d=ae(i,Wn);Ge(d,n,i),Ge(d,t.domain,i);const f=yn();Ge(u,t.domain,f),Ge(f,t.domain,f);const h=ae(f,Wn);Ge(h,t.domain,f);const p=yn(aC);Ge(h,t.tld,p),Ge(h,t.utld,p),ae(u,nu,p);const g=ae(f,vn);ae(g,vn,g),Ge(g,t.domain,f),Ge(p,t.domain,f),ae(p,Wn,h),ae(p,vn,g);const x=ae(p,ts);Ge(x,t.numeric,aC);const m=ae(o,vn),y=ae(o,Wn);ae(m,vn,m),Ge(m,t.domain,o),Ge(y,n,i),Ge(y,t.domain,o);const v=yn(Yu);Ge(y,t.tld,v),Ge(y,t.utld,v),Ge(v,t.domain,o),Ge(v,n,i),ae(v,Wn,y),ae(v,vn,m),ae(v,Xa,u);const w=ae(v,ts),N=yn(Yu);Ge(w,t.numeric,N);const b=yn(Yu),S=yn();Ge(b,e,b),Ge(b,r,S),Ge(S,e,b),Ge(S,r,S),ae(v,Gn,b),ae(N,Gn,b);const j=ae(l,ts),C=ae(c,ts),k=ae(C,Gn),O=ae(k,Gn);Ge(l,t.domain,o),ae(l,Wn,y),ae(l,vn,m),Ge(c,t.domain,o),ae(c,Wn,y),ae(c,vn,m),Ge(j,t.domain,b),ae(j,Gn,b),ae(j,ic,b),Ge(O,t.domain,b),Ge(O,e,b),ae(O,Gn,b);const I=[[nc,ac],[kf,Ef],[Of,Pf],[Tf,If],[Mf,Rf],[_f,Df],[$f,Lf],[zf,Ff]];for(let M=0;M<I.length;M++){const[T,R]=I[M],L=ae(b,T);ae(S,T,L),ae(L,R,b);const B=yn(Yu);Ge(L,e,B);const H=yn();Ge(L,r),Ge(B,e,B),Ge(B,r,H),Ge(H,e,B),Ge(H,r,H),ae(B,R,b),ae(H,R,b)}return ae(a,nu,v),ae(a,Y1,gae),{start:a,tokens:_T}}function yae(t,e,r){let n=r.length,a=0,i=[],o=[];for(;a<n;){let l=t,c=null,u=null,d=0,f=null,h=-1;for(;a<n&&!(c=l.go(r[a].t));)o.push(r[a++]);for(;a<n&&(u=c||l.go(r[a].t));)c=null,l=u,l.accepts()?(h=0,f=l):h>=0&&h++,a++,d++;if(h<0)a-=d,a<n&&(o.push(r[a]),a++);else{o.length>0&&(i.push(Q0(sC,e,o)),o=[]),a-=h,d-=h;const p=f.t,g=r.slice(a-d,a);i.push(Q0(p,e,g))}}return o.length>0&&i.push(Q0(sC,e,o)),i}function Q0(t,e,r){const n=r[0].s,a=r[r.length-1].e,i=e.slice(n,a);return new t(i,r)}const vae=typeof console<"u"&&console&&console.warn||(()=>{}),bae="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Et={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function jae(){return Ur.groups={},Et.scanner=null,Et.parser=null,Et.tokenQueue=[],Et.pluginQueue=[],Et.customSchemes=[],Et.initialized=!1,Et}function iC(t,e=!1){if(Et.initialized&&vae(`linkifyjs: already initialized - will not register custom scheme "${t}" ${bae}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Et.customSchemes.push([t,e])}function wae(){Et.scanner=pae(Et.customSchemes);for(let t=0;t<Et.tokenQueue.length;t++)Et.tokenQueue[t][1]({scanner:Et.scanner});Et.parser=xae(Et.scanner.tokens);for(let t=0;t<Et.pluginQueue.length;t++)Et.pluginQueue[t][1]({scanner:Et.scanner,parser:Et.parser});return Et.initialized=!0,Et}function ej(t){return Et.initialized||wae(),yae(Et.parser.start,t,DT(Et.scanner.start,t))}ej.scan=DT;function LT(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new Z1(r),a=ej(t),i=[];for(let o=0;o<a.length;o++){const l=a[o];l.isLink&&(!e||l.t===e)&&n.check(l)&&i.push(l.toFormattedObject(n))}return i}var tj="[\0-   ᠎ -\u2029 　]",Sae=new RegExp(tj),Nae=new RegExp(`${tj}$`),Aae=new RegExp(tj,"g");function Cae(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function kae(t){return new $t({key:new nr("autolink"),appendTransaction:(e,r,n)=>{const a=e.some(u=>u.docChanged)&&!r.doc.eq(n.doc),i=e.some(u=>u.getMeta("preventAutolink"));if(!a||i)return;const{tr:o}=n,l=rT(r.doc,[...e]);if(cT(l).forEach(({newRange:u})=>{const d=fre(n.doc,u,p=>p.isTextblock);let f,h;if(d.length>1)f=d[0],h=n.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const p=n.doc.textBetween(u.from,u.to," "," ");if(!Nae.test(p))return;f=d[0],h=n.doc.textBetween(f.pos,u.to,void 0," ")}if(f&&h){const p=h.split(Sae).filter(Boolean);if(p.length<=0)return!1;const g=p[p.length-1],x=f.pos+h.lastIndexOf(g);if(!g)return!1;const m=ej(g).map(y=>y.toObject(t.defaultProtocol));if(!Cae(m))return!1;m.filter(y=>y.isLink).map(y=>({...y,from:x+y.start+1,to:x+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{q1(y.from,y.to,n.doc).some(v=>v.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function Eae(t){return new $t({key:new nr("handleClickLink"),props:{handleClick:(e,r,n)=>{var a,i;if(n.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let l=null;if(n.target instanceof HTMLAnchorElement)l=n.target;else{let f=n.target;const h=[];for(;f.nodeName!=="DIV";)h.push(f),f=f.parentNode;l=h.find(p=>p.nodeName==="A")}if(!l)return o;const c=lT(e.state,t.type.name),u=(a=l?.href)!=null?a:c.href,d=(i=l?.target)!=null?i:c.target;l&&u&&(window.open(u,d),o=!0)}return o}}})}function Oae(t){return new $t({key:new nr("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:a}=t,{state:i}=e,{selection:o}=i,{empty:l}=o;if(l)return!1;let c="";n.content.forEach(d=>{c+=d.textContent});const u=LT(c,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===c);return!c||!u||a!==void 0&&!a(u.value)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function zs(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const a=typeof n=="string"?n:n.scheme;a&&r.push(a)}),!t||t.replace(Aae,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var zT=Es.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){iC(t);return}iC(t.scheme,t.optionalSlashes)})},onDestroy(){jae()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!zs(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const a=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(a)||!/\./.test(a))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!zs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!zs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",qt(this.options.HTMLAttributes,t),0]:["a",qt(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!zs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!zs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ji({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,a=LT(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!zs(o,r),protocols:r,defaultProtocol:n}));a.length&&a.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(kae({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:a=>!!zs(a,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(Eae({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(Oae({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),oC=zT,Pae=Object.defineProperty,Tae=(t,e)=>{for(var r in e)Pae(t,r,{get:e[r],enumerable:!0})},Iae="listItem",lC="textStyle",cC=/^\s*([-+*])\s$/,FT=Yr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",qt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Iae,this.editor.getAttributes(lC)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Go({find:cC,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Go({find:cC,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(lC),editor:this.editor})),[t]}}),BT=Yr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",qt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(a=>a.type==="paragraph"))r=e.parseChildren(t.tokens);else{const a=t.tokens[0];if(a&&a.type==="text"&&a.tokens&&a.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(a.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),l=e.parseChildren(o);r.push(...l)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>W1(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Mae={};Tae(Mae,{findListItemPos:()=>mu,getNextListDepth:()=>rj,handleBackspace:()=>Zv,handleDelete:()=>eb,hasListBefore:()=>qT,hasListItemAfter:()=>Rae,hasListItemBefore:()=>UT,listItemHasSubList:()=>VT,nextListIsDeeper:()=>HT,nextListIsHigher:()=>WT});var mu=(t,e)=>{const{$from:r}=e.selection,n=Kt(t,e.schema);let a=null,i=r.depth,o=r.pos,l=null;for(;i>0&&l===null;)a=r.node(i),a.type===n?l=i:(i-=1,o-=1);return l===null?null:{$pos:e.doc.resolve(o),depth:l}},rj=(t,e)=>{const r=mu(t,e);if(!r)return!1;const[,n]=wre(e,t,r.$pos.pos+4);return n},qT=(t,e,r)=>{const{$anchor:n}=t.selection,a=Math.max(0,n.pos-2),i=t.doc.resolve(a).node();return!(!i||!r.includes(i.type.name))},UT=(t,e)=>{var r;const{$anchor:n}=e.selection,a=e.doc.resolve(n.pos-2);return!(a.index()===0||((r=a.nodeBefore)==null?void 0:r.type.name)!==t)},VT=(t,e,r)=>{if(!r)return!1;const n=Kt(t,e.schema);let a=!1;return r.descendants(i=>{i.type===n&&(a=!0)}),a},Zv=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!xs(t.state,e)&&qT(t.state,e,r)){const{$anchor:l}=t.state.selection,c=t.state.doc.resolve(l.before()-1),u=[];c.node().descendants((h,p)=>{h.type.name===e&&u.push({node:h,pos:p})});const d=u.at(-1);if(!d)return!1;const f=t.state.doc.resolve(c.start()+d.pos+1);return t.chain().cut({from:l.start()-1,to:l.end()+1},f.end()).joinForward().run()}if(!xs(t.state,e)||!Cre(t.state))return!1;const n=mu(e,t.state);if(!n)return!1;const i=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=VT(e,t.state,i);return UT(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},HT=(t,e)=>{const r=rj(t,e),n=mu(t,e);return!n||!r?!1:r>n.depth},WT=(t,e)=>{const r=rj(t,e),n=mu(t,e);return!n||!r?!1:r<n.depth},eb=(t,e)=>{if(!xs(t.state,e)||!Are(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:a}=r;return!r.empty&&n.sameParent(a)?!1:HT(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():WT(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},Rae=(t,e)=>{var r;const{$anchor:n}=e.selection,a=e.doc.resolve(n.pos-n.parentOffset-2);return!(a.index()===a.parent.childCount-1||((r=a.nodeAfter)==null?void 0:r.type.name)!==t)},GT=gt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&eb(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&eb(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&Zv(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&Zv(t,r,n)&&(e=!0)}),e}}}}),uC=/^(\s*)(\d+)\.\s+(.*)$/,_ae=/^\s/;function Dae(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r],i=a.match(uC);if(!i)break;const[,o,l,c]=i,u=o.length;let d=c,f=r+1;const h=[a];for(;f<t.length;){const p=t[f];if(p.match(uC))break;if(p.trim()==="")h.push(p),d+=`
`,f+=1;else if(p.match(_ae))h.push(p),d+=`
${p.slice(u+2)}`,f+=1;else break}e.push({indent:u,number:parseInt(l,10),content:d.trim(),raw:h.join(`
`)}),n=f,r=f}return[e,n]}function YT(t,e,r){var n;const a=[];let i=0;for(;i<t.length;){const o=t[i];if(o.indent===e){const l=o.content.split(`
`),c=((n=l[0])==null?void 0:n.trim())||"",u=[];c&&u.push({type:"paragraph",raw:c,tokens:r.inlineTokens(c)});const d=l.slice(1).join(`
`).trim();if(d){const p=r.blockTokens(d);u.push(...p)}let f=i+1;const h=[];for(;f<t.length&&t[f].indent>e;)h.push(t[f]),f+=1;if(h.length>0){const p=Math.min(...h.map(x=>x.indent)),g=YT(h,p,r);u.push({type:"list",ordered:!0,start:h[0].number,items:g,raw:h.map(x=>x.raw).join(`
`)})}a.push({type:"list_item",raw:o.raw,tokens:u}),i=f}else i+=1}return a}function $ae(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(a=>{if(a.type==="paragraph"||a.type==="list"||a.type==="blockquote"||a.type==="code")n.push(...e.parseChildren([a]));else if(a.type==="text"&&a.tokens){const i=e.parseChildren([a]);n.push({type:"paragraph",content:i})}else{const i=e.parseChildren([a]);i.length>0&&n.push(...i)}}),{type:"listItem",content:n}})}var Lae="listItem",dC="textStyle",fC=/^(\d+)\.\s$/,KT=Yr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",qt(this.options.HTMLAttributes,r),0]:["ol",qt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?$ae(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e?.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const a=t.split(`
`),[i,o]=Dae(a);if(i.length===0)return;const l=YT(i,0,r);return l.length===0?void 0:{type:"list",ordered:!0,start:((n=i[0])==null?void 0:n.number)||1,items:l,raw:a.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Lae,this.editor.getAttributes(dC)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Go({find:fC,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Go({find:fC,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(dC)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),zae=/^\s*(\[([( |x])?\])\s$/,Fae=Yr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",qt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const a=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return W1(t,e,a)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const a=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),c=document.createElement("div"),u=f=>{var h,p;l.ariaLabel=((p=(h=this.options.a11y)==null?void 0:h.checkboxLabel)==null?void 0:p.call(h,f,l.checked))||`Task item checkbox for ${f.textContent||"empty task item"}`};u(t),i.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",f=>f.preventDefault()),l.addEventListener("change",f=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:h}=f.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const g=r();if(typeof g!="number")return!1;const x=p.doc.nodeAt(g);return p.setNodeMarkup(g,void 0,{...x?.attrs,checked:h}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,h)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([f,h])=>{a.setAttribute(f,h)}),a.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,i.append(l,o),a.append(i,c),Object.entries(e).forEach(([f,h])=>{a.setAttribute(f,h)});let d=new Set(Object.keys(e));return{dom:a,contentDOM:c,update:f=>{if(f.type!==this.type)return!1;a.dataset.checked=f.attrs.checked,l.checked=f.attrs.checked,u(f);const h=n.extensionManager.attributes,p=ru(f,h),g=new Set(Object.keys(p)),x=this.options.HTMLAttributes;return d.forEach(m=>{g.has(m)||(m in x?a.setAttribute(m,x[m]):a.removeAttribute(m))}),Object.entries(p).forEach(([m,y])=>{y==null?m in x?a.setAttribute(m,x[m]):a.removeAttribute(m):a.setAttribute(m,y)}),d=g,!0}}}},addInputRules(){return[Go({find:zae,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Bae=Yr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",qt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=i=>{const o=Uv(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,c)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:r.inlineTokens(l.mainContent),nestedTokens:c}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(i)},a=Uv(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:r.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:n},r);if(a)return{type:"taskList",raw:a.raw,items:a.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});gt.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(FT.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(BT.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(GT.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(KT.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Fae.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Bae.configure(this.options.taskList)),t}});var qae=Yr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",qt(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Uae=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Vae=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Hae=Es.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",qt(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Wo({find:Uae,type:this.type})]},addPasteRules(){return[ji({find:Vae,type:this.type})]}}),Wae=Yr.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),JT=Es.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",qt(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const a=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!a)return;const i=a[2].trim();return{type:"underline",raw:a[0],text:i,tokens:r.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),hC=JT;function Gae(t={}){return new $t({view(e){return new Yae(e,t)}})}class Yae{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(a=>{let i=o=>{this[a](o)};return e.dom.addEventListener(a,i),{name:a,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,a=this.editorView.dom,i=a.getBoundingClientRect(),o=i.width/a.offsetWidth,l=i.height/a.offsetHeight;if(r){let f=e.nodeBefore,h=e.nodeAfter;if(f||h){let p=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(p){let g=p.getBoundingClientRect(),x=f?g.bottom:g.top;f&&h&&(x=(x+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let m=this.width/2*l;n={left:g.left,right:g.right,top:x-m,bottom:x+m}}}}if(!n){let f=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;n={left:f.left-h,right:f.left+h,top:f.top,bottom:f.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let u,d;if(!c||c==document.body&&getComputedStyle(c).position=="static")u=-pageXOffset,d=-pageYOffset;else{let f=c.getBoundingClientRect(),h=f.width/c.offsetWidth,p=f.height/c.offsetHeight;u=f.left-c.scrollLeft*h,d=f.top-c.scrollTop*p}this.element.style.left=(n.left-u)/o+"px",this.element.style.top=(n.top-d)/l+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),a=n&&n.type.spec.disableDropCursor,i=typeof a=="function"?a(this.editorView,r,e):a;if(r&&!i){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=G8(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Ft extends Ye{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return Ft.valid(n)?new Ft(n):Ye.near(n)}content(){return ge.empty}eq(e){return e instanceof Ft&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ft(e.resolve(r.pos))}getBookmark(){return new nj(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!Kae(e)||!Jae(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let a=r.contentMatchAt(e.index()).defaultType;return a&&a.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&Ft.valid(e))return e;let a=e.pos,i=null;for(let o=e.depth;;o--){let l=e.node(o);if(r>0?e.indexAfter(o)<l.childCount:e.index(o)>0){i=l.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;a+=r;let c=e.doc.resolve(a);if(Ft.valid(c))return c}for(;;){let o=r>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!Te.isSelectable(i)){e=e.doc.resolve(a+i.nodeSize*r),n=!1;continue e}break}i=o,a+=r;let l=e.doc.resolve(a);if(Ft.valid(l))return l}return null}}}Ft.prototype.visible=!1;Ft.findFrom=Ft.findGapCursorFrom;Ye.jsonID("gapcursor",Ft);class nj{constructor(e){this.pos=e}map(e){return new nj(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return Ft.valid(r)?new Ft(r):Ye.near(r)}}function XT(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Kae(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let a=n.child(r-1);;a=a.lastChild){if(a.childCount==0&&!a.inlineContent||XT(a.type))return!0;if(a.inlineContent)return!1}}return!0}function Jae(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let a=n.child(r);;a=a.firstChild){if(a.childCount==0&&!a.inlineContent||XT(a.type))return!0;if(a.inlineContent)return!1}}return!0}function Xae(){return new $t({props:{decorations:tse,createSelectionBetween(t,e,r){return e.pos==r.pos&&Ft.valid(r)?new Ft(r):null},handleClick:Zae,handleKeyDown:Qae,handleDOMEvents:{beforeinput:ese}}})}const Qae=YP({ArrowLeft:Ku("horiz",-1),ArrowRight:Ku("horiz",1),ArrowUp:Ku("vert",-1),ArrowDown:Ku("vert",1)});function Ku(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,a,i){let o=n.selection,l=e>0?o.$to:o.$from,c=o.empty;if(o instanceof qe){if(!i.endOfTextblock(r)||l.depth==0)return!1;c=!1,l=n.doc.resolve(e>0?l.after():l.before())}let u=Ft.findGapCursorFrom(l,e,c);return u?(a&&a(n.tr.setSelection(new Ft(u))),!0):!1}}function Zae(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!Ft.valid(n))return!1;let a=t.posAtCoords({left:r.clientX,top:r.clientY});return a&&a.inside>-1&&Te.isSelectable(t.state.doc.nodeAt(a.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ft(n))),!0)}function ese(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ft))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let a=re.empty;for(let o=n.length-1;o>=0;o--)a=re.from(n[o].createAndFill(null,a));let i=t.state.tr.replace(r.pos,r.pos,new ge(a,0,0));return i.setSelection(qe.near(i.doc.resolve(r.pos+1))),t.dispatch(i),!1}function tse(t){if(!(t.selection instanceof Ft))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",_t.create(t.doc,[Lr.widget(t.selection.head,e,{key:"gapcursor"})])}var eh=200,hr=function(){};hr.prototype.append=function(e){return e.length?(e=hr.from(e),!this.length&&e||e.length<eh&&this.leafAppend(e)||this.length<eh&&e.leafPrepend(this)||this.appendInner(e)):this};hr.prototype.prepend=function(e){return e.length?hr.from(e).append(this):this};hr.prototype.appendInner=function(e){return new rse(this,e)};hr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?hr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};hr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};hr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};hr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var a=[];return this.forEach(function(i,o){return a.push(e(i,o))},r,n),a};hr.from=function(e){return e instanceof hr?e:e&&e.length?new QT(e):hr.empty};var QT=(function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(a,i){return a==0&&i==this.length?this:new e(this.values.slice(a,i))},e.prototype.getInner=function(a){return this.values[a]},e.prototype.forEachInner=function(a,i,o,l){for(var c=i;c<o;c++)if(a(this.values[c],l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(a,i,o,l){for(var c=i-1;c>=o;c--)if(a(this.values[c],l+c)===!1)return!1},e.prototype.leafAppend=function(a){if(this.length+a.length<=eh)return new e(this.values.concat(a.flatten()))},e.prototype.leafPrepend=function(a){if(this.length+a.length<=eh)return new e(a.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e})(hr);hr.empty=new QT([]);var rse=(function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,a,i,o){var l=this.left.length;if(a<l&&this.left.forEachInner(n,a,Math.min(i,l),o)===!1||i>l&&this.right.forEachInner(n,Math.max(a-l,0),Math.min(this.length,i)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(n,a,i,o){var l=this.left.length;if(a>l&&this.right.forEachInvertedInner(n,a-l,Math.max(i,l)-l,o+l)===!1||i<l&&this.left.forEachInvertedInner(n,Math.min(a,l),i,o)===!1)return!1},e.prototype.sliceInner=function(n,a){if(n==0&&a==this.length)return this;var i=this.left.length;return a<=i?this.left.slice(n,a):n>=i?this.right.slice(n-i,a-i):this.left.slice(n,i).append(this.right.slice(0,a-i))},e.prototype.leafAppend=function(n){var a=this.right.leafAppend(n);if(a)return new e(this.left,a)},e.prototype.leafPrepend=function(n){var a=this.left.leafPrepend(n);if(a)return new e(a,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e})(hr);const nse=500;class zn{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let a,i;r&&(a=this.remapping(n,this.items.length),i=a.maps.length);let o=e.tr,l,c,u=[],d=[];return this.items.forEach((f,h)=>{if(!f.step){a||(a=this.remapping(n,h+1),i=a.maps.length),i--,d.push(f);return}if(a){d.push(new Yn(f.map));let p=f.step.map(a.slice(i)),g;p&&o.maybeStep(p).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],u.push(new Yn(g,void 0,void 0,u.length+d.length))),i--,g&&a.appendMap(g,i)}else o.maybeStep(f.step);if(f.selection)return l=a?f.selection.map(a.slice(i)):f.selection,c=new zn(this.items.slice(0,n).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:l}}addTransform(e,r,n,a){let i=[],o=this.eventCount,l=this.items,c=!a&&l.length?l.get(l.length-1):null;for(let d=0;d<e.steps.length;d++){let f=e.steps[d].invert(e.docs[d]),h=new Yn(e.mapping.maps[d],f,r),p;(p=c&&c.merge(h))&&(h=p,d?i.pop():l=l.slice(0,l.length-1)),i.push(h),r&&(o++,r=void 0),a||(c=h)}let u=o-n.depth;return u>sse&&(l=ase(l,u),o-=u),new zn(l.append(i),o)}remapping(e,r){let n=new Jc;return this.items.forEach((a,i)=>{let o=a.mirrorOffset!=null&&i-a.mirrorOffset>=e?n.maps.length-a.mirrorOffset:void 0;n.appendMap(a.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new zn(this.items.append(e.map(r=>new Yn(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],a=Math.max(0,this.items.length-r),i=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(h=>{h.selection&&l--},a);let c=r;this.items.forEach(h=>{let p=i.getMirror(--c);if(p==null)return;o=Math.min(o,p);let g=i.maps[p];if(h.step){let x=e.steps[p].invert(e.docs[p]),m=h.selection&&h.selection.map(i.slice(c+1,p));m&&l++,n.push(new Yn(g,x,m))}else n.push(new Yn(g))},a);let u=[];for(let h=r;h<o;h++)u.push(new Yn(i.maps[h]));let d=this.items.slice(0,a).append(u).append(n),f=new zn(d,l);return f.emptyItemCount()>nse&&(f=f.compress(this.items.length-n.length)),f}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,a=[],i=0;return this.items.forEach((o,l)=>{if(l>=e)a.push(o),o.selection&&i++;else if(o.step){let c=o.step.map(r.slice(n)),u=c&&c.getMap();if(n--,u&&r.appendMap(u,n),c){let d=o.selection&&o.selection.map(r.slice(n));d&&i++;let f=new Yn(u.invert(),c,d),h,p=a.length-1;(h=a.length&&a[p].merge(f))?a[p]=h:a.push(f)}}else o.map&&n--},this.items.length,0),new zn(hr.from(a.reverse()),i)}}zn.empty=new zn(hr.empty,0);function ase(t,e){let r;return t.forEach((n,a)=>{if(n.selection&&e--==0)return r=a,!1}),t.slice(r)}class Yn{constructor(e,r,n,a){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=a}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Yn(r.getMap().invert(),r,this.selection)}}}class Qa{constructor(e,r,n,a,i){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=a,this.prevComposition=i}}const sse=20;function ise(t,e,r,n){let a=r.getMeta(li),i;if(a)return a.historyState;r.getMeta(cse)&&(t=new Qa(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(li))return o.getMeta(li).redo?new Qa(t.done.addTransform(r,void 0,n,sd(e)),t.undone,pC(r.mapping.maps),t.prevTime,t.prevComposition):new Qa(t.done,t.undone.addTransform(r,void 0,n,sd(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=r.getMeta("composition"),c=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(r.time||0)-n.newGroupDelay||!ose(r,t.prevRanges)),u=o?Z0(t.prevRanges,r.mapping):pC(r.mapping.maps);return new Qa(t.done.addTransform(r,c?e.selection.getBookmark():void 0,n,sd(e)),zn.empty,u,r.time,l??t.prevComposition)}else return(i=r.getMeta("rebased"))?new Qa(t.done.rebased(r,i),t.undone.rebased(r,i),Z0(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new Qa(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),Z0(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function ose(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,a)=>{for(let i=0;i<e.length;i+=2)n<=e[i+1]&&a>=e[i]&&(r=!0)}),r}function pC(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,a,i,o)=>e.push(i,o));return e}function Z0(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let a=e.map(t[n],1),i=e.map(t[n+1],-1);a<=i&&r.push(a,i)}return r}function lse(t,e,r){let n=sd(e),a=li.get(e).spec.config,i=(r?t.undone:t.done).popEvent(e,n);if(!i)return null;let o=i.selection.resolve(i.transform.doc),l=(r?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),a,n),c=new Qa(r?l:i.remaining,r?i.remaining:l,null,0,-1);return i.transform.setSelection(o).setMeta(li,{redo:r,historyState:c})}let ey=!1,mC=null;function sd(t){let e=t.plugins;if(mC!=e){ey=!1,mC=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){ey=!0;break}}return ey}const li=new nr("history"),cse=new nr("closeHistory");function use(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new $t({key:li,state:{init(){return new Qa(zn.empty,zn.empty,null,0,-1)},apply(e,r,n){return ise(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,a=n=="historyUndo"?eI:n=="historyRedo"?tI:null;return!a||!e.editable?!1:(r.preventDefault(),a(e.state,e.dispatch))}}}})}function ZT(t,e){return(r,n)=>{let a=li.getState(r);if(!a||(t?a.undone:a.done).eventCount==0)return!1;if(n){let i=lse(a,r,t);i&&n(e?i.scrollIntoView():i)}return!0}}const eI=ZT(!1,!0),tI=ZT(!0,!0);gt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new $t({key:new nr("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const a=this.options.limit;if(a==null||a===0){t=!0;return}const i=this.storage.characters({node:n.doc});if(i>a){const o=i-a,l=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${a} characters. Content was automatically trimmed.`);const u=n.tr.deleteRange(l,c);return t=!0,u}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const a=this.storage.characters({node:r.doc}),i=this.storage.characters({node:e.doc});if(i<=n||a>n&&i>n&&i<=a)return!0;if(a>n&&i>n&&i>a||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,c=i-n,u=l-c,d=l;return e.deleteRange(u,d),!(this.storage.characters({node:e.doc})>n)}})]}});var dse=gt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Gae(this.options)]}});gt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new $t({key:new nr("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:a}=e,i=[];if(!r||!n)return _t.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((c,u)=>{if(c.isText)return;if(!(a>=u&&a<=u+c.nodeSize-1))return!1;o+=1});let l=0;return t.descendants((c,u)=>{if(c.isText||!(a>=u&&a<=u+c.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";i.push(Lr.node(u,u+c.nodeSize,{class:this.options.className}))}),_t.create(t,i)}}})]}});var fse=gt.create({name:"gapCursor",addProseMirrorPlugins(){return[Xae()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=pt(Ce(t,"allowGapCursor",r)))!=null?e:null}}});gt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new $t({key:new nr("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,a=[];if(!r)return null;const i=this.editor.isEmpty;return t.descendants((o,l)=>{const c=n>=l&&n<=l+o.nodeSize,u=!o.isLeaf&&rp(o);if((c||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];i&&d.push(this.options.emptyEditorClass);const f=Lr.node(l,l+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:c}):this.options.placeholder});a.push(f)}return this.options.includeChildren}),_t.create(t,a)}}})]}});gt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new $t({key:new nr("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||uT(r.selection)||t.view.dragging?null:_t.create(r.doc,[Lr.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function gC({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var hse=gt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new nr(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,a])=>a).filter(a=>(this.options.notAfter||[]).concat(r).includes(a.name));return[new $t({key:e,appendTransaction:(a,i,o)=>{const{doc:l,tr:c,schema:u}=o,d=e.getState(o),f=l.content.size,h=u.nodes[r];if(d)return c.insert(f,h.create())},state:{init:(a,i)=>{const o=i.tr.doc.lastChild;return!gC({node:o,types:n})},apply:(a,i)=>{if(!a.docChanged||a.getMeta("__uniqueIDTransaction"))return i;const o=a.doc.lastChild;return!gC({node:o,types:n})}}})]}}),pse=gt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>eI(t,e),redo:()=>({state:t,dispatch:e})=>tI(t,e)}},addProseMirrorPlugins(){return[use(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),mse=gt.create({name:"starterKit",addExtensions(){var t,e,r,n;const a=[];return this.options.bold!==!1&&a.push(Vne.configure(this.options.bold)),this.options.blockquote!==!1&&a.push(zne.configure(this.options.blockquote)),this.options.bulletList!==!1&&a.push(FT.configure(this.options.bulletList)),this.options.code!==!1&&a.push(Gne.configure(this.options.code)),this.options.codeBlock!==!1&&a.push(Jne.configure(this.options.codeBlock)),this.options.document!==!1&&a.push(Xne.configure(this.options.document)),this.options.dropcursor!==!1&&a.push(dse.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&a.push(fse.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&a.push(Qne.configure(this.options.hardBreak)),this.options.heading!==!1&&a.push(Zne.configure(this.options.heading)),this.options.undoRedo!==!1&&a.push(pse.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&a.push(eae.configure(this.options.horizontalRule)),this.options.italic!==!1&&a.push(sae.configure(this.options.italic)),this.options.listItem!==!1&&a.push(BT.configure(this.options.listItem)),this.options.listKeymap!==!1&&a.push(GT.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&a.push(zT.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&a.push(KT.configure(this.options.orderedList)),this.options.paragraph!==!1&&a.push(qae.configure(this.options.paragraph)),this.options.strike!==!1&&a.push(Hae.configure(this.options.strike)),this.options.text!==!1&&a.push(Wae.configure(this.options.text)),this.options.underline!==!1&&a.push(JT.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&a.push(hse.configure((n=this.options)==null?void 0:n.trailingNode)),a}}),xC=mse,gse=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,xse=Yr.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",qt(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,r,n,a,i,o;const l=(r=(e=t.attrs)==null?void 0:e.src)!=null?r:"",c=(a=(n=t.attrs)==null?void 0:n.alt)!=null?a:"",u=(o=(i=t.attrs)==null?void 0:i.title)!=null?o:"";return u?`![${c}](${l} "${u}")`:`![${c}](${l})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:t,minWidth:e,minHeight:r,alwaysPreserveAspectRatio:n}=this.options.resize;return({node:a,getPos:i,HTMLAttributes:o,editor:l})=>{const c=document.createElement("img");Object.entries(o).forEach(([f,h])=>{if(h!=null)switch(f){case"width":case"height":break;default:c.setAttribute(f,h);break}}),c.src=o.src;const u=new fne({element:c,editor:l,node:a,getPos:i,onResize:(f,h)=>{c.style.width=`${f}px`,c.style.height=`${h}px`},onCommit:(f,h)=>{const p=i();p!==void 0&&this.editor.chain().setNodeSelection(p).updateAttributes(this.name,{width:f,height:h}).run()},onUpdate:(f,h,p)=>f.type===a.type,options:{directions:t,min:{width:e,height:r},preserveAspectRatio:n===!0}}),d=u.dom;return d.style.visibility="hidden",d.style.pointerEvents="none",c.onload=()=>{d.style.visibility="",d.style.pointerEvents=""},u}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[kT({find:gse,type:this.type,getAttributes:t=>{const[,,e,r,n]=t;return{src:r,alt:e,title:n}}})]}}),yC=xse,yse=gt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(r=>e.updateAttributes(r,{textAlign:t})).some(r=>r):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:t=>({editor:e,commands:r})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?r.unsetTextAlign():r.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),vC=yse,vse=20,rI=(t,e=0)=>{const r=[];return!t.children.length||e>vse||Array.from(t.children).forEach(n=>{n.tagName==="SPAN"?r.push(n):n.children.length&&r.push(...rI(n,e+1))}),r},bse=t=>{if(!t.children.length)return;const e=rI(t);e&&e.forEach(r=>{var n,a;const i=r.getAttribute("style"),o=(a=(n=r.parentElement)==null?void 0:n.closest("span"))==null?void 0:a.getAttribute("style");r.setAttribute("style",`${o};${i}`)})},tb=Es.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&bse(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(r,n)=>{if(r.isTextblock)return!0;r.marks.filter(a=>a.type===this.type).some(a=>Object.values(a.attrs).some(i=>!!i))||t.removeMark(n,n+r.nodeSize,this.type)}),!0}}}}),jse=gt.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const r=t.getAttribute("style");if(r){const n=r.split(";").map(a=>a.trim()).filter(Boolean);for(let a=n.length-1;a>=0;a-=1){const i=n[a].split(":");if(i.length>=2){const o=i[0].trim().toLowerCase(),l=i.slice(1).join(":").trim();if(o==="background-color")return l.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),rb=gt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const r=t.getAttribute("style");if(r){const n=r.split(";").map(a=>a.trim()).filter(Boolean);for(let a=n.length-1;a>=0;a-=1){const i=n[a].split(":");if(i.length>=2){const o=i[0].trim().toLowerCase(),l=i.slice(1).join(":").trim();if(o==="color")return l.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),wse=gt.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),Sse=gt.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),Nse=gt.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});gt.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(jse.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(rb.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(wse.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(Sse.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(Nse.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(tb.configure(this.options.textStyle)),t}});const{TextArea:bC}=z,{Option:jC}=q,wC=()=>{const{t,language:e}=je(),r=nt(),{id:n}=ua(),[a]=E.useForm(),[i,o]=A.useState(!1),[l,c]=A.useState(!1),[u,d]=A.useState(""),[f,h]=A.useState(""),[p,g]=A.useState(null),[x,m]=A.useState([]),[y,v]=A.useState(!1),w=!!n;A.useEffect(()=>{w&&N()},[n]);const N=async()=>{try{o(!0);const R=(await cr.getArticleById(n)).article;if(R&&(a.setFieldsValue({title:R.title,titleAr:R.titleAr,excerpt:R.excerpt,excerptAr:R.excerptAr,category:R.category,status:R.status,tags:R.tags?typeof R.tags=="string"?JSON.parse(R.tags).join(", "):R.tags.join(", "):""}),d(R.content||""),h(R.contentAr||""),g(R.featuredImage),R.images)){const L=typeof R.images=="string"?JSON.parse(R.images):R.images;m(L||[])}}catch{_.error(e==="ar"?"فشل تحميل المقال":"Failed to load article")}finally{o(!1)}},b=async(T,R=!1)=>{try{v(!0);const L=new FormData;L.append("file",T),L.append("ownerType","ARTICLE"),w&&L.append("ownerId",n);const B=ci("accessToken"),H=await fetch("http://localhost:5000/api/files/upload",{method:"POST",headers:{Authorization:`Bearer ${B}`},body:L});if(!H.ok)throw new Error("Upload failed");const te=(await H.json()).file.fileUrl;return R?(g(te),a.setFieldValue("featuredImage",te)):m(K=>[...K,te]),_.success(e==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully"),te}catch{return _.error(e==="ar"?"فشل رفع الصورة":"Failed to upload image"),null}finally{v(!1)}},S=T=>{m(R=>R.filter((L,B)=>B!==T))},j=()=>{g(null),a.setFieldValue("featuredImage",null)},C=ZA({extensions:[xC.configure({link:!1,underline:!1}),yC.configure({inline:!0,allowBase64:!0}),oC.configure({openOnClick:!1}),vC.configure({types:["heading","paragraph"]}),hC,tb,rb],content:u||"",onUpdate:({editor:T})=>{const R=T.getHTML();R!==u&&d(R)},editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none min-h-[400px] p-4","data-placeholder":e==="ar"?"اكتب محتوى المقال بالإنجليزية...":"Write article content in English..."}}}),k=ZA({extensions:[xC.configure({link:!1,underline:!1}),yC.configure({inline:!0,allowBase64:!0}),oC.configure({openOnClick:!1}),vC.configure({types:["heading","paragraph"],defaultAlignment:"right"}),hC,tb,rb],content:f||"",onUpdate:({editor:T})=>{const R=T.getHTML();R!==f&&h(R)},editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none min-h-[400px] p-4",dir:"rtl","data-placeholder":e==="ar"?"اكتب محتوى المقال بالعربية...":"Write article content in Arabic..."}}});A.useEffect(()=>{if(C&&u!==void 0){const T=C.getHTML();u!==T&&u!=="<p></p>"&&C.commands.setContent(u||"",!1)}},[u,C]),A.useEffect(()=>{if(k&&f!==void 0){const T=k.getHTML();f!==T&&f!=="<p></p>"&&k.commands.setContent(f||"",!1)}},[f,k]);const O=async T=>{try{c(!0);const R=T.tags?T.tags.split(",").map(Q=>Q.trim()).filter(Boolean):[],L=C?.getHTML()||u||"",B=k?.getHTML()||f||"",H={...T,content:L,contentAr:B,featuredImage:p||null,images:x.length>0?JSON.stringify(x):null,tags:R};if((H.images==="[]"||H.images==="")&&(H.images=null),console.log("Saving article with data:",{...H,content:L.substring(0,50)+"..."}),w){const Q=await cr.updateArticle(n,H);console.log("Article updated:",Q),_.success(e==="ar"?"تم تحديث المقال بنجاح":"Article updated successfully"),setTimeout(()=>{r("/admin/articles")},1e3)}else{const Q=await cr.createArticle(H);console.log("Article created:",Q),_.success(e==="ar"?"تم إنشاء المقال بنجاح":"Article created successfully"),r("/admin/articles")}}catch(R){console.error("Error saving article:",R),_.error(R.message||(e==="ar"?"فشل حفظ المقال":"Failed to save article"))}finally{c(!1)}},I=({editor:T,isArabic:R=!1})=>T?s.jsxs("div",{className:"border-b border-gray-200 p-2 flex flex-wrap gap-2 bg-gray-50 rounded-t-lg",children:[s.jsxs("div",{className:"flex gap-1 border-r pr-2 mr-2",children:[s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleBold().run(),className:`px-2 py-1 rounded ${T.isActive("bold")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Bold",children:s.jsx("strong",{children:"B"})}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleItalic().run(),className:`px-2 py-1 rounded ${T.isActive("italic")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Italic",children:s.jsx("em",{children:"I"})}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleUnderline().run(),className:`px-2 py-1 rounded ${T.isActive("underline")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Underline",children:s.jsx("u",{children:"U"})}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleStrike().run(),className:`px-2 py-1 rounded ${T.isActive("strike")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Strike",children:s.jsx("s",{children:"S"})})]}),s.jsxs("div",{className:"flex gap-1 border-r pr-2 mr-2",children:[s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleHeading({level:1}).run(),className:`px-2 py-1 rounded ${T.isActive("heading",{level:1})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Heading 1",children:"H1"}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleHeading({level:2}).run(),className:`px-2 py-1 rounded ${T.isActive("heading",{level:2})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Heading 2",children:"H2"}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleHeading({level:3}).run(),className:`px-2 py-1 rounded ${T.isActive("heading",{level:3})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Heading 3",children:"H3"})]}),s.jsxs("div",{className:"flex gap-1 border-r pr-2 mr-2",children:[s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleBulletList().run(),className:`px-2 py-1 rounded ${T.isActive("bulletList")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Bullet List",children:"•"}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleOrderedList().run(),className:`px-2 py-1 rounded ${T.isActive("orderedList")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Ordered List",children:"1."}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleBlockquote().run(),className:`px-2 py-1 rounded ${T.isActive("blockquote")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Quote",children:'"'}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleCodeBlock().run(),className:`px-2 py-1 rounded ${T.isActive("codeBlock")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Code Block",children:"</>"})]}),s.jsxs("div",{className:"flex gap-1 border-r pr-2 mr-2",children:[s.jsx("button",{type:"button",onClick:()=>T.chain().focus().setTextAlign("left").run(),className:`px-2 py-1 rounded ${T.isActive({textAlign:"left"})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Align Left",children:"⬅"}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().setTextAlign("center").run(),className:`px-2 py-1 rounded ${T.isActive({textAlign:"center"})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Align Center",children:"⬌"}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().setTextAlign("right").run(),className:`px-2 py-1 rounded ${T.isActive({textAlign:"right"})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Align Right",children:"➡"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{type:"button",onClick:()=>{const L=document.createElement("input");L.setAttribute("type","file"),L.setAttribute("accept","image/*"),L.click(),L.onchange=async()=>{const B=L.files[0];if(B){const H=await b(B,!1);H&&T.chain().focus().setImage({src:H}).run()}}},className:"px-2 py-1 rounded bg-white hover:bg-gray-100",title:"Insert Image",children:"🖼"}),s.jsx("button",{type:"button",onClick:()=>{const L=window.prompt("Enter URL:");L&&T.chain().focus().setLink({href:L}).run()},className:`px-2 py-1 rounded ${T.isActive("link")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Insert Link",children:"🔗"}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().unsetLink().run(),className:"px-2 py-1 rounded bg-white hover:bg-gray-100",title:"Remove Link",disabled:!T.isActive("link"),children:"🔗❌"})]})]}):null,M=[{key:"en",label:e==="ar"?"المحتوى الإنجليزي":"English Content",children:s.jsx("div",{className:"editor-tab",children:s.jsx(E.Item,{label:e==="ar"?"المحتوى (إنجليزي)":"Content (English)",children:s.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[s.jsx(I,{editor:C}),s.jsx(QA,{editor:C})]})})})},{key:"ar",label:e==="ar"?"المحتوى العربي":"Arabic Content",children:s.jsx("div",{className:"editor-tab",children:s.jsx(E.Item,{label:e==="ar"?"المحتوى (عربي)":"Content (Arabic)",children:s.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[s.jsx(I,{editor:k,isArabic:!0}),s.jsx(QA,{editor:k})]})})})}];return s.jsxs("div",{className:"article-editor-page",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx(P,{icon:s.jsx(Da,{}),onClick:()=>r("/admin/articles"),className:"mb-4",children:e==="ar"?"العودة إلى القائمة":"Back to List"}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:w?e==="ar"?"تعديل المقال":"Edit Article":e==="ar"?"إضافة مقال جديد":"Add New Article"})]}),s.jsxs(E,{form:a,layout:"vertical",onFinish:O,initialValues:{status:"DRAFT"},children:[s.jsxs(ie,{gutter:24,children:[s.jsx($,{xs:24,lg:16,children:s.jsxs(V,{className:"mb-6",children:[s.jsxs(ie,{gutter:16,children:[s.jsx($,{span:12,children:s.jsx(E.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0,message:e==="ar"?"يرجى إدخال العنوان":"Please enter title"}],children:s.jsx(z,{size:"large",placeholder:e==="ar"?"عنوان المقال بالإنجليزية":"Article title in English"})})}),s.jsx($,{span:12,children:s.jsx(E.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:s.jsx(z,{size:"large",placeholder:e==="ar"?"عنوان المقال بالعربية":"Article title in Arabic"})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{span:12,children:s.jsx(E.Item,{name:"excerpt",label:e==="ar"?"الملخص (إنجليزي)":"Excerpt (English)",children:s.jsx(bC,{rows:3,placeholder:e==="ar"?"ملخص المقال بالإنجليزية":"Article excerpt in English"})})}),s.jsx($,{span:12,children:s.jsx(E.Item,{name:"excerptAr",label:e==="ar"?"الملخص (عربي)":"Excerpt (Arabic)",children:s.jsx(bC,{rows:3,placeholder:e==="ar"?"ملخص المقال بالعربية":"Article excerpt in Arabic"})})})]}),s.jsx(Mt,{children:e==="ar"?"محرر المحتوى":"Content Editor"}),s.jsx(vs,{items:M,defaultActiveKey:e==="ar"?"ar":"en",destroyOnHidden:!1})]})}),s.jsxs($,{xs:24,lg:8,children:[s.jsxs(V,{title:e==="ar"?"الإعدادات":"Settings",className:"mb-6",children:[s.jsx(E.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:s.jsxs(q,{size:"large",children:[s.jsx(jC,{value:"DRAFT",children:e==="ar"?"مسودة":"Draft"}),s.jsx(jC,{value:"PUBLISHED",children:e==="ar"?"منشور":"Published"})]})}),s.jsx(E.Item,{name:"category",label:e==="ar"?"الفئة":"Category",children:s.jsx(z,{placeholder:e==="ar"?"الفئة":"Category"})}),s.jsx(E.Item,{name:"tags",label:e==="ar"?"العلامات":"Tags",children:s.jsx(z,{placeholder:e==="ar"?"علامات مفصولة بفواصل":"Tags separated by commas"})})]}),s.jsx(V,{title:e==="ar"?"الصورة الرئيسية":"Featured Image",className:"mb-6",children:p?s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Ar,{src:p,alt:"Featured",className:"w-full rounded-lg",preview:!1}),s.jsx(P,{danger:!0,icon:s.jsx(un,{}),onClick:j,className:"mt-2 w-full",children:e==="ar"?"حذف الصورة":"Remove Image"})]}):s.jsx(Pt,{accept:"image/*",showUploadList:!1,beforeUpload:T=>(b(T,!0),!1),disabled:y,children:s.jsx(P,{icon:s.jsx(ir,{}),loading:y,className:"w-full",size:"large",children:e==="ar"?"رفع صورة رئيسية":"Upload Featured Image"})})}),s.jsx(V,{title:e==="ar"?"معرض الصور":"Image Gallery",children:s.jsxs("div",{className:"space-y-4",children:[x.map((T,R)=>s.jsxs("div",{className:"relative",children:[s.jsx(Ar,{src:T,alt:`Gallery ${R+1}`,className:"w-full rounded-lg mb-2",preview:!1}),s.jsx(P,{danger:!0,size:"small",icon:s.jsx(un,{}),onClick:()=>S(R),className:"w-full",children:e==="ar"?"حذف":"Remove"})]},R)),s.jsx(Pt,{accept:"image/*",showUploadList:!1,beforeUpload:T=>(b(T,!1),!1),disabled:y,children:s.jsx(P,{icon:s.jsx(br,{}),loading:y,className:"w-full",block:!0,children:e==="ar"?"إضافة صورة":"Add Image"})})]})})]})]}),s.jsx(V,{className:"mt-6",children:s.jsxs(fe,{children:[s.jsx(P,{type:"primary",icon:s.jsx(wa,{}),htmlType:"submit",loading:l,size:"large",className:"bg-olive-green-600",children:e==="ar"?"حفظ المقال":"Save Article"}),s.jsx(P,{icon:s.jsx(ur,{}),onClick:()=>{_.info(e==="ar"?"معاينة المقال":"Preview article")},size:"large",children:e==="ar"?"معاينة":"Preview"})]})})]})]})},{TextArea:Ase}=z,{Text:Li}=su,SC=()=>{const{language:t}=je(),{user:e}=pr(),{sessionId:r}=ua();nt();const[n,a]=A.useState([]),[i,o]=A.useState(null),[l,c]=A.useState([]),[u,d]=A.useState(""),[f,h]=A.useState(!1),[p,g]=A.useState(!1),[x,m]=A.useState(null),[y,v]=A.useState(!1),[w,N]=A.useState([]),[b,S]=A.useState(!1),[j,C]=A.useState(!1),[k,O]=A.useState([]),[I,M]=A.useState(!1),T=A.useRef(null);A.useRef(null);const{isRecording:R,recordingTime:L,audioBlob:B,audioUrl:H,startRecording:Q,stopRecording:te,cancelRecording:K,formatTime:ne}=hb();A.useEffect(()=>{(e?.role==="ADMIN"||e?.role==="SUPER_ADMIN")&&(ue(),W())},[e]),A.useEffect(()=>{if(r&&n.length>0){const F=n.find(ce=>ce.sessionId===r);F&&(o(F),oe(F.sessionId))}},[r,n]);const W=async()=>{try{S(!0);const F=await Je.getAllUsers();N(F.users||[])}catch(F){console.error("Error fetching users:",F)}finally{S(!1)}};A.useEffect(()=>{if(i){oe(i.sessionId);const F=setInterval(()=>{oe(i.sessionId)},5e3);return()=>clearInterval(F)}},[i]),A.useEffect(()=>{ee()},[l]);const ee=()=>{T.current?.scrollIntoView({behavior:"smooth"})},ue=async()=>{try{h(!0);const F=await It.getConversations();a(F.conversations||[])}catch(F){console.error("Error fetching conversations:",F),_.error(F.message||(t==="ar"?"فشل تحميل المحادثات":"Failed to load conversations"))}finally{h(!1)}},oe=async F=>{if(F)try{const ce=await It.getMessages(F);if(c(ce.messages||[]),ce.messages&&ce.messages.length>0)try{await It.markAsRead(F)}catch(me){console.error("Error marking messages as read:",me)}}catch(ce){console.error("Error fetching messages:",ce),_.error(ce.message||(t==="ar"?"فشل تحميل الرسائل":"Failed to load messages"))}},_e=async F=>{try{h(!0);const ce=await Je.createDirectSession(F,"chat"),me={id:ce.session.id,sessionId:ce.session.id,bookingId:null,name:w.find(Ze=>Ze.id===F)?.email||"User",clientName:null,consultantName:null,clientId:F,consultantUserId:null,avatar:w.find(Ze=>Ze.id===F)?.avatar,lastMessage:"",lastMessageTime:new Date,status:"IN_PROGRESS",unreadCount:0,isDirect:!0};o(me),C(!1),ue(),_.success(t==="ar"?"تم بدء المحادثة":"Conversation started")}catch(ce){console.error("Error starting conversation:",ce),_.error(ce.message||(t==="ar"?"فشل بدء المحادثة":"Failed to start conversation"))}finally{h(!1)}},Ee=async F=>{try{const ce=new FormData;ce.append("file",F),ce.append("ownerType","MESSAGE"),ce.append("ownerId",i?.sessionId||"");const me=await Hr.uploadFile(ce),Ze=[...k,me.file.fileUrl];O(Ze),_.success(t==="ar"?"تم رفع الملف":"File uploaded")}catch(ce){console.error("Error uploading file:",ce),_.error(ce.message||(t==="ar"?"فشل رفع الملف":"Failed to upload file"))}return!1},be=async()=>{R?te():await Q()},X=async()=>{if(!(!B||!i))try{g(!0);const F=new File([B],`voice-${Date.now()}.webm`,{type:"audio/webm"}),ce=new FormData;ce.append("file",F),ce.append("ownerType","MESSAGE"),ce.append("ownerId",i.sessionId);const Ze=(await Hr.uploadFile(ce)).file.fileUrl;let xt=null;const yt=x||e?.id;(i.isDirect||!i.bookingId)&&(i.clientId&&i.clientId!==yt?xt=i.clientId:i.consultantUserId&&i.consultantUserId!==yt&&(xt=i.consultantUserId)),await It.sendMessageAsAdmin(i.sessionId,{content:t==="ar"?"رسالة صوتية":"Voice message",messageType:"audio",attachments:[Ze],senderId:yt,...xt&&{receiverId:xt}}),K(),await oe(i.sessionId),_.success(t==="ar"?"تم إرسال الرسالة الصوتية":"Voice message sent")}catch(F){console.error("Error sending voice message:",F),_.error(F.message||(t==="ar"?"فشل إرسال الرسالة الصوتية":"Failed to send voice message"))}finally{g(!1)}},xe=async()=>{if(!(!u.trim()&&k.length===0||!i))try{g(!0);let F="text";if(k.length>0){const Ze=k.some(wt=>/\.(jpg|jpeg|png|gif|webp)$/i.test(wt)),xt=k.some(wt=>/\.(mp3|wav|ogg|m4a|webm)$/i.test(wt)),yt=k.some(wt=>/\.(mp4|webm|ogg)$/i.test(wt));Ze?F="image":xt?F="audio":yt?F="video":F="file"}const ce=x||e?.id;let me=null;(i.isDirect||!i.bookingId)&&(i.clientId&&i.clientId!==ce?me=i.clientId:i.consultantUserId&&i.consultantUserId!==ce&&(me=i.consultantUserId)),await It.sendMessageAsAdmin(i.sessionId,{content:u||(k.length>0?"📎 ملف مرفق":""),messageType:F,attachments:k.length>0?k:[],senderId:ce,...me&&{receiverId:me}}),d(""),O([]),await oe(i.sessionId),_.success(t==="ar"?"تم إرسال الرسالة":"Message sent")}catch(F){console.error("Error sending message:",F),_.error(F.message||(t==="ar"?"فشل إرسال الرسالة":"Failed to send message"))}finally{g(!1)}},Ae=async F=>{try{await Je.deleteSession(F),_.success(t==="ar"?"تم حذف المحادثة":"Session deleted"),i?.sessionId===F&&(o(null),c([])),ue()}catch(ce){console.error("Error deleting session:",ce),_.error(ce.message||(t==="ar"?"فشل حذف المحادثة":"Failed to delete session"))}},Z=async F=>{try{await Je.stopSession(F),_.success(t==="ar"?"تم إيقاف المحادثة":"Session stopped"),ue(),i?.sessionId===F&&oe(F)}catch(ce){console.error("Error stopping session:",ce),_.error(ce.message||(t==="ar"?"فشل إيقاف المحادثة":"Failed to stop session"))}},ot=F=>F.clientName&&F.consultantName?`${F.clientName} ↔ ${F.consultantName}`:F.name||(t==="ar"?"محادثة":"Conversation");return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex h-[calc(100vh-64px)] dashboard-bg relative",style:{margin:"-12px -12px 0 -12px",width:"calc(100% + 24px)"},children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/20 to-turquoise-100/20 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/20 to-olive-green-100/20 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"w-1/3 min-w-[300px] max-w-[400px] glass-card border-r border-gray-200/50 flex flex-col shadow-professional-lg relative z-10",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200/50 backdrop-blur-sm flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ut,{className:"text-olive-green-600"}),s.jsx("span",{className:"font-semibold text-gray-900",children:t==="ar"?"المحادثات":"Conversations"})]}),s.jsxs(fe,{children:[s.jsx(P,{type:"text",size:"small",icon:s.jsx(ke,{}),onClick:()=>C(!0),className:"text-gray-600 hover:text-gray-900",children:t==="ar"?"جديد":"New"}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Ut,{}),onClick:()=>v(!0),className:"text-gray-600 hover:text-gray-900",children:t==="ar"?"إرسال كـ":"Send As"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:f&&n.length===0?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(et,{size:"small"})}):n.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[s.jsx(Ut,{className:"text-4xl text-gray-300 mb-4"}),s.jsx(Li,{type:"secondary",children:t==="ar"?"لا توجد محادثات":"No conversations"})]}):s.jsx(ft,{className:"px-0",dataSource:n,renderItem:F=>{const ce=i?.sessionId===F.sessionId;return s.jsxs(ft.Item,{className:`cursor-pointer px-4 py-3 border-b border-gray-100  ${ce?"bg-olive-green-50 border-l-4 border-l-olive-green-600":"hover:bg-gray-50"}`,onClick:()=>{o(F),oe(F.sessionId)},children:[s.jsx(ft.Item.Meta,{avatar:s.jsx(Ia,{count:F.unreadCount>0?F.unreadCount:0,size:"small",offset:[-5,5],showZero:!1,children:s.jsx(at,{icon:s.jsx(ke,{}),size:48,className:"shadow-sm"})}),title:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:`font-semibold text-sm ${ce?"text-olive-green-700":"text-gray-900"}`,children:ot(F)}),F.status&&s.jsx(le,{color:F.status==="ACTIVE"||F.status==="IN_PROGRESS"?"green":F.status==="COMPLETED"?"blue":"default",size:"small",className:"text-xs",children:F.status})]}),description:s.jsxs("div",{className:"mt-1",children:[s.jsx("p",{className:"text-xs text-gray-600 truncate mb-1",children:F.lastMessage||(t==="ar"?"لا توجد رسائل":"No messages")}),s.jsx("p",{className:"text-xs text-gray-400",children:F.lastMessageTime?de(F.lastMessageTime).fromNow():""})]})}),s.jsxs(fe,{className:"ml-2",children:[s.jsx(Ma,{title:t==="ar"?"إيقاف المحادثة؟":"Stop session?",onConfirm:()=>Z(F.sessionId),okText:t==="ar"?"نعم":"Yes",cancelText:t==="ar"?"لا":"No",children:s.jsx(P,{type:"text",icon:s.jsx(fo,{}),danger:!0,size:"small",onClick:me=>me.stopPropagation()})}),s.jsx(Ma,{title:t==="ar"?"حذف المحادثة؟":"Delete session?",description:t==="ar"?"هل أنت متأكد من حذف هذه المحادثة؟":"Are you sure you want to delete this conversation?",onConfirm:()=>Ae(F.sessionId),okText:t==="ar"?"نعم":"Yes",cancelText:t==="ar"?"لا":"No",okButtonProps:{danger:!0},children:s.jsx(P,{type:"text",icon:s.jsx(un,{}),danger:!0,size:"small",onClick:me=>me.stopPropagation()})})]})]})}})})]}),s.jsx("div",{className:"flex-1 flex flex-col glass-card overflow-hidden shadow-professional-lg relative z-10",children:i?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"border-b border-gray-200/50 px-4 py-3 flex items-center justify-between shadow-professional z-10 sticky top-0 flex-shrink-0 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(at,{icon:s.jsx(ke,{}),size:40,className:"flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-base font-semibold text-gray-900 truncate",children:ot(i)}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:i?.status==="ACTIVE"||i?.status==="IN_PROGRESS"?t==="ar"?"نشط":"Active":i?.status==="STOPPED"?t==="ar"?"متوقف":"Stopped":i?.status==="COMPLETED"?t==="ar"?"مكتمل":"Completed":t==="ar"?"مجدول":"Scheduled"})]})]}),s.jsxs(fe,{className:"flex-shrink-0",children:[x&&s.jsx(le,{color:"orange",className:"text-xs",children:t==="ar"?"إرسال كـ مستخدم آخر":"Sending as user"}),s.jsx(P,{type:"text",icon:s.jsx(Ut,{}),className:"text-gray-600 hover:text-gray-900",onClick:()=>v(!0),title:t==="ar"?"إرسال كـ":"Send As"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 min-h-0",style:{scrollBehavior:"smooth",backgroundImage:"radial-gradient(circle, rgba(122, 140, 102, 0.1) 1px, transparent 1px)",backgroundSize:"20px 20px"},children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-3",children:[f&&l.length===0?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(et,{size:"large"})}):l.length===0?s.jsxs("div",{className:"text-center text-gray-400 py-12",children:[s.jsx("div",{className:"text-4xl mb-2",children:"💬"}),s.jsx("p",{children:t==="ar"?"لا توجد رسائل بعد":"No messages yet"})]}):l.map((F,ce)=>{const me=F.senderId===(x||e?.id),Ze=F.attachments?typeof F.attachments=="string"?JSON.parse(F.attachments):F.attachments:[],xt=ce>0?l[ce-1]:null,yt=!xt||xt.senderId!==F.senderId,wt=!xt||de(F.createdAt).diff(de(xt.createdAt),"minute")>5;return s.jsxs("div",{className:`flex ${me?"justify-end":"justify-start"} items-end gap-2 ${wt?"mt-4":""}`,children:[!me&&s.jsx(at,{src:F.sender?.avatar,icon:s.jsx(ke,{}),size:32,className:"flex-shrink-0"}),s.jsxs("div",{className:`flex flex-col ${me?"items-end":"items-start"} max-w-[70%] md:max-w-[60%]`,children:[wt&&s.jsx("div",{className:"text-center w-full mb-2",children:s.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:de(F.createdAt).format("MMM DD, YYYY HH:mm")})}),!me&&yt&&s.jsx(Li,{type:"secondary",className:"text-xs mb-1 px-1",children:F.sender?.email||"Unknown"}),s.jsxs("div",{className:`rounded-2xl px-4 py-2 ${me?"bg-[#dcf8c6] text-gray-900 rounded-tr-sm":"bg-white text-gray-900 rounded-tl-sm shadow-sm"}`,children:[Ze.length>0&&s.jsx("div",{className:"mb-2 space-y-2",children:Ze.map((De,ht)=>{const dn=De.startsWith("data:image/")||De.startsWith("data:video/")||De.startsWith("data:audio/"),Ha=F.messageType==="image"||/\.(jpg|jpeg|png|gif|webp)$/i.test(De)||dn&&De.startsWith("data:image/"),Kr=F.messageType==="audio"||/\.(mp3|wav|ogg|m4a|webm)$/i.test(De)||dn&&De.startsWith("data:audio/"),al=F.messageType==="video"||/\.(mp4|webm)$/i.test(De)&&F.messageType!=="audio"||dn&&De.startsWith("data:video/");if(Ha)return s.jsx("div",{className:"image-attachment mb-2 -mx-2",children:dn?s.jsx("img",{src:De,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},onError:fn=>{fn.target.style.display="none"}}):s.jsx(Ar,{src:De.startsWith("http")?De:De.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${De}`:De.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${De}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${De.split("/").pop()}`,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},preview:{mask:t==="ar"?"معاينة":"Preview"},onError:fn=>{console.error("Image failed to load:",De),fn.target.style.display="none"}},ht)},ht);if(Kr){const fn=De.startsWith("http")?De:De.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${De}`:De.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${De}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${De.split("/").pop()}`;return s.jsx("div",{className:"audio-attachment",children:s.jsx(pb,{src:fn,isOwnMessage:me,language:t})},ht)}else return al?s.jsx("div",{className:"video-attachment",children:s.jsx("video",{controls:!0,src:De,className:"w-full max-w-md rounded"})},ht):s.jsxs("div",{className:`file-attachment flex items-center gap-2 p-2 rounded ${me?"bg-white/50":"bg-gray-100"}`,children:[s.jsx(so,{className:me?"text-gray-700":"text-blue-600"}),s.jsx("a",{href:De,download:!0,target:"_blank",rel:"noopener noreferrer",className:`text-sm ${me?"text-gray-700 hover:text-gray-900":"text-blue-600 hover:text-blue-800"}`,children:De.split("/").pop()})]},ht)})}),F.content&&F.content.trim()&&!(F.messageType==="image"&&Ze.length>0&&!F.content.includes("📎"))&&s.jsx("p",{className:`text-sm ${Ze.length>0?"mt-2":""} whitespace-pre-wrap break-words`,children:F.content}),s.jsx("span",{className:`text-xs mt-1 ${me?"text-gray-600":"text-gray-500"} self-end`,children:de(F.createdAt).format("HH:mm")})]})]}),me&&s.jsx(at,{src:e?.avatar,icon:s.jsx(ke,{}),size:32,className:"flex-shrink-0"})]},F.id)}),s.jsx("div",{ref:T})]})}),k.length>0&&s.jsx("div",{className:"mb-3 pb-3 border-b border-gray-200 px-4",children:s.jsx("div",{className:"flex flex-wrap gap-3",children:k.map((F,ce)=>{const me=/\.(jpg|jpeg|png|gif|webp)$/i.test(F),Ze=/\.(mp4|webm|ogg)$/i.test(F),xt=/\.(mp3|wav|ogg|m4a|webm)$/i.test(F),yt=F.split("/").pop(),wt=F.startsWith("http")?F:F.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${F}`:F.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${F}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${F.split("/").pop()}`;return s.jsx("div",{className:"relative group",children:me?s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm",children:[s.jsx(Ar,{src:wt,alt:yt,width:200,height:200,className:"object-cover",preview:!1,onError:De=>{console.error("Image failed to load:",wt),De.target.style.display="none"}}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Nr,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>O(k.filter((De,ht)=>ht!==ce))})]}):Ze?s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm w-[200px]",children:[s.jsx("video",{src:wt,className:"w-full h-[150px] object-cover",controls:!1,muted:!0,onError:De=>{console.error("Video failed to load:",wt)}}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:s.jsx(ms,{className:"text-white text-2xl"})}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Nr,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>O(k.filter((De,ht)=>ht!==ce))})]}):xt?s.jsxs("div",{className:"relative rounded-lg border border-gray-200 shadow-sm bg-gray-50 p-3 min-w-[200px]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(io,{className:"text-gray-600 text-lg"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs text-gray-600 truncate",children:yt}),s.jsx("audio",{src:wt,controls:!0,className:"w-full mt-1",preload:"metadata"})]})]}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Nr,{}),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center",onClick:()=>O(k.filter((De,ht)=>ht!==ce))})]}):s.jsxs("div",{className:"relative flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 shadow-sm min-w-[200px]",children:[s.jsx(so,{className:"text-gray-600 text-xl"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-gray-700 truncate font-medium",children:yt}),s.jsx("p",{className:"text-xs text-gray-500",children:t==="ar"?"ملف":"File"})]}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Nr,{}),className:"bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center flex-shrink-0",onClick:()=>O(k.filter((De,ht)=>ht!==ce))})]})},ce)})})}),H&&!R&&s.jsxs("div",{className:"p-3 bg-blue-50 border-t border-blue-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("audio",{src:H,controls:!0,className:"max-w-xs"}),s.jsx("span",{className:"text-sm text-gray-600",children:ne(L)})]}),s.jsxs(fe,{children:[s.jsx(P,{type:"primary",size:"small",onClick:X,loading:p,children:t==="ar"?"إرسال":"Send"}),s.jsx(P,{size:"small",icon:s.jsx(Nr,{}),onClick:K})]})]}),R&&s.jsxs("div",{className:"p-3 bg-red-50 border-t border-red-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsxs("span",{className:"text-red-600 font-semibold",children:[t==="ar"?"جاري التسجيل...":"Recording..."," ",ne(L)]})]}),s.jsx(P,{danger:!0,size:"small",icon:s.jsx(fo,{}),onClick:te,children:t==="ar"?"إيقاف":"Stop"})]}),s.jsxs("div",{className:"border-t border-gray-200/50 px-4 py-3 shadow-professional backdrop-blur-sm flex-shrink-0 bg-white/80",children:[s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx(Pt,{showUploadList:!1,beforeUpload:Ee,accept:"image/*,audio/*,video/*,.pdf,.doc,.docx",multiple:!0,children:s.jsx(P,{icon:s.jsx(ab,{}),type:"text",className:"text-gray-600 hover:text-gray-900",size:"large"})}),s.jsx(P,{type:R?"primary":"text",danger:R,icon:R?s.jsx(cb,{}):s.jsx(io,{}),onClick:be,disabled:i?.status==="STOPPED"||i?.status==="COMPLETED",title:t==="ar"?"تسجيل صوتي":"Voice recording",className:R?"":"text-gray-600 hover:text-gray-900",size:"large"}),s.jsx(P,{icon:s.jsx(db,{}),onClick:()=>M(!I),type:"text",className:`text-gray-600 hover:text-gray-900 ${I?"bg-gray-100":""}`,size:"large"}),s.jsx("div",{className:"flex-1 relative",children:s.jsx(Ase,{value:u,onChange:F=>d(F.target.value),placeholder:t==="ar"?"اكتب رسالة...":"Type a message...",rows:1,autoSize:{minRows:1,maxRows:4},variant:"borderless",disabled:i?.status==="STOPPED"||i?.status==="COMPLETED"||R,onPressEnter:F=>{F.shiftKey||(F.preventDefault(),xe())},style:{resize:"none",borderRadius:"24px",padding:"10px 16px",backgroundColor:"#f0f0f0",border:"none",fontSize:"14px"}})}),s.jsx(P,{type:"primary",icon:s.jsx(lh,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 rounded-full",onClick:xe,loading:p,disabled:!u.trim()&&k.length===0||i?.status==="STOPPED"||i?.status==="COMPLETED"||R,size:"large",shape:"circle"})]}),I&&s.jsx("div",{className:"p-3 bg-white border-t border-gray-200 max-h-48 overflow-y-auto shadow-inner",children:s.jsx("div",{className:"grid grid-cols-8 gap-1",children:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃"].map(F=>s.jsx(P,{type:"text",className:"text-xl p-1",onClick:()=>{d(ce=>ce+F),M(!1)},children:F},F))})})]})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center py-12 px-6",children:[s.jsx("div",{className:"mb-6",children:s.jsx(Ut,{className:"text-7xl text-gray-300"})}),s.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700",children:t==="ar"?"اختر محادثة للبدء":"Select a Conversation to Start"}),s.jsx("p",{className:"text-gray-500 max-w-md mx-auto text-base",children:t==="ar"?"اختر محادثة من القائمة الجانبية للبدء في الدردشة":"Select a conversation from the sidebar to start chatting"})]})})}),s.jsx(He,{title:t==="ar"?"إرسال الرسالة كـ":"Send Message As",open:y,onCancel:()=>v(!1),footer:[s.jsx(P,{onClick:()=>{v(!1),m(null)},children:t==="ar"?"إلغاء":"Cancel"},"cancel"),s.jsx(P,{onClick:()=>{m(null),_.info(t==="ar"?"سيتم الإرسال كمدير":"Will send as admin")},children:t==="ar"?"إرسال كمدير":"Send as Admin"},"clear")],children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(Li,{type:"secondary",children:t==="ar"?"اختر المستخدم الذي تريد الإرسال باسمه. اتركه فارغاً للإرسال كمدير.":"Select the user you want to send as. Leave empty to send as admin."}),s.jsxs("div",{children:[s.jsx(Li,{strong:!0,children:t==="ar"?"اختر المستخدم:":"Select User:"}),b?s.jsx("div",{className:"flex justify-center py-4",children:s.jsx(et,{})}):s.jsx(q,{className:"w-full mt-2",placeholder:t==="ar"?"اختر مستخدم للإرسال باسمه":"Select user to send as",showSearch:!0,filterOption:(F,ce)=>(ce?.label??"").toLowerCase().includes(F.toLowerCase()),options:w.map(F=>({value:F.id,label:`${F.email}${F.client?` (${F.client.firstName} ${F.client.lastName})`:""}${F.consultant?` (${F.consultant.firstName} ${F.consultant.lastName})`:""} - ${F.role}`})),onChange:F=>{m(F);const ce=w.find(me=>me.id===F);_.success(t==="ar"?`سيتم الإرسال كـ ${ce?.email}`:`Will send as ${ce?.email}`)},allowClear:!0,onClear:()=>{m(null),_.info(t==="ar"?"سيتم الإرسال كمدير":"Will send as admin")}}),i&&s.jsxs("div",{className:"mt-4",children:[s.jsx(Li,{strong:!0,children:t==="ar"?"المشاركون في المحادثة:":"Conversation Participants:"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[i?.clientId&&s.jsxs(P,{block:!0,onClick:()=>{m(i.clientId),v(!1),_.success(t==="ar"?"سيتم الإرسال كعميل":"Will send as client")},children:[t==="ar"?"إرسال كعميل":"Send as Client"," (",i.clientName||"Client",")"]}),i?.consultantUserId&&s.jsxs(P,{block:!0,onClick:()=>{m(i.consultantUserId),v(!1),_.success(t==="ar"?"سيتم الإرسال كمستشار":"Will send as consultant")},children:[t==="ar"?"إرسال كمستشار":"Send as Consultant"," ","(",i.consultantName||"Consultant",")"]})]})]})]})]})}),s.jsx(He,{title:t==="ar"?"اختر مستخدم للدردشة":"Select User to Chat",open:j,onCancel:()=>C(!1),footer:null,width:600,children:b?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(et,{size:"large"})}):s.jsx(ft,{dataSource:w.filter(F=>F.id!==e?.id),renderItem:F=>s.jsx(ft.Item,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>_e(F.id),children:s.jsx(ft.Item.Meta,{avatar:s.jsx(at,{src:F.avatar,icon:s.jsx(ke,{})}),title:s.jsxs("div",{children:[s.jsxs(Li,{strong:!0,children:[F.email,F.client&&` (${F.client.firstName} ${F.client.lastName})`,F.consultant&&` (${F.consultant.firstName} ${F.consultant.lastName})`]}),s.jsx(le,{color:"blue",className:"ml-2",children:F.role})]}),description:F.client?"Client":F.consultant?"Consultant":"User"})})})})]})})},{TextArea:NC}=z,{Option:Xt}=q,Cse=()=>{const{language:t}=je(),[e,r]=A.useState([]),[n,a]=A.useState(!1),[i,o]=A.useState(!1),[l,c]=A.useState(!1),[u,d]=A.useState(null),[f,h]=A.useState(!1),[p,g]=A.useState({}),[x]=E.useForm(),[m]=E.useForm();A.useEffect(()=>{y()},[p]);const y=async()=>{try{a(!0);const j=await Mr.getAllTickets(p);r(j.tickets||[])}catch{_.error(t==="ar"?"فشل تحميل التذاكر":"Failed to load tickets")}finally{a(!1)}},v=async j=>{try{if(await Mr.updateTicket(u.id,j),_.success(t==="ar"?"تم تحديث التذكرة":"Ticket updated"),c(!1),x.resetFields(),y(),i){const C=await Mr.getTicketById(u.id);d(C.ticket)}}catch{_.error(t==="ar"?"فشل تحديث التذكرة":"Failed to update ticket")}},w=async j=>{try{if(await Mr.addComment(u.id,j.content),_.success(t==="ar"?"تم إضافة التعليق":"Comment added"),h(!1),m.resetFields(),y(),i){const C=await Mr.getTicketById(u.id);d(C.ticket)}}catch{_.error(t==="ar"?"فشل إضافة التعليق":"Failed to add comment")}},N=j=>({OPEN:"blue",IN_PROGRESS:"orange",RESOLVED:"green",CLOSED:"default"})[j]||"default",b=j=>({LOW:"default",MEDIUM:"blue",HIGH:"orange",URGENT:"red"})[j]||"default",S=[{title:t==="ar"?"رقم التذكرة":"Ticket Number",dataIndex:"ticketNumber",key:"ticketNumber"},{title:t==="ar"?"المستخدم":"User",key:"user",render:(j,C)=>s.jsxs(fe,{children:[s.jsx(ke,{}),s.jsx("span",{children:C.user?.email||"-"})]})},{title:t==="ar"?"الموضوع":"Subject",dataIndex:"subject",key:"subject"},{title:t==="ar"?"الفئة":"Category",dataIndex:"category",key:"category",render:j=>j||"-"},{title:t==="ar"?"الأولوية":"Priority",dataIndex:"priority",key:"priority",render:j=>s.jsx(le,{color:b(j),children:j})},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:j=>s.jsx(le,{color:N(j),children:j})},{title:t==="ar"?"مُخصص إلى":"Assigned To",dataIndex:"assignedTo",key:"assignedTo",render:j=>j||s.jsx(le,{color:"default",children:t==="ar"?"غير مُخصص":"Unassigned"})},{title:t==="ar"?"تاريخ الإنشاء":"Created At",dataIndex:"createdAt",key:"createdAt",render:j=>de(j).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"الإجراءات":"Actions",key:"actions",render:(j,C)=>s.jsxs(fe,{children:[s.jsx(P,{icon:s.jsx(ur,{}),size:"small",onClick:()=>{d(C),o(!0)},children:t==="ar"?"عرض":"View"}),s.jsx(P,{icon:s.jsx(kr,{}),size:"small",onClick:()=>{d(C),x.setFieldsValue({status:C.status,priority:C.priority,assignedTo:C.assignedTo,resolution:C.resolution}),c(!0)},children:t==="ar"?"تعديل":"Edit"})]})}];return s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h1",{className:"text-3xl font-bold",children:t==="ar"?"إدارة تذاكر الدعم الفني":"Support Tickets Management"})}),s.jsx(V,{className:"mb-4",children:s.jsxs(fe,{wrap:!0,children:[s.jsxs(q,{placeholder:t==="ar"?"الحالة":"Status",style:{width:150},allowClear:!0,onChange:j=>g({...p,status:j}),children:[s.jsx(Xt,{value:"OPEN",children:t==="ar"?"مفتوحة":"Open"}),s.jsx(Xt,{value:"IN_PROGRESS",children:t==="ar"?"قيد المعالجة":"In Progress"}),s.jsx(Xt,{value:"RESOLVED",children:t==="ar"?"محلولة":"Resolved"}),s.jsx(Xt,{value:"CLOSED",children:t==="ar"?"مغلقة":"Closed"})]}),s.jsxs(q,{placeholder:t==="ar"?"الأولوية":"Priority",style:{width:150},allowClear:!0,onChange:j=>g({...p,priority:j}),children:[s.jsx(Xt,{value:"LOW",children:t==="ar"?"منخفضة":"Low"}),s.jsx(Xt,{value:"MEDIUM",children:t==="ar"?"متوسطة":"Medium"}),s.jsx(Xt,{value:"HIGH",children:t==="ar"?"عالية":"High"}),s.jsx(Xt,{value:"URGENT",children:t==="ar"?"عاجلة":"Urgent"})]}),s.jsxs(q,{placeholder:t==="ar"?"الفئة":"Category",style:{width:150},allowClear:!0,onChange:j=>g({...p,category:j}),children:[s.jsx(Xt,{value:"technical",children:t==="ar"?"تقني":"Technical"}),s.jsx(Xt,{value:"billing",children:t==="ar"?"مالي":"Billing"}),s.jsx(Xt,{value:"general",children:t==="ar"?"عام":"General"})]})]})}),s.jsx(V,{children:s.jsx(rt,{columns:S,dataSource:e,loading:n,rowKey:"id",locale:{emptyText:s.jsx(Bt,{description:t==="ar"?"لا توجد تذاكر":"No tickets"})}})}),s.jsx(He,{title:t==="ar"?"تفاصيل التذكرة":"Ticket Details",open:i,onCancel:()=>{o(!1),d(null)},footer:null,width:800,className:"modern-modal",children:u&&s.jsxs("div",{children:[s.jsxs(ve,{bordered:!0,column:2,children:[s.jsx(ve.Item,{label:t==="ar"?"رقم التذكرة":"Ticket Number",children:u.ticketNumber}),s.jsx(ve.Item,{label:t==="ar"?"المستخدم":"User",children:u.user?.email||"-"}),s.jsx(ve.Item,{label:t==="ar"?"الحالة":"Status",children:s.jsx(le,{color:N(u.status),children:u.status})}),s.jsx(ve.Item,{label:t==="ar"?"الأولوية":"Priority",children:s.jsx(le,{color:b(u.priority),children:u.priority})}),s.jsx(ve.Item,{label:t==="ar"?"مُخصص إلى":"Assigned To",children:u.assignedTo||s.jsx(le,{color:"default",children:t==="ar"?"غير مُخصص":"Unassigned"})}),s.jsx(ve.Item,{label:t==="ar"?"الفئة":"Category",children:u.category||"-"}),s.jsx(ve.Item,{label:t==="ar"?"الموضوع":"Subject",span:2,children:u.subject}),s.jsx(ve.Item,{label:t==="ar"?"الوصف":"Description",span:2,children:u.description}),u.resolution&&s.jsx(ve.Item,{label:t==="ar"?"الحل":"Resolution",span:2,children:u.resolution})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:t==="ar"?"التعليقات":"Comments"}),s.jsx(P,{type:"primary",icon:s.jsx(Ut,{}),onClick:()=>h(!0),children:t==="ar"?"إضافة تعليق":"Add Comment"})]}),s.jsx(sb,{items:u.comments?.map(j=>({key:j.id,children:s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"font-semibold",children:j.user?.email}),s.jsx("span",{className:"text-gray-500 text-sm",children:de(j.createdAt).format("YYYY-MM-DD HH:mm")})]}),s.jsx("p",{children:j.comment||j.content})]})}))||[]}),(!u.comments||u.comments.length===0)&&s.jsx(Bt,{description:t==="ar"?"لا توجد تعليقات":"No comments"})]})]})}),s.jsx(He,{title:t==="ar"?"تعديل التذكرة":"Edit Ticket",open:l,onCancel:()=>{c(!1),x.resetFields()},footer:null,width:600,className:"modern-modal",children:s.jsxs(E,{form:x,layout:"vertical",onFinish:v,children:[s.jsx(E.Item,{name:"status",label:t==="ar"?"الحالة":"Status",children:s.jsxs(q,{children:[s.jsx(Xt,{value:"OPEN",children:t==="ar"?"مفتوحة":"Open"}),s.jsx(Xt,{value:"IN_PROGRESS",children:t==="ar"?"قيد المعالجة":"In Progress"}),s.jsx(Xt,{value:"RESOLVED",children:t==="ar"?"محلولة":"Resolved"}),s.jsx(Xt,{value:"CLOSED",children:t==="ar"?"مغلقة":"Closed"})]})}),s.jsx(E.Item,{name:"priority",label:t==="ar"?"الأولوية":"Priority",children:s.jsxs(q,{children:[s.jsx(Xt,{value:"LOW",children:t==="ar"?"منخفضة":"Low"}),s.jsx(Xt,{value:"MEDIUM",children:t==="ar"?"متوسطة":"Medium"}),s.jsx(Xt,{value:"HIGH",children:t==="ar"?"عالية":"High"}),s.jsx(Xt,{value:"URGENT",children:t==="ar"?"عاجلة":"Urgent"})]})}),s.jsx(E.Item,{name:"assignedTo",label:t==="ar"?"مُخصص إلى":"Assigned To",children:s.jsx(z,{placeholder:t==="ar"?"معرف المستخدم":"User ID"})}),s.jsx(E.Item,{name:"resolution",label:t==="ar"?"الحل":"Resolution",children:s.jsx(NC,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"تحديث التذكرة":"Update Ticket"})})]})}),s.jsx(He,{title:t==="ar"?"إضافة تعليق":"Add Comment",open:f,onCancel:()=>{h(!1),m.resetFields()},footer:null,className:"modern-modal",children:s.jsxs(E,{form:m,layout:"vertical",onFinish:w,children:[s.jsx(E.Item,{name:"content",label:t==="ar"?"التعليق":"Comment",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال التعليق":"Please enter comment"}],children:s.jsx(NC,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"إضافة التعليق":"Add Comment"})})]})})]})},{authAPI:Rl,filesAPI:AC}=_a,kse=()=>{const{language:t}=je(),{theme:e}=Fa(),{user:r,checkAuth:n}=pr(),[a]=E.useForm(),[i]=E.useForm(),[o,l]=A.useState(!1),[c,u]=A.useState(null),[d,f]=A.useState(!1),[h,p]=A.useState(!1);A.useEffect(()=>{g()},[]);const g=async()=>{try{l(!0);const b=await Rl.getProfile();b.user&&(u(b.user),b.user.admin?a.setFieldsValue({firstName:b.user.admin.firstName||"",lastName:b.user.admin.lastName||"",email:b.user.email||"",phone:b.user.phone||""}):a.setFieldsValue({email:b.user.email||"",phone:b.user.phone||""}))}catch(b){console.error("Error fetching profile:",b),_.error(b.message||(t==="ar"?"فشل تحميل الملف الشخصي":"Failed to load profile"))}finally{l(!1)}},x=async b=>{const S=AC||_a?.filesAPI;if(!S)return console.error("filesAPI is not defined",{filesAPI:AC,apiService:_a}),_.error(t==="ar"?"خطأ في تحميل API":"API loading error"),!1;const j=new FormData;j.append("file",b),j.append("ownerType","USER"),j.append("ownerId",r?.id||"");try{l(!0);const C=await S.uploadFile(j);C.file?.fileUrl&&(await Rl.updateProfile({avatar:C.file.fileUrl}),_.success(t==="ar"?"تم رفع الصورة بنجاح":"Avatar uploaded successfully"),u(k=>({...k,avatar:C.file.fileUrl})),await g(),await n())}catch(C){_.error(C.message||(t==="ar"?"فشل رفع الصورة":"Failed to upload avatar"))}finally{l(!1)}return!1},m=async b=>{try{l(!0);const S={...b};b.email&&b.email!==c?.email&&await Rl.updateEmail(b.email),await Rl.updateProfile(S),_.success(t==="ar"?"تم حفظ التغييرات بنجاح":"Profile updated successfully"),f(!1),await g(),await n()}catch(S){_.error(S.message||(t==="ar"?"فشل حفظ التغييرات":"Failed to save changes"))}finally{l(!1)}},y=async b=>{try{l(!0),await Rl.changePassword(b.currentPassword,b.newPassword),_.success(t==="ar"?"تم تغيير كلمة المرور بنجاح":"Password changed successfully"),i.resetFields(),p(!1)}catch(S){_.error(S.message||(t==="ar"?"فشل تغيير كلمة المرور":"Failed to change password"))}finally{l(!1)}};if(o&&!c)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})});const v=c?.admin?.adminRole||r?.role,w={SUPER_ADMIN:{ar:"مدير عام",en:"Super Admin",color:"red"},ADMIN:{ar:"مدير",en:"Admin",color:"blue"},ANALYST:{ar:"محلل",en:"Analyst",color:"purple"},SUPPORT:{ar:"دعم فني",en:"Support",color:"orange"},FINANCE:{ar:"مالي",en:"Finance",color:"green"}},N=w[v]||w.ADMIN;return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 relative z-10",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?"الملف الشخصي":"Profile Settings"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"إدارة معلوماتك الشخصية وإعدادات الحساب":"Manage your personal information and account settings"})]}),s.jsxs(ie,{gutter:[24,24],children:[s.jsx($,{xs:24,md:8,children:s.jsxs(V,{className:`text-center shadow-professional-lg border-0 card-hover ${e==="dark"?"bg-gray-800":"bg-white"}`,style:{animationDelay:"0.1s"},children:[s.jsx(Pt,{showUploadList:!1,beforeUpload:x,accept:"image/*",children:s.jsxs("div",{className:"relative inline-block mb-4 cursor-pointer group",children:[s.jsx(at,{size:140,src:c?.avatar||r?.avatar,icon:s.jsx(ke,{}),className:"ring-4 ring-olive-green-200 group-hover:ring-olive-green-400 transition-all duration-300"}),s.jsx(P,{type:"primary",shape:"circle",icon:s.jsx(ah,{}),className:"absolute bottom-0 right-0 shadow-lg",size:"small",style:{backgroundColor:"#7a8c66"},loading:o})]})}),s.jsx("h2",{className:`text-2xl font-bold mb-2 ${e==="dark"?"text-white":"text-gray-900"}`,children:c?.admin?`${c.admin.firstName||""} ${c.admin.lastName||""}`.trim():r?.email||(t==="ar"?"المدير":"Admin")}),s.jsx(le,{color:N.color,className:"mb-4",icon:s.jsx(Kn,{}),children:t==="ar"?N.ar:N.en}),s.jsx(Mt,{className:"my-4"}),s.jsxs("div",{className:"space-y-3 text-left",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(an,{className:"text-gray-400"}),s.jsx("span",{className:`text-sm ${e==="dark"?"text-gray-300":"text-gray-600"}`,children:c?.email||r?.email})]}),c?.phone&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(aa,{className:"text-gray-400"}),s.jsx("span",{className:`text-sm ${e==="dark"?"text-gray-300":"text-gray-600"}`,children:c.phone})]})]})]})}),s.jsxs($,{xs:24,md:16,children:[s.jsx(V,{className:`shadow-professional-lg border-0 ${e==="dark"?"bg-gray-800":"bg-white"}`,title:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`${e==="dark"?"text-white":"text-gray-900"}`,children:t==="ar"?"معلومات الحساب":"Account Information"}),!d&&s.jsx(P,{type:"primary",icon:s.jsx(kr,{}),onClick:()=>f(!0),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:t==="ar"?"تعديل":"Edit"})]}),style:{animationDelay:"0.2s"},children:s.jsxs(E,{form:a,layout:"vertical",onFinish:m,disabled:!d,children:[s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"firstName",label:t==="ar"?"الاسم الأول":"First Name",rules:[{required:!0,message:t==="ar"?"يرجى إدخال الاسم الأول":"Please enter first name"}],children:s.jsx(z,{prefix:s.jsx(ke,{}),placeholder:t==="ar"?"الاسم الأول":"First Name"})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"lastName",label:t==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0,message:t==="ar"?"يرجى إدخال اسم العائلة":"Please enter last name"}],children:s.jsx(z,{prefix:s.jsx(ke,{}),placeholder:t==="ar"?"اسم العائلة":"Last Name"})})})]}),s.jsxs(ie,{gutter:16,children:[s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"email",label:t==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:t==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email"},{type:"email",message:t==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email"}],children:s.jsx(z,{prefix:s.jsx(an,{}),placeholder:t==="ar"?"البريد الإلكتروني":"Email"})})}),s.jsx($,{xs:24,sm:12,children:s.jsx(E.Item,{name:"phone",label:t==="ar"?"رقم الهاتف":"Phone Number",children:s.jsx(z,{prefix:s.jsx(aa,{}),placeholder:t==="ar"?"رقم الهاتف":"Phone Number"})})})]}),d&&s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx(P,{type:"primary",htmlType:"submit",icon:s.jsx(wa,{}),loading:o,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:t==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{f(!1),g()},children:t==="ar"?"إلغاء":"Cancel"})]})]})}),s.jsx(V,{className:`shadow-professional-lg border-0 mt-6 ${e==="dark"?"bg-gray-800":"bg-white"}`,title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ht,{className:e==="dark"?"text-white":"text-gray-900"}),s.jsx("span",{className:e==="dark"?"text-white":"text-gray-900",children:t==="ar"?"الأمان":"Security"})]}),style:{animationDelay:"0.3s"},extra:!h&&s.jsx(P,{type:"text",onClick:()=>p(!0),className:"text-olive-green-600 hover:text-olive-green-700",children:t==="ar"?"تغيير كلمة المرور":"Change Password"}),children:h?s.jsxs(E,{form:i,layout:"vertical",onFinish:y,children:[s.jsx(E.Item,{name:"currentPassword",label:t==="ar"?"كلمة المرور الحالية":"Current Password",rules:[{required:!0,message:t==="ar"?"يرجى إدخال كلمة المرور الحالية":"Please enter current password"}],children:s.jsx(z.Password,{prefix:s.jsx(Ht,{}),placeholder:t==="ar"?"كلمة المرور الحالية":"Current Password"})}),s.jsx(E.Item,{name:"newPassword",label:t==="ar"?"كلمة المرور الجديدة":"New Password",rules:[{required:!0,message:t==="ar"?"يرجى إدخال كلمة المرور الجديدة":"Please enter new password"},{min:8,message:t==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters"}],children:s.jsx(z.Password,{prefix:s.jsx(Kn,{}),placeholder:t==="ar"?"كلمة المرور الجديدة":"New Password"})}),s.jsx(E.Item,{name:"confirmPassword",label:t==="ar"?"تأكيد كلمة المرور":"Confirm Password",dependencies:["newPassword"],rules:[{required:!0,message:t==="ar"?"يرجى تأكيد كلمة المرور":"Please confirm password"},({getFieldValue:b})=>({validator(S,j){return!j||b("newPassword")===j?Promise.resolve():Promise.reject(new Error(t==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match"))}})],children:s.jsx(z.Password,{prefix:s.jsx(Kn,{}),placeholder:t==="ar"?"تأكيد كلمة المرور":"Confirm Password"})}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx(P,{type:"primary",htmlType:"submit",icon:s.jsx(wa,{}),loading:o,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:t==="ar"?"تغيير كلمة المرور":"Change Password"}),s.jsx(P,{onClick:()=>{p(!1),i.resetFields()},children:t==="ar"?"إلغاء":"Cancel"})]})]}):s.jsx("div",{className:`p-4 rounded-lg ${e==="dark"?"bg-gray-700":"bg-gray-50"}`,children:s.jsx("p",{className:`${e==="dark"?"text-gray-300":"text-gray-600"}`,children:t==="ar"?"لحماية حسابك، استخدم كلمة مرور قوية لا تستخدمها في حسابات أخرى.":"To protect your account, use a strong password that you don't use elsewhere."})})})]})]})]})]})},Ese=()=>s.jsx(vD,{children:s.jsxs(th,{children:[s.jsx(Se,{path:"/",element:s.jsx(KX,{})}),s.jsx(Se,{path:"/profile",element:s.jsx(kse,{})}),s.jsx(Se,{path:"/clients",element:s.jsx(JX,{})}),s.jsx(Se,{path:"/clients/:id",element:s.jsx(hQ,{})}),s.jsx(Se,{path:"/consultants",element:s.jsx(XX,{})}),s.jsx(Se,{path:"/consultants/:id",element:s.jsx(pQ,{})}),s.jsx(Se,{path:"/sessions",element:s.jsx(QX,{})}),s.jsx(Se,{path:"/payments",element:s.jsx(eQ,{})}),s.jsx(Se,{path:"/cms",element:s.jsx(tQ,{})}),s.jsx(Se,{path:"/articles",element:s.jsx(rQ,{})}),s.jsx(Se,{path:"/articles/new",element:s.jsx(wC,{})}),s.jsx(Se,{path:"/articles/edit/:id",element:s.jsx(wC,{})}),s.jsx(Se,{path:"/chat",element:s.jsx(SC,{})}),s.jsx(Se,{path:"/chat/:sessionId",element:s.jsx(SC,{})}),s.jsx(Se,{path:"/services",element:s.jsx(nQ,{})}),s.jsx(Se,{path:"/reports",element:s.jsx(sQ,{})}),s.jsx(Se,{path:"/partners",element:s.jsx(iQ,{})}),s.jsx(Se,{path:"/categories",element:s.jsx(oQ,{})}),s.jsx(Se,{path:"/sliders",element:s.jsx(lQ,{})}),s.jsx(Se,{path:"/monitoring",element:s.jsx(dQ,{})}),s.jsx(Se,{path:"/permissions",element:s.jsx(fQ,{})}),s.jsx(Se,{path:"/support",element:s.jsx(Cse,{})}),s.jsx(Se,{path:"/settings",element:s.jsx(uQ,{})}),s.jsx(Se,{path:"*",element:s.jsx(Dn,{to:"/admin",replace:!0})})]})}),Ose=()=>{const{id:t}=ua(),e=nt(),{user:r}=pr();return A.useEffect(()=>{if(!r){e("/login",{replace:!0});return}const n=r.role;n==="CLIENT"?e(`/client/chat/${t}`,{replace:!0}):n==="CONSULTANT"?e(`/consultant/chat/${t}`,{replace:!0}):["ADMIN","SUPER_ADMIN"].includes(n)?e(`/admin/chat/${t}`,{replace:!0}):e("/",{replace:!0})},[t,r,e]),null};function Pse(){return s.jsx(BI,{children:s.jsx(FI,{children:s.jsx(UI,{children:s.jsx(pI,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsxs(th,{children:[s.jsx(Se,{path:"/",element:s.jsx(d_,{})}),s.jsx(Se,{path:"/about",element:s.jsx(h_,{})}),s.jsx(Se,{path:"/services",element:s.jsx(m_,{})}),s.jsx(Se,{path:"/consultants",element:s.jsx(y_,{})}),s.jsx(Se,{path:"/consultants/:id",element:s.jsx(v_,{})}),s.jsx(Se,{path:"/reports",element:s.jsx(Mj,{})}),s.jsx(Se,{path:"/reports/:id",element:s.jsx(Mj,{})}),s.jsx(Se,{path:"/blog",element:s.jsx(S_,{})}),s.jsx(Se,{path:"/blog/:slug",element:s.jsx(N_,{})}),s.jsx(Se,{path:"/contact",element:s.jsx(k_,{})}),s.jsx(Se,{path:"/login",element:s.jsx(O_,{})}),s.jsx(Se,{path:"/register",element:s.jsx(M_,{})}),s.jsx(Se,{path:"/chat/:id",element:s.jsx(Ose,{})}),s.jsx(Se,{path:"/client/*",element:s.jsx(yp,{requiredRole:"CLIENT",children:s.jsx(Z_,{})})}),s.jsx(Se,{path:"/consultant/*",element:s.jsx(yp,{requiredRole:"CONSULTANT",children:s.jsx(mD,{})})}),s.jsx(Se,{path:"/admin/*",element:s.jsx(yp,{adminOnly:!0,children:s.jsx(Ese,{})})})]})})})})})}const Tse=console.error,Ise=console.warn;console.error=(...t)=>{(t[0]?.toString()||"").includes("findDOMNode is deprecated")||Tse.apply(console,t)};console.warn=(...t)=>{(t[0]?.toString()||"").includes("findDOMNode is deprecated")||Ise.apply(console,t)};document.documentElement.setAttribute("dir","rtl");document.documentElement.setAttribute("lang","ar");wI.createRoot(document.getElementById("root")).render(s.jsx(D.StrictMode,{children:s.jsx(CC,{locale:_C,direction:"rtl",children:s.jsx(Pse,{})})}));
