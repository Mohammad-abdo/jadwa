import{r as N,c as Nk,g as at,u as dl,N as Kn,f as st,L as Tn,h as Aa,R as D,e as Hl,i as Ak,j as yh,k as we,a as Ck,B as kk}from"./react-vendor-CUU4qALM.js";import{C as AS,s as R,S as et,I as me,_ as ge,L as Je,M as mc,B as P,D as Ok,R as le,a as _,b as V,c as CS,d as ya,e as It,A as ot,f as Ya,g as Sv,h as vh,i as Ft,j as mr,k as zr,T as ce,l as fe,m as Fe,n as F,o as he,p as B,q as Mr,r as be,E as Xt,t as Rt,F as E,U as Yt,u as ca,v as Dn,w as Ms,x as fd,y as Qm,z as Wr,G as Vn,H as Ga,J as bh,K as bo,N as jo,O as Ln,P as dt,Q as $r,V as Ek,W as rt,X as Hn,Y as wo,Z as Tr,$ as o0,a0 as Ye,a1 as qr,a2 as Zn,a3 as l0,a4 as $s,a5 as kS,a6 as Fa,a7 as ea,a8 as Os}from"./antd-vendor-CxI6XhQj.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var OS={exports:{}},jh={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pk=N,Tk=Symbol.for("react.element"),Ik=Symbol.for("react.fragment"),Mk=Object.prototype.hasOwnProperty,$k=Pk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rk={key:!0,ref:!0,__self:!0,__source:!0};function ES(t,e,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Mk.call(e,n)&&!Rk.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Tk,type:t,key:i,ref:o,props:a,_owner:$k.current}}jh.Fragment=Ik;jh.jsx=ES;jh.jsxs=ES;OS.exports=jh;var s=OS.exports,Zm={},Nv=Nk;Zm.createRoot=Nv.createRoot,Zm.hydrateRoot=Nv.hydrateRoot;var wh={},PS={exports:{}};(function(t){function e(r){return r&&r.__esModule?r:{default:r}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(PS);var Rs=PS.exports,Sh={};Object.defineProperty(Sh,"__esModule",{value:!0});Sh.default=void 0;var Dk={items_per_page:"/ الصفحة",jump_to:"الذهاب إلى",jump_to_confirm:"تأكيد",page:"الصفحة",prev_page:"الصفحة السابقة",next_page:"الصفحة التالية",prev_5:"خمس صفحات سابقة",next_5:"خمس صفحات تالية",prev_3:"ثلاث صفحات سابقة",next_3:"ثلاث صفحات تالية",page_size:"مقاس الصفحه"};Sh.default=Dk;var Nh={},hd={},Ah={},TS={exports:{}},IS={exports:{}},MS={exports:{}},$S={exports:{}};(function(t){function e(r){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})($S);var RS=$S.exports,DS={exports:{}};(function(t){var e=RS.default;function r(n,a){if(e(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,a||"default");if(e(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(DS);var _k=DS.exports;(function(t){var e=RS.default,r=_k;function n(a){var i=r(a,"string");return e(i)=="symbol"?i:i+""}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(MS);var Lk=MS.exports;(function(t){var e=Lk;function r(n,a,i){return(a=e(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(IS);var zk=IS.exports;(function(t){var e=zk;function r(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable})),o.push.apply(o,l)}return o}function n(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?r(Object(o),!0).forEach(function(l){e(a,l,o[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(o,l))})}return a}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(TS);var _S=TS.exports,pd={};Object.defineProperty(pd,"__esModule",{value:!0});pd.commonLocale=void 0;pd.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0};var Fk=Rs.default;Object.defineProperty(Ah,"__esModule",{value:!0});Ah.default=void 0;var Av=Fk(_S),Bk=pd,Uk=(0,Av.default)((0,Av.default)({},Bk.commonLocale),{},{locale:"ar_EG",today:"اليوم",now:"الأن",backToToday:"العودة إلى اليوم",ok:"تأكيد",clear:"مسح",week:"الأسبوع",month:"الشهر",year:"السنة",timeSelect:"اختيار الوقت",dateSelect:"اختيار التاريخ",monthSelect:"اختيار الشهر",yearSelect:"اختيار السنة",decadeSelect:"اختيار العقد",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"الشهر السابق (PageUp)",nextMonth:"الشهر التالى(PageDown)",previousYear:"العام السابق (Control + left)",nextYear:"العام التالى (Control + right)",previousDecade:"العقد السابق",nextDecade:"العقد التالى",previousCentury:"القرن السابق",nextCentury:"القرن التالى"});Ah.default=Uk;var md={};Object.defineProperty(md,"__esModule",{value:!0});md.default=void 0;const Vk={placeholder:"اختيار الوقت",rangePlaceholder:["وقت البدء","وقت الانتهاء"]};md.default=Vk;var LS=Rs.default;Object.defineProperty(hd,"__esModule",{value:!0});hd.default=void 0;var Hk=LS(Ah),Wk=LS(md);const qk={lang:Object.assign({placeholder:"اختيار التاريخ",rangePlaceholder:["البداية","النهاية"],yearFormat:"YYYY",monthFormat:"MMMM",monthBeforeYear:!0,shortWeekDays:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],shortMonths:["يناير","فبراير","مارس","إبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},Hk.default),timePickerLocale:Object.assign({},Wk.default)};hd.default=qk;var Yk=Rs.default;Object.defineProperty(Nh,"__esModule",{value:!0});Nh.default=void 0;var Gk=Yk(hd);Nh.default=Gk.default;var Ch=Rs.default;Object.defineProperty(wh,"__esModule",{value:!0});wh.default=void 0;var Kk=Ch(Sh),Jk=Ch(Nh),Xk=Ch(hd),Qk=Ch(md);const fn="ليس ${label} من نوع ${type} صالحًا",Zk={locale:"ar",Pagination:Kk.default,DatePicker:Xk.default,TimePicker:Qk.default,Calendar:Jk.default,global:{placeholder:"يرجى التحديد",close:"إغلاق"},Table:{filterTitle:"الفلاتر",filterConfirm:"تأكيد",filterReset:"إعادة ضبط",selectAll:"اختيار الكل",selectInvert:"إلغاء الاختيار",selectionAll:"حدد جميع البيانات",sortTitle:"رتب",expand:"توسيع الصف",collapse:"طي الصف",triggerDesc:"ترتيب تنازلي",triggerAsc:"ترتيب تصاعدي",cancelSort:"إلغاء الترتيب"},Tour:{Next:"التالي",Previous:"السابق",Finish:"إنهاء"},Modal:{okText:"تأكيد",cancelText:"إلغاء",justOkText:"تأكيد"},Popconfirm:{okText:"تأكيد",cancelText:"إلغاء"},Transfer:{titles:["",""],searchPlaceholder:"ابحث هنا",itemUnit:"عنصر",itemsUnit:"عناصر"},Upload:{uploading:"جاري الرفع...",removeFile:"احذف الملف",uploadError:"مشكلة فى الرفع",previewFile:"استعرض الملف",downloadFile:"تحميل الملف"},Empty:{description:"لا توجد بيانات"},Icon:{icon:"أيقونة"},Text:{edit:"تعديل",copy:"نسخ",copied:"نقل",expand:"وسع"},Form:{defaultValidateMessages:{default:"خطأ في حقل الإدخال ${label}",required:"يرجى إدخال ${label}",enum:"${label} يجب أن يكون واحدا من [${enum}]",whitespace:"${label} لا يمكن أن يكون حرفًا فارغًا",date:{format:"${label} تنسيق التاريخ غير صحيح",parse:"${label} لا يمكن تحويلها إلى تاريخ",invalid:"تاريخ ${label} غير صحيح"},types:{string:fn,method:fn,array:fn,object:fn,number:fn,date:fn,boolean:fn,integer:fn,float:fn,regexp:fn,email:fn,url:fn,hex:fn},string:{len:"يجب ${label} ان يكون ${len} أحرف",min:"${label} على الأقل ${min} أحرف",max:"${label} يصل إلى ${max} أحرف",range:"يجب ${label} ان يكون مابين ${min}-${max} أحرف"},number:{len:"${len} ان يساوي ${label} يجب",min:"${min} الأدنى هو ${label} حد",max:"${max} الأقصى هو ${label} حد",range:"${max}-${min} ان يكون مابين ${label} يجب"},array:{len:"يجب أن يكون ${label} طوله ${len}",min:"يجب أن يكون ${label} طوله الأدنى ${min}",max:"يجب أن يكون ${label} طوله الأقصى ${max}",range:"يجب أن يكون ${label} طوله مابين ${min}-${max}"},pattern:{mismatch:"لا يتطابق ${label} مع ${pattern}"}}},Image:{preview:"معاينة"},QRCode:{expired:"انتهت صلاحية رمز الاستجابة السريعة",refresh:"انقر للتحديث",scanned:"تم المسح"},ColorPicker:{presetEmpty:"لا يوجد",transparent:"شفاف",singleColor:"لون واحد",gradientColor:"تدرج لوني"}};wh.default=Zk;var eO=wh;const zS=at(eO);var kh={},Oh={};Object.defineProperty(Oh,"__esModule",{value:!0});Oh.default=void 0;var tO={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};Oh.default=tO;var Eh={},gd={},Ph={},rO=Rs.default;Object.defineProperty(Ph,"__esModule",{value:!0});Ph.default=void 0;var Cv=rO(_S),nO=pd,aO=(0,Cv.default)((0,Cv.default)({},nO.commonLocale),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});Ph.default=aO;var xd={};Object.defineProperty(xd,"__esModule",{value:!0});xd.default=void 0;const sO={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};xd.default=sO;var FS=Rs.default;Object.defineProperty(gd,"__esModule",{value:!0});gd.default=void 0;var iO=FS(Ph),oO=FS(xd);const lO={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},iO.default),timePickerLocale:Object.assign({},oO.default)};gd.default=lO;var cO=Rs.default;Object.defineProperty(Eh,"__esModule",{value:!0});Eh.default=void 0;var dO=cO(gd);Eh.default=dO.default;var Th=Rs.default;Object.defineProperty(kh,"__esModule",{value:!0});kh.default=void 0;var uO=Th(Oh),fO=Th(Eh),hO=Th(gd),pO=Th(xd);const hn="${label} is not a valid ${type}",mO={locale:"en",Pagination:uO.default,DatePicker:hO.default,TimePicker:pO.default,Calendar:fO.default,global:{placeholder:"Please select",close:"Close"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:hn,method:hn,array:hn,object:hn,number:hn,date:hn,boolean:hn,integer:hn,float:hn,regexp:hn,email:hn,url:hn,hex:hn},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};kh.default=mO;var gO=kh;const xO=at(gO),BS=N.createContext(),Se=()=>{const t=N.useContext(BS);if(!t)throw new Error("useLanguage must be used within LanguageProvider");return t},yO={ar:{home:"الرئيسية",about:"من نحن",consultants:"المستشارون",blog:"المدونة",contact:"اتصل بنا",login:"تسجيل الدخول",myAccount:"حسابي",requestConsultation:"طلب استشارة",heroTitle:"نحو قرارات اقتصادية واستثمارية أكثر جدوى",heroSubtitle:"استشارات اقتصادية وإدارية قائمة على التحليلات والقياس",bookConsultation:"احجز استشارة الآن",exploreServices:"استكشف الخدمات",services:"خدماتنا",economicConsulting:"الاستشارات الاقتصادية",feasibilityStudies:"دراسات الجدوى",economicAnalysis:"التحليل الاقتصادي والقياسي",videoConsultation:"استشارة فيديو/محادثة",reportsTemplates:"التقارير الاقتصادية والقوالب",ourConsultants:"مستشارونا",viewAllConsultants:"عرض جميع المستشارين",smartPlatform:"المنصة الذكية",instantBooking:"حجز استشارة فوري",dashboardReports:"تقارير لوحة تحليلية",supportSectors:"دعم القطاعين الحكومي والخاص",reports:"التقارير والتحليلات",viewAllReports:"عرض جميع التقارير",saudiEconomy2025:"اتجاهات الاقتصاد السعودي 2025",meccaProjects:"تحليل تأثير المشاريع الضخمة - مكة",investmentIndex:"مؤشر نشاط الاستثمار جدوى",testimonials:"آراء العملاء",partners:"شركاؤنا",quickLinks:"روابط سريعة",contactInfo:"معلومات الاتصال",privacy:"سياسة الخصوصية",terms:"الشروط والأحكام",copyright:"© 2025 منصة جدوى للاستشارات",dashboardOverview:"لوحة التحكم",platformPerformance:"نظرة عامة على أداء المنصة",activeClients:"العملاء النشطون",totalClients:"إجمالي العملاء",activeConsultants:"المستشارون النشطون",totalConsultants:"إجمالي المستشارين",completedSessions:"الجلسات المكتملة",totalSessions:"إجمالي الجلسات",pendingSessions:"الجلسات المعلقة",confirmedSessions:"الجلسات المؤكدة",monthlyRevenue:"الإيرادات الشهرية",totalRevenue:"إجمالي الإيرادات",revenueGrowth:"نمو الإيرادات",averageRating:"متوسط التقييم",totalRatings:"إجمالي التقييمات",cancelledSessions:"الجلسات الملغاة",totalBookings:"إجمالي الحجوزات",totalServices:"إجمالي الخدمات",activeServices:"الخدمات النشطة",totalArticles:"إجمالي المقالات",publishedArticles:"المقالات المنشورة",totalPayments:"إجمالي المدفوعات",pendingPayments:"المدفوعات المعلقة",totalReports:"إجمالي التقارير",monthlyRevenueTrend:"اتجاه الإيرادات الشهرية",sessionsStatus:"حالة الجلسات",servicesDistribution:"توزيع الخدمات",performanceComparison:"مقارنة الأداء",topConsultants:"أفضل المستشارين",recentBookings:"الحجوزات الأخيرة",revenueByMonth:"الإيرادات حسب الشهر",sessionsByStatus:"الجلسات حسب الحالة"},en:{home:"Home",about:"About",consultants:"Consultants",blog:"Blog",contact:"Contact Us",login:"Login",myAccount:"My Account",requestConsultation:"Request Consultation",heroTitle:"Towards More Viable Economic and Investment Decisions",heroSubtitle:"Economic and administrative consulting based on analytics and measurement",bookConsultation:"Book Consultation Now",exploreServices:"Explore Services",services:"Our Services",economicConsulting:"Economic Consultations",feasibilityStudies:"Feasibility Studies",economicAnalysis:"Economic & Econometric Analysis",videoConsultation:"Video/Chat Consultation",reportsTemplates:"Economic Reports & Templates",ourConsultants:"Our Consultants",viewAllConsultants:"View All Consultants",smartPlatform:"Smart Platform",instantBooking:"Instant Consultation Booking",dashboardReports:"Analytical Dashboard Reports",supportSectors:"Support for Government & Private Sectors",reports:"Reports & Analytics",viewAllReports:"View All Reports",saudiEconomy2025:"Saudi Economy Trends 2025",meccaProjects:"Mega Projects Impact Analysis – Makkah",investmentIndex:"Jadwa Investment Activity Index",testimonials:"Testimonials",partners:"Our Partners",quickLinks:"Quick Links",contactInfo:"Contact Information",privacy:"Privacy Policy",terms:"Terms & Conditions",copyright:"© 2025 Jadwa Consulting Platform",dashboardOverview:"Dashboard Overview",platformPerformance:"Platform performance overview",activeClients:"Active Clients",totalClients:"Total Clients",activeConsultants:"Active Consultants",totalConsultants:"Total Consultants",completedSessions:"Completed Sessions",totalSessions:"Total Sessions",pendingSessions:"Pending Sessions",confirmedSessions:"Confirmed Sessions",monthlyRevenue:"Monthly Revenue",totalRevenue:"Total Revenue",revenueGrowth:"Revenue Growth",averageRating:"Average Rating",totalRatings:"Total Ratings",cancelledSessions:"Cancelled Sessions",totalBookings:"Total Bookings",totalServices:"Total Services",activeServices:"Active Services",totalArticles:"Total Articles",publishedArticles:"Published Articles",totalPayments:"Total Payments",pendingPayments:"Pending Payments",totalReports:"Total Reports",monthlyRevenueTrend:"Monthly Revenue Trend",sessionsStatus:"Sessions Status",servicesDistribution:"Services Distribution",performanceComparison:"Performance Comparison",topConsultants:"Top Consultants",recentBookings:"Recent Bookings",revenueByMonth:"Revenue by Month",sessionsByStatus:"Sessions by Status"}},vO=({children:t})=>{const[e,r]=N.useState(()=>localStorage.getItem("language")||"ar");N.useEffect(()=>{localStorage.setItem("language",e),document.documentElement.setAttribute("dir",e==="ar"?"rtl":"ltr"),document.documentElement.setAttribute("lang",e)},[e]);const n=()=>{r(o=>o==="ar"?"en":"ar")},a=o=>{var l;return((l=yO[e])==null?void 0:l[o])||o},i=e==="ar"?zS:xO;return s.jsx(BS.Provider,{value:{language:e,setLanguage:r,toggleLanguage:n,t:a},children:s.jsx(AS,{locale:i,direction:e==="ar"?"rtl":"ltr",children:t})})},US=N.createContext(),yd=()=>{const t=N.useContext(US);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t},bO=({children:t})=>{const[e,r]=N.useState("light"),[n,a]=N.useState(()=>{const l=localStorage.getItem("dashboardSettings");return l?JSON.parse(l):{logo:null,dashboardName:"Jadwa",dashboardNameAr:"جدوى",primaryFont:"Inter",arabicFont:"Cairo",animationsEnabled:!0,animationSpeed:"normal",primaryColor:"#7a8c66",secondaryColor:"#14b8a6"}});N.useEffect(()=>{document.documentElement.setAttribute("data-theme","light"),document.documentElement.classList.remove("dark");const l=document.documentElement;l.style.setProperty("--bg-primary","#ffffff"),l.style.setProperty("--bg-secondary","#f8f9fa"),l.style.setProperty("--text-primary","#1a1a1a"),l.style.setProperty("--text-secondary","#666666")},[]),N.useEffect(()=>{localStorage.setItem("dashboardSettings",JSON.stringify(n));const l=document.documentElement;l.style.setProperty("--font-primary",n.primaryFont),l.style.setProperty("--font-arabic",n.arabicFont),l.style.setProperty("--animation-enabled",n.animationsEnabled?"1":"0"),l.style.setProperty("--animation-speed",n.animationSpeed==="slow"?"0.5s":n.animationSpeed==="fast"?"0.2s":"0.3s"),l.style.setProperty("--color-primary",n.primaryColor),l.style.setProperty("--color-secondary",n.secondaryColor)},[n]);const i=()=>{},o=l=>{a(c=>({...c,...l}))};return s.jsx(US.Provider,{value:{theme:e,toggleTheme:i,settings:n,updateSettings:o},children:t})},Ni=t=>{if(typeof document>"u")return null;const r=`; ${document.cookie}`.split(`; ${t}=`);return r.length===2?r.pop().split(";").shift():null},_d=(t,e,r=7)=>{if(typeof document>"u")return;const n=new Date;n.setTime(n.getTime()+r*24*60*60*1e3),document.cookie=`${t}=${e};expires=${n.toUTCString()};path=/;SameSite=Lax`},wu=t=>{typeof document>"u"||(document.cookie=`${t}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`)},gi="http://localhost:5000/api",Su=()=>Ni("accessToken"),jO=()=>{wu("accessToken"),wu("refreshToken")},G=async(t,e={})=>{var a,i,o,l,c,d,u;const r=Su(),n={...e,headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...e.headers}};try{const f=await fetch(`${gi}${t}`,n);if(!f)throw new Error("Cannot connect to server. Please make sure the backend server is running on http://localhost:5000");if(!f.ok){const h=await f.json().catch(()=>({error:"Network error"}));if(f.status===401&&(jO(),(window.location.pathname.startsWith("/admin")||window.location.pathname.startsWith("/client")||window.location.pathname.startsWith("/consultant"))&&window.location.pathname!=="/login"&&(sessionStorage.getItem("redirecting")||(sessionStorage.setItem("redirecting","true"),setTimeout(()=>{sessionStorage.removeItem("redirecting"),window.location.href="/login"},100)))),f.status!==401){const p=new Error(h.error||`HTTP error! status: ${f.status}`);throw p.status=f.status,p.response={status:f.status},p}else{const p=new Error(h.error||"Unauthorized. Please login again.");throw p.status=401,p.response={status:401},p}}return await f.json()}catch(f){if(((a=f.message)==null?void 0:a.includes("Access denied"))||((i=f.message)==null?void 0:i.includes("not found"))||((o=f.message)==null?void 0:o.includes("Session not found"))||((l=f.message)==null?void 0:l.includes("Booking not found"))||f.status===404||((c=f.response)==null?void 0:c.status)===404||((d=f.message)==null?void 0:d.includes("403"))||((u=f.message)==null?void 0:u.includes("404"))||console.error("API Error:",f),f.message.includes("Failed to fetch")||f.message.includes("ERR_CONNECTION_REFUSED")||f.name==="TypeError"){const p=new Error(`Cannot connect to backend server. Please:
1. Make sure the backend server is running (npm run dev in backend folder)
2. Check that the server is running on http://localhost:5000
3. Verify your .env file is configured correctly`);throw p.name="ConnectionError",p}throw f}},pu={login:(t,e)=>G("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:e})}),register:t=>G("/auth/register",{method:"POST",body:JSON.stringify(t)}),getProfile:()=>G("/auth/profile"),updateProfile:t=>G("/auth/profile",{method:"PUT",body:JSON.stringify(t)}),changePassword:(t,e)=>G("/auth/change-password",{method:"PUT",body:JSON.stringify({currentPassword:t,newPassword:e})})},VS={getDashboardStats:()=>G("/client/dashboard/stats"),getBookings:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/client/bookings${e?`?${e}`:""}`)},getConsultations:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/client/consultations${e?`?${e}`:""}`)}},Es={getEarnings:()=>G("/consultants/earnings"),getDashboardStats:()=>G("/consultants/dashboard/stats"),getConsultants:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/consultants${e?`?${e}`:""}`)},getConsultantById:t=>G(`/consultants/${t}`),getAvailability:(t,e)=>G(`/consultants/${t}/availability${e?`?date=${e}`:""}`),updateProfile:t=>G("/consultants/profile",{method:"PUT",body:JSON.stringify(t)}),requestWithdrawal:t=>G("/consultants/withdrawals/request",{method:"POST",body:JSON.stringify(t)}),setAvailability:t=>G("/consultants/availability",{method:"PUT",body:JSON.stringify({slots:t})})},Ke={getDashboardStats:()=>G("/admin/dashboard/stats"),getClients:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/admin/clients${e?`?${e}`:""}`)},getConsultants:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/admin/consultants${e?`?${e}`:""}`)},getBookings:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/admin/bookings${e?`?${e}`:""}`)},updateBooking:(t,e)=>G(`/admin/bookings/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteBooking:t=>G(`/admin/bookings/${t}`,{method:"DELETE"}),createClient:t=>G("/admin/clients",{method:"POST",body:JSON.stringify(t)}),updateClient:(t,e)=>G(`/admin/clients/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteClient:t=>G(`/admin/clients/${t}`,{method:"DELETE"}),createConsultant:t=>G("/admin/consultants",{method:"POST",body:JSON.stringify(t)}),updateConsultant:(t,e)=>G(`/admin/consultants/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteConsultant:t=>G(`/admin/consultants/${t}`,{method:"DELETE"}),getPayments:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/admin/payments${e?`?${e}`:""}`)},getReports:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/admin/reports${e?`?${e}`:""}`)},reviewConsultant:(t,e)=>G(`/admin/consultants/${t}/review`,{method:"PUT",body:JSON.stringify({action:e})}),toggleUserStatus:(t,e)=>G(`/admin/users/${t}/status`,{method:"PUT",body:JSON.stringify({isActive:e})}),resetUserPassword:(t,e)=>G(`/admin/users/${t}/reset-password`,{method:"PUT",body:JSON.stringify({newPassword:e})}),getClientById:t=>G(`/admin/clients/${t}`),getClientBookings:t=>G(`/admin/clients/${t}/bookings`),getClientPayments:t=>G(`/admin/clients/${t}/payments`),getClientReports:t=>G(`/admin/clients/${t}/reports`),sendProfitToClient:(t,e,r)=>G(`/admin/clients/${t}/profit`,{method:"POST",body:JSON.stringify({amount:e,notes:r})}),deductFromClient:(t,e,r)=>G(`/admin/clients/${t}/deduct`,{method:"POST",body:JSON.stringify({amount:e,reason:r})}),suspendClient:(t,e,r)=>G(`/admin/clients/${t}/suspend`,{method:"POST",body:JSON.stringify({reason:e,duration:r})}),getConsultantById:t=>G(`/admin/consultants/${t}`),getConsultantBookings:t=>G(`/admin/consultants/${t}/bookings`),getConsultantEarnings:t=>G(`/admin/consultants/${t}/earnings`),getConsultantWithdrawals:t=>G(`/admin/consultants/${t}/withdrawals`),sendProfitToConsultant:(t,e,r)=>G(`/admin/consultants/${t}/profit`,{method:"POST",body:JSON.stringify({amount:e,notes:r})}),deductFromConsultant:(t,e,r)=>G(`/admin/consultants/${t}/deduct`,{method:"POST",body:JSON.stringify({amount:e,reason:r})}),suspendConsultant:(t,e,r)=>G(`/admin/consultants/${t}/suspend`,{method:"POST",body:JSON.stringify({reason:e,duration:r})}),exportReportsPDF:(t={})=>{const e=new URLSearchParams(t).toString();return`${gi}/admin/reports/export/pdf${e?`?${e}`:""}`},exportReportsCSV:(t={})=>{const e=new URLSearchParams(t).toString();return`${gi}/admin/reports/export/csv${e?`?${e}`:""}`},exportPaymentsCSV:(t={})=>{const e=new URLSearchParams(t).toString();return`${gi}/admin/payments/export/csv${e?`?${e}`:""}`},createDirectSession:(t,e="chat")=>G("/admin/sessions/direct",{method:"POST",body:JSON.stringify({userId:t,sessionType:e})}),deleteSession:t=>G(`/admin/sessions/${t}`,{method:"DELETE"}),stopSession:t=>G(`/admin/sessions/${t}/stop`,{method:"PUT"}),getAllUsers:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/admin/users${e?`?${e}`:""}`)}},ei={getGeneralSettings:()=>G("/settings/general"),updateGeneralSettings:t=>G("/settings/general",{method:"PUT",body:JSON.stringify(t)}),getPaymentSettings:()=>G("/settings/payment"),updatePaymentSettings:t=>G("/settings/payment",{method:"PUT",body:JSON.stringify(t)}),getIntegrationSettings:()=>G("/settings/integration"),updateIntegrationSettings:t=>G("/settings/integration",{method:"PUT",body:JSON.stringify(t)})},gs={getServices:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/services${e?`?${e}`:""}`)},getServiceById:t=>G(`/services/${t}`),createService:t=>G("/services",{method:"POST",body:JSON.stringify(t)}),updateService:(t,e)=>G(`/services/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteService:t=>G(`/services/${t}`,{method:"DELETE"})},Lr={getBookings:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/bookings${e?`?${e}`:""}`)},getBookingById:t=>G(`/bookings/${t}`),createBooking:t=>G("/bookings",{method:"POST",body:JSON.stringify(t)}),updateBookingStatus:(t,e,r)=>G(`/bookings/${t}/status`,{method:"PUT",body:JSON.stringify({status:e,consultantNotes:r})}),cancelBooking:t=>G(`/bookings/${t}/cancel`,{method:"PUT"}),rateBooking:(t,e,r)=>G(`/bookings/${t}/rate`,{method:"POST",body:JSON.stringify({rating:e,comment:r})})},Wl={getPages:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/cms${e?`?${e}`:""}`)},getPageBySlug:t=>G(`/cms/${t}`),createPage:t=>G("/cms",{method:"POST",body:JSON.stringify(t)}),updatePage:(t,e)=>G(`/cms/${t}`,{method:"PUT",body:JSON.stringify(e)}),deletePage:t=>G(`/cms/${t}`,{method:"DELETE"})},pr={getArticles:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/articles${e?`?${e}`:""}`)},getArticleById:t=>G(`/articles/id/${t}`),getArticleBySlug:t=>G(`/articles/${t}`),createArticle:t=>G("/articles",{method:"POST",body:JSON.stringify(t)}),updateArticle:(t,e)=>G(`/articles/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteArticle:t=>G(`/articles/${t}`,{method:"DELETE"}),publishArticle:t=>G(`/articles/${t}`,{method:"PUT",body:JSON.stringify({status:"PUBLISHED",publishedAt:new Date().toISOString()})})},ti={getPermissions:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/permissions/permissions${e?`?${e}`:""}`)},getRoles:()=>G("/permissions/roles"),createRole:t=>G("/permissions/roles",{method:"POST",body:JSON.stringify(t)}),updateRole:(t,e)=>G(`/permissions/roles/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteRole:t=>G(`/permissions/roles/${t}`,{method:"DELETE"}),assignRoleToUser:(t,e,r)=>G(`/permissions/users/${t}/roles`,{method:"POST",body:JSON.stringify({roleId:e,expiresAt:r})}),getUserPermissions:t=>G(`/permissions/users/${t}/permissions`),initializePermissions:()=>G("/permissions/initialize",{method:"POST"})},ra={uploadFile:async t=>{const e=Su(),r=await fetch(`${gi}/files/upload`,{method:"POST",headers:{...e&&{Authorization:`Bearer ${e}`}},body:t});if(!r.ok){const n=await r.json().catch(()=>({error:`HTTP error! status: ${r.status}`}));throw new Error(n.error||`Failed to upload file: ${r.status}`)}return await r.json()},getFilesByOwner:(t,e)=>G(`/files/files?ownerType=${t}&ownerId=${e}`),downloadFile:t=>`${gi}/files/files/${t}/download?token=${Su()}`,deleteFile:t=>G(`/files/files/${t}`,{method:"DELETE"})},$t={getConversations:()=>G("/messages/conversations"),getMessages:t=>G(`/messages/session/${t}`),sendMessage:(t,e)=>G(`/messages/session/${t}`,{method:"POST",body:JSON.stringify(e)}),sendMessageAsAdmin:(t,e)=>G(`/messages/session/${t}/admin`,{method:"POST",body:JSON.stringify(e)}),markAsRead:t=>G(`/messages/session/${t}/read`,{method:"PUT"})},Mt={getSessionByBooking:t=>G(`/sessions/booking/${t}`),startSession:(t,e)=>G(`/sessions/booking/${t}/start`,{method:"POST",body:JSON.stringify({roomId:e})}),endSession:t=>G(`/sessions/booking/${t}/end`,{method:"POST"}),generateVideoRoom:t=>G(`/sessions/booking/${t}/video-room`,{method:"POST"}),getVideoRoom:t=>G(`/sessions/booking/${t}/video-room`)},mu={getSystemLogs:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/monitoring/logs/system${e?`?${e}`:""}`)},getAuditLogs:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/monitoring/logs/audit${e?`?${e}`:""}`)},getSecurityStats:()=>G("/monitoring/security/stats")},ql={getNotifications:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/notifications${e?`?${e}`:""}`)},markAsRead:t=>G(`/notifications/${t}/read`,{method:"PUT"}),markAllAsRead:()=>G("/notifications/read-all",{method:"PUT"}),deleteNotification:t=>G(`/notifications/${t}`,{method:"DELETE"}),sendNotification:t=>G("/notifications/send",{method:"POST",body:JSON.stringify(t)}),sendBulkNotifications:t=>G("/notifications/send-bulk",{method:"POST",body:JSON.stringify(t)}),getAllNotifications:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/notifications/all${e?`?${e}`:""}`)},getNotificationStats:()=>G("/notifications/stats")},nn={getMyTickets:()=>G("/support/my-tickets"),getAllTickets:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/support${e?`?${e}`:""}`)},getTicketById:t=>G(`/support/${t}`),createTicket:t=>G("/support",{method:"POST",body:JSON.stringify(t)}),updateTicket:(t,e)=>G(`/support/${t}`,{method:"PUT",body:JSON.stringify(e)}),addComment:(t,e)=>G(`/support/${t}/comments`,{method:"POST",body:JSON.stringify({content:e})}),getTicketStats:()=>G("/support/stats/overview")},Nu={getReports:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/reports${e?`?${e}`:""}`)},getReportById:t=>G(`/reports/${t}`),getPublicReports:()=>G("/reports/public"),getPublicReportById:t=>G(`/reports/public/${t}`),uploadReport:t=>{const e=Su();return fetch(`${gi}/reports`,{method:"POST",headers:{...e&&{Authorization:`Bearer ${e}`}},body:t}).then(r=>r.json())},reviewReport:(t,e)=>G(`/reports/${t}/review`,{method:"PUT",body:JSON.stringify({status:e})})},io={getPartners:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/partners${e?`?${e}`:""}`)},getPartnerById:t=>G(`/partners/${t}`),createPartner:t=>G("/partners",{method:"POST",body:JSON.stringify(t)}),updatePartner:(t,e)=>G(`/partners/${t}`,{method:"PUT",body:JSON.stringify(e)}),deletePartner:t=>G(`/partners/${t}`,{method:"DELETE"})},Yl={getCategories:(t={})=>{const e=new URLSearchParams(t).toString();return G(`/categories${e?`?${e}`:""}`)},getCategoryById:t=>G(`/categories/${t}`),createCategory:t=>G("/categories",{method:"POST",body:JSON.stringify(t)}),updateCategory:(t,e)=>G(`/categories/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteCategory:t=>G(`/categories/${t}`,{method:"DELETE"})},Fr={authAPI:pu,clientAPI:VS,consultantAPI:Es,adminAPI:Ke,servicesAPI:gs,bookingsAPI:Lr,notificationsAPI:ql,cmsAPI:Wl,articlesAPI:pr,permissionsAPI:ti,filesAPI:ra,sessionsAPI:Mt,monitoringAPI:mu,messageAPI:$t,settingsAPI:ei,supportAPI:nn,reportAPI:Nu,partnersAPI:io,categoriesAPI:Yl},HS=N.createContext(null),wO=({children:t})=>{const[e,r]=N.useState(null),[n,a]=N.useState(!0),[i,o]=N.useState(!1);N.useEffect(()=>{l()},[]);const l=async()=>{if(!Ni("accessToken")){a(!1);return}try{const m=await pu.getProfile();r(m.user),o(!0)}catch(m){console.error("Auth check failed:",m),m.message&&m.message.includes("Unauthorized")?u():a(!1)}finally{a(!1)}},c=async(p,m)=>{try{const x=await pu.login(p,m);return _d("accessToken",x.tokens.accessToken,7),_d("refreshToken",x.tokens.refreshToken,7),localStorage.setItem("accessToken",x.tokens.accessToken),localStorage.setItem("refreshToken",x.tokens.refreshToken),r(x.user),o(!0),R.success("Login successful!"),{success:!0,user:x.user}}catch(x){return R.error(x.message||"Login failed"),{success:!1,error:x.message}}},d=async p=>{try{const m=await pu.register(p);return _d("accessToken",m.tokens.accessToken,7),_d("refreshToken",m.tokens.refreshToken,7),localStorage.setItem("accessToken",m.tokens.accessToken),localStorage.setItem("refreshToken",m.tokens.refreshToken),r(m.user),o(!0),R.success("Registration successful!"),{success:!0,user:m.user}}catch(m){return R.error(m.message||"Registration failed"),{success:!1,error:m.message}}},u=()=>{wu("accessToken"),wu("refreshToken"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),r(null),o(!1),R.info("Logged out successfully")},h={user:e,isAuthenticated:i,loading:n,login:c,register:d,logout:u,updateUser:p=>{r({...e,...p})},checkAuth:l};return s.jsx(HS.Provider,{value:h,children:t})},yr=()=>{const t=N.useContext(HS);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},Vp=({children:t,requiredRole:e=null,adminOnly:r=!1})=>{let n;try{n=yr()}catch{return s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx(et,{size:"large"})})}const{isAuthenticated:a,loading:i,user:o,checkAuth:l}=n,c=dl();if(N.useEffect(()=>{Ni("accessToken")&&!a&&!i&&l()},[c.pathname]),i)return s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx(et,{size:"large"})});const d=Ni("accessToken");return!a&&!d?s.jsx(Kn,{to:"/login",state:{from:c},replace:!0}):d&&!a&&!i?s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx(et,{size:"large"})}):r&&!["ADMIN","SUPER_ADMIN","ANALYST","SUPPORT","FINANCE"].includes(o==null?void 0:o.role)?(o==null?void 0:o.role)==="CLIENT"?s.jsx(Kn,{to:"/client",replace:!0}):(o==null?void 0:o.role)==="CONSULTANT"?s.jsx(Kn,{to:"/consultant",replace:!0}):s.jsx(Kn,{to:"/",replace:!0}):e&&(o==null?void 0:o.role)!==e?(o==null?void 0:o.role)==="CLIENT"?s.jsx(Kn,{to:"/client",replace:!0}):(o==null?void 0:o.role)==="CONSULTANT"?s.jsx(Kn,{to:"/consultant",replace:!0}):["ADMIN","SUPER_ADMIN","ANALYST","SUPPORT","FINANCE"].includes(o==null?void 0:o.role)?s.jsx(Kn,{to:"/admin",replace:!0}):s.jsx(Kn,{to:"/",replace:!0}):t};var SO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"}},{tag:"path",attrs:{d:"M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"}}]},name:"aim",theme:"outlined"},NO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:SO}))},AO=N.forwardRef(NO),CO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"},kO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:CO}))},kv=N.forwardRef(kO),OO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"},EO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:OO}))},So=N.forwardRef(EO),PO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},TO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:PO}))},Di=N.forwardRef(TO),IO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},MO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:IO}))},Au=N.forwardRef(MO),$O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z"}}]},name:"audio",theme:"outlined"},RO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:$O}))},No=N.forwardRef(RO),DO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z"}}]},name:"bank",theme:"outlined"},_O=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:DO}))},c0=N.forwardRef(_O),LO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},zO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:LO}))},vd=N.forwardRef(zO),FO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z"}}]},name:"bell",theme:"outlined"},BO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:FO}))},gc=N.forwardRef(BO),UO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zm-377.1-44.1c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-.6-.6-1.3-1.2-2-1.7l-78.2-78.2a9.11 9.11 0 00-12.8 0l-48 48a9.11 9.11 0 000 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256zm12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z"}}]},name:"bg-colors",theme:"outlined"},VO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:UO}))},Ov=N.forwardRef(VO),HO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"},WO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:HO}))},xc=N.forwardRef(WO),qO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M632 888H392c-4.4 0-8 3.6-8 8v32c0 17.7 14.3 32 32 32h192c17.7 0 32-14.3 32-32v-32c0-4.4-3.6-8-8-8zM512 64c-181.1 0-328 146.9-328 328 0 121.4 66 227.4 164 284.1V792c0 17.7 14.3 32 32 32h264c17.7 0 32-14.3 32-32V676.1c98-56.7 164-162.7 164-284.1 0-181.1-146.9-328-328-328zm127.9 549.8L604 634.6V752H420V634.6l-35.9-20.8C305.4 568.3 256 484.5 256 392c0-141.4 114.6-256 256-256s256 114.6 256 256c0 92.5-49.4 176.3-128.1 221.8z"}}]},name:"bulb",theme:"outlined"},YO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:qO}))},Cu=N.forwardRef(YO),GO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M251.2 387H320v68.8c0 1.8 1.8 3.2 4 3.2h48c2.2 0 4-1.4 4-3.3V387h68.8c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H376v-68.8c0-1.8-1.8-3.2-4-3.2h-48c-2.2 0-4 1.4-4 3.2V331h-68.8c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm328 0h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 265h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 104h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm-195.7-81l61.2-74.9c4.3-5.2.7-13.1-5.9-13.1H388c-2.3 0-4.5 1-5.9 2.9l-34 41.6-34-41.6a7.85 7.85 0 00-5.9-2.9h-50.9c-6.6 0-10.2 7.9-5.9 13.1l61.2 74.9-62.7 76.8c-4.4 5.2-.8 13.1 5.8 13.1h50.8c2.3 0 4.5-1 5.9-2.9l35.5-43.5 35.5 43.5c1.5 1.8 3.7 2.9 5.9 2.9h50.8c6.6 0 10.2-7.9 5.9-13.1L383.5 675zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-36 732H180V180h664v664z"}}]},name:"calculator",theme:"outlined"},KO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:GO}))},WS=N.forwardRef(KO),JO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"},XO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:JO}))},Ih=N.forwardRef(XO),QO={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},ZO=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:QO}))},vt=N.forwardRef(ZO),eE={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},tE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:eE}))},yc=N.forwardRef(tE),rE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},nE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:rE}))},d0=N.forwardRef(nE),aE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"},sE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:aE}))},qS=N.forwardRef(sE),iE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar",theme:"outlined"},oE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:iE}))},ir=N.forwardRef(oE),lE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 289.1a362.49 362.49 0 00-79.9-115.7 370.83 370.83 0 00-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 00169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0022.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"}}]},name:"environment",theme:"outlined"},cE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:lE}))},Mh=N.forwardRef(cE),dE={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},uE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:dE}))},fE=N.forwardRef(uE),hE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z"}}]},name:"facebook",theme:"outlined"},pE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:hE}))},mE=N.forwardRef(pE),gE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},xE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:gE}))},yE=N.forwardRef(xE),vE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0010.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 00-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"}}]},name:"file-excel",theme:"outlined"},bE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:vE}))},jE=N.forwardRef(bE),wE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"},SE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:wE}))},NE=N.forwardRef(SE),AE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-.7-29.9 8.3-33.4 21.4-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-pdf",theme:"outlined"},CE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:AE}))},ku=N.forwardRef(CE),kE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},OE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:kE}))},EE=N.forwardRef(OE),PE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 416H616c-4.4 0-8 3.6-8 8v112c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-56h60v320h-46c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h164c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8h-46V480h60v56c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V424c0-4.4-3.6-8-8-8zM656 296V168c0-4.4-3.6-8-8-8H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8z"}}]},name:"font-size",theme:"outlined"},TE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:PE}))},IE=N.forwardRef(TE),ME={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.4 800.9c.2-.3.5-.6.7-.9C920.6 722.1 960 621.7 960 512s-39.4-210.1-104.8-288c-.2-.3-.5-.5-.7-.8-1.1-1.3-2.1-2.5-3.2-3.7-.4-.5-.8-.9-1.2-1.4l-4.1-4.7-.1-.1c-1.5-1.7-3.1-3.4-4.6-5.1l-.1-.1c-3.2-3.4-6.4-6.8-9.7-10.1l-.1-.1-4.8-4.8-.3-.3c-1.5-1.5-3-2.9-4.5-4.3-.5-.5-1-1-1.6-1.5-1-1-2-1.9-3-2.8-.3-.3-.7-.6-1-1C736.4 109.2 629.5 64 512 64s-224.4 45.2-304.3 119.2c-.3.3-.7.6-1 1-1 .9-2 1.9-3 2.9-.5.5-1 1-1.6 1.5-1.5 1.4-3 2.9-4.5 4.3l-.3.3-4.8 4.8-.1.1c-3.3 3.3-6.5 6.7-9.7 10.1l-.1.1c-1.6 1.7-3.1 3.4-4.6 5.1l-.1.1c-1.4 1.5-2.8 3.1-4.1 4.7-.4.5-.8.9-1.2 1.4-1.1 1.2-2.1 2.5-3.2 3.7-.2.3-.5.5-.7.8C103.4 301.9 64 402.3 64 512s39.4 210.1 104.8 288c.2.3.5.6.7.9l3.1 3.7c.4.5.8.9 1.2 1.4l4.1 4.7c0 .1.1.1.1.2 1.5 1.7 3 3.4 4.6 5l.1.1c3.2 3.4 6.4 6.8 9.6 10.1l.1.1c1.6 1.6 3.1 3.2 4.7 4.7l.3.3c3.3 3.3 6.7 6.5 10.1 9.6 80.1 74 187 119.2 304.5 119.2s224.4-45.2 304.3-119.2a300 300 0 0010-9.6l.3-.3c1.6-1.6 3.2-3.1 4.7-4.7l.1-.1c3.3-3.3 6.5-6.7 9.6-10.1l.1-.1c1.5-1.7 3.1-3.3 4.6-5 0-.1.1-.1.1-.2 1.4-1.5 2.8-3.1 4.1-4.7.4-.5.8-.9 1.2-1.4a99 99 0 003.3-3.7zm4.1-142.6c-13.8 32.6-32 62.8-54.2 90.2a444.07 444.07 0 00-81.5-55.9c11.6-46.9 18.8-98.4 20.7-152.6H887c-3 40.9-12.6 80.6-28.5 118.3zM887 484H743.5c-1.9-54.2-9.1-105.7-20.7-152.6 29.3-15.6 56.6-34.4 81.5-55.9A373.86 373.86 0 01887 484zM658.3 165.5c39.7 16.8 75.8 40 107.6 69.2a394.72 394.72 0 01-59.4 41.8c-15.7-45-35.8-84.1-59.2-115.4 3.7 1.4 7.4 2.9 11 4.4zm-90.6 700.6c-9.2 7.2-18.4 12.7-27.7 16.4V697a389.1 389.1 0 01115.7 26.2c-8.3 24.6-17.9 47.3-29 67.8-17.4 32.4-37.8 58.3-59 75.1zm59-633.1c11 20.6 20.7 43.3 29 67.8A389.1 389.1 0 01540 327V141.6c9.2 3.7 18.5 9.1 27.7 16.4 21.2 16.7 41.6 42.6 59 75zM540 640.9V540h147.5c-1.6 44.2-7.1 87.1-16.3 127.8l-.3 1.2A445.02 445.02 0 00540 640.9zm0-156.9V383.1c45.8-2.8 89.8-12.5 130.9-28.1l.3 1.2c9.2 40.7 14.7 83.5 16.3 127.8H540zm-56 56v100.9c-45.8 2.8-89.8 12.5-130.9 28.1l-.3-1.2c-9.2-40.7-14.7-83.5-16.3-127.8H484zm-147.5-56c1.6-44.2 7.1-87.1 16.3-127.8l.3-1.2c41.1 15.6 85 25.3 130.9 28.1V484H336.5zM484 697v185.4c-9.2-3.7-18.5-9.1-27.7-16.4-21.2-16.7-41.7-42.7-59.1-75.1-11-20.6-20.7-43.3-29-67.8 37.2-14.6 75.9-23.3 115.8-26.1zm0-370a389.1 389.1 0 01-115.7-26.2c8.3-24.6 17.9-47.3 29-67.8 17.4-32.4 37.8-58.4 59.1-75.1 9.2-7.2 18.4-12.7 27.7-16.4V327zM365.7 165.5c3.7-1.5 7.3-3 11-4.4-23.4 31.3-43.5 70.4-59.2 115.4-21-12-40.9-26-59.4-41.8 31.8-29.2 67.9-52.4 107.6-69.2zM165.5 365.7c13.8-32.6 32-62.8 54.2-90.2 24.9 21.5 52.2 40.3 81.5 55.9-11.6 46.9-18.8 98.4-20.7 152.6H137c3-40.9 12.6-80.6 28.5-118.3zM137 540h143.5c1.9 54.2 9.1 105.7 20.7 152.6a444.07 444.07 0 00-81.5 55.9A373.86 373.86 0 01137 540zm228.7 318.5c-39.7-16.8-75.8-40-107.6-69.2 18.5-15.8 38.4-29.7 59.4-41.8 15.7 45 35.8 84.1 59.2 115.4-3.7-1.4-7.4-2.9-11-4.4zm292.6 0c-3.7 1.5-7.3 3-11 4.4 23.4-31.3 43.5-70.4 59.2-115.4 21 12 40.9 26 59.4 41.8a373.81 373.81 0 01-107.6 69.2z"}}]},name:"global",theme:"outlined"},$E=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:ME}))},va=N.forwardRef($E),RE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"},DE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:RE}))},eg=N.forwardRef(DE),_E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},LE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:_E}))},u0=N.forwardRef(LE),zE={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},FE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:zE}))},BE=N.forwardRef(FE),UE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},VE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:UE}))},Hp=N.forwardRef(VE),HE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 306.9c-113.5 0-205.1 91.6-205.1 205.1S398.5 717.1 512 717.1 717.1 625.5 717.1 512 625.5 306.9 512 306.9zm0 338.4c-73.4 0-133.3-59.9-133.3-133.3S438.6 378.7 512 378.7 645.3 438.6 645.3 512 585.4 645.3 512 645.3zm213.5-394.6c-26.5 0-47.9 21.4-47.9 47.9s21.4 47.9 47.9 47.9 47.9-21.3 47.9-47.9a47.84 47.84 0 00-47.9-47.9zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zm-88 235.8c-7.3 18.2-16.1 31.8-30.2 45.8-14.1 14.1-27.6 22.9-45.8 30.2C695.2 844.7 570.3 840 512 840c-58.3 0-183.3 4.7-235.9-16.1-18.2-7.3-31.8-16.1-45.8-30.2-14.1-14.1-22.9-27.6-30.2-45.8C179.3 695.2 184 570.3 184 512c0-58.3-4.7-183.3 16.1-235.9 7.3-18.2 16.1-31.8 30.2-45.8s27.6-22.9 45.8-30.2C328.7 179.3 453.7 184 512 184s183.3-4.7 235.9 16.1c18.2 7.3 31.8 16.1 45.8 30.2 14.1 14.1 22.9 27.6 30.2 45.8C844.7 328.7 840 453.7 840 512c0 58.3 4.7 183.2-16.2 235.8z"}}]},name:"instagram",theme:"outlined"},WE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:HE}))},qE=N.forwardRef(WE),YE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.7 112H176.3c-35.5 0-64.3 28.8-64.3 64.3v671.4c0 35.5 28.8 64.3 64.3 64.3h671.4c35.5 0 64.3-28.8 64.3-64.3V176.3c0-35.5-28.8-64.3-64.3-64.3zm0 736c-447.8-.1-671.7-.2-671.7-.3.1-447.8.2-671.7.3-671.7 447.8.1 671.7.2 671.7.3-.1 447.8-.2 671.7-.3 671.7zM230.6 411.9h118.7v381.8H230.6zm59.4-52.2c37.9 0 68.8-30.8 68.8-68.8a68.8 68.8 0 10-137.6 0c-.1 38 30.7 68.8 68.8 68.8zm252.3 245.1c0-49.8 9.5-98 71.2-98 60.8 0 61.7 56.9 61.7 101.2v185.7h118.6V584.3c0-102.8-22.2-181.9-142.3-181.9-57.7 0-96.4 31.7-112.3 61.7h-1.6v-52.2H423.7v381.8h118.6V604.8z"}}]},name:"linkedin",theme:"outlined"},GE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:YE}))},KE=N.forwardRef(GE),JE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},XE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:JE}))},Jt=N.forwardRef(XE),QE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"},ZE=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:QE}))},f0=N.forwardRef(ZE),eP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},tP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:eP}))},zn=N.forwardRef(tP),rP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"},nP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:rP}))},$h=N.forwardRef(nP),aP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},sP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:aP}))},Gt=N.forwardRef(sP),iP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},oP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:iP}))},YS=N.forwardRef(oP),lP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},cP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:lP}))},dP=N.forwardRef(cP),uP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"},fP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:uP}))},h0=N.forwardRef(fP),hP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M877.1 238.7L770.6 132.3c-13-13-30.4-20.3-48.8-20.3s-35.8 7.2-48.8 20.3L558.3 246.8c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l89.6 89.7a405.46 405.46 0 01-86.4 127.3c-36.7 36.9-79.6 66-127.2 86.6l-89.6-89.7c-13-13-30.4-20.3-48.8-20.3a68.2 68.2 0 00-48.8 20.3L132.3 673c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l106.4 106.4c22.2 22.2 52.8 34.9 84.2 34.9 6.5 0 12.8-.5 19.2-1.6 132.4-21.8 263.8-92.3 369.9-198.3C818 606 888.4 474.6 910.4 342.1c6.3-37.6-6.3-76.3-33.3-103.4zm-37.6 91.5c-19.5 117.9-82.9 235.5-178.4 331s-213 158.9-330.9 178.4c-14.8 2.5-30-2.5-40.8-13.2L184.9 721.9 295.7 611l119.8 120 .9.9 21.6-8a481.29 481.29 0 00285.7-285.8l8-21.6-120.8-120.7 110.8-110.9 104.5 104.5c10.8 10.8 15.8 26 13.3 40.8z"}}]},name:"phone",theme:"outlined"},pP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:hP}))},Ka=N.forwardRef(pP),mP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"},gP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:mP}))},xP=N.forwardRef(gP),yP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},vP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:yP}))},Ba=N.forwardRef(vP),bP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},jP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:bP}))},wP=N.forwardRef(jP),SP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917 211.1l-199.2 24c-6.6.8-9.4 8.9-4.7 13.6l59.3 59.3-226 226-101.8-101.7c-6.3-6.3-16.4-6.2-22.6 0L100.3 754.1a8.03 8.03 0 000 11.3l45 45.2c3.1 3.1 8.2 3.1 11.3 0L433.3 534 535 635.7c6.3 6.2 16.4 6.2 22.6 0L829 364.5l59.3 59.3a8.01 8.01 0 0013.6-4.7l24-199.2c.7-5.1-3.7-9.5-8.9-8.8z"}}]},name:"rise",theme:"outlined"},NP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:SP}))},Ev=N.forwardRef(NP),AP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"},CP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:AP}))},Ou=N.forwardRef(CP),kP={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"},OP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:kP}))},ha=N.forwardRef(OP),EP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},PP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:EP}))},Ra=N.forwardRef(PP),TP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zM402.9 528.8l-77.5 77.5a8.03 8.03 0 000 11.3l34 34c3.1 3.1 8.2 3.1 11.3 0l77.5-77.5c55.7 35.1 130.1 28.4 178.6-20.1 56.3-56.3 56.3-147.5 0-203.8-56.3-56.3-147.5-56.3-203.8 0-48.5 48.5-55.2 123-20.1 178.6zm65.4-133.3c31.3-31.3 82-31.3 113.2 0 31.3 31.3 31.3 82 0 113.2-31.3 31.3-82 31.3-113.2 0s-31.3-81.9 0-113.2z"}}]},name:"security-scan",theme:"outlined"},IP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:TP}))},MP=N.forwardRef(IP),$P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},RP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:$P}))},p0=N.forwardRef(RP),DP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},_P=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:DP}))},Ao=N.forwardRef(_P),LP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},zP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:LP}))},FP=N.forwardRef(zP),BP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},UP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:BP}))},m0=N.forwardRef(UP),VP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 264c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48zm-8 136H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM480 544H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 308H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm356.8-74.4c29-26.3 47.2-64.3 47.2-106.6 0-79.5-64.5-144-144-144s-144 64.5-144 144c0 42.3 18.2 80.3 47.2 106.6-57 32.5-96.2 92.7-99.2 162.1-.2 4.5 3.5 8.3 8 8.3h48.1c4.2 0 7.7-3.3 8-7.6C564 871.2 621.7 816 692 816s128 55.2 131.9 124.4c.2 4.2 3.7 7.6 8 7.6H880c4.6 0 8.2-3.8 8-8.3-2.9-69.5-42.2-129.6-99.2-162.1zM692 591c44.2 0 80 35.8 80 80s-35.8 80-80 80-80-35.8-80-80 35.8-80 80-80z"}}]},name:"solution",theme:"outlined"},HP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:VP}))},WP=N.forwardRef(HP),qP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1zM586 803L293.4 611.7l-18-11.7H146V424h129.4l17.9-11.7L586 221v582zm348-327H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zm-41.9 261.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344z"}}]},name:"sound",theme:"outlined"},YP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:qP}))},GP=N.forwardRef(YP),KP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},JP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:KP}))},Co=N.forwardRef(JP),XP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},QP=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:XP}))},ko=N.forwardRef(QP),ZP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},e8=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:ZP}))},Mn=N.forwardRef(e8),t8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 160h-92v-40c0-4.4-3.6-8-8-8H256c-4.4 0-8 3.6-8 8v40h-92a44 44 0 00-44 44v148c0 81.7 60 149.6 138.2 162C265.7 630.2 359 721.7 476 734.5v105.2H280c-17.7 0-32 14.3-32 32V904c0 4.4 3.6 8 8 8h512c4.4 0 8-3.6 8-8v-32.3c0-17.7-14.3-32-32-32H548V734.5C665 721.7 758.3 630.2 773.8 514 852 501.6 912 433.7 912 352V204a44 44 0 00-44-44zM184 352V232h64v207.6a91.99 91.99 0 01-64-87.6zm520 128c0 49.1-19.1 95.4-53.9 130.1-34.8 34.8-81 53.9-130.1 53.9h-16c-49.1 0-95.4-19.1-130.1-53.9-34.8-34.8-53.9-81-53.9-130.1V184h384v296zm136-128c0 41-26.9 75.8-64 87.6V232h64v120z"}}]},name:"trophy",theme:"outlined"},r8=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:t8}))},vc=N.forwardRef(r8),n8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 254.3c-30.6 13.2-63.9 22.7-98.2 26.4a170.1 170.1 0 0075-94 336.64 336.64 0 01-108.2 41.2A170.1 170.1 0 00672 174c-94.5 0-170.5 76.6-170.5 170.6 0 13.2 1.6 26.4 4.2 39.1-141.5-7.4-267.7-75-351.6-178.5a169.32 169.32 0 00-23.2 86.1c0 59.2 30.1 111.4 76 142.1a172 172 0 01-77.1-21.7v2.1c0 82.9 58.6 151.6 136.7 167.4a180.6 180.6 0 01-44.9 5.8c-11.1 0-21.6-1.1-32.2-2.6C211 652 273.9 701.1 348.8 702.7c-58.6 45.9-132 72.9-211.7 72.9-14.3 0-27.5-.5-41.2-2.1C171.5 822 261.2 850 357.8 850 671.4 850 843 590.2 843 364.7c0-7.4 0-14.8-.5-22.2 33.2-24.3 62.3-54.4 85.5-88.2z"}}]},name:"twitter",theme:"outlined"},a8=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:n8}))},s8=N.forwardRef(a8),i8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zm-40 376H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"unlock",theme:"outlined"},o8=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:i8}))},Pv=N.forwardRef(o8),l8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},c8=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:l8}))},en=N.forwardRef(c8),d8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-delete",theme:"outlined"},u8=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:d8}))},f8=N.forwardRef(u8),h8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},p8=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:h8}))},Ee=N.forwardRef(p8),m8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560zm176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"video-camera",theme:"outlined"},g8=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:m8}))},Ps=N.forwardRef(g8),x8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 464H528V448h312v128zm0 264H184V184h656v200H496c-17.7 0-32 14.3-32 32v192c0 17.7 14.3 32 32 32h344v200zM580 512a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"wallet",theme:"outlined"},y8=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:x8}))},v8=N.forwardRef(y8),b8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},j8=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:b8}))},w8=N.forwardRef(j8),S8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M713.5 599.9c-10.9-5.6-65.2-32.2-75.3-35.8-10.1-3.8-17.5-5.6-24.8 5.6-7.4 11.1-28.4 35.8-35 43.3-6.4 7.4-12.9 8.3-23.8 2.8-64.8-32.4-107.3-57.8-150-131.1-11.3-19.5 11.3-18.1 32.4-60.2 3.6-7.4 1.8-13.7-1-19.3-2.8-5.6-24.8-59.8-34-81.9-8.9-21.5-18.1-18.5-24.8-18.9-6.4-.4-13.7-.4-21.1-.4-7.4 0-19.3 2.8-29.4 13.7-10.1 11.1-38.6 37.8-38.6 92s39.5 106.7 44.9 114.1c5.6 7.4 77.7 118.6 188.4 166.5 70 30.2 97.4 32.8 132.4 27.6 21.3-3.2 65.2-26.6 74.3-52.5 9.1-25.8 9.1-47.9 6.4-52.5-2.7-4.9-10.1-7.7-21-13z"}},{tag:"path",attrs:{d:"M925.2 338.4c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"whats-app",theme:"outlined"},N8=function(e,r){return N.createElement(me,ge({},e,{ref:r,icon:S8}))},GS=N.forwardRef(N8);const{Header:A8}=Je,vn=()=>{const{t,language:e,toggleLanguage:r}=Se(),n=st(),[a,i]=N.useState(!1),o=[{key:"home",label:s.jsx(Tn,{to:"/",children:t("home")})},{key:"about",label:s.jsx(Tn,{to:"/about",children:t("about")})},{key:"services",label:s.jsx(Tn,{to:"/services",children:t("services")})},{key:"consultants",label:s.jsx(Tn,{to:"/consultants",children:t("consultants")})},{key:"reports",label:s.jsx(Tn,{to:"/reports",children:t("reports")})},{key:"blog",label:s.jsx(Tn,{to:"/blog",children:t("blog")})},{key:"contact",label:s.jsx(Tn,{to:"/contact",children:t("contact")})}];return s.jsxs(A8,{className:"bg-white shadow-lg sticky top-0 z-50 px-4 md:px-8 backdrop-blur-sm bg-white/95",children:[s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between h-20",children:[s.jsx(Tn,{to:"/",className:"flex items-center gap-3 group",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] rounded-lg flex items-center justify-center shadow-md group-hover:shadow-lg transition-all duration-300 group-hover:scale-110 group-hover:rotate-3",children:s.jsx(vd,{className:"text-white text-xl"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-[#1a4d3a] leading-tight",children:"Jadwa"}),s.jsx("div",{className:"text-xs text-gray-500 leading-tight",children:"جدوى"})]})]})}),s.jsx("div",{className:"hidden lg:flex items-center gap-8 flex-1 justify-center",children:s.jsx(mc,{mode:"horizontal",items:o,className:"border-0 bg-transparent font-medium",style:{minWidth:"600px"}})}),s.jsxs("div",{className:"hidden lg:flex items-center gap-4",children:[s.jsx(P,{type:"text",onClick:r,className:"text-[#1a4d3a] hover:text-[#2d5f4f] font-medium",children:e==="ar"?"EN":"AR"}),s.jsx(P,{type:"text",icon:s.jsx(Ee,{}),onClick:()=>n("/login"),className:"text-gray-700 hover:text-[#1a4d3a] font-medium",children:t("login")}),s.jsx(P,{type:"primary",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] font-semibold shadow-md hover:shadow-lg transition-all hover:scale-105",onClick:()=>n("/register"),children:t("requestConsultation")})]}),s.jsx(P,{type:"text",icon:s.jsx($h,{}),className:"md:hidden",onClick:()=>i(!0)})]}),s.jsxs(Ok,{title:"Menu",placement:e==="ar"?"right":"left",onClose:()=>i(!1),open:a,children:[s.jsx(mc,{mode:"vertical",items:o,className:"border-0"}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx(P,{block:!0,onClick:r,className:"mb-2",children:e==="ar"?"Switch to English":"التبديل إلى العربية"}),s.jsx(P,{block:!0,type:"primary",className:"bg-olive-green-600",onClick:()=>{n("/register"),i(!1)},children:t("requestConsultation")})]})]})]})},C8=()=>{const{t,language:e}=Se(),r=st();return s.jsxs("div",{className:"relative min-h-[650px] md:min-h-[800px] flex items-center justify-center overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(https://images.unsplash.com/photo-1552664730-d307ca884978?w=1920)",filter:"brightness(0.4)"},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#1a4d3a]/90 via-[#2d5f4f]/85 to-[#1a4d3a]/90"})}),s.jsx("div",{className:`relative z-10 max-w-7xl mx-auto px-4 md:px-8 ${e==="ar"?"text-right":"text-left"} text-white`,children:s.jsxs("div",{className:"max-w-4xl",children:[s.jsx("h1",{className:"text-5xl md:text-7xl lg:text-8xl font-extrabold mb-6 leading-tight tracking-tight animate-fade-in-down",children:e==="ar"?"نحو قرارات اقتصادية أكثر جدوى":"Towards More Viable Economic Decisions"}),s.jsx("p",{className:"text-xl md:text-2xl lg:text-3xl mb-10 text-gray-100 leading-relaxed font-light animate-fade-in-up animate-delay-200",children:e==="ar"?"منصة استشارية متكاملة تقدم حلولاً اقتصادية وإدارية ومالية قائمة على التحليل الكمي والقياس العلمي، لتساعد الشركات والأفراد والجهات الحكومية على اتخاذ قرارات أكثر دقة وكفاءة":"An integrated consulting platform offering economic, administrative, and financial solutions based on quantitative analysis and scientific measurement, helping companies, individuals, and government entities make more accurate and efficient decisions"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center animate-fade-in-up animate-delay-400",children:[s.jsx(P,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 h-14 px-10 text-lg font-semibold text-[#1a4d3a] shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 animate-pulse-once",icon:e==="ar"?s.jsx(Di,{}):s.jsx(Ba,{}),onClick:()=>r("/register"),children:e==="ar"?"احجز استشارة الآن":"Book a Consultation Now"}),s.jsx(P,{size:"large",className:"bg-transparent hover:bg-white/10 border-2 border-white text-white h-14 px-10 text-lg font-semibold backdrop-blur-sm hover:border-[#d4af37] hover:text-[#d4af37] transition-all duration-300 hover-scale",onClick:()=>r("/services"),children:e==="ar"?"تعرف على خدماتنا":"Learn More About Our Services"})]})]})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-white via-white/95 to-transparent"})]})},k8=()=>{const{language:t}=Se(),e=[{icon:s.jsx(ha,{className:"text-4xl"}),title:t==="ar"?"النزاهة":"Integrity",description:t==="ar"?"نلتزم بأعلى معايير الأخلاقيات والشفافية":"We commit to the highest standards of ethics and transparency"},{icon:s.jsx(Ou,{className:"text-4xl"}),title:t==="ar"?"الاحتراف":"Professionalism",description:t==="ar"?"فريق من الخبراء المعتمدين ذوي الخبرة الواسعة":"A team of certified experts with extensive experience"},{icon:s.jsx(Cu,{className:"text-4xl"}),title:t==="ar"?"التحليل العلمي":"Scientific Analysis",description:t==="ar"?"اعتماد على أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي":"Relying on econometric analysis tools and artificial intelligence"},{icon:s.jsx(Ou,{className:"text-4xl"}),title:t==="ar"?"الابتكار":"Innovation",description:t==="ar"?"استخدام أحدث التقنيات والأدوات في التحليل والاستشارات":"Using the latest technologies and tools in analysis and consulting"},{icon:s.jsx(eg,{className:"text-4xl"}),title:t==="ar"?"الموثوقية":"Reliability",description:t==="ar"?"نتائج موثوقة ودقيقة قائمة على البيانات والأبحاث":"Reliable and accurate results based on data and research"}];return s.jsx("section",{className:"py-20 md:py-28 bg-gradient-to-b from-white to-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16 animate-fade-in-down",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:t==="ar"?"من نحن":"About Us"}),s.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] mx-auto mb-8"})]}),s.jsxs(le,{gutter:[32,32],className:"mb-16",children:[s.jsx(_,{xs:24,lg:12,children:s.jsxs("div",{className:`${t==="ar"?"text-right":"text-left"}`,children:[s.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-6 text-[#1a4d3a]",children:t==="ar"?"جدوى للاستشارات الإدارية والاقتصادية":"Jadwa for Administrative and Economic Consulting"}),s.jsx("p",{className:"text-lg text-gray-700 mb-6 leading-relaxed",children:t==="ar"?"هي منصة سعودية متخصصة في تقديم الخدمات الاستشارية عالية الجودة في مجالات الاقتصاد، الإدارة، والتمويل. نسعى من خلال فريق من الخبراء الأكاديميين والمستشارين المعتمدين إلى تمكين القرارات الاستثمارية والإدارية بالاعتماد على أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي.":"A Saudi platform specialized in providing high-quality consulting services in the fields of economics, management, and finance. Through a team of academic experts and certified consultants, we seek to empower investment and administrative decisions by relying on econometric analysis tools and artificial intelligence."})]})}),s.jsx(_,{xs:24,lg:12,children:s.jsx("div",{className:`${t==="ar"?"text-right":"text-left"}`,children:s.jsx(V,{className:"h-full border-0 shadow-lg rounded-2xl bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] text-white",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xl font-bold mb-3 flex items-center gap-2",children:[s.jsx(vt,{}),t==="ar"?"رسالتنا":"Our Mission"]}),s.jsx("p",{className:"text-gray-100 leading-relaxed",children:t==="ar"?"دعم صُنّاع القرار والمستثمرين والمشروعات عبر استشارات علمية وعملية موثوقة.":"Supporting decision-makers, investors, and projects through reliable scientific and practical consultations."})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xl font-bold mb-3 flex items-center gap-2",children:[s.jsx(Cu,{}),t==="ar"?"رؤيتنا":"Our Vision"]}),s.jsx("p",{className:"text-gray-100 leading-relaxed",children:t==="ar"?"أن نكون المنصة الأولى في العالم العربي في التحليل والاستشارات الاقتصادية المبنية على القياس الكمي.":"To be the leading platform in the Arab world for quantitative-based economic analysis and consulting."})]})]})})})})]}),s.jsxs("div",{className:"mt-16",children:[s.jsx("h3",{className:"text-3xl font-bold mb-8 text-center text-gray-900",children:t==="ar"?"قيمنا":"Our Values"}),s.jsx(le,{gutter:[24,24],children:e.map((r,n)=>s.jsx(_,{xs:24,sm:12,lg:6,children:s.jsxs(V,{className:"h-full border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl text-center hover-lift card-entrance",style:{animationDelay:`${n*.1}s`},styles:{body:{padding:"32px"}},children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] flex items-center justify-center text-white mx-auto mb-6 shadow-lg",children:r.icon}),s.jsx("h4",{className:"text-xl font-bold mb-3 text-gray-900",children:r.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:r.description})]})},n))})]})]})})},O8=()=>{const{t,language:e}=Se(),r=st(),[n,a]=N.useState([]),[i,o]=N.useState(!0);N.useEffect(()=>{l()},[]);const l=async()=>{try{o(!0);const u=await gs.getServices({status:"ACTIVE"});a(u.services||[])}catch(u){console.error("Error fetching services:",u),a([])}finally{o(!1)}},c=u=>({ECONOMIC:s.jsx(vd,{className:"text-4xl"}),ADMINISTRATIVE:s.jsx(Mn,{className:"text-4xl"}),FINANCIAL_ACCOUNTING:s.jsx(ir,{className:"text-4xl"}),ANALYSIS_REPORTS:s.jsx(It,{className:"text-4xl"}),FIELD_SURVEY:s.jsx(ya,{className:"text-4xl"}),DIGITAL_CUSTOMER:s.jsx(Ps,{className:"text-4xl"})})[u]||s.jsx(CS,{className:"text-4xl"}),d=u=>({ECONOMIC:"from-olive-green-500 to-olive-green-600",ADMINISTRATIVE:"from-turquoise-500 to-turquoise-600",FINANCIAL_ACCOUNTING:"from-olive-green-400 to-turquoise-500",ANALYSIS_REPORTS:"from-turquoise-400 to-olive-green-500",FIELD_SURVEY:"from-olive-green-600 to-turquoise-600",DIGITAL_CUSTOMER:"from-turquoise-500 to-olive-green-500"})[u]||"from-olive-green-500 to-turquoise-500";return s.jsx("section",{className:"py-20 md:py-28 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16 animate-fade-in-down",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:t("services")}),s.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"نقدم مجموعة شاملة من الخدمات الاستشارية المتخصصة":"We offer a comprehensive range of specialized consulting services"})]}),i?s.jsx("div",{className:"flex justify-center items-center py-20",children:s.jsx(et,{size:"large"})}):n.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:n.slice(0,5).map((u,f)=>s.jsxs(V,{className:"h-full border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl overflow-hidden group hover-lift card-entrance",style:{animationDelay:`${f*.1}s`},styles:{body:{padding:"32px"}},children:[s.jsx("div",{className:`w-20 h-20 rounded-2xl bg-gradient-to-br ${d(u.category)} flex items-center justify-center text-white mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:c(u.category)}),s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-900 min-h-[56px]",children:e==="ar"&&u.titleAr||u.title}),s.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed min-h-[72px] line-clamp-3",children:e==="ar"&&u.descriptionAr||u.description}),u.price&&u.price>0&&s.jsxs("div",{className:"mb-4 text-[#1a4d3a] font-bold text-lg",children:[u.price," ",e==="ar"?"ريال":"SAR"]}),s.jsx(P,{type:"primary",className:"w-full bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 h-11 font-semibold shadow-md hover:shadow-lg transition-all duration-300",onClick:()=>r("/services"),children:e==="ar"?"طلب عرض تجريبي":"Request Demo"})]},u.id))}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:e==="ar"?"لا توجد خدمات متاحة حالياً":"No services available at the moment"})]})})},KS=({limit:t=null,showViewAll:e=!0})=>{const{t:r,language:n}=Se(),a=st(),[i,o]=N.useState([]),[l,c]=N.useState(!0);N.useEffect(()=>{d()},[]);const d=async()=>{try{c(!0);const u={isAvailable:!0};t&&(u.limit=t);const f=await Es.getConsultants(u);o(f.consultants||[])}catch(u){console.error("Error fetching consultants:",u)}finally{c(!1)}};return s.jsx("section",{className:"py-20 md:py-28 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:r("ourConsultants")}),s.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:n==="ar"?"فريق من المستشارين المتخصصين ذوي الخبرة الواسعة":"A team of specialized consultants with extensive experience"})]}),l?s.jsx("div",{className:"flex justify-center items-center py-20",children:s.jsx(et,{size:"large"})}):i.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:i.map((u,f)=>{var p,m;const h=`${u.firstName||""} ${u.lastName||""}`.trim()||((p=u.user)==null?void 0:p.email)||"Consultant";return s.jsxs(V,{className:"text-center border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl hover-lift card-entrance",style:{animationDelay:`${f*.1}s`},styles:{body:{padding:"32px 24px"}},hoverable:!0,children:[s.jsx(ot,{size:120,src:(m=u.user)==null?void 0:m.avatar,icon:s.jsx(Ee,{}),className:"mb-6 border-4 border-white shadow-xl"}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:h}),u.specialization&&s.jsx("p",{className:"text-[#1a4d3a] mb-4 font-semibold",children:u.specialization}),u.rating&&s.jsx(Ya,{disabled:!0,defaultValue:u.rating,allowHalf:!0,className:"mb-6",style:{color:"#d4af37"}}),s.jsx(P,{type:"primary",className:"w-full bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 h-11 font-semibold shadow-md hover:shadow-lg transition-all",onClick:()=>a(`/consultants/${u.id}`),children:n==="ar"?"عرض الملف الشخصي":"View Profile"})]},u.id)})}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:n==="ar"?"لا يوجد مستشارون متاحون حالياً":"No consultants available at the moment"}),e&&s.jsx("div",{className:"text-center",children:s.jsx(P,{size:"large",type:"primary",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-14 px-12 text-lg font-semibold shadow-lg hover:shadow-xl transition-all",icon:n==="ar"?s.jsx(Sv,{}):s.jsx(Sv,{}),onClick:()=>a("/consultants"),children:r("viewAllConsultants")})})]})})},E8=()=>{const{language:t}=Se(),e=[{title:t==="ar"?"اختر نوع الاستشارة":"Choose Service Type",description:t==="ar"?"اقتصادية – مالية – إدارية – دراسة جدوى – تحليل قياسي":"Economic – Financial – Administrative – Feasibility Study – Econometric Analysis",icon:s.jsx(vt,{className:"text-3xl"})},{title:t==="ar"?"احجز موعدك":"Book Your Appointment",description:t==="ar"?"عبر الجلسة المرئية أو الدردشة أو الطلب الكتابي":"Via video session, chat, or written request",icon:s.jsx(Ft,{className:"text-3xl"})},{title:t==="ar"?"قم بالدفع الإلكتروني":"Make Payment",description:t==="ar"?"باستخدام مدى أو Apple Pay أو البطاقة الائتمانية":"Using Mada, Apple Pay, or credit card",icon:s.jsx(d0,{className:"text-3xl"})},{title:t==="ar"?"احصل على تقريرك":"Get Your Report",description:t==="ar"?"عبر لوحة التحكم الخاصة بك أو البريد الإلكتروني":"Via your dashboard or email",icon:s.jsx(It,{className:"text-3xl"})}];return s.jsx("section",{className:"py-20 md:py-28 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:t==="ar"?"آلية العمل في المنصة":"How It Works"}),s.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:t==="ar"?"خطوات بسيطة للحصول على استشارة متخصصة":"Simple steps to get specialized consultation"})]}),s.jsx("div",{className:"max-w-5xl mx-auto",children:s.jsx(vh,{direction:"horizontal",current:-1,items:e.map((r,n)=>({title:s.jsxs("div",{className:`${t==="ar"?"text-right":"text-left"} mt-4`,children:[s.jsx("div",{className:"text-xl font-bold text-gray-900 mb-2",children:r.title}),s.jsx("div",{className:"text-gray-600 text-sm",children:r.description})]}),icon:s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] flex items-center justify-center text-white shadow-lg",children:r.icon}),status:"finish"})),className:"mb-12"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mt-12",children:e.map((r,n)=>s.jsxs(V,{className:"border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl text-center",styles:{body:{padding:"32px"}},children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] flex items-center justify-center text-white mx-auto mb-6 shadow-lg",children:r.icon}),s.jsx("div",{className:"text-3xl font-bold text-[#1a4d3a] mb-3",children:n+1}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:r.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:r.description})]},n))})]})})},P8=()=>{const{t,language:e}=Se(),r=[{icon:s.jsx(Ft,{className:"text-4xl"}),title:t("instantBooking"),description:e==="ar"?"احجز استشارة في أي وقت مع مستشارك المفضل بسهولة وسرعة":"Book a consultation anytime with your preferred consultant easily and quickly",color:"from-olive-green-500 to-olive-green-600"},{icon:s.jsx(qS,{className:"text-4xl"}),title:t("dashboardReports"),description:e==="ar"?"لوحة تحليلية شاملة مع تقارير مفصلة ورسوم بيانية تفاعلية":"Comprehensive analytical dashboard with detailed reports and interactive charts",color:"from-turquoise-500 to-turquoise-600"},{icon:s.jsx(c0,{className:"text-4xl"}),title:t("supportSectors"),description:e==="ar"?"خدمات مخصصة للقطاعين الحكومي والخاص مع حلول متكاملة":"Customized services for government and private sectors with integrated solutions",color:"from-olive-green-400 to-turquoise-500"}];return s.jsx("section",{className:"py-20 md:py-28 bg-gradient-to-br from-[#f0f7f4] to-[#e8f5f0]",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:t("smartPlatform")}),s.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"منصة ذكية تجمع بين التكنولوجيا والخبرة الاستشارية":"A smart platform that combines technology and consulting expertise"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:r.map((n,a)=>s.jsxs(V,{className:"text-center bg-white border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl",styles:{body:{padding:"40px 32px"}},children:[s.jsx("div",{className:`w-24 h-24 rounded-2xl bg-gradient-to-br ${n.color} flex items-center justify-center text-white mx-auto mb-6 shadow-lg`,children:n.icon}),s.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:n.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:n.description})]},a))})]})})},JS=()=>{const{t,language:e}=Se(),r=st(),n=[{id:1,title:t("saudiEconomy2025"),description:e==="ar"?"تحليل شامل لاتجاهات الاقتصاد السعودي وتوقعات 2025":"Comprehensive analysis of Saudi economy trends and 2025 forecasts",image:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=800",category:e==="ar"?"تحليل اقتصادي":"Economic Analysis"},{id:2,title:t("meccaProjects"),description:e==="ar"?"دراسة تأثير المشاريع الضخمة في مكة المكرمة على الاقتصاد":"Study of mega projects impact in Makkah on the economy",image:"https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=800",category:e==="ar"?"دراسة جدوى":"Feasibility Study"},{id:3,title:t("investmentIndex"),description:e==="ar"?"مؤشر نشاط الاستثمار في المملكة العربية السعودية":"Investment activity index in Saudi Arabia",image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800",category:e==="ar"?"مؤشرات":"Indicators"}];return s.jsx("section",{className:"py-20 md:py-28 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:t("reports")}),s.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"تقارير وتحليلات اقتصادية شاملة ومحدثة":"Comprehensive and up-to-date economic reports and analyses"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:n.map(a=>s.jsx(V,{className:"overflow-hidden border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl group",styles:{body:{padding:"0"}},hoverable:!0,cover:s.jsxs("div",{className:"relative h-64 overflow-hidden",children:[s.jsx("img",{alt:a.title,src:a.image,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),s.jsx("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-[#d4af37] to-[#f4d03f] text-[#1a4d3a] px-4 py-2 rounded-full text-sm font-semibold shadow-lg",children:a.category}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(It,{className:"text-[#1a4d3a] text-xl mr-2"}),s.jsx("span",{className:"text-sm text-gray-500 font-medium",children:a.category})]}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900 min-h-[56px]",children:a.title}),s.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed min-h-[72px]",children:a.description}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(P,{type:"primary",icon:s.jsx(mr,{}),className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 flex-1 font-semibold shadow-md hover:shadow-lg transition-all",onClick:()=>r(`/reports/${a.id}`),children:e==="ar"?"عرض":"View"}),s.jsx(P,{icon:s.jsx(zr,{}),className:"border-2 border-[#1a4d3a] text-[#1a4d3a] hover:bg-[#1a4d3a] hover:text-white font-semibold transition-all",children:e==="ar"?"تحميل":"Download"})]})]})},a.id))}),s.jsx("div",{className:"text-center",children:s.jsx(P,{size:"large",type:"primary",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-14 px-12 text-lg font-semibold shadow-lg hover:shadow-xl transition-all",onClick:()=>r("/reports"),children:t("viewAllReports")})})]})})},T8=()=>{const{t,language:e}=Se(),r=[{id:1,name:e==="ar"?"أحد عملاء المنصة":"Platform Client",company:e==="ar"?"شركة تطوير الأعمال 2025":"Business Development Company 2025",rating:5,text:e==="ar"?"خدمة متميزة تجمع بين التحليل العلمي والرؤية الاقتصادية الدقيقة.":"Distinguished service that combines scientific analysis and accurate economic vision.",avatar:"https://i.pravatar.cc/150?img=12"},{id:2,name:e==="ar"?"مستثمر من مكة المكرمة":"Investor from Makkah",company:e==="ar"?"مستثمر":"Investor",rating:5,text:e==="ar"?"دراسة الجدوى التي حصلنا عليها من جدوى ساعدتنا في اتخاذ قرار استثماري ناجح.":"The feasibility study we obtained from Jadwa helped us make a successful investment decision.",avatar:"https://i.pravatar.cc/150?img=47"},{id:3,name:e==="ar"?"أحد عملاء المنصة":"Platform Client",company:e==="ar"?"شركة استثمارية":"Investment Company",rating:5,text:e==="ar"?"التحليلات الاقتصادية المقدمة ساعدتنا في فهم السوق بشكل أفضل واتخاذ قرارات مدروسة.":"The economic analyses provided helped us better understand the market and make informed decisions.",avatar:"https://i.pravatar.cc/150?img=33"}];return s.jsx("section",{className:"py-16 md:py-24 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"section-title",children:t("testimonials")}),s.jsx("p",{className:"section-subtitle",children:e==="ar"?"ماذا يقول عملاؤنا عن خدماتنا":"What our clients say about our services"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.map(n=>s.jsxs(V,{className:"card relative",variant:"borderless",children:[s.jsx("div",{className:"text-6xl text-olive-green-200 absolute top-4 right-4 font-serif leading-none",children:'"'}),s.jsxs("div",{className:"mb-4",children:[s.jsx(Ya,{disabled:!0,defaultValue:n.rating,className:"mb-3"}),s.jsx("p",{className:"text-gray-700 italic",children:n.text})]}),s.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mt-6 pt-4 border-t border-gray-200",children:[s.jsx(ot,{src:n.avatar,size:50}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:n.name}),s.jsx("div",{className:"text-sm text-gray-500",children:n.company})]})]})]},n.id))})]})})},I8=()=>{const{t,language:e}=Se(),[r,n]=N.useState([]),[a,i]=N.useState(!0);N.useEffect(()=>{l()},[]);const o=c=>{if(!c)return null;if(/^https?:\/\//.test(c))return c;if(/^file:\/\//.test(c))return null;const d="http://localhost:5000/api".replace("/api","")||"http://localhost:5000";return c.startsWith("/")?`${d}${c}`:`${d}/${c}`},l=async()=>{try{i(!0);const d=((await io.getPartners({isActive:"true"})).partners||[]).map(u=>({...u,logo:o(u.logo)}));n(d)}catch(c){console.error("Error fetching partners:",c)}finally{i(!1)}};return a?s.jsx("section",{className:"py-20 md:py-28 bg-gray-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(et,{size:"large"})})})}):r.length===0?null:s.jsx("section",{className:"py-20 md:py-28 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:t("partners")}),s.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"نفتخر بشراكاتنا مع المؤسسات الرائدة":"We are proud of our partnerships with leading institutions"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8 items-center",children:r.map(c=>s.jsx("div",{className:"flex items-center justify-center p-6 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2",children:c.logo?s.jsx("img",{src:c.logo,alt:e==="ar"&&c.nameAr?c.nameAr:c.name,className:"max-w-full h-auto max-h-16 opacity-70 hover:opacity-100 transition-opacity duration-300",onError:d=>{console.error("Failed to load partner logo:",c.logo),d.target.style.display="none"}}):s.jsx("span",{className:"text-gray-400 text-sm",children:e==="ar"&&c.nameAr?c.nameAr:c.name})},c.id))})]})})},M8=()=>{const{language:t}=Se(),e=st(),[r,n]=N.useState([]),[a,i]=N.useState(!0);N.useEffect(()=>{o()},[]);const o=async()=>{var l;try{const c=await pr.getArticles({status:"PUBLISHED",limit:3}),d="http://localhost:5000/api".replace("/api","")||"http://localhost:5000",u=(((l=c.articles)==null?void 0:l.slice(0,3))||[]).map(f=>{var h;if(f.featuredImage){let p=f.featuredImage;/^https?:\/\//.test(p)?(p.includes(`${d}${d}`)||((h=p.match(/http:\/\/localhost:5000/g))==null?void 0:h.length)>1)&&(p=p.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),p=`http://localhost:5000/${p}`):p=p.startsWith("/")?`${d}${p}`:`${d}/${p}`,f.featuredImage=p}return f});n(u)}catch(c){console.error("Error fetching articles:",c)}finally{i(!1)}};return a?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(et,{size:"large"})}):r.length===0?null:s.jsx("section",{className:"py-16 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-4xl font-bold mb-4",children:t==="ar"?"آخر المقالات":"Latest Articles"}),s.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:t==="ar"?"اكتشف آخر الأخبار والمقالات حول الاستشارات والدراسات الاقتصادية":"Discover the latest news and articles about consulting and economic studies"})]}),s.jsx(le,{gutter:[24,24],children:r.map(l=>s.jsx(_,{xs:24,sm:12,lg:8,children:s.jsx(V,{hoverable:!0,className:"h-full transition-all duration-300 hover:shadow-xl",style:{borderRadius:"12px",overflow:"hidden"},cover:l.featuredImage?s.jsxs("div",{className:"relative h-56 overflow-hidden",children:[s.jsx("img",{alt:t==="ar"&&l.titleAr||l.title,src:l.featuredImage,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:c=>{console.error("Failed to load article image:",l.featuredImage),c.target.style.display="none"}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}):s.jsx("div",{className:"h-56 bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] flex items-center justify-center",children:s.jsx("span",{className:"text-white text-5xl font-bold",children:t==="ar"?(l.titleAr||l.title).charAt(0):l.title.charAt(0)})}),onClick:()=>e(`/blog/${l.slug}`),children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-3",children:l.category&&s.jsx(ce,{color:"blue",className:"mb-2",children:l.category})}),s.jsx("h3",{className:"text-xl font-bold mb-3 line-clamp-2 text-gray-900 group-hover:text-[#1a4d3a] transition-colors min-h-[56px]",children:t==="ar"&&l.titleAr||l.title}),l.excerpt&&s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3 leading-relaxed min-h-[72px]",children:t==="ar"&&l.excerptAr||l.excerpt}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4 pb-4 border-b border-gray-100",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ft,{}),fe(l.publishedAt||l.createdAt).format("YYYY-MM-DD")]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(mr,{}),l.views||0]})]}),s.jsx(P,{type:"link",icon:s.jsx(Au,{}),className:"p-0 text-[#1a4d3a] hover:text-[#2d5f4f] font-semibold",onClick:c=>{c.stopPropagation(),e(`/blog/${l.slug}`)},children:t==="ar"?"اقرأ المزيد":"Read More"})]})})},l.id))}),s.jsx("div",{className:"text-center mt-8",children:s.jsx(P,{type:"primary",size:"large",className:"bg-olive-green-600 hover:bg-olive-green-700",onClick:()=>e("/blog"),children:t==="ar"?"عرض جميع المقالات":"View All Articles"})})]})})},{Footer:$8}=Je,bn=()=>{const{t,language:e}=Se(),r=[{label:t("home"),path:"/"},{label:t("about"),path:"/about"},{label:t("services"),path:"/services"},{label:t("consultants"),path:"/consultants"},{label:t("reports"),path:"/reports"},{label:t("blog"),path:"/blog"},{label:t("contact"),path:"/contact"}];return s.jsx($8,{className:"bg-gray-900 text-white py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs(le,{gutter:[32,32],children:[s.jsxs(_,{xs:24,sm:12,md:6,children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("img",{src:"/assets/images/logo/logo-white.png",alt:"Jadwa - جدوى",className:"h-14 md:h-16 w-auto object-contain"})}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:e==="ar"?"منصة متخصصة في الاستشارات الاقتصادية والإدارية":"A specialized platform for economic and administrative consulting"}),s.jsxs("div",{className:"flex space-x-4 space-x-reverse",children:[s.jsx("a",{href:"#",className:"text-gray-400 hover:text-turquoise-400 transition-colors",children:s.jsx(mE,{className:"text-xl"})}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-turquoise-400 transition-colors",children:s.jsx(s8,{className:"text-xl"})}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-turquoise-400 transition-colors",children:s.jsx(KE,{className:"text-xl"})}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-turquoise-400 transition-colors",children:s.jsx(qE,{className:"text-xl"})})]})]}),s.jsxs(_,{xs:24,sm:12,md:6,children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:t("quickLinks")}),s.jsx("ul",{className:"space-y-2",children:r.map((n,a)=>s.jsx("li",{children:s.jsx(Tn,{to:n.path,className:"text-gray-400 hover:text-turquoise-400 transition-colors text-sm",children:n.label})},a))})]}),s.jsxs(_,{xs:24,sm:12,md:6,children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:t("contactInfo")}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-center space-x-2 space-x-reverse text-gray-400 text-sm",children:[s.jsx(Ka,{className:"text-turquoise-400"}),s.jsx("span",{children:"9200 00000"})]}),s.jsxs("li",{className:"flex items-center space-x-2 space-x-reverse text-gray-400 text-sm",children:[s.jsx(zn,{className:"text-turquoise-400"}),s.jsx("span",{children:"info@jadwa.sa"})]}),s.jsxs("li",{className:"flex items-center space-x-2 space-x-reverse text-gray-400 text-sm",children:[s.jsx(GS,{className:"text-turquoise-400"}),s.jsx("a",{href:"#",className:"hover:text-turquoise-400",children:e==="ar"?"واتساب":"WhatsApp"})]}),s.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse text-gray-400 text-sm",children:[s.jsx(Mh,{className:"text-turquoise-400 mt-1"}),s.jsx("span",{children:e==="ar"?"مكة المكرمة – المملكة العربية السعودية":"Makkah Al-Mukarramah – Saudi Arabia"})]}),s.jsx("li",{className:"flex items-center space-x-2 space-x-reverse text-gray-400 text-sm",children:s.jsx("a",{href:"https://www.jadwa.sa",className:"hover:text-turquoise-400",children:"www.jadwa.sa"})})]})]}),s.jsxs(_,{xs:24,sm:12,md:6,children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:e==="ar"?"معلومات قانونية":"Legal"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Tn,{to:"/privacy",className:"text-gray-400 hover:text-turquoise-400 transition-colors text-sm",children:t("privacy")})}),s.jsx("li",{children:s.jsx(Tn,{to:"/terms",className:"text-gray-400 hover:text-turquoise-400 transition-colors text-sm",children:t("terms")})})]})]})]}),s.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400 text-sm",children:e==="ar"?"© 2025 جدوى للاستشارات الإدارية والاقتصادية – جميع الحقوق محفوظة":"© 2025 Jadwa for Administrative and Economic Consulting – All Rights Reserved"})]})})},{Content:R8}=Je,D8=()=>s.jsxs(Je,{className:"min-h-screen",children:[s.jsx(vn,{}),s.jsxs(R8,{children:[s.jsx(C8,{}),s.jsx(k8,{}),s.jsx(O8,{}),s.jsx(KS,{}),s.jsx(E8,{}),s.jsx(P8,{}),s.jsx(JS,{}),s.jsx(M8,{}),s.jsx(T8,{}),s.jsx(I8,{})]}),s.jsx(bn,{})]}),{Content:_8}=Je,L8=()=>{const{t,language:e}=Se(),r=[{icon:s.jsx(ha,{className:"text-4xl"}),title:e==="ar"?"النزاهة والشفافية":"Integrity & Transparency",description:e==="ar"?"نلتزم بأعلى معايير الأخلاقيات والشفافية في جميع تعاملاتنا مع العملاء":"We commit to the highest standards of ethics and transparency in all our client interactions"},{icon:s.jsx(Ou,{className:"text-4xl"}),title:e==="ar"?"الاحترافية":"Professionalism",description:e==="ar"?"فريق من الخبراء المعتمدين ذوي الخبرة الواسعة في مختلف المجالات الاستشارية":"A team of certified experts with extensive experience in various consulting fields"},{icon:s.jsx(Cu,{className:"text-4xl"}),title:e==="ar"?"التحليل العلمي":"Scientific Analysis",description:e==="ar"?"اعتماد على أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي في تقديم الحلول":"Relying on econometric analysis tools and artificial intelligence in providing solutions"},{icon:s.jsx(eg,{className:"text-4xl"}),title:e==="ar"?"الموثوقية":"Reliability",description:e==="ar"?"نتائج موثوقة ودقيقة قائمة على البيانات والأبحاث العلمية المعتمدة":"Reliable and accurate results based on data and accredited scientific research"}],n=[{icon:s.jsx(vd,{className:"text-3xl"}),title:e==="ar"?"الاستشارات الاقتصادية":"Economic Consulting",description:e==="ar"?"تحليل اقتصادي شامل ودراسات جدوى للمشاريع الاستثمارية":"Comprehensive economic analysis and feasibility studies for investment projects"},{icon:s.jsx(Mn,{className:"text-3xl"}),title:e==="ar"?"الاستشارات الإدارية":"Administrative Consulting",description:e==="ar"?"تحسين الهياكل التنظيمية وإدارة الموارد البشرية":"Organizational structure improvement and human resources management"},{icon:s.jsx(WS,{className:"text-3xl"}),title:e==="ar"?"الاستشارات المالية والمحاسبية":"Financial & Accounting Consulting",description:e==="ar"?"تحليل مالي متقدم وخدمات محاسبية متخصصة":"Advanced financial analysis and specialized accounting services"},{icon:s.jsx(It,{className:"text-3xl"}),title:e==="ar"?"التقارير والدراسات":"Reports & Studies",description:e==="ar"?"إعداد تقارير احترافية ودراسات متخصصة في مختلف المجالات":"Professional report preparation and specialized studies in various fields"}];return s.jsxs(Je,{className:"min-h-screen bg-gray-50",children:[s.jsx(vn,{}),s.jsx(_8,{className:"py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold text-gray-900 mb-6",children:e==="ar"?"من نحن":"About Us"}),s.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-olive-green-600 to-turquoise-500 mx-auto mb-8"}),s.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-4xl mx-auto leading-relaxed",children:e==="ar"?"منصة جدوى للاستشارات الإدارية والاقتصادية - منصة سعودية رائدة في تقديم الحلول الاستشارية المتخصصة":"Jadwa for Administrative and Economic Consulting - A leading Saudi platform providing specialized consulting solutions"})]}),s.jsx(V,{className:"bg-white shadow-lg rounded-2xl border-0 mb-12",children:s.jsxs(le,{gutter:[32,32],align:"middle",children:[s.jsx(_,{xs:24,lg:12,children:s.jsxs("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 text-gray-900",children:e==="ar"?"من نحن":"Who We Are"}),s.jsx("p",{className:"text-lg text-gray-700 mb-6 leading-relaxed",children:e==="ar"?"منصة جدوى هي منصة سعودية متخصصة في تقديم الخدمات الاستشارية عالية الجودة في مجالات الاقتصاد، الإدارة، والتمويل. نسعى من خلال فريق من الخبراء الأكاديميين والمستشارين المعتمدين إلى تمكين القرارات الاستثمارية والإدارية بالاعتماد على أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي.":"Jadwa is a Saudi platform specialized in providing high-quality consulting services in the fields of economics, management, and finance. Through a team of academic experts and certified consultants, we seek to empower investment and administrative decisions by relying on econometric analysis tools and artificial intelligence."}),s.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:e==="ar"?"نقدم حلولاً شاملة ومتكاملة تساعد الشركات والأفراد والجهات الحكومية على اتخاذ قرارات مدروسة ومبنية على بيانات دقيقة وتحليلات علمية متقدمة.":"We provide comprehensive and integrated solutions that help companies, individuals, and government entities make informed decisions based on accurate data and advanced scientific analysis."})]})}),s.jsx(_,{xs:24,lg:12,children:s.jsx("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:s.jsx(V,{className:"border-0 shadow-lg bg-gradient-to-br from-olive-green-600 to-turquoise-500 text-white",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xl font-bold mb-3 flex items-center gap-2",children:[s.jsx(Cu,{}),e==="ar"?"رؤيتنا":"Our Vision"]}),s.jsx("p",{className:"text-gray-100 leading-relaxed",children:e==="ar"?"أن نكون المنصة الأولى في العالم العربي في التحليل والاستشارات الاقتصادية المبنية على القياس الكمي والذكاء الاصطناعي، وأن نكون الشريك المفضل لصُنّاع القرار والمستثمرين.":"To be the leading platform in the Arab world for quantitative-based economic analysis and consulting, and to be the preferred partner for decision-makers and investors."})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xl font-bold mb-3 flex items-center gap-2",children:[s.jsx(Ou,{}),e==="ar"?"مهمتنا":"Our Mission"]}),s.jsx("p",{className:"text-gray-100 leading-relaxed",children:e==="ar"?"دعم صُنّاع القرار والمستثمرين والمشروعات عبر استشارات علمية وعملية موثوقة، وتمكينهم من اتخاذ قرارات استراتيجية مبنية على تحليلات دقيقة وبيانات موثوقة.":"Supporting decision-makers, investors, and projects through reliable scientific and practical consultations, enabling them to make strategic decisions based on accurate analysis and reliable data."})]})]})})})})]})}),s.jsxs(le,{gutter:[16,16],className:"mb-12",children:[s.jsx(_,{xs:12,sm:6,children:s.jsx(V,{className:"bg-white shadow-lg border-0 text-center hover:shadow-xl transition-shadow",children:s.jsx(Fe,{title:e==="ar"?"مستشارون خبراء":"Expert Consultants",value:50,prefix:s.jsx(Ee,{className:"text-olive-green-600"}),valueStyle:{color:"#7a8c66",fontSize:"28px",fontWeight:"bold"}})})}),s.jsx(_,{xs:12,sm:6,children:s.jsx(V,{className:"bg-white shadow-lg border-0 text-center hover:shadow-xl transition-shadow",children:s.jsx(Fe,{title:e==="ar"?"مشروع مكتمل":"Completed Projects",value:500,prefix:s.jsx(vt,{className:"text-turquoise-500"}),valueStyle:{color:"#14b8a6",fontSize:"28px",fontWeight:"bold"}})})}),s.jsx(_,{xs:12,sm:6,children:s.jsx(V,{className:"bg-white shadow-lg border-0 text-center hover:shadow-xl transition-shadow",children:s.jsx(Fe,{title:e==="ar"?"عميل راضٍ":"Satisfied Clients",value:1e3,prefix:s.jsx(eg,{className:"text-pink-500"}),valueStyle:{color:"#ec4899",fontSize:"28px",fontWeight:"bold"}})})}),s.jsx(_,{xs:12,sm:6,children:s.jsx(V,{className:"bg-white shadow-lg border-0 text-center hover:shadow-xl transition-shadow",children:s.jsx(Fe,{title:e==="ar"?"سنة خبرة":"Years of Experience",value:10,prefix:s.jsx(vc,{className:"text-yellow-500"}),valueStyle:{color:"#eab308",fontSize:"28px",fontWeight:"bold"}})})})]}),s.jsxs("div",{className:"mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900",children:e==="ar"?"خدماتنا":"Our Services"}),s.jsx(le,{gutter:[24,24],children:n.map((a,i)=>s.jsx(_,{xs:24,sm:12,lg:6,children:s.jsxs(V,{className:"bg-white shadow-lg border-0 h-full text-center hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-olive-green-600 to-turquoise-500 flex items-center justify-center text-white mx-auto mb-6 shadow-md",children:a.icon}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:a.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:a.description})]})},i))})]}),s.jsxs("div",{className:"mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900",children:e==="ar"?"قيمنا الأساسية":"Our Core Values"}),s.jsx(le,{gutter:[24,24],children:r.map((a,i)=>s.jsx(_,{xs:24,sm:12,lg:6,children:s.jsxs(V,{className:"bg-white shadow-lg border-0 h-full text-center hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-olive-green-600 to-turquoise-500 flex items-center justify-center text-white mx-auto mb-6 shadow-md",children:a.icon}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:a.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:a.description})]})},i))})]}),s.jsxs(V,{className:"bg-white shadow-xl rounded-2xl border-0 mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900",children:e==="ar"?"لماذا تختار جدوى؟":"Why Choose Jadwa?"}),s.jsxs(le,{gutter:[32,32],children:[s.jsx(_,{xs:24,md:12,children:s.jsx("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:s.jsxs("ul",{className:"space-y-4 text-lg text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(vt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),s.jsx("span",{children:e==="ar"?"فريق من الخبراء المعتمدين ذوي الخبرة الواسعة في مختلف المجالات":"A team of certified experts with extensive experience in various fields"})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(vt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),s.jsx("span",{children:e==="ar"?"استخدام أحدث أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي":"Using the latest econometric analysis tools and artificial intelligence"})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(vt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),s.jsx("span",{children:e==="ar"?"نتائج موثوقة ودقيقة قائمة على البيانات والأبحاث العلمية":"Reliable and accurate results based on data and scientific research"})]})]})})}),s.jsx(_,{xs:24,md:12,children:s.jsx("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:s.jsxs("ul",{className:"space-y-4 text-lg text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(vt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),s.jsx("span",{children:e==="ar"?"حلول مخصصة تلبي احتياجات كل عميل بشكل فريد":"Customized solutions that uniquely meet each client's needs"})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(vt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),s.jsx("span",{children:e==="ar"?"التزام بأعلى معايير الجودة والشفافية في جميع الخدمات":"Commitment to the highest standards of quality and transparency in all services"})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(vt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),s.jsx("span",{children:e==="ar"?"دعم مستمر ومتابعة بعد تقديم الخدمة لضمان تحقيق النتائج":"Continuous support and follow-up after service delivery to ensure results"})]})]})})})]})]}),s.jsx(V,{className:"bg-white shadow-lg rounded-2xl border-0 mb-12",children:s.jsxs(le,{gutter:[32,32],align:"middle",children:[s.jsx(_,{xs:24,lg:12,children:s.jsxs("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 text-gray-900",children:e==="ar"?"قصتنا":"Our Story"}),s.jsx("p",{className:"text-lg text-gray-700 mb-4 leading-relaxed",children:e==="ar"?"بدأت منصة جدوى رحلتها بهدف واضح: تمكين الشركات والأفراد من اتخاذ قرارات اقتصادية وإدارية مدروسة ومبنية على بيانات دقيقة. تأسست المنصة على يد مجموعة من الخبراء الأكاديميين والمستشارين المعتمدين الذين يجمعون بين المعرفة النظرية العميقة والخبرة العملية الواسعة.":"Jadwa Platform began its journey with a clear goal: to enable companies and individuals to make informed economic and administrative decisions based on accurate data. The platform was founded by a group of academic experts and certified consultants who combine deep theoretical knowledge with extensive practical experience."}),s.jsx("p",{className:"text-lg text-gray-700 mb-4 leading-relaxed",children:e==="ar"?"على مر السنين، طورنا منهجيات متقدمة في التحليل الاقتصادي القياسي، ودمجنا أحدث تقنيات الذكاء الاصطناعي في عملياتنا لضمان تقديم تحليلات دقيقة وموثوقة. نحن فخورون بكوننا شريكاً موثوقاً للعديد من الشركات الكبرى والمؤسسات الحكومية في المملكة العربية السعودية.":"Over the years, we have developed advanced methodologies in econometric analysis and integrated the latest artificial intelligence technologies into our processes to ensure accurate and reliable analysis. We are proud to be a trusted partner for many major companies and government institutions in Saudi Arabia."})]})}),s.jsx(_,{xs:24,lg:12,children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-olive-green-50 to-turquoise-50 p-6 rounded-lg text-center",children:[s.jsx(vc,{className:"text-4xl text-olive-green-600 mb-3"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e==="ar"?"الجودة":"Quality"}),s.jsx("p",{className:"text-gray-600 text-sm",children:e==="ar"?"نلتزم بأعلى معايير الجودة في جميع خدماتنا":"We commit to the highest quality standards in all our services"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-turquoise-50 to-olive-green-50 p-6 rounded-lg text-center",children:[s.jsx(AO,{className:"text-4xl text-turquoise-600 mb-3"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e==="ar"?"الدقة":"Accuracy"}),s.jsx("p",{className:"text-gray-600 text-sm",children:e==="ar"?"تحليلات دقيقة مبنية على بيانات موثوقة":"Accurate analysis based on reliable data"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-olive-green-50 to-turquoise-50 p-6 rounded-lg text-center",children:[s.jsx(WP,{className:"text-4xl text-olive-green-600 mb-3"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e==="ar"?"الحلول":"Solutions"}),s.jsx("p",{className:"text-gray-600 text-sm",children:e==="ar"?"حلول مخصصة تلبي احتياجات كل عميل":"Customized solutions that meet each client's needs"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-turquoise-50 to-olive-green-50 p-6 rounded-lg text-center",children:[s.jsx(c0,{className:"text-4xl text-turquoise-600 mb-3"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e==="ar"?"الخبرة":"Expertise"}),s.jsx("p",{className:"text-gray-600 text-sm",children:e==="ar"?"فريق من الخبراء المعتمدين":"A team of certified experts"})]})]})})]})}),s.jsxs(V,{className:"bg-white shadow-lg rounded-2xl border-0 mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900",children:e==="ar"?"منهجيتنا":"Our Approach"}),s.jsxs(le,{gutter:[24,24],children:[s.jsx(_,{xs:24,md:8,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-olive-green-100 flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-2xl font-bold text-olive-green-600",children:"1"})}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:e==="ar"?"التحليل":"Analysis"}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:e==="ar"?"نبدأ بتحليل شامل للوضع الحالي وجمع البيانات اللازمة لفهم التحديات والفرص المتاحة":"We start with a comprehensive analysis of the current situation and collect the necessary data to understand challenges and opportunities"})]})}),s.jsx(_,{xs:24,md:8,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-turquoise-100 flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-2xl font-bold text-turquoise-600",children:"2"})}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:e==="ar"?"التخطيط":"Planning"}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:e==="ar"?"نطور استراتيجية واضحة وخطة عمل مفصلة مبنية على التحليل والبيانات المتاحة":"We develop a clear strategy and detailed action plan based on analysis and available data"})]})}),s.jsx(_,{xs:24,md:8,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-olive-green-100 flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-2xl font-bold text-olive-green-600",children:"3"})}),s.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:e==="ar"?"التنفيذ":"Implementation"}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:e==="ar"?"ننفذ الحلول المقترحة مع متابعة مستمرة وضمان تحقيق النتائج المرجوة":"We implement the proposed solutions with continuous follow-up and ensure achieving the desired results"})]})})]})]}),s.jsxs(V,{className:"bg-gradient-to-r from-olive-green-600 to-turquoise-500 text-white rounded-2xl border-0 text-center p-8",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:e==="ar"?"هل تريد معرفة المزيد؟":"Want to Know More?"}),s.jsx("p",{className:"text-xl mb-6 text-gray-100",children:e==="ar"?"تواصل معنا اليوم واحصل على استشارة مجانية":"Contact us today and get a free consultation"}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(va,{className:"text-2xl"}),s.jsx("span",{className:"text-lg",children:"www.jadwa.com"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"text-2xl"}),s.jsx("span",{className:"text-lg",children:e==="ar"?"فريق الدعم متاح 24/7":"Support team available 24/7"})]})]})]})]})})}),s.jsx(bn,{})]})},{Content:z8}=Je,{Search:mue}=F,F8=()=>{const{language:t}=Se(),e=st(),[r,n]=N.useState([]),[a,i]=N.useState(!0),[o,l]=N.useState(""),[c,d]=N.useState("all");N.useEffect(()=>{u()},[o,c]);const u=async()=>{try{i(!0);const x={status:"ACTIVE"};o&&(x.search=o),c!=="all"&&(x.category=c);const g=await gs.getServices(x);n(g.services||[])}catch(x){console.error("Error fetching services:",x)}finally{i(!1)}},f=x=>({ECONOMIC:s.jsx(vd,{className:"text-4xl"}),ADMINISTRATIVE:s.jsx(Mn,{className:"text-4xl"}),FINANCIAL_ACCOUNTING:s.jsx(ir,{className:"text-4xl"}),ANALYSIS_REPORTS:s.jsx(It,{className:"text-4xl"}),FIELD_SURVEY:s.jsx(ya,{className:"text-4xl"}),DIGITAL_CUSTOMER:s.jsx(Ps,{className:"text-4xl"})})[x]||s.jsx(It,{className:"text-4xl"}),h=x=>({ECONOMIC:"from-olive-green-500 to-olive-green-600",ADMINISTRATIVE:"from-turquoise-500 to-turquoise-600",FINANCIAL_ACCOUNTING:"from-olive-green-400 to-turquoise-500",ANALYSIS_REPORTS:"from-turquoise-400 to-olive-green-500",FIELD_SURVEY:"from-olive-green-600 to-turquoise-600",DIGITAL_CUSTOMER:"from-turquoise-500 to-olive-green-500"})[x]||"from-olive-green-500 to-turquoise-500",p=x=>({ECONOMIC:t==="ar"?"اقتصادية":"Economic",ADMINISTRATIVE:t==="ar"?"إدارية":"Administrative",FINANCIAL_ACCOUNTING:t==="ar"?"مالية ومحاسبية":"Financial & Accounting",ANALYSIS_REPORTS:t==="ar"?"تحليل وتقارير":"Analysis & Reports",FIELD_SURVEY:t==="ar"?"ميدانية":"Field Survey",DIGITAL_CUSTOMER:t==="ar"?"رقمية":"Digital"})[x]||x,m=[{value:"all",label:t==="ar"?"الكل":"All"},{value:"ECONOMIC",label:t==="ar"?"اقتصادية":"Economic"},{value:"ADMINISTRATIVE",label:t==="ar"?"إدارية":"Administrative"},{value:"FINANCIAL_ACCOUNTING",label:t==="ar"?"مالية ومحاسبية":"Financial & Accounting"},{value:"ANALYSIS_REPORTS",label:t==="ar"?"تحليل وتقارير":"Analysis & Reports"},{value:"FIELD_SURVEY",label:t==="ar"?"ميدانية":"Field Survey"},{value:"DIGITAL_CUSTOMER",label:t==="ar"?"رقمية":"Digital"}];return s.jsxs(Je,{className:"min-h-screen",children:[s.jsx(vn,{}),s.jsx(z8,{className:"py-20 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:t==="ar"?"الخدمات":"Services"}),s.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:t==="ar"?"القائمة الكاملة لخدمات منصة جدوى":"Complete list of Jadwa Platform services"})]}),s.jsxs("div",{className:"mb-8 flex flex-col md:flex-row gap-4",children:[s.jsx(he.Compact,{className:"flex-1",children:s.jsx(F,{placeholder:t==="ar"?"ابحث عن خدمة...":"Search for a service...",prefix:s.jsx(ya,{}),value:o,onChange:x=>l(x.target.value),size:"large"})}),s.jsx(B,{value:c,onChange:d,options:m,size:"large",className:"w-full md:w-64"})]}),a?s.jsx("div",{className:"flex justify-center items-center py-20",children:s.jsx(et,{size:"large"})}):r.length>0?s.jsx(le,{gutter:[24,24],children:r.map(x=>s.jsx(_,{xs:24,sm:12,lg:8,xl:6,children:s.jsxs(V,{className:"h-full border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl overflow-hidden group",styles:{body:{padding:"32px"}},children:[s.jsx("div",{className:`w-20 h-20 rounded-2xl bg-gradient-to-br ${h(x.category)} flex items-center justify-center text-white mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:f(x.category)}),s.jsx(ce,{color:"blue",className:"mb-3",children:p(x.category)}),s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-900 min-h-[56px]",children:t==="ar"&&x.titleAr||x.title}),s.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed min-h-[72px] line-clamp-3",children:t==="ar"&&x.descriptionAr||x.description}),x.price&&x.price>0&&s.jsxs("div",{className:"mb-4 text-[#1a4d3a] font-bold text-lg",children:[x.price," ",t==="ar"?"ريال":"SAR"]}),x.targetAudience&&s.jsxs("div",{className:"mb-4 text-sm text-gray-500",children:[s.jsx("strong",{children:t==="ar"?"الفئة المستهدفة: ":"Target Audience: "}),x.targetAudience]}),s.jsx(P,{type:"primary",className:"w-full bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 h-11 font-semibold shadow-md hover:shadow-lg transition-all duration-300",onClick:()=>e("/login"),children:t==="ar"?"طلب الخدمة":"Request Service"})]})},x.id))}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:t==="ar"?"لا توجد خدمات متاحة":"No services available"})]})}),s.jsx(bn,{})]})},{Content:B8}=Je,U8=()=>s.jsxs(Je,{className:"min-h-screen",children:[s.jsx(vn,{}),s.jsx(B8,{children:s.jsx(KS,{showViewAll:!1})}),s.jsx(bn,{})]}),{Content:Wp}=Je,V8=()=>{var f,h,p;const{id:t}=Aa(),e=st(),{language:r}=Se(),[n,a]=N.useState(null),[i,o]=N.useState(!0),[l,c]=N.useState(null);N.useEffect(()=>{t&&d()},[t]);const d=async()=>{try{o(!0),c(null);const m=await Es.getConsultantById(t);a(m.consultant)}catch(m){console.error("Error fetching consultant:",m),c(m.message||"Failed to load consultant")}finally{o(!1)}};if(i)return s.jsxs(Je,{className:"min-h-screen",children:[s.jsx(vn,{}),s.jsx(Wp,{className:"py-20",children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})})}),s.jsx(bn,{})]});if(l||!n)return s.jsxs(Je,{className:"min-h-screen",children:[s.jsx(vn,{}),s.jsx(Wp,{className:"py-20",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4",children:s.jsx(Mr,{message:r==="ar"?"خطأ":"Error",description:l||(r==="ar"?"المستشار غير موجود":"Consultant not found"),type:"error",showIcon:!0,action:s.jsx(P,{onClick:()=>e("/consultants"),children:r==="ar"?"العودة":"Go Back"})})})}),s.jsx(bn,{})]});const u=n.user?`${n.firstName||""} ${n.lastName||""}`.trim()||n.user.email:`${n.firstName||""} ${n.lastName||""}`.trim()||"Consultant";return s.jsxs(Je,{className:"min-h-screen",children:[s.jsx(vn,{}),s.jsx(Wp,{className:"py-20 bg-white",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-8",children:[s.jsx(P,{icon:s.jsx(Di,{}),onClick:()=>e("/consultants"),className:"mb-8 text-[#1a4d3a] hover:text-[#2d5f4f] border-[#1a4d3a] hover:border-[#2d5f4f] font-semibold",children:r==="ar"?"العودة":"Back to Consultants"}),s.jsx(V,{className:"mb-8 border-0 shadow-lg rounded-2xl overflow-hidden",styles:{body:{padding:"48px"}},children:s.jsxs(le,{gutter:[32,32],align:"middle",children:[s.jsx(_,{xs:24,md:6,className:"text-center md:text-left",children:s.jsx(ot,{size:160,src:(f=n.user)==null?void 0:f.avatar,icon:s.jsx(Ee,{}),className:"border-4 border-[#1a4d3a] shadow-xl mb-4 md:mb-0"})}),s.jsxs(_,{xs:24,md:18,children:[s.jsx("div",{className:"mb-4",children:s.jsx(ce,{color:"green",className:"mb-3 text-sm px-4 py-1 font-semibold",children:n.status==="APPROVED"?r==="ar"?"موافق عليه":"Approved":r==="ar"?"قيد المراجعة":"Pending Review"})}),s.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:u}),n.academicDegree&&s.jsx("p",{className:"text-2xl text-[#1a4d3a] mb-4 font-semibold",children:n.academicDegree}),n.specialization&&s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:n.specialization}),n.rating&&s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Co,{className:"text-[#d4af37] text-xl"}),s.jsx("span",{className:"text-2xl font-bold text-gray-900",children:n.rating.toFixed(1)}),s.jsx("span",{className:"text-gray-500",children:"/ 5.0"})]}),s.jsxs(he,{size:"large",wrap:!0,children:[s.jsx(P,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-12 px-8 text-lg font-semibold shadow-lg hover:shadow-xl transition-all hover:scale-105",onClick:()=>e("/register"),children:r==="ar"?"احجز استشارة":"Book Consultation"}),s.jsx(P,{size:"large",className:"border-2 border-[#1a4d3a] text-[#1a4d3a] hover:bg-[#1a4d3a] hover:text-white h-12 px-8 text-lg font-semibold transition-all",onClick:()=>e("/contact"),children:r==="ar"?"تواصل معنا":"Contact Us"})]})]})]})}),s.jsxs(le,{gutter:[24,24],children:[s.jsxs(_,{xs:24,lg:16,children:[n.bio&&s.jsxs(V,{className:"mb-6 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"32px"}},children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:r==="ar"?"نبذة عن المستشار":"About"}),s.jsx("p",{className:"text-gray-700 leading-relaxed text-lg whitespace-pre-line",children:n.bio})]}),s.jsxs(V,{className:"mb-6 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"32px"}},children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:r==="ar"?"المؤهلات والخبرة":"Qualifications & Experience"}),s.jsxs(be,{column:1,bordered:!0,children:[n.yearsOfExperience&&s.jsxs(be.Item,{label:r==="ar"?"سنوات الخبرة":"Years of Experience",children:[n.yearsOfExperience," ",r==="ar"?"سنة":"years"]}),n.academicDegree&&s.jsx(be.Item,{label:r==="ar"?"الدرجة العلمية":"Academic Degree",children:n.academicDegree}),n.specialization&&s.jsx(be.Item,{label:r==="ar"?"التخصص":"Specialization",children:n.specialization}),n.pricePerSession&&s.jsx(be.Item,{label:r==="ar"?"سعر الجلسة":"Price Per Session",children:s.jsxs("span",{className:"text-[#1a4d3a] font-bold text-lg",children:[n.pricePerSession," ",r==="ar"?"ريال":"SAR"]})})]})]})]}),s.jsxs(_,{xs:24,lg:8,children:[s.jsxs(V,{className:"mb-6 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"32px"}},children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:r==="ar"?"معلومات الاتصال":"Contact Information"}),s.jsxs(he,{direction:"vertical",size:"large",className:"w-full",children:[((h=n.user)==null?void 0:h.email)&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(zn,{className:"text-[#1a4d3a] text-xl"}),s.jsx("span",{className:"text-gray-700",children:n.user.email})]}),((p=n.user)==null?void 0:p.phone)&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ka,{className:"text-[#1a4d3a] text-xl"}),s.jsx("span",{className:"text-gray-700",children:n.user.phone})]})]})]}),s.jsxs(V,{className:"border-0 shadow-lg rounded-2xl",styles:{body:{padding:"32px"}},children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:r==="ar"?"الإحصائيات":"Statistics"}),s.jsxs(he,{direction:"vertical",size:"large",className:"w-full",children:[n.rating&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:r==="ar"?"التقييم":"Rating"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Co,{className:"text-[#d4af37]"}),s.jsx("span",{className:"font-bold text-lg",children:n.rating.toFixed(1)})]})]}),n.totalSessions!==void 0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:r==="ar"?"إجمالي الجلسات":"Total Sessions"}),s.jsx("span",{className:"font-bold text-lg",children:n.totalSessions||0})]}),n.totalClients!==void 0&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:r==="ar"?"عدد العملاء":"Total Clients"}),s.jsx("span",{className:"font-bold text-lg",children:n.totalClients||0})]})]})]})]})]})]})}),s.jsx(bn,{})]})},H8=({reportId:t})=>{const{language:e}=Se(),r=st(),[n,a]=N.useState(null),[i,o]=N.useState(!0);N.useEffect(()=>{t&&l()},[t]);const l=async()=>{try{o(!0),R.info(e==="ar"?"هذه الصفحة قيد التطوير":"This page is under development"),r("/reports")}catch(c){R.error(c.message||(e==="ar"?"فشل تحميل التقرير":"Failed to load report")),r("/reports")}finally{o(!1)}};return i?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(et,{size:"large"})}):n?s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 md:px-8",children:[s.jsx(P,{icon:s.jsx(Di,{}),onClick:()=>r("/reports"),className:"mb-6",children:e==="ar"?"العودة":"Back"}),s.jsxs(V,{className:"shadow-lg",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:n.title}),s.jsxs(he,{wrap:!0,children:[s.jsx(ce,{color:"blue",children:n.reportType}),s.jsx(ce,{color:n.status==="APPROVED"?"green":"orange",children:n.status})]})]}),n.summary&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:e==="ar"?"ملخص":"Summary"}),s.jsx("p",{className:"text-gray-700",children:n.summary})]}),s.jsxs(be,{bordered:!0,column:{xs:1,sm:2},children:[n.booking&&s.jsxs(s.Fragment,{children:[s.jsx(be.Item,{label:e==="ar"?"الحجز":"Booking",children:n.booking.id}),n.booking.service&&s.jsx(be.Item,{label:e==="ar"?"الخدمة":"Service",children:e==="ar"?n.booking.service.titleAr:n.booking.service.title})]}),n.createdAt&&s.jsx(be.Item,{label:e==="ar"?"تاريخ الإنشاء":"Created At",children:new Date(n.createdAt).toLocaleDateString()})]}),s.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:[n.pdfUrl&&s.jsx(P,{type:"primary",icon:s.jsx(zr,{}),size:"large",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",href:n.pdfUrl,download:!0,children:e==="ar"?"تحميل PDF":"Download PDF"}),n.wordUrl&&s.jsx(P,{icon:s.jsx(It,{}),size:"large",href:n.wordUrl,download:!0,children:e==="ar"?"تحميل Word":"Download Word"})]})]})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs(V,{children:[s.jsx("p",{children:e==="ar"?"التقرير غير موجود":"Report not found"}),s.jsx(P,{onClick:()=>r("/reports"),children:e==="ar"?"العودة":"Go Back"})]})})},{Content:W8}=Je,Tv=()=>{const{id:t}=Aa();return s.jsxs(Je,{className:"min-h-screen",children:[s.jsx(vn,{}),s.jsx(W8,{children:t?s.jsx(H8,{reportId:t}):s.jsx(JS,{})}),s.jsx(bn,{})]})},{Content:q8}=Je,Y8=()=>{const{t,language:e}=Se(),r=st(),[n,a]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(""),[d,u]=N.useState("all");N.useEffect(()=>{f()},[l,d]);const f=async()=>{try{o(!0);const p={status:"PUBLISHED"};l&&(p.search=l),d!=="all"&&(p.category=d);const m=await pr.getArticles(p),x="http://localhost:5000/api".replace("/api","")||"http://localhost:5000",g=(m.articles||[]).map(y=>{var j;if(y.featuredImage){let b=y.featuredImage;/^https?:\/\//.test(b)?(b.includes(`${x}${x}`)||((j=b.match(/http:\/\/localhost:5000/g))==null?void 0:j.length)>1)&&(b=b.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),b=`http://localhost:5000/${b}`):b=b.startsWith("/")?`${x}${b}`:`${x}/${b}`,y.featuredImage=b}return y});a(g)}catch(p){console.error("Error fetching articles:",p)}finally{o(!1)}},h=[...new Set(n.map(p=>p.category).filter(Boolean))];return s.jsxs(Je,{className:"min-h-screen",children:[s.jsx(vn,{}),s.jsx(q8,{className:"py-20 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 text-gray-900",children:e==="ar"?"المدونة":"Blog"}),s.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"اكتشف آخر المقالات والأخبار حول الاستشارات والدراسات الاقتصادية":"Discover the latest articles and news about consulting and economic studies"})]}),s.jsxs("div",{className:"mb-12 flex flex-col md:flex-row gap-4",children:[s.jsxs(he.Compact,{className:"flex-1",children:[s.jsx(F,{placeholder:e==="ar"?"ابحث في المقالات...":"Search articles...",allowClear:!0,size:"large",value:l,onChange:p=>c(p.target.value),onPressEnter:()=>{},className:"flex-1 border-2 border-gray-200 focus:border-[#1a4d3a] rounded-lg"}),s.jsx(P,{type:"primary",icon:s.jsx(ya,{}),size:"large",className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 font-semibold",onClick:()=>{}})]}),s.jsxs(B,{value:d,onChange:u,style:{width:200},size:"large",className:"border-2 border-gray-200 focus:border-[#1a4d3a] rounded-lg",children:[s.jsx(B.Option,{value:"all",children:e==="ar"?"جميع الفئات":"All Categories"}),h.map(p=>s.jsx(B.Option,{value:p,children:p},p))]})]}),i?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(et,{size:"large"})}):n.length===0?s.jsx(Xt,{description:e==="ar"?"لا توجد مقالات متاحة":"No articles available",className:"py-12"}):s.jsxs(s.Fragment,{children:[n.length>0&&s.jsx(V,{className:"mb-12 overflow-hidden border-0 shadow-2xl",styles:{body:{padding:"0"}},style:{borderRadius:"24px"},cover:n[0].featuredImage?s.jsxs("div",{className:"relative h-[500px] overflow-hidden",children:[s.jsx("img",{src:n[0].featuredImage,alt:e==="ar"&&n[0].titleAr||n[0].title,className:"w-full h-full object-cover",onError:p=>{console.error("Failed to load featured image:",n[0].featuredImage),p.target.style.display="none"}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 md:p-12 text-white",children:[n[0].category&&s.jsx(ce,{color:"blue",className:"mb-4 text-sm px-4 py-1 font-semibold",children:n[0].category}),s.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 leading-tight",children:e==="ar"&&n[0].titleAr||n[0].title}),n[0].excerpt&&s.jsx("p",{className:"text-xl text-gray-100 mb-6 line-clamp-2 leading-relaxed",children:e==="ar"&&n[0].excerptAr||n[0].excerpt}),s.jsxs("div",{className:"flex items-center gap-6 text-base mb-6",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Ft,{}),fe(n[0].publishedAt||n[0].createdAt).format("YYYY-MM-DD")]}),s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(mr,{}),n[0].views||0]})]}),s.jsx(P,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-14 px-10 text-lg font-semibold shadow-lg hover:shadow-xl transition-all",onClick:()=>r(`/blog/${n[0].slug}`),children:e==="ar"?"اقرأ المزيد":"Read More"})]})]}):null}),s.jsx(le,{gutter:[32,32],children:n.slice(1).map(p=>s.jsx(_,{xs:24,sm:12,lg:8,children:s.jsxs(V,{hoverable:!0,className:"h-full transition-all duration-300 hover:shadow-2xl border-0 rounded-2xl overflow-hidden group",styles:{body:{padding:"0"}},cover:p.featuredImage?s.jsx("div",{className:"relative h-48 overflow-hidden",children:s.jsx("img",{alt:e==="ar"&&p.titleAr||p.title,src:p.featuredImage,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110",onError:m=>{console.error("Failed to load article image:",p.featuredImage),m.target.style.display="none"}})}):s.jsx("div",{className:"h-48 bg-gradient-to-br from-olive-green-400 to-turquoise-400 flex items-center justify-center",children:s.jsx("span",{className:"text-white text-4xl font-bold",children:e==="ar"?(p.titleAr||p.title).charAt(0):p.title.charAt(0)})}),onClick:()=>r(`/blog/${p.slug}`),children:[s.jsx("div",{className:"mb-2",children:p.category&&s.jsx(ce,{color:"blue",className:"mb-2",children:p.category})}),s.jsx("h3",{className:"text-xl font-bold mb-2 line-clamp-2 hover:text-olive-green-600 transition-colors",children:e==="ar"&&p.titleAr||p.title}),p.excerpt&&s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:e==="ar"&&p.excerptAr||p.excerpt}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ft,{}),fe(p.publishedAt||p.createdAt).format("YYYY-MM-DD")]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(mr,{}),p.views||0]})]})]})},p.id))})]})]})}),s.jsx(bn,{})]})},{Content:qp}=Je,G8=()=>{var x;const{slug:t}=Aa(),e=st(),{t:r,language:n}=Se(),[a,i]=N.useState(null),[o,l]=N.useState(!0),[c,d]=N.useState(null),[u,f]=N.useState([]);N.useEffect(()=>{t&&(h(),p())},[t]);const h=async()=>{var g;try{l(!0),d(null);const j=(await pr.getArticleBySlug(t)).article;if(j&&j.featuredImage){const b="http://localhost:5000/api".replace("/api","")||"http://localhost:5000";let S=j.featuredImage;/^https?:\/\//.test(S)?(S.includes(`${b}${b}`)||((g=S.match(/http:\/\/localhost:5000/g))==null?void 0:g.length)>1)&&(S=S.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),S=`http://localhost:5000/${S}`):S=S.startsWith("/")?`${b}${S}`:`${b}/${S}`,j.featuredImage=S}if(j&&(j.content||j.contentAr)){const b="http://localhost:5000/api".replace("/api","")||"http://localhost:5000",S=w=>w&&w.replace(/<img([^>]+)src=["']([^"']+)["']/gi,(v,C,A)=>{var O;let k=A;return A.startsWith("http://")||A.startsWith("https://")?(A.includes(`${b}${b}`)||((O=A.match(/http:\/\/localhost:5000/g))==null?void 0:O.length)>1)&&(k=A.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),k=`http://localhost:5000/${k}`):k=A.startsWith("/")?`${b}${A}`:`${b}/${A}`,`<img${C}src="${k}"`});j.content&&(j.content=S(j.content)),j.contentAr&&(j.contentAr=S(j.contentAr))}i(j)}catch(y){console.error("Error fetching article:",y),d(y.message||"Failed to load article")}finally{l(!1)}},p=async()=>{var g;try{const y=await pr.getArticles({status:"PUBLISHED",category:a==null?void 0:a.category,limit:3});f(((g=y.articles)==null?void 0:g.filter(j=>j.slug!==t).slice(0,3))||[])}catch(y){console.error("Error fetching related articles:",y)}},m=()=>{navigator.share?navigator.share({title:n==="ar"&&(a==null?void 0:a.titleAr)||(a==null?void 0:a.title),text:n==="ar"&&(a==null?void 0:a.excerptAr)||(a==null?void 0:a.excerpt),url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert(n==="ar"?"تم نسخ الرابط":"Link copied to clipboard"))};return o?s.jsxs(Je,{className:"min-h-screen",children:[s.jsx(vn,{}),s.jsx(qp,{className:"py-16",children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})})}),s.jsx(bn,{})]}):c||!a?s.jsxs(Je,{className:"min-h-screen",children:[s.jsx(vn,{}),s.jsx(qp,{className:"py-16",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4",children:s.jsx(Mr,{message:n==="ar"?"خطأ":"Error",description:c||(n==="ar"?"المقال غير موجود":"Article not found"),type:"error",showIcon:!0,action:s.jsx(P,{onClick:()=>e("/blog"),children:n==="ar"?"العودة للمدونة":"Back to Blog"})})})}),s.jsx(bn,{})]}):s.jsxs(Je,{className:"min-h-screen",children:[s.jsx(vn,{}),s.jsx(qp,{className:"py-20 bg-white",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 md:px-8",children:[s.jsx(P,{icon:s.jsx(Di,{}),onClick:()=>e("/blog"),className:"mb-8 text-[#1a4d3a] hover:text-[#2d5f4f] border-[#1a4d3a] hover:border-[#2d5f4f] font-semibold",children:n==="ar"?"العودة للمدونة":"Back to Blog"}),a.featuredImage&&s.jsx("div",{className:"relative h-[400px] md:h-[500px] rounded-2xl overflow-hidden mb-8 shadow-2xl",children:s.jsx("img",{src:a.featuredImage,alt:n==="ar"&&a.titleAr||a.title,className:"w-full h-full object-cover",onError:g=>{console.error("Failed to load featured image:",a.featuredImage),g.target.style.display="none"}})}),s.jsxs(V,{className:"mb-8 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"40px"}},children:[s.jsxs("div",{className:"mb-6",children:[a.category&&s.jsx(ce,{color:"blue",className:"mb-3 text-sm px-4 py-1 font-semibold",children:a.category}),s.jsx(ce,{color:a.status==="PUBLISHED"?"green":"orange",className:"text-sm px-4 py-1 font-semibold",children:a.status==="PUBLISHED"?n==="ar"?"منشور":"Published":n==="ar"?"مسودة":"Draft"})]}),s.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 text-gray-900 leading-tight",children:n==="ar"&&a.titleAr||a.title}),a.excerpt&&s.jsx("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 leading-relaxed",children:n==="ar"&&a.excerptAr||a.excerpt}),s.jsx(Rt,{className:"my-6"}),s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(ot,{size:56,icon:s.jsx(Ee,{}),className:"border-2 border-[#1a4d3a]"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-900",children:((x=a.author)==null?void 0:x.email)||"Admin"}),s.jsxs("div",{className:"text-base text-gray-500 flex items-center gap-3 mt-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ft,{}),fe(a.publishedAt||a.createdAt).format("YYYY-MM-DD")]}),s.jsx("span",{className:"mx-2",children:"•"}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(mr,{}),a.views||0," ",n==="ar"?"مشاهدة":"views"]})]})]})]}),s.jsx(P,{icon:s.jsx(FP,{}),onClick:m,className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 text-white font-semibold shadow-md hover:shadow-lg transition-all",children:n==="ar"?"مشاركة":"Share"})]})]}),s.jsx(V,{className:"mb-8 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"48px"}},children:s.jsx("div",{className:"prose prose-lg max-w-none article-content",style:{fontSize:"18px",lineHeight:"1.8",color:"#374151"},dangerouslySetInnerHTML:{__html:n==="ar"&&a.contentAr||a.content}})}),a.tags&&s.jsxs(V,{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:n==="ar"?"العلامات":"Tags"}),s.jsx(he,{wrap:!0,children:JSON.parse(a.tags||"[]").map((g,y)=>s.jsx(ce,{color:"blue",children:g},y))})]}),u.length>0&&s.jsxs("div",{className:"mt-12",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",children:n==="ar"?"مقالات ذات صلة":"Related Articles"}),s.jsx(le,{gutter:[24,24],children:u.map(g=>s.jsx(_,{xs:24,sm:12,lg:8,children:s.jsxs(V,{hoverable:!0,className:"h-full",cover:g.featuredImage?s.jsx("img",{alt:n==="ar"&&g.titleAr||g.title,src:g.featuredImage,className:"h-48 object-cover"}):null,onClick:()=>e(`/blog/${g.slug}`),children:[s.jsx("h3",{className:"text-lg font-bold mb-2 line-clamp-2",children:n==="ar"&&g.titleAr||g.title}),g.excerpt&&s.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-2",children:n==="ar"&&g.excerptAr||g.excerpt}),s.jsx("div",{className:"text-xs text-gray-500",children:fe(g.publishedAt||g.createdAt).format("YYYY-MM-DD")})]})},g.id))})]})]})}),s.jsx(bn,{})]})},{Content:K8}=Je,{TextArea:J8}=F,X8=()=>{const{t,language:e}=Se(),[r]=E.useForm(),n=a=>{console.log("Form values:",a)};return s.jsxs(Je,{className:"min-h-screen",children:[s.jsx(vn,{}),s.jsx(K8,{className:"py-16 bg-gray-50",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:t("contact")}),s.jsx("p",{className:"text-lg text-gray-600",children:e==="ar"?"نحن هنا لمساعدتك. تواصل معنا اليوم":"We are here to help. Contact us today"})]}),s.jsxs(le,{gutter:[32,32],children:[s.jsx(_,{xs:24,lg:12,children:s.jsxs(V,{className:"card h-full",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:e==="ar"?"إرسال رسالة":"Send Message"}),s.jsxs(E,{form:r,onFinish:n,layout:"vertical",children:[s.jsx(E.Item,{name:"name",label:e==="ar"?"الاسم":"Name",rules:[{required:!0}],children:s.jsx(F,{size:"large"})}),s.jsx(E.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,type:"email"}],children:s.jsx(F,{size:"large"})}),s.jsx(E.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:s.jsx(F,{size:"large"})}),s.jsx(E.Item,{name:"message",label:e==="ar"?"الرسالة":"Message",rules:[{required:!0}],children:s.jsx(J8,{rows:6})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 w-full",children:e==="ar"?"إرسال":"Send"})})]})]})}),s.jsx(_,{xs:24,lg:12,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs(V,{className:"card",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:t("contactInfo")}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[s.jsx(Ka,{className:"text-2xl text-turquoise-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:e==="ar"?"الهاتف":"Phone"}),s.jsx("div",{className:"text-gray-600",children:"+966 12 345 6789"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[s.jsx(zn,{className:"text-2xl text-turquoise-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:e==="ar"?"البريد الإلكتروني":"Email"}),s.jsx("div",{className:"text-gray-600",children:"info@jadwa.com"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[s.jsx(GS,{className:"text-2xl text-turquoise-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:"WhatsApp"}),s.jsx("a",{href:"#",className:"text-olive-green-600 hover:underline",children:e==="ar"?"تواصل عبر واتساب":"Contact via WhatsApp"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[s.jsx(Mh,{className:"text-2xl text-turquoise-500 mt-1"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:e==="ar"?"العنوان":"Address"}),s.jsx("div",{className:"text-gray-600",children:e==="ar"?"الرياض، المملكة العربية السعودية":"Riyadh, Saudi Arabia"})]})]})]})]}),s.jsx("div",{className:"card",children:s.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3624.5!2d46.6753!3d24.7136!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMjTCsDQyJzQ5LjAiTiA0NsKwNDAnMzEuMSJF!5e0!3m2!1sen!2s!4v1234567890",width:"100%",height:"300",style:{border:0,borderRadius:"8px"},allowFullScreen:!0,loading:"lazy",title:"Location Map"})})]})})]})]})}),s.jsx(bn,{})]})},{Content:Q8}=Je,Z8=()=>{const{language:t}=Se(),e=st(),r=dl(),{login:n,isAuthenticated:a}=yr(),[i]=E.useForm(),[o,l]=N.useState(!1);D.useEffect(()=>{var d,u;if(a){const f=((u=(d=r.state)==null?void 0:d.from)==null?void 0:u.pathname)||"/";e(f,{replace:!0})}},[a,e,r]);const c=async d=>{var u,f;l(!0);try{const h=await n(d.email,d.password);if(h.success){const p=h.user.role,m=(f=(u=r.state)==null?void 0:u.from)==null?void 0:f.pathname;m?e(m,{replace:!0}):p==="CLIENT"?e("/client",{replace:!0}):p==="CONSULTANT"?e("/consultant",{replace:!0}):["ADMIN","SUPER_ADMIN","ANALYST","SUPPORT","FINANCE"].includes(p)?e("/admin",{replace:!0}):e("/",{replace:!0})}}catch(h){console.error("Login error:",h)}finally{l(!1)}};return s.jsx(Je,{className:"min-h-screen bg-gradient-to-br from-olive-green-50 to-turquoise-50",children:s.jsx(Q8,{className:"flex items-center justify-center py-8 px-4",children:s.jsxs(V,{className:"w-full max-w-md shadow-xl",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-olive-green-600 to-turquoise-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-white font-bold text-3xl",children:"ج"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Jadwa"}),s.jsx("p",{className:"text-gray-600",children:t==="ar"?"تسجيل الدخول":"Login"}),!1]}),s.jsxs(E,{form:i,onFinish:c,layout:"vertical",size:"large",children:[s.jsx(E.Item,{name:"email",label:t==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"},{type:"email",message:t==="ar"?"بريد إلكتروني غير صحيح":"Invalid email"}],children:s.jsx(F,{prefix:s.jsx(zn,{}),placeholder:t==="ar"?"أدخل بريدك الإلكتروني":"Enter your email"})}),s.jsx(E.Item,{name:"password",label:t==="ar"?"كلمة المرور":"Password",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsx(F.Password,{prefix:s.jsx(Jt,{}),placeholder:t==="ar"?"أدخل كلمة المرور":"Enter your password"})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 w-full",loading:o,disabled:o,children:t==="ar"?"تسجيل الدخول":"Login"})})]}),s.jsx(Rt,{children:t==="ar"?"أو":"OR"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(P,{type:"default",size:"large",className:"border-turquoise-500 text-turquoise-600 hover:bg-turquoise-50 w-full",onClick:()=>e("/register"),children:t==="ar"?"إنشاء حساب جديد":"Create New Account"}),s.jsx(P,{type:"text",size:"large",className:"w-full",onClick:()=>e("/"),children:t==="ar"?"العودة للصفحة الرئيسية":"Back to Home"})]})]})})})},{Content:eT}=Je,{Option:$e}=B,{TextArea:Ys}=F,{Step:tT}=vh,rT=({value:t,onChange:e})=>{const{language:r}=Se(),[n,a]=N.useState([]),[i,o]=N.useState(!1);N.useEffect(()=>{l()},[]);const l=async()=>{try{o(!0);const c=await Es.getConsultants({isAvailable:!0});a(c.consultants||[])}catch(c){console.error("Error fetching consultants:",c)}finally{o(!1)}};return s.jsx(B,{value:t,onChange:e,placeholder:r==="ar"?"اختر مستشار (اختياري)":"Select Consultant (Optional)",allowClear:!0,loading:i,showSearch:!0,filterOption:(c,d)=>((d==null?void 0:d.label)??"").toLowerCase().includes(c.toLowerCase()),children:n.map(c=>s.jsx($e,{value:c.id,label:`${c.firstName} ${c.lastName}`,children:`${c.firstName} ${c.lastName} - ${c.specialization}`},c.id))})},nT=()=>{const{language:t}=Se(),e=st(),{register:r,isAuthenticated:n}=yr(),[a]=E.useForm(),[i,o]=N.useState(!1),[l,c]=N.useState(0);D.useEffect(()=>{n&&e("/",{replace:!0})},[n,e]);const d=async(A,k="USER")=>{var O;if(!A||!A.originFileObj)return null;try{const $=new FormData;$.append("file",A.originFileObj),$.append("ownerType",k);const M=await ra.uploadFile($);return((O=M==null?void 0:M.file)==null?void 0:O.fileUrl)||null}catch($){return console.error("Error uploading file:",$),null}},u=async(A,k="USER")=>{if(!A||!Array.isArray(A)||A.length===0)return[];const O=A.map(M=>d(M,k));return(await Promise.all(O)).filter(M=>M!==null)},f=async A=>{o(!0);try{const k=A.role||"client",O={email:A.email,password:A.password,role:k?k.toUpperCase():"CLIENT",firstName:A.firstName,lastName:A.lastName,phone:A.phone,dateOfBirth:A.dateOfBirth?A.dateOfBirth.toISOString():null,gender:A.gender,country:A.country||"Saudi Arabia",city:A.city,address:A.address,postalCode:A.postalCode,preferredLanguage:A.preferredLanguage||"ar",termsAccepted:A.termsAccepted||!1};if(k==="client")O.accountType=A.accountType,O.sector=A.sector,O.companyName=A.companyName,O.commercialName=A.commercialName,O.preferredServices=A.preferredServices||[],O.registrationPurpose=A.registrationPurpose,O.preferredConsultantId=A.preferredConsultantId,O.preferredPaymentMethod=A.preferredPaymentMethod,O.invoiceAddress=A.invoiceAddress,O.taxNumber=A.taxNumber,O.notificationEmail=A.notificationEmail!==!1,O.notificationApp=A.notificationApp!==!1,O.notificationWhatsApp=A.notificationWhatsApp||!1,(A.accountType==="COMPANY"||A.accountType==="GOVERNMENT_ENTITY")&&(O.commercialRegister=A.commercialRegister,O.taxNumber=A.taxNumber,O.economicSector=A.economicSector,O.industry=A.industry,O.numberOfEmployees=A.numberOfEmployees,A.entityDefinition&&A.entityDefinition.length>0&&(O.entityDefinition=await d(A.entityDefinition[0],"GENERAL")),A.commercialRegisterFile&&A.commercialRegisterFile.length>0&&(O.commercialRegisterFile=await d(A.commercialRegisterFile[0],"GENERAL")),A.companyLogo&&A.companyLogo.length>0&&(O.companyLogo=await d(A.companyLogo[0],"GENERAL")));else if(k==="consultant"){if(O.academicTitle=A.academicTitle,O.academicDegree=A.academicDegree,O.university=A.university,O.graduationYear=A.graduationYear,O.specialization=A.specialization,O.specificSpecialization=A.specificSpecialization,O.bio=A.bio,O.pricePerSession=A.pricePerSession||0,O.sessionDuration=A.sessionDuration||60,O.consultationMode=A.consultationMode||[],O.yearsOfExperience=A.yearsOfExperience||0,O.previousEmployers=A.previousEmployers,O.areasOfExpertise=A.areasOfExpertise||[],O.implementedProjects=A.implementedProjects||[],O.languages=A.languages||[],O.certifications=A.certifications||[],O.professionalCourses=A.professionalCourses,A.profilePicture&&A.profilePicture.length>0&&(O.profilePicture=await d(A.profilePicture[0],"USER")),A.cvUrl&&A.cvUrl.length>0&&(O.cvUrl=await d(A.cvUrl[0],"GENERAL")),A.academicCertificates&&A.academicCertificates.length>0){const M=await u(A.academicCertificates,"GENERAL");O.academicCertificates=M}A.nationalId&&A.nationalId.length>0&&(O.nationalId=await d(A.nationalId[0],"GENERAL")),A.consultingLicense&&A.consultingLicense.length>0&&(O.consultingLicense=await d(A.consultingLicense[0],"GENERAL")),O.bankAccount=A.bankAccount,O.bankName=A.bankName,O.iban=A.iban,O.acceptsSessions=A.acceptsSessions!==!1}const $=await r(O);if($.success){R.success(t==="ar"?"تم إنشاء الحساب بنجاح":"Account created successfully");const M=$.user.role;M==="CLIENT"?e("/client",{replace:!0}):M==="CONSULTANT"?e("/consultant",{replace:!0}):e("/",{replace:!0})}}catch(k){R.error(k.message||(t==="ar"?"فشل إنشاء الحساب":"Failed to create account")),console.error("Registration error:",k)}finally{o(!1)}},h=E.useWatch("role",a),p=E.useWatch("accountType",a),m=[{title:t==="ar"?"المعلومات الأساسية":"Basic Information",content:"basic"},{title:h==="client"?t==="ar"?"معلومات العميل":"Client Information":t==="ar"?"المؤهلات الأكاديمية":"Academic Qualifications",content:"role-specific"},{title:h==="client"?t==="ar"?"الخدمات والإعدادات":"Services & Settings":t==="ar"?"الخبرات والخدمات":"Experience & Services",content:"additional"},{title:h==="client"?t==="ar"?"المعلومات المالية":"Financial Information":t==="ar"?"المعلومات المالية والوثائق":"Financial Info & Documents",content:"financial"}],x=()=>s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"role",label:t==="ar"?"نوع الحساب":"Account Type",rules:[{required:!0,message:t==="ar"?"يرجى اختيار نوع الحساب":"Please select account type"}],initialValue:"client",children:s.jsxs(B,{placeholder:t==="ar"?"اختر نوع الحساب":"Select account type",children:[s.jsx($e,{value:"client",children:t==="ar"?"عميل":"Client"}),s.jsx($e,{value:"consultant",children:t==="ar"?"مستشار":"Consultant"})]})}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"firstName",label:t==="ar"?"الاسم الأول":"First Name",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsx(F,{prefix:s.jsx(Ee,{}),placeholder:t==="ar"?"الاسم الأول":"First Name"})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"lastName",label:t==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsx(F,{prefix:s.jsx(Ee,{}),placeholder:t==="ar"?"اسم العائلة":"Last Name"})})})]}),s.jsx(E.Item,{name:"email",label:t==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"},{type:"email",message:t==="ar"?"بريد إلكتروني غير صحيح":"Invalid email"}],children:s.jsx(F,{prefix:s.jsx(zn,{}),placeholder:t==="ar"?"البريد الإلكتروني":"Email"})}),s.jsx(E.Item,{name:"phone",label:t==="ar"?"رقم الهاتف":"Phone Number",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsx(F,{prefix:s.jsx(Ka,{}),placeholder:"+966 5XX XXX XXX"})}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"password",label:t==="ar"?"كلمة المرور":"Password",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"},{min:8,message:t==="ar"?"8 أحرف على الأقل":"At least 8 characters"},{validator:(A,k)=>k?k.length<8?Promise.reject(new Error(t==="ar"?"يجب أن تكون كلمة المرور 8 أحرف على الأقل":"Password must be at least 8 characters")):/[A-Z]/.test(k)?/[a-z]/.test(k)?/[0-9]/.test(k)?Promise.resolve():Promise.reject(new Error(t==="ar"?"يجب أن تحتوي كلمة المرور على رقم واحد على الأقل":"Password must contain at least one number")):Promise.reject(new Error(t==="ar"?"يجب أن تحتوي كلمة المرور على حرف صغير واحد على الأقل":"Password must contain at least one lowercase letter")):Promise.reject(new Error(t==="ar"?"يجب أن تحتوي كلمة المرور على حرف كبير واحد على الأقل":"Password must contain at least one uppercase letter")):Promise.resolve()}],help:t==="ar"?"يجب أن تحتوي على 8 أحرف على الأقل، حرف كبير، حرف صغير، ورقم":"Must contain at least 8 characters with uppercase, lowercase, and number",children:s.jsx(F.Password,{prefix:s.jsx(Jt,{}),placeholder:t==="ar"?"كلمة المرور":"Password"})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"confirmPassword",label:t==="ar"?"تأكيد كلمة المرور":"Confirm Password",dependencies:["password"],rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"},({getFieldValue:A})=>({validator(k,O){return!O||A("password")===O?Promise.resolve():Promise.reject(new Error(t==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match"))}})],children:s.jsx(F.Password,{prefix:s.jsx(Jt,{}),placeholder:t==="ar"?"تأكيد كلمة المرور":"Confirm Password"})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:8,children:s.jsx(E.Item,{name:"dateOfBirth",label:t==="ar"?"تاريخ الميلاد":"Date of Birth",children:s.jsx(Ms,{className:"w-full",placeholder:t==="ar"?"تاريخ الميلاد":"Date of Birth"})})}),s.jsx(_,{xs:24,sm:8,children:s.jsx(E.Item,{name:"gender",label:t==="ar"?"الجنس":"Gender",children:s.jsxs(B,{placeholder:t==="ar"?"اختر الجنس":"Select Gender",children:[s.jsx($e,{value:"MALE",children:t==="ar"?"ذكر":"Male"}),s.jsx($e,{value:"FEMALE",children:t==="ar"?"أنثى":"Female"}),s.jsx($e,{value:"OTHER",children:t==="ar"?"أخرى":"Other"})]})})}),s.jsx(_,{xs:24,sm:8,children:s.jsx(E.Item,{name:"preferredLanguage",label:t==="ar"?"اللغة المفضلة":"Preferred Language",children:s.jsxs(B,{children:[s.jsx($e,{value:"ar",children:t==="ar"?"العربية":"Arabic"}),s.jsx($e,{value:"en",children:t==="ar"?"الإنجليزية":"English"})]})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"city",label:t==="ar"?"المدينة":"City",children:s.jsx(F,{prefix:s.jsx(u0,{}),placeholder:t==="ar"?"المدينة":"City"})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"country",label:t==="ar"?"الدولة":"Country",children:s.jsx(B,{children:s.jsx($e,{value:"Saudi Arabia",children:t==="ar"?"السعودية":"Saudi Arabia"})})})})]}),s.jsx(E.Item,{name:"address",label:t==="ar"?"العنوان":"Address",children:s.jsx(Ys,{rows:2,placeholder:t==="ar"?"العنوان الكامل":"Full Address"})}),s.jsx(E.Item,{name:"postalCode",label:t==="ar"?"الرمز البريدي":"Postal Code",children:s.jsx(F,{placeholder:t==="ar"?"الرمز البريدي":"Postal Code"})})]}),g=()=>s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"accountType",label:t==="ar"?"نوع الحساب":"Account Type",rules:[{required:!0}],children:s.jsxs(Dn.Group,{children:[s.jsx(Dn,{value:"INDIVIDUAL",children:t==="ar"?"فرد":"Individual"}),s.jsx(Dn,{value:"COMPANY",children:t==="ar"?"شركة":"Company"}),s.jsx(Dn,{value:"GOVERNMENT_ENTITY",children:t==="ar"?"جهة حكومية":"Government Entity"})]})}),(p==="COMPANY"||p==="GOVERNMENT_ENTITY")&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"companyName",label:t==="ar"?"اسم المنشأة":"Establishment Name",children:s.jsx(F,{placeholder:t==="ar"?"اسم المنشأة":"Establishment Name"})}),s.jsx(E.Item,{name:"commercialName",label:t==="ar"?"الاسم التجاري":"Commercial Name",children:s.jsx(F,{placeholder:t==="ar"?"الاسم التجاري":"Commercial Name"})}),s.jsx(E.Item,{name:"commercialRegister",label:t==="ar"?"رقم السجل التجاري":"Commercial Register Number",children:s.jsx(F,{placeholder:t==="ar"?"رقم السجل التجاري":"Commercial Register Number"})}),s.jsx(E.Item,{name:"taxNumber",label:t==="ar"?"الرقم الضريبي":"Tax Number",children:s.jsx(F,{placeholder:t==="ar"?"الرقم الضريبي (اختياري)":"Tax Number (Optional)"})}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"economicSector",label:t==="ar"?"القطاع الاقتصادي":"Economic Sector",children:s.jsxs(B,{placeholder:t==="ar"?"اختر القطاع":"Select Sector",children:[s.jsx($e,{value:"GOVERNMENT",children:t==="ar"?"حكومي":"Government"}),s.jsx($e,{value:"PRIVATE",children:t==="ar"?"خاص":"Private"}),s.jsx($e,{value:"NON_PROFIT",children:t==="ar"?"غير ربحي":"Non-profit"})]})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"industry",label:t==="ar"?"المجال":"Industry",children:s.jsxs(B,{placeholder:t==="ar"?"اختر المجال":"Select Industry",children:[s.jsx($e,{value:"INDUSTRIAL",children:t==="ar"?"صناعي":"Industrial"}),s.jsx($e,{value:"COMMERCIAL",children:t==="ar"?"تجاري":"Commercial"}),s.jsx($e,{value:"SERVICE",children:t==="ar"?"خدمي":"Service"}),s.jsx($e,{value:"FINANCIAL",children:t==="ar"?"مالي":"Financial"}),s.jsx($e,{value:"CONSULTING",children:t==="ar"?"استشاري":"Consulting"}),s.jsx($e,{value:"EDUCATIONAL",children:t==="ar"?"تعليمي":"Educational"})]})})})]}),s.jsx(E.Item,{name:"numberOfEmployees",label:t==="ar"?"عدد الموظفين (تقديري)":"Number of Employees (Estimated)",children:s.jsx(F,{type:"number",min:0,placeholder:t==="ar"?"عدد الموظفين":"Number of Employees"})}),s.jsx(Rt,{children:t==="ar"?"المرفقات (اختيارية)":"Attachments (Optional)"}),s.jsx(E.Item,{name:"entityDefinition",label:t==="ar"?"مرفق تعريف بالمنشأة":"Entity Definition Document",valuePropName:"fileList",getValueFromEvent:A=>Array.isArray(A)?A:A==null?void 0:A.fileList,children:s.jsx(Yt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf",children:s.jsx(P,{icon:s.jsx(en,{}),children:t==="ar"?"رفع ملف PDF":"Upload PDF"})})}),s.jsx(E.Item,{name:"commercialRegisterFile",label:t==="ar"?"السجل التجاري أو الهوية":"Commercial Register or ID",valuePropName:"fileList",getValueFromEvent:A=>Array.isArray(A)?A:A==null?void 0:A.fileList,children:s.jsx(Yt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf,.jpg,.jpeg,.png",children:s.jsx(P,{icon:s.jsx(en,{}),children:t==="ar"?"رفع ملف PDF أو صورة":"Upload PDF or Image"})})}),s.jsx(E.Item,{name:"companyLogo",label:t==="ar"?"شعار الشركة":"Company Logo",valuePropName:"fileList",getValueFromEvent:A=>Array.isArray(A)?A:A==null?void 0:A.fileList,children:s.jsx(Yt,{beforeUpload:()=>!1,maxCount:1,accept:".jpg,.jpeg,.png",listType:"picture-card",children:s.jsxs("div",{children:[s.jsx(en,{}),s.jsx("div",{style:{marginTop:8},children:t==="ar"?"رفع":"Upload"})]})})})]}),s.jsx(E.Item,{name:"sector",label:t==="ar"?"القطاع":"Sector",children:s.jsx(F,{placeholder:t==="ar"?"القطاع":"Sector"})})]}),y=()=>s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"academicTitle",label:t==="ar"?"اللقب العلمي":"Academic Title",children:s.jsxs(B,{placeholder:t==="ar"?"اختر اللقب العلمي":"Select Academic Title",children:[s.jsx($e,{value:"DOCTOR",children:t==="ar"?"دكتور":"Doctor"}),s.jsx($e,{value:"PROFESSOR",children:t==="ar"?"أستاذ":"Professor"}),s.jsx($e,{value:"CONSULTANT",children:t==="ar"?"مستشار":"Consultant"}),s.jsx($e,{value:"EXPERT",children:t==="ar"?"خبير":"Expert"}),s.jsx($e,{value:"ASSOCIATE_PROFESSOR",children:t==="ar"?"أ.مشارك":"Associate Professor"})]})}),s.jsx(E.Item,{name:"academicDegree",label:t==="ar"?"أعلى مؤهل علمي":"Highest Academic Qualification",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsxs(B,{placeholder:t==="ar"?"اختر المؤهل العلمي":"Select Academic Qualification",children:[s.jsx($e,{value:"BACHELOR",children:t==="ar"?"بكالوريوس":"Bachelor"}),s.jsx($e,{value:"MASTER",children:t==="ar"?"ماجستير":"Master"}),s.jsx($e,{value:"PHD",children:t==="ar"?"دكتوراه":"PhD"})]})}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"university",label:t==="ar"?"الجامعة المانحة":"Issuing University",children:s.jsx(F,{placeholder:t==="ar"?"اسم الجامعة":"University Name"})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"graduationYear",label:t==="ar"?"سنة التخرج":"Graduation Year",children:s.jsx(F,{type:"number",min:1950,max:new Date().getFullYear(),placeholder:"YYYY"})})})]}),s.jsx(E.Item,{name:"profilePicture",label:t==="ar"?"الصورة الشخصية":"Profile Picture",valuePropName:"fileList",getValueFromEvent:A=>Array.isArray(A)?A:A==null?void 0:A.fileList,children:s.jsx(Yt,{beforeUpload:()=>!1,maxCount:1,accept:".jpg,.jpeg,.png",listType:"picture-card",children:s.jsxs("div",{children:[s.jsx(en,{}),s.jsx("div",{style:{marginTop:8},children:t==="ar"?"رفع":"Upload"})]})})}),s.jsx(E.Item,{name:"specialization",label:t==="ar"?"التخصص العام":"General Specialization",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsxs(B,{placeholder:t==="ar"?"اختر التخصص":"Select Specialization",children:[s.jsx($e,{value:"ECONOMICS",children:t==="ar"?"اقتصاد":"Economics"}),s.jsx($e,{value:"MANAGEMENT",children:t==="ar"?"إدارة":"Management"}),s.jsx($e,{value:"FINANCE",children:t==="ar"?"مالية":"Finance"}),s.jsx($e,{value:"MARKETING",children:t==="ar"?"تسويق":"Marketing"}),s.jsx($e,{value:"ACCOUNTING",children:t==="ar"?"محاسبة":"Accounting"})]})}),s.jsx(E.Item,{name:"specificSpecialization",label:t==="ar"?"التخصص الدقيق":"Specific Specialization",children:s.jsx(F,{placeholder:t==="ar"?"مثل: اقتصاد قياسي / تمويل / موارد بشرية":"e.g., Econometrics / Finance / HR"})}),s.jsx(E.Item,{name:"bio",label:t==="ar"?"نبذة مختصرة":"Brief Biography",children:s.jsx(Ys,{rows:4,placeholder:t==="ar"?"اكتب نبذة عنك":"Write about yourself"})}),s.jsx(E.Item,{name:"yearsOfExperience",label:t==="ar"?"عدد سنوات الخبرة":"Years of Experience",children:s.jsx(F,{type:"number",min:0,placeholder:t==="ar"?"عدد السنوات":"Years"})}),s.jsx(E.Item,{name:"previousEmployers",label:t==="ar"?"الجهات السابقة":"Previous Employers",children:s.jsx(Ys,{rows:3,placeholder:t==="ar"?"أهم المناصب السابقة":"Most important previous positions"})}),s.jsx(E.Item,{name:"areasOfExpertise",label:t==="ar"?"مجالات الخبرة":"Areas of Expertise",children:s.jsx(B,{mode:"tags",placeholder:t==="ar"?"مثل: دراسات جدوى - استشارات مالية":"e.g., Feasibility Studies - Financial Consulting"})}),s.jsx(E.Item,{name:"implementedProjects",label:t==="ar"?"المشاريع المنفذة":"Implemented Projects",children:s.jsx(Ys,{rows:3,placeholder:t==="ar"?"أمثلة مختصرة":"Brief examples"})}),s.jsx(E.Item,{name:"languages",label:t==="ar"?"اللغات":"Languages",children:s.jsx(B,{mode:"tags",placeholder:t==="ar"?"اللغات التي تتحدثها":"Languages you speak"})}),s.jsx(E.Item,{name:"certifications",label:t==="ar"?"الشهادات المهنية":"Professional Certifications",children:s.jsx(B,{mode:"tags",placeholder:t==="ar"?"مثل: CFA / PMP / CMA":"e.g., CFA / PMP / CMA"})}),s.jsx(E.Item,{name:"professionalCourses",label:t==="ar"?"الدورات المهنية":"Professional Courses",children:s.jsx(Ys,{rows:3,placeholder:t==="ar"?"مثل: CFA / PMP / CMA":"e.g., CFA / PMP / CMA"})})]}),j=()=>s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"preferredServices",label:t==="ar"?"نوع الخدمة المطلوبة":"Type of Required Service",children:s.jsxs(B,{mode:"multiple",placeholder:t==="ar"?"اختر الخدمات":"Select Services",children:[s.jsx($e,{value:"ECONOMIC",children:t==="ar"?"اقتصادية":"Economic"}),s.jsx($e,{value:"FINANCIAL",children:t==="ar"?"مالية":"Financial"}),s.jsx($e,{value:"ADMINISTRATIVE",children:t==="ar"?"إدارية":"Administrative"}),s.jsx($e,{value:"FEASIBILITY_STUDY",children:t==="ar"?"دراسات جدوى":"Feasibility Studies"}),s.jsx($e,{value:"ANALYSIS",children:t==="ar"?"تحليل":"Analysis"})]})}),s.jsx(E.Item,{name:"registrationPurpose",label:t==="ar"?"الهدف من التسجيل":"Purpose of Registration",children:s.jsx(Ys,{rows:3,placeholder:t==="ar"?"مثل: تأسيس مشروع / استشارة مالية / تحليل سوق":"e.g., Project establishment / Financial consultation / Market analysis"})}),s.jsx(E.Item,{name:"preferredConsultantId",label:t==="ar"?"المستشار المفضل (اختياري)":"Preferred Consultant (Optional)",children:s.jsx(rT,{})}),s.jsx(Rt,{children:t==="ar"?"الإشعارات":"Notifications"}),s.jsx(E.Item,{name:"notificationEmail",valuePropName:"checked",children:s.jsx(ca,{children:t==="ar"?"تفعيل إشعارات البريد الإلكتروني":"Activate Email Notifications"})}),s.jsx(E.Item,{name:"notificationApp",valuePropName:"checked",children:s.jsx(ca,{children:t==="ar"?"تفعيل إشعارات التطبيق":"Activate Application Notifications"})}),s.jsx(E.Item,{name:"notificationWhatsApp",valuePropName:"checked",children:s.jsx(ca,{children:t==="ar"?"تفعيل إشعارات واتساب / الجوال":"Activate WhatsApp / Mobile Notifications"})}),s.jsx(E.Item,{name:"termsAccepted",valuePropName:"checked",rules:[{required:!0,message:t==="ar"?"يجب قبول الشروط والأحكام":"Must accept terms and conditions"}],children:s.jsx(ca,{children:t==="ar"?"أوافق على الشروط والأحكام":"I accept the terms and conditions"})})]}),b=()=>s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"pricePerSession",label:t==="ar"?"سعر الجلسة (ريال سعودي)":"Session Price (SAR)",rules:[{required:!0,message:t==="ar"?"مطلوب":"Required"}],children:s.jsx(F,{type:"number",min:0,placeholder:"500"})}),s.jsx(E.Item,{name:"sessionDuration",label:t==="ar"?"مدة الجلسة الافتراضية":"Default Session Duration",children:s.jsxs(B,{children:[s.jsxs($e,{value:30,children:["30 ",t==="ar"?"دقيقة":"minutes"]}),s.jsxs($e,{value:60,children:["60 ",t==="ar"?"دقيقة":"minutes"]}),s.jsxs($e,{value:90,children:["90 ",t==="ar"?"دقيقة":"minutes"]})]})}),s.jsx(E.Item,{name:"consultationMode",label:t==="ar"?"نمط الاستشارة":"Consultation Mode",children:s.jsxs(B,{mode:"multiple",placeholder:t==="ar"?"اختر أنماط الاستشارة":"Select Consultation Modes",children:[s.jsx($e,{value:"VIDEO",children:t==="ar"?"مرئية":"Video"}),s.jsx($e,{value:"CHAT",children:t==="ar"?"شات":"Chat"}),s.jsx($e,{value:"REPORT",children:t==="ar"?"تقارير":"Reports"}),s.jsx($e,{value:"WRITTEN_STUDY",children:t==="ar"?"دراسات مكتوبة":"Written Studies"})]})}),s.jsx(E.Item,{name:"acceptsSessions",valuePropName:"checked",children:s.jsx(ca,{children:t==="ar"?"تفعيل استقبال الجلسات":"Activate Session Reception"})})]}),S=()=>h==="client"?s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"preferredPaymentMethod",label:t==="ar"?"طريقة الدفع المفضلة":"Preferred Payment Method",children:s.jsxs(B,{placeholder:t==="ar"?"اختر طريقة الدفع":"Select Payment Method",children:[s.jsx($e,{value:"CREDIT_CARD",children:t==="ar"?"بطاقة":"Card"}),s.jsx($e,{value:"MADA",children:"Mada"}),s.jsx($e,{value:"APPLE_PAY",children:"Apple Pay"}),s.jsx($e,{value:"BANK_TRANSFER",children:t==="ar"?"تحويل بنكي":"Bank Transfer"})]})}),s.jsx(E.Item,{name:"taxNumber",label:t==="ar"?"رقم الهوية أو السجل الضريبي":"ID Number or Tax Register",children:s.jsx(F,{placeholder:t==="ar"?"يظهر في الفاتورة":"Appears in Invoice"})}),s.jsx(E.Item,{name:"invoiceAddress",label:t==="ar"?"عنوان الفاتورة":"Invoice Address",children:s.jsx(Ys,{rows:3,placeholder:t==="ar"?"يظهر في الفواتير الإلكترونية":"Appears in Electronic Invoices"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"bankAccount",label:t==="ar"?"رقم الحساب البنكي / الأيبان":"Bank Account Number / IBAN",children:s.jsx(F,{placeholder:t==="ar"?"للتحويل المستحقات":"For transferring dues"})}),s.jsx(E.Item,{name:"bankName",label:t==="ar"?"اسم البنك":"Bank Name",children:s.jsxs(B,{placeholder:t==="ar"?"بنوك المملكة":"Banks of the Kingdom",children:[s.jsx($e,{value:"AL_RAJHI",children:t==="ar"?"الراجحي":"Al Rajhi"}),s.jsx($e,{value:"AL_AHLI",children:t==="ar"?"الأهلي":"Al Ahli"}),s.jsx($e,{value:"RIYAD",children:t==="ar"?"الرياض":"Riyad"}),s.jsx($e,{value:"SABB",children:t==="ar"?"ساب":"SABB"}),s.jsx($e,{value:"NCB",children:t==="ar"?"الوطني":"NCB"})]})}),s.jsx(E.Item,{name:"iban",label:t==="ar"?"الأيبان":"IBAN",children:s.jsx(F,{placeholder:"SA..."})}),s.jsx(Rt,{children:t==="ar"?"الوثائق والمرفقات":"Documents & Attachments"}),s.jsx(E.Item,{name:"cvUrl",label:t==="ar"?"السيرة الذاتية (CV)":"Curriculum Vitae (CV)",valuePropName:"fileList",getValueFromEvent:A=>Array.isArray(A)?A:A==null?void 0:A.fileList,children:s.jsx(Yt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf",children:s.jsx(P,{icon:s.jsx(en,{}),children:t==="ar"?"رفع ملف PDF":"Upload PDF"})})}),s.jsx(E.Item,{name:"academicCertificates",label:t==="ar"?"الشهادات الأكاديمية":"Academic Certificates",valuePropName:"fileList",getValueFromEvent:A=>Array.isArray(A)?A:A==null?void 0:A.fileList,children:s.jsx(Yt,{beforeUpload:()=>!1,multiple:!0,accept:".pdf,.jpg,.jpeg,.png",children:s.jsx(P,{icon:s.jsx(en,{}),children:t==="ar"?"رفع ملفات متعددة":"Upload Multiple Files"})})}),s.jsx(E.Item,{name:"nationalId",label:t==="ar"?"الهوية الوطنية / الإقامة":"National ID / Residence",valuePropName:"fileList",getValueFromEvent:A=>Array.isArray(A)?A:A==null?void 0:A.fileList,children:s.jsx(Yt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf,.jpg,.jpeg,.png",children:s.jsx(P,{icon:s.jsx(en,{}),children:t==="ar"?"رفع ملف PDF أو صورة":"Upload PDF or Image"})})}),s.jsx(E.Item,{name:"consultingLicense",label:t==="ar"?"رخصة مزاولة الاستشارات (إن وجدت)":"Consulting License (If Available)",valuePropName:"fileList",getValueFromEvent:A=>Array.isArray(A)?A:A==null?void 0:A.fileList,children:s.jsx(Yt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf,.jpg,.jpeg,.png",children:s.jsx(P,{icon:s.jsx(en,{}),children:t==="ar"?"رفع ملف":"Upload File"})})}),s.jsx(Rt,{children:t==="ar"?"الإعدادات":"Settings"}),s.jsx(E.Item,{name:"notificationEmail",valuePropName:"checked",children:s.jsx(ca,{children:t==="ar"?"إشعارات البريد الإلكتروني":"Email Notifications"})}),s.jsx(E.Item,{name:"notificationApp",valuePropName:"checked",children:s.jsx(ca,{children:t==="ar"?"إشعارات التطبيق":"Application Notifications"})}),s.jsx(E.Item,{name:"termsAccepted",valuePropName:"checked",rules:[{required:!0,message:t==="ar"?"يجب قبول الشروط والأحكام":"Must accept terms and conditions"}],children:s.jsx(ca,{children:t==="ar"?"أوافق على الشروط والأحكام":"I accept the terms and conditions"})})]}),w=()=>{switch(l){case 0:return x();case 1:return h==="client"?g():y();case 2:return h==="client"?j():b();case 3:return S();default:return null}},v=()=>{const A=l===0?["role","firstName","lastName","email","phone","password","confirmPassword"]:[];a.validateFields(A).then(()=>{c(l+1)}).catch(k=>{if(console.log("Validation failed:",k),k.errorFields&&k.errorFields.length>0){const O=k.errorFields[0];O.name&&O.name[0]==="role"&&R.error(t==="ar"?"يرجى اختيار نوع الحساب":"Please select account type")}})},C=()=>{c(l-1)};return s.jsx(Je,{className:"min-h-screen bg-gradient-to-br from-olive-green-50 to-turquoise-50",children:s.jsx(eT,{className:"flex items-center justify-center py-8 px-4",children:s.jsxs(V,{className:"w-full max-w-4xl shadow-xl",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-olive-green-600 to-turquoise-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-white font-bold text-3xl",children:"ج"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Jadwa"}),s.jsx("p",{className:"text-gray-600",children:t==="ar"?"إنشاء حساب جديد":"Create New Account"})]}),s.jsx(vh,{current:l,className:"mb-8",children:m.map((A,k)=>s.jsx(tT,{title:A.title},k))}),s.jsxs(E,{form:a,onFinish:f,layout:"vertical",initialValues:{role:"client",preferredLanguage:"ar",country:"Saudi Arabia",sessionDuration:60,notificationEmail:!0,notificationApp:!0,acceptsSessions:!0},size:"large",children:[w(),s.jsxs("div",{className:"flex justify-between mt-6",children:[l>0&&s.jsx(P,{onClick:C,children:t==="ar"?"السابق":"Previous"}),s.jsx("div",{className:"flex-1"}),l<m.length-1?s.jsx(P,{type:"primary",onClick:v,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:t==="ar"?"التالي":"Next"}):s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",loading:i,disabled:i,children:t==="ar"?"إنشاء حساب":"Create Account"})]}),s.jsxs("div",{className:"text-center mt-4",children:[s.jsxs("span",{className:"text-gray-600",children:[t==="ar"?"لديك حساب بالفعل؟":"Already have an account?"," "]}),s.jsx(Tn,{to:"/login",className:"text-olive-green-600 hover:text-olive-green-700 font-semibold",children:t==="ar"?"تسجيل الدخول":"Login"})]})]})]})})})};var XS={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Hl,function(){return function(r,n,a){r=r||{};var i=n.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l(d,u,f,h){return i.fromToBase(d,u,f,h)}a.en.relativeTime=o,i.fromToBase=function(d,u,f,h,p){for(var m,x,g,y=f.$locale().relativeTime||o,j=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],b=j.length,S=0;S<b;S+=1){var w=j[S];w.d&&(m=h?a(d).diff(f,w.d,!0):f.diff(d,w.d,!0));var v=(r.rounding||Math.round)(Math.abs(m));if(g=m>0,v<=w.r||!w.r){v<=1&&S>0&&(w=j[S-1]);var C=y[w.l];p&&(v=p(""+v)),x=typeof C=="string"?C.replace("%d",v):C(v,u,w.l,g);break}}if(u)return x;var A=g?y.future:y.past;return typeof A=="function"?A(x):A.replace("%s",x)},i.to=function(d,u){return l(d,u,this,!0)},i.from=function(d,u){return l(d,u,this)};var c=function(d){return d.$u?a.utc():a()};i.toNow=function(d){return this.to(c(this),d)},i.fromNow=function(d){return this.from(c(this),d)}}})})(XS);var aT=XS.exports;const sT=at(aT);fe.extend(sT);const{Text:Ld}=fd,g0=({userId:t})=>{const{language:e}=Se(),{user:r}=yr(),[n,a]=N.useState([]),[i,o]=N.useState(!1),[l,c]=N.useState(0),[d,u]=N.useState(!1);N.useEffect(()=>{if(t){f();const j=setInterval(f,3e4);return()=>clearInterval(j)}},[t]);const f=async()=>{if(!t){console.warn("NotificationDropdown: userId is not provided");return}try{o(!0);const j=await ql.getNotifications();if(j&&j.notifications){const b=j.notifications.sort((S,w)=>new Date(w.createdAt)-new Date(S.createdAt));a(b),c(b.filter(S=>!S.isRead).length)}else console.warn("NotificationDropdown: Invalid response format",j),a([]),c(0)}catch(j){console.error("Error fetching notifications:",j),a([]),c(0)}finally{o(!1)}},h=async(j,b)=>{b.stopPropagation();try{await ql.markAsRead(j),a(S=>S.map(w=>w.id===j?{...w,isRead:!0,readAt:new Date}:w)),c(S=>Math.max(0,S-1))}catch(S){console.error("Error marking as read:",S)}},p=async j=>{j.stopPropagation();try{await ql.markAllAsRead(),a(b=>b.map(S=>({...S,isRead:!0,readAt:new Date}))),c(0)}catch(b){console.error("Error marking all as read:",b)}},m=async(j,b)=>{b.stopPropagation();try{await ql.deleteNotification(j),a(S=>S.filter(w=>w.id!==j)),c(S=>{const w=n.find(v=>v.id===j);return w&&!w.isRead?Math.max(0,S-1):S})}catch(S){console.error("Error deleting notification:",S)}},x=j=>{switch(j){case"BOOKING":return"📅";case"MESSAGE":return"💬";case"PAYMENT":return"💰";case"SYSTEM":return"🔔";case"SUPPORT":return"🎫";default:return"📢"}},g=j=>{switch(j){case"BOOKING":return"blue";case"MESSAGE":return"green";case"PAYMENT":return"gold";case"SYSTEM":return"red";case"SUPPORT":return"orange";default:return"default"}},y=[{key:"header",label:s.jsxs("div",{className:"flex items-center justify-between p-2 border-b",children:[s.jsx(Ld,{strong:!0,children:e==="ar"?"الإشعارات":"Notifications"}),s.jsxs(he,{children:[l>0&&s.jsx(P,{type:"link",size:"small",icon:s.jsx(Qm,{}),onClick:j=>{j.stopPropagation(),p(j)},children:e==="ar"?"قراءة الكل":"Mark all read"}),s.jsx(P,{type:"link",size:"small",icon:s.jsx(Wr,{}),onClick:j=>{j.stopPropagation(),f()},loading:i})]})]})},...n.slice(0,10).map(j=>({key:j.id,label:s.jsx("div",{className:`p-3 hover:bg-gray-50 ${j.isRead?"":"bg-blue-50 border-r-4 border-blue-500"}`,onMouseDown:b=>{b.stopPropagation(),b.preventDefault()},onClick:b=>{if(b.stopPropagation(),b.preventDefault(),j.link){let S=j.link;if(S.startsWith("/sessions/")){const w=S.replace("/sessions/",""),v=r==null?void 0:r.role;v==="CLIENT"?S=`/client/chat/session/${w}`:v==="CONSULTANT"?S=`/consultant/chat/session/${w}`:["ADMIN","SUPER_ADMIN"].includes(v)&&(S=`/admin/chat/${w}`)}else if(S.startsWith("/chat/")){const w=S.replace("/chat/",""),v=r==null?void 0:r.role;v==="CLIENT"?S=`/client/chat/${w}`:v==="CONSULTANT"?S=`/consultant/chat/${w}`:["ADMIN","SUPER_ADMIN"].includes(v)&&(S=`/admin/chat/${w}`)}window.location.href=S}j.isRead||h(j.id,{stopPropagation:()=>{}})},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"text-2xl",children:x(j.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Ld,{strong:!0,className:j.isRead?"":"text-blue-600",children:j.title}),s.jsx(ce,{color:g(j.type),size:"small",children:j.type})]}),s.jsx(Ld,{className:"text-sm text-gray-600 block mb-2",ellipsis:!0,children:j.message}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ld,{className:"text-xs text-gray-400",children:fe(j.createdAt).fromNow()}),s.jsxs(he,{size:"small",children:[!j.isRead&&s.jsx(P,{type:"text",size:"small",icon:s.jsx(Qm,{}),onClick:b=>h(j.id,b),title:e==="ar"?"قراءة":"Mark as read"}),s.jsx(P,{type:"text",size:"small",danger:!0,icon:s.jsx(Vn,{}),onClick:b=>m(j.id,b),title:e==="ar"?"حذف":"Delete"})]})]})]})]})})})),...n.length===0?[{key:"empty",label:s.jsx("div",{className:"p-8 text-center",children:s.jsx(Xt,{description:e==="ar"?"لا توجد إشعارات":"No notifications",image:Xt.PRESENTED_IMAGE_SIMPLE})})}]:[]];return s.jsx(Ga,{count:l,size:"small",offset:[-5,5],style:{pointerEvents:"auto"},children:s.jsx(bh,{menu:{items:y},trigger:["click"],placement:e==="ar"?"bottomLeft":"bottomRight",open:d,dropdownStyle:{width:"400px",zIndex:1050},destroyTooltipOnHide:!1,transitionName:"",popupRender:j=>s.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden flex flex-col",style:{pointerEvents:"auto",maxHeight:"500px",display:"flex",flexDirection:"column"},onMouseDown:b=>{b.stopPropagation(),b.preventDefault()},onClick:b=>{b.stopPropagation()},children:s.jsx("div",{className:"overflow-y-auto flex-1",style:{maxHeight:"450px",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch"},children:j})}),getPopupContainer:()=>document.body,onOpenChange:j=>{j!==d&&u(j)},children:s.jsx(P,{type:"text",icon:s.jsx(gc,{}),className:"text-lg hover:bg-olive-green-50 text-gray-600 rounded-lg",style:{pointerEvents:"auto"}})})})},{Header:iT,Sider:oT,Content:lT}=Je,cT=({children:t})=>{var j;const{t:e,language:r,toggleLanguage:n}=Se(),{user:a,logout:i}=yr(),o=st(),l=dl(),[c,d]=N.useState(!1),[u,f]=N.useState(!1),h=r==="ar";N.useEffect(()=>{const b=document.querySelector(".client-content");b&&(b.classList.add("fade-in"),setTimeout(()=>{b.classList.remove("fade-in")},500))},[l.pathname]);const p=()=>{i(),o("/login",{replace:!0})},m=[{key:"/client",icon:s.jsx(u0,{}),label:r==="ar"?"الرئيسية":"Home"},{key:"/client/bookings",icon:s.jsx(Ft,{}),label:r==="ar"?"حجوزاتي":"My Bookings"},{key:"/client/consultations",icon:s.jsx(It,{}),label:r==="ar"?"استشاراتي":"My Consultations"},{key:"/client/reports",icon:s.jsx(ku,{}),label:r==="ar"?"التقارير":"Reports"},{key:"/client/chat",icon:s.jsx(Gt,{}),label:r==="ar"?"الرسائل":"Messages"},{key:"/client/support",icon:s.jsx(It,{}),label:r==="ar"?"الدعم الفني":"Support"},{key:"/client/profile",icon:s.jsx(Ee,{}),label:r==="ar"?"حسابي":"My Account"}],x=[{key:"profile",icon:s.jsx(Ee,{}),label:r==="ar"?"الملف الشخصي":"Profile",onClick:({domEvent:b})=>{b&&(b.stopPropagation(),b.preventDefault()),setTimeout(()=>{f(!1),o("/client/profile")},100)}},{key:"settings",icon:s.jsx(Ao,{}),label:r==="ar"?"الإعدادات":"Settings",onClick:({domEvent:b})=>{b&&(b.stopPropagation(),b.preventDefault()),setTimeout(()=>{f(!1),o("/client/profile")},100)}},{type:"divider"},{key:"logout",icon:s.jsx(f0,{}),label:r==="ar"?"تسجيل الخروج":"Logout",onClick:({domEvent:b})=>{b&&(b.stopPropagation(),b.preventDefault()),setTimeout(()=>{f(!1),p()},100)}}],g={overflow:"auto",height:"100vh",position:"fixed",top:0,bottom:0,[h?"right":"left"]:0,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",zIndex:1e3},y={transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",[h?"marginRight":"marginLeft"]:c?80:250};return s.jsxs(Je,{className:"min-h-screen",children:[s.jsxs(oT,{trigger:null,collapsible:!0,collapsed:c,width:250,className:"client-sidebar bg-gradient-to-b from-white to-gray-50 shadow-2xl border-r border-gray-200",style:g,children:[s.jsx("div",{className:"p-6 flex items-center justify-between border-b border-gray-200",children:s.jsxs("div",{className:`flex items-center gap-3 transition-all duration-300 ${c?"justify-center w-full":""}`,children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-olive-green-600 via-olive-green-500 to-turquoise-500 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300",children:s.jsx("span",{className:"text-white font-bold text-xl",children:"ج"})}),!c&&s.jsxs("div",{className:"animate-fade-in",children:[s.jsx("div",{className:"text-base font-bold text-olive-green-700",children:"Jadwa"}),s.jsx("div",{className:"text-xs text-gray-500",children:"جدوى"})]})]})}),s.jsx(mc,{mode:"inline",selectedKeys:[l.pathname],items:m,onClick:({key:b})=>o(b),className:"border-0 mt-4 px-2",style:{background:"transparent"}}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 px-4",children:s.jsx(P,{type:"text",icon:c?h?s.jsx(bo,{}):s.jsx(jo,{}):h?s.jsx(jo,{}):s.jsx(bo,{}),onClick:()=>d(!c),className:"w-full hover:bg-olive-green-50 text-olive-green-600 border border-olive-green-200 rounded-lg transition-all duration-300",children:!c&&s.jsx("span",{className:"ml-2",children:r==="ar"?"طي":"Collapse"})})})]}),s.jsxs(Je,{style:y,className:"transition-all duration-300",children:[s.jsxs(iT,{className:"bg-white shadow-md px-3 md:px-6 flex items-center justify-between fixed top-0 z-[1001] backdrop-blur-sm bg-white/95",style:{position:"fixed",width:`calc(100% - ${c?80:250}px)`,[h?"right":"left"]:c?80:250,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)"},children:[s.jsx(P,{type:"text",icon:s.jsx($h,{}),onClick:()=>d(!c),className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300",style:{pointerEvents:"auto"}}),s.jsxs("div",{className:"flex items-center gap-2 md:gap-4",style:{pointerEvents:"auto",position:"relative",zIndex:1002},children:[s.jsx(P,{type:"text",icon:s.jsx(va,{}),onClick:n,className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300 font-semibold",title:r==="ar"?"Switch to English":"التبديل إلى العربية",style:{pointerEvents:"auto"},children:r==="ar"?"EN":"AR"}),s.jsx(g0,{userId:a==null?void 0:a.id}),s.jsx(bh,{menu:{items:x},placement:h?"bottomLeft":"bottomRight",trigger:["click"],open:u,destroyTooltipOnHide:!1,transitionName:"",getPopupContainer:()=>document.body,popupRender:b=>s.jsx("div",{onMouseDown:S=>{S.stopPropagation(),S.preventDefault()},onClick:S=>{S.stopPropagation()},children:b}),onOpenChange:b=>{b!==u&&f(b)},children:s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-3 py-2 rounded-lg group",children:[s.jsx(ot,{src:(a==null?void 0:a.avatar)||((j=a==null?void 0:a.client)==null?void 0:j.profilePicture),icon:s.jsx(Ee,{}),className:"ring-2 ring-olive-green-200 group-hover:ring-olive-green-400 transition-all duration-300"}),s.jsx("span",{className:"hidden md:inline font-medium text-gray-700",children:a!=null&&a.client?`${a.client.firstName} ${a.client.lastName}`:a==null?void 0:a.email})]})})]})]}),s.jsx(lT,{className:"p-3 md:p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen client-content",style:{marginTop:"64px"},children:s.jsx("div",{className:"animate-fade-in",children:t})})]})]})},dT=()=>{const{language:t}=Se(),{user:e}=yr(),r=st(),[n,a]=N.useState(!0),[i,o]=N.useState(null),[l,c]=N.useState({totalBookings:0,pendingBookings:0,completedBookings:0,totalSpent:0}),[d,u]=N.useState([]),[f,h]=N.useState([]);N.useEffect(()=>{p()},[]);const p=async()=>{try{a(!0),o(null);const y=await VS.getDashboardStats();c(y.stats),u(y.upcomingBookings||[]),h(y.recentBookings||[])}catch(y){console.error("Error fetching dashboard data:",y),o(y.message||"Failed to load dashboard data")}finally{a(!1)}},m=({title:y,value:j,icon:b,color:S,suffix:w="",delay:v=0})=>s.jsxs(V,{className:"modern-kpi-card card-hover shadow-professional-lg relative overflow-hidden h-full border-0",style:{animationDelay:`${v}s`},styles:{body:{padding:"20px"}},children:[s.jsx("div",{className:`absolute -top-8 -right-8 w-32 h-32 rounded-full ${S} opacity-5 blur-2xl`}),s.jsx("div",{className:`absolute -bottom-6 -left-6 w-24 h-24 rounded-full ${S} opacity-5 blur-xl`}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsx("div",{className:`p-3 rounded-2xl ${S} bg-opacity-10 shadow-sm`,children:s.jsx("div",{className:"text-2xl sm:text-3xl",children:b})})}),s.jsx(Fe,{title:s.jsx("span",{className:"text-gray-600 font-semibold text-xs sm:text-sm uppercase tracking-wide",children:y}),value:j,suffix:w,valueStyle:{color:S.includes("teal")?"#14b8a6":S.includes("olive")?"#7a8c66":S.includes("blue")?"#1890ff":"#faad14",fontWeight:800,fontSize:"clamp(20px, 4vw, 28px)",lineHeight:1.2}})]})]}),x=[{icon:s.jsx(vd,{className:"text-3xl"}),title:t==="ar"?"الاستشارات الاقتصادية":"Economic Consultations",color:"from-olive-green-500 to-olive-green-600",path:"/client/bookings"},{icon:s.jsx(It,{className:"text-3xl"}),title:t==="ar"?"دراسات الجدوى":"Feasibility Studies",color:"from-turquoise-500 to-turquoise-600",path:"/client/bookings"},{icon:s.jsx(WS,{className:"text-3xl"}),title:t==="ar"?"التحليل الاقتصادي":"Econometric Analysis",color:"from-olive-green-400 to-turquoise-500",path:"/client/bookings"},{icon:s.jsx(Ps,{className:"text-3xl"}),title:t==="ar"?"استشارة فيديو/محادثة":"Video/Chat Consultation",color:"from-turquoise-400 to-olive-green-500",path:"/client/bookings"},{icon:s.jsx(CS,{className:"text-3xl"}),title:t==="ar"?"التقارير الاقتصادية":"Ready Economic Reports",color:"from-olive-green-600 to-turquoise-600",path:"/client/consultations"}],g=e!=null&&e.client?`${e.client.firstName||""} ${e.client.lastName||""}`.trim():(e==null?void 0:e.email)||(t==="ar"?"عميل":"Client");return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 md:mb-10 relative z-10 px-2 sm:px-0",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?`مرحباً، ${g}`:`Welcome, ${g}`}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"إليك نظرة سريعة على حسابك":"Here is a quick overview of your account"})]}),s.jsx("div",{className:"text-sm sm:text-base text-gray-700 glass-card px-4 py-3 rounded-xl shadow-professional whitespace-nowrap font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"text-olive-green-600"}),new Date().toLocaleDateString(t==="ar"?"ar-SA":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]}),n?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})}):i?s.jsx(Mr,{message:t==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:i,type:"error",showIcon:!0,closable:!0,onClose:()=>o(null),className:"mb-6"}):s.jsxs(s.Fragment,{children:[s.jsxs(le,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx(_,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(m,{title:t==="ar"?"إجمالي الحجوزات":"Total Bookings",value:l.totalBookings,icon:s.jsx(Ft,{className:"text-xl sm:text-2xl text-teal-500"}),color:"bg-teal-500",delay:.1})}),s.jsx(_,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(m,{title:t==="ar"?"الحجوزات المعلقة":"Pending Bookings",value:l.pendingBookings,icon:s.jsx(Ln,{className:"text-xl sm:text-2xl text-orange-500"}),color:"bg-orange-500",delay:.2})}),s.jsx(_,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(m,{title:t==="ar"?"الحجوزات المكتملة":"Completed Bookings",value:l.completedBookings,icon:s.jsx(vt,{className:"text-xl sm:text-2xl text-green-500"}),color:"bg-green-500",delay:.3})}),s.jsx(_,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(m,{title:t==="ar"?"إجمالي الإنفاق":"Total Spent",value:l.totalSpent,icon:s.jsx(ir,{className:"text-xl sm:text-2xl text-olive-green-600"}),color:"bg-olive-green-600",suffix:t==="ar"?" ريال":" SAR",delay:.4})})]}),s.jsxs(le,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx(_,{xs:24,sm:24,md:24,lg:12,xl:12,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-olive-green-500 to-olive-green-600",children:s.jsx(Ft,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t==="ar"?"الحجوزات القادمة":"Upcoming Bookings"})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0 h-full",style:{animationDelay:"0.2s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},extra:d.length>0&&s.jsxs(P,{type:"link",onClick:()=>r("/client/bookings"),className:"text-olive-green-600 text-xs sm:text-sm p-0",children:[t==="ar"?"عرض الكل":"View All"," ",s.jsx(Au,{})]}),children:d.length>0?s.jsx(dt,{dataSource:d,renderItem:y=>{var j,b,S,w,v,C;return s.jsx(dt.Item,{className:"hover:bg-gray-50 rounded-lg p-2 sm:p-3 transition-colors",children:s.jsx(dt.Item.Meta,{avatar:s.jsx(ot,{src:(b=(j=y.consultant)==null?void 0:j.user)==null?void 0:b.avatar,icon:s.jsx(Ee,{}),size:{xs:40,sm:48}}),title:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 flex-wrap",children:[s.jsx("span",{className:"font-semibold text-sm sm:text-base",children:((S=y.service)==null?void 0:S.title)||((w=y.service)==null?void 0:w.titleAr)||"Consultation"}),s.jsx(ce,{color:"blue",className:"text-xs",children:fe(y.scheduledAt).format("MMM DD, YYYY")})]}),description:s.jsxs("div",{children:[s.jsxs("div",{className:"text-gray-600 text-xs sm:text-sm",children:[(v=y.consultant)==null?void 0:v.firstName," ",(C=y.consultant)==null?void 0:C.lastName]}),y.selectedTimeSlot&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.jsx(Ln,{})," ",y.selectedTimeSlot]})]})})})}}):s.jsx(Xt,{description:t==="ar"?"لا توجد حجوزات قادمة":"No upcoming bookings",image:Xt.PRESENTED_IMAGE_SIMPLE,className:"py-8"})})}),s.jsx(_,{xs:24,sm:24,md:24,lg:12,xl:12,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-teal-500 to-teal-600",children:s.jsx(It,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t==="ar"?"إجراءات سريعة":"Quick Actions"})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0 h-full",style:{animationDelay:"0.3s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsx(P,{type:"primary",size:"large",block:!0,icon:s.jsx($r,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 h-11 sm:h-12 text-sm sm:text-base",onClick:()=>r("/client/bookings"),children:t==="ar"?"حجز استشارة جديدة":"Book New Consultation"}),s.jsx(P,{size:"large",block:!0,icon:s.jsx(It,{}),className:"border-olive-green-600 text-olive-green-600 hover:bg-olive-green-50 h-11 sm:h-12 text-sm sm:text-base",onClick:()=>r("/client/consultations"),children:t==="ar"?"عرض الاستشارات السابقة":"View Previous Consultations"}),s.jsx(P,{size:"large",block:!0,icon:s.jsx(Gt,{}),className:"border-turquoise-500 text-turquoise-500 hover:bg-turquoise-50 h-11 sm:h-12 text-sm sm:text-base",onClick:()=>r("/client/chat"),children:t==="ar"?"فتح المحادثة":"Open Chat"})]})})})]})]}),s.jsxs("div",{className:"mb-6 md:mb-8 relative z-10 px-2 sm:px-0",children:[s.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-4 sm:mb-6 text-gray-900",children:t==="ar"?"خدماتنا":"Our Services"}),s.jsx(le,{gutter:[12,12],className:"sm:gutter-[16]",children:x.map((y,j)=>s.jsx(_,{xs:12,sm:12,md:8,lg:6,xl:6,children:s.jsxs(V,{className:"glass-card text-center cursor-pointer shadow-professional-xl border-0 card-hover h-full",onClick:()=>r(y.path),style:{animationDelay:`${.4+j*.1}s`},styles:{body:{padding:"20px"}},children:[s.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 rounded-xl bg-gradient-to-br ${y.color} flex items-center justify-center text-white mx-auto mb-3 sm:mb-4 shadow-lg`,children:s.jsx("div",{className:"text-xl sm:text-3xl",children:y.icon})}),s.jsx("h3",{className:"font-semibold mb-2 sm:mb-3 text-gray-900 text-sm sm:text-base line-clamp-2",children:y.title}),s.jsx(P,{type:"primary",size:"small",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 w-full text-xs sm:text-sm",onClick:b=>{b.stopPropagation(),r(y.path)},children:t==="ar"?"طلب الخدمة":"Request Service"})]})},j))})]})]})},{TextArea:uT}=F,fT=()=>{const{language:t}=Se(),{user:e}=yr(),r=st(),[n]=E.useForm(),[a,i]=N.useState(0),[o,l]=N.useState([]),[c,d]=N.useState([]),[u,f]=N.useState(!1),[h,p]=N.useState(!1),[m,x]=N.useState(null),[g,y]=N.useState(null);N.useEffect(()=>{e&&e.role!=="CLIENT"&&(R.error(t==="ar"?"غير مصرح لك بالوصول إلى هذه الصفحة":"You are not authorized to access this page"),e.role==="CONSULTANT"?r("/consultant",{replace:!0}):["ADMIN","SUPER_ADMIN"].includes(e.role)?r("/admin",{replace:!0}):r("/",{replace:!0}))},[e,r,t]),N.useEffect(()=>{(e==null?void 0:e.role)==="CLIENT"&&(j(),b())},[e]);const j=async()=>{try{f(!0);const A=await Es.getConsultants({isAvailable:!0});l(A.consultants||[])}catch(A){console.error("Error fetching consultants:",A),R.error(t==="ar"?"فشل تحميل المستشارين":"Failed to load consultants")}finally{f(!1)}},b=async()=>{try{const A=await gs.getServices({status:"active"});d(A.services||[])}catch(A){console.error("Error fetching services:",A)}},S=[{value:"economic",label:t==="ar"?"اقتصادي":"Economic"},{value:"administrative",label:t==="ar"?"إداري":"Administrative"},{value:"financial",label:t==="ar"?"مالي":"Financial"},{value:"accounting",label:t==="ar"?"محاسبي":"Accounting"}],w=[{value:"card",label:t==="ar"?"بطاقة ائتمانية":"Credit Card"},{value:"mada",label:"Mada"},{value:"applepay",label:"Apple Pay"},{value:"bank",label:t==="ar"?"تحويل بنكي":"Bank Transfer"}],v=[{title:t==="ar"?"نوع الاستشارة":"Consultation Type",icon:s.jsx(Ft,{})},{title:t==="ar"?"اختيار المستشار":"Select Consultant",icon:s.jsx(Ee,{})},{title:t==="ar"?"التاريخ والوقت":"Date & Time",icon:s.jsx(Ft,{})},{title:t==="ar"?"الدفع":"Payment",icon:s.jsx(d0,{})}],C=async A=>{var k;if(!m){R.error(t==="ar"?"يرجى اختيار مستشار":"Please select a consultant"),i(1);return}try{p(!0);const O=fe(A.date).hour(fe(A.time).hour()).minute(fe(A.time).minute()).second(0).millisecond(0),$={consultantId:m.id,serviceId:(g==null?void 0:g.id)||null,bookingType:((k=A.consultationType)==null?void 0:k.toUpperCase())||"CONSULTATION",scheduledAt:O.toISOString(),selectedTimeSlot:fe(A.time).format("HH:mm"),duration:m.duration||60,price:m.pricePerSession||0,clientNotes:A.details||""},M=await Lr.createBooking($);R.success(t==="ar"?"تم إنشاء الحجز بنجاح":"Booking created successfully"),r("/client/bookings")}catch(O){console.error("Error creating booking:",O),R.error(O.message||(t==="ar"?"فشل إنشاء الحجز":"Failed to create booking"))}finally{p(!1)}};return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"mb-8 relative z-10",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?"حجز استشارة":"Book Consultation"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"احجز استشارة مع أحد مستشارينا الخبراء":"Book a consultation with one of our expert consultants"})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 mb-6 relative z-10",children:s.jsx(vh,{current:a,items:v})}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsxs(E,{form:n,onFinish:C,layout:"vertical",children:[a===0&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"serviceId",label:t==="ar"?"نوع الخدمة":"Service Type",rules:[{required:!0,message:t==="ar"?"يرجى اختيار نوع الخدمة":"Please select a service type"}],children:s.jsx(B,{size:"large",placeholder:t==="ar"?"اختر نوع الخدمة":"Select Service Type",onChange:A=>{const k=c.find(O=>O.id===A);y(k)},children:c.map(A=>s.jsx(B.Option,{value:A.id,children:t==="ar"&&A.titleAr||A.title},A.id))})}),s.jsx(E.Item,{name:"consultationType",label:t==="ar"?"نوع الاستشارة":"Consultation Type",rules:[{required:!0}],children:s.jsx(Dn.Group,{children:s.jsx(le,{gutter:[16,16],children:S.map(A=>s.jsx(_,{xs:24,sm:12,children:s.jsx(Dn.Button,{value:A.value,className:"w-full text-center h-12",children:A.label})},A.value))})})})]}),a===1&&s.jsx(E.Item,{name:"consultantId",label:t==="ar"?"اختر المستشار":"Select Consultant",rules:[{required:!0,message:t==="ar"?"يرجى اختيار مستشار":"Please select a consultant"}],children:u?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(et,{size:"large"})}):s.jsx("div",{className:"space-y-4",children:o.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:t==="ar"?"لا توجد مستشارين متاحين":"No available consultants"}):o.map(A=>{var O;const k=(m==null?void 0:m.id)===A.id;return s.jsx(V,{className:`glass-card card-hover cursor-pointer ${k?"border-olive-green-500 border-2 shadow-professional-lg":"hover:border-olive-green-500"}`,onClick:()=>{x(A),n.setFieldsValue({consultantId:A.id})},children:s.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[s.jsx(ot,{src:(O=A.user)==null?void 0:O.avatar,size:64,icon:s.jsx(Ee,{})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"text-lg font-bold",children:[A.firstName," ",A.lastName]}),s.jsx("p",{className:"text-gray-600",children:A.specialization||(t==="ar"?"مستشار":"Consultant")}),A.rating&&s.jsx(Ya,{disabled:!0,defaultValue:A.rating,className:"mb-2"}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsxs("span",{className:"text-olive-green-600 font-bold",children:[A.pricePerSession||0," ",t==="ar"?"ريال":"SAR"]}),s.jsxs("span",{className:"text-gray-500",children:[A.sessionDuration||60," ",t==="ar"?"دقيقة":"minutes"]})]})]})]})},A.id)})})}),a===2&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"date",label:t==="ar"?"التاريخ":"Date",rules:[{required:!0}],children:s.jsx(Ms,{size:"large",className:"w-full",disabledDate:A=>A&&A<fe().startOf("day")})}),s.jsx(E.Item,{name:"time",label:t==="ar"?"الوقت":"Time",rules:[{required:!0}],children:s.jsx(Ek,{size:"large",className:"w-full",format:"HH:mm"})}),s.jsx(E.Item,{name:"details",label:t==="ar"?"تفاصيل إضافية":"Additional Details",children:s.jsx(uT,{rows:4,placeholder:t==="ar"?"أدخل أي تفاصيل إضافية...":"Enter any additional details..."})})]}),a===3&&s.jsxs(s.Fragment,{children:[s.jsxs(V,{className:"glass-card shadow-professional-lg rounded-xl border-0 mb-4",children:[s.jsx("h3",{className:"font-bold mb-4",children:t==="ar"?"ملخص الحجز":"Booking Summary"}),s.jsxs("div",{className:"space-y-2 text-gray-700",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:t==="ar"?"المستشار:":"Consultant:"}),s.jsx("span",{className:"font-semibold",children:m?`${m.firstName} ${m.lastName}`:"-"})]}),g&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:t==="ar"?"الخدمة:":"Service:"}),s.jsx("span",{className:"font-semibold",children:t==="ar"&&g.titleAr||g.title})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:t==="ar"?"التاريخ والوقت:":"Date & Time:"}),s.jsx("span",{className:"font-semibold",children:n.getFieldValue("date")&&n.getFieldValue("time")?fe(n.getFieldValue("date")).format("YYYY-MM-DD")+" "+fe(n.getFieldValue("time")).format("HH:mm"):"-"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:t==="ar"?"المبلغ:":"Amount:"}),s.jsxs("span",{className:"font-semibold text-olive-green-600",children:[(m==null?void 0:m.pricePerSession)||0," ",t==="ar"?"ريال":"SAR"]})]})]})]}),s.jsx(E.Item,{name:"paymentMethod",label:t==="ar"?"طريقة الدفع":"Payment Method",rules:[{required:!0}],children:s.jsx(Dn.Group,{children:s.jsx(le,{gutter:[16,16],children:w.map(A=>s.jsx(_,{xs:24,sm:12,children:s.jsx(Dn.Button,{value:A.value,className:"w-full text-center h-12",children:A.label})},A.value))})})})]}),s.jsxs("div",{className:"flex justify-between mt-6",children:[s.jsx(P,{onClick:()=>i(Math.max(0,a-1)),disabled:a===0,children:t==="ar"?"السابق":"Previous"}),a<v.length-1?s.jsx(P,{type:"primary",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{if(a===1&&!m){R.error(t==="ar"?"يرجى اختيار مستشار":"Please select a consultant");return}n.validateFields().then(()=>{i(a+1)}).catch(()=>{})},children:t==="ar"?"التالي":"Next"}):s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-turquoise-500 hover:bg-turquoise-600 border-0",loading:h,children:t==="ar"?"إتمام الحجز":"Complete Booking"})]})]})})]})},hT=()=>{const{t,language:e}=Se(),r=st(),[n,a]=N.useState([]),[i,o]=N.useState(!0);N.useEffect(()=>{l()},[]);const l=async()=>{try{o(!0);const f=(await Lr.getBookings()).bookings.map(h=>{var p;return{id:h.id,bookingId:h.id,consultant:h.consultant?`${h.consultant.firstName} ${h.consultant.lastName}`:e==="ar"?"غير متوفر":"N/A",type:h.service?e==="ar"?h.service.titleAr:h.service.title:e==="ar"?"غير محدد":"Not specified",date:h.scheduledAt?fe(h.scheduledAt).format("YYYY-MM-DD"):"-",status:((p=h.status)==null?void 0:p.toLowerCase())||"pending",rating:h.rating||null,session:h.session}});a(f)}catch(u){console.error("Error fetching consultations:",u),R.error(e==="ar"?"فشل تحميل الاستشارات":"Failed to load consultations")}finally{o(!1)}},c=async u=>{var f;try{const h=await Mt.generateVideoRoom(u);await Mt.startSession(u,(f=h.room)==null?void 0:f.roomId),R.success(e==="ar"?"تم بدء الجلسة بنجاح":"Session started successfully"),l(),r(`/client/chat/${u}`)}catch(h){R.error(h.message||(e==="ar"?"فشل بدء الجلسة":"Failed to start session"))}},d=[{title:e==="ar"?"المستشار":"Consultant",dataIndex:"consultant",key:"consultant"},{title:e==="ar"?"النوع":"Type",dataIndex:"type",key:"type"},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:u=>{const f={completed:"green",pending:"orange",cancelled:"red",confirmed:"blue",in_progress:"green"},h={completed:e==="ar"?"مكتمل":"Completed",pending:e==="ar"?"قيد الانتظار":"Pending",cancelled:e==="ar"?"ملغي":"Cancelled",confirmed:e==="ar"?"مؤكد":"Confirmed",in_progress:e==="ar"?"قيد التنفيذ":"In Progress"};return s.jsx(ce,{color:f[u]||"default",children:h[u]||u})}},{title:e==="ar"?"التقييم":"Rating",dataIndex:"rating",key:"rating",render:u=>u?s.jsx(Ya,{disabled:!0,defaultValue:u}):"-"},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(u,f)=>s.jsxs(he,{children:[(f.status==="confirmed"||f.status==="pending")&&s.jsx(P,{type:"primary",icon:s.jsx(Ba,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>c(f.bookingId),children:e==="ar"?"بدء الجلسة":"Start Session"}),f.status==="in_progress"&&s.jsx(P,{icon:s.jsx(Gt,{}),onClick:()=>r(`/client/chat/${f.bookingId}`),children:e==="ar"?"فتح المحادثة":"Open Chat"}),s.jsx(P,{type:"link",icon:s.jsx(It,{}),onClick:()=>r(`/client/reports?bookingId=${f.bookingId}`),children:e==="ar"?"عرض التقرير":"View Report"}),f.status==="completed"&&!f.rating&&s.jsx(P,{type:"link",onClick:()=>console.log("Rate",f.id),children:e==="ar"?"تقييم":"Rate"})]})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"mb-8 relative z-10",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"استشاراتي":"My Consultations"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"عرض جميع استشاراتك السابقة والحالية":"View all your past and current consultations"})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:d,dataSource:n,rowKey:"id",loading:i,pagination:{pageSize:10}})})]})},x0=()=>{const[t,e]=N.useState(!1),[r,n]=N.useState(0),[a,i]=N.useState(null),[o,l]=N.useState(null),c=N.useRef(null),d=N.useRef([]),u=N.useRef(null);N.useEffect(()=>()=>{c.current&&c.current.state!=="inactive"&&c.current.stop(),o&&URL.revokeObjectURL(o),u.current&&clearInterval(u.current)},[o]);const f=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("MediaDevices API is not supported in this browser");if((await navigator.mediaDevices.enumerateDevices()).filter(S=>S.kind==="audioinput").length===0)throw new Error("No audio input device found");const y=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});let j="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(j)||(j="audio/webm",MediaRecorder.isTypeSupported(j)||(j="audio/mp4",MediaRecorder.isTypeSupported(j)||(j="")));const b=new MediaRecorder(y,j?{mimeType:j}:void 0);d.current=[],b.ondataavailable=S=>{S.data.size>0&&d.current.push(S.data)},b.onstop=()=>{const S=new Blob(d.current,{type:j||"audio/webm"});i(S);const w=URL.createObjectURL(S);l(w),y.getTracks().forEach(v=>v.stop())},c.current=b,b.start(),e(!0),n(0),u.current=setInterval(()=>{n(S=>S+1)},1e3)}catch(x){console.error("Error starting recording:",x);let g="Failed to access microphone. ";x.name==="NotFoundError"||x.name==="DevicesNotFoundError"?g+="No microphone found. Please connect a microphone and try again.":x.name==="NotAllowedError"||x.name==="PermissionDeniedError"?g+="Microphone permission denied. Please allow microphone access in your browser settings.":x.name==="NotReadableError"||x.name==="TrackStartError"?g+="Microphone is being used by another application. Please close it and try again.":g+=x.message||"Please check your microphone permissions.",R.error(g),e(!1)}},h=()=>{c.current&&c.current.state!=="inactive"&&(c.current.stop(),e(!1),u.current&&(clearInterval(u.current),u.current=null))};return{isRecording:t,recordingTime:r,audioBlob:a,audioUrl:o,startRecording:f,stopRecording:h,cancelRecording:()=>{h(),i(null),o&&(URL.revokeObjectURL(o),l(null)),n(0),d.current=[]},formatTime:x=>{const g=Math.floor(x/60),y=x%60;return`${g}:${y.toString().padStart(2,"0")}`}}},pT=()=>{const[t,e]=N.useState(!1),[r,n]=N.useState(0),[a,i]=N.useState(null),[o,l]=N.useState(null),c=N.useRef(null),d=N.useRef([]),u=N.useRef(null),f=N.useRef(null),h=N.useRef(null);N.useEffect(()=>()=>{c.current&&c.current.state!=="inactive"&&c.current.stop(),u.current&&u.current.getTracks().forEach(y=>y.stop()),o&&URL.revokeObjectURL(o),f.current&&clearInterval(f.current)},[o]);const p=async y=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("MediaDevices API is not supported in this browser");const j=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});u.current=j,h.current=y,y&&(y.srcObject=j,y.play());let b="video/webm;codecs=vp9,opus";MediaRecorder.isTypeSupported(b)||(b="video/webm;codecs=vp8,opus",MediaRecorder.isTypeSupported(b)||(b="video/webm",MediaRecorder.isTypeSupported(b)||(b="video/mp4",MediaRecorder.isTypeSupported(b)||(b=""))));const S=new MediaRecorder(j,b?{mimeType:b}:void 0);d.current=[],S.ondataavailable=w=>{w.data.size>0&&d.current.push(w.data)},S.onstop=()=>{const w=new Blob(d.current,{type:b||"video/webm"});i(w);const v=URL.createObjectURL(w);l(v),j.getTracks().forEach(C=>C.stop()),y&&(y.srcObject=null)},c.current=S,S.start(),e(!0),n(0),f.current=setInterval(()=>{n(w=>w+1)},1e3)}catch(j){console.error("Error starting video recording:",j);let b="Failed to access camera/microphone. ";j.name==="NotFoundError"||j.name==="DevicesNotFoundError"?b+="No camera/microphone found. Please connect a device and try again.":j.name==="NotAllowedError"||j.name==="PermissionDeniedError"?b+="Camera/microphone permission denied. Please allow access in your browser settings.":j.name==="NotReadableError"||j.name==="TrackStartError"?b+="Camera/microphone is being used by another application. Please close it and try again.":b+=j.message||"Please check your device permissions.",R.error(b),e(!1)}},m=()=>{c.current&&c.current.state!=="inactive"&&(c.current.stop(),e(!1),f.current&&(clearInterval(f.current),f.current=null),u.current&&u.current.getTracks().forEach(y=>y.stop()),h.current&&(h.current.srcObject=null))};return{isRecording:t,recordingTime:r,videoBlob:a,videoUrl:o,startRecording:p,stopRecording:m,cancelRecording:()=>{m(),i(null),o&&(URL.revokeObjectURL(o),l(null)),n(0),d.current=[]},formatTime:y=>{const j=Math.floor(y/60),b=y%60;return`${j}:${b.toString().padStart(2,"0")}`}}},y0=({src:t,isOwnMessage:e=!1,language:r="en"})=>{const[n,a]=N.useState(!1),[i,o]=N.useState(0),[l,c]=N.useState(0),[d,u]=N.useState(!0),[f,h]=N.useState(!1),p=N.useRef(null);N.useEffect(()=>{const j=p.current;if(!j)return;h(!1),u(!0),a(!1),o(0),c(0);const b=()=>o(j.currentTime),S=()=>{c(j.duration||0),u(!1)},w=()=>a(!0),v=()=>a(!1),C=()=>{a(!1),o(0)},A=O=>{u(!1),h(!0),a(!1)},k=()=>{u(!1),c(j.duration||0)};return j.addEventListener("timeupdate",b),j.addEventListener("loadedmetadata",S),j.addEventListener("canplay",k),j.addEventListener("play",w),j.addEventListener("pause",v),j.addEventListener("ended",C),j.addEventListener("error",A),j.load(),()=>{j.removeEventListener("timeupdate",b),j.removeEventListener("loadedmetadata",S),j.removeEventListener("canplay",k),j.removeEventListener("play",w),j.removeEventListener("pause",v),j.removeEventListener("ended",C),j.removeEventListener("error",A)}},[t]);const m=()=>{const j=p.current;if(!(!j||f)){if(j.error){h(!0),a(!1);return}n?j.pause():j.play().catch(b=>{var S;a(!1),h(!0),(b.name==="NotSupportedError"||(S=b.message)!=null&&S.includes("no supported sources"))&&h(!0)})}},x=j=>{const b=p.current,w=j.currentTarget.getBoundingClientRect(),v=j.clientX-w.left,C=w.width,A=v/C;b&&l&&(b.currentTime=A*l)},g=j=>{if(!j||isNaN(j))return"0:00";const b=Math.floor(j/60),S=Math.floor(j%60);return`${b}:${S.toString().padStart(2,"0")}`},y=l>0?i/l*100:0;return f?s.jsxs("div",{className:`whatsapp-audio-player flex items-center gap-3 ${e?"flex-row-reverse":""} opacity-60`,children:[s.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${e?"bg-gray-400 text-white":"bg-gray-300 text-gray-600"}`,children:s.jsx(GP,{className:"text-lg"})}),s.jsx("div",{className:"flex-1",children:s.jsx("span",{className:`text-xs ${e?"text-gray-700":"text-gray-500"}`,children:r==="ar"?"تعذر تحميل الملف الصوتي":"Audio unavailable"})})]}):s.jsxs("div",{className:`whatsapp-audio-player flex items-center gap-3 ${e?"flex-row-reverse":""}`,children:[s.jsx("audio",{ref:p,src:t,preload:"metadata",crossOrigin:"anonymous"}),s.jsx(P,{type:"text",icon:d?s.jsx("div",{className:"w-8 h-8 border-2 border-current border-t-transparent rounded-full animate-spin"}):n?s.jsx(dP,{className:"text-2xl"}):s.jsx(Ba,{className:"text-2xl"}),onClick:m,className:`flex items-center justify-center w-10 h-10 rounded-full transition-colors ${e?"bg-[#25D366] hover:bg-[#20BD5A] text-white":"bg-[#e5e7eb] hover:bg-[#d1d5db] text-gray-700"}`,disabled:d,style:{minWidth:"40px",padding:0}}),s.jsxs("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:[s.jsxs("div",{className:`flex-1 h-2 rounded-full cursor-pointer relative overflow-hidden ${e?"bg-white/40":"bg-gray-300"}`,onClick:x,children:[s.jsx("div",{className:`h-full transition-all duration-100 ${e?"bg-white":"bg-[#25D366]"}`,style:{width:`${y}%`}}),n&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center gap-1",children:[0,1,2,3].map(j=>s.jsx("div",{className:"w-1 bg-white/50 rounded-full animate-pulse",style:{height:`${20+Math.sin(Date.now()/200+j)*10}%`,animationDelay:`${j*.1}s`}},j))})]}),s.jsxs("span",{className:`text-xs font-medium whitespace-nowrap ${e?"text-gray-800":"text-gray-600"}`,children:[g(i)," / ",g(l)]})]})]})},{TextArea:Iv}=F,zd=()=>{var Dr;const{sessionId:t,bookingId:e,id:r}=Aa(),n=t||e||r,a=!!t||!!r&&!e,{language:i}=Se(),{user:o}=yr(),l=st(),[c,d]=N.useState([]),[u,f]=N.useState(""),[h,p]=N.useState(!0),[m,x]=N.useState(!1),[g,y]=N.useState(null),[j,b]=N.useState(null),[S,w]=N.useState(null),[v,C]=N.useState([]),[A,k]=N.useState(!1),[O,$]=N.useState(!1),[M,T]=N.useState(!1),[I,z]=N.useState(null),[U,Y]=N.useState([]),[Z,te]=N.useState([]),[q,ne]=N.useState(!1),H=N.useRef(null);N.useRef(null);const Q=N.useRef(!1),de=N.useRef(null),ie=N.useRef(!1),Re=N.useRef(null),Ae=N.useRef(new Set),{isRecording:je,recordingTime:X,audioBlob:ye,audioUrl:Ne,startRecording:ee,stopRecording:Qe,cancelRecording:L,formatTime:oe}=x0(),{isRecording:pe,recordingTime:Ge,videoBlob:ut,videoUrl:it,startRecording:wt,stopRecording:_t,cancelRecording:St,formatTime:Xe}=pT(),[Sn,Ar]=N.useState(!1),[Cl,ns]=N.useState(!1),[Hs,cn]=N.useState(!1),[Lt,kl]=N.useState(0),[W,Ue]=N.useState(""),[De,tt]=N.useState(!1),lt=N.useRef(null),[pt]=E.useForm();N.useEffect(()=>{o&&o.role!=="CLIENT"&&(R.error(i==="ar"?"غير مصرح لك بالوصول إلى هذه الصفحة":"You are not authorized to access this page"),o.role==="CONSULTANT"?l("/consultant",{replace:!0}):["ADMIN","SUPER_ADMIN"].includes(o.role)?l("/admin",{replace:!0}):l("/",{replace:!0}))},[o,l,i]),N.useEffect(()=>{if(de.current!==n&&(Q.current=!1,ie.current=!1,Re.current=null,T(!1),de.current=n),$(!1),n&&o){if(Ae.current.has(n)){Q.current||(Q.current=!0,T(!0),p(!1),ie.current=!1,Re.current=null,setTimeout(()=>{l("/client/chat",{replace:!0})},0));return}const K=Re.current&&Re.current!==n;if(Q.current||M||K){p(!1);return}Re.current!==n&&(Re.current=n,ie.current=!0,Ie())}else n||(p(!1),$(!1),T(!1),Q.current=!1,ie.current=!1,Re.current=null,o&&(Pd(),Td()))},[n,o]),N.useEffect(()=>{if(M)return;if((g==null?void 0:g.id)||n&&a&&O){mt();const Oe=setInterval(()=>{mt()},5e3);return()=>clearInterval(Oe)}},[g==null?void 0:g.id,n,a,O,M]),N.useEffect(()=>{kt()},[c]),N.useEffect(()=>{!a&&j&&n&&(g==null?void 0:g.status)==="COMPLETED"&&j.status==="COMPLETED"&&!j.rating&&!Hs&&cn(!0)},[g==null?void 0:g.status,j==null?void 0:j.status,j==null?void 0:j.rating,a,n]);const kt=()=>{var K;(K=H.current)==null||K.scrollIntoView({behavior:"smooth"})},Ie=async()=>{var K,Oe,ue,Me,Le,yt,Ot,Ce,Ut,Ws,Md,$d,Rd,oa,An,Xr,Qr,Yi,pv,mv,gv,xv,yv,vv,bv;if(Ae.current.has(n)){Q.current||(Q.current=!0,T(!0),p(!1),ie.current=!1,Re.current=null,setTimeout(()=>{l("/client/chat",{replace:!0})},0));return}if(Q.current||M){ie.current=!1,Re.current=null;return}if(!n||!o){p(!1),ie.current=!1,Re.current=null;return}if(!(Re.current&&Re.current!==n)){ie.current=!0,Re.current=n;try{p(!0);let un=!!t;if(r&&!t&&!e){let Zr=!1;try{const br=(K=(await $t.getConversations()).conversations)==null?void 0:K.find(qs=>qs.sessionId===r||qs.isDirect&&qs.id===r);if(br&&(br.isDirect||br.sessionId===r)){Zr=!0,y({id:r,status:br.status||"IN_PROGRESS",sessionType:"chat"}),b(null),z(br),$(!0),p(!1),ie.current=!1,Re.current=null;return}}catch{}try{const _r=await Lr.getBookingById(r);un=!1;const br=_r.booking;if((o==null?void 0:o.role)==="CLIENT"&&((Oe=br.client)==null?void 0:Oe.userId)!==o.id){R.error(i==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),l("/client/bookings",{replace:!0});return}b(br);try{const qs=await Mt.getSessionByBooking(r);if(y(qs.session),$(!0),(ue=qs.session)!=null&&ue.roomId)try{const wv=await Mt.getVideoRoom(r);w(wv.room)}catch{console.log("Video room not accessible yet")}}catch{console.log("Session not found yet, will be created when starting"),y(null),$(!0)}p(!1);return}catch(_r){if(_r.status===404||((Me=_r.response)==null?void 0:Me.status)===404||((Le=_r.message)==null?void 0:Le.toLowerCase().includes("not found"))||((yt=_r.message)==null?void 0:yt.includes("404"))){if(Q.current){ie.current=!1,Re.current=null;return}Ae.current.add(n),Q.current=!0,T(!0),p(!1),ie.current=!1,Re.current=null,l("/client/chat",{replace:!0});return}un=!0}}if(un){try{const _r=(Ot=(await $t.getConversations()).conversations)==null?void 0:Ot.find(br=>br.sessionId===n);if(_r)y({id:n,status:_r.status||"IN_PROGRESS",sessionType:"chat"}),b(null),z(_r),$(!0);else try{await $t.getMessages(n),y({id:n,status:"IN_PROGRESS",sessionType:"chat"}),b(null),$(!0)}catch(br){if((Ce=br.message)!=null&&Ce.includes("not found")||(Ut=br.message)!=null&&Ut.includes("404")||(Ws=br.message)!=null&&Ws.includes("Access denied")||(Md=br.message)!=null&&Md.includes("403")){$(!1),T(!0),R.error(i==="ar"?"الجلسة غير موجودة أو غير مصرح لك بالوصول":"Session not found or access denied"),l("/client/bookings",{replace:!0});return}else throw br}}catch(Zr){console.error("Error fetching direct session:",Zr),!(($d=Zr.message)!=null&&$d.includes("not found"))&&!((Rd=Zr.message)!=null&&Rd.includes("404"))&&!((oa=Zr.message)!=null&&oa.includes("Access denied"))&&!((An=Zr.message)!=null&&An.includes("403"))&&R.error(i==="ar"?"فشل تحميل الجلسة":"Failed to load session"),l("/client/bookings",{replace:!0})}finally{p(!1),ie.current=!1,Re.current=null}return}const Dd=(await Lr.getBookingById(n)).booking;if((o==null?void 0:o.role)==="CLIENT"&&((Xr=Dd.client)==null?void 0:Xr.userId)!==o.id){R.error(i==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),l("/client/bookings",{replace:!0});return}b(Dd);try{const Zr=await Mt.getSessionByBooking(n);if(y(Zr.session),$(!0),(Qr=Zr.session)!=null&&Qr.roomId)try{const _r=await Mt.getVideoRoom(n);w(_r.room)}catch{console.log("Video room not accessible yet")}}catch{console.log("Session not found yet, will be created when starting"),y(null),$(!0)}ie.current=!1,Re.current=null,Ae.current.delete(n)}catch(un){const jv=un.message||((pv=(Yi=un.response)==null?void 0:Yi.data)==null?void 0:pv.error)||(i==="ar"?"فشل تحميل الجلسة":"Failed to load session"),Dd=((mv=un.message)==null?void 0:mv.toLowerCase().includes("not found"))||((gv=un.message)==null?void 0:gv.includes("404"))||((xv=un.response)==null?void 0:xv.status)===404,Zr=((yv=un.message)==null?void 0:yv.includes("Access denied"))||((vv=un.message)==null?void 0:vv.includes("403"))||((bv=un.response)==null?void 0:bv.status)===403;if(Dd){if(Q.current){p(!1);return}Q.current=!0,T(!0),p(!1),l("/client/chat",{replace:!0});return}if(Zr){R.error(i==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),T(!0),p(!1),l("/client/chat",{replace:!0});return}console.error("Error fetching session:",un),R.error(jv),p(!1)}finally{ie.current=!1,Re.current=null,!M&&!Q.current&&p(!1)}}},mt=async()=>{var K,Oe,ue,Me;if(!(M||!(g!=null&&g.id)&&!(n&&a&&O)))try{const Le=(g==null?void 0:g.id)||n;if(!Le)return;const yt=await $t.getMessages(Le);if(d(yt.messages||[]),!O&&yt.messages&&$(!0),yt.messages&&yt.messages.length>0)try{await $t.markAsRead(Le)}catch(Ot){console.error("Error marking messages as read:",Ot)}setTimeout(()=>{var Ot;(Ot=H.current)==null||Ot.scrollIntoView({behavior:"smooth"})},100)}catch(Le){const yt=((K=Le.message)==null?void 0:K.includes("Access denied"))||((Oe=Le.message)==null?void 0:Oe.includes("403")),Ot=((ue=Le.message)==null?void 0:ue.includes("not found"))||((Me=Le.message)==null?void 0:Me.includes("404"));if(yt){T(!0),d([]);return}if(Ot){d([]);return}console.error("Error fetching messages:",Le),d([])}},ia=async()=>{var Oe;const K=(g==null?void 0:g.id)||(a?n:null);if(!(!u.trim()&&v.length===0||!K)){if(!(g!=null&&g.id)&&!a&&n)try{const ue=await Mt.generateVideoRoom(n),Me=await Mt.startSession(n,(Oe=ue.room)==null?void 0:Oe.roomId);y(Me.session),w(ue.room)}catch(ue){R.error(ue.message||(i==="ar"?"فشل بدء الجلسة":"Failed to start session"));return}try{x(!0);let ue="text";if(v.length>0){const yt=v.some(Ut=>/\.(jpg|jpeg|png|gif|webp)$/i.test(Ut)),Ot=v.some(Ut=>/\.(mp3|wav|ogg|m4a|webm)$/i.test(Ut)),Ce=v.some(Ut=>/\.(mp4|webm|ogg)$/i.test(Ut));yt?ue="image":Ot?ue="audio":Ce?ue="video":ue="file"}const Me=(g==null?void 0:g.id)||K,Le={content:u||(v.length>0?"📎 ملف مرفق":""),messageType:ue,attachments:v.length>0?v:[]};if(a&&I){let yt=null;I.clientId&&I.clientId!==(o==null?void 0:o.id)?yt=I.clientId:I.consultantUserId&&I.consultantUserId!==(o==null?void 0:o.id)&&(yt=I.consultantUserId),yt&&(Le.receiverId=yt)}await $t.sendMessage(Me,Le),f(""),C([]),a&&!(g!=null&&g.id)&&y({id:Me,status:"IN_PROGRESS",sessionType:"chat"}),mt()}catch(ue){R.error(ue.message||(i==="ar"?"فشل إرسال الرسالة":"Failed to send message"))}finally{x(!1)}}},Hi=async()=>{je?Qe():await ee()},Wi=async()=>{if(!ye)return;const K=(g==null?void 0:g.id)||(a?n:null);if(!K){R.error(i==="ar"?"لا توجد جلسة نشطة":"No active session"),L();return}try{x(!0);const Oe=new File([ye],`voice-${Date.now()}.webm`,{type:"audio/webm"}),ue=new FormData;ue.append("file",Oe),ue.append("ownerType","MESSAGE"),ue.append("ownerId",K);const Me=await ra.uploadFile(ue);if(!Me||!Me.file||!Me.file.fileUrl)throw console.error("Invalid file upload response:",Me),new Error("Invalid file response from server - file may not have been uploaded");const Le=Me.file.fileUrl;if(!Le||typeof Le!="string")throw console.error("Invalid audio URL from upload:",Le),new Error("Invalid audio file URL - please try recording again");const yt=(g==null?void 0:g.id)||K,Ot={content:i==="ar"?"رسالة صوتية":"Voice message",messageType:"audio",attachments:[Le]};if(a&&I){let Ce=null;I.clientId&&I.clientId!==(o==null?void 0:o.id)?Ce=I.clientId:I.consultantUserId&&I.consultantUserId!==(o==null?void 0:o.id)&&(Ce=I.consultantUserId),Ce&&(Ot.receiverId=Ce)}await $t.sendMessage(yt,Ot),L(),mt(),R.success(i==="ar"?"تم إرسال الرسالة الصوتية":"Voice message sent")}catch(Oe){console.error("Error sending voice message:",Oe),R.error(Oe.message||(i==="ar"?"فشل إرسال الرسالة الصوتية":"Failed to send voice message"))}finally{x(!1)}},qi=async()=>{pe?(_t(),Ar(!1)):Ar(!0)},dn=async()=>{lt.current&&await wt(lt.current)},Jr=async()=>{if(!ut)return;const K=(g==null?void 0:g.id)||(a?n:null);if(!K){R.error(i==="ar"?"لا توجد جلسة نشطة":"No active session"),St(),Ar(!1);return}try{x(!0);const Oe=new File([ut],`video-${Date.now()}.webm`,{type:"video/webm"}),ue=new FormData;ue.append("file",Oe),ue.append("ownerType","MESSAGE"),ue.append("ownerId",K);const Me=await ra.uploadFile(ue);if(!Me||!Me.file||!Me.file.fileUrl)throw new Error("Invalid file response from server");const Le=Me.file.fileUrl,yt=(g==null?void 0:g.id)||K,Ot={content:i==="ar"?"رسالة فيديو":"Video message",messageType:"video",attachments:[Le]};if(a&&I){let Ce=null;I.clientId&&I.clientId!==(o==null?void 0:o.id)?Ce=I.clientId:I.consultantUserId&&I.consultantUserId!==(o==null?void 0:o.id)&&(Ce=I.consultantUserId),Ce&&(Ot.receiverId=Ce)}await $t.sendMessage(yt,Ot),St(),Ar(!1),mt(),R.success(i==="ar"?"تم إرسال الرسالة بالفيديو":"Video message sent")}catch(Oe){console.error("Error sending video message:",Oe),R.error(Oe.message||(i==="ar"?"فشل إرسال الرسالة بالفيديو":"Failed to send video message"))}finally{x(!1)}},Cr=async K=>{const Oe=(g==null?void 0:g.id)||(a?n:null);if(!Oe)return R.error(i==="ar"?"لا توجد جلسة نشطة":"No active session"),!1;try{const ue=new FormData;ue.append("file",K),ue.append("ownerType","MESSAGE"),ue.append("ownerId",Oe);const Me=await ra.uploadFile(ue);if(!Me||!Me.file||!Me.file.fileUrl)throw new Error("Invalid file response from server");const Le=[...v,Me.file.fileUrl];C(Le),R.success(i==="ar"?"تم رفع الملف":"File uploaded")}catch(ue){console.error("File upload error:",ue),R.error(ue.message||(i==="ar"?"فشل رفع الملف":"Failed to upload file"))}return!1},kr=async()=>{if(a){R.warning(i==="ar"?"مكالمات الفيديو متاحة فقط للجلسات المرتبطة بالحجوزات":"Video calls are only available for booking-based sessions");return}if(n)try{p(!0);let K=S;K||(K=(await Mt.generateVideoRoom(n)).room,w(K),R.success(i==="ar"?"تم إنشاء غرفة الفيديو":"Video room created")),await Mt.startSession(n,K==null?void 0:K.roomId),R.success(i==="ar"?"تم بدء الجلسة":"Session started"),K!=null&&K.joinUrl?window.open(K.joinUrl,"JitsiMeet","width=1200,height=800,menubar=no,toolbar=no,location=no,status=no,resizable=yes,scrollbars=yes")?(ns(!0),R.success(i==="ar"?"تم فتح المكالمة في نافذة جديدة":"Video call opened in new window")):(ns(!0),R.info(i==="ar"?'تم فتح المكالمة في النافذة المنبثقة. إذا لم تفتح، استخدم زر "فتح في نافذة جديدة"':'Video call opened. If popup was blocked, use "Open in New Window" button')):R.warning(i==="ar"?"لم يتم العثور على رابط المكالمة":"Video call URL not found"),Ie()}catch(K){console.error("Video call error:",K),R.error(K.message||(i==="ar"?"فشل بدء المكالمة":"Failed to start video call"))}finally{p(!1)}},as=async()=>{if(!(!n||a))try{await Mt.endSession(n),R.success(i==="ar"?"تم إنهاء الجلسة":"Session ended successfully");const Oe=(await Lr.getBookingById(n)).booking;b(Oe);try{const ue=await Mt.getSessionByBooking(n);y(ue.session)}catch(ue){console.error("Error fetching session:",ue)}Oe.rating?l("/client/bookings"):cn(!0)}catch(K){R.error(K.message||(i==="ar"?"فشل إنهاء الجلسة":"Failed to end session"))}},Pd=async()=>{try{const K=await $t.getConversations();Y(K.conversations||[])}catch(K){console.error("Error fetching conversations:",K)}},Td=async()=>{try{ne(!0);const K=await Lr.getBookings({status:"CONFIRMED,COMPLETED"});te(K.bookings||[])}catch(K){console.error("Error fetching bookings:",K)}finally{ne(!1)}},Ol=K=>{l(`/client/chat/${K}`)},Id=async()=>{if(!j||!n)return;if(!Lt||Lt<1||Lt>5){R.error(i==="ar"?"يرجى إضافة تقييم من 1 إلى 5":"Please add a rating from 1 to 5");return}const K=W.trim();if(!K||K.length<10){R.error(i==="ar"?"يرجى إضافة تعليق للمراجعة (10 أحرف على الأقل)":"Please add a review comment (at least 10 characters)");return}try{tt(!0),await Lr.rateBooking(n,Lt,K),R.success(i==="ar"?"تم إرسال المراجعة بنجاح":"Review submitted successfully");const Oe=await Lr.getBookingById(n);b(Oe.booking),cn(!1),kl(0),Ue(""),pt.resetFields(),l("/client/bookings")}catch(Oe){console.error("Error submitting review:",Oe),R.error(Oe.message||(i==="ar"?"فشل إرسال المراجعة":"Failed to submit review"))}finally{tt(!1)}};if(h)return s.jsx("div",{className:"flex justify-center items-center h-screen dashboard-bg",children:s.jsx(et,{size:"large"})});if(!n)return s.jsxs("div",{className:"flex h-[calc(100vh-200px)] gap-4",children:[s.jsx("div",{className:"w-1/3 min-w-[300px]",children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gt,{}),s.jsx("span",{children:i==="ar"?"المحادثات والحجوزات":"Conversations & Bookings"})]}),className:"h-full shadow-professional-lg border-0 bg-gradient-to-br from-white to-gray-50",styles:{body:{padding:0,height:"calc(100% - 57px)",overflow:"auto"}},children:q?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(et,{size:"large"})}):U.length===0&&Z.length===0?s.jsxs("div",{className:"py-12",children:[s.jsx(Xt,{description:i==="ar"?"لا توجد محادثات أو حجوزات":"No conversations or bookings",image:Xt.PRESENTED_IMAGE_SIMPLE}),s.jsx("div",{className:"text-center mt-4",children:s.jsx(P,{type:"primary",onClick:()=>l("/client/bookings"),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:i==="ar"?"حجز جديد":"New Booking"})})]}):s.jsxs("div",{children:[U.length>0&&s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h3",{className:"font-semibold text-sm text-gray-600 mb-2",children:i==="ar"?"المحادثات النشطة":"Active Conversations"}),s.jsx(dt,{dataSource:U,renderItem:K=>{const Oe=K.unreadCount||0;return s.jsx(dt.Item,{className:"cursor-pointer hover:bg-gray-50 px-4 py-3 border-b ",onClick:()=>Ol(K.bookingId||K.sessionId),children:s.jsx(dt.Item.Meta,{avatar:s.jsx(Ga,{count:Oe,size:"small",offset:[-5,5],children:s.jsx(ot,{src:K.avatar,icon:s.jsx(Ee,{}),size:48})}),title:s.jsx("span",{className:"font-medium text-gray-900",children:K.name||K.consultantName||K.clientName||(i==="ar"?"محادثة":"Conversation")}),description:s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 truncate",children:K.lastMessage||(i==="ar"?"لا توجد رسائل":"No messages")}),K.lastMessageTime&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:fe(K.lastMessageTime).fromNow()})]})})})}})]}),Z.length>0&&s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-sm text-gray-600 mb-2",children:i==="ar"?"الحجوزات المتاحة":"Available Bookings"}),s.jsx(dt,{dataSource:Z,renderItem:K=>{var ue,Me;const Oe=U.some(Le=>Le.bookingId===K.id);return s.jsx(dt.Item,{className:`cursor-pointer hover:bg-gray-50 px-4 py-3 border-b  ${Oe?"opacity-75":""}`,onClick:()=>Ol(K.id),children:s.jsx(dt.Item.Meta,{avatar:s.jsx(ot,{src:(Me=(ue=K.consultant)==null?void 0:ue.user)==null?void 0:Me.avatar,icon:s.jsx(Ee,{}),size:48}),title:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-medium text-gray-900",children:K.consultant?`${K.consultant.firstName} ${K.consultant.lastName}`:i==="ar"?"مستشار":"Consultant"}),s.jsx(ce,{color:K.status==="CONFIRMED"?"green":K.status==="COMPLETED"?"blue":"default",size:"small",children:K.status})]}),description:s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:K.service?i==="ar"?K.service.titleAr:K.service.title:i==="ar"?"استشارة":"Consultation"}),K.scheduledAt&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:fe(K.scheduledAt).format("YYYY-MM-DD HH:mm")})]})})})}})]})]})})}),s.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"text-center py-12 px-6",children:[s.jsx("div",{className:"mb-6",children:s.jsx(Gt,{className:"text-7xl text-gray-300"})}),s.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700",children:i==="ar"?"اختر محادثة للبدء":"Select a Conversation to Start"}),s.jsx("p",{className:"text-gray-500 max-w-md mx-auto text-base",children:i==="ar"?"اختر محادثة من القائمة الجانبية للبدء في الدردشة مع المستشار":"Select a conversation from the sidebar to start chatting with your consultant"}),s.jsx("div",{className:"mt-6",children:s.jsx(P,{type:"primary",size:"large",onClick:()=>l("/client/bookings"),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:i==="ar"?"حجز استشارة جديدة":"Book New Consultation"})})]})})]});const cr=j==null?void 0:j.consultant;o==null||o.role;const Nn=a&&I?{name:I.name||I.clientName||I.consultantName||"User",avatar:I.avatar}:null;return!j&&n&&!a&&!O?s.jsx("div",{className:"flex justify-center items-center h-screen dashboard-bg",children:s.jsx(et,{size:"large"})}):a&&!O&&!M?s.jsx("div",{className:"flex justify-center items-center h-screen dashboard-bg",children:s.jsx(et,{size:"large"})}):s.jsxs("div",{className:"flex flex-col dashboard-bg relative",style:{height:"calc(100vh - 64px)",margin:"-12px -12px 0 -12px",width:"calc(100% + 24px)"},children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/20 to-turquoise-100/20 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/20 to-olive-green-100/20 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"glass-card border-b border-gray-200/50 px-4 py-3 flex items-center justify-between shadow-professional z-10 sticky top-0 flex-shrink-0 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(ot,{src:a?Nn==null?void 0:Nn.avatar:((Dr=cr==null?void 0:cr.user)==null?void 0:Dr.avatar)||(cr==null?void 0:cr.profilePicture),size:40,icon:s.jsx(Ee,{}),className:"flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-base font-semibold text-gray-900 truncate",children:a?(Nn==null?void 0:Nn.name)||(i==="ar"?"المستخدم":"User"):cr?`${cr.firstName} ${cr.lastName}`:i==="ar"?"المستشار":"Consultant"}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:a?i==="ar"?"محادثة مباشرة":"Direct Message":j!=null&&j.service?i==="ar"?j.service.titleAr:j.service.title:i==="ar"?"استشارة":"Consultation"})]})]}),s.jsxs(he,{className:"flex-shrink-0",children:[s.jsx(P,{type:"text",icon:s.jsx(Ps,{}),className:"text-gray-600 hover:text-gray-900",onClick:kr,disabled:(g==null?void 0:g.status)==="COMPLETED",title:i==="ar"?"مكالمة فيديو":"Video Call"}),(g==null?void 0:g.status)==="IN_PROGRESS"&&!a&&s.jsx(P,{type:"text",danger:!0,onClick:as,title:i==="ar"?"إنهاء الجلسة":"End Session",children:i==="ar"?"إنهاء":"End"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 min-h-0",style:{scrollBehavior:"smooth"},children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-3",children:[c.length===0?s.jsxs("div",{className:"text-center text-gray-400 py-12",children:[s.jsx("div",{className:"text-4xl mb-2",children:"💬"}),s.jsx("p",{children:i==="ar"?"لا توجد رسائل بعد":"No messages yet"})]}):c.map((K,Oe)=>{var Ot;const ue=K.senderId===(o==null?void 0:o.id),Me=K.attachments?JSON.parse(K.attachments):[],Le=Oe>0?c[Oe-1]:null;!Le||(Le.senderId,K.senderId);const yt=!Le||fe(K.createdAt).diff(fe(Le.createdAt),"minute")>5;return s.jsxs("div",{className:`flex ${ue?"justify-end":"justify-start"} items-end gap-2 ${yt?"mt-4":""}`,children:[!ue&&s.jsx(ot,{src:a?Nn==null?void 0:Nn.avatar:((Ot=cr==null?void 0:cr.user)==null?void 0:Ot.avatar)||(cr==null?void 0:cr.profilePicture),size:32,icon:s.jsx(Ee,{}),className:"flex-shrink-0"}),s.jsxs("div",{className:`flex flex-col ${ue?"items-end":"items-start"} max-w-[70%] md:max-w-[60%]`,children:[yt&&s.jsx("div",{className:"text-center w-full mb-2",children:s.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:fe(K.createdAt).format("MMM DD, YYYY HH:mm")})}),s.jsxs("div",{className:`rounded-2xl px-4 py-2 ${ue?"bg-[#dcf8c6] text-gray-900 rounded-tr-sm":"bg-white text-gray-900 rounded-tl-sm shadow-sm"}`,children:[Me.length>0&&s.jsx("div",{className:"mb-2 space-y-2",children:Me.map((Ce,Ut)=>{const Ws=Ce.startsWith("data:image/")||Ce.startsWith("data:video/")||Ce.startsWith("data:audio/"),Md=K.messageType==="image"||/\.(jpg|jpeg|png|gif|webp)$/i.test(Ce)||Ws&&Ce.startsWith("data:image/"),$d=K.messageType==="audio"||/\.(mp3|wav|ogg|m4a|webm)$/i.test(Ce)||Ws&&Ce.startsWith("data:audio/"),Rd=K.messageType==="video"||/\.(mp4|webm)$/i.test(Ce)&&K.messageType!=="audio"||Ws&&Ce.startsWith("data:video/");if(Md)return s.jsx("div",{className:"image-attachment mb-2 -mx-2",children:Ws?s.jsx("img",{src:Ce,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},onError:oa=>{const An=oa.target;if(An){An.style.display="none";const Xr=An.closest(".image-attachment");if(Xr&&!Xr.querySelector(".image-error-fallback")){const Qr=document.createElement("div");Qr.className="image-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",Qr.textContent=i==="ar"?"تعذر تحميل الصورة":"Image unavailable",Xr.appendChild(Qr)}}}}):s.jsx(Hn,{src:Ce.startsWith("http")?Ce:Ce.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Ce}`:Ce.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Ce}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Ce.split("/").pop()}`,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},preview:{mask:i==="ar"?"معاينة":"Preview"},onError:oa=>{const An=oa.target;if(An){An.style.display="none";const Xr=An.closest(".image-attachment");if(Xr&&!Xr.querySelector(".image-error-fallback")){const Qr=document.createElement("div");Qr.className="image-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",Qr.textContent=i==="ar"?"تعذر تحميل الصورة":"Image unavailable",Xr.appendChild(Qr)}}}},Ut)},Ut);if($d){const oa=Ce.startsWith("http")?Ce:Ce.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Ce}`:Ce.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Ce}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Ce.split("/").pop()}`;return s.jsx("div",{className:"audio-attachment",children:s.jsx(y0,{src:oa,isOwnMessage:ue,language:i})},Ut)}else if(Rd){const oa=Ce.startsWith("http")?Ce:Ce.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Ce}`:Ce.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Ce}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Ce.split("/").pop()}`;return s.jsx("div",{className:"video-attachment",children:s.jsx("video",{controls:!0,src:oa,className:"w-full max-w-md rounded",onError:An=>{const Xr=An.target;if(Xr){Xr.style.display="none";const Qr=Xr.closest(".video-attachment");if(Qr&&!Qr.querySelector(".video-error-fallback")){const Yi=document.createElement("div");Yi.className="video-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",Yi.textContent=i==="ar"?"تعذر تحميل الفيديو":"Video unavailable",Qr.appendChild(Yi)}}}})},Ut)}else return s.jsxs("div",{className:`file-attachment flex items-center gap-2 p-2 rounded ${ue?"bg-white/50":"bg-gray-100"}`,children:[s.jsx(wo,{className:ue?"text-gray-700":"text-blue-600"}),s.jsx("a",{href:Ce,download:!0,target:"_blank",rel:"noopener noreferrer",className:`text-sm ${ue?"text-gray-700 hover:text-gray-900":"text-blue-600 hover:text-blue-800"}`,children:Ce.split("/").pop()})]},Ut)})}),K.content&&K.content.trim()&&!(K.messageType==="image"&&Me.length>0&&!K.content.includes("📎"))&&s.jsx("p",{className:`text-sm ${Me.length>0?"mt-2":""} whitespace-pre-wrap break-words`,children:K.content}),s.jsx("span",{className:`text-xs mt-1 ${ue?"text-gray-600":"text-gray-500"} self-end`,children:fe(K.createdAt).format("HH:mm")})]})]}),ue&&s.jsx(ot,{src:o==null?void 0:o.avatar,size:32,icon:s.jsx(Ee,{}),className:"flex-shrink-0"})]},K.id)}),s.jsx("div",{ref:H})]})}),s.jsxs("div",{className:"border-t border-gray-200/50 px-4 py-3 shadow-professional backdrop-blur-sm flex-shrink-0 bg-white/80",children:[Ne&&!je&&s.jsxs("div",{className:"mb-2 p-3 bg-gray-100 rounded-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("audio",{src:Ne,controls:!0,className:"max-w-xs"}),s.jsx("span",{className:"text-sm text-gray-600",children:oe(X)})]}),s.jsxs(he,{children:[s.jsx(P,{type:"primary",size:"small",onClick:Wi,loading:m,children:i==="ar"?"إرسال":"Send"}),s.jsx(P,{size:"small",icon:s.jsx(Tr,{}),onClick:L})]})]}),je&&s.jsxs("div",{className:"mb-2 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsxs("span",{className:"text-red-600 font-semibold",children:[i==="ar"?"جاري التسجيل...":"Recording..."," ",oe(X)]})]}),s.jsx(P,{danger:!0,size:"small",icon:s.jsx(ko,{}),onClick:Qe,children:i==="ar"?"إيقاف":"Stop"})]}),v.length>0&&s.jsx("div",{className:"mb-3 pb-3 border-b border-gray-200",children:s.jsx("div",{className:"flex flex-wrap gap-3",children:v.map((K,Oe)=>{const ue=/\.(jpg|jpeg|png|gif|webp)$/i.test(K),Me=/\.(mp4|webm|ogg)$/i.test(K),Le=/\.(mp3|wav|ogg|m4a|webm)$/i.test(K),yt=K.split("/").pop(),Ot=K.startsWith("http")?K:K.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${K}`:K.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${K}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${K.split("/").pop()}`;return s.jsx("div",{className:"relative group",children:ue?s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm",children:[s.jsx(Hn,{src:Ot,alt:yt,width:200,height:200,className:"object-cover",preview:!1,onError:Ce=>{Ce.target.style.display="none"}}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Tr,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>C(v.filter((Ce,Ut)=>Ut!==Oe))})]}):Me?s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm w-[200px]",children:[s.jsx("video",{src:Ot,className:"w-full h-[150px] object-cover",controls:!1,muted:!0,onError:Ce=>{console.error("Video failed to load:",Ot)}}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:s.jsx(Ps,{className:"text-white text-2xl"})}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Tr,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>C(v.filter((Ce,Ut)=>Ut!==Oe))})]}):Le?s.jsxs("div",{className:"relative rounded-lg border border-gray-200 shadow-sm bg-gray-50 p-3 min-w-[200px]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(No,{className:"text-gray-600 text-lg"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs text-gray-600 truncate",children:yt}),s.jsx("audio",{src:Ot,controls:!0,className:"w-full mt-1",preload:"metadata"})]})]}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Tr,{}),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center",onClick:()=>C(v.filter((Ce,Ut)=>Ut!==Oe))})]}):s.jsxs("div",{className:"relative flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 shadow-sm min-w-[200px]",children:[s.jsx(wo,{className:"text-gray-600 text-xl"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-gray-700 truncate font-medium",children:yt}),s.jsx("p",{className:"text-xs text-gray-500",children:i==="ar"?"ملف":"File"})]}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Tr,{}),className:"bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center flex-shrink-0",onClick:()=>C(v.filter((Ce,Ut)=>Ut!==Oe))})]})},Oe)})})}),s.jsxs("div",{className:"flex items-end gap-2 relative",children:[s.jsx(Yt,{showUploadList:!1,beforeUpload:Cr,accept:"image/*,audio/*,video/*,.pdf,.doc,.docx",multiple:!0,children:s.jsx(P,{type:"text",icon:s.jsx(o0,{}),className:"text-gray-600 hover:text-gray-900 text-xl",disabled:(g==null?void 0:g.status)==="COMPLETED"||je||pe})}),s.jsx(P,{type:je?"primary":"text",danger:je,icon:je?s.jsx(h0,{}):s.jsx(No,{}),onClick:Hi,disabled:(g==null?void 0:g.status)==="COMPLETED"||pe,className:je?"bg-red-500 hover:bg-red-600":"text-gray-600 hover:text-gray-900",title:i==="ar"?"تسجيل صوتي":"Voice recording"}),s.jsx(P,{type:pe?"primary":"text",danger:pe,icon:s.jsx(Ih,{}),onClick:qi,disabled:(g==null?void 0:g.status)==="COMPLETED"||je,className:pe?"bg-red-500 hover:bg-red-600":"text-gray-600 hover:text-gray-900",title:i==="ar"?"تسجيل فيديو":"Video recording"}),s.jsx(P,{icon:s.jsx(m0,{}),onClick:()=>k(!A),type:"text",className:"text-gray-600 hover:text-gray-900",disabled:(g==null?void 0:g.status)==="COMPLETED"||je||pe}),s.jsx("div",{className:"flex-1 bg-gray-100 rounded-3xl px-4 py-2 border border-gray-200 focus-within:border-blue-500 focus-within:bg-white ",children:s.jsx(Iv,{value:u,onChange:K=>f(K.target.value),placeholder:i==="ar"?"اكتب رسالة...":"Type a message...",autoSize:{minRows:1,maxRows:4},variant:"borderless",disabled:(g==null?void 0:g.status)==="COMPLETED"||je||pe,className:"resize-none",onPressEnter:K=>{K.shiftKey||(K.preventDefault(),ia())}})}),s.jsx(P,{type:"primary",icon:s.jsx(p0,{}),className:"bg-[#25D366] hover:bg-[#20BA5A] border-0 rounded-full w-10 h-10 p-0 flex items-center justify-center",onClick:ia,loading:m,disabled:(g==null?void 0:g.status)==="COMPLETED"||!u.trim()&&v.length===0||je||pe})]}),A&&s.jsx("div",{className:"absolute bottom-full left-0 mb-2 p-3 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto z-50",children:s.jsx("div",{className:"grid grid-cols-8 gap-1",children:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃"].map(K=>s.jsx(P,{type:"text",className:"text-xl p-1 hover:bg-gray-100",onClick:()=>{f(Oe=>Oe+K),k(!1)},children:K},K))})})]}),s.jsx(Ye,{title:i==="ar"?"تسجيل فيديو":"Record Video",open:Sn,onCancel:()=>{pe&&St(),Ar(!1)},footer:[s.jsx(P,{onClick:()=>{St(),Ar(!1)},children:i==="ar"?"إلغاء":"Cancel"},"cancel"),pe?s.jsx(P,{danger:!0,onClick:()=>{_t()},children:i==="ar"?"إيقاف":"Stop"},"stop"):it?s.jsxs(s.Fragment,{children:[s.jsx(P,{onClick:()=>{St(),dn()},children:i==="ar"?"إعادة":"Retake"},"retake"),s.jsx(P,{type:"primary",onClick:Jr,loading:m,children:i==="ar"?"إرسال":"Send"},"send")]}):s.jsx(P,{type:"primary",onClick:dn,children:i==="ar"?"بدء التسجيل":"Start Recording"},"start")],width:600,children:s.jsxs("div",{className:"text-center",children:[pe&&s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsxs("span",{className:"text-red-600 font-semibold",children:[i==="ar"?"جاري التسجيل...":"Recording..."," ",Xe(Ge)]})]})}),s.jsx("video",{ref:lt,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full max-w-md mx-auto rounded-lg",style:{display:pe||it?"block":"none"}}),it&&!pe&&s.jsx("video",{src:it,controls:!0,className:"w-full max-w-md mx-auto rounded-lg mt-4"}),!pe&&!it&&s.jsx("div",{className:"py-8 text-gray-500",children:i==="ar"?'اضغط على "بدء التسجيل" لبدء تسجيل الفيديو':'Click "Start Recording" to begin video recording'})]})}),s.jsx(Ye,{title:i==="ar"?"مكالمة فيديو - Jitsi Meet":"Video Call - Jitsi Meet",open:Cl,onCancel:()=>ns(!1),footer:[s.jsx(P,{onClick:()=>ns(!1),children:i==="ar"?"إغلاق":"Close"},"close"),s.jsx(P,{type:"primary",onClick:()=>{S!=null&&S.joinUrl&&window.open(S.joinUrl,"_blank","width=1200,height=800")},children:i==="ar"?"فتح في نافذة جديدة":"Open in New Window"},"openNew")],width:"90%",style:{top:20},styles:{body:{height:"80vh",padding:0}},destroyOnHidden:!0,children:S!=null&&S.joinUrl?s.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",padding:"20px"},children:[s.jsx("p",{style:{fontSize:"16px",color:"#666",textAlign:"center"},children:i==="ar"?'لأفضل تجربة، يرجى استخدام زر "فتح في نافذة جديدة" لفتح المكالمة':'For the best experience, please use the "Open in New Window" button to open the call'}),s.jsx(P,{type:"primary",size:"large",onClick:()=>{S!=null&&S.joinUrl&&window.open(S.joinUrl,"_blank","width=1200,height=800")},children:i==="ar"?"فتح المكالمة في نافذة جديدة":"Open Call in New Window"}),s.jsx("div",{style:{width:"100%",height:"70%",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},children:s.jsx("iframe",{src:S.joinUrl,allow:"camera; microphone; fullscreen; speaker; display-capture; autoplay",style:{width:"100%",height:"100%",border:"none"},title:"Jitsi Meet Video Call",allowFullScreen:!0})})]}):s.jsx("div",{style:{padding:"20px",textAlign:"center"},children:s.jsx("p",{children:i==="ar"?"لا يوجد رابط للمكالمة":"No call URL available"})})}),s.jsx(Ye,{title:i==="ar"?"تقييم المستشار":"Rate Consultant",open:Hs,onCancel:()=>{j!=null&&j.rating||R.warning(i==="ar"?"يجب إضافة تقييم ومراجعة قبل المتابعة":"Please add a rating and review before continuing")},footer:null,closable:!1,maskClosable:!1,width:600,children:s.jsxs("div",{className:"py-4",children:[s.jsx("p",{className:"text-gray-600 mb-6",children:i==="ar"?"يرجى إضافة تقييمك ومراجعتك للمستشار بناءً على الجلسة التي انتهت للتو.":"Please provide your rating and review for the consultant based on the session that just ended."}),s.jsxs(E,{form:pt,layout:"vertical",children:[s.jsx(E.Item,{label:i==="ar"?"التقييم (مطلوب)":"Rating (Required)",required:!0,rules:[{required:!0,message:i==="ar"?"يرجى إضافة تقييم":"Please add a rating"}],children:s.jsx(Ya,{value:Lt,onChange:kl,allowClear:!1,style:{fontSize:"28px"}})}),s.jsx(E.Item,{label:i==="ar"?"المراجعة/التعليق (مطلوب)":"Review/Comment (Required)",required:!0,rules:[{required:!0,message:i==="ar"?"يرجى إضافة مراجعة أو تعليق":"Please add a review or comment"},{min:10,message:i==="ar"?"يجب أن يكون التعليق 10 أحرف على الأقل":"Comment must be at least 10 characters"}],children:s.jsx(Iv,{value:W,onChange:K=>Ue(K.target.value),placeholder:i==="ar"?"اكتب مراجعتك هنا...":"Write your review here...",rows:6,maxLength:500,showCount:!0})}),s.jsx(E.Item,{className:"mb-0",children:s.jsx("div",{className:"flex justify-end gap-3",children:s.jsx(P,{type:"primary",onClick:Id,loading:De,disabled:!Lt||Lt<1||!W.trim()||W.trim().length<10,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:i==="ar"?"إرسال المراجعة":"Submit Review"})})})]})]})})]})},{authAPI:El,filesAPI:Mv}=Fr,{TextArea:mT}=F,{Option:Gi}=B,gT=()=>{var g;const{t,language:e}=Se(),{theme:r}=yd(),{user:n}=yr(),[a]=E.useForm(),[i,o]=N.useState(!1),[l,c]=N.useState(null),[d,u]=N.useState(!1);N.useEffect(()=>{f()},[]);const f=async()=>{try{o(!0);const y=await El.getProfile();console.log("Profile response:",y),y.user&&(c(y.user),y.user.client&&a.setFieldsValue({firstName:y.user.client.firstName||"",lastName:y.user.client.lastName||"",email:y.user.email||"",phone:y.user.phone||"",city:y.user.client.city||"",country:y.user.client.country||"Saudi Arabia",address:y.user.client.address||"",postalCode:y.user.client.postalCode||"",sector:y.user.client.sector||"",companyName:y.user.client.companyName||"",companySize:y.user.client.companySize||"",jobTitle:y.user.client.jobTitle||"",website:y.user.client.website||"",linkedin:y.user.client.linkedin||"",twitter:y.user.client.twitter||"",dateOfBirth:y.user.client.dateOfBirth?fe(y.user.client.dateOfBirth):null,gender:y.user.client.gender||"",notificationEmail:y.user.client.notificationEmail!==void 0?y.user.client.notificationEmail:!0,notificationApp:y.user.client.notificationApp!==void 0?y.user.client.notificationApp:!0,notificationWhatsApp:y.user.client.notificationWhatsApp!==void 0?y.user.client.notificationWhatsApp:!0}))}catch(y){console.error("Error fetching profile:",y),R.error(y.message||(e==="ar"?"فشل تحميل الملف الشخصي":"Failed to load profile"))}finally{o(!1)}},h=async y=>{var S;const j=Mv||(Fr==null?void 0:Fr.filesAPI);if(!j)return console.error("filesAPI is not defined",{filesAPI:Mv,apiService:Fr}),R.error(e==="ar"?"خطأ في تحميل API":"API loading error"),!1;const b=new FormData;b.append("file",y),b.append("ownerType","USER"),b.append("ownerId",(n==null?void 0:n.id)||"");try{o(!0);const w=await j.uploadFile(b);(S=w.file)!=null&&S.fileUrl&&(await El.updateProfile({avatar:w.file.fileUrl}),R.success(e==="ar"?"تم رفع الصورة بنجاح":"Avatar uploaded successfully"),c(v=>({...v,avatar:w.file.fileUrl})),await f())}catch(w){R.error(w.message||(e==="ar"?"فشل رفع الصورة":"Failed to upload avatar"))}finally{o(!1)}return!1},p=async y=>{try{o(!0);const j={...y,dateOfBirth:y.dateOfBirth?y.dateOfBirth.toISOString():null};y.email&&y.email!==(l==null?void 0:l.email)&&await El.updateEmail(y.email),await El.updateProfile(j),R.success(e==="ar"?"تم حفظ التغييرات بنجاح":"Profile updated successfully"),u(!1),f()}catch(j){R.error(j.message||(e==="ar"?"فشل حفظ التغييرات":"Failed to save changes"))}finally{o(!1)}},m=async y=>{try{o(!0),await El.changePassword(y.currentPassword,y.newPassword),R.success(e==="ar"?"تم تغيير كلمة المرور بنجاح":"Password changed successfully"),a.setFieldsValue({currentPassword:"",newPassword:"",confirmPassword:""})}catch(j){R.error(j.message||(e==="ar"?"فشل تغيير كلمة المرور":"Failed to change password"))}finally{o(!1)}},x=l!=null&&l.client?{totalBookings:0,completedSessions:0,totalSpent:0}:null;return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 relative z-10",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الملف الشخصي":"Profile Settings"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة معلوماتك الشخصية وإعدادات الحساب":"Manage your personal information and account settings"})]}),s.jsxs(le,{gutter:[24,24],children:[s.jsx(_,{xs:24,md:8,children:s.jsxs(V,{className:"glass-card text-center shadow-professional-xl rounded-2xl border-0",children:[s.jsx(Yt,{showUploadList:!1,beforeUpload:h,accept:"image/*",children:s.jsxs("div",{className:"relative inline-block mb-4",children:[s.jsx(ot,{size:140,src:(l==null?void 0:l.avatar)||(n==null?void 0:n.avatar)||((g=l==null?void 0:l.client)==null?void 0:g.profilePicture),icon:s.jsx(Ee,{}),className:"ring-4 ring-olive-green-200"}),s.jsx(P,{type:"primary",shape:"circle",icon:s.jsx(Ih,{}),className:"absolute bottom-0 right-0 shadow-lg",size:"small",style:{backgroundColor:"#7a8c66"}})]})}),s.jsx("h2",{className:`text-2xl font-bold mb-2 ${r==="dark"?"text-white":"text-gray-900"}`,children:l!=null&&l.client&&`${l.client.firstName||""} ${l.client.lastName||""}`.trim()||(n==null?void 0:n.email)}),s.jsx(ce,{color:"blue",className:"mb-4",children:e==="ar"?"عميل":"Client"}),x&&s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsx(Rt,{className:"my-4"}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{span:8,children:s.jsx(Fe,{title:e==="ar"?"الحجوزات":"Bookings",value:x.totalBookings,valueStyle:{fontSize:"18px",color:r==="dark"?"#fff":"#7a8c66"}})}),s.jsx(_,{span:8,children:s.jsx(Fe,{title:e==="ar"?"مكتملة":"Completed",value:x.completedSessions,valueStyle:{fontSize:"18px",color:r==="dark"?"#fff":"#14b8a6"}})}),s.jsx(_,{span:8,children:s.jsx(Fe,{title:e==="ar"?"إجمالي":"Total",value:x.totalSpent,prefix:"SAR",valueStyle:{fontSize:"18px",color:r==="dark"?"#fff":"#7a8c66"}})})]})]})]})}),s.jsx(_,{xs:24,md:16,children:s.jsxs(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:`text-2xl font-bold ${r==="dark"?"text-white":"text-gray-900"}`,children:e==="ar"?"المعلومات الشخصية":"Personal Information"}),s.jsx(P,{icon:d?s.jsx(vt,{}):s.jsx(qr,{}),onClick:()=>u(!d),type:d?"default":"primary",children:d?e==="ar"?"إلغاء":"Cancel":e==="ar"?"تعديل":"Edit"})]}),s.jsxs(E,{form:a,onFinish:p,layout:"vertical",disabled:!d,children:[s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"firstName",label:e==="ar"?"الاسم الأول":"First Name",rules:[{required:!0}],children:s.jsx(F,{size:"large",prefix:s.jsx(Ee,{})})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"lastName",label:e==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0}],children:s.jsx(F,{size:"large",prefix:s.jsx(Ee,{})})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,type:"email"}],children:s.jsx(F,{size:"large",prefix:s.jsx(zn,{})})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:s.jsx(F,{size:"large",prefix:s.jsx(Ka,{})})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:8,children:s.jsx(E.Item,{name:"dateOfBirth",label:e==="ar"?"تاريخ الميلاد":"Date of Birth",children:s.jsx(Ms,{size:"large",className:"w-full"})})}),s.jsx(_,{xs:24,sm:8,children:s.jsx(E.Item,{name:"gender",label:e==="ar"?"الجنس":"Gender",children:s.jsxs(B,{size:"large",children:[s.jsx(Gi,{value:"MALE",children:e==="ar"?"ذكر":"Male"}),s.jsx(Gi,{value:"FEMALE",children:e==="ar"?"أنثى":"Female"}),s.jsx(Gi,{value:"OTHER",children:e==="ar"?"أخرى":"Other"})]})})})]}),s.jsx(Rt,{children:e==="ar"?"العنوان":"Address"}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"city",label:e==="ar"?"المدينة":"City",children:s.jsx(F,{size:"large",prefix:s.jsx(Mh,{})})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"country",label:e==="ar"?"الدولة":"Country",children:s.jsx(F,{size:"large",prefix:s.jsx(va,{})})})})]}),s.jsx(E.Item,{name:"address",label:e==="ar"?"العنوان الكامل":"Full Address",children:s.jsx(mT,{rows:3,size:"large"})}),s.jsx(E.Item,{name:"postalCode",label:e==="ar"?"الرمز البريدي":"Postal Code",children:s.jsx(F,{size:"large"})}),s.jsx(Rt,{children:e==="ar"?"معلومات الشركة":"Company Information"}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"companyName",label:e==="ar"?"اسم الشركة":"Company Name",children:s.jsx(F,{size:"large",prefix:s.jsx(c0,{})})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"jobTitle",label:e==="ar"?"المسمى الوظيفي":"Job Title",children:s.jsx(F,{size:"large"})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"sector",label:e==="ar"?"القطاع":"Sector",children:s.jsx(F,{size:"large"})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"companySize",label:e==="ar"?"حجم الشركة":"Company Size",children:s.jsxs(B,{size:"large",children:[s.jsx(Gi,{value:"SMALL",children:e==="ar"?"صغيرة":"Small"}),s.jsx(Gi,{value:"MEDIUM",children:e==="ar"?"متوسطة":"Medium"}),s.jsx(Gi,{value:"LARGE",children:e==="ar"?"كبيرة":"Large"})]})})})]}),s.jsx(Rt,{children:e==="ar"?"روابط التواصل":"Social Links"}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"website",label:e==="ar"?"الموقع الإلكتروني":"Website",children:s.jsx(F,{size:"large",prefix:s.jsx(va,{}),placeholder:"https://"})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"linkedin",label:"LinkedIn",children:s.jsx(F,{size:"large",placeholder:"linkedin.com/in/..."})})})]}),s.jsx(E.Item,{name:"twitter",label:"Twitter",children:s.jsx(F,{size:"large",placeholder:"@username"})}),d&&s.jsx(E.Item,{className:"mt-6",children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",icon:s.jsx(Ra,{}),loading:i,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"حفظ التغييرات":"Save Changes"})})]}),s.jsx(Rt,{children:e==="ar"?"تغيير كلمة المرور":"Change Password"}),s.jsxs(E,{onFinish:m,layout:"vertical",children:[s.jsx(E.Item,{name:"currentPassword",label:e==="ar"?"كلمة المرور الحالية":"Current Password",rules:[{required:!0}],children:s.jsx(F.Password,{size:"large",prefix:s.jsx(Jt,{})})}),s.jsx(E.Item,{name:"newPassword",label:e==="ar"?"كلمة المرور الجديدة":"New Password",rules:[{required:!0,min:8}],children:s.jsx(F.Password,{size:"large",prefix:s.jsx(Jt,{})})}),s.jsx(E.Item,{name:"confirmPassword",label:e==="ar"?"تأكيد كلمة المرور":"Confirm Password",dependencies:["newPassword"],rules:[{required:!0},({getFieldValue:y})=>({validator(j,b){return!b||y("newPassword")===b?Promise.resolve():Promise.reject(new Error(e==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match"))}})],children:s.jsx(F.Password,{size:"large",prefix:s.jsx(Jt,{})})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",loading:i,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"تغيير كلمة المرور":"Change Password"})})]}),s.jsx(Rt,{children:e==="ar"?"تفضيلات الإشعارات":"Notification Preferences"}),s.jsxs(E,{form:a,layout:"vertical",children:[s.jsx(E.Item,{name:"notificationEmail",label:e==="ar"?"الإشعارات عبر البريد الإلكتروني":"Email Notifications",valuePropName:"checked",children:s.jsx(Zn,{checkedChildren:e==="ar"?"مفعل":"On",unCheckedChildren:e==="ar"?"معطل":"Off"})}),s.jsx(E.Item,{name:"notificationApp",label:e==="ar"?"إشعارات التطبيق":"App Notifications",valuePropName:"checked",children:s.jsx(Zn,{checkedChildren:e==="ar"?"مفعل":"On",unCheckedChildren:e==="ar"?"معطل":"Off"})}),s.jsx(E.Item,{name:"notificationWhatsApp",label:e==="ar"?"إشعارات واتساب":"WhatsApp Notifications",valuePropName:"checked",children:s.jsx(Zn,{checkedChildren:e==="ar"?"مفعل":"On",unCheckedChildren:e==="ar"?"معطل":"Off"})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",icon:s.jsx(gc,{}),loading:i,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"حفظ تفضيلات الإشعارات":"Save Notification Preferences"})})]})]})})]})]})]})},{TextArea:$v}=F,{Option:Gs}=B,xT=()=>{var w;const{language:t}=Se(),[e,r]=N.useState([]),[n,a]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[d,u]=N.useState(null),[f,h]=N.useState(!1),[p]=E.useForm(),[m]=E.useForm();N.useEffect(()=>{x()},[]);const x=async()=>{try{a(!0);const v=await nn.getMyTickets();r(v.tickets||[])}catch{R.error(t==="ar"?"فشل تحميل التذاكر":"Failed to load tickets")}finally{a(!1)}},g=async v=>{try{await nn.createTicket(v),R.success(t==="ar"?"تم إنشاء التذكرة بنجاح":"Ticket created successfully"),o(!1),p.resetFields(),x()}catch{R.error(t==="ar"?"فشل إنشاء التذكرة":"Failed to create ticket")}},y=async v=>{try{if(await nn.addComment(d.id,v.content),R.success(t==="ar"?"تم إضافة التعليق":"Comment added"),h(!1),m.resetFields(),x(),l){const C=await nn.getTicketById(d.id);u(C.ticket)}}catch{R.error(t==="ar"?"فشل إضافة التعليق":"Failed to add comment")}},j=v=>({OPEN:"blue",IN_PROGRESS:"orange",RESOLVED:"green",CLOSED:"default"})[v]||"default",b=v=>({LOW:"default",MEDIUM:"blue",HIGH:"orange",URGENT:"red"})[v]||"default",S=[{title:t==="ar"?"رقم التذكرة":"Ticket Number",dataIndex:"ticketNumber",key:"ticketNumber"},{title:t==="ar"?"الموضوع":"Subject",dataIndex:"subject",key:"subject"},{title:t==="ar"?"الفئة":"Category",dataIndex:"category",key:"category",render:v=>v||"-"},{title:t==="ar"?"الأولوية":"Priority",dataIndex:"priority",key:"priority",render:v=>s.jsx(ce,{color:b(v),children:v})},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:v=>s.jsx(ce,{color:j(v),children:v})},{title:t==="ar"?"تاريخ الإنشاء":"Created At",dataIndex:"createdAt",key:"createdAt",render:v=>fe(v).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"الإجراءات":"Actions",key:"actions",render:(v,C)=>s.jsx(he,{children:s.jsx(P,{icon:s.jsx(mr,{}),size:"small",onClick:()=>{u(C),c(!0)},children:t==="ar"?"عرض":"View"})})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?"تذاكر الدعم الفني":"Support Tickets"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"إنشاء ومتابعة تذاكر الدعم الفني":"Create and track support tickets"})]}),s.jsx(P,{type:"primary",size:"large",icon:s.jsx($r,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-professional",onClick:()=>o(!0),children:t==="ar"?"إنشاء تذكرة جديدة":"Create New Ticket"})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:S,dataSource:e,loading:n,rowKey:"id",locale:{emptyText:s.jsx(Xt,{description:t==="ar"?"لا توجد تذاكر":"No tickets"})}})}),s.jsx(Ye,{title:t==="ar"?"إنشاء تذكرة جديدة":"Create New Ticket",open:i,onCancel:()=>{o(!1),p.resetFields()},footer:null,width:600,className:"modern-modal",children:s.jsxs(E,{form:p,layout:"vertical",onFinish:g,children:[s.jsx(E.Item,{name:"subject",label:t==="ar"?"الموضوع":"Subject",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال الموضوع":"Please enter subject"}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"category",label:t==="ar"?"الفئة":"Category",children:s.jsxs(B,{children:[s.jsx(Gs,{value:"technical",children:t==="ar"?"تقني":"Technical"}),s.jsx(Gs,{value:"billing",children:t==="ar"?"مالي":"Billing"}),s.jsx(Gs,{value:"general",children:t==="ar"?"عام":"General"})]})}),s.jsx(E.Item,{name:"priority",label:t==="ar"?"الأولوية":"Priority",initialValue:"MEDIUM",children:s.jsxs(B,{children:[s.jsx(Gs,{value:"LOW",children:t==="ar"?"منخفضة":"Low"}),s.jsx(Gs,{value:"MEDIUM",children:t==="ar"?"متوسطة":"Medium"}),s.jsx(Gs,{value:"HIGH",children:t==="ar"?"عالية":"High"}),s.jsx(Gs,{value:"URGENT",children:t==="ar"?"عاجلة":"Urgent"})]})}),s.jsx(E.Item,{name:"description",label:t==="ar"?"الوصف":"Description",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال الوصف":"Please enter description"}],children:s.jsx($v,{rows:6})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"إنشاء التذكرة":"Create Ticket"})})]})}),s.jsx(Ye,{title:t==="ar"?"تفاصيل التذكرة":"Ticket Details",open:l,onCancel:()=>{c(!1),u(null)},footer:null,width:800,className:"modern-modal",children:d&&s.jsxs("div",{children:[s.jsxs(be,{bordered:!0,column:2,children:[s.jsx(be.Item,{label:t==="ar"?"رقم التذكرة":"Ticket Number",children:d.ticketNumber}),s.jsx(be.Item,{label:t==="ar"?"الحالة":"Status",children:s.jsx(ce,{color:j(d.status),children:d.status})}),s.jsx(be.Item,{label:t==="ar"?"الأولوية":"Priority",children:s.jsx(ce,{color:b(d.priority),children:d.priority})}),s.jsx(be.Item,{label:t==="ar"?"الفئة":"Category",children:d.category||"-"}),s.jsx(be.Item,{label:t==="ar"?"الموضوع":"Subject",span:2,children:d.subject}),s.jsx(be.Item,{label:t==="ar"?"الوصف":"Description",span:2,children:d.description})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:t==="ar"?"التعليقات":"Comments"}),s.jsx(P,{type:"primary",icon:s.jsx(Gt,{}),onClick:()=>h(!0),children:t==="ar"?"إضافة تعليق":"Add Comment"})]}),s.jsx(l0,{items:((w=d.comments)==null?void 0:w.map(v=>{var C;return{key:v.id,children:s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"font-semibold",children:(C=v.user)==null?void 0:C.email}),s.jsx("span",{className:"text-gray-500 text-sm",children:fe(v.createdAt).format("YYYY-MM-DD HH:mm")})]}),s.jsx("p",{children:v.comment||v.content})]})}}))||[]}),(!d.comments||d.comments.length===0)&&s.jsx(Xt,{description:t==="ar"?"لا توجد تعليقات":"No comments"})]})]})}),s.jsx(Ye,{title:t==="ar"?"إضافة تعليق":"Add Comment",open:f,onCancel:()=>{h(!1),m.resetFields()},footer:null,className:"modern-modal",children:s.jsxs(E,{form:m,layout:"vertical",onFinish:y,children:[s.jsx(E.Item,{name:"content",label:t==="ar"?"التعليق":"Comment",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال التعليق":"Please enter comment"}],children:s.jsx($v,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"إضافة التعليق":"Add Comment"})})]})})]})},{Text:yT,Paragraph:vT}=fd,bT=()=>{var m;const{language:t}=Se(),[e]=Ak(),r=e.get("bookingId"),[n,a]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(!1),[d,u]=N.useState(null);N.useEffect(()=>{f()},[r]);const f=async()=>{try{o(!0);const x={};r&&(x.bookingId=r);const g=await Nu.getReports(x);a(g.reports||[])}catch(x){console.error("Error fetching reports:",x),R.error(t==="ar"?"فشل تحميل التقارير":"Failed to load reports")}finally{o(!1)}},h=(x,g)=>{if(!x){R.warning(t==="ar"?"الملف غير متوفر":"File not available");return}const y=document.createElement("a");y.href=x,y.download=g||"report.pdf",y.target="_blank",document.body.appendChild(y),y.click(),document.body.removeChild(y),R.success(t==="ar"?"جاري تحميل الملف...":"Downloading file...")},p=[{title:t==="ar"?"عنوان التقرير":"Report Title",dataIndex:"title",key:"title",render:x=>s.jsx(yT,{strong:!0,children:x})},{title:t==="ar"?"نوع التقرير":"Report Type",dataIndex:"reportType",key:"reportType",render:x=>{const g={FEASIBILITY_STUDY:t==="ar"?"دراسة جدوى":"Feasibility Study",ECONOMIC_ANALYSIS:t==="ar"?"تحليل اقتصادي":"Economic Analysis",FINANCIAL_REPORT:t==="ar"?"تقرير مالي":"Financial Report",CONSULTATION_SUMMARY:t==="ar"?"ملخص استشارة":"Consultation Summary"};return s.jsx(ce,{color:"blue",children:g[x]||x})}},{title:t==="ar"?"المستشار":"Consultant",key:"consultant",render:(x,g)=>{var y;return g.consultant?`${g.consultant.firstName||""} ${g.consultant.lastName||""}`.trim():(y=g.booking)!=null&&y.consultant?`${g.booking.consultant.firstName||""} ${g.booking.consultant.lastName||""}`.trim():"-"}},{title:t==="ar"?"تاريخ الرفع":"Upload Date",dataIndex:"createdAt",key:"createdAt",render:x=>fe(x).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:x=>{const g={DRAFT:"default",UNDER_REVIEW:"processing",APPROVED:"success",REJECTED:"error",COMPLETED:"success"},y={DRAFT:t==="ar"?"مسودة":"Draft",UNDER_REVIEW:t==="ar"?"قيد المراجعة":"Under Review",APPROVED:t==="ar"?"موافق عليه":"Approved",REJECTED:t==="ar"?"مرفوض":"Rejected",COMPLETED:t==="ar"?"مكتمل":"Completed"};return s.jsx(ce,{color:g[x]||"default",icon:x==="APPROVED"||x==="COMPLETED"?s.jsx(vt,{}):x==="UNDER_REVIEW"?s.jsx(Ln,{}):s.jsx(yc,{}),children:y[x]||x})}},{title:t==="ar"?"الإجراءات":"Actions",key:"actions",render:(x,g)=>s.jsxs(he,{children:[s.jsx(P,{icon:s.jsx(mr,{}),onClick:()=>{u(g),c(!0)},children:t==="ar"?"معاينة":"Preview"}),(g.status==="APPROVED"||g.status==="COMPLETED")&&s.jsxs(s.Fragment,{children:[g.pdfUrl&&s.jsx(P,{type:"primary",icon:s.jsx(zr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>h(g.pdfUrl,`${g.title||"report"}.pdf`),children:t==="ar"?"تحميل PDF":"Download PDF"}),g.wordUrl&&s.jsx(P,{icon:s.jsx(zr,{}),onClick:()=>h(g.wordUrl,`${g.title||"report"}.docx`),children:t==="ar"?"تحميل Word":"Download Word"})]})]})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?"التقارير":"Reports"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"عرض وتحميل التقارير المرفوعة من المستشارين":"View and download reports uploaded by consultants"})]})}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:p,dataSource:n,rowKey:"id",loading:i,pagination:{pageSize:10},locale:{emptyText:t==="ar"?"لا توجد تقارير متاحة":"No reports available"}})}),s.jsx(Ye,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(It,{className:"text-olive-green-600"}),s.jsx("span",{children:t==="ar"?"تفاصيل التقرير":"Report Details"})]}),open:l,onCancel:()=>{c(!1),u(null)},footer:(()=>{const x=[s.jsx(P,{onClick:()=>{c(!1),u(null)},children:t==="ar"?"إغلاق":"Close"},"close")];return d&&(d.status==="APPROVED"||d.status==="COMPLETED")&&(d.pdfUrl&&x.push(s.jsx(P,{type:"primary",icon:s.jsx(zr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>h(d.pdfUrl,`${d.title||"report"}.pdf`),children:t==="ar"?"تحميل PDF":"Download PDF"},"pdf")),d.wordUrl&&x.push(s.jsx(P,{icon:s.jsx(zr,{}),onClick:()=>h(d.wordUrl,`${d.title||"report"}.docx`),children:t==="ar"?"تحميل Word":"Download Word"},"word"))),x})(),width:800,children:d&&s.jsxs(be,{column:1,bordered:!0,children:[s.jsx(be.Item,{label:t==="ar"?"العنوان":"Title",children:d.title}),s.jsx(be.Item,{label:t==="ar"?"نوع التقرير":"Report Type",children:s.jsx(ce,{color:"blue",children:d.reportType==="FEASIBILITY_STUDY"?t==="ar"?"دراسة جدوى":"Feasibility Study":d.reportType==="ECONOMIC_ANALYSIS"?t==="ar"?"تحليل اقتصادي":"Economic Analysis":d.reportType==="FINANCIAL_REPORT"?t==="ar"?"تقرير مالي":"Financial Report":t==="ar"?"ملخص استشارة":"Consultation Summary"})}),s.jsx(be.Item,{label:t==="ar"?"المستشار":"Consultant",children:d.consultant?`${d.consultant.firstName||""} ${d.consultant.lastName||""}`.trim():(m=d.booking)!=null&&m.consultant?`${d.booking.consultant.firstName||""} ${d.booking.consultant.lastName||""}`.trim():"-"}),s.jsx(be.Item,{label:t==="ar"?"الحالة":"Status",children:s.jsx(ce,{color:d.status==="APPROVED"||d.status==="COMPLETED"?"success":d.status==="UNDER_REVIEW"?"processing":d.status==="REJECTED"?"error":"default",children:d.status==="APPROVED"?t==="ar"?"موافق عليه":"Approved":d.status==="COMPLETED"?t==="ar"?"مكتمل":"Completed":d.status==="UNDER_REVIEW"?t==="ar"?"قيد المراجعة":"Under Review":d.status==="REJECTED"?t==="ar"?"مرفوض":"Rejected":t==="ar"?"مسودة":"Draft"})}),d.summary&&s.jsx(be.Item,{label:t==="ar"?"ملخص":"Summary",children:s.jsx(vT,{children:d.summary})}),s.jsx(be.Item,{label:t==="ar"?"تاريخ الرفع":"Upload Date",children:fe(d.createdAt).format("YYYY-MM-DD HH:mm")}),d.updatedAt&&s.jsx(be.Item,{label:t==="ar"?"آخر تحديث":"Last Updated",children:fe(d.updatedAt).format("YYYY-MM-DD HH:mm")})]})})]})},jT=()=>s.jsx(cT,{children:s.jsxs(yh,{children:[s.jsx(we,{path:"/",element:s.jsx(dT,{})}),s.jsx(we,{path:"/bookings",element:s.jsx(fT,{})}),s.jsx(we,{path:"/consultations",element:s.jsx(hT,{})}),s.jsx(we,{path:"/chat",element:s.jsx(zd,{})}),s.jsx(we,{path:"/chat/session/:sessionId",element:s.jsx(zd,{})}),s.jsx(we,{path:"/sessions/:sessionId",element:s.jsx(zd,{})}),s.jsx(we,{path:"/chat/:id",element:s.jsx(zd,{})}),s.jsx(we,{path:"/reports",element:s.jsx(bT,{})}),s.jsx(we,{path:"/support",element:s.jsx(xT,{})}),s.jsx(we,{path:"/profile",element:s.jsx(gT,{})}),s.jsx(we,{path:"*",element:s.jsx(Kn,{to:"/client",replace:!0})})]})}),{Header:wT,Sider:ST,Content:NT}=Je,AT=({children:t})=>{var j;const{t:e,language:r,toggleLanguage:n}=Se(),{user:a,logout:i}=yr(),o=st(),l=dl(),[c,d]=N.useState(!1),[u,f]=N.useState(!1),h=r==="ar";N.useEffect(()=>{const b=document.querySelector(".consultant-content");b&&(b.classList.add("fade-in"),setTimeout(()=>{b.classList.remove("fade-in")},500))},[l.pathname]);const p=()=>{i(),o("/login",{replace:!0})},m=[{key:"/consultant",icon:s.jsx(u0,{}),label:r==="ar"?"الرئيسية":"Home"},{key:"/consultant/bookings",icon:s.jsx(Ft,{}),label:r==="ar"?"الحجوزات":"Bookings"},{key:"/consultant/sessions",icon:s.jsx(Ft,{}),label:r==="ar"?"الجلسات":"Sessions"},{key:"/consultant/chat",icon:s.jsx(Gt,{}),label:r==="ar"?"الرسائل":"Messages"},{key:"/consultant/reports",icon:s.jsx(It,{}),label:r==="ar"?"التقارير":"Reports"},{key:"/consultant/profile",icon:s.jsx(Ee,{}),label:r==="ar"?"الملف الشخصي":"Profile"},{key:"/consultant/earnings",icon:s.jsx(ir,{}),label:r==="ar"?"الأرباح":"Earnings"},{key:"/consultant/support",icon:s.jsx(It,{}),label:r==="ar"?"الدعم الفني":"Support"}],x=[{key:"profile",icon:s.jsx(Ee,{}),label:r==="ar"?"الملف الشخصي":"Profile",onClick:({domEvent:b})=>{b&&(b.stopPropagation(),b.preventDefault()),setTimeout(()=>{f(!1),o("/consultant/profile")},100)}},{key:"settings",icon:s.jsx(Ao,{}),label:r==="ar"?"الإعدادات":"Settings",onClick:({domEvent:b})=>{b&&(b.stopPropagation(),b.preventDefault()),setTimeout(()=>{f(!1),o("/consultant/profile")},100)}},{type:"divider"},{key:"logout",icon:s.jsx(f0,{}),label:r==="ar"?"تسجيل الخروج":"Logout",onClick:({domEvent:b})=>{b&&(b.stopPropagation(),b.preventDefault()),setTimeout(()=>{f(!1),p()},100)}}],g={overflow:"auto",height:"100vh",position:"fixed",top:0,bottom:0,[h?"right":"left"]:0,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",zIndex:1e3},y={transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",[h?"marginRight":"marginLeft"]:c?80:250};return s.jsxs(Je,{className:"min-h-screen",children:[s.jsxs(ST,{trigger:null,collapsible:!0,collapsed:c,width:250,className:"consultant-sidebar bg-gradient-to-b from-white to-gray-50 shadow-2xl border-r border-gray-200",style:g,children:[s.jsx("div",{className:"p-6 flex items-center justify-between border-b border-gray-200",children:s.jsxs("div",{className:`flex items-center gap-3 transition-all duration-300 ${c?"justify-center w-full":""}`,children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-olive-green-600 via-olive-green-500 to-turquoise-500 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300",children:s.jsx("span",{className:"text-white font-bold text-xl",children:"ج"})}),!c&&s.jsxs("div",{className:"animate-fade-in",children:[s.jsx("div",{className:"text-base font-bold text-olive-green-700",children:"Jadwa"}),s.jsx("div",{className:"text-xs text-gray-500",children:"جدوى"})]})]})}),s.jsx(mc,{mode:"inline",selectedKeys:[l.pathname],items:m,onClick:({key:b})=>o(b),className:"border-0 mt-4 px-2",style:{background:"transparent"}}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 px-4",children:s.jsx(P,{type:"text",icon:c?h?s.jsx(bo,{}):s.jsx(jo,{}):h?s.jsx(jo,{}):s.jsx(bo,{}),onClick:()=>d(!c),className:"w-full hover:bg-olive-green-50 text-olive-green-600 border border-olive-green-200 rounded-lg transition-all duration-300",children:!c&&s.jsx("span",{className:"ml-2",children:r==="ar"?"طي":"Collapse"})})})]}),s.jsxs(Je,{style:y,className:"transition-all duration-300",children:[s.jsxs(wT,{className:"bg-white shadow-md px-3 md:px-6 flex items-center justify-between fixed top-0 z-[1001] backdrop-blur-sm bg-white/95",style:{position:"fixed",width:`calc(100% - ${c?80:250}px)`,[h?"right":"left"]:c?80:250,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)"},children:[s.jsx(P,{type:"text",icon:s.jsx($h,{}),onClick:()=>d(!c),className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300",style:{pointerEvents:"auto"}}),s.jsxs("div",{className:"flex items-center gap-2 md:gap-4",style:{pointerEvents:"auto",position:"relative",zIndex:1002},children:[s.jsx(P,{type:"text",icon:s.jsx(va,{}),onClick:n,className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300 font-semibold",title:r==="ar"?"Switch to English":"التبديل إلى العربية",style:{pointerEvents:"auto"},children:r==="ar"?"EN":"AR"}),s.jsx(g0,{userId:a==null?void 0:a.id}),s.jsx(bh,{menu:{items:x},placement:h?"bottomLeft":"bottomRight",trigger:["click"],open:u,destroyTooltipOnHide:!1,transitionName:"",getPopupContainer:()=>document.body,popupRender:b=>s.jsx("div",{onMouseDown:S=>{S.stopPropagation(),S.preventDefault()},onClick:S=>{S.stopPropagation()},children:b}),onOpenChange:b=>{b!==u&&f(b)},children:s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-3 py-2 rounded-lg group",children:[s.jsx(ot,{src:(a==null?void 0:a.avatar)||((j=a==null?void 0:a.consultant)==null?void 0:j.profilePicture),icon:s.jsx(Ee,{}),className:"ring-2 ring-olive-green-200 group-hover:ring-olive-green-400 transition-all duration-300"}),s.jsx("span",{className:"hidden md:inline font-medium text-gray-700",children:a!=null&&a.consultant?`${a.consultant.firstName} ${a.consultant.lastName}`:a==null?void 0:a.email})]})})]})]}),s.jsx(NT,{className:"p-3 md:p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen consultant-content",style:{marginTop:"64px"},children:s.jsx("div",{className:"animate-fade-in",children:t})})]})]})},CT=()=>{const{language:t}=Se(),{user:e}=yr(),r=st(),[n,a]=N.useState(!0),[i,o]=N.useState(null),[l,c]=N.useState({totalSessions:0,pendingSessions:0,completedSessions:0,totalEarnings:0,rating:0,totalRatings:0}),[d,u]=N.useState([]),[f,h]=N.useState([]);N.useEffect(()=>{p()},[]);const p=async()=>{try{a(!0),o(null);const g=await Es.getDashboardStats();c(g.stats),u(g.upcomingSessions||[]),h(g.recentSessions||[])}catch(g){console.error("Error fetching dashboard data:",g),o(g.message||"Failed to load dashboard data")}finally{a(!1)}},m=({title:g,value:y,icon:j,color:b,suffix:S="",subtitle:w=null,delay:v=0})=>s.jsxs(V,{className:"modern-kpi-card card-hover shadow-professional-lg relative overflow-hidden h-full border-0",style:{animationDelay:`${v}s`},styles:{body:{padding:"20px"}},children:[s.jsx("div",{className:`absolute -top-8 -right-8 w-32 h-32 rounded-full ${b} opacity-5 blur-2xl`}),s.jsx("div",{className:`absolute -bottom-6 -left-6 w-24 h-24 rounded-full ${b} opacity-5 blur-xl`}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsx("div",{className:`p-3 rounded-2xl ${b} bg-opacity-10 shadow-sm`,children:s.jsx("div",{className:"text-2xl sm:text-3xl",children:j})})}),s.jsx(Fe,{title:s.jsx("span",{className:"text-gray-600 font-semibold text-xs sm:text-sm uppercase tracking-wide",children:g}),value:y,suffix:S,valueStyle:{color:b.includes("teal")?"#14b8a6":b.includes("olive")?"#7a8c66":b.includes("yellow")?"#faad14":b.includes("green")?"#52c41a":"#1890ff",fontWeight:800,fontSize:"clamp(20px, 4vw, 28px)",lineHeight:1.2}}),w&&s.jsx("div",{className:"mt-3 text-xs text-gray-500 font-medium",children:w})]})]});if(n)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})});if(i)return s.jsx(Mr,{message:t==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:i,type:"error",showIcon:!0,closable:!0,onClose:()=>o(null)});const x=e!=null&&e.consultant?`${e.consultant.firstName||""} ${e.consultant.lastName||""}`.trim():(e==null?void 0:e.email)||(t==="ar"?"المستشار":"Consultant");return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 md:mb-10 relative z-10 px-2 sm:px-0",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?`مرحباً، ${x}`:`Welcome, ${x}`}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"نظرة عامة على أدائك":"Overview of your performance"})]}),s.jsx("div",{className:"text-sm sm:text-base text-gray-700 glass-card px-4 py-3 rounded-xl shadow-professional whitespace-nowrap font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"text-olive-green-600"}),new Date().toLocaleDateString(t==="ar"?"ar-SA":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]}),s.jsxs(le,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx(_,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(m,{title:t==="ar"?"إجمالي الجلسات":"Total Sessions",value:l.totalSessions,icon:s.jsx(Ft,{className:"text-xl sm:text-2xl text-teal-500"}),color:"bg-teal-500",delay:.1})}),s.jsx(_,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(m,{title:t==="ar"?"الجلسات المعلقة":"Pending Sessions",value:l.pendingSessions,icon:s.jsx(Ln,{className:"text-xl sm:text-2xl text-orange-500"}),color:"bg-orange-500",delay:.2})}),s.jsx(_,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(m,{title:t==="ar"?"التقييم":"Rating",value:l.rating,precision:1,icon:s.jsx(Co,{className:"text-xl sm:text-2xl text-yellow-500"}),color:"bg-yellow-500",suffix:"/ 5",subtitle:t==="ar"?`${l.totalRatings} تقييمات`:`${l.totalRatings} ratings`,delay:.3})}),s.jsx(_,{xs:12,sm:12,md:6,lg:6,xl:6,children:s.jsx(m,{title:t==="ar"?"إجمالي الأرباح":"Total Earnings",value:l.totalEarnings,icon:s.jsx(ir,{className:"text-xl sm:text-2xl text-olive-green-600"}),color:"bg-olive-green-600",suffix:t==="ar"?" ريال":" SAR",delay:.4})})]}),s.jsxs(le,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx(_,{xs:24,sm:24,md:24,lg:12,xl:12,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-olive-green-500 to-olive-green-600",children:s.jsx(Ft,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t==="ar"?"الجلسات القادمة":"Upcoming Sessions"})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0 h-full",style:{animationDelay:"0.2s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},extra:d.length>0&&s.jsxs(P,{type:"link",onClick:()=>r("/consultant/sessions"),className:"text-olive-green-600 text-xs sm:text-sm p-0",children:[t==="ar"?"عرض الكل":"View All"," ",s.jsx(Au,{})]}),children:d.length>0?s.jsx(dt,{itemLayout:"horizontal",dataSource:d,renderItem:g=>{var y,j,b,S,w,v;return s.jsx(dt.Item,{className:"hover:bg-gray-50 rounded-lg p-2 sm:p-3 transition-colors",actions:[s.jsx(P,{type:"primary",size:"small",icon:s.jsx(Ba,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 text-xs sm:text-sm",onClick:()=>r(`/consultant/chat/${g.bookingId||g.id}`),children:t==="ar"?"بدء":"Start"})],children:s.jsx(dt.Item.Meta,{avatar:s.jsx(ot,{src:(j=(y=g.client)==null?void 0:y.user)==null?void 0:j.avatar,icon:s.jsx(Ee,{}),size:{xs:40,sm:48}}),title:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 flex-wrap",children:[s.jsxs("span",{className:"font-semibold text-sm sm:text-base",children:[(b=g.client)==null?void 0:b.firstName," ",(S=g.client)==null?void 0:S.lastName]}),s.jsx(ce,{color:"blue",className:"text-xs",children:fe(g.scheduledAt).format("MMM DD, YYYY")})]}),description:s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-600 text-xs sm:text-sm",children:((w=g.service)==null?void 0:w.title)||((v=g.service)==null?void 0:v.titleAr)||"Consultation"}),g.selectedTimeSlot&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.jsx(Ln,{})," ",g.selectedTimeSlot]})]})})})}}):s.jsx(Xt,{description:t==="ar"?"لا توجد جلسات قادمة":"No upcoming sessions",image:Xt.PRESENTED_IMAGE_SIMPLE,className:"py-8"})})}),s.jsx(_,{xs:24,sm:24,md:24,lg:12,xl:12,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-yellow-500 to-yellow-600",children:s.jsx(vc,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t==="ar"?"الجلسات الأخيرة":"Recent Sessions"})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0 h-full",style:{animationDelay:"0.3s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},extra:f.length>0&&s.jsxs(P,{type:"link",onClick:()=>r("/consultant/sessions"),className:"text-olive-green-600 text-xs sm:text-sm p-0",children:[t==="ar"?"عرض الكل":"View All"," ",s.jsx(Au,{})]}),children:f.length>0?s.jsx(dt,{dataSource:f,renderItem:g=>{var y,j,b,S,w,v;return s.jsx(dt.Item,{className:"hover:bg-gray-50 rounded-lg p-2 sm:p-3 transition-colors",children:s.jsx(dt.Item.Meta,{avatar:s.jsx(ot,{src:(j=(y=g.client)==null?void 0:y.user)==null?void 0:j.avatar,icon:s.jsx(Ee,{}),size:{xs:40,sm:48}}),title:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 flex-wrap",children:[s.jsxs("span",{className:"font-semibold text-sm sm:text-base",children:[(b=g.client)==null?void 0:b.firstName," ",(S=g.client)==null?void 0:S.lastName]}),s.jsx(ce,{color:g.status==="COMPLETED"?"green":g.status==="IN_PROGRESS"?"blue":"orange",className:"text-xs",children:g.status==="COMPLETED"?t==="ar"?"مكتملة":"Completed":g.status==="IN_PROGRESS"?t==="ar"?"قيد التنفيذ":"In Progress":g.status})]}),description:s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-600 text-xs sm:text-sm",children:((w=g.service)==null?void 0:w.title)||((v=g.service)==null?void 0:v.titleAr)||"Consultation"}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.jsx(Ln,{})," ",fe(g.createdAt).format("MMM DD, YYYY")]})]})})})}}):s.jsx(Xt,{description:t==="ar"?"لا توجد جلسات حديثة":"No recent sessions",image:Xt.PRESENTED_IMAGE_SIMPLE,className:"py-8"})})})]})]})},{TextArea:gue}=F,kT=()=>{const{t,language:e}=Se(),r=st(),[n,a]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[d,u]=N.useState("all");N.useEffect(()=>{f()},[]);const f=async()=>{try{c(!0);const b=(await Lr.getBookings()).bookings.filter(S=>["CONFIRMED","COMPLETED"].includes(S.status)).map(S=>{var v;const w=S.session||{};return{id:S.id,bookingId:S.id,client:S.client?`${S.client.firstName} ${S.client.lastName}`:e==="ar"?"غير متوفر":"N/A",type:S.service?e==="ar"?S.service.titleAr:S.service.title:e==="ar"?"غير محدد":"Not specified",date:S.scheduledAt?fe(S.scheduledAt).format("YYYY-MM-DD"):"-",time:S.scheduledAt?fe(S.scheduledAt).format("HH:mm"):"-",duration:S.duration||60,status:w.status||((v=S.status)==null?void 0:v.toLowerCase())||"upcoming",sessionId:w.id}});o(b),h(b,d)}catch(y){console.error("Error fetching sessions:",y),R.error(e==="ar"?"فشل تحميل الجلسات":"Failed to load sessions")}finally{c(!1)}},h=(y,j)=>{let b=y;j==="pending"?b=y.filter(S=>S.status==="confirmed"||S.status==="scheduled"||S.status==="upcoming"):j==="in_progress"?b=y.filter(S=>S.status==="in_progress"):j==="completed"&&(b=y.filter(S=>S.status==="completed")),a(b)},p=y=>{u(y),h(i,y)},m=async y=>{var j;try{const b=await Mt.generateVideoRoom(y);await Mt.startSession(y,(j=b.room)==null?void 0:j.roomId),R.success(e==="ar"?"تم بدء الجلسة بنجاح":"Session started successfully"),f(),r(`/consultant/chat/${y}`)}catch(b){R.error(b.message||(e==="ar"?"فشل بدء الجلسة":"Failed to start session"))}},x=[{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client"},{title:e==="ar"?"النوع":"Type",dataIndex:"type",key:"type"},{title:e==="ar"?"التاريخ والوقت":"Date & Time",key:"datetime",render:(y,j)=>`${j.date} - ${j.time}`},{title:e==="ar"?"المدة":"Duration",dataIndex:"duration",key:"duration",render:y=>`${y} ${e==="ar"?"دقيقة":"min"}`},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:y=>{const j={upcoming:"blue",in_progress:"green",completed:"green",cancelled:"red",scheduled:"blue",confirmed:"blue"},b={upcoming:e==="ar"?"قادمة":"Upcoming",in_progress:e==="ar"?"قيد التنفيذ":"In Progress",completed:e==="ar"?"مكتملة":"Completed",cancelled:e==="ar"?"ملغية":"Cancelled",scheduled:e==="ar"?"مجدولة":"Scheduled",confirmed:e==="ar"?"مؤكدة":"Confirmed"};return s.jsx(ce,{color:j[y]||"default",children:b[y]||y})}},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(y,j)=>s.jsxs(he,{children:[(j.status==="upcoming"||j.status==="scheduled"||j.status==="confirmed")&&s.jsx(P,{type:"primary",icon:s.jsx(Ba,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>m(j.bookingId),children:e==="ar"?"بدء الجلسة":"Start Session"}),j.status==="in_progress"&&s.jsx(P,{icon:s.jsx(Gt,{}),onClick:()=>r(`/consultant/chat/${j.bookingId}`),children:e==="ar"?"فتح المحادثة":"Open Chat"}),s.jsx(P,{icon:s.jsx(en,{}),onClick:()=>r(`/consultant/reports?bookingId=${j.bookingId}`),children:e==="ar"?"رفع تقرير":"Upload Report"})]})}],g=[{key:"all",label:e==="ar"?"الكل":"All",icon:s.jsx(It,{})},{key:"pending",label:e==="ar"?"الطلبات الواردة":"Incoming Requests",icon:s.jsx(BE,{})},{key:"in_progress",label:e==="ar"?"قيد التنفيذ":"In Progress",icon:s.jsx(Ba,{})},{key:"completed",label:e==="ar"?"مكتملة":"Completed",icon:s.jsx(vt,{})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"mb-8 relative z-10",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الجلسات":"Sessions"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع جلساتك":"Manage all your sessions"})]}),s.jsxs(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:[s.jsx($s,{activeKey:d,onChange:p,items:g,className:"mb-4"}),s.jsx(rt,{columns:x,dataSource:n,rowKey:"id",loading:l,pagination:{pageSize:10,showSizeChanger:!0,showTotal:y=>e==="ar"?`إجمالي ${y} جلسة`:`Total ${y} sessions`}})]})]})},{authAPI:Fd,consultantAPI:OT,filesAPI:Rv}=Fr,{TextArea:Pl}=F,{Option:Yp}=B,ET=()=>{var g,y;const{t,language:e}=Se(),{theme:r}=yd(),{user:n}=yr(),[a]=E.useForm(),[i,o]=N.useState(!1),[l,c]=N.useState(null),[d,u]=N.useState(!1);N.useEffect(()=>{f()},[]);const f=async()=>{try{o(!0);const j=await Fd.getProfile();if(console.log("Profile response:",j),j.user&&(c(j.user),j.user.consultant)){const b=j.user.consultant;a.setFieldsValue({firstName:b.firstName||"",lastName:b.lastName||"",email:j.user.email||"",phone:j.user.phone||"",academicDegree:b.academicDegree||"",specialization:b.specialization||"",bio:b.bio||"",expertiseFields:b.expertiseFields?typeof b.expertiseFields=="string"?b.expertiseFields:JSON.parse(b.expertiseFields).join(", "):"",city:b.city||"",country:b.country||"Saudi Arabia",address:b.address||"",postalCode:b.postalCode||"",yearsOfExperience:b.yearsOfExperience||0,languages:b.languages?typeof b.languages=="string"?b.languages:JSON.parse(b.languages).join(", "):"",certifications:b.certifications?typeof b.certifications=="string"?b.certifications:JSON.parse(b.certifications).join(", "):"",education:b.education?typeof b.education=="string"?b.education:JSON.parse(b.education).join(", "):"",website:b.website||"",linkedin:b.linkedin||"",twitter:b.twitter||"",pricePerSession:b.pricePerSession||0,dateOfBirth:b.dateOfBirth?fe(b.dateOfBirth):null,gender:b.gender||"",isAvailable:b.isAvailable!==void 0?b.isAvailable:!0})}}catch(j){console.error("Error fetching profile:",j),R.error(j.message||(e==="ar"?"فشل تحميل الملف الشخصي":"Failed to load profile"))}finally{o(!1)}},h=async j=>{var w;const b=Rv||(Fr==null?void 0:Fr.filesAPI);if(!b)return console.error("filesAPI is not defined",{filesAPI:Rv,apiService:Fr}),R.error(e==="ar"?"خطأ في تحميل API":"API loading error"),!1;const S=new FormData;S.append("file",j),S.append("ownerType","USER"),S.append("ownerId",(n==null?void 0:n.id)||"");try{o(!0);const v=await b.uploadFile(S);(w=v.file)!=null&&w.fileUrl&&(await Fd.updateProfile({avatar:v.file.fileUrl}),R.success(e==="ar"?"تم رفع الصورة بنجاح":"Profile picture uploaded successfully"),c(C=>({...C,avatar:v.file.fileUrl})),await f())}catch(v){R.error(v.message||(e==="ar"?"فشل رفع الصورة":"Failed to upload profile picture"))}finally{o(!1)}return!1},p=async j=>{try{o(!0);const b={...j,dateOfBirth:j.dateOfBirth?j.dateOfBirth.toISOString():null,expertiseFields:j.expertiseFields?JSON.stringify(j.expertiseFields.split(",").map(S=>S.trim())):"[]",languages:j.languages?JSON.stringify(j.languages.split(",").map(S=>S.trim())):"[]",certifications:j.certifications?JSON.stringify(j.certifications.split(",").map(S=>S.trim())):"[]",education:j.education?JSON.stringify(j.education.split(",").map(S=>S.trim())):"[]"};j.email&&j.email!==(l==null?void 0:l.email)&&await Fd.updateEmail(j.email),await OT.updateProfile(b),R.success(e==="ar"?"تم حفظ التغييرات بنجاح":"Profile updated successfully"),u(!1),f()}catch(b){R.error(b.message||(e==="ar"?"فشل حفظ التغييرات":"Failed to save changes"))}finally{o(!1)}},m=async j=>{try{o(!0),await Fd.changePassword(j.currentPassword,j.newPassword),R.success(e==="ar"?"تم تغيير كلمة المرور بنجاح":"Password changed successfully"),a.setFieldsValue({currentPassword:"",newPassword:"",confirmPassword:""})}catch(b){R.error(b.message||(e==="ar"?"فشل تغيير كلمة المرور":"Failed to change password"))}finally{o(!1)}},x=l!=null&&l.consultant?{totalSessions:0,completedSessions:0,totalEarnings:l.consultant.totalEarnings||0,rating:l.consultant.rating||0,totalRatings:l.consultant.totalRatings||0}:null;return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 relative z-10",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الملف الشخصي":"Profile Settings"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة معلوماتك الشخصية والمهنية":"Manage your personal and professional information"})]}),s.jsxs(le,{gutter:[24,24],children:[s.jsx(_,{xs:24,md:8,children:s.jsxs(V,{className:"glass-card text-center shadow-professional-xl rounded-2xl border-0",children:[s.jsx(Yt,{showUploadList:!1,beforeUpload:h,accept:"image/*",children:s.jsxs("div",{className:"relative inline-block mb-4",children:[s.jsx(ot,{size:140,src:(l==null?void 0:l.avatar)||(n==null?void 0:n.avatar)||((g=l==null?void 0:l.consultant)==null?void 0:g.profilePicture),icon:s.jsx(Ee,{}),className:"ring-4 ring-olive-green-200"}),s.jsx(P,{type:"primary",shape:"circle",icon:s.jsx(Ih,{}),className:"absolute bottom-0 right-0 shadow-lg",size:"small",style:{backgroundColor:"#7a8c66"}})]})}),s.jsx("h2",{className:`text-2xl font-bold mb-2 ${r==="dark"?"text-white":"text-gray-900"}`,children:l!=null&&l.consultant?`${l.consultant.firstName} ${l.consultant.lastName}`:n==null?void 0:n.email}),s.jsxs("div",{className:"mb-3",children:[s.jsx(ce,{color:"green",className:"mb-2",children:e==="ar"?"مستشار":"Consultant"}),((y=l==null?void 0:l.consultant)==null?void 0:y.isVerified)&&s.jsx(ce,{color:"blue",icon:s.jsx(kS,{}),children:e==="ar"?"موثق":"Verified"})]}),x&&s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsx(Rt,{className:"my-4"}),s.jsxs("div",{className:"text-center mb-4",children:[s.jsx(Ya,{disabled:!0,value:x.rating,allowHalf:!0,className:"text-2xl"}),s.jsxs("div",{className:`mt-2 ${r==="dark"?"text-gray-400":"text-gray-600"}`,children:[x.rating.toFixed(1)," (",x.totalRatings," ",e==="ar"?"تقييم":"ratings",")"]})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{span:12,children:s.jsx(Fe,{title:e==="ar"?"الجلسات":"Sessions",value:x.totalSessions,valueStyle:{fontSize:"18px",color:r==="dark"?"#fff":"#7a8c66"}})}),s.jsx(_,{span:12,children:s.jsx(Fe,{title:e==="ar"?"مكتملة":"Completed",value:x.completedSessions,valueStyle:{fontSize:"18px",color:r==="dark"?"#fff":"#14b8a6"}})})]}),s.jsx(Rt,{className:"my-4"}),s.jsx(Fe,{title:e==="ar"?"إجمالي الأرباح":"Total Earnings",value:x.totalEarnings,prefix:"SAR",valueStyle:{fontSize:"20px",color:r==="dark"?"#fff":"#7a8c66",fontWeight:"bold"}})]})]})}),s.jsx(_,{xs:24,md:16,children:s.jsxs(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:`text-2xl font-bold ${r==="dark"?"text-white":"text-gray-900"}`,children:e==="ar"?"المعلومات الشخصية":"Personal Information"}),s.jsx(P,{icon:d?s.jsx(vt,{}):s.jsx(qr,{}),onClick:()=>u(!d),type:d?"default":"primary",children:d?e==="ar"?"إلغاء":"Cancel":e==="ar"?"تعديل":"Edit"})]}),s.jsxs(E,{form:a,onFinish:p,layout:"vertical",disabled:!d,children:[s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"firstName",label:e==="ar"?"الاسم الأول":"First Name",rules:[{required:!0}],children:s.jsx(F,{size:"large",prefix:s.jsx(Ee,{})})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"lastName",label:e==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0}],children:s.jsx(F,{size:"large",prefix:s.jsx(Ee,{})})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,type:"email"}],children:s.jsx(F,{size:"large",prefix:s.jsx(zn,{}),disabled:!0})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:s.jsx(F,{size:"large",prefix:s.jsx(Ka,{})})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:8,children:s.jsx(E.Item,{name:"dateOfBirth",label:e==="ar"?"تاريخ الميلاد":"Date of Birth",children:s.jsx(Ms,{size:"large",className:"w-full"})})}),s.jsx(_,{xs:24,sm:8,children:s.jsx(E.Item,{name:"gender",label:e==="ar"?"الجنس":"Gender",children:s.jsxs(B,{size:"large",children:[s.jsx(Yp,{value:"MALE",children:e==="ar"?"ذكر":"Male"}),s.jsx(Yp,{value:"FEMALE",children:e==="ar"?"أنثى":"Female"}),s.jsx(Yp,{value:"OTHER",children:e==="ar"?"أخرى":"Other"})]})})})]}),s.jsx(Rt,{children:e==="ar"?"المعلومات المهنية":"Professional Information"}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"academicDegree",label:e==="ar"?"الدرجة العلمية":"Academic Degree",rules:[{required:!0}],children:s.jsx(F,{size:"large",prefix:s.jsx(xc,{})})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"specialization",label:e==="ar"?"التخصص":"Specialization",rules:[{required:!0}],children:s.jsx(F,{size:"large"})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"yearsOfExperience",label:e==="ar"?"سنوات الخبرة":"Years of Experience",children:s.jsx(F,{type:"number",size:"large",min:0})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"pricePerSession",label:e==="ar"?"سعر الجلسة (ريال)":"Price Per Session (SAR)",rules:[{required:!0}],children:s.jsx(F,{type:"number",size:"large",prefix:s.jsx(ir,{}),min:0})})})]}),s.jsx(E.Item,{name:"bio",label:e==="ar"?"السيرة الذاتية":"Bio",children:s.jsx(Pl,{rows:4,size:"large"})}),s.jsx(E.Item,{name:"expertiseFields",label:e==="ar"?"مجالات الخبرة (مفصولة بفواصل)":"Expertise Fields (comma-separated)",children:s.jsx(Pl,{rows:3,size:"large",placeholder:e==="ar"?"مثال: اقتصاد، تحليل مالي، دراسات جدوى":"Example: Economics, Financial Analysis, Feasibility Studies"})}),s.jsx(Rt,{children:e==="ar"?"التعليم والشهادات":"Education & Certifications"}),s.jsx(E.Item,{name:"education",label:e==="ar"?"التعليم (مفصول بفواصل)":"Education (comma-separated)",children:s.jsx(Pl,{rows:2,size:"large",placeholder:e==="ar"?"مثال: بكالوريوس اقتصاد، ماجستير إدارة أعمال":"Example: BSc Economics, MBA"})}),s.jsx(E.Item,{name:"certifications",label:e==="ar"?"الشهادات (مفصولة بفواصل)":"Certifications (comma-separated)",children:s.jsx(Pl,{rows:2,size:"large",placeholder:e==="ar"?"مثال: شهادة محلل مالي معتمد":"Example: Certified Financial Analyst"})}),s.jsx(E.Item,{name:"languages",label:e==="ar"?"اللغات (مفصولة بفواصل)":"Languages (comma-separated)",children:s.jsx(F,{size:"large",placeholder:e==="ar"?"مثال: العربية، الإنجليزية":"Example: Arabic, English"})}),s.jsx(Rt,{children:e==="ar"?"العنوان":"Address"}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"city",label:e==="ar"?"المدينة":"City",children:s.jsx(F,{size:"large",prefix:s.jsx(Mh,{})})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"country",label:e==="ar"?"الدولة":"Country",children:s.jsx(F,{size:"large",prefix:s.jsx(va,{})})})})]}),s.jsx(E.Item,{name:"address",label:e==="ar"?"العنوان الكامل":"Full Address",children:s.jsx(Pl,{rows:3,size:"large"})}),s.jsx(E.Item,{name:"postalCode",label:e==="ar"?"الرمز البريدي":"Postal Code",children:s.jsx(F,{size:"large"})}),s.jsx(Rt,{children:e==="ar"?"روابط التواصل":"Social Links"}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"website",label:e==="ar"?"الموقع الإلكتروني":"Website",children:s.jsx(F,{size:"large",prefix:s.jsx(va,{}),placeholder:"https://"})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"linkedin",label:"LinkedIn",children:s.jsx(F,{size:"large",placeholder:"linkedin.com/in/..."})})})]}),s.jsx(E.Item,{name:"twitter",label:"Twitter",children:s.jsx(F,{size:"large",placeholder:"@username"})}),s.jsx(Rt,{children:e==="ar"?"الحالة":"Status"}),s.jsx(E.Item,{name:"isAvailable",label:e==="ar"?"متاح للاستشارات":"Available for Consultations",valuePropName:"checked",children:s.jsx(Zn,{checkedChildren:e==="ar"?"متاح":"Available",unCheckedChildren:e==="ar"?"غير متاح":"Unavailable"})}),d&&s.jsx(E.Item,{className:"mt-6",children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",icon:s.jsx(Ra,{}),loading:i,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"حفظ التغييرات":"Save Changes"})})]}),s.jsx(Rt,{children:e==="ar"?"تغيير كلمة المرور":"Change Password"}),s.jsxs(E,{onFinish:m,layout:"vertical",children:[s.jsx(E.Item,{name:"currentPassword",label:e==="ar"?"كلمة المرور الحالية":"Current Password",rules:[{required:!0}],children:s.jsx(F.Password,{size:"large",prefix:s.jsx(Jt,{})})}),s.jsx(E.Item,{name:"newPassword",label:e==="ar"?"كلمة المرور الجديدة":"New Password",rules:[{required:!0,min:8}],children:s.jsx(F.Password,{size:"large",prefix:s.jsx(Jt,{})})}),s.jsx(E.Item,{name:"confirmPassword",label:e==="ar"?"تأكيد كلمة المرور":"Confirm Password",dependencies:["newPassword"],rules:[{required:!0},({getFieldValue:j})=>({validator(b,S){return!S||j("newPassword")===S?Promise.resolve():Promise.reject(new Error(e==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match"))}})],children:s.jsx(F.Password,{size:"large",prefix:s.jsx(Jt,{})})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",size:"large",loading:i,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"تغيير كلمة المرور":"Change Password"})})]})]})})]})]})]})},PT=()=>{const{t,language:e}=Se(),{user:r}=yr(),[n]=E.useForm(),[a,i]=N.useState(!1),[o,l]=N.useState(!1),[c,d]=N.useState([]),[u,f]=N.useState(0),[h,p]=N.useState(0),[m,x]=N.useState(0);N.useEffect(()=>{g()},[]);const g=async()=>{try{i(!0);const b=await Es.getEarnings();d(b.earnings||[]),f(b.availableBalance||0),p(b.totalEarnings||0),x(b.pendingEarnings||0)}catch(b){console.error("Error fetching earnings:",b),R.error(b.message||(e==="ar"?"فشل تحميل الأرباح":"Failed to load earnings"))}finally{i(!1)}},y=async b=>{try{i(!0),await Es.requestWithdrawal({amount:b.amount,bankName:b.bankName,accountNumber:b.accountNumber,iban:b.iban}),R.success(e==="ar"?"تم إرسال طلب السحب بنجاح":"Withdrawal request submitted successfully"),l(!1),n.resetFields(),g()}catch(S){R.error(S.message||(e==="ar"?"فشل إرسال طلب السحب":"Failed to submit withdrawal request"))}finally{i(!1)}},j=[{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client"},{title:e==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:b=>`${b} ${e==="ar"?"ريال":"SAR"}`},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:b=>{const S={paid:"green",pending:"orange"},w={paid:e==="ar"?"مدفوع":"Paid",pending:e==="ar"?"قيد الانتظار":"Pending"};return s.jsx(ce,{color:S[b],children:w[b]})}}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"mb-8 relative z-10",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الأرباح":"Earnings"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"عرض تفاصيل أرباحك وإحصائياتك المالية":"View your earnings details and financial statistics"})]}),s.jsxs(le,{gutter:[16,16],className:"mb-8 relative z-10",children:[s.jsx(_,{xs:24,sm:8,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"إجمالي الأرباح":"Total Earnings",value:h||0,prefix:s.jsx(ir,{}),suffix:e==="ar"?"ريال":"SAR",valueStyle:{color:"#14b8a6"}})})}),s.jsx(_,{xs:24,sm:8,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"المتاح للسحب":"Available for Withdrawal",value:u||0,prefix:s.jsx(vt,{}),suffix:e==="ar"?"ريال":"SAR",valueStyle:{color:"#7a8c66"}})})}),s.jsx(_,{xs:24,sm:8,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"قيد الانتظار":"Pending",value:m||0,prefix:s.jsx(Ln,{}),suffix:e==="ar"?"ريال":"SAR",valueStyle:{color:"#faad14"}})})})]}),s.jsx(V,{title:e==="ar"?"سجل الأرباح":"Earnings History",extra:s.jsxs(he,{children:[s.jsx(P,{icon:s.jsx(zr,{}),onClick:()=>console.log("Export PDF"),children:e==="ar"?"تصدير PDF":"Export PDF"}),s.jsx(P,{icon:s.jsx(zr,{}),onClick:()=>console.log("Export Excel"),children:e==="ar"?"تصدير Excel":"Export Excel"}),s.jsx(P,{type:"primary",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>l(!0),disabled:u<=0,children:e==="ar"?"طلب سحب":"Request Payout"})]}),children:s.jsx(rt,{columns:j,dataSource:c,rowKey:"id",loading:a,pagination:{pageSize:10}})}),s.jsx(Ye,{title:e==="ar"?"طلب سحب":"Request Withdrawal",open:o,onCancel:()=>{l(!1),n.resetFields()},footer:null,children:s.jsxs(E,{form:n,layout:"vertical",onFinish:y,children:[s.jsx(E.Item,{name:"amount",label:e==="ar"?"المبلغ":"Amount",rules:[{required:!0,message:e==="ar"?"يرجى إدخال المبلغ":"Please enter amount"},{validator:(b,S)=>S&&parseFloat(S)>u?Promise.reject(new Error(e==="ar"?`المبلغ المتاح: ${u} ريال`:`Available balance: ${u} SAR`)):S&&parseFloat(S)<=0?Promise.reject(new Error(e==="ar"?"المبلغ يجب أن يكون أكبر من صفر":"Amount must be greater than zero")):Promise.resolve()}],children:s.jsx(F,{type:"number",prefix:s.jsx(ir,{}),suffix:e==="ar"?"ريال":"SAR",placeholder:e==="ar"?"أدخل المبلغ":"Enter amount"})}),s.jsx(E.Item,{name:"bankName",label:e==="ar"?"اسم البنك":"Bank Name",rules:[{required:!0,message:e==="ar"?"يرجى إدخال اسم البنك":"Please enter bank name"}],children:s.jsx(F,{placeholder:e==="ar"?"اسم البنك":"Bank Name"})}),s.jsx(E.Item,{name:"accountNumber",label:e==="ar"?"رقم الحساب":"Account Number",rules:[{required:!0,message:e==="ar"?"يرجى إدخال رقم الحساب":"Please enter account number"}],children:s.jsx(F,{placeholder:e==="ar"?"رقم الحساب":"Account Number"})}),s.jsx(E.Item,{name:"iban",label:"IBAN",rules:[{required:!0,message:e==="ar"?"يرجى إدخال IBAN":"Please enter IBAN"}],children:s.jsx(F,{placeholder:"IBAN"})}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{onClick:()=>{l(!1),n.resetFields()},children:e==="ar"?"إلغاء":"Cancel"}),s.jsx(P,{type:"primary",htmlType:"submit",loading:a,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"إرسال الطلب":"Submit Request"})]})})]})})]})},{TextArea:Dv}=F,{Option:Ks}=B,TT=()=>{var w;const{language:t}=Se(),[e,r]=N.useState([]),[n,a]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[d,u]=N.useState(null),[f,h]=N.useState(!1),[p]=E.useForm(),[m]=E.useForm();N.useEffect(()=>{x()},[]);const x=async()=>{try{a(!0);const v=await nn.getMyTickets();r(v.tickets||[])}catch{R.error(t==="ar"?"فشل تحميل التذاكر":"Failed to load tickets")}finally{a(!1)}},g=async v=>{try{await nn.createTicket(v),R.success(t==="ar"?"تم إنشاء التذكرة بنجاح":"Ticket created successfully"),o(!1),p.resetFields(),x()}catch{R.error(t==="ar"?"فشل إنشاء التذكرة":"Failed to create ticket")}},y=async v=>{try{if(await nn.addComment(d.id,v.content),R.success(t==="ar"?"تم إضافة التعليق":"Comment added"),h(!1),m.resetFields(),x(),l){const C=await nn.getTicketById(d.id);u(C.ticket)}}catch{R.error(t==="ar"?"فشل إضافة التعليق":"Failed to add comment")}},j=v=>({OPEN:"blue",IN_PROGRESS:"orange",RESOLVED:"green",CLOSED:"default"})[v]||"default",b=v=>({LOW:"default",MEDIUM:"blue",HIGH:"orange",URGENT:"red"})[v]||"default",S=[{title:t==="ar"?"رقم التذكرة":"Ticket Number",dataIndex:"ticketNumber",key:"ticketNumber"},{title:t==="ar"?"الموضوع":"Subject",dataIndex:"subject",key:"subject"},{title:t==="ar"?"الفئة":"Category",dataIndex:"category",key:"category",render:v=>v||"-"},{title:t==="ar"?"الأولوية":"Priority",dataIndex:"priority",key:"priority",render:v=>s.jsx(ce,{color:b(v),children:v})},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:v=>s.jsx(ce,{color:j(v),children:v})},{title:t==="ar"?"تاريخ الإنشاء":"Created At",dataIndex:"createdAt",key:"createdAt",render:v=>fe(v).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"الإجراءات":"Actions",key:"actions",render:(v,C)=>s.jsx(he,{children:s.jsx(P,{icon:s.jsx(mr,{}),size:"small",onClick:()=>{u(C),c(!0)},children:t==="ar"?"عرض":"View"})})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?"تذاكر الدعم الفني":"Support Tickets"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"إنشاء ومتابعة تذاكر الدعم الفني":"Create and track support tickets"})]}),s.jsx(P,{type:"primary",size:"large",icon:s.jsx($r,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-professional",onClick:()=>o(!0),children:t==="ar"?"إنشاء تذكرة جديدة":"Create New Ticket"})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:S,dataSource:e,loading:n,rowKey:"id",locale:{emptyText:s.jsx(Xt,{description:t==="ar"?"لا توجد تذاكر":"No tickets"})}})}),s.jsx(Ye,{title:t==="ar"?"إنشاء تذكرة جديدة":"Create New Ticket",open:i,onCancel:()=>{o(!1),p.resetFields()},footer:null,width:600,className:"modern-modal",children:s.jsxs(E,{form:p,layout:"vertical",onFinish:g,children:[s.jsx(E.Item,{name:"subject",label:t==="ar"?"الموضوع":"Subject",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال الموضوع":"Please enter subject"}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"category",label:t==="ar"?"الفئة":"Category",children:s.jsxs(B,{children:[s.jsx(Ks,{value:"technical",children:t==="ar"?"تقني":"Technical"}),s.jsx(Ks,{value:"billing",children:t==="ar"?"مالي":"Billing"}),s.jsx(Ks,{value:"general",children:t==="ar"?"عام":"General"})]})}),s.jsx(E.Item,{name:"priority",label:t==="ar"?"الأولوية":"Priority",initialValue:"MEDIUM",children:s.jsxs(B,{children:[s.jsx(Ks,{value:"LOW",children:t==="ar"?"منخفضة":"Low"}),s.jsx(Ks,{value:"MEDIUM",children:t==="ar"?"متوسطة":"Medium"}),s.jsx(Ks,{value:"HIGH",children:t==="ar"?"عالية":"High"}),s.jsx(Ks,{value:"URGENT",children:t==="ar"?"عاجلة":"Urgent"})]})}),s.jsx(E.Item,{name:"description",label:t==="ar"?"الوصف":"Description",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال الوصف":"Please enter description"}],children:s.jsx(Dv,{rows:6})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"إنشاء التذكرة":"Create Ticket"})})]})}),s.jsx(Ye,{title:t==="ar"?"تفاصيل التذكرة":"Ticket Details",open:l,onCancel:()=>{c(!1),u(null)},footer:null,width:800,className:"modern-modal",children:d&&s.jsxs("div",{children:[s.jsxs(be,{bordered:!0,column:2,children:[s.jsx(be.Item,{label:t==="ar"?"رقم التذكرة":"Ticket Number",children:d.ticketNumber}),s.jsx(be.Item,{label:t==="ar"?"الحالة":"Status",children:s.jsx(ce,{color:j(d.status),children:d.status})}),s.jsx(be.Item,{label:t==="ar"?"الأولوية":"Priority",children:s.jsx(ce,{color:b(d.priority),children:d.priority})}),s.jsx(be.Item,{label:t==="ar"?"الفئة":"Category",children:d.category||"-"}),s.jsx(be.Item,{label:t==="ar"?"الموضوع":"Subject",span:2,children:d.subject}),s.jsx(be.Item,{label:t==="ar"?"الوصف":"Description",span:2,children:d.description})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:t==="ar"?"التعليقات":"Comments"}),s.jsx(P,{type:"primary",icon:s.jsx(Gt,{}),onClick:()=>h(!0),children:t==="ar"?"إضافة تعليق":"Add Comment"})]}),s.jsx(l0,{items:((w=d.comments)==null?void 0:w.map(v=>{var C;return{key:v.id,children:s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"font-semibold",children:(C=v.user)==null?void 0:C.email}),s.jsx("span",{className:"text-gray-500 text-sm",children:fe(v.createdAt).format("YYYY-MM-DD HH:mm")})]}),s.jsx("p",{children:v.comment||v.content})]})}}))||[]}),(!d.comments||d.comments.length===0)&&s.jsx(Xt,{description:t==="ar"?"لا توجد تعليقات":"No comments"})]})]})}),s.jsx(Ye,{title:t==="ar"?"إضافة تعليق":"Add Comment",open:f,onCancel:()=>{h(!1),m.resetFields()},footer:null,className:"modern-modal",children:s.jsxs(E,{form:m,layout:"vertical",onFinish:y,children:[s.jsx(E.Item,{name:"content",label:t==="ar"?"التعليق":"Comment",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال التعليق":"Please enter comment"}],children:s.jsx(Dv,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"إضافة التعليق":"Add Comment"})})]})})]})},{TextArea:IT}=F,Gp=()=>{var kl;const{sessionId:t,bookingId:e}=Aa(),r=e||t,n=!!t&&!e,{t:a,language:i}=Se(),{user:o}=yr(),l=st(),[c,d]=N.useState([]),[u,f]=N.useState(""),[h,p]=N.useState(!0),[m,x]=N.useState(!1),[g,y]=N.useState([]),[j,b]=N.useState(!1),[S,w]=N.useState(null),[v,C]=N.useState(null),[A,k]=N.useState(null),[O,$]=N.useState([]),[M,T]=N.useState([]),[I,z]=N.useState(!1),[U,Y]=N.useState(!1),[Z,te]=N.useState(!1),[q,ne]=N.useState(null),[H,Q]=N.useState(!1),de=N.useRef(null),ie=N.useRef(!1),Re=N.useRef(null),Ae=N.useRef(!1),je=N.useRef(null),X=N.useRef(new Set),{isRecording:ye,recordingTime:Ne,audioBlob:ee,audioUrl:Qe,startRecording:L,stopRecording:oe,cancelRecording:pe,formatTime:Ge}=x0();N.useEffect(()=>{o&&o.role!=="CONSULTANT"&&(R.error(i==="ar"?"غير مصرح لك بالوصول إلى هذه الصفحة":"You are not authorized to access this page"),o.role==="CLIENT"?l("/client",{replace:!0}):["ADMIN","SUPER_ADMIN"].includes(o.role)?l("/admin",{replace:!0}):l("/",{replace:!0}))},[o,l,i]),N.useEffect(()=>{if(Re.current!==r&&(ie.current=!1,Ae.current=!1,je.current=null,te(!1),Re.current=r),Y(!1),r&&o){if(X.current.has(r)){ie.current||(ie.current=!0,te(!0),p(!1),Ae.current=!1,je.current=null,setTimeout(()=>{l("/consultant/chat",{replace:!0})},0));return}const W=je.current&&je.current!==r;if(ie.current||Z||W){p(!1);return}je.current!==r&&(je.current=r,Ae.current=!0,it())}else r||(p(!1),Y(!1),te(!1),ie.current=!1,Ae.current=!1,je.current=null,ns(),Hs())},[r,o]),N.useEffect(()=>{if(Z)return;if((S==null?void 0:S.id)||r&&n&&U){wt();const Ue=setInterval(wt,5e3);return()=>clearInterval(Ue)}},[S==null?void 0:S.id,r,n,U,Z]),N.useEffect(()=>{if(!r){const W=setInterval(()=>{Hs()},1e4);return()=>clearInterval(W)}},[r]),N.useEffect(()=>{ut()},[c]);const ut=()=>{var W;(W=de.current)==null||W.scrollIntoView({behavior:"smooth"})},it=async()=>{var W,Ue,De,tt,lt,pt,kt,Ie,mt,ia,Hi,Wi,qi,dn,Jr,Cr,kr,as,Pd,Td,Ol,Id,cr,Nn;if(X.current.has(r)){ie.current||(ie.current=!0,te(!0),p(!1),Ae.current=!1,je.current=null,setTimeout(()=>{l("/consultant/chat",{replace:!0})},0));return}if(ie.current||Z){Ae.current=!1,je.current=null;return}if(!r||!o){p(!1),Ae.current=!1,je.current=null;return}if(!(je.current&&je.current!==r)){Ae.current=!0,je.current=r,Ae.current=!0;try{let Dr=n;if(!n)try{const Me=(W=(await $t.getConversations()).conversations)==null?void 0:W.find(Le=>Le.sessionId===r||Le.isDirect&&Le.id===r);Me&&(Me.isDirect||Me.sessionId===r)&&(Dr=!0)}catch(ue){console.warn("Could not fetch conversations to verify session type:",ue)}if(Dr){try{const Me=(Ue=(await $t.getConversations()).conversations)==null?void 0:Ue.find(Le=>Le.sessionId===r);if(Me)w({id:r,status:Me.status||"IN_PROGRESS",sessionType:"chat"}),C(null),ne(Me),Y(!0);else try{await $t.getMessages(r),w({id:r,status:"IN_PROGRESS",sessionType:"chat"}),C(null),Y(!0)}catch(Le){if((De=Le.message)!=null&&De.includes("not found")||(tt=Le.message)!=null&&tt.includes("404")||(lt=Le.message)!=null&&lt.includes("Access denied")||(pt=Le.message)!=null&&pt.includes("403")){Y(!1),te(!0),R.error(i==="ar"?"الجلسة غير موجودة أو غير مصرح لك بالوصول":"Session not found or access denied"),l("/consultant/chat",{replace:!0});return}else throw Le}}catch(ue){console.error("Error fetching direct session:",ue),!((kt=ue.message)!=null&&kt.includes("not found"))&&!((Ie=ue.message)!=null&&Ie.includes("404"))&&!((mt=ue.message)!=null&&mt.includes("Access denied"))&&!((ia=ue.message)!=null&&ia.includes("403"))&&R.error(i==="ar"?"فشل تحميل الجلسة":"Failed to load session"),l("/consultant/chat",{replace:!0})}finally{p(!1),Ae.current=!1}return}let K=!1;try{const Me=(Hi=(await $t.getConversations()).conversations)==null?void 0:Hi.find(Le=>Le.sessionId===r||Le.isDirect&&Le.id===r);if(Me&&(Me.isDirect||Me.sessionId===r)){K=!0,w({id:r,status:Me.status||"IN_PROGRESS",sessionType:"chat"}),C(null),ne(Me),Y(!0),p(!1),Ae.current=!1,je.current=null;return}}catch{}let Oe;try{Oe=(await Lr.getBookingById(r)).booking}catch(ue){if(ue.status===404||((Wi=ue.response)==null?void 0:Wi.status)===404||((qi=ue.message)==null?void 0:qi.toLowerCase().includes("not found"))||((dn=ue.message)==null?void 0:dn.includes("404"))){if(X.current.add(r),ie.current){p(!1),Ae.current=!1,je.current=null;return}ie.current=!0,te(!0),p(!1),Ae.current=!1,je.current=null,l("/consultant/chat",{replace:!0});return}throw ue}if((o==null?void 0:o.role)==="CONSULTANT"&&((Jr=Oe.consultant)==null?void 0:Jr.userId)!==o.id){if(ie.current){p(!1),Ae.current=!1;return}ie.current=!0,R.error(i==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),te(!0),p(!1),Ae.current=!1,l("/consultant/chat",{replace:!0});return}C(Oe);try{const ue=await Mt.getSessionByBooking(r);if(w(ue.session),Y(!0),(Cr=ue.session)!=null&&Cr.roomId){const Me=await Mt.getVideoRoom(r);k(Me.room)}}catch{console.log("Session not found yet, will be created when starting"),w(null),Y(!0)}Ae.current=!1,je.current=null,X.current.delete(r)}catch(Dr){const K=Dr.message||((as=(kr=Dr.response)==null?void 0:kr.data)==null?void 0:as.error)||(i==="ar"?"فشل تحميل الجلسة":"Failed to load session"),Oe=((Pd=Dr.message)==null?void 0:Pd.toLowerCase().includes("not found"))||((Td=Dr.message)==null?void 0:Td.includes("404"))||((Ol=Dr.response)==null?void 0:Ol.status)===404,ue=((Id=Dr.message)==null?void 0:Id.includes("Access denied"))||((cr=Dr.message)==null?void 0:cr.includes("403"))||((Nn=Dr.response)==null?void 0:Nn.status)===403;if(Oe){if(ie.current){p(!1),Ae.current=!1;return}ie.current=!0,te(!0),p(!1),Ae.current=!1,l("/consultant/chat",{replace:!0});return}if(ue){if(ie.current){p(!1),Ae.current=!1;return}ie.current=!0,R.error(i==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),te(!0),p(!1),Ae.current=!1,l("/consultant/chat",{replace:!0});return}console.error("Error fetching session:",Dr),R.error(K),p(!1)}finally{Ae.current=!1,je.current=null,!Z&&!ie.current&&p(!1)}}},wt=async()=>{var W,Ue,De,tt;if(!(Z||!(S!=null&&S.id)&&!(r&&n&&U)))try{const lt=(S==null?void 0:S.id)||r;if(!lt)return;const pt=await $t.getMessages(lt);if(d(pt.messages||[]),!U&&pt.messages&&Y(!0),pt.messages&&pt.messages.length>0)try{await $t.markAsRead(lt)}catch(kt){console.error("Error marking messages as read:",kt)}setTimeout(()=>{var kt;(kt=de.current)==null||kt.scrollIntoView({behavior:"smooth"})},100)}catch(lt){const pt=((W=lt.message)==null?void 0:W.includes("Access denied"))||((Ue=lt.message)==null?void 0:Ue.includes("403")),kt=((De=lt.message)==null?void 0:De.includes("not found"))||((tt=lt.message)==null?void 0:tt.includes("404"));if(pt){te(!0),d([]);return}if(kt){d([]);return}console.error("Error fetching messages:",lt),d([])}},_t=async()=>{var Ue;const W=(S==null?void 0:S.id)||(n?r:null);if(!(!u.trim()&&g.length===0||!W)){if(!(S!=null&&S.id)&&!n&&r)try{const De=await Mt.generateVideoRoom(r),tt=await Mt.startSession(r,(Ue=De.room)==null?void 0:Ue.roomId);w(tt.session),k(De.room)}catch(De){R.error(De.message||(i==="ar"?"فشل بدء الجلسة":"Failed to start session"));return}try{x(!0);let De="text";if(g.length>0){const pt=g.some(mt=>/\.(jpg|jpeg|png|gif|webp)$/i.test(mt)),kt=g.some(mt=>/\.(mp3|wav|ogg|m4a|webm)$/i.test(mt)),Ie=g.some(mt=>/\.(mp4|webm|ogg)$/i.test(mt));pt?De="image":kt?De="audio":Ie?De="video":De="file"}const tt=(S==null?void 0:S.id)||W,lt={content:u||(g.length>0?"📎 ملف مرفق":""),messageType:De,attachments:g.length>0?g:[]};if(n&&q){let pt=null;q.clientId&&q.clientId!==(o==null?void 0:o.id)?pt=q.clientId:q.consultantUserId&&q.consultantUserId!==(o==null?void 0:o.id)&&(pt=q.consultantUserId),pt&&(lt.receiverId=pt)}await $t.sendMessage(tt,lt),f(""),y([]),n&&!(S!=null&&S.id)&&w({id:tt,status:"IN_PROGRESS",sessionType:"chat"}),wt()}catch(De){R.error(De.message||(i==="ar"?"فشل إرسال الرسالة":"Failed to send message"))}finally{x(!1)}}},St=async()=>{ye?oe():await L()},Xe=async()=>{if(!ee)return;const W=(S==null?void 0:S.id)||(n?r:null);if(!W){R.error(i==="ar"?"لا توجد جلسة نشطة":"No active session"),pe();return}try{x(!0);const Ue=new File([ee],`voice-${Date.now()}.webm`,{type:"audio/webm"}),De=new FormData;De.append("file",Ue),De.append("ownerType","MESSAGE"),De.append("ownerId",W);const tt=await ra.uploadFile(De);if(!tt||!tt.file||!tt.file.fileUrl)throw new Error("Invalid file response from server");const lt=tt.file.fileUrl,pt=(S==null?void 0:S.id)||W,kt={content:i==="ar"?"رسالة صوتية":"Voice message",messageType:"audio",attachments:[lt]};if(n&&q){let Ie=null;q.clientId&&q.clientId!==(o==null?void 0:o.id)?Ie=q.clientId:q.consultantUserId&&q.consultantUserId!==(o==null?void 0:o.id)&&(Ie=q.consultantUserId),Ie&&(kt.receiverId=Ie)}await $t.sendMessage(pt,kt),pe(),wt(),R.success(i==="ar"?"تم إرسال الرسالة الصوتية":"Voice message sent")}catch(Ue){console.error("Error sending voice message:",Ue),R.error(Ue.message||(i==="ar"?"فشل إرسال الرسالة الصوتية":"Failed to send voice message"))}finally{x(!1)}},Sn=async W=>{const Ue=(S==null?void 0:S.id)||(n?r:null);if(!Ue)return R.error(i==="ar"?"لا توجد جلسة نشطة":"No active session"),!1;try{const De=new FormData;De.append("file",W),De.append("ownerType","MESSAGE"),De.append("ownerId",Ue);const tt=await ra.uploadFile(De);if(!tt||!tt.file||!tt.file.fileUrl)throw new Error("Invalid file response from server");const lt=[...g,tt.file.fileUrl];y(lt),R.success(i==="ar"?"تم رفع الملف":"File uploaded")}catch(De){console.error("File upload error:",De),R.error(De.message||(i==="ar"?"فشل رفع الملف":"Failed to upload file"))}return!1},Ar=async()=>{if(r)try{p(!0);let W=A;W||(W=(await Mt.generateVideoRoom(r)).room,k(W),R.success(i==="ar"?"تم إنشاء غرفة الفيديو":"Video room created")),await Mt.startSession(r,W==null?void 0:W.roomId),R.success(i==="ar"?"تم بدء الجلسة":"Session started"),W!=null&&W.joinUrl?window.open(W.joinUrl,"JitsiMeet","width=1200,height=800,menubar=no,toolbar=no,location=no,status=no,resizable=yes,scrollbars=yes")?(Q(!0),R.success(i==="ar"?"تم فتح المكالمة في نافذة جديدة":"Video call opened in new window")):(Q(!0),R.info(i==="ar"?'تم فتح المكالمة في النافذة المنبثقة. إذا لم تفتح، استخدم زر "فتح في نافذة جديدة"':'Video call opened. If popup was blocked, use "Open in New Window" button')):R.warning(i==="ar"?"لم يتم العثور على رابط المكالمة":"Video call URL not found"),it()}catch(W){console.error("Video call error:",W),R.error(W.message||(i==="ar"?"فشل بدء المكالمة":"Failed to start video call"))}finally{p(!1)}},Cl=async()=>{if(r)try{await Mt.endSession(r),R.success(i==="ar"?"تم إنهاء الجلسة":"Session ended successfully"),l("/consultant/chat")}catch(W){R.error(W.message||(i==="ar"?"فشل إنهاء الجلسة":"Failed to end session"))}},ns=async()=>{try{z(!0);const W=await Lr.getBookings({status:"CONFIRMED"});$(W.bookings||[])}catch(W){console.error("Error fetching bookings:",W)}finally{z(!1)}},Hs=async()=>{try{const W=await $t.getConversations();T(W.conversations||[])}catch(W){console.error("Error fetching conversations:",W)}},cn=W=>{l(`/consultant/chat/${W}`)};if(h)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})});if(!r)return s.jsxs("div",{className:"flex h-[calc(100vh-200px)] gap-4",children:[s.jsx("div",{className:"w-1/3 min-w-[300px]",children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gt,{}),s.jsx("span",{children:i==="ar"?"المحادثات والحجوزات":"Conversations & Bookings"})]}),className:"h-full",styles:{body:{padding:0,height:"calc(100% - 57px)",overflow:"auto"}},children:I?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(et,{size:"large"})}):M.length===0&&O.length===0?s.jsx(Xt,{description:i==="ar"?"لا توجد محادثات أو حجوزات":"No conversations or bookings",className:"py-12"}):s.jsxs("div",{children:[M.length>0&&s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h3",{className:"font-semibold text-sm text-gray-600 mb-2",children:i==="ar"?"المحادثات النشطة":"Active Conversations"}),s.jsx(dt,{dataSource:M,renderItem:W=>{const Ue=W.unreadCount||0;return s.jsx(dt.Item,{className:"cursor-pointer hover:bg-gray-50 px-4 py-3 border-b",onClick:()=>cn(W.bookingId||W.sessionId),children:s.jsx(dt.Item.Meta,{avatar:s.jsx(Ga,{count:Ue,size:"small",children:s.jsx(ot,{icon:s.jsx(Ee,{})})}),title:s.jsx("span",{className:"font-medium",children:W.name}),description:s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 truncate",children:W.lastMessage||(i==="ar"?"لا توجد رسائل":"No messages")}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:fe(W.lastMessageTime).fromNow()})]})})})}})]}),O.length>0&&s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-sm text-gray-600 mb-2",children:i==="ar"?"الحجوزات المتاحة":"Available Bookings"}),s.jsx(dt,{dataSource:O,renderItem:W=>{const Ue=M.some(De=>De.bookingId===W.id);return s.jsx(dt.Item,{className:`cursor-pointer hover:bg-gray-50 px-4 py-3 border-b ${Ue?"opacity-75":""}`,onClick:()=>cn(W.id),children:s.jsx(dt.Item.Meta,{avatar:s.jsx(ot,{icon:s.jsx(Ee,{})}),title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:W.client?`${W.client.firstName} ${W.client.lastName}`:i==="ar"?"عميل":"Client"}),s.jsx(ce,{color:W.status==="CONFIRMED"?"green":"blue",size:"small",children:W.status})]}),description:s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:W.service?i==="ar"?W.service.titleAr:W.service.title:i==="ar"?"استشارة":"Consultation"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:fe(W.scheduledAt).format("YYYY-MM-DD HH:mm")})]})})})}})]})]})})}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center py-12 px-6",children:[s.jsx("div",{className:"mb-6",children:s.jsx(Gt,{className:"text-7xl text-gray-300"})}),s.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700",children:i==="ar"?"اختر محادثة للبدء":"Select a Conversation to Start"}),s.jsx("p",{className:"text-gray-500 max-w-md mx-auto text-base",children:i==="ar"?"اختر محادثة من القائمة الجانبية للبدء في الدردشة مع العميل":"Select a conversation from the sidebar to start chatting with the client"})]})})]});const Lt=v==null?void 0:v.client;return!v&&r&&!n&&!U&&h?s.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)] dashboard-bg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(et,{size:"large"}),s.jsx("p",{className:"mt-4 text-gray-500",children:i==="ar"?"جاري التحميل...":"Loading..."})]})}):n&&!U&&!Z&&h?s.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)] dashboard-bg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(et,{size:"large"}),s.jsx("p",{className:"mt-4 text-gray-500",children:i==="ar"?"جاري التحميل...":"Loading..."})]})}):r&&!v&&!n&&!h&&!U?s.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)] dashboard-bg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Xt,{description:i==="ar"?"لم يتم العثور على المحادثة":"Conversation not found"}),s.jsx(P,{type:"primary",onClick:()=>l("/consultant/chat"),className:"mt-4",children:i==="ar"?"العودة إلى المحادثات":"Back to Conversations"})]})}):n&&!U&&!h&&!Z?s.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)] dashboard-bg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Xt,{description:i==="ar"?"لم يتم العثور على المحادثة":"Conversation not found"}),s.jsx(P,{type:"primary",onClick:()=>l("/consultant/chat"),className:"mt-4",children:i==="ar"?"العودة إلى المحادثات":"Back to Conversations"})]})}):s.jsxs("div",{className:"flex h-[calc(100vh-64px)] gap-4 dashboard-bg relative",style:{margin:"-12px -12px 0 -12px",width:"calc(100% + 24px)"},children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/20 to-turquoise-100/20 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/20 to-olive-green-100/20 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"w-1/3 min-w-[300px] max-w-[400px] glass-card border-r border-gray-200/50 flex flex-col shadow-professional-lg relative z-10",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200/50 backdrop-blur-sm flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gt,{className:"text-olive-green-600"}),s.jsx("span",{className:"font-semibold text-gray-900",children:i==="ar"?"المحادثات":"Conversations"})]}),s.jsx(P,{type:"text",size:"small",onClick:()=>l("/consultant/chat"),className:"text-gray-500 hover:text-gray-700",children:i==="ar"?"عرض الكل":"View All"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:I?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(et,{size:"small"})}):s.jsx(dt,{className:"px-0",dataSource:[...M.map(W=>({...W,type:"conversation"})),...O.filter(W=>!M.some(Ue=>Ue.bookingId===W.id)).map(W=>({...W,type:"booking"}))],renderItem:W=>{const Ue=W.id===r||W.bookingId===r||W.id===(v==null?void 0:v.id),De=W.unreadCount||0,tt=W.type==="conversation"?W.name:W.client?`${W.client.firstName} ${W.client.lastName}`:i==="ar"?"عميل":"Client";return s.jsx(dt.Item,{className:`cursor-pointer px-4 py-3 border-b border-gray-100  ${Ue?"bg-olive-green-50 border-l-4 border-l-olive-green-600":"hover:bg-gray-50"}`,onClick:()=>cn(W.bookingId||W.id),children:s.jsx(dt.Item.Meta,{avatar:s.jsx(Ga,{count:De>0?De:0,size:"small",offset:[-5,5],showZero:!1,children:s.jsx(ot,{icon:s.jsx(Ee,{}),size:48,className:"shadow-sm"})}),title:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:`font-semibold text-sm ${Ue?"text-olive-green-700":"text-gray-900"}`,children:tt}),W.status&&s.jsx(ce,{color:W.status==="CONFIRMED"?"green":W.status==="IN_PROGRESS"?"blue":"default",size:"small",className:"text-xs",children:W.status})]}),description:s.jsxs("div",{className:"mt-1",children:[s.jsx("p",{className:"text-xs text-gray-600 truncate mb-1",children:W.lastMessage||(W.service?i==="ar"?W.service.titleAr:W.service.title:i==="ar"?"استشارة":"Consultation")}),s.jsx("p",{className:"text-xs text-gray-400",children:W.lastMessageTime?fe(W.lastMessageTime).fromNow():W.scheduledAt?fe(W.scheduledAt).format("MMM DD, HH:mm"):""})]})})})}})})]}),s.jsx("div",{className:"flex-1 flex flex-col glass-card overflow-hidden shadow-professional-lg relative z-10",children:(r&&!n&&!v&&!U||n&&!U&&!Z)&&h?s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(et,{size:"large"}),s.jsx("p",{className:"mt-4 text-gray-500",children:i==="ar"?"جاري تحميل المحادثة...":"Loading conversation..."})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"border-b border-gray-200/50 px-4 py-3 flex items-center justify-between shadow-professional z-10 sticky top-0 flex-shrink-0 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(ot,{src:n?q==null?void 0:q.avatar:((kl=Lt==null?void 0:Lt.user)==null?void 0:kl.avatar)||(Lt==null?void 0:Lt.profilePicture),size:40,icon:s.jsx(Ee,{}),className:"flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-base font-semibold text-gray-900 truncate",children:n?(q==null?void 0:q.name)||(q==null?void 0:q.clientName)||(q==null?void 0:q.consultantName)||(i==="ar"?"المستخدم":"User"):Lt?`${Lt.firstName} ${Lt.lastName}`:i==="ar"?"العميل":"Client"}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:n?i==="ar"?"محادثة مباشرة":"Direct Message":v!=null&&v.service?i==="ar"?v.service.titleAr:v.service.title:i==="ar"?"استشارة":"Consultation"})]})]}),s.jsxs(he,{className:"flex-shrink-0",children:[s.jsx(P,{type:"text",icon:s.jsx(Ps,{}),className:"text-gray-600 hover:text-gray-900",onClick:Ar,disabled:(S==null?void 0:S.status)==="COMPLETED"||n,title:i==="ar"?"مكالمة فيديو":"Video Call"}),(S==null?void 0:S.status)==="IN_PROGRESS"&&!n&&s.jsx(P,{type:"text",danger:!0,onClick:Cl,title:i==="ar"?"إنهاء الجلسة":"End Session",children:i==="ar"?"إنهاء":"End"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 min-h-0",style:{scrollBehavior:"smooth",backgroundImage:"radial-gradient(circle, rgba(122, 140, 102, 0.1) 1px, transparent 1px)",backgroundSize:"20px 20px"},children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-3",children:[c.length===0?s.jsxs("div",{className:"text-center text-gray-400 py-12",children:[s.jsx("div",{className:"text-4xl mb-2",children:"💬"}),s.jsx("p",{children:i==="ar"?"لا توجد رسائل بعد":"No messages yet"})]}):c.map((W,Ue)=>{var kt;const De=W.senderId===(o==null?void 0:o.id),tt=W.attachments?typeof W.attachments=="string"?JSON.parse(W.attachments):W.attachments:[],lt=Ue>0?c[Ue-1]:null;!lt||(lt.senderId,W.senderId);const pt=!lt||fe(W.createdAt).diff(fe(lt.createdAt),"minute")>5;return s.jsxs("div",{className:`flex ${De?"justify-end":"justify-start"} items-end gap-2 ${pt?"mt-4":""}`,children:[!De&&s.jsx(ot,{src:n?q==null?void 0:q.avatar:((kt=Lt==null?void 0:Lt.user)==null?void 0:kt.avatar)||(Lt==null?void 0:Lt.profilePicture),size:32,icon:s.jsx(Ee,{}),className:"flex-shrink-0"}),s.jsxs("div",{className:`flex flex-col ${De?"items-end":"items-start"} max-w-[70%] md:max-w-[60%]`,children:[pt&&s.jsx("div",{className:"text-center w-full mb-2",children:s.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:fe(W.createdAt).format("MMM DD, YYYY HH:mm")})}),s.jsxs("div",{className:`rounded-2xl px-4 py-2 ${De?"bg-[#dcf8c6] text-gray-900 rounded-tr-sm":"bg-white text-gray-900 rounded-tl-sm shadow-sm"}`,children:[tt.length>0&&s.jsx("div",{className:"mb-2 space-y-2",children:tt.map((Ie,mt)=>{const ia=Ie.startsWith("data:image/")||Ie.startsWith("data:video/")||Ie.startsWith("data:audio/"),Hi=W.messageType==="image"||/\.(jpg|jpeg|png|gif|webp)$/i.test(Ie)||ia&&Ie.startsWith("data:image/"),Wi=W.messageType==="audio"||/\.(mp3|wav|ogg|m4a|webm)$/i.test(Ie)||ia&&Ie.startsWith("data:audio/"),qi=W.messageType==="video"||/\.(mp4|webm)$/i.test(Ie)&&W.messageType!=="audio"||ia&&Ie.startsWith("data:video/");if(Hi)return s.jsx("div",{className:"image-attachment mb-2 -mx-2",children:ia?s.jsx("img",{src:Ie,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},onError:dn=>{const Jr=dn.target;if(Jr){Jr.style.display="none";const Cr=Jr.closest(".image-attachment");if(Cr&&!Cr.querySelector(".image-error-fallback")){const kr=document.createElement("div");kr.className="image-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",kr.textContent=i==="ar"?"تعذر تحميل الصورة":"Image unavailable",Cr.appendChild(kr)}}}}):s.jsx(Hn,{src:Ie.startsWith("http")?Ie:Ie.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Ie}`:Ie.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Ie}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Ie.split("/").pop()}`,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},preview:{mask:i==="ar"?"معاينة":"Preview"},onError:dn=>{const Jr=dn.target;if(Jr){Jr.style.display="none";const Cr=Jr.closest(".image-attachment");if(Cr&&!Cr.querySelector(".image-error-fallback")){const kr=document.createElement("div");kr.className="image-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",kr.textContent=i==="ar"?"تعذر تحميل الصورة":"Image unavailable",Cr.appendChild(kr)}}}},mt)},mt);if(Wi){const dn=Ie.startsWith("http")?Ie:Ie.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Ie}`:Ie.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Ie}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Ie.split("/").pop()}`;return s.jsx("div",{className:"audio-attachment",children:s.jsx(y0,{src:dn,isOwnMessage:De,language:i})},mt)}else if(qi){const dn=Ie.startsWith("http")?Ie:Ie.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Ie}`:Ie.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Ie}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Ie.split("/").pop()}`;return s.jsx("div",{className:"video-attachment",children:s.jsx("video",{controls:!0,src:dn,className:"w-full max-w-md rounded",onError:Jr=>{const Cr=Jr.target;if(Cr){Cr.style.display="none";const kr=Cr.closest(".video-attachment");if(kr&&!kr.querySelector(".video-error-fallback")){const as=document.createElement("div");as.className="video-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",as.textContent=i==="ar"?"تعذر تحميل الفيديو":"Video unavailable",kr.appendChild(as)}}}})},mt)}else return s.jsxs("div",{className:`file-attachment flex items-center gap-2 p-2 rounded ${De?"bg-white/50":"bg-gray-100"}`,children:[s.jsx(wo,{className:De?"text-gray-700":"text-blue-600"}),s.jsx("a",{href:Ie,download:!0,target:"_blank",rel:"noopener noreferrer",className:`text-sm ${De?"text-gray-700 hover:text-gray-900":"text-blue-600 hover:text-blue-800"}`,children:Ie.split("/").pop()})]},mt)})}),W.content&&W.content.trim()&&!(W.messageType==="image"&&tt.length>0&&!W.content.includes("📎"))&&s.jsx("p",{className:`text-sm ${tt.length>0?"mt-2":""} whitespace-pre-wrap break-words`,children:W.content}),s.jsx("span",{className:`text-xs mt-1 ${De?"text-gray-600":"text-gray-500"} self-end`,children:fe(W.createdAt).format("HH:mm")})]})]}),De&&s.jsx(ot,{src:o==null?void 0:o.avatar,size:32,icon:s.jsx(Ee,{}),className:"flex-shrink-0"})]},W.id)}),s.jsx("div",{ref:de})]})}),g.length>0&&s.jsx("div",{className:"mb-3 pb-3 border-b border-gray-200 px-4",children:s.jsx("div",{className:"flex flex-wrap gap-3",children:g.map((W,Ue)=>{const De=/\.(jpg|jpeg|png|gif|webp)$/i.test(W),tt=/\.(mp4|webm|ogg)$/i.test(W),lt=/\.(mp3|wav|ogg|m4a|webm)$/i.test(W),pt=W.split("/").pop(),kt=W.startsWith("http")?W:W.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${W}`:W.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${W}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${W.split("/").pop()}`;return s.jsx("div",{className:"relative group",children:De?s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm",children:[s.jsx(Hn,{src:kt,alt:pt,width:200,height:200,className:"object-cover",preview:!1,onError:Ie=>{console.error("Image failed to load:",kt),Ie.target.style.display="none"}}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Tr,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>y(g.filter((Ie,mt)=>mt!==Ue))})]}):tt?s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm w-[200px]",children:[s.jsx("video",{src:kt,className:"w-full h-[150px] object-cover",controls:!1,muted:!0,onError:Ie=>{console.error("Video failed to load:",kt)}}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:s.jsx(Ps,{className:"text-white text-2xl"})}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Tr,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>y(g.filter((Ie,mt)=>mt!==Ue))})]}):lt?s.jsxs("div",{className:"relative rounded-lg border border-gray-200 shadow-sm bg-gray-50 p-3 min-w-[200px]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(No,{className:"text-gray-600 text-lg"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs text-gray-600 truncate",children:pt}),s.jsx("audio",{src:kt,controls:!0,className:"w-full mt-1",preload:"metadata"})]})]}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Tr,{}),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center",onClick:()=>y(g.filter((Ie,mt)=>mt!==Ue))})]}):s.jsxs("div",{className:"relative flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 shadow-sm min-w-[200px]",children:[s.jsx(wo,{className:"text-gray-600 text-xl"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-gray-700 truncate font-medium",children:pt}),s.jsx("p",{className:"text-xs text-gray-500",children:i==="ar"?"ملف":"File"})]}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Tr,{}),className:"bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center flex-shrink-0",onClick:()=>y(g.filter((Ie,mt)=>mt!==Ue))})]})},Ue)})})}),Qe&&!ye&&s.jsxs("div",{className:"p-3 bg-blue-50 border-t border-blue-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("audio",{src:Qe,controls:!0,className:"max-w-xs"}),s.jsx("span",{className:"text-sm text-gray-600",children:Ge(Ne)})]}),s.jsxs(he,{children:[s.jsx(P,{type:"primary",size:"small",onClick:Xe,loading:m,children:i==="ar"?"إرسال":"Send"}),s.jsx(P,{size:"small",icon:s.jsx(Tr,{}),onClick:pe})]})]}),ye&&s.jsxs("div",{className:"p-3 bg-red-50 border-t border-red-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsxs("span",{className:"text-red-600 font-semibold",children:[i==="ar"?"جاري التسجيل...":"Recording..."," ",Ge(Ne)]})]}),s.jsx(P,{danger:!0,size:"small",icon:s.jsx(ko,{}),onClick:oe,children:i==="ar"?"إيقاف":"Stop"})]}),s.jsxs("div",{className:"border-t border-gray-200/50 px-4 py-3 shadow-professional backdrop-blur-sm flex-shrink-0 bg-white/80",children:[s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx(Yt,{showUploadList:!1,beforeUpload:Sn,accept:"image/*,audio/*,video/*,.pdf,.doc,.docx",multiple:!0,children:s.jsx(P,{icon:s.jsx(o0,{}),type:"text",className:"text-gray-600 hover:text-gray-900",size:"large"})}),s.jsx(P,{type:ye?"primary":"text",danger:ye,icon:ye?s.jsx(h0,{}):s.jsx(No,{}),onClick:St,disabled:(S==null?void 0:S.status)==="COMPLETED",title:i==="ar"?"تسجيل صوتي":"Voice recording",className:ye?"":"text-gray-600 hover:text-gray-900",size:"large"}),s.jsx(P,{icon:s.jsx(m0,{}),onClick:()=>b(!j),type:"text",className:`text-gray-600 hover:text-gray-900 ${j?"bg-gray-100":""}`,size:"large"}),s.jsx("div",{className:"flex-1 relative",children:s.jsx(IT,{value:u,onChange:W=>f(W.target.value),placeholder:i==="ar"?"اكتب رسالتك...":"Type your message...",rows:1,autoSize:{minRows:1,maxRows:4},variant:"borderless",disabled:(S==null?void 0:S.status)==="COMPLETED"||ye,onPressEnter:W=>{W.shiftKey||(W.preventDefault(),_t())},style:{resize:"none",borderRadius:"24px",padding:"10px 16px",backgroundColor:"#f0f0f0",border:"none",fontSize:"14px"}})}),s.jsx(P,{type:"primary",icon:s.jsx(p0,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 rounded-full",onClick:_t,loading:m,disabled:!u.trim()&&g.length===0||(S==null?void 0:S.status)==="COMPLETED",size:"large",shape:"circle"})]}),j&&s.jsx("div",{className:"p-3 bg-white border-t border-gray-200 max-h-48 overflow-y-auto shadow-inner",children:s.jsx("div",{className:"grid grid-cols-8 gap-1",children:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃"].map(W=>s.jsx(P,{type:"text",className:"text-xl p-1",onClick:()=>{f(Ue=>Ue+W),b(!1)},children:W},W))})})]})]})}),s.jsx(Ye,{title:i==="ar"?"مكالمة فيديو - Jitsi Meet":"Video Call - Jitsi Meet",open:H,onCancel:()=>Q(!1),footer:[s.jsx(P,{onClick:()=>Q(!1),children:i==="ar"?"إغلاق":"Close"},"close"),s.jsx(P,{type:"primary",onClick:()=>{A!=null&&A.joinUrl&&window.open(A.joinUrl,"_blank","width=1200,height=800")},children:i==="ar"?"فتح في نافذة جديدة":"Open in New Window"},"openNew")],width:"90%",style:{top:20},styles:{body:{height:"80vh",padding:0}},destroyOnHidden:!0,children:A!=null&&A.joinUrl?s.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",padding:"20px"},children:[s.jsx("p",{style:{fontSize:"16px",color:"#666",textAlign:"center"},children:i==="ar"?'لأفضل تجربة، يرجى استخدام زر "فتح في نافذة جديدة" لفتح المكالمة':'For the best experience, please use the "Open in New Window" button to open the call'}),s.jsx(P,{type:"primary",size:"large",onClick:()=>{A!=null&&A.joinUrl&&window.open(A.joinUrl,"_blank","width=1200,height=800")},children:i==="ar"?"فتح المكالمة في نافذة جديدة":"Open Call in New Window"}),s.jsx("div",{style:{width:"100%",height:"70%",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},children:s.jsx("iframe",{src:A.joinUrl,allow:"camera; microphone; fullscreen; speaker; display-capture; autoplay",style:{width:"100%",height:"100%",border:"none"},title:"Jitsi Meet Video Call",allowFullScreen:!0})})]}):s.jsx("div",{style:{padding:"20px",textAlign:"center"},children:s.jsx("p",{children:i==="ar"?"لا يوجد رابط للمكالمة":"No call URL available"})})})]})},MT=()=>{const{t,language:e}=Se(),r=st(),[n,a]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState("all");N.useEffect(()=>{d()},[l]);const d=async()=>{try{o(!0);const p={};l!=="all"&&(p.status=l);const x=(await Lr.getBookings(p)).bookings.map(g=>({id:g.id,client:g.client?`${g.client.firstName} ${g.client.lastName}`:e==="ar"?"غير متوفر":"N/A",service:g.service?e==="ar"?g.service.titleAr:g.service.title:e==="ar"?"غير محدد":"Not specified",date:g.scheduledAt?fe(g.scheduledAt).format("YYYY-MM-DD HH:mm"):"-",status:g.status,price:g.price,bookingType:g.bookingType}));a(x)}catch(p){console.error("Error fetching bookings:",p),R.error(e==="ar"?"فشل تحميل الحجوزات":"Failed to load bookings")}finally{o(!1)}},u=async(p,m)=>{try{await Lr.updateBookingStatus(p,m),R.success(e==="ar"?"تم تحديث الحالة بنجاح":"Status updated successfully"),d()}catch(x){R.error(x.message||(e==="ar"?"فشل تحديث الحالة":"Failed to update status"))}},f=async p=>{var m;try{const x=await Mt.generateVideoRoom(p);await Mt.startSession(p,(m=x.room)==null?void 0:m.roomId),R.success(e==="ar"?"تم بدء الجلسة بنجاح":"Session started successfully"),d(),r(`/consultant/chat/${p}`)}catch(x){R.error(x.message||(e==="ar"?"فشل بدء الجلسة":"Failed to start session"))}},h=[{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client"},{title:e==="ar"?"الخدمة":"Service",dataIndex:"service",key:"service"},{title:e==="ar"?"التاريخ والوقت":"Date & Time",dataIndex:"date",key:"date"},{title:e==="ar"?"المبلغ":"Amount",dataIndex:"price",key:"price",render:p=>p?`${p} ${e==="ar"?"ريال":"SAR"}`:"-"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:p=>{const m={PENDING:"orange",CONFIRMED:"blue",IN_PROGRESS:"green",COMPLETED:"green",CANCELLED:"red"},x={PENDING:e==="ar"?"قيد الانتظار":"Pending",CONFIRMED:e==="ar"?"مؤكد":"Confirmed",IN_PROGRESS:e==="ar"?"قيد التنفيذ":"In Progress",COMPLETED:e==="ar"?"مكتمل":"Completed",CANCELLED:e==="ar"?"ملغي":"Cancelled"};return s.jsx(ce,{color:m[p],children:x[p]||p})}},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(p,m)=>s.jsxs(he,{children:[s.jsx(P,{icon:s.jsx(Gt,{}),onClick:()=>r(`/consultant/chat/${m.id}`),children:e==="ar"?"محادثة":"Chat"}),m.status==="PENDING"&&s.jsxs(s.Fragment,{children:[s.jsx(P,{type:"primary",icon:s.jsx(vt,{}),className:"bg-green-600",onClick:()=>u(m.id,"CONFIRMED"),children:e==="ar"?"قبول":"Accept"}),s.jsx(P,{danger:!0,icon:s.jsx(yc,{}),onClick:()=>u(m.id,"CANCELLED"),children:e==="ar"?"رفض":"Reject"})]}),m.status==="CONFIRMED"&&s.jsx(P,{type:"primary",className:"bg-olive-green-600",onClick:()=>f(m.id),children:e==="ar"?"بدء الجلسة":"Start Session"})]})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الحجوزات":"Bookings"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع حجوزات الاستشارات":"Manage all consultation bookings"})]}),s.jsxs(B,{value:l,onChange:c,style:{width:200},size:"large",children:[s.jsx(B.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(B.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),s.jsx(B.Option,{value:"CONFIRMED",children:e==="ar"?"مؤكد":"Confirmed"}),s.jsx(B.Option,{value:"IN_PROGRESS",children:e==="ar"?"قيد التنفيذ":"In Progress"}),s.jsx(B.Option,{value:"COMPLETED",children:e==="ar"?"مكتمل":"Completed"})]})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:h,dataSource:n,rowKey:"id",loading:i,pagination:{pageSize:10,showSizeChanger:!0,showTotal:p=>e==="ar"?`إجمالي ${p} حجز`:`Total ${p} bookings`}})})]})},{Text:_v,Paragraph:$T}=fd,{TextArea:RT}=F,DT=()=>{const{t,language:e}=Se(),[r,n]=N.useState([]),[a,i]=N.useState([]),[o,l]=N.useState(!0),[c,d]=N.useState(!1),[u,f]=N.useState(!1),[h,p]=N.useState(null),[m,x]=N.useState(null),[g]=E.useForm();N.useEffect(()=>{y(),j()},[]);const y=async()=>{try{l(!0);const v=(await Nu.getReports()).reports.map(C=>({id:C.id,title:C.title,client:C.client?`${C.client.firstName} ${C.client.lastName}`:e==="ar"?"غير متوفر":"N/A",date:fe(C.createdAt).format("YYYY-MM-DD"),status:C.status,reportType:C.reportType,pdfUrl:C.pdfUrl,wordUrl:C.wordUrl}));n(v)}catch(w){console.error("Error fetching reports:",w),R.error(e==="ar"?"فشل تحميل التقارير":"Failed to load reports")}finally{l(!1)}},j=async()=>{try{const w=await Lr.getBookings({status:"COMPLETED"});i((w.bookings||[]).filter(v=>!v.report))}catch(w){console.error("Error fetching bookings:",w)}},b=async w=>{try{if(!h&&!w.bookingId){R.error(e==="ar"?"يرجى اختيار حجز":"Please select a booking");return}const v=(h==null?void 0:h.id)||w.bookingId,C=new FormData;w.pdf&&w.pdf.fileList&&w.pdf.fileList[0]&&C.append("pdf",w.pdf.fileList[0].originFileObj),w.word&&w.word.fileList&&w.word.fileList[0]&&C.append("word",w.word.fileList[0].originFileObj),C.append("bookingId",v),C.append("title",w.title),C.append("reportType",w.reportType),w.summary&&C.append("summary",w.summary),await Nu.uploadReport(C),R.success(e==="ar"?"تم رفع التقرير بنجاح":"Report uploaded successfully"),d(!1),g.resetFields(),p(null),y(),j()}catch(v){R.error(v.message||(e==="ar"?"فشل رفع التقرير":"Failed to upload report"))}},S=[{title:e==="ar"?"عنوان التقرير":"Report Title",dataIndex:"title",key:"title"},{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client"},{title:e==="ar"?"النوع":"Type",dataIndex:"reportType",key:"reportType"},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:w=>{const v={UNDER_REVIEW:"orange",APPROVED:"green",REJECTED:"red"},C={UNDER_REVIEW:e==="ar"?"قيد المراجعة":"Under Review",APPROVED:e==="ar"?"موافق عليه":"Approved",REJECTED:e==="ar"?"مرفوض":"Rejected"},A={UNDER_REVIEW:s.jsx(Ln,{}),APPROVED:s.jsx(vt,{}),REJECTED:s.jsx(yc,{})};return s.jsx(ce,{color:v[w],icon:A[w],children:C[w]||w})}},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(w,v)=>s.jsxs(he,{children:[s.jsx(P,{icon:s.jsx(mr,{}),onClick:()=>{x(v),f(!0)},children:e==="ar"?"معاينة":"Preview"}),v.pdfUrl&&s.jsx(P,{icon:s.jsx(zr,{}),onClick:()=>window.open(v.pdfUrl,"_blank"),children:"PDF"}),v.wordUrl&&s.jsx(P,{icon:s.jsx(zr,{}),onClick:()=>window.open(v.wordUrl,"_blank"),children:"Word"})]})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"التقارير":"Reports"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة وتحميل التقارير":"Manage and upload reports"})]}),s.jsx(P,{type:"primary",size:"large",icon:s.jsx($r,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-professional",onClick:()=>{g.resetFields(),d(!0)},children:e==="ar"?"رفع تقرير جديد":"Upload New Report"})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:S,dataSource:r,rowKey:"id",loading:o,pagination:{pageSize:10,showSizeChanger:!0,showTotal:w=>e==="ar"?`إجمالي ${w} تقرير`:`Total ${w} reports`}})}),s.jsx(Ye,{title:e==="ar"?"رفع تقرير جديد":"Upload New Report",open:c,onCancel:()=>{d(!1),g.resetFields()},footer:null,width:700,children:s.jsxs(E,{form:g,layout:"vertical",onFinish:b,children:[s.jsx(E.Item,{name:"bookingId",label:e==="ar"?"اختر الحجز":"Select Booking",rules:[{required:!0,message:e==="ar"?"يرجى اختيار حجز":"Please select a booking"}],children:s.jsx(B,{placeholder:e==="ar"?"اختر الحجز":"Select booking",onChange:w=>{const v=a.find(C=>C.id===w);p(v),g.setFieldValue("bookingId",w)},children:a.map(w=>s.jsxs(B.Option,{value:w.id,children:[w.client?`${w.client.firstName} ${w.client.lastName}`:w.id," - ",w.service?e==="ar"?w.service.titleAr:w.service.title:""]},w.id))})}),s.jsx(E.Item,{name:"title",label:e==="ar"?"عنوان التقرير":"Report Title",rules:[{required:!0}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"reportType",label:e==="ar"?"نوع التقرير":"Report Type",rules:[{required:!0}],children:s.jsxs(B,{children:[s.jsx(B.Option,{value:"FEASIBILITY_STUDY",children:e==="ar"?"دراسة جدوى":"Feasibility Study"}),s.jsx(B.Option,{value:"ECONOMIC_ANALYSIS",children:e==="ar"?"تحليل اقتصادي":"Economic Analysis"}),s.jsx(B.Option,{value:"FINANCIAL_REPORT",children:e==="ar"?"تقرير مالي":"Financial Report"}),s.jsx(B.Option,{value:"CONSULTATION_SUMMARY",children:e==="ar"?"ملخص استشارة":"Consultation Summary"})]})}),s.jsx(E.Item,{name:"summary",label:e==="ar"?"ملخص التقرير":"Report Summary",children:s.jsx(RT,{rows:4})}),s.jsx(E.Item,{name:"pdf",label:e==="ar"?"ملف PDF":"PDF File",rules:[{required:!0,message:e==="ar"?"يرجى رفع ملف PDF":"Please upload PDF file"}],valuePropName:"fileList",getValueFromEvent:w=>Array.isArray(w)?w:w==null?void 0:w.fileList,children:s.jsx(Yt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf",children:s.jsx(P,{icon:s.jsx(en,{}),children:e==="ar"?"اختر ملف PDF":"Select PDF File"})})}),s.jsx(E.Item,{name:"word",label:e==="ar"?"ملف Word (اختياري)":"Word File (Optional)",valuePropName:"fileList",getValueFromEvent:w=>Array.isArray(w)?w:w==null?void 0:w.fileList,children:s.jsx(Yt,{beforeUpload:()=>!1,maxCount:1,accept:".doc,.docx",children:s.jsx(P,{icon:s.jsx(en,{}),children:e==="ar"?"اختر ملف Word":"Select Word File"})})}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"رفع":"Upload"}),s.jsx(P,{onClick:()=>{d(!1),g.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),s.jsx(Ye,{title:e==="ar"?"معاينة التقرير":"Report Preview",open:u,onCancel:()=>{f(!1),x(null)},footer:[s.jsx(P,{onClick:()=>{f(!1),x(null)},children:e==="ar"?"إغلاق":"Close"},"close"),(m==null?void 0:m.pdfUrl)&&s.jsx(P,{type:"primary",icon:s.jsx(zr,{}),onClick:()=>window.open(m.pdfUrl,"_blank"),children:e==="ar"?"تحميل PDF":"Download PDF"},"pdf"),(m==null?void 0:m.wordUrl)&&s.jsx(P,{icon:s.jsx(zr,{}),onClick:()=>window.open(m.wordUrl,"_blank"),children:e==="ar"?"تحميل Word":"Download Word"},"word")],width:800,children:m&&s.jsxs("div",{children:[s.jsxs(be,{bordered:!0,column:2,className:"mb-4",children:[s.jsx(be.Item,{label:e==="ar"?"عنوان التقرير":"Report Title",span:2,children:s.jsx(_v,{strong:!0,children:m.title})}),s.jsx(be.Item,{label:e==="ar"?"العميل":"Client",children:m.client}),s.jsx(be.Item,{label:e==="ar"?"نوع التقرير":"Report Type",children:m.reportType}),s.jsx(be.Item,{label:e==="ar"?"التاريخ":"Date",children:m.date}),s.jsx(be.Item,{label:e==="ar"?"الحالة":"Status",span:2,children:s.jsx(ce,{color:m.status==="APPROVED"?"green":m.status==="REJECTED"?"red":"orange",icon:m.status==="APPROVED"?s.jsx(vt,{}):m.status==="REJECTED"?s.jsx(yc,{}):s.jsx(Ln,{}),children:m.status==="UNDER_REVIEW"?e==="ar"?"قيد المراجعة":"Under Review":m.status==="APPROVED"?e==="ar"?"موافق عليه":"Approved":e==="ar"?"مرفوض":"Rejected"})})]}),m.pdfUrl&&s.jsxs("div",{className:"mt-4",children:[s.jsx(_v,{strong:!0,className:"block mb-2",children:e==="ar"?"معاينة PDF:":"PDF Preview:"}),s.jsx("iframe",{src:m.pdfUrl,style:{width:"100%",height:"500px",border:"1px solid #d9d9d9"},title:"PDF Preview"})]}),!m.pdfUrl&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(It,{style:{fontSize:"48px",marginBottom:"16px"}}),s.jsx($T,{children:e==="ar"?"لا توجد معاينة متاحة":"No preview available"})]})]})})]})},_T=()=>s.jsx(AT,{children:s.jsxs(yh,{children:[s.jsx(we,{path:"/",element:s.jsx(CT,{})}),s.jsx(we,{path:"/sessions",element:s.jsx(kT,{})}),s.jsx(we,{path:"/bookings",element:s.jsx(MT,{})}),s.jsx(we,{path:"/chat/:bookingId?",element:s.jsx(Gp,{})}),s.jsx(we,{path:"/chat/session/:sessionId",element:s.jsx(Gp,{})}),s.jsx(we,{path:"/sessions/:sessionId",element:s.jsx(Gp,{})}),s.jsx(we,{path:"/reports",element:s.jsx(DT,{})}),s.jsx(we,{path:"/profile",element:s.jsx(ET,{})}),s.jsx(we,{path:"/earnings",element:s.jsx(PT,{})}),s.jsx(we,{path:"/support",element:s.jsx(TT,{})}),s.jsx(we,{path:"*",element:s.jsx(Kn,{to:"/consultant",replace:!0})})]})}),{Header:LT,Sider:zT,Content:FT}=Je,BT=({children:t})=>{var S,w,v;const{t:e,language:r,toggleLanguage:n}=Se(),{theme:a,settings:i}=yd(),{user:o,logout:l}=yr(),c=st(),d=dl(),[u,f]=N.useState(!1),[h,p]=N.useState(!1),m=r==="ar";N.useEffect(()=>{const C=document.querySelector(".admin-content");C&&(C.classList.add("fade-in"),setTimeout(()=>{C.classList.remove("fade-in")},500))},[d.pathname]);const x=()=>{l(),c("/login",{replace:!0})},g=[{key:"/admin",icon:s.jsx(qS,{}),label:r==="ar"?"لوحة التحكم":"Dashboard"},{key:"/admin/clients",icon:s.jsx(Ee,{}),label:r==="ar"?"العملاء":"Clients"},{key:"/admin/consultants",icon:s.jsx(Mn,{}),label:r==="ar"?"المستشارون":"Consultants"},{key:"/admin/sessions",icon:s.jsx(Ft,{}),label:r==="ar"?"الجلسات":"Sessions"},{key:"/admin/payments",icon:s.jsx(ir,{}),label:r==="ar"?"المدفوعات":"Payments"},{key:"/admin/articles",icon:s.jsx(xc,{}),label:r==="ar"?"المقالات":"Articles"},{key:"/admin/services",icon:s.jsx(So,{}),label:r==="ar"?"الخدمات":"Services"},{key:"/admin/reports",icon:s.jsx(It,{}),label:r==="ar"?"التقارير":"Reports"},{key:"/admin/partners",icon:s.jsx(Mn,{}),label:r==="ar"?"الشركاء":"Partners"},{key:"/admin/categories",icon:s.jsx(So,{}),label:r==="ar"?"الفئات":"Categories"},{key:"/admin/monitoring",icon:s.jsx(gc,{}),label:r==="ar"?"المراقبة":"Monitoring"},{key:"/admin/chat",icon:s.jsx(Gt,{}),label:r==="ar"?"المحادثات":"Chat"},{key:"/admin/support",icon:s.jsx(It,{}),label:r==="ar"?"الدعم الفني":"Support"},{key:"/admin/permissions",icon:s.jsx(Ee,{}),label:r==="ar"?"الصلاحيات":"Permissions"},{key:"/admin/settings",icon:s.jsx(Ao,{}),label:r==="ar"?"الإعدادات":"Settings"}],y=[{key:"profile",icon:s.jsx(Ee,{}),label:r==="ar"?"الملف الشخصي":"Profile",onClick:({domEvent:C})=>{C&&(C.stopPropagation(),C.preventDefault()),setTimeout(()=>{p(!1),c("/admin/profile")},100)}},{key:"settings",icon:s.jsx(Ao,{}),label:r==="ar"?"الإعدادات":"Settings",onClick:({domEvent:C})=>{C&&(C.stopPropagation(),C.preventDefault()),setTimeout(()=>{p(!1),c("/admin/settings")},100)}},{type:"divider"},{key:"logout",icon:s.jsx(f0,{}),label:r==="ar"?"تسجيل الخروج":"Logout",onClick:({domEvent:C})=>{C&&(C.stopPropagation(),C.preventDefault()),setTimeout(()=>{p(!1),x()},100)}}],j={overflow:"auto",height:"100vh",position:"fixed",top:0,bottom:0,[m?"right":"left"]:0,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",zIndex:1e3},b={transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",[m?"marginRight":"marginLeft"]:u?80:250};return s.jsxs(Je,{className:"min-h-screen",children:[s.jsxs(zT,{trigger:null,collapsible:!0,collapsed:u,width:250,className:"admin-sidebar bg-gradient-to-b from-white to-gray-50 shadow-2xl border-r border-gray-200",style:j,children:[s.jsx("div",{className:`p-6 flex items-center justify-between border-b ${a==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-gradient-to-r from-white to-gray-50"}`,children:s.jsxs("div",{className:`flex items-center gap-3 transition-all duration-300 ${u?"justify-center w-full":""}`,children:[i.logo?s.jsx("img",{src:i.logo,alt:"Logo",className:`${u?"w-15 h-12":"h-10"} object-contain cursor-pointer transition-all duration-300`,onClick:()=>c("/admin")}):s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-olive-green-600 via-olive-green-500 to-turquoise-500 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300 cursor-pointer",onClick:()=>c("/admin"),style:{backgroundColor:i.primaryColor},children:s.jsx("span",{className:"text-white font-bold text-xl",children:r==="ar"?((S=i.dashboardNameAr)==null?void 0:S[0])||"ج":((w=i.dashboardName)==null?void 0:w[0])||"J"})}),!u&&s.jsx("div",{className:"animate-fade-in cursor-pointer",onClick:()=>c("/admin"),children:s.jsx("div",{className:`text-xs ${a==="dark"?"text-gray-400":"text-gray-500"}`})})]})}),s.jsx(mc,{mode:"inline",selectedKeys:[d.pathname],items:g,onClick:({key:C})=>c(C),className:"border-0 mt-4 px-2 admin-menu",style:{background:"transparent"}}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 px-4",children:s.jsx(P,{type:"text",icon:u?m?s.jsx(bo,{}):s.jsx(jo,{}):m?s.jsx(jo,{}):s.jsx(bo,{}),onClick:()=>f(!u),className:"w-full hover:bg-olive-green-50 text-olive-green-600 border border-olive-green-200 rounded-lg transition-all duration-300",children:!u&&s.jsx("span",{className:"ml-2",children:r==="ar"?"طي":"Collapse"})})})]}),s.jsxs(Je,{style:b,className:"transition-all duration-300",children:[s.jsxs(LT,{className:"bg-white shadow-professional-lg px-6 flex items-center justify-between fixed top-0 z-[1001] backdrop-blur-sm bg-white/95 glass-effect",style:{position:"fixed",width:`calc(100% - ${u?80:250}px)`,[m?"right":"left"]:u?80:250,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)"},children:[s.jsx(P,{type:"text",icon:s.jsx($h,{}),onClick:()=>f(!u),className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300",style:{pointerEvents:"auto"}}),s.jsx(F,{placeholder:r==="ar"?"بحث...":"Search...",prefix:s.jsx(ya,{className:"text-gray-400"}),className:"max-w-md mx-4 rounded-lg border-gray-200 focus:border-olive-green-500 transition-all duration-300",allowClear:!0,style:{pointerEvents:"auto"}}),s.jsxs("div",{className:"flex items-center gap-4",style:{pointerEvents:"auto",position:"relative",zIndex:1002},children:[s.jsx(P,{type:"text",icon:s.jsx(va,{}),onClick:n,className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300 font-semibold",title:r==="ar"?"Switch to English":"التبديل إلى العربية",style:{pointerEvents:"auto"},children:r==="ar"?"EN":"AR"}),s.jsx(g0,{userId:o==null?void 0:o.id}),s.jsx(P,{type:"text",icon:s.jsx(Gt,{}),className:"text-lg hover:bg-olive-green-50 text-gray-600 rounded-lg transition-all duration-300",style:{pointerEvents:"auto"}}),s.jsx(bh,{menu:{items:y},placement:m?"bottomLeft":"bottomRight",trigger:["click"],open:h,destroyTooltipOnHide:!1,transitionName:"",getPopupContainer:()=>document.body,popupRender:C=>s.jsx("div",{onMouseDown:A=>{A.stopPropagation(),A.preventDefault()},onClick:A=>{A.stopPropagation()},children:C}),onOpenChange:C=>{C!==h&&p(C)},children:s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-3 py-2 rounded-lg group",children:[s.jsx(ot,{src:(o==null?void 0:o.avatar)||((v=o==null?void 0:o.admin)==null?void 0:v.profilePicture),icon:s.jsx(Ee,{}),className:"ring-2 ring-olive-green-200 group-hover:ring-olive-green-400 transition-all duration-300"}),s.jsx("span",{className:"hidden md:inline font-medium text-gray-700",children:o!=null&&o.admin?`${o.admin.firstName} ${o.admin.lastName}`:(o==null?void 0:o.email)||(r==="ar"?"المدير":"Admin")})]})})]})]}),s.jsx(FT,{className:"p-3 md:p-6 bg-gradient-to-br from-gray-50 via-white to-gray-50 min-h-screen admin-content",style:{marginTop:"64px"},children:s.jsx("div",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:t})})]})]})};function QS(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=QS(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function He(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=QS(t))&&(n&&(n+=" "),n+=e);return n}var UT=Array.isArray,on=UT,VT=typeof Hl=="object"&&Hl&&Hl.Object===Object&&Hl,ZS=VT,HT=ZS,WT=typeof self=="object"&&self&&self.Object===Object&&self,qT=HT||WT||Function("return this")(),Ca=qT,YT=Ca,GT=YT.Symbol,bd=GT,Lv=bd,e4=Object.prototype,KT=e4.hasOwnProperty,JT=e4.toString,Tl=Lv?Lv.toStringTag:void 0;function XT(t){var e=KT.call(t,Tl),r=t[Tl];try{t[Tl]=void 0;var n=!0}catch{}var a=JT.call(t);return n&&(e?t[Tl]=r:delete t[Tl]),a}var QT=XT,ZT=Object.prototype,eI=ZT.toString;function tI(t){return eI.call(t)}var rI=tI,zv=bd,nI=QT,aI=rI,sI="[object Null]",iI="[object Undefined]",Fv=zv?zv.toStringTag:void 0;function oI(t){return t==null?t===void 0?iI:sI:Fv&&Fv in Object(t)?nI(t):aI(t)}var Za=oI;function lI(t){return t!=null&&typeof t=="object"}var es=lI,cI=Za,dI=es,uI="[object Symbol]";function fI(t){return typeof t=="symbol"||dI(t)&&cI(t)==uI}var ul=fI,hI=on,pI=ul,mI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gI=/^\w*$/;function xI(t,e){if(hI(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||pI(t)?!0:gI.test(t)||!mI.test(t)||e!=null&&t in Object(e)}var v0=xI;function yI(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ds=yI;const fl=at(Ds);var vI=Za,bI=Ds,jI="[object AsyncFunction]",wI="[object Function]",SI="[object GeneratorFunction]",NI="[object Proxy]";function AI(t){if(!bI(t))return!1;var e=vI(t);return e==wI||e==SI||e==jI||e==NI}var b0=AI;const ze=at(b0);var CI=Ca,kI=CI["__core-js_shared__"],OI=kI,Kp=OI,Bv=function(){var t=/[^.]+$/.exec(Kp&&Kp.keys&&Kp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function EI(t){return!!Bv&&Bv in t}var PI=EI,TI=Function.prototype,II=TI.toString;function MI(t){if(t!=null){try{return II.call(t)}catch{}try{return t+""}catch{}}return""}var t4=MI,$I=b0,RI=PI,DI=Ds,_I=t4,LI=/[\\^$.*+?()[\]{}|]/g,zI=/^\[object .+?Constructor\]$/,FI=Function.prototype,BI=Object.prototype,UI=FI.toString,VI=BI.hasOwnProperty,HI=RegExp("^"+UI.call(VI).replace(LI,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function WI(t){if(!DI(t)||RI(t))return!1;var e=$I(t)?HI:zI;return e.test(_I(t))}var qI=WI;function YI(t,e){return t==null?void 0:t[e]}var GI=YI,KI=qI,JI=GI;function XI(t,e){var r=JI(t,e);return KI(r)?r:void 0}var _i=XI,QI=_i,ZI=QI(Object,"create"),Rh=ZI,Uv=Rh;function e5(){this.__data__=Uv?Uv(null):{},this.size=0}var t5=e5;function r5(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var n5=r5,a5=Rh,s5="__lodash_hash_undefined__",i5=Object.prototype,o5=i5.hasOwnProperty;function l5(t){var e=this.__data__;if(a5){var r=e[t];return r===s5?void 0:r}return o5.call(e,t)?e[t]:void 0}var c5=l5,d5=Rh,u5=Object.prototype,f5=u5.hasOwnProperty;function h5(t){var e=this.__data__;return d5?e[t]!==void 0:f5.call(e,t)}var p5=h5,m5=Rh,g5="__lodash_hash_undefined__";function x5(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=m5&&e===void 0?g5:e,this}var y5=x5,v5=t5,b5=n5,j5=c5,w5=p5,S5=y5;function hl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}hl.prototype.clear=v5;hl.prototype.delete=b5;hl.prototype.get=j5;hl.prototype.has=w5;hl.prototype.set=S5;var N5=hl;function A5(){this.__data__=[],this.size=0}var C5=A5;function k5(t,e){return t===e||t!==t&&e!==e}var j0=k5,O5=j0;function E5(t,e){for(var r=t.length;r--;)if(O5(t[r][0],e))return r;return-1}var Dh=E5,P5=Dh,T5=Array.prototype,I5=T5.splice;function M5(t){var e=this.__data__,r=P5(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():I5.call(e,r,1),--this.size,!0}var $5=M5,R5=Dh;function D5(t){var e=this.__data__,r=R5(e,t);return r<0?void 0:e[r][1]}var _5=D5,L5=Dh;function z5(t){return L5(this.__data__,t)>-1}var F5=z5,B5=Dh;function U5(t,e){var r=this.__data__,n=B5(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var V5=U5,H5=C5,W5=$5,q5=_5,Y5=F5,G5=V5;function pl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}pl.prototype.clear=H5;pl.prototype.delete=W5;pl.prototype.get=q5;pl.prototype.has=Y5;pl.prototype.set=G5;var _h=pl,K5=_i,J5=Ca,X5=K5(J5,"Map"),w0=X5,Vv=N5,Q5=_h,Z5=w0;function eM(){this.size=0,this.__data__={hash:new Vv,map:new(Z5||Q5),string:new Vv}}var tM=eM;function rM(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var nM=rM,aM=nM;function sM(t,e){var r=t.__data__;return aM(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Lh=sM,iM=Lh;function oM(t){var e=iM(this,t).delete(t);return this.size-=e?1:0,e}var lM=oM,cM=Lh;function dM(t){return cM(this,t).get(t)}var uM=dM,fM=Lh;function hM(t){return fM(this,t).has(t)}var pM=hM,mM=Lh;function gM(t,e){var r=mM(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var xM=gM,yM=tM,vM=lM,bM=uM,jM=pM,wM=xM;function ml(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ml.prototype.clear=yM;ml.prototype.delete=vM;ml.prototype.get=bM;ml.prototype.has=jM;ml.prototype.set=wM;var S0=ml,r4=S0,SM="Expected a function";function N0(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(SM);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=t.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(N0.Cache||r4),r}N0.Cache=r4;var n4=N0;const NM=at(n4);var AM=n4,CM=500;function kM(t){var e=AM(t,function(n){return r.size===CM&&r.clear(),n}),r=e.cache;return e}var OM=kM,EM=OM,PM=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,TM=/\\(\\)?/g,IM=EM(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(PM,function(r,n,a,i){e.push(a?i.replace(TM,"$1"):n||r)}),e}),MM=IM;function $M(t,e){for(var r=-1,n=t==null?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a}var A0=$M,Hv=bd,RM=A0,DM=on,_M=ul,Wv=Hv?Hv.prototype:void 0,qv=Wv?Wv.toString:void 0;function a4(t){if(typeof t=="string")return t;if(DM(t))return RM(t,a4)+"";if(_M(t))return qv?qv.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var LM=a4,zM=LM;function FM(t){return t==null?"":zM(t)}var s4=FM,BM=on,UM=v0,VM=MM,HM=s4;function WM(t,e){return BM(t)?t:UM(t,e)?[t]:VM(HM(t))}var i4=WM,qM=ul;function YM(t){if(typeof t=="string"||qM(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var zh=YM,GM=i4,KM=zh;function JM(t,e){e=GM(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[KM(e[r++])];return r&&r==n?t:void 0}var C0=JM,XM=C0;function QM(t,e,r){var n=t==null?void 0:XM(t,e);return n===void 0?r:n}var o4=QM;const jn=at(o4);function ZM(t){return t==null}var e$=ZM;const Ve=at(e$);var t$=Za,r$=on,n$=es,a$="[object String]";function s$(t){return typeof t=="string"||!r$(t)&&n$(t)&&t$(t)==a$}var i$=s$;const Ai=at(i$);var l4={exports:{}},ht={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=Symbol.for("react.element"),O0=Symbol.for("react.portal"),Fh=Symbol.for("react.fragment"),Bh=Symbol.for("react.strict_mode"),Uh=Symbol.for("react.profiler"),Vh=Symbol.for("react.provider"),Hh=Symbol.for("react.context"),o$=Symbol.for("react.server_context"),Wh=Symbol.for("react.forward_ref"),qh=Symbol.for("react.suspense"),Yh=Symbol.for("react.suspense_list"),Gh=Symbol.for("react.memo"),Kh=Symbol.for("react.lazy"),l$=Symbol.for("react.offscreen"),c4;c4=Symbol.for("react.module.reference");function qn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case k0:switch(t=t.type,t){case Fh:case Uh:case Bh:case qh:case Yh:return t;default:switch(t=t&&t.$$typeof,t){case o$:case Hh:case Wh:case Kh:case Gh:case Vh:return t;default:return e}}case O0:return e}}}ht.ContextConsumer=Hh;ht.ContextProvider=Vh;ht.Element=k0;ht.ForwardRef=Wh;ht.Fragment=Fh;ht.Lazy=Kh;ht.Memo=Gh;ht.Portal=O0;ht.Profiler=Uh;ht.StrictMode=Bh;ht.Suspense=qh;ht.SuspenseList=Yh;ht.isAsyncMode=function(){return!1};ht.isConcurrentMode=function(){return!1};ht.isContextConsumer=function(t){return qn(t)===Hh};ht.isContextProvider=function(t){return qn(t)===Vh};ht.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===k0};ht.isForwardRef=function(t){return qn(t)===Wh};ht.isFragment=function(t){return qn(t)===Fh};ht.isLazy=function(t){return qn(t)===Kh};ht.isMemo=function(t){return qn(t)===Gh};ht.isPortal=function(t){return qn(t)===O0};ht.isProfiler=function(t){return qn(t)===Uh};ht.isStrictMode=function(t){return qn(t)===Bh};ht.isSuspense=function(t){return qn(t)===qh};ht.isSuspenseList=function(t){return qn(t)===Yh};ht.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Fh||t===Uh||t===Bh||t===qh||t===Yh||t===l$||typeof t=="object"&&t!==null&&(t.$$typeof===Kh||t.$$typeof===Gh||t.$$typeof===Vh||t.$$typeof===Hh||t.$$typeof===Wh||t.$$typeof===c4||t.getModuleId!==void 0)};ht.typeOf=qn;l4.exports=ht;var c$=l4.exports,d$=Za,u$=es,f$="[object Number]";function h$(t){return typeof t=="number"||u$(t)&&d$(t)==f$}var d4=h$;const p$=at(d4);var m$=d4;function g$(t){return m$(t)&&t!=+t}var x$=g$;const gl=at(x$);var Br=function(e){return e===0?0:e>0?1:-1},oi=function(e){return Ai(e)&&e.indexOf("%")===e.length-1},se=function(e){return p$(e)&&!gl(e)},y$=function(e){return Ve(e)},sr=function(e){return se(e)||Ai(e)},v$=0,xl=function(e){var r=++v$;return"".concat(e||"").concat(r)},Ur=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!se(e)&&!Ai(e))return n;var i;if(oi(e)){var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return gl(i)&&(i=n),a&&i>r&&(i=r),i},hs=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},b$=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},tn=function(e,r){return se(e)&&se(r)?function(n){return e+n*(r-e)}:function(){return r}};function Eu(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):jn(n,e))===r})}var j$=function(e,r){return se(e)&&se(r)?e-r:Ai(e)&&Ai(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function po(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function tg(t){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(t)}var w$=["viewBox","children"],S$=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Yv=["points","pathLength"],Jp={svg:w$,polygon:Yv,polyline:Yv},E0=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Pu=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(N.isValidElement(e)&&(n=e.props),!fl(n))return null;var a={};return Object.keys(n).forEach(function(i){E0.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},N$=function(e,r,n){return function(a){return e(r,n,a),null}},Ci=function(e,r,n){if(!fl(e)||tg(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var o=e[i];E0.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=N$(o,r,n))}),a},A$=["children"],C$=["children"];function Gv(t,e){if(t==null)return{};var r=k$(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function k$(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function rg(t){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(t)}var Kv={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ua=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},Jv=null,Xp=null,P0=function t(e){if(e===Jv&&Array.isArray(Xp))return Xp;var r=[];return N.Children.forEach(e,function(n){Ve(n)||(c$.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),Xp=r,Jv=e,r};function Fn(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return Ua(a)}):n=[Ua(e)],P0(t).forEach(function(a){var i=jn(a,"type.displayName")||jn(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function mn(t,e){var r=Fn(t,e);return r&&r[0]}var Xv=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!se(n)||n<=0||!se(a)||a<=0)},O$=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],E$=function(e){return e&&e.type&&Ai(e.type)&&O$.indexOf(e.type)>=0},P$=function(e){return e&&rg(e)==="object"&&"clipDot"in e},T$=function(e,r,n,a){var i,o=(i=Jp==null?void 0:Jp[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!ze(e)&&(a&&o.includes(r)||S$.includes(r))||n&&E0.includes(r)},Pe=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(N.isValidElement(e)&&(a=e.props),!fl(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;T$((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},ng=function t(e,r){if(e===r)return!0;var n=N.Children.count(e);if(n!==N.Children.count(r))return!1;if(n===0)return!0;if(n===1)return Qv(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!Qv(i,o))return!1}return!0},Qv=function(e,r){if(Ve(e)&&Ve(r))return!0;if(!Ve(e)&&!Ve(r)){var n=e.props||{},a=n.children,i=Gv(n,A$),o=r.props||{},l=o.children,c=Gv(o,C$);return a&&l?po(i,c)&&ng(a,l):!a&&!l?po(i,c):!1}return!1},Zv=function(e,r){var n=[],a={};return P0(e).forEach(function(i,o){if(E$(i))n.push(i);else if(i){var l=Ua(i.type),c=r[l]||{},d=c.handler,u=c.once;if(d&&(!u||!a[l])){var f=d(i,l,o);n.push(f),a[l]=!0}}}),n},I$=function(e){var r=e&&e.type;return r&&Kv[r]?Kv[r]:null},M$=function(e,r){return P0(r).indexOf(e)},$$=["children","width","height","viewBox","className","style","title","desc"];function ag(){return ag=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ag.apply(this,arguments)}function R$(t,e){if(t==null)return{};var r=D$(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function D$(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function sg(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,o=t.style,l=t.title,c=t.desc,d=R$(t,$$),u=a||{width:r,height:n,x:0,y:0},f=He("recharts-surface",i);return D.createElement("svg",ag({},Pe(d,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),D.createElement("title",null,l),D.createElement("desc",null,c),e)}var _$=["children","className"];function ig(){return ig=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ig.apply(this,arguments)}function L$(t,e){if(t==null)return{};var r=z$(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function z$(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Ze=D.forwardRef(function(t,e){var r=t.children,n=t.className,a=L$(t,_$),i=He("recharts-layer",n);return D.createElement("g",ig({className:i},Pe(a,!0),{ref:e}),r)}),na=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function F$(t,e,r){var n=-1,a=t.length;e<0&&(e=-e>a?0:a+e),r=r>a?a:r,r<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(a);++n<a;)i[n]=t[n+e];return i}var B$=F$,U$=B$;function V$(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:U$(t,e,r)}var H$=V$,W$="\\ud800-\\udfff",q$="\\u0300-\\u036f",Y$="\\ufe20-\\ufe2f",G$="\\u20d0-\\u20ff",K$=q$+Y$+G$,J$="\\ufe0e\\ufe0f",X$="\\u200d",Q$=RegExp("["+X$+W$+K$+J$+"]");function Z$(t){return Q$.test(t)}var u4=Z$;function eR(t){return t.split("")}var tR=eR,f4="\\ud800-\\udfff",rR="\\u0300-\\u036f",nR="\\ufe20-\\ufe2f",aR="\\u20d0-\\u20ff",sR=rR+nR+aR,iR="\\ufe0e\\ufe0f",oR="["+f4+"]",og="["+sR+"]",lg="\\ud83c[\\udffb-\\udfff]",lR="(?:"+og+"|"+lg+")",h4="[^"+f4+"]",p4="(?:\\ud83c[\\udde6-\\uddff]){2}",m4="[\\ud800-\\udbff][\\udc00-\\udfff]",cR="\\u200d",g4=lR+"?",x4="["+iR+"]?",dR="(?:"+cR+"(?:"+[h4,p4,m4].join("|")+")"+x4+g4+")*",uR=x4+g4+dR,fR="(?:"+[h4+og+"?",og,p4,m4,oR].join("|")+")",hR=RegExp(lg+"(?="+lg+")|"+fR+uR,"g");function pR(t){return t.match(hR)||[]}var mR=pR,gR=tR,xR=u4,yR=mR;function vR(t){return xR(t)?yR(t):gR(t)}var bR=vR,jR=H$,wR=u4,SR=bR,NR=s4;function AR(t){return function(e){e=NR(e);var r=wR(e)?SR(e):void 0,n=r?r[0]:e.charAt(0),a=r?jR(r,1).join(""):e.slice(1);return n[t]()+a}}var CR=AR,kR=CR,OR=kR("toUpperCase"),ER=OR;const Jh=at(ER);function At(t){return function(){return t}}const y4=Math.cos,Tu=Math.sin,sa=Math.sqrt,Iu=Math.PI,Xh=2*Iu,cg=Math.PI,dg=2*cg,ri=1e-6,PR=dg-ri;function v4(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function TR(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return v4;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class IR{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?v4:TR(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-e,d=a-r,u=o-e,f=l-r,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>ri)if(!(Math.abs(f*c-d*u)>ri)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-o,m=a-l,x=c*c+d*d,g=p*p+m*m,y=Math.sqrt(x),j=Math.sqrt(h),b=i*Math.tan((cg-Math.acos((x+h-g)/(2*y*j)))/2),S=b/j,w=b/y;Math.abs(S-1)>ri&&this._append`L${e+S*u},${r+S*f}`,this._append`A${i},${i},0,0,${+(f*p>u*m)},${this._x1=e+w*c},${this._y1=r+w*d}`}}arc(e,r,n,a,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),d=e+l,u=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>ri||Math.abs(this._y1-u)>ri)&&this._append`L${d},${u}`,n&&(h<0&&(h=h%dg+dg),h>PR?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=d},${this._y1=u}`:h>ri&&this._append`A${n},${n},0,${+(h>=cg)},${f},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function T0(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new IR(e)}function I0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function b4(t){this._context=t}b4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Qh(t){return new b4(t)}function j4(t){return t[0]}function w4(t){return t[1]}function S4(t,e){var r=At(!0),n=null,a=Qh,i=null,o=T0(l);t=typeof t=="function"?t:t===void 0?j4:At(t),e=typeof e=="function"?e:e===void 0?w4:At(e);function l(c){var d,u=(c=I0(c)).length,f,h=!1,p;for(n==null&&(i=a(p=o())),d=0;d<=u;++d)!(d<u&&r(f=c[d],d,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(f,d,c),+e(f,d,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:At(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:At(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:At(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function Bd(t,e,r){var n=null,a=At(!0),i=null,o=Qh,l=null,c=T0(d);t=typeof t=="function"?t:t===void 0?j4:At(+t),e=typeof e=="function"?e:At(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?w4:At(+r);function d(f){var h,p,m,x=(f=I0(f)).length,g,y=!1,j,b=new Array(x),S=new Array(x);for(i==null&&(l=o(j=c())),h=0;h<=x;++h){if(!(h<x&&a(g=f[h],h,f))===y)if(y=!y)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=h-1;m>=p;--m)l.point(b[m],S[m]);l.lineEnd(),l.areaEnd()}y&&(b[h]=+t(g,h,f),S[h]=+e(g,h,f),l.point(n?+n(g,h,f):b[h],r?+r(g,h,f):S[h]))}if(j)return l=null,j+""||null}function u(){return S4().defined(a).curve(o).context(i)}return d.x=function(f){return arguments.length?(t=typeof f=="function"?f:At(+f),n=null,d):t},d.x0=function(f){return arguments.length?(t=typeof f=="function"?f:At(+f),d):t},d.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:At(+f),d):n},d.y=function(f){return arguments.length?(e=typeof f=="function"?f:At(+f),r=null,d):e},d.y0=function(f){return arguments.length?(e=typeof f=="function"?f:At(+f),d):e},d.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:At(+f),d):r},d.lineX0=d.lineY0=function(){return u().x(t).y(e)},d.lineY1=function(){return u().x(t).y(r)},d.lineX1=function(){return u().x(n).y(e)},d.defined=function(f){return arguments.length?(a=typeof f=="function"?f:At(!!f),d):a},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}class N4{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function MR(t){return new N4(t,!0)}function $R(t){return new N4(t,!1)}const M0={draw(t,e){const r=sa(e/Iu);t.moveTo(r,0),t.arc(0,0,r,0,Xh)}},RR={draw(t,e){const r=sa(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},A4=sa(1/3),DR=A4*2,_R={draw(t,e){const r=sa(e/DR),n=r*A4;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},LR={draw(t,e){const r=sa(e),n=-r/2;t.rect(n,n,r,r)}},zR=.8908130915292852,C4=Tu(Iu/10)/Tu(7*Iu/10),FR=Tu(Xh/10)*C4,BR=-y4(Xh/10)*C4,UR={draw(t,e){const r=sa(e*zR),n=FR*r,a=BR*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const o=Xh*i/5,l=y4(o),c=Tu(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},Qp=sa(3),VR={draw(t,e){const r=-sa(e/(Qp*3));t.moveTo(0,r*2),t.lineTo(-Qp*r,-r),t.lineTo(Qp*r,-r),t.closePath()}},Cn=-.5,kn=sa(3)/2,ug=1/sa(12),HR=(ug/2+1)*3,WR={draw(t,e){const r=sa(e/HR),n=r/2,a=r*ug,i=n,o=r*ug+r,l=-i,c=o;t.moveTo(n,a),t.lineTo(i,o),t.lineTo(l,c),t.lineTo(Cn*n-kn*a,kn*n+Cn*a),t.lineTo(Cn*i-kn*o,kn*i+Cn*o),t.lineTo(Cn*l-kn*c,kn*l+Cn*c),t.lineTo(Cn*n+kn*a,Cn*a-kn*n),t.lineTo(Cn*i+kn*o,Cn*o-kn*i),t.lineTo(Cn*l+kn*c,Cn*c-kn*l),t.closePath()}};function qR(t,e){let r=null,n=T0(a);t=typeof t=="function"?t:At(t||M0),e=typeof e=="function"?e:At(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:At(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:At(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Mu(){}function $u(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function k4(t){this._context=t}k4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$u(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$u(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function YR(t){return new k4(t)}function O4(t){this._context=t}O4.prototype={areaStart:Mu,areaEnd:Mu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:$u(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function GR(t){return new O4(t)}function E4(t){this._context=t}E4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:$u(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function KR(t){return new E4(t)}function P4(t){this._context=t}P4.prototype={areaStart:Mu,areaEnd:Mu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function JR(t){return new P4(t)}function eb(t){return t<0?-1:1}function tb(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(eb(i)+eb(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function rb(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Zp(t,e,r){var n=t._x0,a=t._y0,i=t._x1,o=t._y1,l=(i-n)/3;t._context.bezierCurveTo(n+l,a+l*e,i-l,o-l*r,i,o)}function Ru(t){this._context=t}Ru.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Zp(this,this._t0,rb(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Zp(this,rb(this,r=tb(this,t,e)),r);break;default:Zp(this,this._t0,r=tb(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function T4(t){this._context=new I4(t)}(T4.prototype=Object.create(Ru.prototype)).point=function(t,e){Ru.prototype.point.call(this,e,t)};function I4(t){this._context=t}I4.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function XR(t){return new Ru(t)}function QR(t){return new T4(t)}function M4(t){this._context=t}M4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=nb(t),a=nb(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function nb(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function ZR(t){return new M4(t)}function Zh(t,e){this._context=t,this._t=e}Zh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function eD(t){return new Zh(t,.5)}function tD(t){return new Zh(t,0)}function rD(t){return new Zh(t,1)}function Oo(t,e){if((o=t.length)>1)for(var r=1,n,a,i=t[e[0]],o,l=i.length;r<o;++r)for(a=i,i=t[e[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function fg(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function nD(t,e){return t[e]}function aD(t){const e=[];return e.key=t,e}function sD(){var t=At([]),e=fg,r=Oo,n=nD;function a(i){var o=Array.from(t.apply(this,arguments),aD),l,c=o.length,d=-1,u;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(f,o[l].key,d,i)]).data=f;for(l=0,u=I0(e(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:At(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:At(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?fg:typeof i=="function"?i:At(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??Oo,a):r},a}function iD(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}Oo(t,e)}}function oD(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Oo(t,e)}}function lD(t,e){if(!(!((o=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,d=0;l<o;++l){for(var u=t[e[l]],f=u[n][1]||0,h=u[n-1][1]||0,p=(f-h)/2,m=0;m<l;++m){var x=t[e[m]],g=x[n][1]||0,y=x[n-1][1]||0;p+=g-y}c+=f,d+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=d/c)}a[n-1][1]+=a[n-1][0]=r,Oo(t,e)}}function bc(t){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(t)}var cD=["type","size","sizeType"];function hg(){return hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hg.apply(this,arguments)}function ab(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ab(Object(r),!0).forEach(function(n){dD(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ab(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dD(t,e,r){return e=uD(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uD(t){var e=fD(t,"string");return bc(e)=="symbol"?e:e+""}function fD(t,e){if(bc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hD(t,e){if(t==null)return{};var r=pD(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function pD(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var $4={symbolCircle:M0,symbolCross:RR,symbolDiamond:_R,symbolSquare:LR,symbolStar:UR,symbolTriangle:VR,symbolWye:WR},mD=Math.PI/180,gD=function(e){var r="symbol".concat(Jh(e));return $4[r]||M0},xD=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*mD;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},yD=function(e,r){$4["symbol".concat(Jh(e))]=r},$0=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,o=e.sizeType,l=o===void 0?"area":o,c=hD(e,cD),d=sb(sb({},c),{},{type:n,size:i,sizeType:l}),u=function(){var g=gD(n),y=qR().type(g).size(xD(i,l,n));return y()},f=d.className,h=d.cx,p=d.cy,m=Pe(d,!0);return h===+h&&p===+p&&i===+i?D.createElement("path",hg({},m,{className:He("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};$0.registerSymbol=yD;function Eo(t){"@babel/helpers - typeof";return Eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eo(t)}function pg(){return pg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pg.apply(this,arguments)}function ib(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ib(Object(r),!0).forEach(function(n){jc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ib(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D4(n.key),n)}}function wD(t,e,r){return e&&jD(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function SD(t,e,r){return e=Du(e),ND(t,R4()?Reflect.construct(e,r||[],Du(t).constructor):e.apply(t,r))}function ND(t,e){if(e&&(Eo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AD(t)}function AD(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R4=function(){return!!t})()}function Du(t){return Du=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Du(t)}function CD(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mg(t,e)}function mg(t,e){return mg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mg(t,e)}function jc(t,e,r){return e=D4(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D4(t){var e=kD(t,"string");return Eo(e)=="symbol"?e:e+""}function kD(t,e){if(Eo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Eo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var On=32,R0=function(t){function e(){return bD(this,e),SD(this,e,arguments)}return CD(e,t),wD(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=On/2,o=On/6,l=On/3,c=n.inactive?a:n.color;if(n.type==="plainline")return D.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:On,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return D.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(On,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return D.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(On/8,"h").concat(On,"v").concat(On*3/4,"h").concat(-On,"z"),className:"recharts-legend-icon"});if(D.isValidElement(n.legendIcon)){var d=vD({},n);return delete d.legendIcon,D.cloneElement(n.legendIcon,d)}return D.createElement($0,{fill:c,cx:i,cy:i,size:On,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:On,height:On},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,m){var x=p.formatter||c,g=He(jc(jc({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var y=ze(p.value)?null:p.value;na(!ze(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var j=p.inactive?d:p.color;return D.createElement("li",pg({className:g,style:f,key:"legend-item-".concat(m)},Ci(n.props,p,m)),D.createElement(sg,{width:o,height:o,viewBox:u,style:h},n.renderIcon(p)),D.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},x?x(y,p,m):y))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return D.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(N.PureComponent);jc(R0,"displayName","Legend");jc(R0,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var OD=_h;function ED(){this.__data__=new OD,this.size=0}var PD=ED;function TD(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var ID=TD;function MD(t){return this.__data__.get(t)}var $D=MD;function RD(t){return this.__data__.has(t)}var DD=RD,_D=_h,LD=w0,zD=S0,FD=200;function BD(t,e){var r=this.__data__;if(r instanceof _D){var n=r.__data__;if(!LD||n.length<FD-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new zD(n)}return r.set(t,e),this.size=r.size,this}var UD=BD,VD=_h,HD=PD,WD=ID,qD=$D,YD=DD,GD=UD;function yl(t){var e=this.__data__=new VD(t);this.size=e.size}yl.prototype.clear=HD;yl.prototype.delete=WD;yl.prototype.get=qD;yl.prototype.has=YD;yl.prototype.set=GD;var _4=yl,KD="__lodash_hash_undefined__";function JD(t){return this.__data__.set(t,KD),this}var XD=JD;function QD(t){return this.__data__.has(t)}var ZD=QD,e7=S0,t7=XD,r7=ZD;function _u(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new e7;++e<r;)this.add(t[e])}_u.prototype.add=_u.prototype.push=t7;_u.prototype.has=r7;var L4=_u;function n7(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var z4=n7;function a7(t,e){return t.has(e)}var F4=a7,s7=L4,i7=z4,o7=F4,l7=1,c7=2;function d7(t,e,r,n,a,i){var o=r&l7,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(t),u=i.get(e);if(d&&u)return d==e&&u==t;var f=-1,h=!0,p=r&c7?new s7:void 0;for(i.set(t,e),i.set(e,t);++f<l;){var m=t[f],x=e[f];if(n)var g=o?n(x,m,f,e,t,i):n(m,x,f,t,e,i);if(g!==void 0){if(g)continue;h=!1;break}if(p){if(!i7(e,function(y,j){if(!o7(p,j)&&(m===y||a(m,y,r,n,i)))return p.push(j)})){h=!1;break}}else if(!(m===x||a(m,x,r,n,i))){h=!1;break}}return i.delete(t),i.delete(e),h}var B4=d7,u7=Ca,f7=u7.Uint8Array,h7=f7;function p7(t){var e=-1,r=Array(t.size);return t.forEach(function(n,a){r[++e]=[a,n]}),r}var m7=p7;function g7(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var D0=g7,ob=bd,lb=h7,x7=j0,y7=B4,v7=m7,b7=D0,j7=1,w7=2,S7="[object Boolean]",N7="[object Date]",A7="[object Error]",C7="[object Map]",k7="[object Number]",O7="[object RegExp]",E7="[object Set]",P7="[object String]",T7="[object Symbol]",I7="[object ArrayBuffer]",M7="[object DataView]",cb=ob?ob.prototype:void 0,em=cb?cb.valueOf:void 0;function $7(t,e,r,n,a,i,o){switch(r){case M7:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case I7:return!(t.byteLength!=e.byteLength||!i(new lb(t),new lb(e)));case S7:case N7:case k7:return x7(+t,+e);case A7:return t.name==e.name&&t.message==e.message;case O7:case P7:return t==e+"";case C7:var l=v7;case E7:var c=n&j7;if(l||(l=b7),t.size!=e.size&&!c)return!1;var d=o.get(t);if(d)return d==e;n|=w7,o.set(t,e);var u=y7(l(t),l(e),n,a,i,o);return o.delete(t),u;case T7:if(em)return em.call(t)==em.call(e)}return!1}var R7=$7;function D7(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t}var U4=D7,_7=U4,L7=on;function z7(t,e,r){var n=e(t);return L7(t)?n:_7(n,r(t))}var F7=z7;function B7(t,e){for(var r=-1,n=t==null?0:t.length,a=0,i=[];++r<n;){var o=t[r];e(o,r,t)&&(i[a++]=o)}return i}var U7=B7;function V7(){return[]}var H7=V7,W7=U7,q7=H7,Y7=Object.prototype,G7=Y7.propertyIsEnumerable,db=Object.getOwnPropertySymbols,K7=db?function(t){return t==null?[]:(t=Object(t),W7(db(t),function(e){return G7.call(t,e)}))}:q7,J7=K7;function X7(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Q7=X7,Z7=Za,e_=es,t_="[object Arguments]";function r_(t){return e_(t)&&Z7(t)==t_}var n_=r_,ub=n_,a_=es,V4=Object.prototype,s_=V4.hasOwnProperty,i_=V4.propertyIsEnumerable,o_=ub(function(){return arguments}())?ub:function(t){return a_(t)&&s_.call(t,"callee")&&!i_.call(t,"callee")},_0=o_,Lu={exports:{}};function l_(){return!1}var c_=l_;Lu.exports;(function(t,e){var r=Ca,n=c_,a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;t.exports=d})(Lu,Lu.exports);var H4=Lu.exports,d_=9007199254740991,u_=/^(?:0|[1-9]\d*)$/;function f_(t,e){var r=typeof t;return e=e??d_,!!e&&(r=="number"||r!="symbol"&&u_.test(t))&&t>-1&&t%1==0&&t<e}var L0=f_,h_=9007199254740991;function p_(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=h_}var z0=p_,m_=Za,g_=z0,x_=es,y_="[object Arguments]",v_="[object Array]",b_="[object Boolean]",j_="[object Date]",w_="[object Error]",S_="[object Function]",N_="[object Map]",A_="[object Number]",C_="[object Object]",k_="[object RegExp]",O_="[object Set]",E_="[object String]",P_="[object WeakMap]",T_="[object ArrayBuffer]",I_="[object DataView]",M_="[object Float32Array]",$_="[object Float64Array]",R_="[object Int8Array]",D_="[object Int16Array]",__="[object Int32Array]",L_="[object Uint8Array]",z_="[object Uint8ClampedArray]",F_="[object Uint16Array]",B_="[object Uint32Array]",Et={};Et[M_]=Et[$_]=Et[R_]=Et[D_]=Et[__]=Et[L_]=Et[z_]=Et[F_]=Et[B_]=!0;Et[y_]=Et[v_]=Et[T_]=Et[b_]=Et[I_]=Et[j_]=Et[w_]=Et[S_]=Et[N_]=Et[A_]=Et[C_]=Et[k_]=Et[O_]=Et[E_]=Et[P_]=!1;function U_(t){return x_(t)&&g_(t.length)&&!!Et[m_(t)]}var V_=U_;function H_(t){return function(e){return t(e)}}var W4=H_,zu={exports:{}};zu.exports;(function(t,e){var r=ZS,n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(zu,zu.exports);var W_=zu.exports,q_=V_,Y_=W4,fb=W_,hb=fb&&fb.isTypedArray,G_=hb?Y_(hb):q_,q4=G_,K_=Q7,J_=_0,X_=on,Q_=H4,Z_=L0,e9=q4,t9=Object.prototype,r9=t9.hasOwnProperty;function n9(t,e){var r=X_(t),n=!r&&J_(t),a=!r&&!n&&Q_(t),i=!r&&!n&&!a&&e9(t),o=r||n||a||i,l=o?K_(t.length,String):[],c=l.length;for(var d in t)(e||r9.call(t,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Z_(d,c)))&&l.push(d);return l}var a9=n9,s9=Object.prototype;function i9(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||s9;return t===r}var o9=i9;function l9(t,e){return function(r){return t(e(r))}}var Y4=l9,c9=Y4,d9=c9(Object.keys,Object),u9=d9,f9=o9,h9=u9,p9=Object.prototype,m9=p9.hasOwnProperty;function g9(t){if(!f9(t))return h9(t);var e=[];for(var r in Object(t))m9.call(t,r)&&r!="constructor"&&e.push(r);return e}var x9=g9,y9=b0,v9=z0;function b9(t){return t!=null&&v9(t.length)&&!y9(t)}var jd=b9,j9=a9,w9=x9,S9=jd;function N9(t){return S9(t)?j9(t):w9(t)}var ep=N9,A9=F7,C9=J7,k9=ep;function O9(t){return A9(t,k9,C9)}var E9=O9,pb=E9,P9=1,T9=Object.prototype,I9=T9.hasOwnProperty;function M9(t,e,r,n,a,i){var o=r&P9,l=pb(t),c=l.length,d=pb(e),u=d.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in e:I9.call(e,h)))return!1}var p=i.get(t),m=i.get(e);if(p&&m)return p==e&&m==t;var x=!0;i.set(t,e),i.set(e,t);for(var g=o;++f<c;){h=l[f];var y=t[h],j=e[h];if(n)var b=o?n(j,y,h,e,t,i):n(y,j,h,t,e,i);if(!(b===void 0?y===j||a(y,j,r,n,i):b)){x=!1;break}g||(g=h=="constructor")}if(x&&!g){var S=t.constructor,w=e.constructor;S!=w&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof w=="function"&&w instanceof w)&&(x=!1)}return i.delete(t),i.delete(e),x}var $9=M9,R9=_i,D9=Ca,_9=R9(D9,"DataView"),L9=_9,z9=_i,F9=Ca,B9=z9(F9,"Promise"),U9=B9,V9=_i,H9=Ca,W9=V9(H9,"Set"),G4=W9,q9=_i,Y9=Ca,G9=q9(Y9,"WeakMap"),K9=G9,gg=L9,xg=w0,yg=U9,vg=G4,bg=K9,K4=Za,vl=t4,mb="[object Map]",J9="[object Object]",gb="[object Promise]",xb="[object Set]",yb="[object WeakMap]",vb="[object DataView]",X9=vl(gg),Q9=vl(xg),Z9=vl(yg),eL=vl(vg),tL=vl(bg),ni=K4;(gg&&ni(new gg(new ArrayBuffer(1)))!=vb||xg&&ni(new xg)!=mb||yg&&ni(yg.resolve())!=gb||vg&&ni(new vg)!=xb||bg&&ni(new bg)!=yb)&&(ni=function(t){var e=K4(t),r=e==J9?t.constructor:void 0,n=r?vl(r):"";if(n)switch(n){case X9:return vb;case Q9:return mb;case Z9:return gb;case eL:return xb;case tL:return yb}return e});var rL=ni,tm=_4,nL=B4,aL=R7,sL=$9,bb=rL,jb=on,wb=H4,iL=q4,oL=1,Sb="[object Arguments]",Nb="[object Array]",Ud="[object Object]",lL=Object.prototype,Ab=lL.hasOwnProperty;function cL(t,e,r,n,a,i){var o=jb(t),l=jb(e),c=o?Nb:bb(t),d=l?Nb:bb(e);c=c==Sb?Ud:c,d=d==Sb?Ud:d;var u=c==Ud,f=d==Ud,h=c==d;if(h&&wb(t)){if(!wb(e))return!1;o=!0,u=!1}if(h&&!u)return i||(i=new tm),o||iL(t)?nL(t,e,r,n,a,i):aL(t,e,c,r,n,a,i);if(!(r&oL)){var p=u&&Ab.call(t,"__wrapped__"),m=f&&Ab.call(e,"__wrapped__");if(p||m){var x=p?t.value():t,g=m?e.value():e;return i||(i=new tm),a(x,g,r,n,i)}}return h?(i||(i=new tm),sL(t,e,r,n,a,i)):!1}var dL=cL,uL=dL,Cb=es;function J4(t,e,r,n,a){return t===e?!0:t==null||e==null||!Cb(t)&&!Cb(e)?t!==t&&e!==e:uL(t,e,r,n,J4,a)}var F0=J4,fL=_4,hL=F0,pL=1,mL=2;function gL(t,e,r,n){var a=r.length,i=a,o=!n;if(t==null)return!i;for(t=Object(t);a--;){var l=r[a];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<i;){l=r[a];var c=l[0],d=t[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in t))return!1}else{var f=new fL;if(n)var h=n(d,u,c,t,e,f);if(!(h===void 0?hL(u,d,pL|mL,n,f):h))return!1}}return!0}var xL=gL,yL=Ds;function vL(t){return t===t&&!yL(t)}var X4=vL,bL=X4,jL=ep;function wL(t){for(var e=jL(t),r=e.length;r--;){var n=e[r],a=t[n];e[r]=[n,a,bL(a)]}return e}var SL=wL;function NL(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var Q4=NL,AL=xL,CL=SL,kL=Q4;function OL(t){var e=CL(t);return e.length==1&&e[0][2]?kL(e[0][0],e[0][1]):function(r){return r===t||AL(r,t,e)}}var EL=OL;function PL(t,e){return t!=null&&e in Object(t)}var TL=PL,IL=i4,ML=_0,$L=on,RL=L0,DL=z0,_L=zh;function LL(t,e,r){e=IL(e,t);for(var n=-1,a=e.length,i=!1;++n<a;){var o=_L(e[n]);if(!(i=t!=null&&r(t,o)))break;t=t[o]}return i||++n!=a?i:(a=t==null?0:t.length,!!a&&DL(a)&&RL(o,a)&&($L(t)||ML(t)))}var zL=LL,FL=TL,BL=zL;function UL(t,e){return t!=null&&BL(t,e,FL)}var VL=UL,HL=F0,WL=o4,qL=VL,YL=v0,GL=X4,KL=Q4,JL=zh,XL=1,QL=2;function ZL(t,e){return YL(t)&&GL(e)?KL(JL(t),e):function(r){var n=WL(r,t);return n===void 0&&n===e?qL(r,t):HL(e,n,XL|QL)}}var ez=ZL;function tz(t){return t}var bl=tz;function rz(t){return function(e){return e==null?void 0:e[t]}}var nz=rz,az=C0;function sz(t){return function(e){return az(e,t)}}var iz=sz,oz=nz,lz=iz,cz=v0,dz=zh;function uz(t){return cz(t)?oz(dz(t)):lz(t)}var fz=uz,hz=EL,pz=ez,mz=bl,gz=on,xz=fz;function yz(t){return typeof t=="function"?t:t==null?mz:typeof t=="object"?gz(t)?pz(t[0],t[1]):hz(t):xz(t)}var ka=yz;function vz(t,e,r,n){for(var a=t.length,i=r+(n?1:-1);n?i--:++i<a;)if(e(t[i],i,t))return i;return-1}var Z4=vz;function bz(t){return t!==t}var jz=bz;function wz(t,e,r){for(var n=r-1,a=t.length;++n<a;)if(t[n]===e)return n;return-1}var Sz=wz,Nz=Z4,Az=jz,Cz=Sz;function kz(t,e,r){return e===e?Cz(t,e,r):Nz(t,Az,r)}var Oz=kz,Ez=Oz;function Pz(t,e){var r=t==null?0:t.length;return!!r&&Ez(t,e,0)>-1}var Tz=Pz;function Iz(t,e,r){for(var n=-1,a=t==null?0:t.length;++n<a;)if(r(e,t[n]))return!0;return!1}var Mz=Iz;function $z(){}var Rz=$z,rm=G4,Dz=Rz,_z=D0,Lz=1/0,zz=rm&&1/_z(new rm([,-0]))[1]==Lz?function(t){return new rm(t)}:Dz,Fz=zz,Bz=L4,Uz=Tz,Vz=Mz,Hz=F4,Wz=Fz,qz=D0,Yz=200;function Gz(t,e,r){var n=-1,a=Uz,i=t.length,o=!0,l=[],c=l;if(r)o=!1,a=Vz;else if(i>=Yz){var d=e?null:Wz(t);if(d)return qz(d);o=!1,a=Hz,c=new Bz}else c=e?[]:l;e:for(;++n<i;){var u=t[n],f=e?e(u):u;if(u=r||u!==0?u:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;e&&c.push(f),l.push(u)}else a(c,f,r)||(c!==l&&c.push(f),l.push(u))}return l}var Kz=Gz,Jz=ka,Xz=Kz;function Qz(t,e){return t&&t.length?Xz(t,Jz(e)):[]}var Zz=Qz;const kb=at(Zz);function eN(t,e,r){return e===!0?kb(t,r):ze(e)?kb(t,e):t}function Po(t){"@babel/helpers - typeof";return Po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Po(t)}var eF=["ref"];function Ob(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Oa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ob(Object(r),!0).forEach(function(n){tp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ob(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rN(n.key),n)}}function rF(t,e,r){return e&&Eb(t.prototype,e),r&&Eb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function nF(t,e,r){return e=Fu(e),aF(t,tN()?Reflect.construct(e,r||[],Fu(t).constructor):e.apply(t,r))}function aF(t,e){if(e&&(Po(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sF(t)}function sF(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tN=function(){return!!t})()}function Fu(t){return Fu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fu(t)}function iF(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jg(t,e)}function jg(t,e){return jg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jg(t,e)}function tp(t,e,r){return e=rN(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rN(t){var e=oF(t,"string");return Po(e)=="symbol"?e:e+""}function oF(t,e){if(Po(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Po(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lF(t,e){if(t==null)return{};var r=cF(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cF(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function dF(t){return t.value}function uF(t,e){if(D.isValidElement(t))return D.cloneElement(t,e);if(typeof t=="function")return D.createElement(t,e);e.ref;var r=lF(e,eF);return D.createElement(R0,r)}var Pb=1,ws=function(t){function e(){var r;tF(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=nF(this,e,[].concat(a)),tp(r,"lastBoundingBox",{width:-1,height:-1}),r}return iF(e,t),rF(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>Pb||Math.abs(a.height-this.lastBoundingBox.height)>Pb)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Oa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();f={left:((d||0)-p.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var m=this.getBBoxSnapshot();h={top:((u||0)-m.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Oa(Oa({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,f=Oa(Oa({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return D.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},uF(i,Oa(Oa({},this.props),{},{payload:eN(u,d,dF)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Oa(Oa({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&se(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(N.PureComponent);tp(ws,"displayName","Legend");tp(ws,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Tb=bd,fF=_0,hF=on,Ib=Tb?Tb.isConcatSpreadable:void 0;function pF(t){return hF(t)||fF(t)||!!(Ib&&t&&t[Ib])}var mF=pF,gF=U4,xF=mF;function nN(t,e,r,n,a){var i=-1,o=t.length;for(r||(r=xF),a||(a=[]);++i<o;){var l=t[i];e>0&&r(l)?e>1?nN(l,e-1,r,n,a):gF(a,l):n||(a[a.length]=l)}return a}var aN=nN;function yF(t){return function(e,r,n){for(var a=-1,i=Object(e),o=n(e),l=o.length;l--;){var c=o[t?l:++a];if(r(i[c],c,i)===!1)break}return e}}var vF=yF,bF=vF,jF=bF(),wF=jF,SF=wF,NF=ep;function AF(t,e){return t&&SF(t,e,NF)}var sN=AF,CF=jd;function kF(t,e){return function(r,n){if(r==null)return r;if(!CF(r))return t(r,n);for(var a=r.length,i=e?a:-1,o=Object(r);(e?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var OF=kF,EF=sN,PF=OF,TF=PF(EF),B0=TF,IF=B0,MF=jd;function $F(t,e){var r=-1,n=MF(t)?Array(t.length):[];return IF(t,function(a,i,o){n[++r]=e(a,i,o)}),n}var iN=$F;function RF(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var DF=RF,Mb=ul;function _F(t,e){if(t!==e){var r=t!==void 0,n=t===null,a=t===t,i=Mb(t),o=e!==void 0,l=e===null,c=e===e,d=Mb(e);if(!l&&!d&&!i&&t>e||i&&o&&c&&!l&&!d||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!d&&t<e||d&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var LF=_F,zF=LF;function FF(t,e,r){for(var n=-1,a=t.criteria,i=e.criteria,o=a.length,l=r.length;++n<o;){var c=zF(a[n],i[n]);if(c){if(n>=l)return c;var d=r[n];return c*(d=="desc"?-1:1)}}return t.index-e.index}var BF=FF,nm=A0,UF=C0,VF=ka,HF=iN,WF=DF,qF=W4,YF=BF,GF=bl,KF=on;function JF(t,e,r){e.length?e=nm(e,function(i){return KF(i)?function(o){return UF(o,i.length===1?i[0]:i)}:i}):e=[GF];var n=-1;e=nm(e,qF(VF));var a=HF(t,function(i,o,l){var c=nm(e,function(d){return d(i)});return{criteria:c,index:++n,value:i}});return WF(a,function(i,o){return YF(i,o,r)})}var XF=JF;function QF(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var ZF=QF,eB=ZF,$b=Math.max;function tB(t,e,r){return e=$b(e===void 0?t.length-1:e,0),function(){for(var n=arguments,a=-1,i=$b(n.length-e,0),o=Array(i);++a<i;)o[a]=n[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=n[a];return l[e]=r(o),eB(t,this,l)}}var rB=tB;function nB(t){return function(){return t}}var aB=nB,sB=_i,iB=function(){try{var t=sB(Object,"defineProperty");return t({},"",{}),t}catch{}}(),oN=iB,oB=aB,Rb=oN,lB=bl,cB=Rb?function(t,e){return Rb(t,"toString",{configurable:!0,enumerable:!1,value:oB(e),writable:!0})}:lB,dB=cB,uB=800,fB=16,hB=Date.now;function pB(t){var e=0,r=0;return function(){var n=hB(),a=fB-(n-r);if(r=n,a>0){if(++e>=uB)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var mB=pB,gB=dB,xB=mB,yB=xB(gB),vB=yB,bB=bl,jB=rB,wB=vB;function SB(t,e){return wB(jB(t,e,bB),t+"")}var NB=SB,AB=j0,CB=jd,kB=L0,OB=Ds;function EB(t,e,r){if(!OB(r))return!1;var n=typeof e;return(n=="number"?CB(r)&&kB(e,r.length):n=="string"&&e in r)?AB(r[e],t):!1}var rp=EB,PB=aN,TB=XF,IB=NB,Db=rp,MB=IB(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Db(t,e[0],e[1])?e=[]:r>2&&Db(e[0],e[1],e[2])&&(e=[e[0]]),TB(t,PB(e,1),[])}),$B=MB;const U0=at($B);function wc(t){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wc(t)}function wg(){return wg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wg.apply(this,arguments)}function RB(t,e){return zB(t)||LB(t,e)||_B(t,e)||DB()}function DB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _B(t,e){if(t){if(typeof t=="string")return _b(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _b(t,e)}}function _b(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function LB(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function zB(t){if(Array.isArray(t))return t}function Lb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function am(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lb(Object(r),!0).forEach(function(n){FB(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lb(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FB(t,e,r){return e=BB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BB(t){var e=UB(t,"string");return wc(e)=="symbol"?e:e+""}function UB(t,e){if(wc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VB(t){return Array.isArray(t)&&sr(t[0])&&sr(t[1])?t.join(" ~ "):t}var HB=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,d=c===void 0?{}:c,u=e.payload,f=e.formatter,h=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,x=e.label,g=e.labelFormatter,y=e.accessibilityLayer,j=y===void 0?!1:y,b=function(){if(u&&u.length){var M={padding:0,margin:0},T=(h?U0(u,h):u).map(function(I,z){if(I.type==="none")return null;var U=am({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},l),Y=I.formatter||f||VB,Z=I.value,te=I.name,q=Z,ne=te;if(Y&&q!=null&&ne!=null){var H=Y(Z,te,I,z,u);if(Array.isArray(H)){var Q=RB(H,2);q=Q[0],ne=Q[1]}else q=H}return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:U},sr(ne)?D.createElement("span",{className:"recharts-tooltip-item-name"},ne):null,sr(ne)?D.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,D.createElement("span",{className:"recharts-tooltip-item-value"},q),D.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:M},T)}return null},S=am({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=am({margin:0},d),v=!Ve(x),C=v?x:"",A=He("recharts-default-tooltip",p),k=He("recharts-tooltip-label",m);v&&g&&u!==void 0&&u!==null&&(C=g(x,u));var O=j?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",wg({className:A,style:S},O),D.createElement("p",{className:k,style:w},D.isValidElement(C)?C:"".concat(C)),b())};function Sc(t){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(t)}function Vd(t,e,r){return e=WB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WB(t){var e=qB(t,"string");return Sc(e)=="symbol"?e:e+""}function qB(t,e){if(Sc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Il="recharts-tooltip-wrapper",YB={visibility:"hidden"};function GB(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return He(Il,Vd(Vd(Vd(Vd({},"".concat(Il,"-right"),se(r)&&e&&se(e.x)&&r>=e.x),"".concat(Il,"-left"),se(r)&&e&&se(e.x)&&r<e.x),"".concat(Il,"-bottom"),se(n)&&e&&se(e.y)&&n>=e.y),"".concat(Il,"-top"),se(n)&&e&&se(e.y)&&n<e.y))}function zb(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(i&&se(i[n]))return i[n];var u=r[n]-l-a,f=r[n]+a;if(e[n])return o[n]?u:f;if(o[n]){var h=u,p=c[n];return h<p?Math.max(f,c[n]):Math.max(u,c[n])}var m=f+l,x=c[n]+d;return m>x?Math.max(u,c[n]):Math.max(f,c[n])}function KB(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function JB(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,u,f;return o.height>0&&o.width>0&&r?(u=zb({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=zb({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=KB({translateX:u,translateY:f,useTranslate3d:l})):d=YB,{cssProperties:d,cssClasses:GB({translateX:u,translateY:f,coordinate:r})}}function To(t){"@babel/helpers - typeof";return To=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},To(t)}function Fb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Bb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fb(Object(r),!0).forEach(function(n){Ng(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fb(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cN(n.key),n)}}function ZB(t,e,r){return e&&QB(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eU(t,e,r){return e=Bu(e),tU(t,lN()?Reflect.construct(e,r||[],Bu(t).constructor):e.apply(t,r))}function tU(t,e){if(e&&(To(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rU(t)}function rU(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lN=function(){return!!t})()}function Bu(t){return Bu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bu(t)}function nU(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sg(t,e)}function Sg(t,e){return Sg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Sg(t,e)}function Ng(t,e,r){return e=cN(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cN(t){var e=aU(t,"string");return To(e)=="symbol"?e:e+""}function aU(t,e){if(To(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(To(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ub=1,sU=function(t){function e(){var r;XB(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=eU(this,e,[].concat(a)),Ng(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Ng(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return nU(e,t),ZB(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>Ub||Math.abs(n.height-this.state.lastBoundingBox.height)>Ub)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,p=a.offset,m=a.position,x=a.reverseDirection,g=a.useTranslate3d,y=a.viewBox,j=a.wrapperStyle,b=JB({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:p,position:m,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),S=b.cssClasses,w=b.cssProperties,v=Bb(Bb({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},j);return D.createElement("div",{tabIndex:-1,className:S,style:v,ref:function(A){n.wrapperNode=A}},d)}}])}(N.PureComponent),iU=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Li={isSsr:iU()};function Io(t){"@babel/helpers - typeof";return Io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Io(t)}function Vb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vb(Object(r),!0).forEach(function(n){V0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vb(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uN(n.key),n)}}function cU(t,e,r){return e&&lU(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dU(t,e,r){return e=Uu(e),uU(t,dN()?Reflect.construct(e,r||[],Uu(t).constructor):e.apply(t,r))}function uU(t,e){if(e&&(Io(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fU(t)}function fU(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dN=function(){return!!t})()}function Uu(t){return Uu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uu(t)}function hU(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ag(t,e)}function Ag(t,e){return Ag=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ag(t,e)}function V0(t,e,r){return e=uN(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uN(t){var e=pU(t,"string");return Io(e)=="symbol"?e:e+""}function pU(t,e){if(Io(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Io(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function mU(t){return t.dataKey}function gU(t,e){return D.isValidElement(t)?D.cloneElement(t,e):typeof t=="function"?D.createElement(t,e):D.createElement(HB,e)}var gn=function(t){function e(){return oU(this,e),dU(this,e,arguments)}return hU(e,t),cU(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,f=a.filterNull,h=a.isAnimationActive,p=a.offset,m=a.payload,x=a.payloadUniqBy,g=a.position,y=a.reverseDirection,j=a.useTranslate3d,b=a.viewBox,S=a.wrapperStyle,w=m??[];f&&w.length&&(w=eN(m.filter(function(C){return C.value!=null&&(C.hide!==!0||n.props.includeHidden)}),x,mU));var v=w.length>0;return D.createElement(sU,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:u,hasPayload:v,offset:p,position:g,reverseDirection:y,useTranslate3d:j,viewBox:b,wrapperStyle:S},gU(d,Hb(Hb({},this.props),{},{payload:w})))}}])}(N.PureComponent);V0(gn,"displayName","Tooltip");V0(gn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Li.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var xU=Ca,yU=function(){return xU.Date.now()},vU=yU,bU=/\s/;function jU(t){for(var e=t.length;e--&&bU.test(t.charAt(e)););return e}var wU=jU,SU=wU,NU=/^\s+/;function AU(t){return t&&t.slice(0,SU(t)+1).replace(NU,"")}var CU=AU,kU=CU,Wb=Ds,OU=ul,qb=NaN,EU=/^[-+]0x[0-9a-f]+$/i,PU=/^0b[01]+$/i,TU=/^0o[0-7]+$/i,IU=parseInt;function MU(t){if(typeof t=="number")return t;if(OU(t))return qb;if(Wb(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Wb(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=kU(t);var r=PU.test(t);return r||TU.test(t)?IU(t.slice(2),r?2:8):EU.test(t)?qb:+t}var fN=MU,$U=Ds,sm=vU,Yb=fN,RU="Expected a function",DU=Math.max,_U=Math.min;function LU(t,e,r){var n,a,i,o,l,c,d=0,u=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(RU);e=Yb(e)||0,$U(r)&&(u=!!r.leading,f="maxWait"in r,i=f?DU(Yb(r.maxWait)||0,e):i,h="trailing"in r?!!r.trailing:h);function p(v){var C=n,A=a;return n=a=void 0,d=v,o=t.apply(A,C),o}function m(v){return d=v,l=setTimeout(y,e),u?p(v):o}function x(v){var C=v-c,A=v-d,k=e-C;return f?_U(k,i-A):k}function g(v){var C=v-c,A=v-d;return c===void 0||C>=e||C<0||f&&A>=i}function y(){var v=sm();if(g(v))return j(v);l=setTimeout(y,x(v))}function j(v){return l=void 0,h&&n?p(v):(n=a=void 0,o)}function b(){l!==void 0&&clearTimeout(l),d=0,n=c=a=l=void 0}function S(){return l===void 0?o:j(sm())}function w(){var v=sm(),C=g(v);if(n=arguments,a=this,c=v,C){if(l===void 0)return m(c);if(f)return clearTimeout(l),l=setTimeout(y,e),p(c)}return l===void 0&&(l=setTimeout(y,e)),o}return w.cancel=b,w.flush=S,w}var zU=LU,FU=zU,BU=Ds,UU="Expected a function";function VU(t,e,r){var n=!0,a=!0;if(typeof t!="function")throw new TypeError(UU);return BU(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),FU(t,e,{leading:n,maxWait:e,trailing:a})}var HU=VU;const hN=at(HU);function Nc(t){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nc(t)}function Gb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Gb(Object(r),!0).forEach(function(n){WU(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gb(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WU(t,e,r){return e=qU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qU(t){var e=YU(t,"string");return Nc(e)=="symbol"?e:e+""}function YU(t,e){if(Nc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GU(t,e){return QU(t)||XU(t,e)||JU(t,e)||KU()}function KU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JU(t,e){if(t){if(typeof t=="string")return Kb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kb(t,e)}}function Kb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function XU(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function QU(t){if(Array.isArray(t))return t}var Wd=N.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,o=i===void 0?"100%":i,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,u=d===void 0?0:d,f=t.minHeight,h=t.maxHeight,p=t.children,m=t.debounce,x=m===void 0?0:m,g=t.id,y=t.className,j=t.onResize,b=t.style,S=b===void 0?{}:b,w=N.useRef(null),v=N.useRef();v.current=j,N.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var C=N.useState({containerWidth:a.width,containerHeight:a.height}),A=GU(C,2),k=A[0],O=A[1],$=N.useCallback(function(T,I){O(function(z){var U=Math.round(T),Y=Math.round(I);return z.containerWidth===U&&z.containerHeight===Y?z:{containerWidth:U,containerHeight:Y}})},[]);N.useEffect(function(){var T=function(te){var q,ne=te[0].contentRect,H=ne.width,Q=ne.height;$(H,Q),(q=v.current)===null||q===void 0||q.call(v,H,Q)};x>0&&(T=hN(T,x,{trailing:!0,leading:!1}));var I=new ResizeObserver(T),z=w.current.getBoundingClientRect(),U=z.width,Y=z.height;return $(U,Y),I.observe(w.current),function(){I.disconnect()}},[$,x]);var M=N.useMemo(function(){var T=k.containerWidth,I=k.containerHeight;if(T<0||I<0)return null;na(oi(o)||oi(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),na(!r||r>0,"The aspect(%s) must be greater than zero.",r);var z=oi(o)?T:o,U=oi(c)?I:c;r&&r>0&&(z?U=z/r:U&&(z=U*r),h&&U>h&&(U=h)),na(z>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,U,o,c,u,f,r);var Y=!Array.isArray(p)&&Ua(p.type).endsWith("Chart");return D.Children.map(p,function(Z){return D.isValidElement(Z)?N.cloneElement(Z,Hd({width:z,height:U},Y?{style:Hd({height:"100%",width:"100%",maxHeight:U,maxWidth:z},Z.props.style)}:{})):Z})},[r,p,c,h,f,u,k,o]);return D.createElement("div",{id:g?"".concat(g):void 0,className:He("recharts-responsive-container",y),style:Hd(Hd({},S),{},{width:o,height:c,minWidth:u,minHeight:f,maxHeight:h}),ref:w},M)}),Ac=function(e){return null};Ac.displayName="Cell";function Cc(t){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cc(t)}function Jb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Cg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Jb(Object(r),!0).forEach(function(n){ZU(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jb(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZU(t,e,r){return e=eV(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eV(t){var e=tV(t,"string");return Cc(e)=="symbol"?e:e+""}function tV(t,e){if(Cc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ki={widthCache:{},cacheCount:0},rV=2e3,nV={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Xb="recharts_measurement_span";function aV(t){var e=Cg({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Zl=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Li.isSsr)return{width:0,height:0};var n=aV(r),a=JSON.stringify({text:e,copyStyle:n});if(Ki.widthCache[a])return Ki.widthCache[a];try{var i=document.getElementById(Xb);i||(i=document.createElement("span"),i.setAttribute("id",Xb),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Cg(Cg({},nV),n);Object.assign(i.style,o),i.textContent="".concat(e);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Ki.widthCache[a]=c,++Ki.cacheCount>rV&&(Ki.cacheCount=0,Ki.widthCache={}),c}catch{return{width:0,height:0}}},sV=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function kc(t){"@babel/helpers - typeof";return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kc(t)}function Vu(t,e){return cV(t)||lV(t,e)||oV(t,e)||iV()}function iV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oV(t,e){if(t){if(typeof t=="string")return Qb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qb(t,e)}}function Qb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lV(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function cV(t){if(Array.isArray(t))return t}function dV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fV(n.key),n)}}function uV(t,e,r){return e&&Zb(t.prototype,e),r&&Zb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function fV(t){var e=hV(t,"string");return kc(e)=="symbol"?e:e+""}function hV(t,e){if(kc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var e1=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,t1=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pV=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mV=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,pN={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},gV=Object.keys(pN),oo="NaN";function xV(t,e){return t*pN[e]}var qd=function(){function t(e,r){dV(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!pV.test(r)&&(this.num=NaN,this.unit=""),gV.includes(r)&&(this.num=xV(e,r),this.unit="px")}return uV(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=mV.exec(r))!==null&&n!==void 0?n:[],i=Vu(a,3),o=i[1],l=i[2];return new t(parseFloat(o),l??"")}}])}();function mN(t){if(t.includes(oo))return oo;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=e1.exec(e))!==null&&r!==void 0?r:[],a=Vu(n,4),i=a[1],o=a[2],l=a[3],c=qd.parse(i??""),d=qd.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return oo;e=e.replace(e1,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=t1.exec(e))!==null&&f!==void 0?f:[],p=Vu(h,4),m=p[1],x=p[2],g=p[3],y=qd.parse(m??""),j=qd.parse(g??""),b=x==="+"?y.add(j):y.subtract(j);if(b.isNaN())return oo;e=e.replace(t1,b.toString())}return e}var r1=/\(([^()]*)\)/;function yV(t){for(var e=t;e.includes("(");){var r=r1.exec(e),n=Vu(r,2),a=n[1];e=e.replace(r1,mN(a))}return e}function vV(t){var e=t.replace(/\s+/g,"");return e=yV(e),e=mN(e),e}function bV(t){try{return vV(t)}catch{return oo}}function im(t){var e=bV(t.slice(5,-1));return e===oo?"":e}var jV=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],wV=["dx","dy","angle","className","breakAll"];function kg(){return kg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kg.apply(this,arguments)}function n1(t,e){if(t==null)return{};var r=SV(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function SV(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function a1(t,e){return kV(t)||CV(t,e)||AV(t,e)||NV()}function NV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AV(t,e){if(t){if(typeof t=="string")return s1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s1(t,e)}}function s1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function CV(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function kV(t){if(Array.isArray(t))return t}var gN=/[ \f\n\r\t\v\u2028\u2029]+/,xN=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];Ve(r)||(n?i=r.toString().split(""):i=r.toString().split(gN));var o=i.map(function(c){return{word:c,width:Zl(c,a).width}}),l=n?0:Zl(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},OV=function(e,r,n,a,i){var o=e.maxLines,l=e.children,c=e.style,d=e.breakAll,u=se(o),f=l,h=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(U,Y){var Z=Y.word,te=Y.width,q=U[U.length-1];if(q&&(a==null||i||q.width+te+n<Number(a)))q.words.push(Z),q.width+=te+n;else{var ne={words:[Z],width:te};U.push(ne)}return U},[])},p=h(r),m=function(z){return z.reduce(function(U,Y){return U.width>Y.width?U:Y})};if(!u)return p;for(var x="…",g=function(z){var U=f.slice(0,z),Y=xN({breakAll:d,style:c,children:U+x}).wordsWithComputedWidth,Z=h(Y),te=Z.length>o||m(Z).width>Number(a);return[te,Z]},y=0,j=f.length-1,b=0,S;y<=j&&b<=f.length-1;){var w=Math.floor((y+j)/2),v=w-1,C=g(v),A=a1(C,2),k=A[0],O=A[1],$=g(w),M=a1($,1),T=M[0];if(!k&&!T&&(y=w+1),k&&T&&(j=w-1),!k&&T){S=O;break}b++}return S||p},i1=function(e){var r=Ve(e)?[]:e.toString().split(gN);return[{words:r}]},EV=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,o=e.breakAll,l=e.maxLines;if((r||n)&&!Li.isSsr){var c,d,u=xN({breakAll:o,children:a,style:i});if(u){var f=u.wordsWithComputedWidth,h=u.spaceWidth;c=f,d=h}else return i1(a);return OV({breakAll:o,children:a,maxLines:l,style:i},c,d,r,n)}return i1(a)},o1="#808080",ki=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,d=c===void 0?"0.71em":c,u=e.scaleToFit,f=u===void 0?!1:u,h=e.textAnchor,p=h===void 0?"start":h,m=e.verticalAnchor,x=m===void 0?"end":m,g=e.fill,y=g===void 0?o1:g,j=n1(e,jV),b=N.useMemo(function(){return EV({breakAll:j.breakAll,children:j.children,maxLines:j.maxLines,scaleToFit:f,style:j.style,width:j.width})},[j.breakAll,j.children,j.maxLines,f,j.style,j.width]),S=j.dx,w=j.dy,v=j.angle,C=j.className,A=j.breakAll,k=n1(j,wV);if(!sr(n)||!sr(i))return null;var O=n+(se(S)?S:0),$=i+(se(w)?w:0),M;switch(x){case"start":M=im("calc(".concat(d,")"));break;case"middle":M=im("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:M=im("calc(".concat(b.length-1," * -").concat(l,")"));break}var T=[];if(f){var I=b[0].width,z=j.width;T.push("scale(".concat((se(z)?z/I:1)/I,")"))}return v&&T.push("rotate(".concat(v,", ").concat(O,", ").concat($,")")),T.length&&(k.transform=T.join(" ")),D.createElement("text",kg({},Pe(k,!0),{x:O,y:$,className:He("recharts-text",C),textAnchor:p,fill:y.includes("url")?o1:y}),b.map(function(U,Y){var Z=U.words.join(A?"":" ");return D.createElement("tspan",{x:O,dy:Y===0?M:l,key:"".concat(Z,"-").concat(Y)},Z)}))};function Ss(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function PV(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function H0(t){let e,r,n;t.length!==2?(e=Ss,r=(l,c)=>Ss(t(l),c),n=(l,c)=>t(l)-c):(e=t===Ss||t===PV?t:TV,r=t,n=t);function a(l,c,d=0,u=l.length){if(d<u){if(e(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<0?d=f+1:u=f}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(e(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<=0?d=f+1:u=f}while(d<u)}return d}function o(l,c,d=0,u=l.length){const f=a(l,c,d,u-1);return f>d&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function TV(){return 0}function yN(t){return t===null?NaN:+t}function*IV(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const MV=H0(Ss),wd=MV.right;H0(yN).center;class l1 extends Map{constructor(e,r=DV){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(c1(this,e))}has(e){return super.has(c1(this,e))}set(e,r){return super.set($V(this,e),r)}delete(e){return super.delete(RV(this,e))}}function c1({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function $V({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function RV({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function DV(t){return t!==null&&typeof t=="object"?t.valueOf():t}function _V(t=Ss){if(t===Ss)return vN;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function vN(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const LV=Math.sqrt(50),zV=Math.sqrt(10),FV=Math.sqrt(2);function Hu(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=LV?10:i>=zV?5:i>=FV?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=r&&r<2?Hu(t,e,r*2):[l,c,d]}function Og(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,o]=n?Hu(e,t,r):Hu(t,e,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function Eg(t,e,r){return e=+e,t=+t,r=+r,Hu(t,e,r)[2]}function Pg(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?Eg(e,t,r):Eg(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function d1(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function u1(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function bN(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?vN:_V(a);n>r;){if(n-r>600){const c=n-r+1,d=e-r+1,u=Math.log(c),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),p=Math.max(r,Math.floor(e-d*f/c+h)),m=Math.min(n,Math.floor(e+(c-d)*f/c+h));bN(t,e,p,m,a)}const i=t[e];let o=r,l=n;for(Ml(t,r,e),a(t[n],i)>0&&Ml(t,r,n);o<l;){for(Ml(t,o,l),++o,--l;a(t[o],i)<0;)++o;for(;a(t[l],i)>0;)--l}a(t[r],i)===0?Ml(t,r,l):(++l,Ml(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function Ml(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function BV(t,e,r){if(t=Float64Array.from(IV(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return u1(t);if(e>=1)return d1(t);var n,a=(n-1)*e,i=Math.floor(a),o=d1(bN(t,i).subarray(0,i+1)),l=u1(t.subarray(i+1));return o+(l-o)*(a-i)}}function UV(t,e,r=yN){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),o=+r(t[i],i,t),l=+r(t[i+1],i+1,t);return o+(l-o)*(a-i)}}function VV(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function Yn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ts(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Tg=Symbol("implicit");function W0(){var t=new l1,e=[],r=[],n=Tg;function a(i){let o=t.get(i);if(o===void 0){if(n!==Tg)return n;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new l1;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return W0(e,r).unknown(n)},Yn.apply(a,arguments),a}function Oc(){var t=W0().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,o,l=!1,c=0,d=0,u=.5;delete t.unknown;function f(){var h=e().length,p=a<n,m=p?a:n,x=p?n:a;i=(x-m)/Math.max(1,h-c+d*2),l&&(i=Math.floor(i)),m+=(x-m-i*(h-c))*u,o=i*(1-c),l&&(m=Math.round(m),o=Math.round(o));var g=VV(h).map(function(y){return m+i*y});return r(p?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(h){return arguments.length?(l=!!h,f()):l},t.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(d=+h,f()):d},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},t.copy=function(){return Oc(e(),[n,a]).round(l).paddingInner(c).paddingOuter(d).align(u)},Yn.apply(f(),arguments)}function jN(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return jN(e())},t}function ec(){return jN(Oc.apply(null,arguments).paddingInner(1))}function q0(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function wN(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Sd(){}var Ec=.7,Wu=1/Ec,mo="\\s*([+-]?\\d+)\\s*",Pc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ga="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HV=/^#([0-9a-f]{3,8})$/,WV=new RegExp(`^rgb\\(${mo},${mo},${mo}\\)$`),qV=new RegExp(`^rgb\\(${ga},${ga},${ga}\\)$`),YV=new RegExp(`^rgba\\(${mo},${mo},${mo},${Pc}\\)$`),GV=new RegExp(`^rgba\\(${ga},${ga},${ga},${Pc}\\)$`),KV=new RegExp(`^hsl\\(${Pc},${ga},${ga}\\)$`),JV=new RegExp(`^hsla\\(${Pc},${ga},${ga},${Pc}\\)$`),f1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};q0(Sd,Tc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:h1,formatHex:h1,formatHex8:XV,formatHsl:QV,formatRgb:p1,toString:p1});function h1(){return this.rgb().formatHex()}function XV(){return this.rgb().formatHex8()}function QV(){return SN(this).formatHsl()}function p1(){return this.rgb().formatRgb()}function Tc(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=HV.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?m1(e):r===3?new an(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Yd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Yd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=WV.exec(t))?new an(e[1],e[2],e[3],1):(e=qV.exec(t))?new an(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=YV.exec(t))?Yd(e[1],e[2],e[3],e[4]):(e=GV.exec(t))?Yd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=KV.exec(t))?y1(e[1],e[2]/100,e[3]/100,1):(e=JV.exec(t))?y1(e[1],e[2]/100,e[3]/100,e[4]):f1.hasOwnProperty(t)?m1(f1[t]):t==="transparent"?new an(NaN,NaN,NaN,0):null}function m1(t){return new an(t>>16&255,t>>8&255,t&255,1)}function Yd(t,e,r,n){return n<=0&&(t=e=r=NaN),new an(t,e,r,n)}function ZV(t){return t instanceof Sd||(t=Tc(t)),t?(t=t.rgb(),new an(t.r,t.g,t.b,t.opacity)):new an}function Ig(t,e,r,n){return arguments.length===1?ZV(t):new an(t,e,r,n??1)}function an(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}q0(an,Ig,wN(Sd,{brighter(t){return t=t==null?Wu:Math.pow(Wu,t),new an(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ec:Math.pow(Ec,t),new an(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new an(xi(this.r),xi(this.g),xi(this.b),qu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:g1,formatHex:g1,formatHex8:eH,formatRgb:x1,toString:x1}));function g1(){return`#${li(this.r)}${li(this.g)}${li(this.b)}`}function eH(){return`#${li(this.r)}${li(this.g)}${li(this.b)}${li((isNaN(this.opacity)?1:this.opacity)*255)}`}function x1(){const t=qu(this.opacity);return`${t===1?"rgb(":"rgba("}${xi(this.r)}, ${xi(this.g)}, ${xi(this.b)}${t===1?")":`, ${t})`}`}function qu(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function li(t){return t=xi(t),(t<16?"0":"")+t.toString(16)}function y1(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Xn(t,e,r,n)}function SN(t){if(t instanceof Xn)return new Xn(t.h,t.s,t.l,t.opacity);if(t instanceof Sd||(t=Tc(t)),!t)return new Xn;if(t instanceof Xn)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(e===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Xn(o,l,c,t.opacity)}function tH(t,e,r,n){return arguments.length===1?SN(t):new Xn(t,e,r,n??1)}function Xn(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}q0(Xn,tH,wN(Sd,{brighter(t){return t=t==null?Wu:Math.pow(Wu,t),new Xn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ec:Math.pow(Ec,t),new Xn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new an(om(t>=240?t-240:t+120,a,n),om(t,a,n),om(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Xn(v1(this.h),Gd(this.s),Gd(this.l),qu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qu(this.opacity);return`${t===1?"hsl(":"hsla("}${v1(this.h)}, ${Gd(this.s)*100}%, ${Gd(this.l)*100}%${t===1?")":`, ${t})`}`}}));function v1(t){return t=(t||0)%360,t<0?t+360:t}function Gd(t){return Math.max(0,Math.min(1,t||0))}function om(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const Y0=t=>()=>t;function rH(t,e){return function(r){return t+r*e}}function nH(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function aH(t){return(t=+t)==1?NN:function(e,r){return r-e?nH(e,r,t):Y0(isNaN(e)?r:e)}}function NN(t,e){var r=e-t;return r?rH(t,r):Y0(isNaN(t)?e:t)}const b1=function t(e){var r=aH(e);function n(a,i){var o=r((a=Ig(a)).r,(i=Ig(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),d=NN(a.opacity,i.opacity);return function(u){return a.r=o(u),a.g=l(u),a.b=c(u),a.opacity=d(u),a+""}}return n.gamma=t,n}(1);function sH(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function iH(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function oH(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=jl(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function lH(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Yu(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function cH(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=jl(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Mg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lm=new RegExp(Mg.source,"g");function dH(t){return function(){return t}}function uH(t){return function(e){return t(e)+""}}function fH(t,e){var r=Mg.lastIndex=lm.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=Mg.exec(t))&&(a=lm.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Yu(n,a)})),r=lm.lastIndex;return r<e.length&&(i=e.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?uH(c[0].x):dH(e):(e=c.length,function(d){for(var u=0,f;u<e;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function jl(t,e){var r=typeof e,n;return e==null||r==="boolean"?Y0(e):(r==="number"?Yu:r==="string"?(n=Tc(e))?(e=n,b1):fH:e instanceof Tc?b1:e instanceof Date?lH:iH(e)?sH:Array.isArray(e)?oH:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?cH:Yu)(t,e)}function G0(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function hH(t,e){e===void 0&&(e=t,t=jl);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function pH(t){return function(){return t}}function Gu(t){return+t}var j1=[0,1];function Vr(t){return t}function $g(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:pH(isNaN(e)?NaN:.5)}function mH(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function gH(t,e,r){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=$g(a,n),i=r(o,i)):(n=$g(n,a),i=r(i,o)),function(l){return i(n(l))}}function xH(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=$g(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(l){var c=wd(t,l,1,n)-1;return i[c](a[c](l))}}function Nd(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function np(){var t=j1,e=j1,r=jl,n,a,i,o=Vr,l,c,d;function u(){var h=Math.min(t.length,e.length);return o!==Vr&&(o=mH(t[0],t[h-1])),l=h>2?xH:gH,c=d=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(t.map(n),e,r)))(n(o(h)))}return f.invert=function(h){return o(a((d||(d=l(e,t.map(n),Yu)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Gu),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=G0,u()},f.clamp=function(h){return arguments.length?(o=h?!0:Vr,u()):o!==Vr},f.interpolate=function(h){return arguments.length?(r=h,u()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,p){return n=h,a=p,u()}}function K0(){return np()(Vr,Vr)}function yH(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ku(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Mo(t){return t=Ku(Math.abs(t)),t?t[1]:NaN}function vH(t,e){return function(r,n){for(var a=r.length,i=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return i.reverse().join(e)}}function bH(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var jH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ic(t){if(!(e=jH.exec(t)))throw new Error("invalid format: "+t);var e;return new J0({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ic.prototype=J0.prototype;function J0(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}J0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wH(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var AN;function SH(t,e){var r=Ku(t,e);if(!r)return t+"";var n=r[0],a=r[1],i=a-(AN=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ku(t,Math.max(0,e+i-1))[0]}function w1(t,e){var r=Ku(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const S1={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:yH,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>w1(t*100,e),r:w1,s:SH,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function N1(t){return t}var A1=Array.prototype.map,C1=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function NH(t){var e=t.grouping===void 0||t.thousands===void 0?N1:vH(A1.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?N1:bH(A1.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(f){f=Ic(f);var h=f.fill,p=f.align,m=f.sign,x=f.symbol,g=f.zero,y=f.width,j=f.comma,b=f.precision,S=f.trim,w=f.type;w==="n"?(j=!0,w="g"):S1[w]||(b===void 0&&(b=12),S=!0,w="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var v=x==="$"?r:x==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",C=x==="$"?n:/[%p]/.test(w)?o:"",A=S1[w],k=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function O($){var M=v,T=C,I,z,U;if(w==="c")T=A($)+T,$="";else{$=+$;var Y=$<0||1/$<0;if($=isNaN($)?c:A(Math.abs($),b),S&&($=wH($)),Y&&+$==0&&m!=="+"&&(Y=!1),M=(Y?m==="("?m:l:m==="-"||m==="("?"":m)+M,T=(w==="s"?C1[8+AN/3]:"")+T+(Y&&m==="("?")":""),k){for(I=-1,z=$.length;++I<z;)if(U=$.charCodeAt(I),48>U||U>57){T=(U===46?a+$.slice(I+1):$.slice(I))+T,$=$.slice(0,I);break}}}j&&!g&&($=e($,1/0));var Z=M.length+$.length+T.length,te=Z<y?new Array(y-Z+1).join(h):"";switch(j&&g&&($=e(te+$,te.length?y-T.length:1/0),te=""),p){case"<":$=M+$+T+te;break;case"=":$=M+te+$+T;break;case"^":$=te.slice(0,Z=te.length>>1)+M+$+T+te.slice(Z);break;default:$=te+M+$+T;break}return i($)}return O.toString=function(){return f+""},O}function u(f,h){var p=d((f=Ic(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Mo(h)/3)))*3,x=Math.pow(10,-m),g=C1[8+m/3];return function(y){return p(x*y)+g}}return{format:d,formatPrefix:u}}var Kd,X0,CN;AH({thousands:",",grouping:[3],currency:["$",""]});function AH(t){return Kd=NH(t),X0=Kd.format,CN=Kd.formatPrefix,Kd}function CH(t){return Math.max(0,-Mo(Math.abs(t)))}function kH(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mo(e)/3)))*3-Mo(Math.abs(t)))}function OH(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Mo(e)-Mo(t))+1}function kN(t,e,r,n){var a=Pg(t,e,r),i;switch(n=Ic(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=kH(a,o))&&(n.precision=i),CN(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=OH(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=CH(a))&&(n.precision=i-(n.type==="%")*2);break}}return X0(n)}function _s(t){var e=t.domain;return t.ticks=function(r){var n=e();return Og(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return kN(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,o=n[a],l=n[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=a,a=i,i=d);u-- >0;){if(d=Eg(o,l,r),d===c)return n[a]=o,n[i]=l,e(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function Ju(){var t=K0();return t.copy=function(){return Nd(t,Ju())},Yn.apply(t,arguments),_s(t)}function ON(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Gu),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return ON(t).unknown(e)},t=arguments.length?Array.from(t,Gu):[0,1],_s(r)}function EN(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),t[r]=e.floor(a),t[n]=e.ceil(i),t}function k1(t){return Math.log(t)}function O1(t){return Math.exp(t)}function EH(t){return-Math.log(-t)}function PH(t){return-Math.exp(-t)}function TH(t){return isFinite(t)?+("1e"+t):t<0?0:t}function IH(t){return t===10?TH:t===Math.E?Math.exp:e=>Math.pow(t,e)}function MH(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function E1(t){return(e,r)=>-t(-e,r)}function Q0(t){const e=t(k1,O1),r=e.domain;let n=10,a,i;function o(){return a=MH(n),i=IH(n),r()[0]<0?(a=E1(a),i=E1(i),t(EH,PH)):t(k1,O1),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let h=a(d),p=a(u),m,x;const g=l==null?10:+l;let y=[];if(!(n%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),d>0){for(;h<=p;++h)for(m=1;m<n;++m)if(x=h<0?m/i(-h):m*i(h),!(x<d)){if(x>u)break;y.push(x)}}else for(;h<=p;++h)for(m=n-1;m>=1;--m)if(x=h>0?m/i(-h):m*i(h),!(x<d)){if(x>u)break;y.push(x)}y.length*2<g&&(y=Og(d,u,g))}else y=Og(h,p,Math.min(p-h,g)).map(i);return f?y.reverse():y},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Ic(c)).precision==null&&(c.trim=!0),c=X0(c)),l===1/0)return c;const d=Math.max(1,n*l/e.ticks().length);return u=>{let f=u/i(Math.round(a(u)));return f*n<n-.5&&(f*=n),f<=d?c(u):""}},e.nice=()=>r(EN(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),e}function PN(){const t=Q0(np()).domain([1,10]);return t.copy=()=>Nd(t,PN()).base(t.base()),Yn.apply(t,arguments),t}function P1(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function T1(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Z0(t){var e=1,r=t(P1(e),T1(e));return r.constant=function(n){return arguments.length?t(P1(e=+n),T1(e)):e},_s(r)}function TN(){var t=Z0(np());return t.copy=function(){return Nd(t,TN()).constant(t.constant())},Yn.apply(t,arguments)}function I1(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function $H(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function RH(t){return t<0?-t*t:t*t}function ey(t){var e=t(Vr,Vr),r=1;function n(){return r===1?t(Vr,Vr):r===.5?t($H,RH):t(I1(r),I1(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},_s(e)}function ty(){var t=ey(np());return t.copy=function(){return Nd(t,ty()).exponent(t.exponent())},Yn.apply(t,arguments),t}function DH(){return ty.apply(null,arguments).exponent(.5)}function M1(t){return Math.sign(t)*t*t}function _H(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function IN(){var t=K0(),e=[0,1],r=!1,n;function a(i){var o=_H(t(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return t.invert(M1(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,Gu)).map(M1)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return IN(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Yn.apply(a,arguments),_s(a)}function MN(){var t=[],e=[],r=[],n;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=UV(t,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:e[wd(r,o)]}return i.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Ss),a()},i.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return MN().domain(t).range(e).unknown(n)},Yn.apply(i,arguments)}function $N(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[wd(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,n[0]]:d>=r?[n[r-1],e]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return $N().domain([t,e]).range(a).unknown(i)},Yn.apply(_s(o),arguments)}function RN(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[wd(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return RN().domain(t).range(e).unknown(r)},Yn.apply(a,arguments)}const cm=new Date,dm=new Date;function or(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),e(i,l),t(i);while(d<i&&i<o);return c},a.filter=i=>or(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!i(o););else for(;--l>=0;)for(;e(o,1),!i(o););}),r&&(a.count=(i,o)=>(cm.setTime(+i),dm.setTime(+o),t(cm),t(dm),Math.floor(r(cm,dm))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Xu=or(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Xu.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?or(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Xu);Xu.range;const Da=1e3,_n=Da*60,_a=_n*60,Ja=_a*24,ry=Ja*7,$1=Ja*30,um=Ja*365,ci=or(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Da)},(t,e)=>(e-t)/Da,t=>t.getUTCSeconds());ci.range;const ny=or(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Da)},(t,e)=>{t.setTime(+t+e*_n)},(t,e)=>(e-t)/_n,t=>t.getMinutes());ny.range;const ay=or(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*_n)},(t,e)=>(e-t)/_n,t=>t.getUTCMinutes());ay.range;const sy=or(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Da-t.getMinutes()*_n)},(t,e)=>{t.setTime(+t+e*_a)},(t,e)=>(e-t)/_a,t=>t.getHours());sy.range;const iy=or(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*_a)},(t,e)=>(e-t)/_a,t=>t.getUTCHours());iy.range;const Ad=or(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*_n)/Ja,t=>t.getDate()-1);Ad.range;const ap=or(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ja,t=>t.getUTCDate()-1);ap.range;const DN=or(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ja,t=>Math.floor(t/Ja));DN.range;function zi(t){return or(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*_n)/ry)}const sp=zi(0),Qu=zi(1),LH=zi(2),zH=zi(3),$o=zi(4),FH=zi(5),BH=zi(6);sp.range;Qu.range;LH.range;zH.range;$o.range;FH.range;BH.range;function Fi(t){return or(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/ry)}const ip=Fi(0),Zu=Fi(1),UH=Fi(2),VH=Fi(3),Ro=Fi(4),HH=Fi(5),WH=Fi(6);ip.range;Zu.range;UH.range;VH.range;Ro.range;HH.range;WH.range;const oy=or(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());oy.range;const ly=or(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ly.range;const Xa=or(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Xa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:or(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Xa.range;const Qa=or(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Qa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:or(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Qa.range;function _N(t,e,r,n,a,i){const o=[[ci,1,Da],[ci,5,5*Da],[ci,15,15*Da],[ci,30,30*Da],[i,1,_n],[i,5,5*_n],[i,15,15*_n],[i,30,30*_n],[a,1,_a],[a,3,3*_a],[a,6,6*_a],[a,12,12*_a],[n,1,Ja],[n,2,2*Ja],[r,1,ry],[e,1,$1],[e,3,3*$1],[t,1,um]];function l(d,u,f){const h=u<d;h&&([d,u]=[u,d]);const p=f&&typeof f.range=="function"?f:c(d,u,f),m=p?p.range(d,+u+1):[];return h?m.reverse():m}function c(d,u,f){const h=Math.abs(u-d)/f,p=H0(([,,g])=>g).right(o,h);if(p===o.length)return t.every(Pg(d/um,u/um,f));if(p===0)return Xu.every(Math.max(Pg(d,u,f),1));const[m,x]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return m.every(x)}return[l,c]}const[qH,YH]=_N(Qa,ly,ip,DN,iy,ay),[GH,KH]=_N(Xa,oy,sp,Ad,sy,ny);function fm(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function hm(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function $l(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function JH(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,d=Rl(a),u=Dl(a),f=Rl(i),h=Dl(i),p=Rl(o),m=Dl(o),x=Rl(l),g=Dl(l),y=Rl(c),j=Dl(c),b={a:Y,A:Z,b:te,B:q,c:null,d:F1,e:F1,f:vW,g:EW,G:TW,H:gW,I:xW,j:yW,L:LN,m:bW,M:jW,p:ne,q:H,Q:V1,s:H1,S:wW,u:SW,U:NW,V:AW,w:CW,W:kW,x:null,X:null,y:OW,Y:PW,Z:IW,"%":U1},S={a:Q,A:de,b:ie,B:Re,c:null,d:B1,e:B1,f:DW,g:qW,G:GW,H:MW,I:$W,j:RW,L:FN,m:_W,M:LW,p:Ae,q:je,Q:V1,s:H1,S:zW,u:FW,U:BW,V:UW,w:VW,W:HW,x:null,X:null,y:WW,Y:YW,Z:KW,"%":U1},w={a:O,A:$,b:M,B:T,c:I,d:L1,e:L1,f:fW,g:_1,G:D1,H:z1,I:z1,j:lW,L:uW,m:oW,M:cW,p:k,q:iW,Q:pW,s:mW,S:dW,u:tW,U:rW,V:nW,w:eW,W:aW,x:z,X:U,y:_1,Y:D1,Z:sW,"%":hW};b.x=v(r,b),b.X=v(n,b),b.c=v(e,b),S.x=v(r,S),S.X=v(n,S),S.c=v(e,S);function v(X,ye){return function(Ne){var ee=[],Qe=-1,L=0,oe=X.length,pe,Ge,ut;for(Ne instanceof Date||(Ne=new Date(+Ne));++Qe<oe;)X.charCodeAt(Qe)===37&&(ee.push(X.slice(L,Qe)),(Ge=R1[pe=X.charAt(++Qe)])!=null?pe=X.charAt(++Qe):Ge=pe==="e"?" ":"0",(ut=ye[pe])&&(pe=ut(Ne,Ge)),ee.push(pe),L=Qe+1);return ee.push(X.slice(L,Qe)),ee.join("")}}function C(X,ye){return function(Ne){var ee=$l(1900,void 0,1),Qe=A(ee,X,Ne+="",0),L,oe;if(Qe!=Ne.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(ye&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(L=hm($l(ee.y,0,1)),oe=L.getUTCDay(),L=oe>4||oe===0?Zu.ceil(L):Zu(L),L=ap.offset(L,(ee.V-1)*7),ee.y=L.getUTCFullYear(),ee.m=L.getUTCMonth(),ee.d=L.getUTCDate()+(ee.w+6)%7):(L=fm($l(ee.y,0,1)),oe=L.getDay(),L=oe>4||oe===0?Qu.ceil(L):Qu(L),L=Ad.offset(L,(ee.V-1)*7),ee.y=L.getFullYear(),ee.m=L.getMonth(),ee.d=L.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),oe="Z"in ee?hm($l(ee.y,0,1)).getUTCDay():fm($l(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(oe+5)%7:ee.w+ee.U*7-(oe+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,hm(ee)):fm(ee)}}function A(X,ye,Ne,ee){for(var Qe=0,L=ye.length,oe=Ne.length,pe,Ge;Qe<L;){if(ee>=oe)return-1;if(pe=ye.charCodeAt(Qe++),pe===37){if(pe=ye.charAt(Qe++),Ge=w[pe in R1?ye.charAt(Qe++):pe],!Ge||(ee=Ge(X,Ne,ee))<0)return-1}else if(pe!=Ne.charCodeAt(ee++))return-1}return ee}function k(X,ye,Ne){var ee=d.exec(ye.slice(Ne));return ee?(X.p=u.get(ee[0].toLowerCase()),Ne+ee[0].length):-1}function O(X,ye,Ne){var ee=p.exec(ye.slice(Ne));return ee?(X.w=m.get(ee[0].toLowerCase()),Ne+ee[0].length):-1}function $(X,ye,Ne){var ee=f.exec(ye.slice(Ne));return ee?(X.w=h.get(ee[0].toLowerCase()),Ne+ee[0].length):-1}function M(X,ye,Ne){var ee=y.exec(ye.slice(Ne));return ee?(X.m=j.get(ee[0].toLowerCase()),Ne+ee[0].length):-1}function T(X,ye,Ne){var ee=x.exec(ye.slice(Ne));return ee?(X.m=g.get(ee[0].toLowerCase()),Ne+ee[0].length):-1}function I(X,ye,Ne){return A(X,e,ye,Ne)}function z(X,ye,Ne){return A(X,r,ye,Ne)}function U(X,ye,Ne){return A(X,n,ye,Ne)}function Y(X){return o[X.getDay()]}function Z(X){return i[X.getDay()]}function te(X){return c[X.getMonth()]}function q(X){return l[X.getMonth()]}function ne(X){return a[+(X.getHours()>=12)]}function H(X){return 1+~~(X.getMonth()/3)}function Q(X){return o[X.getUTCDay()]}function de(X){return i[X.getUTCDay()]}function ie(X){return c[X.getUTCMonth()]}function Re(X){return l[X.getUTCMonth()]}function Ae(X){return a[+(X.getUTCHours()>=12)]}function je(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var ye=v(X+="",b);return ye.toString=function(){return X},ye},parse:function(X){var ye=C(X+="",!1);return ye.toString=function(){return X},ye},utcFormat:function(X){var ye=v(X+="",S);return ye.toString=function(){return X},ye},utcParse:function(X){var ye=C(X+="",!0);return ye.toString=function(){return X},ye}}}var R1={"-":"",_:" ",0:"0"},vr=/^\s*\d+/,XH=/^%/,QH=/[\\^$*+?|[\]().{}]/g;function nt(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function ZH(t){return t.replace(QH,"\\$&")}function Rl(t){return new RegExp("^(?:"+t.map(ZH).join("|")+")","i")}function Dl(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function eW(t,e,r){var n=vr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function tW(t,e,r){var n=vr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function rW(t,e,r){var n=vr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function nW(t,e,r){var n=vr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function aW(t,e,r){var n=vr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function D1(t,e,r){var n=vr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function _1(t,e,r){var n=vr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function sW(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function iW(t,e,r){var n=vr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function oW(t,e,r){var n=vr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function L1(t,e,r){var n=vr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function lW(t,e,r){var n=vr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function z1(t,e,r){var n=vr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function cW(t,e,r){var n=vr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function dW(t,e,r){var n=vr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function uW(t,e,r){var n=vr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function fW(t,e,r){var n=vr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function hW(t,e,r){var n=XH.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function pW(t,e,r){var n=vr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function mW(t,e,r){var n=vr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function F1(t,e){return nt(t.getDate(),e,2)}function gW(t,e){return nt(t.getHours(),e,2)}function xW(t,e){return nt(t.getHours()%12||12,e,2)}function yW(t,e){return nt(1+Ad.count(Xa(t),t),e,3)}function LN(t,e){return nt(t.getMilliseconds(),e,3)}function vW(t,e){return LN(t,e)+"000"}function bW(t,e){return nt(t.getMonth()+1,e,2)}function jW(t,e){return nt(t.getMinutes(),e,2)}function wW(t,e){return nt(t.getSeconds(),e,2)}function SW(t){var e=t.getDay();return e===0?7:e}function NW(t,e){return nt(sp.count(Xa(t)-1,t),e,2)}function zN(t){var e=t.getDay();return e>=4||e===0?$o(t):$o.ceil(t)}function AW(t,e){return t=zN(t),nt($o.count(Xa(t),t)+(Xa(t).getDay()===4),e,2)}function CW(t){return t.getDay()}function kW(t,e){return nt(Qu.count(Xa(t)-1,t),e,2)}function OW(t,e){return nt(t.getFullYear()%100,e,2)}function EW(t,e){return t=zN(t),nt(t.getFullYear()%100,e,2)}function PW(t,e){return nt(t.getFullYear()%1e4,e,4)}function TW(t,e){var r=t.getDay();return t=r>=4||r===0?$o(t):$o.ceil(t),nt(t.getFullYear()%1e4,e,4)}function IW(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+nt(e/60|0,"0",2)+nt(e%60,"0",2)}function B1(t,e){return nt(t.getUTCDate(),e,2)}function MW(t,e){return nt(t.getUTCHours(),e,2)}function $W(t,e){return nt(t.getUTCHours()%12||12,e,2)}function RW(t,e){return nt(1+ap.count(Qa(t),t),e,3)}function FN(t,e){return nt(t.getUTCMilliseconds(),e,3)}function DW(t,e){return FN(t,e)+"000"}function _W(t,e){return nt(t.getUTCMonth()+1,e,2)}function LW(t,e){return nt(t.getUTCMinutes(),e,2)}function zW(t,e){return nt(t.getUTCSeconds(),e,2)}function FW(t){var e=t.getUTCDay();return e===0?7:e}function BW(t,e){return nt(ip.count(Qa(t)-1,t),e,2)}function BN(t){var e=t.getUTCDay();return e>=4||e===0?Ro(t):Ro.ceil(t)}function UW(t,e){return t=BN(t),nt(Ro.count(Qa(t),t)+(Qa(t).getUTCDay()===4),e,2)}function VW(t){return t.getUTCDay()}function HW(t,e){return nt(Zu.count(Qa(t)-1,t),e,2)}function WW(t,e){return nt(t.getUTCFullYear()%100,e,2)}function qW(t,e){return t=BN(t),nt(t.getUTCFullYear()%100,e,2)}function YW(t,e){return nt(t.getUTCFullYear()%1e4,e,4)}function GW(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Ro(t):Ro.ceil(t),nt(t.getUTCFullYear()%1e4,e,4)}function KW(){return"+0000"}function U1(){return"%"}function V1(t){return+t}function H1(t){return Math.floor(+t/1e3)}var Ji,UN,VN;JW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function JW(t){return Ji=JH(t),UN=Ji.format,Ji.parse,VN=Ji.utcFormat,Ji.utcParse,Ji}function XW(t){return new Date(t)}function QW(t){return t instanceof Date?+t:+new Date(+t)}function cy(t,e,r,n,a,i,o,l,c,d){var u=K0(),f=u.invert,h=u.domain,p=d(".%L"),m=d(":%S"),x=d("%I:%M"),g=d("%I %p"),y=d("%a %d"),j=d("%b %d"),b=d("%B"),S=d("%Y");function w(v){return(c(v)<v?p:l(v)<v?m:o(v)<v?x:i(v)<v?g:n(v)<v?a(v)<v?y:j:r(v)<v?b:S)(v)}return u.invert=function(v){return new Date(f(v))},u.domain=function(v){return arguments.length?h(Array.from(v,QW)):h().map(XW)},u.ticks=function(v){var C=h();return t(C[0],C[C.length-1],v??10)},u.tickFormat=function(v,C){return C==null?w:d(C)},u.nice=function(v){var C=h();return(!v||typeof v.range!="function")&&(v=e(C[0],C[C.length-1],v??10)),v?h(EN(C,v)):u},u.copy=function(){return Nd(u,cy(t,e,r,n,a,i,o,l,c,d))},u}function ZW(){return Yn.apply(cy(GH,KH,Xa,oy,sp,Ad,sy,ny,ci,UN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function eq(){return Yn.apply(cy(qH,YH,Qa,ly,ip,ap,iy,ay,ci,VN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function op(){var t=0,e=1,r,n,a,i,o=Vr,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([t,e]=f,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),d):[t,e]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(h){var p,m;return arguments.length?([p,m]=h,o=f(p,m),d):[o(0),o(1)]}}return d.range=u(jl),d.rangeRound=u(G0),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),d}}function Ls(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function HN(){var t=_s(op()(Vr));return t.copy=function(){return Ls(t,HN())},ts.apply(t,arguments)}function WN(){var t=Q0(op()).domain([1,10]);return t.copy=function(){return Ls(t,WN()).base(t.base())},ts.apply(t,arguments)}function qN(){var t=Z0(op());return t.copy=function(){return Ls(t,qN()).constant(t.constant())},ts.apply(t,arguments)}function dy(){var t=ey(op());return t.copy=function(){return Ls(t,dy()).exponent(t.exponent())},ts.apply(t,arguments)}function tq(){return dy.apply(null,arguments).exponent(.5)}function YN(){var t=[],e=Vr;function r(n){if(n!=null&&!isNaN(n=+n))return e((wd(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ss),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>BV(t,i/n))},r.copy=function(){return YN(e).domain(t)},ts.apply(r,arguments)}function lp(){var t=0,e=.5,r=1,n=1,a,i,o,l,c,d=Vr,u,f=!1,h;function p(x){return isNaN(x=+x)?h:(x=.5+((x=+u(x))-i)*(n*x<n*i?l:c),d(f?Math.max(0,Math.min(1,x)):x))}p.domain=function(x){return arguments.length?([t,e,r]=x,a=u(t=+t),i=u(e=+e),o=u(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,p):[t,e,r]},p.clamp=function(x){return arguments.length?(f=!!x,p):f},p.interpolator=function(x){return arguments.length?(d=x,p):d};function m(x){return function(g){var y,j,b;return arguments.length?([y,j,b]=g,d=hH(x,[y,j,b]),p):[d(0),d(.5),d(1)]}}return p.range=m(jl),p.rangeRound=m(G0),p.unknown=function(x){return arguments.length?(h=x,p):h},function(x){return u=x,a=x(t),i=x(e),o=x(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,p}}function GN(){var t=_s(lp()(Vr));return t.copy=function(){return Ls(t,GN())},ts.apply(t,arguments)}function KN(){var t=Q0(lp()).domain([.1,1,10]);return t.copy=function(){return Ls(t,KN()).base(t.base())},ts.apply(t,arguments)}function JN(){var t=Z0(lp());return t.copy=function(){return Ls(t,JN()).constant(t.constant())},ts.apply(t,arguments)}function uy(){var t=ey(lp());return t.copy=function(){return Ls(t,uy()).exponent(t.exponent())},ts.apply(t,arguments)}function rq(){return uy.apply(null,arguments).exponent(.5)}const W1=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Oc,scaleDiverging:GN,scaleDivergingLog:KN,scaleDivergingPow:uy,scaleDivergingSqrt:rq,scaleDivergingSymlog:JN,scaleIdentity:ON,scaleImplicit:Tg,scaleLinear:Ju,scaleLog:PN,scaleOrdinal:W0,scalePoint:ec,scalePow:ty,scaleQuantile:MN,scaleQuantize:$N,scaleRadial:IN,scaleSequential:HN,scaleSequentialLog:WN,scaleSequentialPow:dy,scaleSequentialQuantile:YN,scaleSequentialSqrt:tq,scaleSequentialSymlog:qN,scaleSqrt:DH,scaleSymlog:TN,scaleThreshold:RN,scaleTime:ZW,scaleUtc:eq,tickFormat:kN},Symbol.toStringTag,{value:"Module"}));var nq=ul;function aq(t,e,r){for(var n=-1,a=t.length;++n<a;){var i=t[n],o=e(i);if(o!=null&&(l===void 0?o===o&&!nq(o):r(o,l)))var l=o,c=i}return c}var cp=aq;function sq(t,e){return t>e}var XN=sq,iq=cp,oq=XN,lq=bl;function cq(t){return t&&t.length?iq(t,lq,oq):void 0}var dq=cq;const xs=at(dq);function uq(t,e){return t<e}var QN=uq,fq=cp,hq=QN,pq=bl;function mq(t){return t&&t.length?fq(t,pq,hq):void 0}var gq=mq;const dp=at(gq);var xq=A0,yq=ka,vq=iN,bq=on;function jq(t,e){var r=bq(t)?xq:vq;return r(t,yq(e))}var wq=jq,Sq=aN,Nq=wq;function Aq(t,e){return Sq(Nq(t,e),1)}var Cq=Aq;const kq=at(Cq);var Oq=F0;function Eq(t,e){return Oq(t,e)}var Pq=Eq;const Do=at(Pq);var wl=1e9,Tq={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},hy,Dt=!0,Wn="[DecimalError] ",yi=Wn+"Invalid argument: ",fy=Wn+"Exponent out of range: ",Sl=Math.floor,ai=Math.pow,Iq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,xn,ur=1e7,Tt=7,ZN=9007199254740991,ef=Sl(ZN/Tt),ve={};ve.absoluteValue=ve.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ve.comparedTo=ve.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};ve.decimalPlaces=ve.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Tt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};ve.dividedBy=ve.div=function(t){return Va(this,new this.constructor(t))};ve.dividedToIntegerBy=ve.idiv=function(t){var e=this,r=e.constructor;return jt(Va(e,new r(t),0,1),r.precision)};ve.equals=ve.eq=function(t){return!this.cmp(t)};ve.exponent=function(){return Zt(this)};ve.greaterThan=ve.gt=function(t){return this.cmp(t)>0};ve.greaterThanOrEqualTo=ve.gte=function(t){return this.cmp(t)>=0};ve.isInteger=ve.isint=function(){return this.e>this.d.length-2};ve.isNegative=ve.isneg=function(){return this.s<0};ve.isPositive=ve.ispos=function(){return this.s>0};ve.isZero=function(){return this.s===0};ve.lessThan=ve.lt=function(t){return this.cmp(t)<0};ve.lessThanOrEqualTo=ve.lte=function(t){return this.cmp(t)<1};ve.logarithm=ve.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(xn))throw Error(Wn+"NaN");if(r.s<1)throw Error(Wn+(r.s?"NaN":"-Infinity"));return r.eq(xn)?new n(0):(Dt=!1,e=Va(Mc(r,i),Mc(t,i),i),Dt=!0,jt(e,a))};ve.minus=ve.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?r3(e,t):e3(e,(t.s=-t.s,t))};ve.modulo=ve.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Wn+"NaN");return r.s?(Dt=!1,e=Va(r,t,0,1).times(t),Dt=!0,r.minus(e)):jt(new n(r),a)};ve.naturalExponential=ve.exp=function(){return t3(this)};ve.naturalLogarithm=ve.ln=function(){return Mc(this)};ve.negated=ve.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ve.plus=ve.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?e3(e,t):r3(e,(t.s=-t.s,t))};ve.precision=ve.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(yi+t);if(e=Zt(a)+1,n=a.d.length-1,r=n*Tt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};ve.squareRoot=ve.sqrt=function(){var t,e,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Wn+"NaN")}for(t=Zt(l),Dt=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=pa(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Sl((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(Va(l,i,o+2)).times(.5),pa(i.d).slice(0,o)===(e=pa(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(jt(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(e!="9999")break;o+=4}return Dt=!0,jt(n,r)};ve.times=ve.mul=function(t){var e,r,n,a,i,o,l,c,d,u=this,f=u.constructor,h=u.d,p=(t=new f(t)).d;if(!u.s||!t.s)return new f(0);for(t.s*=u.s,r=u.e+t.e,c=h.length,d=p.length,c<d&&(i=h,h=p,p=i,o=c,c=d,d=o),i=[],o=c+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(e=0,a=c+n;a>n;)l=i[a]+p[n]*h[a-n-1]+e,i[a--]=l%ur|0,e=l/ur|0;i[a]=(i[a]+e)%ur|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,Dt?jt(t,f.precision):t};ve.toDecimalPlaces=ve.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(ba(t,0,wl),e===void 0?e=n.rounding:ba(e,0,8),jt(r,t+Zt(r)+1,e))};ve.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Oi(n,!0):(ba(t,0,wl),e===void 0?e=a.rounding:ba(e,0,8),n=jt(new a(n),t+1,e),r=Oi(n,!0,t+1)),r};ve.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?Oi(a):(ba(t,0,wl),e===void 0?e=i.rounding:ba(e,0,8),n=jt(new i(a),t+Zt(a)+1,e),r=Oi(n.abs(),!1,t+Zt(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};ve.toInteger=ve.toint=function(){var t=this,e=t.constructor;return jt(new e(t),Zt(t)+1,e.rounding)};ve.toNumber=function(){return+this};ve.toPower=ve.pow=function(t){var e,r,n,a,i,o,l=this,c=l.constructor,d=12,u=+(t=new c(t));if(!t.s)return new c(xn);if(l=new c(l),!l.s){if(t.s<1)throw Error(Wn+"Infinity");return l}if(l.eq(xn))return l;if(n=c.precision,t.eq(xn))return jt(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,i=l.s,o){if((r=u<0?-u:u)<=ZN){for(a=new c(xn),e=Math.ceil(n/Tt+4),Dt=!1;r%2&&(a=a.times(l),Y1(a.d,e)),r=Sl(r/2),r!==0;)l=l.times(l),Y1(l.d,e);return Dt=!0,t.s<0?new c(xn).div(a):jt(a,n)}}else if(i<0)throw Error(Wn+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Dt=!1,a=t.times(Mc(l,n+d)),Dt=!0,a=t3(a),a.s=i,a};ve.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=Zt(a),n=Oi(a,r<=i.toExpNeg||r>=i.toExpPos)):(ba(t,1,wl),e===void 0?e=i.rounding:ba(e,0,8),a=jt(new i(a),t,e),r=Zt(a),n=Oi(a,t<=r||r<=i.toExpNeg,t)),n};ve.toSignificantDigits=ve.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(ba(t,1,wl),e===void 0?e=n.rounding:ba(e,0,8)),jt(new n(r),t,e)};ve.toString=ve.valueOf=ve.val=ve.toJSON=ve[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Zt(t),r=t.constructor;return Oi(t,e<=r.toExpNeg||e>=r.toExpPos)};function e3(t,e){var r,n,a,i,o,l,c,d,u=t.constructor,f=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Dt?jt(e,f):e;if(c=t.d,d=e.d,o=t.e,a=e.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=d.length):(n=d,a=o,l=c.length),o=Math.ceil(f/Tt),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/ur|0,c[i]%=ur;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,Dt?jt(e,f):e}function ba(t,e,r){if(t!==~~t||t<e||t>r)throw Error(yi+t)}function pa(t){var e,r,n,a=t.length-1,i="",o=t[0];if(a>0){for(i+=o,e=1;e<a;e++)n=t[e]+"",r=Tt-n.length,r&&(i+=cs(r)),i+=n;o=t[e],n=o+"",r=Tt-n.length,r&&(i+=cs(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Va=function(){function t(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%ur|0,o=i/ur|0;return o&&n.unshift(o),n}function e(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*ur+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,d,u,f,h,p,m,x,g,y,j,b,S,w,v,C,A,k=n.constructor,O=n.s==a.s?1:-1,$=n.d,M=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(Wn+"Division by zero");for(c=n.e-a.e,C=M.length,w=$.length,p=new k(O),m=p.d=[],d=0;M[d]==($[d]||0);)++d;if(M[d]>($[d]||0)&&--c,i==null?j=i=k.precision:o?j=i+(Zt(n)-Zt(a))+1:j=i,j<0)return new k(0);if(j=j/Tt+2|0,d=0,C==1)for(u=0,M=M[0],j++;(d<w||u)&&j--;d++)b=u*ur+($[d]||0),m[d]=b/M|0,u=b%M|0;else{for(u=ur/(M[0]+1)|0,u>1&&(M=t(M,u),$=t($,u),C=M.length,w=$.length),S=C,x=$.slice(0,C),g=x.length;g<C;)x[g++]=0;A=M.slice(),A.unshift(0),v=M[0],M[1]>=ur/2&&++v;do u=0,l=e(M,x,C,g),l<0?(y=x[0],C!=g&&(y=y*ur+(x[1]||0)),u=y/v|0,u>1?(u>=ur&&(u=ur-1),f=t(M,u),h=f.length,g=x.length,l=e(f,x,h,g),l==1&&(u--,r(f,C<h?A:M,h))):(u==0&&(l=u=1),f=M.slice()),h=f.length,h<g&&f.unshift(0),r(x,f,g),l==-1&&(g=x.length,l=e(M,x,C,g),l<1&&(u++,r(x,C<g?A:M,g))),g=x.length):l===0&&(u++,x=[0]),m[d++]=u,l&&x[0]?x[g++]=$[S]||0:(x=[$[S]],g=1);while((S++<w||x[0]!==void 0)&&j--)}return m[0]||m.shift(),p.e=c,jt(p,o?i+Zt(p)+1:i)}}();function t3(t,e){var r,n,a,i,o,l,c=0,d=0,u=t.constructor,f=u.precision;if(Zt(t)>16)throw Error(fy+Zt(t));if(!t.s)return new u(xn);for(Dt=!1,l=f,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(n=Math.log(ai(2,d))/Math.LN10*2+5|0,l+=n,r=a=i=new u(xn),u.precision=l;;){if(a=jt(a.times(t),l),r=r.times(++c),o=i.plus(Va(a,r,l)),pa(o.d).slice(0,l)===pa(i.d).slice(0,l)){for(;d--;)i=jt(i.times(i),l);return u.precision=f,e==null?(Dt=!0,jt(i,f)):i}i=o}}function Zt(t){for(var e=t.e*Tt,r=t.d[0];r>=10;r/=10)e++;return e}function pm(t,e,r){if(e>t.LN10.sd())throw Dt=!0,r&&(t.precision=r),Error(Wn+"LN10 precision limit exceeded");return jt(new t(t.LN10),e)}function cs(t){for(var e="";t--;)e+="0";return e}function Mc(t,e){var r,n,a,i,o,l,c,d,u,f=1,h=10,p=t,m=p.d,x=p.constructor,g=x.precision;if(p.s<1)throw Error(Wn+(p.s?"NaN":"-Infinity"));if(p.eq(xn))return new x(0);if(e==null?(Dt=!1,d=g):d=e,p.eq(10))return e==null&&(Dt=!0),pm(x,d);if(d+=h,x.precision=d,r=pa(m),n=r.charAt(0),i=Zt(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(t),r=pa(p.d),n=r.charAt(0),f++;i=Zt(p),n>1?(p=new x("0."+r),i++):p=new x(n+"."+r.slice(1))}else return c=pm(x,d+2,g).times(i+""),p=Mc(new x(n+"."+r.slice(1)),d-h).plus(c),x.precision=g,e==null?(Dt=!0,jt(p,g)):p;for(l=o=p=Va(p.minus(xn),p.plus(xn),d),u=jt(p.times(p),d),a=3;;){if(o=jt(o.times(u),d),c=l.plus(Va(o,new x(a),d)),pa(c.d).slice(0,d)===pa(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(pm(x,d+2,g).times(i+""))),l=Va(l,new x(f),d),x.precision=g,e==null?(Dt=!0,jt(l,g)):l;l=c,a+=2}}function q1(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=Sl(r/Tt),t.d=[],n=(r+1)%Tt,r<0&&(n+=Tt),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Tt;n<a;)t.d.push(+e.slice(n,n+=Tt));e=e.slice(n),n=Tt-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Dt&&(t.e>ef||t.e<-ef))throw Error(fy+r)}else t.s=0,t.e=0,t.d=[0];return t}function jt(t,e,r){var n,a,i,o,l,c,d,u,f=t.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=Tt,a=e,d=f[u=0];else{if(u=Math.ceil((n+1)/Tt),i=f.length,u>=i)return t;for(d=i=f[u],o=1;i>=10;i/=10)o++;n%=Tt,a=n-Tt+o}if(r!==void 0&&(i=ai(10,o-a-1),l=d/i%10|0,c=e<0||f[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?d/ai(10,o-a):0:f[u-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(i=Zt(t),f.length=1,e=e-i-1,f[0]=ai(10,(Tt-e%Tt)%Tt),t.e=Sl(-e/Tt)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=u,i=1,u--):(f.length=u+1,i=ai(10,Tt-n),f[u]=a>0?(d/ai(10,o-a)%ai(10,a)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==ur&&(f[0]=1,++t.e);break}else{if(f[u]+=i,f[u]!=ur)break;f[u--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Dt&&(t.e>ef||t.e<-ef))throw Error(fy+Zt(t));return t}function r3(t,e){var r,n,a,i,o,l,c,d,u,f,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Dt?jt(e,p):e;if(c=t.d,f=e.d,n=e.e,d=t.e,c=c.slice(),o=d-n,o){for(u=o<0,u?(r=c,o=-o,l=f.length):(r=f,n=d,l=c.length),a=Math.max(Math.ceil(p/Tt),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,u=a<l,u&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){u=c[a]<f[a];break}o=0}for(u&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=ur-1;--c[i],c[a]+=ur}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Dt?jt(e,p):e):new h(0)}function Oi(t,e,r){var n,a=Zt(t),i=pa(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+cs(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+cs(-a-1)+i,r&&(n=r-o)>0&&(i+=cs(n))):a>=o?(i+=cs(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+cs(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=cs(n))),t.s<0?"-"+i:i}function Y1(t,e){if(t.length>e)return t.length=e,!0}function n3(t){var e,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(yi+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return q1(o,i.toString())}else if(typeof i!="string")throw Error(yi+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Iq.test(i))q1(o,i);else throw Error(yi+i)}if(a.prototype=ve,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=n3,a.config=a.set=Mq,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function Mq(t){if(!t||typeof t!="object")throw Error(Wn+"Object expected");var e,r,n,a=["precision",1,wl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(Sl(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(yi+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(yi+r+": "+n);return this}var hy=n3(Tq);xn=new hy(1);const gt=hy;function $q(t){return Lq(t)||_q(t)||Dq(t)||Rq()}function Rq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dq(t,e){if(t){if(typeof t=="string")return Rg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rg(t,e)}}function _q(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Lq(t){if(Array.isArray(t))return Rg(t)}function Rg(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var zq=function(e){return e},a3={},s3=function(e){return e===a3},G1=function(e){return function r(){return arguments.length===0||arguments.length===1&&s3(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},Fq=function t(e,r){return e===1?r:G1(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==a3}).length;return o>=e?r.apply(void 0,a):t(e-o,G1(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=a.map(function(f){return s3(f)?c.shift():f});return r.apply(void 0,$q(u).concat(c))}))})},up=function(e){return Fq(e.length,e)},Dg=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},Bq=up(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),Uq=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return zq;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},_g=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},i3=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=e.apply(void 0,i)),n}};function Vq(t){var e;return t===0?e=1:e=Math.floor(new gt(t).abs().log(10).toNumber())+1,e}function Hq(t,e,r){for(var n=new gt(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var Wq=up(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),qq=up(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),Yq=up(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const fp={rangeStep:Hq,getDigitCount:Vq,interpolateNumber:Wq,uninterpolateNumber:qq,uninterpolateTruncation:Yq};function Lg(t){return Jq(t)||Kq(t)||o3(t)||Gq()}function Gq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kq(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Jq(t){if(Array.isArray(t))return zg(t)}function $c(t,e){return Zq(t)||Qq(t,e)||o3(t,e)||Xq()}function Xq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o3(t,e){if(t){if(typeof t=="string")return zg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zg(t,e)}}function zg(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qq(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function Zq(t){if(Array.isArray(t))return t}function l3(t){var e=$c(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function c3(t,e,r){if(t.lte(0))return new gt(0);var n=fp.getDigitCount(t.toNumber()),a=new gt(10).pow(n),i=t.div(a),o=n!==1?.05:.1,l=new gt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return e?c:new gt(Math.ceil(c))}function eY(t,e,r){var n=1,a=new gt(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new gt(10).pow(fp.getDigitCount(t)-1),a=new gt(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new gt(Math.floor(t)))}else t===0?a=new gt(Math.floor((e-1)/2)):r||(a=new gt(Math.floor(t)));var o=Math.floor((e-1)/2),l=Uq(Bq(function(c){return a.add(new gt(c-o).mul(n)).toNumber()}),Dg);return l(0,e)}function d3(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new gt(0),tickMin:new gt(0),tickMax:new gt(0)};var i=c3(new gt(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new gt(0):(o=new gt(t).add(e).div(2),o=o.sub(new gt(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),c=Math.ceil(new gt(e).sub(o).div(i).toNumber()),d=l+c+1;return d>r?d3(t,e,r,n,a+1):(d<r&&(c=e>0?c+(r-d):c,l=e>0?l:l+(r-d)),{step:i,tickMin:o.sub(new gt(l).mul(i)),tickMax:o.add(new gt(c).mul(i))})}function tY(t){var e=$c(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=l3([r,n]),c=$c(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var f=u===1/0?[d].concat(Lg(Dg(0,a-1).map(function(){return 1/0}))):[].concat(Lg(Dg(0,a-1).map(function(){return-1/0})),[u]);return r>n?_g(f):f}if(d===u)return eY(d,a,i);var h=d3(d,u,o,i),p=h.step,m=h.tickMin,x=h.tickMax,g=fp.rangeStep(m,x.add(new gt(.1).mul(p)),p);return r>n?_g(g):g}function rY(t,e){var r=$c(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=l3([n,a]),l=$c(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[n,a];if(c===d)return[c];var u=Math.max(e,2),f=c3(new gt(d).sub(c).div(u-1),i,0),h=[].concat(Lg(fp.rangeStep(new gt(c),new gt(d).sub(new gt(.99).mul(f)),f)),[d]);return n>a?_g(h):h}var nY=i3(tY),aY=i3(rY),sY="Invariant failed";function Ei(t,e){throw new Error(sY)}var iY=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _o(t){"@babel/helpers - typeof";return _o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_o(t)}function tf(){return tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tf.apply(this,arguments)}function oY(t,e){return uY(t)||dY(t,e)||cY(t,e)||lY()}function lY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cY(t,e){if(t){if(typeof t=="string")return K1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K1(t,e)}}function K1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dY(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function uY(t){if(Array.isArray(t))return t}function fY(t,e){if(t==null)return{};var r=hY(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hY(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function pY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h3(n.key),n)}}function gY(t,e,r){return e&&mY(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xY(t,e,r){return e=rf(e),yY(t,u3()?Reflect.construct(e,r||[],rf(t).constructor):e.apply(t,r))}function yY(t,e){if(e&&(_o(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vY(t)}function vY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u3=function(){return!!t})()}function rf(t){return rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rf(t)}function bY(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fg(t,e)}function Fg(t,e){return Fg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Fg(t,e)}function f3(t,e,r){return e=h3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h3(t){var e=jY(t,"string");return _o(e)=="symbol"?e:e+""}function jY(t,e){if(_o(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_o(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var hp=function(t){function e(){return pY(this,e),xY(this,e,arguments)}return bY(e,t),gY(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,d=n.dataPointFormatter,u=n.xAxis,f=n.yAxis,h=fY(n,iY),p=Pe(h,!1);this.props.direction==="x"&&u.type!=="number"&&Ei();var m=c.map(function(x){var g=d(x,l),y=g.x,j=g.y,b=g.value,S=g.errorVal;if(!S)return null;var w=[],v,C;if(Array.isArray(S)){var A=oY(S,2);v=A[0],C=A[1]}else v=C=S;if(i==="vertical"){var k=u.scale,O=j+a,$=O+o,M=O-o,T=k(b-v),I=k(b+C);w.push({x1:I,y1:$,x2:I,y2:M}),w.push({x1:T,y1:O,x2:I,y2:O}),w.push({x1:T,y1:$,x2:T,y2:M})}else if(i==="horizontal"){var z=f.scale,U=y+a,Y=U-o,Z=U+o,te=z(b-v),q=z(b+C);w.push({x1:Y,y1:q,x2:Z,y2:q}),w.push({x1:U,y1:te,x2:U,y2:q}),w.push({x1:Y,y1:te,x2:Z,y2:te})}return D.createElement(Ze,tf({className:"recharts-errorBar",key:"bar-".concat(w.map(function(ne){return"".concat(ne.x1,"-").concat(ne.x2,"-").concat(ne.y1,"-").concat(ne.y2)}))},p),w.map(function(ne){return D.createElement("line",tf({},ne,{key:"line-".concat(ne.x1,"-").concat(ne.x2,"-").concat(ne.y1,"-").concat(ne.y2)}))}))});return D.createElement(Ze,{className:"recharts-errorBars"},m)}}])}(D.Component);f3(hp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});f3(hp,"displayName","ErrorBar");function Rc(t){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(t)}function J1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Js(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?J1(Object(r),!0).forEach(function(n){wY(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wY(t,e,r){return e=SY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SY(t){var e=NY(t,"string");return Rc(e)=="symbol"?e:e+""}function NY(t,e){if(Rc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p3=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=mn(r,ws);if(!o)return null;var l=ws.defaultProps,c=l!==void 0?Js(Js({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(n||[]).reduce(function(u,f){var h=f.item,p=f.props,m=p.sectors||p.data||[];return u.concat(m.map(function(x){return{type:o.props.iconType||h.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):d=(n||[]).map(function(u){var f=u.item,h=f.type.defaultProps,p=h!==void 0?Js(Js({},h),f.props):{},m=p.dataKey,x=p.name,g=p.legendType,y=p.hide;return{inactive:y,dataKey:m,type:c.iconType||g||"square",color:py(f),value:x||m,payload:p}}),Js(Js(Js({},c),ws.getWithHeight(o,a)),{},{payload:d,item:o})};function Dc(t){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dc(t)}function X1(t){return OY(t)||kY(t)||CY(t)||AY()}function AY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CY(t,e){if(t){if(typeof t=="string")return Bg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bg(t,e)}}function kY(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OY(t){if(Array.isArray(t))return Bg(t)}function Bg(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Q1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ht(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Q1(Object(r),!0).forEach(function(n){go(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function go(t,e,r){return e=EY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EY(t){var e=PY(t,"string");return Dc(e)=="symbol"?e:e+""}function PY(t,e){if(Dc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ar(t,e,r){return Ve(t)||Ve(e)?r:sr(e)?jn(t,e,r):ze(e)?e(t):r}function tc(t,e,r,n){var a=kq(t,function(l){return ar(l,e)});if(r==="number"){var i=a.filter(function(l){return se(l)||parseFloat(l)});return i.length?[dp(i),xs(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!Ve(l)}):a;return o.map(function(l){return sr(l)||l instanceof Date?l:""})}var TY=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var u=d>0?a[d-1].coordinate:a[l-1].coordinate,f=a[d].coordinate,h=d>=l-1?a[0].coordinate:a[d+1].coordinate,p=void 0;if(Br(f-u)!==Br(h-f)){var m=[];if(Br(h-f)===Br(c[1]-c[0])){p=h;var x=f+c[1]-c[0];m[0]=Math.min(x,(x+u)/2),m[1]=Math.max(x,(x+u)/2)}else{p=u;var g=h+c[1]-c[0];m[0]=Math.min(f,(g+f)/2),m[1]=Math.max(f,(g+f)/2)}var y=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(e>y[0]&&e<=y[1]||e>=m[0]&&e<=m[1]){o=a[d].index;break}}else{var j=Math.min(u,h),b=Math.max(u,h);if(e>(j+f)/2&&e<=(b+f)/2){o=a[d].index;break}}}else for(var S=0;S<l;S++)if(S===0&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<l-1&&e>(n[S].coordinate+n[S-1].coordinate)/2&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S===l-1&&e>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},py=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Ht(Ht({},e.type.defaultProps),e.props):e.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},IY=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var u=i[l[c]].stackGroups,f=Object.keys(u),h=0,p=f.length;h<p;h++){var m=u[f[h]],x=m.items,g=m.cateAxisId,y=x.filter(function(C){return Ua(C.type).indexOf("Bar")>=0});if(y&&y.length){var j=y[0].type.defaultProps,b=j!==void 0?Ht(Ht({},j),y[0].props):y[0].props,S=b.barSize,w=b[g];o[w]||(o[w]=[]);var v=Ve(S)?r:S;o[w].push({item:y[0],stackList:y.slice(1),barSize:Ve(v)?void 0:Ur(v,n,0)})}}return o},MY=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,l=e.maxBarSize,c=o.length;if(c<1)return null;var d=Ur(r,a,0,!0),u,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,p=a/c,m=o.reduce(function(S,w){return S+w.barSize||0},0);m+=(c-1)*d,m>=a&&(m-=(c-1)*d,d=0),m>=a&&p>0&&(h=!0,p*=.9,m=c*p);var x=(a-m)/2>>0,g={offset:x-d,size:0};u=o.reduce(function(S,w){var v={item:w.item,position:{offset:g.offset+g.size+d,size:h?p:w.barSize}},C=[].concat(X1(S),[v]);return g=C[C.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(A){C.push({item:A,position:g})}),C},f)}else{var y=Ur(n,a,0,!0);a-2*y-(c-1)*d<=0&&(d=0);var j=(a-2*y-(c-1)*d)/c;j>1&&(j>>=0);var b=l===+l?Math.min(j,l):j;u=o.reduce(function(S,w,v){var C=[].concat(X1(S),[{item:w.item,position:{offset:y+(j+d)*v+(j-b)/2,size:b}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(A){C.push({item:A,position:C[C.length-1].position})}),C},f)}return u},$Y=function(e,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),d=p3({children:i,legendWidth:c});if(d){var u=a||{},f=u.width,h=u.height,p=d.align,m=d.verticalAlign,x=d.layout;if((x==="vertical"||x==="horizontal"&&m==="middle")&&p!=="center"&&se(e[p]))return Ht(Ht({},e),{},go({},p,e[p]+(f||0)));if((x==="horizontal"||x==="vertical"&&p==="center")&&m!=="middle"&&se(e[m]))return Ht(Ht({},e),{},go({},m,e[m]+(h||0)))}return e},RY=function(e,r,n){return Ve(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},m3=function(e,r,n,a,i){var o=r.props.children,l=Fn(o,hp).filter(function(d){return RY(a,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,u){var f=ar(u,n);if(Ve(f))return d;var h=Array.isArray(f)?[dp(f),xs(f)]:[f,f],p=c.reduce(function(m,x){var g=ar(u,x,0),y=h[0]-Math.abs(Array.isArray(g)?g[0]:g),j=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,m[0]),Math.max(j,m[1])]},[1/0,-1/0]);return[Math.min(p[0],d[0]),Math.max(p[1],d[1])]},[1/0,-1/0])}return null},DY=function(e,r,n,a,i){var o=r.map(function(l){return m3(e,l,n,i,a)}).filter(function(l){return!Ve(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},g3=function(e,r,n,a,i){var o=r.map(function(c){var d=c.props.dataKey;return n==="number"&&d&&m3(e,c,d,a)||tc(e,d,n,i)});if(n==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,f=d.length;u<f;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},x3=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},y3=function(e,r,n,a){if(a)return e.map(function(c){return c.coordinate});var i,o,l=e.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},La=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Br(l[0]-l[1])*2*d:d,r&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+d,value:f,offset:d}});return u.filter(function(f){return!gl(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:a(f)+d,value:f,index:h,offset:d}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(f){return{coordinate:a(f)+d,value:f,offset:d}}):a.domain().map(function(f,h){return{coordinate:a(f)+d,value:i?i[f]:f,index:h,offset:d}})},mm=new WeakMap,Jd=function(e,r){if(typeof r!="function")return e;mm.has(e)||mm.set(e,new WeakMap);var n=mm.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},v3=function(e,r,n){var a=e.scale,i=e.type,o=e.layout,l=e.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Oc(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Ju(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:ec(),realScaleType:"point"}:i==="category"?{scale:Oc(),realScaleType:"band"}:{scale:Ju(),realScaleType:"linear"};if(Ai(a)){var c="scale".concat(Jh(a));return{scale:(W1[c]||ec)(),realScaleType:W1[c]?c:"point"}}return ze(a)?{scale:a}:{scale:ec(),realScaleType:"point"}},Z1=1e-4,b3=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-Z1,o=Math.max(a[0],a[1])+Z1,l=e(r[0]),c=e(r[n-1]);(l<i||l>o||c<i||c>o)&&e.domain([r[0],r[n-1]])}},_Y=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},LY=function(e,r){if(!r||r.length!==2||!se(r[0])||!se(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!se(e[0])||e[0]<n)&&(i[0]=n),(!se(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},zY=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=gl(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=i,e[l][n][1]=i+c,i=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+c,o=e[l][n][1])}},FY=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=gl(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},BY={sign:zY,expand:iD,none:Oo,silhouette:oD,wiggle:lD,positive:FY},UY=function(e,r,n){var a=r.map(function(l){return l.props.dataKey}),i=BY[n],o=sD().keys(a).value(function(l,c){return+ar(l,c,0)}).order(fg).offset(i);return o(e)},VY=function(e,r,n,a,i,o){if(!e)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(f,h){var p,m=(p=h.type)!==null&&p!==void 0&&p.defaultProps?Ht(Ht({},h.type.defaultProps),h.props):h.props,x=m.stackId,g=m.hide;if(g)return f;var y=m[n],j=f[y]||{hasStack:!1,stackGroups:{}};if(sr(x)){var b=j.stackGroups[x]||{numericAxisId:n,cateAxisId:a,items:[]};b.items.push(h),j.hasStack=!0,j.stackGroups[x]=b}else j.stackGroups[xl("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Ht(Ht({},f),{},go({},y,j))},c),u={};return Object.keys(d).reduce(function(f,h){var p=d[h];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(x,g){var y=p.stackGroups[g];return Ht(Ht({},x),{},go({},g,{numericAxisId:n,cateAxisId:a,items:y.items,stackedData:UY(e,y.items,i)}))},m)}return Ht(Ht({},f),{},go({},h,p))},u)},j3=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=e.domain();if(!d.length)return null;var u=nY(d,i,l);return e.domain([dp(u),xs(u)]),{niceTicks:u}}if(i&&a==="number"){var f=e.domain(),h=aY(f,i,l);return{niceTicks:h}}return null};function ej(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ve(a[e.dataKey])){var l=Eu(r,"value",a[e.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=ar(a,Ve(o)?e.dataKey:o);return Ve(c)?null:e.scale(c)}var tj=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,o=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=ar(o,r.dataKey,r.domain[l]);return Ve(c)?null:r.scale(c)-i/2+a},HY=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},WY=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Ht(Ht({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(sr(i)){var o=r[i];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},qY=function(e){return e.reduce(function(r,n){return[dp(n.concat([r[0]]).filter(se)),xs(n.concat([r[1]]).filter(se))]},[1/0,-1/0])},w3=function(e,r,n){return Object.keys(e).reduce(function(a,i){var o=e[i],l=o.stackedData,c=l.reduce(function(d,u){var f=qY(u.slice(r,n+1));return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},rj=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nj=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ug=function(e,r,n){if(ze(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(se(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(rj.test(e[0])){var i=+rj.exec(e[0])[1];a[0]=r[0]-i}else ze(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(se(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(nj.test(e[1])){var o=+nj.exec(e[1])[1];a[1]=r[1]+o}else ze(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},nf=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=U0(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],u=i[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},aj=function(e,r,n){return!e||!e.length||Do(e,jn(n,"type.defaultProps.domain"))?r:e},S3=function(e,r){var n=e.type.defaultProps?Ht(Ht({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,d=n.chartType,u=n.hide;return Ht(Ht({},Pe(e,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:py(e),value:ar(r,a),type:c,payload:r,chartType:d,hide:u})};function _c(t){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_c(t)}function sj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ma(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sj(Object(r),!0).forEach(function(n){N3(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function N3(t,e,r){return e=YY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YY(t){var e=GY(t,"string");return _c(e)=="symbol"?e:e+""}function GY(t,e){if(_c(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KY(t,e){return ZY(t)||QY(t,e)||XY(t,e)||JY()}function JY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XY(t,e){if(t){if(typeof t=="string")return ij(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ij(t,e)}}function ij(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function QY(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function ZY(t){if(Array.isArray(t))return t}var af=Math.PI/180,eG=function(e){return e*180/Math.PI},Ct=function(e,r,n,a){return{x:e+Math.cos(-af*a)*n,y:r+Math.sin(-af*a)*n}},A3=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},tG=function(e,r,n,a,i){var o=e.width,l=e.height,c=e.startAngle,d=e.endAngle,u=Ur(e.cx,o,o/2),f=Ur(e.cy,l,l/2),h=A3(o,l,n),p=Ur(e.innerRadius,h,0),m=Ur(e.outerRadius,h,h*.8),x=Object.keys(r);return x.reduce(function(g,y){var j=r[y],b=j.domain,S=j.reversed,w;if(Ve(j.range))a==="angleAxis"?w=[c,d]:a==="radiusAxis"&&(w=[p,m]),S&&(w=[w[1],w[0]]);else{w=j.range;var v=w,C=KY(v,2);c=C[0],d=C[1]}var A=v3(j,i),k=A.realScaleType,O=A.scale;O.domain(b).range(w),b3(O);var $=j3(O,Ma(Ma({},j),{},{realScaleType:k})),M=Ma(Ma(Ma({},j),$),{},{range:w,radius:m,realScaleType:k,scale:O,cx:u,cy:f,innerRadius:p,outerRadius:m,startAngle:c,endAngle:d});return Ma(Ma({},g),{},N3({},y,M))},{})},rG=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},nG=function(e,r){var n=e.x,a=e.y,i=r.cx,o=r.cy,l=rG({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,d=Math.acos(c);return a>o&&(d=2*Math.PI-d),{radius:l,angle:eG(d),angleInRadian:d}},aG=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},sG=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return e+l*360},oj=function(e,r){var n=e.x,a=e.y,i=nG({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=aG(r),f=u.startAngle,h=u.endAngle,p=l,m;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=f}return m?Ma(Ma({},r),{},{radius:o,angle:sG(p,r)}):null},C3=function(e){return!N.isValidElement(e)&&!ze(e)&&typeof e!="boolean"?e.className:""};function Lc(t){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(t)}var iG=["offset"];function oG(t){return uG(t)||dG(t)||cG(t)||lG()}function lG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cG(t,e){if(t){if(typeof t=="string")return Vg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vg(t,e)}}function dG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uG(t){if(Array.isArray(t))return Vg(t)}function Vg(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fG(t,e){if(t==null)return{};var r=hG(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hG(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function lj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lj(Object(r),!0).forEach(function(n){pG(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pG(t,e,r){return e=mG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mG(t){var e=gG(t,"string");return Lc(e)=="symbol"?e:e+""}function gG(t,e){if(Lc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zc(){return zc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zc.apply(this,arguments)}var xG=function(e){var r=e.value,n=e.formatter,a=Ve(e.children)?r:e.children;return ze(n)?n(a):a},yG=function(e,r){var n=Br(r-e),a=Math.min(Math.abs(r-e),360);return n*a},vG=function(e,r,n){var a=e.position,i=e.viewBox,o=e.offset,l=e.className,c=i,d=c.cx,u=c.cy,f=c.innerRadius,h=c.outerRadius,p=c.startAngle,m=c.endAngle,x=c.clockWise,g=(f+h)/2,y=yG(p,m),j=y>=0?1:-1,b,S;a==="insideStart"?(b=p+j*o,S=x):a==="insideEnd"?(b=m-j*o,S=!x):a==="end"&&(b=m+j*o,S=x),S=y<=0?S:!S;var w=Ct(d,u,g,b),v=Ct(d,u,g,b+(S?1:-1)*359),C="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(S?0:1,`,
    `).concat(v.x,",").concat(v.y),A=Ve(e.id)?xl("recharts-radial-line-"):e.id;return D.createElement("text",zc({},n,{dominantBaseline:"central",className:He("recharts-radial-bar-label",l)}),D.createElement("defs",null,D.createElement("path",{id:A,d:C})),D.createElement("textPath",{xlinkHref:"#".concat(A)},r))},bG=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,f=i.endAngle,h=(u+f)/2;if(a==="outside"){var p=Ct(o,l,d+n,h),m=p.x,x=p.y;return{x:m,y:x,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+d)/2,y=Ct(o,l,g,h),j=y.x,b=y.y;return{x:j,y:b,textAnchor:"middle",verticalAnchor:"middle"}},jG=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,o=r,l=o.x,c=o.y,d=o.width,u=o.height,f=u>=0?1:-1,h=f*a,p=f>0?"end":"start",m=f>0?"start":"end",x=d>=0?1:-1,g=x*a,y=x>0?"end":"start",j=x>0?"start":"end";if(i==="top"){var b={x:l+d/2,y:c-f*a,textAnchor:"middle",verticalAnchor:p};return nr(nr({},b),n?{height:Math.max(c-n.y,0),width:d}:{})}if(i==="bottom"){var S={x:l+d/2,y:c+u+h,textAnchor:"middle",verticalAnchor:m};return nr(nr({},S),n?{height:Math.max(n.y+n.height-(c+u),0),width:d}:{})}if(i==="left"){var w={x:l-g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return nr(nr({},w),n?{width:Math.max(w.x-n.x,0),height:u}:{})}if(i==="right"){var v={x:l+d+g,y:c+u/2,textAnchor:j,verticalAnchor:"middle"};return nr(nr({},v),n?{width:Math.max(n.x+n.width-v.x,0),height:u}:{})}var C=n?{width:d,height:u}:{};return i==="insideLeft"?nr({x:l+g,y:c+u/2,textAnchor:j,verticalAnchor:"middle"},C):i==="insideRight"?nr({x:l+d-g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},C):i==="insideTop"?nr({x:l+d/2,y:c+h,textAnchor:"middle",verticalAnchor:m},C):i==="insideBottom"?nr({x:l+d/2,y:c+u-h,textAnchor:"middle",verticalAnchor:p},C):i==="insideTopLeft"?nr({x:l+g,y:c+h,textAnchor:j,verticalAnchor:m},C):i==="insideTopRight"?nr({x:l+d-g,y:c+h,textAnchor:y,verticalAnchor:m},C):i==="insideBottomLeft"?nr({x:l+g,y:c+u-h,textAnchor:j,verticalAnchor:p},C):i==="insideBottomRight"?nr({x:l+d-g,y:c+u-h,textAnchor:y,verticalAnchor:p},C):fl(i)&&(se(i.x)||oi(i.x))&&(se(i.y)||oi(i.y))?nr({x:l+Ur(i.x,d),y:c+Ur(i.y,u),textAnchor:"end",verticalAnchor:"end"},C):nr({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},C)},wG=function(e){return"cx"in e&&se(e.cx)};function fr(t){var e=t.offset,r=e===void 0?5:e,n=fG(t,iG),a=nr({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,d=a.content,u=a.className,f=u===void 0?"":u,h=a.textBreakAll;if(!i||Ve(l)&&Ve(c)&&!N.isValidElement(d)&&!ze(d))return null;if(N.isValidElement(d))return N.cloneElement(d,a);var p;if(ze(d)){if(p=N.createElement(d,a),N.isValidElement(p))return p}else p=xG(a);var m=wG(i),x=Pe(a,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return vG(a,p,x);var g=m?bG(a):jG(a);return D.createElement(ki,zc({className:He("recharts-label",f)},x,g,{breakAll:h}),p)}fr.displayName="Label";var k3=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,d=e.innerRadius,u=e.outerRadius,f=e.x,h=e.y,p=e.top,m=e.left,x=e.width,g=e.height,y=e.clockWise,j=e.labelViewBox;if(j)return j;if(se(x)&&se(g)){if(se(f)&&se(h))return{x:f,y:h,width:x,height:g};if(se(p)&&se(m))return{x:p,y:m,width:x,height:g}}return se(f)&&se(h)?{x:f,y:h,width:0,height:0}:se(r)&&se(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:y}:e.viewBox?e.viewBox:{}},SG=function(e,r){return e?e===!0?D.createElement(fr,{key:"label-implicit",viewBox:r}):sr(e)?D.createElement(fr,{key:"label-implicit",viewBox:r,value:e}):N.isValidElement(e)?e.type===fr?N.cloneElement(e,{key:"label-implicit",viewBox:r}):D.createElement(fr,{key:"label-implicit",content:e,viewBox:r}):ze(e)?D.createElement(fr,{key:"label-implicit",content:e,viewBox:r}):fl(e)?D.createElement(fr,zc({viewBox:r},e,{key:"label-implicit"})):null:null},NG=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=k3(e),o=Fn(a,fr).map(function(c,d){return N.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!n)return o;var l=SG(e.label,r||i);return[l].concat(oG(o))};fr.parseViewBox=k3;fr.renderCallByParent=NG;function AG(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var CG=AG;const kG=at(CG);function Fc(t){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(t)}var OG=["valueAccessor"],EG=["data","dataKey","clockWise","id","textBreakAll"];function PG(t){return $G(t)||MG(t)||IG(t)||TG()}function TG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IG(t,e){if(t){if(typeof t=="string")return Hg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hg(t,e)}}function MG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $G(t){if(Array.isArray(t))return Hg(t)}function Hg(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sf(){return sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sf.apply(this,arguments)}function cj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cj(Object(r),!0).forEach(function(n){RG(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RG(t,e,r){return e=DG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DG(t){var e=_G(t,"string");return Fc(e)=="symbol"?e:e+""}function _G(t,e){if(Fc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uj(t,e){if(t==null)return{};var r=LG(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function LG(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var zG=function(e){return Array.isArray(e.value)?kG(e.value):e.value};function Ha(t){var e=t.valueAccessor,r=e===void 0?zG:e,n=uj(t,OG),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,d=uj(n,EG);return!a||!a.length?null:D.createElement(Ze,{className:"recharts-label-list"},a.map(function(u,f){var h=Ve(i)?r(u,f):ar(u&&u.payload,i),p=Ve(l)?{}:{id:"".concat(l,"-").concat(f)};return D.createElement(fr,sf({},Pe(u,!0),d,p,{parentViewBox:u.parentViewBox,value:h,textBreakAll:c,viewBox:fr.parseViewBox(Ve(o)?u:dj(dj({},u),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Ha.displayName="LabelList";function FG(t,e){return t?t===!0?D.createElement(Ha,{key:"labelList-implicit",data:e}):D.isValidElement(t)||ze(t)?D.createElement(Ha,{key:"labelList-implicit",data:e,content:t}):fl(t)?D.createElement(Ha,sf({data:e},t,{key:"labelList-implicit"})):null:null}function BG(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=Fn(n,Ha).map(function(o,l){return N.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!r)return a;var i=FG(t.label,e);return[i].concat(PG(a))}Ha.renderCallByParent=BG;function Bc(t){"@babel/helpers - typeof";return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bc(t)}function Wg(){return Wg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wg.apply(this,arguments)}function fj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fj(Object(r),!0).forEach(function(n){UG(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function UG(t,e,r){return e=VG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VG(t){var e=HG(t,"string");return Bc(e)=="symbol"?e:e+""}function HG(t,e){if(Bc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WG=function(e,r){var n=Br(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},Xd=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,d=e.cornerIsExternal,u=c*(l?1:-1)+a,f=Math.asin(c/u)/af,h=d?i:i+o*f,p=Ct(r,n,u,h),m=Ct(r,n,a,h),x=d?i-o*f:i,g=Ct(r,n,u*Math.cos(f*af),x);return{center:p,circleTangency:m,lineTangency:g,theta:f}},O3=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.startAngle,l=e.endAngle,c=WG(o,l),d=o+c,u=Ct(r,n,i,o),f=Ct(r,n,i,d),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var p=Ct(r,n,a,o),m=Ct(r,n,a,d);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},qG=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,d=e.startAngle,u=e.endAngle,f=Br(u-d),h=Xd({cx:r,cy:n,radius:i,angle:d,sign:f,cornerRadius:o,cornerIsExternal:c}),p=h.circleTangency,m=h.lineTangency,x=h.theta,g=Xd({cx:r,cy:n,radius:i,angle:u,sign:-f,cornerRadius:o,cornerIsExternal:c}),y=g.circleTangency,j=g.lineTangency,b=g.theta,S=c?Math.abs(d-u):Math.abs(d-u)-x-b;if(S<0)return l?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):O3({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var w="M ".concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
  `);if(a>0){var v=Xd({cx:r,cy:n,radius:a,angle:d,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=v.circleTangency,A=v.lineTangency,k=v.theta,O=Xd({cx:r,cy:n,radius:a,angle:u,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),$=O.circleTangency,M=O.lineTangency,T=O.theta,I=c?Math.abs(d-u):Math.abs(d-u)-k-T;if(I<0&&o===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(M.x,",").concat(M.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat($.x,",").concat($.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(I>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},YG={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},E3=function(e){var r=hj(hj({},YG),e),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,f=r.endAngle,h=r.className;if(o<i||u===f)return null;var p=He("recharts-sector",h),m=o-i,x=Ur(l,m,0,!0),g;return x>0&&Math.abs(u-f)<360?g=qG({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(x,m/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f}):g=O3({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:u,endAngle:f}),D.createElement("path",Wg({},Pe(r,!0),{className:p,d:g,role:"img"}))};function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function qg(){return qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qg.apply(this,arguments)}function pj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pj(Object(r),!0).forEach(function(n){GG(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GG(t,e,r){return e=KG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KG(t){var e=JG(t,"string");return Uc(e)=="symbol"?e:e+""}function JG(t,e){if(Uc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gj={curveBasisClosed:GR,curveBasisOpen:KR,curveBasis:YR,curveBumpX:MR,curveBumpY:$R,curveLinearClosed:JR,curveLinear:Qh,curveMonotoneX:XR,curveMonotoneY:QR,curveNatural:ZR,curveStep:eD,curveStepAfter:rD,curveStepBefore:tD},Qd=function(e){return e.x===+e.x&&e.y===+e.y},_l=function(e){return e.x},Ll=function(e){return e.y},XG=function(e,r){if(ze(e))return e;var n="curve".concat(Jh(e));return(n==="curveMonotone"||n==="curveBump")&&r?gj["".concat(n).concat(r==="vertical"?"Y":"X")]:gj[n]||Qh},QG=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,o=e.baseLine,l=e.layout,c=e.connectNulls,d=c===void 0?!1:c,u=XG(n,l),f=d?i.filter(function(x){return Qd(x)}):i,h;if(Array.isArray(o)){var p=d?o.filter(function(x){return Qd(x)}):o,m=f.map(function(x,g){return mj(mj({},x),{},{base:p[g]})});return l==="vertical"?h=Bd().y(Ll).x1(_l).x0(function(x){return x.base.x}):h=Bd().x(_l).y1(Ll).y0(function(x){return x.base.y}),h.defined(Qd).curve(u),h(m)}return l==="vertical"&&se(o)?h=Bd().y(Ll).x1(_l).x0(o):se(o)?h=Bd().x(_l).y1(Ll).y0(o):h=S4().x(_l).y(Ll),h.defined(Qd).curve(u),h(f)},xo=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?QG(e):a;return N.createElement("path",qg({},Pe(e,!1),Pu(e),{className:He("recharts-curve",r),d:o,ref:i}))},P3={exports:{}},ZG="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",eK=ZG,tK=eK;function T3(){}function I3(){}I3.resetWarningCache=T3;var rK=function(){function t(n,a,i,o,l,c){if(c!==tK){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:I3,resetWarningCache:T3};return r.PropTypes=r,r};P3.exports=rK();var nK=P3.exports;const ct=at(nK);var aK=Object.getOwnPropertyNames,sK=Object.getOwnPropertySymbols,iK=Object.prototype.hasOwnProperty;function xj(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function Zd(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);var i=a.cache,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);var c=t(r,n,a);return i.delete(r),i.delete(n),c}}function oK(t){return t!=null?t[Symbol.toStringTag]:void 0}function yj(t){return aK(t).concat(sK(t))}var lK=Object.hasOwn||function(t,e){return iK.call(t,e)};function Bi(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var cK="__v",dK="__o",uK="_owner",vj=Object.getOwnPropertyDescriptor,bj=Object.keys;function fK(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function hK(t,e){return Bi(t.getTime(),e.getTime())}function pK(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function mK(t,e){return t===e}function jj(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var a=new Array(n),i=t.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var d=e.entries(),u=!1,f=0;(l=d.next())&&!l.done;){if(a[f]){f++;continue}var h=o.value,p=l.value;if(r.equals(h[0],p[0],c,f,t,e,r)&&r.equals(h[1],p[1],h[0],p[0],t,e,r)){u=a[f]=!0;break}f++}if(!u)return!1;c++}return!0}var gK=Bi;function xK(t,e,r){var n=bj(t),a=n.length;if(bj(e).length!==a)return!1;for(;a-- >0;)if(!M3(t,e,r,n[a]))return!1;return!0}function zl(t,e,r){var n=yj(t),a=n.length;if(yj(e).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!M3(t,e,r,i)||(o=vj(t,i),l=vj(e,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function yK(t,e){return Bi(t.valueOf(),e.valueOf())}function vK(t,e){return t.source===e.source&&t.flags===e.flags}function wj(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var a=new Array(n),i=t.values(),o,l;(o=i.next())&&!o.done;){for(var c=e.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!a[u]&&r.equals(o.value,l.value,o.value,l.value,t,e,r)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function bK(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function jK(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function M3(t,e,r,n){return(n===uK||n===dK||n===cK)&&(t.$$typeof||e.$$typeof)?!0:lK(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var wK="[object Arguments]",SK="[object Boolean]",NK="[object Date]",AK="[object Error]",CK="[object Map]",kK="[object Number]",OK="[object Object]",EK="[object RegExp]",PK="[object Set]",TK="[object String]",IK="[object URL]",MK=Array.isArray,Sj=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,Nj=Object.assign,$K=Object.prototype.toString.call.bind(Object.prototype.toString);function RK(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,a=t.areFunctionsEqual,i=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,u=t.areSetsEqual,f=t.areTypedArraysEqual,h=t.areUrlsEqual,p=t.unknownTagComparators;return function(x,g,y){if(x===g)return!0;if(x==null||g==null)return!1;var j=typeof x;if(j!==typeof g)return!1;if(j!=="object")return j==="number"?o(x,g,y):j==="function"?a(x,g,y):!1;var b=x.constructor;if(b!==g.constructor)return!1;if(b===Object)return l(x,g,y);if(MK(x))return e(x,g,y);if(Sj!=null&&Sj(x))return f(x,g,y);if(b===Date)return r(x,g,y);if(b===RegExp)return d(x,g,y);if(b===Map)return i(x,g,y);if(b===Set)return u(x,g,y);var S=$K(x);if(S===NK)return r(x,g,y);if(S===EK)return d(x,g,y);if(S===CK)return i(x,g,y);if(S===PK)return u(x,g,y);if(S===OK)return typeof x.then!="function"&&typeof g.then!="function"&&l(x,g,y);if(S===IK)return h(x,g,y);if(S===AK)return n(x,g,y);if(S===wK)return l(x,g,y);if(S===SK||S===kK||S===TK)return c(x,g,y);if(p){var w=p[S];if(!w){var v=oK(x);v&&(w=p[v])}if(w)return w(x,g,y)}return!1}}function DK(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,a={areArraysEqual:n?zl:fK,areDatesEqual:hK,areErrorsEqual:pK,areFunctionsEqual:mK,areMapsEqual:n?xj(jj,zl):jj,areNumbersEqual:gK,areObjectsEqual:n?zl:xK,arePrimitiveWrappersEqual:yK,areRegExpsEqual:vK,areSetsEqual:n?xj(wj,zl):wj,areTypedArraysEqual:n?zl:bK,areUrlsEqual:jK,unknownTagComparators:void 0};if(r&&(a=Nj({},a,r(a))),e){var i=Zd(a.areArraysEqual),o=Zd(a.areMapsEqual),l=Zd(a.areObjectsEqual),c=Zd(a.areSetsEqual);a=Nj({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function _K(t){return function(e,r,n,a,i,o,l){return t(e,r,l)}}function LK(t){var e=t.circular,r=t.comparator,n=t.createState,a=t.equals,i=t.strict;if(n)return function(c,d){var u=n(),f=u.cache,h=f===void 0?e?new WeakMap:void 0:f,p=u.meta;return r(c,d,{cache:h,equals:a,meta:p,strict:i})};if(e)return function(c,d){return r(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return r(c,d,o)}}var zK=zs();zs({strict:!0});zs({circular:!0});zs({circular:!0,strict:!0});zs({createInternalComparator:function(){return Bi}});zs({strict:!0,createInternalComparator:function(){return Bi}});zs({circular:!0,createInternalComparator:function(){return Bi}});zs({circular:!0,createInternalComparator:function(){return Bi},strict:!0});function zs(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,a=t.createState,i=t.strict,o=i===void 0?!1:i,l=DK(t),c=RK(l),d=n?n(c):_K(c);return LK({circular:r,comparator:c,createState:a,equals:d,strict:o})}function FK(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Aj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):FK(a)};requestAnimationFrame(n)}function Yg(t){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yg(t)}function BK(t){return WK(t)||HK(t)||VK(t)||UK()}function UK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VK(t,e){if(t){if(typeof t=="string")return Cj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cj(t,e)}}function Cj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function HK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WK(t){if(Array.isArray(t))return t}function qK(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=BK(o),c=l[0],d=l.slice(1);if(typeof c=="number"){Aj(a.bind(null,d),c);return}a(c),Aj(a.bind(null,d));return}Yg(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function Vc(t){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(t)}function kj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Oj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kj(Object(r),!0).forEach(function(n){$3(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $3(t,e,r){return e=YK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YK(t){var e=GK(t,"string");return Vc(e)==="symbol"?e:String(e)}function GK(t,e){if(Vc(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KK=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},JK=function(e){return e},XK=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},rc=function(e,r){return Object.keys(r).reduce(function(n,a){return Oj(Oj({},n),{},$3({},a,e(a,r[a])))},{})},Ej=function(e,r,n){return e.map(function(a){return"".concat(XK(a)," ").concat(r,"ms ").concat(n)}).join(",")};function QK(t,e){return tJ(t)||eJ(t,e)||R3(t,e)||ZK()}function ZK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eJ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function tJ(t){if(Array.isArray(t))return t}function rJ(t){return sJ(t)||aJ(t)||R3(t)||nJ()}function nJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R3(t,e){if(t){if(typeof t=="string")return Gg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gg(t,e)}}function aJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sJ(t){if(Array.isArray(t))return Gg(t)}function Gg(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var of=1e-4,D3=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},_3=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},Pj=function(e,r){return function(n){var a=D3(e,r);return _3(a,n)}},iJ=function(e,r){return function(n){var a=D3(e,r),i=[].concat(rJ(a.map(function(o,l){return o*l}).slice(1)),[0]);return _3(i,n)}},Tj=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=QK(d,4);a=u[0],i=u[1],o=u[2],l=u[3]}}}var f=Pj(a,o),h=Pj(i,l),p=iJ(a,o),m=function(y){return y>1?1:y<0?0:y},x=function(y){for(var j=y>1?1:y,b=j,S=0;S<8;++S){var w=f(b)-j,v=p(b);if(Math.abs(w-j)<of||v<of)return h(b);b=m(b-w/v)}return h(b)};return x.isStepper=!1,x},oJ=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,o=e.dt,l=o===void 0?17:o,c=function(u,f,h){var p=-(u-f)*n,m=h*i,x=h+(p-m)*l/1e3,g=h*l/1e3+u;return Math.abs(g-f)<of&&Math.abs(x)<of?[f,0]:[g,x]};return c.isStepper=!0,c.dt=l,c},lJ=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Tj(a);case"spring":return oJ();default:if(a.split("(")[0]==="cubic-bezier")return Tj(a)}return typeof a=="function"?a:null};function Hc(t){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(t)}function Ij(t){return uJ(t)||dJ(t)||L3(t)||cJ()}function cJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uJ(t){if(Array.isArray(t))return Jg(t)}function Mj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Mj(Object(r),!0).forEach(function(n){Kg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kg(t,e,r){return e=fJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fJ(t){var e=hJ(t,"string");return Hc(e)==="symbol"?e:String(e)}function hJ(t,e){if(Hc(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pJ(t,e){return xJ(t)||gJ(t,e)||L3(t,e)||mJ()}function mJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L3(t,e){if(t){if(typeof t=="string")return Jg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jg(t,e)}}function Jg(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gJ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function xJ(t){if(Array.isArray(t))return t}var lf=function(e,r,n){return e+(r-e)*n},Xg=function(e){var r=e.from,n=e.to;return r!==n},yJ=function t(e,r,n){var a=rc(function(i,o){if(Xg(o)){var l=e(o.from,o.to,o.velocity),c=pJ(l,2),d=c[0],u=c[1];return jr(jr({},o),{},{from:d,velocity:u})}return o},r);return n<1?rc(function(i,o){return Xg(o)?jr(jr({},o),{},{velocity:lf(o.velocity,a[i].velocity,n),from:lf(o.from,a[i].from,n)}):o},r):t(e,a,n-1)};const vJ=function(t,e,r,n,a){var i=KK(t,e),o=i.reduce(function(g,y){return jr(jr({},g),{},Kg({},y,[t[y],e[y]]))},{}),l=i.reduce(function(g,y){return jr(jr({},g),{},Kg({},y,{from:t[y],velocity:0,to:e[y]}))},{}),c=-1,d,u,f=function(){return null},h=function(){return rc(function(y,j){return j.from},l)},p=function(){return!Object.values(l).filter(Xg).length},m=function(y){d||(d=y);var j=y-d,b=j/r.dt;l=yJ(r,l,b),a(jr(jr(jr({},t),e),h())),d=y,p()||(c=requestAnimationFrame(f))},x=function(y){u||(u=y);var j=(y-u)/n,b=rc(function(w,v){return lf.apply(void 0,Ij(v).concat([r(j)]))},o);if(a(jr(jr(jr({},t),e),b)),j<1)c=requestAnimationFrame(f);else{var S=rc(function(w,v){return lf.apply(void 0,Ij(v).concat([r(1)]))},o);a(jr(jr(jr({},t),e),S))}};return f=r.isStepper?m:x,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Lo(t){"@babel/helpers - typeof";return Lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lo(t)}var bJ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function jJ(t,e){if(t==null)return{};var r=wJ(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wJ(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function gm(t){return CJ(t)||AJ(t)||NJ(t)||SJ()}function SJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NJ(t,e){if(t){if(typeof t=="string")return Qg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qg(t,e)}}function AJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CJ(t){if(Array.isArray(t))return Qg(t)}function Qg(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $j(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Gn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$j(Object(r),!0).forEach(function(n){Gl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$j(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gl(t,e,r){return e=z3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z3(n.key),n)}}function EJ(t,e,r){return e&&OJ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function z3(t){var e=PJ(t,"string");return Lo(e)==="symbol"?e:String(e)}function PJ(t,e){if(Lo(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lo(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zg(t,e)}function Zg(t,e){return Zg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zg(t,e)}function IJ(t){var e=MJ();return function(){var n=cf(t),a;if(e){var i=cf(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ex(this,a)}}function ex(t,e){if(e&&(Lo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tx(t)}function tx(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MJ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cf(t){return cf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cf(t)}var ja=function(t){TJ(r,t);var e=IJ(r);function r(n,a){var i;kJ(this,r),i=e.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,f=o.steps,h=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(tx(i)),i.changeStyle=i.changeStyle.bind(tx(i)),!l||p<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:u}),ex(i);if(f&&f.length)i.state={style:f[0].style};else if(d){if(typeof h=="function")return i.state={style:d},ex(i);i.state={style:c?Gl({},c,d):d}}else i.state={style:{}};return i}return EJ(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,f=i.from,h=this.state.style;if(l){if(!o){var p={style:c?Gl({},c,u):u};this.state&&h&&(c&&h[c]!==u||!c&&h!==u)&&this.setState(p);return}if(!(zK(a.to,u)&&a.canBegin&&a.isActive)){var m=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=m||d?f:a.to;if(this.state&&h){var g={style:c?Gl({},c,x):x};(c&&h[c]!==x||!c&&h!==x)&&this.setState(g)}this.runAnimation(Gn(Gn({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,d=a.easing,u=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,p=vJ(o,l,lJ(d),c,this.changeStyle),m=function(){i.stopJSAnimation=p()};this.manager.start([h,u,m,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,d=o[0],u=d.style,f=d.duration,h=f===void 0?0:f,p=function(x,g,y){if(y===0)return x;var j=g.duration,b=g.easing,S=b===void 0?"ease":b,w=g.style,v=g.properties,C=g.onAnimationEnd,A=y>0?o[y-1]:g,k=v||Object.keys(w);if(typeof S=="function"||S==="spring")return[].concat(gm(x),[i.runJSAnimation.bind(i,{from:A.style,to:w,duration:j,easing:S}),j]);var O=Ej(k,j,S),$=Gn(Gn(Gn({},A.style),w),{},{transition:O});return[].concat(gm(x),[$,j,C]).filter(JK)};return this.manager.start([c].concat(gm(o.reduce(p,[u,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=qK());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,p=a.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof d=="function"||typeof p=="function"||d==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var x=l?Gl({},l,c):c,g=Ej(Object.keys(x),o,d);m.start([u,i,Gn(Gn({},x),{},{transition:g}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=jJ(a,bJ),d=N.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!l||d===0||o<=0)return i;var f=function(p){var m=p.props,x=m.style,g=x===void 0?{}:x,y=m.className,j=N.cloneElement(p,Gn(Gn({},c),{},{style:Gn(Gn({},g),u),className:y}));return j};return d===1?f(N.Children.only(i)):D.createElement("div",null,N.Children.map(i,function(h){return f(h)}))}}]),r}(N.PureComponent);ja.displayName="Animate";ja.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ja.propTypes={from:ct.oneOfType([ct.object,ct.string]),to:ct.oneOfType([ct.object,ct.string]),attributeName:ct.string,duration:ct.number,begin:ct.number,easing:ct.oneOfType([ct.string,ct.func]),steps:ct.arrayOf(ct.shape({duration:ct.number.isRequired,style:ct.object.isRequired,easing:ct.oneOfType([ct.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ct.func]),properties:ct.arrayOf("string"),onAnimationEnd:ct.func})),children:ct.oneOfType([ct.node,ct.func]),isActive:ct.bool,canBegin:ct.bool,onAnimationEnd:ct.func,shouldReAnimate:ct.bool,onAnimationStart:ct.func,onAnimationReStart:ct.func};function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function df(){return df=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},df.apply(this,arguments)}function $J(t,e){return LJ(t)||_J(t,e)||DJ(t,e)||RJ()}function RJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DJ(t,e){if(t){if(typeof t=="string")return Rj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rj(t,e)}}function Rj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _J(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function LJ(t){if(Array.isArray(t))return t}function Dj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _j(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dj(Object(r),!0).forEach(function(n){zJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zJ(t,e,r){return e=FJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FJ(t){var e=BJ(t,"string");return Wc(e)=="symbol"?e:e+""}function BJ(t,e){if(Wc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lj=function(e,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,d=a>=0&&n>=0||a<0&&n<0?1:0,u;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=i[h]>o?o:i[h];u="M".concat(e,",").concat(r+l*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+c*f[0],",").concat(r)),u+="L ".concat(e+n-c*f[1],",").concat(r),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(r+l*f[1])),u+="L ".concat(e+n,",").concat(r+a-l*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+n-c*f[2],",").concat(r+a)),u+="L ".concat(e+c*f[3],",").concat(r+a),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(r+a-l*f[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var m=Math.min(o,i);u="M ".concat(e,",").concat(r+l*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(e+c*m,",").concat(r,`
            L `).concat(e+n-c*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(e+n,",").concat(r+l*m,`
            L `).concat(e+n,",").concat(r+a-l*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(e+n-c*m,",").concat(r+a,`
            L `).concat(e+c*m,",").concat(r+a,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(e,",").concat(r+a-l*m," Z")}else u="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return u},UJ=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),u=Math.max(i,i+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return n>=d&&n<=u&&a>=f&&a<=h}return!1},VJ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},my=function(e){var r=_j(_j({},VJ),e),n=N.useRef(),a=N.useState(-1),i=$J(a,2),o=i[0],l=i[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&l(S)}catch{}},[]);var c=r.x,d=r.y,u=r.width,f=r.height,h=r.radius,p=r.className,m=r.animationEasing,x=r.animationDuration,g=r.animationBegin,y=r.isAnimationActive,j=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||u===0||f===0)return null;var b=He("recharts-rectangle",p);return j?D.createElement(ja,{canBegin:o>0,from:{width:u,height:f,x:c,y:d},to:{width:u,height:f,x:c,y:d},duration:x,animationEasing:m,isActive:j},function(S){var w=S.width,v=S.height,C=S.x,A=S.y;return D.createElement(ja,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:x,isActive:y,easing:m},D.createElement("path",df({},Pe(r,!0),{className:b,d:Lj(C,A,w,v,h),ref:n})))}):D.createElement("path",df({},Pe(r,!0),{className:b,d:Lj(c,d,u,f,h)}))},HJ=["points","className","baseLinePoints","connectNulls"];function lo(){return lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lo.apply(this,arguments)}function WJ(t,e){if(t==null)return{};var r=qJ(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qJ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function zj(t){return JJ(t)||KJ(t)||GJ(t)||YJ()}function YJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GJ(t,e){if(t){if(typeof t=="string")return rx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rx(t,e)}}function KJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JJ(t){if(Array.isArray(t))return rx(t)}function rx(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Fj=function(e){return e&&e.x===+e.x&&e.y===+e.y},XJ=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){Fj(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Fj(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},nc=function(e,r){var n=XJ(e);r&&(n=[n.reduce(function(i,o){return[].concat(zj(i),zj(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},QJ=function(e,r,n){var a=nc(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(nc(r.reverse(),n).slice(1))},ZJ=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,o=WJ(e,HJ);if(!r||!r.length)return null;var l=He("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",d=QJ(r,a,i);return D.createElement("g",{className:l},D.createElement("path",lo({},Pe(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?D.createElement("path",lo({},Pe(o,!0),{fill:"none",d:nc(r,i)})):null,c?D.createElement("path",lo({},Pe(o,!0),{fill:"none",d:nc(a,i)})):null)}var u=nc(r,i);return D.createElement("path",lo({},Pe(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:l,d:u}))};function nx(){return nx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nx.apply(this,arguments)}var pp=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,o=He("recharts-dot",i);return r===+r&&n===+n&&a===+a?N.createElement("circle",nx({},Pe(e,!1),Pu(e),{className:o,cx:r,cy:n,r:a})):null};function qc(t){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qc(t)}var eX=["x","y","top","left","width","height","className"];function ax(){return ax=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ax.apply(this,arguments)}function Bj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tX(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bj(Object(r),!0).forEach(function(n){rX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rX(t,e,r){return e=nX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nX(t){var e=aX(t,"string");return qc(e)=="symbol"?e:e+""}function aX(t,e){if(qc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sX(t,e){if(t==null)return{};var r=iX(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iX(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var oX=function(e,r,n,a,i,o){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},lX=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.top,l=o===void 0?0:o,c=e.left,d=c===void 0?0:c,u=e.width,f=u===void 0?0:u,h=e.height,p=h===void 0?0:h,m=e.className,x=sX(e,eX),g=tX({x:n,y:i,top:l,left:d,width:f,height:p},x);return!se(n)||!se(i)||!se(f)||!se(p)||!se(l)||!se(d)?null:D.createElement("path",ax({},Pe(g,!0),{className:He("recharts-cross",m),d:oX(n,i,f,p,l,d)}))},cX=cp,dX=XN,uX=ka;function fX(t,e){return t&&t.length?cX(t,uX(e),dX):void 0}var hX=fX;const pX=at(hX);var mX=cp,gX=ka,xX=QN;function yX(t,e){return t&&t.length?mX(t,gX(e),xX):void 0}var vX=yX;const bX=at(vX);var jX=["cx","cy","angle","ticks","axisLine"],wX=["ticks","tick","angle","tickFormatter","stroke"];function zo(t){"@babel/helpers - typeof";return zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zo(t)}function ac(){return ac=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ac.apply(this,arguments)}function Uj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uj(Object(r),!0).forEach(function(n){mp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vj(t,e){if(t==null)return{};var r=SX(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function SX(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function NX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,B3(n.key),n)}}function AX(t,e,r){return e&&Hj(t.prototype,e),r&&Hj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function CX(t,e,r){return e=uf(e),kX(t,F3()?Reflect.construct(e,r||[],uf(t).constructor):e.apply(t,r))}function kX(t,e){if(e&&(zo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OX(t)}function OX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F3=function(){return!!t})()}function uf(t){return uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uf(t)}function EX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sx(t,e)}function sx(t,e){return sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sx(t,e)}function mp(t,e,r){return e=B3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B3(t){var e=PX(t,"string");return zo(e)=="symbol"?e:e+""}function PX(t,e){if(zo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gp=function(t){function e(){return NX(this,e),CX(this,e,arguments)}return EX(e,t),AX(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Ct(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=pX(l,function(u){return u.coordinate||0}),d=bX(l,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,d=Vj(n,jX),u=l.reduce(function(m,x){return[Math.min(m[0],x.coordinate),Math.max(m[1],x.coordinate)]},[1/0,-1/0]),f=Ct(a,i,u[0],o),h=Ct(a,i,u[1],o),p=Xs(Xs(Xs({},Pe(d,!1)),{},{fill:"none"},Pe(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return D.createElement("line",ac({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,d=a.stroke,u=Vj(a,wX),f=this.getTickTextAnchor(),h=Pe(u,!1),p=Pe(o,!1),m=i.map(function(x,g){var y=n.getTickValueCoord(x),j=Xs(Xs(Xs(Xs({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(y.x,", ").concat(y.y,")")},h),{},{stroke:"none",fill:d},p),{},{index:g},y),{},{payload:x});return D.createElement(Ze,ac({className:He("recharts-polar-radius-axis-tick",C3(o)),key:"tick-".concat(x.coordinate)},Ci(n.props,x,g)),e.renderTickItem(o,j,c?c(x.value,g):x.value))});return D.createElement(Ze,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:D.createElement(Ze,{className:He("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),fr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return D.isValidElement(n)?o=D.cloneElement(n,a):ze(n)?o=n(a):o=D.createElement(ki,ac({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(N.PureComponent);mp(gp,"displayName","PolarRadiusAxis");mp(gp,"axisType","radiusAxis");mp(gp,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Fo(t){"@babel/helpers - typeof";return Fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fo(t)}function si(){return si=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},si.apply(this,arguments)}function Wj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Qs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wj(Object(r),!0).forEach(function(n){xp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,V3(n.key),n)}}function IX(t,e,r){return e&&qj(t.prototype,e),r&&qj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function MX(t,e,r){return e=ff(e),$X(t,U3()?Reflect.construct(e,r||[],ff(t).constructor):e.apply(t,r))}function $X(t,e){if(e&&(Fo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RX(t)}function RX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U3=function(){return!!t})()}function ff(t){return ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ff(t)}function DX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ix(t,e)}function ix(t,e){return ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ix(t,e)}function xp(t,e,r){return e=V3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V3(t){var e=_X(t,"string");return Fo(e)=="symbol"?e:e+""}function _X(t,e){if(Fo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var LX=Math.PI/180,Yj=1e-5,yp=function(t){function e(){return TX(this,e),MX(this,e,arguments)}return DX(e,t),IX(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,d=a.tickSize,u=d||8,f=Ct(i,o,l,n.coordinate),h=Ct(i,o,l+(c==="inner"?-1:1)*u,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*LX),o;return i>Yj?o=a==="outer"?"start":"end":i<-Yj?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,d=Qs(Qs({},Pe(this.props,!1)),{},{fill:"none"},Pe(l,!1));if(c==="circle")return D.createElement(pp,si({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:o}));var u=this.props.ticks,f=u.map(function(h){return Ct(a,i,o,h.coordinate)});return D.createElement(ZJ,si({className:"recharts-polar-angle-axis-line"},d,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,d=a.stroke,u=Pe(this.props,!1),f=Pe(o,!1),h=Qs(Qs({},u),{},{fill:"none"},Pe(l,!1)),p=i.map(function(m,x){var g=n.getTickLineCoord(m),y=n.getTickTextAnchor(m),j=Qs(Qs(Qs({textAnchor:y},u),{},{stroke:"none",fill:d},f),{},{index:x,payload:m,x:g.x2,y:g.y2});return D.createElement(Ze,si({className:He("recharts-polar-angle-axis-tick",C3(o)),key:"tick-".concat(m.coordinate)},Ci(n.props,m,x)),l&&D.createElement("line",si({className:"recharts-polar-angle-axis-tick-line"},h,g)),o&&e.renderTickItem(o,j,c?c(m.value,x):m.value))});return D.createElement(Ze,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:D.createElement(Ze,{className:He("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return D.isValidElement(n)?o=D.cloneElement(n,a):ze(n)?o=n(a):o=D.createElement(ki,si({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(N.PureComponent);xp(yp,"displayName","PolarAngleAxis");xp(yp,"axisType","angleAxis");xp(yp,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var zX=Y4,FX=zX(Object.getPrototypeOf,Object),BX=FX,UX=Za,VX=BX,HX=es,WX="[object Object]",qX=Function.prototype,YX=Object.prototype,H3=qX.toString,GX=YX.hasOwnProperty,KX=H3.call(Object);function JX(t){if(!HX(t)||UX(t)!=WX)return!1;var e=VX(t);if(e===null)return!0;var r=GX.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&H3.call(r)==KX}var XX=JX;const QX=at(XX);var ZX=Za,eQ=es,tQ="[object Boolean]";function rQ(t){return t===!0||t===!1||eQ(t)&&ZX(t)==tQ}var nQ=rQ;const aQ=at(nQ);function Yc(t){"@babel/helpers - typeof";return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(t)}function hf(){return hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hf.apply(this,arguments)}function sQ(t,e){return cQ(t)||lQ(t,e)||oQ(t,e)||iQ()}function iQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oQ(t,e){if(t){if(typeof t=="string")return Gj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gj(t,e)}}function Gj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lQ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function cQ(t){if(Array.isArray(t))return t}function Kj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Jj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kj(Object(r),!0).forEach(function(n){dQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dQ(t,e,r){return e=uQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uQ(t){var e=fQ(t,"string");return Yc(e)=="symbol"?e:e+""}function fQ(t,e){if(Yc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xj=function(e,r,n,a,i){var o=n-a,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-o/2,",").concat(r+i),l+="L ".concat(e+n-o/2-a,",").concat(r+i),l+="L ".concat(e,",").concat(r," Z"),l},hQ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pQ=function(e){var r=Jj(Jj({},hQ),e),n=N.useRef(),a=N.useState(-1),i=sQ(a,2),o=i[0],l=i[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&l(b)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,f=r.lowerWidth,h=r.height,p=r.className,m=r.animationEasing,x=r.animationDuration,g=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||h!==+h||u===0&&f===0||h===0)return null;var j=He("recharts-trapezoid",p);return y?D.createElement(ja,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:d},to:{upperWidth:u,lowerWidth:f,height:h,x:c,y:d},duration:x,animationEasing:m,isActive:y},function(b){var S=b.upperWidth,w=b.lowerWidth,v=b.height,C=b.x,A=b.y;return D.createElement(ja,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:x,easing:m},D.createElement("path",hf({},Pe(r,!0),{className:j,d:Xj(C,A,S,w,v),ref:n})))}):D.createElement("g",null,D.createElement("path",hf({},Pe(r,!0),{className:j,d:Xj(c,d,u,f,h)})))},mQ=["option","shapeType","propTransformer","activeClassName","isActive"];function Gc(t){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gc(t)}function gQ(t,e){if(t==null)return{};var r=xQ(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xQ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Qj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qj(Object(r),!0).forEach(function(n){yQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yQ(t,e,r){return e=vQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vQ(t){var e=bQ(t,"string");return Gc(e)=="symbol"?e:e+""}function bQ(t,e){if(Gc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jQ(t,e){return pf(pf({},e),t)}function wQ(t,e){return t==="symbols"}function Zj(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return D.createElement(my,r);case"trapezoid":return D.createElement(pQ,r);case"sector":return D.createElement(E3,r);case"symbols":if(wQ(e))return D.createElement($0,r);break;default:return null}}function SQ(t){return N.isValidElement(t)?t.props:t}function W3(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?jQ:n,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,l=t.isActive,c=gQ(t,mQ),d;if(N.isValidElement(e))d=N.cloneElement(e,pf(pf({},c),SQ(e)));else if(ze(e))d=e(c);else if(QX(e)&&!aQ(e)){var u=a(e,c);d=D.createElement(Zj,{shapeType:r,elementProps:u})}else{var f=c;d=D.createElement(Zj,{shapeType:r,elementProps:f})}return l?D.createElement(Ze,{className:o},d):d}function vp(t,e){return e!=null&&"trapezoids"in t.props}function bp(t,e){return e!=null&&"sectors"in t.props}function Kc(t,e){return e!=null&&"points"in t.props}function NQ(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function AQ(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function CQ(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function kQ(t,e){var r;return vp(t,e)?r=NQ:bp(t,e)?r=AQ:Kc(t,e)&&(r=CQ),r}function OQ(t,e){var r;return vp(t,e)?r="trapezoids":bp(t,e)?r="sectors":Kc(t,e)&&(r="points"),r}function EQ(t,e){if(vp(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(bp(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Kc(t,e)?e.payload:{}}function PQ(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=OQ(r,e),i=EQ(r,e),o=n.filter(function(c,d){var u=Do(i,c),f=r.props[a].filter(function(m){var x=kQ(r,e);return x(m,e)}),h=r.props[a].indexOf(f[f.length-1]),p=d===h;return u&&p}),l=n.indexOf(o[o.length-1]);return l}var gu;function Bo(t){"@babel/helpers - typeof";return Bo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bo(t)}function co(){return co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},co.apply(this,arguments)}function ew(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Nt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ew(Object(r),!0).forEach(function(n){$n(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ew(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Y3(n.key),n)}}function IQ(t,e,r){return e&&tw(t.prototype,e),r&&tw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function MQ(t,e,r){return e=mf(e),$Q(t,q3()?Reflect.construct(e,r||[],mf(t).constructor):e.apply(t,r))}function $Q(t,e){if(e&&(Bo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RQ(t)}function RQ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q3=function(){return!!t})()}function mf(t){return mf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mf(t)}function DQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ox(t,e)}function ox(t,e){return ox=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ox(t,e)}function $n(t,e,r){return e=Y3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y3(t){var e=_Q(t,"string");return Bo(e)=="symbol"?e:e+""}function _Q(t,e){if(Bo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wa=function(t){function e(r){var n;return TQ(this,e),n=MQ(this,e,[r]),$n(n,"pieRef",null),$n(n,"sectorRefs",[]),$n(n,"id",xl("recharts-pie-")),$n(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ze(a)&&a()}),$n(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ze(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return DQ(e,t),IQ(e,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,d=i.valueKey,u=Pe(this.props,!1),f=Pe(o,!1),h=Pe(l,!1),p=o&&o.offsetRadius||20,m=n.map(function(x,g){var y=(x.startAngle+x.endAngle)/2,j=Ct(x.cx,x.cy,x.outerRadius+p,y),b=Nt(Nt(Nt(Nt({},u),x),{},{stroke:"none"},f),{},{index:g,textAnchor:e.getTextAnchor(j.x,x.cx)},j),S=Nt(Nt(Nt(Nt({},u),x),{},{fill:"none",stroke:x.fill},h),{},{index:g,points:[Ct(x.cx,x.cy,x.outerRadius,y),j]}),w=c;return Ve(c)&&Ve(d)?w="value":Ve(c)&&(w=d),D.createElement(Ze,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(g)},l&&e.renderLabelLineItem(l,S,"line"),e.renderLabelItem(o,b,ar(x,w)))});return D.createElement(Ze,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(u),h=c&&a.hasActiveIndex()?c:null,p=f?o:h,m=Nt(Nt({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return D.createElement(Ze,co({ref:function(g){g&&!a.sectorRefs.includes(g)&&a.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Ci(a.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),D.createElement(W3,co({option:p,isActive:f,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,f=this.state,h=f.prevSectors,p=f.prevIsAnimationActive;return D.createElement(ja,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var x=m.t,g=[],y=i&&i[0],j=y.startAngle;return i.forEach(function(b,S){var w=h&&h[S],v=S>0?jn(b,"paddingAngle",0):0;if(w){var C=tn(w.endAngle-w.startAngle,b.endAngle-b.startAngle),A=Nt(Nt({},b),{},{startAngle:j+v,endAngle:j+C(x)+v});g.push(A),j=A.endAngle}else{var k=b.endAngle,O=b.startAngle,$=tn(0,k-O),M=$(x),T=Nt(Nt({},b),{},{startAngle:j+v,endAngle:j+M+v});g.push(T),j=T.endAngle}}),D.createElement(Ze,null,n.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!Do(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,d=a.cx,u=a.cy,f=a.innerRadius,h=a.outerRadius,p=a.isAnimationActive,m=this.state.isAnimationFinished;if(i||!o||!o.length||!se(d)||!se(u)||!se(f)||!se(h))return null;var x=He("recharts-pie",l);return D.createElement(Ze,{tabIndex:this.props.rootTabIndex,className:x,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(o),fr.renderCallByParent(this.props,null,!1),(!p||m)&&Ha.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(D.isValidElement(n))return D.cloneElement(n,a);if(ze(n))return n(a);var o=He("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return D.createElement(xo,co({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if(D.isValidElement(n))return D.cloneElement(n,a);var o=i;if(ze(n)&&(o=n(a),D.isValidElement(o)))return o;var l=He("recharts-pie-label-text",typeof n!="boolean"&&!ze(n)?n.className:"");return D.createElement(ki,co({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(N.PureComponent);gu=wa;$n(wa,"displayName","Pie");$n(wa,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Li.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});$n(wa,"parseDeltaAngle",function(t,e){var r=Br(e-t),n=Math.min(Math.abs(e-t),360);return r*n});$n(wa,"getRealPieData",function(t){var e=t.data,r=t.children,n=Pe(t,!1),a=Fn(r,Ac);return e&&e.length?e.map(function(i,o){return Nt(Nt(Nt({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return Nt(Nt({},n),i.props)}):[]});$n(wa,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,a=e.width,i=e.height,o=A3(a,i),l=n+Ur(t.cx,a,a/2),c=r+Ur(t.cy,i,i/2),d=Ur(t.innerRadius,o,0),u=Ur(t.outerRadius,o,o*.8),f=t.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:f}});$n(wa,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?Nt(Nt({},e.type.defaultProps),e.props):e.props,a=gu.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,d=n.dataKey,u=n.nameKey,f=n.valueKey,h=n.tooltipType,p=Math.abs(n.minAngle),m=gu.parseCoordinateOfPie(n,r),x=gu.parseDeltaAngle(o,l),g=Math.abs(x),y=d;Ve(d)&&Ve(f)?(na(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):Ve(d)&&(na(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var j=a.filter(function(A){return ar(A,y,0)!==0}).length,b=(g>=360?j:j-1)*c,S=g-j*p-b,w=a.reduce(function(A,k){var O=ar(k,y,0);return A+(se(O)?O:0)},0),v;if(w>0){var C;v=a.map(function(A,k){var O=ar(A,y,0),$=ar(A,u,k),M=(se(O)?O:0)/w,T;k?T=C.endAngle+Br(x)*c*(O!==0?1:0):T=o;var I=T+Br(x)*((O!==0?p:0)+M*S),z=(T+I)/2,U=(m.innerRadius+m.outerRadius)/2,Y=[{name:$,value:O,payload:A,dataKey:y,type:h}],Z=Ct(m.cx,m.cy,U,z);return C=Nt(Nt(Nt({percent:M,cornerRadius:i,name:$,tooltipPayload:Y,midAngle:z,middleRadius:U,tooltipPosition:Z},A),m),{},{value:ar(A,y),startAngle:T,endAngle:I,payload:A,paddingAngle:Br(x)*c}),C})}return Nt(Nt({},m),{},{sectors:v,data:a})});var LQ=Math.ceil,zQ=Math.max;function FQ(t,e,r,n){for(var a=-1,i=zQ(LQ((e-t)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=t,t+=r;return o}var BQ=FQ,UQ=fN,rw=1/0,VQ=17976931348623157e292;function HQ(t){if(!t)return t===0?t:0;if(t=UQ(t),t===rw||t===-rw){var e=t<0?-1:1;return e*VQ}return t===t?t:0}var G3=HQ,WQ=BQ,qQ=rp,xm=G3;function YQ(t){return function(e,r,n){return n&&typeof n!="number"&&qQ(e,r,n)&&(r=n=void 0),e=xm(e),r===void 0?(r=e,e=0):r=xm(r),n=n===void 0?e<r?1:-1:xm(n),WQ(e,r,n,t)}}var GQ=YQ,KQ=GQ,JQ=KQ(),XQ=JQ;const gf=at(XQ);function Jc(t){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(t)}function nw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function aw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nw(Object(r),!0).forEach(function(n){K3(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K3(t,e,r){return e=QQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QQ(t){var e=ZQ(t,"string");return Jc(e)=="symbol"?e:e+""}function ZQ(t,e){if(Jc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eZ=["Webkit","Moz","O","ms"],tZ=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=eZ.reduce(function(i,o){return aw(aw({},i),{},K3({},o+n,r))},{});return a[e]=r,a};function Uo(t){"@babel/helpers - typeof";return Uo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uo(t)}function xf(){return xf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xf.apply(this,arguments)}function sw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ym(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sw(Object(r),!0).forEach(function(n){pn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X3(n.key),n)}}function nZ(t,e,r){return e&&iw(t.prototype,e),r&&iw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function aZ(t,e,r){return e=yf(e),sZ(t,J3()?Reflect.construct(e,r||[],yf(t).constructor):e.apply(t,r))}function sZ(t,e){if(e&&(Uo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iZ(t)}function iZ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J3=function(){return!!t})()}function yf(t){return yf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yf(t)}function oZ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lx(t,e)}function lx(t,e){return lx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lx(t,e)}function pn(t,e,r){return e=X3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X3(t){var e=lZ(t,"string");return Uo(e)=="symbol"?e:e+""}function lZ(t,e){if(Uo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cZ=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,o=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=ec().domain(gf(0,c)).range([i,i+o-l]),u=d.domain().map(function(f){return d(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(a),scale:d,scaleValues:u}},ow=function(e){return e.changedTouches&&!!e.changedTouches.length},Vo=function(t){function e(r){var n;return rZ(this,e),n=aZ(this,e,[r]),pn(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),pn(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),pn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),pn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),pn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),pn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),pn(n,"handleSlideDragStart",function(a){var i=ow(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return oZ(e,t),nZ(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,f=Math.min(a,i),h=Math.max(a,i),p=e.getIndexInRange(o,f),m=e.getIndexInRange(o,h);return{startIndex:p-p%c,endIndex:m===u?u:m-m%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=ar(i[n],l,n);return ze(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,d=c.x,u=c.width,f=c.travellerWidth,h=c.startIndex,p=c.endIndex,m=c.onChange,x=n.pageX-i;x>0?x=Math.min(x,d+u-f-l,d+u-f-o):x<0&&(x=Math.max(x,d-o,d-l));var g=this.getIndex({startX:o+x,endX:l+x});(g.startIndex!==h||g.endIndex!==p)&&m&&m(g),this.setState({startX:o+x,endX:l+x,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=ow(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[o],u=this.props,f=u.x,h=u.width,p=u.travellerWidth,m=u.onChange,x=u.gap,g=u.data,y={startX:this.state.startX,endX:this.state.endX},j=n.pageX-i;j>0?j=Math.min(j,f+h-p-d):j<0&&(j=Math.max(j,f-d)),y[o]=d+j;var b=this.getIndex(y),S=b.startIndex,w=b.endIndex,v=function(){var A=g.length-1;return o==="startX"&&(l>c?S%x===0:w%x===0)||l<c&&w===A||o==="endX"&&(l>c?w%x===0:S%x===0)||l>c&&w===A};this.setState(pn(pn({},o,d+j),"brushMoveStartX",n.pageX),function(){m&&v()&&m(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[a],f=l.indexOf(u);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var p=l[h];a==="startX"&&p>=d||a==="endX"&&p<=c||this.setState(pn({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,d=n.stroke;return D.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,d=n.children,u=n.padding,f=N.Children.only(d);return f?D.cloneElement(f,{x:a,y:i,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,f=c.height,h=c.traveller,p=c.ariaLabel,m=c.data,x=c.startIndex,g=c.endIndex,y=Math.max(n,this.props.x),j=ym(ym({},Pe(this.props,!1)),{},{x:y,y:d,width:u,height:f}),b=p||"Min value: ".concat((i=m[x])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=m[g])===null||o===void 0?void 0:o.name);return D.createElement(Ze,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,j))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(n,a)+d,f=Math.max(Math.abs(a-n)-d,0);return D.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,d=n.stroke,u=this.state,f=u.startX,h=u.endX,p=5,m={pointerEvents:"none",fill:d};return D.createElement(Ze,{className:"recharts-brush-texts"},D.createElement(ki,xf({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:o+l/2},m),this.getTextOfTick(a)),D.createElement(ki,xf({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+p,y:o+l/2},m),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,d=n.width,u=n.height,f=n.alwaysShowText,h=this.state,p=h.startX,m=h.endX,x=h.isTextActive,g=h.isSlideMoving,y=h.isTravellerMoving,j=h.isTravellerFocused;if(!a||!a.length||!se(l)||!se(c)||!se(d)||!se(u)||d<=0||u<=0)return null;var b=He("recharts-brush",i),S=D.Children.count(o)===1,w=tZ("userSelect","none");return D.createElement(Ze,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(x||g||y||j||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,d=Math.floor(i+l/2)-1;return D.createElement(D.Fragment,null,D.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),D.createElement("line",{x1:a+1,y1:d,x2:a+o-1,y2:d,fill:"none",stroke:"#fff"}),D.createElement("line",{x1:a+1,y1:d+2,x2:a+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return D.isValidElement(n)?i=D.cloneElement(n,a):ze(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,d=n.updateId,u=n.startIndex,f=n.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return ym({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?cZ({data:i,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(N.PureComponent);pn(Vo,"displayName","Brush");pn(Vo,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var dZ=B0;function uZ(t,e){var r;return dZ(t,function(n,a,i){return r=e(n,a,i),!r}),!!r}var fZ=uZ,hZ=z4,pZ=ka,mZ=fZ,gZ=on,xZ=rp;function yZ(t,e,r){var n=gZ(t)?hZ:mZ;return r&&xZ(t,e,r)&&(e=void 0),n(t,pZ(e))}var vZ=yZ;const bZ=at(vZ);var xa=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},lw=oN;function jZ(t,e,r){e=="__proto__"&&lw?lw(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var wZ=jZ,SZ=wZ,NZ=sN,AZ=ka;function CZ(t,e){var r={};return e=AZ(e),NZ(t,function(n,a,i){SZ(r,a,e(n,a,i))}),r}var kZ=CZ;const OZ=at(kZ);function EZ(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var PZ=EZ,TZ=B0;function IZ(t,e){var r=!0;return TZ(t,function(n,a,i){return r=!!e(n,a,i),r}),r}var MZ=IZ,$Z=PZ,RZ=MZ,DZ=ka,_Z=on,LZ=rp;function zZ(t,e,r){var n=_Z(t)?$Z:RZ;return r&&LZ(t,e,r)&&(e=void 0),n(t,DZ(e))}var FZ=zZ;const Q3=at(FZ);var BZ=["x","y"];function Xc(t){"@babel/helpers - typeof";return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(t)}function cx(){return cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cx.apply(this,arguments)}function cw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cw(Object(r),!0).forEach(function(n){UZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function UZ(t,e,r){return e=VZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VZ(t){var e=HZ(t,"string");return Xc(e)=="symbol"?e:e+""}function HZ(t,e){if(Xc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WZ(t,e){if(t==null)return{};var r=qZ(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qZ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function YZ(t,e){var r=t.x,n=t.y,a=WZ(t,BZ),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),d="".concat(e.height||a.height),u=parseInt(d,10),f="".concat(e.width||a.width),h=parseInt(f,10);return Fl(Fl(Fl(Fl(Fl({},e),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function dw(t){return D.createElement(W3,cx({shapeType:"rectangle",propTransformer:YZ,activeClassName:"recharts-active-bar"},t))}var GZ=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=se(n)||y$(n);return i?e(n,a):(i||Ei(),r)}},KZ=["value","background"],Z3;function Ho(t){"@babel/helpers - typeof";return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(t)}function JZ(t,e){if(t==null)return{};var r=XZ(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function XZ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function vf(){return vf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vf.apply(this,arguments)}function uw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Kt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uw(Object(r),!0).forEach(function(n){ys(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tA(n.key),n)}}function ZZ(t,e,r){return e&&fw(t.prototype,e),r&&fw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function eee(t,e,r){return e=bf(e),tee(t,eA()?Reflect.construct(e,r||[],bf(t).constructor):e.apply(t,r))}function tee(t,e){if(e&&(Ho(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ree(t)}function ree(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eA=function(){return!!t})()}function bf(t){return bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bf(t)}function nee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dx(t,e)}function dx(t,e){return dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dx(t,e)}function ys(t,e,r){return e=tA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tA(t){var e=aee(t,"string");return Ho(e)=="symbol"?e:e+""}function aee(t,e){if(Ho(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ho(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ui=function(t){function e(){var r;QZ(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=eee(this,e,[].concat(a)),ys(r,"state",{isAnimationFinished:!1}),ys(r,"id",xl("recharts-bar-")),ys(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),ys(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return nee(e,t),ZZ(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,u=Pe(this.props,!1);return n&&n.map(function(f,h){var p=h===c,m=p?d:o,x=Kt(Kt(Kt({},u),f),{},{isActive:p,option:m,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return D.createElement(Ze,vf({className:"recharts-bar-rectangle"},Ci(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),D.createElement(dw,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,f=a.animationId,h=this.state.prevData;return D.createElement(ja,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,x=i.map(function(g,y){var j=h&&h[y];if(j){var b=tn(j.x,g.x),S=tn(j.y,g.y),w=tn(j.width,g.width),v=tn(j.height,g.height);return Kt(Kt({},g),{},{x:b(m),y:S(m),width:w(m),height:v(m)})}if(o==="horizontal"){var C=tn(0,g.height),A=C(m);return Kt(Kt({},g),{},{y:g.y+g.height-A,height:A})}var k=tn(0,g.width),O=k(m);return Kt(Kt({},g),{},{width:O})});return D.createElement(Ze,null,n.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Do(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Pe(this.props.background,!1);return i.map(function(d,u){d.value;var f=d.background,h=JZ(d,KZ);if(!f)return null;var p=Kt(Kt(Kt(Kt(Kt({},h),{},{fill:"#eee"},f),c),Ci(n.props,d,u)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return D.createElement(dw,vf({key:"background-bar-".concat(u),option:n.props.background,isActive:u===l},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,f=Fn(u,hp);if(!f)return null;var h=d==="vertical"?o[0].height/2:o[0].width/2,p=function(g,y){var j=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:j,errorVal:ar(g,y)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return D.createElement(Ze,m,f.map(function(x){return D.cloneElement(x,{key:"error-bar-".concat(a,"-").concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,d=n.left,u=n.top,f=n.width,h=n.height,p=n.isAnimationActive,m=n.background,x=n.id;if(a||!i||!i.length)return null;var g=this.state.isAnimationFinished,y=He("recharts-bar",o),j=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,S=j||b,w=Ve(x)?this.id:x;return D.createElement(Ze,{className:y},j||b?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(w)},D.createElement("rect",{x:j?d:d-f/2,y:b?u:u-h/2,width:j?f:f*2,height:b?h:h*2}))):null,D.createElement(Ze,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(w,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,w),(!p||g)&&Ha.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(N.PureComponent);Z3=Ui;ys(Ui,"displayName","Bar");ys(Ui,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Li.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ys(Ui,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,f=t.displayedData,h=t.offset,p=_Y(n,r);if(!p)return null;var m=e.layout,x=r.type.defaultProps,g=x!==void 0?Kt(Kt({},x),r.props):r.props,y=g.dataKey,j=g.children,b=g.minPointSize,S=m==="horizontal"?o:i,w=d?S.scale.domain():null,v=HY({numericAxis:S}),C=Fn(j,Ac),A=f.map(function(k,O){var $,M,T,I,z,U;d?$=LY(d[u+O],w):($=ar(k,y),Array.isArray($)||($=[v,$]));var Y=GZ(b,Z3.defaultProps.minPointSize)($[1],O);if(m==="horizontal"){var Z,te=[o.scale($[0]),o.scale($[1])],q=te[0],ne=te[1];M=tj({axis:i,ticks:l,bandSize:a,offset:p.offset,entry:k,index:O}),T=(Z=ne??q)!==null&&Z!==void 0?Z:void 0,I=p.size;var H=q-ne;if(z=Number.isNaN(H)?0:H,U={x:M,y:o.y,width:I,height:o.height},Math.abs(Y)>0&&Math.abs(z)<Math.abs(Y)){var Q=Br(z||Y)*(Math.abs(Y)-Math.abs(z));T-=Q,z+=Q}}else{var de=[i.scale($[0]),i.scale($[1])],ie=de[0],Re=de[1];if(M=ie,T=tj({axis:o,ticks:c,bandSize:a,offset:p.offset,entry:k,index:O}),I=Re-ie,z=p.size,U={x:i.x,y:T,width:i.width,height:z},Math.abs(Y)>0&&Math.abs(I)<Math.abs(Y)){var Ae=Br(I||Y)*(Math.abs(Y)-Math.abs(I));I+=Ae}}return Kt(Kt(Kt({},k),{},{x:M,y:T,width:I,height:z,value:d?$:$[1],payload:k,background:U},C&&C[O]&&C[O].props),{},{tooltipPayload:[S3(r,k)],tooltipPosition:{x:M+I/2,y:T+z/2}})});return Kt({data:A,layout:m},h)});function Qc(t){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(t)}function see(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rA(n.key),n)}}function iee(t,e,r){return e&&hw(t.prototype,e),r&&hw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function pw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Jn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pw(Object(r),!0).forEach(function(n){jp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jp(t,e,r){return e=rA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rA(t){var e=oee(t,"string");return Qc(e)=="symbol"?e:e+""}function oee(t,e){if(Qc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nA=function(e,r,n,a,i){var o=e.width,l=e.height,c=e.layout,d=e.children,u=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!mn(d,Ui);return u.reduce(function(p,m){var x=r[m],g=x.orientation,y=x.domain,j=x.padding,b=j===void 0?{}:j,S=x.mirror,w=x.reversed,v="".concat(g).concat(S?"Mirror":""),C,A,k,O,$;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var M=y[1]-y[0],T=1/0,I=x.categoricalDomain.sort(j$);if(I.forEach(function(de,ie){ie>0&&(T=Math.min((de||0)-(I[ie-1]||0),T))}),Number.isFinite(T)){var z=T/M,U=x.layout==="vertical"?n.height:n.width;if(x.padding==="gap"&&(C=z*U/2),x.padding==="no-gap"){var Y=Ur(e.barCategoryGap,z*U),Z=z*U/2;C=Z-Y-(Z-Y)/U*Y}}}a==="xAxis"?A=[n.left+(b.left||0)+(C||0),n.left+n.width-(b.right||0)-(C||0)]:a==="yAxis"?A=c==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(C||0),n.top+n.height-(b.bottom||0)-(C||0)]:A=x.range,w&&(A=[A[1],A[0]]);var te=v3(x,i,h),q=te.scale,ne=te.realScaleType;q.domain(y).range(A),b3(q);var H=j3(q,Jn(Jn({},x),{},{realScaleType:ne}));a==="xAxis"?($=g==="top"&&!S||g==="bottom"&&S,k=n.left,O=f[v]-$*x.height):a==="yAxis"&&($=g==="left"&&!S||g==="right"&&S,k=f[v]-$*x.width,O=n.top);var Q=Jn(Jn(Jn({},x),H),{},{realScaleType:ne,x:k,y:O,scale:q,width:a==="xAxis"?n.width:x.width,height:a==="yAxis"?n.height:x.height});return Q.bandSize=nf(Q,H),!x.hide&&a==="xAxis"?f[v]+=($?-1:1)*Q.height:x.hide||(f[v]+=($?-1:1)*Q.width),Jn(Jn({},p),{},jp({},m,Q))},{})},aA=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},lee=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return aA({x:r,y:n},{x:a,y:i})},sA=function(){function t(e){see(this,t),this.scale=e}return iee(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])}();jp(sA,"EPS",1e-4);var gy=function(e){var r=Object.keys(e).reduce(function(n,a){return Jn(Jn({},n),{},jp({},a,sA.create(e[a])))},{});return Jn(Jn({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return OZ(a,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return Q3(a,function(i,o){return r[o].isInRange(i)})}})};function cee(t){return(t%180+180)%180}var dee=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=cee(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},uee=ka,fee=jd,hee=ep;function pee(t){return function(e,r,n){var a=Object(e);if(!fee(e)){var i=uee(r);e=hee(e),r=function(l){return i(a[l],l,a)}}var o=t(e,r,n);return o>-1?a[i?e[o]:o]:void 0}}var mee=pee,gee=G3;function xee(t){var e=gee(t),r=e%1;return e===e?r?e-r:e:0}var yee=xee,vee=Z4,bee=ka,jee=yee,wee=Math.max;function See(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var a=r==null?0:jee(r);return a<0&&(a=wee(n+a,0)),vee(t,bee(e),a)}var Nee=See,Aee=mee,Cee=Nee,kee=Aee(Cee),Oee=kee;const Eee=at(Oee);var Pee=NM(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),xy=N.createContext(void 0),yy=N.createContext(void 0),iA=N.createContext(void 0),oA=N.createContext({}),lA=N.createContext(void 0),cA=N.createContext(0),dA=N.createContext(0),mw=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=e.clipPathId,l=e.children,c=e.width,d=e.height,u=Pee(i);return D.createElement(xy.Provider,{value:n},D.createElement(yy.Provider,{value:a},D.createElement(oA.Provider,{value:i},D.createElement(iA.Provider,{value:u},D.createElement(lA.Provider,{value:o},D.createElement(cA.Provider,{value:d},D.createElement(dA.Provider,{value:c},l)))))))},Tee=function(){return N.useContext(lA)},uA=function(e){var r=N.useContext(xy);r==null&&Ei();var n=r[e];return n==null&&Ei(),n},Iee=function(){var e=N.useContext(xy);return hs(e)},Mee=function(){var e=N.useContext(yy),r=Eee(e,function(n){return Q3(n.domain,Number.isFinite)});return r||hs(e)},fA=function(e){var r=N.useContext(yy);r==null&&Ei();var n=r[e];return n==null&&Ei(),n},$ee=function(){var e=N.useContext(iA);return e},Ree=function(){return N.useContext(oA)},vy=function(){return N.useContext(dA)},by=function(){return N.useContext(cA)};function Wo(t){"@babel/helpers - typeof";return Wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wo(t)}function Dee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _ee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pA(n.key),n)}}function Lee(t,e,r){return e&&_ee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zee(t,e,r){return e=jf(e),Fee(t,hA()?Reflect.construct(e,r||[],jf(t).constructor):e.apply(t,r))}function Fee(t,e){if(e&&(Wo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bee(t)}function Bee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hA=function(){return!!t})()}function jf(t){return jf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jf(t)}function Uee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ux(t,e)}function ux(t,e){return ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ux(t,e)}function gw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gw(Object(r),!0).forEach(function(n){jy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jy(t,e,r){return e=pA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pA(t){var e=Vee(t,"string");return Wo(e)=="symbol"?e:e+""}function Vee(t,e){if(Wo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Hee(t,e){return Gee(t)||Yee(t,e)||qee(t,e)||Wee()}function Wee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qee(t,e){if(t){if(typeof t=="string")return yw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yw(t,e)}}function yw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yee(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Gee(t){if(Array.isArray(t))return t}function fx(){return fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fx.apply(this,arguments)}var Kee=function(e,r){var n;return D.isValidElement(e)?n=D.cloneElement(e,r):ze(e)?n=e(r):n=D.createElement("line",fx({},r,{className:"recharts-reference-line-line"})),n},Jee=function(e,r,n,a,i,o,l,c,d){var u=i.x,f=i.y,h=i.width,p=i.height;if(n){var m=d.y,x=e.y.apply(m,{position:o});if(xa(d,"discard")&&!e.y.isInRange(x))return null;var g=[{x:u+h,y:x},{x:u,y:x}];return c==="left"?g.reverse():g}if(r){var y=d.x,j=e.x.apply(y,{position:o});if(xa(d,"discard")&&!e.x.isInRange(j))return null;var b=[{x:j,y:f+p},{x:j,y:f}];return l==="top"?b.reverse():b}if(a){var S=d.segment,w=S.map(function(v){return e.apply(v,{position:o})});return xa(d,"discard")&&bZ(w,function(v){return!e.isInRange(v)})?null:w}return null};function Xee(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,d=Tee(),u=uA(a),f=fA(i),h=$ee();if(!d||!h)return null;na(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=gy({x:u.scale,y:f.scale}),m=sr(e),x=sr(r),g=n&&n.length===2,y=Jee(p,m,x,g,h,t.position,u.orientation,f.orientation,t);if(!y)return null;var j=Hee(y,2),b=j[0],S=b.x,w=b.y,v=j[1],C=v.x,A=v.y,k=xa(t,"hidden")?"url(#".concat(d,")"):void 0,O=xw(xw({clipPath:k},Pe(t,!0)),{},{x1:S,y1:w,x2:C,y2:A});return D.createElement(Ze,{className:He("recharts-reference-line",l)},Kee(o,O),fr.renderCallByParent(t,lee({x1:S,y1:w,x2:C,y2:A})))}var wy=function(t){function e(){return Dee(this,e),zee(this,e,arguments)}return Uee(e,t),Lee(e,[{key:"render",value:function(){return D.createElement(Xee,this.props)}}])}(D.Component);jy(wy,"displayName","ReferenceLine");jy(wy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function hx(){return hx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hx.apply(this,arguments)}function qo(t){"@babel/helpers - typeof";return qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(t)}function vw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vw(Object(r),!0).forEach(function(n){wp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gA(n.key),n)}}function ete(t,e,r){return e&&Zee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tte(t,e,r){return e=wf(e),rte(t,mA()?Reflect.construct(e,r||[],wf(t).constructor):e.apply(t,r))}function rte(t,e){if(e&&(qo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nte(t)}function nte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mA=function(){return!!t})()}function wf(t){return wf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wf(t)}function ate(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&px(t,e)}function px(t,e){return px=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},px(t,e)}function wp(t,e,r){return e=gA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gA(t){var e=ste(t,"string");return qo(e)=="symbol"?e:e+""}function ste(t,e){if(qo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ite=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,o=gy({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return xa(e,"discard")&&!o.isInRange(l)?null:l},Sp=function(t){function e(){return Qee(this,e),tte(this,e,arguments)}return ate(e,t),ete(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,d=sr(a),u=sr(i);if(na(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var f=ite(this.props);if(!f)return null;var h=f.x,p=f.y,m=this.props,x=m.shape,g=m.className,y=xa(this.props,"hidden")?"url(#".concat(c,")"):void 0,j=bw(bw({clipPath:y},Pe(this.props,!0)),{},{cx:h,cy:p});return D.createElement(Ze,{className:He("recharts-reference-dot",g)},e.renderDot(x,j),fr.renderCallByParent(this.props,{x:h-o,y:p-o,width:2*o,height:2*o}))}}])}(D.Component);wp(Sp,"displayName","ReferenceDot");wp(Sp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});wp(Sp,"renderDot",function(t,e){var r;return D.isValidElement(t)?r=D.cloneElement(t,e):ze(t)?r=t(e):r=D.createElement(pp,hx({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function mx(){return mx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mx.apply(this,arguments)}function Yo(t){"@babel/helpers - typeof";return Yo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yo(t)}function jw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ww(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jw(Object(r),!0).forEach(function(n){Np(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ote(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lte(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yA(n.key),n)}}function cte(t,e,r){return e&&lte(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dte(t,e,r){return e=Sf(e),ute(t,xA()?Reflect.construct(e,r||[],Sf(t).constructor):e.apply(t,r))}function ute(t,e){if(e&&(Yo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fte(t)}function fte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xA=function(){return!!t})()}function Sf(t){return Sf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sf(t)}function hte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gx(t,e)}function gx(t,e){return gx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gx(t,e)}function Np(t,e,r){return e=yA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yA(t){var e=pte(t,"string");return Yo(e)=="symbol"?e:e+""}function pte(t,e){if(Yo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mte=function(e,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,u=i.xAxis,f=i.yAxis;if(!u||!f)return null;var h=gy({x:u.scale,y:f.scale}),p={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},m={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(d,{position:"end"}):h.y.rangeMax};return xa(i,"discard")&&(!h.isInRange(p)||!h.isInRange(m))?null:aA(p,m)},Ap=function(t){function e(){return ote(this,e),dte(this,e,arguments)}return hte(e,t),cte(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,d=n.alwaysShow,u=n.clipPathId;na(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=sr(a),h=sr(i),p=sr(o),m=sr(l),x=this.props.shape;if(!f&&!h&&!p&&!m&&!x)return null;var g=mte(f,h,p,m,this.props);if(!g&&!x)return null;var y=xa(this.props,"hidden")?"url(#".concat(u,")"):void 0;return D.createElement(Ze,{className:He("recharts-reference-area",c)},e.renderRect(x,ww(ww({clipPath:y},Pe(this.props,!0)),g)),fr.renderCallByParent(this.props,g))}}])}(D.Component);Np(Ap,"displayName","ReferenceArea");Np(Ap,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Np(Ap,"renderRect",function(t,e){var r;return D.isValidElement(t)?r=D.cloneElement(t,e):ze(t)?r=t(e):r=D.createElement(my,mx({},e,{className:"recharts-reference-area-rect"})),r});function vA(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function gte(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return dee(n,r)}function xte(t,e,r){var n=r==="width",a=t.x,i=t.y,o=t.width,l=t.height;return e===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function Nf(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function yte(t,e){return vA(t,e+1)}function vte(t,e,r,n,a){for(var i=(n||[]).slice(),o=e.start,l=e.end,c=0,d=1,u=o,f=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:vA(n,d)};var x=c,g,y=function(){return g===void 0&&(g=r(m,x)),g},j=m.coordinate,b=c===0||Nf(t,j,y,u,l);b||(c=0,u=o,d+=1),b&&(u=j+t*(y()/2+a),c+=d)},h;d<=i.length;)if(h=f(),h)return h.v;return[]}function Zc(t){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zc(t)}function Sw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Or(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sw(Object(r),!0).forEach(function(n){bte(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bte(t,e,r){return e=jte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jte(t){var e=wte(t,"string");return Zc(e)=="symbol"?e:e+""}function wte(t,e){if(Zc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ste(t,e,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=e.start,c=e.end,d=function(h){var p=i[h],m,x=function(){return m===void 0&&(m=r(p,h)),m};if(h===o-1){var g=t*(p.coordinate+t*x()/2-c);i[h]=p=Or(Or({},p),{},{tickCoord:g>0?p.coordinate-g*t:p.coordinate})}else i[h]=p=Or(Or({},p),{},{tickCoord:p.coordinate});var y=Nf(t,p.tickCoord,x,l,c);y&&(c=p.tickCoord-t*(x()/2+a),i[h]=Or(Or({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function Nte(t,e,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=e.start,d=e.end;if(i){var u=n[l-1],f=r(u,l-1),h=t*(u.coordinate+t*f/2-d);o[l-1]=u=Or(Or({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var p=Nf(t,u.tickCoord,function(){return f},c,d);p&&(d=u.tickCoord-t*(f/2+a),o[l-1]=Or(Or({},u),{},{isShow:!0}))}for(var m=i?l-1:l,x=function(j){var b=o[j],S,w=function(){return S===void 0&&(S=r(b,j)),S};if(j===0){var v=t*(b.coordinate-t*w()/2-c);o[j]=b=Or(Or({},b),{},{tickCoord:v<0?b.coordinate-v*t:b.coordinate})}else o[j]=b=Or(Or({},b),{},{tickCoord:b.coordinate});var C=Nf(t,b.tickCoord,w,c,d);C&&(c=b.tickCoord+t*(w()/2+a),o[j]=Or(Or({},b),{},{isShow:!0}))},g=0;g<m;g++)x(g);return o}function Sy(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,u=t.unit,f=t.angle;if(!a||!a.length||!n)return[];if(se(c)||Li.isSsr)return yte(a,typeof c=="number"&&se(c)?c:0);var h=[],p=l==="top"||l==="bottom"?"width":"height",m=u&&p==="width"?Zl(u,{fontSize:e,letterSpacing:r}):{width:0,height:0},x=function(b,S){var w=ze(d)?d(b.value,S):b.value;return p==="width"?gte(Zl(w,{fontSize:e,letterSpacing:r}),m,f):Zl(w,{fontSize:e,letterSpacing:r})[p]},g=a.length>=2?Br(a[1].coordinate-a[0].coordinate):1,y=xte(i,g,p);return c==="equidistantPreserveStart"?vte(g,y,x,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Nte(g,y,x,a,o,c==="preserveStartEnd"):h=Ste(g,y,x,a,o),h.filter(function(j){return j.isShow}))}var Ate=["viewBox"],Cte=["viewBox"],kte=["ticks"];function Go(t){"@babel/helpers - typeof";return Go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(t)}function uo(){return uo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uo.apply(this,arguments)}function Nw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nw(Object(r),!0).forEach(function(n){Ny(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vm(t,e){if(t==null)return{};var r=Ote(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ote(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ete(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Aw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jA(n.key),n)}}function Pte(t,e,r){return e&&Aw(t.prototype,e),r&&Aw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tte(t,e,r){return e=Af(e),Ite(t,bA()?Reflect.construct(e,r||[],Af(t).constructor):e.apply(t,r))}function Ite(t,e){if(e&&(Go(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mte(t)}function Mte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bA=function(){return!!t})()}function Af(t){return Af=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Af(t)}function $te(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xx(t,e)}function xx(t,e){return xx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xx(t,e)}function Ny(t,e,r){return e=jA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jA(t){var e=Rte(t,"string");return Go(e)=="symbol"?e:e+""}function Rte(t,e){if(Go(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Go(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Nl=function(t){function e(r){var n;return Ete(this,e),n=Tte(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return $te(e,t),Pte(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=vm(n,Ate),l=this.props,c=l.viewBox,d=vm(l,Cte);return!po(i,c)||!po(o,d)||!po(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,d=a.orientation,u=a.tickSize,f=a.mirror,h=a.tickMargin,p,m,x,g,y,j,b=f?-1:1,S=n.tickSize||u,w=se(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":p=m=n.coordinate,g=o+ +!f*c,x=g-b*S,j=x-b*h,y=w;break;case"left":x=g=n.coordinate,m=i+ +!f*l,p=m-b*S,y=p-b*h,j=w;break;case"right":x=g=n.coordinate,m=i+ +f*l,p=m+b*S,y=p+b*h,j=w;break;default:p=m=n.coordinate,g=o+ +f*c,x=g+b*S,j=x+b*h,y=w;break}return{line:{x1:p,y1:x,x2:m,y2:g},tick:{x:y,y:j}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,d=n.mirror,u=n.axisLine,f=tr(tr(tr({},Pe(this.props,!1)),Pe(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!d||c==="bottom"&&d);f=tr(tr({},f),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var p=+(c==="left"&&!d||c==="right"&&d);f=tr(tr({},f),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+l})}return D.createElement("line",uo({},f,{className:He("recharts-cartesian-axis-line",jn(u,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,f=l.tickFormatter,h=l.unit,p=Sy(tr(tr({},this.props),{},{ticks:n}),a,i),m=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),g=Pe(this.props,!1),y=Pe(u,!1),j=tr(tr({},g),{},{fill:"none"},Pe(c,!1)),b=p.map(function(S,w){var v=o.getTickLineCoord(S),C=v.line,A=v.tick,k=tr(tr(tr(tr({textAnchor:m,verticalAnchor:x},g),{},{stroke:"none",fill:d},y),A),{},{index:w,payload:S,visibleTicksCount:p.length,tickFormatter:f});return D.createElement(Ze,uo({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Ci(o.props,S,w)),c&&D.createElement("line",uo({},j,C,{className:He("recharts-cartesian-axis-tick-line",jn(c,"className"))})),u&&e.renderTickItem(u,k,"".concat(ze(f)?f(S.value,w):S.value).concat(h||"")))});return D.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var f=this.props,h=f.ticks,p=vm(f,kte),m=h;return ze(c)&&(m=h&&h.length>0?c(this.props):c(p)),o<=0||l<=0||!m||!m.length?null:D.createElement(Ze,{className:He("recharts-cartesian-axis",d),ref:function(g){n.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),fr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=He(a.className,"recharts-cartesian-axis-tick-value");return D.isValidElement(n)?o=D.cloneElement(n,tr(tr({},a),{},{className:l})):ze(n)?o=n(tr(tr({},a),{},{className:l})):o=D.createElement(ki,uo({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(N.Component);Ny(Nl,"displayName","CartesianAxis");Ny(Nl,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Dte=["x1","y1","x2","y2","key"],_te=["offset"];function Pi(t){"@babel/helpers - typeof";return Pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pi(t)}function Cw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cw(Object(r),!0).forEach(function(n){Lte(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lte(t,e,r){return e=zte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zte(t){var e=Fte(t,"string");return Pi(e)=="symbol"?e:e+""}function Fte(t,e){if(Pi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function di(){return di=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},di.apply(this,arguments)}function kw(t,e){if(t==null)return{};var r=Bte(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bte(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Ute=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,o=e.width,l=e.height,c=e.ry;return D.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function wA(t,e){var r;if(D.isValidElement(t))r=D.cloneElement(t,e);else if(ze(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,o=e.y2,l=e.key,c=kw(e,Dte),d=Pe(c,!1);d.offset;var u=kw(d,_te);r=D.createElement("line",di({},u,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function Vte(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=Pr(Pr({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return wA(a,d)});return D.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Hte(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=Pr(Pr({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return wA(a,d)});return D.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Wte(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var u=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==u[0]&&u.unshift(0);var f=u.map(function(h,p){var m=!u[p+1],x=m?a+o-h:u[p+1]-h;if(x<=0)return null;var g=p%e.length;return D.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:x,width:i,stroke:"none",fill:e[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function qte(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,o=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!r||!n||!n.length)return null;var u=d.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==u[0]&&u.unshift(0);var f=u.map(function(h,p){var m=!u[p+1],x=m?i+l-h:u[p+1]-h;if(x<=0)return null;var g=p%n.length;return D.createElement("rect",{key:"react-".concat(p),x:h,y:o,width:x,height:c,stroke:"none",fill:n[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Yte=function(e,r){var n=e.xAxis,a=e.width,i=e.height,o=e.offset;return y3(Sy(Pr(Pr(Pr({},Nl.defaultProps),n),{},{ticks:La(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},Gte=function(e,r){var n=e.yAxis,a=e.width,i=e.height,o=e.offset;return y3(Sy(Pr(Pr(Pr({},Nl.defaultProps),n),{},{ticks:La(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Xi={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function yx(t){var e,r,n,a,i,o,l=vy(),c=by(),d=Ree(),u=Pr(Pr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Xi.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Xi.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Xi.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:Xi.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:Xi.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Xi.verticalFill,x:se(t.x)?t.x:d.left,y:se(t.y)?t.y:d.top,width:se(t.width)?t.width:d.width,height:se(t.height)?t.height:d.height}),f=u.x,h=u.y,p=u.width,m=u.height,x=u.syncWithTicks,g=u.horizontalValues,y=u.verticalValues,j=Iee(),b=Mee();if(!se(p)||p<=0||!se(m)||m<=0||!se(f)||f!==+f||!se(h)||h!==+h)return null;var S=u.verticalCoordinatesGenerator||Yte,w=u.horizontalCoordinatesGenerator||Gte,v=u.horizontalPoints,C=u.verticalPoints;if((!v||!v.length)&&ze(w)){var A=g&&g.length,k=w({yAxis:b?Pr(Pr({},b),{},{ticks:A?g:b.ticks}):void 0,width:l,height:c,offset:d},A?!0:x);na(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Pi(k),"]")),Array.isArray(k)&&(v=k)}if((!C||!C.length)&&ze(S)){var O=y&&y.length,$=S({xAxis:j?Pr(Pr({},j),{},{ticks:O?y:j.ticks}):void 0,width:l,height:c,offset:d},O?!0:x);na(Array.isArray($),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Pi($),"]")),Array.isArray($)&&(C=$)}return D.createElement("g",{className:"recharts-cartesian-grid"},D.createElement(Ute,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),D.createElement(Vte,di({},u,{offset:d,horizontalPoints:v,xAxis:j,yAxis:b})),D.createElement(Hte,di({},u,{offset:d,verticalPoints:C,xAxis:j,yAxis:b})),D.createElement(Wte,di({},u,{horizontalPoints:v})),D.createElement(qte,di({},u,{verticalPoints:C})))}yx.displayName="CartesianGrid";var Kte=["layout","type","stroke","connectNulls","isRange","ref"],Jte=["key"],SA;function Ko(t){"@babel/helpers - typeof";return Ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko(t)}function NA(t,e){if(t==null)return{};var r=Xte(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xte(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ui(){return ui=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ui.apply(this,arguments)}function Ow(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function is(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ow(Object(r),!0).forEach(function(n){ma(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ow(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ew(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CA(n.key),n)}}function Zte(t,e,r){return e&&Ew(t.prototype,e),r&&Ew(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ere(t,e,r){return e=Cf(e),tre(t,AA()?Reflect.construct(e,r||[],Cf(t).constructor):e.apply(t,r))}function tre(t,e){if(e&&(Ko(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rre(t)}function rre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AA=function(){return!!t})()}function Cf(t){return Cf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cf(t)}function nre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vx(t,e)}function vx(t,e){return vx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},vx(t,e)}function ma(t,e,r){return e=CA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CA(t){var e=are(t,"string");return Ko(e)=="symbol"?e:e+""}function are(t,e){if(Ko(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ko(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fs=function(t){function e(){var r;Qte(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=ere(this,e,[].concat(a)),ma(r,"state",{isAnimationFinished:!0}),ma(r,"id",xl("recharts-area-")),ma(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),ze(o)&&o()}),ma(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),ze(o)&&o()}),r}return nre(e,t),Zte(e,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,u=c.points,f=c.dataKey,h=Pe(this.props,!1),p=Pe(d,!0),m=u.map(function(g,y){var j=is(is(is({key:"dot-".concat(y),r:3},h),p),{},{index:y,cx:g.x,cy:g.y,dataKey:f,value:g.value,payload:g.payload,points:u});return e.renderDotItem(d,j)}),x={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return D.createElement(Ze,ui({className:"recharts-area-dots"},x),m)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,d=o[o.length-1].x,u=n*Math.abs(c-d),f=xs(o.map(function(h){return h.y||0}));return se(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(xs(i.map(function(h){return h.y||0})),f)),se(f)?D.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,d=o[o.length-1].y,u=n*Math.abs(c-d),f=xs(o.map(function(h){return h.x||0}));return se(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(xs(i.map(function(h){return h.x||0})),f)),se(f)?D.createElement("rect",{x:0,y:c<d?c:c-u,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var l=this.props,c=l.layout,d=l.type,u=l.stroke,f=l.connectNulls,h=l.isRange;l.ref;var p=NA(l,Kte);return D.createElement(Ze,{clipPath:i?"url(#clipPath-".concat(o,")"):null},D.createElement(xo,ui({},Pe(p,!0),{points:n,connectNulls:f,type:d,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&D.createElement(xo,ui({},Pe(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:f,fill:"none",points:n})),u!=="none"&&h&&D.createElement(xo,ui({},Pe(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:f,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,u=o.animationBegin,f=o.animationDuration,h=o.animationEasing,p=o.animationId,m=this.state,x=m.prevPoints,g=m.prevBaseLine;return D.createElement(ja,{begin:u,duration:f,isActive:d,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var j=y.t;if(x){var b=x.length/l.length,S=l.map(function(A,k){var O=Math.floor(k*b);if(x[O]){var $=x[O],M=tn($.x,A.x),T=tn($.y,A.y);return is(is({},A),{},{x:M(j),y:T(j)})}return A}),w;if(se(c)&&typeof c=="number"){var v=tn(g,c);w=v(j)}else if(Ve(c)||gl(c)){var C=tn(g,0);w=C(j)}else w=c.map(function(A,k){var O=Math.floor(k*b);if(g[O]){var $=g[O],M=tn($.x,A.x),T=tn($.y,A.y);return is(is({},A),{},{x:M(j),y:T(j)})}return A});return i.renderAreaStatically(S,w,n,a)}return D.createElement(Ze,null,D.createElement("defs",null,D.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(j))),D.createElement(Ze,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,f=d.prevBaseLine,h=d.totalLength;return c&&o&&o.length&&(!u&&h>0||!Do(u,o)||!Do(f,l))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,d=a.top,u=a.left,f=a.xAxis,h=a.yAxis,p=a.width,m=a.height,x=a.isAnimationActive,g=a.id;if(i||!l||!l.length)return null;var y=this.state.isAnimationFinished,j=l.length===1,b=He("recharts-area",c),S=f&&f.allowDataOverflow,w=h&&h.allowDataOverflow,v=S||w,C=Ve(g)?this.id:g,A=(n=Pe(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},k=A.r,O=k===void 0?3:k,$=A.strokeWidth,M=$===void 0?2:$,T=P$(o)?o:{},I=T.clipDot,z=I===void 0?!0:I,U=O*2+M;return D.createElement(Ze,{className:b},S||w?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(C)},D.createElement("rect",{x:S?u:u-p/2,y:w?d:d-m/2,width:S?p:p*2,height:w?m:m*2})),!z&&D.createElement("clipPath",{id:"clipPath-dots-".concat(C)},D.createElement("rect",{x:u-U/2,y:d-U/2,width:p+U,height:m+U}))):null,j?null:this.renderArea(v,C),(o||j)&&this.renderDots(v,z,C),(!x||y)&&Ha.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(N.PureComponent);SA=Fs;ma(Fs,"displayName","Area");ma(Fs,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Li.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ma(Fs,"getBaseValue",function(t,e,r,n){var a=t.layout,i=t.baseValue,o=e.props.baseValue,l=o??i;if(se(l)&&typeof l=="number")return l;var c=a==="horizontal"?n:r,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),f=Math.min(d[0],d[1]);return l==="dataMin"?f:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});ma(Fs,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,a=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,u=t.dataStartIndex,f=t.displayedData,h=t.offset,p=e.layout,m=d&&d.length,x=SA.getBaseValue(e,r,n,a),g=p==="horizontal",y=!1,j=f.map(function(S,w){var v;m?v=d[u+w]:(v=ar(S,c),Array.isArray(v)?y=!0:v=[x,v]);var C=v[1]==null||m&&ar(S,c)==null;return g?{x:ej({axis:n,ticks:i,bandSize:l,entry:S,index:w}),y:C?null:a.scale(v[1]),value:v,payload:S}:{x:C?null:n.scale(v[1]),y:ej({axis:a,ticks:o,bandSize:l,entry:S,index:w}),value:v,payload:S}}),b;return m||y?b=j.map(function(S){var w=Array.isArray(S.value)?S.value[0]:null;return g?{x:S.x,y:w!=null&&S.y!=null?a.scale(w):null}:{x:w!=null?n.scale(w):null,y:S.y}}):b=g?a.scale(x):n.scale(x),is({points:j,baseLine:b,layout:p,isRange:y},h)});ma(Fs,"renderDotItem",function(t,e){var r;if(D.isValidElement(t))r=D.cloneElement(t,e);else if(ze(t))r=t(e);else{var n=He("recharts-area-dot",typeof t!="boolean"?t.className:""),a=e.key,i=NA(e,Jte);r=D.createElement(pp,ui({},i,{key:a,className:n}))}return r});function Jo(t){"@babel/helpers - typeof";return Jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jo(t)}function sre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ire(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EA(n.key),n)}}function ore(t,e,r){return e&&ire(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lre(t,e,r){return e=kf(e),cre(t,kA()?Reflect.construct(e,r||[],kf(t).constructor):e.apply(t,r))}function cre(t,e){if(e&&(Jo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dre(t)}function dre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kA=function(){return!!t})()}function kf(t){return kf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kf(t)}function ure(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bx(t,e)}function bx(t,e){return bx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},bx(t,e)}function OA(t,e,r){return e=EA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EA(t){var e=fre(t,"string");return Jo(e)=="symbol"?e:e+""}function fre(t,e){if(Jo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function jx(){return jx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jx.apply(this,arguments)}function hre(t){var e=t.xAxisId,r=vy(),n=by(),a=uA(e);return a==null?null:N.createElement(Nl,jx({},a,{className:He("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return La(o,!0)}}))}var Xo=function(t){function e(){return sre(this,e),lre(this,e,arguments)}return ure(e,t),ore(e,[{key:"render",value:function(){return N.createElement(hre,this.props)}}])}(N.Component);OA(Xo,"displayName","XAxis");OA(Xo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Qo(t){"@babel/helpers - typeof";return Qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(t)}function pre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mre(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IA(n.key),n)}}function gre(t,e,r){return e&&mre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xre(t,e,r){return e=Of(e),yre(t,PA()?Reflect.construct(e,r||[],Of(t).constructor):e.apply(t,r))}function yre(t,e){if(e&&(Qo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vre(t)}function vre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PA=function(){return!!t})()}function Of(t){return Of=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Of(t)}function bre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wx(t,e)}function wx(t,e){return wx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},wx(t,e)}function TA(t,e,r){return e=IA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IA(t){var e=jre(t,"string");return Qo(e)=="symbol"?e:e+""}function jre(t,e){if(Qo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Sx(){return Sx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sx.apply(this,arguments)}var wre=function(e){var r=e.yAxisId,n=vy(),a=by(),i=fA(r);return i==null?null:N.createElement(Nl,Sx({},i,{className:He("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return La(l,!0)}}))},Zo=function(t){function e(){return pre(this,e),xre(this,e,arguments)}return bre(e,t),gre(e,[{key:"render",value:function(){return N.createElement(wre,this.props)}}])}(N.Component);TA(Zo,"displayName","YAxis");TA(Zo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Pw(t){return Cre(t)||Are(t)||Nre(t)||Sre()}function Sre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nre(t,e){if(t){if(typeof t=="string")return Nx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nx(t,e)}}function Are(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Cre(t){if(Array.isArray(t))return Nx(t)}function Nx(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ax=function(e,r,n,a,i){var o=Fn(e,wy),l=Fn(e,Sp),c=[].concat(Pw(o),Pw(l)),d=Fn(e,Ap),u="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(x,g){if(g.props[u]===n&&xa(g.props,"extendDomain")&&se(g.props[f])){var y=g.props[f];return[Math.min(x[0],y),Math.max(x[1],y)]}return x},h)),d.length){var p="".concat(f,"1"),m="".concat(f,"2");h=d.reduce(function(x,g){if(g.props[u]===n&&xa(g.props,"extendDomain")&&se(g.props[p])&&se(g.props[m])){var y=g.props[p],j=g.props[m];return[Math.min(x[0],y,j),Math.max(x[1],y,j)]}return x},h)}return i&&i.length&&(h=i.reduce(function(x,g){return se(g)?[Math.min(x[0],g),Math.max(x[1],g)]:x},h)),h},MA={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new a(u,f||c,h),m=r?r+d:d;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],p]:c._events[m].push(p):(c._events[m]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)e.call(u,f)&&d.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,m=new Array(p);h<p;h++)m[h]=f[h].fn;return m},l.prototype.listenerCount=function(d){var u=r?r+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,h,p,m){var x=r?r+d:d;if(!this._events[x])return!1;var g=this._events[x],y=arguments.length,j,b;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,h),!0;case 5:return g.fn.call(g.context,u,f,h,p),!0;case 6:return g.fn.call(g.context,u,f,h,p,m),!0}for(b=1,j=new Array(y-1);b<y;b++)j[b-1]=arguments[b];g.fn.apply(g.context,j)}else{var S=g.length,w;for(b=0;b<S;b++)switch(g[b].once&&this.removeListener(d,g[b].fn,void 0,!0),y){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,u);break;case 3:g[b].fn.call(g[b].context,u,f);break;case 4:g[b].fn.call(g[b].context,u,f,h);break;default:if(!j)for(w=1,j=new Array(y-1);w<y;w++)j[w-1]=arguments[w];g[b].fn.apply(g[b].context,j)}}return!0},l.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,h){var p=r?r+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!h||m.once)&&(!f||m.context===f)&&o(this,p);else{for(var x=0,g=[],y=m.length;x<y;x++)(m[x].fn!==u||h&&!m[x].once||f&&m[x].context!==f)&&g.push(m[x]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(MA);var kre=MA.exports;const Ore=at(kre);var bm=new Ore,jm="recharts.syncMouseEvents";function ed(t){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ed(t)}function Ere(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pre(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$A(n.key),n)}}function Tre(t,e,r){return e&&Pre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wm(t,e,r){return e=$A(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $A(t){var e=Ire(t,"string");return ed(e)=="symbol"?e:e+""}function Ire(t,e){if(ed(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ed(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mre=function(){function t(){Ere(this,t),wm(this,"activeIndex",0),wm(this,"coordinateList",[]),wm(this,"layout","horizontal")}return Tre(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,u=r.offset,f=u===void 0?null:u,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+d,h=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function $re(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&se(n)&&se(a))return!0}return!1}function Rre(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function RA(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,o=Ct(e,r,n,a),l=Ct(e,r,n,i);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function Dre(t,e,r){var n,a,i,o;if(t==="horizontal")n=e.x,i=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,d=e.innerRadius,u=e.outerRadius,f=e.angle,h=Ct(l,c,d,f),p=Ct(l,c,u,f);n=h.x,a=h.y,i=p.x,o=p.y}else return RA(e);return[{x:n,y:a},{x:i,y:o}]}function td(t){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},td(t)}function Tw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function eu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tw(Object(r),!0).forEach(function(n){_re(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _re(t,e,r){return e=Lre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lre(t){var e=zre(t,"string");return td(e)=="symbol"?e:e+""}function zre(t,e){if(td(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(td(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fre(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,p=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var m,x=xo;if(h==="ScatterChart")m=o,x=lX;else if(h==="BarChart")m=Rre(f,o,c,u),x=my;else if(f==="radial"){var g=RA(o),y=g.cx,j=g.cy,b=g.radius,S=g.startAngle,w=g.endAngle;m={cx:y,cy:j,startAngle:S,endAngle:w,innerRadius:b,outerRadius:b},x=E3}else m={points:Dre(f,o,c)},x=xo;var v=eu(eu(eu(eu({stroke:"#ccc",pointerEvents:"none"},c),m),Pe(p,!1)),{},{payload:l,payloadIndex:d,className:He("recharts-tooltip-cursor",p.className)});return N.isValidElement(p)?N.cloneElement(p,v):N.createElement(x,v)}var Bre=["item"],Ure=["children","className","width","height","style","compact","title","desc"];function el(t){"@babel/helpers - typeof";return el=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},el(t)}function fo(){return fo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fo.apply(this,arguments)}function Iw(t,e){return Wre(t)||Hre(t,e)||_A(t,e)||Vre()}function Vre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hre(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Wre(t){if(Array.isArray(t))return t}function Mw(t,e){if(t==null)return{};var r=qre(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qre(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Yre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gre(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LA(n.key),n)}}function Kre(t,e,r){return e&&Gre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jre(t,e,r){return e=Ef(e),Xre(t,DA()?Reflect.construct(e,r||[],Ef(t).constructor):e.apply(t,r))}function Xre(t,e){if(e&&(el(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qre(t)}function Qre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DA=function(){return!!t})()}function Ef(t){return Ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ef(t)}function Zre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cx(t,e)}function Cx(t,e){return Cx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Cx(t,e)}function tl(t){return rne(t)||tne(t)||_A(t)||ene()}function ene(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _A(t,e){if(t){if(typeof t=="string")return kx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kx(t,e)}}function tne(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rne(t){if(Array.isArray(t))return kx(t)}function kx(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$w(Object(r),!0).forEach(function(n){_e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$w(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _e(t,e,r){return e=LA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LA(t){var e=nne(t,"string");return el(e)=="symbol"?e:e+""}function nne(t,e){if(el(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(el(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ane={xAxis:["bottom","top"],yAxis:["left","right"]},sne={width:"100%",height:"100%"},zA={x:0,y:0};function tu(t){return t}var ine=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},one=function(e,r,n,a){var i=r.find(function(u){return u&&u.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,l=a.radius;return J(J(J({},a),Ct(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=a.angle;return J(J(J({},a),Ct(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return zA},Cp=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(tl(l),tl(d)):l},[]);return o.length>0?o:e&&e.length&&se(a)&&se(i)?e.slice(a,i+1):[]};function FA(t){return t==="number"?[0,"auto"]:void 0}var Ox=function(e,r,n,a){var i=e.graphicalItems,o=e.tooltipAxis,l=Cp(r,e);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,d){var u,f=(u=d.props.data)!==null&&u!==void 0?u:r;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var p=f===void 0?l:f;h=Eu(p,o.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(tl(c),[S3(d,h)]):c},[])},Rw=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},o=ine(i,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,d=e.tooltipTicks,u=TY(o,l,d,c);if(u>=0&&d){var f=d[u]&&d[u].value,h=Ox(e,r,u,f),p=one(n,l,u,i);return{activeTooltipIndex:u,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},lne=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=e.layout,f=e.children,h=e.stackOffset,p=x3(u,i);return n.reduce(function(m,x){var g,y=x.type.defaultProps!==void 0?J(J({},x.type.defaultProps),x.props):x.props,j=y.type,b=y.dataKey,S=y.allowDataOverflow,w=y.allowDuplicatedCategory,v=y.scale,C=y.ticks,A=y.includeHidden,k=y[o];if(m[k])return m;var O=Cp(e.data,{graphicalItems:a.filter(function(H){var Q,de=o in H.props?H.props[o]:(Q=H.type.defaultProps)===null||Q===void 0?void 0:Q[o];return de===k}),dataStartIndex:c,dataEndIndex:d}),$=O.length,M,T,I;$re(y.domain,S,j)&&(M=Ug(y.domain,null,S),p&&(j==="number"||v!=="auto")&&(I=tc(O,b,"category")));var z=FA(j);if(!M||M.length===0){var U,Y=(U=y.domain)!==null&&U!==void 0?U:z;if(b){if(M=tc(O,b,j),j==="category"&&p){var Z=b$(M);w&&Z?(T=M,M=gf(0,$)):w||(M=aj(Y,M,x).reduce(function(H,Q){return H.indexOf(Q)>=0?H:[].concat(tl(H),[Q])},[]))}else if(j==="category")w?M=M.filter(function(H){return H!==""&&!Ve(H)}):M=aj(Y,M,x).reduce(function(H,Q){return H.indexOf(Q)>=0||Q===""||Ve(Q)?H:[].concat(tl(H),[Q])},[]);else if(j==="number"){var te=DY(O,a.filter(function(H){var Q,de,ie=o in H.props?H.props[o]:(Q=H.type.defaultProps)===null||Q===void 0?void 0:Q[o],Re="hide"in H.props?H.props.hide:(de=H.type.defaultProps)===null||de===void 0?void 0:de.hide;return ie===k&&(A||!Re)}),b,i,u);te&&(M=te)}p&&(j==="number"||v!=="auto")&&(I=tc(O,b,"category"))}else p?M=gf(0,$):l&&l[k]&&l[k].hasStack&&j==="number"?M=h==="expand"?[0,1]:w3(l[k].stackGroups,c,d):M=g3(O,a.filter(function(H){var Q=o in H.props?H.props[o]:H.type.defaultProps[o],de="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return Q===k&&(A||!de)}),j,u,!0);if(j==="number")M=Ax(f,M,k,i,C),Y&&(M=Ug(Y,M,S));else if(j==="category"&&Y){var q=Y,ne=M.every(function(H){return q.indexOf(H)>=0});ne&&(M=q)}}return J(J({},m),{},_e({},k,J(J({},y),{},{axisType:i,domain:M,categoricalDomain:I,duplicateDomain:T,originalDomain:(g=y.domain)!==null&&g!==void 0?g:z,isCategorical:p,layout:u})))},{})},cne=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=e.layout,f=e.children,h=Cp(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:d}),p=h.length,m=x3(u,i),x=-1;return n.reduce(function(g,y){var j=y.type.defaultProps!==void 0?J(J({},y.type.defaultProps),y.props):y.props,b=j[o],S=FA("number");if(!g[b]){x++;var w;return m?w=gf(0,p):l&&l[b]&&l[b].hasStack?(w=w3(l[b].stackGroups,c,d),w=Ax(f,w,b,i)):(w=Ug(S,g3(h,n.filter(function(v){var C,A,k=o in v.props?v.props[o]:(C=v.type.defaultProps)===null||C===void 0?void 0:C[o],O="hide"in v.props?v.props.hide:(A=v.type.defaultProps)===null||A===void 0?void 0:A.hide;return k===b&&!O}),"number",u),a.defaultProps.allowDataOverflow),w=Ax(f,w,b,i)),J(J({},g),{},_e({},b,J(J({axisType:i},a.defaultProps),{},{hide:!0,orientation:jn(ane,"".concat(i,".").concat(x%2),null),domain:w,originalDomain:S,isCategorical:m,layout:u})))}return g},{})},dne=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=e.children,f="".concat(a,"Id"),h=Fn(u,i),p={};return h&&h.length?p=lne(e,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(p=cne(e,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),p},une=function(e){var r=hs(e),n=La(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:U0(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:nf(r,n)}},Dw=function(e){var r=e.children,n=e.defaultShowTooltip,a=mn(r,Vo),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},fne=function(e){return!e||!e.length?!1:e.some(function(r){var n=Ua(r&&r.type);return n&&n.indexOf("Bar")>=0})},_w=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},hne=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,l=e.yAxisMap,c=l===void 0?{}:l,d=n.width,u=n.height,f=n.children,h=n.margin||{},p=mn(f,Vo),m=mn(f,ws),x=Object.keys(c).reduce(function(w,v){var C=c[v],A=C.orientation;return!C.mirror&&!C.hide?J(J({},w),{},_e({},A,w[A]+C.width)):w},{left:h.left||0,right:h.right||0}),g=Object.keys(o).reduce(function(w,v){var C=o[v],A=C.orientation;return!C.mirror&&!C.hide?J(J({},w),{},_e({},A,jn(w,"".concat(A))+C.height)):w},{top:h.top||0,bottom:h.bottom||0}),y=J(J({},g),x),j=y.bottom;p&&(y.bottom+=p.props.height||Vo.defaultProps.height),m&&r&&(y=$Y(y,a,n,r));var b=d-y.left-y.right,S=u-y.top-y.bottom;return J(J({brushBottom:j},y),{},{width:Math.max(b,0),height:Math.max(S,0)})},pne=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},Ay=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,d=e.legendContent,u=e.formatAxisMap,f=e.defaultProps,h=function(y,j){var b=j.graphicalItems,S=j.stackGroups,w=j.offset,v=j.updateId,C=j.dataStartIndex,A=j.dataEndIndex,k=y.barSize,O=y.layout,$=y.barGap,M=y.barCategoryGap,T=y.maxBarSize,I=_w(O),z=I.numericAxisName,U=I.cateAxisName,Y=fne(b),Z=[];return b.forEach(function(te,q){var ne=Cp(y.data,{graphicalItems:[te],dataStartIndex:C,dataEndIndex:A}),H=te.type.defaultProps!==void 0?J(J({},te.type.defaultProps),te.props):te.props,Q=H.dataKey,de=H.maxBarSize,ie=H["".concat(z,"Id")],Re=H["".concat(U,"Id")],Ae={},je=c.reduce(function(_t,St){var Xe=j["".concat(St.axisType,"Map")],Sn=H["".concat(St.axisType,"Id")];Xe&&Xe[Sn]||St.axisType==="zAxis"||Ei();var Ar=Xe[Sn];return J(J({},_t),{},_e(_e({},St.axisType,Ar),"".concat(St.axisType,"Ticks"),La(Ar)))},Ae),X=je[U],ye=je["".concat(U,"Ticks")],Ne=S&&S[ie]&&S[ie].hasStack&&WY(te,S[ie].stackGroups),ee=Ua(te.type).indexOf("Bar")>=0,Qe=nf(X,ye),L=[],oe=Y&&IY({barSize:k,stackGroups:S,totalSize:pne(je,U)});if(ee){var pe,Ge,ut=Ve(de)?T:de,it=(pe=(Ge=nf(X,ye,!0))!==null&&Ge!==void 0?Ge:ut)!==null&&pe!==void 0?pe:0;L=MY({barGap:$,barCategoryGap:M,bandSize:it!==Qe?it:Qe,sizeList:oe[Re],maxBarSize:ut}),it!==Qe&&(L=L.map(function(_t){return J(J({},_t),{},{position:J(J({},_t.position),{},{offset:_t.position.offset-it/2})})}))}var wt=te&&te.type&&te.type.getComposedData;wt&&Z.push({props:J(J({},wt(J(J({},je),{},{displayedData:ne,props:y,dataKey:Q,item:te,bandSize:Qe,barPosition:L,offset:w,stackedData:Ne,layout:O,dataStartIndex:C,dataEndIndex:A}))),{},_e(_e(_e({key:te.key||"item-".concat(q)},z,je[z]),U,je[U]),"animationId",v)),childIndex:M$(te,y.children),item:te})}),Z},p=function(y,j){var b=y.props,S=y.dataStartIndex,w=y.dataEndIndex,v=y.updateId;if(!Xv({props:b}))return null;var C=b.children,A=b.layout,k=b.stackOffset,O=b.data,$=b.reverseStackOrder,M=_w(A),T=M.numericAxisName,I=M.cateAxisName,z=Fn(C,n),U=VY(O,z,"".concat(T,"Id"),"".concat(I,"Id"),k,$),Y=c.reduce(function(H,Q){var de="".concat(Q.axisType,"Map");return J(J({},H),{},_e({},de,dne(b,J(J({},Q),{},{graphicalItems:z,stackGroups:Q.axisType===T&&U,dataStartIndex:S,dataEndIndex:w}))))},{}),Z=hne(J(J({},Y),{},{props:b,graphicalItems:z}),j==null?void 0:j.legendBBox);Object.keys(Y).forEach(function(H){Y[H]=u(b,Y[H],Z,H.replace("Map",""),r)});var te=Y["".concat(I,"Map")],q=une(te),ne=h(b,J(J({},Y),{},{dataStartIndex:S,dataEndIndex:w,updateId:v,graphicalItems:z,stackGroups:U,offset:Z}));return J(J({formattedGraphicalItems:ne,graphicalItems:z,offset:Z,stackGroups:U},q),Y)},m=function(g){function y(j){var b,S,w;return Yre(this,y),w=Jre(this,y,[j]),_e(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_e(w,"accessibilityManager",new Mre),_e(w,"handleLegendBBoxUpdate",function(v){if(v){var C=w.state,A=C.dataStartIndex,k=C.dataEndIndex,O=C.updateId;w.setState(J({legendBBox:v},p({props:w.props,dataStartIndex:A,dataEndIndex:k,updateId:O},J(J({},w.state),{},{legendBBox:v}))))}}),_e(w,"handleReceiveSyncEvent",function(v,C,A){if(w.props.syncId===v){if(A===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(C)}}),_e(w,"handleBrushChange",function(v){var C=v.startIndex,A=v.endIndex;if(C!==w.state.dataStartIndex||A!==w.state.dataEndIndex){var k=w.state.updateId;w.setState(function(){return J({dataStartIndex:C,dataEndIndex:A},p({props:w.props,dataStartIndex:C,dataEndIndex:A,updateId:k},w.state))}),w.triggerSyncEvent({dataStartIndex:C,dataEndIndex:A})}}),_e(w,"handleMouseEnter",function(v){var C=w.getMouseInfo(v);if(C){var A=J(J({},C),{},{isTooltipActive:!0});w.setState(A),w.triggerSyncEvent(A);var k=w.props.onMouseEnter;ze(k)&&k(A,v)}}),_e(w,"triggeredAfterMouseMove",function(v){var C=w.getMouseInfo(v),A=C?J(J({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(A),w.triggerSyncEvent(A);var k=w.props.onMouseMove;ze(k)&&k(A,v)}),_e(w,"handleItemMouseEnter",function(v){w.setState(function(){return{isTooltipActive:!0,activeItem:v,activePayload:v.tooltipPayload,activeCoordinate:v.tooltipPosition||{x:v.cx,y:v.cy}}})}),_e(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),_e(w,"handleMouseMove",function(v){v.persist(),w.throttleTriggeredAfterMouseMove(v)}),_e(w,"handleMouseLeave",function(v){w.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};w.setState(C),w.triggerSyncEvent(C);var A=w.props.onMouseLeave;ze(A)&&A(C,v)}),_e(w,"handleOuterEvent",function(v){var C=I$(v),A=jn(w.props,"".concat(C));if(C&&ze(A)){var k,O;/.*touch.*/i.test(C)?O=w.getMouseInfo(v.changedTouches[0]):O=w.getMouseInfo(v),A((k=O)!==null&&k!==void 0?k:{},v)}}),_e(w,"handleClick",function(v){var C=w.getMouseInfo(v);if(C){var A=J(J({},C),{},{isTooltipActive:!0});w.setState(A),w.triggerSyncEvent(A);var k=w.props.onClick;ze(k)&&k(A,v)}}),_e(w,"handleMouseDown",function(v){var C=w.props.onMouseDown;if(ze(C)){var A=w.getMouseInfo(v);C(A,v)}}),_e(w,"handleMouseUp",function(v){var C=w.props.onMouseUp;if(ze(C)){var A=w.getMouseInfo(v);C(A,v)}}),_e(w,"handleTouchMove",function(v){v.changedTouches!=null&&v.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(v.changedTouches[0])}),_e(w,"handleTouchStart",function(v){v.changedTouches!=null&&v.changedTouches.length>0&&w.handleMouseDown(v.changedTouches[0])}),_e(w,"handleTouchEnd",function(v){v.changedTouches!=null&&v.changedTouches.length>0&&w.handleMouseUp(v.changedTouches[0])}),_e(w,"handleDoubleClick",function(v){var C=w.props.onDoubleClick;if(ze(C)){var A=w.getMouseInfo(v);C(A,v)}}),_e(w,"handleContextMenu",function(v){var C=w.props.onContextMenu;if(ze(C)){var A=w.getMouseInfo(v);C(A,v)}}),_e(w,"triggerSyncEvent",function(v){w.props.syncId!==void 0&&bm.emit(jm,w.props.syncId,v,w.eventEmitterSymbol)}),_e(w,"applySyncEvent",function(v){var C=w.props,A=C.layout,k=C.syncMethod,O=w.state.updateId,$=v.dataStartIndex,M=v.dataEndIndex;if(v.dataStartIndex!==void 0||v.dataEndIndex!==void 0)w.setState(J({dataStartIndex:$,dataEndIndex:M},p({props:w.props,dataStartIndex:$,dataEndIndex:M,updateId:O},w.state)));else if(v.activeTooltipIndex!==void 0){var T=v.chartX,I=v.chartY,z=v.activeTooltipIndex,U=w.state,Y=U.offset,Z=U.tooltipTicks;if(!Y)return;if(typeof k=="function")z=k(Z,v);else if(k==="value"){z=-1;for(var te=0;te<Z.length;te++)if(Z[te].value===v.activeLabel){z=te;break}}var q=J(J({},Y),{},{x:Y.left,y:Y.top}),ne=Math.min(T,q.x+q.width),H=Math.min(I,q.y+q.height),Q=Z[z]&&Z[z].value,de=Ox(w.state,w.props.data,z),ie=Z[z]?{x:A==="horizontal"?Z[z].coordinate:ne,y:A==="horizontal"?H:Z[z].coordinate}:zA;w.setState(J(J({},v),{},{activeLabel:Q,activeCoordinate:ie,activePayload:de,activeTooltipIndex:z}))}else w.setState(v)}),_e(w,"renderCursor",function(v){var C,A=w.state,k=A.isTooltipActive,O=A.activeCoordinate,$=A.activePayload,M=A.offset,T=A.activeTooltipIndex,I=A.tooltipAxisBandSize,z=w.getTooltipEventType(),U=(C=v.props.active)!==null&&C!==void 0?C:k,Y=w.props.layout,Z=v.key||"_recharts-cursor";return D.createElement(Fre,{key:Z,activeCoordinate:O,activePayload:$,activeTooltipIndex:T,chartName:r,element:v,isActive:U,layout:Y,offset:M,tooltipAxisBandSize:I,tooltipEventType:z})}),_e(w,"renderPolarAxis",function(v,C,A){var k=jn(v,"type.axisType"),O=jn(w.state,"".concat(k,"Map")),$=v.type.defaultProps,M=$!==void 0?J(J({},$),v.props):v.props,T=O&&O[M["".concat(k,"Id")]];return N.cloneElement(v,J(J({},T),{},{className:He(k,T.className),key:v.key||"".concat(C,"-").concat(A),ticks:La(T,!0)}))}),_e(w,"renderPolarGrid",function(v){var C=v.props,A=C.radialLines,k=C.polarAngles,O=C.polarRadius,$=w.state,M=$.radiusAxisMap,T=$.angleAxisMap,I=hs(M),z=hs(T),U=z.cx,Y=z.cy,Z=z.innerRadius,te=z.outerRadius;return N.cloneElement(v,{polarAngles:Array.isArray(k)?k:La(z,!0).map(function(q){return q.coordinate}),polarRadius:Array.isArray(O)?O:La(I,!0).map(function(q){return q.coordinate}),cx:U,cy:Y,innerRadius:Z,outerRadius:te,key:v.key||"polar-grid",radialLines:A})}),_e(w,"renderLegend",function(){var v=w.state.formattedGraphicalItems,C=w.props,A=C.children,k=C.width,O=C.height,$=w.props.margin||{},M=k-($.left||0)-($.right||0),T=p3({children:A,formattedGraphicalItems:v,legendWidth:M,legendContent:d});if(!T)return null;var I=T.item,z=Mw(T,Bre);return N.cloneElement(I,J(J({},z),{},{chartWidth:k,chartHeight:O,margin:$,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),_e(w,"renderTooltip",function(){var v,C=w.props,A=C.children,k=C.accessibilityLayer,O=mn(A,gn);if(!O)return null;var $=w.state,M=$.isTooltipActive,T=$.activeCoordinate,I=$.activePayload,z=$.activeLabel,U=$.offset,Y=(v=O.props.active)!==null&&v!==void 0?v:M;return N.cloneElement(O,{viewBox:J(J({},U),{},{x:U.left,y:U.top}),active:Y,label:z,payload:Y?I:[],coordinate:T,accessibilityLayer:k})}),_e(w,"renderBrush",function(v){var C=w.props,A=C.margin,k=C.data,O=w.state,$=O.offset,M=O.dataStartIndex,T=O.dataEndIndex,I=O.updateId;return N.cloneElement(v,{key:v.key||"_recharts-brush",onChange:Jd(w.handleBrushChange,v.props.onChange),data:k,x:se(v.props.x)?v.props.x:$.left,y:se(v.props.y)?v.props.y:$.top+$.height+$.brushBottom-(A.bottom||0),width:se(v.props.width)?v.props.width:$.width,startIndex:M,endIndex:T,updateId:"brush-".concat(I)})}),_e(w,"renderReferenceElement",function(v,C,A){if(!v)return null;var k=w,O=k.clipPathId,$=w.state,M=$.xAxisMap,T=$.yAxisMap,I=$.offset,z=v.type.defaultProps||{},U=v.props,Y=U.xAxisId,Z=Y===void 0?z.xAxisId:Y,te=U.yAxisId,q=te===void 0?z.yAxisId:te;return N.cloneElement(v,{key:v.key||"".concat(C,"-").concat(A),xAxis:M[Z],yAxis:T[q],viewBox:{x:I.left,y:I.top,width:I.width,height:I.height},clipPathId:O})}),_e(w,"renderActivePoints",function(v){var C=v.item,A=v.activePoint,k=v.basePoint,O=v.childIndex,$=v.isRange,M=[],T=C.props.key,I=C.item.type.defaultProps!==void 0?J(J({},C.item.type.defaultProps),C.item.props):C.item.props,z=I.activeDot,U=I.dataKey,Y=J(J({index:O,dataKey:U,cx:A.x,cy:A.y,r:4,fill:py(C.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Pe(z,!1)),Pu(z));return M.push(y.renderActiveDot(z,Y,"".concat(T,"-activePoint-").concat(O))),k?M.push(y.renderActiveDot(z,J(J({},Y),{},{cx:k.x,cy:k.y}),"".concat(T,"-basePoint-").concat(O))):$&&M.push(null),M}),_e(w,"renderGraphicChild",function(v,C,A){var k=w.filterFormatItem(v,C,A);if(!k)return null;var O=w.getTooltipEventType(),$=w.state,M=$.isTooltipActive,T=$.tooltipAxis,I=$.activeTooltipIndex,z=$.activeLabel,U=w.props.children,Y=mn(U,gn),Z=k.props,te=Z.points,q=Z.isRange,ne=Z.baseLine,H=k.item.type.defaultProps!==void 0?J(J({},k.item.type.defaultProps),k.item.props):k.item.props,Q=H.activeDot,de=H.hide,ie=H.activeBar,Re=H.activeShape,Ae=!!(!de&&M&&Y&&(Q||ie||Re)),je={};O!=="axis"&&Y&&Y.props.trigger==="click"?je={onClick:Jd(w.handleItemMouseEnter,v.props.onClick)}:O!=="axis"&&(je={onMouseLeave:Jd(w.handleItemMouseLeave,v.props.onMouseLeave),onMouseEnter:Jd(w.handleItemMouseEnter,v.props.onMouseEnter)});var X=N.cloneElement(v,J(J({},k.props),je));function ye(St){return typeof T.dataKey=="function"?T.dataKey(St.payload):null}if(Ae)if(I>=0){var Ne,ee;if(T.dataKey&&!T.allowDuplicatedCategory){var Qe=typeof T.dataKey=="function"?ye:"payload.".concat(T.dataKey.toString());Ne=Eu(te,Qe,z),ee=q&&ne&&Eu(ne,Qe,z)}else Ne=te==null?void 0:te[I],ee=q&&ne&&ne[I];if(Re||ie){var L=v.props.activeIndex!==void 0?v.props.activeIndex:I;return[N.cloneElement(v,J(J(J({},k.props),je),{},{activeIndex:L})),null,null]}if(!Ve(Ne))return[X].concat(tl(w.renderActivePoints({item:k,activePoint:Ne,basePoint:ee,childIndex:I,isRange:q})))}else{var oe,pe=(oe=w.getItemByXY(w.state.activeCoordinate))!==null&&oe!==void 0?oe:{graphicalItem:X},Ge=pe.graphicalItem,ut=Ge.item,it=ut===void 0?v:ut,wt=Ge.childIndex,_t=J(J(J({},k.props),je),{},{activeIndex:wt});return[N.cloneElement(it,_t),null,null]}return q?[X,null,null]:[X,null]}),_e(w,"renderCustomized",function(v,C,A){return N.cloneElement(v,J(J({key:"recharts-customized-".concat(A)},w.props),w.state))}),_e(w,"renderMap",{CartesianGrid:{handler:tu,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:tu},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:tu},YAxis:{handler:tu},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((b=j.id)!==null&&b!==void 0?b:xl("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=hN(w.triggeredAfterMouseMove,(S=j.throttleDelay)!==null&&S!==void 0?S:1e3/60),w.state={},w}return Zre(y,g),Kre(y,[{key:"componentDidMount",value:function(){var b,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,S=b.children,w=b.data,v=b.height,C=b.layout,A=mn(S,gn);if(A){var k=A.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,$=Ox(this.state,w,k,O),M=this.state.tooltipTicks[k].coordinate,T=(this.state.offset.top+v)/2,I=C==="horizontal",z=I?{x:M,y:T}:{y:M,x:T},U=this.state.formattedGraphicalItems.find(function(Z){var te=Z.item;return te.type.name==="Scatter"});U&&(z=J(J({},z),U.props.points[k].tooltipPosition),$=U.props.points[k].tooltipPayload);var Y={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:O,activePayload:$,activeCoordinate:z};this.setState(Y),this.renderCursor(A),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var w,v;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(v=this.props.margin.top)!==null&&v!==void 0?v:0}})}return null}},{key:"componentDidUpdate",value:function(b){ng([mn(b.children,gn)],[mn(this.props.children,gn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=mn(this.props.children,gn);if(b&&typeof b.props.shared=="boolean"){var S=b.props.shared?"axis":"item";return l.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var S=this.container,w=S.getBoundingClientRect(),v=sV(w),C={chartX:Math.round(b.pageX-v.left),chartY:Math.round(b.pageY-v.top)},A=w.width/S.offsetWidth||1,k=this.inRange(C.chartX,C.chartY,A);if(!k)return null;var O=this.state,$=O.xAxisMap,M=O.yAxisMap,T=this.getTooltipEventType(),I=Rw(this.state,this.props.data,this.props.layout,k);if(T!=="axis"&&$&&M){var z=hs($).scale,U=hs(M).scale,Y=z&&z.invert?z.invert(C.chartX):null,Z=U&&U.invert?U.invert(C.chartY):null;return J(J({},C),{},{xValue:Y,yValue:Z},I)}return I?J(J({},C),I):null}},{key:"inRange",value:function(b,S){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,v=this.props.layout,C=b/w,A=S/w;if(v==="horizontal"||v==="vertical"){var k=this.state.offset,O=C>=k.left&&C<=k.left+k.width&&A>=k.top&&A<=k.top+k.height;return O?{x:C,y:A}:null}var $=this.state,M=$.angleAxisMap,T=$.radiusAxisMap;if(M&&T){var I=hs(M);return oj({x:C,y:A},I)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,S=this.getTooltipEventType(),w=mn(b,gn),v={};w&&S==="axis"&&(w.props.trigger==="click"?v={onClick:this.handleClick}:v={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=Pu(this.props,this.handleOuterEvent);return J(J({},C),v)}},{key:"addListener",value:function(){bm.on(jm,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){bm.removeListener(jm,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,S,w){for(var v=this.state.formattedGraphicalItems,C=0,A=v.length;C<A;C++){var k=v[C];if(k.item===b||k.props.key===b.key||S===Ua(k.item.type)&&w===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,S=this.state.offset,w=S.left,v=S.top,C=S.height,A=S.width;return D.createElement("defs",null,D.createElement("clipPath",{id:b},D.createElement("rect",{x:w,y:v,height:C,width:A})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(S,w){var v=Iw(w,2),C=v[0],A=v[1];return J(J({},S),{},_e({},C,A.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(S,w){var v=Iw(w,2),C=v[0],A=v[1];return J(J({},S),{},_e({},C,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(b){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(b){var S=this.state,w=S.formattedGraphicalItems,v=S.activeItem;if(w&&w.length)for(var C=0,A=w.length;C<A;C++){var k=w[C],O=k.props,$=k.item,M=$.type.defaultProps!==void 0?J(J({},$.type.defaultProps),$.props):$.props,T=Ua($.type);if(T==="Bar"){var I=(O.data||[]).find(function(Z){return UJ(b,Z)});if(I)return{graphicalItem:k,payload:I}}else if(T==="RadialBar"){var z=(O.data||[]).find(function(Z){return oj(b,Z)});if(z)return{graphicalItem:k,payload:z}}else if(vp(k,v)||bp(k,v)||Kc(k,v)){var U=PQ({graphicalItem:k,activeTooltipItem:v,itemData:M.data}),Y=M.activeIndex===void 0?U:M.activeIndex;return{graphicalItem:J(J({},k),{},{childIndex:Y}),payload:Kc(k,v)?M.data[U]:k.props.data[U]}}}return null}},{key:"render",value:function(){var b=this;if(!Xv(this))return null;var S=this.props,w=S.children,v=S.className,C=S.width,A=S.height,k=S.style,O=S.compact,$=S.title,M=S.desc,T=Mw(S,Ure),I=Pe(T,!1);if(O)return D.createElement(mw,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement(sg,fo({},I,{width:C,height:A,title:$,desc:M}),this.renderClipPath(),Zv(w,this.renderMap)));if(this.props.accessibilityLayer){var z,U;I.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,I.role=(U=this.props.role)!==null&&U!==void 0?U:"application",I.onKeyDown=function(Z){b.accessibilityManager.keyboardEvent(Z)},I.onFocus=function(){b.accessibilityManager.focus()}}var Y=this.parseEventsOfWrapper();return D.createElement(mw,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement("div",fo({className:He("recharts-wrapper",v),style:J({position:"relative",cursor:"default",width:C,height:A},k)},Y,{ref:function(te){b.container=te}}),D.createElement(sg,fo({},I,{width:C,height:A,title:$,desc:M,style:sne}),this.renderClipPath(),Zv(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);_e(m,"displayName",r),_e(m,"defaultProps",J({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),_e(m,"getDerivedStateFromProps",function(g,y){var j=g.dataKey,b=g.data,S=g.children,w=g.width,v=g.height,C=g.layout,A=g.stackOffset,k=g.margin,O=y.dataStartIndex,$=y.dataEndIndex;if(y.updateId===void 0){var M=Dw(g);return J(J(J({},M),{},{updateId:0},p(J(J({props:g},M),{},{updateId:0}),y)),{},{prevDataKey:j,prevData:b,prevWidth:w,prevHeight:v,prevLayout:C,prevStackOffset:A,prevMargin:k,prevChildren:S})}if(j!==y.prevDataKey||b!==y.prevData||w!==y.prevWidth||v!==y.prevHeight||C!==y.prevLayout||A!==y.prevStackOffset||!po(k,y.prevMargin)){var T=Dw(g),I={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},z=J(J({},Rw(y,b,C)),{},{updateId:y.updateId+1}),U=J(J(J({},T),I),z);return J(J(J({},U),p(J({props:g},U),y)),{},{prevDataKey:j,prevData:b,prevWidth:w,prevHeight:v,prevLayout:C,prevStackOffset:A,prevMargin:k,prevChildren:S})}if(!ng(S,y.prevChildren)){var Y,Z,te,q,ne=mn(S,Vo),H=ne&&(Y=(Z=ne.props)===null||Z===void 0?void 0:Z.startIndex)!==null&&Y!==void 0?Y:O,Q=ne&&(te=(q=ne.props)===null||q===void 0?void 0:q.endIndex)!==null&&te!==void 0?te:$,de=H!==O||Q!==$,ie=!Ve(b),Re=ie&&!de?y.updateId:y.updateId+1;return J(J({updateId:Re},p(J(J({props:g},y),{},{updateId:Re,dataStartIndex:H,dataEndIndex:Q}),y)),{},{prevChildren:S,dataStartIndex:H,dataEndIndex:Q})}return null}),_e(m,"renderActiveDot",function(g,y,j){var b;return N.isValidElement(g)?b=N.cloneElement(g,y):ze(g)?b=g(y):b=D.createElement(pp,y),D.createElement(Ze,{className:"recharts-active-dot",key:j},b)});var x=N.forwardRef(function(y,j){return D.createElement(m,fo({},y,{ref:j}))});return x.displayName=m.displayName,x},mne=Ay({chartName:"BarChart",GraphicalChild:Ui,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Xo},{axisType:"yAxis",AxisComp:Zo}],formatAxisMap:nA}),Lw=Ay({chartName:"PieChart",GraphicalChild:wa,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:yp},{axisType:"radiusAxis",AxisComp:gp}],formatAxisMap:tG,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),gne=Ay({chartName:"AreaChart",GraphicalChild:Fs,axisComponents:[{axisType:"xAxis",AxisComp:Xo},{axisType:"yAxis",AxisComp:Zo}],formatAxisMap:nA});const xne=()=>{var x,g;const{t,language:e}=Se(),[r,n]=N.useState(!0),[a,i]=N.useState(null),[o,l]=N.useState({activeClients:0,totalClients:0,activeConsultants:0,totalConsultants:0,completedSessions:0,totalSessions:0,pendingSessions:0,confirmedSessions:0,monthlyRevenue:0,totalRevenue:0,lastMonthRevenue:0,revenueGrowth:0,averageRating:0,totalRatings:0,cancelledSessions:0,totalBookings:0,totalServices:0,activeServices:0,totalArticles:0,publishedArticles:0,totalPayments:0,pendingPayments:0,totalReports:0,monthlyRevenueData:[],sessionsByStatus:[],topConsultants:[],recentBookings:[]});N.useEffect(()=>{c()},[]);const c=async()=>{try{n(!0),i(null);const y=await Ke.getDashboardStats();l(y.stats)}catch(y){console.error("Error fetching dashboard stats:",y),i(y.message||"Failed to load dashboard data")}finally{n(!1)}},d=({title:y,value:j,icon:b,color:S,suffix:w="",prefix:v=null,growth:C=null,delay:A=0,subtitle:k=null})=>s.jsxs(V,{className:"modern-kpi-card card-hover shadow-professional-lg relative overflow-hidden h-full border-0",style:{animationDelay:`${A}s`},styles:{body:{padding:"20px"}},children:[s.jsx("div",{className:`absolute -top-8 -right-8 w-32 h-32 rounded-full ${S} opacity-5 blur-2xl`}),s.jsx("div",{className:`absolute -bottom-6 -left-6 w-24 h-24 rounded-full ${S} opacity-5 blur-xl`}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:`p-3 rounded-2xl ${S} bg-opacity-10 shadow-sm`,children:s.jsx("div",{className:"text-2xl sm:text-3xl",children:b})}),C!==null&&s.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-bold ${C>=0?"bg-green-50 text-green-600":"bg-red-50 text-red-600"}`,children:[C>=0?s.jsx(Ev,{}):s.jsx(yE,{}),Math.abs(C).toFixed(1),"%"]})]}),s.jsx(Fe,{title:s.jsx("span",{className:"text-gray-600 font-semibold text-xs sm:text-sm uppercase tracking-wide",children:y}),value:j,prefix:v,suffix:w,valueStyle:{color:S.includes("teal")?"#14b8a6":S.includes("olive")?"#7a8c66":S.includes("yellow")?"#faad14":S.includes("red")?"#ff4d4f":"#1890ff",fontWeight:800,fontSize:"clamp(20px, 4vw, 28px)",lineHeight:1.2}}),k&&s.jsx("div",{className:"mt-3 text-xs text-gray-500 font-medium",children:k})]})]}),u=((x=o.monthlyRevenueData)==null?void 0:x.length)>0?o.monthlyRevenueData.map(y=>({month:y.month,revenue:y.revenue||0})):[{month:e==="ar"?"يناير":"Jan",revenue:5e4},{month:e==="ar"?"فبراير":"Feb",revenue:75e3},{month:e==="ar"?"مارس":"Mar",revenue:6e4},{month:e==="ar"?"أبريل":"Apr",revenue:9e4},{month:e==="ar"?"مايو":"May",revenue:o.monthlyRevenue||85e3}],f=((g=o.sessionsByStatus)==null?void 0:g.length)>0?o.sessionsByStatus.map(y=>({name:e==="ar"?y.status==="COMPLETED"?"مكتملة":y.status==="PENDING"?"معلقة":y.status==="CONFIRMED"?"مؤكدة":y.status==="CANCELLED"?"ملغاة":y.status:y.status,value:y.count,color:y.status==="COMPLETED"?"#52c41a":y.status==="PENDING"?"#faad14":y.status==="CONFIRMED"?"#1890ff":y.status==="CANCELLED"?"#ff4d4f":"#8c8c8c"})):[{name:e==="ar"?"مكتملة":"Completed",value:o.completedSessions,color:"#52c41a"},{name:e==="ar"?"ملغاة":"Cancelled",value:o.cancelledSessions,color:"#ff4d4f"}],h=[{name:e==="ar"?"استشارات":"Consultations",value:35,color:"#14b8a6"},{name:e==="ar"?"دراسات جدوى":"Feasibility",value:25,color:"#7a8c66"},{name:e==="ar"?"تحليلات":"Analysis",value:40,color:"#faad14"}],p=[{title:e==="ar"?"العميل":"Client",dataIndex:"clientName",key:"clientName"},{title:e==="ar"?"المستشار":"Consultant",dataIndex:"consultantName",key:"consultantName"},{title:e==="ar"?"الخدمة":"Service",dataIndex:"serviceName",key:"serviceName"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:y=>{const b={COMPLETED:{color:"green",text:e==="ar"?"مكتملة":"Completed"},PENDING:{color:"orange",text:e==="ar"?"معلقة":"Pending"},CONFIRMED:{color:"blue",text:e==="ar"?"مؤكدة":"Confirmed"},CANCELLED:{color:"red",text:e==="ar"?"ملغاة":"Cancelled"}}[y]||{color:"default",text:y};return s.jsx(ce,{color:b.color,children:b.text})}},{title:e==="ar"?"التاريخ":"Date",dataIndex:"scheduledAt",key:"scheduledAt",render:y=>y?fe(y).format("YYYY-MM-DD HH:mm"):"-"}],m=[{title:e==="ar"?"المستشار":"Consultant",dataIndex:"name",key:"name",render:y=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ot,{icon:s.jsx(Ee,{})}),s.jsx("span",{className:"font-medium",children:y})]})},{title:e==="ar"?"الحجوزات":"Bookings",dataIndex:"bookings",key:"bookings",render:y=>s.jsx("span",{className:"font-semibold",children:y})},{title:e==="ar"?"التقييم":"Rating",dataIndex:"rating",key:"rating",render:y=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Co,{className:"text-yellow-500"}),s.jsx("span",{className:"font-semibold",children:(y==null?void 0:y.toFixed(1))||"0.0"})]})}];return r?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})}):a?s.jsx(Mr,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:a,type:"error",showIcon:!0,closable:!0,onClose:()=>i(null)}):s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 md:mb-10 relative z-10 px-2 sm:px-0",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t("dashboardOverview")}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t("platformPerformance")})]}),s.jsx("div",{className:"text-sm sm:text-base text-gray-700 glass-card px-4 py-3 rounded-xl shadow-professional whitespace-nowrap font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"text-olive-green-600"}),new Date().toLocaleDateString(e==="ar"?"ar-SA":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]}),s.jsxs(le,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx(_,{xs:12,sm:12,md:8,lg:6,xl:4,children:s.jsx(d,{title:t("activeClients"),value:o.activeClients,icon:s.jsx(Ee,{className:"text-xl sm:text-2xl text-teal-500"}),color:"bg-teal-500",subtitle:t("totalClients")+`: ${o.totalClients}`,delay:.1})}),s.jsx(_,{xs:12,sm:12,md:8,lg:6,xl:4,children:s.jsx(d,{title:t("activeConsultants"),value:o.activeConsultants,icon:s.jsx(Mn,{className:"text-xl sm:text-2xl text-olive-green-600"}),color:"bg-olive-green-600",subtitle:t("totalConsultants")+`: ${o.totalConsultants}`,delay:.2})}),s.jsx(_,{xs:12,sm:12,md:8,lg:6,xl:4,children:s.jsx(d,{title:t("completedSessions"),value:o.completedSessions,icon:s.jsx(vt,{className:"text-xl sm:text-2xl text-teal-500"}),color:"bg-teal-500",subtitle:t("totalSessions")+`: ${o.totalSessions}`,delay:.3})}),s.jsx(_,{xs:12,sm:12,md:8,lg:6,xl:4,children:s.jsx(d,{title:t("monthlyRevenue"),value:o.monthlyRevenue,icon:s.jsx(ir,{className:"text-xl sm:text-2xl text-olive-green-600"}),color:"bg-olive-green-600",suffix:e==="ar"?" ريال":" SAR",growth:o.revenueGrowth,delay:.4})}),s.jsx(_,{xs:12,sm:12,md:8,lg:6,xl:4,children:s.jsx(d,{title:t("averageRating"),value:o.averageRating,icon:s.jsx(Co,{className:"text-xl sm:text-2xl text-yellow-500"}),color:"bg-yellow-500",suffix:"/ 5",subtitle:t("totalRatings")+`: ${o.totalRatings}`,delay:.5})}),s.jsx(_,{xs:12,sm:12,md:8,lg:6,xl:4,children:s.jsx(d,{title:t("cancelledSessions"),value:o.cancelledSessions,icon:s.jsx(yc,{className:"text-xl sm:text-2xl text-red-500"}),color:"bg-red-500",delay:.6})})]}),s.jsxs(le,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx(_,{xs:12,sm:12,md:6,lg:4,xl:4,children:s.jsx(d,{title:t("totalServices"),value:o.totalServices,icon:s.jsx(So,{className:"text-lg sm:text-xl text-blue-500"}),color:"bg-blue-500",subtitle:t("activeServices")+`: ${o.activeServices}`,delay:.7})}),s.jsx(_,{xs:12,sm:12,md:6,lg:4,xl:4,children:s.jsx(d,{title:t("totalArticles"),value:o.totalArticles,icon:s.jsx(xc,{className:"text-lg sm:text-xl text-purple-500"}),color:"bg-purple-500",subtitle:t("publishedArticles")+`: ${o.publishedArticles}`,delay:.8})}),s.jsx(_,{xs:12,sm:12,md:6,lg:4,xl:4,children:s.jsx(d,{title:t("totalPayments"),value:o.totalPayments,icon:s.jsx(d0,{className:"text-lg sm:text-xl text-green-500"}),color:"bg-green-500",subtitle:t("pendingPayments")+`: ${o.pendingPayments}`,delay:.9})}),s.jsx(_,{xs:12,sm:12,md:6,lg:4,xl:4,children:s.jsx(d,{title:t("pendingSessions"),value:o.pendingSessions,icon:s.jsx(Ln,{className:"text-lg sm:text-xl text-orange-500"}),color:"bg-orange-500",delay:1})}),s.jsx(_,{xs:12,sm:12,md:6,lg:4,xl:4,children:s.jsx(d,{title:t("confirmedSessions"),value:o.confirmedSessions,icon:s.jsx(vt,{className:"text-lg sm:text-xl text-blue-500"}),color:"bg-blue-500",delay:1.1})}),s.jsx(_,{xs:12,sm:12,md:6,lg:4,xl:4,children:s.jsx(d,{title:t("totalReports"),value:o.totalReports,icon:s.jsx(It,{className:"text-lg sm:text-xl text-indigo-500"}),color:"bg-indigo-500",delay:1.2})})]}),s.jsxs(le,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx(_,{xs:24,sm:24,md:24,lg:16,xl:16,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-olive-green-500 to-olive-green-600",children:s.jsx(vc,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t("monthlyRevenueTrend")})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0",style:{animationDelay:"0.2s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx(Wd,{width:"100%",height:250,children:s.jsxs(gne,{data:u,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#7a8c66",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#7a8c66",stopOpacity:0})]})}),s.jsx(yx,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(Xo,{dataKey:"month",stroke:"#6b7280"}),s.jsx(Zo,{stroke:"#6b7280"}),s.jsx(gn,{formatter:y=>[`${y} ${e==="ar"?"ريال":"SAR"}`,e==="ar"?"الإيرادات":"Revenue"],contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}),s.jsx(Fs,{type:"monotone",dataKey:"revenue",stroke:"#7a8c66",strokeWidth:3,fillOpacity:1,fill:"url(#colorRevenue)"})]})})})}),s.jsx(_,{xs:24,sm:24,md:24,lg:8,xl:8,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-teal-500 to-teal-600",children:s.jsx(vt,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t("sessionsStatus")})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0",style:{animationDelay:"0.3s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx(Wd,{width:"100%",height:250,children:s.jsxs(Lw,{children:[s.jsx(wa,{data:f,cx:"50%",cy:"50%",labelLine:!1,label:({name:y,percent:j})=>`${y}: ${(j*100).toFixed(0)}%`,outerRadius:90,fill:"#8884d8",dataKey:"value",children:f.map((y,j)=>s.jsx(Ac,{fill:y.color},`cell-${j}`))}),s.jsx(gn,{})]})})})})]}),s.jsxs(le,{gutter:[12,12],className:"mb-4 md:mb-6",children:[s.jsx(_,{xs:24,sm:24,md:24,lg:12,xl:12,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600",children:s.jsx(So,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t("servicesDistribution")})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0",style:{animationDelay:"0.4s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx(Wd,{width:"100%",height:250,children:s.jsxs(Lw,{children:[s.jsx(wa,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:({name:y,percent:j})=>`${y}: ${(j*100).toFixed(0)}%`,outerRadius:90,fill:"#8884d8",dataKey:"value",children:h.map((y,j)=>s.jsx(Ac,{fill:y.color},`cell-${j}`))}),s.jsx(gn,{}),s.jsx(ws,{})]})})})}),s.jsx(_,{xs:24,sm:24,md:24,lg:12,xl:12,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-green-500 to-green-600",children:s.jsx(Ev,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t("performanceComparison")})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0",style:{animationDelay:"0.5s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx(Wd,{width:"100%",height:250,children:s.jsxs(mne,{data:u,children:[s.jsx(yx,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(Xo,{dataKey:"month",stroke:"#6b7280"}),s.jsx(Zo,{stroke:"#6b7280"}),s.jsx(gn,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}),s.jsx(ws,{}),s.jsx(Ui,{dataKey:"revenue",fill:"#7a8c66",radius:[8,8,0,0]})]})})})})]}),s.jsxs(le,{gutter:[12,12],children:[s.jsx(_,{xs:24,sm:24,md:24,lg:14,xl:14,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-orange-500 to-orange-600",children:s.jsx(Ln,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t("recentBookings")})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0",style:{animationDelay:"0.6s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx("div",{className:"overflow-x-auto",children:s.jsx(rt,{dataSource:o.recentBookings||[],columns:p,pagination:{pageSize:5,responsive:!0},size:"small",rowKey:"id",scroll:{x:"max-content"}})})})}),s.jsx(_,{xs:24,sm:24,md:24,lg:10,xl:10,children:s.jsx(V,{title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-yellow-500 to-yellow-600",children:s.jsx(vc,{className:"text-white text-lg sm:text-xl"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:t("topConsultants")})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0",style:{animationDelay:"0.7s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx("div",{className:"overflow-x-auto",children:s.jsx(rt,{dataSource:o.topConsultants||[],columns:m,pagination:!1,size:"small",rowKey:"id",scroll:{x:"max-content"}})})})})]})]})},yne=()=>{const{t,language:e}=Se(),r=st(),[n,a]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(null),[d,u]=N.useState(""),[f,h]=N.useState("all"),[p,m]=N.useState({visible:!1,userId:null}),[x,g]=N.useState({visible:!1,editing:null}),[y]=E.useForm(),[j]=E.useForm();N.useEffect(()=>{b()},[d,f]);const b=async()=>{try{o(!0),c(null);const k={};d&&(k.search=d),f!=="all"&&(k.status=f);const $=(await Ke.getClients(k)).clients.map(M=>{var T;return{id:M.id,userId:M.user.id,name:`${M.firstName} ${M.lastName}`,email:M.user.email,phone:M.user.phone,sessions:((T=M._count)==null?void 0:T.bookings)||0,lastLogin:M.user.lastLogin?new Date(M.user.lastLogin).toLocaleDateString(e==="ar"?"ar-SA":"en-US"):e==="ar"?"لم يسجل دخول":"Never",status:M.user.isActive?"active":"suspended",isActive:M.user.isActive}});a($)}catch(k){console.error("Error fetching clients:",k),c(k.message||"Failed to load clients"),R.error(e==="ar"?"فشل تحميل العملاء":"Failed to load clients")}finally{o(!1)}},S=async(k,O)=>{try{const $=!O;await Ke.toggleUserStatus(k,$),R.success(e==="ar"?`تم ${$?"تفعيل":"تعطيل"} المستخدم بنجاح`:`User ${$?"activated":"suspended"} successfully`),b()}catch($){R.error($.message||(e==="ar"?"فشل تحديث الحالة":"Failed to update status"))}},w=async k=>{try{await Ke.resetUserPassword(p.userId,k.newPassword),R.success(e==="ar"?"تم إعادة تعيين كلمة المرور بنجاح":"Password reset successfully"),m({visible:!1,userId:null}),y.resetFields()}catch(O){R.error(O.message||(e==="ar"?"فشل إعادة تعيين كلمة المرور":"Failed to reset password"))}},v=async k=>{try{x.editing?(await Ke.updateClient(x.editing.id,k),R.success(e==="ar"?"تم تحديث العميل بنجاح":"Client updated successfully")):(await Ke.createClient(k),R.success(e==="ar"?"تم إنشاء العميل بنجاح":"Client created successfully")),g({visible:!1,editing:null}),j.resetFields(),b()}catch(O){R.error(O.message||(e==="ar"?"فشل حفظ العميل":"Failed to save client"))}},C=async k=>{try{await Ke.deleteClient(k),R.success(e==="ar"?"تم حذف العميل بنجاح":"Client deleted successfully"),b()}catch(O){R.error(O.message||(e==="ar"?"فشل حذف العميل":"Failed to delete client"))}},A=[{title:e==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",sorter:(k,O)=>k.name.localeCompare(O.name)},{title:e==="ar"?"البريد الإلكتروني":"Email",dataIndex:"email",key:"email"},{title:e==="ar"?"رقم الهاتف":"Phone",dataIndex:"phone",key:"phone"},{title:e==="ar"?"عدد الجلسات":"Sessions Count",dataIndex:"sessions",key:"sessions",sorter:(k,O)=>k.sessions-O.sessions},{title:e==="ar"?"آخر تسجيل دخول":"Last Login",dataIndex:"lastLogin",key:"lastLogin"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:(k,O)=>{const $={active:"green",suspended:"red"},M={active:e==="ar"?"نشط":"Active",suspended:e==="ar"?"معلق":"Suspended"};return s.jsx(ce,{color:$[k],children:M[k]})},filters:[{text:e==="ar"?"نشط":"Active",value:"active"},{text:e==="ar"?"معلق":"Suspended",value:"suspended"}],onFilter:(k,O)=>O.status===k},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(k,O)=>s.jsxs(he,{children:[s.jsx(P,{type:"link",onClick:()=>r(`/admin/clients/${O.id}`),children:e==="ar"?"عرض التفاصيل":"View Details"}),s.jsx(P,{icon:s.jsx(qr,{}),onClick:async()=>{var $,M;try{const I=(await Ke.getClientById(O.id)).client;j.setFieldsValue({firstName:(I==null?void 0:I.firstName)||"",lastName:(I==null?void 0:I.lastName)||"",email:(($=I==null?void 0:I.user)==null?void 0:$.email)||"",phone:((M=I==null?void 0:I.user)==null?void 0:M.phone)||"",city:(I==null?void 0:I.city)||"",sector:(I==null?void 0:I.sector)||"",companyName:(I==null?void 0:I.companyName)||""}),g({visible:!0,editing:O})}catch{R.error(e==="ar"?"فشل تحميل بيانات العميل":"Failed to load client data")}},children:e==="ar"?"تعديل":"Edit"}),s.jsx(P,{type:O.isActive?"default":"primary",onClick:()=>S(O.userId,O.isActive),children:O.isActive?e==="ar"?"تعطيل":"Suspend":e==="ar"?"تفعيل":"Activate"}),s.jsx(P,{danger:!0,icon:s.jsx(f8,{}),onClick:()=>m({visible:!0,userId:O.userId}),children:e==="ar"?"إعادة تعيين كلمة المرور":"Reset Password"}),s.jsx(P,{danger:!0,onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذا العميل؟":"Are you sure you want to delete this client?")&&C(O.id)},children:e==="ar"?"حذف":"Delete"})]})}];return l&&!i?s.jsx(Mr,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:l,type:"error",showIcon:!0,action:s.jsx(P,{size:"small",onClick:b,children:e==="ar"?"إعادة المحاولة":"Retry"})}):s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"العملاء":"Clients"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع العملاء المسجلين":"Manage all registered clients"})]}),s.jsxs(he,{children:[s.jsx(F,{placeholder:e==="ar"?"بحث بالاسم أو البريد...":"Search by name or email...",prefix:s.jsx(ya,{}),className:"w-64",value:d,onChange:k=>u(k.target.value),allowClear:!0}),s.jsxs(B,{value:f,onChange:h,style:{width:150},children:[s.jsx(B.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(B.Option,{value:"active",children:e==="ar"?"نشط":"Active"}),s.jsx(B.Option,{value:"inactive",children:e==="ar"?"معلق":"Inactive"})]}),s.jsx(P,{icon:s.jsx(Wr,{}),onClick:b,loading:i,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{j.resetFields(),g({visible:!0,editing:null})},children:e==="ar"?"إضافة عميل جديد":"Add New Client"})]})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:A,dataSource:n,rowKey:"id",loading:i,pagination:{pageSize:10,showSizeChanger:!0,showTotal:k=>e==="ar"?`إجمالي ${k} عميل`:`Total ${k} clients`}})}),s.jsx(Ye,{title:e==="ar"?"إعادة تعيين كلمة المرور":"Reset Password",open:p.visible,onCancel:()=>{m({visible:!1,userId:null}),y.resetFields()},maskClosable:!0,keyboard:!0,footer:null,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:y,layout:"vertical",onFinish:w,children:[s.jsx(E.Item,{name:"newPassword",label:e==="ar"?"كلمة المرور الجديدة":"New Password",rules:[{required:!0,message:e==="ar"?"يرجى إدخال كلمة المرور":"Please enter password"},{min:8,message:e==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters"}],children:s.jsx(F.Password,{placeholder:e==="ar"?"أدخل كلمة المرور الجديدة":"Enter new password"})}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{m({visible:!1,userId:null}),y.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),s.jsx(Ye,{title:x.editing?e==="ar"?"تعديل العميل":"Edit Client":e==="ar"?"إضافة عميل جديد":"Add New Client",open:x.visible,onCancel:()=>{g({visible:!1,editing:null}),j.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:600,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:j,layout:"vertical",onFinish:v,children:[!x.editing&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:e==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email"},{type:"email",message:e==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email"}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"password",label:e==="ar"?"كلمة المرور":"Password",rules:[{required:!x.editing,message:e==="ar"?"يرجى إدخال كلمة المرور":"Please enter password"},{min:8,message:e==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters"}],children:s.jsx(F.Password,{})})]}),s.jsx(E.Item,{name:"firstName",label:e==="ar"?"الاسم الأول":"First Name",rules:[{required:!0}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"lastName",label:e==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:s.jsx(F,{})}),s.jsx(E.Item,{name:"city",label:e==="ar"?"المدينة":"City",children:s.jsx(F,{})}),s.jsx(E.Item,{name:"sector",label:e==="ar"?"القطاع":"Sector",children:s.jsx(F,{})}),s.jsx(E.Item,{name:"companyName",label:e==="ar"?"اسم الشركة":"Company Name",children:s.jsx(F,{})}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{g({visible:!1,editing:null}),j.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},vne=()=>{const{t,language:e}=Se(),r=st(),[n,a]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(null),[d,u]=N.useState(""),[f,h]=N.useState("all"),[p,m]=N.useState(null),[x,g]=N.useState(!1),[y,j]=N.useState({visible:!1,editing:null}),[b]=E.useForm();N.useEffect(()=>{S()},[d,f]);const S=async()=>{try{o(!0),c(null);const k={};d&&(k.search=d),f!=="all"&&(k.status=f);const $=(await Ke.getConsultants(k)).consultants.map(M=>{var T;return{id:M.id,userId:M.user.id,name:`${M.firstName} ${M.lastName}`,email:M.user.email,phone:M.user.phone,rating:M.averageRating||0,sessions:((T=M._count)==null?void 0:T.bookings)||0,status:M.isVerified?"approved":"pending",isVerified:M.isVerified,specialization:M.specialization,bio:M.bio,isAvailable:M.isAvailable}});a($)}catch(k){console.error("Error fetching consultants:",k),c(k.message||"Failed to load consultants"),R.error(e==="ar"?"فشل تحميل المستشارين":"Failed to load consultants")}finally{o(!1)}},w=async(k,O)=>{try{await Ke.reviewConsultant(k,O),R.success(e==="ar"?`تم ${O==="approve"?"الموافقة على":"رفض"} المستشار بنجاح`:`Consultant ${O}d successfully`),S()}catch($){R.error($.message||(e==="ar"?"فشل تحديث الحالة":"Failed to update status"))}},v=async k=>{try{y.editing?(await Ke.updateConsultant(y.editing.id,k),R.success(e==="ar"?"تم تحديث المستشار بنجاح":"Consultant updated successfully")):(await Ke.createConsultant(k),R.success(e==="ar"?"تم إنشاء المستشار بنجاح":"Consultant created successfully")),j({visible:!1,editing:null}),b.resetFields(),S()}catch(O){R.error(O.message||(e==="ar"?"فشل حفظ المستشار":"Failed to save consultant"))}},C=async k=>{try{await Ke.deleteConsultant(k),R.success(e==="ar"?"تم حذف المستشار بنجاح":"Consultant deleted successfully"),S()}catch(O){R.error(O.message||(e==="ar"?"فشل حذف المستشار":"Failed to delete consultant"))}},A=[{title:e==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",sorter:(k,O)=>k.name.localeCompare(O.name)},{title:e==="ar"?"البريد الإلكتروني":"Email",dataIndex:"email",key:"email"},{title:e==="ar"?"التخصص":"Specialization",dataIndex:"specialization",key:"specialization",render:k=>k||(e==="ar"?"غير محدد":"Not specified")},{title:e==="ar"?"التقييم":"Rating",dataIndex:"rating",key:"rating",render:k=>k>0?s.jsxs(he,{children:[s.jsx(Ya,{disabled:!0,defaultValue:k,allowHalf:!0}),s.jsxs("span",{children:["(",k.toFixed(1),")"]})]}):s.jsx("span",{className:"text-gray-400",children:e==="ar"?"لا يوجد تقييم":"No rating"}),sorter:(k,O)=>k.rating-O.rating},{title:e==="ar"?"الجلسات":"Sessions",dataIndex:"sessions",key:"sessions",sorter:(k,O)=>k.sessions-O.sessions},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:(k,O)=>{const $={approved:"green",pending:"orange",rejected:"red"},M={approved:e==="ar"?"موافق عليه":"Approved",pending:e==="ar"?"قيد المراجعة":"Pending",rejected:e==="ar"?"مرفوض":"Rejected"};return s.jsxs(he,{children:[s.jsx(ce,{color:$[k],children:M[k]}),O.isAvailable&&s.jsx(ce,{color:"blue",children:e==="ar"?"متاح":"Available"})]})},filters:[{text:e==="ar"?"موافق عليه":"Approved",value:"approved"},{text:e==="ar"?"قيد المراجعة":"Pending",value:"pending"}],onFilter:(k,O)=>O.status===k},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(k,O)=>s.jsxs(he,{children:[s.jsx(P,{type:"link",onClick:()=>r(`/admin/consultants/${O.id}`),children:e==="ar"?"عرض التفاصيل":"View Details"}),s.jsx(P,{icon:s.jsx(qr,{}),onClick:async()=>{var $;try{const T=(await Ke.getConsultantById(O.id)).consultant;b.setFieldsValue({firstName:(T==null?void 0:T.firstName)||"",lastName:(T==null?void 0:T.lastName)||"",phone:(($=T==null?void 0:T.user)==null?void 0:$.phone)||"",academicDegree:(T==null?void 0:T.academicDegree)||"",specialization:(T==null?void 0:T.specialization)||"",bio:(T==null?void 0:T.bio)||"",pricePerSession:(T==null?void 0:T.pricePerSession)||"",isVerified:(T==null?void 0:T.isVerified)||!1,isAvailable:(T==null?void 0:T.isAvailable)||!1}),j({visible:!0,editing:O})}catch{R.error(e==="ar"?"فشل تحميل بيانات المستشار":"Failed to load consultant data")}},children:e==="ar"?"تعديل":"Edit"}),O.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsx(P,{type:"primary",icon:s.jsx(Qm,{}),className:"bg-green-600",onClick:()=>w(O.id,"approve"),children:e==="ar"?"موافقة":"Approve"}),s.jsx(P,{danger:!0,icon:s.jsx(Tr,{}),onClick:()=>w(O.id,"reject"),children:e==="ar"?"رفض":"Reject"})]}),s.jsx(P,{danger:!0,onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذا المستشار؟":"Are you sure you want to delete this consultant?")&&C(O.id)},children:e==="ar"?"حذف":"Delete"})]})}];return l&&!i?s.jsx(Mr,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:l,type:"error",showIcon:!0,action:s.jsx(P,{size:"small",onClick:S,children:e==="ar"?"إعادة المحاولة":"Retry"})}):s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"المستشارون":"Consultants"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع المستشارين المسجلين":"Manage all registered consultants"})]}),s.jsxs(he,{className:"flex-wrap",children:[s.jsx(F,{placeholder:e==="ar"?"بحث بالاسم أو البريد...":"Search by name or email...",prefix:s.jsx(ya,{}),className:"w-64",size:"large",value:d,onChange:k=>u(k.target.value),allowClear:!0}),s.jsxs(B,{value:f,onChange:h,style:{width:150},children:[s.jsx(B.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(B.Option,{value:"approved",children:e==="ar"?"موافق عليه":"Approved"}),s.jsx(B.Option,{value:"pending",children:e==="ar"?"قيد المراجعة":"Pending"})]}),s.jsx(P,{icon:s.jsx(Wr,{}),onClick:S,loading:i,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx($r,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{b.resetFields(),j({visible:!0,editing:null})},children:e==="ar"?"إضافة مستشار جديد":"Add New Consultant"})]})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:A,dataSource:n,rowKey:"id",loading:i,pagination:{pageSize:10,showSizeChanger:!0,showTotal:k=>e==="ar"?`إجمالي ${k} مستشار`:`Total ${k} consultants`}})}),s.jsx(Ye,{title:e==="ar"?"تفاصيل المستشار":"Consultant Details",open:x,onCancel:()=>{g(!1),m(null)},maskClosable:!0,keyboard:!0,footer:null,width:600,destroyOnHidden:!0,className:"modern-modal",children:p&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"الاسم:":"Name:"})," ",p.name]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"البريد الإلكتروني:":"Email:"})," ",p.email]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"رقم الهاتف:":"Phone:"})," ",p.phone||(e==="ar"?"غير متوفر":"Not available")]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"التخصص:":"Specialization:"})," ",p.specialization||(e==="ar"?"غير محدد":"Not specified")]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"التقييم:":"Rating:"}),s.jsx(Ya,{disabled:!0,defaultValue:p.rating,allowHalf:!0,className:"ml-2"}),s.jsxs("span",{className:"ml-2",children:["(",p.rating.toFixed(1),")"]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"عدد الجلسات:":"Sessions:"})," ",p.sessions]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"الحالة:":"Status:"}),s.jsx(ce,{color:p.status==="approved"?"green":"orange",className:"ml-2",children:p.status==="approved"?e==="ar"?"موافق عليه":"Approved":e==="ar"?"قيد المراجعة":"Pending"})]}),p.bio&&s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"السيرة الذاتية:":"Bio:"}),s.jsx("p",{className:"mt-2 text-gray-600",children:p.bio})]})]})}),s.jsx(Ye,{title:y.editing?e==="ar"?"تعديل المستشار":"Edit Consultant":e==="ar"?"إضافة مستشار جديد":"Add New Consultant",open:y.visible,onCancel:()=>{j({visible:!1,editing:null}),b.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:700,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:b,layout:"vertical",onFinish:v,children:[!y.editing&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:e==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email"},{type:"email",message:e==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email"}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"password",label:e==="ar"?"كلمة المرور":"Password",rules:[{required:!y.editing,message:e==="ar"?"يرجى إدخال كلمة المرور":"Please enter password"},{min:8,message:e==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters"}],children:s.jsx(F.Password,{})})]}),s.jsx(E.Item,{name:"firstName",label:e==="ar"?"الاسم الأول":"First Name",rules:[{required:!0}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"lastName",label:e==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:s.jsx(F,{})}),s.jsx(E.Item,{name:"academicDegree",label:e==="ar"?"الدرجة العلمية":"Academic Degree",rules:[{required:!0}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"specialization",label:e==="ar"?"التخصص":"Specialization",rules:[{required:!0}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"bio",label:e==="ar"?"السيرة الذاتية":"Bio",children:s.jsx(F.TextArea,{rows:4})}),s.jsx(E.Item,{name:"pricePerSession",label:e==="ar"?"سعر الجلسة":"Price Per Session",rules:[{required:!0}],children:s.jsx(F,{type:"number"})}),y.editing&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"isVerified",valuePropName:"checked",label:e==="ar"?"موافق عليه":"Verified",children:s.jsx(Switch,{checkedChildren:e==="ar"?"نعم":"Yes",unCheckedChildren:e==="ar"?"لا":"No"})}),s.jsx(E.Item,{name:"isAvailable",valuePropName:"checked",label:e==="ar"?"متاح":"Available",children:s.jsx(Switch,{checkedChildren:e==="ar"?"نعم":"Yes",unCheckedChildren:e==="ar"?"لا":"No"})})]}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{j({visible:!1,editing:null}),b.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},bne=()=>{const{t,language:e}=Se(),[r,n]=N.useState([]),[a,i]=N.useState(!0),[o,l]=N.useState(null),[c,d]=N.useState("all"),[u,f]=N.useState(null),[h,p]=N.useState(!1),[m,x]=N.useState(!1),[g]=E.useForm();N.useEffect(()=>{y()},[c]);const y=async()=>{try{i(!0),l(null);const C={};c!=="all"&&(C.status=c);const k=(await Ke.getBookings(C)).bookings.map(O=>({id:O.id,client:O.client?`${O.client.firstName} ${O.client.lastName}`:e==="ar"?"غير متوفر":"N/A",consultant:O.consultant?`${O.consultant.firstName} ${O.consultant.lastName}`:e==="ar"?"غير متوفر":"N/A",type:O.service?e==="ar"?O.service.titleAr:O.service.title:O.bookingType||(e==="ar"?"غير محدد":"Not specified"),date:O.scheduledAt?fe(O.scheduledAt).format("YYYY-MM-DD HH:mm"):e==="ar"?"غير محدد":"Not scheduled",status:O.status,price:O.price,duration:O.duration,notes:O.notes,rating:O.rating,paymentStatus:O.paymentStatus,fullData:O}));n(k)}catch(C){console.error("Error fetching bookings:",C),l(C.message||"Failed to load bookings"),R.error(e==="ar"?"فشل تحميل الجلسات":"Failed to load sessions")}finally{i(!1)}},j=C=>({PENDING:"orange",CONFIRMED:"blue",COMPLETED:"green",CANCELLED:"red",IN_PROGRESS:"purple"})[C]||"default",b=C=>({PENDING:e==="ar"?"قيد الانتظار":"Pending",CONFIRMED:e==="ar"?"مؤكدة":"Confirmed",COMPLETED:e==="ar"?"مكتملة":"Completed",CANCELLED:e==="ar"?"ملغية":"Cancelled",IN_PROGRESS:e==="ar"?"قيد التنفيذ":"In Progress"})[C]||C,S=async C=>{try{const A={...C,scheduledAt:C.scheduledAt?C.scheduledAt.toISOString():null};u?(await Ke.updateBooking(u.id,A),R.success(e==="ar"?"تم تحديث الجلسة بنجاح":"Session updated successfully")):(await Ke.createBooking(A),R.success(e==="ar"?"تم إنشاء الجلسة بنجاح":"Session created successfully")),x(!1),f(null),g.resetFields(),y()}catch(A){R.error(A.message||(e==="ar"?"فشل حفظ الجلسة":"Failed to save session"))}},w=async C=>{try{await Ke.deleteBooking(C),R.success(e==="ar"?"تم حذف الجلسة بنجاح":"Session deleted successfully"),y()}catch(A){R.error(A.message||(e==="ar"?"فشل حذف الجلسة":"Failed to delete session"))}},v=[{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client",sorter:(C,A)=>C.client.localeCompare(A.client)},{title:e==="ar"?"المستشار":"Consultant",dataIndex:"consultant",key:"consultant",sorter:(C,A)=>C.consultant.localeCompare(A.consultant)},{title:e==="ar"?"النوع":"Type",dataIndex:"type",key:"type"},{title:e==="ar"?"التاريخ والوقت":"Date & Time",dataIndex:"date",key:"date",sorter:(C,A)=>new Date(C.date)-new Date(A.date)},{title:e==="ar"?"المبلغ":"Amount",dataIndex:"price",key:"price",render:C=>C?`${C} ${e==="ar"?"ريال":"SAR"}`:"-",sorter:(C,A)=>(C.price||0)-(A.price||0)},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:C=>s.jsx(ce,{color:j(C),children:b(C)}),filters:[{text:e==="ar"?"قيد الانتظار":"Pending",value:"PENDING"},{text:e==="ar"?"مؤكدة":"Confirmed",value:"CONFIRMED"},{text:e==="ar"?"مكتملة":"Completed",value:"COMPLETED"},{text:e==="ar"?"ملغية":"Cancelled",value:"CANCELLED"}],onFilter:(C,A)=>A.status===C},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(C,A)=>s.jsxs(he,{children:[s.jsx(P,{icon:s.jsx(mr,{}),onClick:()=>{f(A),p(!0)},children:e==="ar"?"عرض":"View"}),s.jsx(P,{icon:s.jsx(qr,{}),onClick:()=>{f(A),g.setFieldsValue({status:A.status,scheduledAt:A.date?fe(A.date):null,price:A.price,duration:A.duration,consultantNotes:A.notes}),x(!0)},children:e==="ar"?"تعديل":"Edit"}),s.jsx(P,{danger:!0,icon:s.jsx(Vn,{}),onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذه الجلسة؟":"Are you sure you want to delete this session?")&&w(A.id)},children:e==="ar"?"حذف":"Delete"})]})}];return o&&!a?s.jsx(Mr,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:o,type:"error",showIcon:!0,action:s.jsx(P,{size:"small",onClick:y,children:e==="ar"?"إعادة المحاولة":"Retry"})}):s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الجلسات":"Sessions"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع الجلسات والحجوزات":"Manage all sessions and bookings"})]}),s.jsxs(he,{className:"flex-wrap",children:[s.jsxs(B,{value:c,onChange:d,placeholder:e==="ar"?"الحالة":"Status",style:{width:150},size:"large",children:[s.jsx(B.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(B.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),s.jsx(B.Option,{value:"CONFIRMED",children:e==="ar"?"مؤكدة":"Confirmed"}),s.jsx(B.Option,{value:"COMPLETED",children:e==="ar"?"مكتملة":"Completed"}),s.jsx(B.Option,{value:"CANCELLED",children:e==="ar"?"ملغية":"Cancelled"})]}),s.jsx(P,{icon:s.jsx(Wr,{}),onClick:y,loading:a,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx($r,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{f(null),g.resetFields(),x(!0)},children:e==="ar"?"إضافة جلسة":"Add Session"})]})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:v,dataSource:r,rowKey:"id",loading:a,pagination:{pageSize:10,showSizeChanger:!0,showTotal:C=>e==="ar"?`إجمالي ${C} جلسة`:`Total ${C} sessions`}})}),s.jsx(Ye,{title:e==="ar"?"تفاصيل الجلسة":"Session Details",open:h,onCancel:()=>{p(!1),f(null)},maskClosable:!0,keyboard:!0,footer:null,width:700,destroyOnHidden:!0,className:"modern-modal",children:u&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"العميل:":"Client:"})," ",u.client]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"المستشار:":"Consultant:"})," ",u.consultant]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"النوع:":"Type:"})," ",u.type]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"التاريخ:":"Date:"})," ",u.date]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"المبلغ:":"Amount:"})," ",u.price?`${u.price} ${e==="ar"?"ريال":"SAR"}`:"-"]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"المدة:":"Duration:"})," ",u.duration?`${u.duration} ${e==="ar"?"دقيقة":"minutes"}`:"-"]}),s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"الحالة:":"Status:"}),s.jsx(ce,{color:j(u.status),className:"ml-2",children:b(u.status)})]}),u.rating&&s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"التقييم:":"Rating:"})," ",u.rating,"/5"]})]}),u.notes&&s.jsxs("div",{children:[s.jsx("strong",{children:e==="ar"?"ملاحظات:":"Notes:"}),s.jsx("p",{className:"mt-2 text-gray-600",children:u.notes})]})]})}),s.jsx(Ye,{title:u?e==="ar"?"تعديل الجلسة":"Edit Session":e==="ar"?"إضافة جلسة جديدة":"Add New Session",open:m,onCancel:()=>{x(!1),f(null),g.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:700,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:g,layout:"vertical",onFinish:S,initialValues:u?{status:u.status,scheduledAt:u.date?fe(u.date):null,price:u.price,duration:u.duration,consultantNotes:u.notes}:{status:"PENDING"},children:[!u&&s.jsxs(s.Fragment,{children:[s.jsx(E.Item,{name:"clientId",label:e==="ar"?"العميل":"Client",rules:[{required:!0}],children:s.jsx(F,{placeholder:e==="ar"?"معرف العميل":"Client ID"})}),s.jsx(E.Item,{name:"consultantId",label:e==="ar"?"المستشار":"Consultant",rules:[{required:!0}],children:s.jsx(F,{placeholder:e==="ar"?"معرف المستشار":"Consultant ID"})}),s.jsx(E.Item,{name:"serviceId",label:e==="ar"?"الخدمة":"Service",children:s.jsx(F,{placeholder:e==="ar"?"معرف الخدمة":"Service ID"})})]}),s.jsx(E.Item,{name:"status",label:e==="ar"?"الحالة":"Status",rules:[{required:!0}],children:s.jsxs(B,{children:[s.jsx(B.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),s.jsx(B.Option,{value:"CONFIRMED",children:e==="ar"?"مؤكدة":"Confirmed"}),s.jsx(B.Option,{value:"COMPLETED",children:e==="ar"?"مكتملة":"Completed"}),s.jsx(B.Option,{value:"CANCELLED",children:e==="ar"?"ملغية":"Cancelled"}),s.jsx(B.Option,{value:"IN_PROGRESS",children:e==="ar"?"قيد التنفيذ":"In Progress"})]})}),s.jsx(E.Item,{name:"scheduledAt",label:e==="ar"?"التاريخ والوقت":"Date & Time",children:s.jsx(Ms,{showTime:!0,format:"YYYY-MM-DD HH:mm",className:"w-full"})}),s.jsx(E.Item,{name:"price",label:e==="ar"?"السعر":"Price",children:s.jsx(F,{type:"number"})}),s.jsx(E.Item,{name:"duration",label:e==="ar"?"المدة (بالدقائق)":"Duration (minutes)",children:s.jsx(F,{type:"number"})}),s.jsx(E.Item,{name:"consultantNotes",label:e==="ar"?"ملاحظات المستشار":"Consultant Notes",children:s.jsx(F.TextArea,{rows:4})}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{x(!1),f(null),g.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},zw=({invoice:t,language:e})=>{var a,i,o,l,c,d,u,f;const r=h=>({CARD:e==="ar"?"بطاقة":"Card",MADA:e==="ar"?"مدى":"Mada",BANK_TRANSFER:e==="ar"?"تحويل بنكي":"Bank Transfer",APPLE_PAY:"Apple Pay",GOOGLE_PAY:"Google Pay"})[h]||h,n=h=>({COMPLETED:e==="ar"?"مكتمل":"Completed",PENDING:e==="ar"?"قيد الانتظار":"Pending",FAILED:e==="ar"?"فشل":"Failed"})[h]||h;return s.jsxs("div",{id:"invoice-content",style:{width:"210mm",minHeight:"297mm",margin:"0 auto",padding:"20mm",backgroundColor:"#fff",fontFamily:"Arial, sans-serif",direction:e==="ar"?"rtl":"ltr"},children:[s.jsx("div",{style:{borderBottom:"3px solid #7a8c66",paddingBottom:"20px",marginBottom:"30px"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("h1",{style:{margin:0,fontSize:"32px",fontWeight:"bold",color:"#7a8c66",background:"linear-gradient(135deg, #7a8c66 0%, #14b8a6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:e==="ar"?"جدوى":"Jadwa"}),s.jsx("p",{style:{margin:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"منصة الاستشارات الإدارية والاقتصادية":"Administrative and Economic Consulting Platform"})]}),s.jsxs("div",{style:{textAlign:e==="ar"?"left":"right"},children:[s.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:"bold",color:"#333"},children:e==="ar"?"فاتورة":"INVOICE"}),s.jsx("p",{style:{margin:"5px 0",color:"#666",fontSize:"12px"},children:e==="ar"?"رقم الفاتورة":"Invoice Number"})]})]})}),s.jsx("div",{style:{marginBottom:"30px"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px",color:"#333"},children:e==="ar"?"معلومات الفاتورة":"Invoice Information"}),s.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"رقم الفاتورة:":"Invoice Number:"}),s.jsx("td",{style:{padding:"5px 0",fontWeight:"bold",fontSize:"14px"},children:t.invoiceNumber})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"تاريخ الإصدار:":"Issue Date:"}),s.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:fe(t.date).format("YYYY-MM-DD")})]}),t.paidAt&&s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"تاريخ الدفع:":"Paid Date:"}),s.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:fe(t.paidAt).format("YYYY-MM-DD")})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"رقم المعاملة:":"Transaction ID:"}),s.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:t.transactionId||"N/A"})]})]})})]}),s.jsxs("div",{style:{flex:1,textAlign:e==="ar"?"right":"left"},children:[s.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px",color:"#333"},children:e==="ar"?"معلومات العميل":"Client Information"}),s.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"الاسم:":"Name:"}),s.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:((a=t.client)==null?void 0:a.name)||(e==="ar"?"غير محدد":"N/A")})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"البريد الإلكتروني:":"Email:"}),s.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:((i=t.client)==null?void 0:i.email)||(e==="ar"?"غير محدد":"N/A")})]}),((o=t.client)==null?void 0:o.phone)&&s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"الهاتف:":"Phone:"}),s.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:t.client.phone})]})]})})]})]})}),s.jsxs("div",{style:{marginBottom:"30px"},children:[s.jsx("h3",{style:{margin:"0 0 15px 0",fontSize:"16px",color:"#333"},children:e==="ar"?"تفاصيل الخدمة":"Service Details"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[s.jsx("th",{style:{padding:"12px",textAlign:e==="ar"?"right":"left",borderBottom:"2px solid #7a8c66",fontSize:"14px",fontWeight:"bold"},children:e==="ar"?"الخدمة":"Service"}),s.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #7a8c66",fontSize:"14px",fontWeight:"bold"},children:e==="ar"?"المستشار":"Consultant"}),s.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #7a8c66",fontSize:"14px",fontWeight:"bold"},children:e==="ar"?"طريقة الدفع":"Payment Method"}),s.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #7a8c66",fontSize:"14px",fontWeight:"bold"},children:e==="ar"?"المبلغ":"Amount"})]})}),s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #eee",fontSize:"14px"},children:((l=t.service)==null?void 0:l.title)||(e==="ar"?(c=t.service)==null?void 0:c.titleAr:null)||(e==="ar"?"غير محدد":"N/A")}),s.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #eee",textAlign:"center",fontSize:"14px"},children:((d=t.consultant)==null?void 0:d.name)||(e==="ar"?"غير محدد":"N/A")}),s.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #eee",textAlign:"center",fontSize:"14px"},children:r(t.method)}),s.jsxs("td",{style:{padding:"12px",borderBottom:"1px solid #eee",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:[typeof t.amount=="string"?parseFloat(t.amount).toFixed(2):((u=t.amount)==null?void 0:u.toFixed(2))||"0.00"," ",t.currency||"SAR"]})]})})]})]}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"30px",marginBottom:"30px"},children:s.jsx("div",{style:{width:"300px"},children:s.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"10px",textAlign:e==="ar"?"right":"left",fontSize:"16px",fontWeight:"bold",borderTop:"2px solid #7a8c66",borderBottom:"2px solid #7a8c66"},children:e==="ar"?"الإجمالي:":"Total:"}),s.jsxs("td",{style:{padding:"10px",textAlign:"center",fontSize:"18px",fontWeight:"bold",color:"#7a8c66",borderTop:"2px solid #7a8c66",borderBottom:"2px solid #7a8c66"},children:[typeof t.amount=="string"?parseFloat(t.amount).toFixed(2):((f=t.amount)==null?void 0:f.toFixed(2))||"0.00"," ",t.currency||"SAR"]})]})})})})}),s.jsx("div",{style:{marginTop:"40px",padding:"20px",backgroundColor:"#f9f9f9",borderRadius:"8px"},children:s.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#666"},children:[e==="ar"?"حالة الدفع:":"Payment Status:"," ",s.jsx("span",{style:{fontWeight:"bold",color:"#7a8c66"},children:n(t.status)})]})}),s.jsxs("div",{style:{marginTop:"50px",paddingTop:"20px",borderTop:"1px solid #ddd",textAlign:"center",color:"#999",fontSize:"12px"},children:[s.jsx("p",{style:{margin:"5px 0"},children:e==="ar"?"شكراً لاستخدامك منصة جدوى للاستشارات":"Thank you for using Jadwa Consulting Platform"}),s.jsx("p",{style:{margin:"5px 0"},children:e==="ar"?"للاستفسارات: info@jadwa.sa | الهاتف: 9200 00000":"For inquiries: info@jadwa.sa | Phone: 9200 00000"})]})]})},{RangePicker:jne}=Ms,wne=()=>{const{t,language:e}=Se(),[r,n]=N.useState([]),[a,i]=N.useState([]),[o,l]=N.useState(!0),[c,d]=N.useState(null),[u,f]=N.useState("all"),[h,p]=N.useState("all"),[m,x]=N.useState(null),[g,y]=N.useState(""),[j,b]=N.useState(!1),[S]=E.useForm(),[w,v]=N.useState(!1),[C,A]=N.useState(null),[k,O]=N.useState({total:0,completed:0,pending:0,failed:0});N.useEffect(()=>{M()},[u]);const $=H=>{let Q=[...H];if(u!=="all"&&(Q=Q.filter(de=>de.status===u)),h!=="all"&&(Q=Q.filter(de=>de.method===h)),m&&m.length===2){const de=fe(m[0]).startOf("day"),ie=fe(m[1]).endOf("day");Q=Q.filter(Re=>{const Ae=fe(Re.date);return Ae.isAfter(de)&&Ae.isBefore(ie)})}g&&(Q=Q.filter(de=>de.client.toLowerCase().includes(g.toLowerCase()))),n(Q)};N.useEffect(()=>{a.length>0&&$(a)},[u,h,m,g]);const M=async()=>{try{l(!0),d(null);const H={};u!=="all"&&(H.status=u);const de=((await Ke.getPayments(H)).payments||[]).map(X=>{var Qe,L,oe;const ye=typeof X.amount=="string"||X.amount?parseFloat(X.amount):0;let Ne=e==="ar"?"غير متوفر":"N/A";(Qe=X.booking)!=null&&Qe.client&&(Ne=`${X.booking.client.firstName||""} ${X.booking.client.lastName||""}`.trim()||Ne);let ee=e==="ar"?"غير متوفر":"N/A";return(L=X.booking)!=null&&L.consultant&&(ee=`${X.booking.consultant.firstName||""} ${X.booking.consultant.lastName||""}`.trim()||ee),{id:X.id,invoiceNumber:X.invoiceNumber,client:Ne,consultant:ee,amount:isNaN(ye)?0:ye,date:X.createdAt?fe(X.createdAt).format("YYYY-MM-DD HH:mm"):"-",paidAt:X.paidAt?fe(X.paidAt).format("YYYY-MM-DD HH:mm"):null,status:X.status,method:X.method,transactionId:X.transactionId,currency:X.currency||"SAR",service:(oe=X.booking)!=null&&oe.service?e==="ar"&&X.booking.service.titleAr||X.booking.service.title:"-"}}),ie=de.reduce((X,ye)=>{const Ne=typeof ye.amount=="string"?parseFloat(ye.amount):ye.amount||0;return X+(isNaN(Ne)?0:Ne)},0),Re=de.filter(X=>X.status==="COMPLETED").reduce((X,ye)=>{const Ne=typeof ye.amount=="string"?parseFloat(ye.amount):ye.amount||0;return X+(isNaN(Ne)?0:Ne)},0),Ae=de.filter(X=>X.status==="PENDING").length,je=de.filter(X=>X.status==="FAILED").length;O({total:Number(ie.toFixed(2)),completed:Number(Re.toFixed(2)),pending:Ae,failed:je}),i(de),$(de)}catch(H){console.error("Error fetching payments:",H),d(H.message||"Failed to load payments"),R.error(e==="ar"?"فشل تحميل المدفوعات":"Failed to load payments")}finally{l(!1)}},T=H=>({COMPLETED:"green",PENDING:"orange",FAILED:"red",REFUNDED:"purple"})[H]||"default",I=H=>({COMPLETED:e==="ar"?"مكتمل":"Completed",PENDING:e==="ar"?"قيد الانتظار":"Pending",FAILED:e==="ar"?"فشل":"Failed",REFUNDED:e==="ar"?"مسترد":"Refunded"})[H]||H,z=H=>({CARD:e==="ar"?"بطاقة":"Card",MADA:e==="ar"?"مدى":"Mada",BANK_TRANSFER:e==="ar"?"تحويل بنكي":"Bank Transfer",APPLE_PAY:"Apple Pay",GOOGLE_PAY:"Google Pay"})[H]||H,U=async()=>{try{const H={};u!=="all"&&(H.status=u),h!=="all"&&(H.method=h);const Q=localStorage.getItem("accessToken")||"",de=`http://localhost:5000/api/admin/payments/export/csv?${new URLSearchParams(H).toString()}`,ie=await fetch(de,{headers:{Authorization:`Bearer ${Q}`}});if(!ie.ok)throw new Error("Failed to download CSV");const Re=await ie.blob(),Ae=window.URL.createObjectURL(Re),je=document.createElement("a");je.href=Ae,je.download=`payments-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(je),je.click(),document.body.removeChild(je),window.URL.revokeObjectURL(Ae),R.success(e==="ar"?"تم تصدير ملف CSV بنجاح":"CSV exported successfully")}catch(H){console.error("Export CSV error:",H),R.error(e==="ar"?"فشل تصدير CSV":"Failed to export CSV")}},Y=()=>{try{const Q=[[e==="ar"?"رقم الفاتورة":"Invoice #",e==="ar"?"العميل":"Client",e==="ar"?"المستشار":"Consultant",e==="ar"?"المبلغ":"Amount",e==="ar"?"طريقة الدفع":"Payment Method",e==="ar"?"التاريخ":"Date",e==="ar"?"الحالة":"Status"].join(","),...r.map(je=>[je.invoiceNumber||"",`"${je.client}"`,`"${je.consultant}"`,je.amount,je.method,je.date,je.status].join(","))].join(`
`),de="\uFEFF",ie=new Blob([de+Q],{type:"text/csv;charset=utf-8;"}),Re=window.URL.createObjectURL(ie),Ae=document.createElement("a");Ae.href=Re,Ae.download=`payments-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),window.URL.revokeObjectURL(Re),R.success(e==="ar"?"تم تصدير ملف Excel بنجاح":"Excel exported successfully")}catch(H){console.error("Export Excel error:",H),R.error(e==="ar"?"فشل تصدير Excel":"Failed to export Excel")}},Z=()=>{R.info(e==="ar"?"ميزة تصدير PDF قيد التطوير":"PDF export feature is under development")},te=H=>{f(H.status||"all"),p(H.method||"all"),x(H.dateRange||null),y(H.client||""),b(!1)},q=()=>{f("all"),p("all"),x(null),y(""),S.resetFields()},ne=[{title:e==="ar"?"رقم الفاتورة":"Invoice #",dataIndex:"invoiceNumber",key:"invoiceNumber"},{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client",sorter:(H,Q)=>H.client.localeCompare(Q.client)},{title:e==="ar"?"المستشار":"Consultant",dataIndex:"consultant",key:"consultant"},{title:e==="ar"?"الخدمة":"Service",dataIndex:"service",key:"service"},{title:e==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:(H,Q)=>{const de=typeof H=="string"?parseFloat(H):H||0;return`${isNaN(de)?0:de.toFixed(2)} ${Q.currency||"SAR"}`},sorter:(H,Q)=>{const de=typeof H.amount=="string"?parseFloat(H.amount):H.amount||0,ie=typeof Q.amount=="string"?parseFloat(Q.amount):Q.amount||0;return(isNaN(de)?0:de)-(isNaN(ie)?0:ie)}},{title:e==="ar"?"طريقة الدفع":"Payment Method",dataIndex:"method",key:"method",render:H=>z(H)},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date",sorter:(H,Q)=>new Date(H.date)-new Date(Q.date)},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:H=>s.jsx(ce,{color:T(H),children:I(H)}),filters:[{text:e==="ar"?"مكتمل":"Completed",value:"COMPLETED"},{text:e==="ar"?"قيد الانتظار":"Pending",value:"PENDING"},{text:e==="ar"?"فشل":"Failed",value:"FAILED"}],onFilter:(H,Q)=>Q.status===H},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(H,Q)=>s.jsx(P,{icon:s.jsx(zr,{}),onClick:async()=>{try{const de=localStorage.getItem("accessToken")||"",ie=`http://localhost:5000/api/admin/payments/${Q.id}/invoice`,Ae=await(await fetch(ie,{headers:{Authorization:`Bearer ${de}`}})).json();Ae.success&&Ae.invoice?(A(Ae.invoice),v(!0)):R.error(e==="ar"?"فشل تحميل بيانات الفاتورة":"Failed to load invoice data")}catch{R.error(e==="ar"?"فشل تحميل الفاتورة":"Failed to download invoice")}},disabled:Q.status!=="COMPLETED",children:e==="ar"?"فاتورة":"Invoice"})}];return c&&!o?s.jsx(Mr,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:c,type:"error",showIcon:!0,action:s.jsx(P,{size:"small",onClick:M,children:e==="ar"?"إعادة المحاولة":"Retry"})}):s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"المدفوعات":"Payments"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع المعاملات المالية":"Manage all financial transactions"})]}),s.jsxs(he,{className:"flex-wrap",children:[s.jsx(P,{icon:s.jsx(EE,{}),onClick:()=>b(!0),children:e==="ar"?"فلترة متقدمة":"Advanced Filter"}),s.jsxs(B,{value:u,onChange:f,style:{width:150},children:[s.jsx(B.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(B.Option,{value:"COMPLETED",children:e==="ar"?"مكتمل":"Completed"}),s.jsx(B.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),s.jsx(B.Option,{value:"FAILED",children:e==="ar"?"فشل":"Failed"})]}),s.jsx(P,{icon:s.jsx(Wr,{}),onClick:M,loading:o,children:e==="ar"?"تحديث":"Refresh"}),s.jsxs(he.Compact,{children:[s.jsx(P,{icon:s.jsx(jE,{}),onClick:Y,children:"Excel"}),s.jsx(P,{icon:s.jsx(zr,{}),onClick:U,children:"CSV"}),s.jsx(P,{icon:s.jsx(ku,{}),onClick:Z,children:"PDF"})]})]})]}),s.jsxs(le,{gutter:[16,16],className:"mb-6",children:[s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Fe,{title:e==="ar"?"إجمالي المدفوعات":"Total Payments",value:Number(k.total).toFixed(2),prefix:s.jsx(ir,{}),suffix:"SAR",valueStyle:{color:"#7a8c66"}})})}),s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Fe,{title:e==="ar"?"المكتملة":"Completed",value:Number(k.completed).toFixed(2),prefix:s.jsx(ir,{}),suffix:"SAR",valueStyle:{color:"#52c41a"}})})}),s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Fe,{title:e==="ar"?"قيد الانتظار":"Pending",value:k.pending,valueStyle:{color:"#faad14"}})})}),s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Fe,{title:e==="ar"?"فاشلة":"Failed",value:k.failed,valueStyle:{color:"#ff4d4f"}})})})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:ne,dataSource:r,rowKey:"id",loading:o,pagination:{pageSize:10,showSizeChanger:!0,showTotal:H=>e==="ar"?`إجمالي ${H} دفعة`:`Total ${H} payments`}})}),s.jsx(Ye,{title:e==="ar"?"فلترة متقدمة":"Advanced Filter",open:j,onCancel:()=>b(!1),footer:null,width:600,children:s.jsxs(E,{form:S,layout:"vertical",onFinish:te,initialValues:{status:u,method:h,dateRange:m,client:g},children:[s.jsx(E.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:s.jsxs(B,{placeholder:e==="ar"?"اختر الحالة":"Select status",children:[s.jsx(B.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(B.Option,{value:"COMPLETED",children:e==="ar"?"مكتمل":"Completed"}),s.jsx(B.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),s.jsx(B.Option,{value:"FAILED",children:e==="ar"?"فشل":"Failed"})]})}),s.jsx(E.Item,{name:"method",label:e==="ar"?"طريقة الدفع":"Payment Method",children:s.jsxs(B,{placeholder:e==="ar"?"اختر طريقة الدفع":"Select payment method",children:[s.jsx(B.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(B.Option,{value:"CARD",children:e==="ar"?"بطاقة":"Card"}),s.jsx(B.Option,{value:"MADA",children:e==="ar"?"مدى":"Mada"}),s.jsx(B.Option,{value:"BANK_TRANSFER",children:e==="ar"?"تحويل بنكي":"Bank Transfer"})]})}),s.jsx(E.Item,{name:"dateRange",label:e==="ar"?"نطاق التاريخ":"Date Range",children:s.jsx(jne,{style:{width:"100%"}})}),s.jsx(E.Item,{name:"client",label:e==="ar"?"اسم العميل":"Client Name",children:s.jsx(F,{placeholder:e==="ar"?"ابحث عن عميل":"Search client",allowClear:!0})}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",htmlType:"submit",children:e==="ar"?"تطبيق":"Apply"}),s.jsx(P,{onClick:q,children:e==="ar"?"إعادة تعيين":"Reset"}),s.jsx(P,{onClick:()=>b(!1),children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),s.jsxs(Ye,{title:e==="ar"?"فاتورة":"Invoice",open:w,onCancel:()=>{v(!1),A(null)},footer:[s.jsx(P,{onClick:()=>{v(!1),A(null)},children:e==="ar"?"إغلاق":"Close"},"close"),s.jsx(P,{type:"primary",icon:s.jsx(ku,{}),onClick:()=>{var Q;if(!C)return;const H=window.open("","_blank");if(!H){R.error(e==="ar"?"يرجى السماح بالنوافذ المنبثقة لتحميل الفاتورة":"Please allow popups to download invoice");return}H.document.write(`
                <!DOCTYPE html>
                <html>
                  <head>
                    <title>Invoice ${C.invoiceNumber}</title>
                    <style>
                      @media print {
                        @page {
                          size: A4;
                          margin: 0;
                        }
                        body {
                          margin: 0;
                          padding: 0;
                        }
                      }
                    </style>
                  </head>
                  <body>
                    ${((Q=document.getElementById("invoice-print-content"))==null?void 0:Q.innerHTML)||""}
                  </body>
                </html>
              `),H.document.close(),setTimeout(()=>{H.print(),R.success(e==="ar"?"جاري تحميل الفاتورة...":"Downloading invoice...")},250)},className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"تحميل PDF":"Download PDF"},"download")],width:900,style:{top:20},children:[s.jsx("div",{id:"invoice-print-content",style:{display:"none"},children:C&&s.jsx(zw,{invoice:C,language:e})}),s.jsx("div",{style:{maxHeight:"70vh",overflow:"auto"},children:C&&s.jsx(zw,{invoice:C,language:e})})]})]})},{TextArea:Qi}=F,Sne=()=>{const{t,language:e}=Se(),[r,n]=N.useState([]),[a,i]=N.useState([]),[o,l]=N.useState({pages:!1,articles:!1}),[c,d]=N.useState(null),[u,f]=N.useState(!1),[h,p]=N.useState(!1),[m,x]=N.useState(null),[g]=E.useForm(),[y]=E.useForm();N.useEffect(()=>{j(),b()},[]);const j=async()=>{try{l(I=>({...I,pages:!0})),d(null);const T=(await Wl.getPages({isPublished:!1})).pages.map(I=>({id:I.id,title:e==="ar"&&I.titleAr||I.title,slug:I.slug,status:I.isPublished?"published":"draft",isPublished:I.isPublished,order:I.order}));n(T)}catch(M){console.error("Error fetching pages:",M),d(M.message||"Failed to load pages"),R.error(e==="ar"?"فشل تحميل الصفحات":"Failed to load pages")}finally{l(M=>({...M,pages:!1}))}},b=async()=>{try{l(I=>({...I,articles:!0})),d(null);const T=(await pr.getArticles({status:"all"})).articles.map(I=>({id:I.id,title:e==="ar"&&I.titleAr||I.title,date:I.publishedAt?fe(I.publishedAt).format("YYYY-MM-DD"):fe(I.createdAt).format("YYYY-MM-DD"),status:I.status,views:I.views||0,category:I.category}));i(T)}catch(M){console.error("Error fetching articles:",M),d(M.message||"Failed to load articles"),R.error(e==="ar"?"فشل تحميل المقالات":"Failed to load articles")}finally{l(M=>({...M,articles:!1}))}},S=async M=>{try{m?(await Wl.updatePage(m.id,M),R.success(e==="ar"?"تم تحديث الصفحة بنجاح":"Page updated successfully")):(await Wl.createPage(M),R.success(e==="ar"?"تم إنشاء الصفحة بنجاح":"Page created successfully")),f(!1),x(null),g.resetFields(),j()}catch(T){R.error(T.message||(e==="ar"?"فشل حفظ الصفحة":"Failed to save page"))}},w=async M=>{try{M.tags&&typeof M.tags=="string"&&(M.tags=M.tags.split(",").map(T=>T.trim()).filter(Boolean)),m?(await pr.updateArticle(m.id,M),R.success(e==="ar"?"تم تحديث المقال بنجاح":"Article updated successfully")):(await pr.createArticle(M),R.success(e==="ar"?"تم إنشاء المقال بنجاح":"Article created successfully")),p(!1),x(null),y.resetFields(),b()}catch(T){R.error(T.message||(e==="ar"?"فشل حفظ المقال":"Failed to save article"))}},v=async M=>{try{await pr.publishArticle(M),R.success(e==="ar"?"تم نشر المقال بنجاح":"Article published successfully"),b()}catch(T){R.error(T.message||(e==="ar"?"فشل نشر المقال":"Failed to publish article"))}},C=async M=>{try{await Wl.deletePage(M),R.success(e==="ar"?"تم حذف الصفحة بنجاح":"Page deleted successfully"),j()}catch(T){R.error(T.message||(e==="ar"?"فشل حذف الصفحة":"Failed to delete page"))}},A=async M=>{try{await pr.deleteArticle(M),R.success(e==="ar"?"تم حذف المقال بنجاح":"Article deleted successfully"),b()}catch(T){R.error(T.message||(e==="ar"?"فشل حذف المقال":"Failed to delete article"))}},k=[{title:e==="ar"?"العنوان":"Title",dataIndex:"title",key:"title",sorter:(M,T)=>M.title.localeCompare(T.title)},{title:e==="ar"?"الرابط":"Slug",dataIndex:"slug",key:"slug"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:M=>s.jsx(ce,{color:M==="published"?"green":"orange",children:M==="published"?e==="ar"?"منشور":"Published":e==="ar"?"مسودة":"Draft"}),filters:[{text:e==="ar"?"منشور":"Published",value:"published"},{text:e==="ar"?"مسودة":"Draft",value:"draft"}],onFilter:(M,T)=>T.status===M},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(M,T)=>s.jsxs(he,{children:[s.jsx(P,{icon:s.jsx(qr,{}),onClick:()=>{x(T),f(!0)},children:e==="ar"?"تعديل":"Edit"}),s.jsx(P,{danger:!0,icon:s.jsx(Vn,{}),onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذه الصفحة؟":"Are you sure you want to delete this page?")&&C(T.id)},children:e==="ar"?"حذف":"Delete"})]})}],O=[{title:e==="ar"?"العنوان":"Title",dataIndex:"title",key:"title",sorter:(M,T)=>M.title.localeCompare(T.title)},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date",sorter:(M,T)=>new Date(M.date)-new Date(T.date)},{title:e==="ar"?"الفئة":"Category",dataIndex:"category",key:"category"},{title:e==="ar"?"المشاهدات":"Views",dataIndex:"views",key:"views",sorter:(M,T)=>M.views-T.views},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:M=>{const T={PUBLISHED:"green",DRAFT:"orange",ARCHIVED:"gray"},I={PUBLISHED:e==="ar"?"منشور":"Published",DRAFT:e==="ar"?"مسودة":"Draft",ARCHIVED:e==="ar"?"مؤرشف":"Archived"};return s.jsx(ce,{color:T[M],children:I[M]})}},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(M,T)=>s.jsxs(he,{children:[T.status!=="PUBLISHED"&&s.jsx(P,{type:"primary",icon:s.jsx(vt,{}),className:"bg-green-600",onClick:()=>v(T.id),children:e==="ar"?"نشر":"Publish"}),s.jsx(P,{icon:s.jsx(qr,{}),onClick:()=>{x(T),p(!0)},children:e==="ar"?"تعديل":"Edit"}),s.jsx(P,{danger:!0,icon:s.jsx(Vn,{}),onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذا المقال؟":"Are you sure you want to delete this article?")&&A(T.id)},children:e==="ar"?"حذف":"Delete"})]})}],$=[{key:"pages",label:e==="ar"?"الصفحات":"Pages",children:s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[s.jsx(P,{icon:s.jsx(Wr,{}),onClick:j,loading:o.pages,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx($r,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{x(null),g.resetFields(),f(!0)},children:e==="ar"?"إضافة صفحة":"Add Page"})]}),s.jsx(rt,{columns:k,dataSource:r,rowKey:"id",loading:o.pages,pagination:{pageSize:10}})]})},{key:"blog",label:e==="ar"?"المدونة":"Blog",children:s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[s.jsx(P,{icon:s.jsx(Wr,{}),onClick:b,loading:o.articles,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx($r,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{x(null),y.resetFields(),p(!0)},children:e==="ar"?"إضافة مقال":"Add Post"})]}),s.jsx(rt,{columns:O,dataSource:a,rowKey:"id",loading:o.articles,pagination:{pageSize:10}})]})}];return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:"CMS"}),s.jsx("p",{className:"text-gray-500",children:e==="ar"?"إدارة المحتوى والصفحات والمقالات":"Manage content, pages, and articles"})]}),c&&s.jsx(Mr,{message:e==="ar"?"خطأ":"Error",description:c,type:"error",closable:!0,onClose:()=>d(null),className:"mb-4"}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx($s,{items:$})}),s.jsx(Ye,{title:m?e==="ar"?"تعديل الصفحة":"Edit Page":e==="ar"?"إضافة صفحة":"Add Page",open:u,onCancel:()=>{f(!1),x(null),g.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:800,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:g,layout:"vertical",onFinish:S,initialValues:m||{isPublished:!1,order:0},children:[s.jsx(E.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:s.jsx(F,{})}),s.jsx(E.Item,{name:"slug",label:"Slug",rules:[{required:!0}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"content",label:e==="ar"?"المحتوى (إنجليزي)":"Content (English)",children:s.jsx(Qi,{rows:6})}),s.jsx(E.Item,{name:"contentAr",label:e==="ar"?"المحتوى (عربي)":"Content (Arabic)",children:s.jsx(Qi,{rows:6})}),s.jsx(E.Item,{name:"order",label:e==="ar"?"الترتيب":"Order",children:s.jsx(Fa,{min:0})}),s.jsx(E.Item,{name:"isPublished",valuePropName:"checked",children:s.jsx(Zn,{checkedChildren:e==="ar"?"منشور":"Published",unCheckedChildren:e==="ar"?"مسودة":"Draft"})}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{f(!1),x(null),g.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),s.jsx(Ye,{title:m?e==="ar"?"تعديل المقال":"Edit Article":e==="ar"?"إضافة مقال":"Add Article",open:h,onCancel:()=>{p(!1),x(null),y.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:800,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:y,layout:"vertical",onFinish:w,initialValues:m?{...m,tags:m.tags?typeof m.tags=="string"?JSON.parse(m.tags).join(", "):m.tags.join(", "):""}:{status:"DRAFT"},children:[s.jsx(E.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0}],children:s.jsx(F,{})}),s.jsx(E.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:s.jsx(F,{})}),s.jsx(E.Item,{name:"content",label:e==="ar"?"المحتوى (إنجليزي)":"Content (English)",children:s.jsx(Qi,{rows:8})}),s.jsx(E.Item,{name:"contentAr",label:e==="ar"?"المحتوى (عربي)":"Content (Arabic)",children:s.jsx(Qi,{rows:8})}),s.jsx(E.Item,{name:"excerpt",label:e==="ar"?"الملخص (إنجليزي)":"Excerpt (English)",children:s.jsx(Qi,{rows:3})}),s.jsx(E.Item,{name:"excerptAr",label:e==="ar"?"الملخص (عربي)":"Excerpt (Arabic)",children:s.jsx(Qi,{rows:3})}),s.jsx(E.Item,{name:"category",label:e==="ar"?"الفئة":"Category",children:s.jsx(F,{placeholder:e==="ar"?"الفئة":"Category"})}),s.jsx(E.Item,{name:"featuredImage",label:e==="ar"?"صورة مميزة":"Featured Image",children:s.jsx(F,{placeholder:e==="ar"?"رابط الصورة":"Image URL"})}),s.jsx(E.Item,{name:"tags",label:e==="ar"?"العلامات":"Tags",children:s.jsx(F,{placeholder:e==="ar"?"علامات مفصولة بفواصل":"Tags separated by commas"})}),s.jsx(E.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:s.jsxs(B,{children:[s.jsx(B.Option,{value:"DRAFT",children:e==="ar"?"مسودة":"Draft"}),s.jsx(B.Option,{value:"PUBLISHED",children:e==="ar"?"منشور":"Published"})]})}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{p(!1),x(null),y.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{TextArea:ru}=F,{RangePicker:xue}=Ms,Nne=()=>{const{t,language:e}=Se(),r=st(),n=dl(),[a,i]=N.useState([]),[o,l]=N.useState(!1),[c,d]=N.useState(null),[u,f]=N.useState(""),[h,p]=N.useState("all"),[m,x]=N.useState("all"),[g,y]=N.useState(!1),[j,b]=N.useState(!1),[S,w]=N.useState(null),[v,C]=N.useState(null),[A]=E.useForm(),[k,O]=N.useState({total:0,published:0,draft:0,views:0});N.useEffect(()=>{$()},[u,h,m]),N.useEffect(()=>{n.pathname==="/admin/articles"&&$()},[n.pathname]),N.useEffect(()=>{M()},[a]);const $=async()=>{try{l(!0),d(null);const q={};h&&h!=="all"&&(q.status=h),u&&(q.search=u),m&&m!=="all"&&(q.category=m);const ne=await pr.getArticles(q),H="http://localhost:5000/api".replace("/api","")||"http://localhost:5000",Q=ne.articles.map(de=>{var Re;let ie=de.featuredImage;return ie&&(/^https?:\/\//.test(ie)?(ie.includes(`${H}${H}`)||((Re=ie.match(/http:\/\/localhost:5000/g))==null?void 0:Re.length)>1)&&(ie=ie.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),ie=`http://localhost:5000/${ie}`):ie=ie.startsWith("/")?`${H}${ie}`:`${H}/${ie}`),{...de,key:de.id,title:e==="ar"&&de.titleAr||de.title,date:de.publishedAt?fe(de.publishedAt).format("YYYY-MM-DD"):fe(de.createdAt).format("YYYY-MM-DD"),featuredImage:ie}});i(Q)}catch(q){console.error("Error fetching articles:",q),d(q.message||"Failed to load articles"),R.error(e==="ar"?"فشل تحميل المقالات":"Failed to load articles")}finally{l(!1)}},M=()=>{const q=a.length,ne=a.filter(de=>de.status==="PUBLISHED").length,H=a.filter(de=>de.status==="DRAFT").length,Q=a.reduce((de,ie)=>de+(ie.views||0),0);O({total:q,published:ne,draft:H,views:Q})},T=async q=>{try{q.tags&&typeof q.tags=="string"&&(q.tags=q.tags.split(",").map(ne=>ne.trim()).filter(Boolean)),S?(await pr.updateArticle(S.id,q),R.success(e==="ar"?"تم تحديث المقال بنجاح":"Article updated successfully")):(await pr.createArticle(q),R.success(e==="ar"?"تم إنشاء المقال بنجاح":"Article created successfully")),y(!1),w(null),A.resetFields(),$()}catch(ne){R.error(ne.message||(e==="ar"?"فشل حفظ المقال":"Failed to save article"))}},I=async q=>{try{await pr.publishArticle(q),R.success(e==="ar"?"تم نشر المقال بنجاح":"Article published successfully"),$()}catch(ne){R.error(ne.message||(e==="ar"?"فشل نشر المقال":"Failed to publish article"))}},z=async q=>{try{await pr.deleteArticle(q),R.success(e==="ar"?"تم حذف المقال بنجاح":"Article deleted successfully"),$()}catch(ne){R.error(ne.message||(e==="ar"?"فشل حذف المقال":"Failed to delete article"))}},U=q=>{C(q),b(!0)},Y=[...new Set(a.map(q=>q.category).filter(Boolean))],Z=[{title:e==="ar"?"المقال":"Article",key:"article",width:300,render:(q,ne)=>s.jsxs("div",{className:"flex items-center gap-3",children:[ne.featuredImage?s.jsx(Hn,{src:ne.featuredImage,alt:ne.title,width:60,height:60,className:"rounded-lg object-cover",preview:!1}):s.jsx("div",{className:"w-15 h-15 bg-gradient-to-br from-olive-green-400 to-turquoise-400 rounded-lg flex items-center justify-center",children:s.jsx(xc,{className:"text-white text-xl"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-gray-900 truncate",children:ne.title}),ne.category&&s.jsx(ce,{color:"blue",className:"mt-1",children:ne.category})]})]})},{title:e==="ar"?"المؤلف":"Author",dataIndex:["author","email"],key:"author",render:q=>q||"-"},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date",sorter:(q,ne)=>new Date(q.date)-new Date(ne.date)},{title:e==="ar"?"المشاهدات":"Views",dataIndex:"views",key:"views",sorter:(q,ne)=>(q.views||0)-(ne.views||0),render:q=>s.jsx(Ga,{count:q||0,showZero:!0,style:{backgroundColor:"#52c41a"}})},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:q=>{const ne={PUBLISHED:"green",DRAFT:"orange",ARCHIVED:"gray"},H={PUBLISHED:e==="ar"?"منشور":"Published",DRAFT:e==="ar"?"مسودة":"Draft",ARCHIVED:e==="ar"?"مؤرشف":"Archived"};return s.jsx(ce,{color:ne[q],children:H[q]})},filters:[{text:e==="ar"?"منشور":"Published",value:"PUBLISHED"},{text:e==="ar"?"مسودة":"Draft",value:"DRAFT"},{text:e==="ar"?"مؤرشف":"Archived",value:"ARCHIVED"}],onFilter:(q,ne)=>ne.status===q},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",fixed:"right",width:200,render:(q,ne)=>s.jsxs(he,{size:"small",children:[s.jsx(ea,{title:e==="ar"?"معاينة":"Preview",children:s.jsx(P,{icon:s.jsx(mr,{}),size:"small",onClick:()=>U(ne)})}),s.jsx(ea,{title:e==="ar"?"تعديل":"Edit",children:s.jsx(P,{icon:s.jsx(qr,{}),size:"small",onClick:()=>r(`/admin/articles/edit/${ne.id}`)})}),ne.status!=="PUBLISHED"&&s.jsx(ea,{title:e==="ar"?"نشر":"Publish",children:s.jsx(Os,{title:e==="ar"?"هل أنت متأكد من نشر هذا المقال؟":"Are you sure to publish this article?",onConfirm:()=>I(ne.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:s.jsx(P,{type:"primary",icon:s.jsx(vt,{}),size:"small",className:"bg-green-600"})})}),s.jsx(ea,{title:e==="ar"?"حذف":"Delete",children:s.jsx(Os,{title:e==="ar"?"هل أنت متأكد من حذف هذا المقال؟":"Are you sure to delete this article?",onConfirm:()=>z(ne.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:s.jsx(P,{danger:!0,icon:s.jsx(Vn,{}),size:"small"})})})]})}],te=q=>e==="ar"?`إجمالي ${q} مقال`:`Total ${q} articles`;return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"المقالات":"Articles"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع المقالات والمدونة":"Manage all articles and blog posts"})]}),s.jsxs(he,{className:"flex-wrap",children:[s.jsx(P,{icon:s.jsx(Wr,{}),onClick:$,loading:o,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{icon:s.jsx(fE,{}),children:e==="ar"?"تصدير":"Export"}),s.jsx(P,{type:"primary",icon:s.jsx($r,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-lg",size:"large",onClick:()=>r("/admin/articles/new"),children:e==="ar"?"إضافة مقال جديد":"Add New Article"})]})]}),s.jsxs(le,{gutter:[16,16],className:"mb-6",children:[s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"إجمالي المقالات":"Total Articles",value:k.total,prefix:s.jsx(xc,{className:"text-olive-green-600"}),valueStyle:{color:"#7a8c66"}})})}),s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"منشورة":"Published",value:k.published,prefix:s.jsx(vt,{className:"text-green-600"}),valueStyle:{color:"#52c41a"}})})}),s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"مسودات":"Drafts",value:k.draft,prefix:s.jsx(NE,{className:"text-orange-600"}),valueStyle:{color:"#faad14"}})})}),s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"إجمالي المشاهدات":"Total Views",value:k.views,prefix:s.jsx(mr,{className:"text-blue-600"}),valueStyle:{color:"#1890ff"}})})})]}),s.jsx(V,{className:"glass-card shadow-professional-lg rounded-xl border-0 mb-6",children:s.jsxs(le,{gutter:[16,16],children:[s.jsx(_,{xs:24,sm:12,md:8,children:s.jsx(F,{placeholder:e==="ar"?"ابحث في المقالات...":"Search articles...",prefix:s.jsx(ya,{}),value:u,onChange:q=>f(q.target.value),allowClear:!0,size:"large"})}),s.jsx(_,{xs:24,sm:12,md:4,children:s.jsxs(B,{value:h,onChange:p,style:{width:"100%"},size:"large",children:[s.jsx(B.Option,{value:"all",children:e==="ar"?"جميع الحالات":"All Status"}),s.jsx(B.Option,{value:"PUBLISHED",children:e==="ar"?"منشور":"Published"}),s.jsx(B.Option,{value:"DRAFT",children:e==="ar"?"مسودة":"Draft"}),s.jsx(B.Option,{value:"ARCHIVED",children:e==="ar"?"مؤرشف":"Archived"})]})}),s.jsx(_,{xs:24,sm:12,md:4,children:s.jsxs(B,{value:m,onChange:x,style:{width:"100%"},size:"large",children:[s.jsx(B.Option,{value:"all",children:e==="ar"?"جميع الفئات":"All Categories"}),Y.map(q=>s.jsx(B.Option,{value:q,children:q},q))]})})]})}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:Z,dataSource:a,rowKey:"id",loading:o,pagination:{pageSize:10,showSizeChanger:!0,showTotal:te,showQuickJumper:!0},scroll:{x:1200}})}),s.jsx(Ye,{title:S?e==="ar"?"تعديل المقال":"Edit Article":e==="ar"?"إضافة مقال جديد":"Add New Article",open:g,onCancel:()=>{y(!1),w(null),A.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:900,destroyOnHidden:!0,className:"modern-modal article-modal",children:s.jsxs(E,{form:A,layout:"vertical",onFinish:T,initialValues:S||{status:"DRAFT"},children:[s.jsxs(le,{gutter:16,children:[s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0}],children:s.jsx(F,{placeholder:e==="ar"?"العنوان بالإنجليزية":"Title in English"})})}),s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:s.jsx(F,{placeholder:e==="ar"?"العنوان بالعربية":"Title in Arabic"})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"content",label:e==="ar"?"المحتوى (إنجليزي)":"Content (English)",children:s.jsx(ru,{rows:8,placeholder:e==="ar"?"المحتوى بالإنجليزية":"Content in English"})})}),s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"contentAr",label:e==="ar"?"المحتوى (عربي)":"Content (Arabic)",children:s.jsx(ru,{rows:8,placeholder:e==="ar"?"المحتوى بالعربية":"Content in Arabic"})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"excerpt",label:e==="ar"?"الملخص (إنجليزي)":"Excerpt (English)",children:s.jsx(ru,{rows:3,placeholder:e==="ar"?"ملخص المقال بالإنجليزية":"Article excerpt in English"})})}),s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"excerptAr",label:e==="ar"?"الملخص (عربي)":"Excerpt (Arabic)",children:s.jsx(ru,{rows:3,placeholder:e==="ar"?"ملخص المقال بالعربية":"Article excerpt in Arabic"})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{span:8,children:s.jsx(E.Item,{name:"category",label:e==="ar"?"الفئة":"Category",children:s.jsx(F,{placeholder:e==="ar"?"الفئة":"Category"})})}),s.jsx(_,{span:8,children:s.jsx(E.Item,{name:"featuredImage",label:e==="ar"?"صورة مميزة":"Featured Image",children:s.jsx(F,{placeholder:e==="ar"?"رابط الصورة":"Image URL"})})}),s.jsx(_,{span:8,children:s.jsx(E.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:s.jsxs(B,{children:[s.jsx(B.Option,{value:"DRAFT",children:e==="ar"?"مسودة":"Draft"}),s.jsx(B.Option,{value:"PUBLISHED",children:e==="ar"?"منشور":"Published"}),s.jsx(B.Option,{value:"ARCHIVED",children:e==="ar"?"مؤرشف":"Archived"})]})})})]}),s.jsx(E.Item,{name:"tags",label:e==="ar"?"العلامات":"Tags",children:s.jsx(F,{placeholder:e==="ar"?"علامات مفصولة بفواصل":"Tags separated by commas"})}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{y(!1),w(null),A.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),s.jsx(Ye,{title:e==="ar"?"معاينة المقال":"Article Preview",open:j,onCancel:()=>{b(!1),C(null)},maskClosable:!0,keyboard:!0,footer:null,width:800,destroyOnHidden:!0,className:"modern-modal",children:v&&s.jsxs("div",{children:[v.featuredImage&&s.jsx(Hn,{src:v.featuredImage,alt:v.title,className:"w-full mb-4 rounded-lg"}),s.jsx("h2",{className:"text-2xl font-bold mb-4",children:v.title}),s.jsx("div",{dangerouslySetInnerHTML:{__html:v.content||v.contentAr||""}})]})})]})},{TextArea:Fw}=F,Ane=()=>{const{t,language:e}=Se(),[r,n]=N.useState([]),[a,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState(""),[u,f]=N.useState(!1),[h,p]=N.useState(null),[m,x]=N.useState(null),[g]=E.useForm(),[y,j]=N.useState({total:0,active:0,revenue:0});N.useEffect(()=>{b()},[c]),N.useEffect(()=>{S()},[r]);const b=async()=>{try{i(!0),l(null);const k={};c&&(k.search=c);const $=(await gs.getServices(k)).services.map(M=>({...M,key:M.id,title:e==="ar"&&M.titleAr||M.title}));n($)}catch(k){console.error("Error fetching services:",k),l(k.message||"Failed to load services"),R.error(e==="ar"?"فشل تحميل الخدمات":"Failed to load services")}finally{i(!1)}},S=()=>{const k=r.length,O=r.filter(M=>M.status==="ACTIVE").length,$=r.reduce((M,T)=>M+(parseFloat(T.price)||0),0);j({total:k,active:O,revenue:$})},w=async k=>{try{const O=new FormData;O.append("file",k),O.append("ownerType","SERVICE"),O.append("ownerId",(h==null?void 0:h.id)||"new");const $=await ra.uploadFile(O);if($.file&&$.file.fileUrl)x($.file.fileUrl),g.setFieldsValue({image:$.file.fileUrl}),R.success(e==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully");else throw new Error("File upload failed")}catch(O){R.error(O.message||(e==="ar"?"فشل رفع الصورة":"Failed to upload image"))}return!1},v=async k=>{try{let O=m||(h==null?void 0:h.image);k.image&&typeof k.image=="string"&&(O=k.image);const $={...k,price:parseFloat(k.price),order:parseInt(k.order||0),image:O};delete $.duration,h?(await gs.updateService(h.id,$),R.success(e==="ar"?"تم تحديث الخدمة بنجاح":"Service updated successfully")):(await gs.createService($),R.success(e==="ar"?"تم إنشاء الخدمة بنجاح":"Service created successfully")),f(!1),p(null),x(null),g.resetFields(),b()}catch(O){R.error(O.message||(e==="ar"?"فشل حفظ الخدمة":"Failed to save service"))}},C=async k=>{try{await gs.deleteService(k),R.success(e==="ar"?"تم حذف الخدمة بنجاح":"Service deleted successfully"),b()}catch(O){R.error(O.message||(e==="ar"?"فشل حذف الخدمة":"Failed to delete service"))}},A=[{title:e==="ar"?"الخدمة":"Service",key:"service",width:300,render:(k,O)=>s.jsxs("div",{className:"flex items-center gap-3",children:[O.icon?s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-olive-green-400 to-turquoise-400 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xl",children:O.icon})}):s.jsx(So,{className:"text-2xl text-olive-green-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:O.title}),O.category&&s.jsx(ce,{color:"blue",className:"mt-1",children:O.category})]})]})},{title:e==="ar"?"السعر":"Price",dataIndex:"price",key:"price",render:k=>k?`${k} ${e==="ar"?"ريال":"SAR"}`:"-",sorter:(k,O)=>(k.price||0)-(O.price||0)},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:k=>s.jsx(ce,{color:k==="ACTIVE"?"green":"red",children:k==="ACTIVE"?e==="ar"?"نشط":"Active":e==="ar"?"غير نشط":"Inactive"})},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",fixed:"right",width:150,render:(k,O)=>s.jsxs(he,{size:"small",children:[s.jsx(ea,{title:e==="ar"?"تعديل":"Edit",children:s.jsx(P,{icon:s.jsx(qr,{}),size:"small",onClick:()=>{p(O),x(O.image),g.setFieldsValue(O),f(!0)}})}),s.jsx(ea,{title:e==="ar"?"حذف":"Delete",children:s.jsx(Os,{title:e==="ar"?"هل أنت متأكد من حذف هذه الخدمة؟":"Are you sure to delete this service?",onConfirm:()=>C(O.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:s.jsx(P,{danger:!0,icon:s.jsx(Vn,{}),size:"small"})})})]})}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الخدمات":"Services"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع الخدمات المتاحة":"Manage all available services"})]}),s.jsxs(he,{className:"flex-wrap",children:[s.jsx(F,{placeholder:e==="ar"?"ابحث في الخدمات...":"Search services...",prefix:s.jsx(ya,{}),value:c,onChange:k=>d(k.target.value),allowClear:!0,style:{width:250}}),s.jsx(P,{icon:s.jsx(Wr,{}),onClick:b,loading:a,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx($r,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-lg",size:"large",onClick:()=>{p(null),x(null),g.resetFields(),f(!0)},children:e==="ar"?"إضافة خدمة جديدة":"Add New Service"})]})]}),s.jsxs(le,{gutter:[16,16],className:"mb-6 relative z-10",children:[s.jsx(_,{xs:24,sm:12,md:8,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"إجمالي الخدمات":"Total Services",value:y.total,prefix:s.jsx(So,{className:"text-olive-green-600"}),valueStyle:{color:"#7a8c66"}})})}),s.jsx(_,{xs:24,sm:12,md:8,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"نشطة":"Active",value:y.active,prefix:s.jsx(Ln,{className:"text-green-600"}),valueStyle:{color:"#52c41a"}})})}),s.jsx(_,{xs:24,sm:12,md:8,children:s.jsx(V,{className:"glass-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"إجمالي الإيرادات":"Total Revenue",value:y.revenue,prefix:s.jsx(ir,{className:"text-blue-600"}),suffix:"SAR",valueStyle:{color:"#1890ff"}})})})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:A,dataSource:r,rowKey:"id",loading:a,pagination:{pageSize:10,showSizeChanger:!0,showTotal:k=>e==="ar"?`إجمالي ${k} خدمة`:`Total ${k} services`},scroll:{x:1e3}})}),s.jsx(Ye,{title:h?e==="ar"?"تعديل الخدمة":"Edit Service":e==="ar"?"إضافة خدمة جديدة":"Add New Service",open:u,onCancel:()=>{f(!1),p(null),x(null),g.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:700,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:g,layout:"vertical",onFinish:v,initialValues:h||{status:"ACTIVE"},children:[s.jsxs(le,{gutter:16,children:[s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0}],children:s.jsx(F,{})})}),s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:s.jsx(F,{})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"description",label:e==="ar"?"الوصف (إنجليزي)":"Description (English)",children:s.jsx(Fw,{rows:4})})}),s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"descriptionAr",label:e==="ar"?"الوصف (عربي)":"Description (Arabic)",children:s.jsx(Fw,{rows:4})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{span:8,children:s.jsx(E.Item,{name:"price",label:e==="ar"?"السعر":"Price",children:s.jsx(Fa,{min:0,style:{width:"100%"}})})}),s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"category",label:e==="ar"?"الفئة":"Category",rules:[{required:!0}],children:s.jsxs(B,{placeholder:e==="ar"?"اختر الفئة":"Select Category",children:[s.jsx(B.Option,{value:"ECONOMIC",children:e==="ar"?"اقتصادي":"Economic"}),s.jsx(B.Option,{value:"ADMINISTRATIVE",children:e==="ar"?"إداري":"Administrative"}),s.jsx(B.Option,{value:"FINANCIAL_ACCOUNTING",children:e==="ar"?"مالي ومحاسبي":"Financial & Accounting"}),s.jsx(B.Option,{value:"ANALYSIS_REPORTS",children:e==="ar"?"تحليل وتقارير":"Analysis & Reports"}),s.jsx(B.Option,{value:"FIELD_SURVEY",children:e==="ar"?"مسح ميداني":"Field Survey"}),s.jsx(B.Option,{value:"DIGITAL_CUSTOMER",children:e==="ar"?"عميل رقمي":"Digital Customer"})]})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"icon",label:e==="ar"?"الأيقونة":"Icon",children:s.jsx(F,{placeholder:e==="ar"?"رمز الأيقونة (emoji)":"Icon emoji"})})}),s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:s.jsxs(B,{children:[s.jsx(B.Option,{value:"ACTIVE",children:e==="ar"?"نشط":"Active"}),s.jsx(B.Option,{value:"INACTIVE",children:e==="ar"?"غير نشط":"Inactive"})]})})})]}),s.jsx(E.Item,{name:"image",label:e==="ar"?"صورة الخدمة":"Service Image",children:s.jsx(Yt,{name:"image",listType:"picture-card",maxCount:1,beforeUpload:w,accept:"image/*",onRemove:()=>{x(null),g.setFieldsValue({image:null})},children:m||h!=null&&h.image?s.jsx("img",{src:m||(h==null?void 0:h.image),alt:"service",style:{width:"100%"}}):s.jsxs("div",{children:[s.jsx($r,{}),s.jsx("div",{style:{marginTop:8},children:e==="ar"?"رفع صورة":"Upload"})]})})}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{f(!1),p(null),x(null),g.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{RangePicker:Cne}=Ms,kne=()=>{const{t,language:e}=Se(),[r,n]=N.useState([]),[a,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState({totalRevenue:0,totalSessions:0,totalClients:0,averageRating:0});N.useEffect(()=>{u()},[o]);const u=async()=>{var m,x,g,y;try{i(!0);const j={};o&&o.length===2&&(j.startDate=o[0].format("YYYY-MM-DD"),j.endDate=o[1].format("YYYY-MM-DD"));const b=await Ke.getReports(j);n(b.reports||[]);const S=((m=b.reports)==null?void 0:m.reduce((v,C)=>v+(C.revenue||0),0))||0,w=((x=b.reports)==null?void 0:x.length)||0;d({totalRevenue:S,totalSessions:w,totalClients:((g=b.stats)==null?void 0:g.totalClients)||0,averageRating:((y=b.stats)==null?void 0:y.averageRating)||0})}catch(j){console.error("Error fetching reports:",j),R.error(e==="ar"?"فشل تحميل التقارير":"Failed to load reports")}finally{i(!1)}},f=async()=>{try{const m={};o&&o.length===2&&(m.startDate=o[0].format("YYYY-MM-DD"),m.endDate=o[1].format("YYYY-MM-DD"));const x=localStorage.getItem("accessToken")||Ni("accessToken")||"",y=`http://localhost:5000/api/admin/reports/export/pdf?${new URLSearchParams(m).toString()}`,j=await fetch(y,{headers:{Authorization:`Bearer ${x}`}});if(!j.ok)throw new Error("Failed to download PDF");const b=await j.text(),S=new Blob([b],{type:"text/html"}),w=window.URL.createObjectURL(S),v=document.createElement("a");v.href=w,v.download=`reports-${fe().format("YYYY-MM-DD")}.html`,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(w);const C=window.open("","_blank");C&&(C.document.write(b),C.document.close(),setTimeout(()=>{C.print()},500)),R.success(e==="ar"?"تم تحميل ملف PDF بنجاح - استخدم Print to PDF في المتصفح":"PDF downloaded successfully - Use Print to PDF in browser")}catch(m){console.error("Export PDF error:",m),R.error(e==="ar"?"فشل تحميل PDF":"Failed to download PDF")}},h=async()=>{try{const m={};o&&o.length===2&&(m.startDate=o[0].format("YYYY-MM-DD"),m.endDate=o[1].format("YYYY-MM-DD"));const x=localStorage.getItem("accessToken")||Ni("accessToken")||"",y=`http://localhost:5000/api/admin/reports/export/csv?${new URLSearchParams(m).toString()}`,j=await fetch(y,{headers:{Authorization:`Bearer ${x}`}});if(!j.ok)throw new Error("Failed to download CSV");const b=await j.blob(),S=window.URL.createObjectURL(b),w=document.createElement("a");w.href=S,w.download=`reports-${fe().format("YYYY-MM-DD")}.csv`,document.body.appendChild(w),w.click(),document.body.removeChild(w),window.URL.revokeObjectURL(S),R.success(e==="ar"?"تم تحميل ملف CSV بنجاح":"CSV downloaded successfully")}catch(m){console.error("Export CSV error:",m),R.error(e==="ar"?"فشل تحميل CSV":"Failed to download CSV")}},p=[{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date",render:m=>fe(m).format("YYYY-MM-DD HH:mm"),sorter:(m,x)=>new Date(m.date)-new Date(x.date)},{title:e==="ar"?"الإيرادات":"Revenue",dataIndex:"revenue",key:"revenue",render:m=>`${m||0} ${e==="ar"?"ريال":"SAR"}`,sorter:(m,x)=>(m.revenue||0)-(x.revenue||0)},{title:e==="ar"?"عدد الجلسات":"Sessions",dataIndex:"sessions",key:"sessions",sorter:(m,x)=>(m.sessions||0)-(x.sessions||0)},{title:e==="ar"?"عدد العملاء":"Clients",dataIndex:"clients",key:"clients",sorter:(m,x)=>(m.clients||0)-(x.clients||0)}];return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"التقارير":"Reports"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"تحميل وتصدير جميع التقارير":"Download and export all reports"})]}),s.jsxs(he,{wrap:!0,children:[s.jsx(Cne,{value:o,onChange:l,size:"large",format:"YYYY-MM-DD"}),s.jsx(P,{icon:s.jsx(Wr,{}),onClick:u,loading:a,size:"large",children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx(ku,{}),onClick:f,size:"large",className:"bg-red-600 hover:bg-red-700 border-0",children:e==="ar"?"تحميل PDF":"Download PDF"}),s.jsx(P,{type:"primary",icon:s.jsx(zr,{}),onClick:h,size:"large",className:"bg-green-600 hover:bg-green-700 border-0",children:e==="ar"?"تحميل CSV":"Download CSV"})]})]}),s.jsxs(le,{gutter:[16,16],className:"mb-6",children:[s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"إجمالي الإيرادات":"Total Revenue",value:c.totalRevenue,prefix:s.jsx(ir,{className:"text-olive-green-600"}),suffix:"SAR",valueStyle:{color:"#7a8c66",fontSize:"24px",fontWeight:"bold"}})})}),s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"إجمالي الجلسات":"Total Sessions",value:c.totalSessions,prefix:s.jsx(Ft,{className:"text-blue-600"}),valueStyle:{color:"#1890ff",fontSize:"24px",fontWeight:"bold"}})})}),s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"إجمالي العملاء":"Total Clients",value:c.totalClients,prefix:s.jsx(Ee,{className:"text-green-600"}),valueStyle:{color:"#52c41a",fontSize:"24px",fontWeight:"bold"}})})}),s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:s.jsx(Fe,{title:e==="ar"?"عدد التقارير":"Total Reports",value:r.length,prefix:s.jsx(It,{className:"text-purple-600"}),valueStyle:{color:"#722ed1",fontSize:"24px",fontWeight:"bold"}})})})]}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:s.jsx(rt,{columns:p,dataSource:r,rowKey:"id",loading:a,pagination:{pageSize:20,showSizeChanger:!0,showTotal:m=>e==="ar"?`إجمالي ${m} تقرير`:`Total ${m} reports`,pageSizeOptions:["10","20","50","100"]}})})]})},{TextArea:Bw}=F,One=()=>{const{language:t}=Se(),[e,r]=N.useState([]),[n,a]=N.useState(!1),[i,o]=N.useState(""),[l,c]=N.useState(!1),[d,u]=N.useState(null),[f,h]=N.useState(null),[p]=E.useForm();N.useEffect(()=>{x()},[]);const m=C=>{if(!C)return null;if(/^https?:\/\//.test(C))return C;if(/^file:\/\//.test(C))return null;const A="http://localhost:5000/api".replace("/api","")||"http://localhost:5000";return C.startsWith("/")?`${A}${C}`:`${A}/${C}`},x=async()=>{try{a(!0);const A=((await io.getPartners()).partners||[]).map(k=>({...k,logo:m(k.logo)}));r(A)}catch(C){console.error("Error fetching partners:",C),R.error(t==="ar"?"فشل تحميل الشركاء":"Failed to load partners")}finally{a(!1)}},g=async C=>{try{const A=new FormData;A.append("file",C),A.append("ownerType","USER"),A.append("ownerId",(d==null?void 0:d.id)||"new");const k=await ra.uploadFile(A);if(k.success&&k.file){const O="http://localhost:5000/api".replace("/api","")||"http://localhost:5000";let $=k.file.fileUrl||k.file.url;$&&!/^https?:\/\//.test($)&&($=$.startsWith("/")?`${O}${$}`:`${O}/${$}`);const M=m($);return h(M),p.setFieldsValue({logo:M}),R.success(t==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully"),!1}}catch(A){console.error("Error uploading image:",A),R.error(t==="ar"?"فشل رفع الصورة":"Failed to upload image")}return!1},y=async C=>{try{const A={...C,logo:f||C.logo};d?(await io.updatePartner(d.id,A),R.success(t==="ar"?"تم تحديث الشريك بنجاح":"Partner updated successfully")):(await io.createPartner(A),R.success(t==="ar"?"تم إضافة الشريك بنجاح":"Partner created successfully")),c(!1),u(null),h(null),p.resetFields(),x()}catch(A){console.error("Error saving partner:",A),R.error(t==="ar"?"فشل حفظ الشريك":"Failed to save partner")}},j=async C=>{try{await io.deletePartner(C),R.success(t==="ar"?"تم حذف الشريك بنجاح":"Partner deleted successfully"),x()}catch(A){console.error("Error deleting partner:",A),R.error(t==="ar"?"فشل حذف الشريك":"Failed to delete partner")}},b=C=>{u(C);const A=m(C.logo);h(A),p.setFieldsValue({name:C.name,nameAr:C.nameAr,logo:A,website:C.website,description:C.description,descriptionAr:C.descriptionAr,isActive:C.isActive,order:C.order}),c(!0)},S=()=>{u(null),h(null),p.resetFields(),c(!0)},w=e.filter(C=>{var A,k;return((A=C.name)==null?void 0:A.toLowerCase().includes(i.toLowerCase()))||((k=C.nameAr)==null?void 0:k.toLowerCase().includes(i.toLowerCase()))}),v=[{title:t==="ar"?"الشعار":"Logo",dataIndex:"logo",key:"logo",width:100,render:C=>{const A=m(C);return A?s.jsx(Hn,{src:A,alt:"Partner logo",width:80,height:50,style:{objectFit:"contain"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RnG4W+FgYxN",onError:k=>{var O,$;k.target.style.display="none",($=(O=k.target.nextSibling)==null?void 0:O.style)==null||$.setProperty("display","flex")}}):s.jsx("div",{style:{width:80,height:50,background:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"},children:t==="ar"?"لا يوجد":"No logo"})}},{title:t==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",render:(C,A)=>t==="ar"&&A.nameAr?A.nameAr:C},{title:t==="ar"?"الموقع الإلكتروني":"Website",dataIndex:"website",key:"website",render:C=>C?s.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",children:C}):"-"},{title:t==="ar"?"الحالة":"Status",dataIndex:"isActive",key:"isActive",render:C=>s.jsx(ce,{color:C?"green":"red",children:C?t==="ar"?"نشط":"Active":t==="ar"?"غير نشط":"Inactive"})},{title:t==="ar"?"الترتيب":"Order",dataIndex:"order",key:"order",sorter:(C,A)=>C.order-A.order},{title:t==="ar"?"الإجراءات":"Actions",key:"actions",render:(C,A)=>s.jsxs(he,{children:[s.jsx(P,{icon:s.jsx(qr,{}),onClick:()=>b(A),size:"small",children:t==="ar"?"تعديل":"Edit"}),s.jsx(Os,{title:t==="ar"?"هل أنت متأكد من الحذف؟":"Are you sure you want to delete?",onConfirm:()=>j(A.id),okText:t==="ar"?"نعم":"Yes",cancelText:t==="ar"?"لا":"No",children:s.jsx(P,{icon:s.jsx(Vn,{}),danger:!0,size:"small",children:t==="ar"?"حذف":"Delete"})})]})}];return s.jsxs("div",{className:"animate-fade-in",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:t==="ar"?"إدارة الشركاء":"Partners Management"}),s.jsx("p",{className:"text-gray-500",children:t==="ar"?"إدارة شركاء المنصة وعرضهم في الصفحة الرئيسية":"Manage platform partners and display them on the homepage"})]}),s.jsxs(he,{children:[s.jsx(F,{placeholder:t==="ar"?"بحث...":"Search...",prefix:s.jsx(ya,{}),value:i,onChange:C=>o(C.target.value),style:{width:250},allowClear:!0}),s.jsx(P,{icon:s.jsx(Wr,{}),onClick:x,loading:n,children:t==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx($r,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:S,children:t==="ar"?"إضافة شريك جديد":"Add New Partner"})]})]})}),s.jsx(V,{className:"shadow-lg rounded-xl border-0",children:s.jsx(rt,{columns:v,dataSource:w,rowKey:"id",loading:n,pagination:{pageSize:10,showSizeChanger:!0,showTotal:C=>t==="ar"?`إجمالي ${C} شريك`:`Total ${C} partners`}})}),s.jsx(Ye,{title:d?t==="ar"?"تعديل الشريك":"Edit Partner":t==="ar"?"إضافة شريك جديد":"Add New Partner",open:l,onCancel:()=>{c(!1),u(null),h(null),p.resetFields()},footer:null,width:700,children:s.jsxs(E,{form:p,layout:"vertical",onFinish:y,initialValues:{isActive:!0,order:0},children:[s.jsx(E.Item,{name:"name",label:t==="ar"?"الاسم (إنجليزي)":"Name (English)",rules:[{required:!0,message:t==="ar"?"يرجى إدخال الاسم":"Please enter name"}],children:s.jsx(F,{placeholder:t==="ar"?"اسم الشريك بالإنجليزية":"Partner name in English"})}),s.jsx(E.Item,{name:"nameAr",label:t==="ar"?"الاسم (عربي)":"Name (Arabic)",children:s.jsx(F,{placeholder:t==="ar"?"اسم الشريك بالعربية":"Partner name in Arabic"})}),s.jsx(E.Item,{name:"logo",label:t==="ar"?"الشعار":"Logo",children:s.jsxs(he,{direction:"vertical",style:{width:"100%"},children:[s.jsx(Yt,{beforeUpload:g,showUploadList:!1,accept:"image/*",children:s.jsx(P,{icon:s.jsx(en,{}),children:t==="ar"?"رفع الشعار":"Upload Logo"})}),f&&s.jsx(Hn,{src:m(f),alt:"Partner logo",width:200,height:100,style:{objectFit:"contain"},onError:C=>{console.error("Failed to load image:",f),C.target.style.display="none"}}),s.jsx(F,{placeholder:t==="ar"?"أو أدخل رابط الصورة":"Or enter image URL",value:f,onChange:C=>{h(C.target.value),p.setFieldsValue({logo:C.target.value})}})]})}),s.jsx(E.Item,{name:"website",label:t==="ar"?"الموقع الإلكتروني":"Website",children:s.jsx(F,{placeholder:"https://example.com"})}),s.jsx(E.Item,{name:"description",label:t==="ar"?"الوصف (إنجليزي)":"Description (English)",children:s.jsx(Bw,{rows:3,placeholder:t==="ar"?"وصف الشريك بالإنجليزية":"Partner description in English"})}),s.jsx(E.Item,{name:"descriptionAr",label:t==="ar"?"الوصف (عربي)":"Description (Arabic)",children:s.jsx(Bw,{rows:3,placeholder:t==="ar"?"وصف الشريك بالعربية":"Partner description in Arabic"})}),s.jsx(E.Item,{name:"order",label:t==="ar"?"الترتيب":"Order",tooltip:t==="ar"?"رقم الترتيب لعرض الشركاء (الأقل يظهر أولاً)":"Order number for displaying partners (lower numbers appear first)",children:s.jsx(Fa,{min:0,style:{width:"100%"}})}),s.jsx(E.Item,{name:"isActive",label:t==="ar"?"الحالة":"Status",valuePropName:"checked",children:s.jsx(Zn,{})}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:d?t==="ar"?"تحديث":"Update":t==="ar"?"إضافة":"Add"}),s.jsx(P,{onClick:()=>{c(!1),u(null),h(null),p.resetFields()},children:t==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{TextArea:Uw}=F,Ene=()=>{const{language:t}=Se(),[e,r]=N.useState([]),[n,a]=N.useState(!0),[i,o]=N.useState(null),[l,c]=N.useState(!1),[d,u]=N.useState(null),[f]=E.useForm();N.useEffect(()=>{h()},[]);const h=async()=>{try{a(!0),o(null);const b=await Yl.getCategories();r(b.categories||[])}catch(b){console.error("Error fetching categories:",b),o(b.message||"Failed to load categories"),R.error(t==="ar"?"فشل تحميل الفئات":"Failed to load categories")}finally{a(!1)}},p=async b=>{try{d?(await Yl.updateCategory(d.id,b),R.success(t==="ar"?"تم تحديث الفئة بنجاح":"Category updated successfully")):(await Yl.createCategory(b),R.success(t==="ar"?"تم إنشاء الفئة بنجاح":"Category created successfully")),c(!1),f.resetFields(),u(null),h()}catch(S){console.error("Error saving category:",S),R.error(S.message||(t==="ar"?"فشل حفظ الفئة":"Failed to save category"))}},m=b=>{u(b),f.setFieldsValue({...b,parentId:b.parentId||void 0}),c(!0)},x=async b=>{try{await Yl.deleteCategory(b),R.success(t==="ar"?"تم حذف الفئة بنجاح":"Category deleted successfully"),h()}catch(S){console.error("Error deleting category:",S),R.error(S.message||(t==="ar"?"فشل حذف الفئة":"Failed to delete category"))}},g=()=>{c(!1),f.resetFields(),u(null)},y=[{title:t==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",render:(b,S)=>s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:b}),S.nameAr&&s.jsx("div",{className:"text-sm text-gray-500",children:S.nameAr})]})},{title:t==="ar"?"الرابط":"Slug",dataIndex:"slug",key:"slug"},{title:t==="ar"?"الأب":"Parent",dataIndex:"parent",key:"parent",render:b=>b?b.name:"-"},{title:t==="ar"?"الاستخدام":"Usage",key:"usage",render:(b,S)=>{var v,C,A,k,O,$;const w=(((v=S._count)==null?void 0:v.consultants)||0)+(((C=S._count)==null?void 0:C.services)||0)+(((A=S._count)==null?void 0:A.articles)||0);return s.jsxs("div",{className:"flex gap-2",children:[((k=S._count)==null?void 0:k.consultants)>0&&s.jsxs(ce,{color:"blue",children:[S._count.consultants," ",t==="ar"?"مستشار":"Consultants"]}),((O=S._count)==null?void 0:O.services)>0&&s.jsxs(ce,{color:"green",children:[S._count.services," ",t==="ar"?"خدمة":"Services"]}),(($=S._count)==null?void 0:$.articles)>0&&s.jsxs(ce,{color:"orange",children:[S._count.articles," ",t==="ar"?"مقال":"Articles"]}),w===0&&s.jsx("span",{className:"text-gray-400",children:"-"})]})}},{title:t==="ar"?"الحالة":"Status",dataIndex:"isActive",key:"isActive",render:b=>s.jsx(ce,{color:b?"green":"red",children:b?t==="ar"?"نشط":"Active":t==="ar"?"غير نشط":"Inactive"})},{title:t==="ar"?"الترتيب":"Order",dataIndex:"order",key:"order"},{title:t==="ar"?"الإجراءات":"Actions",key:"actions",fixed:"right",width:150,render:(b,S)=>{var w,v,C,A,k,O,$,M,T;return s.jsxs(he,{size:"small",children:[s.jsx(ea,{title:t==="ar"?"تعديل":"Edit",children:s.jsx(P,{icon:s.jsx(qr,{}),size:"small",onClick:()=>m(S)})}),s.jsx(Os,{title:t==="ar"?"هل أنت متأكد من حذف هذه الفئة؟":"Are you sure to delete this category?",onConfirm:()=>x(S.id),okText:t==="ar"?"نعم":"Yes",cancelText:t==="ar"?"لا":"No",disabled:(((w=S._count)==null?void 0:w.consultants)||0)+(((v=S._count)==null?void 0:v.services)||0)+(((C=S._count)==null?void 0:C.articles)||0)>0,children:s.jsx(ea,{title:(((A=S._count)==null?void 0:A.consultants)||0)+(((k=S._count)==null?void 0:k.services)||0)+(((O=S._count)==null?void 0:O.articles)||0)>0?t==="ar"?"لا يمكن الحذف: الفئة مستخدمة":"Cannot delete: category is in use":t==="ar"?"حذف":"Delete",children:s.jsx(P,{danger:!0,icon:s.jsx(Vn,{}),size:"small",disabled:((($=S._count)==null?void 0:$.consultants)||0)+(((M=S._count)==null?void 0:M.services)||0)+(((T=S._count)==null?void 0:T.articles)||0)>0})})})]})}}],j=e.filter(b=>!d||b.id!==d.id).map(b=>({value:b.id,label:`${b.name}${b.nameAr?` (${b.nameAr})`:""}`}));return s.jsxs("div",{className:"animate-fade-in",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:t==="ar"?"الفئات":"Categories"}),s.jsx("p",{className:"text-gray-500",children:t==="ar"?"إدارة الفئات المستخدمة في المستشارين والخدمات والمقالات":"Manage categories for consultants, services, and articles"})]}),s.jsxs(he,{children:[s.jsx(P,{icon:s.jsx(Wr,{}),onClick:h,loading:n,children:t==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx($r,{}),onClick:()=>{u(null),f.resetFields(),c(!0)},children:t==="ar"?"إضافة فئة":"Add Category"})]})]})}),i&&s.jsx(Mr,{message:i,type:"error",showIcon:!0,closable:!0,onClose:()=>o(null),className:"mb-6"}),s.jsx(V,{className:"border-0 shadow-lg rounded-2xl",children:s.jsx(rt,{columns:y,dataSource:e,loading:n,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:b=>t==="ar"?`إجمالي ${b} فئة`:`Total ${b} categories`}})}),s.jsx(Ye,{title:d?t==="ar"?"تعديل الفئة":"Edit Category":t==="ar"?"إضافة فئة جديدة":"Add New Category",open:l,onCancel:g,footer:null,width:600,children:s.jsxs(E,{form:f,layout:"vertical",onFinish:p,initialValues:{isActive:!0,order:0},children:[s.jsx(E.Item,{name:"name",label:t==="ar"?"الاسم (إنجليزي)":"Name (English)",rules:[{required:!0,message:t==="ar"?"الاسم مطلوب":"Name is required"}],children:s.jsx(F,{placeholder:t==="ar"?"أدخل الاسم":"Enter name"})}),s.jsx(E.Item,{name:"nameAr",label:t==="ar"?"الاسم (عربي)":"Name (Arabic)",children:s.jsx(F,{placeholder:t==="ar"?"أدخل الاسم بالعربية":"Enter name in Arabic"})}),s.jsx(E.Item,{name:"slug",label:t==="ar"?"الرابط":"Slug",tooltip:t==="ar"?"سيتم إنشاؤه تلقائياً إذا لم يتم تحديده":"Will be auto-generated if not provided",children:s.jsx(F,{placeholder:"category-slug"})}),s.jsx(E.Item,{name:"description",label:t==="ar"?"الوصف (إنجليزي)":"Description (English)",children:s.jsx(Uw,{rows:3,placeholder:t==="ar"?"أدخل الوصف":"Enter description"})}),s.jsx(E.Item,{name:"descriptionAr",label:t==="ar"?"الوصف (عربي)":"Description (Arabic)",children:s.jsx(Uw,{rows:3,placeholder:t==="ar"?"أدخل الوصف بالعربية":"Enter description in Arabic"})}),s.jsx(E.Item,{name:"parentId",label:t==="ar"?"الفئة الأب":"Parent Category",children:s.jsx(B,{placeholder:t==="ar"?"اختر الفئة الأب (اختياري)":"Select parent category (optional)",allowClear:!0,options:j})}),s.jsx(E.Item,{name:"icon",label:t==="ar"?"الأيقونة":"Icon",tooltip:t==="ar"?"اسم الأيقونة أو رابط الصورة":"Icon name or image URL",children:s.jsx(F,{placeholder:t==="ar"?"مثال: HomeOutlined":"e.g., HomeOutlined"})}),s.jsx(E.Item,{name:"color",label:t==="ar"?"اللون":"Color",tooltip:t==="ar"?"كود اللون (Hex)":"Color code (Hex)",children:s.jsx(F,{placeholder:"#1a4d3a"})}),s.jsx(E.Item,{name:"order",label:t==="ar"?"الترتيب":"Order",children:s.jsx(Fa,{min:0,style:{width:"100%"}})}),s.jsx(E.Item,{name:"isActive",label:t==="ar"?"الحالة":"Status",valuePropName:"checked",children:s.jsx(Zn,{})}),s.jsx(E.Item,{children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",htmlType:"submit",children:d?t==="ar"?"تحديث":"Update":t==="ar"?"إنشاء":"Create"}),s.jsx(P,{onClick:g,children:t==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{Title:la,Text:dr,Paragraph:yue}=fd,{TextArea:Pne}=F,Tne=()=>{const{t,language:e}=Se(),{theme:r,toggleTheme:n,settings:a,updateSettings:i}=yd(),[o]=E.useForm(),[l]=E.useForm(),[c]=E.useForm(),[d]=E.useForm(),[u,f]=N.useState(!1),[h,p]=N.useState("general");N.useEffect(()=>{d.setFieldsValue({dashboardName:a.dashboardName,dashboardNameAr:a.dashboardNameAr,primaryFont:a.primaryFont,arabicFont:a.arabicFont,animationsEnabled:a.animationsEnabled,animationSpeed:a.animationSpeed,primaryColor:a.primaryColor,secondaryColor:a.secondaryColor})},[a,d]),N.useEffect(()=>{m()},[]);const m=async()=>{try{const v=await ei.getGeneralSettings();v.settings&&o.setFieldsValue({platformName:v.settings.platformName||"Jadwa Consulting",email:v.settings.platformEmail||"info@jadwa.com",phone:v.settings.platformPhone||"+966 12 345 6789",address:v.settings.platformAddress||"",enableNotifications:v.settings.enableNotifications!==!1,enableEmailNotifications:v.settings.enableEmailNotifications!==!1})}catch(v){console.error("Error fetching general settings:",v)}},x=async v=>{try{f(!0),await ei.updateGeneralSettings({platformName:v.platformName,platformEmail:v.email,platformPhone:v.phone,platformAddress:v.address,enableNotifications:v.enableNotifications,enableEmailNotifications:v.enableEmailNotifications}),R.success(e==="ar"?"تم حفظ الإعدادات العامة بنجاح":"General settings saved successfully")}catch(C){R.error(C.message||(e==="ar"?"فشل حفظ الإعدادات":"Failed to save settings"))}finally{f(!1)}};N.useEffect(()=>{g()},[]);const g=async()=>{try{const v=await ei.getPaymentSettings();v.settings&&l.setFieldsValue({gateway:v.settings.paymentGateway||"tap",apiKey:v.settings.paymentApiKey||"",secretKey:v.settings.paymentSecretKey||"",commissionRate:v.settings.commissionRate||15,enableAutoPayout:v.settings.enableAutoPayout||!1})}catch(v){console.error("Error fetching payment settings:",v)}},y=async v=>{try{f(!0),await ei.updatePaymentSettings({paymentGateway:v.gateway,paymentApiKey:v.apiKey,paymentSecretKey:v.secretKey,commissionRate:v.commissionRate,enableAutoPayout:v.enableAutoPayout}),R.success(e==="ar"?"تم حفظ إعدادات الدفع بنجاح":"Payment settings saved successfully")}catch(C){R.error(C.message||(e==="ar"?"فشل حفظ الإعدادات":"Failed to save settings"))}finally{f(!1)}};N.useEffect(()=>{j()},[]);const j=async()=>{try{const v=await ei.getIntegrationSettings();v.settings&&c.setFieldsValue({videoService:v.settings.videoService||"zoom",videoApiKey:v.settings.videoApiKey||"",emailService:v.settings.emailService||"smtp",smtpHost:v.settings.smtpHost||"",smtpPort:v.settings.smtpPort||"",smtpUser:v.settings.smtpUser||"",smtpPassword:v.settings.smtpPassword||""})}catch(v){console.error("Error fetching integration settings:",v)}},b=async v=>{try{f(!0),await ei.updateIntegrationSettings({videoService:v.videoService,videoApiKey:v.videoApiKey,emailService:v.emailService,smtpHost:v.smtpHost,smtpPort:v.smtpPort,smtpUser:v.smtpUser,smtpPassword:v.smtpPassword}),R.success(e==="ar"?"تم حفظ إعدادات التكامل بنجاح":"Integration settings saved successfully")}catch(C){R.error(C.message||(e==="ar"?"فشل حفظ الإعدادات":"Failed to save settings"))}finally{f(!1)}},S=v=>{const C=new FileReader;return C.onload=A=>{i({logo:A.target.result}),R.success(e==="ar"?"تم رفع الشعار بنجاح":"Logo uploaded successfully")},C.readAsDataURL(v),!1},w=[{key:"general",label:s.jsxs(he,{children:[s.jsx(Ao,{}),s.jsx("span",{children:e==="ar"?"عام":"General"})]}),children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(V,{className:"glass-card border-0 shadow-professional-lg rounded-xl mb-6",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:s.jsx(va,{className:"text-white text-xl"})}),s.jsxs("div",{children:[s.jsx(la,{level:4,className:"mb-1 font-bold",children:e==="ar"?"معلومات المنصة":"Platform Information"}),s.jsx(dr,{type:"secondary",className:"text-sm",children:e==="ar"?"المعلومات الأساسية للمنصة":"Basic platform information"})]})]}),styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx(E,{form:o,layout:"vertical",onFinish:x,children:s.jsxs(le,{gutter:[16,0],children:[s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"platformName",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم المنصة":"Platform Name"}),rules:[{required:!0,message:e==="ar"?"يرجى إدخال اسم المنصة":"Please enter platform name"}],children:s.jsx(F,{size:"large",placeholder:e==="ar"?"اسم المنصة":"Platform Name",prefix:s.jsx(va,{className:"text-gray-400"})})})}),s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"email",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"البريد الإلكتروني":"Email"}),rules:[{required:!0,message:e==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email"},{type:"email",message:e==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email"}],children:s.jsx(F,{size:"large",type:"email",placeholder:e==="ar"?"البريد الإلكتروني":"Email",prefix:s.jsx(zn,{className:"text-gray-400"})})})}),s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"phone",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"رقم الهاتف":"Phone"}),rules:[{required:!0,message:e==="ar"?"يرجى إدخال رقم الهاتف":"Please enter phone number"}],children:s.jsx(F,{size:"large",placeholder:e==="ar"?"رقم الهاتف":"Phone",prefix:s.jsx(Ka,{className:"text-gray-400"})})})}),s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"address",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"العنوان":"Address"}),children:s.jsx(Pne,{rows:3,placeholder:e==="ar"?"العنوان":"Address",size:"large"})})})]})})}),s.jsx(V,{className:"glass-card border-0 shadow-professional-lg rounded-xl mb-6",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-lg",children:s.jsx(gc,{className:"text-white text-xl"})}),s.jsxs("div",{children:[s.jsx(la,{level:4,className:"mb-1 font-bold",children:e==="ar"?"الإشعارات":"Notifications"}),s.jsx(dr,{type:"secondary",className:"text-sm",children:e==="ar"?"إعدادات الإشعارات":"Notification settings"})]})]}),styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx(E,{form:o,layout:"vertical",children:s.jsxs(le,{gutter:[16,16],children:[s.jsx(_,{xs:24,md:12,children:s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(gc,{className:"text-lg text-gray-600"}),s.jsxs("div",{children:[s.jsx(dr,{strong:!0,children:e==="ar"?"تفعيل الإشعارات":"Enable Notifications"}),s.jsx("br",{}),s.jsx(dr,{type:"secondary",className:"text-xs",children:e==="ar"?"تفعيل الإشعارات العامة":"Enable general notifications"})]})]}),s.jsx(E.Item,{name:"enableNotifications",valuePropName:"checked",className:"mb-0",children:s.jsx(Zn,{})})]})}),s.jsx(_,{xs:24,md:12,children:s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(zn,{className:"text-lg text-gray-600"}),s.jsxs("div",{children:[s.jsx(dr,{strong:!0,children:e==="ar"?"إشعارات البريد الإلكتروني":"Email Notifications"}),s.jsx("br",{}),s.jsx(dr,{type:"secondary",className:"text-xs",children:e==="ar"?"تفعيل إشعارات البريد الإلكتروني":"Enable email notifications"})]})]}),s.jsx(E.Item,{name:"enableEmailNotifications",valuePropName:"checked",className:"mb-0",children:s.jsx(Zn,{})})]})})]})})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(P,{size:"large",onClick:()=>o.resetFields(),children:e==="ar"?"إعادة تعيين":"Reset"}),s.jsx(P,{type:"primary",htmlType:"submit",icon:s.jsx(Ra,{}),size:"large",loading:u,onClick:()=>o.submit(),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ الإعدادات":"Save Settings"})]})]})},{key:"payment",label:s.jsxs(he,{children:[s.jsx(ir,{}),s.jsx("span",{children:e==="ar"?"المدفوعات":"Payments"})]}),children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Mr,{message:e==="ar"?"إعدادات الدفع":"Payment Settings",description:e==="ar"?"قم بتكوين إعدادات بوابة الدفع الخاصة بك. تأكد من الحفاظ على أمان مفاتيح API.":"Configure your payment gateway settings. Make sure to keep API keys secure.",type:"info",showIcon:!0,icon:s.jsx(Hp,{}),className:"mb-6"}),s.jsx(V,{className:"glass-card border-0 shadow-professional-lg rounded-xl mb-6",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg",children:s.jsx(ir,{className:"text-white text-xl"})}),s.jsxs("div",{children:[s.jsx(la,{level:4,className:"mb-1 font-bold",children:e==="ar"?"بوابة الدفع":"Payment Gateway"}),s.jsx(dr,{type:"secondary",className:"text-sm",children:e==="ar"?"إعدادات بوابة الدفع":"Payment gateway configuration"})]})]}),styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:s.jsx(E,{form:l,layout:"vertical",onFinish:y,children:s.jsxs(le,{gutter:[16,0],children:[s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"gateway",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"بوابة الدفع":"Payment Gateway"}),rules:[{required:!0}],children:s.jsxs(B,{size:"large",children:[s.jsx(B.Option,{value:"tap",children:"Tap Payments"}),s.jsx(B.Option,{value:"moyasar",children:"Moyasar"}),s.jsx(B.Option,{value:"stc",children:"STC Pay"}),s.jsx(B.Option,{value:"paypal",children:"PayPal"})]})})}),s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"commissionRate",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"نسبة العمولة (%)":"Commission Rate (%)"}),rules:[{required:!0,type:"number",min:0,max:100}],children:s.jsx(F,{type:"number",min:0,max:100,placeholder:"15",size:"large",suffix:"%"})})}),s.jsx(_,{xs:24,children:s.jsx(E.Item,{name:"apiKey",label:s.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[s.jsx(Jt,{}),e==="ar"?"مفتاح API":"API Key"]}),rules:[{required:!0}],children:s.jsx(F.Password,{size:"large",placeholder:e==="ar"?"أدخل مفتاح API":"Enter API Key",iconRender:v=>v?s.jsx(mr,{}):s.jsx(Jt,{})})})}),s.jsx(_,{xs:24,children:s.jsx(E.Item,{name:"secretKey",label:s.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[s.jsx(Jt,{}),e==="ar"?"المفتاح السري":"Secret Key"]}),rules:[{required:!0}],children:s.jsx(F.Password,{size:"large",placeholder:e==="ar"?"أدخل المفتاح السري":"Enter Secret Key",iconRender:v=>v?s.jsx(mr,{}):s.jsx(Jt,{})})})}),s.jsx(_,{xs:24,children:s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(vt,{className:"text-lg text-gray-600"}),s.jsxs("div",{children:[s.jsx(dr,{strong:!0,children:e==="ar"?"الدفع التلقائي للمستشارين":"Auto Payout for Consultants"}),s.jsx("br",{}),s.jsx(dr,{type:"secondary",className:"text-xs",children:e==="ar"?"تفعيل الدفع التلقائي للمستشارين":"Enable automatic payout for consultants"})]})]}),s.jsx(E.Item,{name:"enableAutoPayout",valuePropName:"checked",className:"mb-0",children:s.jsx(Zn,{})})]})})]})})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(P,{size:"large",onClick:()=>l.resetFields(),children:e==="ar"?"إعادة تعيين":"Reset"}),s.jsx(P,{type:"primary",htmlType:"submit",icon:s.jsx(Ra,{}),size:"large",loading:u,onClick:()=>l.submit(),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ الإعدادات":"Save Settings"})]})]})},{key:"integrations",label:s.jsxs(he,{children:[s.jsx(kv,{}),s.jsx("span",{children:e==="ar"?"التكاملات":"Integrations"})]}),children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Mr,{message:e==="ar"?"التكاملات الخارجية":"External Integrations",description:e==="ar"?"قم بتكوين التكاملات مع الخدمات الخارجية مثل خدمات الفيديو والبريد الإلكتروني.":"Configure integrations with external services such as video services and email.",type:"info",showIcon:!0,icon:s.jsx(Hp,{}),className:"mb-6"}),s.jsx(V,{className:"border-0 shadow-sm",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center",children:s.jsx(Ba,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx(la,{level:5,className:"mb-0",children:e==="ar"?"خدمة الفيديو":"Video Service"}),s.jsx(dr,{type:"secondary",className:"text-xs",children:e==="ar"?"إعدادات خدمة الفيديو":"Video service configuration"})]})]}),children:s.jsx(E,{form:c,layout:"vertical",onFinish:b,children:s.jsxs(le,{gutter:[16,0],children:[s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"videoService",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"خدمة الفيديو":"Video Service"}),rules:[{required:!0}],children:s.jsxs(B,{size:"large",children:[s.jsx(B.Option,{value:"zoom",children:"Zoom"}),s.jsx(B.Option,{value:"twilio",children:"Twilio"}),s.jsx(B.Option,{value:"jitsi",children:"Jitsi Meet"}),s.jsx(B.Option,{value:"google-meet",children:"Google Meet"})]})})}),s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"videoApiKey",label:s.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[s.jsx(kv,{}),e==="ar"?"مفتاح API للفيديو":"Video API Key"]}),children:s.jsx(F.Password,{size:"large",placeholder:e==="ar"?"أدخل مفتاح API":"Enter API Key",iconRender:v=>v?s.jsx(mr,{}):s.jsx(Jt,{})})})})]})})}),s.jsx(V,{className:"border-0 shadow-sm",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:s.jsx(zn,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx(la,{level:5,className:"mb-0",children:e==="ar"?"خدمة البريد الإلكتروني":"Email Service"}),s.jsx(dr,{type:"secondary",className:"text-xs",children:e==="ar"?"إعدادات خدمة البريد الإلكتروني":"Email service configuration"})]})]}),children:s.jsx(E,{form:c,layout:"vertical",children:s.jsxs(le,{gutter:[16,0],children:[s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"emailService",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"خدمة البريد الإلكتروني":"Email Service"}),rules:[{required:!0}],children:s.jsxs(B,{size:"large",children:[s.jsx(B.Option,{value:"smtp",children:"SMTP"}),s.jsx(B.Option,{value:"sendgrid",children:"SendGrid"}),s.jsx(B.Option,{value:"mailgun",children:"Mailgun"}),s.jsx(B.Option,{value:"ses",children:"AWS SES"})]})})}),s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"smtpHost",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"خادم SMTP":"SMTP Host"}),children:s.jsx(F,{size:"large",placeholder:"smtp.example.com"})})}),s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"smtpPort",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"منفذ SMTP":"SMTP Port"}),children:s.jsx(F,{type:"number",size:"large",placeholder:"587"})})}),s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"smtpUser",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم المستخدم":"Username"}),children:s.jsx(F,{size:"large",placeholder:e==="ar"?"اسم المستخدم":"Username"})})}),s.jsx(_,{xs:24,children:s.jsx(E.Item,{name:"smtpPassword",label:s.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[s.jsx(Jt,{}),e==="ar"?"كلمة المرور":"Password"]}),children:s.jsx(F.Password,{size:"large",placeholder:e==="ar"?"كلمة المرور":"Password",iconRender:v=>v?s.jsx(mr,{}):s.jsx(Jt,{})})})})]})})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(P,{size:"large",onClick:()=>c.resetFields(),children:e==="ar"?"إعادة تعيين":"Reset"}),s.jsx(P,{type:"primary",htmlType:"submit",icon:s.jsx(Ra,{}),size:"large",loading:u,onClick:()=>c.submit(),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ الإعدادات":"Save Settings"})]})]})},{key:"appearance",label:s.jsxs(he,{children:[s.jsx(Ov,{}),s.jsx("span",{children:e==="ar"?"المظهر":"Appearance"})]}),children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(V,{className:"border-0 shadow-sm",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center",children:s.jsx(xP,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx(la,{level:5,className:"mb-0",children:e==="ar"?"الشعار والاسم":"Logo & Name"}),s.jsx(dr,{type:"secondary",className:"text-xs",children:e==="ar"?"تخصيص شعار واسم لوحة التحكم":"Customize dashboard logo and name"})]})]}),children:s.jsx(E,{form:d,layout:"vertical",children:s.jsxs(le,{gutter:[16,16],children:[s.jsx(_,{xs:24,md:12,children:s.jsxs(E.Item,{name:"logo",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"شعار لوحة التحكم":"Dashboard Logo"}),children:[s.jsx(Yt,{beforeUpload:S,showUploadList:!1,accept:"image/*",children:s.jsx(P,{icon:s.jsx(en,{}),size:"large",block:!0,children:e==="ar"?"رفع شعار":"Upload Logo"})}),a.logo&&s.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("img",{src:a.logo,alt:"Logo",className:"h-20 object-contain mx-auto"})})]})}),s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"dashboardName",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم لوحة التحكم (إنجليزي)":"Dashboard Name (English)"}),rules:[{required:!0}],children:s.jsx(F,{size:"large",placeholder:"Jadwa"})})}),s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"dashboardNameAr",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم لوحة التحكم (عربي)":"Dashboard Name (Arabic)"}),rules:[{required:!0}],children:s.jsx(F,{size:"large",placeholder:"جدوى"})})})]})})}),s.jsx(V,{className:"border-0 shadow-sm",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center",children:s.jsx(IE,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx(la,{level:5,className:"mb-0",children:e==="ar"?"الخطوط":"Fonts"}),s.jsx(dr,{type:"secondary",className:"text-xs",children:e==="ar"?"تخصيص الخطوط":"Customize fonts"})]})]}),children:s.jsx(E,{form:d,layout:"vertical",children:s.jsxs(le,{gutter:[16,0],children:[s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"primaryFont",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"الخط الأساسي (إنجليزي)":"Primary Font (English)"}),rules:[{required:!0}],children:s.jsxs(B,{size:"large",children:[s.jsx(B.Option,{value:"Inter",children:"Inter"}),s.jsx(B.Option,{value:"Roboto",children:"Roboto"}),s.jsx(B.Option,{value:"Open Sans",children:"Open Sans"}),s.jsx(B.Option,{value:"Poppins",children:"Poppins"}),s.jsx(B.Option,{value:"Montserrat",children:"Montserrat"}),s.jsx(B.Option,{value:"Lato",children:"Lato"})]})})}),s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"arabicFont",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"الخط العربي":"Arabic Font"}),rules:[{required:!0}],children:s.jsxs(B,{size:"large",children:[s.jsx(B.Option,{value:"Cairo",children:"Cairo"}),s.jsx(B.Option,{value:"Tajawal",children:"Tajawal"}),s.jsx(B.Option,{value:"Almarai",children:"Almarai"}),s.jsx(B.Option,{value:"Changa",children:"Changa"}),s.jsx(B.Option,{value:"IBM Plex Sans Arabic",children:"IBM Plex Sans Arabic"}),s.jsx(B.Option,{value:"Noto Sans Arabic",children:"Noto Sans Arabic"})]})})})]})})}),s.jsx(V,{className:"border-0 shadow-sm",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500 to-pink-600 flex items-center justify-center",children:s.jsx(Ov,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx(la,{level:5,className:"mb-0",children:e==="ar"?"الألوان":"Colors"}),s.jsx(dr,{type:"secondary",className:"text-xs",children:e==="ar"?"تخصيص ألوان المنصة":"Customize platform colors"})]})]}),children:s.jsx(E,{form:d,layout:"vertical",children:s.jsxs(le,{gutter:[16,16],children:[s.jsx(_,{xs:24,md:12,children:s.jsxs(E.Item,{name:"primaryColor",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اللون الأساسي":"Primary Color"}),rules:[{required:!0}],children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(F,{type:"color",value:a.primaryColor,onChange:v=>{d.setFieldValue("primaryColor",v.target.value),i({primaryColor:v.target.value})},className:"w-16 h-12 rounded-lg cursor-pointer",style:{border:"none"}}),s.jsx(F,{size:"large",value:a.primaryColor,onChange:v=>{d.setFieldValue("primaryColor",v.target.value),i({primaryColor:v.target.value})},placeholder:"#7a8c66"})]}),s.jsx("div",{className:"mt-2 h-8 rounded-lg",style:{backgroundColor:a.primaryColor}})]})}),s.jsx(_,{xs:24,md:12,children:s.jsxs(E.Item,{name:"secondaryColor",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"اللون الثانوي":"Secondary Color"}),rules:[{required:!0}],children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(F,{type:"color",value:a.secondaryColor,onChange:v=>{d.setFieldValue("secondaryColor",v.target.value),i({secondaryColor:v.target.value})},className:"w-16 h-12 rounded-lg cursor-pointer",style:{border:"none"}}),s.jsx(F,{size:"large",value:a.secondaryColor,onChange:v=>{d.setFieldValue("secondaryColor",v.target.value),i({secondaryColor:v.target.value})},placeholder:"#14b8a6"})]}),s.jsx("div",{className:"mt-2 h-8 rounded-lg",style:{backgroundColor:a.secondaryColor}})]})})]})})}),s.jsx(V,{className:"border-0 shadow-sm",title:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center",children:s.jsx(Ba,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx(la,{level:5,className:"mb-0",children:e==="ar"?"الرسوم المتحركة":"Animations"}),s.jsx(dr,{type:"secondary",className:"text-xs",children:e==="ar"?"إعدادات الرسوم المتحركة":"Animation settings"})]})]}),children:s.jsx(E,{form:d,layout:"vertical",children:s.jsxs(le,{gutter:[16,16],children:[s.jsx(_,{xs:24,md:12,children:s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ba,{className:"text-lg text-gray-600"}),s.jsxs("div",{children:[s.jsx(dr,{strong:!0,children:e==="ar"?"تفعيل الرسوم المتحركة":"Enable Animations"}),s.jsx("br",{}),s.jsx(dr,{type:"secondary",className:"text-xs",children:e==="ar"?"تفعيل أو تعطيل الرسوم المتحركة":"Enable or disable animations"})]})]}),s.jsx(E.Item,{name:"animationsEnabled",valuePropName:"checked",className:"mb-0",children:s.jsx(Zn,{})})]})}),s.jsx(_,{xs:24,md:12,children:s.jsx(E.Item,{name:"animationSpeed",label:s.jsx("span",{className:"font-semibold",children:e==="ar"?"سرعة الرسوم المتحركة":"Animation Speed"}),children:s.jsxs(Dn.Group,{size:"large",children:[s.jsx(Dn.Button,{value:"slow",children:e==="ar"?"بطيء":"Slow"}),s.jsx(Dn.Button,{value:"normal",children:e==="ar"?"عادي":"Normal"}),s.jsx(Dn.Button,{value:"fast",children:e==="ar"?"سريع":"Fast"})]})})})]})})}),s.jsx(Mr,{message:e==="ar"?"الوضع الفاتح فقط":"Light Mode Only",description:e==="ar"?"المنصة تعمل في الوضع الفاتح فقط لضمان تجربة مستخدم أفضل":"Platform operates in light mode only for better user experience",type:"info",showIcon:!0,icon:s.jsx(Hp,{}),className:"mb-4"}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(P,{size:"large",onClick:()=>{d.setFieldsValue({dashboardName:a.dashboardName,dashboardNameAr:a.dashboardNameAr,primaryFont:a.primaryFont,arabicFont:a.arabicFont,animationsEnabled:a.animationsEnabled,animationSpeed:a.animationSpeed,primaryColor:a.primaryColor,secondaryColor:a.secondaryColor})},children:e==="ar"?"إعادة تعيين":"Reset"}),s.jsx(P,{type:"primary",htmlType:"submit",icon:s.jsx(Ra,{}),size:"large",loading:u,onClick:()=>d.submit(),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ الإعدادات":"Save Settings"})]})]})}];return s.jsx("div",{className:"min-h-screen dashboard-bg",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx(la,{level:1,className:"mb-3 gradient-text text-4xl sm:text-5xl font-extrabold",children:e==="ar"?"الإعدادات":"Settings"}),s.jsx(dr,{className:"text-gray-600 text-lg font-medium",children:e==="ar"?"إدارة إعدادات المنصة والتكاملات والمظهر":"Manage platform settings, integrations, and appearance"})]}),s.jsx(Ga,{count:4,showZero:!1,children:s.jsx(P,{icon:s.jsx(Ao,{}),size:"large",className:"glass-card border-0 shadow-professional",children:e==="ar"?"الإعدادات السريعة":"Quick Settings"})})]})}),s.jsx(V,{className:"glass-card shadow-professional-xl rounded-2xl border-0 overflow-hidden",styles:{body:{padding:0}},children:s.jsx($s,{items:w,activeKey:h,onChange:p,size:"large",type:"line",className:"settings-tabs px-6 pt-4",tabBarStyle:{marginBottom:0,borderBottom:"1px solid #f0f0f0"}})})]})})},Ine=()=>{var v,C,A,k;const{t,language:e}=Se(),[r,n]=N.useState([]),[a,i]=N.useState([]),[o,l]=N.useState(null),[c,d]=N.useState({logs:!1,stats:!1}),[u,f]=N.useState("all"),[h,p]=N.useState("all");N.useEffect(()=>{m(),x(),g()},[u,h]);const m=async()=>{try{d($=>({...$,stats:!0}));const O=await mu.getSecurityStats();l(O)}catch(O){console.error("Error fetching security stats:",O)}finally{d(O=>({...O,stats:!1}))}},x=async()=>{try{d(M=>({...M,logs:!0}));const O={};u!=="all"&&(O.level=u);const $=await mu.getSystemLogs(O);n($.logs||[])}catch(O){console.error("Error fetching system logs:",O)}finally{d(O=>({...O,logs:!1}))}},g=async()=>{try{const O={};h!=="all"&&(O.action=h);const $=await mu.getAuditLogs(O);i($.logs||[])}catch(O){console.error("Error fetching audit logs:",O)}},y=O=>({INFO:"blue",WARNING:"orange",ERROR:"red",CRITICAL:"magenta"})[O]||"default",j=O=>({CREATE:"green",UPDATE:"blue",DELETE:"red",LOGIN:"cyan",LOGOUT:"gray"})[O]||"default",b=[{title:e==="ar"?"المستوى":"Level",dataIndex:"level",key:"level",render:O=>s.jsx(ce,{color:y(O),children:O})},{title:e==="ar"?"الرسالة":"Message",dataIndex:"message",key:"message",ellipsis:!0},{title:e==="ar"?"المستخدم":"User",dataIndex:["user","email"],key:"user",render:O=>O||"-"},{title:e==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:O=>fe(O).format("YYYY-MM-DD HH:mm:ss")}],S=[{title:e==="ar"?"الإجراء":"Action",dataIndex:"action",key:"action",render:O=>s.jsx(ce,{color:j(O),children:O})},{title:e==="ar"?"النوع":"Resource Type",dataIndex:"resourceType",key:"resourceType"},{title:e==="ar"?"المستخدم":"User",dataIndex:["user","email"],key:"user"},{title:e==="ar"?"الوصف":"Description",dataIndex:"description",key:"description",ellipsis:!0},{title:e==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:O=>fe(O).format("YYYY-MM-DD HH:mm:ss")}],w=[{key:"security",label:e==="ar"?"الأمان":"Security",icon:s.jsx(MP,{}),children:s.jsxs("div",{children:[o&&s.jsxs(le,{gutter:[16,16],className:"mb-6",children:[s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Fe,{title:e==="ar"?"تسجيلات الدخول":"Total Logins",value:((v=o.stats)==null?void 0:v.totalLogins)||0,valueStyle:{color:"#1890ff"}})})}),s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Fe,{title:e==="ar"?"فشل تسجيل الدخول":"Failed Logins",value:((C=o.stats)==null?void 0:C.failedLogins)||0,valueStyle:{color:"#ff4d4f"}})})}),s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Fe,{title:e==="ar"?"أنشطة مشبوهة":"Suspicious Activities",value:((A=o.stats)==null?void 0:A.suspiciousActivities)||0,valueStyle:{color:"#faad14"}})})}),s.jsx(_,{xs:24,sm:12,md:6,children:s.jsx(V,{children:s.jsx(Fe,{title:e==="ar"?"المستخدمون النشطون":"Active Users",value:((k=o.stats)==null?void 0:k.activeUsers)||0,valueStyle:{color:"#52c41a"}})})})]}),(o==null?void 0:o.recentAudits)&&o.recentAudits.length>0&&s.jsx(V,{title:e==="ar"?"العمليات الأخيرة":"Recent Activities",children:s.jsx(rt,{columns:S,dataSource:o.recentAudits,rowKey:"id",pagination:!1,size:"small"})})]})},{key:"system-logs",label:e==="ar"?"سجلات النظام":"System Logs",icon:s.jsx(It,{}),children:s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[s.jsxs(B,{value:u,onChange:f,style:{width:150},children:[s.jsx(B.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(B.Option,{value:"INFO",children:"INFO"}),s.jsx(B.Option,{value:"WARNING",children:"WARNING"}),s.jsx(B.Option,{value:"ERROR",children:"ERROR"}),s.jsx(B.Option,{value:"CRITICAL",children:"CRITICAL"})]}),s.jsx(P,{icon:s.jsx(Wr,{}),onClick:x,loading:c.logs,children:e==="ar"?"تحديث":"Refresh"})]}),s.jsx(V,{children:s.jsx(rt,{columns:b,dataSource:r,rowKey:"id",loading:c.logs,pagination:{pageSize:20}})})]})},{key:"audit-logs",label:e==="ar"?"سجلات التدقيق":"Audit Logs",icon:s.jsx(w8,{}),children:s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[s.jsxs(B,{value:h,onChange:p,style:{width:150},children:[s.jsx(B.Option,{value:"all",children:e==="ar"?"الكل":"All"}),s.jsx(B.Option,{value:"CREATE",children:"CREATE"}),s.jsx(B.Option,{value:"UPDATE",children:"UPDATE"}),s.jsx(B.Option,{value:"DELETE",children:"DELETE"}),s.jsx(B.Option,{value:"LOGIN",children:"LOGIN"})]}),s.jsx(P,{icon:s.jsx(Wr,{}),onClick:g,children:e==="ar"?"تحديث":"Refresh"})]}),s.jsx(V,{children:s.jsx(rt,{columns:S,dataSource:a,rowKey:"id",pagination:{pageSize:20}})})]})}];return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:e==="ar"?"المراقبة والأمان":"Monitoring & Security"}),s.jsx("p",{className:"text-gray-500",children:e==="ar"?"مراقبة النظام وسجلات الأمان":"System monitoring and security logs"})]}),s.jsx("h1",{className:"text-3xl font-bold mb-6",children:e==="ar"?"المراقبة والأمان":"Monitoring & Security"}),s.jsx(V,{className:"shadow-lg rounded-xl border-0",children:s.jsx($s,{items:w})})]})},Mne=()=>{const{t,language:e}=Se(),[r,n]=N.useState([]),[a,i]=N.useState([]),[o,l]=N.useState(!1),[c,d]=N.useState(!1),[u,f]=N.useState(null),[h]=E.useForm();N.useEffect(()=>{p(),m()},[]);const p=async()=>{try{l(!0);const v=await ti.getPermissions();n(v.permissions||[])}catch(v){console.error("Error fetching permissions:",v),R.error(e==="ar"?"فشل تحميل الصلاحيات":"Failed to load permissions")}finally{l(!1)}},m=async()=>{try{const v=await ti.getRoles();i(v.roles||[])}catch(v){console.error("Error fetching roles:",v),R.error(e==="ar"?"فشل تحميل الأدوار":"Failed to load roles")}},x=async()=>{try{await ti.initializePermissions(),R.success(e==="ar"?"تم تهيئة الصلاحيات بنجاح":"Permissions initialized successfully"),p()}catch(v){R.error(v.message||(e==="ar"?"فشل تهيئة الصلاحيات":"Failed to initialize permissions"))}},g=async v=>{try{u?(await ti.updateRole(u.id,v),R.success(e==="ar"?"تم تحديث الدور بنجاح":"Role updated successfully")):(await ti.createRole(v),R.success(e==="ar"?"تم إنشاء الدور بنجاح":"Role created successfully")),d(!1),f(null),h.resetFields(),m()}catch(C){R.error(C.message||(e==="ar"?"فشل حفظ الدور":"Failed to save role"))}},y=async v=>{try{await ti.deleteRole(v),R.success(e==="ar"?"تم حذف الدور بنجاح":"Role deleted successfully"),m()}catch(C){R.error(C.message||(e==="ar"?"فشل حذف الدور":"Failed to delete role"))}},j={totalPermissions:r.length,totalRoles:a.length,systemRoles:a.filter(v=>v.isSystem).length,customRoles:a.filter(v=>!v.isSystem).length},b=[{title:e==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",render:(v,C)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ha,{className:"text-olive-green-600"}),s.jsx("span",{className:"font-semibold",children:v}),C.nameAr&&s.jsx(ce,{color:"blue",className:"text-xs",children:C.nameAr})]})},{title:e==="ar"?"المورد":"Resource",dataIndex:"resource",key:"resource",render:v=>s.jsx(ce,{color:"purple",children:v})},{title:e==="ar"?"الإجراء":"Action",dataIndex:"action",key:"action",render:v=>s.jsx(ce,{color:"orange",children:v})},{title:e==="ar"?"الوصف":"Description",dataIndex:"description",key:"description",ellipsis:{showTitle:!1},render:v=>s.jsx(ea,{placement:"topLeft",title:v,children:v||"-"})}],S=[{title:e==="ar"?"الدور":"Role",key:"role",render:(v,C)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-olive-green-400 to-turquoise-400 rounded-lg flex items-center justify-center",children:s.jsx(Mn,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:C.name}),C.nameAr&&s.jsx("div",{className:"text-sm text-gray-500",children:C.nameAr})]})]})},{title:e==="ar"?"الصلاحيات":"Permissions",key:"permissions",render:(v,C)=>{var A,k;return s.jsx(Ga,{count:((A=C.permissions)==null?void 0:A.length)||0,showZero:!0,style:{backgroundColor:"#52c41a"},children:s.jsxs(ce,{color:"green",icon:s.jsx(vt,{}),children:[((k=C.permissions)==null?void 0:k.length)||0," ",e==="ar"?"صلاحية":"permissions"]})})}},{title:e==="ar"?"المستخدمون":"Users",key:"users",render:(v,C)=>{var A,k;return s.jsx(Ga,{count:((A=C._count)==null?void 0:A.userRoles)||0,showZero:!0,style:{backgroundColor:"#1890ff"},children:s.jsxs(ce,{color:"blue",icon:s.jsx(Ee,{}),children:[((k=C._count)==null?void 0:k.userRoles)||0," ",e==="ar"?"مستخدم":"users"]})})}},{title:e==="ar"?"النوع":"Type",key:"type",render:(v,C)=>s.jsx(ce,{color:C.isSystem?"blue":"default",icon:C.isSystem?s.jsx(Jt,{}):s.jsx(Pv,{}),children:C.isSystem?e==="ar"?"نظام":"System":e==="ar"?"مخصص":"Custom"})},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(v,C)=>s.jsxs(he,{children:[s.jsx(ea,{title:e==="ar"?"تعديل":"Edit",children:s.jsx(P,{type:"primary",icon:s.jsx(qr,{}),onClick:()=>{var A;f(C),h.setFieldsValue({name:C.name,nameAr:C.nameAr,description:C.description,permissionIds:((A=C.permissions)==null?void 0:A.map(k=>k.permissionId))||[]}),d(!0)}})}),!C.isSystem&&s.jsx(Os,{title:e==="ar"?"حذف الدور":"Delete Role",description:e==="ar"?"هل أنت متأكد من حذف هذا الدور؟":"Are you sure you want to delete this role?",onConfirm:()=>y(C.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:s.jsx(ea,{title:e==="ar"?"حذف":"Delete",children:s.jsx(P,{danger:!0,icon:s.jsx(Vn,{})})})})]})}],w=[{key:"permissions",label:s.jsxs("span",{children:[s.jsx(ha,{className:"mr-2"}),e==="ar"?"الصلاحيات":"Permissions"]}),children:s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[s.jsx(P,{icon:s.jsx(Wr,{}),onClick:p,loading:o,children:e==="ar"?"تحديث":"Refresh"}),s.jsx(P,{type:"primary",icon:s.jsx(vt,{}),onClick:x,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"تهيئة الصلاحيات الافتراضية":"Initialize Default Permissions"})]}),s.jsx(V,{className:"shadow-sm",children:s.jsx(rt,{columns:b,dataSource:r,rowKey:"id",loading:o,pagination:{pageSize:20}})})]})},{key:"roles",label:s.jsxs("span",{children:[s.jsx(Mn,{className:"mr-2"}),e==="ar"?"الأدوار":"Roles"]}),children:s.jsxs("div",{children:[s.jsx("div",{className:"mb-6 flex justify-end",children:s.jsx(P,{type:"primary",icon:s.jsx($r,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{f(null),h.resetFields(),d(!0)},children:e==="ar"?"إضافة دور":"Add Role"})}),s.jsx(V,{className:"shadow-sm",children:s.jsx(rt,{columns:S,dataSource:a,rowKey:"id",pagination:{pageSize:10}})})]})}];return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:e==="ar"?"الصلاحيات والأدوار":"Permissions & Roles"}),s.jsx("p",{className:"text-gray-500 text-lg",children:e==="ar"?"إدارة الصلاحيات والأدوار للمستخدمين والتحكم في الوصول":"Manage user permissions and roles, control access"})]}),s.jsxs(le,{gutter:[16,16],className:"mb-6",children:[s.jsx(_,{xs:24,sm:12,lg:6,children:s.jsx(V,{className:"shadow-sm border-l-4 border-l-blue-500",children:s.jsx(Fe,{title:e==="ar"?"إجمالي الصلاحيات":"Total Permissions",value:j.totalPermissions,prefix:s.jsx(ha,{className:"text-blue-500"}),valueStyle:{color:"#1890ff"}})})}),s.jsx(_,{xs:24,sm:12,lg:6,children:s.jsx(V,{className:"shadow-sm border-l-4 border-l-green-500",children:s.jsx(Fe,{title:e==="ar"?"إجمالي الأدوار":"Total Roles",value:j.totalRoles,prefix:s.jsx(Mn,{className:"text-green-500"}),valueStyle:{color:"#52c41a"}})})}),s.jsx(_,{xs:24,sm:12,lg:6,children:s.jsx(V,{className:"shadow-sm border-l-4 border-l-purple-500",children:s.jsx(Fe,{title:e==="ar"?"أدوار النظام":"System Roles",value:j.systemRoles,prefix:s.jsx(Jt,{className:"text-purple-500"}),valueStyle:{color:"#722ed1"}})})}),s.jsx(_,{xs:24,sm:12,lg:6,children:s.jsx(V,{className:"shadow-sm border-l-4 border-l-orange-500",children:s.jsx(Fe,{title:e==="ar"?"أدوار مخصصة":"Custom Roles",value:j.customRoles,prefix:s.jsx(Pv,{className:"text-orange-500"}),valueStyle:{color:"#fa8c16"}})})})]}),s.jsx(V,{className:"shadow-lg rounded-xl border-0",children:s.jsx($s,{items:w,size:"large"})}),s.jsx(Ye,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"text-olive-green-600"}),s.jsx("span",{children:u?e==="ar"?"تعديل الدور":"Edit Role":e==="ar"?"إضافة دور":"Add Role"})]}),open:c,onCancel:()=>{d(!1),f(null),h.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:800,destroyOnHidden:!0,className:"modern-modal",children:s.jsxs(E,{form:h,layout:"vertical",onFinish:g,className:"mt-4",children:[s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"name",label:e==="ar"?"الاسم":"Name",rules:[{required:!0,message:e==="ar"?"الرجاء إدخال الاسم":"Please enter name"}],children:s.jsx(F,{placeholder:e==="ar"?"اسم الدور":"Role name",prefix:s.jsx(Mn,{})})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"nameAr",label:e==="ar"?"الاسم (عربي)":"Name (Arabic)",children:s.jsx(F,{placeholder:e==="ar"?"اسم الدور بالعربية":"Role name in Arabic"})})})]}),s.jsx(E.Item,{name:"description",label:e==="ar"?"الوصف":"Description",children:s.jsx(F.TextArea,{rows:3,placeholder:e==="ar"?"وصف الدور":"Role description"})}),s.jsxs(Rt,{orientation:"left",children:[s.jsx(ha,{className:"mr-2"}),e==="ar"?"الصلاحيات":"Permissions"]}),s.jsx(E.Item,{name:"permissionIds",label:e==="ar"?"اختر الصلاحيات":"Select Permissions",children:s.jsx(ca.Group,{className:"w-full",children:s.jsx(le,{gutter:[16,16],children:r.map(v=>s.jsx(_,{xs:24,sm:12,lg:8,children:s.jsx(ca,{value:v.id,className:"w-full",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ha,{className:"text-olive-green-600"}),s.jsx("span",{className:"font-medium",children:v.nameAr||v.name}),s.jsx(ce,{color:"purple",className:"text-xs",children:v.resource})]})})},v.id))})})}),s.jsx(Rt,{}),s.jsx(E.Item,{className:"mb-0",children:s.jsxs(he,{className:"w-full justify-end",children:[s.jsx(P,{onClick:()=>{d(!1),f(null),h.resetFields()},children:e==="ar"?"إلغاء":"Cancel"}),s.jsx(P,{type:"primary",htmlType:"submit",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",icon:u?s.jsx(qr,{}):s.jsx($r,{}),children:u?e==="ar"?"تحديث":"Update":e==="ar"?"إنشاء":"Create"})]})})]})})]})},{TextArea:Vw}=F,$ne=()=>{var v,C,A,k,O,$,M;const{id:t}=Aa(),e=st(),{language:r}=Se(),[n,a]=N.useState(!0),[i,o]=N.useState(null),[l,c]=N.useState([]),[d,u]=N.useState([]),[f,h]=N.useState([]),[p,m]=N.useState({deduction:!1,suspend:!1}),[x]=E.useForm();N.useEffect(()=>{g()},[t]);const g=async()=>{try{a(!0);const[T,I,z,U]=await Promise.all([Ke.getClientById(t),Ke.getClientBookings(t),Ke.getClientPayments(t),Ke.getClientReports(t)]);o(T.client),c(I.bookings||[]),u(z.payments||[]),h(U.reports||[])}catch(T){console.error("Error fetching client details:",T),R.error(T.message||(r==="ar"?"فشل تحميل البيانات":"Failed to load data"))}finally{a(!1)}},y=async T=>{try{await Ke.deductFromClient(t,T.amount,T.reason),R.success(r==="ar"?"تم خصم المبلغ بنجاح":"Amount deducted successfully"),m({...p,deduction:!1}),x.resetFields(),g()}catch(I){R.error(I.message||(r==="ar"?"فشل الخصم":"Failed to deduct"))}},j=async T=>{try{await Ke.suspendClient(t,T.reason,T.duration),R.success(r==="ar"?"تم تعليق الحساب بنجاح":"Account suspended successfully"),m({...p,suspend:!1}),x.resetFields(),g()}catch(I){R.error(I.message||(r==="ar"?"فشل تعليق الحساب":"Failed to suspend account"))}},b=[{title:r==="ar"?"التاريخ":"Date",dataIndex:"scheduledAt",key:"scheduledAt",render:T=>fe(T).format("YYYY-MM-DD HH:mm")},{title:r==="ar"?"المستشار":"Consultant",dataIndex:"consultantName",key:"consultantName"},{title:r==="ar"?"الخدمة":"Service",dataIndex:"serviceName",key:"serviceName"},{title:r==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:T=>{const I={PENDING:"orange",CONFIRMED:"blue",COMPLETED:"green",CANCELLED:"red"};return s.jsx(ce,{color:I[T],children:T})}},{title:r==="ar"?"السعر":"Price",dataIndex:"price",key:"price",render:T=>`${T} SAR`}],S=[{title:r==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:T=>fe(T).format("YYYY-MM-DD HH:mm")},{title:r==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:T=>`${T} SAR`},{title:r==="ar"?"الطريقة":"Method",dataIndex:"method",key:"method"},{title:r==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:T=>{const I={PENDING:"orange",COMPLETED:"green",FAILED:"red",REFUNDED:"blue"};return s.jsx(ce,{color:I[T],children:T})}},{title:r==="ar"?"رقم المعاملة":"Transaction ID",dataIndex:"transactionId",key:"transactionId"}];if(n)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})});if(!i)return s.jsx(Mr,{message:r==="ar"?"العميل غير موجود":"Client not found",type:"error",action:s.jsx(P,{onClick:()=>e("/admin/clients"),children:r==="ar"?"العودة":"Go Back"})});const w=[{key:"overview",label:r==="ar"?"نظرة عامة":"Overview",icon:s.jsx(Ee,{}),children:s.jsx(V,{children:s.jsxs(be,{title:r==="ar"?"معلومات العميل":"Client Information",column:2,children:[s.jsxs(be.Item,{label:r==="ar"?"الاسم الكامل":"Full Name",children:[i.firstName," ",i.lastName]}),s.jsx(be.Item,{label:r==="ar"?"البريد الإلكتروني":"Email",children:(v=i.user)==null?void 0:v.email}),s.jsx(be.Item,{label:r==="ar"?"رقم الهاتف":"Phone",children:((C=i.user)==null?void 0:C.phone)||"-"}),s.jsx(be.Item,{label:r==="ar"?"المدينة":"City",children:i.city||"-"}),s.jsx(be.Item,{label:r==="ar"?"القطاع":"Sector",children:i.sector||"-"}),s.jsx(be.Item,{label:r==="ar"?"اسم الشركة":"Company Name",children:i.companyName||"-"}),s.jsx(be.Item,{label:r==="ar"?"الحالة":"Status",children:s.jsx(ce,{color:(A=i.user)!=null&&A.isActive?"green":"red",children:(k=i.user)!=null&&k.isActive?r==="ar"?"نشط":"Active":r==="ar"?"معلق":"Suspended"})}),s.jsx(be.Item,{label:r==="ar"?"تاريخ التسجيل":"Registration Date",children:fe(i.createdAt).format("YYYY-MM-DD")})]})})},{key:"bookings",label:r==="ar"?"الحجوزات":"Bookings",icon:s.jsx(Ft,{}),children:s.jsx(rt,{columns:b,dataSource:l,rowKey:"id",pagination:{pageSize:10}})},{key:"payments",label:r==="ar"?"المدفوعات":"Payments",icon:s.jsx(ir,{}),children:s.jsx(rt,{columns:S,dataSource:d,rowKey:"id",pagination:{pageSize:10}})},{key:"reports",label:r==="ar"?"التقارير":"Reports",icon:s.jsx(It,{}),children:s.jsx("div",{children:f.map(T=>s.jsxs(V,{className:"mb-4",children:[s.jsx("h3",{children:T.title}),s.jsx("p",{className:"text-gray-600",children:T.summary}),s.jsx(ce,{children:T.status})]},T.id))})}];return s.jsx("div",{className:"min-h-screen bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(P,{icon:s.jsx(Di,{}),onClick:()=>e("/admin/clients"),children:r==="ar"?"العودة":"Back"}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[i.firstName," ",i.lastName]}),s.jsx("p",{className:"text-gray-500",children:(O=i.user)==null?void 0:O.email})]})]}),s.jsxs(he,{children:[s.jsx(P,{icon:s.jsx(YS,{}),onClick:()=>m({...p,deduction:!0}),children:r==="ar"?"خصم":"Deduction"}),s.jsx(P,{danger:!0,icon:s.jsx(ko,{}),onClick:()=>m({...p,suspend:!0}),children:r==="ar"?"تعليق الحساب":"Suspend Account"})]})]}),s.jsxs(le,{gutter:16,className:"mb-6",children:[s.jsx(_,{span:6,children:s.jsx(V,{children:s.jsx(Fe,{title:r==="ar"?"إجمالي الحجوزات":"Total Bookings",value:l.length,prefix:s.jsx(Ft,{})})})}),s.jsx(_,{span:6,children:s.jsx(V,{children:s.jsx(Fe,{title:r==="ar"?"إجمالي المدفوعات":"Total Payments",value:d.reduce((T,I)=>T+(parseFloat(I.amount)||0),0),prefix:s.jsx(ir,{}),suffix:"SAR"})})}),s.jsx(_,{span:6,children:s.jsx(V,{children:s.jsx(Fe,{title:r==="ar"?"التقارير":"Reports",value:f.length,prefix:s.jsx(It,{})})})}),s.jsx(_,{span:6,children:s.jsx(V,{children:s.jsx(Fe,{title:r==="ar"?"الحالة":"Status",value:($=i.user)!=null&&$.isActive?r==="ar"?"نشط":"Active":r==="ar"?"معلق":"Suspended",valueStyle:{color:(M=i.user)!=null&&M.isActive?"#52c41a":"#ff4d4f"}})})})]}),s.jsx(V,{children:s.jsx($s,{items:w})}),s.jsx(Ye,{title:r==="ar"?"خصم من العميل":"Deduct from Client",open:p.deduction,onCancel:()=>{m({...p,deduction:!1}),x.resetFields()},footer:null,children:s.jsxs(E,{form:x,onFinish:y,layout:"vertical",children:[s.jsx(E.Item,{name:"amount",label:r==="ar"?"المبلغ":"Amount",rules:[{required:!0,type:"number",min:.01}],children:s.jsx(Fa,{prefix:"SAR",style:{width:"100%"},min:.01,step:.01})}),s.jsx(E.Item,{name:"reason",label:r==="ar"?"السبب":"Reason",rules:[{required:!0}],children:s.jsx(Vw,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",danger:!0,block:!0,children:r==="ar"?"خصم":"Deduct"})})]})}),s.jsx(Ye,{title:r==="ar"?"تعليق حساب العميل":"Suspend Client Account",open:p.suspend,onCancel:()=>{m({...p,suspend:!1}),x.resetFields()},footer:null,children:s.jsxs(E,{form:x,onFinish:j,layout:"vertical",children:[s.jsx(E.Item,{name:"reason",label:r==="ar"?"السبب":"Reason",rules:[{required:!0}],children:s.jsx(Vw,{rows:4})}),s.jsx(E.Item,{name:"duration",label:r==="ar"?"المدة (أيام)":"Duration (days)",rules:[{required:!0,type:"number",min:1}],children:s.jsx(Fa,{style:{width:"100%"},min:1,placeholder:r==="ar"?"0 = دائم":"0 = Permanent"})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",danger:!0,block:!0,children:r==="ar"?"تعليق":"Suspend"})})]})})]})})},{TextArea:Sm}=F,Rne=()=>{var O,$,M,T;const{id:t}=Aa(),e=st(),{language:r}=Se(),[n,a]=N.useState(!0),[i,o]=N.useState(null),[l,c]=N.useState([]),[d,u]=N.useState([]),[f,h]=N.useState([]),[p,m]=N.useState({profit:!1,deduction:!1,suspend:!1}),[x]=E.useForm();N.useEffect(()=>{g()},[t]);const g=async()=>{try{a(!0);const[I,z,U,Y]=await Promise.all([Ke.getConsultantById(t),Ke.getConsultantBookings(t),Ke.getConsultantEarnings(t),Ke.getConsultantWithdrawals(t)]);o(I.consultant),c(z.bookings||[]),u(U.earnings||[]),h(Y.withdrawals||[])}catch(I){console.error("Error fetching consultant details:",I),R.error(I.message||(r==="ar"?"فشل تحميل البيانات":"Failed to load data"))}finally{a(!1)}},y=async I=>{try{await Ke.sendProfitToConsultant(t,I.amount,I.notes),R.success(r==="ar"?"تم إرسال الربح بنجاح":"Profit sent successfully"),m({...p,profit:!1}),x.resetFields(),g()}catch(z){R.error(z.message||(r==="ar"?"فشل إرسال الربح":"Failed to send profit"))}},j=async I=>{try{await Ke.deductFromConsultant(t,I.amount,I.reason),R.success(r==="ar"?"تم خصم المبلغ بنجاح":"Amount deducted successfully"),m({...p,deduction:!1}),x.resetFields(),g()}catch(z){R.error(z.message||(r==="ar"?"فشل الخصم":"Failed to deduct"))}},b=async I=>{try{await Ke.suspendConsultant(t,I.reason,I.duration),R.success(r==="ar"?"تم تعليق الحساب بنجاح":"Account suspended successfully"),m({...p,suspend:!1}),x.resetFields(),g()}catch(z){R.error(z.message||(r==="ar"?"فشل تعليق الحساب":"Failed to suspend account"))}},S=[{title:r==="ar"?"التاريخ":"Date",dataIndex:"scheduledAt",key:"scheduledAt",render:I=>fe(I).format("YYYY-MM-DD HH:mm")},{title:r==="ar"?"العميل":"Client",dataIndex:"clientName",key:"clientName"},{title:r==="ar"?"الخدمة":"Service",dataIndex:"serviceName",key:"serviceName"},{title:r==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:I=>{const z={PENDING:"orange",CONFIRMED:"blue",COMPLETED:"green",CANCELLED:"red"};return s.jsx(ce,{color:z[I],children:I})}},{title:r==="ar"?"السعر":"Price",dataIndex:"price",key:"price",render:I=>`${I} SAR`}],w=[{title:r==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:I=>fe(I).format("YYYY-MM-DD HH:mm")},{title:r==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:I=>`${I} SAR`},{title:r==="ar"?"العمولة":"Platform Fee",dataIndex:"platformFee",key:"platformFee",render:I=>`${I} SAR`},{title:r==="ar"?"صافي المبلغ":"Net Amount",dataIndex:"netAmount",key:"netAmount",render:I=>`${I} SAR`},{title:r==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:I=>{const z={pending:"orange",available:"green",withdrawn:"blue"};return s.jsx(ce,{color:z[I],children:I})}}],v=[{title:r==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:I=>fe(I).format("YYYY-MM-DD HH:mm")},{title:r==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:I=>`${I} SAR`},{title:r==="ar"?"اسم البنك":"Bank Name",dataIndex:"bankName",key:"bankName"},{title:r==="ar"?"رقم الحساب":"Account Number",dataIndex:"accountNumber",key:"accountNumber"},{title:r==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:I=>{const z={PENDING:"orange",APPROVED:"green",REJECTED:"red",COMPLETED:"blue"};return s.jsx(ce,{color:z[I],children:I})}}];if(n)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})});if(!i)return s.jsx(Mr,{message:r==="ar"?"المستشار غير موجود":"Consultant not found",type:"error",action:s.jsx(P,{onClick:()=>e("/admin/consultants"),children:r==="ar"?"العودة":"Go Back"})});const C=d.reduce((I,z)=>I+(parseFloat(z.netAmount)||0),0),A=d.filter(I=>I.status==="available").reduce((I,z)=>I+(parseFloat(z.netAmount)||0),0),k=[{key:"overview",label:r==="ar"?"نظرة عامة":"Overview",children:s.jsxs(V,{children:[s.jsxs(be,{title:r==="ar"?"معلومات المستشار":"Consultant Information",column:2,children:[s.jsxs(be.Item,{label:r==="ar"?"الاسم الكامل":"Full Name",children:[i.firstName," ",i.lastName]}),s.jsx(be.Item,{label:r==="ar"?"البريد الإلكتروني":"Email",children:(O=i.user)==null?void 0:O.email}),s.jsx(be.Item,{label:r==="ar"?"الدرجة العلمية":"Academic Degree",children:i.academicDegree}),s.jsx(be.Item,{label:r==="ar"?"التخصص":"Specialization",children:i.specialization}),s.jsxs(be.Item,{label:r==="ar"?"سعر الجلسة":"Price Per Session",children:[i.pricePerSession," SAR"]}),s.jsxs(be.Item,{label:r==="ar"?"التقييم":"Rating",children:[s.jsx(Ya,{disabled:!0,value:i.rating||0,allowHalf:!0}),s.jsxs("span",{className:"ml-2",children:["(",i.totalRatings||0," ",r==="ar"?"تقييم":"ratings",")"]})]}),s.jsx(be.Item,{label:r==="ar"?"الحالة":"Status",children:s.jsxs(he,{children:[s.jsx(ce,{color:($=i.user)!=null&&$.isActive?"green":"red",children:(M=i.user)!=null&&M.isActive?r==="ar"?"نشط":"Active":r==="ar"?"معلق":"Suspended"}),i.isVerified&&s.jsx(ce,{color:"blue",icon:s.jsx(kS,{}),children:r==="ar"?"موثق":"Verified"}),s.jsx(ce,{color:i.isAvailable?"green":"orange",children:i.isAvailable?r==="ar"?"متاح":"Available":r==="ar"?"غير متاح":"Unavailable"})]})}),s.jsxs(be.Item,{label:r==="ar"?"إجمالي الأرباح":"Total Earnings",children:[i.totalEarnings||0," SAR"]})]}),i.bio&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"font-bold mb-2",children:r==="ar"?"السيرة الذاتية":"Bio"}),s.jsx("p",{className:"text-gray-600",children:i.bio})]})]})},{key:"bookings",label:r==="ar"?"الحجوزات":"Bookings",children:s.jsx(rt,{columns:S,dataSource:l,rowKey:"id",pagination:{pageSize:10}})},{key:"earnings",label:r==="ar"?"الأرباح":"Earnings",children:s.jsx(rt,{columns:w,dataSource:d,rowKey:"id",pagination:{pageSize:10}})},{key:"withdrawals",label:r==="ar"?"السحوبات":"Withdrawals",children:s.jsx(rt,{columns:v,dataSource:f,rowKey:"id",pagination:{pageSize:10}})}];return s.jsx("div",{className:"min-h-screen bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(P,{icon:s.jsx(Di,{}),onClick:()=>e("/admin/consultants"),children:r==="ar"?"العودة":"Back"}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[i.firstName," ",i.lastName]}),s.jsx("p",{className:"text-gray-500",children:(T=i.user)==null?void 0:T.email})]})]}),s.jsxs(he,{children:[s.jsx(P,{type:"primary",icon:s.jsx(wP,{}),onClick:()=>m({...p,profit:!0}),children:r==="ar"?"إرسال ربح":"Send Profit"}),s.jsx(P,{icon:s.jsx(YS,{}),onClick:()=>m({...p,deduction:!0}),children:r==="ar"?"خصم":"Deduction"}),s.jsx(P,{danger:!0,icon:s.jsx(ko,{}),onClick:()=>m({...p,suspend:!0}),children:r==="ar"?"تعليق الحساب":"Suspend Account"})]})]}),s.jsxs(le,{gutter:16,className:"mb-6",children:[s.jsx(_,{span:6,children:s.jsx(V,{children:s.jsx(Fe,{title:r==="ar"?"إجمالي الحجوزات":"Total Bookings",value:l.length,prefix:s.jsx(Ft,{})})})}),s.jsx(_,{span:6,children:s.jsx(V,{children:s.jsx(Fe,{title:r==="ar"?"إجمالي الأرباح":"Total Earnings",value:C,prefix:s.jsx(ir,{}),suffix:"SAR"})})}),s.jsx(_,{span:6,children:s.jsx(V,{children:s.jsx(Fe,{title:r==="ar"?"الأرباح المتاحة":"Available Earnings",value:A,prefix:s.jsx(v8,{}),suffix:"SAR",valueStyle:{color:"#52c41a"}})})}),s.jsx(_,{span:6,children:s.jsx(V,{children:s.jsx(Fe,{title:r==="ar"?"التقييم":"Rating",value:i.rating||0,prefix:s.jsx(Co,{}),suffix:"/ 5",valueStyle:{color:"#faad14"}})})})]}),s.jsx(V,{children:s.jsx($s,{items:k})}),s.jsx(Ye,{title:r==="ar"?"إرسال ربح للمستشار":"Send Profit to Consultant",open:p.profit,onCancel:()=>{m({...p,profit:!1}),x.resetFields()},footer:null,children:s.jsxs(E,{form:x,onFinish:y,layout:"vertical",children:[s.jsx(E.Item,{name:"amount",label:r==="ar"?"المبلغ":"Amount",rules:[{required:!0,type:"number",min:.01}],children:s.jsx(Fa,{prefix:"SAR",style:{width:"100%"},min:.01,step:.01})}),s.jsx(E.Item,{name:"notes",label:r==="ar"?"ملاحظات":"Notes",children:s.jsx(Sm,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:r==="ar"?"إرسال":"Send"})})]})}),s.jsx(Ye,{title:r==="ar"?"خصم من المستشار":"Deduct from Consultant",open:p.deduction,onCancel:()=>{m({...p,deduction:!1}),x.resetFields()},footer:null,children:s.jsxs(E,{form:x,onFinish:j,layout:"vertical",children:[s.jsx(E.Item,{name:"amount",label:r==="ar"?"المبلغ":"Amount",rules:[{required:!0,type:"number",min:.01}],children:s.jsx(Fa,{prefix:"SAR",style:{width:"100%"},min:.01,step:.01})}),s.jsx(E.Item,{name:"reason",label:r==="ar"?"السبب":"Reason",rules:[{required:!0}],children:s.jsx(Sm,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",danger:!0,block:!0,children:r==="ar"?"خصم":"Deduct"})})]})}),s.jsx(Ye,{title:r==="ar"?"تعليق حساب المستشار":"Suspend Consultant Account",open:p.suspend,onCancel:()=>{m({...p,suspend:!1}),x.resetFields()},footer:null,children:s.jsxs(E,{form:x,onFinish:b,layout:"vertical",children:[s.jsx(E.Item,{name:"reason",label:r==="ar"?"السبب":"Reason",rules:[{required:!0}],children:s.jsx(Sm,{rows:4})}),s.jsx(E.Item,{name:"duration",label:r==="ar"?"المدة (أيام)":"Duration (days)",rules:[{required:!0,type:"number",min:1}],children:s.jsx(Fa,{style:{width:"100%"},min:1,placeholder:r==="ar"?"0 = دائم":"0 = Permanent"})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",danger:!0,block:!0,children:r==="ar"?"تعليق":"Suspend"})})]})})]})})};var BA={exports:{}},UA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rl=N;function Dne(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _ne=typeof Object.is=="function"?Object.is:Dne,Lne=rl.useState,zne=rl.useEffect,Fne=rl.useLayoutEffect,Bne=rl.useDebugValue;function Une(t,e){var r=e(),n=Lne({inst:{value:r,getSnapshot:e}}),a=n[0].inst,i=n[1];return Fne(function(){a.value=r,a.getSnapshot=e,Nm(a)&&i({inst:a})},[t,r,e]),zne(function(){return Nm(a)&&i({inst:a}),t(function(){Nm(a)&&i({inst:a})})},[t]),Bne(r),r}function Nm(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!_ne(t,r)}catch{return!0}}function Vne(t,e){return e()}var Hne=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Vne:Une;UA.useSyncExternalStore=rl.useSyncExternalStore!==void 0?rl.useSyncExternalStore:Hne;BA.exports=UA;var Cy=BA.exports;function wr(t){this.content=t}wr.prototype={constructor:wr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,a=n.find(t),i=n.content.slice();return a==-1?i.push(r||t,e):(i[a+1]=e,r&&(i[a]=r)),new wr(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new wr(r)},addToStart:function(t,e){return new wr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new wr(r)},addBefore:function(t,e,r){var n=this.remove(e),a=n.content.slice(),i=n.find(t);return a.splice(i==-1?a.length:i,0,e,r),new wr(a)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=wr.from(t),t.size?new wr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=wr.from(t),t.size?new wr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=wr.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};wr.from=function(t){if(t instanceof wr)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new wr(e)};function VA(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let a=t.child(n),i=e.child(n);if(a==i){r+=a.nodeSize;continue}if(!a.sameMarkup(i))return r;if(a.isText&&a.text!=i.text){for(let o=0;a.text[o]==i.text[o];o++)r++;return r}if(a.content.size||i.content.size){let o=VA(a.content,i.content,r+1);if(o!=null)return o}r+=a.nodeSize}}function HA(t,e,r,n){for(let a=t.childCount,i=e.childCount;;){if(a==0||i==0)return a==i?null:{a:r,b:n};let o=t.child(--a),l=e.child(--i),c=o.nodeSize;if(o==l){r-=c,n-=c;continue}if(!o.sameMarkup(l))return{a:r,b:n};if(o.isText&&o.text!=l.text){let d=0,u=Math.min(o.text.length,l.text.length);for(;d<u&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,r--,n--;return{a:r,b:n}}if(o.content.size||l.content.size){let d=HA(o.content,l.content,r-1,n-1);if(d)return d}r-=c,n-=c}}class re{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,a=0,i){for(let o=0,l=0;l<r;o++){let c=this.content[o],d=l+c.nodeSize;if(d>e&&n(c,a+l,i||null,o)!==!1&&c.content.size){let u=l+1;c.nodesBetween(Math.max(0,e-u),Math.min(c.content.size,r-u),n,a+u)}l=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,a){let i="",o=!0;return this.nodesBetween(e,r,(l,c)=>{let d=l.isText?l.text.slice(Math.max(e,c)-c,r-c):l.isLeaf?a?typeof a=="function"?a(l):a:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&n&&(o?o=!1:i+=n),i+=d},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,a=this.content.slice(),i=0;for(r.isText&&r.sameMarkup(n)&&(a[a.length-1]=r.withText(r.text+n.text),i=1);i<e.content.length;i++)a.push(e.content[i]);return new re(a,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],a=0;if(r>e)for(let i=0,o=0;o<r;i++){let l=this.content[i],c=o+l.nodeSize;c>e&&((o<e||c>r)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,r-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,r-o-1))),n.push(l),a+=l.nodeSize),o=c}return new re(n,a)}cutByIndex(e,r){return e==r?re.empty:e==0&&r==this.content.length?this:new re(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let a=this.content.slice(),i=this.size+r.nodeSize-n.nodeSize;return a[e]=r,new re(a,i)}addToStart(e){return new re([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new re(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let a=this.content[r];e(a,n,r),n+=a.nodeSize}}findDiffStart(e,r=0){return VA(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return HA(this,e,r,n)}findIndex(e){if(e==0)return nu(0,e);if(e==this.size)return nu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let a=this.child(r),i=n+a.nodeSize;if(i>=e)return i==e?nu(r+1,i):nu(r,n);n=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return re.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new re(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return re.empty;let r,n=0;for(let a=0;a<e.length;a++){let i=e[a];n+=i.nodeSize,a&&i.isText&&e[a-1].sameMarkup(i)?(r||(r=e.slice(0,a)),r[r.length-1]=i.withText(r[r.length-1].text+i.text)):r&&r.push(i)}return new re(r||e,n)}static from(e){if(!e)return re.empty;if(e instanceof re)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new re([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}re.empty=new re([],0);const Am={index:0,offset:0};function nu(t,e){return Am.index=t,Am.offset=e,Am}function Pf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Pf(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Pf(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let bt=class Ex{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let a=0;a<e.length;a++){let i=e[a];if(this.eq(i))return e;if(this.type.excludes(i.type))r||(r=e.slice(0,a));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(r||(r=e.slice(0,a)),r.push(this),n=!0),r&&r.push(i)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Pf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let a=n.create(r.attrs);return n.checkAttrs(a.attrs),a}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ex.none;if(e instanceof Ex)return[e];let r=e.slice();return r.sort((n,a)=>n.type.rank-a.type.rank),r}};bt.none=[];class Tf extends Error{}class xe{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=qA(this.content,e+this.openStart,r);return n&&new xe(n,this.openStart,this.openEnd)}removeBetween(e,r){return new xe(WA(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return xe.empty;let n=r.openStart||0,a=r.openEnd||0;if(typeof n!="number"||typeof a!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new xe(re.fromJSON(e,r.content),n,a)}static maxOpen(e,r=!0){let n=0,a=0;for(let i=e.firstChild;i&&!i.isLeaf&&(r||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(r||!i.type.spec.isolating);i=i.lastChild)a++;return new xe(e,n,a)}}xe.empty=new xe(re.empty,0,0);function WA(t,e,r){let{index:n,offset:a}=t.findIndex(e),i=t.maybeChild(n),{index:o,offset:l}=t.findIndex(r);if(a==e||i.isText){if(l!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,i.copy(WA(i.content,e-a-1,r-a-1)))}function qA(t,e,r,n){let{index:a,offset:i}=t.findIndex(e),o=t.maybeChild(a);if(i==e||o.isText)return n&&!n.canReplace(a,a,r)?null:t.cut(0,e).append(r).append(t.cut(e));let l=qA(o.content,e-i-1,r,o);return l&&t.replaceChild(a,o.copy(l))}function Wne(t,e,r){if(r.openStart>t.depth)throw new Tf("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new Tf("Inconsistent open depths");return YA(t,e,r,0)}function YA(t,e,r,n){let a=t.index(n),i=t.node(n);if(a==e.index(n)&&n<t.depth-r.openStart){let o=YA(t,e,r,n+1);return i.copy(i.content.replaceChild(a,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,l=o.content;return bi(o,l.cut(0,t.parentOffset).append(r.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=qne(r,t);return bi(i,KA(t,o,l,e,n))}else return bi(i,If(t,e,n))}function GA(t,e){if(!e.type.compatibleContent(t.type))throw new Tf("Cannot join "+e.type.name+" onto "+t.type.name)}function Px(t,e,r){let n=t.node(r);return GA(n,e.node(r)),n}function vi(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function sc(t,e,r,n){let a=(e||t).node(r),i=0,o=e?e.index(r):a.childCount;t&&(i=t.index(r),t.depth>r?i++:t.textOffset&&(vi(t.nodeAfter,n),i++));for(let l=i;l<o;l++)vi(a.child(l),n);e&&e.depth==r&&e.textOffset&&vi(e.nodeBefore,n)}function bi(t,e){return t.type.checkContent(e),t.copy(e)}function KA(t,e,r,n,a){let i=t.depth>a&&Px(t,e,a+1),o=n.depth>a&&Px(r,n,a+1),l=[];return sc(null,t,a,l),i&&o&&e.index(a)==r.index(a)?(GA(i,o),vi(bi(i,KA(t,e,r,n,a+1)),l)):(i&&vi(bi(i,If(t,e,a+1)),l),sc(e,r,a,l),o&&vi(bi(o,If(r,n,a+1)),l)),sc(n,null,a,l),new re(l)}function If(t,e,r){let n=[];if(sc(null,t,r,n),t.depth>r){let a=Px(t,e,r+1);vi(bi(a,If(t,e,r+1)),n)}return sc(e,null,r,n),new re(n)}function qne(t,e){let r=e.depth-t.openStart,a=e.node(r).copy(t.content);for(let i=r-1;i>=0;i--)a=e.node(i).copy(re.from(a));return{start:a.resolveNoCache(t.openStart+r),end:a.resolveNoCache(a.content.size-t.openEnd-r)}}class rd{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],a=e.child(r);return n?e.child(r).cut(n):a}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],a=r==0?0:this.path[r*3-1]+1;for(let i=0;i<e;i++)a+=n.child(i).nodeSize;return a}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return bt.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),a=e.maybeChild(r);if(!n){let l=n;n=a,a=l}let i=n.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!a||!i[o].isInSet(a.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,a=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)n[i].type.spec.inclusive===!1&&(!a||!n[i].isInSet(a.marks))&&(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new Mf(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],a=0,i=r;for(let o=e;;){let{index:l,offset:c}=o.content.findIndex(i),d=i-c;if(n.push(o,l,a+c),!d||(o=o.child(l),o.isText))break;i=d-1,a+=c+1}return new rd(r,n,i)}static resolveCached(e,r){let n=Hw.get(e);if(n)for(let i=0;i<n.elts.length;i++){let o=n.elts[i];if(o.pos==r)return o}else Hw.set(e,n=new Yne);let a=n.elts[n.i]=rd.resolve(e,r);return n.i=(n.i+1)%Gne,a}}class Yne{constructor(){this.elts=[],this.i=0}}const Gne=12,Hw=new WeakMap;class Mf{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Kne=Object.create(null);class aa{constructor(e,r,n,a=bt.none){this.type=e,this.attrs=r,this.marks=a,this.content=n||re.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,a=0){this.content.nodesBetween(e,r,n,a,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,a){return this.content.textBetween(e,r,n,a)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&Pf(this.attrs,r||e.defaultAttrs||Kne)&&bt.sameSet(this.marks,n||bt.none)}copy(e=null){return e==this.content?this:new aa(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new aa(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return xe.empty;let a=this.resolve(e),i=this.resolve(r),o=n?0:a.sharedDepth(r),l=a.start(o),d=a.node(o).content.cut(a.pos-l,i.pos-l);return new xe(d,a.depth-o,i.depth-o)}replace(e,r,n){return Wne(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:a}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(a==e||r.isText)return r;e-=a+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let a=this.content.child(r-1);return{node:a,index:r-1,offset:n-a.nodeSize}}resolve(e){return rd.resolveCached(this,e)}resolveNoCache(e){return rd.resolve(this,e)}rangeHasMark(e,r,n){let a=!1;return r>e&&this.nodesBetween(e,r,i=>(n.isInSet(i.marks)&&(a=!0),!a)),a}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),JA(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=re.empty,a=0,i=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,a,i),l=o&&o.matchFragment(this.content,r);if(!l||!l.validEnd)return!1;for(let c=a;c<i;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0}canReplaceWith(e,r,n,a){if(a&&!this.type.allowsMarks(a))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=bt.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!bt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let a=re.fromJSON(e,r.content),i=e.nodeType(r.type).create(r.attrs,a,n);return i.type.checkAttrs(i.attrs),i}}aa.prototype.text=void 0;class $f extends aa{constructor(e,r,n,a){if(super(e,r,null,a),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):JA(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new $f(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new $f(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function JA(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Ti{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new Jne(e,r);if(n.next==null)return Ti.empty;let a=XA(n);n.next&&n.err("Unexpected trailing text");let i=nae(rae(a));return aae(i,n),i}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let a=this;for(let i=r;a&&i<n;i++)a=a.matchType(e.child(i).type);return a}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let a=[this];function i(o,l){let c=o.matchFragment(e,n);if(c&&(!r||c.validEnd))return re.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:u,next:f}=o.next[d];if(!(u.isText||u.hasRequiredAttrs())&&a.indexOf(f)==-1){a.push(f);let h=i(f,l.concat(u));if(h)return h}}return null}return i(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let a=n.shift(),i=a.match;if(i.matchType(e)){let o=[];for(let l=a;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:l,next:c}=i.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in r)&&(!a.type||c.validEnd)&&(n.push({match:l.contentMatch,type:l,via:a}),r[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let a=0;a<n.next.length;a++)e.indexOf(n.next[a].next)==-1&&r(n.next[a].next)}return r(this),e.map((n,a)=>{let i=a+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)i+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return i}).join(`
`)}}Ti.empty=new Ti(!0);class Jne{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function XA(t){let e=[];do e.push(Xne(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Xne(t){let e=[];do e.push(Qne(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Qne(t){let e=tae(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Zne(t,e);else break;return e}function Ww(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Zne(t,e){let r=Ww(t),n=r;return t.eat(",")&&(t.next!="}"?n=Ww(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function eae(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let a=[];for(let i in r){let o=r[i];o.isInGroup(e)&&a.push(o)}return a.length==0&&t.err("No node type or group '"+e+"' found"),a}function tae(t){if(t.eat("(")){let e=XA(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=eae(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function rae(t){let e=[[]];return a(i(t,0),r()),e;function r(){return e.push([])-1}function n(o,l,c){let d={term:c,to:l};return e[o].push(d),d}function a(o,l){o.forEach(c=>c.to=l)}function i(o,l){if(o.type=="choice")return o.exprs.reduce((c,d)=>c.concat(i(d,l)),[]);if(o.type=="seq")for(let c=0;;c++){let d=i(o.exprs[c],l);if(c==o.exprs.length-1)return d;a(d,l=r())}else if(o.type=="star"){let c=r();return n(l,c),a(i(o.expr,c),c),[n(c)]}else if(o.type=="plus"){let c=r();return a(i(o.expr,l),c),a(i(o.expr,c),c),[n(c)]}else{if(o.type=="opt")return[n(l)].concat(i(o.expr,l));if(o.type=="range"){let c=l;for(let d=0;d<o.min;d++){let u=r();a(i(o.expr,c),u),c=u}if(o.max==-1)a(i(o.expr,c),c);else for(let d=o.min;d<o.max;d++){let u=r();n(c,u),a(i(o.expr,c),u),c=u}return[n(c)]}else{if(o.type=="name")return[n(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function QA(t,e){return e-t}function qw(t,e){let r=[];return n(e),r.sort(QA);function n(a){let i=t[a];if(i.length==1&&!i[0].term)return n(i[0].to);r.push(a);for(let o=0;o<i.length;o++){let{term:l,to:c}=i[o];!l&&r.indexOf(c)==-1&&n(c)}}}function nae(t){let e=Object.create(null);return r(qw(t,0));function r(n){let a=[];n.forEach(o=>{t[o].forEach(({term:l,to:c})=>{if(!l)return;let d;for(let u=0;u<a.length;u++)a[u][0]==l&&(d=a[u][1]);qw(t,c).forEach(u=>{d||a.push([l,d=[]]),d.indexOf(u)==-1&&d.push(u)})})});let i=e[n.join(",")]=new Ti(n.indexOf(t.length-1)>-1);for(let o=0;o<a.length;o++){let l=a[o][1].sort(QA);i.next.push({type:a[o][0],next:e[l.join(",")]||r(l)})}return i}}function aae(t,e){for(let r=0,n=[t];r<n.length;r++){let a=n[r],i=!a.validEnd,o=[];for(let l=0;l<a.next.length;l++){let{type:c,next:d}=a.next[l];o.push(c.name),i&&!(c.isText||c.hasRequiredAttrs())&&(i=!1),n.indexOf(d)==-1&&n.push(d)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function ZA(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function e6(t,e){let r=Object.create(null);for(let n in t){let a=e&&e[n];if(a===void 0){let i=t[n];if(i.hasDefault)a=i.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=a}return r}function t6(t,e,r,n){for(let a in e)if(!(a in t))throw new RangeError(`Unsupported attribute ${a} for ${r} of type ${a}`);for(let a in t){let i=t[a];i.validate&&i.validate(e[a])}}function r6(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new iae(t,n,e[n]);return r}let Yw=class n6{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=r6(e,n.attrs),this.defaultAttrs=ZA(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ti.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:e6(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new aa(this,this.computeAttrs(e),re.from(r),bt.setFrom(n))}createChecked(e=null,r,n){return r=re.from(r),this.checkContent(r),new aa(this,this.computeAttrs(e),r,bt.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=re.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let a=this.contentMatch.matchFragment(r),i=a&&a.fillBefore(re.empty,!0);return i?new aa(this,e,r.append(i),bt.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){t6(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:bt.none:e}static compile(e,r){let n=Object.create(null);e.forEach((i,o)=>n[i]=new n6(i,r,o));let a=r.spec.topNode||"doc";if(!n[a])throw new RangeError("Schema is missing its top node type ('"+a+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function sae(t,e,r){let n=r.split("|");return a=>{let i=a===null?"null":typeof a;if(n.indexOf(i)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${i}`)}}class iae{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?sae(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class kp{constructor(e,r,n,a){this.name=e,this.rank=r,this.schema=n,this.spec=a,this.attrs=r6(e,a.attrs),this.excluded=null;let i=ZA(this.attrs);this.instance=i?new bt(this,i):null}create(e=null){return!e&&this.instance?this.instance:new bt(this,e6(this.attrs,e))}static compile(e,r){let n=Object.create(null),a=0;return e.forEach((i,o)=>n[i]=new kp(i,a++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){t6(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class a6{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let a in e)r[a]=e[a];r.nodes=wr.from(e.nodes),r.marks=wr.from(e.marks||{}),this.nodes=Yw.compile(this.spec.nodes,this),this.marks=kp.compile(this.spec.marks,this);let n=Object.create(null);for(let a in this.nodes){if(a in this.marks)throw new RangeError(a+" can not be both a node and a mark");let i=this.nodes[a],o=i.spec.content||"",l=i.spec.marks;if(i.contentMatch=n[o]||(n[o]=Ti.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=l=="_"?null:l?Gw(this,l.split(" ")):l==""||!i.inlineContent?[]:null}for(let a in this.marks){let i=this.marks[a],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:Gw(this,o.split(" "))}this.nodeFromJSON=a=>aa.fromJSON(this,a),this.markFromJSON=a=>bt.fromJSON(this,a),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,a){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Yw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,a)}text(e,r){let n=this.nodes.text;return new $f(n,n.defaultAttrs,e,bt.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function Gw(t,e){let r=[];for(let n=0;n<e.length;n++){let a=e[n],i=t.marks[a],o=i;if(i)r.push(i);else for(let l in t.marks){let c=t.marks[l];(a=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(a)>-1)&&r.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function oae(t){return t.tag!=null}function lae(t){return t.style!=null}class Ns{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(a=>{if(oae(a))this.tags.push(a);else if(lae(a)){let i=/[^=]*/.exec(a.style)[0];n.indexOf(i)<0&&n.push(i),this.styles.push(a)}}),this.normalizeLists=!this.tags.some(a=>{if(!/^(ul|ol)\b/.test(a.tag)||!a.node)return!1;let i=e.nodes[a.node];return i.contentMatch.matchType(i)})}parse(e,r={}){let n=new Jw(this,r,!1);return n.addAll(e,bt.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new Jw(this,r,!0);return n.addAll(e,bt.none,r.from,r.to),xe.maxOpen(n.finish())}matchTag(e,r,n){for(let a=n?this.tags.indexOf(n)+1:0;a<this.tags.length;a++){let i=this.tags[a];if(uae(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||r.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,r,n,a){for(let i=a?this.styles.indexOf(a)+1:0;i<this.styles.length;i++){let o=this.styles[i],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=r))){if(o.getAttrs){let c=o.getAttrs(r);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(e){let r=[];function n(a){let i=a.priority==null?50:a.priority,o=0;for(;o<r.length;o++){let l=r[o];if((l.priority==null?50:l.priority)<i)break}r.splice(o,0,a)}for(let a in e.marks){let i=e.marks[a].spec.parseDOM;i&&i.forEach(o=>{n(o=Xw(o)),o.mark||o.ignore||o.clearMark||(o.mark=a)})}for(let a in e.nodes){let i=e.nodes[a].spec.parseDOM;i&&i.forEach(o=>{n(o=Xw(o)),o.node||o.ignore||o.mark||(o.node=a)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ns(e,Ns.schemaRules(e)))}}const s6={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},cae={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},i6={ol:!0,ul:!0},nd=1,Tx=2,ic=4;function Kw(t,e,r){return e!=null?(e?nd:0)|(e==="full"?Tx:0):t&&t.whitespace=="pre"?nd|Tx:r&~ic}class au{constructor(e,r,n,a,i,o){this.type=e,this.attrs=r,this.marks=n,this.solid=a,this.options=o,this.content=[],this.activeMarks=bt.none,this.match=i||(o&ic?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(re.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,a;return(a=n.findWrapping(e.type))?(this.match=n,a):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&nd)){let n=this.content[this.content.length-1],a;if(n&&n.isText&&(a=/[ \t\r\n\u000c]+$/.exec(n.text))){let i=n;n.text.length==a[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-a[0].length))}}let r=re.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(re.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!s6.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Jw{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let a=r.topNode,i,o=Kw(null,r.preserveWhitespace,0)|(n?ic:0);a?i=new au(a.type,a.attrs,bt.none,!0,r.topMatch||a.type.contentMatch,o):n?i=new au(null,null,bt.none,!0,null,o):i=new au(e.schema.topNodeType,null,bt.none,!0,null,o),this.nodes=[i],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,a=this.top,i=a.options&Tx?"full":this.localPreserveWS||(a.options&nd)>0,{schema:o}=this.parser;if(i==="full"||a.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)if(i==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let l=n.split(/\r?\n|\r/);for(let c=0;c<l.length;c++)c&&this.insertNode(o.linebreakReplacement.create(),r,!0),l[c]&&this.insertNode(o.text(l[c]),r,!/\S/.test(l[c]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let l=a.content[a.content.length-1],c=e.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let a=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;i6.hasOwnProperty(o)&&this.parser.normalizeLists&&dae(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,n));e:if(c?c.ignore:cae.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let d,u=this.needsBlock;if(s6.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),d=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let f=c&&c.skip?r:this.readStyles(e,r);f&&this.addAll(e,f),d&&this.sync(i),this.needsBlock=u}else{let d=this.readStyles(e,r);d&&this.addElementByRule(e,c,d,c.consuming===!1?l:void 0)}this.localPreserveWS=a}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let a=0;a<this.parser.matchedStyles.length;a++){let i=this.parser.matchedStyles[a],o=n.getPropertyValue(i);if(o)for(let l=void 0;;){let c=this.parser.matchStyle(i,o,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?r=r.filter(d=>!c.clearMark(d)):r=r.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return r}addElementByRule(e,r,n,a){let i,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let c=this.enter(o,r.attrs||null,n,r.preserveWhitespace);c&&(i=!0,n=c)}else{let c=this.parser.schema.marks[r.mark];n=n.concat(c.create(r.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(a)this.addElement(e,n,a);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,n,!1));else{let c=e;typeof r.contentElement=="string"?c=e.querySelector(r.contentElement):typeof r.contentElement=="function"?c=r.contentElement(e):r.contentElement&&(c=r.contentElement),this.findAround(e,c,!0),this.addAll(c,n),this.findAround(e,c,!1)}i&&this.sync(l)&&this.open--}addAll(e,r,n,a){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,l=a==null?null:e.childNodes[a];o!=l;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,r);this.findAtPoint(e,i)}findPlace(e,r,n){let a,i;for(let o=this.open,l=0;o>=0;o--){let c=this.nodes[o],d=c.findWrapping(e);if(d&&(!a||a.length>d.length+l)&&(a=d,i=c,!d.length))break;if(c.solid){if(n)break;l+=2}}if(!a)return null;this.sync(i);for(let o=0;o<a.length;o++)r=this.enterInner(a[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(r=this.enterInner(i,null,r))}let a=this.findPlace(e,r,n);if(a){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=bt.none;for(let l of a.concat(e.marks))(i.type?i.type.allowsMarkType(l.type):Qw(l.type,e.type))&&(o=l.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,r,n,a){let i=this.findPlace(e.create(r),n,!1);return i&&(i=this.enterInner(e,r,n,!0,a)),i}enterInner(e,r,n,a=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=Kw(e,i,o.options);o.options&ic&&o.content.length==0&&(l|=ic);let c=bt.none;return n=n.filter(d=>(o.type?o.type.allowsMarkType(d.type):Qw(d.type,e))?(c=d.addToSet(c),!1):!0),this.nodes.push(new au(e,r,c,a,null,l)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=nd)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let a=n.length-1;a>=0;a--)e+=n[a].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let a=0;a<this.find.length;a++)this.find[a].pos==null&&e.nodeType==1&&e.contains(this.find[a].node)&&r.compareDocumentPosition(this.find[a].node)&(n?2:4)&&(this.find[a].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,a=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(a?0:1),o=(l,c)=>{for(;l>=0;l--){let d=r[l];if(d==""){if(l==r.length-1||l==0)continue;for(;c>=i;c--)if(o(l-1,c))return!0;return!1}else{let u=c>0||c==0&&a?this.nodes[c].type:n&&c>=i?n.node(c-i).type:null;if(!u||u.name!=d&&!u.isInGroup(d))return!1;c--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function dae(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&i6.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function uae(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Xw(t){let e={};for(let r in t)e[r]=t[r];return e}function Qw(t,e){let r=e.schema.nodes;for(let n in r){let a=r[n];if(!a.allowsMarkType(t))continue;let i=[],o=l=>{i.push(l);for(let c=0;c<l.edgeCount;c++){let{type:d,next:u}=l.edge(c);if(d==e||i.indexOf(u)<0&&o(u))return!0}};if(o(a.contentMatch))return!0}}class Vi{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=Cm(r).createDocumentFragment());let a=n,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let l=0,c=0;for(;l<i.length&&c<o.marks.length;){let d=o.marks[c];if(!this.marks[d.type.name]){c++;continue}if(!d.eq(i[l][0])||d.type.spec.spanning===!1)break;l++,c++}for(;l<i.length;)a=i.pop()[1];for(;c<o.marks.length;){let d=o.marks[c++],u=this.serializeMark(d,o.isInline,r);u&&(i.push([d,a]),a.appendChild(u.dom),a=u.contentDOM||u.dom)}}a.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:a}=xu(Cm(r),this.nodes[e.type.name](e),null,e.attrs);if(a){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,a)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let a=e.marks.length-1;a>=0;a--){let i=this.serializeMark(e.marks[a],e.isInline,r);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,r,n={}){let a=this.marks[e.type.name];return a&&xu(Cm(n),a(e,r),null,e.attrs)}static renderSpec(e,r,n=null,a){return xu(e,r,n,a)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Vi(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=Zw(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return Zw(e.marks)}}function Zw(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function Cm(t){return t.document||window.document}const e2=new WeakMap;function fae(t){let e=e2.get(t);return e===void 0&&e2.set(t,e=hae(t)),e}function hae(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let a=0;a<n.length;a++)r(n[a]);else for(let a in n)r(n[a])}return r(t),e}function xu(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let a=e[0],i;if(typeof a!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(i=fae(n))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=a.indexOf(" ");o>0&&(r=a.slice(0,o),a=a.slice(o+1));let l,c=r?t.createElementNS(r,a):t.createElement(a),d=e[1],u=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){u=2;for(let f in d)if(d[f]!=null){let h=f.indexOf(" ");h>0?c.setAttributeNS(f.slice(0,h),f.slice(h+1),d[f]):f=="style"&&c.style?c.style.cssText=d[f]:c.setAttribute(f,d[f])}}for(let f=u;f<e.length;f++){let h=e[f];if(h===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:p,contentDOM:m}=xu(t,h,r,n);if(c.appendChild(p),m){if(l)throw new RangeError("Multiple content holes");l=m}}}return{dom:c,contentDOM:l}}const o6=65535,l6=Math.pow(2,16);function pae(t,e){return t+e*l6}function t2(t){return t&o6}function mae(t){return(t-(t&o6))/l6}const c6=1,d6=2,yu=4,u6=8;class Ix{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&u6)>0}get deletedBefore(){return(this.delInfo&(c6|yu))>0}get deletedAfter(){return(this.delInfo&(d6|yu))>0}get deletedAcross(){return(this.delInfo&yu)>0}}class yn{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&yn.empty)return yn.empty}recover(e){let r=0,n=t2(e);if(!this.inverted)for(let a=0;a<n;a++)r+=this.ranges[a*3+2]-this.ranges[a*3+1];return this.ranges[n*3]+r+mae(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let a=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?a:0);if(c>e)break;let d=this.ranges[l+i],u=this.ranges[l+o],f=c+d;if(e<=f){let h=d?e==c?-1:e==f?1:r:r,p=c+a+(h<0?0:u);if(n)return p;let m=e==(r<0?c:f)?null:pae(l/3,e-c),x=e==c?d6:e==f?c6:yu;return(r<0?e!=c:e!=f)&&(x|=u6),new Ix(p,x,m)}a+=u-d}return n?e+a:new Ix(e+a,0,null)}touches(e,r){let n=0,a=t2(r),i=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?n:0);if(c>e)break;let d=this.ranges[l+i],u=c+d;if(e<=u&&l==a*3)return!0;n+=this.ranges[l+o]-d}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let a=0,i=0;a<this.ranges.length;a+=3){let o=this.ranges[a],l=o-(this.inverted?i:0),c=o+(this.inverted?0:i),d=this.ranges[a+r],u=this.ranges[a+n];e(l,l+d,c,c+u),i+=u-d}}invert(){return new yn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?yn.empty:new yn(e<0?[0,-e,0]:[0,0,e])}}yn.empty=new yn([]);class ad{constructor(e,r,n=0,a=e?e.length:0){this.mirror=r,this.from=n,this.to=a,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new ad(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let a=e.getMirror(r);this.appendMap(e._maps[r],a!=null&&a<r?n+a:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let a=e.getMirror(r);this.appendMap(e._maps[r].invert(),a!=null&&a>r?n-a-1:void 0)}}invert(){let e=new ad;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let a=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],l=o.mapResult(e,r);if(l.recover!=null){let c=this.getMirror(i);if(c!=null&&c>i&&c<this.to){i=c,e=this._maps[c].recover(l.recover);continue}}a|=l.delInfo,e=l.pos}return n?e:new Ix(e,a,null)}}const km=Object.create(null);class Rr{getMap(){return yn.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=km[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in km)throw new RangeError("Duplicate use of step JSON ID "+e);return km[e]=r,r.prototype.jsonID=e,r}}class Qt{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new Qt(e,null)}static fail(e){return new Qt(null,e)}static fromReplace(e,r,n,a){try{return Qt.ok(e.replace(r,n,a))}catch(i){if(i instanceof Tf)return Qt.fail(i.message);throw i}}}function ky(t,e,r){let n=[];for(let a=0;a<t.childCount;a++){let i=t.child(a);i.content.size&&(i=i.copy(ky(i.content,e,i))),i.isInline&&(i=e(i,r,a)),n.push(i)}return re.fromArray(n)}class vs extends Rr{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),a=n.node(n.sharedDepth(this.to)),i=new xe(ky(r.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),a),r.openStart,r.openEnd);return Qt.fromReplace(e,this.from,this.to,i)}invert(){return new ta(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new vs(r.pos,n.pos,this.mark)}merge(e){return e instanceof vs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new vs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new vs(r.from,r.to,e.markFromJSON(r.mark))}}Rr.jsonID("addMark",vs);class ta extends Rr{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new xe(ky(r.content,a=>a.mark(this.mark.removeFromSet(a.marks)),e),r.openStart,r.openEnd);return Qt.fromReplace(e,this.from,this.to,n)}invert(){return new vs(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new ta(r.pos,n.pos,this.mark)}merge(e){return e instanceof ta&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ta(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ta(r.from,r.to,e.markFromJSON(r.mark))}}Rr.jsonID("removeMark",ta);class bs extends Rr{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return Qt.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return Qt.fromReplace(e,this.pos,this.pos+1,new xe(re.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let a=0;a<r.marks.length;a++)if(!r.marks[a].isInSet(n))return new bs(this.pos,r.marks[a]);return new bs(this.pos,this.mark)}}return new Ii(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new bs(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new bs(r.pos,e.markFromJSON(r.mark))}}Rr.jsonID("addNodeMark",bs);class Ii extends Rr{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return Qt.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return Qt.fromReplace(e,this.pos,this.pos+1,new xe(re.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new bs(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Ii(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ii(r.pos,e.markFromJSON(r.mark))}}Rr.jsonID("removeNodeMark",Ii);class hr extends Rr{constructor(e,r,n,a=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=a}apply(e){return this.structure&&Mx(e,this.from,this.to)?Qt.fail("Structure replace would overwrite content"):Qt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new yn([this.from,this.to-this.from,this.slice.size])}invert(e){return new hr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new hr(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof hr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?xe.empty:new xe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new hr(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?xe.empty:new xe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new hr(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new hr(r.from,r.to,xe.fromJSON(e,r.slice),!!r.structure)}}Rr.jsonID("replace",hr);class gr extends Rr{constructor(e,r,n,a,i,o,l=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=a,this.slice=i,this.insert=o,this.structure=l}apply(e){if(this.structure&&(Mx(e,this.from,this.gapFrom)||Mx(e,this.gapTo,this.to)))return Qt.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Qt.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?Qt.fromReplace(e,this.from,this.to,n):Qt.fail("Content does not fit in gap")}getMap(){return new yn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new gr(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),a=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||a<r.pos||i>n.pos?null:new gr(r.pos,n.pos,a,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new gr(r.from,r.to,r.gapFrom,r.gapTo,xe.fromJSON(e,r.slice),r.insert,!!r.structure)}}Rr.jsonID("replaceAround",gr);function Mx(t,e,r){let n=t.resolve(e),a=r-e,i=n.depth;for(;a>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,a--;if(a>0){let o=n.node(i).maybeChild(n.indexAfter(i));for(;a>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,a--}}return!1}function gae(t,e,r,n){let a=[],i=[],o,l;t.doc.nodesBetween(e,r,(c,d,u)=>{if(!c.isInline)return;let f=c.marks;if(!n.isInSet(f)&&u.type.allowsMarkType(n.type)){let h=Math.max(d,e),p=Math.min(d+c.nodeSize,r),m=n.addToSet(f);for(let x=0;x<f.length;x++)f[x].isInSet(m)||(o&&o.to==h&&o.mark.eq(f[x])?o.to=p:a.push(o=new ta(h,p,f[x])));l&&l.to==h?l.to=p:i.push(l=new vs(h,p,n))}}),a.forEach(c=>t.step(c)),i.forEach(c=>t.step(c))}function xae(t,e,r,n){let a=[],i=0;t.doc.nodesBetween(e,r,(o,l)=>{if(!o.isInline)return;i++;let c=null;if(n instanceof kp){let d=o.marks,u;for(;u=n.isInSet(d);)(c||(c=[])).push(u),d=u.removeFromSet(d)}else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length){let d=Math.min(l+o.nodeSize,r);for(let u=0;u<c.length;u++){let f=c[u],h;for(let p=0;p<a.length;p++){let m=a[p];m.step==i-1&&f.eq(a[p].style)&&(h=m)}h?(h.to=d,h.step=i):a.push({style:f,from:Math.max(l,e),to:d,step:i})}}}),a.forEach(o=>t.step(new ta(o.from,o.to,o.style)))}function Oy(t,e,r,n=r.contentMatch,a=!0){let i=t.doc.nodeAt(e),o=[],l=e+1;for(let c=0;c<i.childCount;c++){let d=i.child(c),u=l+d.nodeSize,f=n.matchType(d.type);if(!f)o.push(new hr(l,u,xe.empty));else{n=f;for(let h=0;h<d.marks.length;h++)r.allowsMarkType(d.marks[h].type)||t.step(new ta(l,u,d.marks[h]));if(a&&d.isText&&r.whitespace!="pre"){let h,p=/\r?\n|\r/g,m;for(;h=p.exec(d.text);)m||(m=new xe(re.from(r.schema.text(" ",r.allowedMarks(d.marks))),0,0)),o.push(new hr(l+h.index,l+h.index+h[0].length,m))}}l=u}if(!n.validEnd){let c=n.fillBefore(re.empty,!0);t.replace(l,l,new xe(c,0,0))}for(let c=o.length-1;c>=0;c--)t.step(o[c])}function yae(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function Al(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,a=0,i=0;;--n){let o=t.$from.node(n),l=t.$from.index(n)+a,c=t.$to.indexAfter(n)-i;if(n<t.depth&&o.canReplace(l,c,r))return n;if(n==0||o.type.spec.isolating||!yae(o,l,c))break;l&&(a=1),c<o.childCount&&(i=1)}return null}function vae(t,e,r){let{$from:n,$to:a,depth:i}=e,o=n.before(i+1),l=a.after(i+1),c=o,d=l,u=re.empty,f=0;for(let m=i,x=!1;m>r;m--)x||n.index(m)>0?(x=!0,u=re.from(n.node(m).copy(u)),f++):c--;let h=re.empty,p=0;for(let m=i,x=!1;m>r;m--)x||a.after(m+1)<a.end(m)?(x=!0,h=re.from(a.node(m).copy(h)),p++):d++;t.step(new gr(c,d,o,l,new xe(u.append(h),f,p),u.size-f,!0))}function Ey(t,e,r=null,n=t){let a=bae(t,e),i=a&&jae(n,e);return i?a.map(r2).concat({type:e,attrs:r}).concat(i.map(r2)):null}function r2(t){return{type:t,attrs:null}}function bae(t,e){let{parent:r,startIndex:n,endIndex:a}=t,i=r.contentMatchAt(n).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return r.canReplaceWith(n,a,o)?i:null}function jae(t,e){let{parent:r,startIndex:n,endIndex:a}=t,i=r.child(n),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let c=(o.length?o[o.length-1]:e).contentMatch;for(let d=n;c&&d<a;d++)c=c.matchType(r.child(d).type);return!c||!c.validEnd?null:o}function wae(t,e,r){let n=re.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let l=r[o].type.contentMatch.matchFragment(n);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=re.from(r[o].type.create(r[o].attrs,n))}let a=e.start,i=e.end;t.step(new gr(a,i,a,i,new xe(n,0,0),r.length,!0))}function Sae(t,e,r,n,a){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,r,(o,l)=>{let c=typeof a=="function"?a(o):a;if(o.isTextblock&&!o.hasMarkup(n,c)&&Nae(t.doc,t.mapping.slice(i).map(l),n)){let d=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?d=!1:!p&&m&&(d=!0)}d===!1&&h6(t,o,l,i),Oy(t,t.mapping.slice(i).map(l,1),n,void 0,d===null);let u=t.mapping.slice(i),f=u.map(l,1),h=u.map(l+o.nodeSize,1);return t.step(new gr(f,h,f+1,h-1,new xe(re.from(n.create(c,null,o.marks)),0,0),1,!0)),d===!0&&f6(t,o,l,i),!1}})}function f6(t,e,r,n){e.forEach((a,i)=>{if(a.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(a.text);){let c=t.mapping.slice(n).map(r+1+i+o.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function h6(t,e,r,n){e.forEach((a,i)=>{if(a.type==a.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Nae(t,e,r){let n=t.resolve(e),a=n.index();return n.parent.canReplaceWith(a,a+1,r)}function Aae(t,e,r,n,a){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");r||(r=i.type);let o=r.create(n,null,a||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!r.validContent(i.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new gr(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new xe(re.from(o),0,0),1,!0))}function Wa(t,e,r=1,n){let a=t.resolve(e),i=a.depth-r,o=n&&n[n.length-1]||a.parent;if(i<0||a.parent.type.spec.isolating||!a.parent.canReplace(a.index(),a.parent.childCount)||!o.type.validContent(a.parent.content.cutByIndex(a.index(),a.parent.childCount)))return!1;for(let d=a.depth-1,u=r-2;d>i;d--,u--){let f=a.node(d),h=a.index(d);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(h,f.childCount),m=n&&n[u+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let x=n&&n[u]||f;if(!f.canReplace(h+1,f.childCount)||!x.type.validContent(p))return!1}let l=a.indexAfter(i),c=n&&n[0];return a.node(i).canReplaceWith(l,l,c?c.type:a.node(i+1).type)}function Cae(t,e,r=1,n){let a=t.doc.resolve(e),i=re.empty,o=re.empty;for(let l=a.depth,c=a.depth-r,d=r-1;l>c;l--,d--){i=re.from(a.node(l).copy(i));let u=n&&n[d];o=re.from(u?u.type.create(u.attrs,o):a.node(l).copy(o))}t.step(new hr(e,e,new xe(i.append(o),r,r),!0))}function Bs(t,e){let r=t.resolve(e),n=r.index();return p6(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function kae(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let a=0;a<e.childCount;a++){let i=e.child(a),o=i.type==n?t.type.schema.nodes.text:i.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(i.marks))return!1}return r.validEnd}function p6(t,e){return!!(t&&e&&!t.isLeaf&&kae(t,e))}function Op(t,e,r=-1){let n=t.resolve(e);for(let a=n.depth;;a--){let i,o,l=n.index(a);if(a==n.depth?(i=n.nodeBefore,o=n.nodeAfter):r>0?(i=n.node(a+1),l++,o=n.node(a).maybeChild(l)):(i=n.node(a).maybeChild(l-1),o=n.node(a+1)),i&&!i.isTextblock&&p6(i,o)&&n.node(a).canReplace(l,l+1))return e;if(a==0)break;e=r<0?n.before(a):n.after(a)}}function Oae(t,e,r){let n=null,{linebreakReplacement:a}=t.doc.type.schema,i=t.doc.resolve(e-r),o=i.node().type;if(a&&o.inlineContent){let u=o.whitespace=="pre",f=!!o.contentMatch.matchType(a);u&&!f?n=!1:!u&&f&&(n=!0)}let l=t.steps.length;if(n===!1){let u=t.doc.resolve(e+r);h6(t,u.node(),u.before(),l)}o.inlineContent&&Oy(t,e+r-1,o,i.node().contentMatchAt(i.index()),n==null);let c=t.mapping.slice(l),d=c.map(e-r);if(t.step(new hr(d,c.map(e+r,-1),xe.empty,!0)),n===!0){let u=t.doc.resolve(d);f6(t,u.node(),u.before(),t.steps.length)}return t}function Eae(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let a=n.depth-1;a>=0;a--){let i=n.index(a);if(n.node(a).canReplaceWith(i,i,r))return n.before(a+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(let a=n.depth-1;a>=0;a--){let i=n.indexAfter(a);if(n.node(a).canReplaceWith(i,i,r))return n.after(a+1);if(i<n.node(a).childCount)return null}return null}function m6(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let a=r.content;for(let i=0;i<r.openStart;i++)a=a.firstChild.content;for(let i=1;i<=(r.openStart==0&&r.size?2:1);i++)for(let o=n.depth;o>=0;o--){let l=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,c=n.index(o)+(l>0?1:0),d=n.node(o),u=!1;if(i==1)u=d.canReplace(c,c,a);else{let f=d.contentMatchAt(c).findWrapping(a.firstChild.type);u=f&&d.canReplaceWith(c,c,f[0])}if(u)return l==0?n.pos:l<0?n.before(o+1):n.after(o+1)}return null}function Ep(t,e,r=e,n=xe.empty){if(e==r&&!n.size)return null;let a=t.resolve(e),i=t.resolve(r);return g6(a,i,n)?new hr(e,r,n):new Pae(a,i,n).fit()}function g6(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class Pae{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=re.empty;for(let a=0;a<=e.depth;a++){let i=e.node(a);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(a))})}for(let a=e.depth;a>0;a--)this.placed=re.from(e.node(a).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,a=this.close(e<0?this.$to:n.doc.resolve(e));if(!a)return null;let i=this.placed,o=n.depth,l=a.depth;for(;o&&l&&i.childCount==1;)i=i.firstChild.content,o--,l--;let c=new xe(i,o,l);return e>-1?new gr(n.pos,e,this.$to.pos,this.$to.end(),c,r):c.size||n.pos!=this.$to.pos?new hr(n.pos,a.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,a=this.unplaced.openEnd;n<e;n++){let i=r.firstChild;if(r.childCount>1&&(a=0),i.type.spec.isolating&&a<=n){e=n;break}r=i.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let a,i=null;n?(i=Om(this.unplaced.content,n-1).firstChild,a=i.content):a=this.unplaced.content;let o=a.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:d}=this.frontier[l],u,f=null;if(r==1&&(o?d.matchType(o.type)||(f=d.fillBefore(re.from(o),!1)):i&&c.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:l,parent:i,inject:f};if(r==2&&o&&(u=d.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:l,parent:i,wrap:u};if(i&&d.matchType(i.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,a=Om(e,r);return!a.childCount||a.firstChild.isLeaf?!1:(this.unplaced=new xe(e,r+1,Math.max(n,a.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,a=Om(e,r);if(a.childCount<=1&&r>0){let i=e.size-r<=r+a.size;this.unplaced=new xe(Kl(e,r-1,1),r-1,i?r-1:n)}else this.unplaced=new xe(Kl(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:a,wrap:i}){for(;this.depth>r;)this.closeFrontierNode();if(i)for(let x=0;x<i.length;x++)this.openFrontierNode(i[x]);let o=this.unplaced,l=n?n.content:o.content,c=o.openStart-e,d=0,u=[],{match:f,type:h}=this.frontier[r];if(a){for(let x=0;x<a.childCount;x++)u.push(a.child(x));f=f.matchFragment(a)}let p=l.size+e-(o.content.size-o.openEnd);for(;d<l.childCount;){let x=l.child(d),g=f.matchType(x.type);if(!g)break;d++,(d>1||c==0||x.content.size)&&(f=g,u.push(x6(x.mark(h.allowedMarks(x.marks)),d==1?c:0,d==l.childCount?p:-1)))}let m=d==l.childCount;m||(p=-1),this.placed=Jl(this.placed,r,re.from(u)),this.frontier[r].match=f,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,g=l;x<p;x++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=m?e==0?xe.empty:new xe(Kl(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new xe(Kl(o.content,e,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!Em(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,a=this.$to.after(n);for(;n>1&&a==this.$to.end(--n);)++a;return a}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:a}=this.frontier[r],i=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=Em(e,r,a,n,i);if(o){for(let l=r-1;l>=0;l--){let{match:c,type:d}=this.frontier[l],u=Em(e,l,d,c,!0);if(!u||u.childCount)continue e}return{depth:r,fit:o,move:i?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=Jl(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let a=e.node(n),i=a.type.contentMatch.fillBefore(a.content,!0,e.index(n));this.openFrontierNode(a.type,a.attrs,i)}return e}openFrontierNode(e,r=null,n){let a=this.frontier[this.depth];a.match=a.match.matchType(e),this.placed=Jl(this.placed,this.depth,re.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(re.empty,!0);r.childCount&&(this.placed=Jl(this.placed,this.frontier.length,r))}}function Kl(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(Kl(t.firstChild.content,e-1,r)))}function Jl(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(Jl(t.lastChild.content,e-1,r)))}function Om(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function x6(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,x6(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(re.empty,!0)))),t.copy(n)}function Em(t,e,r,n,a){let i=t.node(e),o=a?t.indexAfter(e):t.index(e);if(o==i.childCount&&!r.compatibleContent(i.type))return null;let l=n.fillBefore(i.content,!0,o);return l&&!Tae(r,i.content,o)?l:null}function Tae(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function Iae(t){return t.spec.defining||t.spec.definingForContent}function Mae(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let a=t.doc.resolve(e),i=t.doc.resolve(r);if(g6(a,i,n))return t.step(new hr(e,r,n));let o=v6(a,i);o[o.length-1]==0&&o.pop();let l=-(a.depth+1);o.unshift(l);for(let h=a.depth,p=a.pos-1;h>0;h--,p--){let m=a.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(h)>-1?l=h:a.before(h)==p&&o.splice(1,0,-h)}let c=o.indexOf(l),d=[],u=n.openStart;for(let h=n.content,p=0;;p++){let m=h.firstChild;if(d.push(m),p==n.openStart)break;h=m.content}for(let h=u-1;h>=0;h--){let p=d[h],m=Iae(p.type);if(m&&!p.sameMarkup(a.node(Math.abs(l)-1)))u=h;else if(m||!p.type.isTextblock)break}for(let h=n.openStart;h>=0;h--){let p=(h+u+1)%(n.openStart+1),m=d[p];if(m)for(let x=0;x<o.length;x++){let g=o[(x+c)%o.length],y=!0;g<0&&(y=!1,g=-g);let j=a.node(g-1),b=a.index(g-1);if(j.canReplaceWith(b,b,m.type,m.marks))return t.replace(a.before(g),y?i.after(g):r,new xe(y6(n.content,0,n.openStart,p),p,n.openEnd))}}let f=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,r,n),!(t.steps.length>f));h--){let p=o[h];p<0||(e=a.before(p),r=i.after(p))}}function y6(t,e,r,n,a){if(e<r){let i=t.firstChild;t=t.replaceChild(0,i.copy(y6(i.content,e+1,r,n,i)))}if(e>n){let i=a.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(re.empty,!0))}return t}function $ae(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let a=Eae(t.doc,e,n.type);a!=null&&(e=r=a)}t.replaceRange(e,r,new xe(re.from(n),0,0))}function Rae(t,e,r){let n=t.doc.resolve(e),a=t.doc.resolve(r),i=v6(n,a);for(let o=0;o<i.length;o++){let l=i[o],c=o==i.length-1;if(c&&l==0||n.node(l).type.contentMatch.validEnd)return t.delete(n.start(l),a.end(l));if(l>0&&(c||n.node(l-1).canReplace(n.index(l-1),a.indexAfter(l-1))))return t.delete(n.before(l),a.after(l))}for(let o=1;o<=n.depth&&o<=a.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&a.end(o)-r!=a.depth-o&&n.start(o-1)==a.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),a.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function v6(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let a=n;a>=0;a--){let i=t.start(a);if(i<t.pos-(t.depth-a)||e.end(a)>e.pos+(e.depth-a)||t.node(a).type.spec.isolating||e.node(a).type.spec.isolating)break;(i==e.start(a)||a==t.depth&&a==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&a&&e.start(a-1)==i-1)&&r.push(a)}return r}class yo extends Rr{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return Qt.fail("No node at attribute step's position");let n=Object.create(null);for(let i in r.attrs)n[i]=r.attrs[i];n[this.attr]=this.value;let a=r.type.create(n,null,r.marks);return Qt.fromReplace(e,this.pos,this.pos+1,new xe(re.from(a),0,r.isLeaf?0:1))}getMap(){return yn.empty}invert(e){return new yo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new yo(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new yo(r.pos,r.attr,r.value)}}Rr.jsonID("attr",yo);class sd extends Rr{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let a in e.attrs)r[a]=e.attrs[a];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return Qt.ok(n)}getMap(){return yn.empty}invert(e){return new sd(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new sd(r.attr,r.value)}}Rr.jsonID("docAttr",sd);let nl=class extends Error{};nl=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};nl.prototype=Object.create(Error.prototype);nl.prototype.constructor=nl;nl.prototype.name="TransformError";class b6{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ad}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new nl(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=xe.empty){let a=Ep(this.doc,e,r,n);return a&&this.step(a),this}replaceWith(e,r,n){return this.replace(e,r,new xe(re.from(n),0,0))}delete(e,r){return this.replace(e,r,xe.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return Mae(this,e,r,n),this}replaceRangeWith(e,r,n){return $ae(this,e,r,n),this}deleteRange(e,r){return Rae(this,e,r),this}lift(e,r){return vae(this,e,r),this}join(e,r=1){return Oae(this,e,r),this}wrap(e,r){return wae(this,e,r),this}setBlockType(e,r=e,n,a=null){return Sae(this,e,r,n,a),this}setNodeMarkup(e,r,n=null,a){return Aae(this,e,r,n,a),this}setNodeAttribute(e,r,n){return this.step(new yo(e,r,n)),this}setDocAttribute(e,r){return this.step(new sd(e,r)),this}addNodeMark(e,r){return this.step(new bs(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof bt)r.isInSet(n.marks)&&this.step(new Ii(e,r));else{let a=n.marks,i,o=[];for(;i=r.isInSet(a);)o.push(new Ii(e,i)),a=i.removeFromSet(a);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,r=1,n){return Cae(this,e,r,n),this}addMark(e,r,n){return gae(this,e,r,n),this}removeMark(e,r,n){return xae(this,e,r,n),this}clearIncompatible(e,r,n){return Oy(this,e,r,n),this}}const Pm=Object.create(null);class qe{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new Dae(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=xe.empty){let n=r.content.lastChild,a=null;for(let l=0;l<r.openEnd;l++)a=n,n=n.lastChild;let i=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:c,$to:d}=o[l],u=e.mapping.slice(i);e.replaceRange(u.map(c.pos),u.map(d.pos),l?xe.empty:r),l==0&&s2(e,i,(n?n.isInline:a&&a.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,a=this.ranges;for(let i=0;i<a.length;i++){let{$from:o,$to:l}=a[i],c=e.mapping.slice(n),d=c.map(o.pos),u=c.map(l.pos);i?e.deleteRange(d,u):(e.replaceRangeWith(d,u,r),s2(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let a=e.parent.inlineContent?new Be(e):ro(e.node(0),e.parent,e.pos,e.index(),r,n);if(a)return a;for(let i=e.depth-1;i>=0;i--){let o=r<0?ro(e.node(0),e.node(i),e.before(i+1),e.index(i),r,n):ro(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new wn(e.node(0))}static atStart(e){return ro(e,e,0,0,1)||new wn(e)}static atEnd(e){return ro(e,e,e.content.size,e.childCount,-1)||new wn(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Pm[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in Pm)throw new RangeError("Duplicate use of selection JSON ID "+e);return Pm[e]=r,r.prototype.jsonID=e,r}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}qe.prototype.visible=!0;class Dae{constructor(e,r){this.$from=e,this.$to=r}}let n2=!1;function a2(t){!n2&&!t.parent.inlineContent&&(n2=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Be extends qe{constructor(e,r=e){a2(e),a2(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return qe.near(n);let a=e.resolve(r.map(this.anchor));return new Be(a.parent.inlineContent?a:n,n)}replace(e,r=xe.empty){if(super.replace(e,r),r==xe.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Pp(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let a=e.resolve(r);return new this(a,n==r?a:e.resolve(n))}static between(e,r,n){let a=e.pos-r.pos;if((!n||a)&&(n=a>=0?1:-1),!r.parent.inlineContent){let i=qe.findFrom(r,n,!0)||qe.findFrom(r,-n,!0);if(i)r=i.$head;else return qe.near(r,n)}return e.parent.inlineContent||(a==0?e=r:(e=(qe.findFrom(e,-n,!0)||qe.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=a<0&&(e=r))),new Be(e,r)}}qe.jsonID("text",Be);class Pp{constructor(e,r){this.anchor=e,this.head=r}map(e){return new Pp(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class Te extends qe{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:a}=r.mapResult(this.anchor),i=e.resolve(a);return n?qe.near(i):new Te(i)}content(){return new xe(re.from(this.node),0,0)}eq(e){return e instanceof Te&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Py(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Te(e.resolve(r.anchor))}static create(e,r){return new Te(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Te.prototype.visible=!1;qe.jsonID("node",Te);class Py{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new Pp(n,n):new Py(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&Te.isSelectable(n)?new Te(r):qe.near(r)}}class wn extends qe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=xe.empty){if(r==xe.empty){e.delete(0,e.doc.content.size);let n=qe.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new wn(e)}map(e){return new wn(e)}eq(e){return e instanceof wn}getBookmark(){return _ae}}qe.jsonID("all",wn);const _ae={map(){return this},resolve(t){return new wn(t)}};function ro(t,e,r,n,a,i=!1){if(e.inlineContent)return Be.create(t,r);for(let o=n-(a>0?0:1);a>0?o<e.childCount:o>=0;o+=a){let l=e.child(o);if(l.isAtom){if(!i&&Te.isSelectable(l))return Te.create(t,r-(a<0?l.nodeSize:0))}else{let c=ro(t,l,r+a,a<0?l.childCount:0,a,i);if(c)return c}r+=l.nodeSize*a}return null}function s2(t,e,r){let n=t.steps.length-1;if(n<e)return;let a=t.steps[n];if(!(a instanceof hr||a instanceof gr))return;let i=t.mapping.maps[n],o;i.forEach((l,c,d,u)=>{o==null&&(o=u)}),t.setSelection(qe.near(t.doc.resolve(o),r))}const i2=1,su=2,o2=4;class Lae extends b6{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|i2)&~su,this.storedMarks=null,this}get selectionSet(){return(this.updated&i2)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=su,this}ensureMarks(e){return bt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&su)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~su,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||bt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let a=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(a.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let i=this.storedMarks;if(!i){let o=this.doc.resolve(r);i=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,a.text(e,i)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(qe.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=o2,this}get scrolledIntoView(){return(this.updated&o2)>0}}function l2(t,e){return!e||!t?t:t.bind(e)}class Xl{constructor(e,r,n){this.name=e,this.init=l2(r.init,n),this.apply=l2(r.apply,n)}}const zae=[new Xl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Xl("selection",{init(t,e){return t.selection||qe.atStart(e.doc)},apply(t){return t.selection}}),new Xl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new Xl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Tm{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=zae.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Xl(n.key,n.spec.state,n))})}}class ho{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let a=this.config.plugins[n];if(a.spec.filterTransaction&&!a.spec.filterTransaction.call(a,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),a=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let c=a?a[o].n:0,d=a?a[o].state:this,u=c<r.length&&l.spec.appendTransaction.call(l,c?r.slice(c):r,d,n);if(u&&n.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!a){a=[];for(let f=0;f<this.config.plugins.length;f++)a.push(f<o?{state:n,n:r.length}:{state:this,n:0})}r.push(u),n=n.applyInner(u),i=!0}a&&(a[o]={state:n,n:r.length})}}if(!i)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new ho(this.config),n=this.config.fields;for(let a=0;a<n.length;a++){let i=n[a];r[i.name]=i.apply(e,this[i.name],this,r)}return r}get tr(){return new Lae(this)}static create(e){let r=new Tm(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new ho(r);for(let a=0;a<r.fields.length;a++)n[r.fields[a].name]=r.fields[a].init(e,n);return n}reconfigure(e){let r=new Tm(this.schema,e.plugins),n=r.fields,a=new ho(r);for(let i=0;i<n.length;i++){let o=n[i].name;a[o]=this.hasOwnProperty(o)?this[o]:n[i].init(e,a)}return a}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let a=e[n],i=a.spec.state;i&&i.toJSON&&(r[n]=i.toJSON.call(a,this[a.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let a=new Tm(e.schema,e.plugins),i=new ho(a);return a.fields.forEach(o=>{if(o.name=="doc")i.doc=aa.fromJSON(e.schema,r.doc);else if(o.name=="selection")i.selection=qe.fromJSON(i.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(i.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let l in n){let c=n[l],d=c.spec.state;if(c.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(r,l)){i[o.name]=d.fromJSON.call(c,e,r[l],i);return}}i[o.name]=o.init(e,i)}}),i}}function j6(t,e,r){for(let n in t){let a=t[n];a instanceof Function?a=a.bind(e):n=="handleDOMEvents"&&(a=j6(a,e,{})),r[n]=a}return r}class Bt{constructor(e){this.spec=e,this.props={},e.props&&j6(e.props,this,this.props),this.key=e.key?e.key.key:w6("plugin")}getState(e){return e[this.key]}}const Im=Object.create(null);function w6(t){return t in Im?t+"$"+ ++Im[t]:(Im[t]=0,t+"$")}class lr{constructor(e="key"){this.key=w6(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ty=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function S6(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const N6=(t,e,r)=>{let n=S6(t,r);if(!n)return!1;let a=Iy(n);if(!a){let o=n.blockRange(),l=o&&Al(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let i=a.nodeBefore;if(M6(t,a,e,-1))return!0;if(n.parent.content.size==0&&(al(i,"end")||Te.isSelectable(i)))for(let o=n.depth;;o--){let l=Ep(t.doc,n.before(o),n.after(o),xe.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(al(i,"end")?qe.findFrom(c.doc.resolve(c.mapping.map(a.pos,-1)),-1):Te.create(c.doc,a.pos-i.nodeSize)),e(c.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return i.isAtom&&a.depth==n.depth-1?(e&&e(t.tr.delete(a.pos-i.nodeSize,a.pos).scrollIntoView()),!0):!1},Fae=(t,e,r)=>{let n=S6(t,r);if(!n)return!1;let a=Iy(n);return a?A6(t,a,e):!1},Bae=(t,e,r)=>{let n=k6(t,r);if(!n)return!1;let a=My(n);return a?A6(t,a,e):!1};function A6(t,e,r){let n=e.nodeBefore,a=n,i=e.pos-1;for(;!a.isTextblock;i--){if(a.type.spec.isolating)return!1;let u=a.lastChild;if(!u)return!1;a=u}let o=e.nodeAfter,l=o,c=e.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let d=Ep(t.doc,i,c,xe.empty);if(!d||d.from!=i||d instanceof hr&&d.slice.size>=c-i)return!1;if(r){let u=t.tr.step(d);u.setSelection(Be.create(u.doc,i)),r(u.scrollIntoView())}return!0}function al(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const C6=(t,e,r)=>{let{$head:n,empty:a}=t.selection,i=n;if(!a)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;i=Iy(n)}let o=i&&i.nodeBefore;return!o||!Te.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Te.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function Iy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function k6(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const O6=(t,e,r)=>{let n=k6(t,r);if(!n)return!1;let a=My(n);if(!a)return!1;let i=a.nodeAfter;if(M6(t,a,e,1))return!0;if(n.parent.content.size==0&&(al(i,"start")||Te.isSelectable(i))){let o=Ep(t.doc,n.before(),n.after(),xe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(al(i,"start")?qe.findFrom(l.doc.resolve(l.mapping.map(a.pos)),1):Te.create(l.doc,l.mapping.map(a.pos))),e(l.scrollIntoView())}return!0}}return i.isAtom&&a.depth==n.depth-1?(e&&e(t.tr.delete(a.pos,a.pos+i.nodeSize).scrollIntoView()),!0):!1},E6=(t,e,r)=>{let{$head:n,empty:a}=t.selection,i=n;if(!a)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;i=My(n)}let o=i&&i.nodeAfter;return!o||!Te.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Te.create(t.doc,i.pos)).scrollIntoView()),!0)};function My(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const Uae=(t,e)=>{let r=t.selection,n=r instanceof Te,a;if(n){if(r.node.isTextblock||!Bs(t.doc,r.from))return!1;a=r.from}else if(a=Op(t.doc,r.from,-1),a==null)return!1;if(e){let i=t.tr.join(a);n&&i.setSelection(Te.create(i.doc,a-t.doc.resolve(a).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},Vae=(t,e)=>{let r=t.selection,n;if(r instanceof Te){if(r.node.isTextblock||!Bs(t.doc,r.to))return!1;n=r.to}else if(n=Op(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},Hae=(t,e)=>{let{$from:r,$to:n}=t.selection,a=r.blockRange(n),i=a&&Al(a);return i==null?!1:(e&&e(t.tr.lift(a,i).scrollIntoView()),!0)},P6=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function $y(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const Wae=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let a=r.node(-1),i=r.indexAfter(-1),o=$y(a.contentMatchAt(i));if(!o||!a.canReplaceWith(i,i,o))return!1;if(e){let l=r.after(),c=t.tr.replaceWith(l,l,o.createAndFill());c.setSelection(qe.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},T6=(t,e)=>{let r=t.selection,{$from:n,$to:a}=r;if(r instanceof wn||n.parent.inlineContent||a.parent.inlineContent)return!1;let i=$y(a.parent.contentMatchAt(a.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!n.parentOffset&&a.index()<a.parent.childCount?n:a).pos,l=t.tr.insert(o,i.createAndFill());l.setSelection(Be.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},I6=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let i=r.before();if(Wa(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let n=r.blockRange(),a=n&&Al(n);return a==null?!1:(e&&e(t.tr.lift(n,a).scrollIntoView()),!0)};function qae(t){return(e,r)=>{let{$from:n,$to:a}=e.selection;if(e.selection instanceof Te&&e.selection.node.isBlock)return!n.parentOffset||!Wa(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i=[],o,l,c=!1,d=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){c=n.end(p)==n.pos+(n.depth-p),d=n.start(p)==n.pos-(n.depth-p),l=$y(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),i.unshift(c&&l?{type:l}:null),o=p;break}else{if(p==1)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof Be||e.selection instanceof wn)&&u.deleteSelection();let f=u.mapping.map(n.pos),h=Wa(u.doc,f,i.length,i);if(h||(i[0]=l?{type:l}:null,h=Wa(u.doc,f,i.length,i)),!h)return!1;if(u.split(f,i.length,i),!c&&d&&n.node(o).type!=l){let p=u.mapping.map(n.before(o)),m=u.doc.resolve(p);l&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,l)&&u.setNodeMarkup(u.mapping.map(n.before(o)),l)}return r&&r(u.scrollIntoView()),!0}}const Yae=qae(),Gae=(t,e)=>{let{$from:r,to:n}=t.selection,a,i=r.sharedDepth(n);return i==0?!1:(a=r.before(i),e&&e(t.tr.setSelection(Te.create(t.doc,a))),!0)};function Kae(t,e,r){let n=e.nodeBefore,a=e.nodeAfter,i=e.index();return!n||!a||!n.type.compatibleContent(a.type)?!1:!n.content.size&&e.parent.canReplace(i-1,i)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(a.isTextblock||Bs(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function M6(t,e,r,n){let a=e.nodeBefore,i=e.nodeAfter,o,l,c=a.type.spec.isolating||i.type.spec.isolating;if(!c&&Kae(t,e,r))return!0;let d=!c&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(o=(l=a.contentMatchAt(a.childCount)).findWrapping(i.type))&&l.matchType(o[0]||i.type).validEnd){if(r){let p=e.pos+i.nodeSize,m=re.empty;for(let y=o.length-1;y>=0;y--)m=re.from(o[y].create(null,m));m=re.from(a.copy(m));let x=t.tr.step(new gr(e.pos-1,p,e.pos,p,new xe(m,1,0),o.length,!0)),g=x.doc.resolve(p+2*o.length);g.nodeAfter&&g.nodeAfter.type==a.type&&Bs(x.doc,g.pos)&&x.join(g.pos),r(x.scrollIntoView())}return!0}let u=i.type.spec.isolating||n>0&&c?null:qe.findFrom(e,1),f=u&&u.$from.blockRange(u.$to),h=f&&Al(f);if(h!=null&&h>=e.depth)return r&&r(t.tr.lift(f,h).scrollIntoView()),!0;if(d&&al(i,"start",!0)&&al(a,"end")){let p=a,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let x=i,g=1;for(;!x.isTextblock;x=x.firstChild)g++;if(p.canReplace(p.childCount,p.childCount,x.content)){if(r){let y=re.empty;for(let b=m.length-1;b>=0;b--)y=re.from(m[b].copy(y));let j=t.tr.step(new gr(e.pos-m.length,e.pos+i.nodeSize,e.pos+g,e.pos+i.nodeSize-g,new xe(y,m.length,0),0,!0));r(j.scrollIntoView())}return!0}}return!1}function $6(t){return function(e,r){let n=e.selection,a=t<0?n.$from:n.$to,i=a.depth;for(;a.node(i).isInline;){if(!i)return!1;i--}return a.node(i).isTextblock?(r&&r(e.tr.setSelection(Be.create(e.doc,t<0?a.start(i):a.end(i)))),!0):!1}}const Jae=$6(-1),Xae=$6(1);function Qae(t,e=null){return function(r,n){let{$from:a,$to:i}=r.selection,o=a.blockRange(i),l=o&&Ey(o,t,e);return l?(n&&n(r.tr.wrap(o,l).scrollIntoView()),!0):!1}}function c2(t,e=null){return function(r,n){let a=!1;for(let i=0;i<r.selection.ranges.length&&!a;i++){let{$from:{pos:o},$to:{pos:l}}=r.selection.ranges[i];r.doc.nodesBetween(o,l,(c,d)=>{if(a)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)a=!0;else{let u=r.doc.resolve(d),f=u.index();a=u.parent.canReplaceWith(f,f+1,t)}})}if(!a)return!1;if(n){let i=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:c}}=r.selection.ranges[o];i.setBlockType(l,c,t,e)}n(i.scrollIntoView())}return!0}}function Ry(...t){return function(e,r,n){for(let a=0;a<t.length;a++)if(t[a](e,r,n))return!0;return!1}}Ry(Ty,N6,C6);Ry(Ty,O6,E6);Ry(P6,T6,I6,Yae);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Zae(t,e=null){return function(r,n){let{$from:a,$to:i}=r.selection,o=a.blockRange(i);if(!o)return!1;let l=n?r.tr:null;return ese(l,o,t,e)?(n&&n(l.scrollIntoView()),!0):!1}}function ese(t,e,r,n=null){let a=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=o.resolve(e.start-2);i=new Mf(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new Mf(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),a=!0}let l=Ey(i,r,n,e);return l?(t&&tse(t,e,l,a,r),!0):!1}function tse(t,e,r,n,a){let i=re.empty;for(let u=r.length-1;u>=0;u--)i=re.from(r[u].type.create(r[u].attrs,i));t.step(new gr(e.start-(n?2:0),e.end,e.start,e.end,new xe(i,0,0),r.length,!0));let o=0;for(let u=0;u<r.length;u++)r[u].type==a&&(o=u+1);let l=r.length-o,c=e.start+r.length-(n?2:0),d=e.parent;for(let u=e.startIndex,f=e.endIndex,h=!0;u<f;u++,h=!1)!h&&Wa(t.doc,c,l)&&(t.split(c,l),c+=2*l),c+=d.child(u).nodeSize;return t}function rse(t){return function(e,r){let{$from:n,$to:a}=e.selection,i=n.blockRange(a,o=>o.childCount>0&&o.firstChild.type==t);return i?r?n.node(i.depth-1).type==t?nse(e,r,t,i):ase(e,r,i):!0:!1}}function nse(t,e,r,n){let a=t.tr,i=n.end,o=n.$to.end(n.depth);i<o&&(a.step(new gr(i-1,o,i,o,new xe(re.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new Mf(a.doc.resolve(n.$from.pos),a.doc.resolve(o),n.depth));const l=Al(n);if(l==null)return!1;a.lift(n,l);let c=a.doc.resolve(a.mapping.map(i,-1)-1);return Bs(a.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&a.join(c.pos),e(a.scrollIntoView()),!0}function ase(t,e,r){let n=t.tr,a=r.parent;for(let p=r.end,m=r.endIndex-1,x=r.startIndex;m>x;m--)p-=a.child(m).nodeSize,n.delete(p-1,p+1);let i=n.doc.resolve(r.start),o=i.nodeAfter;if(n.mapping.map(r.end)!=r.start+i.nodeAfter.nodeSize)return!1;let l=r.startIndex==0,c=r.endIndex==a.childCount,d=i.node(-1),u=i.index(-1);if(!d.canReplace(u+(l?0:1),u+1,o.content.append(c?re.empty:re.from(a))))return!1;let f=i.pos,h=f+o.nodeSize;return n.step(new gr(f-(l?1:0),h+(c?1:0),f+1,h-1,new xe((l?re.empty:re.from(a.copy(re.empty))).append(c?re.empty:re.from(a.copy(re.empty))),l?0:1,c?0:1),l?0:1)),e(n.scrollIntoView()),!0}function sse(t){return function(e,r){let{$from:n,$to:a}=e.selection,i=n.blockRange(a,d=>d.childCount>0&&d.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let l=i.parent,c=l.child(o-1);if(c.type!=t)return!1;if(r){let d=c.lastChild&&c.lastChild.type==l.type,u=re.from(d?t.create():null),f=new xe(re.from(t.create(null,re.from(l.type.create(null,u)))),d?3:1,0),h=i.start,p=i.end;r(e.tr.step(new gr(h-(d?3:1),p,h,p,f,1,!0)).scrollIntoView())}return!0}}const Sr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},sl=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let $x=null;const $a=function(t,e,r){let n=$x||($x=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},ise=function(){$x=null},Mi=function(t,e,r,n){return r&&(d2(t,e,r,n,-1)||d2(t,e,r,n,1))},ose=/^(img|br|input|textarea|hr)$/i;function d2(t,e,r,n,a){for(var i;;){if(t==r&&e==n)return!0;if(e==(a<0?0:Rn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Cd(t)||ose.test(t.nodeName)||t.contentEditable=="false")return!1;e=Sr(t)+(a<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(a<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=a;else return!1;else t=o,e=a<0?Rn(t):0}else return!1}}function Rn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function lse(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Rn(t)}else if(t.parentNode&&!Cd(t))e=Sr(t),t=t.parentNode;else return null}}function cse(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Cd(t))e=Sr(t)+1,t=t.parentNode;else return null}}function dse(t,e,r){for(let n=e==0,a=e==Rn(t);n||a;){if(t==r)return!0;let i=Sr(t);if(t=t.parentNode,!t)return!1;n=n&&i==0,a=a&&i==Rn(t)}}function Cd(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Tp=function(t){return t.focusNode&&Mi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ii(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function use(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function fse(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(Rn(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(Rn(n.startContainer),n.startOffset)}}}const Sa=typeof navigator<"u"?navigator:null,u2=typeof document<"u"?document:null,Us=Sa&&Sa.userAgent||"",Rx=/Edge\/(\d+)/.exec(Us),R6=/MSIE \d/.exec(Us),Dx=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Us),sn=!!(R6||Dx||Rx),As=R6?document.documentMode:Dx?+Dx[1]:Rx?+Rx[1]:0,Bn=!sn&&/gecko\/(\d+)/i.test(Us);Bn&&+(/Firefox\/(\d+)/.exec(Us)||[0,0])[1];const _x=!sn&&/Chrome\/(\d+)/.exec(Us),Ir=!!_x,D6=_x?+_x[1]:0,Yr=!sn&&!!Sa&&/Apple Computer/.test(Sa.vendor),il=Yr&&(/Mobile\/\w+/.test(Us)||!!Sa&&Sa.maxTouchPoints>2),In=il||(Sa?/Mac/.test(Sa.platform):!1),hse=Sa?/Win/.test(Sa.platform):!1,za=/Android \d/.test(Us),kd=!!u2&&"webkitFontSmoothing"in u2.documentElement.style,pse=kd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function mse(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ea(t,e){return typeof t=="number"?t:t[e]}function gse(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function f2(t,e,r){let n=t.someProp("scrollThreshold")||0,a=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=sl(o);continue}let l=o,c=l==i.body,d=c?mse(i):gse(l),u=0,f=0;if(e.top<d.top+Ea(n,"top")?f=-(d.top-e.top+Ea(a,"top")):e.bottom>d.bottom-Ea(n,"bottom")&&(f=e.bottom-e.top>d.bottom-d.top?e.top+Ea(a,"top")-d.top:e.bottom-d.bottom+Ea(a,"bottom")),e.left<d.left+Ea(n,"left")?u=-(d.left-e.left+Ea(a,"left")):e.right>d.right-Ea(n,"right")&&(u=e.right-d.right+Ea(a,"right")),u||f)if(c)i.defaultView.scrollBy(u,f);else{let p=l.scrollLeft,m=l.scrollTop;f&&(l.scrollTop+=f),u&&(l.scrollLeft+=u);let x=l.scrollLeft-p,g=l.scrollTop-m;e={left:e.left-x,top:e.top-g,right:e.right-x,bottom:e.bottom-g}}let h=c?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:sl(o)}}function xse(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,a;for(let i=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(i,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=r-20){n=l,a=c.top;break}}return{refDOM:n,refTop:a,stack:_6(t.dom)}}function _6(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=sl(n));return e}function yse({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;L6(r,n==0?0:n-e)}function L6(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:a,left:i}=t[r];n.scrollTop!=a+e&&(n.scrollTop=a+e),n.scrollLeft!=i&&(n.scrollLeft=i)}}let Zi=null;function vse(t){if(t.setActive)return t.setActive();if(Zi)return t.focus(Zi);let e=_6(t);t.focus(Zi==null?{get preventScroll(){return Zi={preventScroll:!0},!0}}:void 0),Zi||(Zi=!1,L6(e,0))}function z6(t,e){let r,n=2e8,a,i=0,o=e.top,l=e.top,c,d;for(let u=t.firstChild,f=0;u;u=u.nextSibling,f++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=$a(u).getClientRects();else continue;for(let p=0;p<h.length;p++){let m=h[p];if(m.top<=o&&m.bottom>=l){o=Math.max(m.bottom,o),l=Math.min(m.top,l);let x=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(x<n){r=u,n=x,a=x&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&x&&(i=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!c&&m.left<=e.left&&m.right>=e.left&&(c=u,d={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(i=f+1)}}return!r&&c&&(r=c,a=d,n=0),r&&r.nodeType==3?bse(r,a):!r||n&&r.nodeType==1?{node:t,offset:i}:z6(r,a)}function bse(t,e){let r=t.nodeValue.length,n=document.createRange();for(let a=0;a<r;a++){n.setEnd(t,a+1),n.setStart(t,a);let i=ls(n,1);if(i.top!=i.bottom&&Dy(e,i))return{node:t,offset:a+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function Dy(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function jse(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function wse(t,e,r){let{node:n,offset:a}=z6(e,r),i=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();i=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,a,i)}function Sse(t,e,r,n){let a=-1;for(let i=e,o=!1;i!=t.dom;){let l=t.docView.nearestDesc(i,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&c.left>n.left||c.top>n.top?a=l.posBefore:(!o&&c.right<n.left||c.bottom<n.top)&&(a=l.posAfter),o=!0),!l.contentDOM&&a<0&&!l.node.isText))return(l.node.isBlock?n.top<(c.top+c.bottom)/2:n.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;i=l.dom.parentNode}return a>-1?a:t.docView.posFromDOM(e,r,-1)}function F6(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let a=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),i=a;;){let o=t.childNodes[i];if(o.nodeType==1){let l=o.getClientRects();for(let c=0;c<l.length;c++){let d=l[c];if(Dy(e,d))return F6(o,e,d)}}if((i=(i+1)%n)==a)break}return t}function Nse(t,e){let r=t.dom.ownerDocument,n,a=0,i=fse(r,e.left,e.top);i&&({node:n,offset:a}=i);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=t.dom.getBoundingClientRect();if(!Dy(e,d)||(o=F6(t.dom,e,d),!o))return null}if(Yr)for(let d=o;n&&d;d=sl(d))d.draggable&&(n=void 0);if(o=jse(o,e),n){if(Bn&&n.nodeType==1&&(a=Math.min(a,n.childNodes.length),a<n.childNodes.length)){let u=n.childNodes[a],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&a++}let d;kd&&a&&n.nodeType==1&&(d=n.childNodes[a-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&a--,n==t.dom&&a==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(a==0||n.nodeType!=1||n.childNodes[a-1].nodeName!="BR")&&(l=Sse(t,n,a,e))}l==null&&(l=wse(t,o,e));let c=t.docView.nearestDesc(o,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function h2(t){return t.top<t.bottom||t.left<t.right}function ls(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(h2(n))return n}return Array.prototype.find.call(r,h2)||t.getBoundingClientRect()}const Ase=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function B6(t,e,r){let{node:n,offset:a,atom:i}=t.docView.domFromPos(e,r<0?-1:1),o=kd||Bn;if(n.nodeType==3)if(o&&(Ase.test(n.nodeValue)||(r<0?!a:a==n.nodeValue.length))){let c=ls($a(n,a,a),r);if(Bn&&a&&/\s/.test(n.nodeValue[a-1])&&a<n.nodeValue.length){let d=ls($a(n,a-1,a-1),-1);if(d.top==c.top){let u=ls($a(n,a,a+1),-1);if(u.top!=c.top)return Bl(u,u.left<d.left)}}return c}else{let c=a,d=a,u=r<0?1:-1;return r<0&&!a?(d++,u=-1):r>=0&&a==n.nodeValue.length?(c--,u=1):r<0?c--:d++,Bl(ls($a(n,c,d),u),u<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&a&&(r<0||a==Rn(n))){let c=n.childNodes[a-1];if(c.nodeType==1)return Mm(c.getBoundingClientRect(),!1)}if(i==null&&a<Rn(n)){let c=n.childNodes[a];if(c.nodeType==1)return Mm(c.getBoundingClientRect(),!0)}return Mm(n.getBoundingClientRect(),r>=0)}if(i==null&&a&&(r<0||a==Rn(n))){let c=n.childNodes[a-1],d=c.nodeType==3?$a(c,Rn(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(d)return Bl(ls(d,1),!1)}if(i==null&&a<Rn(n)){let c=n.childNodes[a];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let d=c?c.nodeType==3?$a(c,0,o?0:1):c.nodeType==1?c:null:null;if(d)return Bl(ls(d,-1),!0)}return Bl(ls(n.nodeType==3?$a(n):n,-r),r>=0)}function Bl(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function Mm(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function U6(t,e,r){let n=t.state,a=t.root.activeElement;n!=e&&t.updateState(e),a!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),a!=t.dom&&a&&a.focus()}}function Cse(t,e,r){let n=e.selection,a=r=="up"?n.$from:n.$to;return U6(t,e,()=>{let{node:i}=t.docView.domFromPos(a.pos,r=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(i,!0);if(!l)break;if(l.node.isBlock){i=l.contentDOM||l.dom;break}i=l.dom.parentNode}let o=B6(t,a.pos,1);for(let l=i.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=$a(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<c.length;d++){let u=c[d];if(u.bottom>u.top+1&&(r=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const kse=/[\u0590-\u08ac]/;function Ose(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let a=n.parentOffset,i=!a,o=a==n.parent.content.size,l=t.domSelection();return l?!kse.test(n.parent.textContent)||!l.modify?r=="left"||r=="backward"?i:o:U6(t,e,()=>{let{focusNode:c,focusOffset:d,anchorNode:u,anchorOffset:f}=t.domSelectionRange(),h=l.caretBidiLevel;l.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:x}=t.domSelectionRange(),g=m&&!p.contains(m.nodeType==1?m:m.parentNode)||c==m&&d==x;try{l.collapse(u,f),c&&(c!=u||d!=f)&&l.extend&&l.extend(c,d)}catch{}return h!=null&&(l.caretBidiLevel=h),g}):n.pos==n.start()||n.pos==n.end()}let p2=null,m2=null,g2=!1;function Ese(t,e,r){return p2==e&&m2==r?g2:(p2=e,m2=r,g2=r=="up"||r=="down"?Cse(t,e,r):Ose(t,e,r))}const Un=0,x2=1,fi=2,Na=3;class Od{constructor(e,r,n,a){this.parent=e,this.children=r,this.dom=n,this.contentDOM=a,this.dirty=Un,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let a=this.children[r];if(a==e)return n;n+=a.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let i,o;if(e==this.contentDOM)i=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let a;if(e==this.dom&&this.contentDOM)a=r>Sr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let i=e;;i=i.parentNode){if(i==this.dom){a=!1;break}if(i.previousSibling)break}if(a==null&&r==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){a=!0;break}if(i.nextSibling)break}}return a??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,a=e;a;a=a.parentNode){let i=this.getDesc(a),o;if(i&&(!r||i.node))if(n&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return i}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let a=e;a;a=a.parentNode){let i=this.getDesc(a);if(i)return i.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let a=this.children[r],i=n+a.size;if(n==e&&i!=n){for(;!a.border&&a.children.length;)for(let o=0;o<a.children.length;o++){let l=a.children[o];if(l.size){a=l;break}}return a}if(e<i)return a.descAt(e-n-a.border);n=i}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,a=0;for(let i=0;n<this.children.length;n++){let o=this.children[n],l=i+o.size;if(l>e||o instanceof H6){a=e-i;break}i=l}if(a)return this.children[n].domFromPos(a-this.children[n].border,r);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof V6&&i.side>=0;n--);if(r<=0){let i,o=!0;for(;i=n?this.children[n-1]:null,!(!i||i.dom.parentNode==this.contentDOM);n--,o=!1);return i&&r&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,r):{node:this.contentDOM,offset:i?Sr(i.dom)+1:0}}else{let i,o=!0;for(;i=n<this.children.length?this.children[n]:null,!(!i||i.dom.parentNode==this.contentDOM);n++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,r):{node:this.contentDOM,offset:i?Sr(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let a=-1,i=-1;for(let o=n,l=0;;l++){let c=this.children[l],d=o+c.size;if(a==-1&&e<=d){let u=o+c.border;if(e>=u&&r<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,r,u);e=o;for(let f=l;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){a=Sr(h.dom)+1;break}e-=h.size}a==-1&&(a=0)}if(a>-1&&(d>r||l==this.children.length-1)){r=d;for(let u=l+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){i=Sr(f.dom);break}r+=f.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:e,to:r,fromOffset:a,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,a=!1){let i=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let x=this.children[p],g=m+x.size;if(i>m&&o<g)return x.setSelection(e-m-x.border,r-m-x.border,n,a);m=g}let l=this.domFromPos(e,e?-1:1),c=r==e?l:this.domFromPos(r,r?-1:1),d=n.root.getSelection(),u=n.domSelectionRange(),f=!1;if((Bn||Yr)&&e==r){let{node:p,offset:m}=l;if(p.nodeType==3){if(f=!!(m&&p.nodeValue[m-1]==`
`),f&&m==p.nodeValue.length)for(let x=p,g;x;x=x.parentNode){if(g=x.nextSibling){g.nodeName=="BR"&&(l=c={node:g.parentNode,offset:Sr(g)+1});break}let y=x.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let x=p.childNodes[m-1];f=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(Bn&&u.focusNode&&u.focusNode!=c.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(a=!0)}if(!(a||f&&Yr)&&Mi(l.node,l.offset,u.anchorNode,u.anchorOffset)&&Mi(c.node,c.offset,u.focusNode,u.focusOffset))return;let h=!1;if((d.extend||e==r)&&!(f&&Bn)){d.collapse(l.node,l.offset);try{e!=r&&d.extend(c.node,c.offset),h=!0}catch{}}if(!h){if(e>r){let m=l;l=c,c=m}let p=document.createRange();p.setEnd(c.node,c.offset),p.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,a=0;a<this.children.length;a++){let i=this.children[a],o=n+i.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let l=n+i.border,c=o-i.border;if(e>=l&&r<=c){this.dirty=e==n||r==o?fi:x2,e==l&&r==c&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Na:i.markDirty(e-l,r-l);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?fi:Na}n=o}this.dirty=fi}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?fi:x2;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class V6 extends Od{constructor(e,r,n,a){let i,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!i)return a;if(i.parent)return i.parent.posBeforeChild(i)})),!r.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,i=this}matchesWidget(e){return this.dirty==Un&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Pse extends Od{constructor(e,r,n,a){super(e,[],r,null),this.textDOM=n,this.text=a}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class $i extends Od{constructor(e,r,n,a,i){super(e,[],n,a),this.mark=r,this.spec=i}static create(e,r,n,a){let i=a.nodeViews[r.type.name],o=i&&i(r,a,n);return(!o||!o.dom)&&(o=Vi.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new $i(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Na||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Na&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Un){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Un}}slice(e,r,n){let a=$i.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;r<o&&(i=zx(i,r,o,n)),e>0&&(i=zx(i,0,e,n));for(let l=0;l<i.length;l++)i[l].parent=a;return a.children=i,a}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Cs extends Od{constructor(e,r,n,a,i,o,l,c,d){super(e,[],i,o),this.node=r,this.outerDeco=n,this.innerDeco=a,this.nodeDOM=l}static create(e,r,n,a,i,o){let l=i.nodeViews[r.type.name],c,d=l&&l(r,i,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},n,a),u=d&&d.dom,f=d&&d.contentDOM;if(r.isText){if(!u)u=document.createTextNode(r.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=Vi.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!f&&!r.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),r.type.spec.draggable&&(u.draggable=!0));let h=u;return u=Y6(u,n,r),d?c=new Tse(e,r,n,a,u,f||null,h,d,i,o+1):r.isText?new Ip(e,r,n,a,u,h,i):new Cs(e,r,n,a,u,f||null,h,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>re.empty)}return e}matchesNode(e,r,n){return this.dirty==Un&&e.eq(this.node)&&Rf(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,a=r,i=e.composing?this.localCompositionInfo(e,r):null,o=i&&i.pos>-1?i:null,l=i&&i.pos<0,c=new Mse(this,o&&o.node,e);Dse(this.node,this.innerDeco,(d,u,f)=>{d.spec.marks?c.syncToMarks(d.spec.marks,n,e):d.type.side>=0&&!f&&c.syncToMarks(u==this.node.childCount?bt.none:this.node.child(u).marks,n,e),c.placeWidget(d,e,a)},(d,u,f,h)=>{c.syncToMarks(d.marks,n,e);let p;c.findNodeMatch(d,u,f,h)||l&&e.state.selection.from>a&&e.state.selection.to<a+d.nodeSize&&(p=c.findIndexWithChild(i.node))>-1&&c.updateNodeAt(d,u,f,p,e)||c.updateNextNode(d,u,f,e,h,a)||c.addNode(d,u,f,e,a),a+=d.nodeSize}),c.syncToMarks([],n,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==fi)&&(o&&this.protectLocalComposition(e,o),W6(this.contentDOM,this.children,e),il&&_se(this.dom))}localCompositionInfo(e,r){let{from:n,to:a}=e.state.selection;if(!(e.state.selection instanceof Be)||n<r||a>r+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,l=Lse(this.node.content,o,n-r,a-r);return l<0?null:{node:i,pos:l,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:a}){if(this.getDesc(r))return;let i=r;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new Pse(this,i,r,a);e.input.compositionNodes.push(o),this.children=zx(this.children,n,n+a.length,e,o)}update(e,r,n,a){return this.dirty==Na||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,a),!0)}updateInner(e,r,n,a){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(a,this.posAtStart),this.dirty=Un}updateOuterDeco(e){if(Rf(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=q6(this.dom,this.nodeDOM,Lx(this.outerDeco,this.node,r),Lx(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function y2(t,e,r,n,a){Y6(n,e,t);let i=new Cs(void 0,t,e,r,n,n,n,a,0);return i.contentDOM&&i.updateChildren(a,0),i}class Ip extends Cs{constructor(e,r,n,a,i,o,l){super(e,r,n,a,i,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,a){return this.dirty==Na||this.dirty!=Un&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Un||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,a.trackWrites==this.nodeDOM&&(a.trackWrites=null)),this.node=e,this.dirty=Un,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let a=this.node.cut(e,r),i=document.createTextNode(a.text);return new Ip(this.parent,a,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Na)}get domAtom(){return!1}isText(e){return this.node.text==e}}class H6 extends Od{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Un&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Tse extends Cs{constructor(e,r,n,a,i,o,l,c,d,u){super(e,r,n,a,i,o,l,d,u),this.spec=c}update(e,r,n,a){if(this.dirty==Na)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,r,n);return i&&this.updateInner(e,r,n,a),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,a)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,a){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,a)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function W6(t,e,r){let n=t.firstChild,a=!1;for(let i=0;i<e.length;i++){let o=e[i],l=o.dom;if(l.parentNode==t){for(;l!=n;)n=v2(n),a=!0;n=n.nextSibling}else a=!0,t.insertBefore(l,n);if(o instanceof $i){let c=n?n.previousSibling:t.lastChild;W6(o.contentDOM,o.children,r),n=c?c.nextSibling:t.firstChild}}for(;n;)n=v2(n),a=!0;a&&r.trackWrites==t&&(r.trackWrites=null)}const oc=function(t){t&&(this.nodeName=t)};oc.prototype=Object.create(null);const hi=[new oc];function Lx(t,e,r){if(t.length==0)return hi;let n=r?hi[0]:new oc,a=[n];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&a.push(n=new oc(o.nodeName));for(let l in o){let c=o[l];c!=null&&(r&&a.length==1&&a.push(n=new oc(e.isInline?"span":"div")),l=="class"?n.class=(n.class?n.class+" ":"")+c:l=="style"?n.style=(n.style?n.style+";":"")+c:l!="nodeName"&&(n[l]=c))}}}return a}function q6(t,e,r,n){if(r==hi&&n==hi)return e;let a=e;for(let i=0;i<n.length;i++){let o=n[i],l=r[i];if(i){let c;l&&l.nodeName==o.nodeName&&a!=t&&(c=a.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(a),l=hi[0]),a=c}Ise(a,l||hi[0],o)}return a}function Ise(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],a=r.class?r.class.split(" ").filter(Boolean):[];for(let i=0;i<n.length;i++)a.indexOf(n[i])==-1&&t.classList.remove(n[i]);for(let i=0;i<a.length;i++)n.indexOf(a[i])==-1&&t.classList.add(a[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,a;for(;a=n.exec(e.style);)t.style.removeProperty(a[1])}r.style&&(t.style.cssText+=r.style)}}function Y6(t,e,r){return q6(t,t,hi,Lx(e,r,t.nodeType!=1))}function Rf(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function v2(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Mse{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=$se(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let a=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;a<o&&(a==i-1?this.top:this.stack[a+1<<1]).matchesMark(e[a])&&e[a].type.spec.spanning!==!1;)a++;for(;a<i;)this.destroyRest(),this.top.dirty=Un,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let d=this.top.children[c];if(d.matchesMark(e[i])&&!this.isLocked(d.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=$i.create(this.top,e[i],r,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}}findNodeMatch(e,r,n,a){let i=-1,o;if(a>=this.preMatch.index&&(o=this.preMatch.matches[a-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))i=this.top.children.indexOf(o,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let d=this.top.children[l];if(d.matchesNode(e,r,n)&&!this.preMatch.matched.has(d)){i=l;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,r,n,a,i){let o=this.top.children[a];return o.dirty==Na&&o.dom==o.contentDOM&&(o.dirty=fi),o.update(e,r,n,i)?(this.destroyBetween(this.index,a),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let a=this.index;a<this.top.children.length;a++)if(this.top.children[a]==n)return a}return-1}e=r}}updateNextNode(e,r,n,a,i,o){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof Cs){let d=this.preMatch.matched.get(c);if(d!=null&&d!=i)return!1;let u=c.dom,f,h=this.isLocked(u)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=Na&&Rf(r,c.outerDeco));if(!h&&c.update(e,r,n,a))return this.destroyBetween(this.index,l),c.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(c,e,r,n,a,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=fi,f.updateChildren(a,o+1),f.dirty=Un),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,a,i,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!Rf(n,e.outerDeco)||!a.eq(e.innerDeco))return null;let l=Cs.create(this.top,r,n,a,i,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let c of l.children)c.parent=l}return e.destroy(),l}addNode(e,r,n,a,i){let o=Cs.create(this.top,e,r,n,a,i);o.contentDOM&&o.updateChildren(a,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let a=this.index<this.top.children.length?this.top.children[this.index]:null;if(a&&a.matchesWidget(e)&&(e==a.widget||!a.widget.type.toDOM.parentNode))this.index++;else{let i=new V6(this.top,e,r,n);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof $i;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof Ip)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Yr||Ir)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let a=new H6(this.top,[],n,null);r!=this.top?r.children.push(a):r.children.splice(this.index++,0,a),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function $se(t,e){let r=e,n=r.children.length,a=t.childCount,i=new Map,o=[];e:for(;a>0;){let l;for(;;)if(n){let d=r.children[n-1];if(d instanceof $i)r=d,n=d.children.length;else{l=d,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let c=l.node;if(c){if(c!=t.child(a-1))break;--a,i.set(l,a),o.push(l)}}return{index:a,matched:i,matches:o.reverse()}}function Rse(t,e){return t.type.side-e.type.side}function Dse(t,e,r,n){let a=e.locals(t),i=0;if(a.length==0){for(let d=0;d<t.childCount;d++){let u=t.child(d);n(u,a,e.forChild(i,u),d),i+=u.nodeSize}return}let o=0,l=[],c=null;for(let d=0;;){let u,f;for(;o<a.length&&a[o].to==i;){let g=a[o++];g.widget&&(u?(f||(f=[u])).push(g):u=g)}if(u)if(f){f.sort(Rse);for(let g=0;g<f.length;g++)r(f[g],d,!!c)}else r(u,d,!!c);let h,p;if(c)p=-1,h=c,c=null;else if(d<t.childCount)p=d,h=t.child(d++);else break;for(let g=0;g<l.length;g++)l[g].to<=i&&l.splice(g--,1);for(;o<a.length&&a[o].from<=i&&a[o].to>i;)l.push(a[o++]);let m=i+h.nodeSize;if(h.isText){let g=m;o<a.length&&a[o].from<g&&(g=a[o].from);for(let y=0;y<l.length;y++)l[y].to<g&&(g=l[y].to);g<m&&(c=h.cut(g-i),h=h.cut(0,g-i),m=g,p=-1)}else for(;o<a.length&&a[o].to<m;)o++;let x=h.isInline&&!h.isLeaf?l.filter(g=>!g.inline):l.slice();n(h,x,e.forChild(i,h),p),i=m}}function _se(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Lse(t,e,r,n){for(let a=0,i=0;a<t.childCount&&i<=n;){let o=t.child(a++),l=i;if(i+=o.nodeSize,!o.isText)continue;let c=o.text;for(;a<t.childCount;){let d=t.child(a++);if(i+=d.nodeSize,!d.isText)break;c+=d.text}if(i>=r){if(i>=n&&c.slice(n-e.length-l,n-l)==e)return n-e.length;let d=l<n?c.lastIndexOf(e,n-l-1):-1;if(d>=0&&d+e.length+l>=r)return l+d;if(r==n&&c.length>=n+e.length-l&&c.slice(n-l,n-l+e.length)==e)return n}}return-1}function zx(t,e,r,n,a){let i=[];for(let o=0,l=0;o<t.length;o++){let c=t[o],d=l,u=l+=c.size;d>=r||u<=e?i.push(c):(d<e&&i.push(c.slice(0,e-d,n)),a&&(i.push(a),a=void 0),u>r&&i.push(c.slice(r-d,c.size,n)))}return i}function _y(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let a=t.docView.nearestDesc(r.focusNode),i=a&&a.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let l=n.resolve(o),c,d;if(Tp(r)){for(c=o;a&&!a.node;)a=a.parent;let f=a.node;if(a&&f.isAtom&&Te.isSelectable(f)&&a.parent&&!(f.isInline&&dse(r.focusNode,r.focusOffset,a.dom))){let h=a.posBefore;d=new Te(o==h?l:n.resolve(h))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let f=o,h=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);f=Math.min(f,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[c,o]=h==t.state.selection.anchor?[h,f]:[f,h],l=n.resolve(o)}else c=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(c<0)return null}let u=n.resolve(c);if(!d){let f=e=="pointer"||t.state.selection.head<l.pos&&!i?1:-1;d=Ly(t,u,l,f)}return d}function G6(t){return t.editable?t.hasFocus():J6(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function qa(t,e=!1){let r=t.state.selection;if(K6(t,r),!!G6(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ir){let n=t.domSelectionRange(),a=t.domObserver.currentSelection;if(n.anchorNode&&a.anchorNode&&Mi(n.anchorNode,n.anchorOffset,a.anchorNode,a.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Fse(t);else{let{anchor:n,head:a}=r,i,o;b2&&!(r instanceof Be)&&(r.$from.parent.inlineContent||(i=j2(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=j2(t,r.to))),t.docView.setSelection(n,a,t,e),b2&&(i&&w2(i),o&&w2(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&zse(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const b2=Yr||Ir&&D6<63;function j2(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),a=n<r.childNodes.length?r.childNodes[n]:null,i=n?r.childNodes[n-1]:null;if(Yr&&a&&a.contentEditable=="false")return $m(a);if((!a||a.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(a)return $m(a);if(i)return $m(i)}}function $m(t){return t.contentEditable="true",Yr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function w2(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function zse(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,a=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=a)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!G6(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Fse(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,Sr(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&sn&&As<=11&&(r.disabled=!0,r.disabled=!1)}function K6(t,e){if(e instanceof Te){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(S2(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else S2(t)}function S2(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Ly(t,e,r,n){return t.someProp("createSelectionBetween",a=>a(t,e,r))||Be.between(e,r,n)}function N2(t){return t.editable&&!t.hasFocus()?!1:J6(t)}function J6(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Bse(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return Mi(e.node,e.offset,r.anchorNode,r.anchorOffset)}function Fx(t,e){let{$anchor:r,$head:n}=t.selection,a=e>0?r.max(n):r.min(n),i=a.parent.inlineContent?a.depth?t.doc.resolve(e>0?a.after():a.before()):null:a;return i&&qe.findFrom(i,e)}function ds(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function A2(t,e,r){let n=t.state.selection;if(n instanceof Be)if(r.indexOf("s")>-1){let{$head:a}=n,i=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(a.pos+i.nodeSize*(e<0?-1:1));return ds(t,new Be(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let a=Fx(t.state,e);return a&&a instanceof Te?ds(t,a):!1}else if(!(In&&r.indexOf("m")>-1)){let a=n.$head,i=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter,o;if(!i||i.isText)return!1;let l=e<0?a.pos-i.nodeSize:a.pos;return i.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?Te.isSelectable(i)?ds(t,new Te(e<0?t.state.doc.resolve(a.pos-i.nodeSize):a)):kd?ds(t,new Be(t.state.doc.resolve(e<0?l:l+i.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Te&&n.node.isInline)return ds(t,new Be(e>0?n.$to:n.$from));{let a=Fx(t.state,e);return a?ds(t,a):!1}}}function Df(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function lc(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function eo(t,e){return e<0?Use(t):Vse(t)}function Use(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let a,i,o=!1;for(Bn&&r.nodeType==1&&n<Df(r)&&lc(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let l=r.childNodes[n-1];if(lc(l,-1))a=r,i=--n;else if(l.nodeType==3)r=l,n=r.nodeValue.length;else break}}else{if(X6(r))break;{let l=r.previousSibling;for(;l&&lc(l,-1);)a=r.parentNode,i=Sr(l),l=l.previousSibling;if(l)r=l,n=Df(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?Bx(t,r,n):a&&Bx(t,a,i)}function Vse(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let a=Df(r),i,o;for(;;)if(n<a){if(r.nodeType!=1)break;let l=r.childNodes[n];if(lc(l,1))i=r,o=++n;else break}else{if(X6(r))break;{let l=r.nextSibling;for(;l&&lc(l,1);)i=l.parentNode,o=Sr(l)+1,l=l.nextSibling;if(l)r=l,n=0,a=Df(r);else{if(r=r.parentNode,r==t.dom)break;n=a=0}}}i&&Bx(t,i,o)}function X6(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Hse(t,e){for(;t&&e==t.childNodes.length&&!Cd(t);)e=Sr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function Wse(t,e){for(;t&&!e&&!Cd(t);)e=Sr(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function Bx(t,e,r){if(e.nodeType!=3){let i,o;(o=Hse(e,r))?(e=o,r=0):(i=Wse(e,r))&&(e=i,r=i.nodeValue.length)}let n=t.domSelection();if(!n)return;if(Tp(n)){let i=document.createRange();i.setEnd(e,r),i.setStart(e,r),n.removeAllRanges(),n.addRange(i)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:a}=t;setTimeout(()=>{t.state==a&&qa(t)},50)}function C2(t,e){let r=t.state.doc.resolve(e);if(!(Ir||hse)&&r.parent.inlineContent){let a=t.coordsAtPos(e);if(e>r.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>a.top&&o<a.bottom&&Math.abs(i.left-a.left)>1)return i.left<a.left?"ltr":"rtl"}if(e<r.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>a.top&&o<a.bottom&&Math.abs(i.left-a.left)>1)return i.left>a.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function k2(t,e,r){let n=t.state.selection;if(n instanceof Be&&!n.empty||r.indexOf("s")>-1||In&&r.indexOf("m")>-1)return!1;let{$from:a,$to:i}=n;if(!a.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Fx(t.state,e);if(o&&o instanceof Te)return ds(t,o)}if(!a.parent.inlineContent){let o=e<0?a:i,l=n instanceof wn?qe.near(o,e):qe.findFrom(o,e);return l?ds(t,l):!1}return!1}function O2(t,e){if(!(t.state.selection instanceof Be))return!0;let{$head:r,$anchor:n,empty:a}=t.state.selection;if(!r.sameParent(n))return!0;if(!a)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(r.pos-i.nodeSize,r.pos):o.delete(r.pos,r.pos+i.nodeSize),t.dispatch(o),!0}return!1}function E2(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function qse(t){if(!Yr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;E2(t,n,"true"),setTimeout(()=>E2(t,n,"false"),20)}return!1}function Yse(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Gse(t,e){let r=e.keyCode,n=Yse(e);if(r==8||In&&r==72&&n=="c")return O2(t,-1)||eo(t,-1);if(r==46&&!e.shiftKey||In&&r==68&&n=="c")return O2(t,1)||eo(t,1);if(r==13||r==27)return!0;if(r==37||In&&r==66&&n=="c"){let a=r==37?C2(t,t.state.selection.from)=="ltr"?-1:1:-1;return A2(t,a,n)||eo(t,a)}else if(r==39||In&&r==70&&n=="c"){let a=r==39?C2(t,t.state.selection.from)=="ltr"?1:-1:1;return A2(t,a,n)||eo(t,a)}else{if(r==38||In&&r==80&&n=="c")return k2(t,-1,n)||eo(t,-1);if(r==40||In&&r==78&&n=="c")return qse(t)||k2(t,1,n)||eo(t,1);if(n==(In?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function zy(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:a,openEnd:i}=e;for(;a>1&&i>1&&n.childCount==1&&n.firstChild.childCount==1;){a--,i--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Vi.fromSchema(t.state.schema),l=nC(),c=l.createElement("div");c.appendChild(o.serializeFragment(n,{document:l}));let d=c.firstChild,u,f=0;for(;d&&d.nodeType==1&&(u=rC[d.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let m=l.createElement(u[p]);for(;c.firstChild;)m.appendChild(c.firstChild);c.appendChild(m),f++}d=c.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${a} ${i}${f?` -${f}`:""} ${JSON.stringify(r)}`);let h=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:h,slice:e}}function Q6(t,e,r,n,a){let i=a.parent.type.spec.code,o,l;if(!r&&!e)return null;let c=!!e&&(n||i||!r);if(c){if(t.someProp("transformPastedText",h=>{e=h(e,i||n,t)}),i)return l=new xe(re.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",h=>{l=h(l,t,!0)}),l;let f=t.someProp("clipboardTextParser",h=>h(e,a,n,t));if(f)l=f;else{let h=a.marks(),{schema:p}=t.state,m=Vi.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(x=>{let g=o.appendChild(document.createElement("p"));x&&g.appendChild(m.serializeNode(p.text(x,h)))})}}else t.someProp("transformPastedHTML",f=>{r=f(r,t)}),o=Qse(r),kd&&Zse(o);let d=o&&o.querySelector("[data-pm-slice]"),u=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Ns.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||u),context:a,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!Kse.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)l=eie(P2(l,+u[1],+u[2]),u[4]);else if(l=xe.maxOpen(Jse(l.content,a),!0),l.openStart||l.openEnd){let f=0,h=0;for(let p=l.content.firstChild;f<l.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=l.content.lastChild;h<l.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);l=P2(l,f,h)}return t.someProp("transformPasted",f=>{l=f(l,t,c)}),l}const Kse=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Jse(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let a=e.node(r).contentMatchAt(e.index(r)),i,o=[];if(t.forEach(l=>{if(!o)return;let c=a.findWrapping(l.type),d;if(!c)return o=null;if(d=o.length&&i.length&&eC(c,i,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=tC(o[o.length-1],i.length));let u=Z6(l,c);o.push(u),a=a.matchType(u.type),i=c}}),o)return re.from(o)}return t}function Z6(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,re.from(t));return t}function eC(t,e,r,n,a){if(a<t.length&&a<e.length&&t[a]==e[a]){let i=eC(t,e,r,n.lastChild,a+1);if(i)return n.copy(n.content.replaceChild(n.childCount-1,i));if(n.contentMatchAt(n.childCount).matchType(a==t.length-1?r.type:t[a+1]))return n.copy(n.content.append(re.from(Z6(r,t,a+1))))}}function tC(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,tC(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(re.empty,!0);return t.copy(r.append(n))}function Ux(t,e,r,n,a,i){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(i=0),a<n-1&&(l=Ux(l,e,r,n,a+1,i)),a>=r&&(l=e<0?o.contentMatchAt(0).fillBefore(l,i<=a).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(re.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function P2(t,e,r){return e<t.openStart&&(t=new xe(Ux(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new xe(Ux(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const rC={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let T2=null;function nC(){return T2||(T2=document.implementation.createHTMLDocument("title"))}let Rm=null;function Xse(t){let e=window.trustedTypes;return e?(Rm||(Rm=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),Rm.createHTML(t)):t}function Qse(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=nC().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),a;if((a=n&&rC[n[1].toLowerCase()])&&(t=a.map(i=>"<"+i+">").join("")+t+a.map(i=>"</"+i+">").reverse().join("")),r.innerHTML=Xse(t),a)for(let i=0;i<a.length;i++)r=r.querySelector(a[i])||r;return r}function Zse(t){let e=t.querySelectorAll(Ir?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==" "&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function eie(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:a,openStart:i,openEnd:o}=t;for(let l=n.length-2;l>=0;l-=2){let c=r.nodes[n[l]];if(!c||c.hasRequiredAttrs())break;a=re.from(c.create(n[l+1],a)),i++,o++}return new xe(a,i,o)}const Gr={},Kr={},tie={touchstart:!0,touchmove:!0};class rie{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function nie(t){for(let e in Gr){let r=Gr[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{sie(t,n)&&!Fy(t,n)&&(t.editable||!(n.type in Kr))&&r(t,n)},tie[e]?{passive:!0}:void 0)}Yr&&t.dom.addEventListener("input",()=>null),Vx(t)}function js(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function aie(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Vx(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>Fy(t,n))})}function Fy(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function sie(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function iie(t,e){!Fy(t,e)&&Gr[e.type]&&(t.editable||!(e.type in Kr))&&Gr[e.type](t,e)}Kr.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!sC(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(za&&Ir&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),il&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",a=>a(t,ii(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||Gse(t,r)?r.preventDefault():js(t,"key")};Kr.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Kr.keypress=(t,e)=>{let r=e;if(sC(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||In&&r.metaKey)return;if(t.someProp("handleKeyPress",a=>a(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof Be)||!n.$from.sameParent(n.$to)){let a=String.fromCharCode(r.charCode),i=()=>t.state.tr.insertText(a).scrollIntoView();!/[\r\n]/.test(a)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,a,i))&&t.dispatch(i()),r.preventDefault()}};function Mp(t){return{left:t.clientX,top:t.clientY}}function oie(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function By(t,e,r,n,a){if(n==-1)return!1;let i=t.state.doc.resolve(n);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,l=>o>i.depth?l(t,r,i.nodeAfter,i.before(o),a,!0):l(t,r,i.node(o),i.before(o),a,!1)))return!0;return!1}function vo(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function lie(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&Te.isSelectable(n)?(vo(t,new Te(r)),!0):!1}function cie(t,e){if(e==-1)return!1;let r=t.state.selection,n,a;r instanceof Te&&(n=r.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o);if(Te.isSelectable(l)){n&&r.$from.depth>0&&o>=r.$from.depth&&i.before(r.$from.depth+1)==r.$from.pos?a=i.before(r.$from.depth):a=i.before(o);break}}return a!=null?(vo(t,Te.create(t.state.doc,a)),!0):!1}function die(t,e,r,n,a){return By(t,"handleClickOn",e,r,n)||t.someProp("handleClick",i=>i(t,e,n))||(a?cie(t,r):lie(t,r))}function uie(t,e,r,n){return By(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",a=>a(t,e,n))}function fie(t,e,r,n){return By(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",a=>a(t,e,n))||hie(t,r,n)}function hie(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(vo(t,Be.create(n,0,n.content.size)),!0):!1;let a=n.resolve(e);for(let i=a.depth+1;i>0;i--){let o=i>a.depth?a.nodeAfter:a.node(i),l=a.before(i);if(o.inlineContent)vo(t,Be.create(n,l+1,l+1+o.content.size));else if(Te.isSelectable(o))vo(t,Te.create(n,l));else continue;return!0}}function Uy(t){return _f(t)}const aC=In?"metaKey":"ctrlKey";Gr.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=Uy(t),a=Date.now(),i="singleClick";a-t.input.lastClick.time<500&&oie(r,t.input.lastClick)&&!r[aC]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:a,x:r.clientX,y:r.clientY,type:i,button:r.button};let o=t.posAtCoords(Mp(r));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new pie(t,o,r,!!n)):(i=="doubleClick"?uie:fie)(t,o.pos,o.inside,r)?r.preventDefault():js(t,"pointer"))};class pie{constructor(e,r,n,a){this.view=e,this.pos=r,this.event=n,this.flushed=a,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[aC],this.allowDefault=n.shiftKey;let i,o;if(r.inside>-1)i=e.state.doc.nodeAt(r.inside),o=r.inside;else{let u=e.state.doc.resolve(r.pos);i=u.parent,o=u.depth?u.before():0}const l=a?null:n.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:d}=e.state;(n.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||d instanceof Te&&d.from<=o&&d.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Bn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),js(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>qa(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(Mp(e))),this.updateAllowDefault(e),this.allowDefault||!r?js(this.view,"pointer"):die(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Yr&&this.mightDrag&&!this.mightDrag.node.isAtom||Ir&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(vo(this.view,qe.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):js(this.view,"pointer")}move(e){this.updateAllowDefault(e),js(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Gr.touchstart=t=>{t.input.lastTouch=Date.now(),Uy(t),js(t,"pointer")};Gr.touchmove=t=>{t.input.lastTouch=Date.now(),js(t,"pointer")};Gr.contextmenu=t=>Uy(t);function sC(t,e){return t.composing?!0:Yr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const mie=za?5e3:-1;Kr.compositionstart=Kr.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof Be&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||r.marks(),_f(t,!0),t.markCursor=null;else if(_f(t,!e.selection.empty),Bn&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let a=n.focusNode,i=n.focusOffset;a&&a.nodeType==1&&i!=0;){let o=i<0?a.lastChild:a.childNodes[i-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else a=o,i=-1}}t.input.composing=!0}iC(t,mie)};Kr.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,iC(t,20))};function iC(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>_f(t),e))}function oC(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=xie());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function gie(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=lse(e.focusNode,e.focusOffset),n=cse(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let a=n.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(r==i||n==i)return i;if(!a||!a.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function xie(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function _f(t,e=!1){if(!(za&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),oC(t),e||t.docView&&t.docView.dirty){let r=_y(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function yie(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),a=document.createRange();a.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(a),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const id=sn&&As<15||il&&pse<604;Gr.copy=Kr.cut=(t,e)=>{let r=e,n=t.state.selection,a=r.type=="cut";if(n.empty)return;let i=id?null:r.clipboardData,o=n.content(),{dom:l,text:c}=zy(t,o);i?(r.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",c)):yie(t,l),a&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function vie(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function bie(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let a=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?od(t,n.value,null,a,e):od(t,n.textContent,n.innerHTML,a,e)},50)}function od(t,e,r,n,a){let i=Q6(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,a,i||xe.empty)))return!0;if(!i)return!1;let o=vie(i),l=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(i);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function lC(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Kr.paste=(t,e)=>{let r=e;if(t.composing&&!za)return;let n=id?null:r.clipboardData,a=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&od(t,lC(n),n.getData("text/html"),a,r)?r.preventDefault():bie(t,r)};class cC{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const jie=In?"altKey":"ctrlKey";function dC(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[jie]}Gr.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let a=t.state.selection,i=a.empty?null:t.posAtCoords(Mp(r)),o;if(!(i&&i.pos>=a.from&&i.pos<=(a instanceof Te?a.to-1:a.to))){if(n&&n.mightDrag)o=Te.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let f=t.docView.nearestDesc(r.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(o=Te.create(t.state.doc,f.posBefore))}}let l=(o||t.state.selection).content(),{dom:c,text:d,slice:u}=zy(t,l);(!r.dataTransfer.files.length||!Ir||D6>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(id?"Text":"text/html",c.innerHTML),r.dataTransfer.effectAllowed="copyMove",id||r.dataTransfer.setData("text/plain",d),t.dragging=new cC(u,dC(t,r),o)};Gr.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Kr.dragover=Kr.dragenter=(t,e)=>e.preventDefault();Kr.drop=(t,e)=>{let r=e,n=t.dragging;if(t.dragging=null,!r.dataTransfer)return;let a=t.posAtCoords(Mp(r));if(!a)return;let i=t.state.doc.resolve(a.pos),o=n&&n.slice;o?t.someProp("transformPasted",m=>{o=m(o,t,!1)}):o=Q6(t,lC(r.dataTransfer),id?null:r.dataTransfer.getData("text/html"),!1,i);let l=!!(n&&dC(t,r));if(t.someProp("handleDrop",m=>m(t,r,o||xe.empty,l))){r.preventDefault();return}if(!o)return;r.preventDefault();let c=o?m6(t.state.doc,i.pos,o):i.pos;c==null&&(c=i.pos);let d=t.state.tr;if(l){let{node:m}=n;m?m.replace(d):d.deleteSelection()}let u=d.mapping.map(c),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=d.doc;if(f?d.replaceRangeWith(u,u,o.content.firstChild):d.replaceRange(u,u,o),d.doc.eq(h))return;let p=d.doc.resolve(u);if(f&&Te.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new Te(p));else{let m=d.mapping.map(c);d.mapping.maps[d.mapping.maps.length-1].forEach((x,g,y,j)=>m=j),d.setSelection(Ly(t,p,d.doc.resolve(m)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))};Gr.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&qa(t)},20))};Gr.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Gr.beforeinput=(t,e)=>{if(Ir&&za&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,ii(8,"Backspace")))))return;let{$cursor:a}=t.state.selection;a&&a.pos>0&&t.dispatch(t.state.tr.delete(a.pos-1,a.pos).scrollIntoView())},50)}};for(let t in Kr)Gr[t]=Kr[t];function ld(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class Lf{constructor(e,r){this.toDOM=e,this.spec=r||ji,this.side=this.spec.side||0}map(e,r,n,a){let{pos:i,deleted:o}=e.mapResult(r.from+a,this.side<0?-1:1);return o?null:new Hr(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Lf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ld(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ks{constructor(e,r){this.attrs=e,this.spec=r||ji}map(e,r,n,a){let i=e.map(r.from+a,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+a,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new Hr(i,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof ks&&ld(this.attrs,e.attrs)&&ld(this.spec,e.spec)}static is(e){return e.type instanceof ks}destroy(){}}class Vy{constructor(e,r){this.attrs=e,this.spec=r||ji}map(e,r,n,a){let i=e.mapResult(r.from+a,1);if(i.deleted)return null;let o=e.mapResult(r.to+a,-1);return o.deleted||o.pos<=i.pos?null:new Hr(i.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:a}=e.content.findIndex(r.from),i;return a==r.from&&!(i=e.child(n)).isText&&a+i.nodeSize==r.to}eq(e){return this==e||e instanceof Vy&&ld(this.attrs,e.attrs)&&ld(this.spec,e.spec)}destroy(){}}class Hr{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new Hr(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new Hr(e,e,new Lf(r,n))}static inline(e,r,n,a){return new Hr(e,r,new ks(n,a))}static node(e,r,n,a){return new Hr(e,r,new Vy(n,a))}get spec(){return this.type.spec}get inline(){return this.type instanceof ks}get widget(){return this.type instanceof Lf}}const no=[],ji={};class zt{constructor(e,r){this.local=e.length?e:no,this.children=r.length?r:no}static create(e,r){return r.length?zf(r,e,0,ji):Er}find(e,r,n){let a=[];return this.findInner(e??0,r??1e9,a,0,n),a}findInner(e,r,n,a,i){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=r&&l.to>=e&&(!i||i(l.spec))&&n.push(l.copy(l.from+a,l.to+a))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,r-l,n,a+l,i)}}map(e,r,n){return this==Er||e.maps.length==0?this:this.mapInner(e,r,0,0,n||ji)}mapInner(e,r,n,a,i){let o;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(e,n,a);c&&c.type.valid(r,c)?(o||(o=[])).push(c):i.onRemove&&i.onRemove(this.local[l].spec)}return this.children.length?wie(this.children,o||[],e,r,n,a,i):o?new zt(o.sort(wi),no):Er}add(e,r){return r.length?this==Er?zt.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let a,i=0;e.forEach((l,c)=>{let d=c+n,u;if(u=fC(r,l,d)){for(a||(a=this.children.slice());i<a.length&&a[i]<c;)i+=3;a[i]==c?a[i+2]=a[i+2].addInner(l,u,d+1):a.splice(i,0,c,c+l.nodeSize,zf(u,l,d+1,ji)),i+=3}});let o=uC(i?hC(r):r,-n);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new zt(o.length?this.local.concat(o).sort(wi):this.local,a||this.children)}remove(e){return e.length==0||this==Er?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,a=this.local;for(let i=0;i<n.length;i+=3){let o,l=n[i]+r,c=n[i+1]+r;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>l&&f.to<c&&(e[u]=null,(o||(o=[])).push(f));if(!o)continue;n==this.children&&(n=this.children.slice());let d=n[i+2].removeInner(o,l+1);d!=Er?n[i+2]=d:(n.splice(i,3),i-=3)}if(a.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let l=0;l<a.length;l++)a[l].eq(o,r)&&(a==this.local&&(a=this.local.slice()),a.splice(l--,1))}return n==this.children&&a==this.local?this:a.length||n.length?new zt(a,n):Er}forChild(e,r){if(this==Er)return this;if(r.isLeaf)return zt.empty;let n,a;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(n=this.children[l+2]);break}let i=e+1,o=i+r.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<o&&c.to>i&&c.type instanceof ks){let d=Math.max(i,c.from)-i,u=Math.min(o,c.to)-i;d<u&&(a||(a=[])).push(c.copy(d,u))}}if(a){let l=new zt(a.sort(wi),no);return n?new ps([l,n]):l}return n||Er}eq(e){if(this==e)return!0;if(!(e instanceof zt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return Hy(this.localsInner(e))}localsInner(e){if(this==Er)return no;if(e.inlineContent||!this.local.some(ks.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof ks||r.push(this.local[n]);return r}forEachSet(e){e(this)}}zt.empty=new zt([],[]);zt.removeOverlap=Hy;const Er=zt.empty;class ps{constructor(e){this.members=e}map(e,r){const n=this.members.map(a=>a.map(e,r,ji));return ps.from(n)}forChild(e,r){if(r.isLeaf)return zt.empty;let n=[];for(let a=0;a<this.members.length;a++){let i=this.members[a].forChild(e,r);i!=Er&&(i instanceof ps?n=n.concat(i.members):n.push(i))}return ps.from(n)}eq(e){if(!(e instanceof ps)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let a=0;a<this.members.length;a++){let i=this.members[a].localsInner(e);if(i.length)if(!r)r=i;else{n&&(r=r.slice(),n=!1);for(let o=0;o<i.length;o++)r.push(i[o])}}return r?Hy(n?r:r.sort(wi)):no}static from(e){switch(e.length){case 0:return Er;case 1:return e[0];default:return new ps(e.every(r=>r instanceof zt)?e:e.reduce((r,n)=>r.concat(n instanceof zt?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function wie(t,e,r,n,a,i,o){let l=t.slice();for(let d=0,u=i;d<r.maps.length;d++){let f=0;r.maps[d].forEach((h,p,m,x)=>{let g=x-m-(p-h);for(let y=0;y<l.length;y+=3){let j=l[y+1];if(j<0||h>j+u-f)continue;let b=l[y]+u-f;p>=b?l[y+1]=h<=b?-2:-1:h>=u&&g&&(l[y]+=g,l[y+1]+=g)}f+=g}),u=r.maps[d].map(u,-1)}let c=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){c=!0,l[d+1]=-1;continue}let u=r.map(t[d]+i),f=u-a;if(f<0||f>=n.content.size){c=!0;continue}let h=r.map(t[d+1]+i,-1),p=h-a,{index:m,offset:x}=n.content.findIndex(f),g=n.maybeChild(m);if(g&&x==f&&x+g.nodeSize==p){let y=l[d+2].mapInner(r,g,u+1,t[d]+i+1,o);y!=Er?(l[d]=f,l[d+1]=p,l[d+2]=y):(l[d+1]=-2,c=!0)}else c=!0}if(c){let d=Sie(l,t,e,r,a,i,o),u=zf(d,n,0,o);e=u.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,h=0;f<u.children.length;f+=3){let p=u.children[f];for(;h<l.length&&l[h]<p;)h+=3;l.splice(h,0,u.children[f],u.children[f+1],u.children[f+2])}}return new zt(e.sort(wi),l)}function uC(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let a=t[n];r.push(new Hr(a.from+e,a.to+e,a.type))}return r}function Sie(t,e,r,n,a,i,o){function l(c,d){for(let u=0;u<c.local.length;u++){let f=c.local[u].map(n,a,d);f?r.push(f):o.onRemove&&o.onRemove(c.local[u].spec)}for(let u=0;u<c.children.length;u+=3)l(c.children[u+2],c.children[u]+d+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&l(t[c+2],e[c]+i+1);return r}function fC(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,a=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>r&&o.to<n&&((a||(a=[])).push(o),t[i]=null);return a}function hC(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function zf(t,e,r,n){let a=[],i=!1;e.forEach((l,c)=>{let d=fC(t,l,c+r);if(d){i=!0;let u=zf(d,l,r+c+1,n);u!=Er&&a.push(c,c+l.nodeSize,u)}});let o=uC(i?hC(t):t,-r).sort(wi);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(n.onRemove&&n.onRemove(o[l].spec),o.splice(l--,1));return o.length||a.length?new zt(o,a):Er}function wi(t,e){return t.from-e.from||t.to-e.to}function Hy(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let a=r+1;a<e.length;a++){let i=e[a];if(i.from==n.from){i.to!=n.to&&(e==t&&(e=t.slice()),e[a]=i.copy(i.from,n.to),I2(e,a+1,i.copy(n.to,i.to)));continue}else{i.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,i.from),I2(e,a,n.copy(i.from,n.to)));break}}}return e}function I2(t,e,r){for(;e<t.length&&wi(r,t[e])>0;)e++;t.splice(e,0,r)}function Dm(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=Er&&e.push(n)}),t.cursorWrapper&&e.push(zt.create(t.state.doc,[t.cursorWrapper.deco])),ps.from(e)}const Nie={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Aie=sn&&As<=11;class Cie{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class kie{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Cie,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let a=0;a<n.length;a++)this.queue.push(n[a]);sn&&As<=11&&n.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),Aie&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Nie)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(N2(this.view)){if(this.suppressingSelectionUpdates)return qa(this.view);if(sn&&As<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Mi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let i=e.focusNode;i;i=sl(i))r.add(i);for(let i=e.anchorNode;i;i=sl(i))if(r.has(i)){n=i;break}let a=n&&this.view.docView.nearestDesc(n);if(a&&a.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),a=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&N2(e)&&!this.ignoreSelectionChange(n),i=-1,o=-1,l=!1,c=[];if(e.editable)for(let u=0;u<r.length;u++){let f=this.registerMutation(r[u],c);f&&(i=i<0?f.from:Math.min(f.from,i),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(l=!0))}if(Bn&&c.length){let u=c.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,h]=u;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of u){let p=h.parentNode;p&&p.nodeName=="LI"&&(!f||Pie(e,f)!=p)&&h.remove()}}}let d=null;i<0&&a&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Tp(n)&&(d=_y(e))&&d.eq(qe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,qa(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||a)&&(i>-1&&(e.docView.markDirty(i,o),Oie(e)),this.handleDOMChange(i,o,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||qa(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let f=e.addedNodes[u];r.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let a=e.previousSibling,i=e.nextSibling;if(sn&&As<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:h}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(a=f),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h)}let o=a&&a.parentNode==e.target?Sr(a)+1:0,l=n.localPosFromDOM(e.target,o,-1),c=i&&i.parentNode==e.target?Sr(i):e.target.childNodes.length,d=n.localPosFromDOM(e.target,c,1);return{from:l,to:d}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let M2=new WeakMap,$2=!1;function Oie(t){if(!M2.has(t)&&(M2.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Bn,$2)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),$2=!0}}function R2(t,e){let r=e.startContainer,n=e.startOffset,a=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Mi(o.node,o.offset,a,i)&&([r,n,a,i]=[a,i,r,n]),{anchorNode:r,anchorOffset:n,focusNode:a,focusOffset:i}}function Eie(t,e){if(e.getComposedRanges){let a=e.getComposedRanges(t.root)[0];if(a)return R2(t,a)}let r;function n(a){a.preventDefault(),a.stopImmediatePropagation(),r=a.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?R2(t,r):null}function Pie(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function Tie(t,e,r){let{node:n,fromOffset:a,toOffset:i,from:o,to:l}=t.docView.parseRange(e,r),c=t.domSelectionRange(),d,u=c.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(d=[{node:u,offset:c.anchorOffset}],Tp(c)||d.push({node:c.focusNode,offset:c.focusOffset})),Ir&&t.input.lastKeyCode===8)for(let g=i;g>a;g--){let y=n.childNodes[g-1],j=y.pmViewDesc;if(y.nodeName=="BR"&&!j){i=g;break}if(!j||j.size)break}let f=t.state.doc,h=t.someProp("domParser")||Ns.fromSchema(t.state.schema),p=f.resolve(o),m=null,x=h.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:a,to:i,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:Iie,context:p});if(d&&d[0].pos!=null){let g=d[0].pos,y=d[1]&&d[1].pos;y==null&&(y=g),m={anchor:g+o,head:y+o}}return{doc:x,sel:m,from:o,to:l}}function Iie(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Yr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||Yr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Mie=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function $ie(t,e,r,n,a){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,A=_y(t,C);if(A&&!t.state.selection.eq(A)){if(Ir&&za&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",O=>O(t,ii(13,"Enter"))))return;let k=t.state.tr.setSelection(A);C=="pointer"?k.setMeta("pointer",!0):C=="key"&&k.scrollIntoView(),i&&k.setMeta("composition",i),t.dispatch(k)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(r);e=o.before(l+1),r=t.state.doc.resolve(r).after(l+1);let c=t.state.selection,d=Tie(t,e,r),u=t.state.doc,f=u.slice(d.from,d.to),h,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=_ie(f.content,d.doc.content,d.from,h,p);if(m&&t.input.domChangeCount++,(il&&t.input.lastIOSEnter>Date.now()-225||za)&&a.some(C=>C.nodeType==1&&!Mie.test(C.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",C=>C(t,ii(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&c instanceof Be&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))m={start:c.from,endA:c.to,endB:c.to};else{if(d.sel){let C=D2(t,t.state.doc,d.sel);if(C&&!C.eq(t.state.selection)){let A=t.state.tr.setSelection(C);i&&A.setMeta("composition",i),t.dispatch(A)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Be&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),sn&&As<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>d.from&&d.doc.textBetween(m.start-d.from-1,m.start-d.from+1)=="  "&&(m.start--,m.endA--,m.endB--);let x=d.doc.resolveNoCache(m.start-d.from),g=d.doc.resolveNoCache(m.endB-d.from),y=u.resolve(m.start),j=x.sameParent(g)&&x.parent.inlineContent&&y.end()>=m.endA;if((il&&t.input.lastIOSEnter>Date.now()-225&&(!j||a.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!j&&x.pos<d.doc.content.size&&(!x.sameParent(g)||!x.parent.inlineContent)&&x.pos<g.pos&&!/\S/.test(d.doc.textBetween(x.pos,g.pos,"","")))&&t.someProp("handleKeyDown",C=>C(t,ii(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&Die(u,m.start,m.endA,x,g)&&t.someProp("handleKeyDown",C=>C(t,ii(8,"Backspace")))){za&&Ir&&t.domObserver.suppressSelectionUpdates();return}Ir&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),za&&!j&&x.start()!=g.start()&&g.parentOffset==0&&x.depth==g.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==m.endA&&(m.endB-=2,g=d.doc.resolveNoCache(m.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,ii(13,"Enter"))})},20));let b=m.start,S=m.endA,w=C=>{let A=C||t.state.tr.replace(b,S,d.doc.slice(m.start-d.from,m.endB-d.from));if(d.sel){let k=D2(t,A.doc,d.sel);k&&!(Ir&&t.composing&&k.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(k.head==b||k.head==A.mapping.map(S)-1)||sn&&k.empty&&k.head==b)&&A.setSelection(k)}return i&&A.setMeta("composition",i),A.scrollIntoView()},v;if(j)if(x.pos==g.pos){sn&&As<=11&&x.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>qa(t),20));let C=w(t.state.tr.delete(b,S)),A=u.resolve(m.start).marksAcross(u.resolve(m.endA));A&&C.ensureMarks(A),t.dispatch(C)}else if(m.endA==m.endB&&(v=Rie(x.parent.content.cut(x.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let C=w(t.state.tr);v.type=="add"?C.addMark(b,S,v.mark):C.removeMark(b,S,v.mark),t.dispatch(C)}else if(x.parent.child(x.index()).isText&&x.index()==g.index()-(g.textOffset?0:1)){let C=x.parent.textBetween(x.parentOffset,g.parentOffset),A=()=>w(t.state.tr.insertText(C,b,S));t.someProp("handleTextInput",k=>k(t,b,S,C,A))||t.dispatch(A())}else t.dispatch(w());else t.dispatch(w())}function D2(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:Ly(t,e.resolve(r.anchor),e.resolve(r.head))}function Rie(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,a=r,i=n,o,l,c;for(let u=0;u<n.length;u++)a=n[u].removeFromSet(a);for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);if(a.length==1&&i.length==0)l=a[0],o="add",c=u=>u.mark(l.addToSet(u.marks));else if(a.length==0&&i.length==1)l=i[0],o="remove",c=u=>u.mark(l.removeFromSet(u.marks));else return null;let d=[];for(let u=0;u<e.childCount;u++)d.push(c(e.child(u)));if(re.from(d).eq(t))return{mark:l,type:o}}function Die(t,e,r,n,a){if(r-e<=a.pos-n.pos||_m(n,!0,!1)<a.pos)return!1;let i=t.resolve(e);if(!n.parent.isTextblock){let l=i.nodeAfter;return l!=null&&r==e+l.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(_m(i,!0,!0));return!o.parent.isTextblock||o.pos>r||_m(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function _m(t,e,r){let n=t.depth,a=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,a++,e=!1;if(r){let i=t.node(n).maybeChild(t.indexAfter(n));for(;i&&!i.isLeaf;)i=i.firstChild,a++}return a}function _ie(t,e,r,n,a){let i=t.findDiffStart(e,r);if(i==null)return null;let{a:o,b:l}=t.findDiffEnd(e,r+t.size,r+e.size);if(a=="end"){let c=Math.max(0,i-Math.min(o,l));n-=o+c-i}if(o<i&&t.size<e.size){let c=n<=i&&n>=o?i-n:0;i-=c,i&&i<e.size&&_2(e.textBetween(i-1,i+1))&&(i+=c?1:-1),l=i+(l-o),o=i}else if(l<i){let c=n<=i&&n>=l?i-n:0;i-=c,i&&i<t.size&&_2(t.textBetween(i-1,i+1))&&(i+=c?1:-1),o=i+(o-l),l=i}return{start:i,endA:o,endB:l}}function _2(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class pC{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new rie,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(U2),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=F2(this),z2(this),this.nodeViews=B2(this),this.docView=y2(this.state.doc,L2(this),Dm(this),this.dom,this),this.domObserver=new kie(this,(n,a,i,o)=>$ie(this,n,a,i,o)),this.domObserver.start(),nie(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Vx(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(U2),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let a=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(oC(this),o=!0),this.state=e;let l=a.plugins!=e.plugins||this._props.plugins!=r.plugins;if(l||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=B2(this);zie(p,this.nodeViews)&&(this.nodeViews=p,i=!0)}(l||r.handleDOMEvents!=this._props.handleDOMEvents)&&Vx(this),this.editable=F2(this),z2(this);let c=Dm(this),d=L2(this),u=a.plugins!=e.plugins&&!a.doc.eq(e.doc)?"reset":e.scrollToSelection>a.scrollToSelection?"to selection":"preserve",f=i||!this.docView.matchesNode(e.doc,d,c);(f||!e.selection.eq(a.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&xse(this);if(o){this.domObserver.stop();let p=f&&(sn||Ir)&&!this.composing&&!a.selection.empty&&!e.selection.empty&&Lie(a.selection,e.selection);if(f){let m=Ir?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=gie(this)),(i||!this.docView.update(e.doc,d,c,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=y2(e.doc,d,c,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Bse(this))?qa(this,p):(K6(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(a),!((n=this.dragging)===null||n===void 0)&&n.node&&!a.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,a),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&yse(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof Te){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&f2(this,r.getBoundingClientRect(),e)}else f2(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,a=-1;if(this.state.doc.nodeAt(n.from)==n.node)a=n.from;else{let i=n.from+(this.state.doc.content.size-r.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==n.node&&(a=i)}this.dragging=new cC(e.slice,e.move,a<0?void 0:Te.create(this.state.doc,a))}someProp(e,r){let n=this._props&&this._props[e],a;if(n!=null&&(a=r?r(n):n))return a;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(a=r?r(l):l))return a}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let l=i[o].props[e];if(l!=null&&(a=r?r(l):l))return a}}hasFocus(){if(sn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&vse(this.dom),qa(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Nse(this,e)}coordsAtPos(e,r=1){return B6(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let a=this.docView.posFromDOM(e,r,n);if(a==null)throw new RangeError("DOM position not inside the editor");return a}endOfTextblock(e,r){return Ese(this,r||this.state,e)}pasteHTML(e,r){return od(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return od(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return zy(this,e)}destroy(){this.docView&&(aie(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Dm(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,ise())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return iie(this,e)}domSelectionRange(){let e=this.domSelection();return e?Yr&&this.root.nodeType===11&&use(this.dom.ownerDocument)==this.dom&&Eie(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}pC.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function L2(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[Hr.node(0,t.state.doc.content.size,e)]}function z2(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Hr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function F2(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Lie(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function B2(t){let e=Object.create(null);function r(n){for(let a in n)Object.prototype.hasOwnProperty.call(e,a)||(e[a]=n[a])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function zie(t,e){let r=0,n=0;for(let a in t){if(t[a]!=e[a])return!0;r++}for(let a in e)n++;return r!=n}function U2(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ts={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ff={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Fie=typeof navigator<"u"&&/Mac/.test(navigator.platform),Bie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Nr=0;Nr<10;Nr++)Ts[48+Nr]=Ts[96+Nr]=String(Nr);for(var Nr=1;Nr<=24;Nr++)Ts[Nr+111]="F"+Nr;for(var Nr=65;Nr<=90;Nr++)Ts[Nr]=String.fromCharCode(Nr+32),Ff[Nr]=String.fromCharCode(Nr);for(var Lm in Ts)Ff.hasOwnProperty(Lm)||(Ff[Lm]=Ts[Lm]);function Uie(t){var e=Fie&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Bie&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?Ff:Ts)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const Vie=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Hie=typeof navigator<"u"&&/Win/.test(navigator.platform);function Wie(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,a,i,o;for(let l=0;l<e.length-1;l++){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))a=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))Vie?o=!0:a=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(r="Alt-"+r),a&&(r="Ctrl-"+r),o&&(r="Meta-"+r),i&&(r="Shift-"+r),r}function qie(t){let e=Object.create(null);for(let r in t)e[Wie(r)]=t[r];return e}function zm(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function Yie(t){return new Bt({props:{handleKeyDown:mC(t)}})}function mC(t){let e=qie(t);return function(r,n){let a=Uie(n),i,o=e[zm(a,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(a.length==1&&a!=" "){if(n.shiftKey){let l=e[zm(a,n,!1)];if(l&&l(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(Hie&&n.ctrlKey&&n.altKey)&&(i=Ts[n.keyCode])&&i!=a){let l=e[zm(i,n)];if(l&&l(r.state,r.dispatch,r))return!0}}return!1}}var Gie=Object.defineProperty,Wy=(t,e)=>{for(var r in e)Gie(t,r,{get:e[r],enumerable:!0})};function $p(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:a}=r,{storedMarks:i}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return n},get doc(){return a},get tr(){return n=r.selection,a=r.doc,i=r.storedMarks,r}}}var Rp=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:a}=r,i=this.buildProps(a);return Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...d)=>{const u=l(...d)(i);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(a),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:a}=this,{view:i}=n,o=[],l=!!t,c=t||a.tr,d=()=>(!l&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),o.every(f=>f===!0)),u={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const x=this.buildProps(c,e),g=h(...m)(x);return o.push(g),u}])),run:d};return u}createCan(t){const{rawCommands:e,state:r}=this,n=!1,a=t||r.tr,i=this.buildProps(a,n);return{...Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...d)=>c(...d)({...i,dispatch:void 0})])),chain:()=>this.createChain(a,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:a}=this,{view:i}=n,o={tr:t,editor:n,view:i,state:$p({state:a,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...d)=>c(...d)(o)]))}};return o}},gC={};Wy(gC,{blur:()=>Kie,clearContent:()=>Jie,clearNodes:()=>Xie,command:()=>Qie,createParagraphNear:()=>Zie,cut:()=>eoe,deleteCurrentNode:()=>toe,deleteNode:()=>roe,deleteRange:()=>noe,deleteSelection:()=>aoe,enter:()=>soe,exitCode:()=>ioe,extendMarkRange:()=>ooe,first:()=>loe,focus:()=>doe,forEach:()=>uoe,insertContent:()=>foe,insertContentAt:()=>moe,joinBackward:()=>yoe,joinDown:()=>xoe,joinForward:()=>voe,joinItemBackward:()=>boe,joinItemForward:()=>joe,joinTextblockBackward:()=>woe,joinTextblockForward:()=>Soe,joinUp:()=>goe,keyboardShortcut:()=>Aoe,lift:()=>Coe,liftEmptyBlock:()=>koe,liftListItem:()=>Ooe,newlineInCode:()=>Eoe,resetAttributes:()=>Poe,scrollIntoView:()=>Toe,selectAll:()=>Ioe,selectNodeBackward:()=>Moe,selectNodeForward:()=>$oe,selectParentNode:()=>Roe,selectTextblockEnd:()=>Doe,selectTextblockStart:()=>_oe,setContent:()=>Loe,setMark:()=>rle,setMeta:()=>nle,setNode:()=>ale,setNodeSelection:()=>sle,setTextDirection:()=>ile,setTextSelection:()=>ole,sinkListItem:()=>lle,splitBlock:()=>cle,splitListItem:()=>dle,toggleList:()=>ule,toggleMark:()=>fle,toggleNode:()=>hle,toggleWrap:()=>ple,undoInputRule:()=>mle,unsetAllMarks:()=>gle,unsetMark:()=>xle,unsetTextDirection:()=>yle,updateAttributes:()=>vle,wrapIn:()=>ble,wrapInList:()=>jle});var Kie=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),Jie=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Xie=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:a}=n;return r&&a.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(l,c)=>{if(l.type.isText)return;const{doc:d,mapping:u}=e,f=d.resolve(u.map(c)),h=d.resolve(u.map(c+l.nodeSize)),p=f.blockRange(h);if(!p)return;const m=Al(p);if(l.type.isTextblock){const{defaultType:x}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(p.start,x)}(m||m===0)&&e.lift(p,m)})}),!0},Qie=t=>e=>t(e),Zie=()=>({state:t,dispatch:e})=>T6(t,e),eoe=(t,e)=>({editor:r,tr:n})=>{const{state:a}=r,i=a.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,i.content),n.setSelection(new Be(n.doc.resolve(Math.max(o-1,0)))),!0},toe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const a=t.selection.$anchor;for(let i=a.depth;i>0;i-=1)if(a.node(i).type===n.type){if(e){const l=a.before(i),c=a.after(i);t.delete(l,c).scrollIntoView()}return!0}return!1};function er(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var roe=t=>({tr:e,state:r,dispatch:n})=>{const a=er(t,r.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===a){if(n){const c=i.before(o),d=i.after(o);e.delete(c,d).scrollIntoView()}return!0}return!1},noe=t=>({tr:e,dispatch:r})=>{const{from:n,to:a}=t;return r&&e.delete(n,a),!0},aoe=()=>({state:t,dispatch:e})=>Ty(t,e),soe=()=>({commands:t})=>t.keyboardShortcut("Enter"),ioe=()=>({state:t,dispatch:e})=>Wae(t,e);function qy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Bf(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(a=>r.strict?e[a]===t[a]:qy(e[a])?e[a].test(t[a]):e[a]===t[a]):!0}function xC(t,e,r={}){return t.find(n=>n.type===e&&Bf(Object.fromEntries(Object.keys(r).map(a=>[a,n.attrs[a]])),r))}function V2(t,e,r={}){return!!xC(t,e,r)}function Yy(t,e,r){var n;if(!t||!e)return;let a=t.parent.childAfter(t.parentOffset);if((!a.node||!a.node.marks.some(u=>u.type===e))&&(a=t.parent.childBefore(t.parentOffset)),!a.node||!a.node.marks.some(u=>u.type===e)||(r=r||((n=a.node.marks[0])==null?void 0:n.attrs),!xC([...a.node.marks],e,r)))return;let o=a.index,l=t.start()+a.offset,c=o+1,d=l+a.node.nodeSize;for(;o>0&&V2([...t.parent.child(o-1).marks],e,r);)o-=1,l-=t.parent.child(o).nodeSize;for(;c<t.parent.childCount&&V2([...t.parent.child(c).marks],e,r);)d+=t.parent.child(c).nodeSize,c+=1;return{from:l,to:d}}function rs(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var ooe=(t,e={})=>({tr:r,state:n,dispatch:a})=>{const i=rs(t,n.schema),{doc:o,selection:l}=r,{$from:c,from:d,to:u}=l;if(a){const f=Yy(c,i,e);if(f&&f.from<=d&&f.to>=u){const h=Be.create(o,f.from,f.to);r.setSelection(h)}}return!0},loe=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function yC(t){return t instanceof Be}function pi(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function vC(t,e=null){if(!e)return null;const r=qe.atStart(t),n=qe.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const a=r.from,i=n.to;return e==="all"?Be.create(t,pi(0,a,i),pi(t.content.size,a,i)):Be.create(t,pi(e,a,i),pi(e,a,i))}function coe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Gy(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var doe=(t=null,e={})=>({editor:r,view:n,tr:a,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(Gy()||coe())&&n.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!yC(r.state.selection))return o(),!0;const l=vC(a.doc,t)||r.state.selection,c=r.state.selection.eq(l);return i&&(c||a.setSelection(l),c&&a.storedMarks&&a.setStoredMarks(a.storedMarks),o()),!0},uoe=(t,e)=>r=>t.every((n,a)=>e(n,{...r,index:a})),foe=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),bC=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&bC(n)}return t};function iu(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return bC(r)}function cd(t,e,r){if(t instanceof aa||t instanceof re)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,a=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return re.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(i){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),cd("",e,r)}if(a){if(r.errorOnInvalidContent){let o=!1,l="";const c=new a6({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(r.slice?Ns.fromSchema(c).parseSlice(iu(t),r.parseOptions):Ns.fromSchema(c).parse(iu(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const i=Ns.fromSchema(e);return r.slice?i.parseSlice(iu(t),r.parseOptions).content:i.parse(iu(t),r.parseOptions)}return cd("",e,r)}function hoe(t,e,r){const n=t.steps.length-1;if(n<e)return;const a=t.steps[n];if(!(a instanceof hr||a instanceof gr))return;const i=t.mapping.maps[n];let o=0;i.forEach((l,c,d,u)=>{o===0&&(o=u)}),t.setSelection(qe.near(t.doc.resolve(o),r))}var poe=t=>!("type"in t),moe=(t,e,r)=>({tr:n,dispatch:a,editor:i})=>{var o;if(a){r={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let l;const c=g=>{i.emit("contentError",{editor:i,error:g,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{cd(e,i.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(g){c(g)}try{l=cd(e,i.schema,{parseOptions:d,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(g){return c(g),!1}let{from:u,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,p=!0;if((poe(l)?l:[l]).forEach(g=>{g.check(),h=h?g.isText&&g.marks.length===0:!1,p=p?g.isBlock:!1}),u===f&&p){const{parent:g}=n.doc.resolve(u);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(u-=1,f+=1)}let x;if(h){if(Array.isArray(e))x=e.map(g=>g.text||"").join("");else if(e instanceof re){let g="";e.forEach(y=>{y.text&&(g+=y.text)}),x=g}else typeof e=="object"&&e&&e.text?x=e.text:x=e;n.insertText(x,u,f)}else{x=l;const g=n.doc.resolve(u),y=g.node(),j=g.parentOffset===0,b=y.isText||y.isTextblock,S=y.content.size>0;j&&b&&S&&(u=Math.max(0,u-1)),n.replaceWith(u,f,x)}r.updateSelection&&hoe(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:u,text:x}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:u,text:x})}return!0},goe=()=>({state:t,dispatch:e})=>Uae(t,e),xoe=()=>({state:t,dispatch:e})=>Vae(t,e),yoe=()=>({state:t,dispatch:e})=>N6(t,e),voe=()=>({state:t,dispatch:e})=>O6(t,e),boe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=Op(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},joe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=Op(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},woe=()=>({state:t,dispatch:e})=>Fae(t,e),Soe=()=>({state:t,dispatch:e})=>Bae(t,e);function jC(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Noe(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,a,i,o;for(let l=0;l<e.length-1;l+=1){const c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))a=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))Gy()||jC()?o=!0:a=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return n&&(r=`Alt-${r}`),a&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),i&&(r=`Shift-${r}`),r}var Aoe=t=>({editor:e,view:r,tr:n,dispatch:a})=>{const i=Noe(t).split(/-(?!$)/),o=i.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{r.someProp("handleKeyDown",d=>d(r,l))});return c==null||c.steps.forEach(d=>{const u=d.map(n.mapping);u&&a&&n.maybeStep(u)}),!0};function Is(t,e,r={}){const{from:n,to:a,empty:i}=t.selection,o=e?er(e,t.schema):null,l=[];t.doc.nodesBetween(n,a,(f,h)=>{if(f.isText)return;const p=Math.max(n,h),m=Math.min(a,h+f.nodeSize);l.push({node:f,from:p,to:m})});const c=a-n,d=l.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>Bf(f.node.attrs,r,{strict:!1}));return i?!!d.length:d.reduce((f,h)=>f+h.to-h.from,0)>=c}var Coe=(t,e={})=>({state:r,dispatch:n})=>{const a=er(t,r.schema);return Is(r,a,e)?Hae(r,n):!1},koe=()=>({state:t,dispatch:e})=>I6(t,e),Ooe=t=>({state:e,dispatch:r})=>{const n=er(t,e.schema);return rse(n)(e,r)},Eoe=()=>({state:t,dispatch:e})=>P6(t,e);function Dp(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function H2(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,a)=>(r.includes(a)||(n[a]=t[a]),n),{})}var Poe=(t,e)=>({tr:r,state:n,dispatch:a})=>{let i=null,o=null;const l=Dp(typeof t=="string"?t:t.name,n.schema);if(!l)return!1;l==="node"&&(i=er(t,n.schema)),l==="mark"&&(o=rs(t,n.schema));let c=!1;return r.selection.ranges.forEach(d=>{n.doc.nodesBetween(d.$from.pos,d.$to.pos,(u,f)=>{i&&i===u.type&&(c=!0,a&&r.setNodeMarkup(f,void 0,H2(u.attrs,e))),o&&u.marks.length&&u.marks.forEach(h=>{o===h.type&&(c=!0,a&&r.addMark(f,f+u.nodeSize,o.create(H2(h.attrs,e))))})})}),c},Toe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Ioe=()=>({tr:t,dispatch:e})=>{if(e){const r=new wn(t.doc);t.setSelection(r)}return!0},Moe=()=>({state:t,dispatch:e})=>C6(t,e),$oe=()=>({state:t,dispatch:e})=>E6(t,e),Roe=()=>({state:t,dispatch:e})=>Gae(t,e),Doe=()=>({state:t,dispatch:e})=>Xae(t,e),_oe=()=>({state:t,dispatch:e})=>Jae(t,e);function Hx(t,e,r={},n={}){return cd(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var Loe=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:a,tr:i,dispatch:o,commands:l})=>{const{doc:c}=i;if(n.preserveWhitespace!=="full"){const d=Hx(t,a.schema,n,{errorOnInvalidContent:e??a.options.enableContentCheck});return o&&i.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!r),!0}return o&&i.setMeta("preventUpdate",!r),l.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:e??a.options.enableContentCheck})};function wC(t,e){const r=rs(e,t.schema),{from:n,to:a,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,a,c=>{o.push(...c.marks)});const l=o.find(c=>c.type.name===r.name);return l?{...l.attrs}:{}}function SC(t,e){const r=new b6(t);return e.forEach(n=>{n.steps.forEach(a=>{r.step(a)})}),r}function zoe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function Foe(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(a,i)=>{r(a)&&n.push({node:a,pos:i})}),n}function Boe(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function _p(t){return e=>Boe(e.$from,t)}function ke(t,e,r){return t.config[e]===void 0&&t.parent?ke(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?ke(t.parent,e,r):null}):t.config[e]}function Ky(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=ke(e,"addExtensions",r);return n?[e,...Ky(n())]:e}).flat(10)}function Jy(t,e){const r=Vi.fromSchema(e).serializeFragment(t),a=document.implementation.createHTMLDocument().createElement("div");return a.appendChild(r),a.innerHTML}function NC(t){return typeof t=="function"}function ft(t,e=void 0,...r){return NC(t)?e?t.bind(e)(...r):t(...r):t}function Uoe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function ol(t){const e=t.filter(a=>a.type==="extension"),r=t.filter(a=>a.type==="node"),n=t.filter(a=>a.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function AC(t){const e=[],{nodeExtensions:r,markExtensions:n}=ol(t),a=[...r,...n],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:a},c=ke(o,"addGlobalAttributes",l);if(!c)return;c().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([h,p])=>{e.push({type:f,name:h,attribute:{...i,...p}})})})})}),a.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},c=ke(o,"addAttributes",l);if(!c)return;const d=c();Object.entries(d).forEach(([u,f])=>{const h={...i,...f};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:o.name,name:u,attribute:h})})}),e}function qt(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([a,i])=>{if(!n[a]){n[a]=i;return}if(a==="class"){const l=i?String(i).split(" "):[],c=n[a]?n[a].split(" "):[],d=l.filter(u=>!c.includes(u));n[a]=[...c,...d].join(" ")}else if(a==="style"){const l=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],c=n[a]?n[a].split(";").map(u=>u.trim()).filter(Boolean):[],d=new Map;c.forEach(u=>{const[f,h]=u.split(":").map(p=>p.trim());d.set(f,h)}),l.forEach(u=>{const[f,h]=u.split(":").map(p=>p.trim());d.set(f,h)}),n[a]=Array.from(d.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else n[a]=i}),n},{})}function Uf(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>qt(r,n),{})}function Voe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function W2(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const a=e.reduce((i,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(r):Voe(r.getAttribute(o.name));return l==null?i:{...i,[o.name]:l}},{});return{...n,...a}}}}function q2(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&Uoe(r)?!1:r!=null))}function Y2(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function Hoe(t,e){var r;const n=AC(t),{nodeExtensions:a,markExtensions:i}=ol(t),o=(r=a.find(d=>ke(d,"topNode")))==null?void 0:r.name,l=Object.fromEntries(a.map(d=>{const u=n.filter(y=>y.type===d.name),f={name:d.name,options:d.options,storage:d.storage,editor:e},h=t.reduce((y,j)=>{const b=ke(j,"extendNodeSchema",f);return{...y,...b?b(d):{}}},{}),p=q2({...h,content:ft(ke(d,"content",f)),marks:ft(ke(d,"marks",f)),group:ft(ke(d,"group",f)),inline:ft(ke(d,"inline",f)),atom:ft(ke(d,"atom",f)),selectable:ft(ke(d,"selectable",f)),draggable:ft(ke(d,"draggable",f)),code:ft(ke(d,"code",f)),whitespace:ft(ke(d,"whitespace",f)),linebreakReplacement:ft(ke(d,"linebreakReplacement",f)),defining:ft(ke(d,"defining",f)),isolating:ft(ke(d,"isolating",f)),attrs:Object.fromEntries(u.map(Y2))}),m=ft(ke(d,"parseHTML",f));m&&(p.parseDOM=m.map(y=>W2(y,u)));const x=ke(d,"renderHTML",f);x&&(p.toDOM=y=>x({node:y,HTMLAttributes:Uf(y,u)}));const g=ke(d,"renderText",f);return g&&(p.toText=g),[d.name,p]})),c=Object.fromEntries(i.map(d=>{const u=n.filter(g=>g.type===d.name),f={name:d.name,options:d.options,storage:d.storage,editor:e},h=t.reduce((g,y)=>{const j=ke(y,"extendMarkSchema",f);return{...g,...j?j(d):{}}},{}),p=q2({...h,inclusive:ft(ke(d,"inclusive",f)),excludes:ft(ke(d,"excludes",f)),group:ft(ke(d,"group",f)),spanning:ft(ke(d,"spanning",f)),code:ft(ke(d,"code",f)),attrs:Object.fromEntries(u.map(Y2))}),m=ft(ke(d,"parseHTML",f));m&&(p.parseDOM=m.map(g=>W2(g,u)));const x=ke(d,"renderHTML",f);return x&&(p.toDOM=g=>x({mark:g,HTMLAttributes:Uf(g,u)})),[d.name,p]}));return new a6({topNode:o,nodes:l,marks:c})}function Woe(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function Xy(t){return t.sort((r,n)=>{const a=ke(r,"priority")||100,i=ke(n,"priority")||100;return a>i?-1:a<i?1:0})}function CC(t){const e=Xy(Ky(t)),r=Woe(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function kC(t,e,r){const{from:n,to:a}=e,{blockSeparator:i=`

`,textSerializers:o={}}=r||{};let l="";return t.nodesBetween(n,a,(c,d,u,f)=>{var h;c.isBlock&&d>n&&(l+=i);const p=o==null?void 0:o[c.type.name];if(p)return u&&(l+=p({node:c,pos:d,parent:u,index:f,range:e})),!1;c.isText&&(l+=(h=c==null?void 0:c.text)==null?void 0:h.slice(Math.max(n,d)-d,a-d))}),l}function qoe(t,e){const r={from:0,to:t.content.size};return kC(t,r,e)}function OC(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function Yoe(t,e){const r=er(e,t.schema),{from:n,to:a}=t.selection,i=[];t.doc.nodesBetween(n,a,l=>{i.push(l)});const o=i.reverse().find(l=>l.type.name===r.name);return o?{...o.attrs}:{}}function EC(t,e){const r=Dp(typeof e=="string"?e:e.name,t.schema);return r==="node"?Yoe(t,e):r==="mark"?wC(t,e):{}}function Goe(t,e=JSON.stringify){const r={};return t.filter(n=>{const a=e(n);return Object.prototype.hasOwnProperty.call(r,a)?!1:r[a]=!0})}function Koe(t){const e=Goe(t);return e.length===1?e:e.filter((r,n)=>!e.filter((i,o)=>o!==n).some(i=>r.oldRange.from>=i.oldRange.from&&r.oldRange.to<=i.oldRange.to&&r.newRange.from>=i.newRange.from&&r.newRange.to<=i.newRange.to))}function PC(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((a,i)=>{const o=[];if(a.ranges.length)a.forEach((l,c)=>{o.push({from:l,to:c})});else{const{from:l,to:c}=r[i];if(l===void 0||c===void 0)return;o.push({from:l,to:c})}o.forEach(({from:l,to:c})=>{const d=e.slice(i).map(l,-1),u=e.slice(i).map(c),f=e.invert().map(d,-1),h=e.invert().map(u);n.push({oldRange:{from:f,to:h},newRange:{from:d,to:u}})})}),Koe(n)}function Qy(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(a=>{const i=r.resolve(t),o=Yy(i,a.type);o&&n.push({mark:a,...o})}):r.nodesBetween(t,e,(a,i)=>{!a||(a==null?void 0:a.nodeSize)===void 0||n.push(...a.marks.map(o=>({from:i,to:i+a.nodeSize,mark:o})))}),n}var Joe=(t,e,r,n=20)=>{const a=t.doc.resolve(r);let i=n,o=null;for(;i>0&&o===null;){const l=a.node(i);(l==null?void 0:l.type.name)===e?o=l:i-=1}return[o,i]};function Fm(t,e){return e.nodes[t]||e.marks[t]||null}function vu(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const a=t.find(i=>i.type===e&&i.name===n);return a?a.attribute.keepOnSplit:!1}))}var Xoe=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(a,i,o,l)=>{var c,d;const u=((d=(c=a.type.spec).toText)==null?void 0:d.call(c,{node:a,pos:i,parent:o,index:l}))||a.textContent||"%leaf%";r+=a.isAtom&&!a.isText?u:u.slice(0,Math.max(0,n-i))}),r};function Wx(t,e,r={}){const{empty:n,ranges:a}=t.selection,i=e?rs(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>i?i.name===f.type.name:!0).find(f=>Bf(f.attrs,r,{strict:!1}));let o=0;const l=[];if(a.forEach(({$from:f,$to:h})=>{const p=f.pos,m=h.pos;t.doc.nodesBetween(p,m,(x,g)=>{if(!x.isText&&!x.marks.length)return;const y=Math.max(p,g),j=Math.min(m,g+x.nodeSize),b=j-y;o+=b,l.push(...x.marks.map(S=>({mark:S,from:y,to:j})))})}),o===0)return!1;const c=l.filter(f=>i?i.name===f.mark.type.name:!0).filter(f=>Bf(f.mark.attrs,r,{strict:!1})).reduce((f,h)=>f+h.to-h.from,0),d=l.filter(f=>i?f.mark.type!==i&&f.mark.type.excludes(i):!0).reduce((f,h)=>f+h.to-h.from,0);return(c>0?c+d:c)>=o}function Qoe(t,e,r={}){if(!e)return Is(t,null,r)||Wx(t,null,r);const n=Dp(e,t.schema);return n==="node"?Is(t,e,r):n==="mark"?Wx(t,e,r):!1}var Zoe=(t,e)=>{const{$from:r,$to:n,$anchor:a}=t.selection;if(e){const i=_p(l=>l.type.name===e)(t.selection);if(!i)return!1;const o=t.doc.resolve(i.pos+1);return a.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},ele=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function G2(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function K2(t,e){const{nodeExtensions:r}=ol(e),n=r.find(o=>o.name===t);if(!n)return!1;const a={name:n.name,options:n.options,storage:n.storage},i=ft(ke(n,"group",a));return typeof i!="string"?!1:i.split(" ").includes("list")}function Lp(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let a=!0;return t.content.forEach(i=>{a!==!1&&(Lp(i,{ignoreWhitespace:r,checkChildren:e})||(a=!1))}),a}return!1}function TC(t){return t instanceof Te}function tle(t,e,r){var n;const{selection:a}=e;let i=null;if(yC(a)&&(i=a.$cursor),i){const l=(n=t.storedMarks)!=null?n:i.marks();return i.parent.type.allowsMarkType(r)&&(!!r.isInSet(l)||!l.some(d=>d.type.excludes(r)))}const{ranges:o}=a;return o.some(({$from:l,$to:c})=>{let d=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(l.pos,c.pos,(u,f,h)=>{if(d)return!1;if(u.isInline){const p=!h||h.type.allowsMarkType(r),m=!!r.isInSet(u.marks)||!u.marks.some(x=>x.type.excludes(r));d=p&&m}return!d}),d})}var rle=(t,e={})=>({tr:r,state:n,dispatch:a})=>{const{selection:i}=r,{empty:o,ranges:l}=i,c=rs(t,n.schema);if(a)if(o){const d=wC(n,c);r.addStoredMark(c.create({...d,...e}))}else l.forEach(d=>{const u=d.$from.pos,f=d.$to.pos;n.doc.nodesBetween(u,f,(h,p)=>{const m=Math.max(p,u),x=Math.min(p+h.nodeSize,f);h.marks.find(y=>y.type===c)?h.marks.forEach(y=>{c===y.type&&r.addMark(m,x,c.create({...y.attrs,...e}))}):r.addMark(m,x,c.create(e))})});return tle(n,r,c)},nle=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),ale=(t,e={})=>({state:r,dispatch:n,chain:a})=>{const i=er(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),i.isTextblock?a().command(({commands:l})=>c2(i,{...o,...e})(r)?!0:l.clearNodes()).command(({state:l})=>c2(i,{...o,...e})(l,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},sle=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,a=pi(t,0,n.content.size),i=Te.create(n,a);e.setSelection(i)}return!0},ile=(t,e)=>({tr:r,state:n,dispatch:a})=>{const{selection:i}=n;let o,l;return typeof e=="number"?(o=e,l=e):e&&"from"in e&&"to"in e?(o=e.from,l=e.to):(o=i.from,l=i.to),a&&r.doc.nodesBetween(o,l,(c,d)=>{c.isText||r.setNodeMarkup(d,void 0,{...c.attrs,dir:t})}),!0},ole=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:a,to:i}=typeof t=="number"?{from:t,to:t}:t,o=Be.atStart(n).from,l=Be.atEnd(n).to,c=pi(a,o,l),d=pi(i,o,l),u=Be.create(n,c,d);e.setSelection(u)}return!0},lle=t=>({state:e,dispatch:r})=>{const n=er(t,e.schema);return sse(n)(e,r)};function J2(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(a=>e==null?void 0:e.includes(a.type.name));t.tr.ensureMarks(n)}}var cle=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:a})=>{const{selection:i,doc:o}=e,{$from:l,$to:c}=i,d=a.extensionManager.attributes,u=vu(d,l.node().type.name,l.node().attrs);if(i instanceof Te&&i.node.isBlock)return!l.parentOffset||!Wa(o,l.pos)?!1:(n&&(t&&J2(r,a.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const f=c.parentOffset===c.parent.content.size,h=l.depth===0?void 0:zoe(l.node(-1).contentMatchAt(l.indexAfter(-1)));let p=f&&h?[{type:h,attrs:u}]:void 0,m=Wa(e.doc,e.mapping.map(l.pos),1,p);if(!p&&!m&&Wa(e.doc,e.mapping.map(l.pos),1,h?[{type:h}]:void 0)&&(m=!0,p=h?[{type:h,attrs:u}]:void 0),n){if(m&&(i instanceof Be&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,p),h&&!f&&!l.parentOffset&&l.parent.type!==h)){const x=e.mapping.map(l.before()),g=e.doc.resolve(x);l.node(-1).canReplaceWith(g.index(),g.index()+1,h)&&e.setNodeMarkup(e.mapping.map(l.before()),h)}t&&J2(r,a.extensionManager.splittableMarks),e.scrollIntoView()}return m},dle=(t,e={})=>({tr:r,state:n,dispatch:a,editor:i})=>{var o;const l=er(t,n.schema),{$from:c,$to:d}=n.selection,u=n.selection.node;if(u&&u.isBlock||c.depth<2||!c.sameParent(d))return!1;const f=c.node(-1);if(f.type!==l)return!1;const h=i.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(a){let y=re.empty;const j=c.index(-1)?1:c.index(-2)?2:3;for(let A=c.depth-j;A>=c.depth-3;A-=1)y=re.from(c.node(A).copy(y));const b=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,S={...vu(h,c.node().type.name,c.node().attrs),...e},w=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(S))||void 0;y=y.append(re.from(l.createAndFill(null,w)||void 0));const v=c.before(c.depth-(j-1));r.replace(v,c.after(-b),new xe(y,4-j,0));let C=-1;r.doc.nodesBetween(v,r.doc.content.size,(A,k)=>{if(C>-1)return!1;A.isTextblock&&A.content.size===0&&(C=k+1)}),C>-1&&r.setSelection(Be.near(r.doc.resolve(C))),r.scrollIntoView()}return!0}const p=d.pos===c.end()?f.contentMatchAt(0).defaultType:null,m={...vu(h,f.type.name,f.attrs),...e},x={...vu(h,c.node().type.name,c.node().attrs),...e};r.delete(c.pos,d.pos);const g=p?[{type:l,attrs:m},{type:p,attrs:x}]:[{type:l,attrs:m}];if(!Wa(r.doc,c.pos,2))return!1;if(a){const{selection:y,storedMarks:j}=n,{splittableMarks:b}=i.extensionManager,S=j||y.$to.parentOffset&&y.$from.marks();if(r.split(c.pos,2,g).scrollIntoView(),!S||!a)return!0;const w=S.filter(v=>b.includes(v.type.name));r.ensureMarks(w)}return!0},Bm=(t,e)=>{const r=_p(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const a=t.doc.nodeAt(n);return r.node.type===(a==null?void 0:a.type)&&Bs(t.doc,r.pos)&&t.join(r.pos),!0},Um=(t,e)=>{const r=_p(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const a=t.doc.nodeAt(n);return r.node.type===(a==null?void 0:a.type)&&Bs(t.doc,n)&&t.join(n),!0},ule=(t,e,r,n={})=>({editor:a,tr:i,state:o,dispatch:l,chain:c,commands:d,can:u})=>{const{extensions:f,splittableMarks:h}=a.extensionManager,p=er(t,o.schema),m=er(e,o.schema),{selection:x,storedMarks:g}=o,{$from:y,$to:j}=x,b=y.blockRange(j),S=g||x.$to.parentOffset&&x.$from.marks();if(!b)return!1;const w=_p(v=>K2(v.type.name,f))(x);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===p)return d.liftListItem(m);if(K2(w.node.type.name,f)&&p.validContent(w.node.content)&&l)return c().command(()=>(i.setNodeMarkup(w.pos,p),!0)).command(()=>Bm(i,p)).command(()=>Um(i,p)).run()}return!r||!S||!l?c().command(()=>u().wrapInList(p,n)?!0:d.clearNodes()).wrapInList(p,n).command(()=>Bm(i,p)).command(()=>Um(i,p)).run():c().command(()=>{const v=u().wrapInList(p,n),C=S.filter(A=>h.includes(A.type.name));return i.ensureMarks(C),v?!0:d.clearNodes()}).wrapInList(p,n).command(()=>Bm(i,p)).command(()=>Um(i,p)).run()},fle=(t,e={},r={})=>({state:n,commands:a})=>{const{extendEmptyMarkRange:i=!1}=r,o=rs(t,n.schema);return Wx(n,o,e)?a.unsetMark(o,{extendEmptyMarkRange:i}):a.setMark(o,e)},hle=(t,e,r={})=>({state:n,commands:a})=>{const i=er(t,n.schema),o=er(e,n.schema),l=Is(n,i,r);let c;return n.selection.$anchor.sameParent(n.selection.$head)&&(c=n.selection.$anchor.parent.attrs),l?a.setNode(o,c):a.setNode(i,{...c,...r})},ple=(t,e={})=>({state:r,commands:n})=>{const a=er(t,r.schema);return Is(r,a,e)?n.lift(a):n.wrapIn(a,e)},mle=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const a=r[n];let i;if(a.spec.isInputRules&&(i=a.getState(t))){if(e){const o=t.tr,l=i.transform;for(let c=l.steps.length-1;c>=0;c-=1)o.step(l.steps[c].invert(l.docs[c]));if(i.text){const c=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,c))}else o.delete(i.from,i.to)}return!0}}return!1},gle=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:a}=r;return n||e&&a.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},xle=(t,e={})=>({tr:r,state:n,dispatch:a})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=r,c=rs(t,n.schema),{$from:d,empty:u,ranges:f}=l;if(!a)return!0;if(u&&o){let{from:h,to:p}=l;const m=(i=d.marks().find(g=>g.type===c))==null?void 0:i.attrs,x=Yy(d,c,m);x&&(h=x.from,p=x.to),r.removeMark(h,p,c)}else f.forEach(h=>{r.removeMark(h.$from.pos,h.$to.pos,c)});return r.removeStoredMark(c),!0},yle=t=>({tr:e,state:r,dispatch:n})=>{const{selection:a}=r;let i,o;return typeof t=="number"?(i=t,o=t):t&&"from"in t&&"to"in t?(i=t.from,o=t.to):(i=a.from,o=a.to),n&&e.doc.nodesBetween(i,o,(l,c)=>{if(l.isText)return;const d={...l.attrs};delete d.dir,e.setNodeMarkup(c,void 0,d)}),!0},vle=(t,e={})=>({tr:r,state:n,dispatch:a})=>{let i=null,o=null;const l=Dp(typeof t=="string"?t:t.name,n.schema);if(!l)return!1;l==="node"&&(i=er(t,n.schema)),l==="mark"&&(o=rs(t,n.schema));let c=!1;return r.selection.ranges.forEach(d=>{const u=d.$from.pos,f=d.$to.pos;let h,p,m,x;r.selection.empty?n.doc.nodesBetween(u,f,(g,y)=>{i&&i===g.type&&(c=!0,m=Math.max(y,u),x=Math.min(y+g.nodeSize,f),h=y,p=g)}):n.doc.nodesBetween(u,f,(g,y)=>{y<u&&i&&i===g.type&&(c=!0,m=Math.max(y,u),x=Math.min(y+g.nodeSize,f),h=y,p=g),y>=u&&y<=f&&(i&&i===g.type&&(c=!0,a&&r.setNodeMarkup(y,void 0,{...g.attrs,...e})),o&&g.marks.length&&g.marks.forEach(j=>{if(o===j.type&&(c=!0,a)){const b=Math.max(y,u),S=Math.min(y+g.nodeSize,f);r.addMark(b,S,o.create({...j.attrs,...e}))}}))}),p&&(h!==void 0&&a&&r.setNodeMarkup(h,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(g=>{o===g.type&&a&&r.addMark(m,x,o.create({...g.attrs,...e}))}))}),c},ble=(t,e={})=>({state:r,dispatch:n})=>{const a=er(t,r.schema);return Qae(a,e)(r,n)},jle=(t,e={})=>({state:r,dispatch:n})=>{const a=er(t,r.schema);return Zae(a,e)(r,n)},wle=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},zp=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},Sle=(t,e)=>{if(qy(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function ou(t){var e;const{editor:r,from:n,to:a,text:i,rules:o,plugin:l}=t,{view:c}=r;if(c.composing)return!1;const d=c.state.doc.resolve(n);if(d.parent.type.spec.code||(e=d.nodeBefore||d.nodeAfter)!=null&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const f=Xoe(d)+i;return o.forEach(h=>{if(u)return;const p=Sle(f,h.find);if(!p)return;const m=c.state.tr,x=$p({state:c.state,transaction:m}),g={from:n-(p[0].length-i.length),to:a},{commands:y,chain:j,can:b}=new Rp({editor:r,state:x});h.handler({state:x,range:g,match:p,commands:y,chain:j,can:b})===null||!m.steps.length||(h.undoable&&m.setMeta(l,{transform:m,from:n,to:a,text:i}),c.dispatch(m),u=!0)}),u}function Nle(t){const{editor:e,rules:r}=t,n=new Bt({state:{init(){return null},apply(a,i,o){const l=a.getMeta(n);if(l)return l;const c=a.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:u}=c;typeof u=="string"?u=u:u=Jy(re.from(u),o.schema);const{from:f}=c,h=f+u.length;ou({editor:e,from:f,to:h,text:u,rules:r,plugin:n})}),a.selectionSet||a.docChanged?null:i}},props:{handleTextInput(a,i,o,l){return ou({editor:e,from:i,to:o,text:l,rules:r,plugin:n})},handleDOMEvents:{compositionend:a=>(setTimeout(()=>{const{$cursor:i}=a.state.selection;i&&ou({editor:e,from:i.pos,to:i.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(a,i){if(i.key!=="Enter")return!1;const{$cursor:o}=a.state.selection;return o?ou({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function Ale(t){return Object.prototype.toString.call(t).slice(8,-1)}function lu(t){return Ale(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function IC(t,e){const r={...t};return lu(t)&&lu(e)&&Object.keys(e).forEach(n=>{lu(e[n])&&lu(t[n])?r[n]=IC(t[n],e[n]):r[n]=e[n]}),r}var Zy=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...ft(ke(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ft(ke(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>IC(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Vs=class MC extends Zy{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new MC(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,a=e.state.selection.$from;if(a.pos===a.end()){const o=a.marks();if(!!!o.find(d=>(d==null?void 0:d.type.name)===r.name))return!1;const c=o.find(d=>(d==null?void 0:d.type.name)===r.name);return c&&n.removeStoredMark(c),n.insertText(" ",a.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Cle(t){return typeof t=="number"}var kle=class{constructor(t){this.find=t.find,this.handler=t.handler}},Ole=(t,e,r)=>{if(qy(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(a=>{const i=[a.text];return i.index=a.index,i.input=t,i.data=a.data,a.replaceWith&&(a.text.includes(a.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(a.replaceWith)),i}):[]};function Ele(t){const{editor:e,state:r,from:n,to:a,rule:i,pasteEvent:o,dropEvent:l}=t,{commands:c,chain:d,can:u}=new Rp({editor:e,state:r}),f=[];return r.doc.nodesBetween(n,a,(p,m)=>{var x,g,y,j,b;if((g=(x=p.type)==null?void 0:x.spec)!=null&&g.code||!(p.isText||p.isTextblock||p.isInline))return;const S=(b=(j=(y=p.content)==null?void 0:y.size)!=null?j:p.nodeSize)!=null?b:0,w=Math.max(n,m),v=Math.min(a,m+S);if(w>=v)return;const C=p.isText?p.text||"":p.textBetween(w-m,v-m,void 0,"￼");Ole(C,i.find,o).forEach(k=>{if(k.index===void 0)return;const O=w+k.index+1,$=O+k[0].length,M={from:r.tr.mapping.map(O),to:r.tr.mapping.map($)},T=i.handler({state:r,range:M,match:k,commands:c,chain:d,can:u,pasteEvent:o,dropEvent:l});f.push(T)})}),f.every(p=>p!==null)}var cu=null,Ple=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function Tle(t){const{editor:e,rules:r}=t;let n=null,a=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:u,from:f,to:h,rule:p,pasteEvt:m})=>{const x=u.tr,g=$p({state:u,transaction:x});if(!(!Ele({editor:e,state:g,from:Math.max(f-1,0),to:h.b-1,rule:p,pasteEvent:m,dropEvent:l})||!x.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x}};return r.map(u=>new Bt({view(f){const h=m=>{var x;n=(x=f.dom.parentElement)!=null&&x.contains(m.target)?f.dom.parentElement:null,n&&(cu=e)},p=()=>{cu&&(cu=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(f,h)=>{if(i=n===f.dom.parentElement,l=h,!i){const p=cu;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,h)=>{var p;const m=(p=h.clipboardData)==null?void 0:p.getData("text/html");return o=h,a=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,h,p)=>{const m=f[0],x=m.getMeta("uiEvent")==="paste"&&!a,g=m.getMeta("uiEvent")==="drop"&&!i,y=m.getMeta("applyPasteRules"),j=!!y;if(!x&&!g&&!j)return;if(j){let{text:w}=y;typeof w=="string"?w=w:w=Jy(re.from(w),p.schema);const{from:v}=y,C=v+w.length,A=Ple(w);return c({rule:u,state:p,from:v,to:{b:C},pasteEvt:A})}const b=h.doc.content.findDiffStart(p.doc.content),S=h.doc.content.findDiffEnd(p.doc.content);if(!(!Cle(b)||!S||b===S.b))return c({rule:u,state:p,from:b,to:S,pasteEvt:o})}}))}var Fp=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=CC(t),this.schema=Hoe(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Fm(e.name,this.schema)},n=ke(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return Xy([...this.extensions].reverse()).flatMap(n=>{const a={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Fm(n.name,this.schema)},i=[],o=ke(n,"addKeyboardShortcuts",a);let l={};if(n.type==="mark"&&ke(n,"exitable",a)&&(l.ArrowRight=()=>Vs.handleExit({editor:t,mark:n})),o){const h=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));l={...l,...h}}const c=Yie(l);i.push(c);const d=ke(n,"addInputRules",a);if(G2(n,t.options.enableInputRules)&&d){const h=d();if(h&&h.length){const p=Nle({editor:t,rules:h}),m=Array.isArray(p)?p:[p];i.push(...m)}}const u=ke(n,"addPasteRules",a);if(G2(n,t.options.enablePasteRules)&&u){const h=u();if(h&&h.length){const p=Tle({editor:t,rules:h});i.push(...p)}}const f=ke(n,"addProseMirrorPlugins",a);if(f){const h=f();i.push(...h)}return i})}get attributes(){return AC(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=ol(this.extensions);return Object.fromEntries(e.filter(r=>!!ke(r,"addNodeView")).map(r=>{const n=this.attributes.filter(c=>c.type===r.name),a={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:er(r.name,this.schema)},i=ke(r,"addNodeView",a);if(!i)return[];const o=i();if(!o)return[];const l=(c,d,u,f,h)=>{const p=Uf(c,n);return o({node:c,view:d,getPos:u,decorations:f,innerDecorations:h,editor:t,extension:r,HTMLAttributes:p})};return[r.name,l]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=ol(this.extensions);return Object.fromEntries(e.filter(r=>!!ke(r,"addMarkView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),a={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:rs(r.name,this.schema)},i=ke(r,"addMarkView",a);if(!i)return[];const o=(l,c,d)=>{const u=Uf(l,n);return i()({mark:l,view:c,inline:d,editor:t,extension:r,HTMLAttributes:u,updateAttributes:f=>{qle(l,t,f)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Fm(e.name,this.schema)};e.type==="mark"&&((r=ft(ke(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const a=ke(e,"onBeforeCreate",n),i=ke(e,"onCreate",n),o=ke(e,"onUpdate",n),l=ke(e,"onSelectionUpdate",n),c=ke(e,"onTransaction",n),d=ke(e,"onFocus",n),u=ke(e,"onBlur",n),f=ke(e,"onDestroy",n);a&&this.editor.on("beforeCreate",a),i&&this.editor.on("create",i),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),d&&this.editor.on("focus",d),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}};Fp.resolve=CC;Fp.sort=Xy;Fp.flatten=Ky;var Ile={};Wy(Ile,{ClipboardTextSerializer:()=>RC,Commands:()=>DC,Delete:()=>_C,Drop:()=>LC,Editable:()=>zC,FocusEvents:()=>BC,Keymap:()=>UC,Paste:()=>VC,Tabindex:()=>HC,TextDirection:()=>WC,focusEventsPluginKey:()=>FC});var xt=class $C extends Zy{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new $C(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},RC=xt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Bt({key:new lr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:a}=e,{ranges:i}=a,o=Math.min(...i.map(u=>u.$from.pos)),l=Math.max(...i.map(u=>u.$to.pos)),c=OC(r);return kC(n,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),DC=xt.create({name:"commands",addCommands(){return{...gC}}}),_C=xt.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,a;const i=()=>{var o,l,c,d;if((d=(c=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:c.call(l,t))!=null?d:t.getMeta("y-sync$"))return;const u=SC(t.before,[t,...e]);PC(u).forEach(p=>{u.mapping.mapResult(p.oldRange.from).deletedAfter&&u.mapping.mapResult(p.oldRange.to).deletedBefore&&u.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,x)=>{const g=x+m.nodeSize-2,y=p.oldRange.from<=x&&g<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:x,to:g,newFrom:u.mapping.map(x),newTo:u.mapping.map(g),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:u})})});const h=u.mapping;u.steps.forEach((p,m)=>{var x,g;if(p instanceof ta){const y=h.slice(m).map(p.from,-1),j=h.slice(m).map(p.to),b=h.invert().map(y,-1),S=h.invert().map(j),w=(x=u.doc.nodeAt(y-1))==null?void 0:x.marks.some(C=>C.eq(p.mark)),v=(g=u.doc.nodeAt(j))==null?void 0:g.marks.some(C=>C.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:b,to:S},newRange:{from:y,to:j},partial:!!(v||w),editor:this.editor,transaction:t,combinedTransform:u})}})};(a=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||a?setTimeout(i,0):i()}}),LC=xt.create({name:"drop",addProseMirrorPlugins(){return[new Bt({key:new lr("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),zC=xt.create({name:"editable",addProseMirrorPlugins(){return[new Bt({key:new lr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),FC=new lr("focusEvents"),BC=xt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Bt({key:FC,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),UC=xt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:c,doc:d}=l,{empty:u,$anchor:f}=c,{pos:h,parent:p}=f,m=f.parent.isTextblock&&h>0?l.doc.resolve(h-1):f,x=m.parent.type.spec.isolating,g=f.pos-f.parentOffset,y=x&&m.parent.childCount===1?g===f.pos:qe.atStart(d).from===h;return!u||!p.type.isTextblock||p.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},a={...n},i={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Gy()||jC()?i:a},addProseMirrorPlugins(){return[new Bt({key:new lr("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(x=>x.getMeta("composition")))return;const n=t.some(x=>x.docChanged)&&!e.doc.eq(r.doc),a=t.some(x=>x.getMeta("preventClearDocument"));if(!n||a)return;const{empty:i,from:o,to:l}=e.selection,c=qe.atStart(e.doc).from,d=qe.atEnd(e.doc).to;if(i||!(o===c&&l===d)||!Lp(r.doc))return;const h=r.tr,p=$p({state:r,transaction:h}),{commands:m}=new Rp({editor:this.editor,state:p});if(m.clearNodes(),!!h.steps.length)return h}})]}}),VC=xt.create({name:"paste",addProseMirrorPlugins(){return[new Bt({key:new lr("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),HC=xt.create({name:"tabindex",addProseMirrorPlugins(){return[new Bt({key:new lr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),WC=xt.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=ol(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Bt({key:new lr("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),Mle=class ao{constructor(e,r,n=!1,a=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=a}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new ao(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ao(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ao(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const a=r.isBlock&&!r.isTextblock,i=r.isAtom&&!r.isText,o=this.pos+n+(i?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!a&&l.depth<=this.depth)return;const c=new ao(l,this.editor,a,a?r:null);a&&(c.actualDepth=this.depth+1),e.push(new ao(l,this.editor,a,a?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,a=this.parent;for(;a&&!n;){if(a.node.type.name===e)if(Object.keys(r).length>0){const i=a.node.attrs,o=Object.keys(r);for(let l=0;l<o.length;l+=1){const c=o[l];if(i[c]!==r[c])break}}else n=a;a=a.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let a=[];if(!this.children||this.children.length===0)return a;const i=Object.keys(r);return this.children.forEach(o=>{n&&a.length>0||(o.node.type.name===e&&i.every(c=>r[c]===o.node.attrs[c])&&a.push(o),!(n&&a.length>0)&&(a=a.concat(o.querySelectorAll(e,r,n))))}),a}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},$le=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Rle(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const a=document.createElement("style");return e&&a.setAttribute("nonce",e),a.setAttribute("data-tiptap-style",""),a.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(a),a}var Dle=class extends wle{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:a,moved:i})=>this.options.onDrop(n,a,i)),this.on("paste",({event:n,slice:a})=>this.options.onPaste(n,a)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=vC(e,this.options.autofocus);this.editorState=ho.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Rle($le,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=NC(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(a=>{const i=typeof a=="string"?`${a}$`:a.key;r=r.filter(o=>!o.key.startsWith(i))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[zC,RC.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),DC,BC,UC,HC,LC,VC,_C,WC.configure({direction:this.options.textDirection})].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a==null?void 0:a.type));this.extensionManager=new Fp(n,this)}createCommandManager(){this.commandManager=new Rp({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Hx(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=Hx(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new pC(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.prependClass(),this.injectCSS();const n=this.view.dom;n.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(d=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(d)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),a=r.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!a)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o==null?void 0:o.getMeta("focus"),c=o==null?void 0:o.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),c&&this.emit("blur",{editor:this,event:c.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(d=>d.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return EC(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return Qoe(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Jy(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return qoe(this.state.doc,{blockSeparator:e,textSerializers:{...OC(this.schema),...r}})}get isEmpty(){return Lp(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new Mle(e,this)}get $doc(){return this.$pos(0)}};function ll(t){return new zp({find:t.find,handler:({state:e,range:r,match:n})=>{const a=ft(t.getAttributes,void 0,n);if(a===!1||a===null)return null;const{tr:i}=e,o=n[n.length-1],l=n[0];if(o){const c=l.search(/\S/),d=r.from+l.indexOf(o),u=d+o.length;if(Qy(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(x=>x===t.type&&x!==p.mark.type)).filter(p=>p.to>d).length)return null;u<r.to&&i.delete(u,r.to),d>r.from&&i.delete(r.from+c,d);const h=r.from+c+o.length;i.addMark(r.from+c,h,t.type.create(a||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}function qC(t){return new zp({find:t.find,handler:({state:e,range:r,match:n})=>{const a=ft(t.getAttributes,void 0,n)||{},{tr:i}=e,o=r.from;let l=r.to;const c=t.type.create(a);if(n[1]){const d=n[0].lastIndexOf(n[1]);let u=o+d;u>l?u=l:l=u+n[1].length;const f=n[0][n[0].length-1];i.insertText(f,o+n[0].length-1),i.replaceWith(u,l,c)}else if(n[0]){const d=t.type.isInline?o:o-1;i.insert(d,t.type.create(a)).delete(i.mapping.map(o),i.mapping.map(l))}i.scrollIntoView()},undoable:t.undoable})}function qx(t){return new zp({find:t.find,handler:({state:e,range:r,match:n})=>{const a=e.doc.resolve(r.from),i=ft(t.getAttributes,void 0,n)||{};if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,i)},undoable:t.undoable})}function cl(t){return new zp({find:t.find,handler:({state:e,range:r,match:n,chain:a})=>{const i=ft(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),c=o.doc.resolve(r.from).blockRange(),d=c&&Ey(c,t.type,i);if(!d)return null;if(o.wrap(c,d),t.keepMarks&&t.editor){const{selection:f,storedMarks:h}=e,{splittableMarks:p}=t.editor.extensionManager,m=h||f.$to.parentOffset&&f.$from.marks();if(m){const x=m.filter(g=>p.includes(g.type.name));o.ensureMarks(x)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";a().updateAttributes(f,i).run()}const u=o.doc.resolve(r.from-1).nodeBefore;u&&u.type===t.type&&Bs(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,u))&&o.join(r.from-1)},undoable:t.undoable})}var _le=t=>"touches"in t,Lle=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.handleMouseMove=o=>{if(!this.isResizing||!this.activeHandle)return;const l=o.clientX-this.startX,c=o.clientY-this.startY;this.handleResize(l,c)},this.handleTouchMove=o=>{if(!this.isResizing||!this.activeHandle)return;const l=o.touches[0];if(!l)return;const c=l.clientX-this.startX,d=l.clientY-this.startY;this.handleResize(c,d)},this.handleMouseUp=()=>{if(!this.isResizing)return;const o=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(o,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=o=>{o.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=o=>{o.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,r,n,a,i;this.node=t.node,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(e=t.options)!=null&&e.min&&(this.minSize={...this.minSize,...t.options.min}),(r=t.options)!=null&&r.max&&(this.maxSize=t.options.max),(n=t==null?void 0:t.options)!=null&&n.directions&&(this.directions=t.options.directions),(a=t.options)!=null&&a.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(i=t.options)!=null&&i.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles()}get dom(){return this.container}get contentDOM(){return this.contentElement}update(t,e,r){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,e,r):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",t.style.justifyContent="flex-start",t.style.alignItems="flex-start",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const e=document.createElement("div");return e.dataset.resizeHandle=t,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(t,e){const r=e.includes("top"),n=e.includes("bottom"),a=e.includes("left"),i=e.includes("right");r&&(t.style.top="0"),n&&(t.style.bottom="0"),a&&(t.style.left="0"),i&&(t.style.right="0"),(e==="top"||e==="bottom")&&(t.style.left="0",t.style.right="0"),(e==="left"||e==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{const e=this.createHandle(t);this.positionHandle(e,t),e.addEventListener("mousedown",r=>this.handleResizeStart(r,t)),e.addEventListener("touchstart",r=>this.handleResizeStart(r,t)),this.wrapper.appendChild(e)})}applyInitialSize(){const t=this.node.attrs.width,e=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=e,_le(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,e){if(!this.activeHandle)return;const r=this.preserveAspectRatio||this.isShiftKeyPressed,{width:n,height:a}=this.calculateNewDimensions(this.activeHandle,t,e),i=this.applyConstraints(n,a,r);this.element.style.width=`${i.width}px`,this.element.style.height=`${i.height}px`,this.onResize&&this.onResize(i.width,i.height)}calculateNewDimensions(t,e,r){let n=this.startWidth,a=this.startHeight;const i=t.includes("right"),o=t.includes("left"),l=t.includes("bottom"),c=t.includes("top");return i?n=this.startWidth+e:o&&(n=this.startWidth-e),l?a=this.startHeight+r:c&&(a=this.startHeight-r),(t==="right"||t==="left")&&(n=this.startWidth+(i?e:-e)),(t==="top"||t==="bottom")&&(a=this.startHeight+(l?r:-r)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(n,a,t):{width:n,height:a}}applyConstraints(t,e,r){var n,a,i,o;if(!r){let d=Math.max(this.minSize.width,t),u=Math.max(this.minSize.height,e);return(n=this.maxSize)!=null&&n.width&&(d=Math.min(this.maxSize.width,d)),(a=this.maxSize)!=null&&a.height&&(u=Math.min(this.maxSize.height,u)),{width:d,height:u}}let l=t,c=e;return l<this.minSize.width&&(l=this.minSize.width,c=l/this.aspectRatio),c<this.minSize.height&&(c=this.minSize.height,l=c*this.aspectRatio),(i=this.maxSize)!=null&&i.width&&l>this.maxSize.width&&(l=this.maxSize.width,c=l/this.aspectRatio),(o=this.maxSize)!=null&&o.height&&c>this.maxSize.height&&(c=this.maxSize.height,l=c*this.aspectRatio),{width:l,height:c}}applyAspectRatio(t,e,r){const n=r==="left"||r==="right",a=r==="top"||r==="bottom";return n?{width:t,height:t/this.aspectRatio}:a?{width:e*this.aspectRatio,height:e}:{width:t,height:t/this.aspectRatio}}};function zle(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof Te){const i=n.index();return n.parent.canReplaceWith(i,i+1,e)}let a=n.depth;for(;a>=0;){const i=n.index(a);if(n.node(a).contentMatchAt(i).matchType(e))return!0;a-=1}return!1}var Fle={};Wy(Fle,{createAtomBlockMarkdownSpec:()=>Ble,createBlockMarkdownSpec:()=>Ule,createInlineMarkdownSpec:()=>Wle,parseAttributes:()=>ev,parseIndentedBlocks:()=>Yx,renderNestedMarkdownContent:()=>rv,serializeAttributes:()=>tv});function ev(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,d=>(r.push(d),`__QUOTED_${r.length-1}__`)),a=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(a){const d=a.map(u=>u.trim().slice(1));e.class=d.join(" ")}const i=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,d,u])=>{var f;const h=parseInt(((f=u.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),p=r[h];p&&(e[d]=p.slice(1,-1))});const c=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(e[u]=!0)}),e}function tv(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function Ble(t){const{nodeName:e,name:r,parseAttributes:n=ev,serializeAttributes:a=tv,defaultAttributes:i={},requiredAttributes:o=[],allowedAttributes:l}=t,c=r||e,d=u=>{if(!l)return u;const f={};return l.forEach(h=>{h in u&&(f[h]=u[h])}),f};return{parseMarkdown:(u,f)=>{const h={...i,...u.attributes};return f.createNode(e,h,[])},markdownTokenizer:{name:e,level:"block",start(u){var f;const h=new RegExp(`^:::${c}(?:\\s|$)`,"m"),p=(f=u.match(h))==null?void 0:f.index;return p!==void 0?p:-1},tokenize(u,f,h){const p=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=u.match(p);if(!m)return;const x=m[1]||"",g=n(x);if(!o.find(j=>!(j in g)))return{type:e,raw:m[0],attributes:g}}},renderMarkdown:u=>{const f=d(u.attrs||{}),h=a(f),p=h?` {${h}}`:"";return`:::${c}${p} :::`}}}function Ule(t){const{nodeName:e,name:r,getContent:n,parseAttributes:a=ev,serializeAttributes:i=tv,defaultAttributes:o={},content:l="block",allowedAttributes:c}=t,d=r||e,u=f=>{if(!c)return f;const h={};return c.forEach(p=>{p in f&&(h[p]=f[p])}),h};return{parseMarkdown:(f,h)=>{let p;if(n){const x=n(f);p=typeof x=="string"?[{type:"text",text:x}]:x}else l==="block"?p=h.parseChildren(f.tokens||[]):p=h.parseInline(f.tokens||[]);const m={...o,...f.attributes};return h.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(f){var h;const p=new RegExp(`^:::${d}`,"m"),m=(h=f.match(p))==null?void 0:h.index;return m!==void 0?m:-1},tokenize(f,h,p){var m;const x=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),g=f.match(x);if(!g)return;const[y,j=""]=g,b=a(j);let S=1;const w=y.length;let v="";const C=/^:::([\w-]*)(\s.*)?/gm,A=f.slice(w);for(C.lastIndex=0;;){const k=C.exec(A);if(k===null)break;const O=k.index,$=k[1];if(!((m=k[2])!=null&&m.endsWith(":::"))){if($)S+=1;else if(S-=1,S===0){const M=A.slice(0,O);v=M.trim();const T=f.slice(0,w+O+k[0].length);let I=[];if(v)if(l==="block")for(I=p.blockTokens(M),I.forEach(z=>{z.text&&(!z.tokens||z.tokens.length===0)&&(z.tokens=p.inlineTokens(z.text))});I.length>0;){const z=I[I.length-1];if(z.type==="paragraph"&&(!z.text||z.text.trim()===""))I.pop();else break}else I=p.inlineTokens(v);return{type:e,raw:T,attributes:b,content:v,tokens:I}}}}}},renderMarkdown:(f,h)=>{const p=u(f.attrs||{}),m=i(p),x=m?` {${m}}`:"",g=h.renderChildren(f.content||[],`

`);return`:::${d}${x}

${g}

:::`}}}function Vle(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,a,i,o]=n;e[a]=i||o,n=r.exec(t)}return e}function Hle(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function Wle(t){const{nodeName:e,name:r,getContent:n,parseAttributes:a=Vle,serializeAttributes:i=Hle,defaultAttributes:o={},selfClosing:l=!1,allowedAttributes:c}=t,d=r||e,u=h=>{if(!c)return h;const p={};return c.forEach(m=>{m in h&&(p[m]=h[m])}),p},f=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(h,p)=>{const m={...o,...h.attributes};if(l)return p.createNode(e,m);const x=n?n(h):h.content||"";return x?p.createNode(e,m,[p.createTextNode(x)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(h){const p=l?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),m=h.match(p),x=m==null?void 0:m.index;return x!==void 0?x:-1},tokenize(h,p,m){const x=l?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),g=h.match(x);if(!g)return;let y="",j="";if(l){const[,S]=g;j=S}else{const[,S,w]=g;j=S,y=w||""}const b=a(j.trim());return{type:e,raw:g[0],content:y.trim(),attributes:b}}},renderMarkdown:h=>{let p="";n?p=n(h):h.content&&h.content.length>0&&(p=h.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=u(h.attrs||{}),x=i(m),g=x?` ${x}`:"";return l?`[${d}${g}]`:`[${d}${g}]${p}[/${d}]`}}}function Yx(t,e,r){var n,a,i,o;const l=t.split(`
`),c=[];let d="",u=0;const f=e.baseIndentSize||2;for(;u<l.length;){const h=l[u],p=h.match(e.itemPattern);if(!p){if(c.length>0)break;if(h.trim()===""){u+=1,d=`${d}${h}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:x,mainContent:g}=m;d=`${d}${h}
`;const y=[g];for(u+=1;u<l.length;){const w=l[u];if(w.trim()===""){const C=l.slice(u+1).findIndex(O=>O.trim()!=="");if(C===-1)break;if((((a=(n=l[u+1+C].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:a.length)||0)>x){y.push(w),d=`${d}${w}
`,u+=1;continue}else break}if((((o=(i=w.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:o.length)||0)>x)y.push(w),d=`${d}${w}
`,u+=1;else break}let j;const b=y.slice(1);if(b.length>0){const w=b.map(v=>v.slice(x+f)).join(`
`);w.trim()&&(e.customNestedParser?j=e.customNestedParser(w):j=r.blockTokens(w))}const S=e.createToken(m,j);c.push(S)}if(c.length!==0)return{items:c,raw:d}}function rv(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const a=typeof r=="function"?r(n):r,[i,...o]=t.content,l=e.renderChildren([i]),c=[`${a}${l}`];return o&&o.length>0&&o.forEach(d=>{const u=e.renderChildren([d]);if(u){const f=u.split(`
`).map(h=>h?e.indent(h):"").join(`
`);c.push(f)}}),c.join(`
`)}function qle(t,e,r={}){const{state:n}=e,{doc:a,tr:i}=n,o=t;a.descendants((l,c)=>{const d=i.mapping.map(c),u=i.mapping.map(c)+l.nodeSize;let f=null;if(l.marks.forEach(p=>{if(p!==o)return!1;f=p}),!f)return;let h=!1;if(Object.keys(r).forEach(p=>{r[p]!==f.attrs[p]&&(h=!0)}),h){const p=t.type.create({...t.attrs,...r});i.removeMark(d,u,t.type),i.addMark(d,u,p)}}),i.docChanged&&e.view.dispatch(i)}var ln=class YC extends Zy{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new YC(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Ri(t){return new kle({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:a})=>{const i=ft(t.getAttributes,void 0,n,a);if(i===!1||i===null)return null;const{tr:o}=e,l=n[n.length-1],c=n[0];let d=r.to;if(l){const u=c.search(/\S/),f=r.from+c.indexOf(l),h=f+l.length;if(Qy(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(g=>g===t.type&&g!==m.mark.type)).filter(m=>m.to>f).length)return null;h<r.to&&o.delete(h,r.to),f>r.from&&o.delete(r.from+u,f),d=r.from+u+l.length,o.addMark(r.from+u,d,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}var Yle=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,a,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!t(e[a],r[a]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(a of e.entries())if(!r.has(a[0]))return!1;for(a of e.entries())if(!t(a[1],r.get(a[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(a of e.entries())if(!r.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(n=e.length,n!=r.length)return!1;for(a=n;a--!==0;)if(e[a]!==r[a])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[a]))return!1;for(a=n;a--!==0;){var o=i[a];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r};const Gle=at(Yle);var GC={exports:{}},KC={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bp=N,Kle=Cy;function Jle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xle=typeof Object.is=="function"?Object.is:Jle,Qle=Kle.useSyncExternalStore,Zle=Bp.useRef,ece=Bp.useEffect,tce=Bp.useMemo,rce=Bp.useDebugValue;KC.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var i=Zle(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=tce(function(){function c(p){if(!d){if(d=!0,u=p,p=n(p),a!==void 0&&o.hasValue){var m=o.value;if(a(m,p))return f=m}return f=p}if(m=f,Xle(u,p))return m;var x=n(p);return a!==void 0&&a(m,x)?(u=p,m):(u=p,f=x)}var d=!1,u,f,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var l=Qle(t,i[0],i[1]);return ece(function(){o.hasValue=!0,o.value=l},[l]),rce(l),l};GC.exports=KC;var nce=GC.exports,ace=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},sce=({contentComponent:t})=>{const e=Cy.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return s.jsx(s.Fragment,{children:Object.values(e)})};function ice(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:Ck.createPortal(n.reactElement,n.element,r)},t.forEach(a=>a())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(a=>a())}}}var oce=class extends D.Component{constructor(t){var e;super(t),this.editorContentRef=D.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=ice(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const r=document.createElement("div");r.append(e.view.dom),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:ace(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&s.jsx(sce,{contentComponent:t.contentComponent})]})}},lce=N.forwardRef((t,e)=>{const r=D.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return D.createElement(oce,{key:r,innerRef:e,...t})}),X2=D.memo(lce),cce=typeof window<"u"?N.useLayoutEffect:N.useEffect,dce=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function uce(t){var e;const[r]=N.useState(()=>new dce(t.editor)),n=nce.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:Gle);return cce(()=>r.watch(t.editor),[t.editor,r]),N.useDebugValue(n),n}var fce=!1,Gx=typeof window>"u",hce=Gx||!!(typeof window<"u"&&window.next),pce=class JC{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Gx||hce?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var a,i;return(i=(a=this.options.current).onBeforeCreate)==null?void 0:i.call(a,...n)},onBlur:(...n)=>{var a,i;return(i=(a=this.options.current).onBlur)==null?void 0:i.call(a,...n)},onCreate:(...n)=>{var a,i;return(i=(a=this.options.current).onCreate)==null?void 0:i.call(a,...n)},onDestroy:(...n)=>{var a,i;return(i=(a=this.options.current).onDestroy)==null?void 0:i.call(a,...n)},onFocus:(...n)=>{var a,i;return(i=(a=this.options.current).onFocus)==null?void 0:i.call(a,...n)},onSelectionUpdate:(...n)=>{var a,i;return(i=(a=this.options.current).onSelectionUpdate)==null?void 0:i.call(a,...n)},onTransaction:(...n)=>{var a,i;return(i=(a=this.options.current).onTransaction)==null?void 0:i.call(a,...n)},onUpdate:(...n)=>{var a,i;return(i=(a=this.options.current).onUpdate)==null?void 0:i.call(a,...n)},onContentError:(...n)=>{var a,i;return(i=(a=this.options.current).onContentError)==null?void 0:i.call(a,...n)},onDrop:(...n)=>{var a,i;return(i=(a=this.options.current).onDrop)==null?void 0:i.call(a,...n)},onPaste:(...n)=>{var a,i;return(i=(a=this.options.current).onPaste)==null?void 0:i.call(a,...n)},onDelete:(...n)=>{var a,i;return(i=(a=this.options.current).onDelete)==null?void 0:i.call(a,...n)}};return new Dle(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((a,i)=>{var o;return a===((o=r.extensions)==null?void 0:o[i])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?JC.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,a)=>n===e[a]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function Q2(t={},e=[]){const r=N.useRef(t);r.current=t;const[n]=N.useState(()=>new pce(r)),a=Cy.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return N.useDebugValue(a),N.useEffect(n.onRender(e)),uce({editor:a,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),a}var mce=N.createContext({editor:null});mce.Consumer;var gce=N.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),xce=()=>N.useContext(gce);D.forwardRef((t,e)=>{const{onDragStart:r}=xce(),n=t.as||"div";return s.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});D.createContext({markViewContentRef:()=>{}});var Vf=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},yce=/^\s*>\s$/,vce=ln.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Vf("blockquote",{...qt(this.options.HTMLAttributes,t),children:Vf("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(a=>{const l=e.renderChildren([a]).split(`
`).map(c=>c.trim()===""?r:`${r} ${c}`);n.push(l.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[cl({find:yce,type:this.type})]}}),bce=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,jce=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,wce=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Sce=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Nce=Vs.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Vf("strong",{...qt(this.options.HTMLAttributes,t),children:Vf("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ll({find:bce,type:this.type}),ll({find:wce,type:this.type})]},addPasteRules(){return[Ri({find:jce,type:this.type}),Ri({find:Sce,type:this.type})]}}),Ace=/(^|[^`])`([^`]+)`(?!`)$/,Cce=/(^|[^`])`([^`]+)`(?!`)/g,kce=Vs.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",qt(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ll({find:Ace,type:this.type})]},addPasteRules(){return[Ri({find:Cce,type:this.type})]}}),Vm=4,Oce=/^```([a-z]+)?[\s\n]$/,Ece=/^~~~([a-z]+)?[\s\n]$/,Pce=ln.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Vm,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",qt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const a=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${a}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${a}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:Vm,{state:n}=t,{selection:a}=n,{$from:i,empty:o}=a;if(i.parent.type!==this.type)return!1;const l=" ".repeat(r);return o?t.commands.insertContent(l):t.commands.command(({tr:c})=>{const{from:d,to:u}=a,p=n.doc.textBetween(d,u,`
`,`
`).split(`
`).map(m=>l+m).join(`
`);return c.replaceWith(d,u,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:Vm,{state:n}=t,{selection:a}=n,{$from:i,empty:o}=a;return i.parent.type!==this.type?!1:o?t.commands.command(({tr:l})=>{var c;const{pos:d}=i,u=i.start(),f=i.end(),p=n.doc.textBetween(u,f,`
`,`
`).split(`
`);let m=0,x=0;const g=d-u;for(let v=0;v<p.length;v+=1){if(x+p[v].length>=g){m=v;break}x+=p[v].length+1}const j=((c=p[m].match(/^ */))==null?void 0:c[0])||"",b=Math.min(j.length,r);if(b===0)return!0;let S=u;for(let v=0;v<m;v+=1)S+=p[v].length+1;return l.delete(S,S+b),d-S<=b&&l.setSelection(Be.create(l.doc,S)),!0}):t.commands.command(({tr:l})=>{const{from:c,to:d}=a,h=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(p=>{var m;const x=((m=p.match(/^ */))==null?void 0:m[0])||"",g=Math.min(x.length,r);return p.slice(g)}).join(`
`);return l.replaceWith(c,d,n.schema.text(h)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:a}=r;if(!a||n.parent.type!==this.type)return!1;const i=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:l})=>(l.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:a,empty:i}=r;if(!i||a.parent.type!==this.type||!(a.parentOffset===a.parent.nodeSize-2))return!1;const l=a.after();return l===void 0?!1:n.nodeAt(l)?t.commands.command(({tr:d})=>(d.setSelection(qe.near(n.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[qx({find:Oce,type:this.type,getAttributes:t=>({language:t[1]})}),qx({find:Ece,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Bt({key:new lr("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),a=n?JSON.parse(n):void 0,i=a==null?void 0:a.mode;if(!r||!i)return!1;const{tr:o,schema:l}=t.state,c=l.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(Be.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),Tce=ln.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),Ice=ln.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",qt(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:a,storedMarks:i}=r;if(a.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=n.extensionManager,c=i||a.$to.parentOffset&&a.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:u})=>{if(u&&c&&o){const f=c.filter(h=>l.includes(h.type.name));d.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Mce=ln.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,qt(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,a="#".repeat(n);return t.content?`${a} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>qx({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),$ce=ln.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",qt(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!zle(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,a=t();return TC(r)?a.insertContentAt(n.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({state:i,tr:o,dispatch:l})=>{if(l){const{$to:c}=o.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(Be.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Te.create(o.doc,c.pos)):o.setSelection(Be.create(o.doc,c.pos));else{const u=i.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,f=u==null?void 0:u.create();f&&(o.insert(d,f),o.setSelection(Be.create(o.doc,d+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[qC({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Rce=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Dce=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,_ce=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Lce=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,zce=Vs.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ll({find:Rce,type:this.type}),ll({find:_ce,type:this.type})]},addPasteRules(){return[Ri({find:Dce,type:this.type}),Ri({find:Lce,type:this.type})]}});const Fce="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Bce="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Kx="numeric",Jx="ascii",Xx="alpha",cc="asciinumeric",Ql="alphanumeric",Qx="domain",XC="emoji",Uce="scheme",Vce="slashscheme",Hm="whitespace";function Hce(t,e){return t in e||(e[t]=[]),e[t]}function mi(t,e,r){e[Kx]&&(e[cc]=!0,e[Ql]=!0),e[Jx]&&(e[cc]=!0,e[Xx]=!0),e[cc]&&(e[Ql]=!0),e[Xx]&&(e[Ql]=!0),e[Ql]&&(e[Qx]=!0),e[XC]&&(e[Qx]=!0);for(const n in e){const a=Hce(n,r);a.indexOf(t)<0&&a.push(t)}}function Wce(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function rn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}rn.groups={};rn.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const a=e.jr[n][0],i=e.jr[n][1];if(i&&a.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let a=0;a<t.length;a++)this.tt(t[a],e,r,n)},tr(t,e,r,n){n=n||rn.groups;let a;return e&&e.j?a=e:(a=new rn(e),r&&n&&mi(e,r,n)),this.jr.push([t,a]),a},ts(t,e,r,n){let a=this;const i=t.length;if(!i)return a;for(let o=0;o<i-1;o++)a=a.tt(t[o]);return a.tt(t[i-1],e,r,n)},tt(t,e,r,n){n=n||rn.groups;const a=this;if(e&&e.j)return a.j[t]=e,e;const i=e;let o,l=a.go(t);if(l?(o=new rn,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new rn,i){if(n)if(o.t&&typeof o.t=="string"){const c=Object.assign(Wce(o.t,n),r);mi(i,c,n)}else r&&mi(i,r,n);o.t=i}return a.j[t]=o,o}};const We=(t,e,r,n,a)=>t.ta(e,r,n,a),Vt=(t,e,r,n,a)=>t.tr(e,r,n,a),Z2=(t,e,r,n,a)=>t.ts(e,r,n,a),ae=(t,e,r,n,a)=>t.tt(e,r,n,a),Ia="WORD",Zx="UWORD",QC="ASCIINUMERICAL",ZC="ALPHANUMERICAL",dd="LOCALHOST",e0="TLD",t0="UTLD",bu="SCHEME",so="SLASH_SCHEME",nv="NUM",r0="WS",av="NL",dc="OPENBRACE",uc="CLOSEBRACE",Hf="OPENBRACKET",Wf="CLOSEBRACKET",qf="OPENPAREN",Yf="CLOSEPAREN",Gf="OPENANGLEBRACKET",Kf="CLOSEANGLEBRACKET",Jf="FULLWIDTHLEFTPAREN",Xf="FULLWIDTHRIGHTPAREN",Qf="LEFTCORNERBRACKET",Zf="RIGHTCORNERBRACKET",eh="LEFTWHITECORNERBRACKET",th="RIGHTWHITECORNERBRACKET",rh="FULLWIDTHLESSTHAN",nh="FULLWIDTHGREATERTHAN",ah="AMPERSAND",sh="APOSTROPHE",ih="ASTERISK",us="AT",oh="BACKSLASH",lh="BACKTICK",ch="CARET",ms="COLON",sv="COMMA",dh="DOLLAR",da="DOT",uh="EQUALS",iv="EXCLAMATION",Pn="HYPHEN",fc="PERCENT",fh="PIPE",hh="PLUS",ph="POUND",hc="QUERY",ov="QUOTE",ek="FULLWIDTHMIDDLEDOT",lv="SEMI",ua="SLASH",pc="TILDE",mh="UNDERSCORE",tk="EMOJI",gh="SYM";var rk=Object.freeze({__proto__:null,ALPHANUMERICAL:ZC,AMPERSAND:ah,APOSTROPHE:sh,ASCIINUMERICAL:QC,ASTERISK:ih,AT:us,BACKSLASH:oh,BACKTICK:lh,CARET:ch,CLOSEANGLEBRACKET:Kf,CLOSEBRACE:uc,CLOSEBRACKET:Wf,CLOSEPAREN:Yf,COLON:ms,COMMA:sv,DOLLAR:dh,DOT:da,EMOJI:tk,EQUALS:uh,EXCLAMATION:iv,FULLWIDTHGREATERTHAN:nh,FULLWIDTHLEFTPAREN:Jf,FULLWIDTHLESSTHAN:rh,FULLWIDTHMIDDLEDOT:ek,FULLWIDTHRIGHTPAREN:Xf,HYPHEN:Pn,LEFTCORNERBRACKET:Qf,LEFTWHITECORNERBRACKET:eh,LOCALHOST:dd,NL:av,NUM:nv,OPENANGLEBRACKET:Gf,OPENBRACE:dc,OPENBRACKET:Hf,OPENPAREN:qf,PERCENT:fc,PIPE:fh,PLUS:hh,POUND:ph,QUERY:hc,QUOTE:ov,RIGHTCORNERBRACKET:Zf,RIGHTWHITECORNERBRACKET:th,SCHEME:bu,SEMI:lv,SLASH:ua,SLASH_SCHEME:so,SYM:gh,TILDE:pc,TLD:e0,UNDERSCORE:mh,UTLD:t0,UWORD:Zx,WORD:Ia,WS:r0});const Pa=/[a-z]/,Ul=new RegExp("\\p{L}","u"),Wm=new RegExp("\\p{Emoji}","u"),Ta=/\d/,qm=/\s/,eS="\r",Ym=`
`,qce="️",Yce="‍",Gm="￼";let du=null,uu=null;function Gce(t=[]){const e={};rn.groups=e;const r=new rn;du==null&&(du=tS(Fce)),uu==null&&(uu=tS(Bce)),ae(r,"'",sh),ae(r,"{",dc),ae(r,"}",uc),ae(r,"[",Hf),ae(r,"]",Wf),ae(r,"(",qf),ae(r,")",Yf),ae(r,"<",Gf),ae(r,">",Kf),ae(r,"（",Jf),ae(r,"）",Xf),ae(r,"「",Qf),ae(r,"」",Zf),ae(r,"『",eh),ae(r,"』",th),ae(r,"＜",rh),ae(r,"＞",nh),ae(r,"&",ah),ae(r,"*",ih),ae(r,"@",us),ae(r,"`",lh),ae(r,"^",ch),ae(r,":",ms),ae(r,",",sv),ae(r,"$",dh),ae(r,".",da),ae(r,"=",uh),ae(r,"!",iv),ae(r,"-",Pn),ae(r,"%",fc),ae(r,"|",fh),ae(r,"+",hh),ae(r,"#",ph),ae(r,"?",hc),ae(r,'"',ov),ae(r,"/",ua),ae(r,";",lv),ae(r,"~",pc),ae(r,"_",mh),ae(r,"\\",oh),ae(r,"・",ek);const n=Vt(r,Ta,nv,{[Kx]:!0});Vt(n,Ta,n);const a=Vt(n,Pa,QC,{[cc]:!0}),i=Vt(n,Ul,ZC,{[Ql]:!0}),o=Vt(r,Pa,Ia,{[Jx]:!0});Vt(o,Ta,a),Vt(o,Pa,o),Vt(a,Ta,a),Vt(a,Pa,a);const l=Vt(r,Ul,Zx,{[Xx]:!0});Vt(l,Pa),Vt(l,Ta,i),Vt(l,Ul,l),Vt(i,Ta,i),Vt(i,Pa),Vt(i,Ul,i);const c=ae(r,Ym,av,{[Hm]:!0}),d=ae(r,eS,r0,{[Hm]:!0}),u=Vt(r,qm,r0,{[Hm]:!0});ae(r,Gm,u),ae(d,Ym,c),ae(d,Gm,u),Vt(d,qm,u),ae(u,eS),ae(u,Ym),Vt(u,qm,u),ae(u,Gm,u);const f=Vt(r,Wm,tk,{[XC]:!0});ae(f,"#"),Vt(f,Wm,f),ae(f,qce,f);const h=ae(f,Yce);ae(h,"#"),Vt(h,Wm,f);const p=[[Pa,o],[Ta,a]],m=[[Pa,null],[Ul,l],[Ta,i]];for(let x=0;x<du.length;x++)ss(r,du[x],e0,Ia,p);for(let x=0;x<uu.length;x++)ss(r,uu[x],t0,Zx,m);mi(e0,{tld:!0,ascii:!0},e),mi(t0,{utld:!0,alpha:!0},e),ss(r,"file",bu,Ia,p),ss(r,"mailto",bu,Ia,p),ss(r,"http",so,Ia,p),ss(r,"https",so,Ia,p),ss(r,"ftp",so,Ia,p),ss(r,"ftps",so,Ia,p),mi(bu,{scheme:!0,ascii:!0},e),mi(so,{slashscheme:!0,ascii:!0},e),t=t.sort((x,g)=>x[0]>g[0]?1:-1);for(let x=0;x<t.length;x++){const g=t[x][0],j=t[x][1]?{[Uce]:!0}:{[Vce]:!0};g.indexOf("-")>=0?j[Qx]=!0:Pa.test(g)?Ta.test(g)?j[cc]=!0:j[Jx]=!0:j[Kx]=!0,Z2(r,g,g,j)}return Z2(r,"localhost",dd,{ascii:!0}),r.jd=new rn(gh),{start:r,tokens:Object.assign({groups:e},rk)}}function nk(t,e){const r=Kce(e.replace(/[A-Z]/g,l=>l.toLowerCase())),n=r.length,a=[];let i=0,o=0;for(;o<n;){let l=t,c=null,d=0,u=null,f=-1,h=-1;for(;o<n&&(c=l.go(r[o]));)l=c,l.accepts()?(f=0,h=0,u=l):f>=0&&(f+=r[o].length,h++),d+=r[o].length,i+=r[o].length,o++;i-=f,o-=h,d-=f,a.push({t:u.t,v:e.slice(i-d,i),s:i-d,e:i})}return a}function Kce(t){const e=[],r=t.length;let n=0;for(;n<r;){let a=t.charCodeAt(n),i,o=a<55296||a>56319||n+1===r||(i=t.charCodeAt(n+1))<56320||i>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function ss(t,e,r,n,a){let i;const o=e.length;for(let l=0;l<o-1;l++){const c=e[l];t.j[c]?i=t.j[c]:(i=new rn(n),i.jr=a.slice(),t.j[c]=i),t=i}return i=new rn(r),i.jr=a.slice(),t.j[e[o-1]]=i,i}function tS(t){const e=[],r=[];let n=0,a="0123456789";for(;n<t.length;){let i=0;for(;a.indexOf(t[n+i])>=0;)i++;if(i>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+i),10);o>0;o--)r.pop();n+=i}else r.push(t[n]),n++}return e}const ud={defaultProtocol:"http",events:null,format:rS,formatHref:rS,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function cv(t,e=null){let r=Object.assign({},ud);t&&(r=Object.assign(r,t instanceof cv?t.o:t));const n=r.ignoreTags,a=[];for(let i=0;i<n.length;i++)a.push(n[i].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=a}cv.prototype={o:ud,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let a=this.o[t];return a&&(typeof a=="object"?(a=r.t in a?a[r.t]:ud[t],typeof a=="function"&&n&&(a=a(e,r))):typeof a=="function"&&n&&(a=a(e,r.t,r)),a)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function rS(t){return t}function ak(t,e){this.t="token",this.v=t,this.tk=e}ak.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"…":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=ud.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),a=t.get("tagName",r,e),i=this.toFormattedString(t),o={},l=t.get("className",r,e),c=t.get("target",r,e),d=t.get("rel",r,e),u=t.getObj("attributes",r,e),f=t.getObj("events",r,e);return o.href=n,l&&(o.class=l),c&&(o.target=c),d&&(o.rel=d),u&&Object.assign(o,u),{tagName:a,attributes:o,content:i,eventListeners:f}}};function Up(t,e){class r extends ak{constructor(a,i){super(a,i),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const nS=Up("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),aS=Up("text"),Jce=Up("nl"),fu=Up("url",{isLink:!0,toHref(t=ud.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==dd&&t[1].t===ms}}),En=t=>new rn(t);function Xce({groups:t}){const e=t.domain.concat([ah,ih,us,oh,lh,ch,dh,uh,Pn,nv,fc,fh,hh,ph,ua,gh,pc,mh]),r=[sh,ms,sv,da,iv,fc,hc,ov,lv,Gf,Kf,dc,uc,Wf,Hf,qf,Yf,Jf,Xf,Qf,Zf,eh,th,rh,nh],n=[ah,sh,ih,oh,lh,ch,dh,uh,Pn,dc,uc,fc,fh,hh,ph,hc,ua,gh,pc,mh],a=En(),i=ae(a,pc);We(i,n,i),We(i,t.domain,i);const o=En(),l=En(),c=En();We(a,t.domain,o),We(a,t.scheme,l),We(a,t.slashscheme,c),We(o,n,i),We(o,t.domain,o);const d=ae(o,us);ae(i,us,d),ae(l,us,d),ae(c,us,d);const u=ae(i,da);We(u,n,i),We(u,t.domain,i);const f=En();We(d,t.domain,f),We(f,t.domain,f);const h=ae(f,da);We(h,t.domain,f);const p=En(nS);We(h,t.tld,p),We(h,t.utld,p),ae(d,dd,p);const m=ae(f,Pn);ae(m,Pn,m),We(m,t.domain,f),We(p,t.domain,f),ae(p,da,h),ae(p,Pn,m);const x=ae(p,ms);We(x,t.numeric,nS);const g=ae(o,Pn),y=ae(o,da);ae(g,Pn,g),We(g,t.domain,o),We(y,n,i),We(y,t.domain,o);const j=En(fu);We(y,t.tld,j),We(y,t.utld,j),We(j,t.domain,o),We(j,n,i),ae(j,da,y),ae(j,Pn,g),ae(j,us,d);const b=ae(j,ms),S=En(fu);We(b,t.numeric,S);const w=En(fu),v=En();We(w,e,w),We(w,r,v),We(v,e,w),We(v,r,v),ae(j,ua,w),ae(S,ua,w);const C=ae(l,ms),A=ae(c,ms),k=ae(A,ua),O=ae(k,ua);We(l,t.domain,o),ae(l,da,y),ae(l,Pn,g),We(c,t.domain,o),ae(c,da,y),ae(c,Pn,g),We(C,t.domain,w),ae(C,ua,w),ae(C,hc,w),We(O,t.domain,w),We(O,e,w),ae(O,ua,w);const $=[[dc,uc],[Hf,Wf],[qf,Yf],[Gf,Kf],[Jf,Xf],[Qf,Zf],[eh,th],[rh,nh]];for(let M=0;M<$.length;M++){const[T,I]=$[M],z=ae(w,T);ae(v,T,z),ae(z,I,w);const U=En(fu);We(z,e,U);const Y=En();We(z,r),We(U,e,U),We(U,r,Y),We(Y,e,U),We(Y,r,Y),ae(U,I,w),ae(Y,I,w)}return ae(a,dd,j),ae(a,av,Jce),{start:a,tokens:rk}}function Qce(t,e,r){let n=r.length,a=0,i=[],o=[];for(;a<n;){let l=t,c=null,d=null,u=0,f=null,h=-1;for(;a<n&&!(c=l.go(r[a].t));)o.push(r[a++]);for(;a<n&&(d=c||l.go(r[a].t));)c=null,l=d,l.accepts()?(h=0,f=l):h>=0&&h++,a++,u++;if(h<0)a-=u,a<n&&(o.push(r[a]),a++);else{o.length>0&&(i.push(Km(aS,e,o)),o=[]),a-=h,u-=h;const p=f.t,m=r.slice(a-u,a);i.push(Km(p,e,m))}}return o.length>0&&i.push(Km(aS,e,o)),i}function Km(t,e,r){const n=r[0].s,a=r[r.length-1].e,i=e.slice(n,a);return new t(i,r)}const Zce=typeof console<"u"&&console&&console.warn||(()=>{}),ede="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Pt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function tde(){return rn.groups={},Pt.scanner=null,Pt.parser=null,Pt.tokenQueue=[],Pt.pluginQueue=[],Pt.customSchemes=[],Pt.initialized=!1,Pt}function sS(t,e=!1){if(Pt.initialized&&Zce(`linkifyjs: already initialized - will not register custom scheme "${t}" ${ede}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Pt.customSchemes.push([t,e])}function rde(){Pt.scanner=Gce(Pt.customSchemes);for(let t=0;t<Pt.tokenQueue.length;t++)Pt.tokenQueue[t][1]({scanner:Pt.scanner});Pt.parser=Xce(Pt.scanner.tokens);for(let t=0;t<Pt.pluginQueue.length;t++)Pt.pluginQueue[t][1]({scanner:Pt.scanner,parser:Pt.parser});return Pt.initialized=!0,Pt}function dv(t){return Pt.initialized||rde(),Qce(Pt.parser.start,t,nk(Pt.scanner.start,t))}dv.scan=nk;function sk(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new cv(r),a=dv(t),i=[];for(let o=0;o<a.length;o++){const l=a[o];l.isLink&&(!e||l.t===e)&&n.check(l)&&i.push(l.toFormattedObject(n))}return i}var uv="[\0-   ᠎ -\u2029 　]",nde=new RegExp(uv),ade=new RegExp(`${uv}$`),sde=new RegExp(uv,"g");function ide(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function ode(t){return new Bt({key:new lr("autolink"),appendTransaction:(e,r,n)=>{const a=e.some(d=>d.docChanged)&&!r.doc.eq(n.doc),i=e.some(d=>d.getMeta("preventAutolink"));if(!a||i)return;const{tr:o}=n,l=SC(r.doc,[...e]);if(PC(l).forEach(({newRange:d})=>{const u=Foe(n.doc,d,p=>p.isTextblock);let f,h;if(u.length>1)f=u[0],h=n.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(u.length){const p=n.doc.textBetween(d.from,d.to," "," ");if(!ade.test(p))return;f=u[0],h=n.doc.textBetween(f.pos,d.to,void 0," ")}if(f&&h){const p=h.split(nde).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],x=f.pos+h.lastIndexOf(m);if(!m)return!1;const g=dv(m).map(y=>y.toObject(t.defaultProtocol));if(!ide(g))return!1;g.filter(y=>y.isLink).map(y=>({...y,from:x+y.start+1,to:x+y.end+1})).filter(y=>n.schema.marks.code?!n.doc.rangeHasMark(y.from,y.to,n.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{Qy(y.from,y.to,n.doc).some(j=>j.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function lde(t){return new Bt({key:new lr("handleClickLink"),props:{handleClick:(e,r,n)=>{var a,i;if(n.button!==0||!e.editable)return!1;let o=null;if(n.target instanceof HTMLAnchorElement)o=n.target;else{let u=n.target;const f=[];for(;u.nodeName!=="DIV";)f.push(u),u=u.parentNode;o=f.find(h=>h.nodeName==="A")}if(!o)return!1;const l=EC(e.state,t.type.name),c=(a=o==null?void 0:o.href)!=null?a:l.href,d=(i=o==null?void 0:o.target)!=null?i:l.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),o&&c?(window.open(c,d),!0):!1}}})}function cde(t){return new Bt({key:new lr("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:a}=t,{state:i}=e,{selection:o}=i,{empty:l}=o;if(l)return!1;let c="";n.content.forEach(u=>{c+=u.textContent});const d=sk(c,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===c);return!c||!d||a!==void 0&&!a(d.href)?!1:t.editor.commands.setMark(t.type,{href:d.href})}}})}function Zs(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const a=typeof n=="string"?n:n.scheme;a&&r.push(a)}),!t||t.replace(sde,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var ik=Vs.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){sS(t);return}sS(t.scheme,t.optionalSlashes)})},onDestroy(){tde()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Zs(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!Zs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Zs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",qt(this.options.HTMLAttributes,t),0]:["a",qt(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r;const n=((r=t.attrs)==null?void 0:r.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!Zs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!Zs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ri({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,a=sk(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!Zs(o,r),protocols:r,defaultProtocol:n}));a.length&&a.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(ode({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:a=>!!Zs(a,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(lde({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(cde({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),iS=ik,dde=Object.defineProperty,ude=(t,e)=>{for(var r in e)dde(t,r,{get:e[r],enumerable:!0})},fde="listItem",oS="textStyle",lS=/^\s*([-+*])\s$/,ok=ln.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",qt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fde,this.editor.getAttributes(oS)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=cl({find:lS,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=cl({find:lS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(oS),editor:this.editor})),[t]}}),lk=ln.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",qt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(a=>a.type==="paragraph"))r=e.parseChildren(t.tokens);else{const a=t.tokens[0];if(a&&a.type==="text"&&a.tokens&&a.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(a.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),l=e.parseChildren(o);r.push(...l)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>rv(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),hde={};ude(hde,{findListItemPos:()=>Ed,getNextListDepth:()=>fv,handleBackspace:()=>n0,handleDelete:()=>a0,hasListBefore:()=>ck,hasListItemAfter:()=>pde,hasListItemBefore:()=>dk,listItemHasSubList:()=>uk,nextListIsDeeper:()=>fk,nextListIsHigher:()=>hk});var Ed=(t,e)=>{const{$from:r}=e.selection,n=er(t,e.schema);let a=null,i=r.depth,o=r.pos,l=null;for(;i>0&&l===null;)a=r.node(i),a.type===n?l=i:(i-=1,o-=1);return l===null?null:{$pos:e.doc.resolve(o),depth:l}},fv=(t,e)=>{const r=Ed(t,e);if(!r)return!1;const[,n]=Joe(e,t,r.$pos.pos+4);return n},ck=(t,e,r)=>{const{$anchor:n}=t.selection,a=Math.max(0,n.pos-2),i=t.doc.resolve(a).node();return!(!i||!r.includes(i.type.name))},dk=(t,e)=>{var r;const{$anchor:n}=e.selection,a=e.doc.resolve(n.pos-2);return!(a.index()===0||((r=a.nodeBefore)==null?void 0:r.type.name)!==t)},uk=(t,e,r)=>{if(!r)return!1;const n=er(t,e.schema);let a=!1;return r.descendants(i=>{i.type===n&&(a=!0)}),a},n0=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Is(t.state,e)&&ck(t.state,e,r)){const{$anchor:l}=t.state.selection,c=t.state.doc.resolve(l.before()-1),d=[];c.node().descendants((h,p)=>{h.type.name===e&&d.push({node:h,pos:p})});const u=d.at(-1);if(!u)return!1;const f=t.state.doc.resolve(c.start()+u.pos+1);return t.chain().cut({from:l.start()-1,to:l.end()+1},f.end()).joinForward().run()}if(!Is(t.state,e)||!ele(t.state))return!1;const n=Ed(e,t.state);if(!n)return!1;const i=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=uk(e,t.state,i);return dk(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},fk=(t,e)=>{const r=fv(t,e),n=Ed(t,e);return!n||!r?!1:r>n.depth},hk=(t,e)=>{const r=fv(t,e),n=Ed(t,e);return!n||!r?!1:r<n.depth},a0=(t,e)=>{if(!Is(t.state,e)||!Zoe(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:a}=r;return!r.empty&&n.sameParent(a)?!1:fk(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():hk(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},pde=(t,e)=>{var r;const{$anchor:n}=e.selection,a=e.doc.resolve(n.pos-n.parentOffset-2);return!(a.index()===a.parent.childCount-1||((r=a.nodeAfter)==null?void 0:r.type.name)!==t)},pk=xt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&a0(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&a0(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&n0(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&n0(t,r,n)&&(e=!0)}),e}}}}),cS=/^(\s*)(\d+)\.\s+(.*)$/,mde=/^\s/;function gde(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r],i=a.match(cS);if(!i)break;const[,o,l,c]=i,d=o.length;let u=c,f=r+1;const h=[a];for(;f<t.length;){const p=t[f];if(p.match(cS))break;if(p.trim()==="")h.push(p),u+=`
`,f+=1;else if(p.match(mde))h.push(p),u+=`
${p.slice(d+2)}`,f+=1;else break}e.push({indent:d,number:parseInt(l,10),content:u.trim(),raw:h.join(`
`)}),n=f,r=f}return[e,n]}function mk(t,e,r){var n;const a=[];let i=0;for(;i<t.length;){const o=t[i];if(o.indent===e){const l=o.content.split(`
`),c=((n=l[0])==null?void 0:n.trim())||"",d=[];c&&d.push({type:"paragraph",raw:c,tokens:r.inlineTokens(c)});const u=l.slice(1).join(`
`).trim();if(u){const p=r.blockTokens(u);d.push(...p)}let f=i+1;const h=[];for(;f<t.length&&t[f].indent>e;)h.push(t[f]),f+=1;if(h.length>0){const p=Math.min(...h.map(x=>x.indent)),m=mk(h,p,r);d.push({type:"list",ordered:!0,start:h[0].number,items:m,raw:h.map(x=>x.raw).join(`
`)})}a.push({type:"list_item",raw:o.raw,tokens:d}),i=f}else i+=1}return a}function xde(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(a=>{if(a.type==="paragraph"||a.type==="list"||a.type==="blockquote"||a.type==="code")n.push(...e.parseChildren([a]));else if(a.type==="text"&&a.tokens){const i=e.parseChildren([a]);n.push({type:"paragraph",content:i})}else{const i=e.parseChildren([a]);i.length>0&&n.push(...i)}}),{type:"listItem",content:n}})}var yde="listItem",dS="textStyle",uS=/^(\d+)\.\s$/,gk=ln.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",qt(this.options.HTMLAttributes,r),0]:["ol",qt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?xde(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const a=t.split(`
`),[i,o]=gde(a);if(i.length===0)return;const l=mk(i,0,r);return l.length===0?void 0:{type:"list",ordered:!0,start:((n=i[0])==null?void 0:n.number)||1,items:l,raw:a.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(yde,this.editor.getAttributes(dS)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=cl({find:uS,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=cl({find:uS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(dS)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),vde=/^\s*(\[([( |x])?\])\s$/,bde=ln.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",qt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const a=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return rv(t,e,a)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const a=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),c=document.createElement("div"),d=u=>{var f,h;l.ariaLabel=((h=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:h.call(f,u,l.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return d(t),i.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",u=>u.preventDefault()),l.addEventListener("change",u=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:f}=u.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const p=r();if(typeof p!="number")return!1;const m=h.doc.nodeAt(p);return h.setNodeMarkup(p,void 0,{...m==null?void 0:m.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,f])=>{a.setAttribute(u,f)}),a.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,i.append(l,o),a.append(i,c),Object.entries(e).forEach(([u,f])=>{a.setAttribute(u,f)}),{dom:a,contentDOM:c,update:u=>u.type!==this.type?!1:(a.dataset.checked=u.attrs.checked,l.checked=u.attrs.checked,d(u),!0)}}},addInputRules(){return[cl({find:vde,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),jde=ln.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",qt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=i=>{const o=Yx(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,c)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:r.inlineTokens(l.mainContent),nestedTokens:c}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(i)},a=Yx(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:r.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:n},r);if(a)return{type:"taskList",raw:a.raw,items:a.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});xt.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(ok.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(lk.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(pk.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(gk.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(bde.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(jde.configure(this.options.taskList)),t}});var wde=ln.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",qt(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];return r.length===1&&r[0].type==="image"?e.parseChildren([r[0]]):e.createNode("paragraph",void 0,e.parseInline(r))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Sde=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Nde=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Ade=Vs.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",qt(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ll({find:Sde,type:this.type})]},addPasteRules(){return[Ri({find:Nde,type:this.type})]}}),Cde=ln.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),xk=Vs.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",qt(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const a=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!a)return;const i=a[2].trim();return{type:"underline",raw:a[0],text:i,tokens:r.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),fS=xk;function kde(t={}){return new Bt({view(e){return new Ode(e,t)}})}class Ode{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(a=>{let i=o=>{this[a](o)};return e.dom.addEventListener(a,i),{name:a,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,a=this.editorView.dom,i=a.getBoundingClientRect(),o=i.width/a.offsetWidth,l=i.height/a.offsetHeight;if(r){let f=e.nodeBefore,h=e.nodeAfter;if(f||h){let p=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(p){let m=p.getBoundingClientRect(),x=f?m.bottom:m.top;f&&h&&(x=(x+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let g=this.width/2*l;n={left:m.left,right:m.right,top:x-g,bottom:x+g}}}}if(!n){let f=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;n={left:f.left-h,right:f.left+h,top:f.top,bottom:f.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let d,u;if(!c||c==document.body&&getComputedStyle(c).position=="static")d=-pageXOffset,u=-pageYOffset;else{let f=c.getBoundingClientRect(),h=f.width/c.offsetWidth,p=f.height/c.offsetHeight;d=f.left-c.scrollLeft*h,u=f.top-c.scrollTop*p}this.element.style.left=(n.left-d)/o+"px",this.element.style.top=(n.top-u)/l+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),a=n&&n.type.spec.disableDropCursor,i=typeof a=="function"?a(this.editorView,r,e):a;if(r&&!i){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=m6(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Wt extends qe{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return Wt.valid(n)?new Wt(n):qe.near(n)}content(){return xe.empty}eq(e){return e instanceof Wt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Wt(e.resolve(r.pos))}getBookmark(){return new hv(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!Ede(e)||!Pde(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let a=r.contentMatchAt(e.index()).defaultType;return a&&a.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&Wt.valid(e))return e;let a=e.pos,i=null;for(let o=e.depth;;o--){let l=e.node(o);if(r>0?e.indexAfter(o)<l.childCount:e.index(o)>0){i=l.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;a+=r;let c=e.doc.resolve(a);if(Wt.valid(c))return c}for(;;){let o=r>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!Te.isSelectable(i)){e=e.doc.resolve(a+i.nodeSize*r),n=!1;continue e}break}i=o,a+=r;let l=e.doc.resolve(a);if(Wt.valid(l))return l}return null}}}Wt.prototype.visible=!1;Wt.findFrom=Wt.findGapCursorFrom;qe.jsonID("gapcursor",Wt);class hv{constructor(e){this.pos=e}map(e){return new hv(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return Wt.valid(r)?new Wt(r):qe.near(r)}}function yk(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Ede(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let a=n.child(r-1);;a=a.lastChild){if(a.childCount==0&&!a.inlineContent||yk(a.type))return!0;if(a.inlineContent)return!1}}return!0}function Pde(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let a=n.child(r);;a=a.firstChild){if(a.childCount==0&&!a.inlineContent||yk(a.type))return!0;if(a.inlineContent)return!1}}return!0}function Tde(){return new Bt({props:{decorations:Rde,createSelectionBetween(t,e,r){return e.pos==r.pos&&Wt.valid(r)?new Wt(r):null},handleClick:Mde,handleKeyDown:Ide,handleDOMEvents:{beforeinput:$de}}})}const Ide=mC({ArrowLeft:hu("horiz",-1),ArrowRight:hu("horiz",1),ArrowUp:hu("vert",-1),ArrowDown:hu("vert",1)});function hu(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,a,i){let o=n.selection,l=e>0?o.$to:o.$from,c=o.empty;if(o instanceof Be){if(!i.endOfTextblock(r)||l.depth==0)return!1;c=!1,l=n.doc.resolve(e>0?l.after():l.before())}let d=Wt.findGapCursorFrom(l,e,c);return d?(a&&a(n.tr.setSelection(new Wt(d))),!0):!1}}function Mde(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!Wt.valid(n))return!1;let a=t.posAtCoords({left:r.clientX,top:r.clientY});return a&&a.inside>-1&&Te.isSelectable(t.state.doc.nodeAt(a.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Wt(n))),!0)}function $de(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Wt))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let a=re.empty;for(let o=n.length-1;o>=0;o--)a=re.from(n[o].createAndFill(null,a));let i=t.state.tr.replace(r.pos,r.pos,new xe(a,0,0));return i.setSelection(Be.near(i.doc.resolve(r.pos+1))),t.dispatch(i),!1}function Rde(t){if(!(t.selection instanceof Wt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",zt.create(t.doc,[Hr.widget(t.selection.head,e,{key:"gapcursor"})])}var xh=200,xr=function(){};xr.prototype.append=function(e){return e.length?(e=xr.from(e),!this.length&&e||e.length<xh&&this.leafAppend(e)||this.length<xh&&e.leafPrepend(this)||this.appendInner(e)):this};xr.prototype.prepend=function(e){return e.length?xr.from(e).append(this):this};xr.prototype.appendInner=function(e){return new Dde(this,e)};xr.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?xr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};xr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};xr.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};xr.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var a=[];return this.forEach(function(i,o){return a.push(e(i,o))},r,n),a};xr.from=function(e){return e instanceof xr?e:e&&e.length?new vk(e):xr.empty};var vk=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(a,i){return a==0&&i==this.length?this:new e(this.values.slice(a,i))},e.prototype.getInner=function(a){return this.values[a]},e.prototype.forEachInner=function(a,i,o,l){for(var c=i;c<o;c++)if(a(this.values[c],l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(a,i,o,l){for(var c=i-1;c>=o;c--)if(a(this.values[c],l+c)===!1)return!1},e.prototype.leafAppend=function(a){if(this.length+a.length<=xh)return new e(this.values.concat(a.flatten()))},e.prototype.leafPrepend=function(a){if(this.length+a.length<=xh)return new e(a.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(xr);xr.empty=new vk([]);var Dde=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,a,i,o){var l=this.left.length;if(a<l&&this.left.forEachInner(n,a,Math.min(i,l),o)===!1||i>l&&this.right.forEachInner(n,Math.max(a-l,0),Math.min(this.length,i)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(n,a,i,o){var l=this.left.length;if(a>l&&this.right.forEachInvertedInner(n,a-l,Math.max(i,l)-l,o+l)===!1||i<l&&this.left.forEachInvertedInner(n,Math.min(a,l),i,o)===!1)return!1},e.prototype.sliceInner=function(n,a){if(n==0&&a==this.length)return this;var i=this.left.length;return a<=i?this.left.slice(n,a):n>=i?this.right.slice(n-i,a-i):this.left.slice(n,i).append(this.right.slice(0,a-i))},e.prototype.leafAppend=function(n){var a=this.right.leafAppend(n);if(a)return new e(this.left,a)},e.prototype.leafPrepend=function(n){var a=this.left.leafPrepend(n);if(a)return new e(a,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(xr);const _de=500;class Qn{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let a,i;r&&(a=this.remapping(n,this.items.length),i=a.maps.length);let o=e.tr,l,c,d=[],u=[];return this.items.forEach((f,h)=>{if(!f.step){a||(a=this.remapping(n,h+1),i=a.maps.length),i--,u.push(f);return}if(a){u.push(new fa(f.map));let p=f.step.map(a.slice(i)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],d.push(new fa(m,void 0,void 0,d.length+u.length))),i--,m&&a.appendMap(m,i)}else o.maybeStep(f.step);if(f.selection)return l=a?f.selection.map(a.slice(i)):f.selection,c=new Qn(this.items.slice(0,n).append(u.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:l}}addTransform(e,r,n,a){let i=[],o=this.eventCount,l=this.items,c=!a&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),h=new fa(e.mapping.maps[u],f,r),p;(p=c&&c.merge(h))&&(h=p,u?i.pop():l=l.slice(0,l.length-1)),i.push(h),r&&(o++,r=void 0),a||(c=h)}let d=o-n.depth;return d>zde&&(l=Lde(l,d),o-=d),new Qn(l.append(i),o)}remapping(e,r){let n=new ad;return this.items.forEach((a,i)=>{let o=a.mirrorOffset!=null&&i-a.mirrorOffset>=e?n.maps.length-a.mirrorOffset:void 0;n.appendMap(a.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new Qn(this.items.append(e.map(r=>new fa(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],a=Math.max(0,this.items.length-r),i=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(h=>{h.selection&&l--},a);let c=r;this.items.forEach(h=>{let p=i.getMirror(--c);if(p==null)return;o=Math.min(o,p);let m=i.maps[p];if(h.step){let x=e.steps[p].invert(e.docs[p]),g=h.selection&&h.selection.map(i.slice(c+1,p));g&&l++,n.push(new fa(m,x,g))}else n.push(new fa(m))},a);let d=[];for(let h=r;h<o;h++)d.push(new fa(i.maps[h]));let u=this.items.slice(0,a).append(d).append(n),f=new Qn(u,l);return f.emptyItemCount()>_de&&(f=f.compress(this.items.length-n.length)),f}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,a=[],i=0;return this.items.forEach((o,l)=>{if(l>=e)a.push(o),o.selection&&i++;else if(o.step){let c=o.step.map(r.slice(n)),d=c&&c.getMap();if(n--,d&&r.appendMap(d,n),c){let u=o.selection&&o.selection.map(r.slice(n));u&&i++;let f=new fa(d.invert(),c,u),h,p=a.length-1;(h=a.length&&a[p].merge(f))?a[p]=h:a.push(f)}}else o.map&&n--},this.items.length,0),new Qn(xr.from(a.reverse()),i)}}Qn.empty=new Qn(xr.empty,0);function Lde(t,e){let r;return t.forEach((n,a)=>{if(n.selection&&e--==0)return r=a,!1}),t.slice(r)}class fa{constructor(e,r,n,a){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=a}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new fa(r.getMap().invert(),r,this.selection)}}}class fs{constructor(e,r,n,a,i){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=a,this.prevComposition=i}}const zde=20;function Fde(t,e,r,n){let a=r.getMeta(Si),i;if(a)return a.historyState;r.getMeta(Vde)&&(t=new fs(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(Si))return o.getMeta(Si).redo?new fs(t.done.addTransform(r,void 0,n,ju(e)),t.undone,hS(r.mapping.maps),t.prevTime,t.prevComposition):new fs(t.done,t.undone.addTransform(r,void 0,n,ju(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=r.getMeta("composition"),c=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(r.time||0)-n.newGroupDelay||!Bde(r,t.prevRanges)),d=o?Jm(t.prevRanges,r.mapping):hS(r.mapping.maps);return new fs(t.done.addTransform(r,c?e.selection.getBookmark():void 0,n,ju(e)),Qn.empty,d,r.time,l??t.prevComposition)}else return(i=r.getMeta("rebased"))?new fs(t.done.rebased(r,i),t.undone.rebased(r,i),Jm(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new fs(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),Jm(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function Bde(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,a)=>{for(let i=0;i<e.length;i+=2)n<=e[i+1]&&a>=e[i]&&(r=!0)}),r}function hS(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,a,i,o)=>e.push(i,o));return e}function Jm(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let a=e.map(t[n],1),i=e.map(t[n+1],-1);a<=i&&r.push(a,i)}return r}function Ude(t,e,r){let n=ju(e),a=Si.get(e).spec.config,i=(r?t.undone:t.done).popEvent(e,n);if(!i)return null;let o=i.selection.resolve(i.transform.doc),l=(r?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),a,n),c=new fs(r?l:i.remaining,r?i.remaining:l,null,0,-1);return i.transform.setSelection(o).setMeta(Si,{redo:r,historyState:c})}let Xm=!1,pS=null;function ju(t){let e=t.plugins;if(pS!=e){Xm=!1,pS=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){Xm=!0;break}}return Xm}const Si=new lr("history"),Vde=new lr("closeHistory");function Hde(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Bt({key:Si,state:{init(){return new fs(Qn.empty,Qn.empty,null,0,-1)},apply(e,r,n){return Fde(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,a=n=="historyUndo"?jk:n=="historyRedo"?wk:null;return!a||!e.editable?!1:(r.preventDefault(),a(e.state,e.dispatch))}}}})}function bk(t,e){return(r,n)=>{let a=Si.getState(r);if(!a||(t?a.undone:a.done).eventCount==0)return!1;if(n){let i=Ude(a,r,t);i&&n(e?i.scrollIntoView():i)}return!0}}const jk=bk(!1,!0),wk=bk(!0,!0);xt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new Bt({key:new lr("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const a=this.options.limit;if(a==null||a===0){t=!0;return}const i=this.storage.characters({node:n.doc});if(i>a){const o=i-a,l=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${a} characters. Content was automatically trimmed.`);const d=n.tr.deleteRange(l,c);return t=!0,d}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const a=this.storage.characters({node:r.doc}),i=this.storage.characters({node:e.doc});if(i<=n||a>n&&i>n&&i<=a)return!0;if(a>n&&i>n&&i>a||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,c=i-n,d=l-c,u=l;return e.deleteRange(d,u),!(this.storage.characters({node:e.doc})>n)}})]}});var Wde=xt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[kde(this.options)]}});xt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Bt({key:new lr("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:a}=e,i=[];if(!r||!n)return zt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((c,d)=>{if(c.isText)return;if(!(a>=d&&a<=d+c.nodeSize-1))return!1;o+=1});let l=0;return t.descendants((c,d)=>{if(c.isText||!(a>=d&&a<=d+c.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";i.push(Hr.node(d,d+c.nodeSize,{class:this.options.className}))}),zt.create(t,i)}}})]}});var qde=xt.create({name:"gapCursor",addProseMirrorPlugins(){return[Tde()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ft(ke(t,"allowGapCursor",r)))!=null?e:null}}});xt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Bt({key:new lr("placeholder"),props:{decorations:({doc:t,selection:e})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,a=[];if(!r)return null;const i=this.editor.isEmpty;return t.descendants((o,l)=>{const c=n>=l&&n<=l+o.nodeSize,d=!o.isLeaf&&Lp(o);if((c||!this.options.showOnlyCurrent)&&d){const u=[this.options.emptyNodeClass];i&&u.push(this.options.emptyEditorClass);const f=Hr.node(l,l+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:c}):this.options.placeholder});a.push(f)}return this.options.includeChildren}),zt.create(t,a)}}})]}});xt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Bt({key:new lr("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||TC(r.selection)||t.view.dragging?null:zt.create(r.doc,[Hr.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function mS({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var Yde=xt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new lr(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,a])=>a).filter(a=>(this.options.notAfter||[]).concat(r).includes(a.name));return[new Bt({key:e,appendTransaction:(a,i,o)=>{const{doc:l,tr:c,schema:d}=o,u=e.getState(o),f=l.content.size,h=d.nodes[r];if(u)return c.insert(f,h.create())},state:{init:(a,i)=>{const o=i.tr.doc.lastChild;return!mS({node:o,types:n})},apply:(a,i)=>{if(!a.docChanged||a.getMeta("__uniqueIDTransaction"))return i;const o=a.doc.lastChild;return!mS({node:o,types:n})}}})]}}),Gde=xt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>jk(t,e),redo:()=>({state:t,dispatch:e})=>wk(t,e)}},addProseMirrorPlugins(){return[Hde(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),Kde=xt.create({name:"starterKit",addExtensions(){var t,e,r,n;const a=[];return this.options.bold!==!1&&a.push(Nce.configure(this.options.bold)),this.options.blockquote!==!1&&a.push(vce.configure(this.options.blockquote)),this.options.bulletList!==!1&&a.push(ok.configure(this.options.bulletList)),this.options.code!==!1&&a.push(kce.configure(this.options.code)),this.options.codeBlock!==!1&&a.push(Pce.configure(this.options.codeBlock)),this.options.document!==!1&&a.push(Tce.configure(this.options.document)),this.options.dropcursor!==!1&&a.push(Wde.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&a.push(qde.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&a.push(Ice.configure(this.options.hardBreak)),this.options.heading!==!1&&a.push(Mce.configure(this.options.heading)),this.options.undoRedo!==!1&&a.push(Gde.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&a.push($ce.configure(this.options.horizontalRule)),this.options.italic!==!1&&a.push(zce.configure(this.options.italic)),this.options.listItem!==!1&&a.push(lk.configure(this.options.listItem)),this.options.listKeymap!==!1&&a.push(pk.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&a.push(ik.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&a.push(gk.configure(this.options.orderedList)),this.options.paragraph!==!1&&a.push(wde.configure(this.options.paragraph)),this.options.strike!==!1&&a.push(Ade.configure(this.options.strike)),this.options.text!==!1&&a.push(Cde.configure(this.options.text)),this.options.underline!==!1&&a.push(xk.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&a.push(Yde.configure((n=this.options)==null?void 0:n.trailingNode)),a}}),gS=Kde,Jde=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Xde=ln.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",qt(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,r,n,a,i,o;const l=(r=(e=t.attrs)==null?void 0:e.src)!=null?r:"",c=(a=(n=t.attrs)==null?void 0:n.alt)!=null?a:"",d=(o=(i=t.attrs)==null?void 0:i.title)!=null?o:"";return d?`![${c}](${l} "${d}")`:`![${c}](${l})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u"||!this.editor.isEditable)return null;const{directions:t,minWidth:e,minHeight:r,alwaysPreserveAspectRatio:n}=this.options.resize;return({node:a,getPos:i,HTMLAttributes:o})=>{const l=document.createElement("img");Object.entries(o).forEach(([u,f])=>{if(f!=null)switch(u){case"width":case"height":break;default:l.setAttribute(u,f);break}}),l.src=o.src;const c=new Lle({element:l,node:a,getPos:i,onResize:(u,f)=>{l.style.width=`${u}px`,l.style.height=`${f}px`},onCommit:(u,f)=>{const h=i();h!==void 0&&this.editor.chain().setNodeSelection(h).updateAttributes(this.name,{width:u,height:f}).run()},onUpdate:(u,f,h)=>u.type===a.type,options:{directions:t,min:{width:e,height:r},preserveAspectRatio:n===!0}}),d=c.dom;return d.style.visibility="hidden",d.style.pointerEvents="none",l.onload=()=>{d.style.visibility="",d.style.pointerEvents=""},c}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[qC({find:Jde,type:this.type,getAttributes:t=>{const[,,e,r,n]=t;return{src:r,alt:e,title:n}}})]}}),xS=Xde,Qde=xt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(r=>e.updateAttributes(r,{textAlign:t})).some(r=>r):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:t=>({editor:e,commands:r})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?r.unsetTextAlign():r.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),yS=Qde,Zde=20,Sk=(t,e=0)=>{const r=[];return!t.children.length||e>Zde||Array.from(t.children).forEach(n=>{n.tagName==="SPAN"?r.push(n):n.children.length&&r.push(...Sk(n,e+1))}),r},eue=t=>{if(!t.children.length)return;const e=Sk(t);e&&e.forEach(r=>{var n,a;const i=r.getAttribute("style"),o=(a=(n=r.parentElement)==null?void 0:n.closest("span"))==null?void 0:a.getAttribute("style");r.setAttribute("style",`${o};${i}`)})},s0=Vs.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&eue(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(r,n)=>{if(r.isTextblock)return!0;r.marks.filter(a=>a.type===this.type).some(a=>Object.values(a.attrs).some(i=>!!i))||t.removeMark(n,n+r.nodeSize,this.type)}),!0}}}}),tue=xt.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const r=t.getAttribute("style");if(r){const n=r.split(";").map(a=>a.trim()).filter(Boolean);for(let a=n.length-1;a>=0;a-=1){const i=n[a].split(":");if(i.length>=2){const o=i[0].trim().toLowerCase(),l=i.slice(1).join(":").trim();if(o==="background-color")return l.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),i0=xt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const r=t.getAttribute("style");if(r){const n=r.split(";").map(a=>a.trim()).filter(Boolean);for(let a=n.length-1;a>=0;a-=1){const i=n[a].split(":");if(i.length>=2){const o=i[0].trim().toLowerCase(),l=i.slice(1).join(":").trim();if(o==="color")return l.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),rue=xt.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),nue=xt.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),aue=xt.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});xt.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(tue.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(i0.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(rue.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(nue.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(aue.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(s0.configure(this.options.textStyle)),t}});const{TextArea:vS}=F,{Option:bS}=B,jS=()=>{const{t,language:e}=Se(),r=st(),{id:n}=Aa(),[a]=E.useForm(),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[d,u]=N.useState(""),[f,h]=N.useState(""),[p,m]=N.useState(null),[x,g]=N.useState([]),[y,j]=N.useState(!1),b=!!n;N.useEffect(()=>{b&&S()},[n]);const S=async()=>{try{o(!0);const I=(await pr.getArticleById(n)).article;if(I&&(a.setFieldsValue({title:I.title,titleAr:I.titleAr,excerpt:I.excerpt,excerptAr:I.excerptAr,category:I.category,status:I.status,tags:I.tags?typeof I.tags=="string"?JSON.parse(I.tags).join(", "):I.tags.join(", "):""}),u(I.content||""),h(I.contentAr||""),m(I.featuredImage),I.images)){const z=typeof I.images=="string"?JSON.parse(I.images):I.images;g(z||[])}}catch{R.error(e==="ar"?"فشل تحميل المقال":"Failed to load article")}finally{o(!1)}},w=async(T,I=!1)=>{try{j(!0);const z=new FormData;z.append("file",T),z.append("ownerType","ARTICLE"),b&&z.append("ownerId",n);const U=Ni("accessToken"),Y=await fetch("http://localhost:5000/api/files/upload",{method:"POST",headers:{Authorization:`Bearer ${U}`},body:z});if(!Y.ok)throw new Error("Upload failed");const te=(await Y.json()).file.fileUrl;return I?(m(te),a.setFieldValue("featuredImage",te)):g(q=>[...q,te]),R.success(e==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully"),te}catch{return R.error(e==="ar"?"فشل رفع الصورة":"Failed to upload image"),null}finally{j(!1)}},v=T=>{g(I=>I.filter((z,U)=>U!==T))},C=()=>{m(null),a.setFieldValue("featuredImage",null)},A=Q2({extensions:[gS.configure({link:!1,underline:!1}),xS.configure({inline:!0,allowBase64:!0}),iS.configure({openOnClick:!1}),yS.configure({types:["heading","paragraph"]}),fS,s0,i0],content:d||"",onUpdate:({editor:T})=>{const I=T.getHTML();I!==d&&u(I)},editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none min-h-[400px] p-4","data-placeholder":e==="ar"?"اكتب محتوى المقال بالإنجليزية...":"Write article content in English..."}}}),k=Q2({extensions:[gS.configure({link:!1,underline:!1}),xS.configure({inline:!0,allowBase64:!0}),iS.configure({openOnClick:!1}),yS.configure({types:["heading","paragraph"],defaultAlignment:"right"}),fS,s0,i0],content:f||"",onUpdate:({editor:T})=>{const I=T.getHTML();I!==f&&h(I)},editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none min-h-[400px] p-4",dir:"rtl","data-placeholder":e==="ar"?"اكتب محتوى المقال بالعربية...":"Write article content in Arabic..."}}});N.useEffect(()=>{if(A&&d!==void 0){const T=A.getHTML();d!==T&&d!=="<p></p>"&&A.commands.setContent(d||"",!1)}},[d,A]),N.useEffect(()=>{if(k&&f!==void 0){const T=k.getHTML();f!==T&&f!=="<p></p>"&&k.commands.setContent(f||"",!1)}},[f,k]);const O=async T=>{try{c(!0);const I=T.tags?T.tags.split(",").map(Z=>Z.trim()).filter(Boolean):[],z=(A==null?void 0:A.getHTML())||d||"",U=(k==null?void 0:k.getHTML())||f||"",Y={...T,content:z,contentAr:U,featuredImage:p||null,images:x.length>0?JSON.stringify(x):null,tags:I};if((Y.images==="[]"||Y.images==="")&&(Y.images=null),console.log("Saving article with data:",{...Y,content:z.substring(0,50)+"..."}),b){const Z=await pr.updateArticle(n,Y);console.log("Article updated:",Z),R.success(e==="ar"?"تم تحديث المقال بنجاح":"Article updated successfully"),setTimeout(()=>{r("/admin/articles")},1e3)}else{const Z=await pr.createArticle(Y);console.log("Article created:",Z),R.success(e==="ar"?"تم إنشاء المقال بنجاح":"Article created successfully"),r("/admin/articles")}}catch(I){console.error("Error saving article:",I),R.error(I.message||(e==="ar"?"فشل حفظ المقال":"Failed to save article"))}finally{c(!1)}},$=({editor:T,isArabic:I=!1})=>T?s.jsxs("div",{className:"border-b border-gray-200 p-2 flex flex-wrap gap-2 bg-gray-50 rounded-t-lg",children:[s.jsxs("div",{className:"flex gap-1 border-r pr-2 mr-2",children:[s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleBold().run(),className:`px-2 py-1 rounded ${T.isActive("bold")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Bold",children:s.jsx("strong",{children:"B"})}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleItalic().run(),className:`px-2 py-1 rounded ${T.isActive("italic")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Italic",children:s.jsx("em",{children:"I"})}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleUnderline().run(),className:`px-2 py-1 rounded ${T.isActive("underline")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Underline",children:s.jsx("u",{children:"U"})}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleStrike().run(),className:`px-2 py-1 rounded ${T.isActive("strike")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Strike",children:s.jsx("s",{children:"S"})})]}),s.jsxs("div",{className:"flex gap-1 border-r pr-2 mr-2",children:[s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleHeading({level:1}).run(),className:`px-2 py-1 rounded ${T.isActive("heading",{level:1})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Heading 1",children:"H1"}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleHeading({level:2}).run(),className:`px-2 py-1 rounded ${T.isActive("heading",{level:2})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Heading 2",children:"H2"}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleHeading({level:3}).run(),className:`px-2 py-1 rounded ${T.isActive("heading",{level:3})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Heading 3",children:"H3"})]}),s.jsxs("div",{className:"flex gap-1 border-r pr-2 mr-2",children:[s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleBulletList().run(),className:`px-2 py-1 rounded ${T.isActive("bulletList")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Bullet List",children:"•"}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleOrderedList().run(),className:`px-2 py-1 rounded ${T.isActive("orderedList")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Ordered List",children:"1."}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleBlockquote().run(),className:`px-2 py-1 rounded ${T.isActive("blockquote")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Quote",children:'"'}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleCodeBlock().run(),className:`px-2 py-1 rounded ${T.isActive("codeBlock")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Code Block",children:"</>"})]}),s.jsxs("div",{className:"flex gap-1 border-r pr-2 mr-2",children:[s.jsx("button",{type:"button",onClick:()=>T.chain().focus().setTextAlign("left").run(),className:`px-2 py-1 rounded ${T.isActive({textAlign:"left"})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Align Left",children:"⬅"}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().setTextAlign("center").run(),className:`px-2 py-1 rounded ${T.isActive({textAlign:"center"})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Align Center",children:"⬌"}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().setTextAlign("right").run(),className:`px-2 py-1 rounded ${T.isActive({textAlign:"right"})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Align Right",children:"➡"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{type:"button",onClick:()=>{const z=document.createElement("input");z.setAttribute("type","file"),z.setAttribute("accept","image/*"),z.click(),z.onchange=async()=>{const U=z.files[0];if(U){const Y=await w(U,!1);Y&&T.chain().focus().setImage({src:Y}).run()}}},className:"px-2 py-1 rounded bg-white hover:bg-gray-100",title:"Insert Image",children:"🖼"}),s.jsx("button",{type:"button",onClick:()=>{const z=window.prompt("Enter URL:");z&&T.chain().focus().setLink({href:z}).run()},className:`px-2 py-1 rounded ${T.isActive("link")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Insert Link",children:"🔗"}),s.jsx("button",{type:"button",onClick:()=>T.chain().focus().unsetLink().run(),className:"px-2 py-1 rounded bg-white hover:bg-gray-100",title:"Remove Link",disabled:!T.isActive("link"),children:"🔗❌"})]})]}):null,M=[{key:"en",label:e==="ar"?"المحتوى الإنجليزي":"English Content",children:s.jsx("div",{className:"editor-tab",children:s.jsx(E.Item,{label:e==="ar"?"المحتوى (إنجليزي)":"Content (English)",children:s.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[s.jsx($,{editor:A}),s.jsx(X2,{editor:A})]})})})},{key:"ar",label:e==="ar"?"المحتوى العربي":"Arabic Content",children:s.jsx("div",{className:"editor-tab",children:s.jsx(E.Item,{label:e==="ar"?"المحتوى (عربي)":"Content (Arabic)",children:s.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[s.jsx($,{editor:k,isArabic:!0}),s.jsx(X2,{editor:k})]})})})}];return s.jsxs("div",{className:"article-editor-page",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx(P,{icon:s.jsx(Di,{}),onClick:()=>r("/admin/articles"),className:"mb-4",children:e==="ar"?"العودة إلى القائمة":"Back to List"}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:b?e==="ar"?"تعديل المقال":"Edit Article":e==="ar"?"إضافة مقال جديد":"Add New Article"})]}),s.jsxs(E,{form:a,layout:"vertical",onFinish:O,initialValues:{status:"DRAFT"},children:[s.jsxs(le,{gutter:24,children:[s.jsx(_,{xs:24,lg:16,children:s.jsxs(V,{className:"mb-6",children:[s.jsxs(le,{gutter:16,children:[s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0,message:e==="ar"?"يرجى إدخال العنوان":"Please enter title"}],children:s.jsx(F,{size:"large",placeholder:e==="ar"?"عنوان المقال بالإنجليزية":"Article title in English"})})}),s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:s.jsx(F,{size:"large",placeholder:e==="ar"?"عنوان المقال بالعربية":"Article title in Arabic"})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"excerpt",label:e==="ar"?"الملخص (إنجليزي)":"Excerpt (English)",children:s.jsx(vS,{rows:3,placeholder:e==="ar"?"ملخص المقال بالإنجليزية":"Article excerpt in English"})})}),s.jsx(_,{span:12,children:s.jsx(E.Item,{name:"excerptAr",label:e==="ar"?"الملخص (عربي)":"Excerpt (Arabic)",children:s.jsx(vS,{rows:3,placeholder:e==="ar"?"ملخص المقال بالعربية":"Article excerpt in Arabic"})})})]}),s.jsx(Rt,{children:e==="ar"?"محرر المحتوى":"Content Editor"}),s.jsx($s,{items:M,defaultActiveKey:e==="ar"?"ar":"en",destroyOnHidden:!1})]})}),s.jsxs(_,{xs:24,lg:8,children:[s.jsxs(V,{title:e==="ar"?"الإعدادات":"Settings",className:"mb-6",children:[s.jsx(E.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:s.jsxs(B,{size:"large",children:[s.jsx(bS,{value:"DRAFT",children:e==="ar"?"مسودة":"Draft"}),s.jsx(bS,{value:"PUBLISHED",children:e==="ar"?"منشور":"Published"})]})}),s.jsx(E.Item,{name:"category",label:e==="ar"?"الفئة":"Category",children:s.jsx(F,{placeholder:e==="ar"?"الفئة":"Category"})}),s.jsx(E.Item,{name:"tags",label:e==="ar"?"العلامات":"Tags",children:s.jsx(F,{placeholder:e==="ar"?"علامات مفصولة بفواصل":"Tags separated by commas"})})]}),s.jsx(V,{title:e==="ar"?"الصورة الرئيسية":"Featured Image",className:"mb-6",children:p?s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Hn,{src:p,alt:"Featured",className:"w-full rounded-lg",preview:!1}),s.jsx(P,{danger:!0,icon:s.jsx(Vn,{}),onClick:C,className:"mt-2 w-full",children:e==="ar"?"حذف الصورة":"Remove Image"})]}):s.jsx(Yt,{accept:"image/*",showUploadList:!1,beforeUpload:T=>(w(T,!0),!1),disabled:y,children:s.jsx(P,{icon:s.jsx(en,{}),loading:y,className:"w-full",size:"large",children:e==="ar"?"رفع صورة رئيسية":"Upload Featured Image"})})}),s.jsx(V,{title:e==="ar"?"معرض الصور":"Image Gallery",children:s.jsxs("div",{className:"space-y-4",children:[x.map((T,I)=>s.jsxs("div",{className:"relative",children:[s.jsx(Hn,{src:T,alt:`Gallery ${I+1}`,className:"w-full rounded-lg mb-2",preview:!1}),s.jsx(P,{danger:!0,size:"small",icon:s.jsx(Vn,{}),onClick:()=>v(I),className:"w-full",children:e==="ar"?"حذف":"Remove"})]},I)),s.jsx(Yt,{accept:"image/*",showUploadList:!1,beforeUpload:T=>(w(T,!1),!1),disabled:y,children:s.jsx(P,{icon:s.jsx($r,{}),loading:y,className:"w-full",block:!0,children:e==="ar"?"إضافة صورة":"Add Image"})})]})})]})]}),s.jsx(V,{className:"mt-6",children:s.jsxs(he,{children:[s.jsx(P,{type:"primary",icon:s.jsx(Ra,{}),htmlType:"submit",loading:l,size:"large",className:"bg-olive-green-600",children:e==="ar"?"حفظ المقال":"Save Article"}),s.jsx(P,{icon:s.jsx(mr,{}),onClick:()=>{R.info(e==="ar"?"معاينة المقال":"Preview article")},size:"large",children:e==="ar"?"معاينة":"Preview"})]})})]})]})},{TextArea:sue}=F,{Text:to}=fd,wS=()=>{const{language:t}=Se(),{user:e}=yr(),{sessionId:r}=Aa();st();const[n,a]=N.useState([]),[i,o]=N.useState(null),[l,c]=N.useState([]),[d,u]=N.useState(""),[f,h]=N.useState(!1),[p,m]=N.useState(!1),[x,g]=N.useState(null),[y,j]=N.useState(!1),[b,S]=N.useState([]),[w,v]=N.useState(!1),[C,A]=N.useState(!1),[k,O]=N.useState([]),[$,M]=N.useState(!1),T=N.useRef(null);N.useRef(null);const{isRecording:I,recordingTime:z,audioBlob:U,audioUrl:Y,startRecording:Z,stopRecording:te,cancelRecording:q,formatTime:ne}=x0();N.useEffect(()=>{((e==null?void 0:e.role)==="ADMIN"||(e==null?void 0:e.role)==="SUPER_ADMIN")&&(de(),H())},[e]),N.useEffect(()=>{if(r&&n.length>0){const L=n.find(oe=>oe.sessionId===r);L&&(o(L),ie(L.sessionId))}},[r,n]);const H=async()=>{try{v(!0);const L=await Ke.getAllUsers();S(L.users||[])}catch(L){console.error("Error fetching users:",L)}finally{v(!1)}};N.useEffect(()=>{if(i){ie(i.sessionId);const L=setInterval(()=>{ie(i.sessionId)},5e3);return()=>clearInterval(L)}},[i]),N.useEffect(()=>{Q()},[l]);const Q=()=>{var L;(L=T.current)==null||L.scrollIntoView({behavior:"smooth"})},de=async()=>{try{h(!0);const L=await $t.getConversations();a(L.conversations||[])}catch(L){console.error("Error fetching conversations:",L),R.error(L.message||(t==="ar"?"فشل تحميل المحادثات":"Failed to load conversations"))}finally{h(!1)}},ie=async L=>{if(L)try{const oe=await $t.getMessages(L);if(c(oe.messages||[]),oe.messages&&oe.messages.length>0)try{await $t.markAsRead(L)}catch(pe){console.error("Error marking messages as read:",pe)}}catch(oe){console.error("Error fetching messages:",oe),R.error(oe.message||(t==="ar"?"فشل تحميل الرسائل":"Failed to load messages"))}},Re=async L=>{var oe,pe;try{h(!0);const Ge=await Ke.createDirectSession(L,"chat"),ut={id:Ge.session.id,sessionId:Ge.session.id,bookingId:null,name:((oe=b.find(it=>it.id===L))==null?void 0:oe.email)||"User",clientName:null,consultantName:null,clientId:L,consultantUserId:null,avatar:(pe=b.find(it=>it.id===L))==null?void 0:pe.avatar,lastMessage:"",lastMessageTime:new Date,status:"IN_PROGRESS",unreadCount:0,isDirect:!0};o(ut),A(!1),de(),R.success(t==="ar"?"تم بدء المحادثة":"Conversation started")}catch(Ge){console.error("Error starting conversation:",Ge),R.error(Ge.message||(t==="ar"?"فشل بدء المحادثة":"Failed to start conversation"))}finally{h(!1)}},Ae=async L=>{try{const oe=new FormData;oe.append("file",L),oe.append("ownerType","MESSAGE"),oe.append("ownerId",(i==null?void 0:i.sessionId)||"");const pe=await ra.uploadFile(oe),Ge=[...k,pe.file.fileUrl];O(Ge),R.success(t==="ar"?"تم رفع الملف":"File uploaded")}catch(oe){console.error("Error uploading file:",oe),R.error(oe.message||(t==="ar"?"فشل رفع الملف":"Failed to upload file"))}return!1},je=async()=>{I?te():await Z()},X=async()=>{if(!(!U||!i))try{m(!0);const L=new File([U],`voice-${Date.now()}.webm`,{type:"audio/webm"}),oe=new FormData;oe.append("file",L),oe.append("ownerType","MESSAGE"),oe.append("ownerId",i.sessionId);const Ge=(await ra.uploadFile(oe)).file.fileUrl;let ut=null;const it=x||(e==null?void 0:e.id);(i.isDirect||!i.bookingId)&&(i.clientId&&i.clientId!==it?ut=i.clientId:i.consultantUserId&&i.consultantUserId!==it&&(ut=i.consultantUserId)),await $t.sendMessageAsAdmin(i.sessionId,{content:t==="ar"?"رسالة صوتية":"Voice message",messageType:"audio",attachments:[Ge],senderId:it,...ut&&{receiverId:ut}}),q(),await ie(i.sessionId),R.success(t==="ar"?"تم إرسال الرسالة الصوتية":"Voice message sent")}catch(L){console.error("Error sending voice message:",L),R.error(L.message||(t==="ar"?"فشل إرسال الرسالة الصوتية":"Failed to send voice message"))}finally{m(!1)}},ye=async()=>{if(!(!d.trim()&&k.length===0||!i))try{m(!0);let L="text";if(k.length>0){const Ge=k.some(wt=>/\.(jpg|jpeg|png|gif|webp)$/i.test(wt)),ut=k.some(wt=>/\.(mp3|wav|ogg|m4a|webm)$/i.test(wt)),it=k.some(wt=>/\.(mp4|webm|ogg)$/i.test(wt));Ge?L="image":ut?L="audio":it?L="video":L="file"}const oe=x||(e==null?void 0:e.id);let pe=null;(i.isDirect||!i.bookingId)&&(i.clientId&&i.clientId!==oe?pe=i.clientId:i.consultantUserId&&i.consultantUserId!==oe&&(pe=i.consultantUserId)),await $t.sendMessageAsAdmin(i.sessionId,{content:d||(k.length>0?"📎 ملف مرفق":""),messageType:L,attachments:k.length>0?k:[],senderId:oe,...pe&&{receiverId:pe}}),u(""),O([]),await ie(i.sessionId),R.success(t==="ar"?"تم إرسال الرسالة":"Message sent")}catch(L){console.error("Error sending message:",L),R.error(L.message||(t==="ar"?"فشل إرسال الرسالة":"Failed to send message"))}finally{m(!1)}},Ne=async L=>{try{await Ke.deleteSession(L),R.success(t==="ar"?"تم حذف المحادثة":"Session deleted"),(i==null?void 0:i.sessionId)===L&&(o(null),c([])),de()}catch(oe){console.error("Error deleting session:",oe),R.error(oe.message||(t==="ar"?"فشل حذف المحادثة":"Failed to delete session"))}},ee=async L=>{try{await Ke.stopSession(L),R.success(t==="ar"?"تم إيقاف المحادثة":"Session stopped"),de(),(i==null?void 0:i.sessionId)===L&&ie(L)}catch(oe){console.error("Error stopping session:",oe),R.error(oe.message||(t==="ar"?"فشل إيقاف المحادثة":"Failed to stop session"))}},Qe=L=>L.clientName&&L.consultantName?`${L.clientName} ↔ ${L.consultantName}`:L.name||(t==="ar"?"محادثة":"Conversation");return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex h-[calc(100vh-64px)] dashboard-bg relative",style:{margin:"-12px -12px 0 -12px",width:"calc(100% + 24px)"},children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/20 to-turquoise-100/20 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/20 to-olive-green-100/20 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"w-1/3 min-w-[300px] max-w-[400px] glass-card border-r border-gray-200/50 flex flex-col shadow-professional-lg relative z-10",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200/50 backdrop-blur-sm flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gt,{className:"text-olive-green-600"}),s.jsx("span",{className:"font-semibold text-gray-900",children:t==="ar"?"المحادثات":"Conversations"})]}),s.jsxs(he,{children:[s.jsx(P,{type:"text",size:"small",icon:s.jsx(Ee,{}),onClick:()=>A(!0),className:"text-gray-600 hover:text-gray-900",children:t==="ar"?"جديد":"New"}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Gt,{}),onClick:()=>j(!0),className:"text-gray-600 hover:text-gray-900",children:t==="ar"?"إرسال كـ":"Send As"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:f&&n.length===0?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(et,{size:"small"})}):n.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[s.jsx(Gt,{className:"text-4xl text-gray-300 mb-4"}),s.jsx(to,{type:"secondary",children:t==="ar"?"لا توجد محادثات":"No conversations"})]}):s.jsx(dt,{className:"px-0",dataSource:n,renderItem:L=>{const oe=(i==null?void 0:i.sessionId)===L.sessionId;return s.jsxs(dt.Item,{className:`cursor-pointer px-4 py-3 border-b border-gray-100  ${oe?"bg-olive-green-50 border-l-4 border-l-olive-green-600":"hover:bg-gray-50"}`,onClick:()=>{o(L),ie(L.sessionId)},children:[s.jsx(dt.Item.Meta,{avatar:s.jsx(Ga,{count:L.unreadCount>0?L.unreadCount:0,size:"small",offset:[-5,5],showZero:!1,children:s.jsx(ot,{icon:s.jsx(Ee,{}),size:48,className:"shadow-sm"})}),title:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:`font-semibold text-sm ${oe?"text-olive-green-700":"text-gray-900"}`,children:Qe(L)}),L.status&&s.jsx(ce,{color:L.status==="ACTIVE"||L.status==="IN_PROGRESS"?"green":L.status==="COMPLETED"?"blue":"default",size:"small",className:"text-xs",children:L.status})]}),description:s.jsxs("div",{className:"mt-1",children:[s.jsx("p",{className:"text-xs text-gray-600 truncate mb-1",children:L.lastMessage||(t==="ar"?"لا توجد رسائل":"No messages")}),s.jsx("p",{className:"text-xs text-gray-400",children:L.lastMessageTime?fe(L.lastMessageTime).fromNow():""})]})}),s.jsxs(he,{className:"ml-2",children:[s.jsx(Os,{title:t==="ar"?"إيقاف المحادثة؟":"Stop session?",onConfirm:()=>ee(L.sessionId),okText:t==="ar"?"نعم":"Yes",cancelText:t==="ar"?"لا":"No",children:s.jsx(P,{type:"text",icon:s.jsx(ko,{}),danger:!0,size:"small",onClick:pe=>pe.stopPropagation()})}),s.jsx(Os,{title:t==="ar"?"حذف المحادثة؟":"Delete session?",description:t==="ar"?"هل أنت متأكد من حذف هذه المحادثة؟":"Are you sure you want to delete this conversation?",onConfirm:()=>Ne(L.sessionId),okText:t==="ar"?"نعم":"Yes",cancelText:t==="ar"?"لا":"No",okButtonProps:{danger:!0},children:s.jsx(P,{type:"text",icon:s.jsx(Vn,{}),danger:!0,size:"small",onClick:pe=>pe.stopPropagation()})})]})]})}})})]}),s.jsx("div",{className:"flex-1 flex flex-col glass-card overflow-hidden shadow-professional-lg relative z-10",children:i?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"border-b border-gray-200/50 px-4 py-3 flex items-center justify-between shadow-professional z-10 sticky top-0 flex-shrink-0 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(ot,{icon:s.jsx(Ee,{}),size:40,className:"flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-base font-semibold text-gray-900 truncate",children:Qe(i)}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:(i==null?void 0:i.status)==="ACTIVE"||(i==null?void 0:i.status)==="IN_PROGRESS"?t==="ar"?"نشط":"Active":(i==null?void 0:i.status)==="STOPPED"?t==="ar"?"متوقف":"Stopped":(i==null?void 0:i.status)==="COMPLETED"?t==="ar"?"مكتمل":"Completed":t==="ar"?"مجدول":"Scheduled"})]})]}),s.jsxs(he,{className:"flex-shrink-0",children:[x&&s.jsx(ce,{color:"orange",className:"text-xs",children:t==="ar"?"إرسال كـ مستخدم آخر":"Sending as user"}),s.jsx(P,{type:"text",icon:s.jsx(Gt,{}),className:"text-gray-600 hover:text-gray-900",onClick:()=>j(!0),title:t==="ar"?"إرسال كـ":"Send As"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 min-h-0",style:{scrollBehavior:"smooth",backgroundImage:"radial-gradient(circle, rgba(122, 140, 102, 0.1) 1px, transparent 1px)",backgroundSize:"20px 20px"},children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-3",children:[f&&l.length===0?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(et,{size:"large"})}):l.length===0?s.jsxs("div",{className:"text-center text-gray-400 py-12",children:[s.jsx("div",{className:"text-4xl mb-2",children:"💬"}),s.jsx("p",{children:t==="ar"?"لا توجد رسائل بعد":"No messages yet"})]}):l.map((L,oe)=>{var _t,St;const pe=L.senderId===(x||(e==null?void 0:e.id)),Ge=L.attachments?typeof L.attachments=="string"?JSON.parse(L.attachments):L.attachments:[],ut=oe>0?l[oe-1]:null,it=!ut||ut.senderId!==L.senderId,wt=!ut||fe(L.createdAt).diff(fe(ut.createdAt),"minute")>5;return s.jsxs("div",{className:`flex ${pe?"justify-end":"justify-start"} items-end gap-2 ${wt?"mt-4":""}`,children:[!pe&&s.jsx(ot,{src:(_t=L.sender)==null?void 0:_t.avatar,icon:s.jsx(Ee,{}),size:32,className:"flex-shrink-0"}),s.jsxs("div",{className:`flex flex-col ${pe?"items-end":"items-start"} max-w-[70%] md:max-w-[60%]`,children:[wt&&s.jsx("div",{className:"text-center w-full mb-2",children:s.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:fe(L.createdAt).format("MMM DD, YYYY HH:mm")})}),!pe&&it&&s.jsx(to,{type:"secondary",className:"text-xs mb-1 px-1",children:((St=L.sender)==null?void 0:St.email)||"Unknown"}),s.jsxs("div",{className:`rounded-2xl px-4 py-2 ${pe?"bg-[#dcf8c6] text-gray-900 rounded-tr-sm":"bg-white text-gray-900 rounded-tl-sm shadow-sm"}`,children:[Ge.length>0&&s.jsx("div",{className:"mb-2 space-y-2",children:Ge.map((Xe,Sn)=>{const Ar=Xe.startsWith("data:image/")||Xe.startsWith("data:video/")||Xe.startsWith("data:audio/"),Cl=L.messageType==="image"||/\.(jpg|jpeg|png|gif|webp)$/i.test(Xe)||Ar&&Xe.startsWith("data:image/"),ns=L.messageType==="audio"||/\.(mp3|wav|ogg|m4a|webm)$/i.test(Xe)||Ar&&Xe.startsWith("data:audio/"),Hs=L.messageType==="video"||/\.(mp4|webm)$/i.test(Xe)&&L.messageType!=="audio"||Ar&&Xe.startsWith("data:video/");if(Cl)return s.jsx("div",{className:"image-attachment mb-2 -mx-2",children:Ar?s.jsx("img",{src:Xe,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},onError:cn=>{cn.target.style.display="none"}}):s.jsx(Hn,{src:Xe.startsWith("http")?Xe:Xe.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Xe}`:Xe.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Xe}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Xe.split("/").pop()}`,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},preview:{mask:t==="ar"?"معاينة":"Preview"},onError:cn=>{console.error("Image failed to load:",Xe),cn.target.style.display="none"}},Sn)},Sn);if(ns){const cn=Xe.startsWith("http")?Xe:Xe.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Xe}`:Xe.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${Xe}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${Xe.split("/").pop()}`;return s.jsx("div",{className:"audio-attachment",children:s.jsx(y0,{src:cn,isOwnMessage:pe,language:t})},Sn)}else return Hs?s.jsx("div",{className:"video-attachment",children:s.jsx("video",{controls:!0,src:Xe,className:"w-full max-w-md rounded"})},Sn):s.jsxs("div",{className:`file-attachment flex items-center gap-2 p-2 rounded ${pe?"bg-white/50":"bg-gray-100"}`,children:[s.jsx(wo,{className:pe?"text-gray-700":"text-blue-600"}),s.jsx("a",{href:Xe,download:!0,target:"_blank",rel:"noopener noreferrer",className:`text-sm ${pe?"text-gray-700 hover:text-gray-900":"text-blue-600 hover:text-blue-800"}`,children:Xe.split("/").pop()})]},Sn)})}),L.content&&L.content.trim()&&!(L.messageType==="image"&&Ge.length>0&&!L.content.includes("📎"))&&s.jsx("p",{className:`text-sm ${Ge.length>0?"mt-2":""} whitespace-pre-wrap break-words`,children:L.content}),s.jsx("span",{className:`text-xs mt-1 ${pe?"text-gray-600":"text-gray-500"} self-end`,children:fe(L.createdAt).format("HH:mm")})]})]}),pe&&s.jsx(ot,{src:e==null?void 0:e.avatar,icon:s.jsx(Ee,{}),size:32,className:"flex-shrink-0"})]},L.id)}),s.jsx("div",{ref:T})]})}),k.length>0&&s.jsx("div",{className:"mb-3 pb-3 border-b border-gray-200 px-4",children:s.jsx("div",{className:"flex flex-wrap gap-3",children:k.map((L,oe)=>{const pe=/\.(jpg|jpeg|png|gif|webp)$/i.test(L),Ge=/\.(mp4|webm|ogg)$/i.test(L),ut=/\.(mp3|wav|ogg|m4a|webm)$/i.test(L),it=L.split("/").pop(),wt=L.startsWith("http")?L:L.startsWith("/uploads")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${L}`:L.startsWith("/")?`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}${L}`:`${"http://localhost:5000/api".replace("/api","")||"http://localhost:5000"}/uploads/MESSAGE/${L.split("/").pop()}`;return s.jsx("div",{className:"relative group",children:pe?s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm",children:[s.jsx(Hn,{src:wt,alt:it,width:200,height:200,className:"object-cover",preview:!1,onError:_t=>{console.error("Image failed to load:",wt),_t.target.style.display="none"}}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Tr,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>O(k.filter((_t,St)=>St!==oe))})]}):Ge?s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm w-[200px]",children:[s.jsx("video",{src:wt,className:"w-full h-[150px] object-cover",controls:!1,muted:!0,onError:_t=>{console.error("Video failed to load:",wt)}}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:s.jsx(Ps,{className:"text-white text-2xl"})}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Tr,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>O(k.filter((_t,St)=>St!==oe))})]}):ut?s.jsxs("div",{className:"relative rounded-lg border border-gray-200 shadow-sm bg-gray-50 p-3 min-w-[200px]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(No,{className:"text-gray-600 text-lg"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs text-gray-600 truncate",children:it}),s.jsx("audio",{src:wt,controls:!0,className:"w-full mt-1",preload:"metadata"})]})]}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Tr,{}),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center",onClick:()=>O(k.filter((_t,St)=>St!==oe))})]}):s.jsxs("div",{className:"relative flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 shadow-sm min-w-[200px]",children:[s.jsx(wo,{className:"text-gray-600 text-xl"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-gray-700 truncate font-medium",children:it}),s.jsx("p",{className:"text-xs text-gray-500",children:t==="ar"?"ملف":"File"})]}),s.jsx(P,{type:"text",size:"small",icon:s.jsx(Tr,{}),className:"bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center flex-shrink-0",onClick:()=>O(k.filter((_t,St)=>St!==oe))})]})},oe)})})}),Y&&!I&&s.jsxs("div",{className:"p-3 bg-blue-50 border-t border-blue-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("audio",{src:Y,controls:!0,className:"max-w-xs"}),s.jsx("span",{className:"text-sm text-gray-600",children:ne(z)})]}),s.jsxs(he,{children:[s.jsx(P,{type:"primary",size:"small",onClick:X,loading:p,children:t==="ar"?"إرسال":"Send"}),s.jsx(P,{size:"small",icon:s.jsx(Tr,{}),onClick:q})]})]}),I&&s.jsxs("div",{className:"p-3 bg-red-50 border-t border-red-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsxs("span",{className:"text-red-600 font-semibold",children:[t==="ar"?"جاري التسجيل...":"Recording..."," ",ne(z)]})]}),s.jsx(P,{danger:!0,size:"small",icon:s.jsx(ko,{}),onClick:te,children:t==="ar"?"إيقاف":"Stop"})]}),s.jsxs("div",{className:"border-t border-gray-200/50 px-4 py-3 shadow-professional backdrop-blur-sm flex-shrink-0 bg-white/80",children:[s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx(Yt,{showUploadList:!1,beforeUpload:Ae,accept:"image/*,audio/*,video/*,.pdf,.doc,.docx",multiple:!0,children:s.jsx(P,{icon:s.jsx(o0,{}),type:"text",className:"text-gray-600 hover:text-gray-900",size:"large"})}),s.jsx(P,{type:I?"primary":"text",danger:I,icon:I?s.jsx(h0,{}):s.jsx(No,{}),onClick:je,disabled:(i==null?void 0:i.status)==="STOPPED"||(i==null?void 0:i.status)==="COMPLETED",title:t==="ar"?"تسجيل صوتي":"Voice recording",className:I?"":"text-gray-600 hover:text-gray-900",size:"large"}),s.jsx(P,{icon:s.jsx(m0,{}),onClick:()=>M(!$),type:"text",className:`text-gray-600 hover:text-gray-900 ${$?"bg-gray-100":""}`,size:"large"}),s.jsx("div",{className:"flex-1 relative",children:s.jsx(sue,{value:d,onChange:L=>u(L.target.value),placeholder:t==="ar"?"اكتب رسالة...":"Type a message...",rows:1,autoSize:{minRows:1,maxRows:4},variant:"borderless",disabled:(i==null?void 0:i.status)==="STOPPED"||(i==null?void 0:i.status)==="COMPLETED"||I,onPressEnter:L=>{L.shiftKey||(L.preventDefault(),ye())},style:{resize:"none",borderRadius:"24px",padding:"10px 16px",backgroundColor:"#f0f0f0",border:"none",fontSize:"14px"}})}),s.jsx(P,{type:"primary",icon:s.jsx(p0,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 rounded-full",onClick:ye,loading:p,disabled:!d.trim()&&k.length===0||(i==null?void 0:i.status)==="STOPPED"||(i==null?void 0:i.status)==="COMPLETED"||I,size:"large",shape:"circle"})]}),$&&s.jsx("div",{className:"p-3 bg-white border-t border-gray-200 max-h-48 overflow-y-auto shadow-inner",children:s.jsx("div",{className:"grid grid-cols-8 gap-1",children:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃"].map(L=>s.jsx(P,{type:"text",className:"text-xl p-1",onClick:()=>{u(oe=>oe+L),M(!1)},children:L},L))})})]})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center py-12 px-6",children:[s.jsx("div",{className:"mb-6",children:s.jsx(Gt,{className:"text-7xl text-gray-300"})}),s.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700",children:t==="ar"?"اختر محادثة للبدء":"Select a Conversation to Start"}),s.jsx("p",{className:"text-gray-500 max-w-md mx-auto text-base",children:t==="ar"?"اختر محادثة من القائمة الجانبية للبدء في الدردشة":"Select a conversation from the sidebar to start chatting"})]})})}),s.jsx(Ye,{title:t==="ar"?"إرسال الرسالة كـ":"Send Message As",open:y,onCancel:()=>j(!1),footer:[s.jsx(P,{onClick:()=>{j(!1),g(null)},children:t==="ar"?"إلغاء":"Cancel"},"cancel"),s.jsx(P,{onClick:()=>{g(null),R.info(t==="ar"?"سيتم الإرسال كمدير":"Will send as admin")},children:t==="ar"?"إرسال كمدير":"Send as Admin"},"clear")],children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(to,{type:"secondary",children:t==="ar"?"اختر المستخدم الذي تريد الإرسال باسمه. اتركه فارغاً للإرسال كمدير.":"Select the user you want to send as. Leave empty to send as admin."}),s.jsxs("div",{children:[s.jsx(to,{strong:!0,children:t==="ar"?"اختر المستخدم:":"Select User:"}),w?s.jsx("div",{className:"flex justify-center py-4",children:s.jsx(et,{})}):s.jsx(B,{className:"w-full mt-2",placeholder:t==="ar"?"اختر مستخدم للإرسال باسمه":"Select user to send as",showSearch:!0,filterOption:(L,oe)=>((oe==null?void 0:oe.label)??"").toLowerCase().includes(L.toLowerCase()),options:b.map(L=>({value:L.id,label:`${L.email}${L.client?` (${L.client.firstName} ${L.client.lastName})`:""}${L.consultant?` (${L.consultant.firstName} ${L.consultant.lastName})`:""} - ${L.role}`})),onChange:L=>{g(L);const oe=b.find(pe=>pe.id===L);R.success(t==="ar"?`سيتم الإرسال كـ ${oe==null?void 0:oe.email}`:`Will send as ${oe==null?void 0:oe.email}`)},allowClear:!0,onClear:()=>{g(null),R.info(t==="ar"?"سيتم الإرسال كمدير":"Will send as admin")}}),i&&s.jsxs("div",{className:"mt-4",children:[s.jsx(to,{strong:!0,children:t==="ar"?"المشاركون في المحادثة:":"Conversation Participants:"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[(i==null?void 0:i.clientId)&&s.jsxs(P,{block:!0,onClick:()=>{g(i.clientId),j(!1),R.success(t==="ar"?"سيتم الإرسال كعميل":"Will send as client")},children:[t==="ar"?"إرسال كعميل":"Send as Client"," (",i.clientName||"Client",")"]}),(i==null?void 0:i.consultantUserId)&&s.jsxs(P,{block:!0,onClick:()=>{g(i.consultantUserId),j(!1),R.success(t==="ar"?"سيتم الإرسال كمستشار":"Will send as consultant")},children:[t==="ar"?"إرسال كمستشار":"Send as Consultant"," ","(",i.consultantName||"Consultant",")"]})]})]})]})]})}),s.jsx(Ye,{title:t==="ar"?"اختر مستخدم للدردشة":"Select User to Chat",open:C,onCancel:()=>A(!1),footer:null,width:600,children:w?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(et,{size:"large"})}):s.jsx(dt,{dataSource:b.filter(L=>L.id!==(e==null?void 0:e.id)),renderItem:L=>s.jsx(dt.Item,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>Re(L.id),children:s.jsx(dt.Item.Meta,{avatar:s.jsx(ot,{src:L.avatar,icon:s.jsx(Ee,{})}),title:s.jsxs("div",{children:[s.jsxs(to,{strong:!0,children:[L.email,L.client&&` (${L.client.firstName} ${L.client.lastName})`,L.consultant&&` (${L.consultant.firstName} ${L.consultant.lastName})`]}),s.jsx(ce,{color:"blue",className:"ml-2",children:L.role})]}),description:L.client?"Client":L.consultant?"Consultant":"User"})})})})]})})},{TextArea:SS}=F,{Option:rr}=B,iue=()=>{var C,A;const{language:t}=Se(),[e,r]=N.useState([]),[n,a]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[d,u]=N.useState(null),[f,h]=N.useState(!1),[p,m]=N.useState({}),[x]=E.useForm(),[g]=E.useForm();N.useEffect(()=>{y()},[p]);const y=async()=>{try{a(!0);const k=await nn.getAllTickets(p);r(k.tickets||[])}catch{R.error(t==="ar"?"فشل تحميل التذاكر":"Failed to load tickets")}finally{a(!1)}},j=async k=>{try{if(await nn.updateTicket(d.id,k),R.success(t==="ar"?"تم تحديث التذكرة":"Ticket updated"),c(!1),x.resetFields(),y(),i){const O=await nn.getTicketById(d.id);u(O.ticket)}}catch{R.error(t==="ar"?"فشل تحديث التذكرة":"Failed to update ticket")}},b=async k=>{try{if(await nn.addComment(d.id,k.content),R.success(t==="ar"?"تم إضافة التعليق":"Comment added"),h(!1),g.resetFields(),y(),i){const O=await nn.getTicketById(d.id);u(O.ticket)}}catch{R.error(t==="ar"?"فشل إضافة التعليق":"Failed to add comment")}},S=k=>({OPEN:"blue",IN_PROGRESS:"orange",RESOLVED:"green",CLOSED:"default"})[k]||"default",w=k=>({LOW:"default",MEDIUM:"blue",HIGH:"orange",URGENT:"red"})[k]||"default",v=[{title:t==="ar"?"رقم التذكرة":"Ticket Number",dataIndex:"ticketNumber",key:"ticketNumber"},{title:t==="ar"?"المستخدم":"User",key:"user",render:(k,O)=>{var $;return s.jsxs(he,{children:[s.jsx(Ee,{}),s.jsx("span",{children:(($=O.user)==null?void 0:$.email)||"-"})]})}},{title:t==="ar"?"الموضوع":"Subject",dataIndex:"subject",key:"subject"},{title:t==="ar"?"الفئة":"Category",dataIndex:"category",key:"category",render:k=>k||"-"},{title:t==="ar"?"الأولوية":"Priority",dataIndex:"priority",key:"priority",render:k=>s.jsx(ce,{color:w(k),children:k})},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:k=>s.jsx(ce,{color:S(k),children:k})},{title:t==="ar"?"مُخصص إلى":"Assigned To",dataIndex:"assignedTo",key:"assignedTo",render:k=>k||s.jsx(ce,{color:"default",children:t==="ar"?"غير مُخصص":"Unassigned"})},{title:t==="ar"?"تاريخ الإنشاء":"Created At",dataIndex:"createdAt",key:"createdAt",render:k=>fe(k).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"الإجراءات":"Actions",key:"actions",render:(k,O)=>s.jsxs(he,{children:[s.jsx(P,{icon:s.jsx(mr,{}),size:"small",onClick:()=>{u(O),o(!0)},children:t==="ar"?"عرض":"View"}),s.jsx(P,{icon:s.jsx(qr,{}),size:"small",onClick:()=>{u(O),x.setFieldsValue({status:O.status,priority:O.priority,assignedTo:O.assignedTo,resolution:O.resolution}),c(!0)},children:t==="ar"?"تعديل":"Edit"})]})}];return s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h1",{className:"text-3xl font-bold",children:t==="ar"?"إدارة تذاكر الدعم الفني":"Support Tickets Management"})}),s.jsx(V,{className:"mb-4",children:s.jsxs(he,{wrap:!0,children:[s.jsxs(B,{placeholder:t==="ar"?"الحالة":"Status",style:{width:150},allowClear:!0,onChange:k=>m({...p,status:k}),children:[s.jsx(rr,{value:"OPEN",children:t==="ar"?"مفتوحة":"Open"}),s.jsx(rr,{value:"IN_PROGRESS",children:t==="ar"?"قيد المعالجة":"In Progress"}),s.jsx(rr,{value:"RESOLVED",children:t==="ar"?"محلولة":"Resolved"}),s.jsx(rr,{value:"CLOSED",children:t==="ar"?"مغلقة":"Closed"})]}),s.jsxs(B,{placeholder:t==="ar"?"الأولوية":"Priority",style:{width:150},allowClear:!0,onChange:k=>m({...p,priority:k}),children:[s.jsx(rr,{value:"LOW",children:t==="ar"?"منخفضة":"Low"}),s.jsx(rr,{value:"MEDIUM",children:t==="ar"?"متوسطة":"Medium"}),s.jsx(rr,{value:"HIGH",children:t==="ar"?"عالية":"High"}),s.jsx(rr,{value:"URGENT",children:t==="ar"?"عاجلة":"Urgent"})]}),s.jsxs(B,{placeholder:t==="ar"?"الفئة":"Category",style:{width:150},allowClear:!0,onChange:k=>m({...p,category:k}),children:[s.jsx(rr,{value:"technical",children:t==="ar"?"تقني":"Technical"}),s.jsx(rr,{value:"billing",children:t==="ar"?"مالي":"Billing"}),s.jsx(rr,{value:"general",children:t==="ar"?"عام":"General"})]})]})}),s.jsx(V,{children:s.jsx(rt,{columns:v,dataSource:e,loading:n,rowKey:"id",locale:{emptyText:s.jsx(Xt,{description:t==="ar"?"لا توجد تذاكر":"No tickets"})}})}),s.jsx(Ye,{title:t==="ar"?"تفاصيل التذكرة":"Ticket Details",open:i,onCancel:()=>{o(!1),u(null)},footer:null,width:800,className:"modern-modal",children:d&&s.jsxs("div",{children:[s.jsxs(be,{bordered:!0,column:2,children:[s.jsx(be.Item,{label:t==="ar"?"رقم التذكرة":"Ticket Number",children:d.ticketNumber}),s.jsx(be.Item,{label:t==="ar"?"المستخدم":"User",children:((C=d.user)==null?void 0:C.email)||"-"}),s.jsx(be.Item,{label:t==="ar"?"الحالة":"Status",children:s.jsx(ce,{color:S(d.status),children:d.status})}),s.jsx(be.Item,{label:t==="ar"?"الأولوية":"Priority",children:s.jsx(ce,{color:w(d.priority),children:d.priority})}),s.jsx(be.Item,{label:t==="ar"?"مُخصص إلى":"Assigned To",children:d.assignedTo||s.jsx(ce,{color:"default",children:t==="ar"?"غير مُخصص":"Unassigned"})}),s.jsx(be.Item,{label:t==="ar"?"الفئة":"Category",children:d.category||"-"}),s.jsx(be.Item,{label:t==="ar"?"الموضوع":"Subject",span:2,children:d.subject}),s.jsx(be.Item,{label:t==="ar"?"الوصف":"Description",span:2,children:d.description}),d.resolution&&s.jsx(be.Item,{label:t==="ar"?"الحل":"Resolution",span:2,children:d.resolution})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:t==="ar"?"التعليقات":"Comments"}),s.jsx(P,{type:"primary",icon:s.jsx(Gt,{}),onClick:()=>h(!0),children:t==="ar"?"إضافة تعليق":"Add Comment"})]}),s.jsx(l0,{items:((A=d.comments)==null?void 0:A.map(k=>{var O;return{key:k.id,children:s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"font-semibold",children:(O=k.user)==null?void 0:O.email}),s.jsx("span",{className:"text-gray-500 text-sm",children:fe(k.createdAt).format("YYYY-MM-DD HH:mm")})]}),s.jsx("p",{children:k.comment||k.content})]})}}))||[]}),(!d.comments||d.comments.length===0)&&s.jsx(Xt,{description:t==="ar"?"لا توجد تعليقات":"No comments"})]})]})}),s.jsx(Ye,{title:t==="ar"?"تعديل التذكرة":"Edit Ticket",open:l,onCancel:()=>{c(!1),x.resetFields()},footer:null,width:600,className:"modern-modal",children:s.jsxs(E,{form:x,layout:"vertical",onFinish:j,children:[s.jsx(E.Item,{name:"status",label:t==="ar"?"الحالة":"Status",children:s.jsxs(B,{children:[s.jsx(rr,{value:"OPEN",children:t==="ar"?"مفتوحة":"Open"}),s.jsx(rr,{value:"IN_PROGRESS",children:t==="ar"?"قيد المعالجة":"In Progress"}),s.jsx(rr,{value:"RESOLVED",children:t==="ar"?"محلولة":"Resolved"}),s.jsx(rr,{value:"CLOSED",children:t==="ar"?"مغلقة":"Closed"})]})}),s.jsx(E.Item,{name:"priority",label:t==="ar"?"الأولوية":"Priority",children:s.jsxs(B,{children:[s.jsx(rr,{value:"LOW",children:t==="ar"?"منخفضة":"Low"}),s.jsx(rr,{value:"MEDIUM",children:t==="ar"?"متوسطة":"Medium"}),s.jsx(rr,{value:"HIGH",children:t==="ar"?"عالية":"High"}),s.jsx(rr,{value:"URGENT",children:t==="ar"?"عاجلة":"Urgent"})]})}),s.jsx(E.Item,{name:"assignedTo",label:t==="ar"?"مُخصص إلى":"Assigned To",children:s.jsx(F,{placeholder:t==="ar"?"معرف المستخدم":"User ID"})}),s.jsx(E.Item,{name:"resolution",label:t==="ar"?"الحل":"Resolution",children:s.jsx(SS,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"تحديث التذكرة":"Update Ticket"})})]})}),s.jsx(Ye,{title:t==="ar"?"إضافة تعليق":"Add Comment",open:f,onCancel:()=>{h(!1),g.resetFields()},footer:null,className:"modern-modal",children:s.jsxs(E,{form:g,layout:"vertical",onFinish:b,children:[s.jsx(E.Item,{name:"content",label:t==="ar"?"التعليق":"Comment",rules:[{required:!0,message:t==="ar"?"الرجاء إدخال التعليق":"Please enter comment"}],children:s.jsx(SS,{rows:4})}),s.jsx(E.Item,{children:s.jsx(P,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"إضافة التعليق":"Add Comment"})})]})})]})},{authAPI:Vl,filesAPI:NS}=Fr,oue=()=>{var w;const{language:t}=Se(),{theme:e}=yd(),{user:r,checkAuth:n}=yr(),[a]=E.useForm(),[i]=E.useForm(),[o,l]=N.useState(!1),[c,d]=N.useState(null),[u,f]=N.useState(!1),[h,p]=N.useState(!1);N.useEffect(()=>{m()},[]);const m=async()=>{try{l(!0);const v=await Vl.getProfile();v.user&&(d(v.user),v.user.admin?a.setFieldsValue({firstName:v.user.admin.firstName||"",lastName:v.user.admin.lastName||"",email:v.user.email||"",phone:v.user.phone||""}):a.setFieldsValue({email:v.user.email||"",phone:v.user.phone||""}))}catch(v){console.error("Error fetching profile:",v),R.error(v.message||(t==="ar"?"فشل تحميل الملف الشخصي":"Failed to load profile"))}finally{l(!1)}},x=async v=>{var k;const C=NS||(Fr==null?void 0:Fr.filesAPI);if(!C)return console.error("filesAPI is not defined",{filesAPI:NS,apiService:Fr}),R.error(t==="ar"?"خطأ في تحميل API":"API loading error"),!1;const A=new FormData;A.append("file",v),A.append("ownerType","USER"),A.append("ownerId",(r==null?void 0:r.id)||"");try{l(!0);const O=await C.uploadFile(A);(k=O.file)!=null&&k.fileUrl&&(await Vl.updateProfile({avatar:O.file.fileUrl}),R.success(t==="ar"?"تم رفع الصورة بنجاح":"Avatar uploaded successfully"),d($=>({...$,avatar:O.file.fileUrl})),await m(),await n())}catch(O){R.error(O.message||(t==="ar"?"فشل رفع الصورة":"Failed to upload avatar"))}finally{l(!1)}return!1},g=async v=>{try{l(!0);const C={...v};v.email&&v.email!==(c==null?void 0:c.email)&&await Vl.updateEmail(v.email),await Vl.updateProfile(C),R.success(t==="ar"?"تم حفظ التغييرات بنجاح":"Profile updated successfully"),f(!1),await m(),await n()}catch(C){R.error(C.message||(t==="ar"?"فشل حفظ التغييرات":"Failed to save changes"))}finally{l(!1)}},y=async v=>{try{l(!0),await Vl.changePassword(v.currentPassword,v.newPassword),R.success(t==="ar"?"تم تغيير كلمة المرور بنجاح":"Password changed successfully"),i.resetFields(),p(!1)}catch(C){R.error(C.message||(t==="ar"?"فشل تغيير كلمة المرور":"Failed to change password"))}finally{l(!1)}};if(o&&!c)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(et,{size:"large"})});const j=((w=c==null?void 0:c.admin)==null?void 0:w.adminRole)||(r==null?void 0:r.role),b={SUPER_ADMIN:{ar:"مدير عام",en:"Super Admin",color:"red"},ADMIN:{ar:"مدير",en:"Admin",color:"blue"},ANALYST:{ar:"محلل",en:"Analyst",color:"purple"},SUPPORT:{ar:"دعم فني",en:"Support",color:"orange"},FINANCE:{ar:"مالي",en:"Finance",color:"green"}},S=b[j]||b.ADMIN;return s.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 relative z-10",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:t==="ar"?"الملف الشخصي":"Profile Settings"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:t==="ar"?"إدارة معلوماتك الشخصية وإعدادات الحساب":"Manage your personal information and account settings"})]}),s.jsxs(le,{gutter:[24,24],children:[s.jsx(_,{xs:24,md:8,children:s.jsxs(V,{className:`text-center shadow-professional-lg border-0 card-hover ${e==="dark"?"bg-gray-800":"bg-white"}`,style:{animationDelay:"0.1s"},children:[s.jsx(Yt,{showUploadList:!1,beforeUpload:x,accept:"image/*",children:s.jsxs("div",{className:"relative inline-block mb-4 cursor-pointer group",children:[s.jsx(ot,{size:140,src:(c==null?void 0:c.avatar)||(r==null?void 0:r.avatar),icon:s.jsx(Ee,{}),className:"ring-4 ring-olive-green-200 group-hover:ring-olive-green-400 transition-all duration-300"}),s.jsx(P,{type:"primary",shape:"circle",icon:s.jsx(Ih,{}),className:"absolute bottom-0 right-0 shadow-lg",size:"small",style:{backgroundColor:"#7a8c66"},loading:o})]})}),s.jsx("h2",{className:`text-2xl font-bold mb-2 ${e==="dark"?"text-white":"text-gray-900"}`,children:c!=null&&c.admin?`${c.admin.firstName||""} ${c.admin.lastName||""}`.trim():(r==null?void 0:r.email)||(t==="ar"?"المدير":"Admin")}),s.jsx(ce,{color:S.color,className:"mb-4",icon:s.jsx(ha,{}),children:t==="ar"?S.ar:S.en}),s.jsx(Rt,{className:"my-4"}),s.jsxs("div",{className:"space-y-3 text-left",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(zn,{className:"text-gray-400"}),s.jsx("span",{className:`text-sm ${e==="dark"?"text-gray-300":"text-gray-600"}`,children:(c==null?void 0:c.email)||(r==null?void 0:r.email)})]}),(c==null?void 0:c.phone)&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ka,{className:"text-gray-400"}),s.jsx("span",{className:`text-sm ${e==="dark"?"text-gray-300":"text-gray-600"}`,children:c.phone})]})]})]})}),s.jsxs(_,{xs:24,md:16,children:[s.jsx(V,{className:`shadow-professional-lg border-0 ${e==="dark"?"bg-gray-800":"bg-white"}`,title:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`${e==="dark"?"text-white":"text-gray-900"}`,children:t==="ar"?"معلومات الحساب":"Account Information"}),!u&&s.jsx(P,{type:"primary",icon:s.jsx(qr,{}),onClick:()=>f(!0),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:t==="ar"?"تعديل":"Edit"})]}),style:{animationDelay:"0.2s"},children:s.jsxs(E,{form:a,layout:"vertical",onFinish:g,disabled:!u,children:[s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"firstName",label:t==="ar"?"الاسم الأول":"First Name",rules:[{required:!0,message:t==="ar"?"يرجى إدخال الاسم الأول":"Please enter first name"}],children:s.jsx(F,{prefix:s.jsx(Ee,{}),placeholder:t==="ar"?"الاسم الأول":"First Name"})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"lastName",label:t==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0,message:t==="ar"?"يرجى إدخال اسم العائلة":"Please enter last name"}],children:s.jsx(F,{prefix:s.jsx(Ee,{}),placeholder:t==="ar"?"اسم العائلة":"Last Name"})})})]}),s.jsxs(le,{gutter:16,children:[s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"email",label:t==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:t==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email"},{type:"email",message:t==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email"}],children:s.jsx(F,{prefix:s.jsx(zn,{}),placeholder:t==="ar"?"البريد الإلكتروني":"Email"})})}),s.jsx(_,{xs:24,sm:12,children:s.jsx(E.Item,{name:"phone",label:t==="ar"?"رقم الهاتف":"Phone Number",children:s.jsx(F,{prefix:s.jsx(Ka,{}),placeholder:t==="ar"?"رقم الهاتف":"Phone Number"})})})]}),u&&s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx(P,{type:"primary",htmlType:"submit",icon:s.jsx(Ra,{}),loading:o,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:t==="ar"?"حفظ":"Save"}),s.jsx(P,{onClick:()=>{f(!1),m()},children:t==="ar"?"إلغاء":"Cancel"})]})]})}),s.jsx(V,{className:`shadow-professional-lg border-0 mt-6 ${e==="dark"?"bg-gray-800":"bg-white"}`,title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jt,{className:e==="dark"?"text-white":"text-gray-900"}),s.jsx("span",{className:e==="dark"?"text-white":"text-gray-900",children:t==="ar"?"الأمان":"Security"})]}),style:{animationDelay:"0.3s"},extra:!h&&s.jsx(P,{type:"text",onClick:()=>p(!0),className:"text-olive-green-600 hover:text-olive-green-700",children:t==="ar"?"تغيير كلمة المرور":"Change Password"}),children:h?s.jsxs(E,{form:i,layout:"vertical",onFinish:y,children:[s.jsx(E.Item,{name:"currentPassword",label:t==="ar"?"كلمة المرور الحالية":"Current Password",rules:[{required:!0,message:t==="ar"?"يرجى إدخال كلمة المرور الحالية":"Please enter current password"}],children:s.jsx(F.Password,{prefix:s.jsx(Jt,{}),placeholder:t==="ar"?"كلمة المرور الحالية":"Current Password"})}),s.jsx(E.Item,{name:"newPassword",label:t==="ar"?"كلمة المرور الجديدة":"New Password",rules:[{required:!0,message:t==="ar"?"يرجى إدخال كلمة المرور الجديدة":"Please enter new password"},{min:8,message:t==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters"}],children:s.jsx(F.Password,{prefix:s.jsx(ha,{}),placeholder:t==="ar"?"كلمة المرور الجديدة":"New Password"})}),s.jsx(E.Item,{name:"confirmPassword",label:t==="ar"?"تأكيد كلمة المرور":"Confirm Password",dependencies:["newPassword"],rules:[{required:!0,message:t==="ar"?"يرجى تأكيد كلمة المرور":"Please confirm password"},({getFieldValue:v})=>({validator(C,A){return!A||v("newPassword")===A?Promise.resolve():Promise.reject(new Error(t==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match"))}})],children:s.jsx(F.Password,{prefix:s.jsx(ha,{}),placeholder:t==="ar"?"تأكيد كلمة المرور":"Confirm Password"})}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx(P,{type:"primary",htmlType:"submit",icon:s.jsx(Ra,{}),loading:o,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:t==="ar"?"تغيير كلمة المرور":"Change Password"}),s.jsx(P,{onClick:()=>{p(!1),i.resetFields()},children:t==="ar"?"إلغاء":"Cancel"})]})]}):s.jsx("div",{className:`p-4 rounded-lg ${e==="dark"?"bg-gray-700":"bg-gray-50"}`,children:s.jsx("p",{className:`${e==="dark"?"text-gray-300":"text-gray-600"}`,children:t==="ar"?"لحماية حسابك، استخدم كلمة مرور قوية لا تستخدمها في حسابات أخرى.":"To protect your account, use a strong password that you don't use elsewhere."})})})]})]})]})]})},lue=()=>s.jsx(BT,{children:s.jsxs(yh,{children:[s.jsx(we,{path:"/",element:s.jsx(xne,{})}),s.jsx(we,{path:"/profile",element:s.jsx(oue,{})}),s.jsx(we,{path:"/clients",element:s.jsx(yne,{})}),s.jsx(we,{path:"/clients/:id",element:s.jsx($ne,{})}),s.jsx(we,{path:"/consultants",element:s.jsx(vne,{})}),s.jsx(we,{path:"/consultants/:id",element:s.jsx(Rne,{})}),s.jsx(we,{path:"/sessions",element:s.jsx(bne,{})}),s.jsx(we,{path:"/payments",element:s.jsx(wne,{})}),s.jsx(we,{path:"/cms",element:s.jsx(Sne,{})}),s.jsx(we,{path:"/articles",element:s.jsx(Nne,{})}),s.jsx(we,{path:"/articles/new",element:s.jsx(jS,{})}),s.jsx(we,{path:"/articles/edit/:id",element:s.jsx(jS,{})}),s.jsx(we,{path:"/chat",element:s.jsx(wS,{})}),s.jsx(we,{path:"/chat/:sessionId",element:s.jsx(wS,{})}),s.jsx(we,{path:"/services",element:s.jsx(Ane,{})}),s.jsx(we,{path:"/reports",element:s.jsx(kne,{})}),s.jsx(we,{path:"/partners",element:s.jsx(One,{})}),s.jsx(we,{path:"/categories",element:s.jsx(Ene,{})}),s.jsx(we,{path:"/monitoring",element:s.jsx(Ine,{})}),s.jsx(we,{path:"/permissions",element:s.jsx(Mne,{})}),s.jsx(we,{path:"/support",element:s.jsx(iue,{})}),s.jsx(we,{path:"/settings",element:s.jsx(Tne,{})}),s.jsx(we,{path:"*",element:s.jsx(Kn,{to:"/admin",replace:!0})})]})}),cue=()=>{const{id:t}=Aa(),e=st(),{user:r}=yr();return N.useEffect(()=>{if(!r){e("/login",{replace:!0});return}const n=r.role;n==="CLIENT"?e(`/client/chat/${t}`,{replace:!0}):n==="CONSULTANT"?e(`/consultant/chat/${t}`,{replace:!0}):["ADMIN","SUPER_ADMIN"].includes(n)?e(`/admin/chat/${t}`,{replace:!0}):e("/",{replace:!0})},[t,r,e]),null};function due(){return s.jsx(bO,{children:s.jsx(vO,{children:s.jsx(wO,{children:s.jsx(kk,{children:s.jsxs(yh,{children:[s.jsx(we,{path:"/",element:s.jsx(D8,{})}),s.jsx(we,{path:"/about",element:s.jsx(L8,{})}),s.jsx(we,{path:"/services",element:s.jsx(F8,{})}),s.jsx(we,{path:"/consultants",element:s.jsx(U8,{})}),s.jsx(we,{path:"/consultants/:id",element:s.jsx(V8,{})}),s.jsx(we,{path:"/reports",element:s.jsx(Tv,{})}),s.jsx(we,{path:"/reports/:id",element:s.jsx(Tv,{})}),s.jsx(we,{path:"/blog",element:s.jsx(Y8,{})}),s.jsx(we,{path:"/blog/:slug",element:s.jsx(G8,{})}),s.jsx(we,{path:"/contact",element:s.jsx(X8,{})}),s.jsx(we,{path:"/login",element:s.jsx(Z8,{})}),s.jsx(we,{path:"/register",element:s.jsx(nT,{})}),s.jsx(we,{path:"/chat/:id",element:s.jsx(cue,{})}),s.jsx(we,{path:"/client/*",element:s.jsx(Vp,{requiredRole:"CLIENT",children:s.jsx(jT,{})})}),s.jsx(we,{path:"/consultant/*",element:s.jsx(Vp,{requiredRole:"CONSULTANT",children:s.jsx(_T,{})})}),s.jsx(we,{path:"/admin/*",element:s.jsx(Vp,{adminOnly:!0,children:s.jsx(lue,{})})})]})})})})})}const uue=console.error,fue=console.warn;console.error=(...t)=>{var r;(((r=t[0])==null?void 0:r.toString())||"").includes("findDOMNode is deprecated")||uue.apply(console,t)};console.warn=(...t)=>{var r;(((r=t[0])==null?void 0:r.toString())||"").includes("findDOMNode is deprecated")||fue.apply(console,t)};document.documentElement.setAttribute("dir","rtl");document.documentElement.setAttribute("lang","ar");Zm.createRoot(document.getElementById("root")).render(s.jsx(D.StrictMode,{children:s.jsx(AS,{locale:zS,direction:"rtl",children:s.jsx(due,{})})}));
