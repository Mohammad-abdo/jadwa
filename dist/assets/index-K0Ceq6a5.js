var Fj=n=>{throw TypeError(n)};var av=(n,e,t)=>e.has(n)||Fj("Cannot "+t);var dn=(n,e,t)=>(av(n,e,"read from private field"),t?t.call(n):e.get(n)),ma=(n,e,t)=>e.has(n)?Fj("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Hr=(n,e,t,r)=>(av(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),ga=(n,e,t)=>(av(n,e,"access private method"),t);var Lj=(n,e,t,r)=>({set _(i){Hr(n,e,i,t)},get _(){return dn(n,e,r)}});import{e as by,f as eR,g as It,r as M,u as jl,N as na,h as Rt,L as xc,i as qa,R as fe,j as tz,k as wy,l as Qe,m as Li,n as nz,a as rz,B as iz}from"./react-vendor-CI6uhmQg.js";import{C as tR,s as se,S as kt,I as We,_ as He,L as Dt,R as Kt,M as ih,B as J,D as nR,a as az,b as Re,c as me,d as Ee,e as pA,f as rR,g as ua,A as Mt,h as Ia,i as Ay,j as vn,k as Wn,l as Mr,T as $e,m as qe,n as pt,o as ye,p as ze,q as be,r as Fn,E as jn,t as Je,u as cn,F as W,U as Vt,v as ba,w as Ui,x as ho,y as Du,z as la,G as mA,H as Er,J as wi,K as gs,N as Sy,O as Pc,P as Ic,Q as $i,V as qt,W as gr,X as sz,Y as Pt,Z as Sr,$ as Rc,a0 as Ar,a1 as IE,a2 as At,a3 as _r,a4 as pi,a5 as RE,a6 as iR,a7 as oz,a8 as Na,a9 as yi,aa as ys}from"./antd-vendor-BRJGcu1L.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var sv={exports:{}},Uu={};var Uj;function lz(){if(Uj)return Uu;Uj=1;var n=by(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(o,c,u){var d,h={},f=null,p=null;u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),c.ref!==void 0&&(p=c.ref);for(d in c)r.call(c,d)&&!a.hasOwnProperty(d)&&(h[d]=c[d]);if(o&&o.defaultProps)for(d in c=o.defaultProps,c)h[d]===void 0&&(h[d]=c[d]);return{$$typeof:e,type:o,key:f,ref:p,props:h,_owner:i.current}}return Uu.Fragment=t,Uu.jsx=s,Uu.jsxs=s,Uu}var Bj;function cz(){return Bj||(Bj=1,sv.exports=lz()),sv.exports}var l=cz(),If={},$j;function uz(){if($j)return If;$j=1;var n=eR();return If.createRoot=n.createRoot,If.hydrateRoot=n.hydrateRoot,If}var dz=uz();const hz=It(dz);var Bu={},ov={exports:{}},zj;function fo(){return zj||(zj=1,(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(ov)),ov.exports}var $u={},qj;function fz(){if(qj)return $u;qj=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.default=void 0;var n={items_per_page:"/ الصفحة",jump_to:"الذهاب إلى",jump_to_confirm:"تأكيد",page:"الصفحة",prev_page:"الصفحة السابقة",next_page:"الصفحة التالية",prev_5:"خمس صفحات سابقة",next_5:"خمس صفحات تالية",prev_3:"ثلاث صفحات سابقة",next_3:"ثلاث صفحات تالية",page_size:"مقاس الصفحه"};return $u.default=n,$u}var zu={},qu={},Wu={},lv={exports:{}},cv={exports:{}},uv={exports:{}},dv={exports:{}},Wj;function aR(){return Wj||(Wj=1,(function(n){function e(t){"@babel/helpers - typeof";return n.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(dv)),dv.exports}var hv={exports:{}},Hj;function pz(){return Hj||(Hj=1,(function(n){var e=aR().default;function t(r,i){if(e(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,i||"default");if(e(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(hv)),hv.exports}var Vj;function mz(){return Vj||(Vj=1,(function(n){var e=aR().default,t=pz();function r(i){var a=t(i,"string");return e(a)=="symbol"?a:a+""}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(uv)),uv.exports}var Gj;function gz(){return Gj||(Gj=1,(function(n){var e=mz();function t(r,i,a){return(i=e(i))in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(cv)),cv.exports}var Yj;function sR(){return Yj||(Yj=1,(function(n){var e=gz();function t(i,a){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);a&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable})),s.push.apply(s,o)}return s}function r(i){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?t(Object(s),!0).forEach(function(o){e(i,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(s,o))})}return i}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(lv)),lv.exports}var Hu={},Kj;function oR(){return Kj||(Kj=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.commonLocale=void 0,Hu.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),Hu}var Xj;function yz(){if(Xj)return Wu;Xj=1;var n=fo().default;Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.default=void 0;var e=n(sR()),t=oR(),r=(0,e.default)((0,e.default)({},t.commonLocale),{},{locale:"ar_EG",today:"اليوم",now:"الأن",backToToday:"العودة إلى اليوم",ok:"تأكيد",clear:"مسح",week:"الأسبوع",month:"الشهر",year:"السنة",timeSelect:"اختيار الوقت",dateSelect:"اختيار التاريخ",monthSelect:"اختيار الشهر",yearSelect:"اختيار السنة",decadeSelect:"اختيار العقد",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"الشهر السابق (PageUp)",nextMonth:"الشهر التالى(PageDown)",previousYear:"العام السابق (Control + left)",nextYear:"العام التالى (Control + right)",previousDecade:"العقد السابق",nextDecade:"العقد التالى",previousCentury:"القرن السابق",nextCentury:"القرن التالى"});return Wu.default=r,Wu}var Vu={},Jj;function lR(){if(Jj)return Vu;Jj=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.default=void 0;const n={placeholder:"اختيار الوقت",rangePlaceholder:["وقت البدء","وقت الانتهاء"]};return Vu.default=n,Vu}var Zj;function cR(){if(Zj)return qu;Zj=1;var n=fo().default;Object.defineProperty(qu,"__esModule",{value:!0}),qu.default=void 0;var e=n(yz()),t=n(lR());const r={lang:Object.assign({placeholder:"اختيار التاريخ",rangePlaceholder:["البداية","النهاية"],yearFormat:"YYYY",monthFormat:"MMMM",monthBeforeYear:!0,shortWeekDays:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],shortMonths:["يناير","فبراير","مارس","إبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},e.default),timePickerLocale:Object.assign({},t.default)};return qu.default=r,qu}var Qj;function vz(){if(Qj)return zu;Qj=1;var n=fo().default;Object.defineProperty(zu,"__esModule",{value:!0}),zu.default=void 0;var e=n(cR());return zu.default=e.default,zu}var eT;function xz(){if(eT)return Bu;eT=1;var n=fo().default;Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.default=void 0;var e=n(fz()),t=n(vz()),r=n(cR()),i=n(lR());const a="ليس ${label} من نوع ${type} صالحًا",s={locale:"ar",Pagination:e.default,DatePicker:r.default,TimePicker:i.default,Calendar:t.default,global:{placeholder:"يرجى التحديد",close:"إغلاق"},Table:{filterTitle:"الفلاتر",filterConfirm:"تأكيد",filterReset:"إعادة ضبط",selectAll:"اختيار الكل",selectInvert:"إلغاء الاختيار",selectionAll:"حدد جميع البيانات",sortTitle:"رتب",expand:"توسيع الصف",collapse:"طي الصف",triggerDesc:"ترتيب تنازلي",triggerAsc:"ترتيب تصاعدي",cancelSort:"إلغاء الترتيب"},Tour:{Next:"التالي",Previous:"السابق",Finish:"إنهاء"},Modal:{okText:"تأكيد",cancelText:"إلغاء",justOkText:"تأكيد"},Popconfirm:{okText:"تأكيد",cancelText:"إلغاء"},Transfer:{titles:["",""],searchPlaceholder:"ابحث هنا",itemUnit:"عنصر",itemsUnit:"عناصر"},Upload:{uploading:"جاري الرفع...",removeFile:"احذف الملف",uploadError:"مشكلة فى الرفع",previewFile:"استعرض الملف",downloadFile:"تحميل الملف"},Empty:{description:"لا توجد بيانات"},Icon:{icon:"أيقونة"},Text:{edit:"تعديل",copy:"نسخ",copied:"نقل",expand:"وسع"},Form:{defaultValidateMessages:{default:"خطأ في حقل الإدخال ${label}",required:"يرجى إدخال ${label}",enum:"${label} يجب أن يكون واحدا من [${enum}]",whitespace:"${label} لا يمكن أن يكون حرفًا فارغًا",date:{format:"${label} تنسيق التاريخ غير صحيح",parse:"${label} لا يمكن تحويلها إلى تاريخ",invalid:"تاريخ ${label} غير صحيح"},types:{string:a,method:a,array:a,object:a,number:a,date:a,boolean:a,integer:a,float:a,regexp:a,email:a,url:a,hex:a},string:{len:"يجب ${label} ان يكون ${len} أحرف",min:"${label} على الأقل ${min} أحرف",max:"${label} يصل إلى ${max} أحرف",range:"يجب ${label} ان يكون مابين ${min}-${max} أحرف"},number:{len:"${len} ان يساوي ${label} يجب",min:"${min} الأدنى هو ${label} حد",max:"${max} الأقصى هو ${label} حد",range:"${max}-${min} ان يكون مابين ${label} يجب"},array:{len:"يجب أن يكون ${label} طوله ${len}",min:"يجب أن يكون ${label} طوله الأدنى ${min}",max:"يجب أن يكون ${label} طوله الأقصى ${max}",range:"يجب أن يكون ${label} طوله مابين ${min}-${max}"},pattern:{mismatch:"لا يتطابق ${label} مع ${pattern}"}}},Image:{preview:"معاينة"},QRCode:{expired:"انتهت صلاحية رمز الاستجابة السريعة",refresh:"انقر للتحديث",scanned:"تم المسح"},ColorPicker:{presetEmpty:"لا يوجد",transparent:"شفاف",singleColor:"لون واحد",gradientColor:"تدرج لوني"}};return Bu.default=s,Bu}var fv,tT;function bz(){return tT||(tT=1,fv=xz()),fv}var wz=bz();const uR=It(wz);var Gu={},Yu={},nT;function Az(){if(nT)return Yu;nT=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.default=void 0;var n={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};return Yu.default=n,Yu}var Ku={},Xu={},Ju={},rT;function Sz(){if(rT)return Ju;rT=1;var n=fo().default;Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.default=void 0;var e=n(sR()),t=oR(),r=(0,e.default)((0,e.default)({},t.commonLocale),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});return Ju.default=r,Ju}var Zu={},iT;function dR(){if(iT)return Zu;iT=1,Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.default=void 0;const n={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};return Zu.default=n,Zu}var aT;function hR(){if(aT)return Xu;aT=1;var n=fo().default;Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.default=void 0;var e=n(Sz()),t=n(dR());const r={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},e.default),timePickerLocale:Object.assign({},t.default)};return Xu.default=r,Xu}var sT;function Ez(){if(sT)return Ku;sT=1;var n=fo().default;Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.default=void 0;var e=n(hR());return Ku.default=e.default,Ku}var oT;function _z(){if(oT)return Gu;oT=1;var n=fo().default;Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.default=void 0;var e=n(Az()),t=n(Ez()),r=n(hR()),i=n(dR());const a="${label} is not a valid ${type}",s={locale:"en",Pagination:e.default,DatePicker:r.default,TimePicker:i.default,Calendar:t.default,global:{placeholder:"Please select",close:"Close"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:a,method:a,array:a,object:a,number:a,date:a,boolean:a,integer:a,float:a,regexp:a,email:a,url:a,hex:a},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};return Gu.default=s,Gu}var pv,lT;function Dz(){return lT||(lT=1,pv=_z()),pv}var jz=Dz();const Tz=It(jz),fR=M.createContext(),Ze=()=>{const n=M.useContext(fR);if(!n)throw new Error("useLanguage must be used within LanguageProvider");return n},Cz={ar:{home:"الرئيسية",about:"من نحن",consultants:"المستشارون",blog:"المدونة",contact:"اتصل بنا",login:"تسجيل الدخول",myAccount:"حسابي",requestConsultation:"طلب استشارة",heroTitle:"نحو قرارات اقتصادية واستثمارية أكثر جدوى",heroSubtitle:"استشارات اقتصادية وإدارية قائمة على التحليلات والقياس",bookConsultation:"احجز استشارة الآن",exploreServices:"استكشف الخدمات",services:"خدماتنا",economicConsulting:"الاستشارات الاقتصادية",feasibilityStudies:"دراسات الجدوى",economicAnalysis:"التحليل الاقتصادي والقياسي",videoConsultation:"استشارة فيديو/محادثة",reportsTemplates:"التقارير الاقتصادية والقوالب",ourConsultants:"مستشارونا",viewAllConsultants:"عرض جميع المستشارين",smartPlatform:"المنصة الذكية",instantBooking:"حجز استشارة فوري",dashboardReports:"تقارير لوحة تحليلية",supportSectors:"دعم القطاعين الحكومي والخاص",reports:"التقارير والتحليلات",viewAllReports:"عرض جميع التقارير",saudiEconomy2025:"اتجاهات الاقتصاد السعودي 2025",meccaProjects:"تحليل تأثير المشاريع الضخمة - مكة",investmentIndex:"مؤشر نشاط الاستثمار جدوى",testimonials:"آراء العملاء",partners:"شركاؤنا",quickLinks:"روابط سريعة",contactInfo:"معلومات الاتصال",privacy:"سياسة الخصوصية",terms:"الشروط والأحكام",copyright:"© 2025 منصة جدوى للاستشارات",dashboardOverview:"لوحة التحكم",platformPerformance:"نظرة عامة على أداء المنصة",activeClients:"العملاء النشطون",totalClients:"إجمالي العملاء",activeConsultants:"المستشارون النشطون",totalConsultants:"إجمالي المستشارين",completedSessions:"الجلسات المكتملة",totalSessions:"إجمالي الجلسات",pendingSessions:"الجلسات المعلقة",confirmedSessions:"الجلسات المؤكدة",monthlyRevenue:"الإيرادات الشهرية",totalRevenue:"إجمالي الإيرادات",revenueGrowth:"نمو الإيرادات",averageRating:"متوسط التقييم",totalRatings:"إجمالي التقييمات",cancelledSessions:"الجلسات الملغاة",totalBookings:"إجمالي الحجوزات",totalServices:"إجمالي الخدمات",activeServices:"الخدمات النشطة",totalArticles:"إجمالي المقالات",publishedArticles:"المقالات المنشورة",totalPayments:"إجمالي المدفوعات",pendingPayments:"المدفوعات المعلقة",totalReports:"إجمالي التقارير",monthlyRevenueTrend:"اتجاه الإيرادات الشهرية",sessionsStatus:"حالة الجلسات",servicesDistribution:"توزيع الخدمات",performanceComparison:"مقارنة الأداء",topConsultants:"أفضل المستشارين",recentBookings:"الحجوزات الأخيرة",revenueByMonth:"الإيرادات حسب الشهر",sessionsByStatus:"الجلسات حسب الحالة"},en:{home:"Home",about:"About",consultants:"Consultants",blog:"Blog",contact:"Contact Us",login:"Login",myAccount:"My Account",requestConsultation:"Request Consultation",heroTitle:"Towards More Viable Economic and Investment Decisions",heroSubtitle:"Economic and administrative consulting based on analytics and measurement",bookConsultation:"Book Consultation Now",exploreServices:"Explore Services",services:"Our Services",economicConsulting:"Economic Consultations",feasibilityStudies:"Feasibility Studies",economicAnalysis:"Economic & Econometric Analysis",videoConsultation:"Video/Chat Consultation",reportsTemplates:"Economic Reports & Templates",ourConsultants:"Our Consultants",viewAllConsultants:"View All Consultants",smartPlatform:"Smart Platform",instantBooking:"Instant Consultation Booking",dashboardReports:"Analytical Dashboard Reports",supportSectors:"Support for Government & Private Sectors",reports:"Reports & Analytics",viewAllReports:"View All Reports",saudiEconomy2025:"Saudi Economy Trends 2025",meccaProjects:"Mega Projects Impact Analysis – Makkah",investmentIndex:"Jadwa Investment Activity Index",testimonials:"Testimonials",partners:"Our Partners",quickLinks:"Quick Links",contactInfo:"Contact Information",privacy:"Privacy Policy",terms:"Terms & Conditions",copyright:"© 2025 Jadwa Consulting Platform",dashboardOverview:"Dashboard Overview",platformPerformance:"Platform performance overview",activeClients:"Active Clients",totalClients:"Total Clients",activeConsultants:"Active Consultants",totalConsultants:"Total Consultants",completedSessions:"Completed Sessions",totalSessions:"Total Sessions",pendingSessions:"Pending Sessions",confirmedSessions:"Confirmed Sessions",monthlyRevenue:"Monthly Revenue",totalRevenue:"Total Revenue",revenueGrowth:"Revenue Growth",averageRating:"Average Rating",totalRatings:"Total Ratings",cancelledSessions:"Cancelled Sessions",totalBookings:"Total Bookings",totalServices:"Total Services",activeServices:"Active Services",totalArticles:"Total Articles",publishedArticles:"Published Articles",totalPayments:"Total Payments",pendingPayments:"Pending Payments",totalReports:"Total Reports",monthlyRevenueTrend:"Monthly Revenue Trend",sessionsStatus:"Sessions Status",servicesDistribution:"Services Distribution",performanceComparison:"Performance Comparison",topConsultants:"Top Consultants",recentBookings:"Recent Bookings",revenueByMonth:"Revenue by Month",sessionsByStatus:"Sessions by Status"}},Nz=({children:n})=>{const[e,t]=M.useState(()=>localStorage.getItem("language")||"ar");M.useEffect(()=>{localStorage.setItem("language",e),document.documentElement.setAttribute("dir",e==="ar"?"rtl":"ltr"),document.documentElement.setAttribute("lang",e)},[e]);const r=()=>{t(s=>s==="ar"?"en":"ar")},i=s=>Cz[e]?.[s]||s,a=e==="ar"?uR:Tz;return l.jsx(fR.Provider,{value:{language:e,setLanguage:t,toggleLanguage:r,t:i},children:l.jsx(tR,{locale:a,direction:e==="ar"?"rtl":"ltr",children:n})})},pR=M.createContext(),ha=()=>{const n=M.useContext(pR);if(!n)throw new Error("useTheme must be used within ThemeProvider");return n},kz=({children:n})=>{const[e,t]=M.useState("light"),[r,i]=M.useState(()=>{const o={logo:null,dashboardName:"Jadwa",dashboardNameAr:"جدوى",websiteLogo:null,websiteName:"Jadwa",websiteNameAr:"جدوى",showConsultantContactInfo:!0,termsClient:"",termsClientEn:"",termsConsultant:"",termsConsultantEn:"",primaryFont:"Titillium Web",arabicFont:"Amiri",animationsEnabled:!0,animationSpeed:"normal",primaryColor:"#7a8c66",secondaryColor:"#14b8a6"},c=localStorage.getItem("dashboardSettings");return c?{...o,...JSON.parse(c)}:o});M.useEffect(()=>{document.documentElement.setAttribute("data-theme","light"),document.documentElement.classList.remove("dark");const o=document.documentElement;o.style.setProperty("--bg-primary","#ffffff"),o.style.setProperty("--bg-secondary","#f8f9fa"),o.style.setProperty("--text-primary","#1a1a1a"),o.style.setProperty("--text-secondary","#666666")},[]),M.useEffect(()=>{localStorage.setItem("dashboardSettings",JSON.stringify(r));const o=document.documentElement;o.style.setProperty("--font-primary",r.primaryFont),o.style.setProperty("--font-arabic",r.arabicFont),o.style.setProperty("--animation-enabled",r.animationsEnabled?"1":"0"),o.style.setProperty("--animation-speed",r.animationSpeed==="slow"?"0.5s":r.animationSpeed==="fast"?"0.2s":"0.3s"),o.style.setProperty("--color-primary",r.primaryColor),o.style.setProperty("--color-secondary",r.secondaryColor)},[r]);const a=()=>{},s=o=>{i(c=>({...c,...o}))};return l.jsx(pR.Provider,{value:{theme:e,toggleTheme:a,settings:r,updateSettings:s},children:n})},dl=n=>{if(typeof document>"u")return null;const t=`; ${document.cookie}`.split(`; ${n}=`);return t.length===2?t.pop().split(";").shift():null},Rf=(n,e,t=7)=>{if(typeof document>"u")return;const r=new Date;r.setTime(r.getTime()+t*24*60*60*1e3),document.cookie=`${n}=${e};expires=${r.toUTCString()};path=/;SameSite=Lax`},gm=n=>{typeof document>"u"||(document.cookie=`${n}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`)},nl="https://jadwa.developteam.siteapi",ym=()=>dl("accessToken"),Oz=()=>{gm("accessToken"),gm("refreshToken")},De=async(n,e={})=>{const t=ym(),r={...e,headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`},...e.headers}};try{const i=await fetch(`${nl}${n}`,r);if(!i)throw new Error("Cannot connect to server. Please make sure the backend server is running on https://jadwa.developteam.site");if(!i.ok){const a=await i.json().catch(()=>({error:"Network error"}));if(i.status===401&&(Oz(),(window.location.pathname.startsWith("/admin")||window.location.pathname.startsWith("/client")||window.location.pathname.startsWith("/consultant"))&&window.location.pathname!=="/login"&&(sessionStorage.getItem("redirecting")||(sessionStorage.setItem("redirecting","true"),setTimeout(()=>{sessionStorage.removeItem("redirecting"),window.location.href="/login"},100)))),i.status!==401){const s=new Error(a.error||`HTTP error! status: ${i.status}`);throw s.status=i.status,s.response={status:i.status},s}else{const s=new Error(a.error||"Unauthorized. Please login again.");throw s.status=401,s.response={status:401},s}}return await i.json()}catch(i){if(i.message?.includes("Access denied")||i.message?.includes("not found")||i.message?.includes("Session not found")||i.message?.includes("Booking not found")||i.status===404||i.response?.status===404||i.message?.includes("403")||i.message?.includes("404")||console.error("API Error:",i),i.message.includes("Failed to fetch")||i.message.includes("ERR_CONNECTION_REFUSED")||i.name==="TypeError"){const s=new Error(`Cannot connect to backend server. Please:
1. Make sure the backend server is running (npm run dev in backend folder)
2. Check that the server is running on https://jadwa.developteam.site
3. Verify your .env file is configured correctly`);throw s.name="ConnectionError",s}throw i}},Rp={login:(n,e)=>De("/auth/login",{method:"POST",body:JSON.stringify({email:n,password:e})}),register:n=>De("/auth/register",{method:"POST",body:JSON.stringify(n)}),getProfile:()=>De("/auth/profile"),updateProfile:n=>De("/auth/profile",{method:"PUT",body:JSON.stringify(n)}),changePassword:(n,e)=>De("/auth/change-password",{method:"PUT",body:JSON.stringify({currentPassword:n,newPassword:e})})},mR={getDashboardStats:()=>De("/client/dashboard/stats"),getBookings:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/client/bookings${e?`?${e}`:""}`)},getConsultations:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/client/consultations${e?`?${e}`:""}`)}},vs={getEarnings:()=>De("/consultants/earnings"),getDashboardStats:()=>De("/consultants/dashboard/stats"),getConsultants:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/consultants${e?`?${e}`:""}`)},getConsultantById:n=>De(`/consultants/${n}`),getAvailability:(n,e)=>De(`/consultants/${n}/availability${e?`?date=${e}`:""}`),updateProfile:n=>De("/consultants/profile",{method:"PUT",body:JSON.stringify(n)}),requestWithdrawal:n=>De("/consultants/withdrawals/request",{method:"POST",body:JSON.stringify(n)}),setAvailability:n=>De("/consultants/availability",{method:"PUT",body:JSON.stringify({slots:n})})},jt={getDashboardStats:()=>De("/admin/dashboard/stats"),getClients:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/admin/clients${e?`?${e}`:""}`)},getConsultants:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/admin/consultants${e?`?${e}`:""}`)},getBookings:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/admin/bookings${e?`?${e}`:""}`)},updateBooking:(n,e)=>De(`/admin/bookings/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteBooking:n=>De(`/admin/bookings/${n}`,{method:"DELETE"}),createClient:n=>De("/admin/clients",{method:"POST",body:JSON.stringify(n)}),updateClient:(n,e)=>De(`/admin/clients/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteClient:n=>De(`/admin/clients/${n}`,{method:"DELETE"}),createConsultant:n=>De("/admin/consultants",{method:"POST",body:JSON.stringify(n)}),updateConsultant:(n,e)=>De(`/admin/consultants/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteConsultant:n=>De(`/admin/consultants/${n}`,{method:"DELETE"}),getPayments:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/admin/payments${e?`?${e}`:""}`)},getReports:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/admin/reports${e?`?${e}`:""}`)},reviewConsultant:(n,e)=>De(`/admin/consultants/${n}/review`,{method:"PUT",body:JSON.stringify({action:e})}),toggleUserStatus:(n,e)=>De(`/admin/users/${n}/status`,{method:"PUT",body:JSON.stringify({isActive:e})}),resetUserPassword:(n,e)=>De(`/admin/users/${n}/reset-password`,{method:"PUT",body:JSON.stringify({newPassword:e})}),getClientById:n=>De(`/admin/clients/${n}`),getClientBookings:n=>De(`/admin/clients/${n}/bookings`),getClientPayments:n=>De(`/admin/clients/${n}/payments`),getClientReports:n=>De(`/admin/clients/${n}/reports`),sendProfitToClient:(n,e,t)=>De(`/admin/clients/${n}/profit`,{method:"POST",body:JSON.stringify({amount:e,notes:t})}),deductFromClient:(n,e,t)=>De(`/admin/clients/${n}/deduct`,{method:"POST",body:JSON.stringify({amount:e,reason:t})}),suspendClient:(n,e,t)=>De(`/admin/clients/${n}/suspend`,{method:"POST",body:JSON.stringify({reason:e,duration:t})}),getConsultantById:n=>De(`/admin/consultants/${n}`),getConsultantBookings:n=>De(`/admin/consultants/${n}/bookings`),getConsultantEarnings:n=>De(`/admin/consultants/${n}/earnings`),getConsultantWithdrawals:n=>De(`/admin/consultants/${n}/withdrawals`),sendProfitToConsultant:(n,e,t)=>De(`/admin/consultants/${n}/profit`,{method:"POST",body:JSON.stringify({amount:e,notes:t})}),deductFromConsultant:(n,e,t)=>De(`/admin/consultants/${n}/deduct`,{method:"POST",body:JSON.stringify({amount:e,reason:t})}),suspendConsultant:(n,e,t)=>De(`/admin/consultants/${n}/suspend`,{method:"POST",body:JSON.stringify({reason:e,duration:t})}),exportReportsPDF:(n={})=>{const e=new URLSearchParams(n).toString();return`${nl}/admin/reports/export/pdf${e?`?${e}`:""}`},exportReportsCSV:(n={})=>{const e=new URLSearchParams(n).toString();return`${nl}/admin/reports/export/csv${e?`?${e}`:""}`},exportPaymentsCSV:(n={})=>{const e=new URLSearchParams(n).toString();return`${nl}/admin/payments/export/csv${e?`?${e}`:""}`},createDirectSession:(n,e="chat")=>De("/admin/sessions/direct",{method:"POST",body:JSON.stringify({userId:n,sessionType:e})}),deleteSession:n=>De(`/admin/sessions/${n}`,{method:"DELETE"}),stopSession:n=>De(`/admin/sessions/${n}/stop`,{method:"PUT"}),getAllUsers:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/admin/users${e?`?${e}`:""}`)}},Fo={getGeneralSettings:()=>De("/settings/general"),updateGeneralSettings:n=>De("/settings/general",{method:"PUT",body:JSON.stringify(n)}),getPaymentSettings:()=>De("/settings/payment"),updatePaymentSettings:n=>De("/settings/payment",{method:"PUT",body:JSON.stringify(n)}),getIntegrationSettings:()=>De("/settings/integration"),updateIntegrationSettings:n=>De("/settings/integration",{method:"PUT",body:JSON.stringify(n)})},Hs={getServices:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/services${e?`?${e}`:""}`)},getServiceById:n=>De(`/services/${n}`),createService:n=>De("/services",{method:"POST",body:JSON.stringify(n)}),updateService:(n,e)=>De(`/services/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteService:n=>De(`/services/${n}`,{method:"DELETE"})},Ir={getBookings:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/bookings${e?`?${e}`:""}`)},getBookingById:n=>De(`/bookings/${n}`),createBooking:n=>De("/bookings",{method:"POST",body:JSON.stringify(n)}),updateBookingStatus:(n,e,t)=>De(`/bookings/${n}/status`,{method:"PUT",body:JSON.stringify({status:e,consultantNotes:t})}),cancelBooking:n=>De(`/bookings/${n}/cancel`,{method:"PUT"}),rateBooking:(n,e,t)=>De(`/bookings/${n}/rate`,{method:"POST",body:JSON.stringify({rating:e,comment:t})})},Td={getPages:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/cms${e?`?${e}`:""}`)},getPageBySlug:n=>De(`/cms/${n}`),createPage:n=>De("/cms",{method:"POST",body:JSON.stringify(n)}),updatePage:(n,e)=>De(`/cms/${n}`,{method:"PUT",body:JSON.stringify(e)}),deletePage:n=>De(`/cms/${n}`,{method:"DELETE"})},ar={getArticles:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/articles${e?`?${e}`:""}`)},getArticleById:n=>De(`/articles/id/${n}`),getArticleBySlug:n=>De(`/articles/${n}`),createArticle:n=>De("/articles",{method:"POST",body:JSON.stringify(n)}),updateArticle:(n,e)=>De(`/articles/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteArticle:n=>De(`/articles/${n}`,{method:"DELETE"}),publishArticle:n=>De(`/articles/${n}`,{method:"PUT",body:JSON.stringify({status:"PUBLISHED",publishedAt:new Date().toISOString()})})},Lo={getPermissions:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/permissions/permissions${e?`?${e}`:""}`)},getRoles:()=>De("/permissions/roles"),createRole:n=>De("/permissions/roles",{method:"POST",body:JSON.stringify(n)}),updateRole:(n,e)=>De(`/permissions/roles/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteRole:n=>De(`/permissions/roles/${n}`,{method:"DELETE"}),assignRoleToUser:(n,e,t)=>De(`/permissions/users/${n}/roles`,{method:"POST",body:JSON.stringify({roleId:e,expiresAt:t})}),getUserPermissions:n=>De(`/permissions/users/${n}/permissions`),initializePermissions:()=>De("/permissions/initialize",{method:"POST"})},Zr={uploadFile:async n=>{const e=ym(),t=await fetch(`${nl}/files/upload`,{method:"POST",headers:{...e&&{Authorization:`Bearer ${e}`}},body:n});if(!t.ok){const r=await t.json().catch(()=>({error:`HTTP error! status: ${t.status}`}));throw new Error(r.error||`Failed to upload file: ${t.status}`)}return await t.json()},getFilesByOwner:(n,e)=>De(`/files/files?ownerType=${n}&ownerId=${e}`),downloadFile:n=>`${nl}/files/files/${n}/download?token=${ym()}`,deleteFile:n=>De(`/files/files/${n}`,{method:"DELETE"})},pn={getConversations:()=>De("/messages/conversations"),getMessages:n=>De(`/messages/session/${n}`),sendMessage:(n,e)=>De(`/messages/session/${n}`,{method:"POST",body:JSON.stringify(e)}),sendMessageAsAdmin:(n,e)=>De(`/messages/session/${n}/admin`,{method:"POST",body:JSON.stringify(e)}),markAsRead:n=>De(`/messages/session/${n}/read`,{method:"PUT"})},fn={getSessionByBooking:n=>De(`/sessions/booking/${n}`),startSession:(n,e)=>De(`/sessions/booking/${n}/start`,{method:"POST",body:JSON.stringify({roomId:e})}),endSession:n=>De(`/sessions/booking/${n}/end`,{method:"POST"}),generateVideoRoom:n=>De(`/sessions/booking/${n}/video-room`,{method:"POST"}),getVideoRoom:n=>De(`/sessions/booking/${n}/video-room`)},Mp={getSystemLogs:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/monitoring/logs/system${e?`?${e}`:""}`)},getAuditLogs:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/monitoring/logs/audit${e?`?${e}`:""}`)},getSecurityStats:()=>De("/monitoring/security/stats")},Cd={getNotifications:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/notifications${e?`?${e}`:""}`)},markAsRead:n=>De(`/notifications/${n}/read`,{method:"PUT"}),markAllAsRead:()=>De("/notifications/read-all",{method:"PUT"}),deleteNotification:n=>De(`/notifications/${n}`,{method:"DELETE"}),sendNotification:n=>De("/notifications/send",{method:"POST",body:JSON.stringify(n)}),sendBulkNotifications:n=>De("/notifications/send-bulk",{method:"POST",body:JSON.stringify(n)}),getAllNotifications:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/notifications/all${e?`?${e}`:""}`)},getNotificationStats:()=>De("/notifications/stats")},Rr={getMyTickets:()=>De("/support/my-tickets"),getAllTickets:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/support${e?`?${e}`:""}`)},getTicketById:n=>De(`/support/${n}`),createTicket:n=>De("/support",{method:"POST",body:JSON.stringify(n)}),updateTicket:(n,e)=>De(`/support/${n}`,{method:"PUT",body:JSON.stringify(e)}),addComment:(n,e)=>De(`/support/${n}/comments`,{method:"POST",body:JSON.stringify({content:e})}),getTicketStats:()=>De("/support/stats/overview")},vm={getReports:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/reports${e?`?${e}`:""}`)},getReportById:n=>De(`/reports/${n}`),getPublicReports:()=>De("/reports/public"),getPublicReportById:n=>De(`/reports/public/${n}`),uploadReport:n=>{const e=ym();return fetch(`${nl}/reports`,{method:"POST",headers:{...e&&{Authorization:`Bearer ${e}`}},body:n}).then(t=>t.json())},reviewReport:(n,e)=>De(`/reports/${n}/review`,{method:"PUT",body:JSON.stringify({status:e})})},lc={getPartners:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/partners${e?`?${e}`:""}`)},getPartnerById:n=>De(`/partners/${n}`),createPartner:n=>De("/partners",{method:"POST",body:JSON.stringify(n)}),updatePartner:(n,e)=>De(`/partners/${n}`,{method:"PUT",body:JSON.stringify(e)}),deletePartner:n=>De(`/partners/${n}`,{method:"DELETE"})},Nd={getCategories:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/categories${e?`?${e}`:""}`)},getCategoryById:n=>De(`/categories/${n}`),createCategory:n=>De("/categories",{method:"POST",body:JSON.stringify(n)}),updateCategory:(n,e)=>De(`/categories/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteCategory:n=>De(`/categories/${n}`,{method:"DELETE"})},cc={getSliders:(n={})=>{const e=new URLSearchParams(n).toString();return De(`/sliders${e?`?${e}`:""}`)},getSliderById:n=>De(`/sliders/${n}`),createSlider:n=>De("/sliders",{method:"POST",body:JSON.stringify(n)}),updateSlider:(n,e)=>De(`/sliders/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteSlider:n=>De(`/sliders/${n}`,{method:"DELETE"})},xs={authAPI:Rp,clientAPI:mR,consultantAPI:vs,adminAPI:jt,servicesAPI:Hs,bookingsAPI:Ir,notificationsAPI:Cd,cmsAPI:Td,articlesAPI:ar,permissionsAPI:Lo,filesAPI:Zr,sessionsAPI:fn,monitoringAPI:Mp,messageAPI:pn,settingsAPI:Fo,supportAPI:Rr,reportAPI:vm,partnersAPI:lc,categoriesAPI:Nd,slidersAPI:cc},gR=M.createContext(null),Pz=({children:n})=>{const[e,t]=M.useState(null),[r,i]=M.useState(!0),[a,s]=M.useState(!1);M.useEffect(()=>{o()},[]);const o=async()=>{if(!dl("accessToken")){i(!1);return}try{const y=await Rp.getProfile();t(y.user),s(!0)}catch(y){console.error("Auth check failed:",y),y.message&&y.message.includes("Unauthorized")?d():i(!1)}finally{i(!1)}},c=async(p,y)=>{try{const g=await Rp.login(p,y);return Rf("accessToken",g.tokens.accessToken,7),Rf("refreshToken",g.tokens.refreshToken,7),localStorage.setItem("accessToken",g.tokens.accessToken),localStorage.setItem("refreshToken",g.tokens.refreshToken),t(g.user),s(!0),se.success("Login successful!"),{success:!0,user:g.user}}catch(g){return se.error(g.message||"Login failed"),{success:!1,error:g.message}}},u=async p=>{try{const y=await Rp.register(p);return Rf("accessToken",y.tokens.accessToken,7),Rf("refreshToken",y.tokens.refreshToken,7),localStorage.setItem("accessToken",y.tokens.accessToken),localStorage.setItem("refreshToken",y.tokens.refreshToken),t(y.user),s(!0),se.success("Registration successful!"),{success:!0,user:y.user}}catch(y){return se.error(y.message||"Registration failed"),{success:!1,error:y.message}}},d=()=>{gm("accessToken"),gm("refreshToken"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),t(null),s(!1),se.info("Logged out successfully")},f={user:e,isAuthenticated:a,loading:r,login:c,register:u,logout:d,updateUser:p=>{t({...e,...p})},checkAuth:o};return l.jsx(gR.Provider,{value:f,children:n})},Xn=()=>{const n=M.useContext(gR);if(!n)throw new Error("useAuth must be used within AuthProvider");return n},mv=({children:n,requiredRole:e=null,adminOnly:t=!1})=>{let r;try{r=Xn()}catch{return l.jsx("div",{className:"flex justify-center items-center h-screen",children:l.jsx(kt,{size:"large"})})}const{isAuthenticated:i,loading:a,user:s,checkAuth:o}=r,c=jl();if(M.useEffect(()=>{dl("accessToken")&&!i&&!a&&o()},[c.pathname]),a)return l.jsx("div",{className:"flex justify-center items-center h-screen",children:l.jsx(kt,{size:"large"})});const u=dl("accessToken");return!i&&!u?l.jsx(na,{to:"/login",state:{from:c},replace:!0}):u&&!i&&!a?l.jsx("div",{className:"flex justify-center items-center h-screen",children:l.jsx(kt,{size:"large"})}):t&&!["ADMIN","SUPER_ADMIN","ANALYST","SUPPORT","FINANCE"].includes(s?.role)?s?.role==="CLIENT"?l.jsx(na,{to:"/client",replace:!0}):s?.role==="CONSULTANT"?l.jsx(na,{to:"/consultant",replace:!0}):l.jsx(na,{to:"/",replace:!0}):e&&s?.role!==e?s?.role==="CLIENT"?l.jsx(na,{to:"/client",replace:!0}):s?.role==="CONSULTANT"?l.jsx(na,{to:"/consultant",replace:!0}):["ADMIN","SUPER_ADMIN","ANALYST","SUPPORT","FINANCE"].includes(s?.role)?l.jsx(na,{to:"/admin",replace:!0}):l.jsx(na,{to:"/",replace:!0}):n};var Iz={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"}},{tag:"path",attrs:{d:"M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"}}]},name:"aim",theme:"outlined"},Rz=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Iz}))},Mz=M.forwardRef(Rz),Fz={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"},Lz=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Fz}))},cT=M.forwardRef(Lz),Uz={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"},Bz=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Uz}))},hl=M.forwardRef(Bz),$z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},zz=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:$z}))},bs=M.forwardRef(zz),qz={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},Wz=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:qz}))},xm=M.forwardRef(Wz),Hz={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},Vz=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Hz}))},Gz=M.forwardRef(Vz),Yz={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z"}}]},name:"audio",theme:"outlined"},Kz=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Yz}))},Mc=M.forwardRef(Kz),Xz={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z"}}]},name:"bank",theme:"outlined"},Jz=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Xz}))},ME=M.forwardRef(Jz),Zz={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},Qz=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Zz}))},Fc=M.forwardRef(Qz),eq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z"}}]},name:"bell",theme:"outlined"},tq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:eq}))},ah=M.forwardRef(tq),nq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zm-377.1-44.1c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-.6-.6-1.3-1.2-2-1.7l-78.2-78.2a9.11 9.11 0 00-12.8 0l-48 48a9.11 9.11 0 000 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256zm12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z"}}]},name:"bg-colors",theme:"outlined"},rq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:nq}))},uT=M.forwardRef(rq),iq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"},aq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:iq}))},Lc=M.forwardRef(aq),sq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M632 888H392c-4.4 0-8 3.6-8 8v32c0 17.7 14.3 32 32 32h192c17.7 0 32-14.3 32-32v-32c0-4.4-3.6-8-8-8zM512 64c-181.1 0-328 146.9-328 328 0 121.4 66 227.4 164 284.1V792c0 17.7 14.3 32 32 32h264c17.7 0 32-14.3 32-32V676.1c98-56.7 164-162.7 164-284.1 0-181.1-146.9-328-328-328zm127.9 549.8L604 634.6V752H420V634.6l-35.9-20.8C305.4 568.3 256 484.5 256 392c0-141.4 114.6-256 256-256s256 114.6 256 256c0 92.5-49.4 176.3-128.1 221.8z"}}]},name:"bulb",theme:"outlined"},oq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:sq}))},bm=M.forwardRef(oq),lq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M251.2 387H320v68.8c0 1.8 1.8 3.2 4 3.2h48c2.2 0 4-1.4 4-3.3V387h68.8c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H376v-68.8c0-1.8-1.8-3.2-4-3.2h-48c-2.2 0-4 1.4-4 3.2V331h-68.8c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm328 0h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 265h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 104h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm-195.7-81l61.2-74.9c4.3-5.2.7-13.1-5.9-13.1H388c-2.3 0-4.5 1-5.9 2.9l-34 41.6-34-41.6a7.85 7.85 0 00-5.9-2.9h-50.9c-6.6 0-10.2 7.9-5.9 13.1l61.2 74.9-62.7 76.8c-4.4 5.2-.8 13.1 5.8 13.1h50.8c2.3 0 4.5-1 5.9-2.9l35.5-43.5 35.5 43.5c1.5 1.8 3.7 2.9 5.9 2.9h50.8c6.6 0 10.2-7.9 5.9-13.1L383.5 675zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-36 732H180V180h664v664z"}}]},name:"calculator",theme:"outlined"},cq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:lq}))},yR=M.forwardRef(cq),uq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"},dq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:uq}))},Ey=M.forwardRef(dq),hq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},fq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:hq}))},Zt=M.forwardRef(fq),pq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},mq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:pq}))},vR=M.forwardRef(mq),gq={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},yq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:gq}))},sh=M.forwardRef(yq),vq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M594.3 601.5a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1 8 8 0 008 8.4H407c4.2 0 7.6-3.3 7.9-7.5 3.8-50.6 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H661a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.7-126.1zM512 578c-28.5 0-51.7-23.3-51.7-52s23.2-52 51.7-52 51.7 23.3 51.7 52-23.2 52-51.7 52zm416-354H768v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H548v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H328v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56H96c-17.7 0-32 14.3-32 32v576c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32zm-40 568H136V296h120v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56h148v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56h148v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56h120v496z"}}]},name:"contacts",theme:"outlined"},xq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:vq}))},bq=M.forwardRef(xq),wq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},Aq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:wq}))},FE=M.forwardRef(Aq),Sq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"},Eq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Sq}))},wm=M.forwardRef(Eq),_q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar",theme:"outlined"},Dq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:_q}))},Yn=M.forwardRef(Dq),jq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 289.1a362.49 362.49 0 00-79.9-115.7 370.83 370.83 0 00-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 00169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0022.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"}}]},name:"environment",theme:"outlined"},Tq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:jq}))},_y=M.forwardRef(Tq),Cq={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},Nq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Cq}))},kq=M.forwardRef(Nq),Oq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 736H663.9V602.2h104l15.6-120.7H663.9v-77.1c0-35 9.7-58.8 59.8-58.8h63.9v-108c-11.1-1.5-49-4.8-93.2-4.8-92.2 0-155.3 56.3-155.3 159.6v89H434.9v120.7h104.3V848H176V176h672v672z"}}]},name:"facebook",theme:"outlined"},Pq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Oq}))},Iq=M.forwardRef(Pq),Rq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M925.9 804l-24-199.2c-.8-6.6-8.9-9.4-13.6-4.7L829 659.5 557.7 388.3c-6.3-6.2-16.4-6.2-22.6 0L433.3 490 156.6 213.3a8.03 8.03 0 00-11.3 0l-45 45.2a8.03 8.03 0 000 11.3L422 591.7c6.2 6.3 16.4 6.3 22.6 0L546.4 490l226.1 226-59.3 59.3a8.01 8.01 0 004.7 13.6l199.2 24c5.1.7 9.5-3.7 8.8-8.9z"}}]},name:"fall",theme:"outlined"},Mq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Rq}))},Fq=M.forwardRef(Mq),Lq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0010.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 00-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"}}]},name:"file-excel",theme:"outlined"},Uq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Lq}))},Bq=M.forwardRef(Uq),$q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"},zq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:$q}))},qq=M.forwardRef(zq),Wq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-.7-29.9 8.3-33.4 21.4-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-pdf",theme:"outlined"},Hq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Wq}))},Am=M.forwardRef(Hq),Vq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},Gq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Vq}))},Yq=M.forwardRef(Gq),Kq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 416H616c-4.4 0-8 3.6-8 8v112c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-56h60v320h-46c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h164c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8h-46V480h60v56c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V424c0-4.4-3.6-8-8-8zM656 296V168c0-4.4-3.6-8-8-8H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8z"}}]},name:"font-size",theme:"outlined"},Xq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Kq}))},Jq=M.forwardRef(Xq),Zq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.4 800.9c.2-.3.5-.6.7-.9C920.6 722.1 960 621.7 960 512s-39.4-210.1-104.8-288c-.2-.3-.5-.5-.7-.8-1.1-1.3-2.1-2.5-3.2-3.7-.4-.5-.8-.9-1.2-1.4l-4.1-4.7-.1-.1c-1.5-1.7-3.1-3.4-4.6-5.1l-.1-.1c-3.2-3.4-6.4-6.8-9.7-10.1l-.1-.1-4.8-4.8-.3-.3c-1.5-1.5-3-2.9-4.5-4.3-.5-.5-1-1-1.6-1.5-1-1-2-1.9-3-2.8-.3-.3-.7-.6-1-1C736.4 109.2 629.5 64 512 64s-224.4 45.2-304.3 119.2c-.3.3-.7.6-1 1-1 .9-2 1.9-3 2.9-.5.5-1 1-1.6 1.5-1.5 1.4-3 2.9-4.5 4.3l-.3.3-4.8 4.8-.1.1c-3.3 3.3-6.5 6.7-9.7 10.1l-.1.1c-1.6 1.7-3.1 3.4-4.6 5.1l-.1.1c-1.4 1.5-2.8 3.1-4.1 4.7-.4.5-.8.9-1.2 1.4-1.1 1.2-2.1 2.5-3.2 3.7-.2.3-.5.5-.7.8C103.4 301.9 64 402.3 64 512s39.4 210.1 104.8 288c.2.3.5.6.7.9l3.1 3.7c.4.5.8.9 1.2 1.4l4.1 4.7c0 .1.1.1.1.2 1.5 1.7 3 3.4 4.6 5l.1.1c3.2 3.4 6.4 6.8 9.6 10.1l.1.1c1.6 1.6 3.1 3.2 4.7 4.7l.3.3c3.3 3.3 6.7 6.5 10.1 9.6 80.1 74 187 119.2 304.5 119.2s224.4-45.2 304.3-119.2a300 300 0 0010-9.6l.3-.3c1.6-1.6 3.2-3.1 4.7-4.7l.1-.1c3.3-3.3 6.5-6.7 9.6-10.1l.1-.1c1.5-1.7 3.1-3.3 4.6-5 0-.1.1-.1.1-.2 1.4-1.5 2.8-3.1 4.1-4.7.4-.5.8-.9 1.2-1.4a99 99 0 003.3-3.7zm4.1-142.6c-13.8 32.6-32 62.8-54.2 90.2a444.07 444.07 0 00-81.5-55.9c11.6-46.9 18.8-98.4 20.7-152.6H887c-3 40.9-12.6 80.6-28.5 118.3zM887 484H743.5c-1.9-54.2-9.1-105.7-20.7-152.6 29.3-15.6 56.6-34.4 81.5-55.9A373.86 373.86 0 01887 484zM658.3 165.5c39.7 16.8 75.8 40 107.6 69.2a394.72 394.72 0 01-59.4 41.8c-15.7-45-35.8-84.1-59.2-115.4 3.7 1.4 7.4 2.9 11 4.4zm-90.6 700.6c-9.2 7.2-18.4 12.7-27.7 16.4V697a389.1 389.1 0 01115.7 26.2c-8.3 24.6-17.9 47.3-29 67.8-17.4 32.4-37.8 58.3-59 75.1zm59-633.1c11 20.6 20.7 43.3 29 67.8A389.1 389.1 0 01540 327V141.6c9.2 3.7 18.5 9.1 27.7 16.4 21.2 16.7 41.6 42.6 59 75zM540 640.9V540h147.5c-1.6 44.2-7.1 87.1-16.3 127.8l-.3 1.2A445.02 445.02 0 00540 640.9zm0-156.9V383.1c45.8-2.8 89.8-12.5 130.9-28.1l.3 1.2c9.2 40.7 14.7 83.5 16.3 127.8H540zm-56 56v100.9c-45.8 2.8-89.8 12.5-130.9 28.1l-.3-1.2c-9.2-40.7-14.7-83.5-16.3-127.8H484zm-147.5-56c1.6-44.2 7.1-87.1 16.3-127.8l.3-1.2c41.1 15.6 85 25.3 130.9 28.1V484H336.5zM484 697v185.4c-9.2-3.7-18.5-9.1-27.7-16.4-21.2-16.7-41.7-42.7-59.1-75.1-11-20.6-20.7-43.3-29-67.8 37.2-14.6 75.9-23.3 115.8-26.1zm0-370a389.1 389.1 0 01-115.7-26.2c8.3-24.6 17.9-47.3 29-67.8 17.4-32.4 37.8-58.4 59.1-75.1 9.2-7.2 18.4-12.7 27.7-16.4V327zM365.7 165.5c3.7-1.5 7.3-3 11-4.4-23.4 31.3-43.5 70.4-59.2 115.4-21-12-40.9-26-59.4-41.8 31.8-29.2 67.9-52.4 107.6-69.2zM165.5 365.7c13.8-32.6 32-62.8 54.2-90.2 24.9 21.5 52.2 40.3 81.5 55.9-11.6 46.9-18.8 98.4-20.7 152.6H137c3-40.9 12.6-80.6 28.5-118.3zM137 540h143.5c1.9 54.2 9.1 105.7 20.7 152.6a444.07 444.07 0 00-81.5 55.9A373.86 373.86 0 01137 540zm228.7 318.5c-39.7-16.8-75.8-40-107.6-69.2 18.5-15.8 38.4-29.7 59.4-41.8 15.7 45 35.8 84.1 59.2 115.4-3.7-1.4-7.4-2.9-11-4.4zm292.6 0c-3.7 1.5-7.3 3-11 4.4 23.4-31.3 43.5-70.4 59.2-115.4 21 12 40.9 26 59.4 41.8a373.81 373.81 0 01-107.6 69.2z"}}]},name:"global",theme:"outlined"},Qq=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:Zq}))},Ra=M.forwardRef(Qq),eW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"},tW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:eW}))},gA=M.forwardRef(tW),nW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},rW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:nW}))},Dy=M.forwardRef(rW),iW={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},aW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:iW}))},sW=M.forwardRef(aW),oW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},lW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:oW}))},Fp=M.forwardRef(lW),cW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 306.9c-113.5 0-205.1 91.6-205.1 205.1S398.5 717.1 512 717.1 717.1 625.5 717.1 512 625.5 306.9 512 306.9zm0 338.4c-73.4 0-133.3-59.9-133.3-133.3S438.6 378.7 512 378.7 645.3 438.6 645.3 512 585.4 645.3 512 645.3zm213.5-394.6c-26.5 0-47.9 21.4-47.9 47.9s21.4 47.9 47.9 47.9 47.9-21.3 47.9-47.9a47.84 47.84 0 00-47.9-47.9zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zm-88 235.8c-7.3 18.2-16.1 31.8-30.2 45.8-14.1 14.1-27.6 22.9-45.8 30.2C695.2 844.7 570.3 840 512 840c-58.3 0-183.3 4.7-235.9-16.1-18.2-7.3-31.8-16.1-45.8-30.2-14.1-14.1-22.9-27.6-30.2-45.8C179.3 695.2 184 570.3 184 512c0-58.3-4.7-183.3 16.1-235.9 7.3-18.2 16.1-31.8 30.2-45.8s27.6-22.9 45.8-30.2C328.7 179.3 453.7 184 512 184s183.3-4.7 235.9 16.1c18.2 7.3 31.8 16.1 45.8 30.2 14.1 14.1 22.9 27.6 30.2 45.8C844.7 328.7 840 453.7 840 512c0 58.3 4.7 183.2-16.2 235.8z"}}]},name:"instagram",theme:"outlined"},uW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:cW}))},dW=M.forwardRef(uW),hW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.7 112H176.3c-35.5 0-64.3 28.8-64.3 64.3v671.4c0 35.5 28.8 64.3 64.3 64.3h671.4c35.5 0 64.3-28.8 64.3-64.3V176.3c0-35.5-28.8-64.3-64.3-64.3zm0 736c-447.8-.1-671.7-.2-671.7-.3.1-447.8.2-671.7.3-671.7 447.8.1 671.7.2 671.7.3-.1 447.8-.2 671.7-.3 671.7zM230.6 411.9h118.7v381.8H230.6zm59.4-52.2c37.9 0 68.8-30.8 68.8-68.8a68.8 68.8 0 10-137.6 0c-.1 38 30.7 68.8 68.8 68.8zm252.3 245.1c0-49.8 9.5-98 71.2-98 60.8 0 61.7 56.9 61.7 101.2v185.7h118.6V584.3c0-102.8-22.2-181.9-142.3-181.9-57.7 0-96.4 31.7-112.3 61.7h-1.6v-52.2H423.7v381.8h118.6V604.8z"}}]},name:"linkedin",theme:"outlined"},fW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:hW}))},pW=M.forwardRef(fW),mW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},gW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:mW}))},Nn=M.forwardRef(gW),yW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"},vW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:yW}))},oh=M.forwardRef(vW),xW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},bW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:xW}))},vi=M.forwardRef(bW),wW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"},AW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:wW}))},jy=M.forwardRef(AW),SW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},EW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:SW}))},kn=M.forwardRef(EW),_W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},DW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:_W}))},xR=M.forwardRef(DW),jW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},TW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:jW}))},CW=M.forwardRef(TW),NW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"},kW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:NW}))},LE=M.forwardRef(kW),OW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M877.1 238.7L770.6 132.3c-13-13-30.4-20.3-48.8-20.3s-35.8 7.2-48.8 20.3L558.3 246.8c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l89.6 89.7a405.46 405.46 0 01-86.4 127.3c-36.7 36.9-79.6 66-127.2 86.6l-89.6-89.7c-13-13-30.4-20.3-48.8-20.3a68.2 68.2 0 00-48.8 20.3L132.3 673c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l106.4 106.4c22.2 22.2 52.8 34.9 84.2 34.9 6.5 0 12.8-.5 19.2-1.6 132.4-21.8 263.8-92.3 369.9-198.3C818 606 888.4 474.6 910.4 342.1c6.3-37.6-6.3-76.3-33.3-103.4zm-37.6 91.5c-19.5 117.9-82.9 235.5-178.4 331s-213 158.9-330.9 178.4c-14.8 2.5-30-2.5-40.8-13.2L184.9 721.9 295.7 611l119.8 120 .9.9 21.6-8a481.29 481.29 0 00285.7-285.8l8-21.6-120.8-120.7 110.8-110.9 104.5 104.5c10.8 10.8 15.8 26 13.3 40.8z"}}]},name:"phone",theme:"outlined"},PW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:OW}))},Ma=M.forwardRef(PW),IW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"},RW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:IW}))},UE=M.forwardRef(RW),MW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},FW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:MW}))},ka=M.forwardRef(FW),LW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},UW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:LW}))},BW=M.forwardRef(UW),$W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917 211.1l-199.2 24c-6.6.8-9.4 8.9-4.7 13.6l59.3 59.3-226 226-101.8-101.7c-6.3-6.3-16.4-6.2-22.6 0L100.3 754.1a8.03 8.03 0 000 11.3l45 45.2c3.1 3.1 8.2 3.1 11.3 0L433.3 534 535 635.7c6.3 6.2 16.4 6.2 22.6 0L829 364.5l59.3 59.3a8.01 8.01 0 0013.6-4.7l24-199.2c.7-5.1-3.7-9.5-8.9-8.8z"}}]},name:"rise",theme:"outlined"},zW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:$W}))},dT=M.forwardRef(zW),qW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"},WW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:qW}))},Sm=M.forwardRef(WW),HW={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"},VW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:HW}))},Da=M.forwardRef(VW),GW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},YW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:GW}))},ja=M.forwardRef(YW),KW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zM402.9 528.8l-77.5 77.5a8.03 8.03 0 000 11.3l34 34c3.1 3.1 8.2 3.1 11.3 0l77.5-77.5c55.7 35.1 130.1 28.4 178.6-20.1 56.3-56.3 56.3-147.5 0-203.8-56.3-56.3-147.5-56.3-203.8 0-48.5 48.5-55.2 123-20.1 178.6zm65.4-133.3c31.3-31.3 82-31.3 113.2 0 31.3 31.3 31.3 82 0 113.2-31.3 31.3-82 31.3-113.2 0s-31.3-81.9 0-113.2z"}}]},name:"security-scan",theme:"outlined"},XW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:KW}))},JW=M.forwardRef(XW),ZW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},QW=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:ZW}))},Ty=M.forwardRef(QW),eH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},tH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:eH}))},Uc=M.forwardRef(tH),nH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},rH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:nH}))},iH=M.forwardRef(rH),aH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},sH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:aH}))},BE=M.forwardRef(sH),oH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 264c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48zm-8 136H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM480 544H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 308H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm356.8-74.4c29-26.3 47.2-64.3 47.2-106.6 0-79.5-64.5-144-144-144s-144 64.5-144 144c0 42.3 18.2 80.3 47.2 106.6-57 32.5-96.2 92.7-99.2 162.1-.2 4.5 3.5 8.3 8 8.3h48.1c4.2 0 7.7-3.3 8-7.6C564 871.2 621.7 816 692 816s128 55.2 131.9 124.4c.2 4.2 3.7 7.6 8 7.6H880c4.6 0 8.2-3.8 8-8.3-2.9-69.5-42.2-129.6-99.2-162.1zM692 591c44.2 0 80 35.8 80 80s-35.8 80-80 80-80-35.8-80-80 35.8-80 80-80z"}}]},name:"solution",theme:"outlined"},lH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:oH}))},cH=M.forwardRef(lH),uH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1zM586 803L293.4 611.7l-18-11.7H146V424h129.4l17.9-11.7L586 221v582zm348-327H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zm-41.9 261.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344z"}}]},name:"sound",theme:"outlined"},dH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:uH}))},hH=M.forwardRef(dH),fH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},pH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:fH}))},Bc=M.forwardRef(pH),mH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},gH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:mH}))},$c=M.forwardRef(gH),yH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},vH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:yH}))},Xr=M.forwardRef(vH),xH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 160h-92v-40c0-4.4-3.6-8-8-8H256c-4.4 0-8 3.6-8 8v40h-92a44 44 0 00-44 44v148c0 81.7 60 149.6 138.2 162C265.7 630.2 359 721.7 476 734.5v105.2H280c-17.7 0-32 14.3-32 32V904c0 4.4 3.6 8 8 8h512c4.4 0 8-3.6 8-8v-32.3c0-17.7-14.3-32-32-32H548V734.5C665 721.7 758.3 630.2 773.8 514 852 501.6 912 433.7 912 352V204a44 44 0 00-44-44zM184 352V232h64v207.6a91.99 91.99 0 01-64-87.6zm520 128c0 49.1-19.1 95.4-53.9 130.1-34.8 34.8-81 53.9-130.1 53.9h-16c-49.1 0-95.4-19.1-130.1-53.9-34.8-34.8-53.9-81-53.9-130.1V184h384v296zm136-128c0 41-26.9 75.8-64 87.6V232h64v120z"}}]},name:"trophy",theme:"outlined"},bH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:xH}))},lh=M.forwardRef(bH),wH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 254.3c-30.6 13.2-63.9 22.7-98.2 26.4a170.1 170.1 0 0075-94 336.64 336.64 0 01-108.2 41.2A170.1 170.1 0 00672 174c-94.5 0-170.5 76.6-170.5 170.6 0 13.2 1.6 26.4 4.2 39.1-141.5-7.4-267.7-75-351.6-178.5a169.32 169.32 0 00-23.2 86.1c0 59.2 30.1 111.4 76 142.1a172 172 0 01-77.1-21.7v2.1c0 82.9 58.6 151.6 136.7 167.4a180.6 180.6 0 01-44.9 5.8c-11.1 0-21.6-1.1-32.2-2.6C211 652 273.9 701.1 348.8 702.7c-58.6 45.9-132 72.9-211.7 72.9-14.3 0-27.5-.5-41.2-2.1C171.5 822 261.2 850 357.8 850 671.4 850 843 590.2 843 364.7c0-7.4 0-14.8-.5-22.2 33.2-24.3 62.3-54.4 85.5-88.2z"}}]},name:"twitter",theme:"outlined"},AH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:wH}))},SH=M.forwardRef(AH),EH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zm-40 376H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"unlock",theme:"outlined"},_H=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:EH}))},hT=M.forwardRef(_H),DH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},jH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:DH}))},Sn=M.forwardRef(jH),TH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-delete",theme:"outlined"},CH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:TH}))},NH=M.forwardRef(CH),kH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},OH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:kH}))},tt=M.forwardRef(OH),PH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560zm176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"video-camera",theme:"outlined"},IH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:PH}))},io=M.forwardRef(IH),RH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 464H528V448h312v128zm0 264H184V184h656v200H496c-17.7 0-32 14.3-32 32v192c0 17.7 14.3 32 32 32h344v200zM580 512a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"wallet",theme:"outlined"},MH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:RH}))},FH=M.forwardRef(MH),LH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},UH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:LH}))},BH=M.forwardRef(UH),$H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M713.5 599.9c-10.9-5.6-65.2-32.2-75.3-35.8-10.1-3.8-17.5-5.6-24.8 5.6-7.4 11.1-28.4 35.8-35 43.3-6.4 7.4-12.9 8.3-23.8 2.8-64.8-32.4-107.3-57.8-150-131.1-11.3-19.5 11.3-18.1 32.4-60.2 3.6-7.4 1.8-13.7-1-19.3-2.8-5.6-24.8-59.8-34-81.9-8.9-21.5-18.1-18.5-24.8-18.9-6.4-.4-13.7-.4-21.1-.4-7.4 0-19.3 2.8-29.4 13.7-10.1 11.1-38.6 37.8-38.6 92s39.5 106.7 44.9 114.1c5.6 7.4 77.7 118.6 188.4 166.5 70 30.2 97.4 32.8 132.4 27.6 21.3-3.2 65.2-26.6 74.3-52.5 9.1-25.8 9.1-47.9 6.4-52.5-2.7-4.9-10.1-7.7-21-13z"}},{tag:"path",attrs:{d:"M925.2 338.4c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"whats-app",theme:"outlined"},zH=function(e,t){return M.createElement(We,He({},e,{ref:t,icon:$H}))},bR=M.forwardRef(zH);const{Header:qH}=Dt,Qr=()=>{const{t:n,language:e,toggleLanguage:t}=Ze(),{settings:r}=ha(),{isAuthenticated:i,logout:a,user:s}=Xn(),o=Rt(),c=jl(),[u,d]=M.useState(!1),h=()=>s?s.role==="CLIENT"?"/client":s.role==="CONSULTANT"?"/consultant":"/admin":"/login",f=()=>{a(),o("/"),d(!1)},p=()=>{const m=c.pathname;return m==="/"?"home":m.startsWith("/about")?"about":m.startsWith("/services")?"services":m.startsWith("/consultants")?"consultants":m.startsWith("/reports")?"reports":m.startsWith("/blog")?"blog":m.startsWith("/contact")?"contact":""},y=({key:m})=>{const v={home:"/",about:"/about",services:"/services",consultants:"/consultants",reports:"/reports",blog:"/blog",contact:"/contact"};v[m]&&(o(v[m]),d(!1))},g=[{key:"home",icon:l.jsx(Dy,{}),label:n("home")},{key:"about",icon:l.jsx(Fp,{}),label:n("about")},{key:"services",icon:l.jsx(hl,{}),label:n("services")},{key:"consultants",icon:l.jsx(Xr,{}),label:n("consultants")},{key:"reports",icon:l.jsx(Kt,{}),label:n("reports")},{key:"blog",icon:l.jsx(Lc,{}),label:n("blog")},{key:"contact",icon:l.jsx(bq,{}),label:n("contact")}];return l.jsxs(qH,{className:"bg-white shadow-lg sticky top-0 z-50 w-full px-3 sm:px-4 md:px-8 backdrop-blur-sm bg-white/95 border-b border-gray-100",style:{height:"auto",paddingInline:0},children:[l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between h-20 sm:h-24 px-4",children:[l.jsx(xc,{to:"/",className:"flex items-center gap-2 sm:gap-3 group flex-shrink-0",children:l.jsx("div",{className:"flex items-center mx-3 gap-2",children:r.websiteLogo?l.jsx("img",{src:r.websiteLogo,alt:r.websiteName||"Logo",className:"h-10 sm:h-12 md:h-14 w-auto object-contain"}):l.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] rounded-lg flex items-center justify-center shadow-md group-hover:shadow-lg transition-all duration-300 group-hover:scale-110 group-hover:rotate-3",children:l.jsx(Fc,{className:"text-white text-lg sm:text-xl md:text-2xl"})})})}),l.jsx("div",{className:"hidden xl:flex items-center gap-2 lg:gap-4 xl:gap-8 flex-1 justify-center",children:l.jsx(ih,{mode:"horizontal",items:g,onClick:y,selectedKeys:[p()],className:`border-0 bg-transparent font-semibold justify-center ${e==="ar"?"text-sm xl:text-base":"text-base xl:text-lg"}`,style:{borderBottom:"none",lineHeight:"80px"}})}),l.jsxs("div",{className:"hidden xl:flex items-center gap-2 xl:gap-4",children:[l.jsx(J,{type:"text",onClick:t,className:"text-[#1a4d3a] hover:text-[#2d5f4f] font-medium text-base xl:text-lg h-10 xl:h-11",children:e==="ar"?"EN":"AR"}),i?l.jsxs(l.Fragment,{children:[l.jsx(J,{type:"text",icon:l.jsx(wm,{}),onClick:()=>o(h()),className:"text-gray-700 hover:text-[#1a4d3a] font-medium text-base xl:text-lg h-10 xl:h-11",children:e==="ar"?"لوحة التحكم":"Dashboard"}),l.jsx(J,{type:"primary",danger:!0,icon:l.jsx(oh,{}),onClick:f,className:"border-0 font-semibold shadow-md hover:shadow-lg transition-all hover:scale-105 h-10 xl:h-12 px-4 xl:px-6 text-sm xl:text-base",children:e==="ar"?"خروج":"Logout"})]}):l.jsxs(l.Fragment,{children:[l.jsx(J,{type:"text",icon:l.jsx(tt,{}),onClick:()=>o("/login"),className:"text-gray-700 hover:text-[#1a4d3a] font-medium text-base xl:text-lg h-10 xl:h-11",children:n("login")}),l.jsx(J,{type:"primary",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] font-semibold shadow-md hover:shadow-lg transition-all hover:scale-105 h-10 xl:h-12 px-4 xl:px-6 text-sm xl:text-base",onClick:()=>o("/register"),children:n("requestConsultation")})]})]}),l.jsx(J,{type:"text",icon:l.jsx(jy,{}),className:"xl:hidden text-[#1a4d3a] hover:bg-gray-100",size:"large",onClick:()=>d(!0)})]}),l.jsxs(nR,{title:l.jsxs("div",{className:"flex items-center gap-2",children:[r.websiteLogo?l.jsx("img",{src:r.websiteLogo,alt:r.websiteName||"Logo",className:"h-8 w-auto object-contain"}):l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] rounded-lg flex items-center justify-center",children:l.jsx(Fc,{className:"text-white text-base"})}),l.jsx("span",{className:"font-bold text-lg",children:r.websiteName||"Jadwa"})]}),placement:e==="ar"?"right":"left",onClose:()=>d(!1),open:u,width:280,className:"mobile-drawer",children:[l.jsx(ih,{mode:"vertical",items:g,className:"border-0 mobile-menu",onClick:y}),l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 space-y-3",children:[l.jsx(J,{block:!0,onClick:()=>{t(),d(!1)},className:"mb-2 h-11 text-base",children:e==="ar"?"Switch to English":"التبديل إلى العربية"}),i?l.jsxs(l.Fragment,{children:[l.jsx(J,{block:!0,type:"primary",icon:l.jsx(wm,{}),className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] border-0 text-white font-semibold h-11 text-base",onClick:()=>{o(h()),d(!1)},children:e==="ar"?"لوحة التحكم":"Dashboard"}),l.jsx(J,{block:!0,danger:!0,type:"text",icon:l.jsx(oh,{}),className:"h-11 text-base",onClick:f,children:e==="ar"?"خروج":"Logout"})]}):l.jsxs(l.Fragment,{children:[l.jsx(J,{block:!0,type:"primary",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] font-semibold h-11 text-base",onClick:()=>{o("/register"),d(!1)},children:n("requestConsultation")}),l.jsx(J,{block:!0,type:"text",icon:l.jsx(tt,{}),className:"h-11 text-base",onClick:()=>{o("/login"),d(!1)},children:n("login")})]})]})]})]})},WH=()=>{const{t:n,language:e}=Ze(),t=Rt(),[r,i]=M.useState([]),[a,s]=M.useState(!0);M.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const c=await cc.getSliders({isActive:"true"});if(!c||!c.sliders){console.warn("Invalid slider response structure:",c),i([]);return}const u="https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site",d=(c.sliders||[]).map(h=>{if(h.image){let f=h.image;/^https?:\/\//.test(f)?(f.includes(`${u}${u}`)&&(f=f.replace(`${u}${u}`,u)),h.image=f):(f=f.startsWith("/")?`${u}${f}`:`${u}/${f}`,h.image=f)}if(h.icon){let f=h.icon;/^https?:\/\//.test(f)?(f.includes(`${u}${u}`)&&(f=f.replace(`${u}${u}`,u)),h.icon=f):(f=f.startsWith("/")?`${u}${f}`:`${u}/${f}`,h.icon=f)}return h});i(d)}catch(c){console.error("Error fetching sliders:",c),i([])}finally{s(!1)}};return!a&&r.length===0?l.jsxs("div",{className:"relative min-h-[400px] sm:min-h-[500px] lg:min-h-[600px] flex items-center justify-center overflow-hidden py-10 md:py-0",children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(https://images.unsplash.com/photo-1552664730-d307ca884978?w=1920)",filter:"brightness(0.3)"},children:l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#1a4d3a]/60 via-[#2d5f4f]/50 to-[#1a4d3a]/60"})}),l.jsx("div",{className:`relative z-10 max-w-7xl mx-auto px-4 sm:px-6 md:px-8 ${e==="ar"?"text-right":"text-left"} w-full`,children:l.jsxs("div",{className:"max-w-4xl",children:[l.jsx("h1",{className:"!text-white text-2xl sm:text-3xl md:text-5xl lg:text-6xl font-extrabold mb-3 sm:mb-6 leading-tight tracking-tight animate-fade-in-down",children:e==="ar"?"نحو قرارات اقتصادية أكثر جدوى":"Towards More Viable Economic Decisions"}),l.jsx("p",{className:"!text-white text-sm sm:text-base md:text-xl lg:text-2xl mb-4 sm:mb-8 md:mb-10 leading-relaxed font-light animate-fade-in-up animate-delay-200",children:e==="ar"?"منصة استشارية متكاملة تقدم حلولاً اقتصادية وإدارية ومالية قائمة على التحليل الكمي والقياس العلمي، لتساعد الشركات والأفراد والجهات الحكومية على اتخاذ قرارات أكثر دقة وكفاءة":"An integrated consulting platform offering economic, administrative, and financial solutions based on quantitative analysis and scientific measurement, helping companies, individuals, and government entities make more accurate and efficient decisions"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center animate-fade-in-up animate-delay-400",children:[l.jsx(J,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 h-10 sm:h-12 md:h-14 px-6 sm:px-8 text-sm sm:text-base lg:text-lg font-semibold text-[#1a4d3a] shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 animate-pulse-once w-full sm:w-auto",icon:e==="ar"?l.jsx(bs,{}):l.jsx(ka,{}),onClick:()=>t("/register"),children:e==="ar"?"احجز استشارة الآن":"Book a Consultation Now"}),l.jsx(J,{size:"large",className:"bg-transparent hover:bg-white/10 border-2 border-white text-white h-10 sm:h-12 md:h-14 px-6 sm:px-8 text-sm sm:text-base lg:text-lg font-semibold backdrop-blur-sm hover:border-[#d4af37] hover:text-[#d4af37] transition-all duration-300 hover-scale w-full sm:w-auto",onClick:()=>t("/services"),children:e==="ar"?"تعرف على خدماتنا":"Learn More About Our Services"})]})]})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 sm:h-24 bg-gradient-to-t from-white via-white/90 to-transparent"})]}):l.jsx(az,{autoplay:!0,effect:"fade",className:"slider-carousel",children:r.map((c,u)=>{const d=e==="ar"&&c.titleAr||c.title,h=e==="ar"&&c.subtitleAr||c.subtitle,f=e==="ar"&&c.descriptionAr||c.description,p=e==="ar"&&c.buttonTextAr||c.buttonText;return l.jsx("div",{children:l.jsxs("div",{className:"relative min-h-[400px] sm:min-h-[500px] lg:min-h-[600px] flex items-center justify-center overflow-hidden py-10 md:py-0",children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:c.image?`url(${c.image})`:"url(https://images.unsplash.com/photo-1552664730-d307ca884978?w=1920)",filter:"brightness(0.3)"},children:l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#1a4d3a]/60 via-[#2d5f4f]/50 to-[#1a4d3a]/60"})}),l.jsx("div",{className:`relative z-10 max-w-7xl mx-auto px-4 sm:px-6 md:px-8 ${e==="ar"?"text-right":"text-left"} w-full`,children:l.jsxs("div",{className:"max-w-4xl",children:[c.icon&&l.jsx("div",{className:"mb-4 sm:mb-6 animate-fade-in-down",children:l.jsx("img",{src:c.icon,alt:"Slider Icon",className:"w-12 h-12 sm:w-16 sm:h-16 md:w-24 md:h-24 object-contain"})}),d&&l.jsx("h1",{className:"!text-white text-2xl sm:text-3xl md:text-5xl lg:text-6xl font-extrabold mb-3 sm:mb-6 leading-tight tracking-tight animate-fade-in-down",children:d}),h&&l.jsx("p",{className:"!text-white text-sm sm:text-base md:text-xl lg:text-2xl mb-2 sm:mb-4 leading-relaxed font-light animate-fade-in-up animate-delay-200",children:h}),f&&l.jsx("p",{className:"!text-gray-200 text-xs sm:text-sm md:text-lg mb-4 sm:mb-8 md:mb-10 leading-relaxed font-light animate-fade-in-up animate-delay-300",children:f}),p&&c.buttonLink&&l.jsx("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center animate-fade-in-up animate-delay-400",children:l.jsx(J,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 h-10 sm:h-12 md:h-14 px-6 sm:px-8 text-sm sm:text-base lg:text-lg font-semibold text-[#1a4d3a] shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 w-full sm:w-auto",icon:e==="ar"?l.jsx(bs,{}):l.jsx(ka,{}),onClick:()=>{c.buttonLink.startsWith("http")?window.open(c.buttonLink,"_blank"):t(c.buttonLink)},children:p})})]})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 sm:h-24 bg-gradient-to-t from-white via-white/90 to-transparent"})]})},c.id)})})},HH=()=>{const{language:n}=Ze(),e=[{icon:Da,title:n==="ar"?"النزاهة":"Integrity",description:n==="ar"?"نلتزم بأعلى معايير الأخلاقيات والشفافية":"We commit to the highest standards of ethics and transparency"},{icon:Sm,title:n==="ar"?"الاحتراف":"Professionalism",description:n==="ar"?"فريق من الخبراء المعتمدين ذوي الخبرة الواسعة":"A team of certified experts with extensive experience"},{icon:bm,title:n==="ar"?"التحليل العلمي":"Scientific Analysis",description:n==="ar"?"اعتماد على أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي":"Relying on econometric analysis tools and artificial intelligence"},{icon:Sm,title:n==="ar"?"الابتكار":"Innovation",description:n==="ar"?"استخدام أحدث التقنيات والأدوات في التحليل والاستشارات":"Using the latest technologies and tools in analysis and consulting"},{icon:gA,title:n==="ar"?"الموثوقية":"Reliability",description:n==="ar"?"نتائج موثوقة ودقيقة قائمة على البيانات والأبحاث":"Reliable and accurate results based on data and research"}],t=({Icon:r})=>l.jsx(r,{className:"text-2xl sm:text-3xl"});return l.jsx("section",{className:"py-12 sm:py-16 md:py-20 lg:py-28 bg-gradient-to-b from-white to-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[l.jsxs("div",{className:"text-center mb-8 sm:mb-12 md:mb-16 animate-fade-in-down",children:[l.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold mb-3 sm:mb-4 text-gray-900",children:n==="ar"?"من نحن":"About Us"}),l.jsx("div",{className:"w-16 sm:w-20 md:w-24 h-1 bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] mx-auto mb-6 sm:mb-8"})]}),l.jsxs(Re,{gutter:[16,24],className:"sm:gutter-[24] md:gutter-[32] mb-8 sm:mb-12 md:mb-16",children:[l.jsx(me,{xs:24,lg:12,children:l.jsxs("div",{className:`${n==="ar"?"text-right":"text-left"}`,children:[l.jsx("h3",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-4 sm:mb-6 text-[#1a4d3a]",children:n==="ar"?"جدوى للاستشارات الإدارية والاقتصادية":"Jadwa for Administrative and Economic Consulting"}),l.jsx("p",{className:"text-sm sm:text-base md:text-lg text-gray-700 mb-4 sm:mb-6 leading-relaxed",children:n==="ar"?"هي منصة سعودية متخصصة في تقديم الخدمات الاستشارية عالية الجودة في مجالات الاقتصاد، الإدارة، والتمويل. نسعى من خلال فريق من الخبراء الأكاديميين والمستشارين المعتمدين إلى تمكين القرارات الاستثمارية والإدارية بالاعتماد على أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي.":"A Saudi platform specialized in providing high-quality consulting services in the fields of economics, management, and finance. Through a team of academic experts and certified consultants, we seek to empower investment and administrative decisions by relying on econometric analysis tools and artificial intelligence."})]})}),l.jsx(me,{xs:24,lg:12,children:l.jsx("div",{className:`${n==="ar"?"text-right":"text-left"}`,children:l.jsx(Ee,{className:"h-full border-0 shadow-lg rounded-xl sm:rounded-2xl bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] text-white",children:l.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 flex items-center gap-2",children:[l.jsx(Zt,{}),n==="ar"?"رسالتنا":"Our Mission"]}),l.jsx("p",{className:"text-sm sm:text-base text-gray-100 leading-relaxed",children:n==="ar"?"دعم صُنّاع القرار والمستثمرين والمشروعات عبر استشارات علمية وعملية موثوقة.":"Supporting decision-makers, investors, and projects through reliable scientific and practical consultations."})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 flex items-center gap-2",children:[l.jsx(bm,{}),n==="ar"?"رؤيتنا":"Our Vision"]}),l.jsx("p",{className:"text-sm sm:text-base text-gray-100 leading-relaxed",children:n==="ar"?"أن نكون المنصة الأولى في العالم العربي في التحليل والاستشارات الاقتصادية المبنية على القياس الكمي.":"To be the leading platform in the Arab world for quantitative-based economic analysis and consulting."})]})]})})})})]}),l.jsxs("div",{className:"mt-8 sm:mt-12 md:mt-16",children:[l.jsx("h3",{className:"text-2xl sm:text-3xl font-bold mb-6 sm:mb-8 text-center text-gray-900",children:n==="ar"?"قيمنا":"Our Values"}),l.jsx(Re,{gutter:[16,16],className:"sm:gutter-[20] md:gutter-[24]",children:e.map((r,i)=>l.jsx(me,{xs:24,sm:12,lg:6,children:l.jsxs(Ee,{className:"h-full border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-xl sm:rounded-2xl text-center hover-lift card-entrance",style:{animationDelay:`${i*.1}s`},styles:{body:{padding:"24px 20px"}},children:[l.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] flex items-center justify-center text-white mx-auto mb-4 sm:mb-6 shadow-lg",children:l.jsx(t,{Icon:r.icon})}),l.jsx("h4",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-gray-900",children:r.title}),l.jsx("p",{className:"text-sm sm:text-base text-gray-600 leading-relaxed",children:r.description})]})},i))})]})]})})},VH=()=>{const{t:n,language:e}=Ze(),t=Rt(),[r,i]=M.useState([]),[a,s]=M.useState(!0);M.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const d=await Hs.getServices({status:"ACTIVE"});i(d.services||[])}catch(d){console.error("Error fetching services:",d),i([])}finally{s(!1)}},c=d=>({ECONOMIC:l.jsx(Fc,{}),ADMINISTRATIVE:l.jsx(Xr,{}),FINANCIAL_ACCOUNTING:l.jsx(Yn,{}),ANALYSIS_REPORTS:l.jsx(Kt,{}),FIELD_SURVEY:l.jsx(ua,{}),DIGITAL_CUSTOMER:l.jsx(io,{})})[d]||l.jsx(rR,{}),u=d=>({ECONOMIC:"from-olive-green-500 to-olive-green-600",ADMINISTRATIVE:"from-turquoise-500 to-turquoise-600",FINANCIAL_ACCOUNTING:"from-olive-green-400 to-turquoise-500",ANALYSIS_REPORTS:"from-turquoise-400 to-olive-green-500",FIELD_SURVEY:"from-olive-green-600 to-turquoise-600",DIGITAL_CUSTOMER:"from-turquoise-500 to-olive-green-500"})[d]||"from-olive-green-500 to-turquoise-500";return l.jsx("section",{className:"py-12 sm:py-16 md:py-20 lg:py-28 bg-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[l.jsxs("div",{className:"text-center mb-8 sm:mb-12 md:mb-16 animate-fade-in-down",children:[l.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold mb-3 sm:mb-4 text-gray-900",children:n("services")}),l.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-gray-600 max-w-3xl mx-auto px-4",children:e==="ar"?"نقدم مجموعة شاملة من الخدمات الاستشارية المتخصصة":"We offer a comprehensive range of specialized consulting services"})]}),a?l.jsx("div",{className:"flex justify-center items-center py-12 sm:py-16 md:py-20",children:l.jsx(kt,{size:"large"})}):r.length>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5 md:gap-6",children:r.slice(0,4).map((d,h)=>l.jsxs(Ee,{className:"h-full border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-xl sm:rounded-2xl overflow-hidden group hover-lift card-entrance flex flex-col",style:{animationDelay:`${h*.1}s`},styles:{body:{padding:"20px 16px",display:"flex",flexDirection:"column",flex:1}},children:[l.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold mb-3 sm:mb-4 text-gray-900 min-h-[48px] sm:min-h-[56px]",children:e==="ar"&&d.titleAr||d.title}),l.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6 leading-relaxed min-h-[60px] sm:min-h-[72px] line-clamp-3 flex-grow",children:e==="ar"&&d.descriptionAr||d.description}),d.price&&d.price>0&&l.jsxs("div",{className:"mb-3 sm:mb-4 text-[#1a4d3a] font-bold text-base sm:text-lg",children:[d.price," ",e==="ar"?"ريال":"SAR"]}),l.jsx(J,{type:"primary",className:"w-full bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 h-10 sm:h-11 font-semibold text-sm sm:text-base shadow-md hover:shadow-lg transition-all duration-300 mb-4",onClick:()=>t("/services"),children:e==="ar"?"طلب عرض تجريبي":"Request Demo"}),l.jsx("div",{className:`w-12 h-12 sm:w-14 sm:h-14 rounded-xl sm:rounded-2xl bg-gradient-to-br ${u(d.category)} flex items-center justify-center text-white mx-auto group-hover:scale-110 transition-transform duration-300 shadow-lg text-xl sm:text-2xl`,children:c(d.category)})]},d.id))}),r.length>4&&l.jsx("div",{className:"text-center mt-8 sm:mt-10 md:mt-12",children:l.jsx(J,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-12 sm:h-14 px-8 sm:px-10 md:px-12 text-base sm:text-lg font-semibold shadow-lg hover:shadow-xl transition-all",icon:e==="ar"?l.jsx(bs,{}):l.jsx(pA,{}),onClick:()=>t("/services"),children:e==="ar"?"عرض جميع الخدمات":"Show All Services"})})]}):l.jsx("div",{className:"text-center py-12 text-gray-500",children:e==="ar"?"لا توجد خدمات متاحة حالياً":"No services available at the moment"})]})})},GH=({limit:n=null,showViewAll:e=!0})=>{const{t,language:r}=Ze(),i=Rt(),[a,s]=M.useState([]),[o,c]=M.useState(!0);M.useEffect(()=>{u()},[]);const u=async()=>{try{c(!0);const d={isAvailable:!0};n&&(d.limit=n);const h=await vs.getConsultants(d);s(h.consultants||[])}catch(d){console.error("Error fetching consultants:",d)}finally{c(!1)}};return l.jsx("section",{className:"py-12 sm:py-16 md:py-20 lg:py-28 bg-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[l.jsxs("div",{className:"text-center mb-8 sm:mb-12 md:mb-16",children:[l.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold mb-3 sm:mb-4 text-gray-900",children:t("ourConsultants")}),l.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-gray-600 max-w-3xl mx-auto px-4",children:r==="ar"?"فريق من المستشارين المتخصصين ذوي الخبرة الواسعة":"A team of specialized consultants with extensive experience"})]}),o?l.jsx("div",{className:"flex justify-center items-center py-12 sm:py-16 md:py-20",children:l.jsx(kt,{size:"large"})}):a.length>0?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8 mb-8 sm:mb-10 md:mb-12",children:a.map((d,h)=>{const f=`${d.firstName||""} ${d.lastName||""}`.trim()||d.user?.email||"Consultant";return l.jsxs(Ee,{className:"text-center border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-xl sm:rounded-2xl hover-lift card-entrance",style:{animationDelay:`${h*.1}s`},styles:{body:{padding:"24px 20px"}},hoverable:!0,children:[l.jsx(Mt,{size:{xs:80,sm:100,md:120},src:d.user?.avatar,icon:l.jsx(tt,{}),className:"mb-4 sm:mb-6 border-4 border-white shadow-xl"}),l.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-gray-900",children:f}),d.specialization&&l.jsx("p",{className:"text-[#1a4d3a] mb-3 sm:mb-4 font-semibold text-sm sm:text-base",children:d.specialization}),d.rating&&l.jsx(Ia,{disabled:!0,defaultValue:d.rating,allowHalf:!0,className:"mb-4 sm:mb-6 text-sm sm:text-base",style:{color:"#d4af37"}}),l.jsx(J,{type:"primary",className:"w-full bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 h-10 sm:h-11 font-semibold text-sm sm:text-base shadow-md hover:shadow-lg transition-all",onClick:()=>i(`/consultants/${d.id}`),children:r==="ar"?"عرض الملف الشخصي":"View Profile"})]},d.id)})}):l.jsx("div",{className:"text-center py-8 sm:py-12 text-gray-500 text-sm sm:text-base",children:r==="ar"?"لا يوجد مستشارون متاحون حالياً":"No consultants available at the moment"}),e&&l.jsx("div",{className:"text-center",children:l.jsx(J,{size:"large",type:"primary",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-12 sm:h-14 px-8 sm:px-10 md:px-12 text-base sm:text-lg font-semibold shadow-lg hover:shadow-xl transition-all w-full sm:w-auto",icon:r==="ar"?l.jsx(pA,{}):l.jsx(pA,{}),onClick:()=>i("/consultants"),children:t("viewAllConsultants")})})]})})},YH=()=>{const{language:n}=Ze(),e=[{title:n==="ar"?"اختر نوع الاستشارة":"Choose Service Type",description:n==="ar"?"اقتصادية – مالية – إدارية – دراسة جدوى – تحليل قياسي":"Economic – Financial – Administrative – Feasibility Study – Econometric Analysis",icon:l.jsx(Zt,{className:"text-3xl"})},{title:n==="ar"?"احجز موعدك":"Book Your Appointment",description:n==="ar"?"عبر الجلسة المرئية أو الدردشة أو الطلب الكتابي":"Via video session, chat, or written request",icon:l.jsx(vn,{className:"text-3xl"})},{title:n==="ar"?"قم بالدفع الإلكتروني":"Make Payment",description:n==="ar"?"باستخدام مدى أو Apple Pay أو البطاقة الائتمانية":"Using Mada, Apple Pay, or credit card",icon:l.jsx(FE,{className:"text-3xl"})},{title:n==="ar"?"احصل على تقريرك":"Get Your Report",description:n==="ar"?"عبر لوحة التحكم الخاصة بك أو البريد الإلكتروني":"Via your dashboard or email",icon:l.jsx(Kt,{className:"text-3xl"})}];return l.jsx("section",{className:"py-20 md:py-28 bg-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:n==="ar"?"آلية العمل في المنصة":"How It Works"}),l.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:n==="ar"?"خطوات بسيطة للحصول على استشارة متخصصة":"Simple steps to get specialized consultation"})]}),l.jsx("div",{className:"max-w-5xl mx-auto",children:l.jsx(Ay,{direction:"horizontal",current:-1,items:e.map((t,r)=>({title:l.jsxs("div",{className:`${n==="ar"?"text-right":"text-left"} mt-4`,children:[l.jsx("div",{className:"text-xl font-bold text-gray-900 mb-2",children:t.title}),l.jsx("div",{className:"text-gray-600 text-sm",children:t.description})]}),icon:l.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] flex items-center justify-center text-white shadow-lg",children:t.icon}),status:"finish"})),className:"mb-12"})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mt-12",children:e.map((t,r)=>l.jsxs(Ee,{className:"border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl text-center",styles:{body:{padding:"32px"}},children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] flex items-center justify-center text-white mx-auto mb-6 shadow-lg",children:t.icon}),l.jsx("div",{className:"text-3xl font-bold text-[#1a4d3a] mb-3",children:r+1}),l.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:t.title}),l.jsx("p",{className:"text-gray-600 leading-relaxed",children:t.description})]},r))})]})})},KH=()=>{const{t:n,language:e}=Ze(),t=[{icon:l.jsx(vn,{className:"text-4xl"}),title:n("instantBooking"),description:e==="ar"?"احجز استشارة في أي وقت مع مستشارك المفضل بسهولة وسرعة":"Book a consultation anytime with your preferred consultant easily and quickly",color:"from-olive-green-500 to-olive-green-600"},{icon:l.jsx(wm,{className:"text-4xl"}),title:n("dashboardReports"),description:e==="ar"?"لوحة تحليلية شاملة مع تقارير مفصلة ورسوم بيانية تفاعلية":"Comprehensive analytical dashboard with detailed reports and interactive charts",color:"from-turquoise-500 to-turquoise-600"},{icon:l.jsx(ME,{className:"text-4xl"}),title:n("supportSectors"),description:e==="ar"?"خدمات مخصصة للقطاعين الحكومي والخاص مع حلول متكاملة":"Customized services for government and private sectors with integrated solutions",color:"from-olive-green-400 to-turquoise-500"}];return l.jsx("section",{className:"py-20 md:py-28 bg-gradient-to-br from-[#f0f7f4] to-[#e8f5f0]",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:n("smartPlatform")}),l.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"منصة ذكية تجمع بين التكنولوجيا والخبرة الاستشارية":"A smart platform that combines technology and consulting expertise"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((r,i)=>l.jsxs(Ee,{className:"text-center bg-white border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl",styles:{body:{padding:"40px 32px"}},children:[l.jsx("div",{className:`w-24 h-24 rounded-2xl bg-gradient-to-br ${r.color} flex items-center justify-center text-white mx-auto mb-6 shadow-lg`,children:r.icon}),l.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:r.title}),l.jsx("p",{className:"text-gray-600 leading-relaxed",children:r.description})]},i))})]})})},wR=()=>{const{t:n,language:e}=Ze(),t=Rt(),r=[{id:1,title:n("saudiEconomy2025"),description:e==="ar"?"تحليل شامل لاتجاهات الاقتصاد السعودي وتوقعات 2025":"Comprehensive analysis of Saudi economy trends and 2025 forecasts",image:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=800",category:e==="ar"?"تحليل اقتصادي":"Economic Analysis"},{id:2,title:n("meccaProjects"),description:e==="ar"?"دراسة تأثير المشاريع الضخمة في مكة المكرمة على الاقتصاد":"Study of mega projects impact in Makkah on the economy",image:"https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=800",category:e==="ar"?"دراسة جدوى":"Feasibility Study"},{id:3,title:n("investmentIndex"),description:e==="ar"?"مؤشر نشاط الاستثمار في المملكة العربية السعودية":"Investment activity index in Saudi Arabia",image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800",category:e==="ar"?"مؤشرات":"Indicators"}];return l.jsx("section",{className:"py-20 md:py-28 bg-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:n("reports")}),l.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"تقارير وتحليلات اقتصادية شاملة ومحدثة":"Comprehensive and up-to-date economic reports and analyses"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:r.map(i=>l.jsx(Ee,{className:"overflow-hidden border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl group",styles:{body:{padding:"0"}},hoverable:!0,cover:l.jsxs("div",{className:"relative h-64 overflow-hidden",children:[l.jsx("img",{alt:i.title,src:i.image,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),l.jsx("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-[#d4af37] to-[#f4d03f] text-[#1a4d3a] px-4 py-2 rounded-full text-sm font-semibold shadow-lg",children:i.category}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx(Kt,{className:"text-[#1a4d3a] text-xl mr-2"}),l.jsx("span",{className:"text-sm text-gray-500 font-medium",children:i.category})]}),l.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900 min-h-[56px]",children:i.title}),l.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed min-h-[72px]",children:i.description}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(J,{type:"primary",icon:l.jsx(Wn,{}),className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 flex-1 font-semibold shadow-md hover:shadow-lg transition-all",onClick:()=>t(`/reports/${i.id}`),children:e==="ar"?"عرض":"View"}),l.jsx(J,{icon:l.jsx(Mr,{}),className:"border-2 border-[#1a4d3a] text-[#1a4d3a] hover:bg-[#1a4d3a] hover:text-white font-semibold transition-all",children:e==="ar"?"تحميل":"Download"})]})]})},i.id))}),l.jsx("div",{className:"text-center",children:l.jsx(J,{size:"large",type:"primary",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-14 px-12 text-lg font-semibold shadow-lg hover:shadow-xl transition-all",onClick:()=>t("/reports"),children:n("viewAllReports")})})]})})},XH=()=>{const{t:n,language:e}=Ze(),t=[{id:1,name:e==="ar"?"أحد عملاء المنصة":"Platform Client",company:e==="ar"?"شركة تطوير الأعمال 2025":"Business Development Company 2025",rating:5,text:e==="ar"?"خدمة متميزة تجمع بين التحليل العلمي والرؤية الاقتصادية الدقيقة.":"Distinguished service that combines scientific analysis and accurate economic vision.",avatar:"https://i.pravatar.cc/150?img=12"},{id:2,name:e==="ar"?"مستثمر من مكة المكرمة":"Investor from Makkah",company:e==="ar"?"مستثمر":"Investor",rating:5,text:e==="ar"?"دراسة الجدوى التي حصلنا عليها من جدوى ساعدتنا في اتخاذ قرار استثماري ناجح.":"The feasibility study we obtained from Jadwa helped us make a successful investment decision.",avatar:"https://i.pravatar.cc/150?img=47"},{id:3,name:e==="ar"?"أحد عملاء المنصة":"Platform Client",company:e==="ar"?"شركة استثمارية":"Investment Company",rating:5,text:e==="ar"?"التحليلات الاقتصادية المقدمة ساعدتنا في فهم السوق بشكل أفضل واتخاذ قرارات مدروسة.":"The economic analyses provided helped us better understand the market and make informed decisions.",avatar:"https://i.pravatar.cc/150?img=33"}];return l.jsx("section",{className:"py-16 md:py-24 bg-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"section-title",children:n("testimonials")}),l.jsx("p",{className:"section-subtitle",children:e==="ar"?"ماذا يقول عملاؤنا عن خدماتنا":"What our clients say about our services"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map(r=>l.jsxs(Ee,{className:"card relative",variant:"borderless",children:[l.jsx("div",{className:"text-6xl text-olive-green-200 absolute top-4 right-4 font-serif leading-none",children:'"'}),l.jsxs("div",{className:"mb-4",children:[l.jsx(Ia,{disabled:!0,defaultValue:r.rating,className:"mb-3"}),l.jsx("p",{className:"text-gray-700 italic",children:r.text})]}),l.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mt-6 pt-4 border-t border-gray-200",children:[l.jsx(Mt,{src:r.avatar,size:50}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:r.name}),l.jsx("div",{className:"text-sm text-gray-500",children:r.company})]})]})]},r.id))})]})})},JH=()=>{const{t:n,language:e}=Ze(),[t,r]=M.useState([]),[i,a]=M.useState(!0);M.useEffect(()=>{o()},[]);const s=c=>{if(!c||/file:\/\//.test(c)||/[A-Za-z]:[\\\/]/.test(c)||/fakepath/i.test(c))return null;if(/^https?:\/\//.test(c))return c;const u="https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site";return c.startsWith("/")?`${u}${c}`:`${u}/${c}`},o=async()=>{try{a(!0);const u=((await lc.getPartners({isActive:"true"})).partners||[]).map(d=>({...d,logo:s(d.logo)}));r(u)}catch(c){console.error("Error fetching partners:",c)}finally{a(!1)}};return i?l.jsx("section",{className:"py-20 md:py-28 bg-gray-50",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(kt,{size:"large"})})})}):t.length===0?null:l.jsx("section",{className:"py-20 md:py-28 bg-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:n("partners")}),l.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"نفتخر بشراكاتنا مع المؤسسات الرائدة":"We are proud of our partnerships with leading institutions"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8 items-center",children:t.map(c=>l.jsx("div",{className:"flex items-center justify-center p-6 bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2",children:c.logo?l.jsx("img",{src:c.logo,alt:e==="ar"&&c.nameAr?c.nameAr:c.name,className:"max-w-full h-auto max-h-16 opacity-70 hover:opacity-100 transition-opacity duration-300",onError:u=>{c.logo&&(/[A-Za-z]:[\\\/]/.test(c.logo)||/fakepath/i.test(c.logo))||console.error("Failed to load partner logo:",c.logo),u.target.style.display="none"}}):l.jsx("span",{className:"text-gray-400 text-sm",children:e==="ar"&&c.nameAr?c.nameAr:c.name})},c.id))})]})})},ZH=()=>{const{language:n}=Ze(),e=Rt(),[t,r]=M.useState([]),[i,a]=M.useState(!0);M.useEffect(()=>{s()},[]);const s=async()=>{try{const o=await ar.getArticles({status:"PUBLISHED",limit:3}),c="https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site",u=(o.articles?.slice(0,3)||[]).map(d=>{if(d.featuredImage){let h=d.featuredImage;/^https?:\/\//.test(h)?(h.includes(`${c}${c}`)||h.match(/http:\/\/localhost:5000/g)?.length>1)&&(h=h.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),h=`https://jadwa.developteam.site${h}`):h=h.startsWith("/")?`${c}${h}`:`${c}/${h}`,d.featuredImage=h}return d});r(u)}catch(o){console.error("Error fetching articles:",o)}finally{a(!1)}};return i?l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(kt,{size:"large"})}):t.length===0?null:l.jsx("section",{className:"py-16 bg-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-4xl font-bold mb-4",children:n==="ar"?"آخر المقالات":"Latest Articles"}),l.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:n==="ar"?"اكتشف آخر الأخبار والمقالات حول الاستشارات والدراسات الاقتصادية":"Discover the latest news and articles about consulting and economic studies"})]}),l.jsx(Re,{gutter:[24,24],children:t.map(o=>l.jsx(me,{xs:24,sm:12,lg:8,children:l.jsx(Ee,{hoverable:!0,className:"h-full transition-all duration-300 hover:shadow-xl",style:{borderRadius:"12px",overflow:"hidden"},cover:o.featuredImage?l.jsxs("div",{className:"relative h-56 overflow-hidden",children:[l.jsx("img",{alt:n==="ar"&&o.titleAr||o.title,src:o.featuredImage,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:c=>{console.error("Failed to load article image:",o.featuredImage),c.target.style.display="none"}}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}):l.jsx("div",{className:"h-56 bg-gradient-to-br from-[#1a4d3a] to-[#2d5f4f] flex items-center justify-center",children:l.jsx("span",{className:"text-white text-5xl font-bold",children:n==="ar"?(o.titleAr||o.title).charAt(0):o.title.charAt(0)})}),onClick:()=>e(`/blog/${o.slug}`),children:l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"mb-3",children:o.category&&l.jsx($e,{color:"blue",className:"mb-2",children:o.category})}),l.jsx("h3",{className:"text-xl font-bold mb-3 line-clamp-2 text-gray-900 group-hover:text-[#1a4d3a] transition-colors min-h-[56px]",children:n==="ar"&&o.titleAr||o.title}),o.excerpt&&l.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3 leading-relaxed min-h-[72px]",children:n==="ar"&&o.excerptAr||o.excerpt}),l.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4 pb-4 border-b border-gray-100",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(vn,{}),qe(o.publishedAt||o.createdAt).format("YYYY-MM-DD")]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Wn,{}),o.views||0]})]}),l.jsx(J,{type:"link",icon:l.jsx(xm,{}),className:"p-0 text-[#1a4d3a] hover:text-[#2d5f4f] font-semibold",onClick:c=>{c.stopPropagation(),e(`/blog/${o.slug}`)},children:n==="ar"?"اقرأ المزيد":"Read More"})]})})},o.id))}),l.jsx("div",{className:"text-center mt-8",children:l.jsx(J,{type:"primary",size:"large",className:"bg-olive-green-600 hover:bg-olive-green-700",onClick:()=>e("/blog"),children:n==="ar"?"عرض جميع المقالات":"View All Articles"})})]})})},{Footer:QH}=Dt,ei=()=>{const{t:n,language:e}=Ze(),{settings:t}=ha(),r=[{label:n("home"),path:"/"},{label:n("about"),path:"/about"},{label:n("services"),path:"/services"},{label:n("consultants"),path:"/consultants"},{label:n("reports"),path:"/reports"},{label:n("blog"),path:"/blog"},{label:n("contact"),path:"/contact"},{label:e==="ar"?"الشروط والأحكام":"Terms & Conditions",path:"/terms"}];return l.jsx(QH,{className:"bg-gray-900 text-white py-8 sm:py-10 md:py-12",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[l.jsxs(Re,{gutter:[24,32],className:"sm:gutter-[32]",children:[l.jsxs(me,{xs:24,sm:12,md:6,children:[l.jsx("div",{className:"flex items-center mb-4",children:t.websiteLogo?l.jsx("img",{src:t.websiteLogo,alt:`${t.websiteName||"Jadwa"} - ${t.websiteNameAr||"جدوى"}`,className:"h-12 sm:h-14 md:h-16 w-auto object-contain"}):l.jsx("div",{className:"text-white text-xl sm:text-2xl font-bold",children:t.websiteName||"Jadwa"})}),l.jsx("p",{className:"text-gray-400 text-xs sm:text-sm mb-4 leading-relaxed",children:e==="ar"?"منصة متخصصة في الاستشارات الاقتصادية والإدارية":"A specialized platform for economic and administrative consulting"}),l.jsxs("div",{className:"flex space-x-4 space-x-reverse",children:[l.jsx("a",{href:"#",className:"text-gray-400 hover:text-turquoise-400 transition-colors",children:l.jsx(Iq,{className:"text-lg sm:text-xl"})}),l.jsx("a",{href:"#",className:"text-gray-400 hover:text-turquoise-400 transition-colors",children:l.jsx(SH,{className:"text-lg sm:text-xl"})}),l.jsx("a",{href:"#",className:"text-gray-400 hover:text-turquoise-400 transition-colors",children:l.jsx(pW,{className:"text-lg sm:text-xl"})}),l.jsx("a",{href:"#",className:"text-gray-400 hover:text-turquoise-400 transition-colors",children:l.jsx(dW,{className:"text-lg sm:text-xl"})})]})]}),l.jsxs(me,{xs:24,sm:12,md:6,children:[l.jsx("h3",{className:"text-base sm:text-lg font-bold mb-3 sm:mb-4",children:n("quickLinks")}),l.jsx("ul",{className:"space-y-2",children:r.map((i,a)=>l.jsx("li",{children:l.jsx(xc,{to:i.path,className:"text-gray-400 hover:text-turquoise-400 transition-colors text-xs sm:text-sm block py-1",children:i.label})},a))})]}),l.jsxs(me,{xs:24,sm:12,md:6,children:[l.jsx("h3",{className:"text-base sm:text-lg font-bold mb-3 sm:mb-4",children:n("contactInfo")}),l.jsxs("ul",{className:"space-y-2 sm:space-y-3",children:[l.jsxs("li",{className:"flex items-center space-x-2 space-x-reverse text-gray-400 text-xs sm:text-sm",children:[l.jsx(Ma,{className:"text-turquoise-400 flex-shrink-0"}),l.jsx("span",{children:"9200 00000"})]}),l.jsxs("li",{className:"flex items-center space-x-2 space-x-reverse text-gray-400 text-xs sm:text-sm",children:[l.jsx(vi,{className:"text-turquoise-400 flex-shrink-0"}),l.jsx("span",{className:"break-all",children:"info@jadwa.sa"})]}),l.jsxs("li",{className:"flex items-center space-x-2 space-x-reverse text-gray-400 text-xs sm:text-sm",children:[l.jsx(bR,{className:"text-turquoise-400 flex-shrink-0"}),l.jsx("a",{href:"#",className:"hover:text-turquoise-400",children:e==="ar"?"واتساب":"WhatsApp"})]}),l.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse text-gray-400 text-xs sm:text-sm",children:[l.jsx(_y,{className:"text-turquoise-400 mt-1 flex-shrink-0"}),l.jsx("span",{className:"leading-relaxed",children:e==="ar"?"مكة المكرمة – المملكة العربية السعودية":"Makkah Al-Mukarramah – Saudi Arabia"})]}),l.jsx("li",{className:"flex items-center space-x-2 space-x-reverse text-gray-400 text-xs sm:text-sm",children:l.jsx("a",{href:"https://www.jadwa.sa",className:"hover:text-turquoise-400 break-all",children:"www.jadwa.sa"})})]})]}),l.jsxs(me,{xs:24,sm:12,md:6,children:[l.jsx("h3",{className:"text-base sm:text-lg font-bold mb-3 sm:mb-4",children:e==="ar"?"معلومات قانونية":"Legal"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsx("li",{children:l.jsx(xc,{to:"/privacy",className:"text-gray-400 hover:text-turquoise-400 transition-colors text-xs sm:text-sm block py-1",children:n("privacy")})}),l.jsx("li",{children:l.jsx(xc,{to:"/terms",className:"text-gray-400 hover:text-turquoise-400 transition-colors text-xs sm:text-sm block py-1",children:n("terms")})})]})]})]}),l.jsx("div",{className:"border-t border-gray-800 mt-6 sm:mt-8 pt-6 sm:pt-8 text-center text-gray-400 text-xs sm:text-sm px-4",children:e==="ar"?`© 2025 ${t.websiteNameAr||"جدوى"} للاستشارات الإدارية والاقتصادية – جميع الحقوق محفوظة`:`© 2025 ${t.websiteName||"Jadwa"} for Administrative and Economic Consulting – All Rights Reserved`})]})})},Tl=()=>{const[n,e]=M.useState(!1);M.useEffect(()=>{const r=()=>{window.pageYOffset>300?e(!0):e(!1)};return window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[]);const t=()=>{window.scrollTo({top:0,behavior:"smooth"})};return n?l.jsx(J,{type:"primary",shape:"circle",icon:l.jsx(Gz,{}),onClick:t,className:"scroll-to-top-btn",size:"large",style:{position:"fixed",bottom:"30px",right:"30px",zIndex:1e3,width:"50px",height:"50px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",background:"linear-gradient(135deg, #7a8c66 0%, #14b8a6 100%)",border:"none"}}):null},{Content:eV}=Dt,tV=()=>l.jsxs(Dt,{className:"min-h-screen",children:[l.jsx(Qr,{}),l.jsxs(eV,{children:[l.jsx(WH,{}),l.jsx(HH,{}),l.jsx(VH,{}),l.jsx(GH,{}),l.jsx(YH,{}),l.jsx(KH,{}),l.jsx(wR,{}),l.jsx(ZH,{}),l.jsx(XH,{}),l.jsx(JH,{})]}),l.jsx(ei,{}),l.jsx(Tl,{})]}),{Content:nV}=Dt,rV=()=>{const{t:n,language:e}=Ze(),t=[{icon:l.jsx(Da,{className:"text-4xl"}),title:e==="ar"?"النزاهة والشفافية":"Integrity & Transparency",description:e==="ar"?"نلتزم بأعلى معايير الأخلاقيات والشفافية في جميع تعاملاتنا مع العملاء":"We commit to the highest standards of ethics and transparency in all our client interactions"},{icon:l.jsx(Sm,{className:"text-4xl"}),title:e==="ar"?"الاحترافية":"Professionalism",description:e==="ar"?"فريق من الخبراء المعتمدين ذوي الخبرة الواسعة في مختلف المجالات الاستشارية":"A team of certified experts with extensive experience in various consulting fields"},{icon:l.jsx(bm,{className:"text-4xl"}),title:e==="ar"?"التحليل العلمي":"Scientific Analysis",description:e==="ar"?"اعتماد على أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي في تقديم الحلول":"Relying on econometric analysis tools and artificial intelligence in providing solutions"},{icon:l.jsx(gA,{className:"text-4xl"}),title:e==="ar"?"الموثوقية":"Reliability",description:e==="ar"?"نتائج موثوقة ودقيقة قائمة على البيانات والأبحاث العلمية المعتمدة":"Reliable and accurate results based on data and accredited scientific research"}],r=[{icon:l.jsx(Fc,{className:"text-3xl"}),title:e==="ar"?"الاستشارات الاقتصادية":"Economic Consulting",description:e==="ar"?"تحليل اقتصادي شامل ودراسات جدوى للمشاريع الاستثمارية":"Comprehensive economic analysis and feasibility studies for investment projects"},{icon:l.jsx(Xr,{className:"text-3xl"}),title:e==="ar"?"الاستشارات الإدارية":"Administrative Consulting",description:e==="ar"?"تحسين الهياكل التنظيمية وإدارة الموارد البشرية":"Organizational structure improvement and human resources management"},{icon:l.jsx(yR,{className:"text-3xl"}),title:e==="ar"?"الاستشارات المالية والمحاسبية":"Financial & Accounting Consulting",description:e==="ar"?"تحليل مالي متقدم وخدمات محاسبية متخصصة":"Advanced financial analysis and specialized accounting services"},{icon:l.jsx(Kt,{className:"text-3xl"}),title:e==="ar"?"التقارير والدراسات":"Reports & Studies",description:e==="ar"?"إعداد تقارير احترافية ودراسات متخصصة في مختلف المجالات":"Professional report preparation and specialized studies in various fields"}];return l.jsxs(Dt,{className:"min-h-screen bg-gray-50",children:[l.jsx(Qr,{}),l.jsx(nV,{className:"py-16",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold text-gray-900 mb-6",children:e==="ar"?"من نحن":"About Us"}),l.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-olive-green-600 to-turquoise-500 mx-auto mb-8"}),l.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-4xl mx-auto leading-relaxed",children:e==="ar"?"منصة جدوى للاستشارات الإدارية والاقتصادية - منصة سعودية رائدة في تقديم الحلول الاستشارية المتخصصة":"Jadwa for Administrative and Economic Consulting - A leading Saudi platform providing specialized consulting solutions"})]}),l.jsx(Ee,{className:"bg-white shadow-lg rounded-2xl border-0 mb-12",children:l.jsxs(Re,{gutter:[32,32],align:"middle",children:[l.jsx(me,{xs:24,lg:12,children:l.jsxs("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 text-gray-900",children:e==="ar"?"من نحن":"Who We Are"}),l.jsx("p",{className:"text-lg text-gray-700 mb-6 leading-relaxed",children:e==="ar"?"منصة جدوى هي منصة سعودية متخصصة في تقديم الخدمات الاستشارية عالية الجودة في مجالات الاقتصاد، الإدارة، والتمويل. نسعى من خلال فريق من الخبراء الأكاديميين والمستشارين المعتمدين إلى تمكين القرارات الاستثمارية والإدارية بالاعتماد على أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي.":"Jadwa is a Saudi platform specialized in providing high-quality consulting services in the fields of economics, management, and finance. Through a team of academic experts and certified consultants, we seek to empower investment and administrative decisions by relying on econometric analysis tools and artificial intelligence."}),l.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:e==="ar"?"نقدم حلولاً شاملة ومتكاملة تساعد الشركات والأفراد والجهات الحكومية على اتخاذ قرارات مدروسة ومبنية على بيانات دقيقة وتحليلات علمية متقدمة.":"We provide comprehensive and integrated solutions that help companies, individuals, and government entities make informed decisions based on accurate data and advanced scientific analysis."})]})}),l.jsx(me,{xs:24,lg:12,children:l.jsx("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:l.jsx(Ee,{className:"border-0 shadow-lg bg-gradient-to-br from-olive-green-600 to-turquoise-500 text-white",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"text-xl font-bold mb-3 flex items-center gap-2",children:[l.jsx(bm,{}),e==="ar"?"رؤيتنا":"Our Vision"]}),l.jsx("p",{className:"text-gray-100 leading-relaxed",children:e==="ar"?"أن نكون المنصة الأولى في العالم العربي في التحليل والاستشارات الاقتصادية المبنية على القياس الكمي والذكاء الاصطناعي، وأن نكون الشريك المفضل لصُنّاع القرار والمستثمرين.":"To be the leading platform in the Arab world for quantitative-based economic analysis and consulting, and to be the preferred partner for decision-makers and investors."})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-xl font-bold mb-3 flex items-center gap-2",children:[l.jsx(Sm,{}),e==="ar"?"مهمتنا":"Our Mission"]}),l.jsx("p",{className:"text-gray-100 leading-relaxed",children:e==="ar"?"دعم صُنّاع القرار والمستثمرين والمشروعات عبر استشارات علمية وعملية موثوقة، وتمكينهم من اتخاذ قرارات استراتيجية مبنية على تحليلات دقيقة وبيانات موثوقة.":"Supporting decision-makers, investors, and projects through reliable scientific and practical consultations, enabling them to make strategic decisions based on accurate analysis and reliable data."})]})]})})})})]})}),l.jsxs(Re,{gutter:[16,16],className:"mb-12",children:[l.jsx(me,{xs:12,sm:6,children:l.jsx(Ee,{className:"bg-white shadow-lg border-0 text-center hover:shadow-xl transition-shadow",children:l.jsx(pt,{title:e==="ar"?"مستشارون خبراء":"Expert Consultants",value:50,prefix:l.jsx(tt,{className:"text-olive-green-600"}),valueStyle:{color:"#7a8c66",fontSize:"28px",fontWeight:"bold"}})})}),l.jsx(me,{xs:12,sm:6,children:l.jsx(Ee,{className:"bg-white shadow-lg border-0 text-center hover:shadow-xl transition-shadow",children:l.jsx(pt,{title:e==="ar"?"مشروع مكتمل":"Completed Projects",value:500,prefix:l.jsx(Zt,{className:"text-turquoise-500"}),valueStyle:{color:"#14b8a6",fontSize:"28px",fontWeight:"bold"}})})}),l.jsx(me,{xs:12,sm:6,children:l.jsx(Ee,{className:"bg-white shadow-lg border-0 text-center hover:shadow-xl transition-shadow",children:l.jsx(pt,{title:e==="ar"?"عميل راضٍ":"Satisfied Clients",value:1e3,prefix:l.jsx(gA,{className:"text-pink-500"}),valueStyle:{color:"#ec4899",fontSize:"28px",fontWeight:"bold"}})})}),l.jsx(me,{xs:12,sm:6,children:l.jsx(Ee,{className:"bg-white shadow-lg border-0 text-center hover:shadow-xl transition-shadow",children:l.jsx(pt,{title:e==="ar"?"سنة خبرة":"Years of Experience",value:10,prefix:l.jsx(lh,{className:"text-yellow-500"}),valueStyle:{color:"#eab308",fontSize:"28px",fontWeight:"bold"}})})})]}),l.jsxs("div",{className:"mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900",children:e==="ar"?"خدماتنا":"Our Services"}),l.jsx(Re,{gutter:[24,24],children:r.map((i,a)=>l.jsx(me,{xs:24,sm:12,lg:6,children:l.jsxs(Ee,{className:"bg-white shadow-lg border-0 h-full text-center hover:shadow-xl transition-shadow",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-olive-green-600 to-turquoise-500 flex items-center justify-center text-white mx-auto mb-6 shadow-md",children:i.icon}),l.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:i.title}),l.jsx("p",{className:"text-gray-600 leading-relaxed",children:i.description})]})},a))})]}),l.jsxs("div",{className:"mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900",children:e==="ar"?"قيمنا الأساسية":"Our Core Values"}),l.jsx(Re,{gutter:[24,24],children:t.map((i,a)=>l.jsx(me,{xs:24,sm:12,lg:6,children:l.jsxs(Ee,{className:"bg-white shadow-lg border-0 h-full text-center hover:shadow-xl transition-shadow",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-olive-green-600 to-turquoise-500 flex items-center justify-center text-white mx-auto mb-6 shadow-md",children:i.icon}),l.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:i.title}),l.jsx("p",{className:"text-gray-600 leading-relaxed",children:i.description})]})},a))})]}),l.jsxs(Ee,{className:"bg-white shadow-xl rounded-2xl border-0 mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900",children:e==="ar"?"لماذا تختار جدوى؟":"Why Choose Jadwa?"}),l.jsxs(Re,{gutter:[32,32],children:[l.jsx(me,{xs:24,md:12,children:l.jsx("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:l.jsxs("ul",{className:"space-y-4 text-lg text-gray-700",children:[l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(Zt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),l.jsx("span",{children:e==="ar"?"فريق من الخبراء المعتمدين ذوي الخبرة الواسعة في مختلف المجالات":"A team of certified experts with extensive experience in various fields"})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(Zt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),l.jsx("span",{children:e==="ar"?"استخدام أحدث أدوات التحليل الاقتصادي القياسي والذكاء الاصطناعي":"Using the latest econometric analysis tools and artificial intelligence"})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(Zt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),l.jsx("span",{children:e==="ar"?"نتائج موثوقة ودقيقة قائمة على البيانات والأبحاث العلمية":"Reliable and accurate results based on data and scientific research"})]})]})})}),l.jsx(me,{xs:24,md:12,children:l.jsx("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:l.jsxs("ul",{className:"space-y-4 text-lg text-gray-700",children:[l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(Zt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),l.jsx("span",{children:e==="ar"?"حلول مخصصة تلبي احتياجات كل عميل بشكل فريد":"Customized solutions that uniquely meet each client's needs"})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(Zt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),l.jsx("span",{children:e==="ar"?"التزام بأعلى معايير الجودة والشفافية في جميع الخدمات":"Commitment to the highest standards of quality and transparency in all services"})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(Zt,{className:"text-olive-green-600 text-2xl mt-1 flex-shrink-0"}),l.jsx("span",{children:e==="ar"?"دعم مستمر ومتابعة بعد تقديم الخدمة لضمان تحقيق النتائج":"Continuous support and follow-up after service delivery to ensure results"})]})]})})})]})]}),l.jsx(Ee,{className:"bg-white shadow-lg rounded-2xl border-0 mb-12",children:l.jsxs(Re,{gutter:[32,32],align:"middle",children:[l.jsx(me,{xs:24,lg:12,children:l.jsxs("div",{className:`${e==="ar"?"text-right":"text-left"}`,children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 text-gray-900",children:e==="ar"?"قصتنا":"Our Story"}),l.jsx("p",{className:"text-lg text-gray-700 mb-4 leading-relaxed",children:e==="ar"?"بدأت منصة جدوى رحلتها بهدف واضح: تمكين الشركات والأفراد من اتخاذ قرارات اقتصادية وإدارية مدروسة ومبنية على بيانات دقيقة. تأسست المنصة على يد مجموعة من الخبراء الأكاديميين والمستشارين المعتمدين الذين يجمعون بين المعرفة النظرية العميقة والخبرة العملية الواسعة.":"Jadwa Platform began its journey with a clear goal: to enable companies and individuals to make informed economic and administrative decisions based on accurate data. The platform was founded by a group of academic experts and certified consultants who combine deep theoretical knowledge with extensive practical experience."}),l.jsx("p",{className:"text-lg text-gray-700 mb-4 leading-relaxed",children:e==="ar"?"على مر السنين، طورنا منهجيات متقدمة في التحليل الاقتصادي القياسي، ودمجنا أحدث تقنيات الذكاء الاصطناعي في عملياتنا لضمان تقديم تحليلات دقيقة وموثوقة. نحن فخورون بكوننا شريكاً موثوقاً للعديد من الشركات الكبرى والمؤسسات الحكومية في المملكة العربية السعودية.":"Over the years, we have developed advanced methodologies in econometric analysis and integrated the latest artificial intelligence technologies into our processes to ensure accurate and reliable analysis. We are proud to be a trusted partner for many major companies and government institutions in Saudi Arabia."})]})}),l.jsx(me,{xs:24,lg:12,children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-gradient-to-br from-olive-green-50 to-turquoise-50 p-6 rounded-lg text-center",children:[l.jsx(lh,{className:"text-4xl text-olive-green-600 mb-3"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e==="ar"?"الجودة":"Quality"}),l.jsx("p",{className:"text-gray-600 text-sm",children:e==="ar"?"نلتزم بأعلى معايير الجودة في جميع خدماتنا":"We commit to the highest quality standards in all our services"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-turquoise-50 to-olive-green-50 p-6 rounded-lg text-center",children:[l.jsx(Mz,{className:"text-4xl text-turquoise-600 mb-3"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e==="ar"?"الدقة":"Accuracy"}),l.jsx("p",{className:"text-gray-600 text-sm",children:e==="ar"?"تحليلات دقيقة مبنية على بيانات موثوقة":"Accurate analysis based on reliable data"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-olive-green-50 to-turquoise-50 p-6 rounded-lg text-center",children:[l.jsx(cH,{className:"text-4xl text-olive-green-600 mb-3"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e==="ar"?"الحلول":"Solutions"}),l.jsx("p",{className:"text-gray-600 text-sm",children:e==="ar"?"حلول مخصصة تلبي احتياجات كل عميل":"Customized solutions that meet each client's needs"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-turquoise-50 to-olive-green-50 p-6 rounded-lg text-center",children:[l.jsx(ME,{className:"text-4xl text-turquoise-600 mb-3"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e==="ar"?"الخبرة":"Expertise"}),l.jsx("p",{className:"text-gray-600 text-sm",children:e==="ar"?"فريق من الخبراء المعتمدين":"A team of certified experts"})]})]})})]})}),l.jsxs(Ee,{className:"bg-white shadow-lg rounded-2xl border-0 mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900",children:e==="ar"?"منهجيتنا":"Our Approach"}),l.jsxs(Re,{gutter:[24,24],children:[l.jsx(me,{xs:24,md:8,children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-olive-green-100 flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-2xl font-bold text-olive-green-600",children:"1"})}),l.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:e==="ar"?"التحليل":"Analysis"}),l.jsx("p",{className:"text-gray-600 leading-relaxed",children:e==="ar"?"نبدأ بتحليل شامل للوضع الحالي وجمع البيانات اللازمة لفهم التحديات والفرص المتاحة":"We start with a comprehensive analysis of the current situation and collect the necessary data to understand challenges and opportunities"})]})}),l.jsx(me,{xs:24,md:8,children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-turquoise-100 flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-2xl font-bold text-turquoise-600",children:"2"})}),l.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:e==="ar"?"التخطيط":"Planning"}),l.jsx("p",{className:"text-gray-600 leading-relaxed",children:e==="ar"?"نطور استراتيجية واضحة وخطة عمل مفصلة مبنية على التحليل والبيانات المتاحة":"We develop a clear strategy and detailed action plan based on analysis and available data"})]})}),l.jsx(me,{xs:24,md:8,children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-olive-green-100 flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-2xl font-bold text-olive-green-600",children:"3"})}),l.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:e==="ar"?"التنفيذ":"Implementation"}),l.jsx("p",{className:"text-gray-600 leading-relaxed",children:e==="ar"?"ننفذ الحلول المقترحة مع متابعة مستمرة وضمان تحقيق النتائج المرجوة":"We implement the proposed solutions with continuous follow-up and ensure achieving the desired results"})]})})]})]}),l.jsxs(Ee,{className:"bg-gradient-to-r from-olive-green-600 to-turquoise-500 text-white rounded-2xl border-0 text-center p-8",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:e==="ar"?"هل تريد معرفة المزيد؟":"Want to Know More?"}),l.jsx("p",{className:"text-xl mb-6 text-gray-100",children:e==="ar"?"تواصل معنا اليوم واحصل على استشارة مجانية":"Contact us today and get a free consultation"}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ra,{className:"text-2xl"}),l.jsx("span",{className:"text-lg",children:"www.jadwa.com"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Xr,{className:"text-2xl"}),l.jsx("span",{className:"text-lg",children:e==="ar"?"فريق الدعم متاح 24/7":"Support team available 24/7"})]})]})]})]})})}),l.jsx(ei,{}),l.jsx(Tl,{})]})},{Content:iV}=Dt,{Search:X1e}=ye,aV=()=>{const{language:n}=Ze(),e=Rt(),[t,r]=M.useState([]),[i,a]=M.useState(!0),[s,o]=M.useState(null),[c,u]=M.useState(""),[d,h]=M.useState("all");M.useEffect(()=>{f()},[c,d]);const f=async()=>{try{a(!0),o(null);const A={status:"ACTIVE"};c&&(A.search=c),d!=="all"&&(A.category=d);const w=await Hs.getServices(A);r(w.services||[])}catch(A){console.error("Error fetching services:",A),o(A.message||"Failed to load services")}finally{a(!1)}},p=()=>{u(""),h("all")},y=c||d!=="all",g=A=>A?typeof A=="string"?A:typeof A=="object"?A.name||A.slug||"":String(A):"",m=A=>{const w=g(A);return{ECONOMIC:l.jsx(Fc,{className:"text-4xl"}),ADMINISTRATIVE:l.jsx(Xr,{className:"text-4xl"}),FINANCIAL_ACCOUNTING:l.jsx(Yn,{className:"text-4xl"}),ANALYSIS_REPORTS:l.jsx(Kt,{className:"text-4xl"}),FIELD_SURVEY:l.jsx(ua,{className:"text-4xl"}),DIGITAL_CUSTOMER:l.jsx(io,{className:"text-4xl"})}[w]||l.jsx(Kt,{className:"text-4xl"})},v=A=>{const w=g(A);return{ECONOMIC:"from-olive-green-500 to-olive-green-600",ADMINISTRATIVE:"from-turquoise-500 to-turquoise-600",FINANCIAL_ACCOUNTING:"from-olive-green-400 to-turquoise-500",ANALYSIS_REPORTS:"from-turquoise-400 to-olive-green-500",FIELD_SURVEY:"from-olive-green-600 to-turquoise-600",DIGITAL_CUSTOMER:"from-turquoise-500 to-olive-green-500"}[w]||"from-olive-green-500 to-turquoise-500"},x=A=>{const w=g(A);if(typeof A=="object"&&A!==null){if(n==="ar"&&A.nameAr)return A.nameAr;if(A.name)return A.name}return{ECONOMIC:n==="ar"?"اقتصادية":"Economic",ADMINISTRATIVE:n==="ar"?"إدارية":"Administrative",FINANCIAL_ACCOUNTING:n==="ar"?"مالية ومحاسبية":"Financial & Accounting",ANALYSIS_REPORTS:n==="ar"?"تحليل وتقارير":"Analysis & Reports",FIELD_SURVEY:n==="ar"?"ميدانية":"Field Survey",DIGITAL_CUSTOMER:n==="ar"?"رقمية":"Digital"}[w]||w||"Category"},b=[{value:"all",label:n==="ar"?"الكل":"All"},{value:"ECONOMIC",label:n==="ar"?"اقتصادية":"Economic"},{value:"ADMINISTRATIVE",label:n==="ar"?"إدارية":"Administrative"},{value:"FINANCIAL_ACCOUNTING",label:n==="ar"?"مالية ومحاسبية":"Financial & Accounting"},{value:"ANALYSIS_REPORTS",label:n==="ar"?"تحليل وتقارير":"Analysis & Reports"},{value:"FIELD_SURVEY",label:n==="ar"?"ميدانية":"Field Survey"},{value:"DIGITAL_CUSTOMER",label:n==="ar"?"رقمية":"Digital"}];return l.jsxs(Dt,{className:"min-h-screen",children:[l.jsx(Qr,{}),l.jsx(iV,{className:"py-12 md:py-20 bg-gradient-to-b from-gray-50 to-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[l.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[l.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 text-gray-900",children:n==="ar"?"الخدمات":"Our Services"}),l.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto",children:n==="ar"?"القائمة الكاملة لخدمات منصة جدوى الاستشارية والاقتصادية":"Complete list of Jadwa Platform consulting and economic services"})]}),l.jsx("div",{className:"mb-8 space-y-4",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[l.jsx(ye,{placeholder:n==="ar"?"ابحث عن خدمة...":"Search for a service...",prefix:l.jsx(ua,{className:"text-gray-400"}),value:c,onChange:A=>u(A.target.value),onPressEnter:f,size:"large",allowClear:!0,className:"flex-1",style:{borderRadius:"12px"}}),l.jsxs(ze.Compact,{className:"flex flex-col md:flex-row gap-2 md:gap-0",children:[l.jsx(be,{value:d,onChange:h,options:b,size:"large",style:{width:200},placeholder:n==="ar"?"الفئة":"Category"}),y&&l.jsx(J,{icon:l.jsx(vR,{}),onClick:p,size:"large",className:"border-gray-300",children:n==="ar"?"مسح":"Clear"})]})]})}),s&&l.jsx(Fn,{message:n==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:s,type:"error",showIcon:!0,closable:!0,onClose:()=>o(null),className:"mb-6"}),!i&&l.jsx("div",{className:"mb-6 text-gray-600 font-medium",children:n==="ar"?`تم العثور على ${t.length} خدمة`:`Found ${t.length} service${t.length!==1?"s":""}`}),i?l.jsx("div",{className:"flex justify-center items-center py-20",children:l.jsx(kt,{size:"large"})}):t.length===0?l.jsx(jn,{description:n==="ar"?"لا توجد خدمات متاحة":"No services available",className:"py-20"}):l.jsx(Re,{gutter:[16,16],className:"sm:gutter-[24]",children:t.map(A=>l.jsx(me,{xs:24,sm:12,lg:8,xl:6,children:l.jsx(Ee,{hoverable:!0,className:"h-full border-0 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 rounded-2xl overflow-hidden group",styles:{body:{padding:"0"}},children:l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:`w-20 h-20 rounded-2xl bg-gradient-to-br ${v(A.category)} flex items-center justify-center text-white mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg mx-auto`,children:m(A.category)}),l.jsx($e,{color:"blue",className:"mb-3 text-xs px-2 py-1",children:x(A.category)}),l.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900 line-clamp-2",children:n==="ar"&&A.titleAr||A.title}),l.jsx("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed line-clamp-3 min-h-[60px]",children:n==="ar"&&A.descriptionAr||A.description}),A.price&&A.price>0&&l.jsxs("div",{className:"mb-4 text-[#1a4d3a] font-bold text-lg",children:[A.price," ",n==="ar"?"ريال":"SAR"]}),A.targetAudience&&l.jsxs("div",{className:"mb-4 text-xs text-gray-500",children:[l.jsx("strong",{children:n==="ar"?"الفئة المستهدفة: ":"Target Audience: "}),A.targetAudience]}),l.jsx(J,{type:"primary",block:!0,size:"large",className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 font-semibold shadow-md hover:shadow-lg transition-all",onClick:()=>e("/login"),children:n==="ar"?"طلب الخدمة":"Request Service"})]})})},A.id))})]})}),l.jsx(ei,{}),l.jsx(Tl,{})]})},{Content:sV}=Dt,{Search:oV}=ye,lV=()=>{const{language:n}=Ze(),e=Rt(),[t,r]=M.useState([]),[i,a]=M.useState(!0),[s,o]=M.useState(null),[c,u]=M.useState(""),[d,h]=M.useState("all"),[f,p]=M.useState("all"),[y,g]=M.useState("all");M.useEffect(()=>{m()},[c,d,f,y]);const m=async()=>{try{a(!0),o(null);const A={};c&&(A.search=c),d!=="all"&&(A.specialization=d),f!=="all"&&(A.minRating=parseFloat(f)),y==="available"&&(A.isAvailable=!0),y==="unavailable"&&(A.isAvailable=!1);const w=await vs.getConsultants(A);r(w.consultants||[])}catch(A){console.error("Error fetching consultants:",A),o(A.message||"Failed to load consultants")}finally{a(!1)}},v=()=>{u(""),h("all"),p("all"),g("all")},x=c||d!=="all"||f!=="all"||y!=="all",b=[...new Set(t.map(A=>A.specialization).filter(Boolean))];return l.jsxs(Dt,{className:"min-h-screen bg-white",children:[l.jsx(Qr,{}),l.jsx(sV,{className:"py-12 md:py-20 bg-gradient-to-b from-gray-50 to-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[l.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[l.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 text-gray-900",children:n==="ar"?"المستشارون":"Our Consultants"}),l.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto",children:n==="ar"?"فريق من المستشارين المتخصصين ذوي الخبرة الواسعة في مختلف المجالات الاقتصادية والإدارية":"A team of specialized consultants with extensive experience in various economic and administrative fields"})]}),l.jsx("div",{className:"mb-8 space-y-4",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[l.jsx(oV,{placeholder:n==="ar"?"ابحث عن مستشار...":"Search for a consultant...",allowClear:!0,size:"large",value:c,onChange:A=>u(A.target.value),onSearch:m,className:"flex-1",prefix:l.jsx(ua,{className:"text-gray-400"}),style:{borderRadius:"12px"}}),l.jsxs(ze.Compact,{className:"flex flex-col md:flex-row gap-2 md:gap-0",children:[l.jsxs(be,{value:d,onChange:h,placeholder:n==="ar"?"التخصص":"Specialization",style:{width:200},size:"large",allowClear:!0,children:[l.jsx(be.Option,{value:"all",children:n==="ar"?"جميع التخصصات":"All Specializations"}),b.map(A=>l.jsx(be.Option,{value:A,children:A},A))]}),l.jsxs(be,{value:f,onChange:p,placeholder:n==="ar"?"التقييم":"Rating",style:{width:150},size:"large",children:[l.jsx(be.Option,{value:"all",children:n==="ar"?"جميع التقييمات":"All Ratings"}),l.jsx(be.Option,{value:"4.5",children:"4.5+ ⭐"}),l.jsx(be.Option,{value:"4.0",children:"4.0+ ⭐"}),l.jsx(be.Option,{value:"3.5",children:"3.5+ ⭐"}),l.jsx(be.Option,{value:"3.0",children:"3.0+ ⭐"})]}),l.jsxs(be,{value:y,onChange:g,placeholder:n==="ar"?"الحالة":"Status",style:{width:150},size:"large",children:[l.jsx(be.Option,{value:"all",children:n==="ar"?"الكل":"All"}),l.jsx(be.Option,{value:"available",children:n==="ar"?"متاح":"Available"}),l.jsx(be.Option,{value:"unavailable",children:n==="ar"?"غير متاح":"Unavailable"})]}),x&&l.jsx(J,{icon:l.jsx(vR,{}),onClick:v,size:"large",className:"border-gray-300",children:n==="ar"?"مسح":"Clear"})]})]})}),s&&l.jsx(Fn,{message:n==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:s,type:"error",showIcon:!0,closable:!0,onClose:()=>o(null),className:"mb-6"}),!i&&l.jsx("div",{className:"mb-6 text-gray-600",children:n==="ar"?`تم العثور على ${t.length} مستشار`:`Found ${t.length} consultant${t.length!==1?"s":""}`}),i?l.jsx("div",{className:"flex justify-center py-20",children:l.jsx(kt,{size:"large"})}):t.length===0?l.jsx(jn,{description:n==="ar"?"لا يوجد مستشارون متاحون":"No consultants available",className:"py-20"}):l.jsx(Re,{gutter:[24,24],children:t.map(A=>{const w=`${A.firstName||""} ${A.lastName||""}`.trim()||A.user?.email||"Consultant",S="https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site",E=A.user?.avatar?A.user.avatar.startsWith("http")?A.user.avatar:`${S}${A.user.avatar.startsWith("/")?"":"/"}${A.user.avatar}`:null;return l.jsx(me,{xs:24,sm:12,lg:8,xl:6,children:l.jsx(Ee,{hoverable:!0,className:"h-full transition-all duration-300 hover:shadow-2xl border-0 rounded-2xl overflow-hidden group",styles:{body:{padding:"0"}},onClick:()=>e(`/consultants/${A.id}`),children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"bg-gradient-to-br from-olive-green-50 to-turquoise-50 p-8 flex items-center justify-center",children:l.jsx(Mt,{size:120,src:E,icon:l.jsx(tt,{}),className:"border-4 border-white shadow-xl group-hover:scale-110 transition-transform duration-300"})}),l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900 line-clamp-1",children:w}),A.specialization&&l.jsx($e,{color:"blue",className:"mb-3 text-xs px-2 py-1",children:A.specialization}),A.rating&&l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Ia,{disabled:!0,defaultValue:A.rating,allowHalf:!0,style:{fontSize:"14px",color:"#d4af37"}}),l.jsx("span",{className:"text-sm text-gray-600",children:A.rating.toFixed(1)})]}),A.bio&&l.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:n==="ar"&&A.bioAr?A.bioAr:A.bio}),l.jsx(J,{type:"primary",block:!0,size:"large",className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 font-semibold shadow-md hover:shadow-lg transition-all",onClick:_=>{_.stopPropagation(),e(`/consultants/${A.id}`)},children:n==="ar"?"عرض الملف الشخصي":"View Profile"})]})]})})},A.id)})})]})}),l.jsx(ei,{}),l.jsx(Tl,{})]})},{Content:gv}=Dt,cV=()=>{const{id:n}=qa(),e=Rt(),{language:t}=Ze(),{settings:r}=ha(),[i,a]=M.useState(null),[s,o]=M.useState(!0),[c,u]=M.useState(null);M.useEffect(()=>{n&&d()},[n]);const d=async()=>{try{o(!0),u(null);const f=await vs.getConsultantById(n);a(f.consultant)}catch(f){console.error("Error fetching consultant:",f),u(f.message||"Failed to load consultant")}finally{o(!1)}};if(s)return l.jsxs(Dt,{className:"min-h-screen",children:[l.jsx(Qr,{}),l.jsx(gv,{className:"py-20",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx(kt,{size:"large"})})}),l.jsx(ei,{})]});if(c||!i)return l.jsxs(Dt,{className:"min-h-screen",children:[l.jsx(Qr,{}),l.jsx(gv,{className:"py-20",children:l.jsx("div",{className:"max-w-4xl mx-auto px-4",children:l.jsx(Fn,{message:t==="ar"?"خطأ":"Error",description:c||(t==="ar"?"المستشار غير موجود":"Consultant not found"),type:"error",showIcon:!0,action:l.jsx(J,{onClick:()=>e("/consultants"),children:t==="ar"?"العودة":"Go Back"})})})}),l.jsx(ei,{})]});const h=i.user?`${i.firstName||""} ${i.lastName||""}`.trim()||i.user.email:`${i.firstName||""} ${i.lastName||""}`.trim()||"Consultant";return l.jsxs(Dt,{className:"min-h-screen",children:[l.jsx(Qr,{}),l.jsx(gv,{className:"py-20 bg-white",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-8",children:[l.jsx(J,{icon:l.jsx(bs,{}),onClick:()=>e("/consultants"),className:"mb-8 text-[#1a4d3a] hover:text-[#2d5f4f] border-[#1a4d3a] hover:border-[#2d5f4f] font-semibold",children:t==="ar"?"العودة":"Back to Consultants"}),l.jsx(Ee,{className:"mb-8 border-0 shadow-lg rounded-2xl overflow-hidden",styles:{body:{padding:"48px"}},children:l.jsxs(Re,{gutter:[32,32],align:"middle",children:[l.jsx(me,{xs:24,md:6,className:"text-center md:text-left",children:l.jsx(Mt,{size:160,src:i.user?.avatar,icon:l.jsx(tt,{}),className:"border-4 border-[#1a4d3a] shadow-xl mb-4 md:mb-0"})}),l.jsxs(me,{xs:24,md:18,children:[l.jsx("div",{className:"mb-4",children:l.jsx($e,{color:"green",className:"mb-3 text-sm px-4 py-1 font-semibold",children:i.status==="APPROVED"?t==="ar"?"موافق عليه":"Approved":t==="ar"?"قيد المراجعة":"Pending Review"})}),l.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold mb-4 text-gray-900",children:h}),i.academicDegree&&l.jsx("p",{className:"text-2xl text-[#1a4d3a] mb-4 font-semibold",children:i.academicDegree}),i.specialization&&l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:i.specialization}),i.rating&&l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Bc,{className:"text-[#d4af37] text-xl"}),l.jsx("span",{className:"text-2xl font-bold text-gray-900",children:i.rating.toFixed(1)}),l.jsx("span",{className:"text-gray-500",children:"/ 5.0"})]}),l.jsxs(ze,{size:"large",wrap:!0,children:[l.jsx(J,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-12 px-8 text-lg font-semibold shadow-lg hover:shadow-xl transition-all hover:scale-105",onClick:()=>e("/register"),children:t==="ar"?"احجز استشارة":"Book Consultation"}),l.jsx(J,{size:"large",className:"border-2 border-[#1a4d3a] text-[#1a4d3a] hover:bg-[#1a4d3a] hover:text-white h-12 px-8 text-lg font-semibold transition-all",onClick:()=>e("/contact"),children:t==="ar"?"تواصل معنا":"Contact Us"})]})]})]})}),l.jsxs(Re,{gutter:[24,24],children:[l.jsxs(me,{xs:24,lg:16,children:[i.bio&&l.jsxs(Ee,{className:"mb-6 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"32px"}},children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:t==="ar"?"نبذة عن المستشار":"About"}),l.jsx("p",{className:"text-gray-700 leading-relaxed text-lg whitespace-pre-line",children:i.bio})]}),l.jsxs(Ee,{className:"mb-6 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"32px"}},children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:t==="ar"?"المؤهلات والخبرة":"Qualifications & Experience"}),l.jsxs(Je,{column:1,bordered:!0,children:[i.yearsOfExperience&&l.jsxs(Je.Item,{label:t==="ar"?"سنوات الخبرة":"Years of Experience",children:[i.yearsOfExperience," ",t==="ar"?"سنة":"years"]}),i.academicDegree&&l.jsx(Je.Item,{label:t==="ar"?"الدرجة العلمية":"Academic Degree",children:i.academicDegree}),i.specialization&&l.jsx(Je.Item,{label:t==="ar"?"التخصص":"Specialization",children:i.specialization}),i.pricePerSession&&l.jsx(Je.Item,{label:t==="ar"?"سعر الجلسة":"Price Per Session",children:l.jsxs("span",{className:"text-[#1a4d3a] font-bold text-lg",children:[i.pricePerSession," ",t==="ar"?"ريال":"SAR"]})})]})]})]}),l.jsxs(me,{xs:24,lg:8,children:[l.jsxs(Ee,{className:"mb-6 border-0 shadow-lg rounded-2xl relative overflow-hidden",styles:{body:{padding:"32px"}},children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:t==="ar"?"معلومات الاتصال":"Contact Information"}),!r.showConsultantContactInfo&&l.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-white/60 backdrop-blur-sm transition-all duration-300",children:[l.jsx("div",{className:"bg-white p-4 rounded-full shadow-lg mb-2",children:l.jsx(Nn,{className:"text-2xl text-gray-500"})}),l.jsx("span",{className:"text-gray-600 font-medium",children:t==="ar"?"معلومات الاتصال محجوبة":"Contact Info Hidden"})]}),l.jsxs(ze,{direction:"vertical",size:"large",className:`w-full transition-all duration-300 ${r.showConsultantContactInfo?"":"blur-sm opacity-50 select-none"}`,children:[i.user?.email&&l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(vi,{className:"text-[#1a4d3a] text-xl"}),l.jsx("span",{className:"text-gray-700",children:i.user.email})]}),i.user?.phone&&l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Ma,{className:"text-[#1a4d3a] text-xl"}),l.jsx("span",{className:"text-gray-700",children:i.user.phone})]})]})]}),l.jsxs(Ee,{className:"border-0 shadow-lg rounded-2xl",styles:{body:{padding:"32px"}},children:[l.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:t==="ar"?"الإحصائيات":"Statistics"}),l.jsxs(ze,{direction:"vertical",size:"large",className:"w-full",children:[i.rating&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600",children:t==="ar"?"التقييم":"Rating"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Bc,{className:"text-[#d4af37]"}),l.jsx("span",{className:"font-bold text-lg",children:i.rating.toFixed(1)})]})]}),i.totalSessions!==void 0&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600",children:t==="ar"?"إجمالي الجلسات":"Total Sessions"}),l.jsx("span",{className:"font-bold text-lg",children:i.totalSessions||0})]}),i.totalClients!==void 0&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600",children:t==="ar"?"عدد العملاء":"Total Clients"}),l.jsx("span",{className:"font-bold text-lg",children:i.totalClients||0})]})]})]})]})]})]})}),l.jsx(ei,{})]})},uV=({reportId:n})=>{const{language:e}=Ze(),t=Rt(),[r,i]=M.useState(null),[a,s]=M.useState(!0);M.useEffect(()=>{n&&o()},[n]);const o=async()=>{try{s(!0),se.info(e==="ar"?"هذه الصفحة قيد التطوير":"This page is under development"),t("/reports")}catch(c){se.error(c.message||(e==="ar"?"فشل تحميل التقرير":"Failed to load report")),t("/reports")}finally{s(!1)}};return a?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx(kt,{size:"large"})}):r?l.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4 md:px-8",children:[l.jsx(J,{icon:l.jsx(bs,{}),onClick:()=>t("/reports"),className:"mb-6",children:e==="ar"?"العودة":"Back"}),l.jsxs(Ee,{className:"shadow-lg",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:r.title}),l.jsxs(ze,{wrap:!0,children:[l.jsx($e,{color:"blue",children:r.reportType}),l.jsx($e,{color:r.status==="APPROVED"?"green":"orange",children:r.status})]})]}),r.summary&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:e==="ar"?"ملخص":"Summary"}),l.jsx("p",{className:"text-gray-700",children:r.summary})]}),l.jsxs(Je,{bordered:!0,column:{xs:1,sm:2},children:[r.booking&&l.jsxs(l.Fragment,{children:[l.jsx(Je.Item,{label:e==="ar"?"الحجز":"Booking",children:r.booking.id}),r.booking.service&&l.jsx(Je.Item,{label:e==="ar"?"الخدمة":"Service",children:e==="ar"?r.booking.service.titleAr:r.booking.service.title})]}),r.createdAt&&l.jsx(Je.Item,{label:e==="ar"?"تاريخ الإنشاء":"Created At",children:new Date(r.createdAt).toLocaleDateString()})]}),l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:[r.pdfUrl&&l.jsx(J,{type:"primary",icon:l.jsx(Mr,{}),size:"large",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",href:r.pdfUrl,download:!0,children:e==="ar"?"تحميل PDF":"Download PDF"}),r.wordUrl&&l.jsx(J,{icon:l.jsx(Kt,{}),size:"large",href:r.wordUrl,download:!0,children:e==="ar"?"تحميل Word":"Download Word"})]})]})]})}):l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsxs(Ee,{children:[l.jsx("p",{children:e==="ar"?"التقرير غير موجود":"Report not found"}),l.jsx(J,{onClick:()=>t("/reports"),children:e==="ar"?"العودة":"Go Back"})]})})},{Content:dV}=Dt,fT=()=>{const{id:n}=qa();return l.jsxs(Dt,{className:"min-h-screen",children:[l.jsx(Qr,{}),l.jsx(dV,{children:n?l.jsx(uV,{reportId:n}):l.jsx(wR,{})}),l.jsx(ei,{}),l.jsx(Tl,{})]})},{Content:hV}=Dt,fV=()=>{const{t:n,language:e}=Ze(),t=Rt(),[r,i]=M.useState([]),[a,s]=M.useState(!0),[o,c]=M.useState(""),[u,d]=M.useState("all");M.useEffect(()=>{h()},[o,u]);const h=async()=>{try{s(!0);const p={status:"PUBLISHED"};o&&(p.search=o),u!=="all"&&(p.category=u);const y=await ar.getArticles(p),g="https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site",m=(y.articles||[]).map(v=>{if(v.featuredImage){let x=v.featuredImage;/^https?:\/\//.test(x)?(x.includes(`${g}${g}`)||x.match(/http:\/\/localhost:5000/g)?.length>1)&&(x=x.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),x=`https://jadwa.developteam.site${x}`):x=x.startsWith("/")?`${g}${x}`:`${g}/${x}`,v.featuredImage=x}return v});i(m)}catch(p){console.error("Error fetching articles:",p)}finally{s(!1)}},f=[...new Set(r.map(p=>p.category).filter(Boolean))];return l.jsxs(Dt,{className:"min-h-screen",children:[l.jsx(Qr,{}),l.jsx(hV,{className:"py-20 bg-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 text-gray-900",children:e==="ar"?"المدونة":"Blog"}),l.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto",children:e==="ar"?"اكتشف آخر المقالات والأخبار حول الاستشارات والدراسات الاقتصادية":"Discover the latest articles and news about consulting and economic studies"})]}),l.jsxs("div",{className:"mb-12 flex flex-col md:flex-row gap-4",children:[l.jsxs(ze.Compact,{className:"flex-1",children:[l.jsx(ye,{placeholder:e==="ar"?"ابحث في المقالات...":"Search articles...",allowClear:!0,size:"large",value:o,onChange:p=>c(p.target.value),onPressEnter:()=>{},className:"flex-1 border-2 border-gray-200 focus:border-[#1a4d3a] rounded-lg"}),l.jsx(J,{type:"primary",icon:l.jsx(ua,{}),size:"large",className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 font-semibold",onClick:()=>{}})]}),l.jsxs(be,{value:u,onChange:d,style:{width:200},size:"large",className:"border-2 border-gray-200 focus:border-[#1a4d3a] rounded-lg",children:[l.jsx(be.Option,{value:"all",children:e==="ar"?"جميع الفئات":"All Categories"}),f.map(p=>l.jsx(be.Option,{value:p,children:p},p))]})]}),a?l.jsx("div",{className:"flex justify-center py-12",children:l.jsx(kt,{size:"large"})}):r.length===0?l.jsx(jn,{description:e==="ar"?"لا توجد مقالات متاحة":"No articles available",className:"py-12"}):l.jsxs(l.Fragment,{children:[r.length>0&&l.jsx(Ee,{className:"mb-12 overflow-hidden border-0 shadow-2xl",styles:{body:{padding:"0"}},style:{borderRadius:"24px"},cover:r[0].featuredImage?l.jsxs("div",{className:"relative h-[500px] overflow-hidden",children:[l.jsx("img",{src:r[0].featuredImage,alt:e==="ar"&&r[0].titleAr||r[0].title,className:"w-full h-full object-cover",onError:p=>{console.error("Failed to load featured image:",r[0].featuredImage),p.target.style.display="none"}}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 md:p-12 text-white",children:[r[0].category&&l.jsx($e,{color:"blue",className:"mb-4 text-sm px-4 py-1 font-semibold",children:r[0].category}),l.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 leading-tight",children:e==="ar"&&r[0].titleAr||r[0].title}),r[0].excerpt&&l.jsx("p",{className:"text-xl text-gray-100 mb-6 line-clamp-2 leading-relaxed",children:e==="ar"&&r[0].excerptAr||r[0].excerpt}),l.jsxs("div",{className:"flex items-center gap-6 text-base mb-6",children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(vn,{}),qe(r[0].publishedAt||r[0].createdAt).format("YYYY-MM-DD")]}),l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Wn,{}),r[0].views||0]})]}),l.jsx(J,{type:"primary",size:"large",className:"bg-gradient-to-r from-[#d4af37] to-[#f4d03f] hover:from-[#c9a227] hover:to-[#e6c93d] border-0 text-[#1a4d3a] h-14 px-10 text-lg font-semibold shadow-lg hover:shadow-xl transition-all",onClick:()=>t(`/blog/${r[0].slug}`),children:e==="ar"?"اقرأ المزيد":"Read More"})]})]}):null}),l.jsx(Re,{gutter:[32,32],children:r.slice(1).map(p=>l.jsx(me,{xs:24,sm:12,lg:8,children:l.jsxs(Ee,{hoverable:!0,className:"h-full transition-all duration-300 hover:shadow-2xl border-0 rounded-2xl overflow-hidden group",styles:{body:{padding:"0"}},cover:p.featuredImage?l.jsx("div",{className:"relative h-48 overflow-hidden",children:l.jsx("img",{alt:e==="ar"&&p.titleAr||p.title,src:p.featuredImage,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110",onError:y=>{console.error("Failed to load article image:",p.featuredImage),y.target.style.display="none"}})}):l.jsx("div",{className:"h-48 bg-gradient-to-br from-olive-green-400 to-turquoise-400 flex items-center justify-center",children:l.jsx("span",{className:"text-white text-4xl font-bold",children:e==="ar"?(p.titleAr||p.title).charAt(0):p.title.charAt(0)})}),onClick:()=>t(`/blog/${p.slug}`),children:[l.jsx("div",{className:"mb-2",children:p.category&&l.jsx($e,{color:"blue",className:"mb-2",children:p.category})}),l.jsx("h3",{className:"text-xl font-bold mb-2 line-clamp-2 hover:text-olive-green-600 transition-colors",children:e==="ar"&&p.titleAr||p.title}),p.excerpt&&l.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:e==="ar"&&p.excerptAr||p.excerpt}),l.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(vn,{}),qe(p.publishedAt||p.createdAt).format("YYYY-MM-DD")]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Wn,{}),p.views||0]})]})]})},p.id))})]})]})}),l.jsx(ei,{}),l.jsx(Tl,{})]})},{Content:yv}=Dt,pV=()=>{const{slug:n}=qa(),e=Rt(),{t,language:r}=Ze(),[i,a]=M.useState(null),[s,o]=M.useState(!0),[c,u]=M.useState(null),[d,h]=M.useState([]);M.useEffect(()=>{n&&(f(),p())},[n]);const f=async()=>{try{o(!0),u(null);const m=(await ar.getArticleBySlug(n)).article;if(m&&m.featuredImage){const v="https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site";let x=m.featuredImage;/^https?:\/\//.test(x)?(x.includes(`${v}${v}`)||x.match(/http:\/\/localhost:5000/g)?.length>1)&&(x=x.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),x=`https://jadwa.developteam.site${x}`):x=x.startsWith("/")?`${v}${x}`:`${v}/${x}`,m.featuredImage=x}if(m&&(m.content||m.contentAr)){const v="https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site",x=b=>b&&b.replace(/<img([^>]+)src=["']([^"']+)["']/gi,(A,w,S)=>{let E=S;return S.startsWith("http://")||S.startsWith("https://")?(S.includes(`${v}${v}`)||S.match(/http:\/\/localhost:5000/g)?.length>1)&&(E=S.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),E=`https://jadwa.developteam.site${E}`):E=S.startsWith("/")?`${v}${S}`:`${v}/${S}`,`<img${w}src="${E}"`});m.content&&(m.content=x(m.content)),m.contentAr&&(m.contentAr=x(m.contentAr))}a(m)}catch(g){console.error("Error fetching article:",g),u(g.message||"Failed to load article")}finally{o(!1)}},p=async()=>{try{const g=await ar.getArticles({status:"PUBLISHED",category:i?.category,limit:3});h(g.articles?.filter(m=>m.slug!==n).slice(0,3)||[])}catch(g){console.error("Error fetching related articles:",g)}},y=()=>{navigator.share?navigator.share({title:r==="ar"&&i?.titleAr||i?.title,text:r==="ar"&&i?.excerptAr||i?.excerpt,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert(r==="ar"?"تم نسخ الرابط":"Link copied to clipboard"))};return s?l.jsxs(Dt,{className:"min-h-screen",children:[l.jsx(Qr,{}),l.jsx(yv,{className:"py-16",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx(kt,{size:"large"})})}),l.jsx(ei,{})]}):c||!i?l.jsxs(Dt,{className:"min-h-screen",children:[l.jsx(Qr,{}),l.jsx(yv,{className:"py-16",children:l.jsx("div",{className:"max-w-4xl mx-auto px-4",children:l.jsx(Fn,{message:r==="ar"?"خطأ":"Error",description:c||(r==="ar"?"المقال غير موجود":"Article not found"),type:"error",showIcon:!0,action:l.jsx(J,{onClick:()=>e("/blog"),children:r==="ar"?"العودة للمدونة":"Back to Blog"})})})}),l.jsx(ei,{})]}):l.jsxs(Dt,{className:"min-h-screen",children:[l.jsx(Qr,{}),l.jsx(yv,{className:"py-20 bg-white",children:l.jsxs("div",{className:"max-w-5xl mx-auto px-4 md:px-8",children:[l.jsx(J,{icon:l.jsx(bs,{}),onClick:()=>e("/blog"),className:"mb-8 text-[#1a4d3a] hover:text-[#2d5f4f] border-[#1a4d3a] hover:border-[#2d5f4f] font-semibold",children:r==="ar"?"العودة للمدونة":"Back to Blog"}),i.featuredImage&&l.jsx("div",{className:"relative h-[400px] md:h-[500px] rounded-2xl overflow-hidden mb-8 shadow-2xl",children:l.jsx("img",{src:i.featuredImage,alt:r==="ar"&&i.titleAr||i.title,className:"w-full h-full object-cover",onError:g=>{console.error("Failed to load featured image:",i.featuredImage),g.target.style.display="none"}})}),l.jsxs(Ee,{className:"mb-8 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"40px"}},children:[l.jsxs("div",{className:"mb-6",children:[i.category&&l.jsx($e,{color:"blue",className:"mb-3 text-sm px-4 py-1 font-semibold",children:i.category}),l.jsx($e,{color:i.status==="PUBLISHED"?"green":"orange",className:"text-sm px-4 py-1 font-semibold",children:i.status==="PUBLISHED"?r==="ar"?"منشور":"Published":r==="ar"?"مسودة":"Draft"})]}),l.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 text-gray-900 leading-tight",children:r==="ar"&&i.titleAr||i.title}),i.excerpt&&l.jsx("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 leading-relaxed",children:r==="ar"&&i.excerptAr||i.excerpt}),l.jsx(cn,{className:"my-6"}),l.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Mt,{size:56,icon:l.jsx(tt,{}),className:"border-2 border-[#1a4d3a]"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-gray-900",children:i.author?.email||"Admin"}),l.jsxs("div",{className:"text-base text-gray-500 flex items-center gap-3 mt-1",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(vn,{}),qe(i.publishedAt||i.createdAt).format("YYYY-MM-DD")]}),l.jsx("span",{className:"mx-2",children:"•"}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Wn,{}),i.views||0," ",r==="ar"?"مشاهدة":"views"]})]})]})]}),l.jsx(J,{icon:l.jsx(iH,{}),onClick:y,className:"bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 text-white font-semibold shadow-md hover:shadow-lg transition-all",children:r==="ar"?"مشاركة":"Share"})]})]}),l.jsx(Ee,{className:"mb-8 border-0 shadow-lg rounded-2xl",styles:{body:{padding:"48px"}},children:l.jsx("div",{className:"prose prose-lg max-w-none article-content",style:{fontSize:"18px",lineHeight:"1.8",color:"#374151"},dangerouslySetInnerHTML:{__html:r==="ar"&&i.contentAr||i.content}})}),i.tags&&l.jsxs(Ee,{className:"mt-8",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:r==="ar"?"العلامات":"Tags"}),l.jsx(ze,{wrap:!0,children:JSON.parse(i.tags||"[]").map((g,m)=>l.jsx($e,{color:"blue",children:g},m))})]}),d.length>0&&l.jsxs("div",{className:"mt-12",children:[l.jsx("h2",{className:"text-3xl font-bold mb-6",children:r==="ar"?"مقالات ذات صلة":"Related Articles"}),l.jsx(Re,{gutter:[24,24],children:d.map(g=>l.jsx(me,{xs:24,sm:12,lg:8,children:l.jsxs(Ee,{hoverable:!0,className:"h-full",cover:g.featuredImage?l.jsx("img",{alt:r==="ar"&&g.titleAr||g.title,src:g.featuredImage,className:"h-48 object-cover"}):null,onClick:()=>e(`/blog/${g.slug}`),children:[l.jsx("h3",{className:"text-lg font-bold mb-2 line-clamp-2",children:r==="ar"&&g.titleAr||g.title}),g.excerpt&&l.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-2",children:r==="ar"&&g.excerptAr||g.excerpt}),l.jsx("div",{className:"text-xs text-gray-500",children:qe(g.publishedAt||g.createdAt).format("YYYY-MM-DD")})]})},g.id))})]})]})}),l.jsx(ei,{})]})},{Content:mV}=Dt,{TextArea:gV}=ye,yV=()=>{const{language:n}=Ze(),[e]=W.useForm(),[t,r]=M.useState(!1),[i,a]=M.useState(null),[s,o]=M.useState(!1),c=async u=>{try{r(!0),a(null),o(!1),await Rr.createTicket({subject:`Contact Form: ${u.name}`,description:`Name: ${u.name}
Email: ${u.email}
Phone: ${u.phone||"N/A"}

Message:
${u.message}`,priority:"MEDIUM",category:"GENERAL_INQUIRY"}),o(!0),e.resetFields(),se.success(n==="ar"?"تم إرسال رسالتك بنجاح!":"Your message has been sent successfully!")}catch(d){console.error("Error sending message:",d),a(d.message||(n==="ar"?"فشل إرسال الرسالة":"Failed to send message")),se.error(n==="ar"?"فشل إرسال الرسالة":"Failed to send message")}finally{r(!1)}};return l.jsxs(Dt,{className:"min-h-screen",children:[l.jsx(Qr,{}),l.jsx(mV,{className:"py-12 md:py-20 bg-gradient-to-b from-gray-50 to-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[l.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[l.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 text-gray-900",children:n==="ar"?"اتصل بنا":"Contact Us"}),l.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto",children:n==="ar"?"نحن هنا لمساعدتك. تواصل معنا اليوم وسنكون سعداء للرد على استفساراتك":"We are here to help. Contact us today and we will be happy to answer your inquiries"})]}),s&&l.jsx(Fn,{message:n==="ar"?"تم الإرسال بنجاح!":"Message Sent Successfully!",description:n==="ar"?"شكراً لتواصلك معنا. سنرد عليك في أقرب وقت ممكن.":"Thank you for contacting us. We will get back to you as soon as possible.",type:"success",showIcon:!0,closable:!0,onClose:()=>o(!1),className:"mb-6"}),i&&l.jsx(Fn,{message:n==="ar"?"خطأ في الإرسال":"Error Sending Message",description:i,type:"error",showIcon:!0,closable:!0,onClose:()=>a(null),className:"mb-6"}),l.jsxs(Re,{gutter:[32,32],children:[l.jsx(me,{xs:24,lg:14,children:l.jsxs(Ee,{className:"shadow-xl border-0 rounded-2xl",styles:{body:{padding:"32px"}},children:[l.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-gray-900",children:n==="ar"?"إرسال رسالة":"Send Us a Message"}),l.jsxs(W,{form:e,onFinish:c,layout:"vertical",size:"large",children:[l.jsx(W.Item,{name:"name",label:n==="ar"?"الاسم الكامل":"Full Name",rules:[{required:!0,message:n==="ar"?"الرجاء إدخال الاسم":"Please enter your name"}],children:l.jsx(ye,{placeholder:n==="ar"?"أدخل اسمك الكامل":"Enter your full name",className:"rounded-lg"})}),l.jsx(W.Item,{name:"email",label:n==="ar"?"البريد الإلكتروني":"Email Address",rules:[{required:!0,message:n==="ar"?"الرجاء إدخال البريد الإلكتروني":"Please enter your email"},{type:"email",message:n==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email address"}],children:l.jsx(ye,{type:"email",placeholder:"example@email.com",prefix:l.jsx(vi,{className:"text-gray-400"}),className:"rounded-lg"})}),l.jsx(W.Item,{name:"phone",label:n==="ar"?"رقم الهاتف (اختياري)":"Phone Number (Optional)",children:l.jsx(ye,{placeholder:"+966 5XX XXX XXX",prefix:l.jsx(Ma,{className:"text-gray-400"}),className:"rounded-lg"})}),l.jsx(W.Item,{name:"message",label:n==="ar"?"الرسالة":"Message",rules:[{required:!0,message:n==="ar"?"الرجاء إدخال الرسالة":"Please enter your message"},{min:10,message:n==="ar"?"الرسالة يجب أن تكون على الأقل 10 أحرف":"Message must be at least 10 characters"}],children:l.jsx(gV,{rows:6,placeholder:n==="ar"?"اكتب رسالتك هنا...":"Write your message here...",className:"rounded-lg",showCount:!0,maxLength:1e3})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",size:"large",loading:t,icon:l.jsx(Ty,{}),className:"w-full bg-gradient-to-r from-[#1a4d3a] to-[#2d5f4f] hover:from-[#153d2d] hover:to-[#1a4d3a] border-0 h-12 font-semibold text-base shadow-lg hover:shadow-xl transition-all rounded-lg",children:n==="ar"?"إرسال الرسالة":"Send Message"})})]})]})}),l.jsx(me,{xs:24,lg:10,children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs(Ee,{className:"shadow-xl border-0 rounded-2xl bg-gradient-to-br from-olive-green-50 to-turquoise-50",styles:{body:{padding:"32px"}},children:[l.jsx("h3",{className:"text-2xl font-bold mb-6 text-gray-900",children:n==="ar"?"معلومات الاتصال":"Contact Information"}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 rounded-xl bg-white shadow-md",children:l.jsx(Ma,{className:"text-2xl text-olive-green-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:n==="ar"?"الهاتف":"Phone"}),l.jsx("a",{href:"tel:+966123456789",className:"text-gray-600 hover:text-olive-green-600 transition-colors",children:"+966 12 345 6789"})]})]}),l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 rounded-xl bg-white shadow-md",children:l.jsx(vi,{className:"text-2xl text-olive-green-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:n==="ar"?"البريد الإلكتروني":"Email"}),l.jsx("a",{href:"mailto:info@jadwa.com",className:"text-gray-600 hover:text-olive-green-600 transition-colors",children:"info@jadwa.com"})]})]}),l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 rounded-xl bg-white shadow-md",children:l.jsx(bR,{className:"text-2xl text-olive-green-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:"WhatsApp"}),l.jsx("a",{href:"https://wa.me/966123456789",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-olive-green-600 transition-colors",children:n==="ar"?"تواصل عبر واتساب":"Contact via WhatsApp"})]})]}),l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"p-3 rounded-xl bg-white shadow-md",children:l.jsx(_y,{className:"text-2xl text-olive-green-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:n==="ar"?"العنوان":"Address"}),l.jsx("div",{className:"text-gray-600",children:n==="ar"?"الرياض، المملكة العربية السعودية":"Riyadh, Saudi Arabia"})]})]})]})]}),l.jsx(Ee,{className:"shadow-xl border-0 rounded-2xl overflow-hidden",styles:{body:{padding:"0"}},children:l.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3624.5!2d46.6753!3d24.7136!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMjTCsDQyJzQ5LjAiTiA0NsKwNDAnMzEuMSJF!5e0!3m2!1sen!2s!4v1234567890",width:"100%",height:"300",style:{border:0},allowFullScreen:!0,loading:"lazy",title:"Location Map"})})]})})]})]})}),l.jsx(ei,{}),l.jsx(Tl,{})]})},{Content:vV}=Dt,xV=()=>{const{language:n}=Ze(),e=Rt(),t=jl(),{login:r,isAuthenticated:i}=Xn(),[a]=W.useForm(),[s,o]=M.useState(!1);fe.useEffect(()=>{if(i){const u=t.state?.from?.pathname||"/";e(u,{replace:!0})}},[i,e,t]);const c=async u=>{o(!0);try{const d=await r(u.email,u.password);if(d.success){const h=d.user.role,f=t.state?.from?.pathname;f?e(f,{replace:!0}):h==="CLIENT"?e("/client",{replace:!0}):h==="CONSULTANT"?e("/consultant",{replace:!0}):["ADMIN","SUPER_ADMIN","ANALYST","SUPPORT","FINANCE"].includes(h)?e("/admin",{replace:!0}):e("/",{replace:!0})}}catch(d){console.error("Login error:",d)}finally{o(!1)}};return l.jsx(Dt,{className:"min-h-screen bg-gradient-to-br from-olive-green-50 to-turquoise-50",children:l.jsx(vV,{className:"flex items-center justify-center py-8 px-4",children:l.jsxs(Ee,{className:"w-full max-w-md shadow-xl",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-olive-green-600 to-turquoise-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-white font-bold text-3xl",children:"ج"})}),l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Jadwa"}),l.jsx("p",{className:"text-gray-600",children:n==="ar"?"تسجيل الدخول":"Login"}),!1]}),l.jsxs(W,{form:a,onFinish:c,layout:"vertical",size:"large",children:[l.jsx(W.Item,{name:"email",label:n==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:n==="ar"?"مطلوب":"Required"},{type:"email",message:n==="ar"?"بريد إلكتروني غير صحيح":"Invalid email"}],children:l.jsx(ye,{prefix:l.jsx(vi,{}),placeholder:n==="ar"?"أدخل بريدك الإلكتروني":"Enter your email"})}),l.jsx(W.Item,{name:"password",label:n==="ar"?"كلمة المرور":"Password",rules:[{required:!0,message:n==="ar"?"مطلوب":"Required"}],children:l.jsx(ye.Password,{prefix:l.jsx(Nn,{}),placeholder:n==="ar"?"أدخل كلمة المرور":"Enter your password"})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",size:"large",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 w-full",loading:s,disabled:s,children:n==="ar"?"تسجيل الدخول":"Login"})})]}),l.jsx(cn,{children:n==="ar"?"أو":"OR"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(J,{type:"default",size:"large",className:"border-turquoise-500 text-turquoise-600 hover:bg-turquoise-50 w-full",onClick:()=>e("/register"),children:n==="ar"?"إنشاء حساب جديد":"Create New Account"}),l.jsx(J,{type:"text",size:"large",className:"w-full",onClick:()=>e("/"),children:n==="ar"?"العودة للصفحة الرئيسية":"Back to Home"})]})]})})})},{Content:bV}=Dt,{Option:dt}=be,{TextArea:zl}=ye,{Step:wV}=Ay,AV=({value:n,onChange:e})=>{const{language:t}=Ze(),[r,i]=M.useState([]),[a,s]=M.useState(!1);M.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const c=await vs.getConsultants({isAvailable:!0});i(c.consultants||[])}catch(c){console.error("Error fetching consultants:",c)}finally{s(!1)}};return l.jsx(be,{value:n,onChange:e,placeholder:t==="ar"?"اختر مستشار (اختياري)":"Select Consultant (Optional)",allowClear:!0,loading:a,showSearch:!0,filterOption:(c,u)=>(u?.label??"").toLowerCase().includes(c.toLowerCase()),children:r.map(c=>l.jsx(dt,{value:c.id,label:`${c.firstName} ${c.lastName}`,children:`${c.firstName} ${c.lastName} - ${c.specialization}`},c.id))})},SV=()=>{const{language:n}=Ze(),e=Rt(),{register:t,isAuthenticated:r}=Xn(),[i]=W.useForm(),[a,s]=M.useState(!1),[o,c]=M.useState(0);fe.useEffect(()=>{r&&e("/",{replace:!0})},[r,e]);const u=async(_,D="USER")=>{if(!_||!_.originFileObj)return null;try{const C=new FormData;return C.append("file",_.originFileObj),C.append("ownerType",D),(await Zr.uploadFile(C))?.file?.fileUrl||null}catch(C){return console.error("Error uploading file:",C),null}},d=async(_,D="USER")=>{if(!_||!Array.isArray(_)||_.length===0)return[];const C=_.map(T=>u(T,D));return(await Promise.all(C)).filter(T=>T!==null)},h=async _=>{s(!0);try{const D=_.role||"client",C={email:_.email,password:_.password,role:D?D.toUpperCase():"CLIENT",firstName:_.firstName,lastName:_.lastName,phone:_.phone,dateOfBirth:_.dateOfBirth?_.dateOfBirth.toISOString():null,gender:_.gender,country:_.country||"Saudi Arabia",city:_.city,address:_.address,postalCode:_.postalCode,preferredLanguage:_.preferredLanguage||"ar",termsAccepted:_.termsAccepted||!1};if(D==="client")C.accountType=_.accountType,C.sector=_.sector,C.companyName=_.companyName,C.commercialName=_.commercialName,C.preferredServices=_.preferredServices||[],C.registrationPurpose=_.registrationPurpose,C.preferredConsultantId=_.preferredConsultantId,C.preferredPaymentMethod=_.preferredPaymentMethod,C.invoiceAddress=_.invoiceAddress,C.taxNumber=_.taxNumber,C.notificationEmail=_.notificationEmail!==!1,C.notificationApp=_.notificationApp!==!1,C.notificationWhatsApp=_.notificationWhatsApp||!1,(_.accountType==="COMPANY"||_.accountType==="GOVERNMENT_ENTITY")&&(C.commercialRegister=_.commercialRegister,C.taxNumber=_.taxNumber,C.economicSector=_.economicSector,C.industry=_.industry,C.numberOfEmployees=_.numberOfEmployees,_.entityDefinition&&_.entityDefinition.length>0&&(C.entityDefinition=await u(_.entityDefinition[0],"GENERAL")),_.commercialRegisterFile&&_.commercialRegisterFile.length>0&&(C.commercialRegisterFile=await u(_.commercialRegisterFile[0],"GENERAL")),_.companyLogo&&_.companyLogo.length>0&&(C.companyLogo=await u(_.companyLogo[0],"GENERAL")));else if(D==="consultant"){if(C.academicTitle=_.academicTitle,C.academicDegree=_.academicDegree,C.university=_.university,C.graduationYear=_.graduationYear,C.specialization=_.specialization,C.specificSpecialization=_.specificSpecialization,C.bio=_.bio,C.pricePerSession=_.pricePerSession||0,C.sessionDuration=_.sessionDuration||60,C.consultationMode=_.consultationMode||[],C.yearsOfExperience=_.yearsOfExperience||0,C.previousEmployers=_.previousEmployers,C.areasOfExpertise=_.areasOfExpertise||[],C.implementedProjects=_.implementedProjects||[],C.languages=_.languages||[],C.certifications=_.certifications||[],C.professionalCourses=_.professionalCourses,_.profilePicture&&_.profilePicture.length>0&&(C.profilePicture=await u(_.profilePicture[0],"USER")),_.cvUrl&&_.cvUrl.length>0&&(C.cvUrl=await u(_.cvUrl[0],"GENERAL")),_.academicCertificates&&_.academicCertificates.length>0){const T=await d(_.academicCertificates,"GENERAL");C.academicCertificates=T}_.nationalId&&_.nationalId.length>0&&(C.nationalId=await u(_.nationalId[0],"GENERAL")),_.consultingLicense&&_.consultingLicense.length>0&&(C.consultingLicense=await u(_.consultingLicense[0],"GENERAL")),C.bankAccount=_.bankAccount,C.bankName=_.bankName,C.iban=_.iban,C.acceptsSessions=_.acceptsSessions!==!1}const k=await t(C);if(k.success){se.success(n==="ar"?"تم إنشاء الحساب بنجاح":"Account created successfully");const T=k.user.role;T==="CLIENT"?e("/client",{replace:!0}):T==="CONSULTANT"?e("/consultant",{replace:!0}):e("/",{replace:!0})}}catch(D){se.error(D.message||(n==="ar"?"فشل إنشاء الحساب":"Failed to create account")),console.error("Registration error:",D)}finally{s(!1)}},f=W.useWatch("role",i),p=W.useWatch("accountType",i),y=[{title:n==="ar"?"المعلومات الأساسية":"Basic Information",content:"basic"},{title:f==="client"?n==="ar"?"معلومات العميل":"Client Information":n==="ar"?"المؤهلات الأكاديمية":"Academic Qualifications",content:"role-specific"},{title:f==="client"?n==="ar"?"الخدمات والإعدادات":"Services & Settings":n==="ar"?"الخبرات والخدمات":"Experience & Services",content:"additional"},{title:f==="client"?n==="ar"?"المعلومات المالية":"Financial Information":n==="ar"?"المعلومات المالية والوثائق":"Financial Info & Documents",content:"financial"}],g=()=>l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"role",label:n==="ar"?"نوع الحساب":"Account Type",rules:[{required:!0,message:n==="ar"?"يرجى اختيار نوع الحساب":"Please select account type"}],initialValue:"client",children:l.jsxs(be,{placeholder:n==="ar"?"اختر نوع الحساب":"Select account type",children:[l.jsx(dt,{value:"client",children:n==="ar"?"عميل":"Client"}),l.jsx(dt,{value:"consultant",children:n==="ar"?"مستشار":"Consultant"})]})}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"firstName",label:n==="ar"?"الاسم الأول":"First Name",rules:[{required:!0,message:n==="ar"?"مطلوب":"Required"}],children:l.jsx(ye,{prefix:l.jsx(tt,{}),placeholder:n==="ar"?"الاسم الأول":"First Name"})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"lastName",label:n==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0,message:n==="ar"?"مطلوب":"Required"}],children:l.jsx(ye,{prefix:l.jsx(tt,{}),placeholder:n==="ar"?"اسم العائلة":"Last Name"})})})]}),l.jsx(W.Item,{name:"email",label:n==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:n==="ar"?"مطلوب":"Required"},{type:"email",message:n==="ar"?"بريد إلكتروني غير صحيح":"Invalid email"}],children:l.jsx(ye,{prefix:l.jsx(vi,{}),placeholder:n==="ar"?"البريد الإلكتروني":"Email"})}),l.jsx(W.Item,{name:"phone",label:n==="ar"?"رقم الهاتف":"Phone Number",rules:[{required:!0,message:n==="ar"?"مطلوب":"Required"}],children:l.jsx(ye,{prefix:l.jsx(Ma,{}),placeholder:"+966 5XX XXX XXX"})}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"password",label:n==="ar"?"كلمة المرور":"Password",rules:[{required:!0,message:n==="ar"?"مطلوب":"Required"},{min:8,message:n==="ar"?"8 أحرف على الأقل":"At least 8 characters"},{validator:(_,D)=>D?D.length<8?Promise.reject(new Error(n==="ar"?"يجب أن تكون كلمة المرور 8 أحرف على الأقل":"Password must be at least 8 characters")):/[A-Z]/.test(D)?/[a-z]/.test(D)?/[0-9]/.test(D)?Promise.resolve():Promise.reject(new Error(n==="ar"?"يجب أن تحتوي كلمة المرور على رقم واحد على الأقل":"Password must contain at least one number")):Promise.reject(new Error(n==="ar"?"يجب أن تحتوي كلمة المرور على حرف صغير واحد على الأقل":"Password must contain at least one lowercase letter")):Promise.reject(new Error(n==="ar"?"يجب أن تحتوي كلمة المرور على حرف كبير واحد على الأقل":"Password must contain at least one uppercase letter")):Promise.resolve()}],help:n==="ar"?"يجب أن تحتوي على 8 أحرف على الأقل، حرف كبير، حرف صغير، ورقم":"Must contain at least 8 characters with uppercase, lowercase, and number",children:l.jsx(ye.Password,{prefix:l.jsx(Nn,{}),placeholder:n==="ar"?"كلمة المرور":"Password"})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"confirmPassword",label:n==="ar"?"تأكيد كلمة المرور":"Confirm Password",dependencies:["password"],rules:[{required:!0,message:n==="ar"?"مطلوب":"Required"},({getFieldValue:_})=>({validator(D,C){return!C||_("password")===C?Promise.resolve():Promise.reject(new Error(n==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match"))}})],children:l.jsx(ye.Password,{prefix:l.jsx(Nn,{}),placeholder:n==="ar"?"تأكيد كلمة المرور":"Confirm Password"})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:8,children:l.jsx(W.Item,{name:"dateOfBirth",label:n==="ar"?"تاريخ الميلاد":"Date of Birth",children:l.jsx(ho,{className:"w-full",placeholder:n==="ar"?"تاريخ الميلاد":"Date of Birth"})})}),l.jsx(me,{xs:24,sm:8,children:l.jsx(W.Item,{name:"gender",label:n==="ar"?"الجنس":"Gender",children:l.jsxs(be,{placeholder:n==="ar"?"اختر الجنس":"Select Gender",children:[l.jsx(dt,{value:"MALE",children:n==="ar"?"ذكر":"Male"}),l.jsx(dt,{value:"FEMALE",children:n==="ar"?"أنثى":"Female"})]})})}),l.jsx(me,{xs:24,sm:8,children:l.jsx(W.Item,{name:"preferredLanguage",label:n==="ar"?"اللغة المفضلة":"Preferred Language",children:l.jsxs(be,{children:[l.jsx(dt,{value:"ar",children:n==="ar"?"العربية":"Arabic"}),l.jsx(dt,{value:"en",children:n==="ar"?"الإنجليزية":"English"})]})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"city",label:n==="ar"?"المدينة":"City",children:l.jsx(ye,{prefix:l.jsx(Dy,{}),placeholder:n==="ar"?"المدينة":"City"})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"country",label:n==="ar"?"الدولة":"Country",children:l.jsx(be,{children:l.jsx(dt,{value:"Saudi Arabia",children:n==="ar"?"السعودية":"Saudi Arabia"})})})})]})]}),m=()=>l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"accountType",label:n==="ar"?"نوع الحساب":"Account Type",rules:[{required:!0}],children:l.jsxs(Ui.Group,{children:[l.jsx(Ui,{value:"INDIVIDUAL",children:n==="ar"?"فرد":"Individual"}),l.jsx(Ui,{value:"COMPANY",children:n==="ar"?"شركة":"Company"}),l.jsx(Ui,{value:"GOVERNMENT_ENTITY",children:n==="ar"?"جهة حكومية":"Government Entity"})]})}),(p==="COMPANY"||p==="GOVERNMENT_ENTITY")&&l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"companyName",label:n==="ar"?"اسم المنشأة":"Establishment Name",children:l.jsx(ye,{placeholder:n==="ar"?"اسم المنشأة":"Establishment Name"})}),l.jsx(W.Item,{name:"commercialName",label:n==="ar"?"الاسم التجاري":"Commercial Name",children:l.jsx(ye,{placeholder:n==="ar"?"الاسم التجاري":"Commercial Name"})}),l.jsx(W.Item,{name:"commercialRegister",label:n==="ar"?"رقم السجل التجاري":"Commercial Register Number",children:l.jsx(ye,{placeholder:n==="ar"?"رقم السجل التجاري":"Commercial Register Number"})}),l.jsx(W.Item,{name:"taxNumber",label:n==="ar"?"الرقم الضريبي":"Tax Number",children:l.jsx(ye,{placeholder:n==="ar"?"الرقم الضريبي (اختياري)":"Tax Number (Optional)"})}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"economicSector",label:n==="ar"?"القطاع الاقتصادي":"Economic Sector",children:l.jsxs(be,{placeholder:n==="ar"?"اختر القطاع":"Select Sector",children:[l.jsx(dt,{value:"GOVERNMENT",children:n==="ar"?"حكومي":"Government"}),l.jsx(dt,{value:"PRIVATE",children:n==="ar"?"خاص":"Private"}),l.jsx(dt,{value:"NON_PROFIT",children:n==="ar"?"غير ربحي":"Non-profit"})]})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"industry",label:n==="ar"?"المجال":"Industry",children:l.jsxs(be,{placeholder:n==="ar"?"اختر المجال":"Select Industry",children:[l.jsx(dt,{value:"INDUSTRIAL",children:n==="ar"?"صناعي":"Industrial"}),l.jsx(dt,{value:"COMMERCIAL",children:n==="ar"?"تجاري":"Commercial"}),l.jsx(dt,{value:"SERVICE",children:n==="ar"?"خدمي":"Service"}),l.jsx(dt,{value:"FINANCIAL",children:n==="ar"?"مالي":"Financial"}),l.jsx(dt,{value:"CONSULTING",children:n==="ar"?"استشاري":"Consulting"}),l.jsx(dt,{value:"EDUCATIONAL",children:n==="ar"?"تعليمي":"Educational"})]})})})]}),l.jsx(W.Item,{name:"numberOfEmployees",label:n==="ar"?"عدد الموظفين (تقديري)":"Number of Employees (Estimated)",children:l.jsx(ye,{type:"number",min:0,placeholder:n==="ar"?"عدد الموظفين":"Number of Employees"})}),l.jsx(cn,{children:n==="ar"?"المرفقات (اختيارية)":"Attachments (Optional)"}),l.jsx(W.Item,{name:"entityDefinition",label:n==="ar"?"مرفق تعريف بالمنشأة":"Entity Definition Document",valuePropName:"fileList",getValueFromEvent:_=>Array.isArray(_)?_:_?.fileList,children:l.jsx(Vt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf",children:l.jsx(J,{icon:l.jsx(Sn,{}),children:n==="ar"?"رفع ملف PDF":"Upload PDF"})})}),l.jsx(W.Item,{name:"commercialRegisterFile",label:n==="ar"?"السجل التجاري أو الهوية":"Commercial Register or ID",valuePropName:"fileList",getValueFromEvent:_=>Array.isArray(_)?_:_?.fileList,children:l.jsx(Vt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf,.jpg,.jpeg,.png",children:l.jsx(J,{icon:l.jsx(Sn,{}),children:n==="ar"?"رفع ملف PDF أو صورة":"Upload PDF or Image"})})}),l.jsx(W.Item,{name:"companyLogo",label:n==="ar"?"شعار الشركة":"Company Logo",valuePropName:"fileList",getValueFromEvent:_=>Array.isArray(_)?_:_?.fileList,children:l.jsx(Vt,{beforeUpload:()=>!1,maxCount:1,accept:".jpg,.jpeg,.png",listType:"picture-card",children:l.jsxs("div",{children:[l.jsx(Sn,{}),l.jsx("div",{style:{marginTop:8},children:n==="ar"?"رفع":"Upload"})]})})})]}),l.jsx(W.Item,{name:"sector",label:n==="ar"?"القطاع":"Sector",children:l.jsx(ye,{placeholder:n==="ar"?"القطاع":"Sector"})})]}),v=()=>l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"academicTitle",label:n==="ar"?"اللقب العلمي":"Academic Title",children:l.jsxs(be,{placeholder:n==="ar"?"اختر اللقب العلمي":"Select Academic Title",children:[l.jsx(dt,{value:"DOCTOR",children:n==="ar"?"دكتور":"Doctor"}),l.jsx(dt,{value:"PROFESSOR",children:n==="ar"?"أستاذ":"Professor"}),l.jsx(dt,{value:"CONSULTANT",children:n==="ar"?"مستشار":"Consultant"}),l.jsx(dt,{value:"EXPERT",children:n==="ar"?"خبير":"Expert"}),l.jsx(dt,{value:"ASSOCIATE_PROFESSOR",children:n==="ar"?"أ.مشارك":"Associate Professor"})]})}),l.jsx(W.Item,{name:"academicDegree",label:n==="ar"?"أعلى مؤهل علمي":"Highest Academic Qualification",rules:[{required:!0,message:n==="ar"?"مطلوب":"Required"}],children:l.jsxs(be,{placeholder:n==="ar"?"اختر المؤهل العلمي":"Select Academic Qualification",children:[l.jsx(dt,{value:"BACHELOR",children:n==="ar"?"بكالوريوس":"Bachelor"}),l.jsx(dt,{value:"MASTER",children:n==="ar"?"ماجستير":"Master"}),l.jsx(dt,{value:"PHD",children:n==="ar"?"دكتوراه":"PhD"})]})}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"university",label:n==="ar"?"الجامعة المانحة":"Issuing University",children:l.jsx(ye,{placeholder:n==="ar"?"اسم الجامعة":"University Name"})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"graduationYear",label:n==="ar"?"سنة التخرج":"Graduation Year",children:l.jsx(ye,{type:"number",min:1950,max:new Date().getFullYear(),placeholder:"YYYY"})})})]}),l.jsx(W.Item,{name:"profilePicture",label:n==="ar"?"الصورة الشخصية":"Profile Picture",valuePropName:"fileList",getValueFromEvent:_=>Array.isArray(_)?_:_?.fileList,children:l.jsx(Vt,{beforeUpload:()=>!1,maxCount:1,accept:".jpg,.jpeg,.png",listType:"picture-card",children:l.jsxs("div",{children:[l.jsx(Sn,{}),l.jsx("div",{style:{marginTop:8},children:n==="ar"?"رفع":"Upload"})]})})}),l.jsx(W.Item,{name:"specialization",label:n==="ar"?"التخصص العام":"General Specialization",rules:[{required:!0,message:n==="ar"?"مطلوب":"Required"}],children:l.jsxs(be,{placeholder:n==="ar"?"اختر التخصص":"Select Specialization",children:[l.jsx(dt,{value:"ECONOMICS",children:n==="ar"?"اقتصاد":"Economics"}),l.jsx(dt,{value:"MANAGEMENT",children:n==="ar"?"إدارة":"Management"}),l.jsx(dt,{value:"FINANCE",children:n==="ar"?"مالية":"Finance"}),l.jsx(dt,{value:"MARKETING",children:n==="ar"?"تسويق":"Marketing"}),l.jsx(dt,{value:"ACCOUNTING",children:n==="ar"?"محاسبة":"Accounting"})]})}),l.jsx(W.Item,{name:"specificSpecialization",label:n==="ar"?"التخصص الدقيق":"Specific Specialization",children:l.jsx(ye,{placeholder:n==="ar"?"مثل: اقتصاد قياسي / تمويل / موارد بشرية":"e.g., Econometrics / Finance / HR"})}),l.jsx(W.Item,{name:"bio",label:n==="ar"?"نبذة مختصرة":"Brief Biography",children:l.jsx(zl,{rows:4,placeholder:n==="ar"?"اكتب نبذة عنك":"Write about yourself"})}),l.jsx(W.Item,{name:"yearsOfExperience",label:n==="ar"?"عدد سنوات الخبرة":"Years of Experience",children:l.jsx(ye,{type:"number",min:0,placeholder:n==="ar"?"عدد السنوات":"Years"})}),l.jsx(W.Item,{name:"previousEmployers",label:n==="ar"?"الجهات السابقة":"Previous Employers",children:l.jsx(zl,{rows:3,placeholder:n==="ar"?"أهم المناصب السابقة":"Most important previous positions"})}),l.jsx(W.Item,{name:"areasOfExpertise",label:n==="ar"?"مجالات الخبرة":"Areas of Expertise",children:l.jsx(be,{mode:"tags",placeholder:n==="ar"?"مثل: دراسات جدوى - استشارات مالية":"e.g., Feasibility Studies - Financial Consulting"})}),l.jsx(W.Item,{name:"implementedProjects",label:n==="ar"?"المشاريع المنفذة":"Implemented Projects",children:l.jsx(zl,{rows:3,placeholder:n==="ar"?"أمثلة مختصرة":"Brief examples"})}),l.jsx(W.Item,{name:"languages",label:n==="ar"?"اللغات":"Languages",children:l.jsx(be,{mode:"tags",placeholder:n==="ar"?"اللغات التي تتحدثها":"Languages you speak"})}),l.jsx(W.Item,{name:"certifications",label:n==="ar"?"الشهادات المهنية":"Professional Certifications",children:l.jsx(be,{mode:"tags",placeholder:n==="ar"?"مثل: CFA / PMP / CMA":"e.g., CFA / PMP / CMA"})}),l.jsx(W.Item,{name:"professionalCourses",label:n==="ar"?"الدورات المهنية":"Professional Courses",children:l.jsx(zl,{rows:3,placeholder:n==="ar"?"مثل: CFA / PMP / CMA":"e.g., CFA / PMP / CMA"})})]}),x=()=>l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"preferredServices",label:n==="ar"?"نوع الخدمة المطلوبة":"Type of Required Service",children:l.jsxs(be,{mode:"multiple",placeholder:n==="ar"?"اختر الخدمات":"Select Services",children:[l.jsx(dt,{value:"ECONOMIC",children:n==="ar"?"اقتصادية":"Economic"}),l.jsx(dt,{value:"FINANCIAL",children:n==="ar"?"مالية":"Financial"}),l.jsx(dt,{value:"ADMINISTRATIVE",children:n==="ar"?"إدارية":"Administrative"}),l.jsx(dt,{value:"FEASIBILITY_STUDY",children:n==="ar"?"دراسات جدوى":"Feasibility Studies"}),l.jsx(dt,{value:"ANALYSIS",children:n==="ar"?"تحليل":"Analysis"})]})}),l.jsx(W.Item,{name:"registrationPurpose",label:n==="ar"?"الهدف من التسجيل":"Purpose of Registration",children:l.jsx(zl,{rows:3,placeholder:n==="ar"?"مثل: تأسيس مشروع / استشارة مالية / تحليل سوق":"e.g., Project establishment / Financial consultation / Market analysis"})}),l.jsx(W.Item,{name:"preferredConsultantId",label:n==="ar"?"المستشار المفضل (اختياري)":"Preferred Consultant (Optional)",children:l.jsx(AV,{})}),l.jsx(cn,{children:n==="ar"?"الإشعارات":"Notifications"}),l.jsx(W.Item,{name:"notificationEmail",valuePropName:"checked",children:l.jsx(ba,{children:n==="ar"?"تفعيل إشعارات البريد الإلكتروني":"Activate Email Notifications"})}),l.jsx(W.Item,{name:"notificationApp",valuePropName:"checked",children:l.jsx(ba,{children:n==="ar"?"تفعيل إشعارات التطبيق":"Activate Application Notifications"})}),l.jsx(W.Item,{name:"notificationWhatsApp",valuePropName:"checked",children:l.jsx(ba,{children:n==="ar"?"تفعيل إشعارات واتساب / الجوال":"Activate WhatsApp / Mobile Notifications"})}),l.jsx(W.Item,{name:"termsAccepted",valuePropName:"checked",rules:[{required:!0,message:n==="ar"?"يجب قبول الشروط والأحكام":"Must accept terms and conditions"}],children:l.jsxs(ba,{children:[n==="ar"?"أوافق على ":"I accept the ",l.jsx(xc,{to:"/terms",target:"_blank",className:"text-olive-green-600 hover:text-olive-green-700 underline",children:n==="ar"?"الشروط والأحكام":"terms and conditions"})]})})]}),b=()=>l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"pricePerSession",label:n==="ar"?"سعر الجلسة (ريال سعودي)":"Session Price (SAR)",rules:[{required:!0,message:n==="ar"?"مطلوب":"Required"}],children:l.jsx(ye,{type:"number",min:0,placeholder:"500"})}),l.jsx(W.Item,{name:"sessionDuration",label:n==="ar"?"مدة الجلسة الافتراضية":"Default Session Duration",children:l.jsxs(be,{children:[l.jsxs(dt,{value:30,children:["30 ",n==="ar"?"دقيقة":"minutes"]}),l.jsxs(dt,{value:60,children:["60 ",n==="ar"?"دقيقة":"minutes"]}),l.jsxs(dt,{value:90,children:["90 ",n==="ar"?"دقيقة":"minutes"]})]})}),l.jsx(W.Item,{name:"consultationMode",label:n==="ar"?"نمط الاستشارة":"Consultation Mode",children:l.jsxs(be,{mode:"multiple",placeholder:n==="ar"?"اختر أنماط الاستشارة":"Select Consultation Modes",children:[l.jsx(dt,{value:"VIDEO",children:n==="ar"?"مرئية":"Video"}),l.jsx(dt,{value:"CHAT",children:n==="ar"?"شات":"Chat"}),l.jsx(dt,{value:"REPORT",children:n==="ar"?"تقارير":"Reports"}),l.jsx(dt,{value:"WRITTEN_STUDY",children:n==="ar"?"دراسات مكتوبة":"Written Studies"})]})}),l.jsx(W.Item,{name:"acceptsSessions",valuePropName:"checked",children:l.jsx(ba,{children:n==="ar"?"تفعيل استقبال الجلسات":"Activate Session Reception"})})]}),A=()=>f==="client"?l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"preferredPaymentMethod",label:n==="ar"?"طريقة الدفع المفضلة":"Preferred Payment Method",children:l.jsxs(be,{placeholder:n==="ar"?"اختر طريقة الدفع":"Select Payment Method",children:[l.jsx(dt,{value:"CREDIT_CARD",children:n==="ar"?"بطاقة":"Card"}),l.jsx(dt,{value:"MADA",children:"Mada"}),l.jsx(dt,{value:"APPLE_PAY",children:"Apple Pay"}),l.jsx(dt,{value:"BANK_TRANSFER",children:n==="ar"?"تحويل بنكي":"Bank Transfer"})]})}),l.jsx(W.Item,{name:"taxNumber",label:n==="ar"?"رقم الهوية أو السجل الضريبي":"ID Number or Tax Register",children:l.jsx(ye,{placeholder:n==="ar"?"يظهر في الفاتورة":"Appears in Invoice"})}),l.jsx(W.Item,{name:"invoiceAddress",label:n==="ar"?"عنوان الفاتورة":"Invoice Address",children:l.jsx(zl,{rows:3,placeholder:n==="ar"?"يظهر في الفواتير الإلكترونية":"Appears in Electronic Invoices"})})]}):l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"bankAccount",label:n==="ar"?"رقم الحساب البنكي / الأيبان":"Bank Account Number / IBAN",children:l.jsx(ye,{placeholder:n==="ar"?"للتحويل المستحقات":"For transferring dues"})}),l.jsx(W.Item,{name:"bankName",label:n==="ar"?"اسم البنك":"Bank Name",children:l.jsxs(be,{placeholder:n==="ar"?"بنوك المملكة":"Banks of the Kingdom",children:[l.jsx(dt,{value:"AL_RAJHI",children:n==="ar"?"الراجحي":"Al Rajhi"}),l.jsx(dt,{value:"AL_AHLI",children:n==="ar"?"الأهلي":"Al Ahli"}),l.jsx(dt,{value:"RIYAD",children:n==="ar"?"الرياض":"Riyad"}),l.jsx(dt,{value:"SABB",children:n==="ar"?"ساب":"SABB"}),l.jsx(dt,{value:"NCB",children:n==="ar"?"الوطني":"NCB"})]})}),l.jsx(W.Item,{name:"iban",label:n==="ar"?"الأيبان":"IBAN",children:l.jsx(ye,{placeholder:"SA..."})}),l.jsx(cn,{children:n==="ar"?"الوثائق والمرفقات":"Documents & Attachments"}),l.jsx(W.Item,{name:"cvUrl",label:n==="ar"?"السيرة الذاتية (CV)":"Curriculum Vitae (CV)",valuePropName:"fileList",getValueFromEvent:_=>Array.isArray(_)?_:_?.fileList,children:l.jsx(Vt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf",children:l.jsx(J,{icon:l.jsx(Sn,{}),children:n==="ar"?"رفع ملف PDF":"Upload PDF"})})}),l.jsx(W.Item,{name:"academicCertificates",label:n==="ar"?"الشهادات الأكاديمية":"Academic Certificates",valuePropName:"fileList",getValueFromEvent:_=>Array.isArray(_)?_:_?.fileList,children:l.jsx(Vt,{beforeUpload:()=>!1,multiple:!0,accept:".pdf,.jpg,.jpeg,.png",children:l.jsx(J,{icon:l.jsx(Sn,{}),children:n==="ar"?"رفع ملفات متعددة":"Upload Multiple Files"})})}),l.jsx(W.Item,{name:"nationalId",label:n==="ar"?"الهوية الوطنية / الإقامة":"National ID / Residence",valuePropName:"fileList",getValueFromEvent:_=>Array.isArray(_)?_:_?.fileList,children:l.jsx(Vt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf,.jpg,.jpeg,.png",children:l.jsx(J,{icon:l.jsx(Sn,{}),children:n==="ar"?"رفع ملف PDF أو صورة":"Upload PDF or Image"})})}),l.jsx(W.Item,{name:"consultingLicense",label:n==="ar"?"رخصة مزاولة الاستشارات (إن وجدت)":"Consulting License (If Available)",valuePropName:"fileList",getValueFromEvent:_=>Array.isArray(_)?_:_?.fileList,children:l.jsx(Vt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf,.jpg,.jpeg,.png",children:l.jsx(J,{icon:l.jsx(Sn,{}),children:n==="ar"?"رفع ملف":"Upload File"})})}),l.jsx(cn,{children:n==="ar"?"الإعدادات":"Settings"}),l.jsx(W.Item,{name:"notificationEmail",valuePropName:"checked",children:l.jsx(ba,{children:n==="ar"?"إشعارات البريد الإلكتروني":"Email Notifications"})}),l.jsx(W.Item,{name:"notificationApp",valuePropName:"checked",children:l.jsx(ba,{children:n==="ar"?"إشعارات التطبيق":"Application Notifications"})}),l.jsx(W.Item,{name:"termsAccepted",valuePropName:"checked",rules:[{required:!0,message:n==="ar"?"يجب قبول الشروط والأحكام":"Must accept terms and conditions"}],children:l.jsx(ba,{children:n==="ar"?"أوافق على الشروط والأحكام":"I accept the terms and conditions"})})]}),w=()=>{switch(o){case 0:return g();case 1:return f==="client"?m():v();case 2:return f==="client"?x():b();case 3:return A();default:return null}},S=()=>{const _=o===0?["role","firstName","lastName","email","phone","password","confirmPassword"]:[];i.validateFields(_).then(()=>{c(o+1)}).catch(D=>{if(console.log("Validation failed:",D),D.errorFields&&D.errorFields.length>0){const C=D.errorFields[0];C.name&&C.name[0]==="role"&&se.error(n==="ar"?"يرجى اختيار نوع الحساب":"Please select account type")}})},E=()=>{c(o-1)};return l.jsx(Dt,{className:"min-h-screen bg-gradient-to-br from-olive-green-50 to-turquoise-50",children:l.jsx(bV,{className:"flex items-center justify-center py-8 px-4",children:l.jsxs(Ee,{className:"w-full max-w-4xl shadow-xl",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-olive-green-600 to-turquoise-500 rounded-lg flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-white font-bold text-3xl",children:"ج"})}),l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Jadwa"}),l.jsx("p",{className:"text-gray-600",children:n==="ar"?"إنشاء حساب جديد":"Create New Account"})]}),l.jsx(Ay,{current:o,className:"mb-8",children:y.map((_,D)=>l.jsx(wV,{title:_.title},D))}),l.jsxs(W,{form:i,onFinish:h,layout:"vertical",initialValues:{role:"client",preferredLanguage:"ar",country:"Saudi Arabia",sessionDuration:60,notificationEmail:!0,notificationApp:!0,acceptsSessions:!0},size:"large",children:[w(),l.jsxs("div",{className:"flex justify-between mt-6",children:[o>0&&l.jsx(J,{onClick:E,children:n==="ar"?"السابق":"Previous"}),l.jsx("div",{className:"flex-1"}),o<y.length-1?l.jsx(J,{type:"primary",onClick:S,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:n==="ar"?"التالي":"Next"}):l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",loading:a,disabled:a,children:n==="ar"?"إنشاء حساب":"Create Account"})]}),l.jsxs("div",{className:"text-center mt-4",children:[l.jsxs("span",{className:"text-gray-600",children:[n==="ar"?"لديك حساب بالفعل؟":"Already have an account?"," "]}),l.jsx(xc,{to:"/login",className:"text-olive-green-600 hover:text-olive-green-700 font-semibold",children:n==="ar"?"تسجيل الدخول":"Login"})]})]})]})})})},{Content:EV}=Dt,{Title:_V,Paragraph:vv}=Du,DV=()=>{const{language:n}=Ze(),{settings:e}=ha(),[t,r]=M.useState("client"),i=n==="ar"?e.termsClient:e.termsClientEn||e.termsClient,a=n==="ar"?e.termsConsultant:e.termsConsultantEn||e.termsConsultant,s=[{key:"client",label:l.jsxs(ze,{children:[l.jsx(tt,{}),l.jsx("span",{children:n==="ar"?"شروط العملاء":"Client Terms"})]}),children:l.jsx("div",{className:"py-4 custom",children:i?l.jsx("div",{className:"ql-editor prose max-w-none text-gray-700 custom",dir:n==="ar"?"rtl":"ltr",dangerouslySetInnerHTML:{__html:i},style:{padding:0,minHeight:"auto",textAlign:n==="ar"?"right":"left"}}):l.jsx(vv,{className:"text-base leading-loose text-gray-700",children:n==="ar"?"لا توجد شروط وأحكام مضافة حالياً.":"No terms and conditions available at the moment."})})},{key:"consultant",label:l.jsxs(ze,{children:[l.jsx(Xr,{}),l.jsx("span",{children:n==="ar"?"شروط المستشارين":"Consultant Terms"})]}),children:l.jsx("div",{className:"py-4 custom",children:a?l.jsx("div",{className:"ql-editor prose max-w-none text-gray-700 custom",dir:n==="ar"?"rtl":"ltr",dangerouslySetInnerHTML:{__html:a},style:{padding:0,minHeight:"auto",textAlign:n==="ar"?"right":"left"}}):l.jsx(vv,{className:"text-base leading-loose text-gray-700",children:n==="ar"?"لا توجد شروط وأحكام مضافة حالياً.":"No terms and conditions available at the moment."})})}];return l.jsxs(Dt,{className:"min-h-screen bg-white",children:[l.jsx(Qr,{}),l.jsx(EV,{className:"pt-24 pb-12",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx(_V,{level:1,className:"mb-4",children:n==="ar"?"الشروط والأحكام":"Terms & Conditions"}),l.jsx(vv,{type:"secondary",className:"text-lg",children:n==="ar"?"سياسات استخدام المنصة للعملاء والمستشارين":"Platform usage policies for clients and consultants"})]}),l.jsx(Ee,{className:"shadow-lg border-0 rounded-2xl overflow-hidden",children:l.jsx(la,{activeKey:t,onChange:r,items:s,centered:!0,size:"large",tabBarStyle:{marginBottom:32}})})]})}),l.jsx(ei,{})]})};var Lp={exports:{}},jV=Lp.exports,pT;function TV(){return pT||(pT=1,(function(n,e){(function(t,r){n.exports=r()})(jV,(function(){return function(t,r,i){t=t||{};var a=r.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(u,d,h,f){return a.fromToBase(u,d,h,f)}i.en.relativeTime=s,a.fromToBase=function(u,d,h,f,p){for(var y,g,m,v=h.$locale().relativeTime||s,x=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],b=x.length,A=0;A<b;A+=1){var w=x[A];w.d&&(y=f?i(u).diff(h,w.d,!0):h.diff(u,w.d,!0));var S=(t.rounding||Math.round)(Math.abs(y));if(m=y>0,S<=w.r||!w.r){S<=1&&A>0&&(w=x[A-1]);var E=v[w.l];p&&(S=p(""+S)),g=typeof E=="string"?E.replace("%d",S):E(S,d,w.l,m);break}}if(d)return g;var _=m?v.future:v.past;return typeof _=="function"?_(g):_.replace("%s",g)},a.to=function(u,d){return o(u,d,this,!0)},a.from=function(u,d){return o(u,d,this)};var c=function(u){return u.$u?i.utc():i()};a.toNow=function(u){return this.to(c(this),u)},a.fromNow=function(u){return this.from(c(this),u)}}}))})(Lp)),Lp.exports}var CV=TV();const NV=It(CV);qe.extend(NV);const{Text:Mf}=Du,$E=({userId:n})=>{const{language:e}=Ze(),{user:t}=Xn(),[r,i]=M.useState([]),[a,s]=M.useState(!1),[o,c]=M.useState(0),[u,d]=M.useState(!1);M.useEffect(()=>{if(n){h();const x=setInterval(h,3e4);return()=>clearInterval(x)}},[n]);const h=async()=>{if(!n){console.warn("NotificationDropdown: userId is not provided");return}try{s(!0);const x=await Cd.getNotifications();if(x&&x.notifications){const b=x.notifications.sort((A,w)=>new Date(w.createdAt)-new Date(A.createdAt));i(b),c(b.filter(A=>!A.isRead).length)}else console.warn("NotificationDropdown: Invalid response format",x),i([]),c(0)}catch(x){console.error("Error fetching notifications:",x),i([]),c(0)}finally{s(!1)}},f=async(x,b)=>{b.stopPropagation();try{await Cd.markAsRead(x),i(A=>A.map(w=>w.id===x?{...w,isRead:!0,readAt:new Date}:w)),c(A=>Math.max(0,A-1))}catch(A){console.error("Error marking as read:",A)}},p=async x=>{x.stopPropagation();try{await Cd.markAllAsRead(),i(b=>b.map(A=>({...A,isRead:!0,readAt:new Date}))),c(0)}catch(b){console.error("Error marking all as read:",b)}},y=async(x,b)=>{b.stopPropagation();try{await Cd.deleteNotification(x),i(A=>A.filter(w=>w.id!==x)),c(A=>{const w=r.find(S=>S.id===x);return w&&!w.isRead?Math.max(0,A-1):A})}catch(A){console.error("Error deleting notification:",A)}},g=x=>{switch(x){case"BOOKING":return"📅";case"MESSAGE":return"💬";case"PAYMENT":return"💰";case"SYSTEM":return"🔔";case"SUPPORT":return"🎫";default:return"📢"}},m=x=>{switch(x){case"BOOKING":return"blue";case"MESSAGE":return"green";case"PAYMENT":return"gold";case"SYSTEM":return"red";case"SUPPORT":return"orange";default:return"default"}},v=[{key:"header",label:l.jsxs("div",{className:"flex items-center justify-between p-2 border-b",children:[l.jsx(Mf,{strong:!0,children:e==="ar"?"الإشعارات":"Notifications"}),l.jsxs(ze,{children:[o>0&&l.jsx(J,{type:"link",size:"small",icon:l.jsx(mA,{}),onClick:x=>{x.stopPropagation(),p(x)},children:e==="ar"?"قراءة الكل":"Mark all read"}),l.jsx(J,{type:"link",size:"small",icon:l.jsx(Er,{}),onClick:x=>{x.stopPropagation(),h()},loading:a})]})]})},...r.slice(0,10).map(x=>({key:x.id,label:l.jsx("div",{className:`p-3 hover:bg-gray-50 ${x.isRead?"":"bg-blue-50 border-r-4 border-blue-500"}`,onMouseDown:b=>{b.stopPropagation(),b.preventDefault()},onClick:b=>{if(b.stopPropagation(),b.preventDefault(),x.link){let A=x.link;if(A.startsWith("/sessions/")){const w=A.replace("/sessions/",""),S=t?.role;S==="CLIENT"?A=`/client/chat/session/${w}`:S==="CONSULTANT"?A=`/consultant/chat/session/${w}`:["ADMIN","SUPER_ADMIN"].includes(S)&&(A=`/admin/chat/${w}`)}else if(A.startsWith("/chat/")){const w=A.replace("/chat/",""),S=t?.role;S==="CLIENT"?A=`/client/chat/${w}`:S==="CONSULTANT"?A=`/consultant/chat/${w}`:["ADMIN","SUPER_ADMIN"].includes(S)&&(A=`/admin/chat/${w}`)}window.location.href=A}x.isRead||f(x.id,{stopPropagation:()=>{}})},children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-2xl",children:g(x.type)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Mf,{strong:!0,className:x.isRead?"":"text-blue-600",children:x.title}),l.jsx($e,{color:m(x.type),size:"small",children:x.type})]}),l.jsx(Mf,{className:"text-sm text-gray-600 block mb-2",ellipsis:!0,children:x.message}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Mf,{className:"text-xs text-gray-400",children:qe(x.createdAt).fromNow()}),l.jsxs(ze,{size:"small",children:[!x.isRead&&l.jsx(J,{type:"text",size:"small",icon:l.jsx(mA,{}),onClick:b=>f(x.id,b),title:e==="ar"?"قراءة":"Mark as read"}),l.jsx(J,{type:"text",size:"small",danger:!0,icon:l.jsx(wi,{}),onClick:b=>y(x.id,b),title:e==="ar"?"حذف":"Delete"})]})]})]})]})})})),...r.length===0?[{key:"empty",label:l.jsx("div",{className:"p-8 text-center",children:l.jsx(jn,{description:e==="ar"?"لا توجد إشعارات":"No notifications",image:jn.PRESENTED_IMAGE_SIMPLE})})}]:[]];return l.jsx(gs,{count:o,size:"small",offset:[-5,5],style:{pointerEvents:"auto"},children:l.jsx(Sy,{menu:{items:v},trigger:["click"],placement:e==="ar"?"bottomLeft":"bottomRight",open:u,dropdownStyle:{width:"400px",zIndex:1050},destroyTooltipOnHide:!1,transitionName:"",popupRender:x=>l.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden flex flex-col",style:{pointerEvents:"auto",maxHeight:"500px",display:"flex",flexDirection:"column"},onMouseDown:b=>{b.stopPropagation(),b.preventDefault()},onClick:b=>{b.stopPropagation()},children:l.jsx("div",{className:"overflow-y-auto flex-1",style:{maxHeight:"450px",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch"},children:x})}),getPopupContainer:()=>document.body,onOpenChange:x=>{x!==u&&d(x)},children:l.jsx(J,{type:"text",icon:l.jsx(ah,{}),className:"text-lg hover:bg-olive-green-50 text-gray-600 rounded-lg",style:{pointerEvents:"auto"}})})})},{Header:kV,Sider:OV,Content:PV}=Dt,IV=({children:n})=>{const{t:e,language:t,toggleLanguage:r}=Ze(),{user:i,logout:a}=Xn(),{settings:s}=ha(),o=Rt(),c=jl(),[u,d]=M.useState(!1),[h,f]=M.useState(!1),p=t==="ar";M.useEffect(()=>{const b=document.querySelector(".client-content");b&&(b.classList.add("fade-in"),setTimeout(()=>{b.classList.remove("fade-in")},500))},[c.pathname]);const y=()=>{a(),o("/login",{replace:!0})},g=[{key:"/client",icon:l.jsx(Dy,{}),label:t==="ar"?"الرئيسية":"Home"},{key:"/client/bookings",icon:l.jsx(vn,{}),label:t==="ar"?"حجوزاتي":"My Bookings"},{key:"/client/consultations",icon:l.jsx(Kt,{}),label:t==="ar"?"استشاراتي":"My Consultations"},{key:"/client/reports",icon:l.jsx(Am,{}),label:t==="ar"?"التقارير":"Reports"},{key:"/client/chat",icon:l.jsx(kn,{}),label:t==="ar"?"الرسائل":"Messages"},{key:"/client/support",icon:l.jsx(Kt,{}),label:t==="ar"?"الدعم الفني":"Support"},{key:"/client/profile",icon:l.jsx(tt,{}),label:t==="ar"?"حسابي":"My Account"}],m=[{key:"profile",icon:l.jsx(tt,{}),label:t==="ar"?"الملف الشخصي":"Profile",onClick:({domEvent:b})=>{b&&(b.stopPropagation(),b.preventDefault()),setTimeout(()=>{f(!1),o("/client/profile")},100)}},{key:"settings",icon:l.jsx(Uc,{}),label:t==="ar"?"الإعدادات":"Settings",onClick:({domEvent:b})=>{b&&(b.stopPropagation(),b.preventDefault()),setTimeout(()=>{f(!1),o("/client/profile")},100)}},{type:"divider"},{key:"logout",icon:l.jsx(oh,{}),label:t==="ar"?"تسجيل الخروج":"Logout",onClick:({domEvent:b})=>{b&&(b.stopPropagation(),b.preventDefault()),setTimeout(()=>{f(!1),y()},100)}}],v={overflow:"auto",height:"100vh",position:"fixed",top:0,bottom:0,[p?"right":"left"]:0,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",zIndex:1e3},x={transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",[p?"marginRight":"marginLeft"]:u?80:250};return l.jsxs(Dt,{className:"min-h-screen",children:[l.jsxs(OV,{trigger:null,collapsible:!0,collapsed:u,width:250,className:"client-sidebar bg-gradient-to-b from-white to-gray-50 shadow-2xl border-r border-gray-200",style:v,children:[l.jsx("div",{className:"p-6 flex items-center justify-between border-b border-gray-200",children:l.jsxs("div",{className:`flex items-center gap-3 transition-all duration-300 ${u?"justify-center w-full":""}`,children:[s.logo?l.jsx("img",{src:s.logo,alt:"Logo",className:`${u?"w-12 h-12":"h-10"} object-contain cursor-pointer transition-all duration-300`,onClick:()=>o("/client")}):l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-olive-green-600 via-olive-green-500 to-turquoise-500 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300 cursor-pointer",style:{backgroundColor:s.primaryColor},onClick:()=>o("/client"),children:l.jsx("span",{className:"text-white font-bold text-xl",children:t==="ar"?s.dashboardNameAr?.[0]||"ج":s.dashboardName?.[0]||"J"})}),!u&&l.jsxs("div",{className:"animate-fade-in cursor-pointer",onClick:()=>o("/client"),children:[l.jsx("div",{className:"text-base font-bold text-olive-green-700",style:{color:s.primaryColor},children:s.dashboardName||"Jadwa"}),l.jsx("div",{className:"text-xs text-gray-500",children:s.dashboardNameAr||"جدوى"})]})]})}),l.jsx(ih,{mode:"inline",selectedKeys:[c.pathname],items:g,onClick:({key:b})=>o(b),className:"border-0 mt-4 px-2",style:{background:"transparent"}}),l.jsx("div",{className:"absolute bottom-4 left-0 right-0 px-4",children:l.jsx(J,{type:"text",icon:u?p?l.jsx(Pc,{}):l.jsx(Ic,{}):p?l.jsx(Ic,{}):l.jsx(Pc,{}),onClick:()=>d(!u),className:"w-full hover:bg-olive-green-50 text-olive-green-600 border border-olive-green-200 rounded-lg transition-all duration-300",children:!u&&l.jsx("span",{className:"ml-2",children:t==="ar"?"طي":"Collapse"})})})]}),l.jsxs(Dt,{style:x,className:"transition-all duration-300",children:[l.jsxs(kV,{className:"bg-white shadow-md px-3 md:px-6 flex items-center justify-between fixed top-0 z-[1001] backdrop-blur-sm bg-white/95",style:{position:"fixed",width:`calc(100% - ${u?80:250}px)`,[p?"right":"left"]:u?80:250,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)"},children:[l.jsx(J,{type:"text",icon:l.jsx(jy,{}),onClick:()=>d(!u),className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300",style:{pointerEvents:"auto"}}),l.jsxs("div",{className:"flex items-center gap-2 md:gap-4",style:{pointerEvents:"auto",position:"relative",zIndex:1002},children:[l.jsx(J,{type:"text",icon:l.jsx(Ra,{}),onClick:r,className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300 font-semibold",title:t==="ar"?"Switch to English":"التبديل إلى العربية",style:{pointerEvents:"auto"},children:t==="ar"?"EN":"AR"}),l.jsx($E,{userId:i?.id}),l.jsx(Sy,{menu:{items:m},placement:p?"bottomLeft":"bottomRight",trigger:["click"],open:h,destroyTooltipOnHide:!1,transitionName:"",getPopupContainer:()=>document.body,popupRender:b=>l.jsx("div",{onMouseDown:A=>{A.stopPropagation(),A.preventDefault()},onClick:A=>{A.stopPropagation()},children:b}),onOpenChange:b=>{b!==h&&f(b)},children:l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-3 py-2 rounded-lg group",children:[l.jsx(Mt,{src:i?.avatar||i?.client?.profilePicture,icon:l.jsx(tt,{}),className:"ring-2 ring-olive-green-200 group-hover:ring-olive-green-400 transition-all duration-300"}),l.jsx("span",{className:"hidden md:inline font-medium text-gray-700",children:i?.client?`${i.client.firstName} ${i.client.lastName}`:i?.email})]})})]})]}),l.jsx(PV,{className:"p-3 md:p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen client-content",style:{marginTop:"64px"},children:l.jsx("div",{className:"animate-fade-in",children:n})})]})]})},RV=()=>{const{language:n}=Ze(),{user:e}=Xn(),t=Rt(),[r,i]=M.useState(!0),[a,s]=M.useState(null),[o,c]=M.useState({totalBookings:0,pendingBookings:0,completedBookings:0,totalSpent:0}),[u,d]=M.useState([]),[h,f]=M.useState([]);M.useEffect(()=>{p()},[]);const p=async()=>{try{i(!0),s(null);const v=await mR.getDashboardStats();c(v.stats),d(v.upcomingBookings||[]),f(v.recentBookings||[])}catch(v){console.error("Error fetching dashboard data:",v),s(v.message||"Failed to load dashboard data")}finally{i(!1)}},y=({title:v,value:x,icon:b,color:A,suffix:w="",delay:S=0})=>l.jsxs(Ee,{className:"modern-kpi-card card-hover shadow-professional-lg relative overflow-hidden h-full border-0",style:{animationDelay:`${S}s`},styles:{body:{padding:"20px"}},children:[l.jsx("div",{className:`absolute -top-8 -right-8 w-32 h-32 rounded-full ${A} opacity-5 blur-2xl`}),l.jsx("div",{className:`absolute -bottom-6 -left-6 w-24 h-24 rounded-full ${A} opacity-5 blur-xl`}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsx("div",{className:`p-3 rounded-2xl ${A} bg-opacity-10 shadow-sm`,children:l.jsx("div",{className:"text-2xl sm:text-3xl",children:b})})}),l.jsx(pt,{title:l.jsx("span",{className:"text-gray-600 font-semibold text-xs sm:text-sm uppercase tracking-wide",children:v}),value:x,suffix:w,valueStyle:{color:A.includes("teal")?"#14b8a6":A.includes("olive")?"#7a8c66":A.includes("blue")?"#1890ff":"#faad14",fontWeight:800,fontSize:"clamp(20px, 4vw, 28px)",lineHeight:1.2}})]})]}),g=[{icon:l.jsx(Fc,{className:"text-3xl"}),title:n==="ar"?"الاستشارات الاقتصادية":"Economic Consultations",color:"from-olive-green-500 to-olive-green-600",path:"/client/bookings"},{icon:l.jsx(Kt,{className:"text-3xl"}),title:n==="ar"?"دراسات الجدوى":"Feasibility Studies",color:"from-turquoise-500 to-turquoise-600",path:"/client/bookings"},{icon:l.jsx(yR,{className:"text-3xl"}),title:n==="ar"?"التحليل الاقتصادي":"Econometric Analysis",color:"from-olive-green-400 to-turquoise-500",path:"/client/bookings"},{icon:l.jsx(io,{className:"text-3xl"}),title:n==="ar"?"استشارة فيديو/محادثة":"Video/Chat Consultation",color:"from-turquoise-400 to-olive-green-500",path:"/client/bookings"},{icon:l.jsx(rR,{className:"text-3xl"}),title:n==="ar"?"التقارير الاقتصادية":"Ready Economic Reports",color:"from-olive-green-600 to-turquoise-600",path:"/client/consultations"}],m=e?.client?`${e.client.firstName||""} ${e.client.lastName||""}`.trim():e?.email||(n==="ar"?"عميل":"Client");return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 md:mb-10 relative z-10 px-2 sm:px-0",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:n==="ar"?`مرحباً، ${m}`:`Welcome, ${m}`}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:n==="ar"?"إليك نظرة سريعة على حسابك":"Here is a quick overview of your account"})]}),l.jsx("div",{className:"text-sm sm:text-base text-gray-700 glass-card px-4 py-3 rounded-xl shadow-professional whitespace-nowrap font-medium",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(vn,{className:"text-olive-green-600"}),new Date().toLocaleDateString(n==="ar"?"ar-SA":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]}),r?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx(kt,{size:"large"})}):a?l.jsx(Fn,{message:n==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:a,type:"error",showIcon:!0,closable:!0,onClose:()=>s(null),className:"mb-6"}):l.jsxs(l.Fragment,{children:[l.jsxs(Re,{gutter:[12,12],className:"mb-4 md:mb-6",children:[l.jsx(me,{xs:12,sm:12,md:6,lg:6,xl:6,children:l.jsx(y,{title:n==="ar"?"إجمالي الحجوزات":"Total Bookings",value:o.totalBookings,icon:l.jsx(vn,{className:"text-xl sm:text-2xl text-teal-500"}),color:"bg-teal-500",delay:.1})}),l.jsx(me,{xs:12,sm:12,md:6,lg:6,xl:6,children:l.jsx(y,{title:n==="ar"?"الحجوزات المعلقة":"Pending Bookings",value:o.pendingBookings,icon:l.jsx($i,{className:"text-xl sm:text-2xl text-orange-500"}),color:"bg-orange-500",delay:.2})}),l.jsx(me,{xs:12,sm:12,md:6,lg:6,xl:6,children:l.jsx(y,{title:n==="ar"?"الحجوزات المكتملة":"Completed Bookings",value:o.completedBookings,icon:l.jsx(Zt,{className:"text-xl sm:text-2xl text-green-500"}),color:"bg-green-500",delay:.3})}),l.jsx(me,{xs:12,sm:12,md:6,lg:6,xl:6,children:l.jsx(y,{title:n==="ar"?"إجمالي الإنفاق":"Total Spent",value:o.totalSpent,icon:l.jsx(Yn,{className:"text-xl sm:text-2xl text-olive-green-600"}),color:"bg-olive-green-600",suffix:n==="ar"?" ريال":" SAR",delay:.4})})]}),l.jsxs(Re,{gutter:[12,12],className:"mb-4 md:mb-6",children:[l.jsx(me,{xs:24,sm:24,md:24,lg:12,xl:12,children:l.jsx(Ee,{title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-olive-green-500 to-olive-green-600",children:l.jsx(vn,{className:"text-white text-lg sm:text-xl"})}),l.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:n==="ar"?"الحجوزات القادمة":"Upcoming Bookings"})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0 h-full",style:{animationDelay:"0.2s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},extra:u.length>0&&l.jsxs(J,{type:"link",onClick:()=>t("/client/bookings"),className:"text-olive-green-600 text-xs sm:text-sm p-0",children:[n==="ar"?"عرض الكل":"View All"," ",l.jsx(xm,{})]}),children:u.length>0?l.jsx(qt,{dataSource:u,renderItem:v=>l.jsx(qt.Item,{className:"hover:bg-gray-50 rounded-lg p-2 sm:p-3 transition-colors",children:l.jsx(qt.Item.Meta,{avatar:l.jsx(Mt,{src:v.consultant?.user?.avatar,icon:l.jsx(tt,{}),size:{xs:40,sm:48}}),title:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 flex-wrap",children:[l.jsx("span",{className:"font-semibold text-sm sm:text-base",children:v.service?.title||v.service?.titleAr||"Consultation"}),l.jsx($e,{color:"blue",className:"text-xs",children:qe(v.scheduledAt).format("MMM DD, YYYY")})]}),description:l.jsxs("div",{children:[l.jsxs("div",{className:"text-gray-600 text-xs sm:text-sm",children:[v.consultant?.firstName," ",v.consultant?.lastName]}),v.selectedTimeSlot&&l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[l.jsx($i,{})," ",v.selectedTimeSlot]})]})})})}):l.jsx(jn,{description:n==="ar"?"لا توجد حجوزات قادمة":"No upcoming bookings",image:jn.PRESENTED_IMAGE_SIMPLE,className:"py-8"})})}),l.jsx(me,{xs:24,sm:24,md:24,lg:12,xl:12,children:l.jsx(Ee,{title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-teal-500 to-teal-600",children:l.jsx(Kt,{className:"text-white text-lg sm:text-xl"})}),l.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:n==="ar"?"إجراءات سريعة":"Quick Actions"})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0 h-full",style:{animationDelay:"0.3s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:l.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[l.jsx(J,{type:"primary",size:"large",block:!0,icon:l.jsx(gr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 h-11 sm:h-12 text-sm sm:text-base",onClick:()=>t("/client/bookings"),children:n==="ar"?"حجز استشارة جديدة":"Book New Consultation"}),l.jsx(J,{size:"large",block:!0,icon:l.jsx(Kt,{}),className:"border-olive-green-600 text-olive-green-600 hover:bg-olive-green-50 h-11 sm:h-12 text-sm sm:text-base",onClick:()=>t("/client/consultations"),children:n==="ar"?"عرض الاستشارات السابقة":"View Previous Consultations"}),l.jsx(J,{size:"large",block:!0,icon:l.jsx(kn,{}),className:"border-turquoise-500 text-turquoise-500 hover:bg-turquoise-50 h-11 sm:h-12 text-sm sm:text-base",onClick:()=>t("/client/chat"),children:n==="ar"?"فتح المحادثة":"Open Chat"})]})})})]})]}),l.jsxs("div",{className:"mb-6 md:mb-8 relative z-10 px-2 sm:px-0",children:[l.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-4 sm:mb-6 text-gray-900",children:n==="ar"?"خدماتنا":"Our Services"}),l.jsx(Re,{gutter:[12,12],className:"sm:gutter-[16]",children:g.map((v,x)=>l.jsx(me,{xs:12,sm:12,md:8,lg:6,xl:6,children:l.jsxs(Ee,{className:"glass-card text-center cursor-pointer shadow-professional-xl border-0 card-hover h-full",onClick:()=>t(v.path),style:{animationDelay:`${.4+x*.1}s`},styles:{body:{padding:"20px"}},children:[l.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 rounded-xl bg-gradient-to-br ${v.color} flex items-center justify-center text-white mx-auto mb-3 sm:mb-4 shadow-lg`,children:l.jsx("div",{className:"text-xl sm:text-3xl",children:v.icon})}),l.jsx("h3",{className:"font-semibold mb-2 sm:mb-3 text-gray-900 text-sm sm:text-base line-clamp-2",children:v.title}),l.jsx(J,{type:"primary",size:"small",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 w-full text-xs sm:text-sm",onClick:b=>{b.stopPropagation(),t(v.path)},children:n==="ar"?"طلب الخدمة":"Request Service"})]})},x))})]})]})},{TextArea:MV}=ye,FV=()=>{const{language:n}=Ze(),{user:e}=Xn(),t=Rt(),[r]=W.useForm(),[i,a]=M.useState(0),[s,o]=M.useState([]),[c,u]=M.useState([]),[d,h]=M.useState(!1),[f,p]=M.useState(!1),[y,g]=M.useState(null),[m,v]=M.useState(null);M.useEffect(()=>{e&&e.role!=="CLIENT"&&(se.error(n==="ar"?"غير مصرح لك بالوصول إلى هذه الصفحة":"You are not authorized to access this page"),e.role==="CONSULTANT"?t("/consultant",{replace:!0}):["ADMIN","SUPER_ADMIN"].includes(e.role)?t("/admin",{replace:!0}):t("/",{replace:!0}))},[e,t,n]),M.useEffect(()=>{e?.role==="CLIENT"&&(x(),b())},[e]);const x=async()=>{try{h(!0);const _=await vs.getConsultants({isAvailable:!0});o(_.consultants||[])}catch(_){console.error("Error fetching consultants:",_),se.error(n==="ar"?"فشل تحميل المستشارين":"Failed to load consultants")}finally{h(!1)}},b=async()=>{try{const _=await Hs.getServices({status:"active"});u(_.services||[])}catch(_){console.error("Error fetching services:",_)}},A=[{value:"economic",label:n==="ar"?"اقتصادي":"Economic"},{value:"administrative",label:n==="ar"?"إداري":"Administrative"},{value:"financial",label:n==="ar"?"مالي":"Financial"},{value:"accounting",label:n==="ar"?"محاسبي":"Accounting"}],w=[{value:"card",label:n==="ar"?"بطاقة ائتمانية":"Credit Card"},{value:"mada",label:"Mada"},{value:"applepay",label:"Apple Pay"},{value:"bank",label:n==="ar"?"تحويل بنكي":"Bank Transfer"}],S=[{title:n==="ar"?"نوع الاستشارة":"Consultation Type",icon:l.jsx(vn,{})},{title:n==="ar"?"اختيار المستشار":"Select Consultant",icon:l.jsx(tt,{})},{title:n==="ar"?"التاريخ والوقت":"Date & Time",icon:l.jsx(vn,{})},{title:n==="ar"?"الدفع":"Payment",icon:l.jsx(FE,{})}],E=async _=>{if(!y){se.error(n==="ar"?"يرجى اختيار مستشار":"Please select a consultant"),a(1);return}try{p(!0);const D=qe(_.date).hour(qe(_.time).hour()).minute(qe(_.time).minute()).second(0).millisecond(0),C={consultantId:y.id,serviceId:m?.id||null,bookingType:_.consultationType?.toUpperCase()||"CONSULTATION",scheduledAt:D.toISOString(),selectedTimeSlot:qe(_.time).format("HH:mm"),duration:y.duration||60,price:y.pricePerSession||0,clientNotes:_.details||""},k=await Ir.createBooking(C);se.success(n==="ar"?"تم إنشاء الحجز بنجاح":"Booking created successfully"),t("/client/bookings")}catch(D){console.error("Error creating booking:",D),se.error(D.message||(n==="ar"?"فشل إنشاء الحجز":"Failed to create booking"))}finally{p(!1)}};return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"mb-8 relative z-10",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:n==="ar"?"حجز استشارة":"Book Consultation"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:n==="ar"?"احجز استشارة مع أحد مستشارينا الخبراء":"Book a consultation with one of our expert consultants"})]}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 mb-6 relative z-10",children:l.jsx(Ay,{current:i,items:S})}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsxs(W,{form:r,onFinish:E,layout:"vertical",children:[i===0&&l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"serviceId",label:n==="ar"?"نوع الخدمة":"Service Type",rules:[{required:!0,message:n==="ar"?"يرجى اختيار نوع الخدمة":"Please select a service type"}],children:l.jsx(be,{size:"large",placeholder:n==="ar"?"اختر نوع الخدمة":"Select Service Type",onChange:_=>{const D=c.find(C=>C.id===_);v(D)},children:c.map(_=>l.jsx(be.Option,{value:_.id,children:n==="ar"&&_.titleAr||_.title},_.id))})}),l.jsx(W.Item,{name:"consultationType",label:n==="ar"?"نوع الاستشارة":"Consultation Type",rules:[{required:!0}],children:l.jsx(Ui.Group,{children:l.jsx(Re,{gutter:[16,16],children:A.map(_=>l.jsx(me,{xs:24,sm:12,children:l.jsx(Ui.Button,{value:_.value,className:"w-full text-center h-12",children:_.label})},_.value))})})})]}),i===1&&l.jsx(W.Item,{name:"consultantId",label:n==="ar"?"اختر المستشار":"Select Consultant",rules:[{required:!0,message:n==="ar"?"يرجى اختيار مستشار":"Please select a consultant"}],children:d?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx(kt,{size:"large"})}):l.jsx("div",{className:"space-y-4",children:s.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500",children:n==="ar"?"لا توجد مستشارين متاحين":"No available consultants"}):s.map(_=>{const D=y?.id===_.id;return l.jsx(Ee,{className:`glass-card card-hover cursor-pointer ${D?"border-olive-green-500 border-2 shadow-professional-lg":"hover:border-olive-green-500"}`,onClick:()=>{g(_),r.setFieldsValue({consultantId:_.id})},children:l.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[l.jsx(Mt,{src:_.user?.avatar,size:64,icon:l.jsx(tt,{})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("h3",{className:"text-lg font-bold",children:[_.firstName," ",_.lastName]}),l.jsx("p",{className:"text-gray-600",children:_.specialization||(n==="ar"?"مستشار":"Consultant")}),_.rating&&l.jsx(Ia,{disabled:!0,defaultValue:_.rating,className:"mb-2"}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsxs("span",{className:"text-olive-green-600 font-bold",children:[_.pricePerSession||0," ",n==="ar"?"ريال":"SAR"]}),l.jsxs("span",{className:"text-gray-500",children:[_.sessionDuration||60," ",n==="ar"?"دقيقة":"minutes"]})]})]})]})},_.id)})})}),i===2&&l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"date",label:n==="ar"?"التاريخ":"Date",rules:[{required:!0}],children:l.jsx(ho,{size:"large",className:"w-full",disabledDate:_=>_&&_<qe().startOf("day")})}),l.jsx(W.Item,{name:"time",label:n==="ar"?"الوقت":"Time",rules:[{required:!0}],children:l.jsx(sz,{size:"large",className:"w-full",format:"HH:mm"})}),l.jsx(W.Item,{name:"details",label:n==="ar"?"تفاصيل إضافية":"Additional Details",children:l.jsx(MV,{rows:4,placeholder:n==="ar"?"أدخل أي تفاصيل إضافية...":"Enter any additional details..."})})]}),i===3&&l.jsxs(l.Fragment,{children:[l.jsxs(Ee,{className:"glass-card shadow-professional-lg rounded-xl border-0 mb-4",children:[l.jsx("h3",{className:"font-bold mb-4",children:n==="ar"?"ملخص الحجز":"Booking Summary"}),l.jsxs("div",{className:"space-y-2 text-gray-700",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:n==="ar"?"المستشار:":"Consultant:"}),l.jsx("span",{className:"font-semibold",children:y?`${y.firstName} ${y.lastName}`:"-"})]}),m&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:n==="ar"?"الخدمة:":"Service:"}),l.jsx("span",{className:"font-semibold",children:n==="ar"&&m.titleAr||m.title})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:n==="ar"?"التاريخ والوقت:":"Date & Time:"}),l.jsx("span",{className:"font-semibold",children:r.getFieldValue("date")&&r.getFieldValue("time")?qe(r.getFieldValue("date")).format("YYYY-MM-DD")+" "+qe(r.getFieldValue("time")).format("HH:mm"):"-"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:n==="ar"?"المبلغ:":"Amount:"}),l.jsxs("span",{className:"font-semibold text-olive-green-600",children:[y?.pricePerSession||0," ",n==="ar"?"ريال":"SAR"]})]})]})]}),l.jsx(W.Item,{name:"paymentMethod",label:n==="ar"?"طريقة الدفع":"Payment Method",rules:[{required:!0}],children:l.jsx(Ui.Group,{children:l.jsx(Re,{gutter:[16,16],children:w.map(_=>l.jsx(me,{xs:24,sm:12,children:l.jsx(Ui.Button,{value:_.value,className:"w-full text-center h-12",children:_.label})},_.value))})})})]}),l.jsxs("div",{className:"flex justify-between mt-6",children:[l.jsx(J,{onClick:()=>a(Math.max(0,i-1)),disabled:i===0,children:n==="ar"?"السابق":"Previous"}),i<S.length-1?l.jsx(J,{type:"primary",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{if(i===1&&!y){se.error(n==="ar"?"يرجى اختيار مستشار":"Please select a consultant");return}r.validateFields().then(()=>{a(i+1)}).catch(()=>{})},children:n==="ar"?"التالي":"Next"}):l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-turquoise-500 hover:bg-turquoise-600 border-0",loading:f,children:n==="ar"?"إتمام الحجز":"Complete Booking"})]})]})})]})},LV=()=>{const{t:n,language:e}=Ze(),t=Rt(),[r,i]=M.useState([]),[a,s]=M.useState(!0);M.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const h=(await Ir.getBookings()).bookings.map(f=>({id:f.id,bookingId:f.id,consultant:f.consultant?`${f.consultant.firstName} ${f.consultant.lastName}`:e==="ar"?"غير متوفر":"N/A",type:f.service?e==="ar"?f.service.titleAr:f.service.title:e==="ar"?"غير محدد":"Not specified",date:f.scheduledAt?qe(f.scheduledAt).format("YYYY-MM-DD"):"-",status:f.status?.toLowerCase()||"pending",rating:f.rating||null,session:f.session}));i(h)}catch(d){console.error("Error fetching consultations:",d),se.error(e==="ar"?"فشل تحميل الاستشارات":"Failed to load consultations")}finally{s(!1)}},c=async d=>{try{const h=await fn.generateVideoRoom(d);await fn.startSession(d,h.room?.roomId),se.success(e==="ar"?"تم بدء الجلسة بنجاح":"Session started successfully"),o(),t(`/client/chat/${d}`)}catch(h){se.error(h.message||(e==="ar"?"فشل بدء الجلسة":"Failed to start session"))}},u=[{title:e==="ar"?"المستشار":"Consultant",dataIndex:"consultant",key:"consultant"},{title:e==="ar"?"النوع":"Type",dataIndex:"type",key:"type"},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:d=>{const h={completed:"green",pending:"orange",cancelled:"red",confirmed:"blue",in_progress:"green"},f={completed:e==="ar"?"مكتمل":"Completed",pending:e==="ar"?"قيد الانتظار":"Pending",cancelled:e==="ar"?"ملغي":"Cancelled",confirmed:e==="ar"?"مؤكد":"Confirmed",in_progress:e==="ar"?"قيد التنفيذ":"In Progress"};return l.jsx($e,{color:h[d]||"default",children:f[d]||d})}},{title:e==="ar"?"التقييم":"Rating",dataIndex:"rating",key:"rating",render:d=>d?l.jsx(Ia,{disabled:!0,defaultValue:d}):"-"},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(d,h)=>l.jsxs(ze,{children:[(h.status==="confirmed"||h.status==="pending")&&l.jsx(J,{type:"primary",icon:l.jsx(ka,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>c(h.bookingId),children:e==="ar"?"بدء الجلسة":"Start Session"}),h.status==="in_progress"&&l.jsx(J,{icon:l.jsx(kn,{}),onClick:()=>t(`/client/chat/${h.bookingId}`),children:e==="ar"?"فتح المحادثة":"Open Chat"}),l.jsx(J,{type:"link",icon:l.jsx(Kt,{}),onClick:()=>t(`/client/reports?bookingId=${h.bookingId}`),children:e==="ar"?"عرض التقرير":"View Report"}),h.status==="completed"&&!h.rating&&l.jsx(J,{type:"link",onClick:()=>console.log("Rate",h.id),children:e==="ar"?"تقييم":"Rate"})]})}];return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"mb-8 relative z-10",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"استشاراتي":"My Consultations"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"عرض جميع استشاراتك السابقة والحالية":"View all your past and current consultations"})]}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx(Pt,{columns:u,dataSource:r,rowKey:"id",loading:a,pagination:{pageSize:10}})})]})},zE=()=>{const[n,e]=M.useState(!1),[t,r]=M.useState(0),[i,a]=M.useState(null),[s,o]=M.useState(null),c=M.useRef(null),u=M.useRef([]),d=M.useRef(null);M.useEffect(()=>()=>{c.current&&c.current.state!=="inactive"&&c.current.stop(),s&&URL.revokeObjectURL(s),d.current&&clearInterval(d.current)},[s]);const h=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("MediaDevices API is not supported in this browser");if((await navigator.mediaDevices.enumerateDevices()).filter(A=>A.kind==="audioinput").length===0)throw new Error("No audio input device found");const v=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});let x="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(x)||(x="audio/webm",MediaRecorder.isTypeSupported(x)||(x="audio/mp4",MediaRecorder.isTypeSupported(x)||(x="")));const b=new MediaRecorder(v,x?{mimeType:x}:void 0);u.current=[],b.ondataavailable=A=>{A.data.size>0&&u.current.push(A.data)},b.onstop=()=>{const A=new Blob(u.current,{type:x||"audio/webm"});a(A);const w=URL.createObjectURL(A);o(w),v.getTracks().forEach(S=>S.stop())},c.current=b,b.start(),e(!0),r(0),d.current=setInterval(()=>{r(A=>A+1)},1e3)}catch(g){console.error("Error starting recording:",g);let m="Failed to access microphone. ";g.name==="NotFoundError"||g.name==="DevicesNotFoundError"?m+="No microphone found. Please connect a microphone and try again.":g.name==="NotAllowedError"||g.name==="PermissionDeniedError"?m+="Microphone permission denied. Please allow microphone access in your browser settings.":g.name==="NotReadableError"||g.name==="TrackStartError"?m+="Microphone is being used by another application. Please close it and try again.":m+=g.message||"Please check your microphone permissions.",se.error(m),e(!1)}},f=()=>{c.current&&c.current.state!=="inactive"&&(c.current.stop(),e(!1),d.current&&(clearInterval(d.current),d.current=null))};return{isRecording:n,recordingTime:t,audioBlob:i,audioUrl:s,startRecording:h,stopRecording:f,cancelRecording:()=>{f(),a(null),s&&(URL.revokeObjectURL(s),o(null)),r(0),u.current=[]},formatTime:g=>{const m=Math.floor(g/60),v=g%60;return`${m}:${v.toString().padStart(2,"0")}`}}},UV=()=>{const[n,e]=M.useState(!1),[t,r]=M.useState(0),[i,a]=M.useState(null),[s,o]=M.useState(null),c=M.useRef(null),u=M.useRef([]),d=M.useRef(null),h=M.useRef(null),f=M.useRef(null);M.useEffect(()=>()=>{c.current&&c.current.state!=="inactive"&&c.current.stop(),d.current&&d.current.getTracks().forEach(v=>v.stop()),s&&URL.revokeObjectURL(s),h.current&&clearInterval(h.current)},[s]);const p=async v=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("MediaDevices API is not supported in this browser");const x=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});d.current=x,f.current=v,v&&(v.srcObject=x,v.play());let b="video/webm;codecs=vp9,opus";MediaRecorder.isTypeSupported(b)||(b="video/webm;codecs=vp8,opus",MediaRecorder.isTypeSupported(b)||(b="video/webm",MediaRecorder.isTypeSupported(b)||(b="video/mp4",MediaRecorder.isTypeSupported(b)||(b=""))));const A=new MediaRecorder(x,b?{mimeType:b}:void 0);u.current=[],A.ondataavailable=w=>{w.data.size>0&&u.current.push(w.data)},A.onstop=()=>{const w=new Blob(u.current,{type:b||"video/webm"});a(w);const S=URL.createObjectURL(w);o(S),x.getTracks().forEach(E=>E.stop()),v&&(v.srcObject=null)},c.current=A,A.start(),e(!0),r(0),h.current=setInterval(()=>{r(w=>w+1)},1e3)}catch(x){console.error("Error starting video recording:",x);let b="Failed to access camera/microphone. ";x.name==="NotFoundError"||x.name==="DevicesNotFoundError"?b+="No camera/microphone found. Please connect a device and try again.":x.name==="NotAllowedError"||x.name==="PermissionDeniedError"?b+="Camera/microphone permission denied. Please allow access in your browser settings.":x.name==="NotReadableError"||x.name==="TrackStartError"?b+="Camera/microphone is being used by another application. Please close it and try again.":b+=x.message||"Please check your device permissions.",se.error(b),e(!1)}},y=()=>{c.current&&c.current.state!=="inactive"&&(c.current.stop(),e(!1),h.current&&(clearInterval(h.current),h.current=null),d.current&&d.current.getTracks().forEach(v=>v.stop()),f.current&&(f.current.srcObject=null))};return{isRecording:n,recordingTime:t,videoBlob:i,videoUrl:s,startRecording:p,stopRecording:y,cancelRecording:()=>{y(),a(null),s&&(URL.revokeObjectURL(s),o(null)),r(0),u.current=[]},formatTime:v=>{const x=Math.floor(v/60),b=v%60;return`${x}:${b.toString().padStart(2,"0")}`}}},qE=({src:n,isOwnMessage:e=!1,language:t="en"})=>{const[r,i]=M.useState(!1),[a,s]=M.useState(0),[o,c]=M.useState(0),[u,d]=M.useState(!0),[h,f]=M.useState(!1),p=M.useRef(null);M.useEffect(()=>{const x=p.current;if(!x)return;f(!1),d(!0),i(!1),s(0),c(0);const b=()=>s(x.currentTime),A=()=>{c(x.duration||0),d(!1)},w=()=>i(!0),S=()=>i(!1),E=()=>{i(!1),s(0)},_=C=>{d(!1),f(!0),i(!1)},D=()=>{d(!1),c(x.duration||0)};return x.addEventListener("timeupdate",b),x.addEventListener("loadedmetadata",A),x.addEventListener("canplay",D),x.addEventListener("play",w),x.addEventListener("pause",S),x.addEventListener("ended",E),x.addEventListener("error",_),x.load(),()=>{x.removeEventListener("timeupdate",b),x.removeEventListener("loadedmetadata",A),x.removeEventListener("canplay",D),x.removeEventListener("play",w),x.removeEventListener("pause",S),x.removeEventListener("ended",E),x.removeEventListener("error",_)}},[n]);const y=()=>{const x=p.current;if(!(!x||h)){if(x.error){f(!0),i(!1);return}r?x.pause():x.play().catch(b=>{i(!1),f(!0),(b.name==="NotSupportedError"||b.message?.includes("no supported sources"))&&f(!0)})}},g=x=>{const b=p.current,w=x.currentTarget.getBoundingClientRect(),S=x.clientX-w.left,E=w.width,_=S/E;b&&o&&(b.currentTime=_*o)},m=x=>{if(!x||isNaN(x))return"0:00";const b=Math.floor(x/60),A=Math.floor(x%60);return`${b}:${A.toString().padStart(2,"0")}`},v=o>0?a/o*100:0;return h?l.jsxs("div",{className:`whatsapp-audio-player flex items-center gap-3 ${e?"flex-row-reverse":""} opacity-60`,children:[l.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${e?"bg-gray-400 text-white":"bg-gray-300 text-gray-600"}`,children:l.jsx(hH,{className:"text-lg"})}),l.jsx("div",{className:"flex-1",children:l.jsx("span",{className:`text-xs ${e?"text-gray-700":"text-gray-500"}`,children:t==="ar"?"تعذر تحميل الملف الصوتي":"Audio unavailable"})})]}):l.jsxs("div",{className:`whatsapp-audio-player flex items-center gap-3 ${e?"flex-row-reverse":""}`,children:[l.jsx("audio",{ref:p,src:n,preload:"metadata",crossOrigin:"anonymous"}),l.jsx(J,{type:"text",icon:u?l.jsx("div",{className:"w-8 h-8 border-2 border-current border-t-transparent rounded-full animate-spin"}):r?l.jsx(CW,{className:"text-2xl"}):l.jsx(ka,{className:"text-2xl"}),onClick:y,className:`flex items-center justify-center w-10 h-10 rounded-full transition-colors ${e?"bg-[#25D366] hover:bg-[#20BD5A] text-white":"bg-[#e5e7eb] hover:bg-[#d1d5db] text-gray-700"}`,disabled:u,style:{minWidth:"40px",padding:0}}),l.jsxs("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:[l.jsxs("div",{className:`flex-1 h-2 rounded-full cursor-pointer relative overflow-hidden ${e?"bg-white/40":"bg-gray-300"}`,onClick:g,children:[l.jsx("div",{className:`h-full transition-all duration-100 ${e?"bg-white":"bg-[#25D366]"}`,style:{width:`${v}%`}}),r&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center gap-1",children:[0,1,2,3].map(x=>l.jsx("div",{className:"w-1 bg-white/50 rounded-full animate-pulse",style:{height:`${20+Math.sin(Date.now()/200+x)*10}%`,animationDelay:`${x*.1}s`}},x))})]}),l.jsxs("span",{className:`text-xs font-medium whitespace-nowrap ${e?"text-gray-800":"text-gray-600"}`,children:[m(a)," / ",m(o)]})]})]})},{TextArea:mT}=ye,Ff=()=>{const{sessionId:n,bookingId:e,id:t}=qa(),r=n||e||t,i=!!n||!!t&&!e,{language:a}=Ze(),{user:s}=Xn(),o=Rt(),[c,u]=M.useState([]),[d,h]=M.useState(""),[f,p]=M.useState(!0),[y,g]=M.useState(!1),[m,v]=M.useState(null),[x,b]=M.useState(null),[A,w]=M.useState(null),[S,E]=M.useState([]),[_,D]=M.useState(!1),[C,k]=M.useState(!1),[T,N]=M.useState(!1),[j,R]=M.useState(null),[P,F]=M.useState([]),[q,$]=M.useState([]),[B,I]=M.useState(!1),L=M.useRef(null);M.useRef(null);const U=M.useRef(!1),G=M.useRef(null),H=M.useRef(!1),V=M.useRef(null),K=M.useRef(new Set),{isRecording:ae,recordingTime:te,audioBlob:de,audioUrl:xe,startRecording:ve,stopRecording:Te,cancelRecording:O,formatTime:ie}=zE(),{isRecording:re,recordingTime:Z,videoBlob:z,videoUrl:X,startRecording:ue,stopRecording:le,cancelRecording:ee,formatTime:ne}=UV(),[oe,pe]=M.useState(!1),[Ae,Ne]=M.useState(!1),[Pe,ot]=M.useState(!1),[Le,ge]=M.useState(0),[Ie,he]=M.useState(""),[Se,Ce]=M.useState(!1),Ue=M.useRef(null),[Be]=W.useForm();M.useEffect(()=>{s&&s.role!=="CLIENT"&&(se.error(a==="ar"?"غير مصرح لك بالوصول إلى هذه الصفحة":"You are not authorized to access this page"),s.role==="CONSULTANT"?o("/consultant",{replace:!0}):["ADMIN","SUPER_ADMIN"].includes(s.role)?o("/admin",{replace:!0}):o("/",{replace:!0}))},[s,o,a]),M.useEffect(()=>{if(G.current!==r&&(U.current=!1,H.current=!1,V.current=null,N(!1),G.current=r),k(!1),r&&s){if(K.current.has(r)){U.current||(U.current=!0,N(!0),p(!1),H.current=!1,V.current=null,setTimeout(()=>{o("/client/chat",{replace:!0})},0));return}const _e=V.current&&V.current!==r;if(U.current||T||_e){p(!1);return}V.current!==r&&(V.current=r,H.current=!0,_t())}else r||(p(!1),k(!1),N(!1),U.current=!1,H.current=!1,V.current=null,s&&(oi(),pa()))},[r,s]),M.useEffect(()=>{if(T)return;if(m?.id||r&&i&&C){un();const Ve=setInterval(()=>{un()},5e3);return()=>clearInterval(Ve)}},[m?.id,r,i,C,T]),M.useEffect(()=>{et()},[c]),M.useEffect(()=>{!i&&x&&r&&m?.status==="COMPLETED"&&x.status==="COMPLETED"&&!x.rating&&!Pe&&ot(!0)},[m?.status,x?.status,x?.rating,i,r]);const et=()=>{L.current?.scrollIntoView({behavior:"smooth"})},_t=async()=>{if(K.current.has(r)){U.current||(U.current=!0,N(!0),p(!1),H.current=!1,V.current=null,setTimeout(()=>{o("/client/chat",{replace:!0})},0));return}if(U.current||T){H.current=!1,V.current=null;return}if(!r||!s){p(!1),H.current=!1,V.current=null;return}if(!(V.current&&V.current!==r)){H.current=!0,V.current=r;try{p(!0);let _e=!!n;if(t&&!n&&!e){let nt=!1;try{const Tt=(await pn.getConversations()).conversations?.find(rt=>rt.sessionId===t||rt.isDirect&&rt.id===t);if(Tt&&(Tt.isDirect||Tt.sessionId===t)){nt=!0,v({id:t,status:Tt.status||"IN_PROGRESS",sessionType:"chat"}),b(null),R(Tt),k(!0),p(!1),H.current=!1,V.current=null;return}}catch{}try{const bt=await Ir.getBookingById(t);_e=!1;const Tt=bt.booking;if(s?.role==="CLIENT"&&Tt.client?.userId!==s.id){se.error(a==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),o("/client/bookings",{replace:!0});return}b(Tt);try{const rt=await fn.getSessionByBooking(t);if(v(rt.session),k(!0),rt.session?.roomId)try{const Lt=await fn.getVideoRoom(t);w(Lt.room)}catch{console.log("Video room not accessible yet")}}catch{console.log("Session not found yet, will be created when starting"),v(null),k(!0)}p(!1);return}catch(bt){if(bt.status===404||bt.response?.status===404||bt.message?.toLowerCase().includes("not found")||bt.message?.includes("404")){if(U.current){H.current=!1,V.current=null;return}K.current.add(r),U.current=!0,N(!0),p(!1),H.current=!1,V.current=null,o("/client/chat",{replace:!0});return}_e=!0}}if(_e){try{const bt=(await pn.getConversations()).conversations?.find(Tt=>Tt.sessionId===r);if(bt)v({id:r,status:bt.status||"IN_PROGRESS",sessionType:"chat"}),b(null),R(bt),k(!0);else try{await pn.getMessages(r),v({id:r,status:"IN_PROGRESS",sessionType:"chat"}),b(null),k(!0)}catch(Tt){if(Tt.message?.includes("not found")||Tt.message?.includes("404")||Tt.message?.includes("Access denied")||Tt.message?.includes("403")){k(!1),N(!0),se.error(a==="ar"?"الجلسة غير موجودة أو غير مصرح لك بالوصول":"Session not found or access denied"),o("/client/bookings",{replace:!0});return}else throw Tt}}catch(nt){console.error("Error fetching direct session:",nt),!nt.message?.includes("not found")&&!nt.message?.includes("404")&&!nt.message?.includes("Access denied")&&!nt.message?.includes("403")&&se.error(a==="ar"?"فشل تحميل الجلسة":"Failed to load session"),o("/client/bookings",{replace:!0})}finally{p(!1),H.current=!1,V.current=null}return}const it=(await Ir.getBookingById(r)).booking;if(s?.role==="CLIENT"&&it.client?.userId!==s.id){se.error(a==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),o("/client/bookings",{replace:!0});return}b(it);try{const nt=await fn.getSessionByBooking(r);if(v(nt.session),k(!0),nt.session?.roomId)try{const bt=await fn.getVideoRoom(r);w(bt.room)}catch{console.log("Video room not accessible yet")}}catch{console.log("Session not found yet, will be created when starting"),v(null),k(!0)}H.current=!1,V.current=null,K.current.delete(r)}catch(_e){const Ve=_e.message||_e.response?.data?.error||(a==="ar"?"فشل تحميل الجلسة":"Failed to load session"),it=_e.message?.toLowerCase().includes("not found")||_e.message?.includes("404")||_e.response?.status===404,nt=_e.message?.includes("Access denied")||_e.message?.includes("403")||_e.response?.status===403;if(it){if(U.current){p(!1);return}U.current=!0,N(!0),p(!1),o("/client/chat",{replace:!0});return}if(nt){se.error(a==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),N(!0),p(!1),o("/client/chat",{replace:!0});return}console.error("Error fetching session:",_e),se.error(Ve),p(!1)}finally{H.current=!1,V.current=null,!T&&!U.current&&p(!1)}}},un=async()=>{if(!(T||!m?.id&&!(r&&i&&C)))try{const _e=m?.id||r;if(!_e)return;const Ve=await pn.getMessages(_e);if(u(Ve.messages||[]),!C&&Ve.messages&&k(!0),Ve.messages&&Ve.messages.length>0)try{await pn.markAsRead(_e)}catch(it){console.error("Error marking messages as read:",it)}setTimeout(()=>{L.current?.scrollIntoView({behavior:"smooth"})},100)}catch(_e){const Ve=_e.message?.includes("Access denied")||_e.message?.includes("403"),it=_e.message?.includes("not found")||_e.message?.includes("404");if(Ve){N(!0),u([]);return}if(it){u([]);return}console.error("Error fetching messages:",_e),u([])}},Nr=async()=>{const _e=m?.id||(i?r:null);if(!(!d.trim()&&S.length===0||!_e)){if(!m?.id&&!i&&r)try{const Ve=await fn.generateVideoRoom(r),it=await fn.startSession(r,Ve.room?.roomId);v(it.session),w(Ve.room)}catch(Ve){se.error(Ve.message||(a==="ar"?"فشل بدء الجلسة":"Failed to start session"));return}try{g(!0);let Ve="text";if(S.length>0){const bt=S.some(Lt=>/\.(jpg|jpeg|png|gif|webp)$/i.test(Lt)),Tt=S.some(Lt=>/\.(mp3|wav|ogg|m4a|webm)$/i.test(Lt)),rt=S.some(Lt=>/\.(mp4|webm|ogg)$/i.test(Lt));bt?Ve="image":Tt?Ve="audio":rt?Ve="video":Ve="file"}const it=m?.id||_e,nt={content:d||(S.length>0?"📎 ملف مرفق":""),messageType:Ve,attachments:S.length>0?S:[]};if(i&&j){let bt=null;j.clientId&&j.clientId!==s?.id?bt=j.clientId:j.consultantUserId&&j.consultantUserId!==s?.id&&(bt=j.consultantUserId),bt&&(nt.receiverId=bt)}await pn.sendMessage(it,nt),h(""),E([]),i&&!m?.id&&v({id:it,status:"IN_PROGRESS",sessionType:"chat"}),un()}catch(Ve){se.error(Ve.message||(a==="ar"?"فشل إرسال الرسالة":"Failed to send message"))}finally{g(!1)}}},Y=async()=>{ae?Te():await ve()},Q=async()=>{if(!de)return;const _e=m?.id||(i?r:null);if(!_e){se.error(a==="ar"?"لا توجد جلسة نشطة":"No active session"),O();return}try{g(!0);const Ve=new File([de],`voice-${Date.now()}.webm`,{type:"audio/webm"}),it=new FormData;it.append("file",Ve),it.append("ownerType","MESSAGE"),it.append("ownerId",_e);const nt=await Zr.uploadFile(it);if(!nt||!nt.file||!nt.file.fileUrl)throw console.error("Invalid file upload response:",nt),new Error("Invalid file response from server - file may not have been uploaded");const bt=nt.file.fileUrl;if(!bt||typeof bt!="string")throw console.error("Invalid audio URL from upload:",bt),new Error("Invalid audio file URL - please try recording again");const Tt=m?.id||_e,rt={content:a==="ar"?"رسالة صوتية":"Voice message",messageType:"audio",attachments:[bt]};if(i&&j){let Lt=null;j.clientId&&j.clientId!==s?.id?Lt=j.clientId:j.consultantUserId&&j.consultantUserId!==s?.id&&(Lt=j.consultantUserId),Lt&&(rt.receiverId=Lt)}await pn.sendMessage(Tt,rt),O(),un(),se.success(a==="ar"?"تم إرسال الرسالة الصوتية":"Voice message sent")}catch(Ve){console.error("Error sending voice message:",Ve),se.error(Ve.message||(a==="ar"?"فشل إرسال الرسالة الصوتية":"Failed to send voice message"))}finally{g(!1)}},ce=async()=>{re?(le(),pe(!1)):pe(!0)},we=async()=>{Ue.current&&await ue(Ue.current)},Oe=async()=>{if(!z)return;const _e=m?.id||(i?r:null);if(!_e){se.error(a==="ar"?"لا توجد جلسة نشطة":"No active session"),ee(),pe(!1);return}try{g(!0);const Ve=new File([z],`video-${Date.now()}.webm`,{type:"video/webm"}),it=new FormData;it.append("file",Ve),it.append("ownerType","MESSAGE"),it.append("ownerId",_e);const nt=await Zr.uploadFile(it);if(!nt||!nt.file||!nt.file.fileUrl)throw new Error("Invalid file response from server");const bt=nt.file.fileUrl,Tt=m?.id||_e,rt={content:a==="ar"?"رسالة فيديو":"Video message",messageType:"video",attachments:[bt]};if(i&&j){let Lt=null;j.clientId&&j.clientId!==s?.id?Lt=j.clientId:j.consultantUserId&&j.consultantUserId!==s?.id&&(Lt=j.consultantUserId),Lt&&(rt.receiverId=Lt)}await pn.sendMessage(Tt,rt),ee(),pe(!1),un(),se.success(a==="ar"?"تم إرسال الرسالة بالفيديو":"Video message sent")}catch(Ve){console.error("Error sending video message:",Ve),se.error(Ve.message||(a==="ar"?"فشل إرسال الرسالة بالفيديو":"Failed to send video message"))}finally{g(!1)}},ut=async _e=>{const Ve=m?.id||(i?r:null);if(!Ve)return se.error(a==="ar"?"لا توجد جلسة نشطة":"No active session"),!1;try{const it=new FormData;it.append("file",_e),it.append("ownerType","MESSAGE"),it.append("ownerId",Ve);const nt=await Zr.uploadFile(it);if(!nt||!nt.file||!nt.file.fileUrl)throw new Error("Invalid file response from server");const bt=[...S,nt.file.fileUrl];E(bt),se.success(a==="ar"?"تم رفع الملف":"File uploaded")}catch(it){console.error("File upload error:",it),se.error(it.message||(a==="ar"?"فشل رفع الملف":"Failed to upload file"))}return!1},Jt=async()=>{if(i){se.warning(a==="ar"?"مكالمات الفيديو متاحة فقط للجلسات المرتبطة بالحجوزات":"Video calls are only available for booking-based sessions");return}if(r)try{p(!0);let _e=A;_e||(_e=(await fn.generateVideoRoom(r)).room,w(_e),se.success(a==="ar"?"تم إنشاء غرفة الفيديو":"Video room created")),await fn.startSession(r,_e?.roomId),se.success(a==="ar"?"تم بدء الجلسة":"Session started"),_e?.joinUrl?window.open(_e.joinUrl,"JitsiMeet","width=1200,height=800,menubar=no,toolbar=no,location=no,status=no,resizable=yes,scrollbars=yes")?(Ne(!0),se.success(a==="ar"?"تم فتح المكالمة في نافذة جديدة":"Video call opened in new window")):(Ne(!0),se.info(a==="ar"?'تم فتح المكالمة في النافذة المنبثقة. إذا لم تفتح، استخدم زر "فتح في نافذة جديدة"':'Video call opened. If popup was blocked, use "Open in New Window" button')):se.warning(a==="ar"?"لم يتم العثور على رابط المكالمة":"Video call URL not found"),_t()}catch(_e){console.error("Video call error:",_e),se.error(_e.message||(a==="ar"?"فشل بدء المكالمة":"Failed to start video call"))}finally{p(!1)}},yr=async()=>{if(!(!r||i))try{await fn.endSession(r),se.success(a==="ar"?"تم إنهاء الجلسة":"Session ended successfully");const Ve=(await Ir.getBookingById(r)).booking;b(Ve);try{const it=await fn.getSessionByBooking(r);v(it.session)}catch(it){console.error("Error fetching session:",it)}Ve.rating?o("/client/bookings"):ot(!0)}catch(_e){se.error(_e.message||(a==="ar"?"فشل إنهاء الجلسة":"Failed to end session"))}},oi=async()=>{try{const _e=await pn.getConversations();F(_e.conversations||[])}catch(_e){console.error("Error fetching conversations:",_e)}},pa=async()=>{try{I(!0);const _e=await Ir.getBookings({status:"CONFIRMED,COMPLETED"});$(_e.bookings||[])}catch(_e){console.error("Error fetching bookings:",_e)}finally{I(!1)}},Si=_e=>{o(`/client/chat/${_e}`)},Va=async()=>{if(!x||!r)return;if(!Le||Le<1||Le>5){se.error(a==="ar"?"يرجى إضافة تقييم من 1 إلى 5":"Please add a rating from 1 to 5");return}const _e=Ie.trim();if(!_e||_e.length<10){se.error(a==="ar"?"يرجى إضافة تعليق للمراجعة (10 أحرف على الأقل)":"Please add a review comment (at least 10 characters)");return}try{Ce(!0),await Ir.rateBooking(r,Le,_e),se.success(a==="ar"?"تم إرسال المراجعة بنجاح":"Review submitted successfully");const Ve=await Ir.getBookingById(r);b(Ve.booking),ot(!1),ge(0),he(""),Be.resetFields(),o("/client/bookings")}catch(Ve){console.error("Error submitting review:",Ve),se.error(Ve.message||(a==="ar"?"فشل إرسال المراجعة":"Failed to submit review"))}finally{Ce(!1)}};if(f)return l.jsx("div",{className:"flex justify-center items-center h-screen dashboard-bg",children:l.jsx(kt,{size:"large"})});if(!r)return l.jsxs("div",{className:"flex h-[calc(100vh-200px)] gap-4",children:[l.jsx("div",{className:"w-1/3 min-w-[300px]",children:l.jsx(Ee,{title:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kn,{}),l.jsx("span",{children:a==="ar"?"المحادثات والحجوزات":"Conversations & Bookings"})]}),className:"h-full shadow-professional-lg border-0 bg-gradient-to-br from-white to-gray-50",styles:{body:{padding:0,height:"calc(100% - 57px)",overflow:"auto"}},children:B?l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsx(kt,{size:"large"})}):P.length===0&&q.length===0?l.jsxs("div",{className:"py-12",children:[l.jsx(jn,{description:a==="ar"?"لا توجد محادثات أو حجوزات":"No conversations or bookings",image:jn.PRESENTED_IMAGE_SIMPLE}),l.jsx("div",{className:"text-center mt-4",children:l.jsx(J,{type:"primary",onClick:()=>o("/client/bookings"),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:a==="ar"?"حجز جديد":"New Booking"})})]}):l.jsxs("div",{children:[P.length>0&&l.jsxs("div",{className:"p-4 border-b",children:[l.jsx("h3",{className:"font-semibold text-sm text-gray-600 mb-2",children:a==="ar"?"المحادثات النشطة":"Active Conversations"}),l.jsx(qt,{dataSource:P,renderItem:_e=>{const Ve=_e.unreadCount||0;return l.jsx(qt.Item,{className:"cursor-pointer hover:bg-gray-50 px-4 py-3 border-b ",onClick:()=>Si(_e.bookingId||_e.sessionId),children:l.jsx(qt.Item.Meta,{avatar:l.jsx(gs,{count:Ve,size:"small",offset:[-5,5],children:l.jsx(Mt,{src:_e.avatar,icon:l.jsx(tt,{}),size:48})}),title:l.jsx("span",{className:"font-medium text-gray-900",children:_e.name||_e.consultantName||_e.clientName||(a==="ar"?"محادثة":"Conversation")}),description:l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 truncate",children:_e.lastMessage||(a==="ar"?"لا توجد رسائل":"No messages")}),_e.lastMessageTime&&l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:qe(_e.lastMessageTime).fromNow()})]})})})}})]}),q.length>0&&l.jsxs("div",{className:"p-4",children:[l.jsx("h3",{className:"font-semibold text-sm text-gray-600 mb-2",children:a==="ar"?"الحجوزات المتاحة":"Available Bookings"}),l.jsx(qt,{dataSource:q,renderItem:_e=>{const Ve=P.some(it=>it.bookingId===_e.id);return l.jsx(qt.Item,{className:`cursor-pointer hover:bg-gray-50 px-4 py-3 border-b  ${Ve?"opacity-75":""}`,onClick:()=>Si(_e.id),children:l.jsx(qt.Item.Meta,{avatar:l.jsx(Mt,{src:_e.consultant?.user?.avatar,icon:l.jsx(tt,{}),size:48}),title:l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("span",{className:"font-medium text-gray-900",children:_e.consultant?`${_e.consultant.firstName} ${_e.consultant.lastName}`:a==="ar"?"مستشار":"Consultant"}),l.jsx($e,{color:_e.status==="CONFIRMED"?"green":_e.status==="COMPLETED"?"blue":"default",size:"small",children:_e.status})]}),description:l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500",children:_e.service?a==="ar"?_e.service.titleAr:_e.service.title:a==="ar"?"استشارة":"Consultation"}),_e.scheduledAt&&l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:qe(_e.scheduledAt).format("YYYY-MM-DD HH:mm")})]})})})}})]})]})})}),l.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 rounded-lg",children:l.jsxs("div",{className:"text-center py-12 px-6",children:[l.jsx("div",{className:"mb-6",children:l.jsx(kn,{className:"text-7xl text-gray-300"})}),l.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700",children:a==="ar"?"اختر محادثة للبدء":"Select a Conversation to Start"}),l.jsx("p",{className:"text-gray-500 max-w-md mx-auto text-base",children:a==="ar"?"اختر محادثة من القائمة الجانبية للبدء في الدردشة مع المستشار":"Select a conversation from the sidebar to start chatting with your consultant"}),l.jsx("div",{className:"mt-6",children:l.jsx(J,{type:"primary",size:"large",onClick:()=>o("/client/bookings"),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:a==="ar"?"حجز استشارة جديدة":"Book New Consultation"})})]})})]});const kr=x?.consultant;s?.role;const Ki=i&&j?{name:j.name||j.clientName||j.consultantName||"User",avatar:j.avatar}:null;return!x&&r&&!i&&!C?l.jsx("div",{className:"flex justify-center items-center h-screen dashboard-bg",children:l.jsx(kt,{size:"large"})}):i&&!C&&!T?l.jsx("div",{className:"flex justify-center items-center h-screen dashboard-bg",children:l.jsx(kt,{size:"large"})}):l.jsxs("div",{className:"flex flex-col dashboard-bg relative",style:{height:"calc(100vh - 64px)",margin:"-12px -12px 0 -12px",width:"calc(100% + 24px)"},children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/20 to-turquoise-100/20 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/20 to-olive-green-100/20 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"glass-card border-b border-gray-200/50 px-4 py-3 flex items-center justify-between shadow-professional z-10 sticky top-0 flex-shrink-0 backdrop-blur-sm",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[l.jsx(Mt,{src:i?Ki?.avatar:kr?.user?.avatar||kr?.profilePicture,size:40,icon:l.jsx(tt,{}),className:"flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h2",{className:"text-base font-semibold text-gray-900 truncate",children:i?Ki?.name||(a==="ar"?"المستخدم":"User"):kr?`${kr.firstName} ${kr.lastName}`:a==="ar"?"المستشار":"Consultant"}),l.jsx("p",{className:"text-xs text-gray-500 truncate",children:i?a==="ar"?"محادثة مباشرة":"Direct Message":x?.service?a==="ar"?x.service.titleAr:x.service.title:a==="ar"?"استشارة":"Consultation"})]})]}),l.jsxs(ze,{className:"flex-shrink-0",children:[l.jsx(J,{type:"text",icon:l.jsx(io,{}),className:"text-gray-600 hover:text-gray-900",onClick:Jt,disabled:m?.status==="COMPLETED",title:a==="ar"?"مكالمة فيديو":"Video Call"}),m?.status==="IN_PROGRESS"&&!i&&l.jsx(J,{type:"text",danger:!0,onClick:yr,title:a==="ar"?"إنهاء الجلسة":"End Session",children:a==="ar"?"إنهاء":"End"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 min-h-0",style:{scrollBehavior:"smooth"},children:l.jsxs("div",{className:"max-w-4xl mx-auto space-y-3",children:[c.length===0?l.jsxs("div",{className:"text-center text-gray-400 py-12",children:[l.jsx("div",{className:"text-4xl mb-2",children:"💬"}),l.jsx("p",{children:a==="ar"?"لا توجد رسائل بعد":"No messages yet"})]}):c.map((_e,Ve)=>{const it=_e.senderId===s?.id,nt=_e.attachments?JSON.parse(_e.attachments):[],bt=Ve>0?c[Ve-1]:null;!bt||(bt.senderId,_e.senderId);const Tt=!bt||qe(_e.createdAt).diff(qe(bt.createdAt),"minute")>5;return l.jsxs("div",{className:`flex ${it?"justify-end":"justify-start"} items-end gap-2 ${Tt?"mt-4":""}`,children:[!it&&l.jsx(Mt,{src:i?Ki?.avatar:kr?.user?.avatar||kr?.profilePicture,size:32,icon:l.jsx(tt,{}),className:"flex-shrink-0"}),l.jsxs("div",{className:`flex flex-col ${it?"items-end":"items-start"} max-w-[70%] md:max-w-[60%]`,children:[Tt&&l.jsx("div",{className:"text-center w-full mb-2",children:l.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:qe(_e.createdAt).format("MMM DD, YYYY HH:mm")})}),l.jsxs("div",{className:`rounded-2xl px-4 py-2 ${it?"bg-[#dcf8c6] text-gray-900 rounded-tr-sm":"bg-white text-gray-900 rounded-tl-sm shadow-sm"}`,children:[nt.length>0&&l.jsx("div",{className:"mb-2 space-y-2",children:nt.map((rt,Lt)=>{const Ei=rt.startsWith("data:image/")||rt.startsWith("data:video/")||rt.startsWith("data:audio/"),Z$=_e.messageType==="image"||/\.(jpg|jpeg|png|gif|webp)$/i.test(rt)||Ei&&rt.startsWith("data:image/"),Q$=_e.messageType==="audio"||/\.(mp3|wav|ogg|m4a|webm)$/i.test(rt)||Ei&&rt.startsWith("data:audio/"),ez=_e.messageType==="video"||/\.(mp4|webm)$/i.test(rt)&&_e.messageType!=="audio"||Ei&&rt.startsWith("data:video/");if(Z$)return l.jsx("div",{className:"image-attachment mb-2 -mx-2",children:Ei?l.jsx("img",{src:rt,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},onError:jo=>{const Ga=jo.target;if(Ga){Ga.style.display="none";const Xi=Ga.closest(".image-attachment");if(Xi&&!Xi.querySelector(".image-error-fallback")){const Ji=document.createElement("div");Ji.className="image-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",Ji.textContent=a==="ar"?"تعذر تحميل الصورة":"Image unavailable",Xi.appendChild(Ji)}}}}):l.jsx(Sr,{src:rt.startsWith("http")?rt:rt.startsWith("/uploads")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${rt}`:rt.startsWith("/")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${rt}`:`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}/uploads/MESSAGE/${rt.split("/").pop()}`,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},preview:{mask:a==="ar"?"معاينة":"Preview"},onError:jo=>{const Ga=jo.target;if(Ga){Ga.style.display="none";const Xi=Ga.closest(".image-attachment");if(Xi&&!Xi.querySelector(".image-error-fallback")){const Ji=document.createElement("div");Ji.className="image-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",Ji.textContent=a==="ar"?"تعذر تحميل الصورة":"Image unavailable",Xi.appendChild(Ji)}}}},Lt)},Lt);if(Q$){const jo=rt.startsWith("http")?rt:rt.startsWith("/uploads")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${rt}`:rt.startsWith("/")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${rt}`:`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}/uploads/MESSAGE/${rt.split("/").pop()}`;return l.jsx("div",{className:"audio-attachment",children:l.jsx(qE,{src:jo,isOwnMessage:it,language:a})},Lt)}else if(ez){const jo=rt.startsWith("http")?rt:rt.startsWith("/uploads")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${rt}`:rt.startsWith("/")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${rt}`:`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}/uploads/MESSAGE/${rt.split("/").pop()}`;return l.jsx("div",{className:"video-attachment",children:l.jsx("video",{controls:!0,src:jo,className:"w-full max-w-md rounded",onError:Ga=>{const Xi=Ga.target;if(Xi){Xi.style.display="none";const Ji=Xi.closest(".video-attachment");if(Ji&&!Ji.querySelector(".video-error-fallback")){const iv=document.createElement("div");iv.className="video-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",iv.textContent=a==="ar"?"تعذر تحميل الفيديو":"Video unavailable",Ji.appendChild(iv)}}}})},Lt)}else return l.jsxs("div",{className:`file-attachment flex items-center gap-2 p-2 rounded ${it?"bg-white/50":"bg-gray-100"}`,children:[l.jsx(Rc,{className:it?"text-gray-700":"text-blue-600"}),l.jsx("a",{href:rt,download:!0,target:"_blank",rel:"noopener noreferrer",className:`text-sm ${it?"text-gray-700 hover:text-gray-900":"text-blue-600 hover:text-blue-800"}`,children:rt.split("/").pop()})]},Lt)})}),_e.content&&_e.content.trim()&&!(_e.messageType==="image"&&nt.length>0&&!_e.content.includes("📎"))&&l.jsx("p",{className:`text-sm ${nt.length>0?"mt-2":""} whitespace-pre-wrap break-words`,children:_e.content}),l.jsx("span",{className:`text-xs mt-1 ${it?"text-gray-600":"text-gray-500"} self-end`,children:qe(_e.createdAt).format("HH:mm")})]})]}),it&&l.jsx(Mt,{src:s?.avatar,size:32,icon:l.jsx(tt,{}),className:"flex-shrink-0"})]},_e.id)}),l.jsx("div",{ref:L})]})}),l.jsxs("div",{className:"border-t border-gray-200/50 px-4 py-3 shadow-professional backdrop-blur-sm flex-shrink-0 bg-white/80",children:[xe&&!ae&&l.jsxs("div",{className:"mb-2 p-3 bg-gray-100 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("audio",{src:xe,controls:!0,className:"max-w-xs"}),l.jsx("span",{className:"text-sm text-gray-600",children:ie(te)})]}),l.jsxs(ze,{children:[l.jsx(J,{type:"primary",size:"small",onClick:Q,loading:y,children:a==="ar"?"إرسال":"Send"}),l.jsx(J,{size:"small",icon:l.jsx(Ar,{}),onClick:O})]})]}),ae&&l.jsxs("div",{className:"mb-2 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),l.jsxs("span",{className:"text-red-600 font-semibold",children:[a==="ar"?"جاري التسجيل...":"Recording..."," ",ie(te)]})]}),l.jsx(J,{danger:!0,size:"small",icon:l.jsx($c,{}),onClick:Te,children:a==="ar"?"إيقاف":"Stop"})]}),S.length>0&&l.jsx("div",{className:"mb-3 pb-3 border-b border-gray-200",children:l.jsx("div",{className:"flex flex-wrap gap-3",children:S.map((_e,Ve)=>{const it=/\.(jpg|jpeg|png|gif|webp)$/i.test(_e),nt=/\.(mp4|webm|ogg)$/i.test(_e),bt=/\.(mp3|wav|ogg|m4a|webm)$/i.test(_e),Tt=_e.split("/").pop(),rt=_e.startsWith("http")?_e:_e.startsWith("/uploads")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${_e}`:_e.startsWith("/")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${_e}`:`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}/uploads/MESSAGE/${_e.split("/").pop()}`;return l.jsx("div",{className:"relative group",children:it?l.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm",children:[l.jsx(Sr,{src:rt,alt:Tt,width:200,height:200,className:"object-cover",preview:!1,onError:Lt=>{Lt.target.style.display="none"}}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(Ar,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>E(S.filter((Lt,Ei)=>Ei!==Ve))})]}):nt?l.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm w-[200px]",children:[l.jsx("video",{src:rt,className:"w-full h-[150px] object-cover",controls:!1,muted:!0,onError:Lt=>{console.error("Video failed to load:",rt)}}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:l.jsx(io,{className:"text-white text-2xl"})}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(Ar,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>E(S.filter((Lt,Ei)=>Ei!==Ve))})]}):bt?l.jsxs("div",{className:"relative rounded-lg border border-gray-200 shadow-sm bg-gray-50 p-3 min-w-[200px]",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Mc,{className:"text-gray-600 text-lg"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-xs text-gray-600 truncate",children:Tt}),l.jsx("audio",{src:rt,controls:!0,className:"w-full mt-1",preload:"metadata"})]})]}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(Ar,{}),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center",onClick:()=>E(S.filter((Lt,Ei)=>Ei!==Ve))})]}):l.jsxs("div",{className:"relative flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 shadow-sm min-w-[200px]",children:[l.jsx(Rc,{className:"text-gray-600 text-xl"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm text-gray-700 truncate font-medium",children:Tt}),l.jsx("p",{className:"text-xs text-gray-500",children:a==="ar"?"ملف":"File"})]}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(Ar,{}),className:"bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center flex-shrink-0",onClick:()=>E(S.filter((Lt,Ei)=>Ei!==Ve))})]})},Ve)})})}),l.jsxs("div",{className:"flex items-end gap-2 relative",children:[l.jsx(Vt,{showUploadList:!1,beforeUpload:ut,accept:"image/*,audio/*,video/*,.pdf,.doc,.docx",multiple:!0,children:l.jsx(J,{type:"text",icon:l.jsx(IE,{}),className:"text-gray-600 hover:text-gray-900 text-xl",disabled:m?.status==="COMPLETED"||ae||re})}),l.jsx(J,{type:ae?"primary":"text",danger:ae,icon:ae?l.jsx(LE,{}):l.jsx(Mc,{}),onClick:Y,disabled:m?.status==="COMPLETED"||re,className:ae?"bg-red-500 hover:bg-red-600":"text-gray-600 hover:text-gray-900",title:a==="ar"?"تسجيل صوتي":"Voice recording"}),l.jsx(J,{type:re?"primary":"text",danger:re,icon:l.jsx(Ey,{}),onClick:ce,disabled:m?.status==="COMPLETED"||ae,className:re?"bg-red-500 hover:bg-red-600":"text-gray-600 hover:text-gray-900",title:a==="ar"?"تسجيل فيديو":"Video recording"}),l.jsx(J,{icon:l.jsx(BE,{}),onClick:()=>D(!_),type:"text",className:"text-gray-600 hover:text-gray-900",disabled:m?.status==="COMPLETED"||ae||re}),l.jsx("div",{className:"flex-1 bg-gray-100 rounded-3xl px-4 py-2 border border-gray-200 focus-within:border-blue-500 focus-within:bg-white ",children:l.jsx(mT,{value:d,onChange:_e=>h(_e.target.value),placeholder:a==="ar"?"اكتب رسالة...":"Type a message...",autoSize:{minRows:1,maxRows:4},variant:"borderless",disabled:m?.status==="COMPLETED"||ae||re,className:"resize-none",onPressEnter:_e=>{_e.shiftKey||(_e.preventDefault(),Nr())}})}),l.jsx(J,{type:"primary",icon:l.jsx(Ty,{}),className:"bg-[#25D366] hover:bg-[#20BA5A] border-0 rounded-full w-10 h-10 p-0 flex items-center justify-center",onClick:Nr,loading:y,disabled:m?.status==="COMPLETED"||!d.trim()&&S.length===0||ae||re})]}),_&&l.jsx("div",{className:"absolute bottom-full left-0 mb-2 p-3 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto z-50",children:l.jsx("div",{className:"grid grid-cols-8 gap-1",children:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃"].map(_e=>l.jsx(J,{type:"text",className:"text-xl p-1 hover:bg-gray-100",onClick:()=>{h(Ve=>Ve+_e),D(!1)},children:_e},_e))})})]}),l.jsx(At,{title:a==="ar"?"تسجيل فيديو":"Record Video",open:oe,onCancel:()=>{re&&ee(),pe(!1)},footer:[l.jsx(J,{onClick:()=>{ee(),pe(!1)},children:a==="ar"?"إلغاء":"Cancel"},"cancel"),re?l.jsx(J,{danger:!0,onClick:()=>{le()},children:a==="ar"?"إيقاف":"Stop"},"stop"):X?l.jsxs(l.Fragment,{children:[l.jsx(J,{onClick:()=>{ee(),we()},children:a==="ar"?"إعادة":"Retake"},"retake"),l.jsx(J,{type:"primary",onClick:Oe,loading:y,children:a==="ar"?"إرسال":"Send"},"send")]}):l.jsx(J,{type:"primary",onClick:we,children:a==="ar"?"بدء التسجيل":"Start Recording"},"start")],width:600,children:l.jsxs("div",{className:"text-center",children:[re&&l.jsx("div",{className:"mb-4",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),l.jsxs("span",{className:"text-red-600 font-semibold",children:[a==="ar"?"جاري التسجيل...":"Recording..."," ",ne(Z)]})]})}),l.jsx("video",{ref:Ue,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full max-w-md mx-auto rounded-lg",style:{display:re||X?"block":"none"}}),X&&!re&&l.jsx("video",{src:X,controls:!0,className:"w-full max-w-md mx-auto rounded-lg mt-4"}),!re&&!X&&l.jsx("div",{className:"py-8 text-gray-500",children:a==="ar"?'اضغط على "بدء التسجيل" لبدء تسجيل الفيديو':'Click "Start Recording" to begin video recording'})]})}),l.jsx(At,{title:a==="ar"?"مكالمة فيديو - Jitsi Meet":"Video Call - Jitsi Meet",open:Ae,onCancel:()=>Ne(!1),footer:[l.jsx(J,{onClick:()=>Ne(!1),children:a==="ar"?"إغلاق":"Close"},"close"),l.jsx(J,{type:"primary",onClick:()=>{A?.joinUrl&&window.open(A.joinUrl,"_blank","width=1200,height=800")},children:a==="ar"?"فتح في نافذة جديدة":"Open in New Window"},"openNew")],width:"90%",style:{top:20},styles:{body:{height:"80vh",padding:0}},destroyOnHidden:!0,children:A?.joinUrl?l.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",padding:"20px"},children:[l.jsx("p",{style:{fontSize:"16px",color:"#666",textAlign:"center"},children:a==="ar"?'لأفضل تجربة، يرجى استخدام زر "فتح في نافذة جديدة" لفتح المكالمة':'For the best experience, please use the "Open in New Window" button to open the call'}),l.jsx(J,{type:"primary",size:"large",onClick:()=>{A?.joinUrl&&window.open(A.joinUrl,"_blank","width=1200,height=800")},children:a==="ar"?"فتح المكالمة في نافذة جديدة":"Open Call in New Window"}),l.jsx("div",{style:{width:"100%",height:"70%",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},children:l.jsx("iframe",{src:A.joinUrl,allow:"camera; microphone; fullscreen; speaker; display-capture; autoplay",style:{width:"100%",height:"100%",border:"none"},title:"Jitsi Meet Video Call",allowFullScreen:!0})})]}):l.jsx("div",{style:{padding:"20px",textAlign:"center"},children:l.jsx("p",{children:a==="ar"?"لا يوجد رابط للمكالمة":"No call URL available"})})}),l.jsx(At,{title:a==="ar"?"تقييم المستشار":"Rate Consultant",open:Pe,onCancel:()=>{x?.rating||se.warning(a==="ar"?"يجب إضافة تقييم ومراجعة قبل المتابعة":"Please add a rating and review before continuing")},footer:null,closable:!1,maskClosable:!1,width:600,children:l.jsxs("div",{className:"py-4",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:a==="ar"?"يرجى إضافة تقييمك ومراجعتك للمستشار بناءً على الجلسة التي انتهت للتو.":"Please provide your rating and review for the consultant based on the session that just ended."}),l.jsxs(W,{form:Be,layout:"vertical",children:[l.jsx(W.Item,{label:a==="ar"?"التقييم (مطلوب)":"Rating (Required)",required:!0,rules:[{required:!0,message:a==="ar"?"يرجى إضافة تقييم":"Please add a rating"}],children:l.jsx(Ia,{value:Le,onChange:ge,allowClear:!1,style:{fontSize:"28px"}})}),l.jsx(W.Item,{label:a==="ar"?"المراجعة/التعليق (مطلوب)":"Review/Comment (Required)",required:!0,rules:[{required:!0,message:a==="ar"?"يرجى إضافة مراجعة أو تعليق":"Please add a review or comment"},{min:10,message:a==="ar"?"يجب أن يكون التعليق 10 أحرف على الأقل":"Comment must be at least 10 characters"}],children:l.jsx(mT,{value:Ie,onChange:_e=>he(_e.target.value),placeholder:a==="ar"?"اكتب مراجعتك هنا...":"Write your review here...",rows:6,maxLength:500,showCount:!0})}),l.jsx(W.Item,{className:"mb-0",children:l.jsx("div",{className:"flex justify-end gap-3",children:l.jsx(J,{type:"primary",onClick:Va,loading:Se,disabled:!Le||Le<1||!Ie.trim()||Ie.trim().length<10,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:a==="ar"?"إرسال المراجعة":"Submit Review"})})})]})]})})]})},{authAPI:Qu,filesAPI:gT}=xs,{TextArea:BV}=ye,{Option:ql}=be,$V=()=>{const{t:n,language:e}=Ze(),{theme:t}=ha(),{user:r}=Xn(),[i]=W.useForm(),[a,s]=M.useState(!1),[o,c]=M.useState(null),[u,d]=M.useState(!1);M.useEffect(()=>{h()},[]);const h=async()=>{try{s(!0);const m=await Qu.getProfile();console.log("Profile response:",m),m.user&&(c(m.user),m.user.client&&i.setFieldsValue({firstName:m.user.client.firstName||"",lastName:m.user.client.lastName||"",email:m.user.email||"",phone:m.user.phone||"",city:m.user.client.city||"",country:m.user.client.country||"Saudi Arabia",address:m.user.client.address||"",postalCode:m.user.client.postalCode||"",sector:m.user.client.sector||"",companyName:m.user.client.companyName||"",companySize:m.user.client.companySize||"",jobTitle:m.user.client.jobTitle||"",website:m.user.client.website||"",linkedin:m.user.client.linkedin||"",twitter:m.user.client.twitter||"",dateOfBirth:m.user.client.dateOfBirth?qe(m.user.client.dateOfBirth):null,gender:m.user.client.gender||"",notificationEmail:m.user.client.notificationEmail!==void 0?m.user.client.notificationEmail:!0,notificationApp:m.user.client.notificationApp!==void 0?m.user.client.notificationApp:!0,notificationWhatsApp:m.user.client.notificationWhatsApp!==void 0?m.user.client.notificationWhatsApp:!0}))}catch(m){console.error("Error fetching profile:",m),se.error(m.message||(e==="ar"?"فشل تحميل الملف الشخصي":"Failed to load profile"))}finally{s(!1)}},f=async m=>{const v=gT||xs?.filesAPI;if(!v)return console.error("filesAPI is not defined",{filesAPI:gT,apiService:xs}),se.error(e==="ar"?"خطأ في تحميل API":"API loading error"),!1;const x=new FormData;x.append("file",m),x.append("ownerType","USER"),x.append("ownerId",r?.id||"");try{s(!0);const b=await v.uploadFile(x);b.file?.fileUrl&&(await Qu.updateProfile({avatar:b.file.fileUrl}),se.success(e==="ar"?"تم رفع الصورة بنجاح":"Avatar uploaded successfully"),c(A=>({...A,avatar:b.file.fileUrl})),await h())}catch(b){se.error(b.message||(e==="ar"?"فشل رفع الصورة":"Failed to upload avatar"))}finally{s(!1)}return!1},p=async m=>{try{s(!0);const v={...m,dateOfBirth:m.dateOfBirth?m.dateOfBirth.toISOString():null};m.email&&m.email!==o?.email&&await Qu.updateEmail(m.email),await Qu.updateProfile(v),se.success(e==="ar"?"تم حفظ التغييرات بنجاح":"Profile updated successfully"),d(!1),h()}catch(v){se.error(v.message||(e==="ar"?"فشل حفظ التغييرات":"Failed to save changes"))}finally{s(!1)}},y=async m=>{try{s(!0),await Qu.changePassword(m.currentPassword,m.newPassword),se.success(e==="ar"?"تم تغيير كلمة المرور بنجاح":"Password changed successfully"),i.setFieldsValue({currentPassword:"",newPassword:"",confirmPassword:""})}catch(v){se.error(v.message||(e==="ar"?"فشل تغيير كلمة المرور":"Failed to change password"))}finally{s(!1)}},g=o?.client?{totalBookings:0,completedSessions:0,totalSpent:0}:null;return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 relative z-10",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الملف الشخصي":"Profile Settings"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة معلوماتك الشخصية وإعدادات الحساب":"Manage your personal information and account settings"})]}),l.jsxs(Re,{gutter:[24,24],children:[l.jsx(me,{xs:24,md:8,children:l.jsxs(Ee,{className:"glass-card text-center shadow-professional-xl rounded-2xl border-0",children:[l.jsx(Vt,{showUploadList:!1,beforeUpload:f,accept:"image/*",children:l.jsxs("div",{className:"relative inline-block mb-4",children:[l.jsx(Mt,{size:140,src:o?.avatar||r?.avatar||o?.client?.profilePicture,icon:l.jsx(tt,{}),className:"ring-4 ring-olive-green-200"}),l.jsx(J,{type:"primary",shape:"circle",icon:l.jsx(Ey,{}),className:"absolute bottom-0 right-0 shadow-lg",size:"small",style:{backgroundColor:"#7a8c66"}})]})}),l.jsx("h2",{className:`text-2xl font-bold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:o?.client&&`${o.client.firstName||""} ${o.client.lastName||""}`.trim()||r?.email}),l.jsx($e,{color:"blue",className:"mb-4",children:e==="ar"?"عميل":"Client"}),g&&l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx(cn,{className:"my-4"}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{span:8,children:l.jsx(pt,{title:e==="ar"?"الحجوزات":"Bookings",value:g.totalBookings,valueStyle:{fontSize:"18px",color:t==="dark"?"#fff":"#7a8c66"}})}),l.jsx(me,{span:8,children:l.jsx(pt,{title:e==="ar"?"مكتملة":"Completed",value:g.completedSessions,valueStyle:{fontSize:"18px",color:t==="dark"?"#fff":"#14b8a6"}})}),l.jsx(me,{span:8,children:l.jsx(pt,{title:e==="ar"?"إجمالي":"Total",value:g.totalSpent,prefix:"SAR",valueStyle:{fontSize:"18px",color:t==="dark"?"#fff":"#7a8c66"}})})]})]})]})}),l.jsx(me,{xs:24,md:16,children:l.jsxs(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:e==="ar"?"المعلومات الشخصية":"Personal Information"}),l.jsx(J,{icon:u?l.jsx(Zt,{}):l.jsx(_r,{}),onClick:()=>d(!u),type:u?"default":"primary",children:u?e==="ar"?"إلغاء":"Cancel":e==="ar"?"تعديل":"Edit"})]}),l.jsxs(W,{form:i,onFinish:p,layout:"vertical",disabled:!u,children:[l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"firstName",label:e==="ar"?"الاسم الأول":"First Name",rules:[{required:!0}],children:l.jsx(ye,{size:"large",prefix:l.jsx(tt,{})})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"lastName",label:e==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0}],children:l.jsx(ye,{size:"large",prefix:l.jsx(tt,{})})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,type:"email"}],children:l.jsx(ye,{size:"large",prefix:l.jsx(vi,{})})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:l.jsx(ye,{size:"large",prefix:l.jsx(Ma,{})})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:8,children:l.jsx(W.Item,{name:"dateOfBirth",label:e==="ar"?"تاريخ الميلاد":"Date of Birth",children:l.jsx(ho,{size:"large",className:"w-full"})})}),l.jsx(me,{xs:24,sm:8,children:l.jsx(W.Item,{name:"gender",label:e==="ar"?"الجنس":"Gender",children:l.jsxs(be,{size:"large",children:[l.jsx(ql,{value:"MALE",children:e==="ar"?"ذكر":"Male"}),l.jsx(ql,{value:"FEMALE",children:e==="ar"?"أنثى":"Female"}),l.jsx(ql,{value:"OTHER",children:e==="ar"?"أخرى":"Other"})]})})})]}),l.jsx(cn,{children:e==="ar"?"العنوان":"Address"}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"city",label:e==="ar"?"المدينة":"City",children:l.jsx(ye,{size:"large",prefix:l.jsx(_y,{})})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"country",label:e==="ar"?"الدولة":"Country",children:l.jsx(ye,{size:"large",prefix:l.jsx(Ra,{})})})})]}),l.jsx(W.Item,{name:"address",label:e==="ar"?"العنوان الكامل":"Full Address",children:l.jsx(BV,{rows:3,size:"large"})}),l.jsx(W.Item,{name:"postalCode",label:e==="ar"?"الرمز البريدي":"Postal Code",children:l.jsx(ye,{size:"large"})}),l.jsx(cn,{children:e==="ar"?"معلومات الشركة":"Company Information"}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"companyName",label:e==="ar"?"اسم الشركة":"Company Name",children:l.jsx(ye,{size:"large",prefix:l.jsx(ME,{})})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"jobTitle",label:e==="ar"?"المسمى الوظيفي":"Job Title",children:l.jsx(ye,{size:"large"})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"sector",label:e==="ar"?"القطاع":"Sector",children:l.jsx(ye,{size:"large"})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"companySize",label:e==="ar"?"حجم الشركة":"Company Size",children:l.jsxs(be,{size:"large",children:[l.jsx(ql,{value:"SMALL",children:e==="ar"?"صغيرة":"Small"}),l.jsx(ql,{value:"MEDIUM",children:e==="ar"?"متوسطة":"Medium"}),l.jsx(ql,{value:"LARGE",children:e==="ar"?"كبيرة":"Large"})]})})})]}),l.jsx(cn,{children:e==="ar"?"روابط التواصل":"Social Links"}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"website",label:e==="ar"?"الموقع الإلكتروني":"Website",children:l.jsx(ye,{size:"large",prefix:l.jsx(Ra,{}),placeholder:"https://"})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"linkedin",label:"LinkedIn",children:l.jsx(ye,{size:"large",placeholder:"linkedin.com/in/..."})})})]}),l.jsx(W.Item,{name:"twitter",label:"Twitter",children:l.jsx(ye,{size:"large",placeholder:"@username"})}),u&&l.jsx(W.Item,{className:"mt-6",children:l.jsx(J,{type:"primary",htmlType:"submit",size:"large",icon:l.jsx(ja,{}),loading:a,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"حفظ التغييرات":"Save Changes"})})]}),l.jsx(cn,{children:e==="ar"?"تغيير كلمة المرور":"Change Password"}),l.jsxs(W,{onFinish:y,layout:"vertical",children:[l.jsx(W.Item,{name:"currentPassword",label:e==="ar"?"كلمة المرور الحالية":"Current Password",rules:[{required:!0}],children:l.jsx(ye.Password,{size:"large",prefix:l.jsx(Nn,{})})}),l.jsx(W.Item,{name:"newPassword",label:e==="ar"?"كلمة المرور الجديدة":"New Password",rules:[{required:!0,min:8}],children:l.jsx(ye.Password,{size:"large",prefix:l.jsx(Nn,{})})}),l.jsx(W.Item,{name:"confirmPassword",label:e==="ar"?"تأكيد كلمة المرور":"Confirm Password",dependencies:["newPassword"],rules:[{required:!0},({getFieldValue:m})=>({validator(v,x){return!x||m("newPassword")===x?Promise.resolve():Promise.reject(new Error(e==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match"))}})],children:l.jsx(ye.Password,{size:"large",prefix:l.jsx(Nn,{})})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",size:"large",loading:a,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"تغيير كلمة المرور":"Change Password"})})]}),l.jsx(cn,{children:e==="ar"?"تفضيلات الإشعارات":"Notification Preferences"}),l.jsxs(W,{form:i,layout:"vertical",children:[l.jsx(W.Item,{name:"notificationEmail",label:e==="ar"?"الإشعارات عبر البريد الإلكتروني":"Email Notifications",valuePropName:"checked",children:l.jsx(pi,{checkedChildren:e==="ar"?"مفعل":"On",unCheckedChildren:e==="ar"?"معطل":"Off"})}),l.jsx(W.Item,{name:"notificationApp",label:e==="ar"?"إشعارات التطبيق":"App Notifications",valuePropName:"checked",children:l.jsx(pi,{checkedChildren:e==="ar"?"مفعل":"On",unCheckedChildren:e==="ar"?"معطل":"Off"})}),l.jsx(W.Item,{name:"notificationWhatsApp",label:e==="ar"?"إشعارات واتساب":"WhatsApp Notifications",valuePropName:"checked",children:l.jsx(pi,{checkedChildren:e==="ar"?"مفعل":"On",unCheckedChildren:e==="ar"?"معطل":"Off"})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",size:"large",icon:l.jsx(ah,{}),loading:a,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"حفظ تفضيلات الإشعارات":"Save Notification Preferences"})})]})]})})]})]})]})},{TextArea:yT}=ye,{Option:To}=be,zV=()=>{const{language:n}=Ze(),[e,t]=M.useState([]),[r,i]=M.useState(!1),[a,s]=M.useState(!1),[o,c]=M.useState(!1),[u,d]=M.useState(null),[h,f]=M.useState(!1),[p]=W.useForm(),[y]=W.useForm();M.useEffect(()=>{g()},[]);const g=async()=>{try{i(!0);const w=await Rr.getMyTickets();t(w.tickets||[])}catch{se.error(n==="ar"?"فشل تحميل التذاكر":"Failed to load tickets")}finally{i(!1)}},m=async w=>{try{await Rr.createTicket(w),se.success(n==="ar"?"تم إنشاء التذكرة بنجاح":"Ticket created successfully"),s(!1),p.resetFields(),g()}catch{se.error(n==="ar"?"فشل إنشاء التذكرة":"Failed to create ticket")}},v=async w=>{try{if(await Rr.addComment(u.id,w.content),se.success(n==="ar"?"تم إضافة التعليق":"Comment added"),f(!1),y.resetFields(),g(),o){const S=await Rr.getTicketById(u.id);d(S.ticket)}}catch{se.error(n==="ar"?"فشل إضافة التعليق":"Failed to add comment")}},x=w=>({OPEN:"blue",IN_PROGRESS:"orange",RESOLVED:"green",CLOSED:"default"})[w]||"default",b=w=>({LOW:"default",MEDIUM:"blue",HIGH:"orange",URGENT:"red"})[w]||"default",A=[{title:n==="ar"?"رقم التذكرة":"Ticket Number",dataIndex:"ticketNumber",key:"ticketNumber"},{title:n==="ar"?"الموضوع":"Subject",dataIndex:"subject",key:"subject"},{title:n==="ar"?"الفئة":"Category",dataIndex:"category",key:"category",render:w=>w||"-"},{title:n==="ar"?"الأولوية":"Priority",dataIndex:"priority",key:"priority",render:w=>l.jsx($e,{color:b(w),children:w})},{title:n==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:w=>l.jsx($e,{color:x(w),children:w})},{title:n==="ar"?"تاريخ الإنشاء":"Created At",dataIndex:"createdAt",key:"createdAt",render:w=>qe(w).format("YYYY-MM-DD HH:mm")},{title:n==="ar"?"الإجراءات":"Actions",key:"actions",render:(w,S)=>l.jsx(ze,{children:l.jsx(J,{icon:l.jsx(Wn,{}),size:"small",onClick:()=>{d(S),c(!0)},children:n==="ar"?"عرض":"View"})})}];return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:n==="ar"?"تذاكر الدعم الفني":"Support Tickets"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:n==="ar"?"إنشاء ومتابعة تذاكر الدعم الفني":"Create and track support tickets"})]}),l.jsx(J,{type:"primary",size:"large",icon:l.jsx(gr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-professional",onClick:()=>s(!0),children:n==="ar"?"إنشاء تذكرة جديدة":"Create New Ticket"})]}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx(Pt,{columns:A,dataSource:e,loading:r,rowKey:"id",locale:{emptyText:l.jsx(jn,{description:n==="ar"?"لا توجد تذاكر":"No tickets"})}})}),l.jsx(At,{title:n==="ar"?"إنشاء تذكرة جديدة":"Create New Ticket",open:a,onCancel:()=>{s(!1),p.resetFields()},footer:null,width:600,className:"modern-modal",children:l.jsxs(W,{form:p,layout:"vertical",onFinish:m,children:[l.jsx(W.Item,{name:"subject",label:n==="ar"?"الموضوع":"Subject",rules:[{required:!0,message:n==="ar"?"الرجاء إدخال الموضوع":"Please enter subject"}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"category",label:n==="ar"?"الفئة":"Category",children:l.jsxs(be,{children:[l.jsx(To,{value:"technical",children:n==="ar"?"تقني":"Technical"}),l.jsx(To,{value:"billing",children:n==="ar"?"مالي":"Billing"}),l.jsx(To,{value:"general",children:n==="ar"?"عام":"General"})]})}),l.jsx(W.Item,{name:"priority",label:n==="ar"?"الأولوية":"Priority",initialValue:"MEDIUM",children:l.jsxs(be,{children:[l.jsx(To,{value:"LOW",children:n==="ar"?"منخفضة":"Low"}),l.jsx(To,{value:"MEDIUM",children:n==="ar"?"متوسطة":"Medium"}),l.jsx(To,{value:"HIGH",children:n==="ar"?"عالية":"High"}),l.jsx(To,{value:"URGENT",children:n==="ar"?"عاجلة":"Urgent"})]})}),l.jsx(W.Item,{name:"description",label:n==="ar"?"الوصف":"Description",rules:[{required:!0,message:n==="ar"?"الرجاء إدخال الوصف":"Please enter description"}],children:l.jsx(yT,{rows:6})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",block:!0,children:n==="ar"?"إنشاء التذكرة":"Create Ticket"})})]})}),l.jsx(At,{title:n==="ar"?"تفاصيل التذكرة":"Ticket Details",open:o,onCancel:()=>{c(!1),d(null)},footer:null,width:800,className:"modern-modal",children:u&&l.jsxs("div",{children:[l.jsxs(Je,{bordered:!0,column:2,children:[l.jsx(Je.Item,{label:n==="ar"?"رقم التذكرة":"Ticket Number",children:u.ticketNumber}),l.jsx(Je.Item,{label:n==="ar"?"الحالة":"Status",children:l.jsx($e,{color:x(u.status),children:u.status})}),l.jsx(Je.Item,{label:n==="ar"?"الأولوية":"Priority",children:l.jsx($e,{color:b(u.priority),children:u.priority})}),l.jsx(Je.Item,{label:n==="ar"?"الفئة":"Category",children:u.category||"-"}),l.jsx(Je.Item,{label:n==="ar"?"الموضوع":"Subject",span:2,children:u.subject}),l.jsx(Je.Item,{label:n==="ar"?"الوصف":"Description",span:2,children:u.description})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:n==="ar"?"التعليقات":"Comments"}),l.jsx(J,{type:"primary",icon:l.jsx(kn,{}),onClick:()=>f(!0),children:n==="ar"?"إضافة تعليق":"Add Comment"})]}),l.jsx(RE,{items:u.comments?.map(w=>({key:w.id,children:l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("span",{className:"font-semibold",children:w.user?.email}),l.jsx("span",{className:"text-gray-500 text-sm",children:qe(w.createdAt).format("YYYY-MM-DD HH:mm")})]}),l.jsx("p",{children:w.comment||w.content})]})}))||[]}),(!u.comments||u.comments.length===0)&&l.jsx(jn,{description:n==="ar"?"لا توجد تعليقات":"No comments"})]})]})}),l.jsx(At,{title:n==="ar"?"إضافة تعليق":"Add Comment",open:h,onCancel:()=>{f(!1),y.resetFields()},footer:null,className:"modern-modal",children:l.jsxs(W,{form:y,layout:"vertical",onFinish:v,children:[l.jsx(W.Item,{name:"content",label:n==="ar"?"التعليق":"Comment",rules:[{required:!0,message:n==="ar"?"الرجاء إدخال التعليق":"Please enter comment"}],children:l.jsx(yT,{rows:4})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",block:!0,children:n==="ar"?"إضافة التعليق":"Add Comment"})})]})})]})},{Text:qV,Paragraph:WV}=Du,HV=()=>{const{language:n}=Ze(),[e]=tz(),t=e.get("bookingId"),[r,i]=M.useState([]),[a,s]=M.useState(!0),[o,c]=M.useState(!1),[u,d]=M.useState(null);M.useEffect(()=>{h()},[t]);const h=async()=>{try{s(!0);const y={};t&&(y.bookingId=t);const g=await vm.getReports(y);i(g.reports||[])}catch(y){console.error("Error fetching reports:",y),se.error(n==="ar"?"فشل تحميل التقارير":"Failed to load reports")}finally{s(!1)}},f=(y,g)=>{if(!y){se.warning(n==="ar"?"الملف غير متوفر":"File not available");return}const m=document.createElement("a");m.href=y,m.download=g||"report.pdf",m.target="_blank",document.body.appendChild(m),m.click(),document.body.removeChild(m),se.success(n==="ar"?"جاري تحميل الملف...":"Downloading file...")},p=[{title:n==="ar"?"عنوان التقرير":"Report Title",dataIndex:"title",key:"title",render:y=>l.jsx(qV,{strong:!0,children:y})},{title:n==="ar"?"نوع التقرير":"Report Type",dataIndex:"reportType",key:"reportType",render:y=>{const g={FEASIBILITY_STUDY:n==="ar"?"دراسة جدوى":"Feasibility Study",ECONOMIC_ANALYSIS:n==="ar"?"تحليل اقتصادي":"Economic Analysis",FINANCIAL_REPORT:n==="ar"?"تقرير مالي":"Financial Report",CONSULTATION_SUMMARY:n==="ar"?"ملخص استشارة":"Consultation Summary"};return l.jsx($e,{color:"blue",children:g[y]||y})}},{title:n==="ar"?"المستشار":"Consultant",key:"consultant",render:(y,g)=>g.consultant?`${g.consultant.firstName||""} ${g.consultant.lastName||""}`.trim():g.booking?.consultant?`${g.booking.consultant.firstName||""} ${g.booking.consultant.lastName||""}`.trim():"-"},{title:n==="ar"?"تاريخ الرفع":"Upload Date",dataIndex:"createdAt",key:"createdAt",render:y=>qe(y).format("YYYY-MM-DD HH:mm")},{title:n==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:y=>{const g={DRAFT:"default",UNDER_REVIEW:"processing",APPROVED:"success",REJECTED:"error",COMPLETED:"success"},m={DRAFT:n==="ar"?"مسودة":"Draft",UNDER_REVIEW:n==="ar"?"قيد المراجعة":"Under Review",APPROVED:n==="ar"?"موافق عليه":"Approved",REJECTED:n==="ar"?"مرفوض":"Rejected",COMPLETED:n==="ar"?"مكتمل":"Completed"};return l.jsx($e,{color:g[y]||"default",icon:y==="APPROVED"||y==="COMPLETED"?l.jsx(Zt,{}):y==="UNDER_REVIEW"?l.jsx($i,{}):l.jsx(sh,{}),children:m[y]||y})}},{title:n==="ar"?"الإجراءات":"Actions",key:"actions",render:(y,g)=>l.jsxs(ze,{children:[l.jsx(J,{icon:l.jsx(Wn,{}),onClick:()=>{d(g),c(!0)},children:n==="ar"?"معاينة":"Preview"}),(g.status==="APPROVED"||g.status==="COMPLETED")&&l.jsxs(l.Fragment,{children:[g.pdfUrl&&l.jsx(J,{type:"primary",icon:l.jsx(Mr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>f(g.pdfUrl,`${g.title||"report"}.pdf`),children:n==="ar"?"تحميل PDF":"Download PDF"}),g.wordUrl&&l.jsx(J,{icon:l.jsx(Mr,{}),onClick:()=>f(g.wordUrl,`${g.title||"report"}.docx`),children:n==="ar"?"تحميل Word":"Download Word"})]})]})}];return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:n==="ar"?"التقارير":"Reports"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:n==="ar"?"عرض وتحميل التقارير المرفوعة من المستشارين":"View and download reports uploaded by consultants"})]})}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx(Pt,{columns:p,dataSource:r,rowKey:"id",loading:a,pagination:{pageSize:10},locale:{emptyText:n==="ar"?"لا توجد تقارير متاحة":"No reports available"}})}),l.jsx(At,{title:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Kt,{className:"text-olive-green-600"}),l.jsx("span",{children:n==="ar"?"تفاصيل التقرير":"Report Details"})]}),open:o,onCancel:()=>{c(!1),d(null)},footer:(()=>{const y=[l.jsx(J,{onClick:()=>{c(!1),d(null)},children:n==="ar"?"إغلاق":"Close"},"close")];return u&&(u.status==="APPROVED"||u.status==="COMPLETED")&&(u.pdfUrl&&y.push(l.jsx(J,{type:"primary",icon:l.jsx(Mr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>f(u.pdfUrl,`${u.title||"report"}.pdf`),children:n==="ar"?"تحميل PDF":"Download PDF"},"pdf")),u.wordUrl&&y.push(l.jsx(J,{icon:l.jsx(Mr,{}),onClick:()=>f(u.wordUrl,`${u.title||"report"}.docx`),children:n==="ar"?"تحميل Word":"Download Word"},"word"))),y})(),width:800,children:u&&l.jsxs(Je,{column:1,bordered:!0,children:[l.jsx(Je.Item,{label:n==="ar"?"العنوان":"Title",children:u.title}),l.jsx(Je.Item,{label:n==="ar"?"نوع التقرير":"Report Type",children:l.jsx($e,{color:"blue",children:u.reportType==="FEASIBILITY_STUDY"?n==="ar"?"دراسة جدوى":"Feasibility Study":u.reportType==="ECONOMIC_ANALYSIS"?n==="ar"?"تحليل اقتصادي":"Economic Analysis":u.reportType==="FINANCIAL_REPORT"?n==="ar"?"تقرير مالي":"Financial Report":n==="ar"?"ملخص استشارة":"Consultation Summary"})}),l.jsx(Je.Item,{label:n==="ar"?"المستشار":"Consultant",children:u.consultant?`${u.consultant.firstName||""} ${u.consultant.lastName||""}`.trim():u.booking?.consultant?`${u.booking.consultant.firstName||""} ${u.booking.consultant.lastName||""}`.trim():"-"}),l.jsx(Je.Item,{label:n==="ar"?"الحالة":"Status",children:l.jsx($e,{color:u.status==="APPROVED"||u.status==="COMPLETED"?"success":u.status==="UNDER_REVIEW"?"processing":u.status==="REJECTED"?"error":"default",children:u.status==="APPROVED"?n==="ar"?"موافق عليه":"Approved":u.status==="COMPLETED"?n==="ar"?"مكتمل":"Completed":u.status==="UNDER_REVIEW"?n==="ar"?"قيد المراجعة":"Under Review":u.status==="REJECTED"?n==="ar"?"مرفوض":"Rejected":n==="ar"?"مسودة":"Draft"})}),u.summary&&l.jsx(Je.Item,{label:n==="ar"?"ملخص":"Summary",children:l.jsx(WV,{children:u.summary})}),l.jsx(Je.Item,{label:n==="ar"?"تاريخ الرفع":"Upload Date",children:qe(u.createdAt).format("YYYY-MM-DD HH:mm")}),u.updatedAt&&l.jsx(Je.Item,{label:n==="ar"?"آخر تحديث":"Last Updated",children:qe(u.updatedAt).format("YYYY-MM-DD HH:mm")})]})})]})},VV=()=>l.jsx(IV,{children:l.jsxs(wy,{children:[l.jsx(Qe,{path:"/",element:l.jsx(RV,{})}),l.jsx(Qe,{path:"/bookings",element:l.jsx(FV,{})}),l.jsx(Qe,{path:"/consultations",element:l.jsx(LV,{})}),l.jsx(Qe,{path:"/chat",element:l.jsx(Ff,{})}),l.jsx(Qe,{path:"/chat/session/:sessionId",element:l.jsx(Ff,{})}),l.jsx(Qe,{path:"/sessions/:sessionId",element:l.jsx(Ff,{})}),l.jsx(Qe,{path:"/chat/:id",element:l.jsx(Ff,{})}),l.jsx(Qe,{path:"/reports",element:l.jsx(HV,{})}),l.jsx(Qe,{path:"/support",element:l.jsx(zV,{})}),l.jsx(Qe,{path:"/profile",element:l.jsx($V,{})}),l.jsx(Qe,{path:"*",element:l.jsx(na,{to:"/client",replace:!0})})]})}),{Header:GV,Sider:YV,Content:KV}=Dt,XV=({children:n})=>{const{t:e,language:t,toggleLanguage:r}=Ze(),{user:i,logout:a}=Xn(),{settings:s}=ha(),o=Rt(),c=jl(),[u,d]=M.useState(!1),[h,f]=M.useState(!1),p=t==="ar";M.useEffect(()=>{const b=document.querySelector(".consultant-content");b&&(b.classList.add("fade-in"),setTimeout(()=>{b.classList.remove("fade-in")},500))},[c.pathname]);const y=()=>{a(),o("/login",{replace:!0})},g=[{key:"/consultant",icon:l.jsx(Dy,{}),label:t==="ar"?"الرئيسية":"Home"},{key:"/consultant/bookings",icon:l.jsx(vn,{}),label:t==="ar"?"الحجوزات":"Bookings"},{key:"/consultant/sessions",icon:l.jsx(vn,{}),label:t==="ar"?"الجلسات":"Sessions"},{key:"/consultant/chat",icon:l.jsx(kn,{}),label:t==="ar"?"الرسائل":"Messages"},{key:"/consultant/reports",icon:l.jsx(Kt,{}),label:t==="ar"?"التقارير":"Reports"},{key:"/consultant/profile",icon:l.jsx(tt,{}),label:t==="ar"?"الملف الشخصي":"Profile"},{key:"/consultant/earnings",icon:l.jsx(Yn,{}),label:t==="ar"?"الأرباح":"Earnings"},{key:"/consultant/support",icon:l.jsx(Kt,{}),label:t==="ar"?"الدعم الفني":"Support"}],m=[{key:"profile",icon:l.jsx(tt,{}),label:t==="ar"?"الملف الشخصي":"Profile",onClick:({domEvent:b})=>{b&&(b.stopPropagation(),b.preventDefault()),setTimeout(()=>{f(!1),o("/consultant/profile")},100)}},{key:"settings",icon:l.jsx(Uc,{}),label:t==="ar"?"الإعدادات":"Settings",onClick:({domEvent:b})=>{b&&(b.stopPropagation(),b.preventDefault()),setTimeout(()=>{f(!1),o("/consultant/profile")},100)}},{type:"divider"},{key:"logout",icon:l.jsx(oh,{}),label:t==="ar"?"تسجيل الخروج":"Logout",onClick:({domEvent:b})=>{b&&(b.stopPropagation(),b.preventDefault()),setTimeout(()=>{f(!1),y()},100)}}],v={overflow:"auto",height:"100vh",position:"fixed",top:0,bottom:0,[p?"right":"left"]:0,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",zIndex:1e3},x={transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",[p?"marginRight":"marginLeft"]:u?80:250};return l.jsxs(Dt,{className:"min-h-screen",children:[l.jsxs(YV,{trigger:null,collapsible:!0,collapsed:u,width:250,className:"consultant-sidebar bg-gradient-to-b from-white to-gray-50 shadow-2xl border-r border-gray-200",style:v,children:[l.jsx("div",{className:"p-6 flex items-center justify-between border-b border-gray-200",children:l.jsxs("div",{className:`flex items-center gap-3 transition-all duration-300 ${u?"justify-center w-full":""}`,children:[s.logo?l.jsx("img",{src:s.logo,alt:"Logo",className:`${u?"w-12 h-12":"h-10"} object-contain cursor-pointer transition-all duration-300`,onClick:()=>o("/consultant")}):l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-olive-green-600 via-olive-green-500 to-turquoise-500 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300 cursor-pointer",style:{backgroundColor:s.primaryColor},onClick:()=>o("/consultant"),children:l.jsx("span",{className:"text-white font-bold text-xl",children:t==="ar"?s.dashboardNameAr?.[0]||"ج":s.dashboardName?.[0]||"J"})}),!u&&l.jsxs("div",{className:"animate-fade-in cursor-pointer",onClick:()=>o("/consultant"),children:[l.jsx("div",{className:"text-base font-bold text-olive-green-700",style:{color:s.primaryColor},children:s.dashboardName||"Jadwa"}),l.jsx("div",{className:"text-xs text-gray-500",children:s.dashboardNameAr||"جدوى"})]})]})}),l.jsx(ih,{mode:"inline",selectedKeys:[c.pathname],items:g,onClick:({key:b})=>o(b),className:"border-0 mt-4 px-2",style:{background:"transparent"}}),l.jsx("div",{className:"absolute bottom-4 left-0 right-0 px-4",children:l.jsx(J,{type:"text",icon:u?p?l.jsx(Pc,{}):l.jsx(Ic,{}):p?l.jsx(Ic,{}):l.jsx(Pc,{}),onClick:()=>d(!u),className:"w-full hover:bg-olive-green-50 text-olive-green-600 border border-olive-green-200 rounded-lg transition-all duration-300",children:!u&&l.jsx("span",{className:"ml-2",children:t==="ar"?"طي":"Collapse"})})})]}),l.jsxs(Dt,{style:x,className:"transition-all duration-300",children:[l.jsxs(GV,{className:"bg-white shadow-md px-3 md:px-6 flex items-center justify-between fixed top-0 z-[1001] backdrop-blur-sm bg-white/95",style:{position:"fixed",width:`calc(100% - ${u?80:250}px)`,[p?"right":"left"]:u?80:250,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)"},children:[l.jsx(J,{type:"text",icon:l.jsx(jy,{}),onClick:()=>d(!u),className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300",style:{pointerEvents:"auto"}}),l.jsxs("div",{className:"flex items-center gap-2 md:gap-4",style:{pointerEvents:"auto",position:"relative",zIndex:1002},children:[l.jsx(J,{type:"text",icon:l.jsx(Ra,{}),onClick:r,className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300 font-semibold",title:t==="ar"?"Switch to English":"التبديل إلى العربية",style:{pointerEvents:"auto"},children:t==="ar"?"EN":"AR"}),l.jsx($E,{userId:i?.id}),l.jsx(Sy,{menu:{items:m},placement:p?"bottomLeft":"bottomRight",trigger:["click"],open:h,destroyTooltipOnHide:!1,transitionName:"",getPopupContainer:()=>document.body,popupRender:b=>l.jsx("div",{onMouseDown:A=>{A.stopPropagation(),A.preventDefault()},onClick:A=>{A.stopPropagation()},children:b}),onOpenChange:b=>{b!==h&&f(b)},children:l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-3 py-2 rounded-lg group",children:[l.jsx(Mt,{src:i?.avatar||i?.consultant?.profilePicture,icon:l.jsx(tt,{}),className:"ring-2 ring-olive-green-200 group-hover:ring-olive-green-400 transition-all duration-300"}),l.jsx("span",{className:"hidden md:inline font-medium text-gray-700",children:i?.consultant?`${i.consultant.firstName} ${i.consultant.lastName}`:i?.email})]})})]})]}),l.jsx(KV,{className:"p-3 md:p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen consultant-content",style:{marginTop:"64px"},children:l.jsx("div",{className:"animate-fade-in",children:n})})]})]})},JV=()=>{const{language:n}=Ze(),{user:e}=Xn(),t=Rt(),[r,i]=M.useState(!0),[a,s]=M.useState(null),[o,c]=M.useState({totalSessions:0,pendingSessions:0,completedSessions:0,totalEarnings:0,rating:0,totalRatings:0}),[u,d]=M.useState([]),[h,f]=M.useState([]);M.useEffect(()=>{p()},[]);const p=async()=>{try{i(!0),s(null);const m=await vs.getDashboardStats();c(m.stats),d(m.upcomingSessions||[]),f(m.recentSessions||[])}catch(m){console.error("Error fetching dashboard data:",m),s(m.message||"Failed to load dashboard data")}finally{i(!1)}},y=({title:m,value:v,icon:x,color:b,suffix:A="",subtitle:w=null,delay:S=0})=>l.jsxs(Ee,{className:"modern-kpi-card card-hover shadow-professional-lg relative overflow-hidden h-full border-0",style:{animationDelay:`${S}s`},styles:{body:{padding:"20px"}},children:[l.jsx("div",{className:`absolute -top-8 -right-8 w-32 h-32 rounded-full ${b} opacity-5 blur-2xl`}),l.jsx("div",{className:`absolute -bottom-6 -left-6 w-24 h-24 rounded-full ${b} opacity-5 blur-xl`}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsx("div",{className:`p-3 rounded-2xl ${b} bg-opacity-10 shadow-sm`,children:l.jsx("div",{className:"text-2xl sm:text-3xl",children:x})})}),l.jsx(pt,{title:l.jsx("span",{className:"text-gray-600 font-semibold text-xs sm:text-sm uppercase tracking-wide",children:m}),value:v,suffix:A,valueStyle:{color:b.includes("teal")?"#14b8a6":b.includes("olive")?"#7a8c66":b.includes("yellow")?"#faad14":b.includes("green")?"#52c41a":"#1890ff",fontWeight:800,fontSize:"clamp(20px, 4vw, 28px)",lineHeight:1.2}}),w&&l.jsx("div",{className:"mt-3 text-xs text-gray-500 font-medium",children:w})]})]});if(r)return l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx(kt,{size:"large"})});if(a)return l.jsx(Fn,{message:n==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:a,type:"error",showIcon:!0,closable:!0,onClose:()=>s(null)});const g=e?.consultant?`${e.consultant.firstName||""} ${e.consultant.lastName||""}`.trim():e?.email||(n==="ar"?"المستشار":"Consultant");return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 md:mb-10 relative z-10 px-2 sm:px-0",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:n==="ar"?`مرحباً، ${g}`:`Welcome, ${g}`}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:n==="ar"?"نظرة عامة على أدائك":"Overview of your performance"})]}),l.jsx("div",{className:"text-sm sm:text-base text-gray-700 glass-card px-4 py-3 rounded-xl shadow-professional whitespace-nowrap font-medium",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(vn,{className:"text-olive-green-600"}),new Date().toLocaleDateString(n==="ar"?"ar-SA":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]}),l.jsxs(Re,{gutter:[12,12],className:"mb-4 md:mb-6",children:[l.jsx(me,{xs:12,sm:12,md:6,lg:6,xl:6,children:l.jsx(y,{title:n==="ar"?"إجمالي الجلسات":"Total Sessions",value:o.totalSessions,icon:l.jsx(vn,{className:"text-xl sm:text-2xl text-teal-500"}),color:"bg-teal-500",delay:.1})}),l.jsx(me,{xs:12,sm:12,md:6,lg:6,xl:6,children:l.jsx(y,{title:n==="ar"?"الجلسات المعلقة":"Pending Sessions",value:o.pendingSessions,icon:l.jsx($i,{className:"text-xl sm:text-2xl text-orange-500"}),color:"bg-orange-500",delay:.2})}),l.jsx(me,{xs:12,sm:12,md:6,lg:6,xl:6,children:l.jsx(y,{title:n==="ar"?"التقييم":"Rating",value:o.rating,precision:1,icon:l.jsx(Bc,{className:"text-xl sm:text-2xl text-yellow-500"}),color:"bg-yellow-500",suffix:"/ 5",subtitle:n==="ar"?`${o.totalRatings} تقييمات`:`${o.totalRatings} ratings`,delay:.3})}),l.jsx(me,{xs:12,sm:12,md:6,lg:6,xl:6,children:l.jsx(y,{title:n==="ar"?"إجمالي الأرباح":"Total Earnings",value:o.totalEarnings,icon:l.jsx(Yn,{className:"text-xl sm:text-2xl text-olive-green-600"}),color:"bg-olive-green-600",suffix:n==="ar"?" ريال":" SAR",delay:.4})})]}),l.jsxs(Re,{gutter:[12,12],className:"mb-4 md:mb-6",children:[l.jsx(me,{xs:24,sm:24,md:24,lg:12,xl:12,children:l.jsx(Ee,{title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-olive-green-500 to-olive-green-600",children:l.jsx(vn,{className:"text-white text-lg sm:text-xl"})}),l.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:n==="ar"?"الجلسات القادمة":"Upcoming Sessions"})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0 h-full",style:{animationDelay:"0.2s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},extra:u.length>0&&l.jsxs(J,{type:"link",onClick:()=>t("/consultant/sessions"),className:"text-olive-green-600 text-xs sm:text-sm p-0",children:[n==="ar"?"عرض الكل":"View All"," ",l.jsx(xm,{})]}),children:u.length>0?l.jsx(qt,{itemLayout:"horizontal",dataSource:u,renderItem:m=>l.jsx(qt.Item,{className:"hover:bg-gray-50 rounded-lg p-2 sm:p-3 transition-colors",actions:[l.jsx(J,{type:"primary",size:"small",icon:l.jsx(ka,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 text-xs sm:text-sm",onClick:()=>t(`/consultant/chat/${m.bookingId||m.id}`),children:n==="ar"?"بدء":"Start"})],children:l.jsx(qt.Item.Meta,{avatar:l.jsx(Mt,{src:m.client?.user?.avatar,icon:l.jsx(tt,{}),size:{xs:40,sm:48}}),title:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 flex-wrap",children:[l.jsxs("span",{className:"font-semibold text-sm sm:text-base",children:[m.client?.firstName," ",m.client?.lastName]}),l.jsx($e,{color:"blue",className:"text-xs",children:qe(m.scheduledAt).format("MMM DD, YYYY")})]}),description:l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-600 text-xs sm:text-sm",children:m.service?.title||m.service?.titleAr||"Consultation"}),m.selectedTimeSlot&&l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[l.jsx($i,{})," ",m.selectedTimeSlot]})]})})})}):l.jsx(jn,{description:n==="ar"?"لا توجد جلسات قادمة":"No upcoming sessions",image:jn.PRESENTED_IMAGE_SIMPLE,className:"py-8"})})}),l.jsx(me,{xs:24,sm:24,md:24,lg:12,xl:12,children:l.jsx(Ee,{title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-yellow-500 to-yellow-600",children:l.jsx(lh,{className:"text-white text-lg sm:text-xl"})}),l.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-800",children:n==="ar"?"الجلسات الأخيرة":"Recent Sessions"})]}),className:"glass-card card-hover shadow-professional-xl rounded-2xl border-0 h-full",style:{animationDelay:"0.3s"},styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},extra:h.length>0&&l.jsxs(J,{type:"link",onClick:()=>t("/consultant/sessions"),className:"text-olive-green-600 text-xs sm:text-sm p-0",children:[n==="ar"?"عرض الكل":"View All"," ",l.jsx(xm,{})]}),children:h.length>0?l.jsx(qt,{dataSource:h,renderItem:m=>l.jsx(qt.Item,{className:"hover:bg-gray-50 rounded-lg p-2 sm:p-3 transition-colors",children:l.jsx(qt.Item.Meta,{avatar:l.jsx(Mt,{src:m.client?.user?.avatar,icon:l.jsx(tt,{}),size:{xs:40,sm:48}}),title:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 flex-wrap",children:[l.jsxs("span",{className:"font-semibold text-sm sm:text-base",children:[m.client?.firstName," ",m.client?.lastName]}),l.jsx($e,{color:m.status==="COMPLETED"?"green":m.status==="IN_PROGRESS"?"blue":"orange",className:"text-xs",children:m.status==="COMPLETED"?n==="ar"?"مكتملة":"Completed":m.status==="IN_PROGRESS"?n==="ar"?"قيد التنفيذ":"In Progress":m.status})]}),description:l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-600 text-xs sm:text-sm",children:m.service?.title||m.service?.titleAr||"Consultation"}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[l.jsx($i,{})," ",qe(m.createdAt).format("MMM DD, YYYY")]})]})})})}):l.jsx(jn,{description:n==="ar"?"لا توجد جلسات حديثة":"No recent sessions",image:jn.PRESENTED_IMAGE_SIMPLE,className:"py-8"})})})]})]})},{TextArea:J1e}=ye,ZV=()=>{const{t:n,language:e}=Ze(),t=Rt(),[r,i]=M.useState([]),[a,s]=M.useState([]),[o,c]=M.useState(!0),[u,d]=M.useState("all");M.useEffect(()=>{h()},[]);const h=async()=>{try{c(!0);const b=(await Ir.getBookings()).bookings.filter(A=>["CONFIRMED","COMPLETED"].includes(A.status)).map(A=>{const w=A.session||{};return{id:A.id,bookingId:A.id,client:A.client?`${A.client.firstName} ${A.client.lastName}`:e==="ar"?"غير متوفر":"N/A",type:A.service?e==="ar"?A.service.titleAr:A.service.title:e==="ar"?"غير محدد":"Not specified",date:A.scheduledAt?qe(A.scheduledAt).format("YYYY-MM-DD"):"-",time:A.scheduledAt?qe(A.scheduledAt).format("HH:mm"):"-",duration:A.duration||60,status:w.status||A.status?.toLowerCase()||"upcoming",sessionId:w.id}});s(b),f(b,u)}catch(v){console.error("Error fetching sessions:",v),se.error(e==="ar"?"فشل تحميل الجلسات":"Failed to load sessions")}finally{c(!1)}},f=(v,x)=>{let b=v;x==="pending"?b=v.filter(A=>A.status==="confirmed"||A.status==="scheduled"||A.status==="upcoming"):x==="in_progress"?b=v.filter(A=>A.status==="in_progress"):x==="completed"&&(b=v.filter(A=>A.status==="completed")),i(b)},p=v=>{d(v),f(a,v)},y=async v=>{try{const x=await fn.generateVideoRoom(v);await fn.startSession(v,x.room?.roomId),se.success(e==="ar"?"تم بدء الجلسة بنجاح":"Session started successfully"),h(),t(`/consultant/chat/${v}`)}catch(x){se.error(x.message||(e==="ar"?"فشل بدء الجلسة":"Failed to start session"))}},g=[{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client"},{title:e==="ar"?"النوع":"Type",dataIndex:"type",key:"type"},{title:e==="ar"?"التاريخ والوقت":"Date & Time",key:"datetime",render:(v,x)=>`${x.date} - ${x.time}`},{title:e==="ar"?"المدة":"Duration",dataIndex:"duration",key:"duration",render:v=>`${v} ${e==="ar"?"دقيقة":"min"}`},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:v=>{const x={upcoming:"blue",in_progress:"green",completed:"green",cancelled:"red",scheduled:"blue",confirmed:"blue"},b={upcoming:e==="ar"?"قادمة":"Upcoming",in_progress:e==="ar"?"قيد التنفيذ":"In Progress",completed:e==="ar"?"مكتملة":"Completed",cancelled:e==="ar"?"ملغية":"Cancelled",scheduled:e==="ar"?"مجدولة":"Scheduled",confirmed:e==="ar"?"مؤكدة":"Confirmed"};return l.jsx($e,{color:x[v]||"default",children:b[v]||v})}},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(v,x)=>l.jsxs(ze,{children:[(x.status==="upcoming"||x.status==="scheduled"||x.status==="confirmed")&&l.jsx(J,{type:"primary",icon:l.jsx(ka,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>y(x.bookingId),children:e==="ar"?"بدء الجلسة":"Start Session"}),x.status==="in_progress"&&l.jsx(J,{icon:l.jsx(kn,{}),onClick:()=>t(`/consultant/chat/${x.bookingId}`),children:e==="ar"?"فتح المحادثة":"Open Chat"}),l.jsx(J,{icon:l.jsx(Sn,{}),onClick:()=>t(`/consultant/reports?bookingId=${x.bookingId}`),children:e==="ar"?"رفع تقرير":"Upload Report"})]})}],m=[{key:"all",label:e==="ar"?"الكل":"All",icon:l.jsx(Kt,{})},{key:"pending",label:e==="ar"?"الطلبات الواردة":"Incoming Requests",icon:l.jsx(sW,{})},{key:"in_progress",label:e==="ar"?"قيد التنفيذ":"In Progress",icon:l.jsx(ka,{})},{key:"completed",label:e==="ar"?"مكتملة":"Completed",icon:l.jsx(Zt,{})}];return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"mb-8 relative z-10",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الجلسات":"Sessions"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع جلساتك":"Manage all your sessions"})]}),l.jsxs(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:[l.jsx(la,{activeKey:u,onChange:p,items:m,className:"mb-4"}),l.jsx(Pt,{columns:g,dataSource:r,rowKey:"id",loading:o,pagination:{pageSize:10,showSizeChanger:!0,showTotal:v=>e==="ar"?`إجمالي ${v} جلسة`:`Total ${v} sessions`}})]})]})},{authAPI:Lf,consultantAPI:QV,filesAPI:vT}=xs,{TextArea:ed}=ye,{Option:xv}=be,eG=()=>{const{t:n,language:e}=Ze(),{theme:t}=ha(),{user:r}=Xn(),[i]=W.useForm(),[a,s]=M.useState(!1),[o,c]=M.useState(null),[u,d]=M.useState(!1);M.useEffect(()=>{h()},[]);const h=async()=>{try{s(!0);const m=await Lf.getProfile();if(console.log("Profile response:",m),m.user&&(c(m.user),m.user.consultant)){const v=m.user.consultant;i.setFieldsValue({firstName:v.firstName||"",lastName:v.lastName||"",email:m.user.email||"",phone:m.user.phone||"",academicDegree:v.academicDegree||"",specialization:v.specialization||"",bio:v.bio||"",expertiseFields:v.expertiseFields?typeof v.expertiseFields=="string"?v.expertiseFields:JSON.parse(v.expertiseFields).join(", "):"",city:v.city||"",country:v.country||"Saudi Arabia",address:v.address||"",postalCode:v.postalCode||"",yearsOfExperience:v.yearsOfExperience||0,languages:v.languages?typeof v.languages=="string"?v.languages:JSON.parse(v.languages).join(", "):"",certifications:v.certifications?typeof v.certifications=="string"?v.certifications:JSON.parse(v.certifications).join(", "):"",education:v.education?typeof v.education=="string"?v.education:JSON.parse(v.education).join(", "):"",website:v.website||"",linkedin:v.linkedin||"",twitter:v.twitter||"",pricePerSession:v.pricePerSession||0,dateOfBirth:v.dateOfBirth?qe(v.dateOfBirth):null,gender:v.gender||"",isAvailable:v.isAvailable!==void 0?v.isAvailable:!0})}}catch(m){console.error("Error fetching profile:",m),se.error(m.message||(e==="ar"?"فشل تحميل الملف الشخصي":"Failed to load profile"))}finally{s(!1)}},f=async m=>{const v=vT||xs?.filesAPI;if(!v)return console.error("filesAPI is not defined",{filesAPI:vT,apiService:xs}),se.error(e==="ar"?"خطأ في تحميل API":"API loading error"),!1;const x=new FormData;x.append("file",m),x.append("ownerType","USER"),x.append("ownerId",r?.id||"");try{s(!0);const b=await v.uploadFile(x);b.file?.fileUrl&&(await Lf.updateProfile({avatar:b.file.fileUrl}),se.success(e==="ar"?"تم رفع الصورة بنجاح":"Profile picture uploaded successfully"),c(A=>({...A,avatar:b.file.fileUrl})),await h())}catch(b){se.error(b.message||(e==="ar"?"فشل رفع الصورة":"Failed to upload profile picture"))}finally{s(!1)}return!1},p=async m=>{try{s(!0);const v={...m,dateOfBirth:m.dateOfBirth?m.dateOfBirth.toISOString():null,expertiseFields:m.expertiseFields?JSON.stringify(m.expertiseFields.split(",").map(x=>x.trim())):"[]",languages:m.languages?JSON.stringify(m.languages.split(",").map(x=>x.trim())):"[]",certifications:m.certifications?JSON.stringify(m.certifications.split(",").map(x=>x.trim())):"[]",education:m.education?JSON.stringify(m.education.split(",").map(x=>x.trim())):"[]"};m.email&&m.email!==o?.email&&await Lf.updateEmail(m.email),await QV.updateProfile(v),se.success(e==="ar"?"تم حفظ التغييرات بنجاح":"Profile updated successfully"),d(!1),h()}catch(v){se.error(v.message||(e==="ar"?"فشل حفظ التغييرات":"Failed to save changes"))}finally{s(!1)}},y=async m=>{try{s(!0),await Lf.changePassword(m.currentPassword,m.newPassword),se.success(e==="ar"?"تم تغيير كلمة المرور بنجاح":"Password changed successfully"),i.setFieldsValue({currentPassword:"",newPassword:"",confirmPassword:""})}catch(v){se.error(v.message||(e==="ar"?"فشل تغيير كلمة المرور":"Failed to change password"))}finally{s(!1)}},g=o?.consultant?{totalSessions:0,completedSessions:0,totalEarnings:o.consultant.totalEarnings||0,rating:o.consultant.rating||0,totalRatings:o.consultant.totalRatings||0}:null;return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 relative z-10",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الملف الشخصي":"Profile Settings"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة معلوماتك الشخصية والمهنية":"Manage your personal and professional information"})]}),l.jsxs(Re,{gutter:[24,24],children:[l.jsx(me,{xs:24,md:8,children:l.jsxs(Ee,{className:"glass-card text-center shadow-professional-xl rounded-2xl border-0",children:[l.jsx(Vt,{showUploadList:!1,beforeUpload:f,accept:"image/*",children:l.jsxs("div",{className:"relative inline-block mb-4",children:[l.jsx(Mt,{size:140,src:o?.avatar||r?.avatar||o?.consultant?.profilePicture,icon:l.jsx(tt,{}),className:"ring-4 ring-olive-green-200"}),l.jsx(J,{type:"primary",shape:"circle",icon:l.jsx(Ey,{}),className:"absolute bottom-0 right-0 shadow-lg",size:"small",style:{backgroundColor:"#7a8c66"}})]})}),l.jsx("h2",{className:`text-2xl font-bold mb-2 ${t==="dark"?"text-white":"text-gray-900"}`,children:o?.consultant?`${o.consultant.firstName} ${o.consultant.lastName}`:r?.email}),l.jsxs("div",{className:"mb-3",children:[l.jsx($e,{color:"green",className:"mb-2",children:e==="ar"?"مستشار":"Consultant"}),o?.consultant?.isVerified&&l.jsx($e,{color:"blue",icon:l.jsx(iR,{}),children:e==="ar"?"موثق":"Verified"})]}),g&&l.jsxs("div",{className:"mt-6 space-y-4",children:[l.jsx(cn,{className:"my-4"}),l.jsxs("div",{className:"text-center mb-4",children:[l.jsx(Ia,{disabled:!0,value:g.rating,allowHalf:!0,className:"text-2xl"}),l.jsxs("div",{className:`mt-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:[g.rating.toFixed(1)," (",g.totalRatings," ",e==="ar"?"تقييم":"ratings",")"]})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{span:12,children:l.jsx(pt,{title:e==="ar"?"الجلسات":"Sessions",value:g.totalSessions,valueStyle:{fontSize:"18px",color:t==="dark"?"#fff":"#7a8c66"}})}),l.jsx(me,{span:12,children:l.jsx(pt,{title:e==="ar"?"مكتملة":"Completed",value:g.completedSessions,valueStyle:{fontSize:"18px",color:t==="dark"?"#fff":"#14b8a6"}})})]}),l.jsx(cn,{className:"my-4"}),l.jsx(pt,{title:e==="ar"?"إجمالي الأرباح":"Total Earnings",value:g.totalEarnings,prefix:"SAR",valueStyle:{fontSize:"20px",color:t==="dark"?"#fff":"#7a8c66",fontWeight:"bold"}})]})]})}),l.jsx(me,{xs:24,md:16,children:l.jsxs(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:`text-2xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:e==="ar"?"المعلومات الشخصية":"Personal Information"}),l.jsx(J,{icon:u?l.jsx(Zt,{}):l.jsx(_r,{}),onClick:()=>d(!u),type:u?"default":"primary",children:u?e==="ar"?"إلغاء":"Cancel":e==="ar"?"تعديل":"Edit"})]}),l.jsxs(W,{form:i,onFinish:p,layout:"vertical",disabled:!u,children:[l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"firstName",label:e==="ar"?"الاسم الأول":"First Name",rules:[{required:!0}],children:l.jsx(ye,{size:"large",prefix:l.jsx(tt,{})})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"lastName",label:e==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0}],children:l.jsx(ye,{size:"large",prefix:l.jsx(tt,{})})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,type:"email"}],children:l.jsx(ye,{size:"large",prefix:l.jsx(vi,{}),disabled:!0})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:l.jsx(ye,{size:"large",prefix:l.jsx(Ma,{})})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:8,children:l.jsx(W.Item,{name:"dateOfBirth",label:e==="ar"?"تاريخ الميلاد":"Date of Birth",children:l.jsx(ho,{size:"large",className:"w-full"})})}),l.jsx(me,{xs:24,sm:8,children:l.jsx(W.Item,{name:"gender",label:e==="ar"?"الجنس":"Gender",children:l.jsxs(be,{size:"large",children:[l.jsx(xv,{value:"MALE",children:e==="ar"?"ذكر":"Male"}),l.jsx(xv,{value:"FEMALE",children:e==="ar"?"أنثى":"Female"}),l.jsx(xv,{value:"OTHER",children:e==="ar"?"أخرى":"Other"})]})})})]}),l.jsx(cn,{children:e==="ar"?"المعلومات المهنية":"Professional Information"}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"academicDegree",label:e==="ar"?"الدرجة العلمية":"Academic Degree",rules:[{required:!0}],children:l.jsx(ye,{size:"large",prefix:l.jsx(Lc,{})})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"specialization",label:e==="ar"?"التخصص":"Specialization",rules:[{required:!0}],children:l.jsx(ye,{size:"large"})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"yearsOfExperience",label:e==="ar"?"سنوات الخبرة":"Years of Experience",children:l.jsx(ye,{type:"number",size:"large",min:0})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"pricePerSession",label:e==="ar"?"سعر الجلسة (ريال)":"Price Per Session (SAR)",rules:[{required:!0}],children:l.jsx(ye,{type:"number",size:"large",prefix:l.jsx(Yn,{}),min:0})})})]}),l.jsx(W.Item,{name:"bio",label:e==="ar"?"السيرة الذاتية":"Bio",children:l.jsx(ed,{rows:4,size:"large"})}),l.jsx(W.Item,{name:"expertiseFields",label:e==="ar"?"مجالات الخبرة (مفصولة بفواصل)":"Expertise Fields (comma-separated)",children:l.jsx(ed,{rows:3,size:"large",placeholder:e==="ar"?"مثال: اقتصاد، تحليل مالي، دراسات جدوى":"Example: Economics, Financial Analysis, Feasibility Studies"})}),l.jsx(cn,{children:e==="ar"?"التعليم والشهادات":"Education & Certifications"}),l.jsx(W.Item,{name:"education",label:e==="ar"?"التعليم (مفصول بفواصل)":"Education (comma-separated)",children:l.jsx(ed,{rows:2,size:"large",placeholder:e==="ar"?"مثال: بكالوريوس اقتصاد، ماجستير إدارة أعمال":"Example: BSc Economics, MBA"})}),l.jsx(W.Item,{name:"certifications",label:e==="ar"?"الشهادات (مفصولة بفواصل)":"Certifications (comma-separated)",children:l.jsx(ed,{rows:2,size:"large",placeholder:e==="ar"?"مثال: شهادة محلل مالي معتمد":"Example: Certified Financial Analyst"})}),l.jsx(W.Item,{name:"languages",label:e==="ar"?"اللغات (مفصولة بفواصل)":"Languages (comma-separated)",children:l.jsx(ye,{size:"large",placeholder:e==="ar"?"مثال: العربية، الإنجليزية":"Example: Arabic, English"})}),l.jsx(cn,{children:e==="ar"?"العنوان":"Address"}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"city",label:e==="ar"?"المدينة":"City",children:l.jsx(ye,{size:"large",prefix:l.jsx(_y,{})})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"country",label:e==="ar"?"الدولة":"Country",children:l.jsx(ye,{size:"large",prefix:l.jsx(Ra,{})})})})]}),l.jsx(W.Item,{name:"address",label:e==="ar"?"العنوان الكامل":"Full Address",children:l.jsx(ed,{rows:3,size:"large"})}),l.jsx(W.Item,{name:"postalCode",label:e==="ar"?"الرمز البريدي":"Postal Code",children:l.jsx(ye,{size:"large"})}),l.jsx(cn,{children:e==="ar"?"روابط التواصل":"Social Links"}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"website",label:e==="ar"?"الموقع الإلكتروني":"Website",children:l.jsx(ye,{size:"large",prefix:l.jsx(Ra,{}),placeholder:"https://"})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"linkedin",label:"LinkedIn",children:l.jsx(ye,{size:"large",placeholder:"linkedin.com/in/..."})})})]}),l.jsx(W.Item,{name:"twitter",label:"Twitter",children:l.jsx(ye,{size:"large",placeholder:"@username"})}),l.jsx(cn,{children:e==="ar"?"الحالة":"Status"}),l.jsx(W.Item,{name:"isAvailable",label:e==="ar"?"متاح للاستشارات":"Available for Consultations",valuePropName:"checked",children:l.jsx(pi,{checkedChildren:e==="ar"?"متاح":"Available",unCheckedChildren:e==="ar"?"غير متاح":"Unavailable"})}),u&&l.jsx(W.Item,{className:"mt-6",children:l.jsx(J,{type:"primary",htmlType:"submit",size:"large",icon:l.jsx(ja,{}),loading:a,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"حفظ التغييرات":"Save Changes"})})]}),l.jsx(cn,{children:e==="ar"?"تغيير كلمة المرور":"Change Password"}),l.jsxs(W,{onFinish:y,layout:"vertical",children:[l.jsx(W.Item,{name:"currentPassword",label:e==="ar"?"كلمة المرور الحالية":"Current Password",rules:[{required:!0}],children:l.jsx(ye.Password,{size:"large",prefix:l.jsx(Nn,{})})}),l.jsx(W.Item,{name:"newPassword",label:e==="ar"?"كلمة المرور الجديدة":"New Password",rules:[{required:!0,min:8}],children:l.jsx(ye.Password,{size:"large",prefix:l.jsx(Nn,{})})}),l.jsx(W.Item,{name:"confirmPassword",label:e==="ar"?"تأكيد كلمة المرور":"Confirm Password",dependencies:["newPassword"],rules:[{required:!0},({getFieldValue:m})=>({validator(v,x){return!x||m("newPassword")===x?Promise.resolve():Promise.reject(new Error(e==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match"))}})],children:l.jsx(ye.Password,{size:"large",prefix:l.jsx(Nn,{})})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",size:"large",loading:a,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",block:!0,children:e==="ar"?"تغيير كلمة المرور":"Change Password"})})]})]})})]})]})]})},tG=()=>{const{t:n,language:e}=Ze(),{user:t}=Xn(),[r]=W.useForm(),[i,a]=M.useState(!1),[s,o]=M.useState(!1),[c,u]=M.useState([]),[d,h]=M.useState(0),[f,p]=M.useState(0),[y,g]=M.useState(0);M.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0);const b=await vs.getEarnings();u(b.earnings||[]),h(b.availableBalance||0),p(b.totalEarnings||0),g(b.pendingEarnings||0)}catch(b){console.error("Error fetching earnings:",b),se.error(b.message||(e==="ar"?"فشل تحميل الأرباح":"Failed to load earnings"))}finally{a(!1)}},v=async b=>{try{a(!0),await vs.requestWithdrawal({amount:b.amount,bankName:b.bankName,accountNumber:b.accountNumber,iban:b.iban}),se.success(e==="ar"?"تم إرسال طلب السحب بنجاح":"Withdrawal request submitted successfully"),o(!1),r.resetFields(),m()}catch(A){se.error(A.message||(e==="ar"?"فشل إرسال طلب السحب":"Failed to submit withdrawal request"))}finally{a(!1)}},x=[{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client"},{title:e==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:b=>`${b} ${e==="ar"?"ريال":"SAR"}`},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:b=>{const A={paid:"green",pending:"orange"},w={paid:e==="ar"?"مدفوع":"Paid",pending:e==="ar"?"قيد الانتظار":"Pending"};return l.jsx($e,{color:A[b],children:w[b]})}}];return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"mb-8 relative z-10",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الأرباح":"Earnings"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"عرض تفاصيل أرباحك وإحصائياتك المالية":"View your earnings details and financial statistics"})]}),l.jsxs(Re,{gutter:[16,16],className:"mb-8 relative z-10",children:[l.jsx(me,{xs:24,sm:8,children:l.jsx(Ee,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"إجمالي الأرباح":"Total Earnings",value:f||0,prefix:l.jsx(Yn,{}),suffix:e==="ar"?"ريال":"SAR",valueStyle:{color:"#14b8a6"}})})}),l.jsx(me,{xs:24,sm:8,children:l.jsx(Ee,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"المتاح للسحب":"Available for Withdrawal",value:d||0,prefix:l.jsx(Zt,{}),suffix:e==="ar"?"ريال":"SAR",valueStyle:{color:"#7a8c66"}})})}),l.jsx(me,{xs:24,sm:8,children:l.jsx(Ee,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"قيد الانتظار":"Pending",value:y||0,prefix:l.jsx($i,{}),suffix:e==="ar"?"ريال":"SAR",valueStyle:{color:"#faad14"}})})})]}),l.jsx(Ee,{title:e==="ar"?"سجل الأرباح":"Earnings History",extra:l.jsxs(ze,{children:[l.jsx(J,{icon:l.jsx(Mr,{}),onClick:()=>console.log("Export PDF"),children:e==="ar"?"تصدير PDF":"Export PDF"}),l.jsx(J,{icon:l.jsx(Mr,{}),onClick:()=>console.log("Export Excel"),children:e==="ar"?"تصدير Excel":"Export Excel"}),l.jsx(J,{type:"primary",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>o(!0),disabled:d<=0,children:e==="ar"?"طلب سحب":"Request Payout"})]}),children:l.jsx(Pt,{columns:x,dataSource:c,rowKey:"id",loading:i,pagination:{pageSize:10}})}),l.jsx(At,{title:e==="ar"?"طلب سحب":"Request Withdrawal",open:s,onCancel:()=>{o(!1),r.resetFields()},footer:null,children:l.jsxs(W,{form:r,layout:"vertical",onFinish:v,children:[l.jsx(W.Item,{name:"amount",label:e==="ar"?"المبلغ":"Amount",rules:[{required:!0,message:e==="ar"?"يرجى إدخال المبلغ":"Please enter amount"},{validator:(b,A)=>A&&parseFloat(A)>d?Promise.reject(new Error(e==="ar"?`المبلغ المتاح: ${d} ريال`:`Available balance: ${d} SAR`)):A&&parseFloat(A)<=0?Promise.reject(new Error(e==="ar"?"المبلغ يجب أن يكون أكبر من صفر":"Amount must be greater than zero")):Promise.resolve()}],children:l.jsx(ye,{type:"number",prefix:l.jsx(Yn,{}),suffix:e==="ar"?"ريال":"SAR",placeholder:e==="ar"?"أدخل المبلغ":"Enter amount"})}),l.jsx(W.Item,{name:"bankName",label:e==="ar"?"اسم البنك":"Bank Name",rules:[{required:!0,message:e==="ar"?"يرجى إدخال اسم البنك":"Please enter bank name"}],children:l.jsx(ye,{placeholder:e==="ar"?"اسم البنك":"Bank Name"})}),l.jsx(W.Item,{name:"accountNumber",label:e==="ar"?"رقم الحساب":"Account Number",rules:[{required:!0,message:e==="ar"?"يرجى إدخال رقم الحساب":"Please enter account number"}],children:l.jsx(ye,{placeholder:e==="ar"?"رقم الحساب":"Account Number"})}),l.jsx(W.Item,{name:"iban",label:"IBAN",rules:[{required:!0,message:e==="ar"?"يرجى إدخال IBAN":"Please enter IBAN"}],children:l.jsx(ye,{placeholder:"IBAN"})}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{onClick:()=>{o(!1),r.resetFields()},children:e==="ar"?"إلغاء":"Cancel"}),l.jsx(J,{type:"primary",htmlType:"submit",loading:i,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"إرسال الطلب":"Submit Request"})]})})]})})]})},{TextArea:xT}=ye,{Option:Co}=be,nG=()=>{const{language:n}=Ze(),[e,t]=M.useState([]),[r,i]=M.useState(!1),[a,s]=M.useState(!1),[o,c]=M.useState(!1),[u,d]=M.useState(null),[h,f]=M.useState(!1),[p]=W.useForm(),[y]=W.useForm();M.useEffect(()=>{g()},[]);const g=async()=>{try{i(!0);const w=await Rr.getMyTickets();t(w.tickets||[])}catch{se.error(n==="ar"?"فشل تحميل التذاكر":"Failed to load tickets")}finally{i(!1)}},m=async w=>{try{await Rr.createTicket(w),se.success(n==="ar"?"تم إنشاء التذكرة بنجاح":"Ticket created successfully"),s(!1),p.resetFields(),g()}catch{se.error(n==="ar"?"فشل إنشاء التذكرة":"Failed to create ticket")}},v=async w=>{try{if(await Rr.addComment(u.id,w.content),se.success(n==="ar"?"تم إضافة التعليق":"Comment added"),f(!1),y.resetFields(),g(),o){const S=await Rr.getTicketById(u.id);d(S.ticket)}}catch{se.error(n==="ar"?"فشل إضافة التعليق":"Failed to add comment")}},x=w=>({OPEN:"blue",IN_PROGRESS:"orange",RESOLVED:"green",CLOSED:"default"})[w]||"default",b=w=>({LOW:"default",MEDIUM:"blue",HIGH:"orange",URGENT:"red"})[w]||"default",A=[{title:n==="ar"?"رقم التذكرة":"Ticket Number",dataIndex:"ticketNumber",key:"ticketNumber"},{title:n==="ar"?"الموضوع":"Subject",dataIndex:"subject",key:"subject"},{title:n==="ar"?"الفئة":"Category",dataIndex:"category",key:"category",render:w=>w||"-"},{title:n==="ar"?"الأولوية":"Priority",dataIndex:"priority",key:"priority",render:w=>l.jsx($e,{color:b(w),children:w})},{title:n==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:w=>l.jsx($e,{color:x(w),children:w})},{title:n==="ar"?"تاريخ الإنشاء":"Created At",dataIndex:"createdAt",key:"createdAt",render:w=>qe(w).format("YYYY-MM-DD HH:mm")},{title:n==="ar"?"الإجراءات":"Actions",key:"actions",render:(w,S)=>l.jsx(ze,{children:l.jsx(J,{icon:l.jsx(Wn,{}),size:"small",onClick:()=>{d(S),c(!0)},children:n==="ar"?"عرض":"View"})})}];return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:n==="ar"?"تذاكر الدعم الفني":"Support Tickets"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:n==="ar"?"إنشاء ومتابعة تذاكر الدعم الفني":"Create and track support tickets"})]}),l.jsx(J,{type:"primary",size:"large",icon:l.jsx(gr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-professional",onClick:()=>s(!0),children:n==="ar"?"إنشاء تذكرة جديدة":"Create New Ticket"})]}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx(Pt,{columns:A,dataSource:e,loading:r,rowKey:"id",locale:{emptyText:l.jsx(jn,{description:n==="ar"?"لا توجد تذاكر":"No tickets"})}})}),l.jsx(At,{title:n==="ar"?"إنشاء تذكرة جديدة":"Create New Ticket",open:a,onCancel:()=>{s(!1),p.resetFields()},footer:null,width:600,className:"modern-modal",children:l.jsxs(W,{form:p,layout:"vertical",onFinish:m,children:[l.jsx(W.Item,{name:"subject",label:n==="ar"?"الموضوع":"Subject",rules:[{required:!0,message:n==="ar"?"الرجاء إدخال الموضوع":"Please enter subject"}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"category",label:n==="ar"?"الفئة":"Category",children:l.jsxs(be,{children:[l.jsx(Co,{value:"technical",children:n==="ar"?"تقني":"Technical"}),l.jsx(Co,{value:"billing",children:n==="ar"?"مالي":"Billing"}),l.jsx(Co,{value:"general",children:n==="ar"?"عام":"General"})]})}),l.jsx(W.Item,{name:"priority",label:n==="ar"?"الأولوية":"Priority",initialValue:"MEDIUM",children:l.jsxs(be,{children:[l.jsx(Co,{value:"LOW",children:n==="ar"?"منخفضة":"Low"}),l.jsx(Co,{value:"MEDIUM",children:n==="ar"?"متوسطة":"Medium"}),l.jsx(Co,{value:"HIGH",children:n==="ar"?"عالية":"High"}),l.jsx(Co,{value:"URGENT",children:n==="ar"?"عاجلة":"Urgent"})]})}),l.jsx(W.Item,{name:"description",label:n==="ar"?"الوصف":"Description",rules:[{required:!0,message:n==="ar"?"الرجاء إدخال الوصف":"Please enter description"}],children:l.jsx(xT,{rows:6})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",block:!0,children:n==="ar"?"إنشاء التذكرة":"Create Ticket"})})]})}),l.jsx(At,{title:n==="ar"?"تفاصيل التذكرة":"Ticket Details",open:o,onCancel:()=>{c(!1),d(null)},footer:null,width:800,className:"modern-modal",children:u&&l.jsxs("div",{children:[l.jsxs(Je,{bordered:!0,column:2,children:[l.jsx(Je.Item,{label:n==="ar"?"رقم التذكرة":"Ticket Number",children:u.ticketNumber}),l.jsx(Je.Item,{label:n==="ar"?"الحالة":"Status",children:l.jsx($e,{color:x(u.status),children:u.status})}),l.jsx(Je.Item,{label:n==="ar"?"الأولوية":"Priority",children:l.jsx($e,{color:b(u.priority),children:u.priority})}),l.jsx(Je.Item,{label:n==="ar"?"الفئة":"Category",children:u.category||"-"}),l.jsx(Je.Item,{label:n==="ar"?"الموضوع":"Subject",span:2,children:u.subject}),l.jsx(Je.Item,{label:n==="ar"?"الوصف":"Description",span:2,children:u.description})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:n==="ar"?"التعليقات":"Comments"}),l.jsx(J,{type:"primary",icon:l.jsx(kn,{}),onClick:()=>f(!0),children:n==="ar"?"إضافة تعليق":"Add Comment"})]}),l.jsx(RE,{items:u.comments?.map(w=>({key:w.id,children:l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("span",{className:"font-semibold",children:w.user?.email}),l.jsx("span",{className:"text-gray-500 text-sm",children:qe(w.createdAt).format("YYYY-MM-DD HH:mm")})]}),l.jsx("p",{children:w.comment||w.content})]})}))||[]}),(!u.comments||u.comments.length===0)&&l.jsx(jn,{description:n==="ar"?"لا توجد تعليقات":"No comments"})]})]})}),l.jsx(At,{title:n==="ar"?"إضافة تعليق":"Add Comment",open:h,onCancel:()=>{f(!1),y.resetFields()},footer:null,className:"modern-modal",children:l.jsxs(W,{form:y,layout:"vertical",onFinish:v,children:[l.jsx(W.Item,{name:"content",label:n==="ar"?"التعليق":"Comment",rules:[{required:!0,message:n==="ar"?"الرجاء إدخال التعليق":"Please enter comment"}],children:l.jsx(xT,{rows:4})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",block:!0,children:n==="ar"?"إضافة التعليق":"Add Comment"})})]})})]})},{TextArea:rG}=ye,bv=()=>{const{sessionId:n,bookingId:e}=qa(),t=e||n,r=!!n&&!e,{t:i,language:a}=Ze(),{user:s}=Xn(),o=Rt(),[c,u]=M.useState([]),[d,h]=M.useState(""),[f,p]=M.useState(!0),[y,g]=M.useState(!1),[m,v]=M.useState([]),[x,b]=M.useState(!1),[A,w]=M.useState(null),[S,E]=M.useState(null),[_,D]=M.useState(null),[C,k]=M.useState([]),[T,N]=M.useState([]),[j,R]=M.useState(!1),[P,F]=M.useState(!1),[q,$]=M.useState(!1),[B,I]=M.useState(null),[L,U]=M.useState(!1),G=M.useRef(null),H=M.useRef(!1),V=M.useRef(null),K=M.useRef(!1),ae=M.useRef(null),te=M.useRef(new Set),{isRecording:de,recordingTime:xe,audioBlob:ve,audioUrl:Te,startRecording:O,stopRecording:ie,cancelRecording:re,formatTime:Z}=zE();M.useEffect(()=>{s&&s.role!=="CONSULTANT"&&(se.error(a==="ar"?"غير مصرح لك بالوصول إلى هذه الصفحة":"You are not authorized to access this page"),s.role==="CLIENT"?o("/client",{replace:!0}):["ADMIN","SUPER_ADMIN"].includes(s.role)?o("/admin",{replace:!0}):o("/",{replace:!0}))},[s,o,a]),M.useEffect(()=>{if(V.current!==t&&(H.current=!1,K.current=!1,ae.current=null,$(!1),V.current=t),F(!1),t&&s){if(te.current.has(t)){H.current||(H.current=!0,$(!0),p(!1),K.current=!1,ae.current=null,setTimeout(()=>{o("/consultant/chat",{replace:!0})},0));return}const ge=ae.current&&ae.current!==t;if(H.current||q||ge){p(!1);return}ae.current!==t&&(ae.current=t,K.current=!0,X())}else t||(p(!1),F(!1),$(!1),H.current=!1,K.current=!1,ae.current=null,Ne(),Pe())},[t,s]),M.useEffect(()=>{if(q)return;if(A?.id||t&&r&&P){ue();const Ie=setInterval(ue,5e3);return()=>clearInterval(Ie)}},[A?.id,t,r,P,q]),M.useEffect(()=>{if(!t){const ge=setInterval(()=>{Pe()},1e4);return()=>clearInterval(ge)}},[t]),M.useEffect(()=>{z()},[c]);const z=()=>{G.current?.scrollIntoView({behavior:"smooth"})},X=async()=>{if(te.current.has(t)){H.current||(H.current=!0,$(!0),p(!1),K.current=!1,ae.current=null,setTimeout(()=>{o("/consultant/chat",{replace:!0})},0));return}if(H.current||q){K.current=!1,ae.current=null;return}if(!t||!s){p(!1),K.current=!1,ae.current=null;return}if(!(ae.current&&ae.current!==t)){K.current=!0,ae.current=t,K.current=!0;try{let ge=r;if(!r)try{const Ce=(await pn.getConversations()).conversations?.find(Ue=>Ue.sessionId===t||Ue.isDirect&&Ue.id===t);Ce&&(Ce.isDirect||Ce.sessionId===t)&&(ge=!0)}catch(Se){console.warn("Could not fetch conversations to verify session type:",Se)}if(ge){try{const Ce=(await pn.getConversations()).conversations?.find(Ue=>Ue.sessionId===t);if(Ce)w({id:t,status:Ce.status||"IN_PROGRESS",sessionType:"chat"}),E(null),I(Ce),F(!0);else try{await pn.getMessages(t),w({id:t,status:"IN_PROGRESS",sessionType:"chat"}),E(null),F(!0)}catch(Ue){if(Ue.message?.includes("not found")||Ue.message?.includes("404")||Ue.message?.includes("Access denied")||Ue.message?.includes("403")){F(!1),$(!0),se.error(a==="ar"?"الجلسة غير موجودة أو غير مصرح لك بالوصول":"Session not found or access denied"),o("/consultant/chat",{replace:!0});return}else throw Ue}}catch(Se){console.error("Error fetching direct session:",Se),!Se.message?.includes("not found")&&!Se.message?.includes("404")&&!Se.message?.includes("Access denied")&&!Se.message?.includes("403")&&se.error(a==="ar"?"فشل تحميل الجلسة":"Failed to load session"),o("/consultant/chat",{replace:!0})}finally{p(!1),K.current=!1}return}let Ie=!1;try{const Ce=(await pn.getConversations()).conversations?.find(Ue=>Ue.sessionId===t||Ue.isDirect&&Ue.id===t);if(Ce&&(Ce.isDirect||Ce.sessionId===t)){Ie=!0,w({id:t,status:Ce.status||"IN_PROGRESS",sessionType:"chat"}),E(null),I(Ce),F(!0),p(!1),K.current=!1,ae.current=null;return}}catch{}let he;try{he=(await Ir.getBookingById(t)).booking}catch(Se){if(Se.status===404||Se.response?.status===404||Se.message?.toLowerCase().includes("not found")||Se.message?.includes("404")){if(te.current.add(t),H.current){p(!1),K.current=!1,ae.current=null;return}H.current=!0,$(!0),p(!1),K.current=!1,ae.current=null,o("/consultant/chat",{replace:!0});return}throw Se}if(s?.role==="CONSULTANT"&&he.consultant?.userId!==s.id){if(H.current){p(!1),K.current=!1;return}H.current=!0,se.error(a==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),$(!0),p(!1),K.current=!1,o("/consultant/chat",{replace:!0});return}E(he);try{const Se=await fn.getSessionByBooking(t);if(w(Se.session),F(!0),Se.session?.roomId){const Ce=await fn.getVideoRoom(t);D(Ce.room)}}catch{console.log("Session not found yet, will be created when starting"),w(null),F(!0)}K.current=!1,ae.current=null,te.current.delete(t)}catch(ge){const Ie=ge.message||ge.response?.data?.error||(a==="ar"?"فشل تحميل الجلسة":"Failed to load session"),he=ge.message?.toLowerCase().includes("not found")||ge.message?.includes("404")||ge.response?.status===404,Se=ge.message?.includes("Access denied")||ge.message?.includes("403")||ge.response?.status===403;if(he){if(H.current){p(!1),K.current=!1;return}H.current=!0,$(!0),p(!1),K.current=!1,o("/consultant/chat",{replace:!0});return}if(Se){if(H.current){p(!1),K.current=!1;return}H.current=!0,se.error(a==="ar"?"غير مصرح لك بالوصول إلى هذا الحجز":"You are not authorized to access this booking"),$(!0),p(!1),K.current=!1,o("/consultant/chat",{replace:!0});return}console.error("Error fetching session:",ge),se.error(Ie),p(!1)}finally{K.current=!1,ae.current=null,!q&&!H.current&&p(!1)}}},ue=async()=>{if(!(q||!A?.id&&!(t&&r&&P)))try{const ge=A?.id||t;if(!ge)return;const Ie=await pn.getMessages(ge);if(u(Ie.messages||[]),!P&&Ie.messages&&F(!0),Ie.messages&&Ie.messages.length>0)try{await pn.markAsRead(ge)}catch(he){console.error("Error marking messages as read:",he)}setTimeout(()=>{G.current?.scrollIntoView({behavior:"smooth"})},100)}catch(ge){const Ie=ge.message?.includes("Access denied")||ge.message?.includes("403"),he=ge.message?.includes("not found")||ge.message?.includes("404");if(Ie){$(!0),u([]);return}if(he){u([]);return}console.error("Error fetching messages:",ge),u([])}},le=async()=>{const ge=A?.id||(r?t:null);if(!(!d.trim()&&m.length===0||!ge)){if(!A?.id&&!r&&t)try{const Ie=await fn.generateVideoRoom(t),he=await fn.startSession(t,Ie.room?.roomId);w(he.session),D(Ie.room)}catch(Ie){se.error(Ie.message||(a==="ar"?"فشل بدء الجلسة":"Failed to start session"));return}try{g(!0);let Ie="text";if(m.length>0){const Ce=m.some(et=>/\.(jpg|jpeg|png|gif|webp)$/i.test(et)),Ue=m.some(et=>/\.(mp3|wav|ogg|m4a|webm)$/i.test(et)),Be=m.some(et=>/\.(mp4|webm|ogg)$/i.test(et));Ce?Ie="image":Ue?Ie="audio":Be?Ie="video":Ie="file"}const he=A?.id||ge,Se={content:d||(m.length>0?"📎 ملف مرفق":""),messageType:Ie,attachments:m.length>0?m:[]};if(r&&B){let Ce=null;B.clientId&&B.clientId!==s?.id?Ce=B.clientId:B.consultantUserId&&B.consultantUserId!==s?.id&&(Ce=B.consultantUserId),Ce&&(Se.receiverId=Ce)}await pn.sendMessage(he,Se),h(""),v([]),r&&!A?.id&&w({id:he,status:"IN_PROGRESS",sessionType:"chat"}),ue()}catch(Ie){se.error(Ie.message||(a==="ar"?"فشل إرسال الرسالة":"Failed to send message"))}finally{g(!1)}}},ee=async()=>{de?ie():await O()},ne=async()=>{if(!ve)return;const ge=A?.id||(r?t:null);if(!ge){se.error(a==="ar"?"لا توجد جلسة نشطة":"No active session"),re();return}try{g(!0);const Ie=new File([ve],`voice-${Date.now()}.webm`,{type:"audio/webm"}),he=new FormData;he.append("file",Ie),he.append("ownerType","MESSAGE"),he.append("ownerId",ge);const Se=await Zr.uploadFile(he);if(!Se||!Se.file||!Se.file.fileUrl)throw new Error("Invalid file response from server");const Ce=Se.file.fileUrl,Ue=A?.id||ge,Be={content:a==="ar"?"رسالة صوتية":"Voice message",messageType:"audio",attachments:[Ce]};if(r&&B){let et=null;B.clientId&&B.clientId!==s?.id?et=B.clientId:B.consultantUserId&&B.consultantUserId!==s?.id&&(et=B.consultantUserId),et&&(Be.receiverId=et)}await pn.sendMessage(Ue,Be),re(),ue(),se.success(a==="ar"?"تم إرسال الرسالة الصوتية":"Voice message sent")}catch(Ie){console.error("Error sending voice message:",Ie),se.error(Ie.message||(a==="ar"?"فشل إرسال الرسالة الصوتية":"Failed to send voice message"))}finally{g(!1)}},oe=async ge=>{const Ie=A?.id||(r?t:null);if(!Ie)return se.error(a==="ar"?"لا توجد جلسة نشطة":"No active session"),!1;try{const he=new FormData;he.append("file",ge),he.append("ownerType","MESSAGE"),he.append("ownerId",Ie);const Se=await Zr.uploadFile(he);if(!Se||!Se.file||!Se.file.fileUrl)throw new Error("Invalid file response from server");const Ce=[...m,Se.file.fileUrl];v(Ce),se.success(a==="ar"?"تم رفع الملف":"File uploaded")}catch(he){console.error("File upload error:",he),se.error(he.message||(a==="ar"?"فشل رفع الملف":"Failed to upload file"))}return!1},pe=async()=>{if(t)try{p(!0);let ge=_;ge||(ge=(await fn.generateVideoRoom(t)).room,D(ge),se.success(a==="ar"?"تم إنشاء غرفة الفيديو":"Video room created")),await fn.startSession(t,ge?.roomId),se.success(a==="ar"?"تم بدء الجلسة":"Session started"),ge?.joinUrl?window.open(ge.joinUrl,"JitsiMeet","width=1200,height=800,menubar=no,toolbar=no,location=no,status=no,resizable=yes,scrollbars=yes")?(U(!0),se.success(a==="ar"?"تم فتح المكالمة في نافذة جديدة":"Video call opened in new window")):(U(!0),se.info(a==="ar"?'تم فتح المكالمة في النافذة المنبثقة. إذا لم تفتح، استخدم زر "فتح في نافذة جديدة"':'Video call opened. If popup was blocked, use "Open in New Window" button')):se.warning(a==="ar"?"لم يتم العثور على رابط المكالمة":"Video call URL not found"),X()}catch(ge){console.error("Video call error:",ge),se.error(ge.message||(a==="ar"?"فشل بدء المكالمة":"Failed to start video call"))}finally{p(!1)}},Ae=async()=>{if(t)try{await fn.endSession(t),se.success(a==="ar"?"تم إنهاء الجلسة":"Session ended successfully"),o("/consultant/chat")}catch(ge){se.error(ge.message||(a==="ar"?"فشل إنهاء الجلسة":"Failed to end session"))}},Ne=async()=>{try{R(!0);const ge=await Ir.getBookings({status:"CONFIRMED"});k(ge.bookings||[])}catch(ge){console.error("Error fetching bookings:",ge)}finally{R(!1)}},Pe=async()=>{try{const ge=await pn.getConversations();N(ge.conversations||[])}catch(ge){console.error("Error fetching conversations:",ge)}},ot=ge=>{o(`/consultant/chat/${ge}`)};if(f)return l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx(kt,{size:"large"})});if(!t)return l.jsxs("div",{className:"flex h-[calc(100vh-200px)] gap-4",children:[l.jsx("div",{className:"w-1/3 min-w-[300px]",children:l.jsx(Ee,{title:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kn,{}),l.jsx("span",{children:a==="ar"?"المحادثات والحجوزات":"Conversations & Bookings"})]}),className:"h-full",styles:{body:{padding:0,height:"calc(100% - 57px)",overflow:"auto"}},children:j?l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsx(kt,{size:"large"})}):T.length===0&&C.length===0?l.jsx(jn,{description:a==="ar"?"لا توجد محادثات أو حجوزات":"No conversations or bookings",className:"py-12"}):l.jsxs("div",{children:[T.length>0&&l.jsxs("div",{className:"p-4 border-b",children:[l.jsx("h3",{className:"font-semibold text-sm text-gray-600 mb-2",children:a==="ar"?"المحادثات النشطة":"Active Conversations"}),l.jsx(qt,{dataSource:T,renderItem:ge=>{const Ie=ge.unreadCount||0;return l.jsx(qt.Item,{className:"cursor-pointer hover:bg-gray-50 px-4 py-3 border-b",onClick:()=>ot(ge.bookingId||ge.sessionId),children:l.jsx(qt.Item.Meta,{avatar:l.jsx(gs,{count:Ie,size:"small",children:l.jsx(Mt,{icon:l.jsx(tt,{})})}),title:l.jsx("span",{className:"font-medium",children:ge.name}),description:l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 truncate",children:ge.lastMessage||(a==="ar"?"لا توجد رسائل":"No messages")}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:qe(ge.lastMessageTime).fromNow()})]})})})}})]}),C.length>0&&l.jsxs("div",{className:"p-4",children:[l.jsx("h3",{className:"font-semibold text-sm text-gray-600 mb-2",children:a==="ar"?"الحجوزات المتاحة":"Available Bookings"}),l.jsx(qt,{dataSource:C,renderItem:ge=>{const Ie=T.some(he=>he.bookingId===ge.id);return l.jsx(qt.Item,{className:`cursor-pointer hover:bg-gray-50 px-4 py-3 border-b ${Ie?"opacity-75":""}`,onClick:()=>ot(ge.id),children:l.jsx(qt.Item.Meta,{avatar:l.jsx(Mt,{icon:l.jsx(tt,{})}),title:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:ge.client?`${ge.client.firstName} ${ge.client.lastName}`:a==="ar"?"عميل":"Client"}),l.jsx($e,{color:ge.status==="CONFIRMED"?"green":"blue",size:"small",children:ge.status})]}),description:l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500",children:ge.service?a==="ar"?ge.service.titleAr:ge.service.title:a==="ar"?"استشارة":"Consultation"}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:qe(ge.scheduledAt).format("YYYY-MM-DD HH:mm")})]})})})}})]})]})})}),l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsxs("div",{className:"text-center py-12 px-6",children:[l.jsx("div",{className:"mb-6",children:l.jsx(kn,{className:"text-7xl text-gray-300"})}),l.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700",children:a==="ar"?"اختر محادثة للبدء":"Select a Conversation to Start"}),l.jsx("p",{className:"text-gray-500 max-w-md mx-auto text-base",children:a==="ar"?"اختر محادثة من القائمة الجانبية للبدء في الدردشة مع العميل":"Select a conversation from the sidebar to start chatting with the client"})]})})]});const Le=S?.client;return!S&&t&&!r&&!P&&f?l.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)] dashboard-bg",children:l.jsxs("div",{className:"text-center",children:[l.jsx(kt,{size:"large"}),l.jsx("p",{className:"mt-4 text-gray-500",children:a==="ar"?"جاري التحميل...":"Loading..."})]})}):r&&!P&&!q&&f?l.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)] dashboard-bg",children:l.jsxs("div",{className:"text-center",children:[l.jsx(kt,{size:"large"}),l.jsx("p",{className:"mt-4 text-gray-500",children:a==="ar"?"جاري التحميل...":"Loading..."})]})}):t&&!S&&!r&&!f&&!P?l.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)] dashboard-bg",children:l.jsxs("div",{className:"text-center",children:[l.jsx(jn,{description:a==="ar"?"لم يتم العثور على المحادثة":"Conversation not found"}),l.jsx(J,{type:"primary",onClick:()=>o("/consultant/chat"),className:"mt-4",children:a==="ar"?"العودة إلى المحادثات":"Back to Conversations"})]})}):r&&!P&&!f&&!q?l.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)] dashboard-bg",children:l.jsxs("div",{className:"text-center",children:[l.jsx(jn,{description:a==="ar"?"لم يتم العثور على المحادثة":"Conversation not found"}),l.jsx(J,{type:"primary",onClick:()=>o("/consultant/chat"),className:"mt-4",children:a==="ar"?"العودة إلى المحادثات":"Back to Conversations"})]})}):l.jsxs("div",{className:"flex h-[calc(100vh-64px)] gap-4 dashboard-bg relative",style:{margin:"-12px -12px 0 -12px",width:"calc(100% + 24px)"},children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/20 to-turquoise-100/20 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/20 to-olive-green-100/20 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"w-1/3 min-w-[300px] max-w-[400px] glass-card border-r border-gray-200/50 flex flex-col shadow-professional-lg relative z-10",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-gray-200/50 backdrop-blur-sm flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kn,{className:"text-olive-green-600"}),l.jsx("span",{className:"font-semibold text-gray-900",children:a==="ar"?"المحادثات":"Conversations"})]}),l.jsx(J,{type:"text",size:"small",onClick:()=>o("/consultant/chat"),className:"text-gray-500 hover:text-gray-700",children:a==="ar"?"عرض الكل":"View All"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:j?l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsx(kt,{size:"small"})}):l.jsx(qt,{className:"px-0",dataSource:[...T.map(ge=>({...ge,type:"conversation"})),...C.filter(ge=>!T.some(Ie=>Ie.bookingId===ge.id)).map(ge=>({...ge,type:"booking"}))],renderItem:ge=>{const Ie=ge.id===t||ge.bookingId===t||ge.id===S?.id,he=ge.unreadCount||0,Se=ge.type==="conversation"?ge.name:ge.client?`${ge.client.firstName} ${ge.client.lastName}`:a==="ar"?"عميل":"Client";return l.jsx(qt.Item,{className:`cursor-pointer px-4 py-3 border-b border-gray-100  ${Ie?"bg-olive-green-50 border-l-4 border-l-olive-green-600":"hover:bg-gray-50"}`,onClick:()=>ot(ge.bookingId||ge.id),children:l.jsx(qt.Item.Meta,{avatar:l.jsx(gs,{count:he>0?he:0,size:"small",offset:[-5,5],showZero:!1,children:l.jsx(Mt,{icon:l.jsx(tt,{}),size:48,className:"shadow-sm"})}),title:l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("span",{className:`font-semibold text-sm ${Ie?"text-olive-green-700":"text-gray-900"}`,children:Se}),ge.status&&l.jsx($e,{color:ge.status==="CONFIRMED"?"green":ge.status==="IN_PROGRESS"?"blue":"default",size:"small",className:"text-xs",children:ge.status})]}),description:l.jsxs("div",{className:"mt-1",children:[l.jsx("p",{className:"text-xs text-gray-600 truncate mb-1",children:ge.lastMessage||(ge.service?a==="ar"?ge.service.titleAr:ge.service.title:a==="ar"?"استشارة":"Consultation")}),l.jsx("p",{className:"text-xs text-gray-400",children:ge.lastMessageTime?qe(ge.lastMessageTime).fromNow():ge.scheduledAt?qe(ge.scheduledAt).format("MMM DD, HH:mm"):""})]})})})}})})]}),l.jsx("div",{className:"flex-1 flex flex-col glass-card overflow-hidden shadow-professional-lg relative z-10",children:(t&&!r&&!S&&!P||r&&!P&&!q)&&f?l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(kt,{size:"large"}),l.jsx("p",{className:"mt-4 text-gray-500",children:a==="ar"?"جاري تحميل المحادثة...":"Loading conversation..."})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"border-b border-gray-200/50 px-4 py-3 flex items-center justify-between shadow-professional z-10 sticky top-0 flex-shrink-0 backdrop-blur-sm",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[l.jsx(Mt,{src:r?B?.avatar:Le?.user?.avatar||Le?.profilePicture,size:40,icon:l.jsx(tt,{}),className:"flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h2",{className:"text-base font-semibold text-gray-900 truncate",children:r?B?.name||B?.clientName||B?.consultantName||(a==="ar"?"المستخدم":"User"):Le?`${Le.firstName} ${Le.lastName}`:a==="ar"?"العميل":"Client"}),l.jsx("p",{className:"text-xs text-gray-500 truncate",children:r?a==="ar"?"محادثة مباشرة":"Direct Message":S?.service?a==="ar"?S.service.titleAr:S.service.title:a==="ar"?"استشارة":"Consultation"})]})]}),l.jsxs(ze,{className:"flex-shrink-0",children:[l.jsx(J,{type:"text",icon:l.jsx(io,{}),className:"text-gray-600 hover:text-gray-900",onClick:pe,disabled:A?.status==="COMPLETED"||r,title:a==="ar"?"مكالمة فيديو":"Video Call"}),A?.status==="IN_PROGRESS"&&!r&&l.jsx(J,{type:"text",danger:!0,onClick:Ae,title:a==="ar"?"إنهاء الجلسة":"End Session",children:a==="ar"?"إنهاء":"End"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 min-h-0",style:{scrollBehavior:"smooth",backgroundImage:"radial-gradient(circle, rgba(122, 140, 102, 0.1) 1px, transparent 1px)",backgroundSize:"20px 20px"},children:l.jsxs("div",{className:"max-w-4xl mx-auto space-y-3",children:[c.length===0?l.jsxs("div",{className:"text-center text-gray-400 py-12",children:[l.jsx("div",{className:"text-4xl mb-2",children:"💬"}),l.jsx("p",{children:a==="ar"?"لا توجد رسائل بعد":"No messages yet"})]}):c.map((ge,Ie)=>{const he=ge.senderId===s?.id,Se=ge.attachments?typeof ge.attachments=="string"?JSON.parse(ge.attachments):ge.attachments:[],Ce=Ie>0?c[Ie-1]:null;!Ce||(Ce.senderId,ge.senderId);const Ue=!Ce||qe(ge.createdAt).diff(qe(Ce.createdAt),"minute")>5;return l.jsxs("div",{className:`flex ${he?"justify-end":"justify-start"} items-end gap-2 ${Ue?"mt-4":""}`,children:[!he&&l.jsx(Mt,{src:r?B?.avatar:Le?.user?.avatar||Le?.profilePicture,size:32,icon:l.jsx(tt,{}),className:"flex-shrink-0"}),l.jsxs("div",{className:`flex flex-col ${he?"items-end":"items-start"} max-w-[70%] md:max-w-[60%]`,children:[Ue&&l.jsx("div",{className:"text-center w-full mb-2",children:l.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:qe(ge.createdAt).format("MMM DD, YYYY HH:mm")})}),l.jsxs("div",{className:`rounded-2xl px-4 py-2 ${he?"bg-[#dcf8c6] text-gray-900 rounded-tr-sm":"bg-white text-gray-900 rounded-tl-sm shadow-sm"}`,children:[Se.length>0&&l.jsx("div",{className:"mb-2 space-y-2",children:Se.map((Be,et)=>{const _t=Be.startsWith("data:image/")||Be.startsWith("data:video/")||Be.startsWith("data:audio/"),un=ge.messageType==="image"||/\.(jpg|jpeg|png|gif|webp)$/i.test(Be)||_t&&Be.startsWith("data:image/"),Nr=ge.messageType==="audio"||/\.(mp3|wav|ogg|m4a|webm)$/i.test(Be)||_t&&Be.startsWith("data:audio/"),Y=ge.messageType==="video"||/\.(mp4|webm)$/i.test(Be)&&ge.messageType!=="audio"||_t&&Be.startsWith("data:video/");if(un)return l.jsx("div",{className:"image-attachment mb-2 -mx-2",children:_t?l.jsx("img",{src:Be,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},onError:Q=>{const ce=Q.target;if(ce){ce.style.display="none";const we=ce.closest(".image-attachment");if(we&&!we.querySelector(".image-error-fallback")){const Oe=document.createElement("div");Oe.className="image-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",Oe.textContent=a==="ar"?"تعذر تحميل الصورة":"Image unavailable",we.appendChild(Oe)}}}}):l.jsx(Sr,{src:Be.startsWith("http")?Be:Be.startsWith("/uploads")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${Be}`:Be.startsWith("/")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${Be}`:`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}/uploads/MESSAGE/${Be.split("/").pop()}`,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},preview:{mask:a==="ar"?"معاينة":"Preview"},onError:Q=>{const ce=Q.target;if(ce){ce.style.display="none";const we=ce.closest(".image-attachment");if(we&&!we.querySelector(".image-error-fallback")){const Oe=document.createElement("div");Oe.className="image-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",Oe.textContent=a==="ar"?"تعذر تحميل الصورة":"Image unavailable",we.appendChild(Oe)}}}},et)},et);if(Nr){const Q=Be.startsWith("http")?Be:Be.startsWith("/uploads")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${Be}`:Be.startsWith("/")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${Be}`:`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}/uploads/MESSAGE/${Be.split("/").pop()}`;return l.jsx("div",{className:"audio-attachment",children:l.jsx(qE,{src:Q,isOwnMessage:he,language:a})},et)}else if(Y){const Q=Be.startsWith("http")?Be:Be.startsWith("/uploads")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${Be}`:Be.startsWith("/")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${Be}`:`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}/uploads/MESSAGE/${Be.split("/").pop()}`;return l.jsx("div",{className:"video-attachment",children:l.jsx("video",{controls:!0,src:Q,className:"w-full max-w-md rounded",onError:ce=>{const we=ce.target;if(we){we.style.display="none";const Oe=we.closest(".video-attachment");if(Oe&&!Oe.querySelector(".video-error-fallback")){const ut=document.createElement("div");ut.className="video-error-fallback text-center p-4 bg-gray-100 rounded text-gray-500 text-sm",ut.textContent=a==="ar"?"تعذر تحميل الفيديو":"Video unavailable",Oe.appendChild(ut)}}}})},et)}else return l.jsxs("div",{className:`file-attachment flex items-center gap-2 p-2 rounded ${he?"bg-white/50":"bg-gray-100"}`,children:[l.jsx(Rc,{className:he?"text-gray-700":"text-blue-600"}),l.jsx("a",{href:Be,download:!0,target:"_blank",rel:"noopener noreferrer",className:`text-sm ${he?"text-gray-700 hover:text-gray-900":"text-blue-600 hover:text-blue-800"}`,children:Be.split("/").pop()})]},et)})}),ge.content&&ge.content.trim()&&!(ge.messageType==="image"&&Se.length>0&&!ge.content.includes("📎"))&&l.jsx("p",{className:`text-sm ${Se.length>0?"mt-2":""} whitespace-pre-wrap break-words`,children:ge.content}),l.jsx("span",{className:`text-xs mt-1 ${he?"text-gray-600":"text-gray-500"} self-end`,children:qe(ge.createdAt).format("HH:mm")})]})]}),he&&l.jsx(Mt,{src:s?.avatar,size:32,icon:l.jsx(tt,{}),className:"flex-shrink-0"})]},ge.id)}),l.jsx("div",{ref:G})]})}),m.length>0&&l.jsx("div",{className:"mb-3 pb-3 border-b border-gray-200 px-4",children:l.jsx("div",{className:"flex flex-wrap gap-3",children:m.map((ge,Ie)=>{const he=/\.(jpg|jpeg|png|gif|webp)$/i.test(ge),Se=/\.(mp4|webm|ogg)$/i.test(ge),Ce=/\.(mp3|wav|ogg|m4a|webm)$/i.test(ge),Ue=ge.split("/").pop(),Be=ge.startsWith("http")?ge:ge.startsWith("/uploads")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${ge}`:ge.startsWith("/")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${ge}`:`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}/uploads/MESSAGE/${ge.split("/").pop()}`;return l.jsx("div",{className:"relative group",children:he?l.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm",children:[l.jsx(Sr,{src:Be,alt:Ue,width:200,height:200,className:"object-cover",preview:!1,onError:et=>{console.error("Image failed to load:",Be),et.target.style.display="none"}}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(Ar,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>v(m.filter((et,_t)=>_t!==Ie))})]}):Se?l.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm w-[200px]",children:[l.jsx("video",{src:Be,className:"w-full h-[150px] object-cover",controls:!1,muted:!0,onError:et=>{console.error("Video failed to load:",Be)}}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:l.jsx(io,{className:"text-white text-2xl"})}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(Ar,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>v(m.filter((et,_t)=>_t!==Ie))})]}):Ce?l.jsxs("div",{className:"relative rounded-lg border border-gray-200 shadow-sm bg-gray-50 p-3 min-w-[200px]",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Mc,{className:"text-gray-600 text-lg"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-xs text-gray-600 truncate",children:Ue}),l.jsx("audio",{src:Be,controls:!0,className:"w-full mt-1",preload:"metadata"})]})]}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(Ar,{}),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center",onClick:()=>v(m.filter((et,_t)=>_t!==Ie))})]}):l.jsxs("div",{className:"relative flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 shadow-sm min-w-[200px]",children:[l.jsx(Rc,{className:"text-gray-600 text-xl"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm text-gray-700 truncate font-medium",children:Ue}),l.jsx("p",{className:"text-xs text-gray-500",children:a==="ar"?"ملف":"File"})]}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(Ar,{}),className:"bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center flex-shrink-0",onClick:()=>v(m.filter((et,_t)=>_t!==Ie))})]})},Ie)})})}),Te&&!de&&l.jsxs("div",{className:"p-3 bg-blue-50 border-t border-blue-200 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("audio",{src:Te,controls:!0,className:"max-w-xs"}),l.jsx("span",{className:"text-sm text-gray-600",children:Z(xe)})]}),l.jsxs(ze,{children:[l.jsx(J,{type:"primary",size:"small",onClick:ne,loading:y,children:a==="ar"?"إرسال":"Send"}),l.jsx(J,{size:"small",icon:l.jsx(Ar,{}),onClick:re})]})]}),de&&l.jsxs("div",{className:"p-3 bg-red-50 border-t border-red-200 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),l.jsxs("span",{className:"text-red-600 font-semibold",children:[a==="ar"?"جاري التسجيل...":"Recording..."," ",Z(xe)]})]}),l.jsx(J,{danger:!0,size:"small",icon:l.jsx($c,{}),onClick:ie,children:a==="ar"?"إيقاف":"Stop"})]}),l.jsxs("div",{className:"border-t border-gray-200/50 px-4 py-3 shadow-professional backdrop-blur-sm flex-shrink-0 bg-white/80",children:[l.jsxs("div",{className:"flex items-end gap-2",children:[l.jsx(Vt,{showUploadList:!1,beforeUpload:oe,accept:"image/*,audio/*,video/*,.pdf,.doc,.docx",multiple:!0,children:l.jsx(J,{icon:l.jsx(IE,{}),type:"text",className:"text-gray-600 hover:text-gray-900",size:"large"})}),l.jsx(J,{type:de?"primary":"text",danger:de,icon:de?l.jsx(LE,{}):l.jsx(Mc,{}),onClick:ee,disabled:A?.status==="COMPLETED",title:a==="ar"?"تسجيل صوتي":"Voice recording",className:de?"":"text-gray-600 hover:text-gray-900",size:"large"}),l.jsx(J,{icon:l.jsx(BE,{}),onClick:()=>b(!x),type:"text",className:`text-gray-600 hover:text-gray-900 ${x?"bg-gray-100":""}`,size:"large"}),l.jsx("div",{className:"flex-1 relative",children:l.jsx(rG,{value:d,onChange:ge=>h(ge.target.value),placeholder:a==="ar"?"اكتب رسالتك...":"Type your message...",rows:1,autoSize:{minRows:1,maxRows:4},variant:"borderless",disabled:A?.status==="COMPLETED"||de,onPressEnter:ge=>{ge.shiftKey||(ge.preventDefault(),le())},style:{resize:"none",borderRadius:"24px",padding:"10px 16px",backgroundColor:"#f0f0f0",border:"none",fontSize:"14px"}})}),l.jsx(J,{type:"primary",icon:l.jsx(Ty,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 rounded-full",onClick:le,loading:y,disabled:!d.trim()&&m.length===0||A?.status==="COMPLETED",size:"large",shape:"circle"})]}),x&&l.jsx("div",{className:"p-3 bg-white border-t border-gray-200 max-h-48 overflow-y-auto shadow-inner",children:l.jsx("div",{className:"grid grid-cols-8 gap-1",children:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃"].map(ge=>l.jsx(J,{type:"text",className:"text-xl p-1",onClick:()=>{h(Ie=>Ie+ge),b(!1)},children:ge},ge))})})]})]})}),l.jsx(At,{title:a==="ar"?"مكالمة فيديو - Jitsi Meet":"Video Call - Jitsi Meet",open:L,onCancel:()=>U(!1),footer:[l.jsx(J,{onClick:()=>U(!1),children:a==="ar"?"إغلاق":"Close"},"close"),l.jsx(J,{type:"primary",onClick:()=>{_?.joinUrl&&window.open(_.joinUrl,"_blank","width=1200,height=800")},children:a==="ar"?"فتح في نافذة جديدة":"Open in New Window"},"openNew")],width:"90%",style:{top:20},styles:{body:{height:"80vh",padding:0}},destroyOnHidden:!0,children:_?.joinUrl?l.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",padding:"20px"},children:[l.jsx("p",{style:{fontSize:"16px",color:"#666",textAlign:"center"},children:a==="ar"?'لأفضل تجربة، يرجى استخدام زر "فتح في نافذة جديدة" لفتح المكالمة':'For the best experience, please use the "Open in New Window" button to open the call'}),l.jsx(J,{type:"primary",size:"large",onClick:()=>{_?.joinUrl&&window.open(_.joinUrl,"_blank","width=1200,height=800")},children:a==="ar"?"فتح المكالمة في نافذة جديدة":"Open Call in New Window"}),l.jsx("div",{style:{width:"100%",height:"70%",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},children:l.jsx("iframe",{src:_.joinUrl,allow:"camera; microphone; fullscreen; speaker; display-capture; autoplay",style:{width:"100%",height:"100%",border:"none"},title:"Jitsi Meet Video Call",allowFullScreen:!0})})]}):l.jsx("div",{style:{padding:"20px",textAlign:"center"},children:l.jsx("p",{children:a==="ar"?"لا يوجد رابط للمكالمة":"No call URL available"})})})]})},iG=()=>{const{t:n,language:e}=Ze(),t=Rt(),[r,i]=M.useState([]),[a,s]=M.useState(!0),[o,c]=M.useState("all");M.useEffect(()=>{u()},[o]);const u=async()=>{try{s(!0);const p={};o!=="all"&&(p.status=o);const g=(await Ir.getBookings(p)).bookings.map(m=>({id:m.id,client:m.client?`${m.client.firstName} ${m.client.lastName}`:e==="ar"?"غير متوفر":"N/A",service:m.service?e==="ar"?m.service.titleAr:m.service.title:e==="ar"?"غير محدد":"Not specified",date:m.scheduledAt?qe(m.scheduledAt).format("YYYY-MM-DD HH:mm"):"-",status:m.status,price:m.price,bookingType:m.bookingType}));i(g)}catch(p){console.error("Error fetching bookings:",p),se.error(e==="ar"?"فشل تحميل الحجوزات":"Failed to load bookings")}finally{s(!1)}},d=async(p,y)=>{try{await Ir.updateBookingStatus(p,y),se.success(e==="ar"?"تم تحديث الحالة بنجاح":"Status updated successfully"),u()}catch(g){se.error(g.message||(e==="ar"?"فشل تحديث الحالة":"Failed to update status"))}},h=async p=>{try{const y=await fn.generateVideoRoom(p);await fn.startSession(p,y.room?.roomId),se.success(e==="ar"?"تم بدء الجلسة بنجاح":"Session started successfully"),u(),t(`/consultant/chat/${p}`)}catch(y){se.error(y.message||(e==="ar"?"فشل بدء الجلسة":"Failed to start session"))}},f=[{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client"},{title:e==="ar"?"الخدمة":"Service",dataIndex:"service",key:"service"},{title:e==="ar"?"التاريخ والوقت":"Date & Time",dataIndex:"date",key:"date"},{title:e==="ar"?"المبلغ":"Amount",dataIndex:"price",key:"price",render:p=>p?`${p} ${e==="ar"?"ريال":"SAR"}`:"-"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:p=>{const y={PENDING:"orange",CONFIRMED:"blue",IN_PROGRESS:"green",COMPLETED:"green",CANCELLED:"red"},g={PENDING:e==="ar"?"قيد الانتظار":"Pending",CONFIRMED:e==="ar"?"مؤكد":"Confirmed",IN_PROGRESS:e==="ar"?"قيد التنفيذ":"In Progress",COMPLETED:e==="ar"?"مكتمل":"Completed",CANCELLED:e==="ar"?"ملغي":"Cancelled"};return l.jsx($e,{color:y[p],children:g[p]||p})}},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(p,y)=>l.jsxs(ze,{children:[l.jsx(J,{icon:l.jsx(kn,{}),onClick:()=>t(`/consultant/chat/${y.id}`),children:e==="ar"?"محادثة":"Chat"}),y.status==="PENDING"&&l.jsxs(l.Fragment,{children:[l.jsx(J,{type:"primary",icon:l.jsx(Zt,{}),className:"bg-green-600",onClick:()=>d(y.id,"CONFIRMED"),children:e==="ar"?"قبول":"Accept"}),l.jsx(J,{danger:!0,icon:l.jsx(sh,{}),onClick:()=>d(y.id,"CANCELLED"),children:e==="ar"?"رفض":"Reject"})]}),y.status==="CONFIRMED"&&l.jsx(J,{type:"primary",className:"bg-olive-green-600",onClick:()=>h(y.id),children:e==="ar"?"بدء الجلسة":"Start Session"})]})}];return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الحجوزات":"Bookings"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع حجوزات الاستشارات":"Manage all consultation bookings"})]}),l.jsxs(be,{value:o,onChange:c,style:{width:200},size:"large",children:[l.jsx(be.Option,{value:"all",children:e==="ar"?"الكل":"All"}),l.jsx(be.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),l.jsx(be.Option,{value:"CONFIRMED",children:e==="ar"?"مؤكد":"Confirmed"}),l.jsx(be.Option,{value:"IN_PROGRESS",children:e==="ar"?"قيد التنفيذ":"In Progress"}),l.jsx(be.Option,{value:"COMPLETED",children:e==="ar"?"مكتمل":"Completed"})]})]}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx(Pt,{columns:f,dataSource:r,rowKey:"id",loading:a,pagination:{pageSize:10,showSizeChanger:!0,showTotal:p=>e==="ar"?`إجمالي ${p} حجز`:`Total ${p} bookings`}})})]})},{Text:bT,Paragraph:aG}=Du,{TextArea:sG}=ye,oG=()=>{const{t:n,language:e}=Ze(),[t,r]=M.useState([]),[i,a]=M.useState([]),[s,o]=M.useState(!0),[c,u]=M.useState(!1),[d,h]=M.useState(!1),[f,p]=M.useState(null),[y,g]=M.useState(null),[m]=W.useForm();M.useEffect(()=>{v(),x()},[]);const v=async()=>{try{o(!0);const S=(await vm.getReports()).reports.map(E=>({id:E.id,title:E.title,client:E.client?`${E.client.firstName} ${E.client.lastName}`:e==="ar"?"غير متوفر":"N/A",date:qe(E.createdAt).format("YYYY-MM-DD"),status:E.status,reportType:E.reportType,pdfUrl:E.pdfUrl,wordUrl:E.wordUrl}));r(S)}catch(w){console.error("Error fetching reports:",w),se.error(e==="ar"?"فشل تحميل التقارير":"Failed to load reports")}finally{o(!1)}},x=async()=>{try{const w=await Ir.getBookings({status:"COMPLETED"});a((w.bookings||[]).filter(S=>!S.report))}catch(w){console.error("Error fetching bookings:",w)}},b=async w=>{try{if(!f&&!w.bookingId){se.error(e==="ar"?"يرجى اختيار حجز":"Please select a booking");return}const S=f?.id||w.bookingId,E=new FormData;w.pdf&&w.pdf.fileList&&w.pdf.fileList[0]&&E.append("pdf",w.pdf.fileList[0].originFileObj),w.word&&w.word.fileList&&w.word.fileList[0]&&E.append("word",w.word.fileList[0].originFileObj),E.append("bookingId",S),E.append("title",w.title),E.append("reportType",w.reportType),w.summary&&E.append("summary",w.summary),await vm.uploadReport(E),se.success(e==="ar"?"تم رفع التقرير بنجاح":"Report uploaded successfully"),u(!1),m.resetFields(),p(null),v(),x()}catch(S){se.error(S.message||(e==="ar"?"فشل رفع التقرير":"Failed to upload report"))}},A=[{title:e==="ar"?"عنوان التقرير":"Report Title",dataIndex:"title",key:"title"},{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client"},{title:e==="ar"?"النوع":"Type",dataIndex:"reportType",key:"reportType"},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:w=>{const S={UNDER_REVIEW:"orange",APPROVED:"green",REJECTED:"red"},E={UNDER_REVIEW:e==="ar"?"قيد المراجعة":"Under Review",APPROVED:e==="ar"?"موافق عليه":"Approved",REJECTED:e==="ar"?"مرفوض":"Rejected"},_={UNDER_REVIEW:l.jsx($i,{}),APPROVED:l.jsx(Zt,{}),REJECTED:l.jsx(sh,{})};return l.jsx($e,{color:S[w],icon:_[w],children:E[w]||w})}},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(w,S)=>l.jsxs(ze,{children:[l.jsx(J,{icon:l.jsx(Wn,{}),onClick:()=>{g(S),h(!0)},children:e==="ar"?"معاينة":"Preview"}),S.pdfUrl&&l.jsx(J,{icon:l.jsx(Mr,{}),onClick:()=>window.open(S.pdfUrl,"_blank"),children:"PDF"}),S.wordUrl&&l.jsx(J,{icon:l.jsx(Mr,{}),onClick:()=>window.open(S.wordUrl,"_blank"),children:"Word"})]})}];return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"التقارير":"Reports"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة وتحميل التقارير":"Manage and upload reports"})]}),l.jsx(J,{type:"primary",size:"large",icon:l.jsx(gr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-professional",onClick:()=>{m.resetFields(),u(!0)},children:e==="ar"?"رفع تقرير جديد":"Upload New Report"})]}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx(Pt,{columns:A,dataSource:t,rowKey:"id",loading:s,pagination:{pageSize:10,showSizeChanger:!0,showTotal:w=>e==="ar"?`إجمالي ${w} تقرير`:`Total ${w} reports`}})}),l.jsx(At,{title:e==="ar"?"رفع تقرير جديد":"Upload New Report",open:c,onCancel:()=>{u(!1),m.resetFields()},footer:null,width:700,children:l.jsxs(W,{form:m,layout:"vertical",onFinish:b,children:[l.jsx(W.Item,{name:"bookingId",label:e==="ar"?"اختر الحجز":"Select Booking",rules:[{required:!0,message:e==="ar"?"يرجى اختيار حجز":"Please select a booking"}],children:l.jsx(be,{placeholder:e==="ar"?"اختر الحجز":"Select booking",onChange:w=>{const S=i.find(E=>E.id===w);p(S),m.setFieldValue("bookingId",w)},children:i.map(w=>l.jsxs(be.Option,{value:w.id,children:[w.client?`${w.client.firstName} ${w.client.lastName}`:w.id," - ",w.service?e==="ar"?w.service.titleAr:w.service.title:""]},w.id))})}),l.jsx(W.Item,{name:"title",label:e==="ar"?"عنوان التقرير":"Report Title",rules:[{required:!0}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"reportType",label:e==="ar"?"نوع التقرير":"Report Type",rules:[{required:!0}],children:l.jsxs(be,{children:[l.jsx(be.Option,{value:"FEASIBILITY_STUDY",children:e==="ar"?"دراسة جدوى":"Feasibility Study"}),l.jsx(be.Option,{value:"ECONOMIC_ANALYSIS",children:e==="ar"?"تحليل اقتصادي":"Economic Analysis"}),l.jsx(be.Option,{value:"FINANCIAL_REPORT",children:e==="ar"?"تقرير مالي":"Financial Report"}),l.jsx(be.Option,{value:"CONSULTATION_SUMMARY",children:e==="ar"?"ملخص استشارة":"Consultation Summary"})]})}),l.jsx(W.Item,{name:"summary",label:e==="ar"?"ملخص التقرير":"Report Summary",children:l.jsx(sG,{rows:4})}),l.jsx(W.Item,{name:"pdf",label:e==="ar"?"ملف PDF":"PDF File",rules:[{required:!0,message:e==="ar"?"يرجى رفع ملف PDF":"Please upload PDF file"}],valuePropName:"fileList",getValueFromEvent:w=>Array.isArray(w)?w:w?.fileList,children:l.jsx(Vt,{beforeUpload:()=>!1,maxCount:1,accept:".pdf",children:l.jsx(J,{icon:l.jsx(Sn,{}),children:e==="ar"?"اختر ملف PDF":"Select PDF File"})})}),l.jsx(W.Item,{name:"word",label:e==="ar"?"ملف Word (اختياري)":"Word File (Optional)",valuePropName:"fileList",getValueFromEvent:w=>Array.isArray(w)?w:w?.fileList,children:l.jsx(Vt,{beforeUpload:()=>!1,maxCount:1,accept:".doc,.docx",children:l.jsx(J,{icon:l.jsx(Sn,{}),children:e==="ar"?"اختر ملف Word":"Select Word File"})})}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"رفع":"Upload"}),l.jsx(J,{onClick:()=>{u(!1),m.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),l.jsx(At,{title:e==="ar"?"معاينة التقرير":"Report Preview",open:d,onCancel:()=>{h(!1),g(null)},footer:[l.jsx(J,{onClick:()=>{h(!1),g(null)},children:e==="ar"?"إغلاق":"Close"},"close"),y?.pdfUrl&&l.jsx(J,{type:"primary",icon:l.jsx(Mr,{}),onClick:()=>window.open(y.pdfUrl,"_blank"),children:e==="ar"?"تحميل PDF":"Download PDF"},"pdf"),y?.wordUrl&&l.jsx(J,{icon:l.jsx(Mr,{}),onClick:()=>window.open(y.wordUrl,"_blank"),children:e==="ar"?"تحميل Word":"Download Word"},"word")],width:800,children:y&&l.jsxs("div",{children:[l.jsxs(Je,{bordered:!0,column:2,className:"mb-4",children:[l.jsx(Je.Item,{label:e==="ar"?"عنوان التقرير":"Report Title",span:2,children:l.jsx(bT,{strong:!0,children:y.title})}),l.jsx(Je.Item,{label:e==="ar"?"العميل":"Client",children:y.client}),l.jsx(Je.Item,{label:e==="ar"?"نوع التقرير":"Report Type",children:y.reportType}),l.jsx(Je.Item,{label:e==="ar"?"التاريخ":"Date",children:y.date}),l.jsx(Je.Item,{label:e==="ar"?"الحالة":"Status",span:2,children:l.jsx($e,{color:y.status==="APPROVED"?"green":y.status==="REJECTED"?"red":"orange",icon:y.status==="APPROVED"?l.jsx(Zt,{}):y.status==="REJECTED"?l.jsx(sh,{}):l.jsx($i,{}),children:y.status==="UNDER_REVIEW"?e==="ar"?"قيد المراجعة":"Under Review":y.status==="APPROVED"?e==="ar"?"موافق عليه":"Approved":e==="ar"?"مرفوض":"Rejected"})})]}),y.pdfUrl&&l.jsxs("div",{className:"mt-4",children:[l.jsx(bT,{strong:!0,className:"block mb-2",children:e==="ar"?"معاينة PDF:":"PDF Preview:"}),l.jsx("iframe",{src:y.pdfUrl,style:{width:"100%",height:"500px",border:"1px solid #d9d9d9"},title:"PDF Preview"})]}),!y.pdfUrl&&l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Kt,{style:{fontSize:"48px",marginBottom:"16px"}}),l.jsx(aG,{children:e==="ar"?"لا توجد معاينة متاحة":"No preview available"})]})]})})]})},lG=()=>l.jsx(XV,{children:l.jsxs(wy,{children:[l.jsx(Qe,{path:"/",element:l.jsx(JV,{})}),l.jsx(Qe,{path:"/sessions",element:l.jsx(ZV,{})}),l.jsx(Qe,{path:"/bookings",element:l.jsx(iG,{})}),l.jsx(Qe,{path:"/chat/:bookingId?",element:l.jsx(bv,{})}),l.jsx(Qe,{path:"/chat/session/:sessionId",element:l.jsx(bv,{})}),l.jsx(Qe,{path:"/sessions/:sessionId",element:l.jsx(bv,{})}),l.jsx(Qe,{path:"/reports",element:l.jsx(oG,{})}),l.jsx(Qe,{path:"/profile",element:l.jsx(eG,{})}),l.jsx(Qe,{path:"/earnings",element:l.jsx(tG,{})}),l.jsx(Qe,{path:"/support",element:l.jsx(nG,{})}),l.jsx(Qe,{path:"*",element:l.jsx(na,{to:"/consultant",replace:!0})})]})}),AR=()=>{const[n,e]=M.useState({width:typeof window<"u"?window.innerWidth:1024,height:typeof window<"u"?window.innerHeight:768});return M.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),n},{Header:cG,Sider:uG,Content:dG}=Dt,hG=({children:n})=>{const{t:e,language:t,toggleLanguage:r}=Ze(),{theme:i,settings:a}=ha(),{user:s,logout:o}=Xn(),c=Rt(),u=jl(),{width:d}=AR(),h=d<768,[f,p]=M.useState(h),[y,g]=M.useState(!1),[m,v]=M.useState(!1),x=t==="ar";M.useEffect(()=>{h&&p(!0)},[h]),M.useEffect(()=>{const D=document.querySelector(".admin-content");D&&(D.classList.add("fade-in"),setTimeout(()=>{D.classList.remove("fade-in")},500))},[u.pathname]);const b=()=>{o(),c("/login",{replace:!0})},A=[{key:"/admin",icon:l.jsx(wm,{}),label:t==="ar"?"لوحة التحكم":"Dashboard"},{key:"/admin/clients",icon:l.jsx(tt,{}),label:t==="ar"?"العملاء":"Clients"},{key:"/admin/consultants",icon:l.jsx(Xr,{}),label:t==="ar"?"المستشارون":"Consultants"},{key:"/admin/sessions",icon:l.jsx(vn,{}),label:t==="ar"?"الجلسات":"Sessions"},{key:"/admin/payments",icon:l.jsx(Yn,{}),label:t==="ar"?"المدفوعات":"Payments"},{key:"/admin/articles",icon:l.jsx(Lc,{}),label:t==="ar"?"المقالات":"Articles"},{key:"/admin/services",icon:l.jsx(hl,{}),label:t==="ar"?"الخدمات":"Services"},{key:"/admin/sliders",icon:l.jsx(UE,{}),label:t==="ar"?"السلايدرات":"Sliders"},{key:"/admin/reports",icon:l.jsx(Kt,{}),label:t==="ar"?"التقارير":"Reports"},{key:"/admin/partners",icon:l.jsx(Xr,{}),label:t==="ar"?"الشركاء":"Partners"},{key:"/admin/categories",icon:l.jsx(hl,{}),label:t==="ar"?"الفئات":"Categories"},{key:"/admin/monitoring",icon:l.jsx(ah,{}),label:t==="ar"?"المراقبة":"Monitoring"},{key:"/admin/chat",icon:l.jsx(kn,{}),label:t==="ar"?"المحادثات":"Chat"},{key:"/admin/support",icon:l.jsx(Kt,{}),label:t==="ar"?"الدعم الفني":"Support"},{key:"/admin/permissions",icon:l.jsx(tt,{}),label:t==="ar"?"الصلاحيات":"Permissions"},{key:"/admin/settings",icon:l.jsx(Uc,{}),label:t==="ar"?"الإعدادات":"Settings"}],w=[{key:"profile",icon:l.jsx(tt,{}),label:t==="ar"?"الملف الشخصي":"Profile",onClick:({domEvent:D})=>{D&&(D.stopPropagation(),D.preventDefault()),setTimeout(()=>{v(!1),c("/admin/profile")},100)}},{key:"settings",icon:l.jsx(Uc,{}),label:t==="ar"?"الإعدادات":"Settings",onClick:({domEvent:D})=>{D&&(D.stopPropagation(),D.preventDefault()),setTimeout(()=>{v(!1),c("/admin/settings")},100)}},{type:"divider"},{key:"logout",icon:l.jsx(oh,{}),label:t==="ar"?"تسجيل الخروج":"Logout",onClick:({domEvent:D})=>{D&&(D.stopPropagation(),D.preventDefault()),setTimeout(()=>{v(!1),b()},100)}}],S=h?{display:"none"}:{overflow:"auto",height:"100vh",position:"fixed",top:0,bottom:0,[x?"right":"left"]:0,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",zIndex:1e3},E=h?{[x?"marginRight":"marginLeft"]:0}:{transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)",[x?"marginRight":"marginLeft"]:f?80:250},_=l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`p-4 sm:p-6 flex items-center justify-between border-b ${i==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-gradient-to-r from-white to-gray-50"}`,children:l.jsxs("div",{className:`flex items-center gap-3 transition-all duration-300 ${f&&!h?"justify-center w-full":""}`,children:[a.logo?l.jsx("img",{src:a.logo,alt:"Logo",className:`${f&&!h?"w-15 h-12":"h-10"} object-contain cursor-pointer transition-all duration-300`,onClick:()=>c("/admin")}):l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-olive-green-600 via-olive-green-500 to-turquoise-500 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300 cursor-pointer",onClick:()=>c("/admin"),style:{backgroundColor:a.primaryColor},children:l.jsx("span",{className:"text-white font-bold text-xl",children:t==="ar"?a.dashboardNameAr?.[0]||"ج":a.dashboardName?.[0]||"J"})}),!f&&!h&&l.jsx("div",{className:"animate-fade-in cursor-pointer",onClick:()=>c("/admin"),children:l.jsx("div",{className:`text-xs ${i==="dark"?"text-gray-400":"text-gray-500"}`})})]})}),l.jsx(ih,{mode:"inline",selectedKeys:[u.pathname],items:A,onClick:({key:D})=>{c(D),h&&g(!1)},className:"border-0 mt-4 px-2 admin-menu",style:{background:"transparent"}}),!h&&l.jsx("div",{className:"absolute bottom-4 left-0 right-0 px-4",children:l.jsx(J,{type:"text",icon:f?x?l.jsx(Pc,{}):l.jsx(Ic,{}):x?l.jsx(Ic,{}):l.jsx(Pc,{}),onClick:()=>p(!f),className:"w-full hover:bg-olive-green-50 text-olive-green-600 border border-olive-green-200 rounded-lg transition-all duration-300",children:!f&&l.jsx("span",{className:"ml-2",children:t==="ar"?"طي":"Collapse"})})})]});return l.jsxs(Dt,{className:"min-h-screen",children:[!h&&l.jsx(uG,{trigger:null,collapsible:!0,collapsed:f,width:250,className:"admin-sidebar bg-gradient-to-b from-white to-gray-50 shadow-2xl border-r border-gray-200",style:S,children:_}),h&&l.jsx(nR,{title:l.jsx("div",{className:"flex items-center gap-3",children:a.logo?l.jsx("img",{src:a.logo,alt:"Logo",className:"h-10 object-contain",onClick:()=>{c("/admin"),g(!1)}}):l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-olive-green-600 via-olive-green-500 to-turquoise-500 rounded-xl flex items-center justify-center shadow-lg",style:{backgroundColor:a.primaryColor},onClick:()=>{c("/admin"),g(!1)},children:l.jsx("span",{className:"text-white font-bold text-xl",children:t==="ar"?a.dashboardNameAr?.[0]||"ج":a.dashboardName?.[0]||"J"})})}),placement:x?"right":"left",onClose:()=>g(!1),open:y,width:280,className:"admin-drawer",styles:{body:{padding:0}},children:l.jsx("div",{className:"h-full flex flex-col",children:l.jsx("div",{className:"flex-1 overflow-y-auto",children:_})})}),l.jsxs(Dt,{style:E,className:"transition-all duration-300",children:[l.jsxs(cG,{className:"bg-white shadow-professional-lg px-3 sm:px-6 flex items-center justify-between fixed top-0 z-[1001] backdrop-blur-sm bg-white/95 glass-effect",style:{position:"fixed",width:h?"100%":`calc(100% - ${f?80:250}px)`,[x?"right":"left"]:h?0:f?80:250,transition:"all 0.3s cubic-bezier(0.2, 0, 0, 1)"},children:[l.jsx(J,{type:"text",icon:l.jsx(jy,{}),onClick:()=>h?g(!0):p(!f),className:"text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300",style:{pointerEvents:"auto"}}),!h&&l.jsx(ye,{placeholder:t==="ar"?"بحث...":"Search...",prefix:l.jsx(ua,{className:"text-gray-400"}),className:"max-w-md mx-4 rounded-lg border-gray-200 focus:border-olive-green-500 transition-all duration-300 hidden md:block",allowClear:!0,style:{pointerEvents:"auto"}}),l.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",style:{pointerEvents:"auto",position:"relative",zIndex:1002},children:[l.jsx(J,{type:"text",icon:l.jsx(Ra,{}),onClick:r,className:"text-base sm:text-lg hover:bg-olive-green-50 text-olive-green-600 rounded-lg transition-all duration-300 font-semibold px-2 sm:px-4",title:t==="ar"?"Switch to English":"التبديل إلى العربية",style:{pointerEvents:"auto"},children:l.jsx("span",{className:"hidden xs:inline",children:t==="ar"?"EN":"AR"})}),l.jsx($E,{userId:s?.id}),l.jsx(J,{type:"text",icon:l.jsx(kn,{}),className:"text-base sm:text-lg hover:bg-olive-green-50 text-gray-600 rounded-lg transition-all duration-300 hidden sm:inline-flex",style:{pointerEvents:"auto"}}),l.jsx(Sy,{menu:{items:w},placement:x?"bottomLeft":"bottomRight",trigger:["click"],open:m,destroyTooltipOnHide:!1,transitionName:"",getPopupContainer:()=>document.body,popupRender:D=>l.jsx("div",{onMouseDown:C=>{C.stopPropagation(),C.preventDefault()},onClick:C=>{C.stopPropagation()},children:D}),onOpenChange:D=>{D!==m&&v(D)},children:l.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 cursor-pointer hover:bg-gray-100 px-2 sm:px-3 py-1 sm:py-2 rounded-lg group",children:[l.jsx(Mt,{src:s?.avatar||s?.admin?.profilePicture,icon:l.jsx(tt,{}),size:h?"default":"large",className:"ring-2 ring-olive-green-200 group-hover:ring-olive-green-400 transition-all duration-300"}),l.jsx("span",{className:"hidden lg:inline font-medium text-gray-700 text-sm sm:text-base",children:s?.admin?`${s.admin.firstName} ${s.admin.lastName}`:s?.email||(t==="ar"?"المدير":"Admin")})]})})]})]}),l.jsx(dG,{className:"p-3 sm:p-4 md:p-6 bg-gradient-to-br from-gray-50 via-white to-gray-50 min-h-screen admin-content",style:{marginTop:h?"56px":"64px"},children:l.jsx("div",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:n})})]})]})};function SR(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=SR(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function wt(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=SR(n))&&(r&&(r+=" "),r+=e);return r}var wv,wT;function ri(){if(wT)return wv;wT=1;var n=Array.isArray;return wv=n,wv}var Av,AT;function ER(){if(AT)return Av;AT=1;var n=typeof Li=="object"&&Li&&Li.Object===Object&&Li;return Av=n,Av}var Sv,ST;function Wa(){if(ST)return Sv;ST=1;var n=ER(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return Sv=t,Sv}var Ev,ET;function pf(){if(ET)return Ev;ET=1;var n=Wa(),e=n.Symbol;return Ev=e,Ev}var _v,_T;function fG(){if(_T)return _v;_T=1;var n=pf(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function a(s){var o=t.call(s,i),c=s[i];try{s[i]=void 0;var u=!0}catch{}var d=r.call(s);return u&&(o?s[i]=c:delete s[i]),d}return _v=a,_v}var Dv,DT;function pG(){if(DT)return Dv;DT=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return Dv=t,Dv}var jv,jT;function Ds(){if(jT)return jv;jT=1;var n=pf(),e=fG(),t=pG(),r="[object Null]",i="[object Undefined]",a=n?n.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?e(o):t(o)}return jv=s,jv}var Tv,TT;function js(){if(TT)return Tv;TT=1;function n(e){return e!=null&&typeof e=="object"}return Tv=n,Tv}var Cv,CT;function ju(){if(CT)return Cv;CT=1;var n=Ds(),e=js(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return Cv=r,Cv}var Nv,NT;function WE(){if(NT)return Nv;NT=1;var n=ri(),e=ju(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(n(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:r.test(a)||!t.test(a)||s!=null&&a in Object(s)}return Nv=i,Nv}var kv,kT;function po(){if(kT)return kv;kT=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return kv=n,kv}var Ov,OT;function HE(){if(OT)return Ov;OT=1;var n=Ds(),e=po(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var c=n(o);return c==r||c==i||c==t||c==a}return Ov=s,Ov}var Pv,PT;function mG(){if(PT)return Pv;PT=1;var n=Wa(),e=n["__core-js_shared__"];return Pv=e,Pv}var Iv,IT;function gG(){if(IT)return Iv;IT=1;var n=mG(),e=(function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function t(r){return!!e&&e in r}return Iv=t,Iv}var Rv,RT;function _R(){if(RT)return Rv;RT=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return Rv=t,Rv}var Mv,MT;function yG(){if(MT)return Mv;MT=1;var n=HE(),e=gG(),t=po(),r=_R(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,c=s.toString,u=o.hasOwnProperty,d=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(f){if(!t(f)||e(f))return!1;var p=n(f)?d:a;return p.test(r(f))}return Mv=h,Mv}var Fv,FT;function vG(){if(FT)return Fv;FT=1;function n(e,t){return e?.[t]}return Fv=n,Fv}var Lv,LT;function Cl(){if(LT)return Lv;LT=1;var n=yG(),e=vG();function t(r,i){var a=e(r,i);return n(a)?a:void 0}return Lv=t,Lv}var Uv,UT;function Cy(){if(UT)return Uv;UT=1;var n=Cl(),e=n(Object,"create");return Uv=e,Uv}var Bv,BT;function xG(){if(BT)return Bv;BT=1;var n=Cy();function e(){this.__data__=n?n(null):{},this.size=0}return Bv=e,Bv}var $v,$T;function bG(){if($T)return $v;$T=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return $v=n,$v}var zv,zT;function wG(){if(zT)return zv;zT=1;var n=Cy(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(a){var s=this.__data__;if(n){var o=s[a];return o===e?void 0:o}return r.call(s,a)?s[a]:void 0}return zv=i,zv}var qv,qT;function AG(){if(qT)return qv;qT=1;var n=Cy(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var a=this.__data__;return n?a[i]!==void 0:t.call(a,i)}return qv=r,qv}var Wv,WT;function SG(){if(WT)return Wv;WT=1;var n=Cy(),e="__lodash_hash_undefined__";function t(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=n&&i===void 0?e:i,this}return Wv=t,Wv}var Hv,HT;function EG(){if(HT)return Hv;HT=1;var n=xG(),e=bG(),t=wG(),r=AG(),i=SG();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,Hv=a,Hv}var Vv,VT;function _G(){if(VT)return Vv;VT=1;function n(){this.__data__=[],this.size=0}return Vv=n,Vv}var Gv,GT;function VE(){if(GT)return Gv;GT=1;function n(e,t){return e===t||e!==e&&t!==t}return Gv=n,Gv}var Yv,YT;function Ny(){if(YT)return Yv;YT=1;var n=VE();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return Yv=e,Yv}var Kv,KT;function DG(){if(KT)return Kv;KT=1;var n=Ny(),e=Array.prototype,t=e.splice;function r(i){var a=this.__data__,s=n(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():t.call(a,s,1),--this.size,!0}return Kv=r,Kv}var Xv,XT;function jG(){if(XT)return Xv;XT=1;var n=Ny();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return Xv=e,Xv}var Jv,JT;function TG(){if(JT)return Jv;JT=1;var n=Ny();function e(t){return n(this.__data__,t)>-1}return Jv=e,Jv}var Zv,ZT;function CG(){if(ZT)return Zv;ZT=1;var n=Ny();function e(t,r){var i=this.__data__,a=n(i,t);return a<0?(++this.size,i.push([t,r])):i[a][1]=r,this}return Zv=e,Zv}var Qv,QT;function ky(){if(QT)return Qv;QT=1;var n=_G(),e=DG(),t=jG(),r=TG(),i=CG();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,Qv=a,Qv}var ex,e3;function GE(){if(e3)return ex;e3=1;var n=Cl(),e=Wa(),t=n(e,"Map");return ex=t,ex}var tx,t3;function NG(){if(t3)return tx;t3=1;var n=EG(),e=ky(),t=GE();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return tx=r,tx}var nx,n3;function kG(){if(n3)return nx;n3=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return nx=n,nx}var rx,r3;function Oy(){if(r3)return rx;r3=1;var n=kG();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return rx=e,rx}var ix,i3;function OG(){if(i3)return ix;i3=1;var n=Oy();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return ix=e,ix}var ax,a3;function PG(){if(a3)return ax;a3=1;var n=Oy();function e(t){return n(this,t).get(t)}return ax=e,ax}var sx,s3;function IG(){if(s3)return sx;s3=1;var n=Oy();function e(t){return n(this,t).has(t)}return sx=e,sx}var ox,o3;function RG(){if(o3)return ox;o3=1;var n=Oy();function e(t,r){var i=n(this,t),a=i.size;return i.set(t,r),this.size+=i.size==a?0:1,this}return ox=e,ox}var lx,l3;function YE(){if(l3)return lx;l3=1;var n=NG(),e=OG(),t=PG(),r=IG(),i=RG();function a(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,lx=a,lx}var cx,c3;function DR(){if(c3)return cx;c3=1;var n=YE(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],c=a.cache;if(c.has(o))return c.get(o);var u=r.apply(this,s);return a.cache=c.set(o,u)||c,u};return a.cache=new(t.Cache||n),a}return t.Cache=n,cx=t,cx}var ux,u3;function MG(){if(u3)return ux;u3=1;var n=DR(),e=500;function t(r){var i=n(r,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return ux=t,ux}var dx,d3;function FG(){if(d3)return dx;d3=1;var n=MG(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,o,c,u){a.push(c?u.replace(t,"$1"):o||s)}),a});return dx=r,dx}var hx,h3;function KE(){if(h3)return hx;h3=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a}return hx=n,hx}var fx,f3;function LG(){if(f3)return fx;f3=1;var n=pf(),e=KE(),t=ri(),r=ju(),i=n?n.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(t(o))return e(o,s)+"";if(r(o))return a?a.call(o):"";var c=o+"";return c=="0"&&1/o==-1/0?"-0":c}return fx=s,fx}var px,p3;function jR(){if(p3)return px;p3=1;var n=LG();function e(t){return t==null?"":n(t)}return px=e,px}var mx,m3;function TR(){if(m3)return mx;m3=1;var n=ri(),e=WE(),t=FG(),r=jR();function i(a,s){return n(a)?a:e(a,s)?[a]:t(r(a))}return mx=i,mx}var gx,g3;function Py(){if(g3)return gx;g3=1;var n=ju();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return gx=e,gx}var yx,y3;function XE(){if(y3)return yx;y3=1;var n=TR(),e=Py();function t(r,i){i=n(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[e(i[a++])];return a&&a==s?r:void 0}return yx=t,yx}var vx,v3;function CR(){if(v3)return vx;v3=1;var n=XE();function e(t,r,i){var a=t==null?void 0:n(t,r);return a===void 0?i:a}return vx=e,vx}var UG=CR();const xi=It(UG);var xx,x3;function BG(){if(x3)return xx;x3=1;function n(e){return e==null}return xx=n,xx}var $G=BG();const xt=It($G);var bx,b3;function zG(){if(b3)return bx;b3=1;var n=Ds(),e=ri(),t=js(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&t(a)&&n(a)==r}return bx=i,bx}var qG=zG();const fl=It(qG);var WG=HE();const ft=It(WG);var HG=po();const Tu=It(HG);var wx,w3;function NR(){if(w3)return wx;w3=1;var n=Ds(),e=js(),t="[object Number]";function r(i){return typeof i=="number"||e(i)&&n(i)==t}return wx=r,wx}var Ax,A3;function VG(){if(A3)return Ax;A3=1;var n=NR();function e(t){return n(t)&&t!=+t}return Ax=e,Ax}var GG=VG();const Cu=It(GG);var YG=NR();const KG=It(YG);var Fr=function(e){return e===0?0:e>0?1:-1},qo=function(e){return fl(e)&&e.indexOf("%")===e.length-1},Fe=function(e){return KG(e)&&!Cu(e)},XG=function(e){return xt(e)},Vn=function(e){return Fe(e)||fl(e)},JG=0,Nu=function(e){var t=++JG;return"".concat(e||"").concat(t)},Lr=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Fe(e)&&!fl(e))return r;var a;if(qo(e)){var s=e.indexOf("%");a=t*parseFloat(e.slice(0,s))/100}else a=+e;return Cu(a)&&(a=r),i&&a>t&&(a=t),a},Bs=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},ZG=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},i=0;i<t;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Yr=function(e,t){return Fe(e)&&Fe(t)?function(r){return e+r*(t-e)}:function(){return t}};function Em(n,e,t){return!n||!n.length?null:n.find(function(r){return r&&(typeof e=="function"?e(r):xi(r,e))===t})}var QG=function(e,t){return Fe(e)&&Fe(t)?e-t:fl(e)&&fl(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function bc(n,e){for(var t in n)if({}.hasOwnProperty.call(n,t)&&(!{}.hasOwnProperty.call(e,t)||n[t]!==e[t]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(n,r))return!1;return!0}function yA(n){"@babel/helpers - typeof";return yA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yA(n)}var eY=["viewBox","children"],tY=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],S3=["points","pathLength"],Sx={svg:eY,polygon:S3,polyline:S3},JE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],_m=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(M.isValidElement(e)&&(r=e.props),!Tu(r))return null;var i={};return Object.keys(r).forEach(function(a){JE.includes(a)&&(i[a]=t||function(s){return r[a](r,s)})}),i},nY=function(e,t,r){return function(i){return e(t,r,i),null}},pl=function(e,t,r){if(!Tu(e)||yA(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];JE.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=nY(s,t,r))}),i},rY=["children"],iY=["children"];function E3(n,e){if(n==null)return{};var t=aY(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function aY(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function vA(n){"@babel/helpers - typeof";return vA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vA(n)}var _3={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ds=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},D3=null,Ex=null,ZE=function n(e){if(e===D3&&Array.isArray(Ex))return Ex;var t=[];return M.Children.forEach(e,function(r){xt(r)||(oz.isFragment(r)?t=t.concat(n(r.props.children)):t.push(r))}),Ex=t,D3=e,t};function zi(n,e){var t=[],r=[];return Array.isArray(e)?r=e.map(function(i){return ds(i)}):r=[ds(e)],ZE(n).forEach(function(i){var a=xi(i,"type.displayName")||xi(i,"type.name");r.indexOf(a)!==-1&&t.push(i)}),t}function di(n,e){var t=zi(n,e);return t&&t[0]}var j3=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,i=t.height;return!(!Fe(r)||r<=0||!Fe(i)||i<=0)},sY=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],oY=function(e){return e&&e.type&&fl(e.type)&&sY.indexOf(e.type)>=0},lY=function(e){return e&&vA(e)==="object"&&"clipDot"in e},cY=function(e,t,r,i){var a,s=(a=Sx?.[i])!==null&&a!==void 0?a:[];return t.startsWith("data-")||!ft(e)&&(i&&s.includes(t)||tY.includes(t))||r&&JE.includes(t)},lt=function(e,t,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(M.isValidElement(e)&&(i=e.props),!Tu(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;cY((o=i)===null||o===void 0?void 0:o[s],s,t,r)&&(a[s]=i[s])}),a},xA=function n(e,t){if(e===t)return!0;var r=M.Children.count(e);if(r!==M.Children.count(t))return!1;if(r===0)return!0;if(r===1)return T3(Array.isArray(e)?e[0]:e,Array.isArray(t)?t[0]:t);for(var i=0;i<r;i++){var a=e[i],s=t[i];if(Array.isArray(a)||Array.isArray(s)){if(!n(a,s))return!1}else if(!T3(a,s))return!1}return!0},T3=function(e,t){if(xt(e)&&xt(t))return!0;if(!xt(e)&&!xt(t)){var r=e.props||{},i=r.children,a=E3(r,rY),s=t.props||{},o=s.children,c=E3(s,iY);return i&&o?bc(a,c)&&xA(i,o):!i&&!o?bc(a,c):!1}return!1},C3=function(e,t){var r=[],i={};return ZE(e).forEach(function(a,s){if(oY(a))r.push(a);else if(a){var o=ds(a.type),c=t[o]||{},u=c.handler,d=c.once;if(u&&(!d||!i[o])){var h=u(a,o,s);r.push(h),i[o]=!0}}}),r},uY=function(e){var t=e&&e.type;return t&&_3[t]?_3[t]:null},dY=function(e,t){return ZE(t).indexOf(e)},hY=["children","width","height","viewBox","className","style","title","desc"];function bA(){return bA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bA.apply(this,arguments)}function fY(n,e){if(n==null)return{};var t=pY(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function pY(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function wA(n){var e=n.children,t=n.width,r=n.height,i=n.viewBox,a=n.className,s=n.style,o=n.title,c=n.desc,u=fY(n,hY),d=i||{width:t,height:r,x:0,y:0},h=wt("recharts-surface",a);return fe.createElement("svg",bA({},lt(u,!0,"svg"),{className:h,width:t,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),fe.createElement("title",null,o),fe.createElement("desc",null,c),e)}var mY=["children","className"];function AA(){return AA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},AA.apply(this,arguments)}function gY(n,e){if(n==null)return{};var t=yY(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function yY(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var Ot=fe.forwardRef(function(n,e){var t=n.children,r=n.className,i=gY(n,mY),a=wt("recharts-layer",r);return fe.createElement("g",AA({className:a},lt(i,!0),{ref:e}),t)}),ca=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},_x,N3;function vY(){if(N3)return _x;N3=1;function n(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+t];return s}return _x=n,_x}var Dx,k3;function xY(){if(k3)return Dx;k3=1;var n=vY();function e(t,r,i){var a=t.length;return i=i===void 0?a:i,!r&&i>=a?t:n(t,r,i)}return Dx=e,Dx}var jx,O3;function kR(){if(O3)return jx;O3=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+n+i+a+"]");function c(u){return o.test(u)}return jx=c,jx}var Tx,P3;function bY(){if(P3)return Tx;P3=1;function n(e){return e.split("")}return Tx=n,Tx}var Cx,I3;function wY(){if(I3)return Cx;I3=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",s="["+n+"]",o="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+c+")",d="[^"+n+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",y=u+"?",g="["+a+"]?",m="(?:"+p+"(?:"+[d,h,f].join("|")+")"+g+y+")*",v=g+y+m,x="(?:"+[d+o+"?",o,h,f,s].join("|")+")",b=RegExp(c+"(?="+c+")|"+x+v,"g");function A(w){return w.match(b)||[]}return Cx=A,Cx}var Nx,R3;function AY(){if(R3)return Nx;R3=1;var n=bY(),e=kR(),t=wY();function r(i){return e(i)?t(i):n(i)}return Nx=r,Nx}var kx,M3;function SY(){if(M3)return kx;M3=1;var n=xY(),e=kR(),t=AY(),r=jR();function i(a){return function(s){s=r(s);var o=e(s)?t(s):void 0,c=o?o[0]:s.charAt(0),u=o?n(o,1).join(""):s.slice(1);return c[a]()+u}}return kx=i,kx}var Ox,F3;function EY(){if(F3)return Ox;F3=1;var n=SY(),e=n("toUpperCase");return Ox=e,Ox}var _Y=EY();const Iy=It(_Y);function rn(n){return function(){return n}}const OR=Math.cos,Dm=Math.sin,fa=Math.sqrt,jm=Math.PI,Ry=2*jm,SA=Math.PI,EA=2*SA,Uo=1e-6,DY=EA-Uo;function PR(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function jY(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return PR;const t=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}class TY{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?PR:jY(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,a,s){this._append`C${+e},${+t},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,r,i,a){if(e=+e,t=+t,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-t,d=s-e,h=o-t,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(f>Uo)if(!(Math.abs(h*c-u*d)>Uo)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let p=r-s,y=i-o,g=c*c+u*u,m=p*p+y*y,v=Math.sqrt(g),x=Math.sqrt(f),b=a*Math.tan((SA-Math.acos((g+f-m)/(2*v*x)))/2),A=b/x,w=b/v;Math.abs(A-1)>Uo&&this._append`L${e+A*d},${t+A*h}`,this._append`A${a},${a},0,0,${+(h*p>d*y)},${this._x1=e+w*c},${this._y1=t+w*u}`}}arc(e,t,r,i,a,s){if(e=+e,t=+t,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,d=t+c,h=1^s,f=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Uo||Math.abs(this._y1-d)>Uo)&&this._append`L${u},${d}`,r&&(f<0&&(f=f%EA+EA),f>DY?this._append`A${r},${r},0,1,${h},${e-o},${t-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:f>Uo&&this._append`A${r},${r},0,${+(f>=SA)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function QE(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new TY(e)}function e_(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function IR(n){this._context=n}IR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function My(n){return new IR(n)}function RR(n){return n[0]}function MR(n){return n[1]}function FR(n,e){var t=rn(!0),r=null,i=My,a=null,s=QE(o);n=typeof n=="function"?n:n===void 0?RR:rn(n),e=typeof e=="function"?e:e===void 0?MR:rn(e);function o(c){var u,d=(c=e_(c)).length,h,f=!1,p;for(r==null&&(a=i(p=s())),u=0;u<=d;++u)!(u<d&&t(h=c[u],u,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+n(h,u,c),+e(h,u,c));if(p)return a=null,p+""||null}return o.x=function(c){return arguments.length?(n=typeof c=="function"?c:rn(+c),o):n},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:rn(+c),o):e},o.defined=function(c){return arguments.length?(t=typeof c=="function"?c:rn(!!c),o):t},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function Uf(n,e,t){var r=null,i=rn(!0),a=null,s=My,o=null,c=QE(u);n=typeof n=="function"?n:n===void 0?RR:rn(+n),e=typeof e=="function"?e:rn(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?MR:rn(+t);function u(h){var f,p,y,g=(h=e_(h)).length,m,v=!1,x,b=new Array(g),A=new Array(g);for(a==null&&(o=s(x=c())),f=0;f<=g;++f){if(!(f<g&&i(m=h[f],f,h))===v)if(v=!v)p=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=f-1;y>=p;--y)o.point(b[y],A[y]);o.lineEnd(),o.areaEnd()}v&&(b[f]=+n(m,f,h),A[f]=+e(m,f,h),o.point(r?+r(m,f,h):b[f],t?+t(m,f,h):A[f]))}if(x)return o=null,x+""||null}function d(){return FR().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(n=typeof h=="function"?h:rn(+h),r=null,u):n},u.x0=function(h){return arguments.length?(n=typeof h=="function"?h:rn(+h),u):n},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:rn(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:rn(+h),t=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:rn(+h),u):e},u.y1=function(h){return arguments.length?(t=h==null?null:typeof h=="function"?h:rn(+h),u):t},u.lineX0=u.lineY0=function(){return d().x(n).y(e)},u.lineY1=function(){return d().x(n).y(t)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:rn(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class LR{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function CY(n){return new LR(n,!0)}function NY(n){return new LR(n,!1)}const t_={draw(n,e){const t=fa(e/jm);n.moveTo(t,0),n.arc(0,0,t,0,Ry)}},kY={draw(n,e){const t=fa(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},UR=fa(1/3),OY=UR*2,PY={draw(n,e){const t=fa(e/OY),r=t*UR;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},IY={draw(n,e){const t=fa(e),r=-t/2;n.rect(r,r,t,t)}},RY=.8908130915292852,BR=Dm(jm/10)/Dm(7*jm/10),MY=Dm(Ry/10)*BR,FY=-OR(Ry/10)*BR,LY={draw(n,e){const t=fa(e*RY),r=MY*t,i=FY*t;n.moveTo(0,-t),n.lineTo(r,i);for(let a=1;a<5;++a){const s=Ry*a/5,o=OR(s),c=Dm(s);n.lineTo(c*t,-o*t),n.lineTo(o*r-c*i,c*r+o*i)}n.closePath()}},Px=fa(3),UY={draw(n,e){const t=-fa(e/(Px*3));n.moveTo(0,t*2),n.lineTo(-Px*t,-t),n.lineTo(Px*t,-t),n.closePath()}},_i=-.5,Di=fa(3)/2,_A=1/fa(12),BY=(_A/2+1)*3,$Y={draw(n,e){const t=fa(e/BY),r=t/2,i=t*_A,a=r,s=t*_A+t,o=-a,c=s;n.moveTo(r,i),n.lineTo(a,s),n.lineTo(o,c),n.lineTo(_i*r-Di*i,Di*r+_i*i),n.lineTo(_i*a-Di*s,Di*a+_i*s),n.lineTo(_i*o-Di*c,Di*o+_i*c),n.lineTo(_i*r+Di*i,_i*i-Di*r),n.lineTo(_i*a+Di*s,_i*s-Di*a),n.lineTo(_i*o+Di*c,_i*c-Di*o),n.closePath()}};function zY(n,e){let t=null,r=QE(i);n=typeof n=="function"?n:rn(n||t_),e=typeof e=="function"?e:rn(e===void 0?64:+e);function i(){let a;if(t||(t=a=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),a)return t=null,a+""||null}return i.type=function(a){return arguments.length?(n=typeof a=="function"?a:rn(a),i):n},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:rn(+a),i):e},i.context=function(a){return arguments.length?(t=a??null,i):t},i}function Tm(){}function Cm(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function $R(n){this._context=n}$R.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Cm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Cm(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function qY(n){return new $R(n)}function zR(n){this._context=n}zR.prototype={areaStart:Tm,areaEnd:Tm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:Cm(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function WY(n){return new zR(n)}function qR(n){this._context=n}qR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:Cm(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function HY(n){return new qR(n)}function WR(n){this._context=n}WR.prototype={areaStart:Tm,areaEnd:Tm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function VY(n){return new WR(n)}function L3(n){return n<0?-1:1}function U3(n,e,t){var r=n._x1-n._x0,i=e-n._x1,a=(n._y1-n._y0)/(r||i<0&&-0),s=(t-n._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(L3(a)+L3(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function B3(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function Ix(n,e,t){var r=n._x0,i=n._y0,a=n._x1,s=n._y1,o=(a-r)/3;n._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*t,a,s)}function Nm(n){this._context=n}Nm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ix(this,this._t0,B3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,Ix(this,B3(this,t=U3(this,n,e)),t);break;default:Ix(this,this._t0,t=U3(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function HR(n){this._context=new VR(n)}(HR.prototype=Object.create(Nm.prototype)).point=function(n,e){Nm.prototype.point.call(this,e,n)};function VR(n){this._context=n}VR.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,a){this._context.bezierCurveTo(e,n,r,t,a,i)}};function GY(n){return new Nm(n)}function YY(n){return new HR(n)}function GR(n){this._context=n}GR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=$3(n),i=$3(e),a=0,s=1;s<t;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],n[s],e[s]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function $3(n){var e,t=n.length-1,r,i=new Array(t),a=new Array(t),s=new Array(t);for(i[0]=0,a[0]=2,s[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,a[e]=4,s[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,a[t-1]=7,s[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[t-1]=s[t-1]/a[t-1],e=t-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)a[e]=2*n[e+1]-i[e+1];return[i,a]}function KY(n){return new GR(n)}function Fy(n,e){this._context=n,this._t=e}Fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function XY(n){return new Fy(n,.5)}function JY(n){return new Fy(n,0)}function ZY(n){return new Fy(n,1)}function zc(n,e){if((s=n.length)>1)for(var t=1,r,i,a=n[e[0]],s,o=a.length;t<s;++t)for(i=a,a=n[e[t]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function DA(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function QY(n,e){return n[e]}function eK(n){const e=[];return e.key=n,e}function tK(){var n=rn([]),e=DA,t=zc,r=QY;function i(a){var s=Array.from(n.apply(this,arguments),eK),o,c=s.length,u=-1,d;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,d=e_(e(s));o<c;++o)s[d[o]].index=o;return t(s,d),s}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:rn(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:rn(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?DA:typeof a=="function"?a:rn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??zc,i):t},i}function nK(n,e){if((r=n.length)>0){for(var t,r,i=0,a=n[0].length,s;i<a;++i){for(s=t=0;t<r;++t)s+=n[t][i][1]||0;if(s)for(t=0;t<r;++t)n[t][i][1]/=s}zc(n,e)}}function rK(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,a=r.length;t<a;++t){for(var s=0,o=0;s<i;++s)o+=n[s][t][1]||0;r[t][1]+=r[t][0]=-o/2}zc(n,e)}}function iK(n,e){if(!(!((s=n.length)>0)||!((a=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var d=n[e[o]],h=d[r][1]||0,f=d[r-1][1]||0,p=(h-f)/2,y=0;y<o;++y){var g=n[e[y]],m=g[r][1]||0,v=g[r-1][1]||0;p+=m-v}c+=h,u+=p*h}i[r-1][1]+=i[r-1][0]=t,c&&(t-=u/c)}i[r-1][1]+=i[r-1][0]=t,zc(n,e)}}function ch(n){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(n)}var aK=["type","size","sizeType"];function jA(){return jA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jA.apply(this,arguments)}function z3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function q3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z3(Object(t),!0).forEach(function(r){sK(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sK(n,e,t){return e=oK(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oK(n){var e=lK(n,"string");return ch(e)=="symbol"?e:e+""}function lK(n,e){if(ch(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ch(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cK(n,e){if(n==null)return{};var t=uK(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function uK(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var YR={symbolCircle:t_,symbolCross:kY,symbolDiamond:PY,symbolSquare:IY,symbolStar:LY,symbolTriangle:UY,symbolWye:$Y},dK=Math.PI/180,hK=function(e){var t="symbol".concat(Iy(e));return YR[t]||t_},fK=function(e,t,r){if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*dK;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},pK=function(e,t){YR["symbol".concat(Iy(e))]=t},n_=function(e){var t=e.type,r=t===void 0?"circle":t,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,c=cK(e,aK),u=q3(q3({},c),{},{type:r,size:a,sizeType:o}),d=function(){var m=hK(r),v=zY().type(m).size(fK(a,o,r));return v()},h=u.className,f=u.cx,p=u.cy,y=lt(u,!0);return f===+f&&p===+p&&a===+a?fe.createElement("path",jA({},y,{className:wt("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(p,")"),d:d()})):null};n_.registerSymbol=pK;function qc(n){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qc(n)}function TA(){return TA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},TA.apply(this,arguments)}function W3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function mK(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?W3(Object(t),!0).forEach(function(r){uh(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):W3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gK(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function yK(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,XR(r.key),r)}}function vK(n,e,t){return e&&yK(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function xK(n,e,t){return e=km(e),bK(n,KR()?Reflect.construct(e,t||[],km(n).constructor):e.apply(n,t))}function bK(n,e){if(e&&(qc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wK(n)}function wK(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function KR(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KR=function(){return!!n})()}function km(n){return km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},km(n)}function AK(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&CA(n,e)}function CA(n,e){return CA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CA(n,e)}function uh(n,e,t){return e=XR(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XR(n){var e=SK(n,"string");return qc(e)=="symbol"?e:e+""}function SK(n,e){if(qc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(qc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var ji=32,r_=(function(n){function e(){return gK(this,e),xK(this,e,arguments)}return AK(e,n),vK(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=ji/2,s=ji/6,o=ji/3,c=r.inactive?i:r.color;if(r.type==="plainline")return fe.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:ji,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return fe.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(ji,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return fe.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ji/8,"h").concat(ji,"v").concat(ji*3/4,"h").concat(-ji,"z"),className:"recharts-legend-icon"});if(fe.isValidElement(r.legendIcon)){var u=mK({},r);return delete u.legendIcon,fe.cloneElement(r.legendIcon,u)}return fe.createElement(n_,{fill:c,cx:a,cy:a,size:ji,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:ji,height:ji},h={display:o==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,y){var g=p.formatter||c,m=wt(uh(uh({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=ft(p.value)?null:p.value;ca(!ft(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=p.inactive?u:p.color;return fe.createElement("li",TA({className:m,style:h,key:"legend-item-".concat(y)},pl(r.props,p,y)),fe.createElement(wA,{width:s,height:s,viewBox:d,style:f},r.renderIcon(p)),fe.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},g?g(v,p,y):v))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return fe.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])})(M.PureComponent);uh(r_,"displayName","Legend");uh(r_,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Rx,H3;function EK(){if(H3)return Rx;H3=1;var n=ky();function e(){this.__data__=new n,this.size=0}return Rx=e,Rx}var Mx,V3;function _K(){if(V3)return Mx;V3=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return Mx=n,Mx}var Fx,G3;function DK(){if(G3)return Fx;G3=1;function n(e){return this.__data__.get(e)}return Fx=n,Fx}var Lx,Y3;function jK(){if(Y3)return Lx;Y3=1;function n(e){return this.__data__.has(e)}return Lx=n,Lx}var Ux,K3;function TK(){if(K3)return Ux;K3=1;var n=ky(),e=GE(),t=YE(),r=200;function i(a,s){var o=this.__data__;if(o instanceof n){var c=o.__data__;if(!e||c.length<r-1)return c.push([a,s]),this.size=++o.size,this;o=this.__data__=new t(c)}return o.set(a,s),this.size=o.size,this}return Ux=i,Ux}var Bx,X3;function JR(){if(X3)return Bx;X3=1;var n=ky(),e=EK(),t=_K(),r=DK(),i=jK(),a=TK();function s(o){var c=this.__data__=new n(o);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,Bx=s,Bx}var $x,J3;function CK(){if(J3)return $x;J3=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return $x=e,$x}var zx,Z3;function NK(){if(Z3)return zx;Z3=1;function n(e){return this.__data__.has(e)}return zx=n,zx}var qx,Q3;function ZR(){if(Q3)return qx;Q3=1;var n=YE(),e=CK(),t=NK();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new n;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,qx=r,qx}var Wx,eC;function QR(){if(eC)return Wx;eC=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return Wx=n,Wx}var Hx,tC;function eM(){if(tC)return Hx;tC=1;function n(e,t){return e.has(t)}return Hx=n,Hx}var Vx,nC;function tM(){if(nC)return Vx;nC=1;var n=ZR(),e=QR(),t=eM(),r=1,i=2;function a(s,o,c,u,d,h){var f=c&r,p=s.length,y=o.length;if(p!=y&&!(f&&y>p))return!1;var g=h.get(s),m=h.get(o);if(g&&m)return g==o&&m==s;var v=-1,x=!0,b=c&i?new n:void 0;for(h.set(s,o),h.set(o,s);++v<p;){var A=s[v],w=o[v];if(u)var S=f?u(w,A,v,o,s,h):u(A,w,v,s,o,h);if(S!==void 0){if(S)continue;x=!1;break}if(b){if(!e(o,function(E,_){if(!t(b,_)&&(A===E||d(A,E,c,u,h)))return b.push(_)})){x=!1;break}}else if(!(A===w||d(A,w,c,u,h))){x=!1;break}}return h.delete(s),h.delete(o),x}return Vx=a,Vx}var Gx,rC;function kK(){if(rC)return Gx;rC=1;var n=Wa(),e=n.Uint8Array;return Gx=e,Gx}var Yx,iC;function OK(){if(iC)return Yx;iC=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,a){r[++t]=[a,i]}),r}return Yx=n,Yx}var Kx,aC;function i_(){if(aC)return Kx;aC=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return Kx=n,Kx}var Xx,sC;function PK(){if(sC)return Xx;sC=1;var n=pf(),e=kK(),t=VE(),r=tM(),i=OK(),a=i_(),s=1,o=2,c="[object Boolean]",u="[object Date]",d="[object Error]",h="[object Map]",f="[object Number]",p="[object RegExp]",y="[object Set]",g="[object String]",m="[object Symbol]",v="[object ArrayBuffer]",x="[object DataView]",b=n?n.prototype:void 0,A=b?b.valueOf:void 0;function w(S,E,_,D,C,k,T){switch(_){case x:if(S.byteLength!=E.byteLength||S.byteOffset!=E.byteOffset)return!1;S=S.buffer,E=E.buffer;case v:return!(S.byteLength!=E.byteLength||!k(new e(S),new e(E)));case c:case u:case f:return t(+S,+E);case d:return S.name==E.name&&S.message==E.message;case p:case g:return S==E+"";case h:var N=i;case y:var j=D&s;if(N||(N=a),S.size!=E.size&&!j)return!1;var R=T.get(S);if(R)return R==E;D|=o,T.set(S,E);var P=r(N(S),N(E),D,C,k,T);return T.delete(S),P;case m:if(A)return A.call(S)==A.call(E)}return!1}return Xx=w,Xx}var Jx,oC;function nM(){if(oC)return Jx;oC=1;function n(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}return Jx=n,Jx}var Zx,lC;function IK(){if(lC)return Zx;lC=1;var n=nM(),e=ri();function t(r,i,a){var s=i(r);return e(r)?s:n(s,a(r))}return Zx=t,Zx}var Qx,cC;function RK(){if(cC)return Qx;cC=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=0,s=[];++r<i;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}return Qx=n,Qx}var eb,uC;function MK(){if(uC)return eb;uC=1;function n(){return[]}return eb=n,eb}var tb,dC;function FK(){if(dC)return tb;dC=1;var n=RK(),e=MK(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),n(i(s),function(o){return r.call(s,o)}))}:e;return tb=a,tb}var nb,hC;function LK(){if(hC)return nb;hC=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return nb=n,nb}var rb,fC;function UK(){if(fC)return rb;fC=1;var n=Ds(),e=js(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return rb=r,rb}var ib,pC;function a_(){if(pC)return ib;pC=1;var n=UK(),e=js(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,a=n((function(){return arguments})())?n:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return ib=a,ib}var kd={exports:{}},ab,mC;function BK(){if(mC)return ab;mC=1;function n(){return!1}return ab=n,ab}kd.exports;var gC;function rM(){return gC||(gC=1,(function(n,e){var t=Wa(),r=BK(),i=e&&!e.nodeType&&e,a=i&&!0&&n&&!n.nodeType&&n,s=a&&a.exports===i,o=s?t.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||r;n.exports=u})(kd,kd.exports)),kd.exports}var sb,yC;function s_(){if(yC)return sb;yC=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var a=typeof r;return i=i??n,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return sb=t,sb}var ob,vC;function o_(){if(vC)return ob;vC=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return ob=e,ob}var lb,xC;function $K(){if(xC)return lb;xC=1;var n=Ds(),e=o_(),t=js(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",h="[object Object]",f="[object RegExp]",p="[object Set]",y="[object String]",g="[object WeakMap]",m="[object ArrayBuffer]",v="[object DataView]",x="[object Float32Array]",b="[object Float64Array]",A="[object Int8Array]",w="[object Int16Array]",S="[object Int32Array]",E="[object Uint8Array]",_="[object Uint8ClampedArray]",D="[object Uint16Array]",C="[object Uint32Array]",k={};k[x]=k[b]=k[A]=k[w]=k[S]=k[E]=k[_]=k[D]=k[C]=!0,k[r]=k[i]=k[m]=k[a]=k[v]=k[s]=k[o]=k[c]=k[u]=k[d]=k[h]=k[f]=k[p]=k[y]=k[g]=!1;function T(N){return t(N)&&e(N.length)&&!!k[n(N)]}return lb=T,lb}var cb,bC;function iM(){if(bC)return cb;bC=1;function n(e){return function(t){return e(t)}}return cb=n,cb}var Od={exports:{}};Od.exports;var wC;function zK(){return wC||(wC=1,(function(n,e){var t=ER(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,a=i&&i.exports===r,s=a&&t.process,o=(function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}})();n.exports=o})(Od,Od.exports)),Od.exports}var ub,AC;function aM(){if(AC)return ub;AC=1;var n=$K(),e=iM(),t=zK(),r=t&&t.isTypedArray,i=r?e(r):n;return ub=i,ub}var db,SC;function qK(){if(SC)return db;SC=1;var n=LK(),e=a_(),t=ri(),r=rM(),i=s_(),a=aM(),s=Object.prototype,o=s.hasOwnProperty;function c(u,d){var h=t(u),f=!h&&e(u),p=!h&&!f&&r(u),y=!h&&!f&&!p&&a(u),g=h||f||p||y,m=g?n(u.length,String):[],v=m.length;for(var x in u)(d||o.call(u,x))&&!(g&&(x=="length"||p&&(x=="offset"||x=="parent")||y&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||i(x,v)))&&m.push(x);return m}return db=c,db}var hb,EC;function WK(){if(EC)return hb;EC=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return hb=e,hb}var fb,_C;function sM(){if(_C)return fb;_C=1;function n(e,t){return function(r){return e(t(r))}}return fb=n,fb}var pb,DC;function HK(){if(DC)return pb;DC=1;var n=sM(),e=n(Object.keys,Object);return pb=e,pb}var mb,jC;function VK(){if(jC)return mb;jC=1;var n=WK(),e=HK(),t=Object.prototype,r=t.hasOwnProperty;function i(a){if(!n(a))return e(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return mb=i,mb}var gb,TC;function mf(){if(TC)return gb;TC=1;var n=HE(),e=o_();function t(r){return r!=null&&e(r.length)&&!n(r)}return gb=t,gb}var yb,CC;function Ly(){if(CC)return yb;CC=1;var n=qK(),e=VK(),t=mf();function r(i){return t(i)?n(i):e(i)}return yb=r,yb}var vb,NC;function GK(){if(NC)return vb;NC=1;var n=IK(),e=FK(),t=Ly();function r(i){return n(i,t,e)}return vb=r,vb}var xb,kC;function YK(){if(kC)return xb;kC=1;var n=GK(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(a,s,o,c,u,d){var h=o&e,f=n(a),p=f.length,y=n(s),g=y.length;if(p!=g&&!h)return!1;for(var m=p;m--;){var v=f[m];if(!(h?v in s:r.call(s,v)))return!1}var x=d.get(a),b=d.get(s);if(x&&b)return x==s&&b==a;var A=!0;d.set(a,s),d.set(s,a);for(var w=h;++m<p;){v=f[m];var S=a[v],E=s[v];if(c)var _=h?c(E,S,v,s,a,d):c(S,E,v,a,s,d);if(!(_===void 0?S===E||u(S,E,o,c,d):_)){A=!1;break}w||(w=v=="constructor")}if(A&&!w){var D=a.constructor,C=s.constructor;D!=C&&"constructor"in a&&"constructor"in s&&!(typeof D=="function"&&D instanceof D&&typeof C=="function"&&C instanceof C)&&(A=!1)}return d.delete(a),d.delete(s),A}return xb=i,xb}var bb,OC;function KK(){if(OC)return bb;OC=1;var n=Cl(),e=Wa(),t=n(e,"DataView");return bb=t,bb}var wb,PC;function XK(){if(PC)return wb;PC=1;var n=Cl(),e=Wa(),t=n(e,"Promise");return wb=t,wb}var Ab,IC;function oM(){if(IC)return Ab;IC=1;var n=Cl(),e=Wa(),t=n(e,"Set");return Ab=t,Ab}var Sb,RC;function JK(){if(RC)return Sb;RC=1;var n=Cl(),e=Wa(),t=n(e,"WeakMap");return Sb=t,Sb}var Eb,MC;function ZK(){if(MC)return Eb;MC=1;var n=KK(),e=GE(),t=XK(),r=oM(),i=JK(),a=Ds(),s=_R(),o="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",h="[object WeakMap]",f="[object DataView]",p=s(n),y=s(e),g=s(t),m=s(r),v=s(i),x=a;return(n&&x(new n(new ArrayBuffer(1)))!=f||e&&x(new e)!=o||t&&x(t.resolve())!=u||r&&x(new r)!=d||i&&x(new i)!=h)&&(x=function(b){var A=a(b),w=A==c?b.constructor:void 0,S=w?s(w):"";if(S)switch(S){case p:return f;case y:return o;case g:return u;case m:return d;case v:return h}return A}),Eb=x,Eb}var _b,FC;function QK(){if(FC)return _b;FC=1;var n=JR(),e=tM(),t=PK(),r=YK(),i=ZK(),a=ri(),s=rM(),o=aM(),c=1,u="[object Arguments]",d="[object Array]",h="[object Object]",f=Object.prototype,p=f.hasOwnProperty;function y(g,m,v,x,b,A){var w=a(g),S=a(m),E=w?d:i(g),_=S?d:i(m);E=E==u?h:E,_=_==u?h:_;var D=E==h,C=_==h,k=E==_;if(k&&s(g)){if(!s(m))return!1;w=!0,D=!1}if(k&&!D)return A||(A=new n),w||o(g)?e(g,m,v,x,b,A):t(g,m,E,v,x,b,A);if(!(v&c)){var T=D&&p.call(g,"__wrapped__"),N=C&&p.call(m,"__wrapped__");if(T||N){var j=T?g.value():g,R=N?m.value():m;return A||(A=new n),b(j,R,v,x,A)}}return k?(A||(A=new n),r(g,m,v,x,b,A)):!1}return _b=y,_b}var Db,LC;function l_(){if(LC)return Db;LC=1;var n=QK(),e=js();function t(r,i,a,s,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,a,s,t,o)}return Db=t,Db}var jb,UC;function eX(){if(UC)return jb;UC=1;var n=JR(),e=l_(),t=1,r=2;function i(a,s,o,c){var u=o.length,d=u,h=!c;if(a==null)return!d;for(a=Object(a);u--;){var f=o[u];if(h&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++u<d;){f=o[u];var p=f[0],y=a[p],g=f[1];if(h&&f[2]){if(y===void 0&&!(p in a))return!1}else{var m=new n;if(c)var v=c(y,g,p,a,s,m);if(!(v===void 0?e(g,y,t|r,c,m):v))return!1}}return!0}return jb=i,jb}var Tb,BC;function lM(){if(BC)return Tb;BC=1;var n=po();function e(t){return t===t&&!n(t)}return Tb=e,Tb}var Cb,$C;function tX(){if($C)return Cb;$C=1;var n=lM(),e=Ly();function t(r){for(var i=e(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,n(o)]}return i}return Cb=t,Cb}var Nb,zC;function cM(){if(zC)return Nb;zC=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return Nb=n,Nb}var kb,qC;function nX(){if(qC)return kb;qC=1;var n=eX(),e=tX(),t=cM();function r(i){var a=e(i);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(s){return s===i||n(s,i,a)}}return kb=r,kb}var Ob,WC;function rX(){if(WC)return Ob;WC=1;function n(e,t){return e!=null&&t in Object(e)}return Ob=n,Ob}var Pb,HC;function iX(){if(HC)return Pb;HC=1;var n=TR(),e=a_(),t=ri(),r=s_(),i=o_(),a=Py();function s(o,c,u){c=n(c,o);for(var d=-1,h=c.length,f=!1;++d<h;){var p=a(c[d]);if(!(f=o!=null&&u(o,p)))break;o=o[p]}return f||++d!=h?f:(h=o==null?0:o.length,!!h&&i(h)&&r(p,h)&&(t(o)||e(o)))}return Pb=s,Pb}var Ib,VC;function aX(){if(VC)return Ib;VC=1;var n=rX(),e=iX();function t(r,i){return r!=null&&e(r,i,n)}return Ib=t,Ib}var Rb,GC;function sX(){if(GC)return Rb;GC=1;var n=l_(),e=CR(),t=aX(),r=WE(),i=lM(),a=cM(),s=Py(),o=1,c=2;function u(d,h){return r(d)&&i(h)?a(s(d),h):function(f){var p=e(f,d);return p===void 0&&p===h?t(f,d):n(h,p,o|c)}}return Rb=u,Rb}var Mb,YC;function ku(){if(YC)return Mb;YC=1;function n(e){return e}return Mb=n,Mb}var Fb,KC;function oX(){if(KC)return Fb;KC=1;function n(e){return function(t){return t?.[e]}}return Fb=n,Fb}var Lb,XC;function lX(){if(XC)return Lb;XC=1;var n=XE();function e(t){return function(r){return n(r,t)}}return Lb=e,Lb}var Ub,JC;function cX(){if(JC)return Ub;JC=1;var n=oX(),e=lX(),t=WE(),r=Py();function i(a){return t(a)?n(r(a)):e(a)}return Ub=i,Ub}var Bb,ZC;function Ha(){if(ZC)return Bb;ZC=1;var n=nX(),e=sX(),t=ku(),r=ri(),i=cX();function a(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?r(s)?e(s[0],s[1]):n(s):i(s)}return Bb=a,Bb}var $b,QC;function uM(){if(QC)return $b;QC=1;function n(e,t,r,i){for(var a=e.length,s=r+(i?1:-1);i?s--:++s<a;)if(t(e[s],s,e))return s;return-1}return $b=n,$b}var zb,e4;function uX(){if(e4)return zb;e4=1;function n(e){return e!==e}return zb=n,zb}var qb,t4;function dX(){if(t4)return qb;t4=1;function n(e,t,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}return qb=n,qb}var Wb,n4;function hX(){if(n4)return Wb;n4=1;var n=uM(),e=uX(),t=dX();function r(i,a,s){return a===a?t(i,a,s):n(i,e,s)}return Wb=r,Wb}var Hb,r4;function fX(){if(r4)return Hb;r4=1;var n=hX();function e(t,r){var i=t==null?0:t.length;return!!i&&n(t,r,0)>-1}return Hb=e,Hb}var Vb,i4;function pX(){if(i4)return Vb;i4=1;function n(e,t,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(t,e[i]))return!0;return!1}return Vb=n,Vb}var Gb,a4;function mX(){if(a4)return Gb;a4=1;function n(){}return Gb=n,Gb}var Yb,s4;function gX(){if(s4)return Yb;s4=1;var n=oM(),e=mX(),t=i_(),r=1/0,i=n&&1/t(new n([,-0]))[1]==r?function(a){return new n(a)}:e;return Yb=i,Yb}var Kb,o4;function yX(){if(o4)return Kb;o4=1;var n=ZR(),e=fX(),t=pX(),r=eM(),i=gX(),a=i_(),s=200;function o(c,u,d){var h=-1,f=e,p=c.length,y=!0,g=[],m=g;if(d)y=!1,f=t;else if(p>=s){var v=u?null:i(c);if(v)return a(v);y=!1,f=r,m=new n}else m=u?[]:g;e:for(;++h<p;){var x=c[h],b=u?u(x):x;if(x=d||x!==0?x:0,y&&b===b){for(var A=m.length;A--;)if(m[A]===b)continue e;u&&m.push(b),g.push(x)}else f(m,b,d)||(m!==g&&m.push(b),g.push(x))}return g}return Kb=o,Kb}var Xb,l4;function vX(){if(l4)return Xb;l4=1;var n=Ha(),e=yX();function t(r,i){return r&&r.length?e(r,n(i,2)):[]}return Xb=t,Xb}var xX=vX();const c4=It(xX);function dM(n,e,t){return e===!0?c4(n,t):ft(e)?c4(n,e):n}function Wc(n){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(n)}var bX=["ref"];function u4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ya(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?u4(Object(t),!0).forEach(function(r){Uy(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):u4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function wX(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function d4(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,fM(r.key),r)}}function AX(n,e,t){return e&&d4(n.prototype,e),t&&d4(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function SX(n,e,t){return e=Om(e),EX(n,hM()?Reflect.construct(e,t||[],Om(n).constructor):e.apply(n,t))}function EX(n,e){if(e&&(Wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _X(n)}function _X(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function hM(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hM=function(){return!!n})()}function Om(n){return Om=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Om(n)}function DX(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&NA(n,e)}function NA(n,e){return NA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NA(n,e)}function Uy(n,e,t){return e=fM(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fM(n){var e=jX(n,"string");return Wc(e)=="symbol"?e:e+""}function jX(n,e){if(Wc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function TX(n,e){if(n==null)return{};var t=CX(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function CX(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function NX(n){return n.value}function kX(n,e){if(fe.isValidElement(n))return fe.cloneElement(n,e);if(typeof n=="function")return fe.createElement(n,e);e.ref;var t=TX(e,bX);return fe.createElement(r_,t)}var h4=1,Js=(function(n){function e(){var t;wX(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=SX(this,e,[].concat(i)),Uy(t,"lastBoundingBox",{width:-1,height:-1}),t}return DX(e,n),AX(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>h4||Math.abs(i.height-this.lastBoundingBox.height)>h4)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ya({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();h={left:((u||0)-p.width)/2}}else h=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var y=this.getBBoxSnapshot();f={top:((d||0)-y.height)/2}}else f=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ya(Ya({},h),f)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,h=Ya(Ya({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return fe.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(p){r.wrapperNode=p}},kX(a,Ya(Ya({},this.props),{},{payload:dM(d,u,NX)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Ya(Ya({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&Fe(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])})(M.PureComponent);Uy(Js,"displayName","Legend");Uy(Js,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Jb,f4;function OX(){if(f4)return Jb;f4=1;var n=pf(),e=a_(),t=ri(),r=n?n.isConcatSpreadable:void 0;function i(a){return t(a)||e(a)||!!(r&&a&&a[r])}return Jb=i,Jb}var Zb,p4;function pM(){if(p4)return Zb;p4=1;var n=nM(),e=OX();function t(r,i,a,s,o){var c=-1,u=r.length;for(a||(a=e),o||(o=[]);++c<u;){var d=r[c];i>0&&a(d)?i>1?t(d,i-1,a,s,o):n(o,d):s||(o[o.length]=d)}return o}return Zb=t,Zb}var Qb,m4;function PX(){if(m4)return Qb;m4=1;function n(e){return function(t,r,i){for(var a=-1,s=Object(t),o=i(t),c=o.length;c--;){var u=o[e?c:++a];if(r(s[u],u,s)===!1)break}return t}}return Qb=n,Qb}var e1,g4;function IX(){if(g4)return e1;g4=1;var n=PX(),e=n();return e1=e,e1}var t1,y4;function mM(){if(y4)return t1;y4=1;var n=IX(),e=Ly();function t(r,i){return r&&n(r,i,e)}return t1=t,t1}var n1,v4;function RX(){if(v4)return n1;v4=1;var n=mf();function e(t,r){return function(i,a){if(i==null)return i;if(!n(i))return t(i,a);for(var s=i.length,o=r?s:-1,c=Object(i);(r?o--:++o<s)&&a(c[o],o,c)!==!1;);return i}}return n1=e,n1}var r1,x4;function c_(){if(x4)return r1;x4=1;var n=mM(),e=RX(),t=e(n);return r1=t,r1}var i1,b4;function gM(){if(b4)return i1;b4=1;var n=c_(),e=mf();function t(r,i){var a=-1,s=e(r)?Array(r.length):[];return n(r,function(o,c,u){s[++a]=i(o,c,u)}),s}return i1=t,i1}var a1,w4;function MX(){if(w4)return a1;w4=1;function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}return a1=n,a1}var s1,A4;function FX(){if(A4)return s1;A4=1;var n=ju();function e(t,r){if(t!==r){var i=t!==void 0,a=t===null,s=t===t,o=n(t),c=r!==void 0,u=r===null,d=r===r,h=n(r);if(!u&&!h&&!o&&t>r||o&&c&&d&&!u&&!h||a&&c&&d||!i&&d||!s)return 1;if(!a&&!o&&!h&&t<r||h&&i&&s&&!a&&!o||u&&i&&s||!c&&s||!d)return-1}return 0}return s1=e,s1}var o1,S4;function LX(){if(S4)return o1;S4=1;var n=FX();function e(t,r,i){for(var a=-1,s=t.criteria,o=r.criteria,c=s.length,u=i.length;++a<c;){var d=n(s[a],o[a]);if(d){if(a>=u)return d;var h=i[a];return d*(h=="desc"?-1:1)}}return t.index-r.index}return o1=e,o1}var l1,E4;function UX(){if(E4)return l1;E4=1;var n=KE(),e=XE(),t=Ha(),r=gM(),i=MX(),a=iM(),s=LX(),o=ku(),c=ri();function u(d,h,f){h.length?h=n(h,function(g){return c(g)?function(m){return e(m,g.length===1?g[0]:g)}:g}):h=[o];var p=-1;h=n(h,a(t));var y=r(d,function(g,m,v){var x=n(h,function(b){return b(g)});return{criteria:x,index:++p,value:g}});return i(y,function(g,m){return s(g,m,f)})}return l1=u,l1}var c1,_4;function BX(){if(_4)return c1;_4=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return c1=n,c1}var u1,D4;function $X(){if(D4)return u1;D4=1;var n=BX(),e=Math.max;function t(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,c=e(s.length-i,0),u=Array(c);++o<c;)u[o]=s[i+o];o=-1;for(var d=Array(i+1);++o<i;)d[o]=s[o];return d[i]=a(u),n(r,this,d)}}return u1=t,u1}var d1,j4;function zX(){if(j4)return d1;j4=1;function n(e){return function(){return e}}return d1=n,d1}var h1,T4;function yM(){if(T4)return h1;T4=1;var n=Cl(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return h1=e,h1}var f1,C4;function qX(){if(C4)return f1;C4=1;var n=zX(),e=yM(),t=ku(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(a),writable:!0})}:t;return f1=r,f1}var p1,N4;function WX(){if(N4)return p1;N4=1;var n=800,e=16,t=Date.now;function r(i){var a=0,s=0;return function(){var o=t(),c=e-(o-s);if(s=o,c>0){if(++a>=n)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return p1=r,p1}var m1,k4;function HX(){if(k4)return m1;k4=1;var n=qX(),e=WX(),t=e(n);return m1=t,m1}var g1,O4;function VX(){if(O4)return g1;O4=1;var n=ku(),e=$X(),t=HX();function r(i,a){return t(e(i,a,n),i+"")}return g1=r,g1}var y1,P4;function By(){if(P4)return y1;P4=1;var n=VE(),e=mf(),t=s_(),r=po();function i(a,s,o){if(!r(o))return!1;var c=typeof s;return(c=="number"?e(o)&&t(s,o.length):c=="string"&&s in o)?n(o[s],a):!1}return y1=i,y1}var v1,I4;function GX(){if(I4)return v1;I4=1;var n=pM(),e=UX(),t=VX(),r=By(),i=t(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),e(a,n(s,1),[])});return v1=i,v1}var YX=GX();const u_=It(YX);function dh(n){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(n)}function kA(){return kA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kA.apply(this,arguments)}function KX(n,e){return QX(n)||ZX(n,e)||JX(n,e)||XX()}function XX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JX(n,e){if(n){if(typeof n=="string")return R4(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return R4(n,e)}}function R4(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function ZX(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(c=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function QX(n){if(Array.isArray(n))return n}function M4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function x1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?M4(Object(t),!0).forEach(function(r){eJ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):M4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function eJ(n,e,t){return e=tJ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tJ(n){var e=nJ(n,"string");return dh(e)=="symbol"?e:e+""}function nJ(n,e){if(dh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(dh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rJ(n){return Array.isArray(n)&&Vn(n[0])&&Vn(n[1])?n.join(" ~ "):n}var iJ=function(e){var t=e.separator,r=t===void 0?" : ":t,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,h=e.formatter,f=e.itemSorter,p=e.wrapperClassName,y=e.labelClassName,g=e.label,m=e.labelFormatter,v=e.accessibilityLayer,x=v===void 0?!1:v,b=function(){if(d&&d.length){var T={padding:0,margin:0},N=(f?u_(d,f):d).map(function(j,R){if(j.type==="none")return null;var P=x1({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},o),F=j.formatter||h||rJ,q=j.value,$=j.name,B=q,I=$;if(F&&B!=null&&I!=null){var L=F(q,$,j,R,d);if(Array.isArray(L)){var U=KX(L,2);B=U[0],I=U[1]}else B=L}return fe.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:P},Vn(I)?fe.createElement("span",{className:"recharts-tooltip-item-name"},I):null,Vn(I)?fe.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,fe.createElement("span",{className:"recharts-tooltip-item-value"},B),fe.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return fe.createElement("ul",{className:"recharts-tooltip-item-list",style:T},N)}return null},A=x1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),w=x1({margin:0},u),S=!xt(g),E=S?g:"",_=wt("recharts-default-tooltip",p),D=wt("recharts-tooltip-label",y);S&&m&&d!==void 0&&d!==null&&(E=m(g,d));var C=x?{role:"status","aria-live":"assertive"}:{};return fe.createElement("div",kA({className:_,style:A},C),fe.createElement("p",{className:D,style:w},fe.isValidElement(E)?E:"".concat(E)),b())};function hh(n){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hh(n)}function Bf(n,e,t){return e=aJ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aJ(n){var e=sJ(n,"string");return hh(e)=="symbol"?e:e+""}function sJ(n,e){if(hh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(hh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var td="recharts-tooltip-wrapper",oJ={visibility:"hidden"};function lJ(n){var e=n.coordinate,t=n.translateX,r=n.translateY;return wt(td,Bf(Bf(Bf(Bf({},"".concat(td,"-right"),Fe(t)&&e&&Fe(e.x)&&t>=e.x),"".concat(td,"-left"),Fe(t)&&e&&Fe(e.x)&&t<e.x),"".concat(td,"-bottom"),Fe(r)&&e&&Fe(e.y)&&r>=e.y),"".concat(td,"-top"),Fe(r)&&e&&Fe(e.y)&&r<e.y))}function F4(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.key,i=n.offsetTopLeft,a=n.position,s=n.reverseDirection,o=n.tooltipDimension,c=n.viewBox,u=n.viewBoxDimension;if(a&&Fe(a[r]))return a[r];var d=t[r]-o-i,h=t[r]+i;if(e[r])return s[r]?d:h;if(s[r]){var f=d,p=c[r];return f<p?Math.max(h,c[r]):Math.max(d,c[r])}var y=h+o,g=c[r]+u;return y>g?Math.max(d,c[r]):Math.max(h,c[r])}function cJ(n){var e=n.translateX,t=n.translateY,r=n.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function uJ(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.offsetTopLeft,i=n.position,a=n.reverseDirection,s=n.tooltipBox,o=n.useTranslate3d,c=n.viewBox,u,d,h;return s.height>0&&s.width>0&&t?(d=F4({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),h=F4({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=cJ({translateX:d,translateY:h,useTranslate3d:o})):u=oJ,{cssProperties:u,cssClasses:lJ({translateX:d,translateY:h,coordinate:t})}}function Hc(n){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(n)}function L4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function U4(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L4(Object(t),!0).forEach(function(r){PA(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function dJ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function hJ(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,xM(r.key),r)}}function fJ(n,e,t){return e&&hJ(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function pJ(n,e,t){return e=Pm(e),mJ(n,vM()?Reflect.construct(e,t||[],Pm(n).constructor):e.apply(n,t))}function mJ(n,e){if(e&&(Hc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gJ(n)}function gJ(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vM(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vM=function(){return!!n})()}function Pm(n){return Pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pm(n)}function yJ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&OA(n,e)}function OA(n,e){return OA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OA(n,e)}function PA(n,e,t){return e=xM(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xM(n){var e=vJ(n,"string");return Hc(e)=="symbol"?e:e+""}function vJ(n,e){if(Hc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var B4=1,xJ=(function(n){function e(){var t;dJ(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=pJ(this,e,[].concat(i)),PA(t,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),PA(t,"handleKeyDown",function(s){if(s.key==="Escape"){var o,c,u,d;t.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=t.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(u=(d=t.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),t}return yJ(e,n),fJ(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>B4||Math.abs(r.height-this.state.lastBoundingBox.height)>B4)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,h=i.hasPayload,f=i.isAnimationActive,p=i.offset,y=i.position,g=i.reverseDirection,m=i.useTranslate3d,v=i.viewBox,x=i.wrapperStyle,b=uJ({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:p,position:y,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:v}),A=b.cssClasses,w=b.cssProperties,S=U4(U4({transition:f&&a?"transform ".concat(o,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},x);return fe.createElement("div",{tabIndex:-1,className:A,style:S,ref:function(_){r.wrapperNode=_}},u)}}])})(M.PureComponent),bJ=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Nl={isSsr:bJ()};function Vc(n){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(n)}function $4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function z4(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$4(Object(t),!0).forEach(function(r){d_(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function wJ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function AJ(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,wM(r.key),r)}}function SJ(n,e,t){return e&&AJ(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function EJ(n,e,t){return e=Im(e),_J(n,bM()?Reflect.construct(e,t||[],Im(n).constructor):e.apply(n,t))}function _J(n,e){if(e&&(Vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DJ(n)}function DJ(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function bM(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bM=function(){return!!n})()}function Im(n){return Im=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Im(n)}function jJ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&IA(n,e)}function IA(n,e){return IA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},IA(n,e)}function d_(n,e,t){return e=wM(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wM(n){var e=TJ(n,"string");return Vc(e)=="symbol"?e:e+""}function TJ(n,e){if(Vc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Vc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function CJ(n){return n.dataKey}function NJ(n,e){return fe.isValidElement(n)?fe.cloneElement(n,e):typeof n=="function"?fe.createElement(n,e):fe.createElement(iJ,e)}var hi=(function(n){function e(){return wJ(this,e),EJ(this,e,arguments)}return jJ(e,n),SJ(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,h=i.filterNull,f=i.isAnimationActive,p=i.offset,y=i.payload,g=i.payloadUniqBy,m=i.position,v=i.reverseDirection,x=i.useTranslate3d,b=i.viewBox,A=i.wrapperStyle,w=y??[];h&&w.length&&(w=dM(y.filter(function(E){return E.value!=null&&(E.hide!==!0||r.props.includeHidden)}),g,CJ));var S=w.length>0;return fe.createElement(xJ,{allowEscapeViewBox:s,animationDuration:o,animationEasing:c,isAnimationActive:f,active:a,coordinate:d,hasPayload:S,offset:p,position:m,reverseDirection:v,useTranslate3d:x,viewBox:b,wrapperStyle:A},NJ(u,z4(z4({},this.props),{},{payload:w})))}}])})(M.PureComponent);d_(hi,"displayName","Tooltip");d_(hi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Nl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var b1,q4;function kJ(){if(q4)return b1;q4=1;var n=Wa(),e=function(){return n.Date.now()};return b1=e,b1}var w1,W4;function OJ(){if(W4)return w1;W4=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return w1=e,w1}var A1,H4;function PJ(){if(H4)return A1;H4=1;var n=OJ(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return A1=t,A1}var S1,V4;function AM(){if(V4)return S1;V4=1;var n=PJ(),e=po(),t=ju(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function c(u){if(typeof u=="number")return u;if(t(u))return r;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=n(u);var h=a.test(u);return h||s.test(u)?o(u.slice(2),h?2:8):i.test(u)?r:+u}return S1=c,S1}var E1,G4;function IJ(){if(G4)return E1;G4=1;var n=po(),e=kJ(),t=AM(),r="Expected a function",i=Math.max,a=Math.min;function s(o,c,u){var d,h,f,p,y,g,m=0,v=!1,x=!1,b=!0;if(typeof o!="function")throw new TypeError(r);c=t(c)||0,n(u)&&(v=!!u.leading,x="maxWait"in u,f=x?i(t(u.maxWait)||0,c):f,b="trailing"in u?!!u.trailing:b);function A(N){var j=d,R=h;return d=h=void 0,m=N,p=o.apply(R,j),p}function w(N){return m=N,y=setTimeout(_,c),v?A(N):p}function S(N){var j=N-g,R=N-m,P=c-j;return x?a(P,f-R):P}function E(N){var j=N-g,R=N-m;return g===void 0||j>=c||j<0||x&&R>=f}function _(){var N=e();if(E(N))return D(N);y=setTimeout(_,S(N))}function D(N){return y=void 0,b&&d?A(N):(d=h=void 0,p)}function C(){y!==void 0&&clearTimeout(y),m=0,d=g=h=y=void 0}function k(){return y===void 0?p:D(e())}function T(){var N=e(),j=E(N);if(d=arguments,h=this,g=N,j){if(y===void 0)return w(g);if(x)return clearTimeout(y),y=setTimeout(_,c),A(g)}return y===void 0&&(y=setTimeout(_,c)),p}return T.cancel=C,T.flush=k,T}return E1=s,E1}var _1,Y4;function RJ(){if(Y4)return _1;Y4=1;var n=IJ(),e=po(),t="Expected a function";function r(i,a,s){var o=!0,c=!0;if(typeof i!="function")throw new TypeError(t);return e(s)&&(o="leading"in s?!!s.leading:o,c="trailing"in s?!!s.trailing:c),n(i,a,{leading:o,maxWait:a,trailing:c})}return _1=r,_1}var MJ=RJ();const SM=It(MJ);function fh(n){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(n)}function K4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $f(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?K4(Object(t),!0).forEach(function(r){FJ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):K4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function FJ(n,e,t){return e=LJ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LJ(n){var e=UJ(n,"string");return fh(e)=="symbol"?e:e+""}function UJ(n,e){if(fh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function BJ(n,e){return WJ(n)||qJ(n,e)||zJ(n,e)||$J()}function $J(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zJ(n,e){if(n){if(typeof n=="string")return X4(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X4(n,e)}}function X4(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function qJ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(c=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function WJ(n){if(Array.isArray(n))return n}var zf=M.forwardRef(function(n,e){var t=n.aspect,r=n.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=n.width,s=a===void 0?"100%":a,o=n.height,c=o===void 0?"100%":o,u=n.minWidth,d=u===void 0?0:u,h=n.minHeight,f=n.maxHeight,p=n.children,y=n.debounce,g=y===void 0?0:y,m=n.id,v=n.className,x=n.onResize,b=n.style,A=b===void 0?{}:b,w=M.useRef(null),S=M.useRef();S.current=x,M.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var E=M.useState({containerWidth:i.width,containerHeight:i.height}),_=BJ(E,2),D=_[0],C=_[1],k=M.useCallback(function(N,j){C(function(R){var P=Math.round(N),F=Math.round(j);return R.containerWidth===P&&R.containerHeight===F?R:{containerWidth:P,containerHeight:F}})},[]);M.useEffect(function(){var N=function($){var B,I=$[0].contentRect,L=I.width,U=I.height;k(L,U),(B=S.current)===null||B===void 0||B.call(S,L,U)};g>0&&(N=SM(N,g,{trailing:!0,leading:!1}));var j=new ResizeObserver(N),R=w.current.getBoundingClientRect(),P=R.width,F=R.height;return k(P,F),j.observe(w.current),function(){j.disconnect()}},[k,g]);var T=M.useMemo(function(){var N=D.containerWidth,j=D.containerHeight;if(N<0||j<0)return null;ca(qo(s)||qo(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),ca(!t||t>0,"The aspect(%s) must be greater than zero.",t);var R=qo(s)?N:s,P=qo(c)?j:c;t&&t>0&&(R?P=R/t:P&&(R=P*t),f&&P>f&&(P=f)),ca(R>0||P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,P,s,c,d,h,t);var F=!Array.isArray(p)&&ds(p.type).endsWith("Chart");return fe.Children.map(p,function(q){return fe.isValidElement(q)?M.cloneElement(q,$f({width:R,height:P},F?{style:$f({height:"100%",width:"100%",maxHeight:P,maxWidth:R},q.props.style)}:{})):q})},[t,p,c,f,h,d,D,s]);return fe.createElement("div",{id:m?"".concat(m):void 0,className:wt("recharts-responsive-container",v),style:$f($f({},A),{},{width:s,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:w},T)}),ph=function(e){return null};ph.displayName="Cell";function mh(n){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mh(n)}function J4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function RA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?J4(Object(t),!0).forEach(function(r){HJ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):J4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function HJ(n,e,t){return e=VJ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VJ(n){var e=GJ(n,"string");return mh(e)=="symbol"?e:e+""}function GJ(n,e){if(mh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(mh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Wl={widthCache:{},cacheCount:0},YJ=2e3,KJ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Z4="recharts_measurement_span";function XJ(n){var e=RA({},n);return Object.keys(e).forEach(function(t){e[t]||delete e[t]}),e}var $d=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Nl.isSsr)return{width:0,height:0};var r=XJ(t),i=JSON.stringify({text:e,copyStyle:r});if(Wl.widthCache[i])return Wl.widthCache[i];try{var a=document.getElementById(Z4);a||(a=document.createElement("span"),a.setAttribute("id",Z4),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=RA(RA({},KJ),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),c={width:o.width,height:o.height};return Wl.widthCache[i]=c,++Wl.cacheCount>YJ&&(Wl.cacheCount=0,Wl.widthCache={}),c}catch{return{width:0,height:0}}},JJ=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function gh(n){"@babel/helpers - typeof";return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(n)}function Rm(n,e){return tZ(n)||eZ(n,e)||QJ(n,e)||ZJ()}function ZJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QJ(n,e){if(n){if(typeof n=="string")return Q4(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q4(n,e)}}function Q4(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function eZ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function tZ(n){if(Array.isArray(n))return n}function nZ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function eN(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,iZ(r.key),r)}}function rZ(n,e,t){return e&&eN(n.prototype,e),t&&eN(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function iZ(n){var e=aZ(n,"string");return gh(e)=="symbol"?e:e+""}function aZ(n,e){if(gh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(gh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var tN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,nN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sZ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,oZ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,EM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},lZ=Object.keys(EM),uc="NaN";function cZ(n,e){return n*EM[e]}var qf=(function(){function n(e,t){nZ(this,n),this.num=e,this.unit=t,this.num=e,this.unit=t,Number.isNaN(e)&&(this.unit=""),t!==""&&!sZ.test(t)&&(this.num=NaN,this.unit=""),lZ.includes(t)&&(this.num=cZ(e,t),this.unit="px")}return rZ(n,[{key:"add",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var r,i=(r=oZ.exec(t))!==null&&r!==void 0?r:[],a=Rm(i,3),s=a[1],o=a[2];return new n(parseFloat(s),o??"")}}])})();function _M(n){if(n.includes(uc))return uc;for(var e=n;e.includes("*")||e.includes("/");){var t,r=(t=tN.exec(e))!==null&&t!==void 0?t:[],i=Rm(r,4),a=i[1],s=i[2],o=i[3],c=qf.parse(a??""),u=qf.parse(o??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return uc;e=e.replace(tN,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=nN.exec(e))!==null&&h!==void 0?h:[],p=Rm(f,4),y=p[1],g=p[2],m=p[3],v=qf.parse(y??""),x=qf.parse(m??""),b=g==="+"?v.add(x):v.subtract(x);if(b.isNaN())return uc;e=e.replace(nN,b.toString())}return e}var rN=/\(([^()]*)\)/;function uZ(n){for(var e=n;e.includes("(");){var t=rN.exec(e),r=Rm(t,2),i=r[1];e=e.replace(rN,_M(i))}return e}function dZ(n){var e=n.replace(/\s+/g,"");return e=uZ(e),e=_M(e),e}function hZ(n){try{return dZ(n)}catch{return uc}}function D1(n){var e=hZ(n.slice(5,-1));return e===uc?"":e}var fZ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],pZ=["dx","dy","angle","className","breakAll"];function MA(){return MA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},MA.apply(this,arguments)}function iN(n,e){if(n==null)return{};var t=mZ(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function mZ(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function aN(n,e){return xZ(n)||vZ(n,e)||yZ(n,e)||gZ()}function gZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yZ(n,e){if(n){if(typeof n=="string")return sN(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sN(n,e)}}function sN(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function vZ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function xZ(n){if(Array.isArray(n))return n}var DM=/[ \f\n\r\t\v\u2028\u2029]+/,jM=function(e){var t=e.children,r=e.breakAll,i=e.style;try{var a=[];xt(t)||(r?a=t.toString().split(""):a=t.toString().split(DM));var s=a.map(function(c){return{word:c,width:$d(c,i).width}}),o=r?0:$d(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},bZ=function(e,t,r,i,a){var s=e.maxLines,o=e.children,c=e.style,u=e.breakAll,d=Fe(s),h=o,f=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce(function(P,F){var q=F.word,$=F.width,B=P[P.length-1];if(B&&(i==null||a||B.width+$+r<Number(i)))B.words.push(q),B.width+=$+r;else{var I={words:[q],width:$};P.push(I)}return P},[])},p=f(t),y=function(R){return R.reduce(function(P,F){return P.width>F.width?P:F})};if(!d)return p;for(var g="…",m=function(R){var P=h.slice(0,R),F=jM({breakAll:u,style:c,children:P+g}).wordsWithComputedWidth,q=f(F),$=q.length>s||y(q).width>Number(i);return[$,q]},v=0,x=h.length-1,b=0,A;v<=x&&b<=h.length-1;){var w=Math.floor((v+x)/2),S=w-1,E=m(S),_=aN(E,2),D=_[0],C=_[1],k=m(w),T=aN(k,1),N=T[0];if(!D&&!N&&(v=w+1),D&&N&&(x=w-1),!D&&N){A=C;break}b++}return A||p},oN=function(e){var t=xt(e)?[]:e.toString().split(DM);return[{words:t}]},wZ=function(e){var t=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((t||r)&&!Nl.isSsr){var c,u,d=jM({breakAll:s,children:i,style:a});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;c=h,u=f}else return oN(i);return bZ({breakAll:s,children:i,maxLines:o,style:a},c,u,t,r)}return oN(i)},lN="#808080",ml=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,h=d===void 0?!1:d,f=e.textAnchor,p=f===void 0?"start":f,y=e.verticalAnchor,g=y===void 0?"end":y,m=e.fill,v=m===void 0?lN:m,x=iN(e,fZ),b=M.useMemo(function(){return wZ({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:h,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,h,x.style,x.width]),A=x.dx,w=x.dy,S=x.angle,E=x.className,_=x.breakAll,D=iN(x,pZ);if(!Vn(r)||!Vn(a))return null;var C=r+(Fe(A)?A:0),k=a+(Fe(w)?w:0),T;switch(g){case"start":T=D1("calc(".concat(u,")"));break;case"middle":T=D1("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:T=D1("calc(".concat(b.length-1," * -").concat(o,")"));break}var N=[];if(h){var j=b[0].width,R=x.width;N.push("scale(".concat((Fe(R)?R/j:1)/j,")"))}return S&&N.push("rotate(".concat(S,", ").concat(C,", ").concat(k,")")),N.length&&(D.transform=N.join(" ")),fe.createElement("text",MA({},lt(D,!0),{x:C,y:k,className:wt("recharts-text",E),textAnchor:p,fill:v.includes("url")?lN:v}),b.map(function(P,F){var q=P.words.join(_?"":" ");return fe.createElement("tspan",{x:C,dy:F===0?T:o,key:"".concat(q,"-").concat(F)},q)}))};function Zs(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function AZ(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function h_(n){let e,t,r;n.length!==2?(e=Zs,t=(o,c)=>Zs(n(o),c),r=(o,c)=>n(o)-c):(e=n===Zs||n===AZ?n:SZ,t=n,r=n);function i(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;t(o[h],c)<0?u=h+1:d=h}while(u<d)}return u}function a(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;t(o[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function s(o,c,u=0,d=o.length){const h=i(o,c,u,d-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function SZ(){return 0}function TM(n){return n===null?NaN:+n}function*EZ(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const _Z=h_(Zs),gf=_Z.right;h_(TM).center;class cN extends Map{constructor(e,t=TZ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(uN(this,e))}has(e){return super.has(uN(this,e))}set(e,t){return super.set(DZ(this,e),t)}delete(e){return super.delete(jZ(this,e))}}function uN({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function DZ({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function jZ({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function TZ(n){return n!==null&&typeof n=="object"?n.valueOf():n}function CZ(n=Zs){if(n===Zs)return CM;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function CM(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const NZ=Math.sqrt(50),kZ=Math.sqrt(10),OZ=Math.sqrt(2);function Mm(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=NZ?10:a>=kZ?5:a>=OZ?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(n*u),c=Math.round(e*u),o/u<n&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(n/u),c=Math.round(e/u),o*u<n&&++o,c*u>e&&--c),c<o&&.5<=t&&t<2?Mm(n,e,t*2):[o,c,u]}function FA(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,a,s]=r?Mm(e,n,t):Mm(n,e,t);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function LA(n,e,t){return e=+e,n=+n,t=+t,Mm(n,e,t)[2]}function UA(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?LA(e,n,t):LA(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function dN(n,e){let t;for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);return t}function hN(n,e){let t;for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);return t}function NM(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?CM:CZ(i);r>t;){if(r-t>600){const c=r-t+1,u=e-t+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),p=Math.max(t,Math.floor(e-u*h/c+f)),y=Math.min(r,Math.floor(e+(c-u)*h/c+f));NM(n,e,p,y,i)}const a=n[e];let s=t,o=r;for(nd(n,t,e),i(n[r],a)>0&&nd(n,t,r);s<o;){for(nd(n,s,o),++s,--o;i(n[s],a)<0;)++s;for(;i(n[o],a)>0;)--o}i(n[t],a)===0?nd(n,t,o):(++o,nd(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}return n}function nd(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function PZ(n,e,t){if(n=Float64Array.from(EZ(n)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return hN(n);if(e>=1)return dN(n);var r,i=(r-1)*e,a=Math.floor(i),s=dN(NM(n,a).subarray(0,a+1)),o=hN(n.subarray(a+1));return s+(o-s)*(i-a)}}function IZ(n,e,t=TM){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,a=Math.floor(i),s=+t(n[a],a,n),o=+t(n[a+1],a+1,n);return s+(o-s)*(i-a)}}function RZ(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(i);++r<i;)a[r]=n+r*t;return a}function Yi(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Ts(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const BA=Symbol("implicit");function f_(){var n=new cN,e=[],t=[],r=BA;function i(a){let s=n.get(a);if(s===void 0){if(r!==BA)return r;n.set(a,s=e.push(a)-1)}return t[s%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new cN;for(const s of a)n.has(s)||n.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return f_(e,t).unknown(r)},Yi.apply(i,arguments),i}function yh(){var n=f_().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,a,s,o=!1,c=0,u=0,d=.5;delete n.unknown;function h(){var f=e().length,p=i<r,y=p?i:r,g=p?r:i;a=(g-y)/Math.max(1,f-c+u*2),o&&(a=Math.floor(a)),y+=(g-y-a*(f-c))*d,s=a*(1-c),o&&(y=Math.round(y),s=Math.round(s));var m=RZ(f).map(function(v){return y+a*v});return t(p?m.reverse():m)}return n.domain=function(f){return arguments.length?(e(f),h()):e()},n.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},n.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,o=!0,h()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(f){return arguments.length?(o=!!f,h()):o},n.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},n.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},n.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},n.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},n.copy=function(){return yh(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(d)},Yi.apply(h(),arguments)}function kM(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return kM(e())},n}function zd(){return kM(yh.apply(null,arguments).paddingInner(1))}function p_(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function OM(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function yf(){}var vh=.7,Fm=1/vh,wc="\\s*([+-]?\\d+)\\s*",xh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",MZ=/^#([0-9a-f]{3,8})$/,FZ=new RegExp(`^rgb\\(${wc},${wc},${wc}\\)$`),LZ=new RegExp(`^rgb\\(${Oa},${Oa},${Oa}\\)$`),UZ=new RegExp(`^rgba\\(${wc},${wc},${wc},${xh}\\)$`),BZ=new RegExp(`^rgba\\(${Oa},${Oa},${Oa},${xh}\\)$`),$Z=new RegExp(`^hsl\\(${xh},${Oa},${Oa}\\)$`),zZ=new RegExp(`^hsla\\(${xh},${Oa},${Oa},${xh}\\)$`),fN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};p_(yf,bh,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:pN,formatHex:pN,formatHex8:qZ,formatHsl:WZ,formatRgb:mN,toString:mN});function pN(){return this.rgb().formatHex()}function qZ(){return this.rgb().formatHex8()}function WZ(){return PM(this).formatHsl()}function mN(){return this.rgb().formatRgb()}function bh(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=MZ.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?gN(e):t===3?new Jr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Wf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Wf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=FZ.exec(n))?new Jr(e[1],e[2],e[3],1):(e=LZ.exec(n))?new Jr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=UZ.exec(n))?Wf(e[1],e[2],e[3],e[4]):(e=BZ.exec(n))?Wf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$Z.exec(n))?xN(e[1],e[2]/100,e[3]/100,1):(e=zZ.exec(n))?xN(e[1],e[2]/100,e[3]/100,e[4]):fN.hasOwnProperty(n)?gN(fN[n]):n==="transparent"?new Jr(NaN,NaN,NaN,0):null}function gN(n){return new Jr(n>>16&255,n>>8&255,n&255,1)}function Wf(n,e,t,r){return r<=0&&(n=e=t=NaN),new Jr(n,e,t,r)}function HZ(n){return n instanceof yf||(n=bh(n)),n?(n=n.rgb(),new Jr(n.r,n.g,n.b,n.opacity)):new Jr}function $A(n,e,t,r){return arguments.length===1?HZ(n):new Jr(n,e,t,r??1)}function Jr(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}p_(Jr,$A,OM(yf,{brighter(n){return n=n==null?Fm:Math.pow(Fm,n),new Jr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?vh:Math.pow(vh,n),new Jr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Jr(rl(this.r),rl(this.g),rl(this.b),Lm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yN,formatHex:yN,formatHex8:VZ,formatRgb:vN,toString:vN}));function yN(){return`#${Wo(this.r)}${Wo(this.g)}${Wo(this.b)}`}function VZ(){return`#${Wo(this.r)}${Wo(this.g)}${Wo(this.b)}${Wo((isNaN(this.opacity)?1:this.opacity)*255)}`}function vN(){const n=Lm(this.opacity);return`${n===1?"rgb(":"rgba("}${rl(this.r)}, ${rl(this.g)}, ${rl(this.b)}${n===1?")":`, ${n})`}`}function Lm(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function rl(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Wo(n){return n=rl(n),(n<16?"0":"")+n.toString(16)}function xN(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new aa(n,e,t,r)}function PM(n){if(n instanceof aa)return new aa(n.h,n.s,n.l,n.opacity);if(n instanceof yf||(n=bh(n)),!n)return new aa;if(n instanceof aa)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(t-r)/o+(t<r)*6:t===a?s=(r-e)/o+2:s=(e-t)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new aa(s,o,c,n.opacity)}function GZ(n,e,t,r){return arguments.length===1?PM(n):new aa(n,e,t,r??1)}function aa(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}p_(aa,GZ,OM(yf,{brighter(n){return n=n==null?Fm:Math.pow(Fm,n),new aa(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?vh:Math.pow(vh,n),new aa(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Jr(j1(n>=240?n-240:n+120,i,r),j1(n,i,r),j1(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new aa(bN(this.h),Hf(this.s),Hf(this.l),Lm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Lm(this.opacity);return`${n===1?"hsl(":"hsla("}${bN(this.h)}, ${Hf(this.s)*100}%, ${Hf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function bN(n){return n=(n||0)%360,n<0?n+360:n}function Hf(n){return Math.max(0,Math.min(1,n||0))}function j1(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const m_=n=>()=>n;function YZ(n,e){return function(t){return n+t*e}}function KZ(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function XZ(n){return(n=+n)==1?IM:function(e,t){return t-e?KZ(e,t,n):m_(isNaN(e)?t:e)}}function IM(n,e){var t=e-n;return t?YZ(n,t):m_(isNaN(n)?e:n)}const wN=(function n(e){var t=XZ(e);function r(i,a){var s=t((i=$A(i)).r,(a=$A(a)).r),o=t(i.g,a.g),c=t(i.b,a.b),u=IM(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=n,r})(1);function JZ(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=n[i]*(1-a)+e[i]*a;return r}}function ZZ(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function QZ(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),a=new Array(t),s;for(s=0;s<r;++s)i[s]=Ou(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function eQ(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function Um(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function tQ(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=Ou(n[i],e[i]):r[i]=e[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var zA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,T1=new RegExp(zA.source,"g");function nQ(n){return function(){return n}}function rQ(n){return function(e){return n(e)+""}}function iQ(n,e){var t=zA.lastIndex=T1.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(n=n+"",e=e+"";(r=zA.exec(n))&&(i=T1.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Um(r,i)})),t=T1.lastIndex;return t<e.length&&(a=e.slice(t),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?rQ(c[0].x):nQ(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)o[(h=c[d]).i]=h.x(u);return o.join("")})}function Ou(n,e){var t=typeof e,r;return e==null||t==="boolean"?m_(e):(t==="number"?Um:t==="string"?(r=bh(e))?(e=r,wN):iQ:e instanceof bh?wN:e instanceof Date?eQ:ZZ(e)?JZ:Array.isArray(e)?QZ:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?tQ:Um)(n,e)}function g_(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function aQ(n,e){e===void 0&&(e=n,n=Ou);for(var t=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);t<r;)a[t]=n(i,i=e[++t]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function sQ(n){return function(){return n}}function Bm(n){return+n}var AN=[0,1];function Ur(n){return n}function qA(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:sQ(isNaN(e)?NaN:.5)}function oQ(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function lQ(n,e,t){var r=n[0],i=n[1],a=e[0],s=e[1];return i<r?(r=qA(i,r),a=t(s,a)):(r=qA(r,i),a=t(a,s)),function(o){return a(r(o))}}function cQ(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=qA(n[s],n[s+1]),a[s]=t(e[s],e[s+1]);return function(o){var c=gf(n,o,1,r)-1;return a[c](i[c](o))}}function vf(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function $y(){var n=AN,e=AN,t=Ou,r,i,a,s=Ur,o,c,u;function d(){var f=Math.min(n.length,e.length);return s!==Ur&&(s=oQ(n[0],n[f-1])),o=f>2?cQ:lQ,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?a:(c||(c=o(n.map(r),e,t)))(r(s(f)))}return h.invert=function(f){return s(i((u||(u=o(e,n.map(r),Um)))(f)))},h.domain=function(f){return arguments.length?(n=Array.from(f,Bm),d()):n.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),t=g_,d()},h.clamp=function(f){return arguments.length?(s=f?!0:Ur,d()):s!==Ur},h.interpolate=function(f){return arguments.length?(t=f,d()):t},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,p){return r=f,i=p,d()}}function y_(){return $y()(Ur,Ur)}function uQ(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function $m(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function Gc(n){return n=$m(Math.abs(n)),n?n[1]:NaN}function dQ(n,e){return function(t,r){for(var i=t.length,a=[],s=0,o=n[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(t.substring(i-=o,i+o)),!((c+=o+1)>r));)o=n[s=(s+1)%n.length];return a.reverse().join(e)}}function hQ(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var fQ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wh(n){if(!(e=fQ.exec(n)))throw new Error("invalid format: "+n);var e;return new v_({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}wh.prototype=v_.prototype;function v_(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}v_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pQ(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var RM;function mQ(n,e){var t=$m(n,e);if(!t)return n+"";var r=t[0],i=t[1],a=i-(RM=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+$m(n,Math.max(0,e+a-1))[0]}function SN(n,e){var t=$m(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const EN={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:uQ,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>SN(n*100,e),r:SN,s:mQ,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function _N(n){return n}var DN=Array.prototype.map,jN=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function gQ(n){var e=n.grouping===void 0||n.thousands===void 0?_N:dQ(DN.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?_N:hQ(DN.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",o=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function u(h){h=wh(h);var f=h.fill,p=h.align,y=h.sign,g=h.symbol,m=h.zero,v=h.width,x=h.comma,b=h.precision,A=h.trim,w=h.type;w==="n"?(x=!0,w="g"):EN[w]||(b===void 0&&(b=12),A=!0,w="g"),(m||f==="0"&&p==="=")&&(m=!0,f="0",p="=");var S=g==="$"?t:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",E=g==="$"?r:/[%p]/.test(w)?s:"",_=EN[w],D=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function C(k){var T=S,N=E,j,R,P;if(w==="c")N=_(k)+N,k="";else{k=+k;var F=k<0||1/k<0;if(k=isNaN(k)?c:_(Math.abs(k),b),A&&(k=pQ(k)),F&&+k==0&&y!=="+"&&(F=!1),T=(F?y==="("?y:o:y==="-"||y==="("?"":y)+T,N=(w==="s"?jN[8+RM/3]:"")+N+(F&&y==="("?")":""),D){for(j=-1,R=k.length;++j<R;)if(P=k.charCodeAt(j),48>P||P>57){N=(P===46?i+k.slice(j+1):k.slice(j))+N,k=k.slice(0,j);break}}}x&&!m&&(k=e(k,1/0));var q=T.length+k.length+N.length,$=q<v?new Array(v-q+1).join(f):"";switch(x&&m&&(k=e($+k,$.length?v-N.length:1/0),$=""),p){case"<":k=T+k+N+$;break;case"=":k=T+$+k+N;break;case"^":k=$.slice(0,q=$.length>>1)+T+k+N+$.slice(q);break;default:k=$+T+k+N;break}return a(k)}return C.toString=function(){return h+""},C}function d(h,f){var p=u((h=wh(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(Gc(f)/3)))*3,g=Math.pow(10,-y),m=jN[8+y/3];return function(v){return p(g*v)+m}}return{format:u,formatPrefix:d}}var Vf,x_,MM;yQ({thousands:",",grouping:[3],currency:["$",""]});function yQ(n){return Vf=gQ(n),x_=Vf.format,MM=Vf.formatPrefix,Vf}function vQ(n){return Math.max(0,-Gc(Math.abs(n)))}function xQ(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gc(e)/3)))*3-Gc(Math.abs(n)))}function bQ(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Gc(e)-Gc(n))+1}function FM(n,e,t,r){var i=UA(n,e,t),a;switch(r=wh(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(a=xQ(i,s))&&(r.precision=a),MM(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=bQ(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=vQ(i))&&(r.precision=a-(r.type==="%")*2);break}}return x_(r)}function mo(n){var e=n.domain;return n.ticks=function(t){var r=e();return FA(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return FM(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=LA(s,o,t),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return n},n}function zm(){var n=y_();return n.copy=function(){return vf(n,zm())},Yi.apply(n,arguments),mo(n)}function LM(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,Bm),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return LM(n).unknown(e)},n=arguments.length?Array.from(n,Bm):[0,1],mo(t)}function UM(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],a=n[r],s;return a<i&&(s=t,t=r,r=s,s=i,i=a,a=s),n[t]=e.floor(i),n[r]=e.ceil(a),n}function TN(n){return Math.log(n)}function CN(n){return Math.exp(n)}function wQ(n){return-Math.log(-n)}function AQ(n){return-Math.exp(-n)}function SQ(n){return isFinite(n)?+("1e"+n):n<0?0:n}function EQ(n){return n===10?SQ:n===Math.E?Math.exp:e=>Math.pow(n,e)}function _Q(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function NN(n){return(e,t)=>-n(-e,t)}function b_(n){const e=n(TN,CN),t=e.domain;let r=10,i,a;function s(){return i=_Q(r),a=EQ(r),t()[0]<0?(i=NN(i),a=NN(a),n(wQ,AQ)):n(TN,CN),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(t(o),s()):t()},e.ticks=o=>{const c=t();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=i(u),p=i(d),y,g;const m=o==null?10:+o;let v=[];if(!(r%1)&&p-f<m){if(f=Math.floor(f),p=Math.ceil(p),u>0){for(;f<=p;++f)for(y=1;y<r;++y)if(g=f<0?y/a(-f):y*a(f),!(g<u)){if(g>d)break;v.push(g)}}else for(;f<=p;++f)for(y=r-1;y>=1;--y)if(g=f>0?y/a(-f):y*a(f),!(g<u)){if(g>d)break;v.push(g)}v.length*2<m&&(v=FA(u,d,m))}else v=FA(f,p,Math.min(p-f,m)).map(a);return h?v.reverse():v},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=wh(c)).precision==null&&(c.trim=!0),c=x_(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return d=>{let h=d/a(Math.round(i(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},e.nice=()=>t(UM(t(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function BM(){const n=b_($y()).domain([1,10]);return n.copy=()=>vf(n,BM()).base(n.base()),Yi.apply(n,arguments),n}function kN(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function ON(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function w_(n){var e=1,t=n(kN(e),ON(e));return t.constant=function(r){return arguments.length?n(kN(e=+r),ON(e)):e},mo(t)}function $M(){var n=w_($y());return n.copy=function(){return vf(n,$M()).constant(n.constant())},Yi.apply(n,arguments)}function PN(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function DQ(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function jQ(n){return n<0?-n*n:n*n}function A_(n){var e=n(Ur,Ur),t=1;function r(){return t===1?n(Ur,Ur):t===.5?n(DQ,jQ):n(PN(t),PN(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},mo(e)}function S_(){var n=A_($y());return n.copy=function(){return vf(n,S_()).exponent(n.exponent())},Yi.apply(n,arguments),n}function TQ(){return S_.apply(null,arguments).exponent(.5)}function IN(n){return Math.sign(n)*n*n}function CQ(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function zM(){var n=y_(),e=[0,1],t=!1,r;function i(a){var s=CQ(n(a));return isNaN(s)?r:t?Math.round(s):s}return i.invert=function(a){return n.invert(IN(a))},i.domain=function(a){return arguments.length?(n.domain(a),i):n.domain()},i.range=function(a){return arguments.length?(n.range((e=Array.from(a,Bm)).map(IN)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(t=!!a,i):t},i.clamp=function(a){return arguments.length?(n.clamp(a),i):n.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return zM(n.domain(),e).round(t).clamp(n.clamp()).unknown(r)},Yi.apply(i,arguments),mo(i)}function qM(){var n=[],e=[],t=[],r;function i(){var s=0,o=Math.max(1,e.length);for(t=new Array(o-1);++s<o;)t[s-1]=IZ(n,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[gf(t,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?t[o-1]:n[0],o<t.length?t[o]:n[n.length-1]]},a.domain=function(s){if(!arguments.length)return n.slice();n=[];for(let o of s)o!=null&&!isNaN(o=+o)&&n.push(o);return n.sort(Zs),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return t.slice()},a.copy=function(){return qM().domain(n).range(e).unknown(r)},Yi.apply(a,arguments)}function WM(){var n=0,e=1,t=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[gf(r,c,0,t)]:a}function o(){var c=-1;for(r=new Array(t);++c<t;)r[c]=((c+1)*e-(c-t)*n)/(t+1);return s}return s.domain=function(c){return arguments.length?([n,e]=c,n=+n,e=+e,o()):[n,e]},s.range=function(c){return arguments.length?(t=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[n,r[0]]:u>=t?[r[t-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return WM().domain([n,e]).range(i).unknown(a)},Yi.apply(mo(s),arguments)}function HM(){var n=[.5],e=[0,1],t,r=1;function i(a){return a!=null&&a<=a?e[gf(n,a,0,r)]:t}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[n[s-1],n[s]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return HM().domain(n).range(e).unknown(t)},Yi.apply(i,arguments)}const C1=new Date,N1=new Date;function Jn(n,e,t,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),n(a);while(u<a&&a<s);return c},i.filter=a=>Jn(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),t&&(i.count=(a,s)=>(C1.setTime(+a),N1.setTime(+s),n(C1),n(N1),Math.floor(t(C1,N1))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const qm=Jn(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);qm.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Jn(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):qm);qm.range;const ss=1e3,Bi=ss*60,ls=Bi*60,ws=ls*24,E_=ws*7,RN=ws*30,k1=ws*365,Ho=Jn(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*ss)},(n,e)=>(e-n)/ss,n=>n.getUTCSeconds());Ho.range;const __=Jn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ss)},(n,e)=>{n.setTime(+n+e*Bi)},(n,e)=>(e-n)/Bi,n=>n.getMinutes());__.range;const D_=Jn(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Bi)},(n,e)=>(e-n)/Bi,n=>n.getUTCMinutes());D_.range;const j_=Jn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ss-n.getMinutes()*Bi)},(n,e)=>{n.setTime(+n+e*ls)},(n,e)=>(e-n)/ls,n=>n.getHours());j_.range;const T_=Jn(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*ls)},(n,e)=>(e-n)/ls,n=>n.getUTCHours());T_.range;const xf=Jn(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Bi)/ws,n=>n.getDate()-1);xf.range;const zy=Jn(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/ws,n=>n.getUTCDate()-1);zy.range;const VM=Jn(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/ws,n=>Math.floor(n/ws));VM.range;function kl(n){return Jn(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bi)/E_)}const qy=kl(0),Wm=kl(1),NQ=kl(2),kQ=kl(3),Yc=kl(4),OQ=kl(5),PQ=kl(6);qy.range;Wm.range;NQ.range;kQ.range;Yc.range;OQ.range;PQ.range;function Ol(n){return Jn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/E_)}const Wy=Ol(0),Hm=Ol(1),IQ=Ol(2),RQ=Ol(3),Kc=Ol(4),MQ=Ol(5),FQ=Ol(6);Wy.range;Hm.range;IQ.range;RQ.range;Kc.range;MQ.range;FQ.range;const C_=Jn(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());C_.range;const N_=Jn(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());N_.range;const As=Jn(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());As.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Jn(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});As.range;const Ss=Jn(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());Ss.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Jn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});Ss.range;function GM(n,e,t,r,i,a){const s=[[Ho,1,ss],[Ho,5,5*ss],[Ho,15,15*ss],[Ho,30,30*ss],[a,1,Bi],[a,5,5*Bi],[a,15,15*Bi],[a,30,30*Bi],[i,1,ls],[i,3,3*ls],[i,6,6*ls],[i,12,12*ls],[r,1,ws],[r,2,2*ws],[t,1,E_],[e,1,RN],[e,3,3*RN],[n,1,k1]];function o(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const p=h&&typeof h.range=="function"?h:c(u,d,h),y=p?p.range(u,+d+1):[];return f?y.reverse():y}function c(u,d,h){const f=Math.abs(d-u)/h,p=h_(([,,m])=>m).right(s,f);if(p===s.length)return n.every(UA(u/k1,d/k1,h));if(p===0)return qm.every(Math.max(UA(u,d,h),1));const[y,g]=s[f/s[p-1][2]<s[p][2]/f?p-1:p];return y.every(g)}return[o,c]}const[LQ,UQ]=GM(Ss,N_,Wy,VM,T_,D_),[BQ,$Q]=GM(As,C_,qy,xf,j_,__);function O1(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function P1(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function rd(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function zQ(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,a=n.days,s=n.shortDays,o=n.months,c=n.shortMonths,u=id(i),d=ad(i),h=id(a),f=ad(a),p=id(s),y=ad(s),g=id(o),m=ad(o),v=id(c),x=ad(c),b={a:F,A:q,b:$,B,c:null,d:$N,e:$N,f:dee,g:wee,G:See,H:lee,I:cee,j:uee,L:YM,m:hee,M:fee,p:I,q:L,Q:WN,s:HN,S:pee,u:mee,U:gee,V:yee,w:vee,W:xee,x:null,X:null,y:bee,Y:Aee,Z:Eee,"%":qN},A={a:U,A:G,b:H,B:V,c:null,d:zN,e:zN,f:Tee,g:Lee,G:Bee,H:_ee,I:Dee,j:jee,L:XM,m:Cee,M:Nee,p:K,q:ae,Q:WN,s:HN,S:kee,u:Oee,U:Pee,V:Iee,w:Ree,W:Mee,x:null,X:null,y:Fee,Y:Uee,Z:$ee,"%":qN},w={a:C,A:k,b:T,B:N,c:j,d:UN,e:UN,f:iee,g:LN,G:FN,H:BN,I:BN,j:eee,L:ree,m:QQ,M:tee,p:D,q:ZQ,Q:see,s:oee,S:nee,u:GQ,U:YQ,V:KQ,w:VQ,W:XQ,x:R,X:P,y:LN,Y:FN,Z:JQ,"%":aee};b.x=S(t,b),b.X=S(r,b),b.c=S(e,b),A.x=S(t,A),A.X=S(r,A),A.c=S(e,A);function S(te,de){return function(xe){var ve=[],Te=-1,O=0,ie=te.length,re,Z,z;for(xe instanceof Date||(xe=new Date(+xe));++Te<ie;)te.charCodeAt(Te)===37&&(ve.push(te.slice(O,Te)),(Z=MN[re=te.charAt(++Te)])!=null?re=te.charAt(++Te):Z=re==="e"?" ":"0",(z=de[re])&&(re=z(xe,Z)),ve.push(re),O=Te+1);return ve.push(te.slice(O,Te)),ve.join("")}}function E(te,de){return function(xe){var ve=rd(1900,void 0,1),Te=_(ve,te,xe+="",0),O,ie;if(Te!=xe.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(de&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(O=P1(rd(ve.y,0,1)),ie=O.getUTCDay(),O=ie>4||ie===0?Hm.ceil(O):Hm(O),O=zy.offset(O,(ve.V-1)*7),ve.y=O.getUTCFullYear(),ve.m=O.getUTCMonth(),ve.d=O.getUTCDate()+(ve.w+6)%7):(O=O1(rd(ve.y,0,1)),ie=O.getDay(),O=ie>4||ie===0?Wm.ceil(O):Wm(O),O=xf.offset(O,(ve.V-1)*7),ve.y=O.getFullYear(),ve.m=O.getMonth(),ve.d=O.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),ie="Z"in ve?P1(rd(ve.y,0,1)).getUTCDay():O1(rd(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(ie+5)%7:ve.w+ve.U*7-(ie+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,P1(ve)):O1(ve)}}function _(te,de,xe,ve){for(var Te=0,O=de.length,ie=xe.length,re,Z;Te<O;){if(ve>=ie)return-1;if(re=de.charCodeAt(Te++),re===37){if(re=de.charAt(Te++),Z=w[re in MN?de.charAt(Te++):re],!Z||(ve=Z(te,xe,ve))<0)return-1}else if(re!=xe.charCodeAt(ve++))return-1}return ve}function D(te,de,xe){var ve=u.exec(de.slice(xe));return ve?(te.p=d.get(ve[0].toLowerCase()),xe+ve[0].length):-1}function C(te,de,xe){var ve=p.exec(de.slice(xe));return ve?(te.w=y.get(ve[0].toLowerCase()),xe+ve[0].length):-1}function k(te,de,xe){var ve=h.exec(de.slice(xe));return ve?(te.w=f.get(ve[0].toLowerCase()),xe+ve[0].length):-1}function T(te,de,xe){var ve=v.exec(de.slice(xe));return ve?(te.m=x.get(ve[0].toLowerCase()),xe+ve[0].length):-1}function N(te,de,xe){var ve=g.exec(de.slice(xe));return ve?(te.m=m.get(ve[0].toLowerCase()),xe+ve[0].length):-1}function j(te,de,xe){return _(te,e,de,xe)}function R(te,de,xe){return _(te,t,de,xe)}function P(te,de,xe){return _(te,r,de,xe)}function F(te){return s[te.getDay()]}function q(te){return a[te.getDay()]}function $(te){return c[te.getMonth()]}function B(te){return o[te.getMonth()]}function I(te){return i[+(te.getHours()>=12)]}function L(te){return 1+~~(te.getMonth()/3)}function U(te){return s[te.getUTCDay()]}function G(te){return a[te.getUTCDay()]}function H(te){return c[te.getUTCMonth()]}function V(te){return o[te.getUTCMonth()]}function K(te){return i[+(te.getUTCHours()>=12)]}function ae(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var de=S(te+="",b);return de.toString=function(){return te},de},parse:function(te){var de=E(te+="",!1);return de.toString=function(){return te},de},utcFormat:function(te){var de=S(te+="",A);return de.toString=function(){return te},de},utcParse:function(te){var de=E(te+="",!0);return de.toString=function(){return te},de}}}var MN={"-":"",_:" ",0:"0"},cr=/^\s*\d+/,qQ=/^%/,WQ=/[\\^$*+?|[\]().{}]/g;function Ft(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<t?new Array(t-a+1).join(e)+i:i)}function HQ(n){return n.replace(WQ,"\\$&")}function id(n){return new RegExp("^(?:"+n.map(HQ).join("|")+")","i")}function ad(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function VQ(n,e,t){var r=cr.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function GQ(n,e,t){var r=cr.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function YQ(n,e,t){var r=cr.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function KQ(n,e,t){var r=cr.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function XQ(n,e,t){var r=cr.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function FN(n,e,t){var r=cr.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function LN(n,e,t){var r=cr.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function JQ(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function ZQ(n,e,t){var r=cr.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function QQ(n,e,t){var r=cr.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function UN(n,e,t){var r=cr.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function eee(n,e,t){var r=cr.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function BN(n,e,t){var r=cr.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function tee(n,e,t){var r=cr.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function nee(n,e,t){var r=cr.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function ree(n,e,t){var r=cr.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function iee(n,e,t){var r=cr.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function aee(n,e,t){var r=qQ.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function see(n,e,t){var r=cr.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function oee(n,e,t){var r=cr.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function $N(n,e){return Ft(n.getDate(),e,2)}function lee(n,e){return Ft(n.getHours(),e,2)}function cee(n,e){return Ft(n.getHours()%12||12,e,2)}function uee(n,e){return Ft(1+xf.count(As(n),n),e,3)}function YM(n,e){return Ft(n.getMilliseconds(),e,3)}function dee(n,e){return YM(n,e)+"000"}function hee(n,e){return Ft(n.getMonth()+1,e,2)}function fee(n,e){return Ft(n.getMinutes(),e,2)}function pee(n,e){return Ft(n.getSeconds(),e,2)}function mee(n){var e=n.getDay();return e===0?7:e}function gee(n,e){return Ft(qy.count(As(n)-1,n),e,2)}function KM(n){var e=n.getDay();return e>=4||e===0?Yc(n):Yc.ceil(n)}function yee(n,e){return n=KM(n),Ft(Yc.count(As(n),n)+(As(n).getDay()===4),e,2)}function vee(n){return n.getDay()}function xee(n,e){return Ft(Wm.count(As(n)-1,n),e,2)}function bee(n,e){return Ft(n.getFullYear()%100,e,2)}function wee(n,e){return n=KM(n),Ft(n.getFullYear()%100,e,2)}function Aee(n,e){return Ft(n.getFullYear()%1e4,e,4)}function See(n,e){var t=n.getDay();return n=t>=4||t===0?Yc(n):Yc.ceil(n),Ft(n.getFullYear()%1e4,e,4)}function Eee(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ft(e/60|0,"0",2)+Ft(e%60,"0",2)}function zN(n,e){return Ft(n.getUTCDate(),e,2)}function _ee(n,e){return Ft(n.getUTCHours(),e,2)}function Dee(n,e){return Ft(n.getUTCHours()%12||12,e,2)}function jee(n,e){return Ft(1+zy.count(Ss(n),n),e,3)}function XM(n,e){return Ft(n.getUTCMilliseconds(),e,3)}function Tee(n,e){return XM(n,e)+"000"}function Cee(n,e){return Ft(n.getUTCMonth()+1,e,2)}function Nee(n,e){return Ft(n.getUTCMinutes(),e,2)}function kee(n,e){return Ft(n.getUTCSeconds(),e,2)}function Oee(n){var e=n.getUTCDay();return e===0?7:e}function Pee(n,e){return Ft(Wy.count(Ss(n)-1,n),e,2)}function JM(n){var e=n.getUTCDay();return e>=4||e===0?Kc(n):Kc.ceil(n)}function Iee(n,e){return n=JM(n),Ft(Kc.count(Ss(n),n)+(Ss(n).getUTCDay()===4),e,2)}function Ree(n){return n.getUTCDay()}function Mee(n,e){return Ft(Hm.count(Ss(n)-1,n),e,2)}function Fee(n,e){return Ft(n.getUTCFullYear()%100,e,2)}function Lee(n,e){return n=JM(n),Ft(n.getUTCFullYear()%100,e,2)}function Uee(n,e){return Ft(n.getUTCFullYear()%1e4,e,4)}function Bee(n,e){var t=n.getUTCDay();return n=t>=4||t===0?Kc(n):Kc.ceil(n),Ft(n.getUTCFullYear()%1e4,e,4)}function $ee(){return"+0000"}function qN(){return"%"}function WN(n){return+n}function HN(n){return Math.floor(+n/1e3)}var Hl,ZM,QM;zee({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zee(n){return Hl=zQ(n),ZM=Hl.format,Hl.parse,QM=Hl.utcFormat,Hl.utcParse,Hl}function qee(n){return new Date(n)}function Wee(n){return n instanceof Date?+n:+new Date(+n)}function k_(n,e,t,r,i,a,s,o,c,u){var d=y_(),h=d.invert,f=d.domain,p=u(".%L"),y=u(":%S"),g=u("%I:%M"),m=u("%I %p"),v=u("%a %d"),x=u("%b %d"),b=u("%B"),A=u("%Y");function w(S){return(c(S)<S?p:o(S)<S?y:s(S)<S?g:a(S)<S?m:r(S)<S?i(S)<S?v:x:t(S)<S?b:A)(S)}return d.invert=function(S){return new Date(h(S))},d.domain=function(S){return arguments.length?f(Array.from(S,Wee)):f().map(qee)},d.ticks=function(S){var E=f();return n(E[0],E[E.length-1],S??10)},d.tickFormat=function(S,E){return E==null?w:u(E)},d.nice=function(S){var E=f();return(!S||typeof S.range!="function")&&(S=e(E[0],E[E.length-1],S??10)),S?f(UM(E,S)):d},d.copy=function(){return vf(d,k_(n,e,t,r,i,a,s,o,c,u))},d}function Hee(){return Yi.apply(k_(BQ,$Q,As,C_,qy,xf,j_,__,Ho,ZM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Vee(){return Yi.apply(k_(LQ,UQ,Ss,N_,Wy,zy,T_,D_,Ho,QM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hy(){var n=0,e=1,t,r,i,a,s=Ur,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-t)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([n,e]=h,t=a(n=+n),r=a(e=+e),i=t===r?0:1/(r-t),u):[n,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function d(h){return function(f){var p,y;return arguments.length?([p,y]=f,s=h(p,y),u):[s(0),s(1)]}}return u.range=d(Ou),u.rangeRound=d(g_),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,t=h(n),r=h(e),i=t===r?0:1/(r-t),u}}function go(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function eF(){var n=mo(Hy()(Ur));return n.copy=function(){return go(n,eF())},Ts.apply(n,arguments)}function tF(){var n=b_(Hy()).domain([1,10]);return n.copy=function(){return go(n,tF()).base(n.base())},Ts.apply(n,arguments)}function nF(){var n=w_(Hy());return n.copy=function(){return go(n,nF()).constant(n.constant())},Ts.apply(n,arguments)}function O_(){var n=A_(Hy());return n.copy=function(){return go(n,O_()).exponent(n.exponent())},Ts.apply(n,arguments)}function Gee(){return O_.apply(null,arguments).exponent(.5)}function rF(){var n=[],e=Ur;function t(r){if(r!=null&&!isNaN(r=+r))return e((gf(n,r,1)-1)/(n.length-1))}return t.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let i of r)i!=null&&!isNaN(i=+i)&&n.push(i);return n.sort(Zs),t},t.interpolator=function(r){return arguments.length?(e=r,t):e},t.range=function(){return n.map((r,i)=>e(i/(n.length-1)))},t.quantiles=function(r){return Array.from({length:r+1},(i,a)=>PZ(n,a/r))},t.copy=function(){return rF(e).domain(n)},Ts.apply(t,arguments)}function Vy(){var n=0,e=.5,t=1,r=1,i,a,s,o,c,u=Ur,d,h=!1,f;function p(g){return isNaN(g=+g)?f:(g=.5+((g=+d(g))-a)*(r*g<r*a?o:c),u(h?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([n,e,t]=g,i=d(n=+n),a=d(e=+e),s=d(t=+t),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,p):[n,e,t]},p.clamp=function(g){return arguments.length?(h=!!g,p):h},p.interpolator=function(g){return arguments.length?(u=g,p):u};function y(g){return function(m){var v,x,b;return arguments.length?([v,x,b]=m,u=aQ(g,[v,x,b]),p):[u(0),u(.5),u(1)]}}return p.range=y(Ou),p.rangeRound=y(g_),p.unknown=function(g){return arguments.length?(f=g,p):f},function(g){return d=g,i=g(n),a=g(e),s=g(t),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,p}}function iF(){var n=mo(Vy()(Ur));return n.copy=function(){return go(n,iF())},Ts.apply(n,arguments)}function aF(){var n=b_(Vy()).domain([.1,1,10]);return n.copy=function(){return go(n,aF()).base(n.base())},Ts.apply(n,arguments)}function sF(){var n=w_(Vy());return n.copy=function(){return go(n,sF()).constant(n.constant())},Ts.apply(n,arguments)}function P_(){var n=A_(Vy());return n.copy=function(){return go(n,P_()).exponent(n.exponent())},Ts.apply(n,arguments)}function Yee(){return P_.apply(null,arguments).exponent(.5)}const VN=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:yh,scaleDiverging:iF,scaleDivergingLog:aF,scaleDivergingPow:P_,scaleDivergingSqrt:Yee,scaleDivergingSymlog:sF,scaleIdentity:LM,scaleImplicit:BA,scaleLinear:zm,scaleLog:BM,scaleOrdinal:f_,scalePoint:zd,scalePow:S_,scaleQuantile:qM,scaleQuantize:WM,scaleRadial:zM,scaleSequential:eF,scaleSequentialLog:tF,scaleSequentialPow:O_,scaleSequentialQuantile:rF,scaleSequentialSqrt:Gee,scaleSequentialSymlog:nF,scaleSqrt:TQ,scaleSymlog:$M,scaleThreshold:HM,scaleTime:Hee,scaleUtc:Vee,tickFormat:FM},Symbol.toStringTag,{value:"Module"}));var I1,GN;function Gy(){if(GN)return I1;GN=1;var n=ju();function e(t,r,i){for(var a=-1,s=t.length;++a<s;){var o=t[a],c=r(o);if(c!=null&&(u===void 0?c===c&&!n(c):i(c,u)))var u=c,d=o}return d}return I1=e,I1}var R1,YN;function oF(){if(YN)return R1;YN=1;function n(e,t){return e>t}return R1=n,R1}var M1,KN;function Kee(){if(KN)return M1;KN=1;var n=Gy(),e=oF(),t=ku();function r(i){return i&&i.length?n(i,t,e):void 0}return M1=r,M1}var Xee=Kee();const Vs=It(Xee);var F1,XN;function lF(){if(XN)return F1;XN=1;function n(e,t){return e<t}return F1=n,F1}var L1,JN;function Jee(){if(JN)return L1;JN=1;var n=Gy(),e=lF(),t=ku();function r(i){return i&&i.length?n(i,t,e):void 0}return L1=r,L1}var Zee=Jee();const Yy=It(Zee);var U1,ZN;function Qee(){if(ZN)return U1;ZN=1;var n=KE(),e=Ha(),t=gM(),r=ri();function i(a,s){var o=r(a)?n:t;return o(a,e(s,3))}return U1=i,U1}var B1,QN;function ete(){if(QN)return B1;QN=1;var n=pM(),e=Qee();function t(r,i){return n(e(r,i),1)}return B1=t,B1}var tte=ete();const nte=It(tte);var $1,ek;function cF(){if(ek)return $1;ek=1;var n=l_();function e(t,r){return n(t,r)}return $1=e,$1}var rte=cF();const Xc=It(rte);var Pu=1e9,ite={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},R_,mn=!0,Vi="[DecimalError] ",il=Vi+"Invalid argument: ",I_=Vi+"Exponent out of range: ",Iu=Math.floor,Bo=Math.pow,ate=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,mi,nr=1e7,ln=7,uF=9007199254740991,Vm=Iu(uF/ln),Xe={};Xe.absoluteValue=Xe.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};Xe.comparedTo=Xe.cmp=function(n){var e,t,r,i,a=this;if(n=new a.constructor(n),a.s!==n.s)return a.s||-n.s;if(a.e!==n.e)return a.e>n.e^a.s<0?1:-1;for(r=a.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(a.d[e]!==n.d[e])return a.d[e]>n.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Xe.decimalPlaces=Xe.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*ln;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};Xe.dividedBy=Xe.div=function(n){return hs(this,new this.constructor(n))};Xe.dividedToIntegerBy=Xe.idiv=function(n){var e=this,t=e.constructor;return en(hs(e,new t(n),0,1),t.precision)};Xe.equals=Xe.eq=function(n){return!this.cmp(n)};Xe.exponent=function(){return Ln(this)};Xe.greaterThan=Xe.gt=function(n){return this.cmp(n)>0};Xe.greaterThanOrEqualTo=Xe.gte=function(n){return this.cmp(n)>=0};Xe.isInteger=Xe.isint=function(){return this.e>this.d.length-2};Xe.isNegative=Xe.isneg=function(){return this.s<0};Xe.isPositive=Xe.ispos=function(){return this.s>0};Xe.isZero=function(){return this.s===0};Xe.lessThan=Xe.lt=function(n){return this.cmp(n)<0};Xe.lessThanOrEqualTo=Xe.lte=function(n){return this.cmp(n)<1};Xe.logarithm=Xe.log=function(n){var e,t=this,r=t.constructor,i=r.precision,a=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq(mi))throw Error(Vi+"NaN");if(t.s<1)throw Error(Vi+(t.s?"NaN":"-Infinity"));return t.eq(mi)?new r(0):(mn=!1,e=hs(Ah(t,a),Ah(n,a),a),mn=!0,en(e,i))};Xe.minus=Xe.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?fF(e,n):dF(e,(n.s=-n.s,n))};Xe.modulo=Xe.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(Vi+"NaN");return t.s?(mn=!1,e=hs(t,n,0,1).times(n),mn=!0,t.minus(e)):en(new r(t),i)};Xe.naturalExponential=Xe.exp=function(){return hF(this)};Xe.naturalLogarithm=Xe.ln=function(){return Ah(this)};Xe.negated=Xe.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};Xe.plus=Xe.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?dF(e,n):fF(e,(n.s=-n.s,n))};Xe.precision=Xe.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(il+n);if(e=Ln(i)+1,r=i.d.length-1,t=r*ln+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};Xe.squareRoot=Xe.sqrt=function(){var n,e,t,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Vi+"NaN")}for(n=Ln(o),mn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Ta(o.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=Iu((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new c(e)):r=new c(i.toString()),t=c.precision,i=s=t+3;;)if(a=r,r=a.plus(hs(o,a,s+2)).times(.5),Ta(a.d).slice(0,s)===(e=Ta(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(en(a,t+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return mn=!0,en(r,t)};Xe.times=Xe.mul=function(n){var e,t,r,i,a,s,o,c,u,d=this,h=d.constructor,f=d.d,p=(n=new h(n)).d;if(!d.s||!n.s)return new h(0);for(n.s*=d.s,t=d.e+n.e,c=f.length,u=p.length,c<u&&(a=f,f=p,p=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+p[r]*f[i-r-1]+e,a[i--]=o%nr|0,e=o/nr|0;a[i]=(a[i]+e)%nr|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),n.d=a,n.e=t,mn?en(n,h.precision):n};Xe.toDecimalPlaces=Xe.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(Fa(n,0,Pu),e===void 0?e=r.rounding:Fa(e,0,8),en(t,n+Ln(t)+1,e))};Xe.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=gl(r,!0):(Fa(n,0,Pu),e===void 0?e=i.rounding:Fa(e,0,8),r=en(new i(r),n+1,e),t=gl(r,!0,n+1)),t};Xe.toFixed=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?gl(i):(Fa(n,0,Pu),e===void 0?e=a.rounding:Fa(e,0,8),r=en(new a(i),n+Ln(i)+1,e),t=gl(r.abs(),!1,n+Ln(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};Xe.toInteger=Xe.toint=function(){var n=this,e=n.constructor;return en(new e(n),Ln(n)+1,e.rounding)};Xe.toNumber=function(){return+this};Xe.toPower=Xe.pow=function(n){var e,t,r,i,a,s,o=this,c=o.constructor,u=12,d=+(n=new c(n));if(!n.s)return new c(mi);if(o=new c(o),!o.s){if(n.s<1)throw Error(Vi+"Infinity");return o}if(o.eq(mi))return o;if(r=c.precision,n.eq(mi))return en(o,r);if(e=n.e,t=n.d.length-1,s=e>=t,a=o.s,s){if((t=d<0?-d:d)<=uF){for(i=new c(mi),e=Math.ceil(r/ln+4),mn=!1;t%2&&(i=i.times(o),nk(i.d,e)),t=Iu(t/2),t!==0;)o=o.times(o),nk(o.d,e);return mn=!0,n.s<0?new c(mi).div(i):en(i,r)}}else if(a<0)throw Error(Vi+"NaN");return a=a<0&&n.d[Math.max(e,t)]&1?-1:1,o.s=1,mn=!1,i=n.times(Ah(o,r+u)),mn=!0,i=hF(i),i.s=a,i};Xe.toPrecision=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?(t=Ln(i),r=gl(i,t<=a.toExpNeg||t>=a.toExpPos)):(Fa(n,1,Pu),e===void 0?e=a.rounding:Fa(e,0,8),i=en(new a(i),n,e),t=Ln(i),r=gl(i,n<=t||t<=a.toExpNeg,n)),r};Xe.toSignificantDigits=Xe.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(Fa(n,1,Pu),e===void 0?e=r.rounding:Fa(e,0,8)),en(new r(t),n,e)};Xe.toString=Xe.valueOf=Xe.val=Xe.toJSON=Xe[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=Ln(n),t=n.constructor;return gl(n,e<=t.toExpNeg||e>=t.toExpPos)};function dF(n,e){var t,r,i,a,s,o,c,u,d=n.constructor,h=d.precision;if(!n.s||!e.s)return e.s||(e=new d(n)),mn?en(e,h):e;if(c=n.d,u=e.d,s=n.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/ln),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),t=0;a;)t=(c[--a]=c[a]+u[a]+t)/nr|0,c[a]%=nr;for(t&&(c.unshift(t),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,mn?en(e,h):e}function Fa(n,e,t){if(n!==~~n||n<e||n>t)throw Error(il+n)}function Ta(n){var e,t,r,i=n.length-1,a="",s=n[0];if(i>0){for(a+=s,e=1;e<i;e++)r=n[e]+"",t=ln-r.length,t&&(a+=Ms(t)),a+=r;s=n[e],r=s+"",t=ln-r.length,t&&(a+=Ms(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var hs=(function(){function n(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%nr|0,s=a/nr|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function t(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*nr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,d,h,f,p,y,g,m,v,x,b,A,w,S,E,_,D=r.constructor,C=r.s==i.s?1:-1,k=r.d,T=i.d;if(!r.s)return new D(r);if(!i.s)throw Error(Vi+"Division by zero");for(c=r.e-i.e,E=T.length,w=k.length,p=new D(C),y=p.d=[],u=0;T[u]==(k[u]||0);)++u;if(T[u]>(k[u]||0)&&--c,a==null?x=a=D.precision:s?x=a+(Ln(r)-Ln(i))+1:x=a,x<0)return new D(0);if(x=x/ln+2|0,u=0,E==1)for(d=0,T=T[0],x++;(u<w||d)&&x--;u++)b=d*nr+(k[u]||0),y[u]=b/T|0,d=b%T|0;else{for(d=nr/(T[0]+1)|0,d>1&&(T=n(T,d),k=n(k,d),E=T.length,w=k.length),A=E,g=k.slice(0,E),m=g.length;m<E;)g[m++]=0;_=T.slice(),_.unshift(0),S=T[0],T[1]>=nr/2&&++S;do d=0,o=e(T,g,E,m),o<0?(v=g[0],E!=m&&(v=v*nr+(g[1]||0)),d=v/S|0,d>1?(d>=nr&&(d=nr-1),h=n(T,d),f=h.length,m=g.length,o=e(h,g,f,m),o==1&&(d--,t(h,E<f?_:T,f))):(d==0&&(o=d=1),h=T.slice()),f=h.length,f<m&&h.unshift(0),t(g,h,m),o==-1&&(m=g.length,o=e(T,g,E,m),o<1&&(d++,t(g,E<m?_:T,m))),m=g.length):o===0&&(d++,g=[0]),y[u++]=d,o&&g[0]?g[m++]=k[A]||0:(g=[k[A]],m=1);while((A++<w||g[0]!==void 0)&&x--)}return y[0]||y.shift(),p.e=c,en(p,s?a+Ln(p)+1:a)}})();function hF(n,e){var t,r,i,a,s,o,c=0,u=0,d=n.constructor,h=d.precision;if(Ln(n)>16)throw Error(I_+Ln(n));if(!n.s)return new d(mi);for(mn=!1,o=h,s=new d(.03125);n.abs().gte(.1);)n=n.times(s),u+=5;for(r=Math.log(Bo(2,u))/Math.LN10*2+5|0,o+=r,t=i=a=new d(mi),d.precision=o;;){if(i=en(i.times(n),o),t=t.times(++c),s=a.plus(hs(i,t,o)),Ta(s.d).slice(0,o)===Ta(a.d).slice(0,o)){for(;u--;)a=en(a.times(a),o);return d.precision=h,e==null?(mn=!0,en(a,h)):a}a=s}}function Ln(n){for(var e=n.e*ln,t=n.d[0];t>=10;t/=10)e++;return e}function z1(n,e,t){if(e>n.LN10.sd())throw mn=!0,t&&(n.precision=t),Error(Vi+"LN10 precision limit exceeded");return en(new n(n.LN10),e)}function Ms(n){for(var e="";n--;)e+="0";return e}function Ah(n,e){var t,r,i,a,s,o,c,u,d,h=1,f=10,p=n,y=p.d,g=p.constructor,m=g.precision;if(p.s<1)throw Error(Vi+(p.s?"NaN":"-Infinity"));if(p.eq(mi))return new g(0);if(e==null?(mn=!1,u=m):u=e,p.eq(10))return e==null&&(mn=!0),z1(g,u);if(u+=f,g.precision=u,t=Ta(y),r=t.charAt(0),a=Ln(p),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)p=p.times(n),t=Ta(p.d),r=t.charAt(0),h++;a=Ln(p),r>1?(p=new g("0."+t),a++):p=new g(r+"."+t.slice(1))}else return c=z1(g,u+2,m).times(a+""),p=Ah(new g(r+"."+t.slice(1)),u-f).plus(c),g.precision=m,e==null?(mn=!0,en(p,m)):p;for(o=s=p=hs(p.minus(mi),p.plus(mi),u),d=en(p.times(p),u),i=3;;){if(s=en(s.times(d),u),c=o.plus(hs(s,new g(i),u)),Ta(c.d).slice(0,u)===Ta(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(z1(g,u+2,m).times(a+""))),o=hs(o,new g(h),u),g.precision=m,e==null?(mn=!0,en(o,m)):o;o=c,i+=2}}function tk(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=Iu(t/ln),n.d=[],r=(t+1)%ln,t<0&&(r+=ln),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=ln;r<i;)n.d.push(+e.slice(r,r+=ln));e=e.slice(r),r=ln-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),mn&&(n.e>Vm||n.e<-Vm))throw Error(I_+t)}else n.s=0,n.e=0,n.d=[0];return n}function en(n,e,t){var r,i,a,s,o,c,u,d,h=n.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=ln,i=e,u=h[d=0];else{if(d=Math.ceil((r+1)/ln),a=h.length,d>=a)return n;for(u=a=h[d],s=1;a>=10;a/=10)s++;r%=ln,i=r-ln+s}if(t!==void 0&&(a=Bo(10,s-i-1),o=u/a%10|0,c=e<0||h[d+1]!==void 0||u%a,c=t<4?(o||c)&&(t==0||t==(n.s<0?3:2)):o>5||o==5&&(t==4||c||t==6&&(r>0?i>0?u/Bo(10,s-i):0:h[d-1])%10&1||t==(n.s<0?8:7))),e<1||!h[0])return c?(a=Ln(n),h.length=1,e=e-a-1,h[0]=Bo(10,(ln-e%ln)%ln),n.e=Iu(-e/ln)||0):(h.length=1,h[0]=n.e=n.s=0),n;if(r==0?(h.length=d,a=1,d--):(h.length=d+1,a=Bo(10,ln-r),h[d]=i>0?(u/Bo(10,s-i)%Bo(10,i)|0)*a:0),c)for(;;)if(d==0){(h[0]+=a)==nr&&(h[0]=1,++n.e);break}else{if(h[d]+=a,h[d]!=nr)break;h[d--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(mn&&(n.e>Vm||n.e<-Vm))throw Error(I_+Ln(n));return n}function fF(n,e){var t,r,i,a,s,o,c,u,d,h,f=n.constructor,p=f.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new f(n),mn?en(e,p):e;if(c=n.d,h=e.d,r=e.e,u=n.e,c=c.slice(),s=u-r,s){for(d=s<0,d?(t=c,s=-s,o=h.length):(t=h,r=u,o=c.length),i=Math.max(Math.ceil(p/ln),o)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=c.length,o=h.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}s=0}for(d&&(t=c,c=h,h=t,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=nr-1;--c[a],c[i]+=nr}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,mn?en(e,p):e):new f(0)}function gl(n,e,t){var r,i=Ln(n),a=Ta(n.d),s=a.length;return e?(t&&(r=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ms(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Ms(-i-1)+a,t&&(r=t-s)>0&&(a+=Ms(r))):i>=s?(a+=Ms(i+1-s),t&&(r=t-i-1)>0&&(a=a+"."+Ms(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),t&&(r=t-s)>0&&(i+1===s&&(a+="."),a+=Ms(r))),n.s<0?"-"+a:a}function nk(n,e){if(n.length>e)return n.length=e,!0}function pF(n){var e,t,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(il+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return tk(s,a.toString())}else if(typeof a!="string")throw Error(il+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,ate.test(a))tk(s,a);else throw Error(il+a)}if(i.prototype=Xe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=pF,i.config=i.set=ste,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function ste(n){if(!n||typeof n!="object")throw Error(Vi+"Object expected");var e,t,r,i=["precision",1,Pu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(Iu(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(il+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(il+t+": "+r);return this}var R_=pF(ite);mi=new R_(1);const Yt=R_;function ote(n){return dte(n)||ute(n)||cte(n)||lte()}function lte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cte(n,e){if(n){if(typeof n=="string")return WA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return WA(n,e)}}function ute(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function dte(n){if(Array.isArray(n))return WA(n)}function WA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var hte=function(e){return e},mF={},gF=function(e){return e===mF},rk=function(e){return function t(){return arguments.length===0||arguments.length===1&&gF(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},fte=function n(e,t){return e===1?t:rk(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==mF}).length;return s>=e?t.apply(void 0,i):n(e-s,rk(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=i.map(function(h){return gF(h)?c.shift():h});return t.apply(void 0,ote(d).concat(c))}))})},Ky=function(e){return fte(e.length,e)},HA=function(e,t){for(var r=[],i=e;i<t;++i)r[i-e]=i;return r},pte=Ky(function(n,e){return Array.isArray(e)?e.map(n):Object.keys(e).map(function(t){return e[t]}).map(n)}),mte=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return hte;var i=t.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,c){return c(o)},a.apply(void 0,arguments))}},VA=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},yF=function(e){var t=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t&&a.every(function(o,c){return o===t[c]})||(t=a,r=e.apply(void 0,a)),r}};function gte(n){var e;return n===0?e=1:e=Math.floor(new Yt(n).abs().log(10).toNumber())+1,e}function yte(n,e,t){for(var r=new Yt(n),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(t),i++;return a}var vte=Ky(function(n,e,t){var r=+n,i=+e;return r+t*(i-r)}),xte=Ky(function(n,e,t){var r=e-+n;return r=r||1/0,(t-n)/r}),bte=Ky(function(n,e,t){var r=e-+n;return r=r||1/0,Math.max(0,Math.min(1,(t-n)/r))});const Xy={rangeStep:yte,getDigitCount:gte,interpolateNumber:vte,uninterpolateNumber:xte,uninterpolateTruncation:bte};function GA(n){return Ste(n)||Ate(n)||vF(n)||wte()}function wte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ate(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function Ste(n){if(Array.isArray(n))return YA(n)}function Sh(n,e){return Dte(n)||_te(n,e)||vF(n,e)||Ete()}function Ete(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vF(n,e){if(n){if(typeof n=="string")return YA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return YA(n,e)}}function YA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function _te(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],r=!0,i=!1,a=void 0;try{for(var s=n[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(t.push(o.value),!(e&&t.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return t}}function Dte(n){if(Array.isArray(n))return n}function xF(n){var e=Sh(n,2),t=e[0],r=e[1],i=t,a=r;return t>r&&(i=r,a=t),[i,a]}function bF(n,e,t){if(n.lte(0))return new Yt(0);var r=Xy.getDigitCount(n.toNumber()),i=new Yt(10).pow(r),a=n.div(i),s=r!==1?.05:.1,o=new Yt(Math.ceil(a.div(s).toNumber())).add(t).mul(s),c=o.mul(i);return e?c:new Yt(Math.ceil(c))}function jte(n,e,t){var r=1,i=new Yt(n);if(!i.isint()&&t){var a=Math.abs(n);a<1?(r=new Yt(10).pow(Xy.getDigitCount(n)-1),i=new Yt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Yt(Math.floor(n)))}else n===0?i=new Yt(Math.floor((e-1)/2)):t||(i=new Yt(Math.floor(n)));var s=Math.floor((e-1)/2),o=mte(pte(function(c){return i.add(new Yt(c-s).mul(r)).toNumber()}),HA);return o(0,e)}function wF(n,e,t,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-n)/(t-1)))return{step:new Yt(0),tickMin:new Yt(0),tickMax:new Yt(0)};var a=bF(new Yt(e).sub(n).div(t-1),r,i),s;n<=0&&e>=0?s=new Yt(0):(s=new Yt(n).add(e).div(2),s=s.sub(new Yt(s).mod(a)));var o=Math.ceil(s.sub(n).div(a).toNumber()),c=Math.ceil(new Yt(e).sub(s).div(a).toNumber()),u=o+c+1;return u>t?wF(n,e,t,r,i+1):(u<t&&(c=e>0?c+(t-u):c,o=e>0?o:o+(t-u)),{step:a,tickMin:s.sub(new Yt(o).mul(a)),tickMax:s.add(new Yt(c).mul(a))})}function Tte(n){var e=Sh(n,2),t=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=xF([t,r]),c=Sh(o,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(GA(HA(0,i-1).map(function(){return 1/0}))):[].concat(GA(HA(0,i-1).map(function(){return-1/0})),[d]);return t>r?VA(h):h}if(u===d)return jte(u,i,a);var f=wF(u,d,s,a),p=f.step,y=f.tickMin,g=f.tickMax,m=Xy.rangeStep(y,g.add(new Yt(.1).mul(p)),p);return t>r?VA(m):m}function Cte(n,e){var t=Sh(n,2),r=t[0],i=t[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=xF([r,i]),o=Sh(s,2),c=o[0],u=o[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),h=bF(new Yt(u).sub(c).div(d-1),a,0),f=[].concat(GA(Xy.rangeStep(new Yt(c),new Yt(u).sub(new Yt(.99).mul(h)),h)),[u]);return r>i?VA(f):f}var Nte=yF(Tte),kte=yF(Cte),Ote="Invariant failed";function yl(n,e){throw new Error(Ote)}var Pte=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Jc(n){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(n)}function Gm(){return Gm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gm.apply(this,arguments)}function Ite(n,e){return Lte(n)||Fte(n,e)||Mte(n,e)||Rte()}function Rte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mte(n,e){if(n){if(typeof n=="string")return ik(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ik(n,e)}}function ik(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Fte(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(c=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Lte(n){if(Array.isArray(n))return n}function Ute(n,e){if(n==null)return{};var t=Bte(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Bte(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function $te(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function zte(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,EF(r.key),r)}}function qte(n,e,t){return e&&zte(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Wte(n,e,t){return e=Ym(e),Hte(n,AF()?Reflect.construct(e,t||[],Ym(n).constructor):e.apply(n,t))}function Hte(n,e){if(e&&(Jc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vte(n)}function Vte(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function AF(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AF=function(){return!!n})()}function Ym(n){return Ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ym(n)}function Gte(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&KA(n,e)}function KA(n,e){return KA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},KA(n,e)}function SF(n,e,t){return e=EF(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function EF(n){var e=Yte(n,"string");return Jc(e)=="symbol"?e:e+""}function Yte(n,e){if(Jc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Jc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Jy=(function(n){function e(){return $te(this,e),Wte(this,e,arguments)}return Gte(e,n),qte(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,f=Ute(r,Pte),p=lt(f,!1);this.props.direction==="x"&&d.type!=="number"&&yl();var y=c.map(function(g){var m=u(g,o),v=m.x,x=m.y,b=m.value,A=m.errorVal;if(!A)return null;var w=[],S,E;if(Array.isArray(A)){var _=Ite(A,2);S=_[0],E=_[1]}else S=E=A;if(a==="vertical"){var D=d.scale,C=x+i,k=C+s,T=C-s,N=D(b-S),j=D(b+E);w.push({x1:j,y1:k,x2:j,y2:T}),w.push({x1:N,y1:C,x2:j,y2:C}),w.push({x1:N,y1:k,x2:N,y2:T})}else if(a==="horizontal"){var R=h.scale,P=v+i,F=P-s,q=P+s,$=R(b-S),B=R(b+E);w.push({x1:F,y1:B,x2:q,y2:B}),w.push({x1:P,y1:$,x2:P,y2:B}),w.push({x1:F,y1:$,x2:q,y2:$})}return fe.createElement(Ot,Gm({className:"recharts-errorBar",key:"bar-".concat(w.map(function(I){return"".concat(I.x1,"-").concat(I.x2,"-").concat(I.y1,"-").concat(I.y2)}))},p),w.map(function(I){return fe.createElement("line",Gm({},I,{key:"line-".concat(I.x1,"-").concat(I.x2,"-").concat(I.y1,"-").concat(I.y2)}))}))});return fe.createElement(Ot,{className:"recharts-errorBars"},y)}}])})(fe.Component);SF(Jy,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});SF(Jy,"displayName","ErrorBar");function Eh(n){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(n)}function ak(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function No(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ak(Object(t),!0).forEach(function(r){Kte(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ak(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Kte(n,e,t){return e=Xte(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xte(n){var e=Jte(n,"string");return Eh(e)=="symbol"?e:e+""}function Jte(n,e){if(Eh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var _F=function(e){var t=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=di(t,Js);if(!s)return null;var o=Js.defaultProps,c=o!==void 0?No(No({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(d,h){var f=h.item,p=h.props,y=p.sectors||p.data||[];return d.concat(y.map(function(g){return{type:s.props.iconType||f.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var h=d.item,f=h.type.defaultProps,p=f!==void 0?No(No({},f),h.props):{},y=p.dataKey,g=p.name,m=p.legendType,v=p.hide;return{inactive:v,dataKey:y,type:c.iconType||m||"square",color:M_(h),value:g||y,payload:p}}),No(No(No({},c),Js.getWithHeight(s,i)),{},{payload:u,item:s})};function _h(n){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(n)}function sk(n){return tne(n)||ene(n)||Qte(n)||Zte()}function Zte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qte(n,e){if(n){if(typeof n=="string")return XA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return XA(n,e)}}function ene(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tne(n){if(Array.isArray(n))return XA(n)}function XA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function ok(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function En(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ok(Object(t),!0).forEach(function(r){Ac(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ok(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ac(n,e,t){return e=nne(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nne(n){var e=rne(n,"string");return _h(e)=="symbol"?e:e+""}function rne(n,e){if(_h(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(_h(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Hn(n,e,t){return xt(n)||xt(e)?t:Vn(e)?xi(n,e,t):ft(e)?e(n):t}function qd(n,e,t,r){var i=nte(n,function(o){return Hn(o,e)});if(t==="number"){var a=i.filter(function(o){return Fe(o)||parseFloat(o)});return a.length?[Yy(a),Vs(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!xt(o)}):i;return s.map(function(o){return Vn(o)||o instanceof Date?o:""})}var ine=function(e){var t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(t=r?.length)!==null&&t!==void 0?t:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<o;u++){var d=u>0?i[u-1].coordinate:i[o-1].coordinate,h=i[u].coordinate,f=u>=o-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Fr(h-d)!==Fr(f-h)){var y=[];if(Fr(f-h)===Fr(c[1]-c[0])){p=f;var g=h+c[1]-c[0];y[0]=Math.min(g,(g+d)/2),y[1]=Math.max(g,(g+d)/2)}else{p=d;var m=f+c[1]-c[0];y[0]=Math.min(h,(m+h)/2),y[1]=Math.max(h,(m+h)/2)}var v=[Math.min(h,(p+h)/2),Math.max(h,(p+h)/2)];if(e>v[0]&&e<=v[1]||e>=y[0]&&e<=y[1]){s=i[u].index;break}}else{var x=Math.min(d,f),b=Math.max(d,f);if(e>(x+h)/2&&e<=(b+h)/2){s=i[u].index;break}}}else for(var A=0;A<o;A++)if(A===0&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A===o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2){s=r[A].index;break}return s},M_=function(e){var t,r=e,i=r.type.displayName,a=(t=e.type)!==null&&t!==void 0&&t.defaultProps?En(En({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,c;switch(i){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:o;break;default:c=o;break}return c},ane=function(e){var t=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),c=0,u=o.length;c<u;c++)for(var d=a[o[c]].stackGroups,h=Object.keys(d),f=0,p=h.length;f<p;f++){var y=d[h[f]],g=y.items,m=y.cateAxisId,v=g.filter(function(E){return ds(E.type).indexOf("Bar")>=0});if(v&&v.length){var x=v[0].type.defaultProps,b=x!==void 0?En(En({},x),v[0].props):v[0].props,A=b.barSize,w=b[m];s[w]||(s[w]=[]);var S=xt(A)?t:A;s[w].push({item:v[0],stackList:v.slice(1),barSize:xt(S)?void 0:Lr(S,r,0)})}}return s},sne=function(e){var t=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,c=s.length;if(c<1)return null;var u=Lr(t,i,0,!0),d,h=[];if(s[0].barSize===+s[0].barSize){var f=!1,p=i/c,y=s.reduce(function(A,w){return A+w.barSize||0},0);y+=(c-1)*u,y>=i&&(y-=(c-1)*u,u=0),y>=i&&p>0&&(f=!0,p*=.9,y=c*p);var g=(i-y)/2>>0,m={offset:g-u,size:0};d=s.reduce(function(A,w){var S={item:w.item,position:{offset:m.offset+m.size+u,size:f?p:w.barSize}},E=[].concat(sk(A),[S]);return m=E[E.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(_){E.push({item:_,position:m})}),E},h)}else{var v=Lr(r,i,0,!0);i-2*v-(c-1)*u<=0&&(u=0);var x=(i-2*v-(c-1)*u)/c;x>1&&(x>>=0);var b=o===+o?Math.min(x,o):x;d=s.reduce(function(A,w,S){var E=[].concat(sk(A),[{item:w.item,position:{offset:v+(x+u)*S+(x-b)/2,size:b}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(_){E.push({item:_,position:E[E.length-1].position})}),E},h)}return d},one=function(e,t,r,i){var a=r.children,s=r.width,o=r.margin,c=s-(o.left||0)-(o.right||0),u=_F({children:a,legendWidth:c});if(u){var d=i||{},h=d.width,f=d.height,p=u.align,y=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&y==="middle")&&p!=="center"&&Fe(e[p]))return En(En({},e),{},Ac({},p,e[p]+(h||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&y!=="middle"&&Fe(e[y]))return En(En({},e),{},Ac({},y,e[y]+(f||0)))}return e},lne=function(e,t,r){return xt(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||r==="x"?t==="xAxis":r==="y"?t==="yAxis":!0},DF=function(e,t,r,i,a){var s=t.props.children,o=zi(s,Jy).filter(function(u){return lne(i,a,u.props.direction)});if(o&&o.length){var c=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var h=Hn(d,r);if(xt(h))return u;var f=Array.isArray(h)?[Yy(h),Vs(h)]:[h,h],p=c.reduce(function(y,g){var m=Hn(d,g,0),v=f[0]-Math.abs(Array.isArray(m)?m[0]:m),x=f[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(v,y[0]),Math.max(x,y[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},cne=function(e,t,r,i,a){var s=t.map(function(o){return DF(e,o,r,a,i)}).filter(function(o){return!xt(o)});return s&&s.length?s.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},jF=function(e,t,r,i,a){var s=t.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&DF(e,c,u,i)||qd(e,u,r,a)});if(r==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)o[u[d]]||(o[u[d]]=!0,c.push(u[d]));return c},[])},TF=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},CF=function(e,t,r,i){if(i)return e.map(function(c){return c.coordinate});var a,s,o=e.map(function(c){return c.coordinate===t&&(a=!0),c.coordinate===r&&(s=!0),c.coordinate});return a||o.push(t),s||o.push(r),o},cs=function(e,t,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(t||r)&&s==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&o?.length>=2?Fr(o[0]-o[1])*2*u:u,t&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(h){var f=a?a.indexOf(h):h;return{coordinate:i(f)+u,value:h,offset:u}});return d.filter(function(h){return!Cu(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:i(h)+u,value:h,index:f,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,f){return{coordinate:i(h)+u,value:a?a[h]:h,index:f,offset:u}})},q1=new WeakMap,Gf=function(e,t){if(typeof t!="function")return e;q1.has(e)||q1.set(e,new WeakMap);var r=q1.get(e);if(r.has(t))return r.get(t);var i=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,i),i},NF=function(e,t,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:yh(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:zm(),realScaleType:"linear"}:a==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:zd(),realScaleType:"point"}:a==="category"?{scale:yh(),realScaleType:"band"}:{scale:zm(),realScaleType:"linear"};if(fl(i)){var c="scale".concat(Iy(i));return{scale:(VN[c]||zd)(),realScaleType:VN[c]?c:"point"}}return ft(i)?{scale:i}:{scale:zd(),realScaleType:"point"}},lk=1e-4,kF=function(e){var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,i=e.range(),a=Math.min(i[0],i[1])-lk,s=Math.max(i[0],i[1])+lk,o=e(t[0]),c=e(t[r-1]);(o<a||o>s||c<a||c>s)&&e.domain([t[0],t[r-1]])}},une=function(e,t){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===t)return e[r].position;return null},dne=function(e,t){if(!t||t.length!==2||!Fe(t[0])||!Fe(t[1]))return e;var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Fe(e[0])||e[0]<r)&&(a[0]=r),(!Fe(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},hne=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<t;++o){var c=Cu(e[o][r][1])?e[o][r][0]:e[o][r][1];c>=0?(e[o][r][0]=a,e[o][r][1]=a+c,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+c,s=e[o][r][1])}},fne=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<t;++s){var o=Cu(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},pne={sign:hne,expand:nK,none:zc,silhouette:rK,wiggle:iK,positive:fne},mne=function(e,t,r){var i=t.map(function(o){return o.props.dataKey}),a=pne[r],s=tK().keys(i).value(function(o,c){return+Hn(o,c,0)}).order(DA).offset(a);return s(e)},gne=function(e,t,r,i,a,s){if(!e)return null;var o=s?t.reverse():t,c={},u=o.reduce(function(h,f){var p,y=(p=f.type)!==null&&p!==void 0&&p.defaultProps?En(En({},f.type.defaultProps),f.props):f.props,g=y.stackId,m=y.hide;if(m)return h;var v=y[r],x=h[v]||{hasStack:!1,stackGroups:{}};if(Vn(g)){var b=x.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};b.items.push(f),x.hasStack=!0,x.stackGroups[g]=b}else x.stackGroups[Nu("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return En(En({},h),{},Ac({},v,x))},c),d={};return Object.keys(u).reduce(function(h,f){var p=u[f];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,m){var v=p.stackGroups[m];return En(En({},g),{},Ac({},m,{numericAxisId:r,cateAxisId:i,items:v.items,stackedData:mne(e,v.items,a)}))},y)}return En(En({},h),{},Ac({},f,p))},d)},OF=function(e,t){var r=t.realScaleType,i=t.type,a=t.tickCount,s=t.originalDomain,o=t.allowDecimals,c=r||t.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=Nte(u,a,o);return e.domain([Yy(d),Vs(d)]),{niceTicks:d}}if(a&&i==="number"){var h=e.domain(),f=kte(h,a,o);return{niceTicks:f}}return null};function ck(n){var e=n.axis,t=n.ticks,r=n.bandSize,i=n.entry,a=n.index,s=n.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!xt(i[e.dataKey])){var o=Em(t,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return t[a]?t[a].coordinate+r/2:null}var c=Hn(i,xt(s)?e.dataKey:s);return xt(c)?null:e.scale(c)}var uk=function(e){var t=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(t.type==="category")return r[o]?r[o].coordinate+i:null;var c=Hn(s,t.dataKey,t.domain[o]);return xt(c)?null:t.scale(c)-a/2+i},yne=function(e){var t=e.numericAxis,r=t.scale.domain();if(t.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},vne=function(e,t){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?En(En({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Vn(a)){var s=t[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},xne=function(e){return e.reduce(function(t,r){return[Yy(r.concat([t[0]]).filter(Fe)),Vs(r.concat([t[1]]).filter(Fe))]},[1/0,-1/0])},PF=function(e,t,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,c=o.reduce(function(u,d){var h=xne(d.slice(t,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},dk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,JA=function(e,t,r){if(ft(e))return e(t,r);if(!Array.isArray(e))return t;var i=[];if(Fe(e[0]))i[0]=r?e[0]:Math.min(e[0],t[0]);else if(dk.test(e[0])){var a=+dk.exec(e[0])[1];i[0]=t[0]-a}else ft(e[0])?i[0]=e[0](t[0]):i[0]=t[0];if(Fe(e[1]))i[1]=r?e[1]:Math.max(e[1],t[1]);else if(hk.test(e[1])){var s=+hk.exec(e[1])[1];i[1]=t[1]+s}else ft(e[1])?i[1]=e[1](t[1]):i[1]=t[1];return i},Km=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&t&&t.length>=2){for(var a=u_(t,function(h){return h.coordinate}),s=1/0,o=1,c=a.length;o<c;o++){var u=a[o],d=a[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},fk=function(e,t,r){return!e||!e.length||Xc(e,xi(r,"type.defaultProps.domain"))?t:e},IF=function(e,t){var r=e.type.defaultProps?En(En({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return En(En({},lt(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:M_(e),value:Hn(t,i),type:c,payload:t,chartType:u,hide:d})};function Dh(n){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dh(n)}function pk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ns(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pk(Object(t),!0).forEach(function(r){RF(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function RF(n,e,t){return e=bne(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bne(n){var e=wne(n,"string");return Dh(e)=="symbol"?e:e+""}function wne(n,e){if(Dh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Dh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ane(n,e){return Dne(n)||_ne(n,e)||Ene(n,e)||Sne()}function Sne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ene(n,e){if(n){if(typeof n=="string")return mk(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mk(n,e)}}function mk(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function _ne(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(c=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Dne(n){if(Array.isArray(n))return n}var Xm=Math.PI/180,jne=function(e){return e*180/Math.PI},an=function(e,t,r,i){return{x:e+Math.cos(-Xm*i)*r,y:t+Math.sin(-Xm*i)*r}},MF=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},Tne=function(e,t,r,i,a){var s=e.width,o=e.height,c=e.startAngle,u=e.endAngle,d=Lr(e.cx,s,s/2),h=Lr(e.cy,o,o/2),f=MF(s,o,r),p=Lr(e.innerRadius,f,0),y=Lr(e.outerRadius,f,f*.8),g=Object.keys(t);return g.reduce(function(m,v){var x=t[v],b=x.domain,A=x.reversed,w;if(xt(x.range))i==="angleAxis"?w=[c,u]:i==="radiusAxis"&&(w=[p,y]),A&&(w=[w[1],w[0]]);else{w=x.range;var S=w,E=Ane(S,2);c=E[0],u=E[1]}var _=NF(x,a),D=_.realScaleType,C=_.scale;C.domain(b).range(w),kF(C);var k=OF(C,ns(ns({},x),{},{realScaleType:D})),T=ns(ns(ns({},x),k),{},{range:w,radius:y,realScaleType:D,scale:C,cx:d,cy:h,innerRadius:p,outerRadius:y,startAngle:c,endAngle:u});return ns(ns({},m),{},RF({},v,T))},{})},Cne=function(e,t){var r=e.x,i=e.y,a=t.x,s=t.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},Nne=function(e,t){var r=e.x,i=e.y,a=t.cx,s=t.cy,o=Cne({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var c=(r-a)/o,u=Math.acos(c);return i>s&&(u=2*Math.PI-u),{radius:o,angle:jne(u),angleInRadian:u}},kne=function(e){var t=e.startAngle,r=e.endAngle,i=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:t-s*360,endAngle:r-s*360}},One=function(e,t){var r=t.startAngle,i=t.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},gk=function(e,t){var r=e.x,i=e.y,a=Nne({x:r,y:i},t),s=a.radius,o=a.angle,c=t.innerRadius,u=t.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=kne(t),h=d.startAngle,f=d.endAngle,p=o,y;if(h<=f){for(;p>f;)p-=360;for(;p<h;)p+=360;y=p>=h&&p<=f}else{for(;p>h;)p-=360;for(;p<f;)p+=360;y=p>=f&&p<=h}return y?ns(ns({},t),{},{radius:s,angle:One(p,t)}):null},FF=function(e){return!M.isValidElement(e)&&!ft(e)&&typeof e!="boolean"?e.className:""};function jh(n){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(n)}var Pne=["offset"];function Ine(n){return Lne(n)||Fne(n)||Mne(n)||Rne()}function Rne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mne(n,e){if(n){if(typeof n=="string")return ZA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ZA(n,e)}}function Fne(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Lne(n){if(Array.isArray(n))return ZA(n)}function ZA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Une(n,e){if(n==null)return{};var t=Bne(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Bne(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function yk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function zn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yk(Object(t),!0).forEach(function(r){$ne(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function $ne(n,e,t){return e=zne(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zne(n){var e=qne(n,"string");return jh(e)=="symbol"?e:e+""}function qne(n,e){if(jh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(jh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Th(){return Th=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Th.apply(this,arguments)}var Wne=function(e){var t=e.value,r=e.formatter,i=xt(e.children)?t:e.children;return ft(r)?r(i):i},Hne=function(e,t){var r=Fr(t-e),i=Math.min(Math.abs(t-e),360);return r*i},Vne=function(e,t,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,c=a,u=c.cx,d=c.cy,h=c.innerRadius,f=c.outerRadius,p=c.startAngle,y=c.endAngle,g=c.clockWise,m=(h+f)/2,v=Hne(p,y),x=v>=0?1:-1,b,A;i==="insideStart"?(b=p+x*s,A=g):i==="insideEnd"?(b=y-x*s,A=!g):i==="end"&&(b=y+x*s,A=g),A=v<=0?A:!A;var w=an(u,d,m,b),S=an(u,d,m,b+(A?1:-1)*359),E="M".concat(w.x,",").concat(w.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(A?0:1,`,
    `).concat(S.x,",").concat(S.y),_=xt(e.id)?Nu("recharts-radial-line-"):e.id;return fe.createElement("text",Th({},r,{dominantBaseline:"central",className:wt("recharts-radial-bar-label",o)}),fe.createElement("defs",null,fe.createElement("path",{id:_,d:E})),fe.createElement("textPath",{xlinkHref:"#".concat(_)},t))},Gne=function(e){var t=e.viewBox,r=e.offset,i=e.position,a=t,s=a.cx,o=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,h=a.endAngle,f=(d+h)/2;if(i==="outside"){var p=an(s,o,u+r,f),y=p.x,g=p.y;return{x:y,y:g,textAnchor:y>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var m=(c+u)/2,v=an(s,o,m,f),x=v.x,b=v.y;return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},Yne=function(e){var t=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=t,o=s.x,c=s.y,u=s.width,d=s.height,h=d>=0?1:-1,f=h*i,p=h>0?"end":"start",y=h>0?"start":"end",g=u>=0?1:-1,m=g*i,v=g>0?"end":"start",x=g>0?"start":"end";if(a==="top"){var b={x:o+u/2,y:c-h*i,textAnchor:"middle",verticalAnchor:p};return zn(zn({},b),r?{height:Math.max(c-r.y,0),width:u}:{})}if(a==="bottom"){var A={x:o+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:y};return zn(zn({},A),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(a==="left"){var w={x:o-m,y:c+d/2,textAnchor:v,verticalAnchor:"middle"};return zn(zn({},w),r?{width:Math.max(w.x-r.x,0),height:d}:{})}if(a==="right"){var S={x:o+u+m,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return zn(zn({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:d}:{})}var E=r?{width:u,height:d}:{};return a==="insideLeft"?zn({x:o+m,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},E):a==="insideRight"?zn({x:o+u-m,y:c+d/2,textAnchor:v,verticalAnchor:"middle"},E):a==="insideTop"?zn({x:o+u/2,y:c+f,textAnchor:"middle",verticalAnchor:y},E):a==="insideBottom"?zn({x:o+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:p},E):a==="insideTopLeft"?zn({x:o+m,y:c+f,textAnchor:x,verticalAnchor:y},E):a==="insideTopRight"?zn({x:o+u-m,y:c+f,textAnchor:v,verticalAnchor:y},E):a==="insideBottomLeft"?zn({x:o+m,y:c+d-f,textAnchor:x,verticalAnchor:p},E):a==="insideBottomRight"?zn({x:o+u-m,y:c+d-f,textAnchor:v,verticalAnchor:p},E):Tu(a)&&(Fe(a.x)||qo(a.x))&&(Fe(a.y)||qo(a.y))?zn({x:o+Lr(a.x,u),y:c+Lr(a.y,d),textAnchor:"end",verticalAnchor:"end"},E):zn({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},E)},Kne=function(e){return"cx"in e&&Fe(e.cx)};function rr(n){var e=n.offset,t=e===void 0?5:e,r=Une(n,Pne),i=zn({offset:t},r),a=i.viewBox,s=i.position,o=i.value,c=i.children,u=i.content,d=i.className,h=d===void 0?"":d,f=i.textBreakAll;if(!a||xt(o)&&xt(c)&&!M.isValidElement(u)&&!ft(u))return null;if(M.isValidElement(u))return M.cloneElement(u,i);var p;if(ft(u)){if(p=M.createElement(u,i),M.isValidElement(p))return p}else p=Wne(i);var y=Kne(a),g=lt(i,!0);if(y&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Vne(i,p,g);var m=y?Gne(i):Yne(i);return fe.createElement(ml,Th({className:wt("recharts-label",h)},g,m,{breakAll:f}),p)}rr.displayName="Label";var LF=function(e){var t=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,h=e.x,f=e.y,p=e.top,y=e.left,g=e.width,m=e.height,v=e.clockWise,x=e.labelViewBox;if(x)return x;if(Fe(g)&&Fe(m)){if(Fe(h)&&Fe(f))return{x:h,y:f,width:g,height:m};if(Fe(p)&&Fe(y))return{x:p,y,width:g,height:m}}return Fe(h)&&Fe(f)?{x:h,y:f,width:0,height:0}:Fe(t)&&Fe(r)?{cx:t,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:d||c||o||0,clockWise:v}:e.viewBox?e.viewBox:{}},Xne=function(e,t){return e?e===!0?fe.createElement(rr,{key:"label-implicit",viewBox:t}):Vn(e)?fe.createElement(rr,{key:"label-implicit",viewBox:t,value:e}):M.isValidElement(e)?e.type===rr?M.cloneElement(e,{key:"label-implicit",viewBox:t}):fe.createElement(rr,{key:"label-implicit",content:e,viewBox:t}):ft(e)?fe.createElement(rr,{key:"label-implicit",content:e,viewBox:t}):Tu(e)?fe.createElement(rr,Th({viewBox:t},e,{key:"label-implicit"})):null:null},Jne=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=LF(e),s=zi(i,rr).map(function(c,u){return M.cloneElement(c,{viewBox:t||a,key:"label-".concat(u)})});if(!r)return s;var o=Xne(e.label,t||a);return[o].concat(Ine(s))};rr.parseViewBox=LF;rr.renderCallByParent=Jne;var W1,vk;function Zne(){if(vk)return W1;vk=1;function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return W1=n,W1}var Qne=Zne();const ere=It(Qne);function Ch(n){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(n)}var tre=["valueAccessor"],nre=["data","dataKey","clockWise","id","textBreakAll"];function rre(n){return ore(n)||sre(n)||are(n)||ire()}function ire(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function are(n,e){if(n){if(typeof n=="string")return QA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return QA(n,e)}}function sre(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ore(n){if(Array.isArray(n))return QA(n)}function QA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Jm(){return Jm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jm.apply(this,arguments)}function xk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bk(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(t),!0).forEach(function(r){lre(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lre(n,e,t){return e=cre(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cre(n){var e=ure(n,"string");return Ch(e)=="symbol"?e:e+""}function ure(n,e){if(Ch(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ch(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function wk(n,e){if(n==null)return{};var t=dre(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function dre(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var hre=function(e){return Array.isArray(e.value)?ere(e.value):e.value};function fs(n){var e=n.valueAccessor,t=e===void 0?hre:e,r=wk(n,tre),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,c=r.textBreakAll,u=wk(r,nre);return!i||!i.length?null:fe.createElement(Ot,{className:"recharts-label-list"},i.map(function(d,h){var f=xt(a)?t(d,h):Hn(d&&d.payload,a),p=xt(o)?{}:{id:"".concat(o,"-").concat(h)};return fe.createElement(rr,Jm({},lt(d,!0),u,p,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:rr.parseViewBox(xt(s)?d:bk(bk({},d),{},{clockWise:s})),key:"label-".concat(h),index:h}))}))}fs.displayName="LabelList";function fre(n,e){return n?n===!0?fe.createElement(fs,{key:"labelList-implicit",data:e}):fe.isValidElement(n)||ft(n)?fe.createElement(fs,{key:"labelList-implicit",data:e,content:n}):Tu(n)?fe.createElement(fs,Jm({data:e},n,{key:"labelList-implicit"})):null:null}function pre(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n||!n.children&&t&&!n.label)return null;var r=n.children,i=zi(r,fs).map(function(s,o){return M.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!t)return i;var a=fre(n.label,e);return[a].concat(rre(i))}fs.renderCallByParent=pre;function Nh(n){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nh(n)}function eS(){return eS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},eS.apply(this,arguments)}function Ak(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Sk(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ak(Object(t),!0).forEach(function(r){mre(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ak(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function mre(n,e,t){return e=gre(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gre(n){var e=yre(n,"string");return Nh(e)=="symbol"?e:e+""}function yre(n,e){if(Nh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var vre=function(e,t){var r=Fr(t-e),i=Math.min(Math.abs(t-e),359.999);return r*i},Yf=function(e){var t=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(o?1:-1)+i,h=Math.asin(c/d)/Xm,f=u?a:a+s*h,p=an(t,r,d,f),y=an(t,r,i,f),g=u?a-s*h:a,m=an(t,r,d*Math.cos(h*Xm),g);return{center:p,circleTangency:y,lineTangency:m,theta:h}},UF=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,c=vre(s,o),u=s+c,d=an(t,r,a,s),h=an(t,r,a,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var p=an(t,r,i,s),y=an(t,r,i,u);f+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},xre=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,h=Fr(d-u),f=Yf({cx:t,cy:r,radius:a,angle:u,sign:h,cornerRadius:s,cornerIsExternal:c}),p=f.circleTangency,y=f.lineTangency,g=f.theta,m=Yf({cx:t,cy:r,radius:a,angle:d,sign:-h,cornerRadius:s,cornerIsExternal:c}),v=m.circleTangency,x=m.lineTangency,b=m.theta,A=c?Math.abs(u-d):Math.abs(u-d)-g-b;if(A<0)return o?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):UF({cx:t,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var w="M ".concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(A>180),",").concat(+(h<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
  `);if(i>0){var S=Yf({cx:t,cy:r,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),E=S.circleTangency,_=S.lineTangency,D=S.theta,C=Yf({cx:t,cy:r,radius:i,angle:d,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),k=C.circleTangency,T=C.lineTangency,N=C.theta,j=c?Math.abs(u-d):Math.abs(u-d)-D-N;if(j<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(j>180),",").concat(+(h>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},bre={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},BF=function(e){var t=Sk(Sk({},bre),e),r=t.cx,i=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,c=t.forceCornerRadius,u=t.cornerIsExternal,d=t.startAngle,h=t.endAngle,f=t.className;if(s<a||d===h)return null;var p=wt("recharts-sector",f),y=s-a,g=Lr(o,y,0,!0),m;return g>0&&Math.abs(d-h)<360?m=xre({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):m=UF({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:h}),fe.createElement("path",eS({},lt(t,!0),{className:p,d:m,role:"img"}))};function kh(n){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(n)}function tS(){return tS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tS.apply(this,arguments)}function Ek(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _k(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ek(Object(t),!0).forEach(function(r){wre(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ek(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function wre(n,e,t){return e=Are(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Are(n){var e=Sre(n,"string");return kh(e)=="symbol"?e:e+""}function Sre(n,e){if(kh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(kh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Dk={curveBasisClosed:WY,curveBasisOpen:HY,curveBasis:qY,curveBumpX:CY,curveBumpY:NY,curveLinearClosed:VY,curveLinear:My,curveMonotoneX:GY,curveMonotoneY:YY,curveNatural:KY,curveStep:XY,curveStepAfter:ZY,curveStepBefore:JY},Kf=function(e){return e.x===+e.x&&e.y===+e.y},sd=function(e){return e.x},od=function(e){return e.y},Ere=function(e,t){if(ft(e))return e;var r="curve".concat(Iy(e));return(r==="curveMonotone"||r==="curveBump")&&t?Dk["".concat(r).concat(t==="vertical"?"Y":"X")]:Dk[r]||My},_re=function(e){var t=e.type,r=t===void 0?"linear":t,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=Ere(r,o),h=u?a.filter(function(g){return Kf(g)}):a,f;if(Array.isArray(s)){var p=u?s.filter(function(g){return Kf(g)}):s,y=h.map(function(g,m){return _k(_k({},g),{},{base:p[m]})});return o==="vertical"?f=Uf().y(od).x1(sd).x0(function(g){return g.base.x}):f=Uf().x(sd).y1(od).y0(function(g){return g.base.y}),f.defined(Kf).curve(d),f(y)}return o==="vertical"&&Fe(s)?f=Uf().y(od).x1(sd).x0(s):Fe(s)?f=Uf().x(sd).y1(od).y0(s):f=FR().x(sd).y(od),f.defined(Kf).curve(d),f(h)},Sc=function(e){var t=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?_re(e):i;return M.createElement("path",tS({},lt(e,!1),_m(e),{className:wt("recharts-curve",t),d:s,ref:a}))},H1={exports:{}},V1,jk;function Dre(){if(jk)return V1;jk=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return V1=n,V1}var G1,Tk;function jre(){if(Tk)return G1;Tk=1;var n=Dre();function e(){}function t(){}return t.resetWarningCache=e,G1=function(){function r(s,o,c,u,d,h){if(h!==n){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},G1}var Ck;function Tre(){return Ck||(Ck=1,H1.exports=jre()()),H1.exports}var Cre=Tre();const zt=It(Cre),{getOwnPropertyNames:Nre,getOwnPropertySymbols:kre}=Object,{hasOwnProperty:Ore}=Object.prototype;function Y1(n,e){return function(r,i,a){return n(r,i,a)&&e(r,i,a)}}function Xf(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);const{cache:a}=i,s=a.get(t),o=a.get(r);if(s&&o)return s===r&&o===t;a.set(t,r),a.set(r,t);const c=n(t,r,i);return a.delete(t),a.delete(r),c}}function Pre(n){return n?.[Symbol.toStringTag]}function Nk(n){return Nre(n).concat(kre(n))}const Ire=Object.hasOwn||((n,e)=>Ore.call(n,e));function Pl(n,e){return n===e||!n&&!e&&n!==n&&e!==e}const Rre="__v",Mre="__o",Fre="_owner",{getOwnPropertyDescriptor:kk,keys:Ok}=Object;function Lre(n,e){return n.byteLength===e.byteLength&&Zm(new Uint8Array(n),new Uint8Array(e))}function Ure(n,e,t){let r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function Bre(n,e){return n.byteLength===e.byteLength&&Zm(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function $re(n,e){return Pl(n.getTime(),e.getTime())}function zre(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function qre(n,e){return n===e}function Pk(n,e,t){const r=n.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=n.entries();let s,o,c=0;for(;(s=a.next())&&!s.done;){const u=e.entries();let d=!1,h=0;for(;(o=u.next())&&!o.done;){if(i[h]){h++;continue}const f=s.value,p=o.value;if(t.equals(f[0],p[0],c,h,n,e,t)&&t.equals(f[1],p[1],f[0],p[0],n,e,t)){d=i[h]=!0;break}h++}if(!d)return!1;c++}return!0}const Wre=Pl;function Hre(n,e,t){const r=Ok(n);let i=r.length;if(Ok(e).length!==i)return!1;for(;i-- >0;)if(!$F(n,e,t,r[i]))return!1;return!0}function ld(n,e,t){const r=Nk(n);let i=r.length;if(Nk(e).length!==i)return!1;let a,s,o;for(;i-- >0;)if(a=r[i],!$F(n,e,t,a)||(s=kk(n,a),o=kk(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function Vre(n,e){return Pl(n.valueOf(),e.valueOf())}function Gre(n,e){return n.source===e.source&&n.flags===e.flags}function Ik(n,e,t){const r=n.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=n.values();let s,o;for(;(s=a.next())&&!s.done;){const c=e.values();let u=!1,d=0;for(;(o=c.next())&&!o.done;){if(!i[d]&&t.equals(s.value,o.value,s.value,o.value,n,e,t)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function Zm(n,e){let t=n.byteLength;if(e.byteLength!==t||n.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function Yre(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function $F(n,e,t,r){return(r===Fre||r===Mre||r===Rre)&&(n.$$typeof||e.$$typeof)?!0:Ire(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}const Kre="[object ArrayBuffer]",Xre="[object Arguments]",Jre="[object Boolean]",Zre="[object DataView]",Qre="[object Date]",eie="[object Error]",tie="[object Map]",nie="[object Number]",rie="[object Object]",iie="[object RegExp]",aie="[object Set]",sie="[object String]",oie={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},lie="[object URL]",cie=Object.prototype.toString;function uie({areArrayBuffersEqual:n,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:s,areNumbersEqual:o,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:y}){return function(m,v,x){if(m===v)return!0;if(m==null||v==null)return!1;const b=typeof m;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?o(m,v,x):b==="function"?a(m,v,x):!1;const A=m.constructor;if(A!==v.constructor)return!1;if(A===Object)return c(m,v,x);if(Array.isArray(m))return e(m,v,x);if(A===Date)return r(m,v,x);if(A===RegExp)return d(m,v,x);if(A===Map)return s(m,v,x);if(A===Set)return h(m,v,x);const w=cie.call(m);if(w===Qre)return r(m,v,x);if(w===iie)return d(m,v,x);if(w===tie)return s(m,v,x);if(w===aie)return h(m,v,x);if(w===rie)return typeof m.then!="function"&&typeof v.then!="function"&&c(m,v,x);if(w===lie)return p(m,v,x);if(w===eie)return i(m,v,x);if(w===Xre)return c(m,v,x);if(oie[w])return f(m,v,x);if(w===Kre)return n(m,v,x);if(w===Zre)return t(m,v,x);if(w===Jre||w===nie||w===sie)return u(m,v,x);if(y){let S=y[w];if(!S){const E=Pre(m);E&&(S=y[E])}if(S)return S(m,v,x)}return!1}}function die({circular:n,createCustomConfig:e,strict:t}){let r={areArrayBuffersEqual:Lre,areArraysEqual:t?ld:Ure,areDataViewsEqual:Bre,areDatesEqual:$re,areErrorsEqual:zre,areFunctionsEqual:qre,areMapsEqual:t?Y1(Pk,ld):Pk,areNumbersEqual:Wre,areObjectsEqual:t?ld:Hre,arePrimitiveWrappersEqual:Vre,areRegExpsEqual:Gre,areSetsEqual:t?Y1(Ik,ld):Ik,areTypedArraysEqual:t?Y1(Zm,ld):Zm,areUrlsEqual:Yre,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),n){const i=Xf(r.areArraysEqual),a=Xf(r.areMapsEqual),s=Xf(r.areObjectsEqual),o=Xf(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:o})}return r}function hie(n){return function(e,t,r,i,a,s,o){return n(e,t,o)}}function fie({circular:n,comparator:e,createState:t,equals:r,strict:i}){if(t)return function(o,c){const{cache:u=n?new WeakMap:void 0,meta:d}=t();return e(o,c,{cache:u,equals:r,meta:d,strict:i})};if(n)return function(o,c){return e(o,c,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const a={cache:void 0,equals:r,meta:void 0,strict:i};return function(o,c){return e(o,c,a)}}const zF=yo();yo({strict:!0});yo({circular:!0});yo({circular:!0,strict:!0});yo({createInternalComparator:()=>Pl});yo({strict:!0,createInternalComparator:()=>Pl});yo({circular:!0,createInternalComparator:()=>Pl});yo({circular:!0,createInternalComparator:()=>Pl,strict:!0});function yo(n={}){const{circular:e=!1,createInternalComparator:t,createState:r,strict:i=!1}=n,a=die(n),s=uie(a),o=t?t(s):hie(s);return fie({circular:e,comparator:s,createState:r,equals:o,strict:i})}function pie(n){typeof requestAnimationFrame<"u"&&requestAnimationFrame(n)}function Rk(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,r=function i(a){t<0&&(t=a),a-t>e?(n(a),t=-1):pie(i)};requestAnimationFrame(r)}function nS(n){"@babel/helpers - typeof";return nS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nS(n)}function mie(n){return xie(n)||vie(n)||yie(n)||gie()}function gie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yie(n,e){if(n){if(typeof n=="string")return Mk(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Mk(n,e)}}function Mk(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function vie(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function xie(n){if(Array.isArray(n))return n}function bie(){var n={},e=function(){return null},t=!1,r=function i(a){if(!t){if(Array.isArray(a)){if(!a.length)return;var s=a,o=mie(s),c=o[0],u=o.slice(1);if(typeof c=="number"){Rk(i.bind(null,u),c);return}i(c),Rk(i.bind(null,u));return}nS(a)==="object"&&(n=a,e(n)),typeof a=="function"&&a()}};return{stop:function(){t=!0},start:function(a){t=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Oh(n){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(n)}function Fk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Lk(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fk(Object(t),!0).forEach(function(r){qF(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Fk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qF(n,e,t){return e=wie(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wie(n){var e=Aie(n,"string");return Oh(e)==="symbol"?e:String(e)}function Aie(n,e){if(Oh(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Oh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Sie=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},Eie=function(e){return e},_ie=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},Wd=function(e,t){return Object.keys(t).reduce(function(r,i){return Lk(Lk({},r),{},qF({},i,e(i,t[i])))},{})},Uk=function(e,t,r){return e.map(function(i){return"".concat(_ie(i)," ").concat(t,"ms ").concat(r)}).join(",")};function Die(n,e){return Cie(n)||Tie(n,e)||WF(n,e)||jie()}function jie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tie(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(c=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Cie(n){if(Array.isArray(n))return n}function Nie(n){return Pie(n)||Oie(n)||WF(n)||kie()}function kie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WF(n,e){if(n){if(typeof n=="string")return rS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rS(n,e)}}function Oie(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Pie(n){if(Array.isArray(n))return rS(n)}function rS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Qm=1e-4,HF=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},VF=function(e,t){return e.map(function(r,i){return r*Math.pow(t,i)}).reduce(function(r,i){return r+i})},Bk=function(e,t){return function(r){var i=HF(e,t);return VF(i,r)}},Iie=function(e,t){return function(r){var i=HF(e,t),a=[].concat(Nie(i.map(function(s,o){return s*o}).slice(1)),[0]);return VF(a,r)}},$k=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],s=t[2],o=t[3];if(t.length===1)switch(t[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var c=t[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),d=Die(u,4);i=d[0],a=d[1],s=d[2],o=d[3]}}}var h=Bk(i,s),f=Bk(a,o),p=Iie(i,s),y=function(v){return v>1?1:v<0?0:v},g=function(v){for(var x=v>1?1:v,b=x,A=0;A<8;++A){var w=h(b)-x,S=p(b);if(Math.abs(w-x)<Qm||S<Qm)return f(b);b=y(b-w/S)}return f(b)};return g.isStepper=!1,g},Rie=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,r=t===void 0?100:t,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,c=function(d,h,f){var p=-(d-h)*r,y=f*a,g=f+(p-y)*o/1e3,m=f*o/1e3+d;return Math.abs(m-h)<Qm&&Math.abs(g)<Qm?[h,0]:[m,g]};return c.isStepper=!0,c.dt=o,c},Mie=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return $k(i);case"spring":return Rie();default:if(i.split("(")[0]==="cubic-bezier")return $k(i)}return typeof i=="function"?i:null};function Ph(n){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(n)}function zk(n){return Uie(n)||Lie(n)||GF(n)||Fie()}function Fie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lie(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Uie(n){if(Array.isArray(n))return aS(n)}function qk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function dr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qk(Object(t),!0).forEach(function(r){iS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iS(n,e,t){return e=Bie(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bie(n){var e=$ie(n,"string");return Ph(e)==="symbol"?e:String(e)}function $ie(n,e){if(Ph(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ph(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zie(n,e){return Hie(n)||Wie(n,e)||GF(n,e)||qie()}function qie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GF(n,e){if(n){if(typeof n=="string")return aS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return aS(n,e)}}function aS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Wie(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(c=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Hie(n){if(Array.isArray(n))return n}var eg=function(e,t,r){return e+(t-e)*r},sS=function(e){var t=e.from,r=e.to;return t!==r},Vie=function n(e,t,r){var i=Wd(function(a,s){if(sS(s)){var o=e(s.from,s.to,s.velocity),c=zie(o,2),u=c[0],d=c[1];return dr(dr({},s),{},{from:u,velocity:d})}return s},t);return r<1?Wd(function(a,s){return sS(s)?dr(dr({},s),{},{velocity:eg(s.velocity,i[a].velocity,r),from:eg(s.from,i[a].from,r)}):s},t):n(e,i,r-1)};const Gie=(function(n,e,t,r,i){var a=Sie(n,e),s=a.reduce(function(m,v){return dr(dr({},m),{},iS({},v,[n[v],e[v]]))},{}),o=a.reduce(function(m,v){return dr(dr({},m),{},iS({},v,{from:n[v],velocity:0,to:e[v]}))},{}),c=-1,u,d,h=function(){return null},f=function(){return Wd(function(v,x){return x.from},o)},p=function(){return!Object.values(o).filter(sS).length},y=function(v){u||(u=v);var x=v-u,b=x/t.dt;o=Vie(t,o,b),i(dr(dr(dr({},n),e),f())),u=v,p()||(c=requestAnimationFrame(h))},g=function(v){d||(d=v);var x=(v-d)/r,b=Wd(function(w,S){return eg.apply(void 0,zk(S).concat([t(x)]))},s);if(i(dr(dr(dr({},n),e),b)),x<1)c=requestAnimationFrame(h);else{var A=Wd(function(w,S){return eg.apply(void 0,zk(S).concat([t(1)]))},s);i(dr(dr(dr({},n),e),A))}};return h=t.isStepper?y:g,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}});function Zc(n){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zc(n)}var Yie=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Kie(n,e){if(n==null)return{};var t=Xie(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Xie(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function K1(n){return eae(n)||Qie(n)||Zie(n)||Jie()}function Jie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zie(n,e){if(n){if(typeof n=="string")return oS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oS(n,e)}}function Qie(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function eae(n){if(Array.isArray(n))return oS(n)}function oS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Wk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Zi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wk(Object(t),!0).forEach(function(r){Pd(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Pd(n,e,t){return e=YF(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tae(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function nae(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,YF(r.key),r)}}function rae(n,e,t){return e&&nae(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function YF(n){var e=iae(n,"string");return Zc(e)==="symbol"?e:String(e)}function iae(n,e){if(Zc(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Zc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function aae(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&lS(n,e)}function lS(n,e){return lS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lS(n,e)}function sae(n){var e=oae();return function(){var r=tg(n),i;if(e){var a=tg(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return cS(this,i)}}function cS(n,e){if(e&&(Zc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uS(n)}function uS(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function oae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tg(n){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tg(n)}var La=(function(n){aae(t,n);var e=sae(t);function t(r,i){var a;tae(this,t),a=e.call(this,r,i);var s=a.props,o=s.isActive,c=s.attributeName,u=s.from,d=s.to,h=s.steps,f=s.children,p=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(uS(a)),a.changeStyle=a.changeStyle.bind(uS(a)),!o||p<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:d}),cS(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof f=="function")return a.state={style:u},cS(a);a.state={style:c?Pd({},c,u):u}}else a.state={style:{}};return a}return rae(t,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,h=a.from,f=this.state.style;if(o){if(!s){var p={style:c?Pd({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(p);return}if(!(zF(i.to,d)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=y||u?h:i.to;if(this.state&&f){var m={style:c?Pd({},c,g):g};(c&&f[c]!==g||!c&&f!==g)&&this.setState(m)}this.runAnimation(Zi(Zi({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,c=i.duration,u=i.easing,d=i.begin,h=i.onAnimationEnd,f=i.onAnimationStart,p=Gie(s,o,Mie(u),c,this.changeStyle),y=function(){a.stopJSAnimation=p()};this.manager.start([f,d,y,c,h])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,c=i.onAnimationStart,u=s[0],d=u.style,h=u.duration,f=h===void 0?0:h,p=function(g,m,v){if(v===0)return g;var x=m.duration,b=m.easing,A=b===void 0?"ease":b,w=m.style,S=m.properties,E=m.onAnimationEnd,_=v>0?s[v-1]:m,D=S||Object.keys(w);if(typeof A=="function"||A==="spring")return[].concat(K1(g),[a.runJSAnimation.bind(a,{from:_.style,to:w,duration:x,easing:A}),x]);var C=Uk(D,x,A),k=Zi(Zi(Zi({},_.style),w),{},{transition:C});return[].concat(K1(g),[k,x,E]).filter(Eie)};return this.manager.start([c].concat(K1(s.reduce(p,[d,Math.max(f,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=bie());var a=i.begin,s=i.duration,o=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,h=i.onAnimationEnd,f=i.steps,p=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var g=o?Pd({},o,c):c,m=Uk(Object.keys(g),s,u);y.start([d,a,Zi(Zi({},g),{},{transition:m}),s,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=Kie(i,Yie),u=M.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!o||u===0||s<=0)return a;var h=function(p){var y=p.props,g=y.style,m=g===void 0?{}:g,v=y.className,x=M.cloneElement(p,Zi(Zi({},c),{},{style:Zi(Zi({},m),d),className:v}));return x};return u===1?h(M.Children.only(a)):fe.createElement("div",null,M.Children.map(a,function(f){return h(f)}))}}]),t})(M.PureComponent);La.displayName="Animate";La.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};La.propTypes={from:zt.oneOfType([zt.object,zt.string]),to:zt.oneOfType([zt.object,zt.string]),attributeName:zt.string,duration:zt.number,begin:zt.number,easing:zt.oneOfType([zt.string,zt.func]),steps:zt.arrayOf(zt.shape({duration:zt.number.isRequired,style:zt.object.isRequired,easing:zt.oneOfType([zt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),zt.func]),properties:zt.arrayOf("string"),onAnimationEnd:zt.func})),children:zt.oneOfType([zt.node,zt.func]),isActive:zt.bool,canBegin:zt.bool,onAnimationEnd:zt.func,shouldReAnimate:zt.bool,onAnimationStart:zt.func,onAnimationReStart:zt.func};function Ih(n){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(n)}function ng(){return ng=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ng.apply(this,arguments)}function lae(n,e){return hae(n)||dae(n,e)||uae(n,e)||cae()}function cae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uae(n,e){if(n){if(typeof n=="string")return Hk(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Hk(n,e)}}function Hk(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function dae(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(c=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function hae(n){if(Array.isArray(n))return n}function Vk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Gk(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vk(Object(t),!0).forEach(function(r){fae(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fae(n,e,t){return e=pae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pae(n){var e=mae(n,"string");return Ih(e)=="symbol"?e:e+""}function mae(n,e){if(Ih(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Yk=function(e,t,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,p=4;f<p;f++)h[f]=a[f]>s?s:a[f];d="M".concat(e,",").concat(t+o*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(t)),d+="L ".concat(e+r-c*h[1],",").concat(t),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(t+o*h[1])),d+="L ".concat(e+r,",").concat(t+i-o*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-c*h[2],",").concat(t+i)),d+="L ".concat(e+c*h[3],",").concat(t+i),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(t+i-o*h[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var y=Math.min(s,a);d="M ".concat(e,",").concat(t+o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+c*y,",").concat(t,`
            L `).concat(e+r-c*y,",").concat(t,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r,",").concat(t+o*y,`
            L `).concat(e+r,",").concat(t+i-o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r-c*y,",").concat(t+i,`
            L `).concat(e+c*y,",").concat(t+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e,",").concat(t+i-o*y," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},gae=function(e,t){if(!e||!t)return!1;var r=e.x,i=e.y,a=t.x,s=t.y,o=t.width,c=t.height;if(Math.abs(o)>0&&Math.abs(c)>0){var u=Math.min(a,a+o),d=Math.max(a,a+o),h=Math.min(s,s+c),f=Math.max(s,s+c);return r>=u&&r<=d&&i>=h&&i<=f}return!1},yae={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},F_=function(e){var t=Gk(Gk({},yae),e),r=M.useRef(),i=M.useState(-1),a=lae(i,2),s=a[0],o=a[1];M.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&o(A)}catch{}},[]);var c=t.x,u=t.y,d=t.width,h=t.height,f=t.radius,p=t.className,y=t.animationEasing,g=t.animationDuration,m=t.animationBegin,v=t.isAnimationActive,x=t.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var b=wt("recharts-rectangle",p);return x?fe.createElement(La,{canBegin:s>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:g,animationEasing:y,isActive:x},function(A){var w=A.width,S=A.height,E=A.x,_=A.y;return fe.createElement(La,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:g,isActive:v,easing:y},fe.createElement("path",ng({},lt(t,!0),{className:b,d:Yk(E,_,w,S,f),ref:r})))}):fe.createElement("path",ng({},lt(t,!0),{className:b,d:Yk(c,u,d,h,f)}))},vae=["points","className","baseLinePoints","connectNulls"];function dc(){return dc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dc.apply(this,arguments)}function xae(n,e){if(n==null)return{};var t=bae(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function bae(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Kk(n){return Eae(n)||Sae(n)||Aae(n)||wae()}function wae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aae(n,e){if(n){if(typeof n=="string")return dS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return dS(n,e)}}function Sae(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Eae(n){if(Array.isArray(n))return dS(n)}function dS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Xk=function(e){return e&&e.x===+e.x&&e.y===+e.y},_ae=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[[]];return e.forEach(function(r){Xk(r)?t[t.length-1].push(r):t[t.length-1].length>0&&t.push([])}),Xk(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t},Hd=function(e,t){var r=_ae(e);t&&(r=[r.reduce(function(a,s){return[].concat(Kk(a),Kk(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,o,c){return"".concat(s).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},Dae=function(e,t,r){var i=Hd(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Hd(t.reverse(),r).slice(1))},jae=function(e){var t=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,s=xae(e,vae);if(!t||!t.length)return null;var o=wt("recharts-polygon",r);if(i&&i.length){var c=s.stroke&&s.stroke!=="none",u=Dae(t,i,a);return fe.createElement("g",{className:o},fe.createElement("path",dc({},lt(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?fe.createElement("path",dc({},lt(s,!0),{fill:"none",d:Hd(t,a)})):null,c?fe.createElement("path",dc({},lt(s,!0),{fill:"none",d:Hd(i,a)})):null)}var d=Hd(t,a);return fe.createElement("path",dc({},lt(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:o,d}))};function hS(){return hS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hS.apply(this,arguments)}var Zy=function(e){var t=e.cx,r=e.cy,i=e.r,a=e.className,s=wt("recharts-dot",a);return t===+t&&r===+r&&i===+i?M.createElement("circle",hS({},lt(e,!1),_m(e),{className:s,cx:t,cy:r,r:i})):null};function Rh(n){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(n)}var Tae=["x","y","top","left","width","height","className"];function fS(){return fS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fS.apply(this,arguments)}function Jk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Cae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Jk(Object(t),!0).forEach(function(r){Nae(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Jk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Nae(n,e,t){return e=kae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kae(n){var e=Oae(n,"string");return Rh(e)=="symbol"?e:e+""}function Oae(n,e){if(Rh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Pae(n,e){if(n==null)return{};var t=Iae(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Iae(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var Rae=function(e,t,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(t,"h").concat(r)},Mae=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,c=e.left,u=c===void 0?0:c,d=e.width,h=d===void 0?0:d,f=e.height,p=f===void 0?0:f,y=e.className,g=Pae(e,Tae),m=Cae({x:r,y:a,top:o,left:u,width:h,height:p},g);return!Fe(r)||!Fe(a)||!Fe(h)||!Fe(p)||!Fe(o)||!Fe(u)?null:fe.createElement("path",fS({},lt(m,!0),{className:wt("recharts-cross",y),d:Rae(r,a,h,p,o,u)}))},X1,Zk;function Fae(){if(Zk)return X1;Zk=1;var n=Gy(),e=oF(),t=Ha();function r(i,a){return i&&i.length?n(i,t(a,2),e):void 0}return X1=r,X1}var Lae=Fae();const Uae=It(Lae);var J1,Qk;function Bae(){if(Qk)return J1;Qk=1;var n=Gy(),e=Ha(),t=lF();function r(i,a){return i&&i.length?n(i,e(a,2),t):void 0}return J1=r,J1}var $ae=Bae();const zae=It($ae);var qae=["cx","cy","angle","ticks","axisLine"],Wae=["ticks","tick","angle","tickFormatter","stroke"];function Qc(n){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(n)}function Vd(){return Vd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vd.apply(this,arguments)}function e6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ko(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?e6(Object(t),!0).forEach(function(r){Qy(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):e6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function t6(n,e){if(n==null)return{};var t=Hae(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Hae(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Vae(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function n6(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,XF(r.key),r)}}function Gae(n,e,t){return e&&n6(n.prototype,e),t&&n6(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Yae(n,e,t){return e=rg(e),Kae(n,KF()?Reflect.construct(e,t||[],rg(n).constructor):e.apply(n,t))}function Kae(n,e){if(e&&(Qc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xae(n)}function Xae(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function KF(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KF=function(){return!!n})()}function rg(n){return rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rg(n)}function Jae(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&pS(n,e)}function pS(n,e){return pS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pS(n,e)}function Qy(n,e,t){return e=XF(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XF(n){var e=Zae(n,"string");return Qc(e)=="symbol"?e:e+""}function Zae(n,e){if(Qc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Qc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var e0=(function(n){function e(){return Vae(this,e),Yae(this,e,arguments)}return Jae(e,n),Gae(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,o=a.cx,c=a.cy;return an(o,c,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,c=Uae(o,function(d){return d.coordinate||0}),u=zae(o,function(d){return d.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,c=r.axisLine,u=t6(r,qae),d=o.reduce(function(y,g){return[Math.min(y[0],g.coordinate),Math.max(y[1],g.coordinate)]},[1/0,-1/0]),h=an(i,a,d[0],s),f=an(i,a,d[1],s),p=ko(ko(ko({},lt(u,!1)),{},{fill:"none"},lt(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return fe.createElement("line",Vd({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,c=i.tickFormatter,u=i.stroke,d=t6(i,Wae),h=this.getTickTextAnchor(),f=lt(d,!1),p=lt(s,!1),y=a.map(function(g,m){var v=r.getTickValueCoord(g),x=ko(ko(ko(ko({textAnchor:h,transform:"rotate(".concat(90-o,", ").concat(v.x,", ").concat(v.y,")")},f),{},{stroke:"none",fill:u},p),{},{index:m},v),{},{payload:g});return fe.createElement(Ot,Vd({className:wt("recharts-polar-radius-axis-tick",FF(s)),key:"tick-".concat(g.coordinate)},pl(r.props,g,m)),e.renderTickItem(s,x,c?c(g.value,m):g.value))});return fe.createElement(Ot,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:fe.createElement(Ot,{className:wt("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),rr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return fe.isValidElement(r)?s=fe.cloneElement(r,i):ft(r)?s=r(i):s=fe.createElement(ml,Vd({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])})(M.PureComponent);Qy(e0,"displayName","PolarRadiusAxis");Qy(e0,"axisType","radiusAxis");Qy(e0,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function eu(n){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eu(n)}function $o(){return $o=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$o.apply(this,arguments)}function r6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Oo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?r6(Object(t),!0).forEach(function(r){t0(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Qae(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function i6(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,ZF(r.key),r)}}function ese(n,e,t){return e&&i6(n.prototype,e),t&&i6(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function tse(n,e,t){return e=ig(e),nse(n,JF()?Reflect.construct(e,t||[],ig(n).constructor):e.apply(n,t))}function nse(n,e){if(e&&(eu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rse(n)}function rse(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function JF(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JF=function(){return!!n})()}function ig(n){return ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ig(n)}function ise(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&mS(n,e)}function mS(n,e){return mS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mS(n,e)}function t0(n,e,t){return e=ZF(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZF(n){var e=ase(n,"string");return eu(e)=="symbol"?e:e+""}function ase(n,e){if(eu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(eu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var sse=Math.PI/180,a6=1e-5,n0=(function(n){function e(){return Qae(this,e),tse(this,e,arguments)}return ise(e,n),ese(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,o=i.radius,c=i.orientation,u=i.tickSize,d=u||8,h=an(a,s,o,r.coordinate),f=an(a,s,o+(c==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*sse),s;return a>a6?s=i==="outer"?"start":"end":a<-a6?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,o=r.axisLine,c=r.axisLineType,u=Oo(Oo({},lt(this.props,!1)),{},{fill:"none"},lt(o,!1));if(c==="circle")return fe.createElement(Zy,$o({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var d=this.props.ticks,h=d.map(function(f){return an(i,a,s,f.coordinate)});return fe.createElement(jae,$o({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,c=i.tickFormatter,u=i.stroke,d=lt(this.props,!1),h=lt(s,!1),f=Oo(Oo({},d),{},{fill:"none"},lt(o,!1)),p=a.map(function(y,g){var m=r.getTickLineCoord(y),v=r.getTickTextAnchor(y),x=Oo(Oo(Oo({textAnchor:v},d),{},{stroke:"none",fill:u},h),{},{index:g,payload:y,x:m.x2,y:m.y2});return fe.createElement(Ot,$o({className:wt("recharts-polar-angle-axis-tick",FF(s)),key:"tick-".concat(y.coordinate)},pl(r.props,y,g)),o&&fe.createElement("line",$o({className:"recharts-polar-angle-axis-tick-line"},f,m)),s&&e.renderTickItem(s,x,c?c(y.value,g):y.value))});return fe.createElement(Ot,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:fe.createElement(Ot,{className:wt("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return fe.isValidElement(r)?s=fe.cloneElement(r,i):ft(r)?s=r(i):s=fe.createElement(ml,$o({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])})(M.PureComponent);t0(n0,"displayName","PolarAngleAxis");t0(n0,"axisType","angleAxis");t0(n0,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Z1,s6;function ose(){if(s6)return Z1;s6=1;var n=sM(),e=n(Object.getPrototypeOf,Object);return Z1=e,Z1}var Q1,o6;function lse(){if(o6)return Q1;o6=1;var n=Ds(),e=ose(),t=js(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,c=s.call(Object);function u(d){if(!t(d)||n(d)!=r)return!1;var h=e(d);if(h===null)return!0;var f=o.call(h,"constructor")&&h.constructor;return typeof f=="function"&&f instanceof f&&s.call(f)==c}return Q1=u,Q1}var cse=lse();const use=It(cse);var e2,l6;function dse(){if(l6)return e2;l6=1;var n=Ds(),e=js(),t="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&n(i)==t}return e2=r,e2}var hse=dse();const fse=It(hse);function Mh(n){"@babel/helpers - typeof";return Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mh(n)}function ag(){return ag=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ag.apply(this,arguments)}function pse(n,e){return vse(n)||yse(n,e)||gse(n,e)||mse()}function mse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gse(n,e){if(n){if(typeof n=="string")return c6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c6(n,e)}}function c6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function yse(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(c=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function vse(n){if(Array.isArray(n))return n}function u6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function d6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?u6(Object(t),!0).forEach(function(r){xse(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):u6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function xse(n,e,t){return e=bse(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bse(n){var e=wse(n,"string");return Mh(e)=="symbol"?e:e+""}function wse(n,e){if(Mh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Mh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var h6=function(e,t,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-s/2,",").concat(t+a),o+="L ".concat(e+r-s/2-i,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},Ase={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Sse=function(e){var t=d6(d6({},Ase),e),r=M.useRef(),i=M.useState(-1),a=pse(i,2),s=a[0],o=a[1];M.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&o(b)}catch{}},[]);var c=t.x,u=t.y,d=t.upperWidth,h=t.lowerWidth,f=t.height,p=t.className,y=t.animationEasing,g=t.animationDuration,m=t.animationBegin,v=t.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var x=wt("recharts-trapezoid",p);return v?fe.createElement(La,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:c,y:u},duration:g,animationEasing:y,isActive:v},function(b){var A=b.upperWidth,w=b.lowerWidth,S=b.height,E=b.x,_=b.y;return fe.createElement(La,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:g,easing:y},fe.createElement("path",ag({},lt(t,!0),{className:x,d:h6(E,_,A,w,S),ref:r})))}):fe.createElement("g",null,fe.createElement("path",ag({},lt(t,!0),{className:x,d:h6(c,u,d,h,f)})))},Ese=["option","shapeType","propTransformer","activeClassName","isActive"];function Fh(n){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(n)}function _se(n,e){if(n==null)return{};var t=Dse(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Dse(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function f6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function sg(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?f6(Object(t),!0).forEach(function(r){jse(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):f6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function jse(n,e,t){return e=Tse(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Tse(n){var e=Cse(n,"string");return Fh(e)=="symbol"?e:e+""}function Cse(n,e){if(Fh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Nse(n,e){return sg(sg({},e),n)}function kse(n,e){return n==="symbols"}function p6(n){var e=n.shapeType,t=n.elementProps;switch(e){case"rectangle":return fe.createElement(F_,t);case"trapezoid":return fe.createElement(Sse,t);case"sector":return fe.createElement(BF,t);case"symbols":if(kse(e))return fe.createElement(n_,t);break;default:return null}}function Ose(n){return M.isValidElement(n)?n.props:n}function QF(n){var e=n.option,t=n.shapeType,r=n.propTransformer,i=r===void 0?Nse:r,a=n.activeClassName,s=a===void 0?"recharts-active-shape":a,o=n.isActive,c=_se(n,Ese),u;if(M.isValidElement(e))u=M.cloneElement(e,sg(sg({},c),Ose(e)));else if(ft(e))u=e(c);else if(use(e)&&!fse(e)){var d=i(e,c);u=fe.createElement(p6,{shapeType:t,elementProps:d})}else{var h=c;u=fe.createElement(p6,{shapeType:t,elementProps:h})}return o?fe.createElement(Ot,{className:s},u):u}function r0(n,e){return e!=null&&"trapezoids"in n.props}function i0(n,e){return e!=null&&"sectors"in n.props}function Lh(n,e){return e!=null&&"points"in n.props}function Pse(n,e){var t,r,i=n.x===(e==null||(t=e.labelViewBox)===null||t===void 0?void 0:t.x)||n.x===e.x,a=n.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||n.y===e.y;return i&&a}function Ise(n,e){var t=n.endAngle===e.endAngle,r=n.startAngle===e.startAngle;return t&&r}function Rse(n,e){var t=n.x===e.x,r=n.y===e.y,i=n.z===e.z;return t&&r&&i}function Mse(n,e){var t;return r0(n,e)?t=Pse:i0(n,e)?t=Ise:Lh(n,e)&&(t=Rse),t}function Fse(n,e){var t;return r0(n,e)?t="trapezoids":i0(n,e)?t="sectors":Lh(n,e)&&(t="points"),t}function Lse(n,e){if(r0(n,e)){var t;return(t=e.tooltipPayload)===null||t===void 0||(t=t[0])===null||t===void 0||(t=t.payload)===null||t===void 0?void 0:t.payload}if(i0(n,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Lh(n,e)?e.payload:{}}function Use(n){var e=n.activeTooltipItem,t=n.graphicalItem,r=n.itemData,i=Fse(t,e),a=Lse(t,e),s=r.filter(function(c,u){var d=Xc(a,c),h=t.props[i].filter(function(y){var g=Mse(t,e);return g(y,e)}),f=t.props[i].indexOf(h[h.length-1]),p=u===f;return d&&p}),o=r.indexOf(s[s.length-1]);return o}var Up;function tu(n){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tu(n)}function hc(){return hc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hc.apply(this,arguments)}function m6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function nn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?m6(Object(t),!0).forEach(function(r){Mi(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Bse(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function g6(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,t9(r.key),r)}}function $se(n,e,t){return e&&g6(n.prototype,e),t&&g6(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function zse(n,e,t){return e=og(e),qse(n,e9()?Reflect.construct(e,t||[],og(n).constructor):e.apply(n,t))}function qse(n,e){if(e&&(tu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wse(n)}function Wse(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function e9(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e9=function(){return!!n})()}function og(n){return og=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},og(n)}function Hse(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&gS(n,e)}function gS(n,e){return gS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gS(n,e)}function Mi(n,e,t){return e=t9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function t9(n){var e=Vse(n,"string");return tu(e)=="symbol"?e:e+""}function Vse(n,e){if(tu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(tu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Ua=(function(n){function e(t){var r;return Bse(this,e),r=zse(this,e,[t]),Mi(r,"pieRef",null),Mi(r,"sectorRefs",[]),Mi(r,"id",Nu("recharts-pie-")),Mi(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),ft(i)&&i()}),Mi(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),ft(i)&&i()}),r.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},r}return Hse(e,n),$se(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,c=a.dataKey,u=a.valueKey,d=lt(this.props,!1),h=lt(s,!1),f=lt(o,!1),p=s&&s.offsetRadius||20,y=r.map(function(g,m){var v=(g.startAngle+g.endAngle)/2,x=an(g.cx,g.cy,g.outerRadius+p,v),b=nn(nn(nn(nn({},d),g),{},{stroke:"none"},h),{},{index:m,textAnchor:e.getTextAnchor(x.x,g.cx)},x),A=nn(nn(nn(nn({},d),g),{},{fill:"none",stroke:g.fill},f),{},{index:m,points:[an(g.cx,g.cy,g.outerRadius,v),x]}),w=c;return xt(c)&&xt(u)?w="value":xt(c)&&(w=u),fe.createElement(Ot,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(m)},o&&e.renderLabelLineItem(o,A,"line"),e.renderLabelItem(s,b,Hn(g,w)))});return fe.createElement(Ot,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,c=a.inactiveShape;return r.map(function(u,d){if(u?.startAngle===0&&u?.endAngle===0&&r.length!==1)return null;var h=i.isActiveIndex(d),f=c&&i.hasActiveIndex()?c:null,p=h?s:f,y=nn(nn({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return fe.createElement(Ot,hc({ref:function(m){m&&!i.sectorRefs.includes(m)&&i.sectorRefs.push(m)},tabIndex:-1,className:"recharts-pie-sector"},pl(i.props,u,d),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(d)}),fe.createElement(QF,hc({option:p,isActive:h,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,h=this.state,f=h.prevSectors,p=h.prevIsAnimationActive;return fe.createElement(La,{begin:o,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var g=y.t,m=[],v=a&&a[0],x=v.startAngle;return a.forEach(function(b,A){var w=f&&f[A],S=A>0?xi(b,"paddingAngle",0):0;if(w){var E=Yr(w.endAngle-w.startAngle,b.endAngle-b.startAngle),_=nn(nn({},b),{},{startAngle:x+S,endAngle:x+E(g)+S});m.push(_),x=_.endAngle}else{var D=b.endAngle,C=b.startAngle,k=Yr(0,D-C),T=k(g),N=nn(nn({},b),{},{startAngle:x+S,endAngle:x+T+S});m.push(N),x=N.endAngle}}),fe.createElement(Ot,null,r.renderSectorsStatically(m))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!Xc(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,c=i.label,u=i.cx,d=i.cy,h=i.innerRadius,f=i.outerRadius,p=i.isAnimationActive,y=this.state.isAnimationFinished;if(a||!s||!s.length||!Fe(u)||!Fe(d)||!Fe(h)||!Fe(f))return null;var g=wt("recharts-pie",o);return fe.createElement(Ot,{tabIndex:this.props.rootTabIndex,className:g,ref:function(v){r.pieRef=v}},this.renderSectors(),c&&this.renderLabels(s),rr.renderCallByParent(this.props,null,!1),(!p||y)&&fs.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(fe.isValidElement(r))return fe.cloneElement(r,i);if(ft(r))return r(i);var s=wt("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return fe.createElement(Sc,hc({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(fe.isValidElement(r))return fe.cloneElement(r,i);var s=a;if(ft(r)&&(s=r(i),fe.isValidElement(s)))return s;var o=wt("recharts-pie-label-text",typeof r!="boolean"&&!ft(r)?r.className:"");return fe.createElement(ml,hc({},i,{alignmentBaseline:"middle",className:o}),s)}}])})(M.PureComponent);Up=Ua;Mi(Ua,"displayName","Pie");Mi(Ua,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Nl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Mi(Ua,"parseDeltaAngle",function(n,e){var t=Fr(e-n),r=Math.min(Math.abs(e-n),360);return t*r});Mi(Ua,"getRealPieData",function(n){var e=n.data,t=n.children,r=lt(n,!1),i=zi(t,ph);return e&&e.length?e.map(function(a,s){return nn(nn(nn({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return nn(nn({},r),a.props)}):[]});Mi(Ua,"parseCoordinateOfPie",function(n,e){var t=e.top,r=e.left,i=e.width,a=e.height,s=MF(i,a),o=r+Lr(n.cx,i,i/2),c=t+Lr(n.cy,a,a/2),u=Lr(n.innerRadius,s,0),d=Lr(n.outerRadius,s,s*.8),h=n.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});Mi(Ua,"getComposedData",function(n){var e=n.item,t=n.offset,r=e.type.defaultProps!==void 0?nn(nn({},e.type.defaultProps),e.props):e.props,i=Up.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,o=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,f=r.tooltipType,p=Math.abs(r.minAngle),y=Up.parseCoordinateOfPie(r,t),g=Up.parseDeltaAngle(s,o),m=Math.abs(g),v=u;xt(u)&&xt(h)?(ca(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):xt(u)&&(ca(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=h);var x=i.filter(function(_){return Hn(_,v,0)!==0}).length,b=(m>=360?x:x-1)*c,A=m-x*p-b,w=i.reduce(function(_,D){var C=Hn(D,v,0);return _+(Fe(C)?C:0)},0),S;if(w>0){var E;S=i.map(function(_,D){var C=Hn(_,v,0),k=Hn(_,d,D),T=(Fe(C)?C:0)/w,N;D?N=E.endAngle+Fr(g)*c*(C!==0?1:0):N=s;var j=N+Fr(g)*((C!==0?p:0)+T*A),R=(N+j)/2,P=(y.innerRadius+y.outerRadius)/2,F=[{name:k,value:C,payload:_,dataKey:v,type:f}],q=an(y.cx,y.cy,P,R);return E=nn(nn(nn({percent:T,cornerRadius:a,name:k,tooltipPayload:F,midAngle:R,middleRadius:P,tooltipPosition:q},_),y),{},{value:Hn(_,v),startAngle:N,endAngle:j,payload:_,paddingAngle:Fr(g)*c}),E})}return nn(nn({},y),{},{sectors:S,data:i})});var t2,y6;function Gse(){if(y6)return t2;y6=1;var n=Math.ceil,e=Math.max;function t(r,i,a,s){for(var o=-1,c=e(n((i-r)/(a||1)),0),u=Array(c);c--;)u[s?c:++o]=r,r+=a;return u}return t2=t,t2}var n2,v6;function n9(){if(v6)return n2;v6=1;var n=AM(),e=1/0,t=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=n(i),i===e||i===-e){var a=i<0?-1:1;return a*t}return i===i?i:0}return n2=r,n2}var r2,x6;function Yse(){if(x6)return r2;x6=1;var n=Gse(),e=By(),t=n9();function r(i){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=t(a),s===void 0?(s=a,a=0):s=t(s),o=o===void 0?a<s?1:-1:t(o),n(a,s,o,i)}}return r2=r,r2}var i2,b6;function Kse(){if(b6)return i2;b6=1;var n=Yse(),e=n();return i2=e,i2}var Xse=Kse();const lg=It(Xse);function Uh(n){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(n)}function w6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function A6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w6(Object(t),!0).forEach(function(r){r9(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function r9(n,e,t){return e=Jse(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jse(n){var e=Zse(n,"string");return Uh(e)=="symbol"?e:e+""}function Zse(n,e){if(Uh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Qse=["Webkit","Moz","O","ms"],eoe=function(e,t){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=Qse.reduce(function(a,s){return A6(A6({},a),{},r9({},s+r,t))},{});return i[e]=t,i};function nu(n){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nu(n)}function cg(){return cg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cg.apply(this,arguments)}function S6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function a2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?S6(Object(t),!0).forEach(function(r){li(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):S6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function toe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function E6(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,a9(r.key),r)}}function noe(n,e,t){return e&&E6(n.prototype,e),t&&E6(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function roe(n,e,t){return e=ug(e),ioe(n,i9()?Reflect.construct(e,t||[],ug(n).constructor):e.apply(n,t))}function ioe(n,e){if(e&&(nu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aoe(n)}function aoe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function i9(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i9=function(){return!!n})()}function ug(n){return ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ug(n)}function soe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&yS(n,e)}function yS(n,e){return yS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yS(n,e)}function li(n,e,t){return e=a9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a9(n){var e=ooe(n,"string");return nu(e)=="symbol"?e:e+""}function ooe(n,e){if(nu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(nu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var loe=function(e){var t=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!t||!t.length)return{};var c=t.length,u=zd().domain(lg(0,c)).range([a,a+s-o]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},_6=function(e){return e.changedTouches&&!!e.changedTouches.length},ru=(function(n){function e(t){var r;return toe(this,e),r=roe(this,e,[t]),li(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),li(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),li(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s?.({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),li(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),li(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),li(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),li(r,"handleSlideDragStart",function(i){var a=_6(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return soe(e,n),noe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,c=o.gap,u=o.data,d=u.length-1,h=Math.min(i,a),f=Math.max(i,a),p=e.getIndexInRange(s,h),y=e.getIndexInRange(s,f);return{startIndex:p-p%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,c=Hn(a[r],o,r);return ft(s)?s(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,f=c.startIndex,p=c.endIndex,y=c.onChange,g=r.pageX-a;g>0?g=Math.min(g,u+d-h-o,u+d-h-s):g<0&&(g=Math.max(g,u-s,u-o));var m=this.getIndex({startX:s+g,endX:o+g});(m.startIndex!==f||m.endIndex!==p)&&y&&y(m),this.setState({startX:s+g,endX:o+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=_6(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,c=i.startX,u=this.state[s],d=this.props,h=d.x,f=d.width,p=d.travellerWidth,y=d.onChange,g=d.gap,m=d.data,v={startX:this.state.startX,endX:this.state.endX},x=r.pageX-a;x>0?x=Math.min(x,h+f-p-u):x<0&&(x=Math.max(x,h-u)),v[s]=u+x;var b=this.getIndex(v),A=b.startIndex,w=b.endIndex,S=function(){var _=m.length-1;return s==="startX"&&(o>c?A%g===0:w%g===0)||o<c&&w===_||s==="endX"&&(o>c?w%g===0:A%g===0)||o>c&&w===_};this.setState(li(li({},s,u+x),"brushMoveStartX",r.pageX),function(){y&&S()&&y(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,c=s.startX,u=s.endX,d=this.state[i],h=o.indexOf(d);if(h!==-1){var f=h+r;if(!(f===-1||f>=o.length)){var p=o[f];i==="startX"&&p>=u||i==="endX"&&p<=c||this.setState(li({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.fill,u=r.stroke;return fe.createElement("rect",{stroke:u,fill:c,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.data,u=r.children,d=r.padding,h=M.Children.only(u);return h?fe.cloneElement(h,{x:i,y:a,width:s,height:o,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,f=c.traveller,p=c.ariaLabel,y=c.data,g=c.startIndex,m=c.endIndex,v=Math.max(r,this.props.x),x=a2(a2({},lt(this.props,!1)),{},{x:v,y:u,width:d,height:h}),b=p||"Min value: ".concat((a=y[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=y[m])===null||s===void 0?void 0:s.name);return fe.createElement(Ot,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),o.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,x))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(r,i)+u,h=Math.max(Math.abs(i-r)-u,0);return fe.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:h,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,f=d.endX,p=5,y={pointerEvents:"none",fill:u};return fe.createElement(Ot,{className:"recharts-brush-texts"},fe.createElement(ml,cg({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-p,y:s+o/2},y),this.getTextOfTick(i)),fe.createElement(ml,cg({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+p,y:s+o/2},y),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,f=this.state,p=f.startX,y=f.endX,g=f.isTextActive,m=f.isSlideMoving,v=f.isTravellerMoving,x=f.isTravellerFocused;if(!i||!i.length||!Fe(o)||!Fe(c)||!Fe(u)||!Fe(d)||u<=0||d<=0)return null;var b=wt("recharts-brush",a),A=fe.Children.count(s)===1,w=eoe("userSelect","none");return fe.createElement(Ot,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(g||m||v||x||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,c=r.stroke,u=Math.floor(a+o/2)-1;return fe.createElement(fe.Fragment,null,fe.createElement("rect",{x:i,y:a,width:s,height:o,fill:c,stroke:"none"}),fe.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),fe.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return fe.isValidElement(r)?a=fe.cloneElement(r,i):ft(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return a2({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?loe({data:a,width:s,x:o,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([o,o+s-c]);var f=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var c=Math.floor((s+o)/2);r[c]>i?o=c:s=c}return i>=r[o]?o:s}}])})(M.PureComponent);li(ru,"displayName","Brush");li(ru,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var s2,D6;function coe(){if(D6)return s2;D6=1;var n=c_();function e(t,r){var i;return n(t,function(a,s,o){return i=r(a,s,o),!i}),!!i}return s2=e,s2}var o2,j6;function uoe(){if(j6)return o2;j6=1;var n=QR(),e=Ha(),t=coe(),r=ri(),i=By();function a(s,o,c){var u=r(s)?n:t;return c&&i(s,o,c)&&(o=void 0),u(s,e(o,3))}return o2=a,o2}var doe=uoe();const hoe=It(doe);var Pa=function(e,t){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===t},l2,T6;function foe(){if(T6)return l2;T6=1;var n=yM();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return l2=e,l2}var c2,C6;function poe(){if(C6)return c2;C6=1;var n=foe(),e=mM(),t=Ha();function r(i,a){var s={};return a=t(a,3),e(i,function(o,c,u){n(s,c,a(o,c,u))}),s}return c2=r,c2}var moe=poe();const goe=It(moe);var u2,N6;function yoe(){if(N6)return u2;N6=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}return u2=n,u2}var d2,k6;function voe(){if(k6)return d2;k6=1;var n=c_();function e(t,r){var i=!0;return n(t,function(a,s,o){return i=!!r(a,s,o),i}),i}return d2=e,d2}var h2,O6;function xoe(){if(O6)return h2;O6=1;var n=yoe(),e=voe(),t=Ha(),r=ri(),i=By();function a(s,o,c){var u=r(s)?n:e;return c&&i(s,o,c)&&(o=void 0),u(s,t(o,3))}return h2=a,h2}var boe=xoe();const s9=It(boe);var woe=["x","y"];function Bh(n){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(n)}function vS(){return vS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vS.apply(this,arguments)}function P6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function cd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(t),!0).forEach(function(r){Aoe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):P6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Aoe(n,e,t){return e=Soe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Soe(n){var e=Eoe(n,"string");return Bh(e)=="symbol"?e:e+""}function Eoe(n,e){if(Bh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _oe(n,e){if(n==null)return{};var t=Doe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Doe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function joe(n,e){var t=n.x,r=n.y,i=_oe(n,woe),a="".concat(t),s=parseInt(a,10),o="".concat(r),c=parseInt(o,10),u="".concat(e.height||i.height),d=parseInt(u,10),h="".concat(e.width||i.width),f=parseInt(h,10);return cd(cd(cd(cd(cd({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:f,name:e.name,radius:e.radius})}function I6(n){return fe.createElement(QF,vS({shapeType:"rectangle",propTransformer:joe,activeClassName:"recharts-active-bar"},n))}var Toe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=Fe(r)||XG(r);return a?e(r,i):(a||yl(),t)}},Coe=["value","background"],o9;function iu(n){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iu(n)}function Noe(n,e){if(n==null)return{};var t=koe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function koe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function dg(){return dg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dg.apply(this,arguments)}function R6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Rn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?R6(Object(t),!0).forEach(function(r){Gs(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):R6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ooe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function M6(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,c9(r.key),r)}}function Poe(n,e,t){return e&&M6(n.prototype,e),t&&M6(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ioe(n,e,t){return e=hg(e),Roe(n,l9()?Reflect.construct(e,t||[],hg(n).constructor):e.apply(n,t))}function Roe(n,e){if(e&&(iu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Moe(n)}function Moe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function l9(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l9=function(){return!!n})()}function hg(n){return hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hg(n)}function Foe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&xS(n,e)}function xS(n,e){return xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xS(n,e)}function Gs(n,e,t){return e=c9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c9(n){var e=Loe(n,"string");return iu(e)=="symbol"?e:e+""}function Loe(n,e){if(iu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(iu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Il=(function(n){function e(){var t;Ooe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Ioe(this,e,[].concat(i)),Gs(t,"state",{isAnimationFinished:!1}),Gs(t,"id",Nu("recharts-bar-")),Gs(t,"handleAnimationEnd",function(){var s=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),s&&s()}),Gs(t,"handleAnimationStart",function(){var s=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),s&&s()}),t}return Foe(e,n),Poe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,c=a.activeIndex,u=a.activeBar,d=lt(this.props,!1);return r&&r.map(function(h,f){var p=f===c,y=p?u:s,g=Rn(Rn(Rn({},d),h),{},{isActive:p,option:y,index:f,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return fe.createElement(Ot,dg({className:"recharts-bar-rectangle"},pl(i.props,h,f),{key:"rectangle-".concat(h?.x,"-").concat(h?.y,"-").concat(h?.value,"-").concat(f)}),fe.createElement(I6,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,h=i.animationId,f=this.state.prevData;return fe.createElement(La,{begin:c,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,g=a.map(function(m,v){var x=f&&f[v];if(x){var b=Yr(x.x,m.x),A=Yr(x.y,m.y),w=Yr(x.width,m.width),S=Yr(x.height,m.height);return Rn(Rn({},m),{},{x:b(y),y:A(y),width:w(y),height:S(y)})}if(s==="horizontal"){var E=Yr(0,m.height),_=E(y);return Rn(Rn({},m),{},{y:m.y+m.height-_,height:_})}var D=Yr(0,m.width),C=D(y);return Rn(Rn({},m),{},{width:C})});return fe.createElement(Ot,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!Xc(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,c=lt(this.props.background,!1);return a.map(function(u,d){u.value;var h=u.background,f=Noe(u,Coe);if(!h)return null;var p=Rn(Rn(Rn(Rn(Rn({},f),{},{fill:"#eee"},h),c),pl(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return fe.createElement(I6,dg({key:"background-bar-".concat(d),option:r.props.background,isActive:d===o},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=zi(d,Jy);if(!h)return null;var f=u==="vertical"?s[0].height/2:s[0].width/2,p=function(m,v){var x=Array.isArray(m.value)?m.value[1]:m.value;return{x:m.x,y:m.y,value:x,errorVal:Hn(m,v)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return fe.createElement(Ot,y,h.map(function(g){return fe.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,f=r.height,p=r.isAnimationActive,y=r.background,g=r.id;if(i||!a||!a.length)return null;var m=this.state.isAnimationFinished,v=wt("recharts-bar",s),x=o&&o.allowDataOverflow,b=c&&c.allowDataOverflow,A=x||b,w=xt(g)?this.id:g;return fe.createElement(Ot,{className:v},x||b?fe.createElement("defs",null,fe.createElement("clipPath",{id:"clipPath-".concat(w)},fe.createElement("rect",{x:x?u:u-h/2,y:b?d:d-f/2,width:x?h:h*2,height:b?f:f*2}))):null,fe.createElement(Ot,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(w,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,w),(!p||m)&&fs.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(M.PureComponent);o9=Il;Gs(Il,"displayName","Bar");Gs(Il,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Nl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Gs(Il,"getComposedData",function(n){var e=n.props,t=n.item,r=n.barPosition,i=n.bandSize,a=n.xAxis,s=n.yAxis,o=n.xAxisTicks,c=n.yAxisTicks,u=n.stackedData,d=n.dataStartIndex,h=n.displayedData,f=n.offset,p=une(r,t);if(!p)return null;var y=e.layout,g=t.type.defaultProps,m=g!==void 0?Rn(Rn({},g),t.props):t.props,v=m.dataKey,x=m.children,b=m.minPointSize,A=y==="horizontal"?s:a,w=u?A.scale.domain():null,S=yne({numericAxis:A}),E=zi(x,ph),_=h.map(function(D,C){var k,T,N,j,R,P;u?k=dne(u[d+C],w):(k=Hn(D,v),Array.isArray(k)||(k=[S,k]));var F=Toe(b,o9.defaultProps.minPointSize)(k[1],C);if(y==="horizontal"){var q,$=[s.scale(k[0]),s.scale(k[1])],B=$[0],I=$[1];T=uk({axis:a,ticks:o,bandSize:i,offset:p.offset,entry:D,index:C}),N=(q=I??B)!==null&&q!==void 0?q:void 0,j=p.size;var L=B-I;if(R=Number.isNaN(L)?0:L,P={x:T,y:s.y,width:j,height:s.height},Math.abs(F)>0&&Math.abs(R)<Math.abs(F)){var U=Fr(R||F)*(Math.abs(F)-Math.abs(R));N-=U,R+=U}}else{var G=[a.scale(k[0]),a.scale(k[1])],H=G[0],V=G[1];if(T=H,N=uk({axis:s,ticks:c,bandSize:i,offset:p.offset,entry:D,index:C}),j=V-H,R=p.size,P={x:a.x,y:N,width:a.width,height:R},Math.abs(F)>0&&Math.abs(j)<Math.abs(F)){var K=Fr(j||F)*(Math.abs(F)-Math.abs(j));j+=K}}return Rn(Rn(Rn({},D),{},{x:T,y:N,width:j,height:R,value:u?k:k[1],payload:D,background:P},E&&E[C]&&E[C].props),{},{tooltipPayload:[IF(t,D)],tooltipPosition:{x:T+j/2,y:N+R/2}})});return Rn({data:_,layout:y},f)});function $h(n){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$h(n)}function Uoe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function F6(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,u9(r.key),r)}}function Boe(n,e,t){return e&&F6(n.prototype,e),t&&F6(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function L6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ia(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L6(Object(t),!0).forEach(function(r){a0(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function a0(n,e,t){return e=u9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function u9(n){var e=$oe(n,"string");return $h(e)=="symbol"?e:e+""}function $oe(n,e){if($h(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if($h(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var d9=function(e,t,r,i,a){var s=e.width,o=e.height,c=e.layout,u=e.children,d=Object.keys(t),h={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},f=!!di(u,Il);return d.reduce(function(p,y){var g=t[y],m=g.orientation,v=g.domain,x=g.padding,b=x===void 0?{}:x,A=g.mirror,w=g.reversed,S="".concat(m).concat(A?"Mirror":""),E,_,D,C,k;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var T=v[1]-v[0],N=1/0,j=g.categoricalDomain.sort(QG);if(j.forEach(function(G,H){H>0&&(N=Math.min((G||0)-(j[H-1]||0),N))}),Number.isFinite(N)){var R=N/T,P=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(E=R*P/2),g.padding==="no-gap"){var F=Lr(e.barCategoryGap,R*P),q=R*P/2;E=q-F-(q-F)/P*F}}}i==="xAxis"?_=[r.left+(b.left||0)+(E||0),r.left+r.width-(b.right||0)-(E||0)]:i==="yAxis"?_=c==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(E||0),r.top+r.height-(b.bottom||0)-(E||0)]:_=g.range,w&&(_=[_[1],_[0]]);var $=NF(g,a,f),B=$.scale,I=$.realScaleType;B.domain(v).range(_),kF(B);var L=OF(B,ia(ia({},g),{},{realScaleType:I}));i==="xAxis"?(k=m==="top"&&!A||m==="bottom"&&A,D=r.left,C=h[S]-k*g.height):i==="yAxis"&&(k=m==="left"&&!A||m==="right"&&A,D=h[S]-k*g.width,C=r.top);var U=ia(ia(ia({},g),L),{},{realScaleType:I,x:D,y:C,scale:B,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return U.bandSize=Km(U,L),!g.hide&&i==="xAxis"?h[S]+=(k?-1:1)*U.height:g.hide||(h[S]+=(k?-1:1)*U.width),ia(ia({},p),{},a0({},y,U))},{})},h9=function(e,t){var r=e.x,i=e.y,a=t.x,s=t.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},zoe=function(e){var t=e.x1,r=e.y1,i=e.x2,a=e.y2;return h9({x:t,y:r},{x:i,y:a})},f9=(function(){function n(e){Uoe(this,n),this.scale=e}return Boe(n,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}},{key:"isInRange",value:function(t){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?t>=i&&t<=a:t>=a&&t<=i}}],[{key:"create",value:function(t){return new n(t)}}])})();a0(f9,"EPS",1e-4);var L_=function(e){var t=Object.keys(e).reduce(function(r,i){return ia(ia({},r),{},a0({},i,f9.create(e[i])))},{});return ia(ia({},t),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return goe(i,function(c,u){return t[u].apply(c,{bandAware:s,position:o})})},isInRange:function(i){return s9(i,function(a,s){return t[s].isInRange(a)})}})};function qoe(n){return(n%180+180)%180}var Woe=function(e){var t=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=qoe(i),s=a*Math.PI/180,o=Math.atan(r/t),c=s>o&&s<Math.PI-o?r/Math.sin(s):t/Math.cos(s);return Math.abs(c)},f2,U6;function Hoe(){if(U6)return f2;U6=1;var n=Ha(),e=mf(),t=Ly();function r(i){return function(a,s,o){var c=Object(a);if(!e(a)){var u=n(s,3);a=t(a),s=function(h){return u(c[h],h,c)}}var d=i(a,s,o);return d>-1?c[u?a[d]:d]:void 0}}return f2=r,f2}var p2,B6;function Voe(){if(B6)return p2;B6=1;var n=n9();function e(t){var r=n(t),i=r%1;return r===r?i?r-i:r:0}return p2=e,p2}var m2,$6;function Goe(){if($6)return m2;$6=1;var n=uM(),e=Ha(),t=Voe(),r=Math.max;function i(a,s,o){var c=a==null?0:a.length;if(!c)return-1;var u=o==null?0:t(o);return u<0&&(u=r(c+u,0)),n(a,e(s,3),u)}return m2=i,m2}var g2,z6;function Yoe(){if(z6)return g2;z6=1;var n=Hoe(),e=Goe(),t=n(e);return g2=t,g2}var Koe=Yoe();const Xoe=It(Koe);var Joe=DR();const Zoe=It(Joe);var Qoe=Zoe(function(n){return{x:n.left,y:n.top,width:n.width,height:n.height}},function(n){return["l",n.left,"t",n.top,"w",n.width,"h",n.height].join("")}),U_=M.createContext(void 0),B_=M.createContext(void 0),p9=M.createContext(void 0),m9=M.createContext({}),g9=M.createContext(void 0),y9=M.createContext(0),v9=M.createContext(0),q6=function(e){var t=e.state,r=t.xAxisMap,i=t.yAxisMap,a=t.offset,s=e.clipPathId,o=e.children,c=e.width,u=e.height,d=Qoe(a);return fe.createElement(U_.Provider,{value:r},fe.createElement(B_.Provider,{value:i},fe.createElement(m9.Provider,{value:a},fe.createElement(p9.Provider,{value:d},fe.createElement(g9.Provider,{value:s},fe.createElement(y9.Provider,{value:u},fe.createElement(v9.Provider,{value:c},o)))))))},ele=function(){return M.useContext(g9)},x9=function(e){var t=M.useContext(U_);t==null&&yl();var r=t[e];return r==null&&yl(),r},tle=function(){var e=M.useContext(U_);return Bs(e)},nle=function(){var e=M.useContext(B_),t=Xoe(e,function(r){return s9(r.domain,Number.isFinite)});return t||Bs(e)},b9=function(e){var t=M.useContext(B_);t==null&&yl();var r=t[e];return r==null&&yl(),r},rle=function(){var e=M.useContext(p9);return e},ile=function(){return M.useContext(m9)},$_=function(){return M.useContext(v9)},z_=function(){return M.useContext(y9)};function au(n){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},au(n)}function ale(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function sle(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,A9(r.key),r)}}function ole(n,e,t){return e&&sle(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function lle(n,e,t){return e=fg(e),cle(n,w9()?Reflect.construct(e,t||[],fg(n).constructor):e.apply(n,t))}function cle(n,e){if(e&&(au(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ule(n)}function ule(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function w9(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w9=function(){return!!n})()}function fg(n){return fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fg(n)}function dle(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&bS(n,e)}function bS(n,e){return bS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bS(n,e)}function W6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function H6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?W6(Object(t),!0).forEach(function(r){q_(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):W6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function q_(n,e,t){return e=A9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function A9(n){var e=hle(n,"string");return au(e)=="symbol"?e:e+""}function hle(n,e){if(au(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(au(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function fle(n,e){return yle(n)||gle(n,e)||mle(n,e)||ple()}function ple(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mle(n,e){if(n){if(typeof n=="string")return V6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V6(n,e)}}function V6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function gle(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(c=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function yle(n){if(Array.isArray(n))return n}function wS(){return wS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wS.apply(this,arguments)}var vle=function(e,t){var r;return fe.isValidElement(e)?r=fe.cloneElement(e,t):ft(e)?r=e(t):r=fe.createElement("line",wS({},t,{className:"recharts-reference-line-line"})),r},xle=function(e,t,r,i,a,s,o,c,u){var d=a.x,h=a.y,f=a.width,p=a.height;if(r){var y=u.y,g=e.y.apply(y,{position:s});if(Pa(u,"discard")&&!e.y.isInRange(g))return null;var m=[{x:d+f,y:g},{x:d,y:g}];return c==="left"?m.reverse():m}if(t){var v=u.x,x=e.x.apply(v,{position:s});if(Pa(u,"discard")&&!e.x.isInRange(x))return null;var b=[{x,y:h+p},{x,y:h}];return o==="top"?b.reverse():b}if(i){var A=u.segment,w=A.map(function(S){return e.apply(S,{position:s})});return Pa(u,"discard")&&hoe(w,function(S){return!e.isInRange(S)})?null:w}return null};function ble(n){var e=n.x,t=n.y,r=n.segment,i=n.xAxisId,a=n.yAxisId,s=n.shape,o=n.className,c=n.alwaysShow,u=ele(),d=x9(i),h=b9(a),f=rle();if(!u||!f)return null;ca(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=L_({x:d.scale,y:h.scale}),y=Vn(e),g=Vn(t),m=r&&r.length===2,v=xle(p,y,g,m,f,n.position,d.orientation,h.orientation,n);if(!v)return null;var x=fle(v,2),b=x[0],A=b.x,w=b.y,S=x[1],E=S.x,_=S.y,D=Pa(n,"hidden")?"url(#".concat(u,")"):void 0,C=H6(H6({clipPath:D},lt(n,!0)),{},{x1:A,y1:w,x2:E,y2:_});return fe.createElement(Ot,{className:wt("recharts-reference-line",o)},vle(s,C),rr.renderCallByParent(n,zoe({x1:A,y1:w,x2:E,y2:_})))}var W_=(function(n){function e(){return ale(this,e),lle(this,e,arguments)}return dle(e,n),ole(e,[{key:"render",value:function(){return fe.createElement(ble,this.props)}}])})(fe.Component);q_(W_,"displayName","ReferenceLine");q_(W_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function AS(){return AS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},AS.apply(this,arguments)}function su(n){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},su(n)}function G6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Y6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G6(Object(t),!0).forEach(function(r){s0(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function wle(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ale(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,E9(r.key),r)}}function Sle(n,e,t){return e&&Ale(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ele(n,e,t){return e=pg(e),_le(n,S9()?Reflect.construct(e,t||[],pg(n).constructor):e.apply(n,t))}function _le(n,e){if(e&&(su(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dle(n)}function Dle(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function S9(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S9=function(){return!!n})()}function pg(n){return pg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pg(n)}function jle(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&SS(n,e)}function SS(n,e){return SS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SS(n,e)}function s0(n,e,t){return e=E9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function E9(n){var e=Tle(n,"string");return su(e)=="symbol"?e:e+""}function Tle(n,e){if(su(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(su(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Cle=function(e){var t=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=L_({x:i.scale,y:a.scale}),o=s.apply({x:t,y:r},{bandAware:!0});return Pa(e,"discard")&&!s.isInRange(o)?null:o},o0=(function(n){function e(){return wle(this,e),Ele(this,e,arguments)}return jle(e,n),Sle(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,c=r.clipPathId,u=Vn(i),d=Vn(a);if(ca(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=Cle(this.props);if(!h)return null;var f=h.x,p=h.y,y=this.props,g=y.shape,m=y.className,v=Pa(this.props,"hidden")?"url(#".concat(c,")"):void 0,x=Y6(Y6({clipPath:v},lt(this.props,!0)),{},{cx:f,cy:p});return fe.createElement(Ot,{className:wt("recharts-reference-dot",m)},e.renderDot(g,x),rr.renderCallByParent(this.props,{x:f-s,y:p-s,width:2*s,height:2*s}))}}])})(fe.Component);s0(o0,"displayName","ReferenceDot");s0(o0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});s0(o0,"renderDot",function(n,e){var t;return fe.isValidElement(n)?t=fe.cloneElement(n,e):ft(n)?t=n(e):t=fe.createElement(Zy,AS({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),t});function ES(){return ES=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ES.apply(this,arguments)}function ou(n){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ou(n)}function K6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function X6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?K6(Object(t),!0).forEach(function(r){l0(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):K6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Nle(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function kle(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,D9(r.key),r)}}function Ole(n,e,t){return e&&kle(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ple(n,e,t){return e=mg(e),Ile(n,_9()?Reflect.construct(e,t||[],mg(n).constructor):e.apply(n,t))}function Ile(n,e){if(e&&(ou(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rle(n)}function Rle(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _9(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_9=function(){return!!n})()}function mg(n){return mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mg(n)}function Mle(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&_S(n,e)}function _S(n,e){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_S(n,e)}function l0(n,e,t){return e=D9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function D9(n){var e=Fle(n,"string");return ou(e)=="symbol"?e:e+""}function Fle(n,e){if(ou(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ou(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Lle=function(e,t,r,i,a){var s=a.x1,o=a.x2,c=a.y1,u=a.y2,d=a.xAxis,h=a.yAxis;if(!d||!h)return null;var f=L_({x:d.scale,y:h.scale}),p={x:e?f.x.apply(s,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(c,{position:"start"}):f.y.rangeMin},y={x:t?f.x.apply(o,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Pa(a,"discard")&&(!f.isInRange(p)||!f.isInRange(y))?null:h9(p,y)},c0=(function(n){function e(){return Nle(this,e),Ple(this,e,arguments)}return Mle(e,n),Ole(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;ca(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Vn(i),f=Vn(a),p=Vn(s),y=Vn(o),g=this.props.shape;if(!h&&!f&&!p&&!y&&!g)return null;var m=Lle(h,f,p,y,this.props);if(!m&&!g)return null;var v=Pa(this.props,"hidden")?"url(#".concat(d,")"):void 0;return fe.createElement(Ot,{className:wt("recharts-reference-area",c)},e.renderRect(g,X6(X6({clipPath:v},lt(this.props,!0)),m)),rr.renderCallByParent(this.props,m))}}])})(fe.Component);l0(c0,"displayName","ReferenceArea");l0(c0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});l0(c0,"renderRect",function(n,e){var t;return fe.isValidElement(n)?t=fe.cloneElement(n,e):ft(n)?t=n(e):t=fe.createElement(F_,ES({},e,{className:"recharts-reference-area-rect"})),t});function j9(n,e,t){if(e<1)return[];if(e===1&&t===void 0)return n;for(var r=[],i=0;i<n.length;i+=e)r.push(n[i]);return r}function Ule(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return Woe(r,t)}function Ble(n,e,t){var r=t==="width",i=n.x,a=n.y,s=n.width,o=n.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function gg(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var a=t();return n*(e-n*a/2-r)>=0&&n*(e+n*a/2-i)<=0}function $le(n,e){return j9(n,e+1)}function zle(n,e,t,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,c=0,u=1,d=s,h=function(){var y=r?.[c];if(y===void 0)return{v:j9(r,u)};var g=c,m,v=function(){return m===void 0&&(m=t(y,g)),m},x=y.coordinate,b=c===0||gg(n,x,v,d,o);b||(c=0,d=s,u+=1),b&&(d=x+n*(v()/2+i),c+=u)},f;u<=a.length;)if(f=h(),f)return f.v;return[]}function zh(n){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh(n)}function J6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?J6(Object(t),!0).forEach(function(r){qle(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):J6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qle(n,e,t){return e=Wle(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wle(n){var e=Hle(n,"string");return zh(e)=="symbol"?e:e+""}function Hle(n,e){if(zh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(zh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Vle(n,e,t,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,c=e.end,u=function(f){var p=a[f],y,g=function(){return y===void 0&&(y=t(p,f)),y};if(f===s-1){var m=n*(p.coordinate+n*g()/2-c);a[f]=p=xr(xr({},p),{},{tickCoord:m>0?p.coordinate-m*n:p.coordinate})}else a[f]=p=xr(xr({},p),{},{tickCoord:p.coordinate});var v=gg(n,p.tickCoord,g,o,c);v&&(c=p.tickCoord-n*(g()/2+i),a[f]=xr(xr({},p),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return a}function Gle(n,e,t,r,i,a){var s=(r||[]).slice(),o=s.length,c=e.start,u=e.end;if(a){var d=r[o-1],h=t(d,o-1),f=n*(d.coordinate+n*h/2-u);s[o-1]=d=xr(xr({},d),{},{tickCoord:f>0?d.coordinate-f*n:d.coordinate});var p=gg(n,d.tickCoord,function(){return h},c,u);p&&(u=d.tickCoord-n*(h/2+i),s[o-1]=xr(xr({},d),{},{isShow:!0}))}for(var y=a?o-1:o,g=function(x){var b=s[x],A,w=function(){return A===void 0&&(A=t(b,x)),A};if(x===0){var S=n*(b.coordinate-n*w()/2-c);s[x]=b=xr(xr({},b),{},{tickCoord:S<0?b.coordinate-S*n:b.coordinate})}else s[x]=b=xr(xr({},b),{},{tickCoord:b.coordinate});var E=gg(n,b.tickCoord,w,c,u);E&&(c=b.tickCoord+n*(w()/2+i),s[x]=xr(xr({},b),{},{isShow:!0}))},m=0;m<y;m++)g(m);return s}function H_(n,e,t){var r=n.tick,i=n.ticks,a=n.viewBox,s=n.minTickGap,o=n.orientation,c=n.interval,u=n.tickFormatter,d=n.unit,h=n.angle;if(!i||!i.length||!r)return[];if(Fe(c)||Nl.isSsr)return $le(i,typeof c=="number"&&Fe(c)?c:0);var f=[],p=o==="top"||o==="bottom"?"width":"height",y=d&&p==="width"?$d(d,{fontSize:e,letterSpacing:t}):{width:0,height:0},g=function(b,A){var w=ft(u)?u(b.value,A):b.value;return p==="width"?Ule($d(w,{fontSize:e,letterSpacing:t}),y,h):$d(w,{fontSize:e,letterSpacing:t})[p]},m=i.length>=2?Fr(i[1].coordinate-i[0].coordinate):1,v=Ble(a,m,p);return c==="equidistantPreserveStart"?zle(m,v,g,i,s):(c==="preserveStart"||c==="preserveStartEnd"?f=Gle(m,v,g,i,s,c==="preserveStartEnd"):f=Vle(m,v,g,i,s),f.filter(function(x){return x.isShow}))}var Yle=["viewBox"],Kle=["viewBox"],Xle=["ticks"];function lu(n){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(n)}function fc(){return fc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fc.apply(this,arguments)}function Z6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Bn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Z6(Object(t),!0).forEach(function(r){V_(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Z6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function y2(n,e){if(n==null)return{};var t=Jle(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Jle(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Zle(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Q6(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,C9(r.key),r)}}function Qle(n,e,t){return e&&Q6(n.prototype,e),t&&Q6(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function ece(n,e,t){return e=yg(e),tce(n,T9()?Reflect.construct(e,t||[],yg(n).constructor):e.apply(n,t))}function tce(n,e){if(e&&(lu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nce(n)}function nce(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function T9(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T9=function(){return!!n})()}function yg(n){return yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yg(n)}function rce(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&DS(n,e)}function DS(n,e){return DS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DS(n,e)}function V_(n,e,t){return e=C9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function C9(n){var e=ice(n,"string");return lu(e)=="symbol"?e:e+""}function ice(n,e){if(lu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(lu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Ru=(function(n){function e(t){var r;return Zle(this,e),r=ece(this,e,[t]),r.state={fontSize:"",letterSpacing:""},r}return rce(e,n),Qle(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=y2(r,Yle),o=this.props,c=o.viewBox,u=y2(o,Kle);return!bc(a,c)||!bc(s,u)||!bc(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,c=i.height,u=i.orientation,d=i.tickSize,h=i.mirror,f=i.tickMargin,p,y,g,m,v,x,b=h?-1:1,A=r.tickSize||d,w=Fe(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=y=r.coordinate,m=s+ +!h*c,g=m-b*A,x=g-b*f,v=w;break;case"left":g=m=r.coordinate,y=a+ +!h*o,p=y-b*A,v=p-b*f,x=w;break;case"right":g=m=r.coordinate,y=a+ +h*o,p=y+b*A,v=p+b*f,x=w;break;default:p=y=r.coordinate,m=s+ +h*c,g=m+b*A,x=g+b*f,v=w;break}return{line:{x1:p,y1:g,x2:y,y2:m},tick:{x:v,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=Bn(Bn(Bn({},lt(this.props,!1)),lt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);h=Bn(Bn({},h),{},{x1:i,y1:a+f*o,x2:i+s,y2:a+f*o})}else{var p=+(c==="left"&&!u||c==="right"&&u);h=Bn(Bn({},h),{},{x1:i+p*s,y1:a,x2:i+p*s,y2:a+o})}return fe.createElement("line",fc({},h,{className:wt("recharts-cartesian-axis-line",xi(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,c=o.tickLine,u=o.stroke,d=o.tick,h=o.tickFormatter,f=o.unit,p=H_(Bn(Bn({},this.props),{},{ticks:r}),i,a),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),m=lt(this.props,!1),v=lt(d,!1),x=Bn(Bn({},m),{},{fill:"none"},lt(c,!1)),b=p.map(function(A,w){var S=s.getTickLineCoord(A),E=S.line,_=S.tick,D=Bn(Bn(Bn(Bn({textAnchor:y,verticalAnchor:g},m),{},{stroke:"none",fill:u},v),_),{},{index:w,payload:A,visibleTicksCount:p.length,tickFormatter:h});return fe.createElement(Ot,fc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},pl(s.props,A,w)),c&&fe.createElement("line",fc({},x,E,{className:wt("recharts-cartesian-axis-tick-line",xi(c,"className"))})),d&&e.renderTickItem(d,D,"".concat(ft(h)?h(A.value,w):A.value).concat(f||"")))});return fe.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var h=this.props,f=h.ticks,p=y2(h,Xle),y=f;return ft(c)&&(y=f&&f.length>0?c(this.props):c(p)),s<=0||o<=0||!y||!y.length?null:fe.createElement(Ot,{className:wt("recharts-cartesian-axis",u),ref:function(m){r.layerReference=m}},a&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),rr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,o=wt(i.className,"recharts-cartesian-axis-tick-value");return fe.isValidElement(r)?s=fe.cloneElement(r,Bn(Bn({},i),{},{className:o})):ft(r)?s=r(Bn(Bn({},i),{},{className:o})):s=fe.createElement(ml,fc({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])})(M.Component);V_(Ru,"displayName","CartesianAxis");V_(Ru,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var ace=["x1","y1","x2","y2","key"],sce=["offset"];function vl(n){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vl(n)}function eO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function wr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eO(Object(t),!0).forEach(function(r){oce(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):eO(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function oce(n,e,t){return e=lce(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lce(n){var e=cce(n,"string");return vl(e)=="symbol"?e:e+""}function cce(n,e){if(vl(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(vl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Vo(){return Vo=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vo.apply(this,arguments)}function tO(n,e){if(n==null)return{};var t=uce(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function uce(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var dce=function(e){var t=e.fill;if(!t||t==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,c=e.ry;return fe.createElement("rect",{x:i,y:a,ry:c,width:s,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function N9(n,e){var t;if(fe.isValidElement(n))t=fe.cloneElement(n,e);else if(ft(n))t=n(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,c=tO(e,ace),u=lt(c,!1);u.offset;var d=tO(u,sce);t=fe.createElement("line",Vo({},d,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return t}function hce(n){var e=n.x,t=n.width,r=n.horizontal,i=r===void 0?!0:r,a=n.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var u=wr(wr({},n),{},{x1:e,y1:o,x2:e+t,y2:o,key:"line-".concat(c),index:c});return N9(i,u)});return fe.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function fce(n){var e=n.y,t=n.height,r=n.vertical,i=r===void 0?!0:r,a=n.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var u=wr(wr({},n),{},{x1:o,y1:e,x2:o,y2:e+t,key:"line-".concat(c),index:c});return N9(i,u)});return fe.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function pce(n){var e=n.horizontalFill,t=n.fillOpacity,r=n.x,i=n.y,a=n.width,s=n.height,o=n.horizontalPoints,c=n.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=o.map(function(f){return Math.round(f+i-i)}).sort(function(f,p){return f-p});i!==d[0]&&d.unshift(0);var h=d.map(function(f,p){var y=!d[p+1],g=y?i+s-f:d[p+1]-f;if(g<=0)return null;var m=p%e.length;return fe.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:g,width:a,stroke:"none",fill:e[m],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return fe.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function mce(n){var e=n.vertical,t=e===void 0?!0:e,r=n.verticalFill,i=n.fillOpacity,a=n.x,s=n.y,o=n.width,c=n.height,u=n.verticalPoints;if(!t||!r||!r.length)return null;var d=u.map(function(f){return Math.round(f+a-a)}).sort(function(f,p){return f-p});a!==d[0]&&d.unshift(0);var h=d.map(function(f,p){var y=!d[p+1],g=y?a+o-f:d[p+1]-f;if(g<=0)return null;var m=p%r.length;return fe.createElement("rect",{key:"react-".concat(p),x:f,y:s,width:g,height:c,stroke:"none",fill:r[m],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return fe.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var gce=function(e,t){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return CF(H_(wr(wr(wr({},Ru.defaultProps),r),{},{ticks:cs(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,t)},yce=function(e,t){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return CF(H_(wr(wr(wr({},Ru.defaultProps),r),{},{ticks:cs(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,t)},Vl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function jS(n){var e,t,r,i,a,s,o=$_(),c=z_(),u=ile(),d=wr(wr({},n),{},{stroke:(e=n.stroke)!==null&&e!==void 0?e:Vl.stroke,fill:(t=n.fill)!==null&&t!==void 0?t:Vl.fill,horizontal:(r=n.horizontal)!==null&&r!==void 0?r:Vl.horizontal,horizontalFill:(i=n.horizontalFill)!==null&&i!==void 0?i:Vl.horizontalFill,vertical:(a=n.vertical)!==null&&a!==void 0?a:Vl.vertical,verticalFill:(s=n.verticalFill)!==null&&s!==void 0?s:Vl.verticalFill,x:Fe(n.x)?n.x:u.left,y:Fe(n.y)?n.y:u.top,width:Fe(n.width)?n.width:u.width,height:Fe(n.height)?n.height:u.height}),h=d.x,f=d.y,p=d.width,y=d.height,g=d.syncWithTicks,m=d.horizontalValues,v=d.verticalValues,x=tle(),b=nle();if(!Fe(p)||p<=0||!Fe(y)||y<=0||!Fe(h)||h!==+h||!Fe(f)||f!==+f)return null;var A=d.verticalCoordinatesGenerator||gce,w=d.horizontalCoordinatesGenerator||yce,S=d.horizontalPoints,E=d.verticalPoints;if((!S||!S.length)&&ft(w)){var _=m&&m.length,D=w({yAxis:b?wr(wr({},b),{},{ticks:_?m:b.ticks}):void 0,width:o,height:c,offset:u},_?!0:g);ca(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(vl(D),"]")),Array.isArray(D)&&(S=D)}if((!E||!E.length)&&ft(A)){var C=v&&v.length,k=A({xAxis:x?wr(wr({},x),{},{ticks:C?v:x.ticks}):void 0,width:o,height:c,offset:u},C?!0:g);ca(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(vl(k),"]")),Array.isArray(k)&&(E=k)}return fe.createElement("g",{className:"recharts-cartesian-grid"},fe.createElement(dce,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),fe.createElement(hce,Vo({},d,{offset:u,horizontalPoints:S,xAxis:x,yAxis:b})),fe.createElement(fce,Vo({},d,{offset:u,verticalPoints:E,xAxis:x,yAxis:b})),fe.createElement(pce,Vo({},d,{horizontalPoints:S})),fe.createElement(mce,Vo({},d,{verticalPoints:E})))}jS.displayName="CartesianGrid";var vce=["layout","type","stroke","connectNulls","isRange","ref"],xce=["key"],k9;function cu(n){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cu(n)}function O9(n,e){if(n==null)return{};var t=bce(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function bce(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Go(){return Go=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Go.apply(this,arguments)}function nO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Is(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nO(Object(t),!0).forEach(function(r){Ca(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nO(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function wce(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function rO(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,I9(r.key),r)}}function Ace(n,e,t){return e&&rO(n.prototype,e),t&&rO(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Sce(n,e,t){return e=vg(e),Ece(n,P9()?Reflect.construct(e,t||[],vg(n).constructor):e.apply(n,t))}function Ece(n,e){if(e&&(cu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ce(n)}function _ce(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function P9(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P9=function(){return!!n})()}function vg(n){return vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vg(n)}function Dce(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&TS(n,e)}function TS(n,e){return TS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},TS(n,e)}function Ca(n,e,t){return e=I9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function I9(n){var e=jce(n,"string");return cu(e)=="symbol"?e:e+""}function jce(n,e){if(cu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(cu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var vo=(function(n){function e(){var t;wce(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Sce(this,e,[].concat(i)),Ca(t,"state",{isAnimationFinished:!0}),Ca(t,"id",Nu("recharts-area-")),Ca(t,"handleAnimationEnd",function(){var s=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),ft(s)&&s()}),Ca(t,"handleAnimationStart",function(){var s=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),ft(s)&&s()}),t}return Dce(e,n),Ace(e,[{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(s&&!o)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,f=lt(this.props,!1),p=lt(u,!0),y=d.map(function(m,v){var x=Is(Is(Is({key:"dot-".concat(v),r:3},f),p),{},{index:v,cx:m.x,cy:m.y,dataKey:h,value:m.value,payload:m.payload,points:d});return e.renderDotItem(u,x)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return fe.createElement(Ot,Go({className:"recharts-area-dots"},g),y)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,s=i.points,o=i.strokeWidth,c=s[0].x,u=s[s.length-1].x,d=r*Math.abs(c-u),h=Vs(s.map(function(f){return f.y||0}));return Fe(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(Vs(a.map(function(f){return f.y||0})),h)),Fe(h)?fe.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,s=i.points,o=i.strokeWidth,c=s[0].y,u=s[s.length-1].y,d=r*Math.abs(c-u),h=Vs(s.map(function(f){return f.x||0}));return Fe(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(Vs(a.map(function(f){return f.x||0})),h)),Fe(h)?fe.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(o?parseInt("".concat(o),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,s){var o=this.props,c=o.layout,u=o.type,d=o.stroke,h=o.connectNulls,f=o.isRange;o.ref;var p=O9(o,vce);return fe.createElement(Ot,{clipPath:a?"url(#clipPath-".concat(s,")"):null},fe.createElement(Sc,Go({},lt(p,!0),{points:r,connectNulls:h,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&fe.createElement(Sc,Go({},lt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:r})),d!=="none"&&f&&fe.createElement(Sc,Go({},lt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,c=s.baseLine,u=s.isAnimationActive,d=s.animationBegin,h=s.animationDuration,f=s.animationEasing,p=s.animationId,y=this.state,g=y.prevPoints,m=y.prevBaseLine;return fe.createElement(La,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var x=v.t;if(g){var b=g.length/o.length,A=o.map(function(_,D){var C=Math.floor(D*b);if(g[C]){var k=g[C],T=Yr(k.x,_.x),N=Yr(k.y,_.y);return Is(Is({},_),{},{x:T(x),y:N(x)})}return _}),w;if(Fe(c)&&typeof c=="number"){var S=Yr(m,c);w=S(x)}else if(xt(c)||Cu(c)){var E=Yr(m,0);w=E(x)}else w=c.map(function(_,D){var C=Math.floor(D*b);if(m[C]){var k=m[C],T=Yr(k.x,_.x),N=Yr(k.y,_.y);return Is(Is({},_),{},{x:T(x),y:N(x)})}return _});return a.renderAreaStatically(A,w,r,i)}return fe.createElement(Ot,null,fe.createElement("defs",null,fe.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(x))),fe.createElement(Ot,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(o,c,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,s=a.points,o=a.baseLine,c=a.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,f=u.totalLength;return c&&s&&s.length&&(!d&&f>0||!Xc(d,s)||!Xc(h,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(s,o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,c=i.className,u=i.top,d=i.left,h=i.xAxis,f=i.yAxis,p=i.width,y=i.height,g=i.isAnimationActive,m=i.id;if(a||!o||!o.length)return null;var v=this.state.isAnimationFinished,x=o.length===1,b=wt("recharts-area",c),A=h&&h.allowDataOverflow,w=f&&f.allowDataOverflow,S=A||w,E=xt(m)?this.id:m,_=(r=lt(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},D=_.r,C=D===void 0?3:D,k=_.strokeWidth,T=k===void 0?2:k,N=lY(s)?s:{},j=N.clipDot,R=j===void 0?!0:j,P=C*2+T;return fe.createElement(Ot,{className:b},A||w?fe.createElement("defs",null,fe.createElement("clipPath",{id:"clipPath-".concat(E)},fe.createElement("rect",{x:A?d:d-p/2,y:w?u:u-y/2,width:A?p:p*2,height:w?y:y*2})),!R&&fe.createElement("clipPath",{id:"clipPath-dots-".concat(E)},fe.createElement("rect",{x:d-P/2,y:u-P/2,width:p+P,height:y+P}))):null,x?null:this.renderArea(S,E),(s||x)&&this.renderDots(S,R,E),(!g||v)&&fs.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])})(M.PureComponent);k9=vo;Ca(vo,"displayName","Area");Ca(vo,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Nl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ca(vo,"getBaseValue",function(n,e,t,r){var i=n.layout,a=n.baseValue,s=e.props.baseValue,o=s??a;if(Fe(o)&&typeof o=="number")return o;var c=i==="horizontal"?r:t,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return o==="dataMin"?h:o==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]});Ca(vo,"getComposedData",function(n){var e=n.props,t=n.item,r=n.xAxis,i=n.yAxis,a=n.xAxisTicks,s=n.yAxisTicks,o=n.bandSize,c=n.dataKey,u=n.stackedData,d=n.dataStartIndex,h=n.displayedData,f=n.offset,p=e.layout,y=u&&u.length,g=k9.getBaseValue(e,t,r,i),m=p==="horizontal",v=!1,x=h.map(function(A,w){var S;y?S=u[d+w]:(S=Hn(A,c),Array.isArray(S)?v=!0:S=[g,S]);var E=S[1]==null||y&&Hn(A,c)==null;return m?{x:ck({axis:r,ticks:a,bandSize:o,entry:A,index:w}),y:E?null:i.scale(S[1]),value:S,payload:A}:{x:E?null:r.scale(S[1]),y:ck({axis:i,ticks:s,bandSize:o,entry:A,index:w}),value:S,payload:A}}),b;return y||v?b=x.map(function(A){var w=Array.isArray(A.value)?A.value[0]:null;return m?{x:A.x,y:w!=null&&A.y!=null?i.scale(w):null}:{x:w!=null?r.scale(w):null,y:A.y}}):b=m?i.scale(g):r.scale(g),Is({points:x,baseLine:b,layout:p,isRange:v},f)});Ca(vo,"renderDotItem",function(n,e){var t;if(fe.isValidElement(n))t=fe.cloneElement(n,e);else if(ft(n))t=n(e);else{var r=wt("recharts-area-dot",typeof n!="boolean"?n.className:""),i=e.key,a=O9(e,xce);t=fe.createElement(Zy,Go({},a,{key:i,className:r}))}return t});function uu(n){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uu(n)}function Tce(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Cce(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,F9(r.key),r)}}function Nce(n,e,t){return e&&Cce(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function kce(n,e,t){return e=xg(e),Oce(n,R9()?Reflect.construct(e,t||[],xg(n).constructor):e.apply(n,t))}function Oce(n,e){if(e&&(uu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pce(n)}function Pce(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function R9(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R9=function(){return!!n})()}function xg(n){return xg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xg(n)}function Ice(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&CS(n,e)}function CS(n,e){return CS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CS(n,e)}function M9(n,e,t){return e=F9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function F9(n){var e=Rce(n,"string");return uu(e)=="symbol"?e:e+""}function Rce(n,e){if(uu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(uu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function NS(){return NS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NS.apply(this,arguments)}function Mce(n){var e=n.xAxisId,t=$_(),r=z_(),i=x9(e);return i==null?null:M.createElement(Ru,NS({},i,{className:wt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:t,height:r},ticksGenerator:function(s){return cs(s,!0)}}))}var du=(function(n){function e(){return Tce(this,e),kce(this,e,arguments)}return Ice(e,n),Nce(e,[{key:"render",value:function(){return M.createElement(Mce,this.props)}}])})(M.Component);M9(du,"displayName","XAxis");M9(du,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function hu(n){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hu(n)}function Fce(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Lce(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,B9(r.key),r)}}function Uce(n,e,t){return e&&Lce(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Bce(n,e,t){return e=bg(e),$ce(n,L9()?Reflect.construct(e,t||[],bg(n).constructor):e.apply(n,t))}function $ce(n,e){if(e&&(hu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zce(n)}function zce(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function L9(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L9=function(){return!!n})()}function bg(n){return bg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bg(n)}function qce(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&kS(n,e)}function kS(n,e){return kS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kS(n,e)}function U9(n,e,t){return e=B9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function B9(n){var e=Wce(n,"string");return hu(e)=="symbol"?e:e+""}function Wce(n,e){if(hu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function OS(){return OS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},OS.apply(this,arguments)}var Hce=function(e){var t=e.yAxisId,r=$_(),i=z_(),a=b9(t);return a==null?null:M.createElement(Ru,OS({},a,{className:wt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return cs(o,!0)}}))},fu=(function(n){function e(){return Fce(this,e),Bce(this,e,arguments)}return qce(e,n),Uce(e,[{key:"render",value:function(){return M.createElement(Hce,this.props)}}])})(M.Component);U9(fu,"displayName","YAxis");U9(fu,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function iO(n){return Kce(n)||Yce(n)||Gce(n)||Vce()}function Vce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gce(n,e){if(n){if(typeof n=="string")return PS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return PS(n,e)}}function Yce(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Kce(n){if(Array.isArray(n))return PS(n)}function PS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var IS=function(e,t,r,i,a){var s=zi(e,W_),o=zi(e,o0),c=[].concat(iO(s),iO(o)),u=zi(e,c0),d="".concat(i,"Id"),h=i[0],f=t;if(c.length&&(f=c.reduce(function(g,m){if(m.props[d]===r&&Pa(m.props,"extendDomain")&&Fe(m.props[h])){var v=m.props[h];return[Math.min(g[0],v),Math.max(g[1],v)]}return g},f)),u.length){var p="".concat(h,"1"),y="".concat(h,"2");f=u.reduce(function(g,m){if(m.props[d]===r&&Pa(m.props,"extendDomain")&&Fe(m.props[p])&&Fe(m.props[y])){var v=m.props[p],x=m.props[y];return[Math.min(g[0],v,x),Math.max(g[1],v,x)]}return g},f)}return a&&a.length&&(f=a.reduce(function(g,m){return Fe(m)?[Math.min(g[0],m),Math.max(g[1],m)]:g},f)),f},v2={exports:{}},aO;function Xce(){return aO||(aO=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,h||c,f),y=t?t+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=t?t+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,y=new Array(p);f<p;f++)y[f]=h[f].fn;return y},o.prototype.listenerCount=function(u){var d=t?t+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,f,p,y){var g=t?t+u:u;if(!this._events[g])return!1;var m=this._events[g],v=arguments.length,x,b;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,d),!0;case 3:return m.fn.call(m.context,d,h),!0;case 4:return m.fn.call(m.context,d,h,f),!0;case 5:return m.fn.call(m.context,d,h,f,p),!0;case 6:return m.fn.call(m.context,d,h,f,p,y),!0}for(b=1,x=new Array(v-1);b<v;b++)x[b-1]=arguments[b];m.fn.apply(m.context,x)}else{var A=m.length,w;for(b=0;b<A;b++)switch(m[b].once&&this.removeListener(u,m[b].fn,void 0,!0),v){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,d);break;case 3:m[b].fn.call(m[b].context,d,h);break;case 4:m[b].fn.call(m[b].context,d,h,f);break;default:if(!x)for(w=1,x=new Array(v-1);w<v;w++)x[w-1]=arguments[w];m[b].fn.apply(m[b].context,x)}}return!0},o.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,f){var p=t?t+u:u;if(!this._events[p])return this;if(!d)return s(this,p),this;var y=this._events[p];if(y.fn)y.fn===d&&(!f||y.once)&&(!h||y.context===h)&&s(this,p);else{for(var g=0,m=[],v=y.length;g<v;g++)(y[g].fn!==d||f&&!y[g].once||h&&y[g].context!==h)&&m.push(y[g]);m.length?this._events[p]=m.length===1?m[0]:m:s(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=t?t+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o})(v2)),v2.exports}var Jce=Xce();const Zce=It(Jce);var x2=new Zce,b2="recharts.syncMouseEvents";function qh(n){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(n)}function Qce(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function eue(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,$9(r.key),r)}}function tue(n,e,t){return e&&eue(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function w2(n,e,t){return e=$9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $9(n){var e=nue(n,"string");return qh(e)=="symbol"?e:e+""}function nue(n,e){if(qh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(qh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var rue=(function(){function n(){Qce(this,n),w2(this,"activeIndex",0),w2(this,"coordinateList",[]),w2(this,"layout","horizontal")}return tue(n,[{key:"setDetails",value:function(t){var r,i=t.coordinateList,a=i===void 0?null:i,s=t.container,o=s===void 0?null:s,c=t.layout,u=c===void 0?null:c,d=t.offset,h=d===void 0?null:d,f=t.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((t=window)===null||t===void 0?void 0:t.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+c+u,f=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])})();function iue(n,e,t){if(t==="number"&&e===!0&&Array.isArray(n)){var r=n?.[0],i=n?.[1];if(r&&i&&Fe(r)&&Fe(i))return!0}return!1}function aue(n,e,t,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-i:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-i,width:n==="horizontal"?r:t.width-1,height:n==="horizontal"?t.height-1:r}}function z9(n){var e=n.cx,t=n.cy,r=n.radius,i=n.startAngle,a=n.endAngle,s=an(e,t,r,i),o=an(e,t,r,a);return{points:[s,o],cx:e,cy:t,radius:r,startAngle:i,endAngle:a}}function sue(n,e,t){var r,i,a,s;if(n==="horizontal")r=e.x,a=r,i=t.top,s=t.top+t.height;else if(n==="vertical")i=e.y,s=i,r=t.left,a=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(n==="centric"){var o=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,h=e.angle,f=an(o,c,u,h),p=an(o,c,d,h);r=f.x,i=f.y,a=p.x,s=p.y}else return z9(e);return[{x:r,y:i},{x:a,y:s}]}function Wh(n){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wh(n)}function sO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Jf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sO(Object(t),!0).forEach(function(r){oue(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):sO(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function oue(n,e,t){return e=lue(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lue(n){var e=cue(n,"string");return Wh(e)=="symbol"?e:e+""}function cue(n,e){if(Wh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Wh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function uue(n){var e,t,r=n.element,i=n.tooltipEventType,a=n.isActive,s=n.activeCoordinate,o=n.activePayload,c=n.offset,u=n.activeTooltipIndex,d=n.tooltipAxisBandSize,h=n.layout,f=n.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(t=r.type.defaultProps)===null||t===void 0?void 0:t.cursor;if(!r||!p||!a||!s||f!=="ScatterChart"&&i!=="axis")return null;var y,g=Sc;if(f==="ScatterChart")y=s,g=Mae;else if(f==="BarChart")y=aue(h,s,c,d),g=F_;else if(h==="radial"){var m=z9(s),v=m.cx,x=m.cy,b=m.radius,A=m.startAngle,w=m.endAngle;y={cx:v,cy:x,startAngle:A,endAngle:w,innerRadius:b,outerRadius:b},g=BF}else y={points:sue(h,s,c)},g=Sc;var S=Jf(Jf(Jf(Jf({stroke:"#ccc",pointerEvents:"none"},c),y),lt(p,!1)),{},{payload:o,payloadIndex:u,className:wt("recharts-tooltip-cursor",p.className)});return M.isValidElement(p)?M.cloneElement(p,S):M.createElement(g,S)}var due=["item"],hue=["children","className","width","height","style","compact","title","desc"];function pu(n){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pu(n)}function pc(){return pc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pc.apply(this,arguments)}function oO(n,e){return mue(n)||pue(n,e)||W9(n,e)||fue()}function fue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pue(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(c=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function mue(n){if(Array.isArray(n))return n}function lO(n,e){if(n==null)return{};var t=gue(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function gue(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function yue(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function vue(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,H9(r.key),r)}}function xue(n,e,t){return e&&vue(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function bue(n,e,t){return e=wg(e),wue(n,q9()?Reflect.construct(e,t||[],wg(n).constructor):e.apply(n,t))}function wue(n,e){if(e&&(pu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aue(n)}function Aue(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function q9(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q9=function(){return!!n})()}function wg(n){return wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wg(n)}function Sue(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&RS(n,e)}function RS(n,e){return RS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RS(n,e)}function mu(n){return Due(n)||_ue(n)||W9(n)||Eue()}function Eue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W9(n,e){if(n){if(typeof n=="string")return MS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return MS(n,e)}}function _ue(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Due(n){if(Array.isArray(n))return MS(n)}function MS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function cO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function je(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cO(Object(t),!0).forEach(function(r){ht(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cO(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ht(n,e,t){return e=H9(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function H9(n){var e=jue(n,"string");return pu(e)=="symbol"?e:e+""}function jue(n,e){if(pu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(pu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Tue={xAxis:["bottom","top"],yAxis:["left","right"]},Cue={width:"100%",height:"100%"},V9={x:0,y:0};function Zf(n){return n}var Nue=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},kue=function(e,t,r,i){var a=t.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return je(je(je({},i),an(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var c=a.coordinate,u=i.angle;return je(je(je({},i),an(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return V9},u0=function(e,t){var r=t.graphicalItems,i=t.dataStartIndex,a=t.dataEndIndex,s=(r??[]).reduce(function(o,c){var u=c.props.data;return u&&u.length?[].concat(mu(o),mu(u)):o},[]);return s.length>0?s:e&&e.length&&Fe(i)&&Fe(a)?e.slice(i,a+1):[]};function G9(n){return n==="number"?[0,"auto"]:void 0}var FS=function(e,t,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=u0(t,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:t;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(s.dataKey&&!s.allowDuplicatedCategory){var p=h===void 0?o:h;f=Em(p,s.dataKey,i)}else f=h&&h[r]||o[r];return f?[].concat(mu(c),[IF(u,f)]):c},[])},uO=function(e,t,r,i){var a=i||{x:e.chartX,y:e.chartY},s=Nue(a,r),o=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=ine(s,o,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,f=FS(e,t,d,h),p=kue(r,o,d,a);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:p}}return null},Oue=function(e,t){var r=t.axes,i=t.graphicalItems,a=t.axisType,s=t.axisIdKey,o=t.stackGroups,c=t.dataStartIndex,u=t.dataEndIndex,d=e.layout,h=e.children,f=e.stackOffset,p=TF(d,a);return r.reduce(function(y,g){var m,v=g.type.defaultProps!==void 0?je(je({},g.type.defaultProps),g.props):g.props,x=v.type,b=v.dataKey,A=v.allowDataOverflow,w=v.allowDuplicatedCategory,S=v.scale,E=v.ticks,_=v.includeHidden,D=v[s];if(y[D])return y;var C=u0(e.data,{graphicalItems:i.filter(function(L){var U,G=s in L.props?L.props[s]:(U=L.type.defaultProps)===null||U===void 0?void 0:U[s];return G===D}),dataStartIndex:c,dataEndIndex:u}),k=C.length,T,N,j;iue(v.domain,A,x)&&(T=JA(v.domain,null,A),p&&(x==="number"||S!=="auto")&&(j=qd(C,b,"category")));var R=G9(x);if(!T||T.length===0){var P,F=(P=v.domain)!==null&&P!==void 0?P:R;if(b){if(T=qd(C,b,x),x==="category"&&p){var q=ZG(T);w&&q?(N=T,T=lg(0,k)):w||(T=fk(F,T,g).reduce(function(L,U){return L.indexOf(U)>=0?L:[].concat(mu(L),[U])},[]))}else if(x==="category")w?T=T.filter(function(L){return L!==""&&!xt(L)}):T=fk(F,T,g).reduce(function(L,U){return L.indexOf(U)>=0||U===""||xt(U)?L:[].concat(mu(L),[U])},[]);else if(x==="number"){var $=cne(C,i.filter(function(L){var U,G,H=s in L.props?L.props[s]:(U=L.type.defaultProps)===null||U===void 0?void 0:U[s],V="hide"in L.props?L.props.hide:(G=L.type.defaultProps)===null||G===void 0?void 0:G.hide;return H===D&&(_||!V)}),b,a,d);$&&(T=$)}p&&(x==="number"||S!=="auto")&&(j=qd(C,b,"category"))}else p?T=lg(0,k):o&&o[D]&&o[D].hasStack&&x==="number"?T=f==="expand"?[0,1]:PF(o[D].stackGroups,c,u):T=jF(C,i.filter(function(L){var U=s in L.props?L.props[s]:L.type.defaultProps[s],G="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return U===D&&(_||!G)}),x,d,!0);if(x==="number")T=IS(h,T,D,a,E),F&&(T=JA(F,T,A));else if(x==="category"&&F){var B=F,I=T.every(function(L){return B.indexOf(L)>=0});I&&(T=B)}}return je(je({},y),{},ht({},D,je(je({},v),{},{axisType:a,domain:T,categoricalDomain:j,duplicateDomain:N,originalDomain:(m=v.domain)!==null&&m!==void 0?m:R,isCategorical:p,layout:d})))},{})},Pue=function(e,t){var r=t.graphicalItems,i=t.Axis,a=t.axisType,s=t.axisIdKey,o=t.stackGroups,c=t.dataStartIndex,u=t.dataEndIndex,d=e.layout,h=e.children,f=u0(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),p=f.length,y=TF(d,a),g=-1;return r.reduce(function(m,v){var x=v.type.defaultProps!==void 0?je(je({},v.type.defaultProps),v.props):v.props,b=x[s],A=G9("number");if(!m[b]){g++;var w;return y?w=lg(0,p):o&&o[b]&&o[b].hasStack?(w=PF(o[b].stackGroups,c,u),w=IS(h,w,b,a)):(w=JA(A,jF(f,r.filter(function(S){var E,_,D=s in S.props?S.props[s]:(E=S.type.defaultProps)===null||E===void 0?void 0:E[s],C="hide"in S.props?S.props.hide:(_=S.type.defaultProps)===null||_===void 0?void 0:_.hide;return D===b&&!C}),"number",d),i.defaultProps.allowDataOverflow),w=IS(h,w,b,a)),je(je({},m),{},ht({},b,je(je({axisType:a},i.defaultProps),{},{hide:!0,orientation:xi(Tue,"".concat(a,".").concat(g%2),null),domain:w,originalDomain:A,isCategorical:y,layout:d})))}return m},{})},Iue=function(e,t){var r=t.axisType,i=r===void 0?"xAxis":r,a=t.AxisComp,s=t.graphicalItems,o=t.stackGroups,c=t.dataStartIndex,u=t.dataEndIndex,d=e.children,h="".concat(i,"Id"),f=zi(d,a),p={};return f&&f.length?p=Oue(e,{axes:f,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(p=Pue(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:c,dataEndIndex:u})),p},Rue=function(e){var t=Bs(e),r=cs(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:u_(r,function(i){return i.coordinate}),tooltipAxis:t,tooltipAxisBandSize:Km(t,r)}},dO=function(e){var t=e.children,r=e.defaultShowTooltip,i=di(t,ru),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},Mue=function(e){return!e||!e.length?!1:e.some(function(t){var r=ds(t&&t.type);return r&&r.indexOf("Bar")>=0})},hO=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Fue=function(e,t){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,c=o===void 0?{}:o,u=r.width,d=r.height,h=r.children,f=r.margin||{},p=di(h,ru),y=di(h,Js),g=Object.keys(c).reduce(function(w,S){var E=c[S],_=E.orientation;return!E.mirror&&!E.hide?je(je({},w),{},ht({},_,w[_]+E.width)):w},{left:f.left||0,right:f.right||0}),m=Object.keys(s).reduce(function(w,S){var E=s[S],_=E.orientation;return!E.mirror&&!E.hide?je(je({},w),{},ht({},_,xi(w,"".concat(_))+E.height)):w},{top:f.top||0,bottom:f.bottom||0}),v=je(je({},m),g),x=v.bottom;p&&(v.bottom+=p.props.height||ru.defaultProps.height),y&&t&&(v=one(v,i,r,t));var b=u-v.left-v.right,A=d-v.top-v.bottom;return je(je({brushBottom:x},v),{},{width:Math.max(b,0),height:Math.max(A,0)})},Lue=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},G_=function(e){var t=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,f=function(v,x){var b=x.graphicalItems,A=x.stackGroups,w=x.offset,S=x.updateId,E=x.dataStartIndex,_=x.dataEndIndex,D=v.barSize,C=v.layout,k=v.barGap,T=v.barCategoryGap,N=v.maxBarSize,j=hO(C),R=j.numericAxisName,P=j.cateAxisName,F=Mue(b),q=[];return b.forEach(function($,B){var I=u0(v.data,{graphicalItems:[$],dataStartIndex:E,dataEndIndex:_}),L=$.type.defaultProps!==void 0?je(je({},$.type.defaultProps),$.props):$.props,U=L.dataKey,G=L.maxBarSize,H=L["".concat(R,"Id")],V=L["".concat(P,"Id")],K={},ae=c.reduce(function(le,ee){var ne=x["".concat(ee.axisType,"Map")],oe=L["".concat(ee.axisType,"Id")];ne&&ne[oe]||ee.axisType==="zAxis"||yl();var pe=ne[oe];return je(je({},le),{},ht(ht({},ee.axisType,pe),"".concat(ee.axisType,"Ticks"),cs(pe)))},K),te=ae[P],de=ae["".concat(P,"Ticks")],xe=A&&A[H]&&A[H].hasStack&&vne($,A[H].stackGroups),ve=ds($.type).indexOf("Bar")>=0,Te=Km(te,de),O=[],ie=F&&ane({barSize:D,stackGroups:A,totalSize:Lue(ae,P)});if(ve){var re,Z,z=xt(G)?N:G,X=(re=(Z=Km(te,de,!0))!==null&&Z!==void 0?Z:z)!==null&&re!==void 0?re:0;O=sne({barGap:k,barCategoryGap:T,bandSize:X!==Te?X:Te,sizeList:ie[V],maxBarSize:z}),X!==Te&&(O=O.map(function(le){return je(je({},le),{},{position:je(je({},le.position),{},{offset:le.position.offset-X/2})})}))}var ue=$&&$.type&&$.type.getComposedData;ue&&q.push({props:je(je({},ue(je(je({},ae),{},{displayedData:I,props:v,dataKey:U,item:$,bandSize:Te,barPosition:O,offset:w,stackedData:xe,layout:C,dataStartIndex:E,dataEndIndex:_}))),{},ht(ht(ht({key:$.key||"item-".concat(B)},R,ae[R]),P,ae[P]),"animationId",S)),childIndex:dY($,v.children),item:$})}),q},p=function(v,x){var b=v.props,A=v.dataStartIndex,w=v.dataEndIndex,S=v.updateId;if(!j3({props:b}))return null;var E=b.children,_=b.layout,D=b.stackOffset,C=b.data,k=b.reverseStackOrder,T=hO(_),N=T.numericAxisName,j=T.cateAxisName,R=zi(E,r),P=gne(C,R,"".concat(N,"Id"),"".concat(j,"Id"),D,k),F=c.reduce(function(L,U){var G="".concat(U.axisType,"Map");return je(je({},L),{},ht({},G,Iue(b,je(je({},U),{},{graphicalItems:R,stackGroups:U.axisType===N&&P,dataStartIndex:A,dataEndIndex:w}))))},{}),q=Fue(je(je({},F),{},{props:b,graphicalItems:R}),x?.legendBBox);Object.keys(F).forEach(function(L){F[L]=d(b,F[L],q,L.replace("Map",""),t)});var $=F["".concat(j,"Map")],B=Rue($),I=f(b,je(je({},F),{},{dataStartIndex:A,dataEndIndex:w,updateId:S,graphicalItems:R,stackGroups:P,offset:q}));return je(je({formattedGraphicalItems:I,graphicalItems:R,offset:q,stackGroups:P},B),F)},y=(function(m){function v(x){var b,A,w;return yue(this,v),w=bue(this,v,[x]),ht(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ht(w,"accessibilityManager",new rue),ht(w,"handleLegendBBoxUpdate",function(S){if(S){var E=w.state,_=E.dataStartIndex,D=E.dataEndIndex,C=E.updateId;w.setState(je({legendBBox:S},p({props:w.props,dataStartIndex:_,dataEndIndex:D,updateId:C},je(je({},w.state),{},{legendBBox:S}))))}}),ht(w,"handleReceiveSyncEvent",function(S,E,_){if(w.props.syncId===S){if(_===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(E)}}),ht(w,"handleBrushChange",function(S){var E=S.startIndex,_=S.endIndex;if(E!==w.state.dataStartIndex||_!==w.state.dataEndIndex){var D=w.state.updateId;w.setState(function(){return je({dataStartIndex:E,dataEndIndex:_},p({props:w.props,dataStartIndex:E,dataEndIndex:_,updateId:D},w.state))}),w.triggerSyncEvent({dataStartIndex:E,dataEndIndex:_})}}),ht(w,"handleMouseEnter",function(S){var E=w.getMouseInfo(S);if(E){var _=je(je({},E),{},{isTooltipActive:!0});w.setState(_),w.triggerSyncEvent(_);var D=w.props.onMouseEnter;ft(D)&&D(_,S)}}),ht(w,"triggeredAfterMouseMove",function(S){var E=w.getMouseInfo(S),_=E?je(je({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(_),w.triggerSyncEvent(_);var D=w.props.onMouseMove;ft(D)&&D(_,S)}),ht(w,"handleItemMouseEnter",function(S){w.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),ht(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),ht(w,"handleMouseMove",function(S){S.persist(),w.throttleTriggeredAfterMouseMove(S)}),ht(w,"handleMouseLeave",function(S){w.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var _=w.props.onMouseLeave;ft(_)&&_(E,S)}),ht(w,"handleOuterEvent",function(S){var E=uY(S),_=xi(w.props,"".concat(E));if(E&&ft(_)){var D,C;/.*touch.*/i.test(E)?C=w.getMouseInfo(S.changedTouches[0]):C=w.getMouseInfo(S),_((D=C)!==null&&D!==void 0?D:{},S)}}),ht(w,"handleClick",function(S){var E=w.getMouseInfo(S);if(E){var _=je(je({},E),{},{isTooltipActive:!0});w.setState(_),w.triggerSyncEvent(_);var D=w.props.onClick;ft(D)&&D(_,S)}}),ht(w,"handleMouseDown",function(S){var E=w.props.onMouseDown;if(ft(E)){var _=w.getMouseInfo(S);E(_,S)}}),ht(w,"handleMouseUp",function(S){var E=w.props.onMouseUp;if(ft(E)){var _=w.getMouseInfo(S);E(_,S)}}),ht(w,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),ht(w,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseDown(S.changedTouches[0])}),ht(w,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseUp(S.changedTouches[0])}),ht(w,"handleDoubleClick",function(S){var E=w.props.onDoubleClick;if(ft(E)){var _=w.getMouseInfo(S);E(_,S)}}),ht(w,"handleContextMenu",function(S){var E=w.props.onContextMenu;if(ft(E)){var _=w.getMouseInfo(S);E(_,S)}}),ht(w,"triggerSyncEvent",function(S){w.props.syncId!==void 0&&x2.emit(b2,w.props.syncId,S,w.eventEmitterSymbol)}),ht(w,"applySyncEvent",function(S){var E=w.props,_=E.layout,D=E.syncMethod,C=w.state.updateId,k=S.dataStartIndex,T=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)w.setState(je({dataStartIndex:k,dataEndIndex:T},p({props:w.props,dataStartIndex:k,dataEndIndex:T,updateId:C},w.state)));else if(S.activeTooltipIndex!==void 0){var N=S.chartX,j=S.chartY,R=S.activeTooltipIndex,P=w.state,F=P.offset,q=P.tooltipTicks;if(!F)return;if(typeof D=="function")R=D(q,S);else if(D==="value"){R=-1;for(var $=0;$<q.length;$++)if(q[$].value===S.activeLabel){R=$;break}}var B=je(je({},F),{},{x:F.left,y:F.top}),I=Math.min(N,B.x+B.width),L=Math.min(j,B.y+B.height),U=q[R]&&q[R].value,G=FS(w.state,w.props.data,R),H=q[R]?{x:_==="horizontal"?q[R].coordinate:I,y:_==="horizontal"?L:q[R].coordinate}:V9;w.setState(je(je({},S),{},{activeLabel:U,activeCoordinate:H,activePayload:G,activeTooltipIndex:R}))}else w.setState(S)}),ht(w,"renderCursor",function(S){var E,_=w.state,D=_.isTooltipActive,C=_.activeCoordinate,k=_.activePayload,T=_.offset,N=_.activeTooltipIndex,j=_.tooltipAxisBandSize,R=w.getTooltipEventType(),P=(E=S.props.active)!==null&&E!==void 0?E:D,F=w.props.layout,q=S.key||"_recharts-cursor";return fe.createElement(uue,{key:q,activeCoordinate:C,activePayload:k,activeTooltipIndex:N,chartName:t,element:S,isActive:P,layout:F,offset:T,tooltipAxisBandSize:j,tooltipEventType:R})}),ht(w,"renderPolarAxis",function(S,E,_){var D=xi(S,"type.axisType"),C=xi(w.state,"".concat(D,"Map")),k=S.type.defaultProps,T=k!==void 0?je(je({},k),S.props):S.props,N=C&&C[T["".concat(D,"Id")]];return M.cloneElement(S,je(je({},N),{},{className:wt(D,N.className),key:S.key||"".concat(E,"-").concat(_),ticks:cs(N,!0)}))}),ht(w,"renderPolarGrid",function(S){var E=S.props,_=E.radialLines,D=E.polarAngles,C=E.polarRadius,k=w.state,T=k.radiusAxisMap,N=k.angleAxisMap,j=Bs(T),R=Bs(N),P=R.cx,F=R.cy,q=R.innerRadius,$=R.outerRadius;return M.cloneElement(S,{polarAngles:Array.isArray(D)?D:cs(R,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(C)?C:cs(j,!0).map(function(B){return B.coordinate}),cx:P,cy:F,innerRadius:q,outerRadius:$,key:S.key||"polar-grid",radialLines:_})}),ht(w,"renderLegend",function(){var S=w.state.formattedGraphicalItems,E=w.props,_=E.children,D=E.width,C=E.height,k=w.props.margin||{},T=D-(k.left||0)-(k.right||0),N=_F({children:_,formattedGraphicalItems:S,legendWidth:T,legendContent:u});if(!N)return null;var j=N.item,R=lO(N,due);return M.cloneElement(j,je(je({},R),{},{chartWidth:D,chartHeight:C,margin:k,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),ht(w,"renderTooltip",function(){var S,E=w.props,_=E.children,D=E.accessibilityLayer,C=di(_,hi);if(!C)return null;var k=w.state,T=k.isTooltipActive,N=k.activeCoordinate,j=k.activePayload,R=k.activeLabel,P=k.offset,F=(S=C.props.active)!==null&&S!==void 0?S:T;return M.cloneElement(C,{viewBox:je(je({},P),{},{x:P.left,y:P.top}),active:F,label:R,payload:F?j:[],coordinate:N,accessibilityLayer:D})}),ht(w,"renderBrush",function(S){var E=w.props,_=E.margin,D=E.data,C=w.state,k=C.offset,T=C.dataStartIndex,N=C.dataEndIndex,j=C.updateId;return M.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Gf(w.handleBrushChange,S.props.onChange),data:D,x:Fe(S.props.x)?S.props.x:k.left,y:Fe(S.props.y)?S.props.y:k.top+k.height+k.brushBottom-(_.bottom||0),width:Fe(S.props.width)?S.props.width:k.width,startIndex:T,endIndex:N,updateId:"brush-".concat(j)})}),ht(w,"renderReferenceElement",function(S,E,_){if(!S)return null;var D=w,C=D.clipPathId,k=w.state,T=k.xAxisMap,N=k.yAxisMap,j=k.offset,R=S.type.defaultProps||{},P=S.props,F=P.xAxisId,q=F===void 0?R.xAxisId:F,$=P.yAxisId,B=$===void 0?R.yAxisId:$;return M.cloneElement(S,{key:S.key||"".concat(E,"-").concat(_),xAxis:T[q],yAxis:N[B],viewBox:{x:j.left,y:j.top,width:j.width,height:j.height},clipPathId:C})}),ht(w,"renderActivePoints",function(S){var E=S.item,_=S.activePoint,D=S.basePoint,C=S.childIndex,k=S.isRange,T=[],N=E.props.key,j=E.item.type.defaultProps!==void 0?je(je({},E.item.type.defaultProps),E.item.props):E.item.props,R=j.activeDot,P=j.dataKey,F=je(je({index:C,dataKey:P,cx:_.x,cy:_.y,r:4,fill:M_(E.item),strokeWidth:2,stroke:"#fff",payload:_.payload,value:_.value},lt(R,!1)),_m(R));return T.push(v.renderActiveDot(R,F,"".concat(N,"-activePoint-").concat(C))),D?T.push(v.renderActiveDot(R,je(je({},F),{},{cx:D.x,cy:D.y}),"".concat(N,"-basePoint-").concat(C))):k&&T.push(null),T}),ht(w,"renderGraphicChild",function(S,E,_){var D=w.filterFormatItem(S,E,_);if(!D)return null;var C=w.getTooltipEventType(),k=w.state,T=k.isTooltipActive,N=k.tooltipAxis,j=k.activeTooltipIndex,R=k.activeLabel,P=w.props.children,F=di(P,hi),q=D.props,$=q.points,B=q.isRange,I=q.baseLine,L=D.item.type.defaultProps!==void 0?je(je({},D.item.type.defaultProps),D.item.props):D.item.props,U=L.activeDot,G=L.hide,H=L.activeBar,V=L.activeShape,K=!!(!G&&T&&F&&(U||H||V)),ae={};C!=="axis"&&F&&F.props.trigger==="click"?ae={onClick:Gf(w.handleItemMouseEnter,S.props.onClick)}:C!=="axis"&&(ae={onMouseLeave:Gf(w.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Gf(w.handleItemMouseEnter,S.props.onMouseEnter)});var te=M.cloneElement(S,je(je({},D.props),ae));function de(ee){return typeof N.dataKey=="function"?N.dataKey(ee.payload):null}if(K)if(j>=0){var xe,ve;if(N.dataKey&&!N.allowDuplicatedCategory){var Te=typeof N.dataKey=="function"?de:"payload.".concat(N.dataKey.toString());xe=Em($,Te,R),ve=B&&I&&Em(I,Te,R)}else xe=$?.[j],ve=B&&I&&I[j];if(V||H){var O=S.props.activeIndex!==void 0?S.props.activeIndex:j;return[M.cloneElement(S,je(je(je({},D.props),ae),{},{activeIndex:O})),null,null]}if(!xt(xe))return[te].concat(mu(w.renderActivePoints({item:D,activePoint:xe,basePoint:ve,childIndex:j,isRange:B})))}else{var ie,re=(ie=w.getItemByXY(w.state.activeCoordinate))!==null&&ie!==void 0?ie:{graphicalItem:te},Z=re.graphicalItem,z=Z.item,X=z===void 0?S:z,ue=Z.childIndex,le=je(je(je({},D.props),ae),{},{activeIndex:ue});return[M.cloneElement(X,le),null,null]}return B?[te,null,null]:[te,null]}),ht(w,"renderCustomized",function(S,E,_){return M.cloneElement(S,je(je({key:"recharts-customized-".concat(_)},w.props),w.state))}),ht(w,"renderMap",{CartesianGrid:{handler:Zf,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Zf},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Zf},YAxis:{handler:Zf},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((b=x.id)!==null&&b!==void 0?b:Nu("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=SM(w.triggeredAfterMouseMove,(A=x.throttleDelay)!==null&&A!==void 0?A:1e3/60),w.state={},w}return Sue(v,m),xue(v,[{key:"componentDidMount",value:function(){var b,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,A=b.children,w=b.data,S=b.height,E=b.layout,_=di(A,hi);if(_){var D=_.props.defaultIndex;if(!(typeof D!="number"||D<0||D>this.state.tooltipTicks.length-1)){var C=this.state.tooltipTicks[D]&&this.state.tooltipTicks[D].value,k=FS(this.state,w,D,C),T=this.state.tooltipTicks[D].coordinate,N=(this.state.offset.top+S)/2,j=E==="horizontal",R=j?{x:T,y:N}:{y:T,x:N},P=this.state.formattedGraphicalItems.find(function(q){var $=q.item;return $.type.name==="Scatter"});P&&(R=je(je({},R),P.props.points[D].tooltipPosition),k=P.props.points[D].tooltipPayload);var F={activeTooltipIndex:D,isTooltipActive:!0,activeLabel:C,activePayload:k,activeCoordinate:R};this.setState(F),this.renderCursor(_),this.accessibilityManager.setIndex(D)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var w,S;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(b){xA([di(b.children,hi)],[di(this.props.children,hi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=di(this.props.children,hi);if(b&&typeof b.props.shared=="boolean"){var A=b.props.shared?"axis":"item";return o.indexOf(A)>=0?A:a}return a}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var A=this.container,w=A.getBoundingClientRect(),S=JJ(w),E={chartX:Math.round(b.pageX-S.left),chartY:Math.round(b.pageY-S.top)},_=w.width/A.offsetWidth||1,D=this.inRange(E.chartX,E.chartY,_);if(!D)return null;var C=this.state,k=C.xAxisMap,T=C.yAxisMap,N=this.getTooltipEventType(),j=uO(this.state,this.props.data,this.props.layout,D);if(N!=="axis"&&k&&T){var R=Bs(k).scale,P=Bs(T).scale,F=R&&R.invert?R.invert(E.chartX):null,q=P&&P.invert?P.invert(E.chartY):null;return je(je({},E),{},{xValue:F,yValue:q},j)}return j?je(je({},E),j):null}},{key:"inRange",value:function(b,A){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,E=b/w,_=A/w;if(S==="horizontal"||S==="vertical"){var D=this.state.offset,C=E>=D.left&&E<=D.left+D.width&&_>=D.top&&_<=D.top+D.height;return C?{x:E,y:_}:null}var k=this.state,T=k.angleAxisMap,N=k.radiusAxisMap;if(T&&N){var j=Bs(T);return gk({x:E,y:_},j)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,A=this.getTooltipEventType(),w=di(b,hi),S={};w&&A==="axis"&&(w.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=_m(this.props,this.handleOuterEvent);return je(je({},E),S)}},{key:"addListener",value:function(){x2.on(b2,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){x2.removeListener(b2,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,A,w){for(var S=this.state.formattedGraphicalItems,E=0,_=S.length;E<_;E++){var D=S[E];if(D.item===b||D.props.key===b.key||A===ds(D.item.type)&&w===D.childIndex)return D}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,A=this.state.offset,w=A.left,S=A.top,E=A.height,_=A.width;return fe.createElement("defs",null,fe.createElement("clipPath",{id:b},fe.createElement("rect",{x:w,y:S,height:E,width:_})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(A,w){var S=oO(w,2),E=S[0],_=S[1];return je(je({},A),{},ht({},E,_.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(A,w){var S=oO(w,2),E=S[0],_=S[1];return je(je({},A),{},ht({},E,_.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[b])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(b){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[b])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(b){var A=this.state,w=A.formattedGraphicalItems,S=A.activeItem;if(w&&w.length)for(var E=0,_=w.length;E<_;E++){var D=w[E],C=D.props,k=D.item,T=k.type.defaultProps!==void 0?je(je({},k.type.defaultProps),k.props):k.props,N=ds(k.type);if(N==="Bar"){var j=(C.data||[]).find(function(q){return gae(b,q)});if(j)return{graphicalItem:D,payload:j}}else if(N==="RadialBar"){var R=(C.data||[]).find(function(q){return gk(b,q)});if(R)return{graphicalItem:D,payload:R}}else if(r0(D,S)||i0(D,S)||Lh(D,S)){var P=Use({graphicalItem:D,activeTooltipItem:S,itemData:T.data}),F=T.activeIndex===void 0?P:T.activeIndex;return{graphicalItem:je(je({},D),{},{childIndex:F}),payload:Lh(D,S)?T.data[P]:D.props.data[P]}}}return null}},{key:"render",value:function(){var b=this;if(!j3(this))return null;var A=this.props,w=A.children,S=A.className,E=A.width,_=A.height,D=A.style,C=A.compact,k=A.title,T=A.desc,N=lO(A,hue),j=lt(N,!1);if(C)return fe.createElement(q6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},fe.createElement(wA,pc({},j,{width:E,height:_,title:k,desc:T}),this.renderClipPath(),C3(w,this.renderMap)));if(this.props.accessibilityLayer){var R,P;j.tabIndex=(R=this.props.tabIndex)!==null&&R!==void 0?R:0,j.role=(P=this.props.role)!==null&&P!==void 0?P:"application",j.onKeyDown=function(q){b.accessibilityManager.keyboardEvent(q)},j.onFocus=function(){b.accessibilityManager.focus()}}var F=this.parseEventsOfWrapper();return fe.createElement(q6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},fe.createElement("div",pc({className:wt("recharts-wrapper",S),style:je({position:"relative",cursor:"default",width:E,height:_},D)},F,{ref:function($){b.container=$}}),fe.createElement(wA,pc({},j,{width:E,height:_,title:k,desc:T,style:Cue}),this.renderClipPath(),C3(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(M.Component);ht(y,"displayName",t),ht(y,"defaultProps",je({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),ht(y,"getDerivedStateFromProps",function(m,v){var x=m.dataKey,b=m.data,A=m.children,w=m.width,S=m.height,E=m.layout,_=m.stackOffset,D=m.margin,C=v.dataStartIndex,k=v.dataEndIndex;if(v.updateId===void 0){var T=dO(m);return je(je(je({},T),{},{updateId:0},p(je(je({props:m},T),{},{updateId:0}),v)),{},{prevDataKey:x,prevData:b,prevWidth:w,prevHeight:S,prevLayout:E,prevStackOffset:_,prevMargin:D,prevChildren:A})}if(x!==v.prevDataKey||b!==v.prevData||w!==v.prevWidth||S!==v.prevHeight||E!==v.prevLayout||_!==v.prevStackOffset||!bc(D,v.prevMargin)){var N=dO(m),j={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},R=je(je({},uO(v,b,E)),{},{updateId:v.updateId+1}),P=je(je(je({},N),j),R);return je(je(je({},P),p(je({props:m},P),v)),{},{prevDataKey:x,prevData:b,prevWidth:w,prevHeight:S,prevLayout:E,prevStackOffset:_,prevMargin:D,prevChildren:A})}if(!xA(A,v.prevChildren)){var F,q,$,B,I=di(A,ru),L=I&&(F=(q=I.props)===null||q===void 0?void 0:q.startIndex)!==null&&F!==void 0?F:C,U=I&&($=(B=I.props)===null||B===void 0?void 0:B.endIndex)!==null&&$!==void 0?$:k,G=L!==C||U!==k,H=!xt(b),V=H&&!G?v.updateId:v.updateId+1;return je(je({updateId:V},p(je(je({props:m},v),{},{updateId:V,dataStartIndex:L,dataEndIndex:U}),v)),{},{prevChildren:A,dataStartIndex:L,dataEndIndex:U})}return null}),ht(y,"renderActiveDot",function(m,v,x){var b;return M.isValidElement(m)?b=M.cloneElement(m,v):ft(m)?b=m(v):b=fe.createElement(Zy,v),fe.createElement(Ot,{className:"recharts-active-dot",key:x},b)});var g=M.forwardRef(function(v,x){return fe.createElement(y,pc({},v,{ref:x}))});return g.displayName=y.displayName,g},Uue=G_({chartName:"BarChart",GraphicalChild:Il,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:du},{axisType:"yAxis",AxisComp:fu}],formatAxisMap:d9}),fO=G_({chartName:"PieChart",GraphicalChild:Ua,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:n0},{axisType:"radiusAxis",AxisComp:e0}],formatAxisMap:Tne,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Bue=G_({chartName:"AreaChart",GraphicalChild:vo,axisComponents:[{axisType:"xAxis",AxisComp:du},{axisType:"yAxis",AxisComp:fu}],formatAxisMap:d9});const $ue=()=>{const{t:n,language:e}=Ze(),{width:t}=AR(),[r,i]=M.useState(!0),[a,s]=M.useState(null),[o,c]=M.useState({activeClients:0,totalClients:0,activeConsultants:0,totalConsultants:0,completedSessions:0,totalSessions:0,pendingSessions:0,confirmedSessions:0,monthlyRevenue:0,totalRevenue:0,lastMonthRevenue:0,revenueGrowth:0,averageRating:0,totalRatings:0,cancelledSessions:0,totalBookings:0,totalServices:0,activeServices:0,totalArticles:0,publishedArticles:0,totalPayments:0,pendingPayments:0,totalReports:0,monthlyRevenueData:[],sessionsByStatus:[],topConsultants:[],recentBookings:[]});M.useEffect(()=>{u()},[]);const u=async()=>{try{i(!0),s(null);const m=await jt.getDashboardStats();c(m.stats)}catch(m){console.error("Error fetching dashboard stats:",m),s(m.message||"Failed to load dashboard data")}finally{i(!1)}},d=({title:m,value:v,icon:x,suffix:b="",prefix:A=null,growth:w=null,delay:S=0,subtitle:E=null})=>l.jsx(Ee,{className:"relative overflow-hidden h-full border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-orange-50/30 to-amber-50/50 hover:shadow-lg transition-all duration-300",style:{animationDelay:`${S}s`},styles:{body:{padding:"clamp(16px, 3vw, 24px)"}},children:l.jsxs("div",{className:"relative z-10",children:[l.jsxs("div",{className:"flex items-start justify-between mb-5",children:[l.jsx("div",{className:"p-3 rounded-xl bg-amber-100/50 border border-amber-200/50",style:{width:"clamp(48px, 8vw, 56px)",height:"clamp(48px, 8vw, 56px)"},children:l.jsx("div",{className:"text-amber-700 text-lg xs:text-xl sm:text-2xl",children:x})}),w!==null&&l.jsxs("div",{className:`flex items-center gap-1 xs:gap-1.5 px-2 xs:px-3 py-1 xs:py-1.5 rounded-lg xs:rounded-xl text-[10px] xs:text-xs font-bold ${w>=0?"bg-amber-100 text-amber-700 border border-amber-200":"bg-orange-100 text-orange-700 border border-orange-200"}`,children:[w>=0?l.jsx(dT,{className:"text-xs xs:text-sm"}):l.jsx(Fq,{className:"text-xs xs:text-sm"}),Math.abs(w).toFixed(1),"%"]})]}),l.jsx(pt,{title:l.jsx("span",{className:"text-amber-900/70 font-semibold text-[10px] xs:text-xs sm:text-sm uppercase tracking-wider",children:m}),value:v,prefix:A,suffix:b,valueStyle:{color:"#92400e",fontWeight:700,fontSize:"clamp(20px, 4vw + 8px, 28px)",lineHeight:1.2,letterSpacing:"-0.01em"}}),E&&l.jsxs("div",{className:"mt-3 xs:mt-4 text-[11px] xs:text-xs sm:text-sm text-amber-800/60 font-medium flex items-center gap-2",children:[l.jsx("div",{className:"w-1 h-1 xs:w-1.5 xs:h-1.5 rounded-full bg-amber-400"}),E]})]})}),h=o.monthlyRevenueData?.length>0?o.monthlyRevenueData.map(m=>({month:m.month,revenue:m.revenue||0})):[{month:e==="ar"?"يناير":"Jan",revenue:5e4},{month:e==="ar"?"فبراير":"Feb",revenue:75e3},{month:e==="ar"?"مارس":"Mar",revenue:6e4},{month:e==="ar"?"أبريل":"Apr",revenue:9e4},{month:e==="ar"?"مايو":"May",revenue:o.monthlyRevenue||85e3}],f=o.sessionsByStatus?.length>0?o.sessionsByStatus.map(m=>({name:e==="ar"?m.status==="COMPLETED"?"مكتملة":m.status==="PENDING"?"معلقة":m.status==="CONFIRMED"?"مؤكدة":m.status==="CANCELLED"?"ملغاة":m.status:m.status,value:m.count,color:m.status==="COMPLETED"?"#52c41a":m.status==="PENDING"?"#faad14":m.status==="CONFIRMED"?"#1890ff":m.status==="CANCELLED"?"#ff4d4f":"#8c8c8c"})):[{name:e==="ar"?"مكتملة":"Completed",value:o.completedSessions,color:"#52c41a"},{name:e==="ar"?"ملغاة":"Cancelled",value:o.cancelledSessions,color:"#ff4d4f"}],p=[{name:e==="ar"?"استشارات":"Consultations",value:35,color:"#14b8a6"},{name:e==="ar"?"دراسات جدوى":"Feasibility",value:25,color:"#7a8c66"},{name:e==="ar"?"تحليلات":"Analysis",value:40,color:"#faad14"}],y=[{title:e==="ar"?"العميل":"Client",dataIndex:"clientName",key:"clientName"},{title:e==="ar"?"المستشار":"Consultant",dataIndex:"consultantName",key:"consultantName"},{title:e==="ar"?"الخدمة":"Service",dataIndex:"serviceName",key:"serviceName"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:m=>{const x={COMPLETED:{color:"green",text:e==="ar"?"مكتملة":"Completed"},PENDING:{color:"orange",text:e==="ar"?"معلقة":"Pending"},CONFIRMED:{color:"blue",text:e==="ar"?"مؤكدة":"Confirmed"},CANCELLED:{color:"red",text:e==="ar"?"ملغاة":"Cancelled"}}[m]||{color:"default",text:m};return l.jsx($e,{color:x.color,children:x.text})}},{title:e==="ar"?"التاريخ":"Date",dataIndex:"scheduledAt",key:"scheduledAt",render:m=>m?qe(m).format("YYYY-MM-DD HH:mm"):"-"}],g=[{title:e==="ar"?"المستشار":"Consultant",dataIndex:"name",key:"name",render:m=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Mt,{icon:l.jsx(tt,{})}),l.jsx("span",{className:"font-medium",children:m})]})},{title:e==="ar"?"الحجوزات":"Bookings",dataIndex:"bookings",key:"bookings",render:m=>l.jsx("span",{className:"font-semibold",children:m})},{title:e==="ar"?"التقييم":"Rating",dataIndex:"rating",key:"rating",render:m=>l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Bc,{className:"text-yellow-500"}),l.jsx("span",{className:"font-semibold",children:m?.toFixed(1)||"0.0"})]})}];return r?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx(kt,{size:"large"})}):a?l.jsx(Fn,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:a,type:"error",showIcon:!0,closable:!0,onClose:()=>s(null)}):l.jsxs("div",{className:"relative min-h-screen pb-8 bg-gradient-to-br from-amber-50 via-orange-50/50 to-amber-50",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-amber-200/30 to-orange-200/30 rounded-full blur-3xl opacity-40 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-orange-200/30 to-amber-200/30 rounded-full blur-3xl opacity-40 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6 mb-10 md:mb-12 relative z-10 px-2 sm:px-0",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"text-2xl xs:text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-black gradient-text-modern mb-3 sm:mb-4 leading-tight",style:{fontSize:"clamp(1.5rem, 4vw + 1rem, 4.5rem)"},children:n("dashboardOverview")}),l.jsx("p",{className:"text-sm xs:text-base sm:text-lg md:text-xl text-gray-600 font-medium max-w-2xl",style:{fontSize:"clamp(0.875rem, 2vw + 0.5rem, 1.25rem)"},children:n("platformPerformance")})]}),l.jsx("div",{className:"text-xs xs:text-sm sm:text-base text-amber-900 bg-amber-100/50 px-3 xs:px-4 sm:px-5 py-2 xs:py-3 sm:py-4 rounded-xl sm:rounded-2xl shadow-md whitespace-nowrap font-semibold border border-amber-200/50",children:l.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[l.jsx("div",{className:"p-1.5 xs:p-2 rounded-lg xs:rounded-xl bg-amber-500 border border-amber-400",children:l.jsx(vn,{className:"text-white text-sm xs:text-base sm:text-lg"})}),l.jsx("span",{className:"text-[10px] xs:text-xs sm:text-sm md:text-base",children:new Date().toLocaleDateString(e==="ar"?"ar-SA":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})})]}),l.jsxs(Re,{gutter:[12,12],className:"mb-4 md:mb-6",children:[l.jsx(me,{xs:12,sm:12,md:8,lg:6,xl:4,children:l.jsx(d,{title:n("activeClients"),value:o.activeClients,icon:l.jsx(tt,{className:"text-base xs:text-lg sm:text-xl md:text-2xl text-amber-700"}),subtitle:n("totalClients")+`: ${o.totalClients}`,delay:.1})}),l.jsx(me,{xs:12,sm:12,md:8,lg:6,xl:4,children:l.jsx(d,{title:n("activeConsultants"),value:o.activeConsultants,icon:l.jsx(Xr,{className:"text-xl sm:text-2xl text-olive-green-600"}),subtitle:n("totalConsultants")+`: ${o.totalConsultants}`,delay:.2})}),l.jsx(me,{xs:12,sm:12,md:8,lg:6,xl:4,children:l.jsx(d,{title:n("completedSessions"),value:o.completedSessions,icon:l.jsx(Zt,{className:"text-xl sm:text-2xl text-teal-500"}),color:"bg-teal-500",subtitle:n("totalSessions")+`: ${o.totalSessions}`,delay:.3})}),l.jsx(me,{xs:12,sm:12,md:8,lg:6,xl:4,children:l.jsx(d,{title:n("monthlyRevenue"),value:o.monthlyRevenue,icon:l.jsx(Yn,{className:"text-xl sm:text-2xl text-olive-green-600"}),suffix:e==="ar"?" ريال":" SAR",growth:o.revenueGrowth,delay:.4})}),l.jsx(me,{xs:12,sm:12,md:8,lg:6,xl:4,children:l.jsx(d,{title:n("averageRating"),value:o.averageRating,icon:l.jsx(Bc,{className:"text-xl sm:text-2xl text-yellow-500"}),suffix:"/ 5",subtitle:n("totalRatings")+`: ${o.totalRatings}`,delay:.5})}),l.jsx(me,{xs:12,sm:12,md:8,lg:6,xl:4,children:l.jsx(d,{title:n("cancelledSessions"),value:o.cancelledSessions,icon:l.jsx(sh,{className:"text-xl sm:text-2xl text-red-500"}),delay:.6})})]}),l.jsxs(Re,{gutter:[12,12],className:"mb-4 md:mb-6",children:[l.jsx(me,{xs:12,sm:12,md:6,lg:4,xl:4,children:l.jsx(d,{title:n("totalServices"),value:o.totalServices,icon:l.jsx(hl,{className:"text-base xs:text-lg sm:text-xl text-blue-500"}),subtitle:n("activeServices")+`: ${o.activeServices}`,delay:.7})}),l.jsx(me,{xs:12,sm:12,md:6,lg:4,xl:4,children:l.jsx(d,{title:n("totalArticles"),value:o.totalArticles,icon:l.jsx(Lc,{className:"text-lg sm:text-xl text-purple-500"}),subtitle:n("publishedArticles")+`: ${o.publishedArticles}`,delay:.8})}),l.jsx(me,{xs:12,sm:12,md:6,lg:4,xl:4,children:l.jsx(d,{title:n("totalPayments"),value:o.totalPayments,icon:l.jsx(FE,{className:"text-lg sm:text-xl text-green-500"}),subtitle:n("pendingPayments")+`: ${o.pendingPayments}`,delay:.9})}),l.jsx(me,{xs:12,sm:12,md:6,lg:4,xl:4,children:l.jsx(d,{title:n("pendingSessions"),value:o.pendingSessions,icon:l.jsx($i,{className:"text-lg sm:text-xl text-orange-500"}),delay:1})}),l.jsx(me,{xs:12,sm:12,md:6,lg:4,xl:4,children:l.jsx(d,{title:n("confirmedSessions"),value:o.confirmedSessions,icon:l.jsx(Zt,{className:"text-lg sm:text-xl text-blue-500"}),delay:1.1})}),l.jsx(me,{xs:12,sm:12,md:6,lg:4,xl:4,children:l.jsx(d,{title:n("totalReports"),value:o.totalReports,icon:l.jsx(Kt,{className:"text-lg sm:text-xl text-indigo-500"}),delay:1.2})})]}),l.jsxs(Re,{gutter:[12,12],className:"mb-4 md:mb-6",children:[l.jsx(me,{xs:24,sm:24,md:24,lg:16,xl:16,children:l.jsx(Ee,{title:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"icon-container-modern bg-gradient-to-br from-olive-green-500 to-turquoise-500",style:{width:"clamp(40px, 8vw, 56px)",height:"clamp(40px, 8vw, 56px)"},children:l.jsx(lh,{className:"text-white text-base xs:text-lg sm:text-xl"})}),l.jsx("span",{className:"text-base xs:text-lg sm:text-xl font-bold text-amber-900",style:{fontSize:"clamp(1rem, 2vw + 0.5rem, 1.25rem)"},children:n("monthlyRevenueTrend")})]}),className:"modern-chart-container border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-white to-amber-50/50",style:{animationDelay:"0.2s"},styles:{body:{padding:"clamp(16px, 4vw, 32px)"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.06)",padding:"clamp(16px, 3vw, 24px) clamp(16px, 4vw, 32px)"}},children:l.jsx(zf,{width:"100%",height:t<640?200:t<1024?250:300,children:l.jsxs(Bue,{data:h,children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"5%",stopColor:"#7a8c66",stopOpacity:.8}),l.jsx("stop",{offset:"95%",stopColor:"#7a8c66",stopOpacity:0})]})}),l.jsx(jS,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),l.jsx(du,{dataKey:"month",stroke:"#6b7280"}),l.jsx(fu,{stroke:"#6b7280"}),l.jsx(hi,{formatter:m=>[`${m} ${e==="ar"?"ريال":"SAR"}`,e==="ar"?"الإيرادات":"Revenue"],contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}),l.jsx(vo,{type:"monotone",dataKey:"revenue",stroke:"#7a8c66",strokeWidth:3,fillOpacity:1,fill:"url(#colorRevenue)"})]})})})}),l.jsx(me,{xs:24,sm:24,md:24,lg:8,xl:8,children:l.jsx(Ee,{title:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"icon-container-modern bg-amber-600 border border-amber-500",children:l.jsx(Zt,{className:"text-white text-xl"})}),l.jsx("span",{className:"text-xl font-bold gradient-text-modern",children:n("sessionsStatus")})]}),className:"modern-chart-container border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-white to-amber-50/50",style:{animationDelay:"0.3s"},styles:{body:{padding:"clamp(16px, 4vw, 32px)"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.06)",padding:"clamp(16px, 3vw, 24px) clamp(16px, 4vw, 32px)"}},children:l.jsx(zf,{width:"100%",height:t<640?200:t<1024?250:300,children:l.jsxs(fO,{children:[l.jsx(Ua,{data:f,cx:"50%",cy:"50%",labelLine:!1,label:({name:m,percent:v})=>`${m}: ${(v*100).toFixed(0)}%`,outerRadius:90,fill:"#8884d8",dataKey:"value",children:f.map((m,v)=>l.jsx(ph,{fill:m.color},`cell-${v}`))}),l.jsx(hi,{})]})})})})]}),l.jsxs(Re,{gutter:[12,12],className:"mb-4 md:mb-6",children:[l.jsx(me,{xs:24,sm:24,md:24,lg:12,xl:12,children:l.jsx(Ee,{title:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"icon-container-modern bg-orange-500 border border-orange-400",children:l.jsx(hl,{className:"text-white text-xl"})}),l.jsx("span",{className:"text-xl font-bold gradient-text-modern",children:n("servicesDistribution")})]}),className:"modern-chart-container border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-white to-amber-50/50",style:{animationDelay:"0.4s"},styles:{body:{padding:"clamp(16px, 4vw, 32px)"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.06)",padding:"clamp(16px, 3vw, 24px) clamp(16px, 4vw, 32px)"}},children:l.jsx(zf,{width:"100%",height:t<640?200:t<1024?250:300,children:l.jsxs(fO,{children:[l.jsx(Ua,{data:p,cx:"50%",cy:"50%",labelLine:!1,label:({name:m,percent:v})=>`${m}: ${(v*100).toFixed(0)}%`,outerRadius:90,fill:"#8884d8",dataKey:"value",children:p.map((m,v)=>l.jsx(ph,{fill:m.color},`cell-${v}`))}),l.jsx(hi,{}),l.jsx(Js,{})]})})})}),l.jsx(me,{xs:24,sm:24,md:24,lg:12,xl:12,children:l.jsx(Ee,{title:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"icon-container-modern bg-amber-600 border border-amber-500",children:l.jsx(dT,{className:"text-white text-xl"})}),l.jsx("span",{className:"text-xl font-bold gradient-text-modern",children:n("performanceComparison")})]}),className:"modern-chart-container border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-white to-amber-50/50",style:{animationDelay:"0.5s"},styles:{body:{padding:"clamp(16px, 4vw, 32px)"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.06)",padding:"clamp(16px, 3vw, 24px) clamp(16px, 4vw, 32px)"}},children:l.jsx(zf,{width:"100%",height:t<640?200:t<1024?250:300,children:l.jsxs(Uue,{data:h,children:[l.jsx(jS,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),l.jsx(du,{dataKey:"month",stroke:"#6b7280"}),l.jsx(fu,{stroke:"#6b7280"}),l.jsx(hi,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}),l.jsx(Js,{}),l.jsx(Il,{dataKey:"revenue",fill:"#7a8c66",radius:[8,8,0,0]})]})})})})]}),l.jsxs(Re,{gutter:[12,12],children:[l.jsx(me,{xs:24,sm:24,md:24,lg:14,xl:14,children:l.jsx(Ee,{title:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"icon-container-modern bg-orange-500 border border-orange-400",children:l.jsx($i,{className:"text-white text-xl"})}),l.jsx("span",{className:"text-xl font-bold gradient-text-modern",children:n("recentBookings")})]}),className:"modern-table-container border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-white to-amber-50/50",style:{animationDelay:"0.6s"},styles:{body:{padding:"32px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:l.jsx("div",{className:"overflow-x-auto",children:l.jsx(Pt,{dataSource:o.recentBookings||[],columns:y,pagination:{pageSize:5,responsive:!0},size:"small",rowKey:"id",scroll:{x:"max-content"}})})})}),l.jsx(me,{xs:24,sm:24,md:24,lg:10,xl:10,children:l.jsx(Ee,{title:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"icon-container-modern bg-amber-500 border border-amber-400",children:l.jsx(lh,{className:"text-white text-xl"})}),l.jsx("span",{className:"text-xl font-bold gradient-text-modern",children:n("topConsultants")})]}),className:"modern-table-container border border-amber-200/50 bg-gradient-to-br from-amber-50/50 via-white to-amber-50/50",style:{animationDelay:"0.7s"},styles:{body:{padding:"clamp(16px, 4vw, 32px)"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.06)",padding:"clamp(16px, 3vw, 24px) clamp(16px, 4vw, 32px)"}},children:l.jsx("div",{className:"overflow-x-auto",children:l.jsx(Pt,{dataSource:o.topConsultants||[],columns:g,pagination:!1,size:"small",rowKey:"id",scroll:{x:"max-content"}})})})})]})]})},zue=()=>{const{t:n,language:e}=Ze(),t=Rt(),[r,i]=M.useState([]),[a,s]=M.useState(!0),[o,c]=M.useState(null),[u,d]=M.useState(""),[h,f]=M.useState("all"),[p,y]=M.useState({visible:!1,userId:null}),[g,m]=M.useState({visible:!1,editing:null}),[v]=W.useForm(),[x]=W.useForm(),[b,A]=M.useState(null);M.useEffect(()=>{w()},[u,h]);const w=async()=>{try{s(!0),c(null);const N={};u&&(N.search=u),h!=="all"&&(N.status=h);const R=(await jt.getClients(N)).clients.map(P=>({id:P.id,userId:P.user.id,name:`${P.firstName} ${P.lastName}`,email:P.user.email,phone:P.user.phone,sessions:P._count?.bookings||0,lastLogin:P.user.lastLogin?new Date(P.user.lastLogin).toLocaleDateString(e==="ar"?"ar-SA":"en-US"):e==="ar"?"لم يسجل دخول":"Never",status:P.user.isActive?"active":"suspended",isActive:P.user.isActive}));i(R)}catch(N){console.error("Error fetching clients:",N),c(N.message||"Failed to load clients"),se.error(e==="ar"?"فشل تحميل العملاء":"Failed to load clients")}finally{s(!1)}},S=async(N,j)=>{try{const R=!j;await jt.toggleUserStatus(N,R),se.success(e==="ar"?`تم ${R?"تفعيل":"تعطيل"} المستخدم بنجاح`:`User ${R?"activated":"suspended"} successfully`),w()}catch(R){se.error(R.message||(e==="ar"?"فشل تحديث الحالة":"Failed to update status"))}},E=async N=>{try{await jt.resetUserPassword(p.userId,N.newPassword),se.success(e==="ar"?"تم إعادة تعيين كلمة المرور بنجاح":"Password reset successfully"),y({visible:!1,userId:null}),v.resetFields()}catch(j){se.error(j.message||(e==="ar"?"فشل إعادة تعيين كلمة المرور":"Failed to reset password"))}},_=N=>{if(!N||/file:\/\//.test(N)||/[A-Za-z]:[\\\/]/.test(N)||/fakepath/i.test(N))return null;if(/^https?:\/\//.test(N))return N;const j="https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site";return N.startsWith("/")?`${j}${N}`:`${j}/${N}`},D=async N=>{try{const j=new FormData;j.append("file",N),j.append("ownerType","USER"),j.append("ownerId",g.editing?.id||"new");const R=await Zr.uploadFile(j);if(R.success&&R.file){const P="https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site";let F=R.file.fileUrl||R.file.url;F&&!/^https?:\/\//.test(F)&&(F=F.startsWith("/")?`${P}${F}`:`${P}/${F}`);const q=_(F);return q?(A(q),x.setFieldsValue({companyLogo:q}),se.success(e==="ar"?"تم رفع الشعار بنجاح":"Logo uploaded successfully")):se.error(e==="ar"?"فشل رفع الشعار: رابط غير صالح":"Failed to upload logo: Invalid URL"),!1}}catch(j){console.error("Error uploading logo:",j),se.error(e==="ar"?"فشل رفع الشعار":"Failed to upload logo")}return!1},C=async N=>{try{const j=x.getFieldValue("companyLogo")||b||N.companyLogo||null,R={...N,companyLogo:j};g.editing?(await jt.updateClient(g.editing.id,R),se.success(e==="ar"?"تم تحديث العميل بنجاح":"Client updated successfully")):(await jt.createClient(R),se.success(e==="ar"?"تم إنشاء العميل بنجاح":"Client created successfully")),m({visible:!1,editing:null}),A(null),x.resetFields(),w()}catch(j){se.error(j.message||(e==="ar"?"فشل حفظ العميل":"Failed to save client"))}},k=async N=>{try{await jt.deleteClient(N),se.success(e==="ar"?"تم حذف العميل بنجاح":"Client deleted successfully"),w()}catch(j){se.error(j.message||(e==="ar"?"فشل حذف العميل":"Failed to delete client"))}},T=[{title:e==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",sorter:(N,j)=>N.name.localeCompare(j.name)},{title:e==="ar"?"البريد الإلكتروني":"Email",dataIndex:"email",key:"email"},{title:e==="ar"?"رقم الهاتف":"Phone",dataIndex:"phone",key:"phone"},{title:e==="ar"?"عدد الجلسات":"Sessions Count",dataIndex:"sessions",key:"sessions",sorter:(N,j)=>N.sessions-j.sessions},{title:e==="ar"?"آخر تسجيل دخول":"Last Login",dataIndex:"lastLogin",key:"lastLogin"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:(N,j)=>{const R={active:"green",suspended:"red"},P={active:e==="ar"?"نشط":"Active",suspended:e==="ar"?"معلق":"Suspended"};return l.jsx($e,{color:R[N],children:P[N]})},filters:[{text:e==="ar"?"نشط":"Active",value:"active"},{text:e==="ar"?"معلق":"Suspended",value:"suspended"}],onFilter:(N,j)=>j.status===N},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(N,j)=>l.jsxs(ze,{children:[l.jsx(J,{type:"link",onClick:()=>t(`/admin/clients/${j.id}`),children:e==="ar"?"عرض التفاصيل":"View Details"}),l.jsx(J,{icon:l.jsx(_r,{}),onClick:async()=>{try{const P=(await jt.getClientById(j.id)).client,F=_(P?.companyLogo);A(F),x.setFieldsValue({firstName:P?.firstName||"",lastName:P?.lastName||"",email:P?.user?.email||"",phone:P?.user?.phone||"",city:P?.city||"",sector:P?.sector||"",companyName:P?.companyName||"",companyLogo:F||null}),m({visible:!0,editing:j})}catch{se.error(e==="ar"?"فشل تحميل بيانات العميل":"Failed to load client data")}},children:e==="ar"?"تعديل":"Edit"}),l.jsx(J,{type:j.isActive?"default":"primary",onClick:()=>S(j.userId,j.isActive),children:j.isActive?e==="ar"?"تعطيل":"Suspend":e==="ar"?"تفعيل":"Activate"}),l.jsx(J,{danger:!0,icon:l.jsx(NH,{}),onClick:()=>y({visible:!0,userId:j.userId}),children:e==="ar"?"إعادة تعيين كلمة المرور":"Reset Password"}),l.jsx(J,{danger:!0,onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذا العميل؟":"Are you sure you want to delete this client?")&&k(j.id)},children:e==="ar"?"حذف":"Delete"})]})}];return o&&!a?l.jsx(Fn,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:o,type:"error",showIcon:!0,action:l.jsx(J,{size:"small",onClick:w,children:e==="ar"?"إعادة المحاولة":"Retry"})}):l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"العملاء":"Clients"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع العملاء المسجلين":"Manage all registered clients"})]}),l.jsxs(ze,{children:[l.jsx(ye,{placeholder:e==="ar"?"بحث بالاسم أو البريد...":"Search by name or email...",prefix:l.jsx(ua,{}),className:"w-64",value:u,onChange:N=>d(N.target.value),allowClear:!0}),l.jsxs(be,{value:h,onChange:f,style:{width:150},children:[l.jsx(be.Option,{value:"all",children:e==="ar"?"الكل":"All"}),l.jsx(be.Option,{value:"active",children:e==="ar"?"نشط":"Active"}),l.jsx(be.Option,{value:"inactive",children:e==="ar"?"معلق":"Inactive"})]}),l.jsx(J,{icon:l.jsx(Er,{}),onClick:w,loading:a,children:e==="ar"?"تحديث":"Refresh"}),l.jsx(J,{type:"primary",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{x.resetFields(),A(null),m({visible:!0,editing:null})},children:e==="ar"?"إضافة عميل جديد":"Add New Client"})]})]}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsx(Pt,{columns:T,dataSource:r,rowKey:"id",loading:a,pagination:{pageSize:10,showSizeChanger:!0,showTotal:N=>e==="ar"?`إجمالي ${N} عميل`:`Total ${N} clients`},scroll:{x:"max-content"}})})}),l.jsx(At,{title:e==="ar"?"إعادة تعيين كلمة المرور":"Reset Password",open:p.visible,onCancel:()=>{y({visible:!1,userId:null}),v.resetFields()},maskClosable:!0,keyboard:!0,footer:null,destroyOnHidden:!0,className:"modern-modal",children:l.jsxs(W,{form:v,layout:"vertical",onFinish:E,children:[l.jsx(W.Item,{name:"newPassword",label:e==="ar"?"كلمة المرور الجديدة":"New Password",rules:[{required:!0,message:e==="ar"?"يرجى إدخال كلمة المرور":"Please enter password"},{min:8,message:e==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters"}],children:l.jsx(ye.Password,{placeholder:e==="ar"?"أدخل كلمة المرور الجديدة":"Enter new password"})}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),l.jsx(J,{onClick:()=>{y({visible:!1,userId:null}),v.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),l.jsx(At,{title:g.editing?e==="ar"?"تعديل العميل":"Edit Client":e==="ar"?"إضافة عميل جديد":"Add New Client",open:g.visible,onCancel:()=>{m({visible:!1,editing:null}),A(null),x.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:600,destroyOnHidden:!0,className:"modern-modal",children:l.jsxs(W,{form:x,layout:"vertical",onFinish:C,children:[!g.editing&&l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:e==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email"},{type:"email",message:e==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email"}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"password",label:e==="ar"?"كلمة المرور":"Password",rules:[{required:!g.editing,message:e==="ar"?"يرجى إدخال كلمة المرور":"Please enter password"},{min:8,message:e==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters"}],children:l.jsx(ye.Password,{})})]}),l.jsx(W.Item,{name:"firstName",label:e==="ar"?"الاسم الأول":"First Name",rules:[{required:!0}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"lastName",label:e==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"city",label:e==="ar"?"المدينة":"City",children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"sector",label:e==="ar"?"القطاع":"Sector",children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"companyName",label:e==="ar"?"اسم الشركة":"Company Name",children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"companyLogo",label:e==="ar"?"شعار الشركة":"Company Logo",children:l.jsxs(ze,{direction:"vertical",style:{width:"100%"},children:[l.jsx(Vt,{beforeUpload:D,showUploadList:!1,accept:"image/*",children:l.jsx(J,{icon:l.jsx(Sn,{}),children:e==="ar"?"رفع الشعار":"Upload Logo"})}),(()=>{const N=b||x.getFieldValue("companyLogo");return N?l.jsx(Sr,{src:_(N),alt:"Company Logo",width:200,height:100,style:{objectFit:"contain"},onError:j=>{console.error("Failed to load logo:",N),j.target.style.display="none"}}):null})(),l.jsx(ye,{placeholder:e==="ar"?"أو أدخل رابط الشعار":"Or enter logo URL",value:b||x.getFieldValue("companyLogo")||"",onChange:N=>{const j=N.target.value.trim();A(j),x.setFieldsValue({companyLogo:j||null})}})]})}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),l.jsx(J,{onClick:()=>{m({visible:!1,editing:null}),x.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},que=()=>{const{t:n,language:e}=Ze(),t=Rt(),[r,i]=M.useState([]),[a,s]=M.useState(!0),[o,c]=M.useState(null),[u,d]=M.useState(""),[h,f]=M.useState("all"),[p,y]=M.useState(null),[g,m]=M.useState(!1),[v,x]=M.useState({visible:!1,editing:null}),[b]=W.useForm();M.useEffect(()=>{A()},[u,h]);const A=async()=>{try{s(!0),c(null);const D={};u&&(D.search=u),h!=="all"&&(D.status=h);const k=(await jt.getConsultants(D)).consultants.map(T=>({id:T.id,userId:T.user.id,name:`${T.firstName} ${T.lastName}`,email:T.user.email,phone:T.user.phone,rating:T.averageRating||0,sessions:T._count?.bookings||0,status:T.isVerified?"approved":"pending",isVerified:T.isVerified,specialization:T.specialization,bio:T.bio,isAvailable:T.isAvailable}));i(k)}catch(D){console.error("Error fetching consultants:",D),c(D.message||"Failed to load consultants"),se.error(e==="ar"?"فشل تحميل المستشارين":"Failed to load consultants")}finally{s(!1)}},w=async(D,C)=>{try{await jt.reviewConsultant(D,C),se.success(e==="ar"?`تم ${C==="approve"?"الموافقة على":"رفض"} المستشار بنجاح`:`Consultant ${C}d successfully`),A()}catch(k){se.error(k.message||(e==="ar"?"فشل تحديث الحالة":"Failed to update status"))}},S=async D=>{try{v.editing?(await jt.updateConsultant(v.editing.id,D),se.success(e==="ar"?"تم تحديث المستشار بنجاح":"Consultant updated successfully")):(await jt.createConsultant(D),se.success(e==="ar"?"تم إنشاء المستشار بنجاح":"Consultant created successfully")),x({visible:!1,editing:null}),b.resetFields(),A()}catch(C){se.error(C.message||(e==="ar"?"فشل حفظ المستشار":"Failed to save consultant"))}},E=async D=>{try{await jt.deleteConsultant(D),se.success(e==="ar"?"تم حذف المستشار بنجاح":"Consultant deleted successfully"),A()}catch(C){se.error(C.message||(e==="ar"?"فشل حذف المستشار":"Failed to delete consultant"))}},_=[{title:e==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",sorter:(D,C)=>D.name.localeCompare(C.name)},{title:e==="ar"?"البريد الإلكتروني":"Email",dataIndex:"email",key:"email"},{title:e==="ar"?"التخصص":"Specialization",dataIndex:"specialization",key:"specialization",render:D=>D||(e==="ar"?"غير محدد":"Not specified")},{title:e==="ar"?"التقييم":"Rating",dataIndex:"rating",key:"rating",render:D=>D>0?l.jsxs(ze,{children:[l.jsx(Ia,{disabled:!0,defaultValue:D,allowHalf:!0}),l.jsxs("span",{children:["(",D.toFixed(1),")"]})]}):l.jsx("span",{className:"text-gray-400",children:e==="ar"?"لا يوجد تقييم":"No rating"}),sorter:(D,C)=>D.rating-C.rating},{title:e==="ar"?"الجلسات":"Sessions",dataIndex:"sessions",key:"sessions",sorter:(D,C)=>D.sessions-C.sessions},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:(D,C)=>{const k={approved:"green",pending:"orange",rejected:"red"},T={approved:e==="ar"?"موافق عليه":"Approved",pending:e==="ar"?"قيد المراجعة":"Pending",rejected:e==="ar"?"مرفوض":"Rejected"};return l.jsxs(ze,{children:[l.jsx($e,{color:k[D],children:T[D]}),C.isAvailable&&l.jsx($e,{color:"blue",children:e==="ar"?"متاح":"Available"})]})},filters:[{text:e==="ar"?"موافق عليه":"Approved",value:"approved"},{text:e==="ar"?"قيد المراجعة":"Pending",value:"pending"}],onFilter:(D,C)=>C.status===D},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(D,C)=>l.jsxs(ze,{children:[l.jsx(J,{type:"link",onClick:()=>t(`/admin/consultants/${C.id}`),children:e==="ar"?"عرض التفاصيل":"View Details"}),l.jsx(J,{icon:l.jsx(_r,{}),onClick:async()=>{try{const T=(await jt.getConsultantById(C.id)).consultant;b.setFieldsValue({firstName:T?.firstName||"",lastName:T?.lastName||"",phone:T?.user?.phone||"",academicDegree:T?.academicDegree||"",specialization:T?.specialization||"",bio:T?.bio||"",pricePerSession:T?.pricePerSession||"",isVerified:T?.isVerified||!1,isAvailable:T?.isAvailable||!1}),x({visible:!0,editing:C})}catch{se.error(e==="ar"?"فشل تحميل بيانات المستشار":"Failed to load consultant data")}},children:e==="ar"?"تعديل":"Edit"}),C.status==="pending"&&l.jsxs(l.Fragment,{children:[l.jsx(J,{type:"primary",icon:l.jsx(mA,{}),className:"bg-green-600",onClick:()=>w(C.id,"approve"),children:e==="ar"?"موافقة":"Approve"}),l.jsx(J,{danger:!0,icon:l.jsx(Ar,{}),onClick:()=>w(C.id,"reject"),children:e==="ar"?"رفض":"Reject"})]}),l.jsx(J,{danger:!0,onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذا المستشار؟":"Are you sure you want to delete this consultant?")&&E(C.id)},children:e==="ar"?"حذف":"Delete"})]})}];return o&&!a?l.jsx(Fn,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:o,type:"error",showIcon:!0,action:l.jsx(J,{size:"small",onClick:A,children:e==="ar"?"إعادة المحاولة":"Retry"})}):l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"المستشارون":"Consultants"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع المستشارين المسجلين":"Manage all registered consultants"})]}),l.jsxs(ze,{className:"flex-wrap",children:[l.jsx(ye,{placeholder:e==="ar"?"بحث بالاسم أو البريد...":"Search by name or email...",prefix:l.jsx(ua,{}),className:"w-64",size:"large",value:u,onChange:D=>d(D.target.value),allowClear:!0}),l.jsxs(be,{value:h,onChange:f,style:{width:150},children:[l.jsx(be.Option,{value:"all",children:e==="ar"?"الكل":"All"}),l.jsx(be.Option,{value:"approved",children:e==="ar"?"موافق عليه":"Approved"}),l.jsx(be.Option,{value:"pending",children:e==="ar"?"قيد المراجعة":"Pending"})]}),l.jsx(J,{icon:l.jsx(Er,{}),onClick:A,loading:a,children:e==="ar"?"تحديث":"Refresh"}),l.jsx(J,{type:"primary",icon:l.jsx(gr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{b.resetFields(),x({visible:!0,editing:null})},children:e==="ar"?"إضافة مستشار جديد":"Add New Consultant"})]})]}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsx(Pt,{columns:_,dataSource:r,rowKey:"id",loading:a,pagination:{pageSize:10,showSizeChanger:!0,showTotal:D=>e==="ar"?`إجمالي ${D} مستشار`:`Total ${D} consultants`},scroll:{x:"max-content"}})})}),l.jsx(At,{title:e==="ar"?"تفاصيل المستشار":"Consultant Details",open:g,onCancel:()=>{m(!1),y(null)},maskClosable:!0,keyboard:!0,footer:null,width:600,destroyOnHidden:!0,className:"modern-modal",children:p&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"الاسم:":"Name:"})," ",p.name]}),l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"البريد الإلكتروني:":"Email:"})," ",p.email]}),l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"رقم الهاتف:":"Phone:"})," ",p.phone||(e==="ar"?"غير متوفر":"Not available")]}),l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"التخصص:":"Specialization:"})," ",p.specialization||(e==="ar"?"غير محدد":"Not specified")]}),l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"التقييم:":"Rating:"}),l.jsx(Ia,{disabled:!0,defaultValue:p.rating,allowHalf:!0,className:"ml-2"}),l.jsxs("span",{className:"ml-2",children:["(",p.rating.toFixed(1),")"]})]}),l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"عدد الجلسات:":"Sessions:"})," ",p.sessions]}),l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"الحالة:":"Status:"}),l.jsx($e,{color:p.status==="approved"?"green":"orange",className:"ml-2",children:p.status==="approved"?e==="ar"?"موافق عليه":"Approved":e==="ar"?"قيد المراجعة":"Pending"})]}),p.bio&&l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"السيرة الذاتية:":"Bio:"}),l.jsx("p",{className:"mt-2 text-gray-600",children:p.bio})]})]})}),l.jsx(At,{title:v.editing?e==="ar"?"تعديل المستشار":"Edit Consultant":e==="ar"?"إضافة مستشار جديد":"Add New Consultant",open:v.visible,onCancel:()=>{x({visible:!1,editing:null}),b.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:700,destroyOnHidden:!0,className:"modern-modal",children:l.jsxs(W,{form:b,layout:"vertical",onFinish:S,children:[!v.editing&&l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"email",label:e==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:e==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email"},{type:"email",message:e==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email"}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"password",label:e==="ar"?"كلمة المرور":"Password",rules:[{required:!v.editing,message:e==="ar"?"يرجى إدخال كلمة المرور":"Please enter password"},{min:8,message:e==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters"}],children:l.jsx(ye.Password,{})})]}),l.jsx(W.Item,{name:"firstName",label:e==="ar"?"الاسم الأول":"First Name",rules:[{required:!0}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"lastName",label:e==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"phone",label:e==="ar"?"رقم الهاتف":"Phone",children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"academicDegree",label:e==="ar"?"الدرجة العلمية":"Academic Degree",rules:[{required:!0}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"specialization",label:e==="ar"?"التخصص":"Specialization",rules:[{required:!0}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"bio",label:e==="ar"?"السيرة الذاتية":"Bio",children:l.jsx(ye.TextArea,{rows:4})}),l.jsx(W.Item,{name:"pricePerSession",label:e==="ar"?"سعر الجلسة":"Price Per Session",rules:[{required:!0}],children:l.jsx(ye,{type:"number"})}),v.editing&&l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"isVerified",valuePropName:"checked",label:e==="ar"?"موافق عليه":"Verified",children:l.jsx(Switch,{checkedChildren:e==="ar"?"نعم":"Yes",unCheckedChildren:e==="ar"?"لا":"No"})}),l.jsx(W.Item,{name:"isAvailable",valuePropName:"checked",label:e==="ar"?"متاح":"Available",children:l.jsx(Switch,{checkedChildren:e==="ar"?"نعم":"Yes",unCheckedChildren:e==="ar"?"لا":"No"})})]}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),l.jsx(J,{onClick:()=>{x({visible:!1,editing:null}),b.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},Wue=()=>{const{t:n,language:e}=Ze(),[t,r]=M.useState([]),[i,a]=M.useState(!0),[s,o]=M.useState(null),[c,u]=M.useState("all"),[d,h]=M.useState(null),[f,p]=M.useState(!1),[y,g]=M.useState(!1),[m]=W.useForm();M.useEffect(()=>{v()},[c]);const v=async()=>{try{a(!0),o(null);const E={};c!=="all"&&(E.status=c);const D=(await jt.getBookings(E)).bookings.map(C=>({id:C.id,client:C.client?`${C.client.firstName} ${C.client.lastName}`:e==="ar"?"غير متوفر":"N/A",consultant:C.consultant?`${C.consultant.firstName} ${C.consultant.lastName}`:e==="ar"?"غير متوفر":"N/A",type:C.service?e==="ar"?C.service.titleAr:C.service.title:C.bookingType||(e==="ar"?"غير محدد":"Not specified"),date:C.scheduledAt?qe(C.scheduledAt).format("YYYY-MM-DD HH:mm"):e==="ar"?"غير محدد":"Not scheduled",status:C.status,price:C.price,duration:C.duration,notes:C.notes,rating:C.rating,paymentStatus:C.paymentStatus,fullData:C}));r(D)}catch(E){console.error("Error fetching bookings:",E),o(E.message||"Failed to load bookings"),se.error(e==="ar"?"فشل تحميل الجلسات":"Failed to load sessions")}finally{a(!1)}},x=E=>({PENDING:"orange",CONFIRMED:"blue",COMPLETED:"green",CANCELLED:"red",IN_PROGRESS:"purple"})[E]||"default",b=E=>({PENDING:e==="ar"?"قيد الانتظار":"Pending",CONFIRMED:e==="ar"?"مؤكدة":"Confirmed",COMPLETED:e==="ar"?"مكتملة":"Completed",CANCELLED:e==="ar"?"ملغية":"Cancelled",IN_PROGRESS:e==="ar"?"قيد التنفيذ":"In Progress"})[E]||E,A=async E=>{try{const _={...E,scheduledAt:E.scheduledAt?E.scheduledAt.toISOString():null};d?(await jt.updateBooking(d.id,_),se.success(e==="ar"?"تم تحديث الجلسة بنجاح":"Session updated successfully")):(await jt.createBooking(_),se.success(e==="ar"?"تم إنشاء الجلسة بنجاح":"Session created successfully")),g(!1),h(null),m.resetFields(),v()}catch(_){se.error(_.message||(e==="ar"?"فشل حفظ الجلسة":"Failed to save session"))}},w=async E=>{try{await jt.deleteBooking(E),se.success(e==="ar"?"تم حذف الجلسة بنجاح":"Session deleted successfully"),v()}catch(_){se.error(_.message||(e==="ar"?"فشل حذف الجلسة":"Failed to delete session"))}},S=[{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client",sorter:(E,_)=>E.client.localeCompare(_.client)},{title:e==="ar"?"المستشار":"Consultant",dataIndex:"consultant",key:"consultant",sorter:(E,_)=>E.consultant.localeCompare(_.consultant)},{title:e==="ar"?"النوع":"Type",dataIndex:"type",key:"type"},{title:e==="ar"?"التاريخ والوقت":"Date & Time",dataIndex:"date",key:"date",sorter:(E,_)=>new Date(E.date)-new Date(_.date)},{title:e==="ar"?"المبلغ":"Amount",dataIndex:"price",key:"price",render:E=>E?`${E} ${e==="ar"?"ريال":"SAR"}`:"-",sorter:(E,_)=>(E.price||0)-(_.price||0)},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:E=>l.jsx($e,{color:x(E),children:b(E)}),filters:[{text:e==="ar"?"قيد الانتظار":"Pending",value:"PENDING"},{text:e==="ar"?"مؤكدة":"Confirmed",value:"CONFIRMED"},{text:e==="ar"?"مكتملة":"Completed",value:"COMPLETED"},{text:e==="ar"?"ملغية":"Cancelled",value:"CANCELLED"}],onFilter:(E,_)=>_.status===E},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(E,_)=>l.jsxs(ze,{children:[l.jsx(J,{icon:l.jsx(Wn,{}),onClick:()=>{h(_),p(!0)},children:e==="ar"?"عرض":"View"}),l.jsx(J,{icon:l.jsx(_r,{}),onClick:()=>{h(_),m.setFieldsValue({status:_.status,scheduledAt:_.date?qe(_.date):null,price:_.price,duration:_.duration,consultantNotes:_.notes}),g(!0)},children:e==="ar"?"تعديل":"Edit"}),l.jsx(J,{danger:!0,icon:l.jsx(wi,{}),onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذه الجلسة؟":"Are you sure you want to delete this session?")&&w(_.id)},children:e==="ar"?"حذف":"Delete"})]})}];return s&&!i?l.jsx(Fn,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:s,type:"error",showIcon:!0,action:l.jsx(J,{size:"small",onClick:v,children:e==="ar"?"إعادة المحاولة":"Retry"})}):l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الجلسات":"Sessions"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع الجلسات والحجوزات":"Manage all sessions and bookings"})]}),l.jsxs(ze,{className:"flex-wrap",children:[l.jsxs(be,{value:c,onChange:u,placeholder:e==="ar"?"الحالة":"Status",style:{width:150},size:"large",children:[l.jsx(be.Option,{value:"all",children:e==="ar"?"الكل":"All"}),l.jsx(be.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),l.jsx(be.Option,{value:"CONFIRMED",children:e==="ar"?"مؤكدة":"Confirmed"}),l.jsx(be.Option,{value:"COMPLETED",children:e==="ar"?"مكتملة":"Completed"}),l.jsx(be.Option,{value:"CANCELLED",children:e==="ar"?"ملغية":"Cancelled"})]}),l.jsx(J,{icon:l.jsx(Er,{}),onClick:v,loading:i,children:e==="ar"?"تحديث":"Refresh"}),l.jsx(J,{type:"primary",icon:l.jsx(gr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{h(null),m.resetFields(),g(!0)},children:e==="ar"?"إضافة جلسة":"Add Session"})]})]}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsx(Pt,{columns:S,dataSource:t,rowKey:"id",loading:i,pagination:{pageSize:10,showSizeChanger:!0,showTotal:E=>e==="ar"?`إجمالي ${E} جلسة`:`Total ${E} sessions`},scroll:{x:"max-content"}})})}),l.jsx(At,{title:e==="ar"?"تفاصيل الجلسة":"Session Details",open:f,onCancel:()=>{p(!1),h(null)},maskClosable:!0,keyboard:!0,footer:null,width:700,destroyOnHidden:!0,className:"modern-modal",children:d&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"العميل:":"Client:"})," ",d.client]}),l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"المستشار:":"Consultant:"})," ",d.consultant]}),l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"النوع:":"Type:"})," ",d.type]}),l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"التاريخ:":"Date:"})," ",d.date]}),l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"المبلغ:":"Amount:"})," ",d.price?`${d.price} ${e==="ar"?"ريال":"SAR"}`:"-"]}),l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"المدة:":"Duration:"})," ",d.duration?`${d.duration} ${e==="ar"?"دقيقة":"minutes"}`:"-"]}),l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"الحالة:":"Status:"}),l.jsx($e,{color:x(d.status),className:"ml-2",children:b(d.status)})]}),d.rating&&l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"التقييم:":"Rating:"})," ",d.rating,"/5"]})]}),d.notes&&l.jsxs("div",{children:[l.jsx("strong",{children:e==="ar"?"ملاحظات:":"Notes:"}),l.jsx("p",{className:"mt-2 text-gray-600",children:d.notes})]})]})}),l.jsx(At,{title:d?e==="ar"?"تعديل الجلسة":"Edit Session":e==="ar"?"إضافة جلسة جديدة":"Add New Session",open:y,onCancel:()=>{g(!1),h(null),m.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:700,destroyOnHidden:!0,className:"modern-modal",children:l.jsxs(W,{form:m,layout:"vertical",onFinish:A,initialValues:d?{status:d.status,scheduledAt:d.date?qe(d.date):null,price:d.price,duration:d.duration,consultantNotes:d.notes}:{status:"PENDING"},children:[!d&&l.jsxs(l.Fragment,{children:[l.jsx(W.Item,{name:"clientId",label:e==="ar"?"العميل":"Client",rules:[{required:!0}],children:l.jsx(ye,{placeholder:e==="ar"?"معرف العميل":"Client ID"})}),l.jsx(W.Item,{name:"consultantId",label:e==="ar"?"المستشار":"Consultant",rules:[{required:!0}],children:l.jsx(ye,{placeholder:e==="ar"?"معرف المستشار":"Consultant ID"})}),l.jsx(W.Item,{name:"serviceId",label:e==="ar"?"الخدمة":"Service",children:l.jsx(ye,{placeholder:e==="ar"?"معرف الخدمة":"Service ID"})})]}),l.jsx(W.Item,{name:"status",label:e==="ar"?"الحالة":"Status",rules:[{required:!0}],children:l.jsxs(be,{children:[l.jsx(be.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),l.jsx(be.Option,{value:"CONFIRMED",children:e==="ar"?"مؤكدة":"Confirmed"}),l.jsx(be.Option,{value:"COMPLETED",children:e==="ar"?"مكتملة":"Completed"}),l.jsx(be.Option,{value:"CANCELLED",children:e==="ar"?"ملغية":"Cancelled"}),l.jsx(be.Option,{value:"IN_PROGRESS",children:e==="ar"?"قيد التنفيذ":"In Progress"})]})}),l.jsx(W.Item,{name:"scheduledAt",label:e==="ar"?"التاريخ والوقت":"Date & Time",children:l.jsx(ho,{showTime:!0,format:"YYYY-MM-DD HH:mm",className:"w-full"})}),l.jsx(W.Item,{name:"price",label:e==="ar"?"السعر":"Price",children:l.jsx(ye,{type:"number"})}),l.jsx(W.Item,{name:"duration",label:e==="ar"?"المدة (بالدقائق)":"Duration (minutes)",children:l.jsx(ye,{type:"number"})}),l.jsx(W.Item,{name:"consultantNotes",label:e==="ar"?"ملاحظات المستشار":"Consultant Notes",children:l.jsx(ye.TextArea,{rows:4})}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),l.jsx(J,{onClick:()=>{g(!1),h(null),m.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},pO=({invoice:n,language:e})=>{const t=i=>({CARD:e==="ar"?"بطاقة":"Card",MADA:e==="ar"?"مدى":"Mada",BANK_TRANSFER:e==="ar"?"تحويل بنكي":"Bank Transfer",APPLE_PAY:"Apple Pay",GOOGLE_PAY:"Google Pay"})[i]||i,r=i=>({COMPLETED:e==="ar"?"مكتمل":"Completed",PENDING:e==="ar"?"قيد الانتظار":"Pending",FAILED:e==="ar"?"فشل":"Failed"})[i]||i;return l.jsxs("div",{id:"invoice-content",style:{width:"210mm",minHeight:"297mm",margin:"0 auto",padding:"20mm",backgroundColor:"#fff",fontFamily:"Arial, sans-serif",direction:e==="ar"?"rtl":"ltr"},children:[l.jsx("div",{style:{borderBottom:"3px solid #7a8c66",paddingBottom:"20px",marginBottom:"30px"},children:l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("h1",{style:{margin:0,fontSize:"32px",fontWeight:"bold",color:"#7a8c66",background:"linear-gradient(135deg, #7a8c66 0%, #14b8a6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:e==="ar"?"جدوى":"Jadwa"}),l.jsx("p",{style:{margin:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"منصة الاستشارات الإدارية والاقتصادية":"Administrative and Economic Consulting Platform"})]}),l.jsxs("div",{style:{textAlign:e==="ar"?"left":"right"},children:[l.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:"bold",color:"#333"},children:e==="ar"?"فاتورة":"INVOICE"}),l.jsx("p",{style:{margin:"5px 0",color:"#666",fontSize:"12px"},children:e==="ar"?"رقم الفاتورة":"Invoice Number"})]})]})}),l.jsx("div",{style:{marginBottom:"30px"},children:l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px",color:"#333"},children:e==="ar"?"معلومات الفاتورة":"Invoice Information"}),l.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"رقم الفاتورة:":"Invoice Number:"}),l.jsx("td",{style:{padding:"5px 0",fontWeight:"bold",fontSize:"14px"},children:n.invoiceNumber})]}),l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"تاريخ الإصدار:":"Issue Date:"}),l.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:qe(n.date).format("YYYY-MM-DD")})]}),n.paidAt&&l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"تاريخ الدفع:":"Paid Date:"}),l.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:qe(n.paidAt).format("YYYY-MM-DD")})]}),l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"رقم المعاملة:":"Transaction ID:"}),l.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:n.transactionId||"N/A"})]})]})})]}),l.jsxs("div",{style:{flex:1,textAlign:e==="ar"?"right":"left"},children:[l.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px",color:"#333"},children:e==="ar"?"معلومات العميل":"Client Information"}),l.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"الاسم:":"Name:"}),l.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:n.client?.name||(e==="ar"?"غير محدد":"N/A")})]}),l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"البريد الإلكتروني:":"Email:"}),l.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:n.client?.email||(e==="ar"?"غير محدد":"N/A")})]}),n.client?.phone&&l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"5px 0",color:"#666",fontSize:"14px"},children:e==="ar"?"الهاتف:":"Phone:"}),l.jsx("td",{style:{padding:"5px 0",fontSize:"14px"},children:n.client.phone})]})]})})]})]})}),l.jsxs("div",{style:{marginBottom:"30px"},children:[l.jsx("h3",{style:{margin:"0 0 15px 0",fontSize:"16px",color:"#333"},children:e==="ar"?"تفاصيل الخدمة":"Service Details"}),l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[l.jsx("th",{style:{padding:"12px",textAlign:e==="ar"?"right":"left",borderBottom:"2px solid #7a8c66",fontSize:"14px",fontWeight:"bold"},children:e==="ar"?"الخدمة":"Service"}),l.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #7a8c66",fontSize:"14px",fontWeight:"bold"},children:e==="ar"?"المستشار":"Consultant"}),l.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #7a8c66",fontSize:"14px",fontWeight:"bold"},children:e==="ar"?"طريقة الدفع":"Payment Method"}),l.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #7a8c66",fontSize:"14px",fontWeight:"bold"},children:e==="ar"?"المبلغ":"Amount"})]})}),l.jsx("tbody",{children:l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #eee",fontSize:"14px"},children:n.service?.title||(e==="ar"?n.service?.titleAr:null)||(e==="ar"?"غير محدد":"N/A")}),l.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #eee",textAlign:"center",fontSize:"14px"},children:n.consultant?.name||(e==="ar"?"غير محدد":"N/A")}),l.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #eee",textAlign:"center",fontSize:"14px"},children:t(n.method)}),l.jsxs("td",{style:{padding:"12px",borderBottom:"1px solid #eee",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:[typeof n.amount=="string"?parseFloat(n.amount).toFixed(2):n.amount?.toFixed(2)||"0.00"," ",n.currency||"SAR"]})]})})]})]}),l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"30px",marginBottom:"30px"},children:l.jsx("div",{style:{width:"300px"},children:l.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:l.jsx("tbody",{children:l.jsxs("tr",{children:[l.jsx("td",{style:{padding:"10px",textAlign:e==="ar"?"right":"left",fontSize:"16px",fontWeight:"bold",borderTop:"2px solid #7a8c66",borderBottom:"2px solid #7a8c66"},children:e==="ar"?"الإجمالي:":"Total:"}),l.jsxs("td",{style:{padding:"10px",textAlign:"center",fontSize:"18px",fontWeight:"bold",color:"#7a8c66",borderTop:"2px solid #7a8c66",borderBottom:"2px solid #7a8c66"},children:[typeof n.amount=="string"?parseFloat(n.amount).toFixed(2):n.amount?.toFixed(2)||"0.00"," ",n.currency||"SAR"]})]})})})})}),l.jsx("div",{style:{marginTop:"40px",padding:"20px",backgroundColor:"#f9f9f9",borderRadius:"8px"},children:l.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#666"},children:[e==="ar"?"حالة الدفع:":"Payment Status:"," ",l.jsx("span",{style:{fontWeight:"bold",color:"#7a8c66"},children:r(n.status)})]})}),l.jsxs("div",{style:{marginTop:"50px",paddingTop:"20px",borderTop:"1px solid #ddd",textAlign:"center",color:"#999",fontSize:"12px"},children:[l.jsx("p",{style:{margin:"5px 0"},children:e==="ar"?"شكراً لاستخدامك منصة جدوى للاستشارات":"Thank you for using Jadwa Consulting Platform"}),l.jsx("p",{style:{margin:"5px 0"},children:e==="ar"?"للاستفسارات: info@jadwa.sa | الهاتف: 9200 00000":"For inquiries: info@jadwa.sa | Phone: 9200 00000"})]})]})},{RangePicker:Hue}=ho,Vue=()=>{const{t:n,language:e}=Ze(),[t,r]=M.useState([]),[i,a]=M.useState([]),[s,o]=M.useState(!0),[c,u]=M.useState(null),[d,h]=M.useState("all"),[f,p]=M.useState("all"),[y,g]=M.useState(null),[m,v]=M.useState(""),[x,b]=M.useState(!1),[A]=W.useForm(),[w,S]=M.useState(!1),[E,_]=M.useState(null),[D,C]=M.useState({total:0,completed:0,pending:0,failed:0});M.useEffect(()=>{T()},[d]);const k=L=>{let U=[...L];if(d!=="all"&&(U=U.filter(G=>G.status===d)),f!=="all"&&(U=U.filter(G=>G.method===f)),y&&y.length===2){const G=qe(y[0]).startOf("day"),H=qe(y[1]).endOf("day");U=U.filter(V=>{const K=qe(V.date);return K.isAfter(G)&&K.isBefore(H)})}m&&(U=U.filter(G=>G.client.toLowerCase().includes(m.toLowerCase()))),r(U)};M.useEffect(()=>{i.length>0&&k(i)},[d,f,y,m]);const T=async()=>{try{o(!0),u(null);const L={};d!=="all"&&(L.status=d);const G=((await jt.getPayments(L)).payments||[]).map(te=>{const de=typeof te.amount=="string"||te.amount?parseFloat(te.amount):0;let xe=e==="ar"?"غير متوفر":"N/A";te.booking?.client&&(xe=`${te.booking.client.firstName||""} ${te.booking.client.lastName||""}`.trim()||xe);let ve=e==="ar"?"غير متوفر":"N/A";return te.booking?.consultant&&(ve=`${te.booking.consultant.firstName||""} ${te.booking.consultant.lastName||""}`.trim()||ve),{id:te.id,invoiceNumber:te.invoiceNumber,client:xe,consultant:ve,amount:isNaN(de)?0:de,date:te.createdAt?qe(te.createdAt).format("YYYY-MM-DD HH:mm"):"-",paidAt:te.paidAt?qe(te.paidAt).format("YYYY-MM-DD HH:mm"):null,status:te.status,method:te.method,transactionId:te.transactionId,currency:te.currency||"SAR",service:te.booking?.service?e==="ar"&&te.booking.service.titleAr||te.booking.service.title:"-"}}),H=G.reduce((te,de)=>{const xe=typeof de.amount=="string"?parseFloat(de.amount):de.amount||0;return te+(isNaN(xe)?0:xe)},0),V=G.filter(te=>te.status==="COMPLETED").reduce((te,de)=>{const xe=typeof de.amount=="string"?parseFloat(de.amount):de.amount||0;return te+(isNaN(xe)?0:xe)},0),K=G.filter(te=>te.status==="PENDING").length,ae=G.filter(te=>te.status==="FAILED").length;C({total:Number(H.toFixed(2)),completed:Number(V.toFixed(2)),pending:K,failed:ae}),a(G),k(G)}catch(L){console.error("Error fetching payments:",L),u(L.message||"Failed to load payments"),se.error(e==="ar"?"فشل تحميل المدفوعات":"Failed to load payments")}finally{o(!1)}},N=L=>({COMPLETED:"green",PENDING:"orange",FAILED:"red",REFUNDED:"purple"})[L]||"default",j=L=>({COMPLETED:e==="ar"?"مكتمل":"Completed",PENDING:e==="ar"?"قيد الانتظار":"Pending",FAILED:e==="ar"?"فشل":"Failed",REFUNDED:e==="ar"?"مسترد":"Refunded"})[L]||L,R=L=>({CARD:e==="ar"?"بطاقة":"Card",MADA:e==="ar"?"مدى":"Mada",BANK_TRANSFER:e==="ar"?"تحويل بنكي":"Bank Transfer",APPLE_PAY:"Apple Pay",GOOGLE_PAY:"Google Pay"})[L]||L,P=async()=>{try{const L={};d!=="all"&&(L.status=d),f!=="all"&&(L.method=f);const U=localStorage.getItem("accessToken")||"",G=`https://jadwa.developteam.siteapi/admin/payments/export/csv?${new URLSearchParams(L).toString()}`,H=await fetch(G,{headers:{Authorization:`Bearer ${U}`}});if(!H.ok)throw new Error("Failed to download CSV");const V=await H.blob(),K=window.URL.createObjectURL(V),ae=document.createElement("a");ae.href=K,ae.download=`payments-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),window.URL.revokeObjectURL(K),se.success(e==="ar"?"تم تصدير ملف CSV بنجاح":"CSV exported successfully")}catch(L){console.error("Export CSV error:",L),se.error(e==="ar"?"فشل تصدير CSV":"Failed to export CSV")}},F=()=>{try{const U=[[e==="ar"?"رقم الفاتورة":"Invoice #",e==="ar"?"العميل":"Client",e==="ar"?"المستشار":"Consultant",e==="ar"?"المبلغ":"Amount",e==="ar"?"طريقة الدفع":"Payment Method",e==="ar"?"التاريخ":"Date",e==="ar"?"الحالة":"Status"].join(","),...t.map(ae=>[ae.invoiceNumber||"",`"${ae.client}"`,`"${ae.consultant}"`,ae.amount,ae.method,ae.date,ae.status].join(","))].join(`
`),G="\uFEFF",H=new Blob([G+U],{type:"text/csv;charset=utf-8;"}),V=window.URL.createObjectURL(H),K=document.createElement("a");K.href=V,K.download=`payments-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(K),K.click(),document.body.removeChild(K),window.URL.revokeObjectURL(V),se.success(e==="ar"?"تم تصدير ملف Excel بنجاح":"Excel exported successfully")}catch(L){console.error("Export Excel error:",L),se.error(e==="ar"?"فشل تصدير Excel":"Failed to export Excel")}},q=()=>{se.info(e==="ar"?"ميزة تصدير PDF قيد التطوير":"PDF export feature is under development")},$=L=>{h(L.status||"all"),p(L.method||"all"),g(L.dateRange||null),v(L.client||""),b(!1)},B=()=>{h("all"),p("all"),g(null),v(""),A.resetFields()},I=[{title:e==="ar"?"رقم الفاتورة":"Invoice #",dataIndex:"invoiceNumber",key:"invoiceNumber"},{title:e==="ar"?"العميل":"Client",dataIndex:"client",key:"client",sorter:(L,U)=>L.client.localeCompare(U.client)},{title:e==="ar"?"المستشار":"Consultant",dataIndex:"consultant",key:"consultant"},{title:e==="ar"?"الخدمة":"Service",dataIndex:"service",key:"service"},{title:e==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:(L,U)=>{const G=typeof L=="string"?parseFloat(L):L||0;return`${isNaN(G)?0:G.toFixed(2)} ${U.currency||"SAR"}`},sorter:(L,U)=>{const G=typeof L.amount=="string"?parseFloat(L.amount):L.amount||0,H=typeof U.amount=="string"?parseFloat(U.amount):U.amount||0;return(isNaN(G)?0:G)-(isNaN(H)?0:H)}},{title:e==="ar"?"طريقة الدفع":"Payment Method",dataIndex:"method",key:"method",render:L=>R(L)},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date",sorter:(L,U)=>new Date(L.date)-new Date(U.date)},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:L=>l.jsx($e,{color:N(L),children:j(L)}),filters:[{text:e==="ar"?"مكتمل":"Completed",value:"COMPLETED"},{text:e==="ar"?"قيد الانتظار":"Pending",value:"PENDING"},{text:e==="ar"?"فشل":"Failed",value:"FAILED"}],onFilter:(L,U)=>U.status===L},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(L,U)=>l.jsx(J,{icon:l.jsx(Mr,{}),onClick:async()=>{try{const G=localStorage.getItem("accessToken")||"",H=`https://jadwa.developteam.siteapi/admin/payments/${U.id}/invoice`,K=await(await fetch(H,{headers:{Authorization:`Bearer ${G}`}})).json();K.success&&K.invoice?(_(K.invoice),S(!0)):se.error(e==="ar"?"فشل تحميل بيانات الفاتورة":"Failed to load invoice data")}catch{se.error(e==="ar"?"فشل تحميل الفاتورة":"Failed to download invoice")}},disabled:U.status!=="COMPLETED",children:e==="ar"?"فاتورة":"Invoice"})}];return c&&!s?l.jsx(Fn,{message:e==="ar"?"خطأ في تحميل البيانات":"Error Loading Data",description:c,type:"error",showIcon:!0,action:l.jsx(J,{size:"small",onClick:T,children:e==="ar"?"إعادة المحاولة":"Retry"})}):l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"المدفوعات":"Payments"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع المعاملات المالية":"Manage all financial transactions"})]}),l.jsxs(ze,{className:"flex-wrap",children:[l.jsx(J,{icon:l.jsx(Yq,{}),onClick:()=>b(!0),children:e==="ar"?"فلترة متقدمة":"Advanced Filter"}),l.jsxs(be,{value:d,onChange:h,style:{width:150},children:[l.jsx(be.Option,{value:"all",children:e==="ar"?"الكل":"All"}),l.jsx(be.Option,{value:"COMPLETED",children:e==="ar"?"مكتمل":"Completed"}),l.jsx(be.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),l.jsx(be.Option,{value:"FAILED",children:e==="ar"?"فشل":"Failed"})]}),l.jsx(J,{icon:l.jsx(Er,{}),onClick:T,loading:s,children:e==="ar"?"تحديث":"Refresh"}),l.jsxs(ze.Compact,{children:[l.jsx(J,{icon:l.jsx(Bq,{}),onClick:F,children:"Excel"}),l.jsx(J,{icon:l.jsx(Mr,{}),onClick:P,children:"CSV"}),l.jsx(J,{icon:l.jsx(Am,{}),onClick:q,children:"PDF"})]})]})]}),l.jsxs(Re,{gutter:[16,16],className:"mb-6",children:[l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:e==="ar"?"إجمالي المدفوعات":"Total Payments",value:Number(D.total).toFixed(2),prefix:l.jsx(Yn,{}),suffix:"SAR",valueStyle:{color:"#7a8c66"}})})}),l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:e==="ar"?"المكتملة":"Completed",value:Number(D.completed).toFixed(2),prefix:l.jsx(Yn,{}),suffix:"SAR",valueStyle:{color:"#52c41a"}})})}),l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:e==="ar"?"قيد الانتظار":"Pending",value:D.pending,valueStyle:{color:"#faad14"}})})}),l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:e==="ar"?"فاشلة":"Failed",value:D.failed,valueStyle:{color:"#ff4d4f"}})})})]}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsx(Pt,{columns:I,dataSource:t,rowKey:"id",loading:s,pagination:{pageSize:10,showSizeChanger:!0,showTotal:L=>e==="ar"?`إجمالي ${L} دفعة`:`Total ${L} payments`},scroll:{x:"max-content"}})})}),l.jsx(At,{title:e==="ar"?"فلترة متقدمة":"Advanced Filter",open:x,onCancel:()=>b(!1),footer:null,width:600,children:l.jsxs(W,{form:A,layout:"vertical",onFinish:$,initialValues:{status:d,method:f,dateRange:y,client:m},children:[l.jsx(W.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:l.jsxs(be,{placeholder:e==="ar"?"اختر الحالة":"Select status",children:[l.jsx(be.Option,{value:"all",children:e==="ar"?"الكل":"All"}),l.jsx(be.Option,{value:"COMPLETED",children:e==="ar"?"مكتمل":"Completed"}),l.jsx(be.Option,{value:"PENDING",children:e==="ar"?"قيد الانتظار":"Pending"}),l.jsx(be.Option,{value:"FAILED",children:e==="ar"?"فشل":"Failed"})]})}),l.jsx(W.Item,{name:"method",label:e==="ar"?"طريقة الدفع":"Payment Method",children:l.jsxs(be,{placeholder:e==="ar"?"اختر طريقة الدفع":"Select payment method",children:[l.jsx(be.Option,{value:"all",children:e==="ar"?"الكل":"All"}),l.jsx(be.Option,{value:"CARD",children:e==="ar"?"بطاقة":"Card"}),l.jsx(be.Option,{value:"MADA",children:e==="ar"?"مدى":"Mada"}),l.jsx(be.Option,{value:"BANK_TRANSFER",children:e==="ar"?"تحويل بنكي":"Bank Transfer"})]})}),l.jsx(W.Item,{name:"dateRange",label:e==="ar"?"نطاق التاريخ":"Date Range",children:l.jsx(Hue,{style:{width:"100%"}})}),l.jsx(W.Item,{name:"client",label:e==="ar"?"اسم العميل":"Client Name",children:l.jsx(ye,{placeholder:e==="ar"?"ابحث عن عميل":"Search client",allowClear:!0})}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",children:e==="ar"?"تطبيق":"Apply"}),l.jsx(J,{onClick:B,children:e==="ar"?"إعادة تعيين":"Reset"}),l.jsx(J,{onClick:()=>b(!1),children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),l.jsxs(At,{title:e==="ar"?"فاتورة":"Invoice",open:w,onCancel:()=>{S(!1),_(null)},footer:[l.jsx(J,{onClick:()=>{S(!1),_(null)},children:e==="ar"?"إغلاق":"Close"},"close"),l.jsx(J,{type:"primary",icon:l.jsx(Am,{}),onClick:()=>{if(!E)return;const L=window.open("","_blank");if(!L){se.error(e==="ar"?"يرجى السماح بالنوافذ المنبثقة لتحميل الفاتورة":"Please allow popups to download invoice");return}L.document.write(`
                <!DOCTYPE html>
                <html>
                  <head>
                    <title>Invoice ${E.invoiceNumber}</title>
                    <style>
                      @media print {
                        @page {
                          size: A4;
                          margin: 0;
                        }
                        body {
                          margin: 0;
                          padding: 0;
                        }
                      }
                    </style>
                  </head>
                  <body>
                    ${document.getElementById("invoice-print-content")?.innerHTML||""}
                  </body>
                </html>
              `),L.document.close(),setTimeout(()=>{L.print(),se.success(e==="ar"?"جاري تحميل الفاتورة...":"Downloading invoice...")},250)},className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"تحميل PDF":"Download PDF"},"download")],width:900,style:{top:20},children:[l.jsx("div",{id:"invoice-print-content",style:{display:"none"},children:E&&l.jsx(pO,{invoice:E,language:e})}),l.jsx("div",{style:{maxHeight:"70vh",overflow:"auto"},children:E&&l.jsx(pO,{invoice:E,language:e})})]})]})},{TextArea:Gl}=ye,Gue=()=>{const{t:n,language:e}=Ze(),[t,r]=M.useState([]),[i,a]=M.useState([]),[s,o]=M.useState({pages:!1,articles:!1}),[c,u]=M.useState(null),[d,h]=M.useState(!1),[f,p]=M.useState(!1),[y,g]=M.useState(null),[m]=W.useForm(),[v]=W.useForm();M.useEffect(()=>{x(),b()},[]);const x=async()=>{try{o(j=>({...j,pages:!0})),u(null);const N=(await Td.getPages({isPublished:!1})).pages.map(j=>({id:j.id,title:e==="ar"&&j.titleAr||j.title,slug:j.slug,status:j.isPublished?"published":"draft",isPublished:j.isPublished,order:j.order}));r(N)}catch(T){console.error("Error fetching pages:",T),u(T.message||"Failed to load pages"),se.error(e==="ar"?"فشل تحميل الصفحات":"Failed to load pages")}finally{o(T=>({...T,pages:!1}))}},b=async()=>{try{o(j=>({...j,articles:!0})),u(null);const N=(await ar.getArticles({status:"all"})).articles.map(j=>({id:j.id,title:e==="ar"&&j.titleAr||j.title,date:j.publishedAt?qe(j.publishedAt).format("YYYY-MM-DD"):qe(j.createdAt).format("YYYY-MM-DD"),status:j.status,views:j.views||0,category:j.category}));a(N)}catch(T){console.error("Error fetching articles:",T),u(T.message||"Failed to load articles"),se.error(e==="ar"?"فشل تحميل المقالات":"Failed to load articles")}finally{o(T=>({...T,articles:!1}))}},A=async T=>{try{y?(await Td.updatePage(y.id,T),se.success(e==="ar"?"تم تحديث الصفحة بنجاح":"Page updated successfully")):(await Td.createPage(T),se.success(e==="ar"?"تم إنشاء الصفحة بنجاح":"Page created successfully")),h(!1),g(null),m.resetFields(),x()}catch(N){se.error(N.message||(e==="ar"?"فشل حفظ الصفحة":"Failed to save page"))}},w=async T=>{try{T.tags&&typeof T.tags=="string"&&(T.tags=T.tags.split(",").map(N=>N.trim()).filter(Boolean)),y?(await ar.updateArticle(y.id,T),se.success(e==="ar"?"تم تحديث المقال بنجاح":"Article updated successfully")):(await ar.createArticle(T),se.success(e==="ar"?"تم إنشاء المقال بنجاح":"Article created successfully")),p(!1),g(null),v.resetFields(),b()}catch(N){se.error(N.message||(e==="ar"?"فشل حفظ المقال":"Failed to save article"))}},S=async T=>{try{await ar.publishArticle(T),se.success(e==="ar"?"تم نشر المقال بنجاح":"Article published successfully"),b()}catch(N){se.error(N.message||(e==="ar"?"فشل نشر المقال":"Failed to publish article"))}},E=async T=>{try{await Td.deletePage(T),se.success(e==="ar"?"تم حذف الصفحة بنجاح":"Page deleted successfully"),x()}catch(N){se.error(N.message||(e==="ar"?"فشل حذف الصفحة":"Failed to delete page"))}},_=async T=>{try{await ar.deleteArticle(T),se.success(e==="ar"?"تم حذف المقال بنجاح":"Article deleted successfully"),b()}catch(N){se.error(N.message||(e==="ar"?"فشل حذف المقال":"Failed to delete article"))}},D=[{title:e==="ar"?"العنوان":"Title",dataIndex:"title",key:"title",sorter:(T,N)=>T.title.localeCompare(N.title)},{title:e==="ar"?"الرابط":"Slug",dataIndex:"slug",key:"slug"},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:T=>l.jsx($e,{color:T==="published"?"green":"orange",children:T==="published"?e==="ar"?"منشور":"Published":e==="ar"?"مسودة":"Draft"}),filters:[{text:e==="ar"?"منشور":"Published",value:"published"},{text:e==="ar"?"مسودة":"Draft",value:"draft"}],onFilter:(T,N)=>N.status===T},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(T,N)=>l.jsxs(ze,{children:[l.jsx(J,{icon:l.jsx(_r,{}),onClick:()=>{g(N),h(!0)},children:e==="ar"?"تعديل":"Edit"}),l.jsx(J,{danger:!0,icon:l.jsx(wi,{}),onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذه الصفحة؟":"Are you sure you want to delete this page?")&&E(N.id)},children:e==="ar"?"حذف":"Delete"})]})}],C=[{title:e==="ar"?"العنوان":"Title",dataIndex:"title",key:"title",sorter:(T,N)=>T.title.localeCompare(N.title)},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date",sorter:(T,N)=>new Date(T.date)-new Date(N.date)},{title:e==="ar"?"الفئة":"Category",dataIndex:"category",key:"category"},{title:e==="ar"?"المشاهدات":"Views",dataIndex:"views",key:"views",sorter:(T,N)=>T.views-N.views},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:T=>{const N={PUBLISHED:"green",DRAFT:"orange",ARCHIVED:"gray"},j={PUBLISHED:e==="ar"?"منشور":"Published",DRAFT:e==="ar"?"مسودة":"Draft",ARCHIVED:e==="ar"?"مؤرشف":"Archived"};return l.jsx($e,{color:N[T],children:j[T]})}},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(T,N)=>l.jsxs(ze,{children:[N.status!=="PUBLISHED"&&l.jsx(J,{type:"primary",icon:l.jsx(Zt,{}),className:"bg-green-600",onClick:()=>S(N.id),children:e==="ar"?"نشر":"Publish"}),l.jsx(J,{icon:l.jsx(_r,{}),onClick:()=>{g(N),p(!0)},children:e==="ar"?"تعديل":"Edit"}),l.jsx(J,{danger:!0,icon:l.jsx(wi,{}),onClick:()=>{window.confirm(e==="ar"?"هل أنت متأكد من حذف هذا المقال؟":"Are you sure you want to delete this article?")&&_(N.id)},children:e==="ar"?"حذف":"Delete"})]})}],k=[{key:"pages",label:e==="ar"?"الصفحات":"Pages",children:l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[l.jsx(J,{icon:l.jsx(Er,{}),onClick:x,loading:s.pages,children:e==="ar"?"تحديث":"Refresh"}),l.jsx(J,{type:"primary",icon:l.jsx(gr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{g(null),m.resetFields(),h(!0)},children:e==="ar"?"إضافة صفحة":"Add Page"})]}),l.jsx(Pt,{columns:D,dataSource:t,rowKey:"id",loading:s.pages,pagination:{pageSize:10}})]})},{key:"blog",label:e==="ar"?"المدونة":"Blog",children:l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[l.jsx(J,{icon:l.jsx(Er,{}),onClick:b,loading:s.articles,children:e==="ar"?"تحديث":"Refresh"}),l.jsx(J,{type:"primary",icon:l.jsx(gr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{g(null),v.resetFields(),p(!0)},children:e==="ar"?"إضافة مقال":"Add Post"})]}),l.jsx(Pt,{columns:C,dataSource:i,rowKey:"id",loading:s.articles,pagination:{pageSize:10}})]})}];return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:"CMS"}),l.jsx("p",{className:"text-gray-500",children:e==="ar"?"إدارة المحتوى والصفحات والمقالات":"Manage content, pages, and articles"})]}),c&&l.jsx(Fn,{message:e==="ar"?"خطأ":"Error",description:c,type:"error",closable:!0,onClose:()=>u(null),className:"mb-4"}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx(la,{items:k})}),l.jsx(At,{title:y?e==="ar"?"تعديل الصفحة":"Edit Page":e==="ar"?"إضافة صفحة":"Add Page",open:d,onCancel:()=>{h(!1),g(null),m.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:800,destroyOnHidden:!0,className:"modern-modal",children:l.jsxs(W,{form:m,layout:"vertical",onFinish:A,initialValues:y||{isPublished:!1,order:0},children:[l.jsx(W.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"slug",label:"Slug",rules:[{required:!0}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"content",label:e==="ar"?"المحتوى (إنجليزي)":"Content (English)",children:l.jsx(Gl,{rows:6})}),l.jsx(W.Item,{name:"contentAr",label:e==="ar"?"المحتوى (عربي)":"Content (Arabic)",children:l.jsx(Gl,{rows:6})}),l.jsx(W.Item,{name:"order",label:e==="ar"?"الترتيب":"Order",children:l.jsx(Na,{min:0})}),l.jsx(W.Item,{name:"isPublished",valuePropName:"checked",children:l.jsx(pi,{checkedChildren:e==="ar"?"منشور":"Published",unCheckedChildren:e==="ar"?"مسودة":"Draft"})}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),l.jsx(J,{onClick:()=>{h(!1),g(null),m.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),l.jsx(At,{title:y?e==="ar"?"تعديل المقال":"Edit Article":e==="ar"?"إضافة مقال":"Add Article",open:f,onCancel:()=>{p(!1),g(null),v.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:800,destroyOnHidden:!0,className:"modern-modal",children:l.jsxs(W,{form:v,layout:"vertical",onFinish:w,initialValues:y?{...y,tags:y.tags?typeof y.tags=="string"?JSON.parse(y.tags).join(", "):y.tags.join(", "):""}:{status:"DRAFT"},children:[l.jsx(W.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0}],children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:l.jsx(ye,{})}),l.jsx(W.Item,{name:"content",label:e==="ar"?"المحتوى (إنجليزي)":"Content (English)",children:l.jsx(Gl,{rows:8})}),l.jsx(W.Item,{name:"contentAr",label:e==="ar"?"المحتوى (عربي)":"Content (Arabic)",children:l.jsx(Gl,{rows:8})}),l.jsx(W.Item,{name:"excerpt",label:e==="ar"?"الملخص (إنجليزي)":"Excerpt (English)",children:l.jsx(Gl,{rows:3})}),l.jsx(W.Item,{name:"excerptAr",label:e==="ar"?"الملخص (عربي)":"Excerpt (Arabic)",children:l.jsx(Gl,{rows:3})}),l.jsx(W.Item,{name:"category",label:e==="ar"?"الفئة":"Category",children:l.jsx(ye,{placeholder:e==="ar"?"الفئة":"Category"})}),l.jsx(W.Item,{name:"featuredImage",label:e==="ar"?"صورة مميزة":"Featured Image",children:l.jsx(ye,{placeholder:e==="ar"?"رابط الصورة":"Image URL"})}),l.jsx(W.Item,{name:"tags",label:e==="ar"?"العلامات":"Tags",children:l.jsx(ye,{placeholder:e==="ar"?"علامات مفصولة بفواصل":"Tags separated by commas"})}),l.jsx(W.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:l.jsxs(be,{children:[l.jsx(be.Option,{value:"DRAFT",children:e==="ar"?"مسودة":"Draft"}),l.jsx(be.Option,{value:"PUBLISHED",children:e==="ar"?"منشور":"Published"})]})}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),l.jsx(J,{onClick:()=>{p(!1),g(null),v.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{TextArea:Qf}=ye,{RangePicker:Z1e}=ho,Yue=()=>{const{t:n,language:e}=Ze(),t=Rt(),r=jl(),[i,a]=M.useState([]),[s,o]=M.useState(!1),[c,u]=M.useState(null),[d,h]=M.useState(""),[f,p]=M.useState("all"),[y,g]=M.useState("all"),[m,v]=M.useState(!1),[x,b]=M.useState(!1),[A,w]=M.useState(null),[S,E]=M.useState(null),[_]=W.useForm(),[D,C]=M.useState({total:0,published:0,draft:0,views:0});M.useEffect(()=>{k()},[d,f,y]),M.useEffect(()=>{r.pathname==="/admin/articles"&&k()},[r.pathname]),M.useEffect(()=>{T()},[i]);const k=async()=>{try{o(!0),u(null);const B={};f&&f!=="all"&&(B.status=f),d&&(B.search=d),y&&y!=="all"&&(B.category=y);const I=await ar.getArticles(B),L="https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site",U=I.articles.map(G=>{let H=G.featuredImage;return H&&(/^https?:\/\//.test(H)?(H.includes(`${L}${L}`)||H.match(/http:\/\/localhost:5000/g)?.length>1)&&(H=H.replace(/http:\/\/localhost:5000/g,"").replace(/^\/+/,""),H=`https://jadwa.developteam.site${H}`):H=H.startsWith("/")?`${L}${H}`:`${L}/${H}`),{...G,key:G.id,title:e==="ar"&&G.titleAr||G.title,date:G.publishedAt?qe(G.publishedAt).format("YYYY-MM-DD"):qe(G.createdAt).format("YYYY-MM-DD"),featuredImage:H}});a(U)}catch(B){console.error("Error fetching articles:",B),u(B.message||"Failed to load articles"),se.error(e==="ar"?"فشل تحميل المقالات":"Failed to load articles")}finally{o(!1)}},T=()=>{const B=i.length,I=i.filter(G=>G.status==="PUBLISHED").length,L=i.filter(G=>G.status==="DRAFT").length,U=i.reduce((G,H)=>G+(H.views||0),0);C({total:B,published:I,draft:L,views:U})},N=async B=>{try{B.tags&&typeof B.tags=="string"&&(B.tags=B.tags.split(",").map(I=>I.trim()).filter(Boolean)),A?(await ar.updateArticle(A.id,B),se.success(e==="ar"?"تم تحديث المقال بنجاح":"Article updated successfully")):(await ar.createArticle(B),se.success(e==="ar"?"تم إنشاء المقال بنجاح":"Article created successfully")),v(!1),w(null),_.resetFields(),k()}catch(I){se.error(I.message||(e==="ar"?"فشل حفظ المقال":"Failed to save article"))}},j=async B=>{try{await ar.publishArticle(B),se.success(e==="ar"?"تم نشر المقال بنجاح":"Article published successfully"),k()}catch(I){se.error(I.message||(e==="ar"?"فشل نشر المقال":"Failed to publish article"))}},R=async B=>{try{await ar.deleteArticle(B),se.success(e==="ar"?"تم حذف المقال بنجاح":"Article deleted successfully"),k()}catch(I){se.error(I.message||(e==="ar"?"فشل حذف المقال":"Failed to delete article"))}},P=B=>{E(B),b(!0)},F=[...new Set(i.map(B=>B.category).filter(Boolean))],q=[{title:e==="ar"?"المقال":"Article",key:"article",width:300,render:(B,I)=>l.jsxs("div",{className:"flex items-center gap-3",children:[I.featuredImage?l.jsx(Sr,{src:I.featuredImage,alt:I.title,width:60,height:60,className:"rounded-lg object-cover",preview:!1}):l.jsx("div",{className:"w-15 h-15 bg-gradient-to-br from-olive-green-400 to-turquoise-400 rounded-lg flex items-center justify-center",children:l.jsx(Lc,{className:"text-white text-xl"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-semibold text-gray-900 truncate",children:I.title}),I.category&&l.jsx($e,{color:"blue",className:"mt-1",children:I.category})]})]})},{title:e==="ar"?"المؤلف":"Author",dataIndex:["author","email"],key:"author",render:B=>B||"-"},{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date",sorter:(B,I)=>new Date(B.date)-new Date(I.date)},{title:e==="ar"?"المشاهدات":"Views",dataIndex:"views",key:"views",sorter:(B,I)=>(B.views||0)-(I.views||0),render:B=>l.jsx(gs,{count:B||0,showZero:!0,style:{backgroundColor:"#52c41a"}})},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:B=>{const I={PUBLISHED:"green",DRAFT:"orange",ARCHIVED:"gray"},L={PUBLISHED:e==="ar"?"منشور":"Published",DRAFT:e==="ar"?"مسودة":"Draft",ARCHIVED:e==="ar"?"مؤرشف":"Archived"};return l.jsx($e,{color:I[B],children:L[B]})},filters:[{text:e==="ar"?"منشور":"Published",value:"PUBLISHED"},{text:e==="ar"?"مسودة":"Draft",value:"DRAFT"},{text:e==="ar"?"مؤرشف":"Archived",value:"ARCHIVED"}],onFilter:(B,I)=>I.status===B},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",fixed:"right",width:200,render:(B,I)=>l.jsxs(ze,{size:"small",children:[l.jsx(yi,{title:e==="ar"?"معاينة":"Preview",children:l.jsx(J,{icon:l.jsx(Wn,{}),size:"small",onClick:()=>P(I)})}),l.jsx(yi,{title:e==="ar"?"تعديل":"Edit",children:l.jsx(J,{icon:l.jsx(_r,{}),size:"small",onClick:()=>t(`/admin/articles/edit/${I.id}`)})}),I.status!=="PUBLISHED"&&l.jsx(yi,{title:e==="ar"?"نشر":"Publish",children:l.jsx(ys,{title:e==="ar"?"هل أنت متأكد من نشر هذا المقال؟":"Are you sure to publish this article?",onConfirm:()=>j(I.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:l.jsx(J,{type:"primary",icon:l.jsx(Zt,{}),size:"small",className:"bg-green-600"})})}),l.jsx(yi,{title:e==="ar"?"حذف":"Delete",children:l.jsx(ys,{title:e==="ar"?"هل أنت متأكد من حذف هذا المقال؟":"Are you sure to delete this article?",onConfirm:()=>R(I.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:l.jsx(J,{danger:!0,icon:l.jsx(wi,{}),size:"small"})})})]})}],$=B=>e==="ar"?`إجمالي ${B} مقال`:`Total ${B} articles`;return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"المقالات":"Articles"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع المقالات والمدونة":"Manage all articles and blog posts"})]}),l.jsxs(ze,{className:"flex-wrap",children:[l.jsx(J,{icon:l.jsx(Er,{}),onClick:k,loading:s,children:e==="ar"?"تحديث":"Refresh"}),l.jsx(J,{icon:l.jsx(kq,{}),children:e==="ar"?"تصدير":"Export"}),l.jsx(J,{type:"primary",icon:l.jsx(gr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-lg",size:"large",onClick:()=>t("/admin/articles/new"),children:e==="ar"?"إضافة مقال جديد":"Add New Article"})]})]}),l.jsxs(Re,{gutter:[16,16],className:"mb-6",children:[l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{className:"glass-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"إجمالي المقالات":"Total Articles",value:D.total,prefix:l.jsx(Lc,{className:"text-olive-green-600"}),valueStyle:{color:"#7a8c66"}})})}),l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{className:"glass-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"منشورة":"Published",value:D.published,prefix:l.jsx(Zt,{className:"text-green-600"}),valueStyle:{color:"#52c41a"}})})}),l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{className:"glass-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"مسودات":"Drafts",value:D.draft,prefix:l.jsx(qq,{className:"text-orange-600"}),valueStyle:{color:"#faad14"}})})}),l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{className:"glass-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"إجمالي المشاهدات":"Total Views",value:D.views,prefix:l.jsx(Wn,{className:"text-blue-600"}),valueStyle:{color:"#1890ff"}})})})]}),l.jsx(Ee,{className:"glass-card shadow-professional-lg rounded-xl border-0 mb-6",children:l.jsxs(Re,{gutter:[16,16],children:[l.jsx(me,{xs:24,sm:12,md:8,children:l.jsx(ye,{placeholder:e==="ar"?"ابحث في المقالات...":"Search articles...",prefix:l.jsx(ua,{}),value:d,onChange:B=>h(B.target.value),allowClear:!0,size:"large"})}),l.jsx(me,{xs:24,sm:12,md:4,children:l.jsxs(be,{value:f,onChange:p,style:{width:"100%"},size:"large",children:[l.jsx(be.Option,{value:"all",children:e==="ar"?"جميع الحالات":"All Status"}),l.jsx(be.Option,{value:"PUBLISHED",children:e==="ar"?"منشور":"Published"}),l.jsx(be.Option,{value:"DRAFT",children:e==="ar"?"مسودة":"Draft"}),l.jsx(be.Option,{value:"ARCHIVED",children:e==="ar"?"مؤرشف":"Archived"})]})}),l.jsx(me,{xs:24,sm:12,md:4,children:l.jsxs(be,{value:y,onChange:g,style:{width:"100%"},size:"large",children:[l.jsx(be.Option,{value:"all",children:e==="ar"?"جميع الفئات":"All Categories"}),F.map(B=>l.jsx(be.Option,{value:B,children:B},B))]})})]})}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx(Pt,{columns:q,dataSource:i,rowKey:"id",loading:s,pagination:{pageSize:10,showSizeChanger:!0,showTotal:$,showQuickJumper:!0},scroll:{x:1200}})}),l.jsx(At,{title:A?e==="ar"?"تعديل المقال":"Edit Article":e==="ar"?"إضافة مقال جديد":"Add New Article",open:m,onCancel:()=>{v(!1),w(null),_.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:900,destroyOnHidden:!0,className:"modern-modal article-modal",children:l.jsxs(W,{form:_,layout:"vertical",onFinish:N,initialValues:A||{status:"DRAFT"},children:[l.jsxs(Re,{gutter:16,children:[l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0}],children:l.jsx(ye,{placeholder:e==="ar"?"العنوان بالإنجليزية":"Title in English"})})}),l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:l.jsx(ye,{placeholder:e==="ar"?"العنوان بالعربية":"Title in Arabic"})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"content",label:e==="ar"?"المحتوى (إنجليزي)":"Content (English)",children:l.jsx(Qf,{rows:8,placeholder:e==="ar"?"المحتوى بالإنجليزية":"Content in English"})})}),l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"contentAr",label:e==="ar"?"المحتوى (عربي)":"Content (Arabic)",children:l.jsx(Qf,{rows:8,placeholder:e==="ar"?"المحتوى بالعربية":"Content in Arabic"})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"excerpt",label:e==="ar"?"الملخص (إنجليزي)":"Excerpt (English)",children:l.jsx(Qf,{rows:3,placeholder:e==="ar"?"ملخص المقال بالإنجليزية":"Article excerpt in English"})})}),l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"excerptAr",label:e==="ar"?"الملخص (عربي)":"Excerpt (Arabic)",children:l.jsx(Qf,{rows:3,placeholder:e==="ar"?"ملخص المقال بالعربية":"Article excerpt in Arabic"})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{span:8,children:l.jsx(W.Item,{name:"category",label:e==="ar"?"الفئة":"Category",children:l.jsx(ye,{placeholder:e==="ar"?"الفئة":"Category"})})}),l.jsx(me,{span:8,children:l.jsx(W.Item,{name:"featuredImage",label:e==="ar"?"صورة مميزة":"Featured Image",children:l.jsx(ye,{placeholder:e==="ar"?"رابط الصورة":"Image URL"})})}),l.jsx(me,{span:8,children:l.jsx(W.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:l.jsxs(be,{children:[l.jsx(be.Option,{value:"DRAFT",children:e==="ar"?"مسودة":"Draft"}),l.jsx(be.Option,{value:"PUBLISHED",children:e==="ar"?"منشور":"Published"}),l.jsx(be.Option,{value:"ARCHIVED",children:e==="ar"?"مؤرشف":"Archived"})]})})})]}),l.jsx(W.Item,{name:"tags",label:e==="ar"?"العلامات":"Tags",children:l.jsx(ye,{placeholder:e==="ar"?"علامات مفصولة بفواصل":"Tags separated by commas"})}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),l.jsx(J,{onClick:()=>{v(!1),w(null),_.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})}),l.jsx(At,{title:e==="ar"?"معاينة المقال":"Article Preview",open:x,onCancel:()=>{b(!1),E(null)},maskClosable:!0,keyboard:!0,footer:null,width:800,destroyOnHidden:!0,className:"modern-modal",children:S&&l.jsxs("div",{children:[S.featuredImage&&l.jsx(Sr,{src:S.featuredImage,alt:S.title,className:"w-full mb-4 rounded-lg"}),l.jsx("h2",{className:"text-2xl font-bold mb-4",children:S.title}),l.jsx("div",{dangerouslySetInnerHTML:{__html:S.content||S.contentAr||""}})]})})]})},{TextArea:mO}=ye,Kue=()=>{const{t:n,language:e}=Ze(),[t,r]=M.useState([]),[i,a]=M.useState(!1),[s,o]=M.useState(null),[c,u]=M.useState(""),[d,h]=M.useState(!1),[f,p]=M.useState(null),[y,g]=M.useState(null),[m]=W.useForm(),[v,x]=M.useState({total:0,active:0,revenue:0});M.useEffect(()=>{b()},[c]),M.useEffect(()=>{A()},[t]);const b=async()=>{try{a(!0),o(null);const D={};c&&(D.search=c);const k=(await Hs.getServices(D)).services.map(T=>({...T,key:T.id,title:e==="ar"&&T.titleAr||T.title}));r(k)}catch(D){console.error("Error fetching services:",D),o(D.message||"Failed to load services"),se.error(e==="ar"?"فشل تحميل الخدمات":"Failed to load services")}finally{a(!1)}},A=()=>{const D=t.length,C=t.filter(T=>T.status==="ACTIVE").length,k=t.reduce((T,N)=>T+(parseFloat(N.price)||0),0);x({total:D,active:C,revenue:k})},w=async D=>{try{const C=new FormData;C.append("file",D),C.append("ownerType","SERVICE"),C.append("ownerId",f?.id||"new");const k=await Zr.uploadFile(C);if(k.file&&k.file.fileUrl)g(k.file.fileUrl),m.setFieldsValue({image:k.file.fileUrl}),se.success(e==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully");else throw new Error("File upload failed")}catch(C){se.error(C.message||(e==="ar"?"فشل رفع الصورة":"Failed to upload image"))}return!1},S=async D=>{try{let C=y||f?.image;D.image&&typeof D.image=="string"&&(C=D.image);const k={...D,price:parseFloat(D.price),order:parseInt(D.order||0),image:C};delete k.duration,f?(await Hs.updateService(f.id,k),se.success(e==="ar"?"تم تحديث الخدمة بنجاح":"Service updated successfully")):(await Hs.createService(k),se.success(e==="ar"?"تم إنشاء الخدمة بنجاح":"Service created successfully")),h(!1),p(null),g(null),m.resetFields(),b()}catch(C){se.error(C.message||(e==="ar"?"فشل حفظ الخدمة":"Failed to save service"))}},E=async D=>{try{await Hs.deleteService(D),se.success(e==="ar"?"تم حذف الخدمة بنجاح":"Service deleted successfully"),b()}catch(C){se.error(C.message||(e==="ar"?"فشل حذف الخدمة":"Failed to delete service"))}},_=[{title:e==="ar"?"الخدمة":"Service",key:"service",width:300,render:(D,C)=>l.jsxs("div",{className:"flex items-center gap-3",children:[C.icon?l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-olive-green-400 to-turquoise-400 rounded-lg flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xl",children:C.icon})}):l.jsx(hl,{className:"text-2xl text-olive-green-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900",children:C.title}),C.category&&l.jsx($e,{color:"blue",className:"mt-1",children:C.category})]})]})},{title:e==="ar"?"السعر":"Price",dataIndex:"price",key:"price",render:D=>D?`${D} ${e==="ar"?"ريال":"SAR"}`:"-",sorter:(D,C)=>(D.price||0)-(C.price||0)},{title:e==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:D=>l.jsx($e,{color:D==="ACTIVE"?"green":"red",children:D==="ACTIVE"?e==="ar"?"نشط":"Active":e==="ar"?"غير نشط":"Inactive"})},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",fixed:"right",width:150,render:(D,C)=>l.jsxs(ze,{size:"small",children:[l.jsx(yi,{title:e==="ar"?"تعديل":"Edit",children:l.jsx(J,{icon:l.jsx(_r,{}),size:"small",onClick:()=>{p(C),g(C.image),m.setFieldsValue(C),h(!0)}})}),l.jsx(yi,{title:e==="ar"?"حذف":"Delete",children:l.jsx(ys,{title:e==="ar"?"هل أنت متأكد من حذف هذه الخدمة؟":"Are you sure to delete this service?",onConfirm:()=>E(C.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:l.jsx(J,{danger:!0,icon:l.jsx(wi,{}),size:"small"})})})]})}];return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"الخدمات":"Services"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"إدارة جميع الخدمات المتاحة":"Manage all available services"})]}),l.jsxs(ze,{className:"flex-wrap",children:[l.jsx(ye,{placeholder:e==="ar"?"ابحث في الخدمات...":"Search services...",prefix:l.jsx(ua,{}),value:c,onChange:D=>u(D.target.value),allowClear:!0,style:{width:250}}),l.jsx(J,{icon:l.jsx(Er,{}),onClick:b,loading:i,children:e==="ar"?"تحديث":"Refresh"}),l.jsx(J,{type:"primary",icon:l.jsx(gr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 shadow-lg",size:"large",onClick:()=>{p(null),g(null),m.resetFields(),h(!0)},children:e==="ar"?"إضافة خدمة جديدة":"Add New Service"})]})]}),l.jsxs(Re,{gutter:[16,16],className:"mb-6 relative z-10",children:[l.jsx(me,{xs:24,sm:12,md:8,children:l.jsx(Ee,{className:"glass-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"إجمالي الخدمات":"Total Services",value:v.total,prefix:l.jsx(hl,{className:"text-olive-green-600"}),valueStyle:{color:"#7a8c66"}})})}),l.jsx(me,{xs:24,sm:12,md:8,children:l.jsx(Ee,{className:"glass-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"نشطة":"Active",value:v.active,prefix:l.jsx($i,{className:"text-green-600"}),valueStyle:{color:"#52c41a"}})})}),l.jsx(me,{xs:24,sm:12,md:8,children:l.jsx(Ee,{className:"glass-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"إجمالي الإيرادات":"Total Revenue",value:v.revenue,prefix:l.jsx(Yn,{className:"text-blue-600"}),suffix:"SAR",valueStyle:{color:"#1890ff"}})})})]}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx(Pt,{columns:_,dataSource:t,rowKey:"id",loading:i,pagination:{pageSize:10,showSizeChanger:!0,showTotal:D=>e==="ar"?`إجمالي ${D} خدمة`:`Total ${D} services`},scroll:{x:1e3}})}),l.jsx(At,{title:f?e==="ar"?"تعديل الخدمة":"Edit Service":e==="ar"?"إضافة خدمة جديدة":"Add New Service",open:d,onCancel:()=>{h(!1),p(null),g(null),m.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:700,destroyOnHidden:!0,className:"modern-modal",children:l.jsxs(W,{form:m,layout:"vertical",onFinish:S,initialValues:f||{status:"ACTIVE"},children:[l.jsxs(Re,{gutter:16,children:[l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0}],children:l.jsx(ye,{})})}),l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:l.jsx(ye,{})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"description",label:e==="ar"?"الوصف (إنجليزي)":"Description (English)",children:l.jsx(mO,{rows:4})})}),l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"descriptionAr",label:e==="ar"?"الوصف (عربي)":"Description (Arabic)",children:l.jsx(mO,{rows:4})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{span:8,children:l.jsx(W.Item,{name:"price",label:e==="ar"?"السعر":"Price",children:l.jsx(Na,{min:0,style:{width:"100%"}})})}),l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"category",label:e==="ar"?"الفئة":"Category",rules:[{required:!0}],children:l.jsxs(be,{placeholder:e==="ar"?"اختر الفئة":"Select Category",children:[l.jsx(be.Option,{value:"ECONOMIC",children:e==="ar"?"اقتصادي":"Economic"}),l.jsx(be.Option,{value:"ADMINISTRATIVE",children:e==="ar"?"إداري":"Administrative"}),l.jsx(be.Option,{value:"FINANCIAL_ACCOUNTING",children:e==="ar"?"مالي ومحاسبي":"Financial & Accounting"}),l.jsx(be.Option,{value:"ANALYSIS_REPORTS",children:e==="ar"?"تحليل وتقارير":"Analysis & Reports"}),l.jsx(be.Option,{value:"FIELD_SURVEY",children:e==="ar"?"مسح ميداني":"Field Survey"}),l.jsx(be.Option,{value:"DIGITAL_CUSTOMER",children:e==="ar"?"عميل رقمي":"Digital Customer"})]})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"icon",label:e==="ar"?"الأيقونة":"Icon",children:l.jsx(ye,{placeholder:e==="ar"?"رمز الأيقونة (emoji)":"Icon emoji"})})}),l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:l.jsxs(be,{children:[l.jsx(be.Option,{value:"ACTIVE",children:e==="ar"?"نشط":"Active"}),l.jsx(be.Option,{value:"INACTIVE",children:e==="ar"?"غير نشط":"Inactive"})]})})})]}),l.jsx(W.Item,{name:"image",label:e==="ar"?"صورة الخدمة":"Service Image",children:l.jsx(Vt,{name:"image",listType:"picture-card",maxCount:1,beforeUpload:w,accept:"image/*",onRemove:()=>{g(null),m.setFieldsValue({image:null})},children:y||f?.image?l.jsx("img",{src:y||f?.image,alt:"service",style:{width:"100%"}}):l.jsxs("div",{children:[l.jsx(gr,{}),l.jsx("div",{style:{marginTop:8},children:e==="ar"?"رفع صورة":"Upload"})]})})}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-olive-green-600",children:e==="ar"?"حفظ":"Save"}),l.jsx(J,{onClick:()=>{h(!1),p(null),g(null),m.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{RangePicker:Xue}=ho,Jue=()=>{const{t:n,language:e}=Ze(),[t,r]=M.useState([]),[i,a]=M.useState(!1),[s,o]=M.useState(null),[c,u]=M.useState({totalRevenue:0,totalSessions:0,totalClients:0,averageRating:0});M.useEffect(()=>{d()},[s]);const d=async()=>{try{a(!0);const y={};s&&s.length===2&&(y.startDate=s[0].format("YYYY-MM-DD"),y.endDate=s[1].format("YYYY-MM-DD"));const g=await jt.getReports(y);r(g.reports||[]);const m=g.reports?.reduce((x,b)=>x+(b.revenue||0),0)||0,v=g.reports?.length||0;u({totalRevenue:m,totalSessions:v,totalClients:g.stats?.totalClients||0,averageRating:g.stats?.averageRating||0})}catch(y){console.error("Error fetching reports:",y),se.error(e==="ar"?"فشل تحميل التقارير":"Failed to load reports")}finally{a(!1)}},h=async()=>{try{const y={};s&&s.length===2&&(y.startDate=s[0].format("YYYY-MM-DD"),y.endDate=s[1].format("YYYY-MM-DD"));const g=localStorage.getItem("accessToken")||dl("accessToken")||"",v=`https://jadwa.developteam.siteapi/admin/reports/export/pdf?${new URLSearchParams(y).toString()}`,x=await fetch(v,{headers:{Authorization:`Bearer ${g}`}});if(!x.ok)throw new Error("Failed to download PDF");const b=await x.text(),A=new Blob([b],{type:"text/html"}),w=window.URL.createObjectURL(A),S=document.createElement("a");S.href=w,S.download=`reports-${qe().format("YYYY-MM-DD")}.html`,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(w);const E=window.open("","_blank");E&&(E.document.write(b),E.document.close(),setTimeout(()=>{E.print()},500)),se.success(e==="ar"?"تم تحميل ملف PDF بنجاح - استخدم Print to PDF في المتصفح":"PDF downloaded successfully - Use Print to PDF in browser")}catch(y){console.error("Export PDF error:",y),se.error(e==="ar"?"فشل تحميل PDF":"Failed to download PDF")}},f=async()=>{try{const y={};s&&s.length===2&&(y.startDate=s[0].format("YYYY-MM-DD"),y.endDate=s[1].format("YYYY-MM-DD"));const g=localStorage.getItem("accessToken")||dl("accessToken")||"",v=`https://jadwa.developteam.siteapi/admin/reports/export/csv?${new URLSearchParams(y).toString()}`,x=await fetch(v,{headers:{Authorization:`Bearer ${g}`}});if(!x.ok)throw new Error("Failed to download CSV");const b=await x.blob(),A=window.URL.createObjectURL(b),w=document.createElement("a");w.href=A,w.download=`reports-${qe().format("YYYY-MM-DD")}.csv`,document.body.appendChild(w),w.click(),document.body.removeChild(w),window.URL.revokeObjectURL(A),se.success(e==="ar"?"تم تحميل ملف CSV بنجاح":"CSV downloaded successfully")}catch(y){console.error("Export CSV error:",y),se.error(e==="ar"?"فشل تحميل CSV":"Failed to download CSV")}},p=[{title:e==="ar"?"التاريخ":"Date",dataIndex:"date",key:"date",render:y=>qe(y).format("YYYY-MM-DD HH:mm"),sorter:(y,g)=>new Date(y.date)-new Date(g.date)},{title:e==="ar"?"الإيرادات":"Revenue",dataIndex:"revenue",key:"revenue",render:y=>`${y||0} ${e==="ar"?"ريال":"SAR"}`,sorter:(y,g)=>(y.revenue||0)-(g.revenue||0)},{title:e==="ar"?"عدد الجلسات":"Sessions",dataIndex:"sessions",key:"sessions",sorter:(y,g)=>(y.sessions||0)-(g.sessions||0)},{title:e==="ar"?"عدد العملاء":"Clients",dataIndex:"clients",key:"clients",sorter:(y,g)=>(y.clients||0)-(g.clients||0)}];return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:e==="ar"?"التقارير":"Reports"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:e==="ar"?"تحميل وتصدير جميع التقارير":"Download and export all reports"})]}),l.jsxs(ze,{wrap:!0,children:[l.jsx(Xue,{value:s,onChange:o,size:"large",format:"YYYY-MM-DD"}),l.jsx(J,{icon:l.jsx(Er,{}),onClick:d,loading:i,size:"large",children:e==="ar"?"تحديث":"Refresh"}),l.jsx(J,{type:"primary",icon:l.jsx(Am,{}),onClick:h,size:"large",className:"bg-red-600 hover:bg-red-700 border-0",children:e==="ar"?"تحميل PDF":"Download PDF"}),l.jsx(J,{type:"primary",icon:l.jsx(Mr,{}),onClick:f,size:"large",className:"bg-green-600 hover:bg-green-700 border-0",children:e==="ar"?"تحميل CSV":"Download CSV"})]})]}),l.jsxs(Re,{gutter:[16,16],className:"mb-6",children:[l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"إجمالي الإيرادات":"Total Revenue",value:c.totalRevenue,prefix:l.jsx(Yn,{className:"text-olive-green-600"}),suffix:"SAR",valueStyle:{color:"#7a8c66",fontSize:"24px",fontWeight:"bold"}})})}),l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"إجمالي الجلسات":"Total Sessions",value:c.totalSessions,prefix:l.jsx(vn,{className:"text-blue-600"}),valueStyle:{color:"#1890ff",fontSize:"24px",fontWeight:"bold"}})})}),l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"إجمالي العملاء":"Total Clients",value:c.totalClients,prefix:l.jsx(tt,{className:"text-green-600"}),valueStyle:{color:"#52c41a",fontSize:"24px",fontWeight:"bold"}})})}),l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{className:"modern-kpi-card card-hover shadow-professional-lg border-0",children:l.jsx(pt,{title:e==="ar"?"عدد التقارير":"Total Reports",value:t.length,prefix:l.jsx(Kt,{className:"text-purple-600"}),valueStyle:{color:"#722ed1",fontSize:"24px",fontWeight:"bold"}})})})]}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 relative z-10",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsx(Pt,{columns:p,dataSource:t,rowKey:"id",loading:i,pagination:{pageSize:20,showSizeChanger:!0,showTotal:y=>e==="ar"?`إجمالي ${y} تقرير`:`Total ${y} reports`,pageSizeOptions:["10","20","50","100"]},scroll:{x:"max-content"}})})})]})},{TextArea:gO}=ye,Zue=()=>{const{language:n}=Ze(),[e,t]=M.useState([]),[r,i]=M.useState(!1),[a,s]=M.useState(""),[o,c]=M.useState(!1),[u,d]=M.useState(null),[h,f]=M.useState(null),[p]=W.useForm();M.useEffect(()=>{g()},[]),M.useEffect(()=>{h&&p.setFieldsValue({logo:h})},[h,p]);const y=E=>{if(!E||/file:\/\//.test(E)||/[A-Za-z]:[\\\/]/.test(E)||/fakepath/i.test(E))return null;if(/^https?:\/\//.test(E))return E;const _="https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site";return E.startsWith("/")?`${_}${E}`:`${_}/${E}`},g=async()=>{try{i(!0);const _=((await lc.getPartners()).partners||[]).map(D=>({...D,logo:y(D.logo)}));t(_)}catch(E){console.error("Error fetching partners:",E),se.error(n==="ar"?"فشل تحميل الشركاء":"Failed to load partners")}finally{i(!1)}},m=async E=>{try{const _=new FormData;_.append("file",E),_.append("ownerType","USER"),_.append("ownerId",u?.id||"new");const D=await Zr.uploadFile(_);if(D.success&&D.file){const C="https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site";let k=D.file.fileUrl||D.file.url;k&&!/^https?:\/\//.test(k)&&(k=k.startsWith("/")?`${C}${k}`:`${C}/${k}`);const T=y(k);return T?(f(T),p.setFieldsValue({logo:T}),se.success(n==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully")):se.error(n==="ar"?"فشل رفع الصورة: رابط غير صالح":"Failed to upload image: Invalid URL"),!1}}catch(_){console.error("Error uploading image:",_),se.error(n==="ar"?"فشل رفع الصورة":"Failed to upload image")}return!1},v=async E=>{try{const _=p.getFieldValue("logo");let D=null;h&&typeof h=="string"&&h.trim()?D=h.trim():_&&typeof _=="string"&&_.trim()?D=_.trim():E.logo&&typeof E.logo=="string"&&E.logo.trim()&&(D=E.logo.trim());const C={...E,logo:D||null};u?(await lc.updatePartner(u.id,C),se.success(n==="ar"?"تم تحديث الشريك بنجاح":"Partner updated successfully")):(await lc.createPartner(C),se.success(n==="ar"?"تم إضافة الشريك بنجاح":"Partner created successfully")),c(!1),d(null),f(null),p.resetFields(),g()}catch(_){console.error("Error saving partner:",_),se.error(n==="ar"?"فشل حفظ الشريك":"Failed to save partner")}},x=async E=>{try{await lc.deletePartner(E),se.success(n==="ar"?"تم حذف الشريك بنجاح":"Partner deleted successfully"),g()}catch(_){console.error("Error deleting partner:",_),se.error(n==="ar"?"فشل حذف الشريك":"Failed to delete partner")}},b=E=>{d(E);const _=y(E.logo);f(_),p.setFieldsValue({name:E.name,nameAr:E.nameAr,logo:_,website:E.website,description:E.description,descriptionAr:E.descriptionAr,isActive:E.isActive,order:E.order}),c(!0)},A=()=>{d(null),f(null),p.resetFields(),c(!0)},w=e.filter(E=>E.name?.toLowerCase().includes(a.toLowerCase())||E.nameAr?.toLowerCase().includes(a.toLowerCase())),S=[{title:n==="ar"?"الشعار":"Logo",dataIndex:"logo",key:"logo",width:100,render:E=>{const _=y(E);return _?l.jsx(Sr,{src:_,alt:"Partner logo",width:80,height:50,style:{objectFit:"contain"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RnG4W+FgYxN",onError:D=>{D.target.style.display="none",D.target.nextSibling?.style?.setProperty("display","flex")}}):l.jsx("div",{style:{width:80,height:50,background:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"},children:n==="ar"?"لا يوجد":"No logo"})}},{title:n==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",render:(E,_)=>n==="ar"&&_.nameAr?_.nameAr:E},{title:n==="ar"?"الوصف":"Description",dataIndex:"description",key:"description",ellipsis:!0,render:(E,_)=>{const D=n==="ar"&&_.descriptionAr?_.descriptionAr:E||_.descriptionAr||"-";return l.jsx("span",{title:D,children:D})}},{title:n==="ar"?"الموقع الإلكتروني":"Website",dataIndex:"website",key:"website",ellipsis:!0,render:E=>E?l.jsx("a",{href:E,target:"_blank",rel:"noopener noreferrer",title:E,children:E}):"-"},{title:n==="ar"?"الحالة":"Status",dataIndex:"isActive",key:"isActive",render:E=>l.jsx($e,{color:E?"green":"red",children:E?n==="ar"?"نشط":"Active":n==="ar"?"غير نشط":"Inactive"})},{title:n==="ar"?"الترتيب":"Order",dataIndex:"order",key:"order",sorter:(E,_)=>E.order-_.order},{title:n==="ar"?"الإجراءات":"Actions",key:"actions",render:(E,_)=>l.jsxs(ze,{children:[l.jsx(J,{icon:l.jsx(_r,{}),onClick:()=>b(_),size:"small",children:n==="ar"?"تعديل":"Edit"}),l.jsx(ys,{title:n==="ar"?"هل أنت متأكد من الحذف؟":"Are you sure you want to delete?",onConfirm:()=>x(_.id),okText:n==="ar"?"نعم":"Yes",cancelText:n==="ar"?"لا":"No",children:l.jsx(J,{icon:l.jsx(wi,{}),danger:!0,size:"small",children:n==="ar"?"حذف":"Delete"})})]})}];return l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:n==="ar"?"إدارة الشركاء":"Partners Management"}),l.jsx("p",{className:"text-gray-500",children:n==="ar"?"إدارة شركاء المنصة وعرضهم في الصفحة الرئيسية":"Manage platform partners and display them on the homepage"})]}),l.jsxs(ze,{children:[l.jsx(ye,{placeholder:n==="ar"?"بحث...":"Search...",prefix:l.jsx(ua,{}),value:a,onChange:E=>s(E.target.value),style:{width:250},allowClear:!0}),l.jsx(J,{icon:l.jsx(Er,{}),onClick:g,loading:r,children:n==="ar"?"تحديث":"Refresh"}),l.jsx(J,{type:"primary",icon:l.jsx(gr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:A,children:n==="ar"?"إضافة شريك جديد":"Add New Partner"})]})]})}),l.jsx(Ee,{className:"shadow-lg rounded-xl border-0",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsx(Pt,{columns:S,dataSource:w,rowKey:"id",loading:r,pagination:{pageSize:10,showSizeChanger:!0,showTotal:E=>n==="ar"?`إجمالي ${E} شريك`:`Total ${E} partners`},scroll:{x:"max-content"}})})}),l.jsx(At,{title:u?n==="ar"?"تعديل الشريك":"Edit Partner":n==="ar"?"إضافة شريك جديد":"Add New Partner",open:o,onCancel:()=>{c(!1),d(null),f(null),p.resetFields()},footer:null,width:700,destroyOnHidden:!0,children:l.jsxs(W,{form:p,layout:"vertical",onFinish:v,initialValues:{isActive:!0,order:0},children:[l.jsx(W.Item,{name:"name",label:n==="ar"?"الاسم (إنجليزي)":"Name (English)",rules:[{required:!0,message:n==="ar"?"يرجى إدخال الاسم":"Please enter name"}],children:l.jsx(ye,{placeholder:n==="ar"?"اسم الشريك بالإنجليزية":"Partner name in English"})}),l.jsx(W.Item,{name:"nameAr",label:n==="ar"?"الاسم (عربي)":"Name (Arabic)",children:l.jsx(ye,{placeholder:n==="ar"?"اسم الشريك بالعربية":"Partner name in Arabic"})}),l.jsx(W.Item,{name:"logo",label:n==="ar"?"الشعار":"Logo",children:l.jsx(ye,{type:"hidden"})}),l.jsx(W.Item,{label:" ",colon:!1,children:l.jsxs(ze,{direction:"vertical",style:{width:"100%"},children:[l.jsx(Vt,{beforeUpload:m,showUploadList:!1,accept:"image/*",children:l.jsx(J,{icon:l.jsx(Sn,{}),children:n==="ar"?"رفع الشعار":"Upload Logo"})}),(()=>{const E=h||p.getFieldValue("logo");return E?l.jsx(Sr,{src:y(E),alt:"Partner logo",width:200,height:100,style:{objectFit:"contain"},onError:_=>{console.error("Failed to load image:",E),_.target.style.display="none"}}):null})(),l.jsx(ye,{placeholder:n==="ar"?"أو أدخل رابط الصورة":"Or enter image URL",value:h||p.getFieldValue("logo")||"",onChange:E=>{const _=E.target.value.trim();_?(f(_),p.setFieldsValue({logo:_})):p.setFieldsValue({logo:null})}})]})}),l.jsx(W.Item,{name:"website",label:n==="ar"?"الموقع الإلكتروني":"Website",children:l.jsx(ye,{placeholder:"https://example.com"})}),l.jsx(W.Item,{name:"description",label:n==="ar"?"الوصف (إنجليزي)":"Description (English)",children:l.jsx(gO,{rows:3,placeholder:n==="ar"?"وصف الشريك بالإنجليزية":"Partner description in English"})}),l.jsx(W.Item,{name:"descriptionAr",label:n==="ar"?"الوصف (عربي)":"Description (Arabic)",children:l.jsx(gO,{rows:3,placeholder:n==="ar"?"وصف الشريك بالعربية":"Partner description in Arabic"})}),l.jsx(W.Item,{name:"order",label:n==="ar"?"الترتيب":"Order",tooltip:n==="ar"?"رقم الترتيب لعرض الشركاء (الأقل يظهر أولاً)":"Order number for displaying partners (lower numbers appear first)",children:l.jsx(Na,{min:0,style:{width:"100%"}})}),l.jsx(W.Item,{name:"isActive",label:n==="ar"?"الحالة":"Status",valuePropName:"checked",children:l.jsx(pi,{})}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:u?n==="ar"?"تحديث":"Update":n==="ar"?"إضافة":"Add"}),l.jsx(J,{onClick:()=>{c(!1),d(null),f(null),p.resetFields()},children:n==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{TextArea:yO}=ye,Que=()=>{const{language:n}=Ze(),[e,t]=M.useState([]),[r,i]=M.useState(!0),[a,s]=M.useState(null),[o,c]=M.useState(!1),[u,d]=M.useState(null),[h]=W.useForm();M.useEffect(()=>{f()},[]);const f=async()=>{try{i(!0),s(null);const b=await Nd.getCategories();t(b.categories||[])}catch(b){console.error("Error fetching categories:",b),s(b.message||"Failed to load categories"),se.error(n==="ar"?"فشل تحميل الفئات":"Failed to load categories")}finally{i(!1)}},p=async b=>{try{u?(await Nd.updateCategory(u.id,b),se.success(n==="ar"?"تم تحديث الفئة بنجاح":"Category updated successfully")):(await Nd.createCategory(b),se.success(n==="ar"?"تم إنشاء الفئة بنجاح":"Category created successfully")),c(!1),h.resetFields(),d(null),f()}catch(A){console.error("Error saving category:",A),se.error(A.message||(n==="ar"?"فشل حفظ الفئة":"Failed to save category"))}},y=b=>{d(b),h.setFieldsValue({...b,parentId:b.parentId||void 0}),c(!0)},g=async b=>{try{await Nd.deleteCategory(b),se.success(n==="ar"?"تم حذف الفئة بنجاح":"Category deleted successfully"),f()}catch(A){console.error("Error deleting category:",A),se.error(A.message||(n==="ar"?"فشل حذف الفئة":"Failed to delete category"))}},m=()=>{c(!1),h.resetFields(),d(null)},v=[{title:n==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",render:(b,A)=>l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:b}),A.nameAr&&l.jsx("div",{className:"text-sm text-gray-500",children:A.nameAr})]})},{title:n==="ar"?"الرابط":"Slug",dataIndex:"slug",key:"slug"},{title:n==="ar"?"الأب":"Parent",dataIndex:"parent",key:"parent",render:b=>b?b.name:"-"},{title:n==="ar"?"الاستخدام":"Usage",key:"usage",render:(b,A)=>{const w=(A._count?.consultants||0)+(A._count?.services||0)+(A._count?.articles||0);return l.jsxs("div",{className:"flex gap-2",children:[A._count?.consultants>0&&l.jsxs($e,{color:"blue",children:[A._count.consultants," ",n==="ar"?"مستشار":"Consultants"]}),A._count?.services>0&&l.jsxs($e,{color:"green",children:[A._count.services," ",n==="ar"?"خدمة":"Services"]}),A._count?.articles>0&&l.jsxs($e,{color:"orange",children:[A._count.articles," ",n==="ar"?"مقال":"Articles"]}),w===0&&l.jsx("span",{className:"text-gray-400",children:"-"})]})}},{title:n==="ar"?"الحالة":"Status",dataIndex:"isActive",key:"isActive",render:b=>l.jsx($e,{color:b?"green":"red",children:b?n==="ar"?"نشط":"Active":n==="ar"?"غير نشط":"Inactive"})},{title:n==="ar"?"الترتيب":"Order",dataIndex:"order",key:"order"},{title:n==="ar"?"الإجراءات":"Actions",key:"actions",fixed:"right",width:150,render:(b,A)=>l.jsxs(ze,{size:"small",children:[l.jsx(yi,{title:n==="ar"?"تعديل":"Edit",children:l.jsx(J,{icon:l.jsx(_r,{}),size:"small",onClick:()=>y(A)})}),l.jsx(ys,{title:n==="ar"?"هل أنت متأكد من حذف هذه الفئة؟":"Are you sure to delete this category?",onConfirm:()=>g(A.id),okText:n==="ar"?"نعم":"Yes",cancelText:n==="ar"?"لا":"No",disabled:(A._count?.consultants||0)+(A._count?.services||0)+(A._count?.articles||0)>0,children:l.jsx(yi,{title:(A._count?.consultants||0)+(A._count?.services||0)+(A._count?.articles||0)>0?n==="ar"?"لا يمكن الحذف: الفئة مستخدمة":"Cannot delete: category is in use":n==="ar"?"حذف":"Delete",children:l.jsx(J,{danger:!0,icon:l.jsx(wi,{}),size:"small",disabled:(A._count?.consultants||0)+(A._count?.services||0)+(A._count?.articles||0)>0})})})]})}],x=e.filter(b=>!u||b.id!==u.id).map(b=>({value:b.id,label:`${b.name}${b.nameAr?` (${b.nameAr})`:""}`}));return l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:n==="ar"?"الفئات":"Categories"}),l.jsx("p",{className:"text-gray-500",children:n==="ar"?"إدارة الفئات المستخدمة في المستشارين والخدمات والمقالات":"Manage categories for consultants, services, and articles"})]}),l.jsxs(ze,{children:[l.jsx(J,{icon:l.jsx(Er,{}),onClick:f,loading:r,children:n==="ar"?"تحديث":"Refresh"}),l.jsx(J,{type:"primary",icon:l.jsx(gr,{}),onClick:()=>{d(null),h.resetFields(),c(!0)},children:n==="ar"?"إضافة فئة":"Add Category"})]})]})}),a&&l.jsx(Fn,{message:a,type:"error",showIcon:!0,closable:!0,onClose:()=>s(null),className:"mb-6"}),l.jsx(Ee,{className:"border-0 shadow-lg rounded-2xl",children:l.jsx(Pt,{columns:v,dataSource:e,loading:r,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:b=>n==="ar"?`إجمالي ${b} فئة`:`Total ${b} categories`}})}),l.jsx(At,{title:u?n==="ar"?"تعديل الفئة":"Edit Category":n==="ar"?"إضافة فئة جديدة":"Add New Category",open:o,onCancel:m,footer:null,width:600,children:l.jsxs(W,{form:h,layout:"vertical",onFinish:p,initialValues:{isActive:!0,order:0},children:[l.jsx(W.Item,{name:"name",label:n==="ar"?"الاسم (إنجليزي)":"Name (English)",rules:[{required:!0,message:n==="ar"?"الاسم مطلوب":"Name is required"}],children:l.jsx(ye,{placeholder:n==="ar"?"أدخل الاسم":"Enter name"})}),l.jsx(W.Item,{name:"nameAr",label:n==="ar"?"الاسم (عربي)":"Name (Arabic)",children:l.jsx(ye,{placeholder:n==="ar"?"أدخل الاسم بالعربية":"Enter name in Arabic"})}),l.jsx(W.Item,{name:"slug",label:n==="ar"?"الرابط":"Slug",tooltip:n==="ar"?"سيتم إنشاؤه تلقائياً إذا لم يتم تحديده":"Will be auto-generated if not provided",children:l.jsx(ye,{placeholder:"category-slug"})}),l.jsx(W.Item,{name:"description",label:n==="ar"?"الوصف (إنجليزي)":"Description (English)",children:l.jsx(yO,{rows:3,placeholder:n==="ar"?"أدخل الوصف":"Enter description"})}),l.jsx(W.Item,{name:"descriptionAr",label:n==="ar"?"الوصف (عربي)":"Description (Arabic)",children:l.jsx(yO,{rows:3,placeholder:n==="ar"?"أدخل الوصف بالعربية":"Enter description in Arabic"})}),l.jsx(W.Item,{name:"parentId",label:n==="ar"?"الفئة الأب":"Parent Category",children:l.jsx(be,{placeholder:n==="ar"?"اختر الفئة الأب (اختياري)":"Select parent category (optional)",allowClear:!0,options:x})}),l.jsx(W.Item,{name:"icon",label:n==="ar"?"الأيقونة":"Icon",tooltip:n==="ar"?"اسم الأيقونة أو رابط الصورة":"Icon name or image URL",children:l.jsx(ye,{placeholder:n==="ar"?"مثال: HomeOutlined":"e.g., HomeOutlined"})}),l.jsx(W.Item,{name:"color",label:n==="ar"?"اللون":"Color",tooltip:n==="ar"?"كود اللون (Hex)":"Color code (Hex)",children:l.jsx(ye,{placeholder:"#1a4d3a"})}),l.jsx(W.Item,{name:"order",label:n==="ar"?"الترتيب":"Order",children:l.jsx(Na,{min:0,style:{width:"100%"}})}),l.jsx(W.Item,{name:"isActive",label:n==="ar"?"الحالة":"Status",valuePropName:"checked",children:l.jsx(pi,{})}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",children:u?n==="ar"?"تحديث":"Update":n==="ar"?"إنشاء":"Create"}),l.jsx(J,{onClick:m,children:n==="ar"?"إلغاء":"Cancel"})]})})]})})]})},{TextArea:vO}=ye,ede=()=>{const{t:n,language:e}=Ze(),[t,r]=M.useState([]),[i,a]=M.useState(!1),[s,o]=M.useState(null),[c,u]=M.useState(!1),[d,h]=M.useState(null),[f,p]=M.useState(null),[y,g]=M.useState(null),[m]=W.useForm();M.useEffect(()=>{v()},[]);const v=async()=>{try{a(!0),o(null);const _=(await cc.getSliders()).sliders.map(D=>({...D,key:D.id,title:e==="ar"&&D.titleAr||D.title}));r(_)}catch(E){console.error("Error fetching sliders:",E),o(E.message||"Failed to load sliders"),se.error(e==="ar"?"فشل تحميل السلايدرات":"Failed to load sliders")}finally{a(!1)}},x=async E=>{try{const _=new FormData;_.append("file",E),_.append("ownerType","GENERAL");const D=await Zr.uploadFile(_);if(D.file&&D.file.fileUrl)p(D.file.fileUrl),m.setFieldsValue({image:D.file.fileUrl}),se.success(e==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully");else throw new Error("File upload failed")}catch(_){se.error(_.message||(e==="ar"?"فشل رفع الصورة":"Failed to upload image"))}return!1},b=async E=>{try{const _=new FormData;_.append("file",E),_.append("ownerType","GENERAL");const D=await Zr.uploadFile(_);if(D.file&&D.file.fileUrl)g(D.file.fileUrl),m.setFieldsValue({icon:D.file.fileUrl}),se.success(e==="ar"?"تم رفع الأيقونة بنجاح":"Icon uploaded successfully");else throw new Error("File upload failed")}catch(_){se.error(_.message||(e==="ar"?"فشل رفع الأيقونة":"Failed to upload icon"))}return!1},A=async E=>{try{let _=f||d?.image,D=y||d?.icon;E.image&&typeof E.image=="string"&&(_=E.image),E.icon&&typeof E.icon=="string"&&(D=E.icon);const C={...E,order:parseInt(E.order||0),image:_,icon:D||null,isActive:E.isActive!==void 0?E.isActive:!0};d?(await cc.updateSlider(d.id,C),se.success(e==="ar"?"تم تحديث السلايدر بنجاح":"Slider updated successfully")):(await cc.createSlider(C),se.success(e==="ar"?"تم إنشاء السلايدر بنجاح":"Slider created successfully")),u(!1),h(null),p(null),g(null),m.resetFields(),v()}catch(_){se.error(_.message||(e==="ar"?"فشل حفظ السلايدر":"Failed to save slider"))}},w=async E=>{try{await cc.deleteSlider(E),se.success(e==="ar"?"تم حذف السلايدر بنجاح":"Slider deleted successfully"),v()}catch(_){se.error(_.message||(e==="ar"?"فشل حذف السلايدر":"Failed to delete slider"))}},S=[{title:e==="ar"?"السلايدر":"Slider",key:"slider",width:300,render:(E,_)=>l.jsxs("div",{className:"flex items-center gap-3",children:[_.image?l.jsx(Sr,{src:_.image,alt:_.title,width:80,height:60,className:"object-cover rounded",preview:!1}):l.jsx("div",{className:"w-20 h-15 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(UE,{className:"text-2xl text-gray-400"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900",children:_.title}),_.subtitle&&l.jsx("div",{className:"text-sm text-gray-500",children:_.subtitle})]})]})},{title:e==="ar"?"الترتيب":"Order",dataIndex:"order",key:"order",sorter:(E,_)=>E.order-_.order},{title:e==="ar"?"الحالة":"Status",dataIndex:"isActive",key:"isActive",render:E=>l.jsx($e,{color:E?"green":"red",children:E?e==="ar"?"نشط":"Active":e==="ar"?"غير نشط":"Inactive"})},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",fixed:"right",width:150,render:(E,_)=>l.jsxs(ze,{size:"small",children:[l.jsx(yi,{title:e==="ar"?"تعديل":"Edit",children:l.jsx(J,{icon:l.jsx(_r,{}),size:"small",onClick:()=>{h(_),p(_.image),g(_.icon),m.setFieldsValue({..._,isActive:_.isActive}),u(!0)}})}),l.jsx(yi,{title:e==="ar"?"حذف":"Delete",children:l.jsx(ys,{title:e==="ar"?"هل أنت متأكد من حذف هذا السلايدر؟":"Are you sure to delete this slider?",onConfirm:()=>w(_.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:l.jsx(J,{danger:!0,icon:l.jsx(wi,{}),size:"small"})})})]})}];return l.jsxs("div",{className:"relative min-h-screen pb-8 bg-gradient-to-br from-amber-50 via-orange-50/50 to-amber-50",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 relative z-10",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold text-amber-900 mb-3",children:e==="ar"?"إدارة السلايدرات":"Manage Sliders"}),l.jsx("p",{className:"text-base sm:text-lg text-amber-800/70 font-medium",children:e==="ar"?"إدارة السلايدرات المعروضة في الصفحة الرئيسية":"Manage sliders displayed on the home page"})]}),l.jsxs(ze,{className:"flex-wrap",children:[l.jsx(J,{icon:l.jsx(Er,{}),onClick:v,loading:i,children:e==="ar"?"تحديث":"Refresh"}),l.jsx(J,{type:"primary",icon:l.jsx(gr,{}),className:"bg-amber-600 hover:bg-amber-700 border-0 shadow-lg",size:"large",onClick:()=>{h(null),p(null),g(null),m.resetFields(),u(!0)},children:e==="ar"?"إضافة سلايدر جديد":"Add New Slider"})]})]}),l.jsx(Ee,{className:"border border-amber-200/50 bg-white/80 backdrop-blur-sm",children:l.jsx(Pt,{columns:S,dataSource:t,loading:i,pagination:{pageSize:10},scroll:{x:"max-content"}})}),l.jsx(At,{title:d?e==="ar"?"تعديل السلايدر":"Edit Slider":e==="ar"?"إضافة سلايدر جديد":"Add New Slider",open:c,onCancel:()=>{u(!1),h(null),p(null),g(null),m.resetFields()},footer:null,width:800,destroyOnHidden:!0,children:l.jsxs(W,{form:m,layout:"vertical",onFinish:A,initialValues:{isActive:!0,order:0},children:[l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0,message:e==="ar"?"يرجى إدخال العنوان":"Please enter title"}],children:l.jsx(ye,{placeholder:e==="ar"?"أدخل العنوان":"Enter title"})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:l.jsx(ye,{placeholder:e==="ar"?"أدخل العنوان العربي":"Enter Arabic title"})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"subtitle",label:e==="ar"?"العنوان الفرعي (إنجليزي)":"Subtitle (English)",children:l.jsx(ye,{placeholder:e==="ar"?"أدخل العنوان الفرعي":"Enter subtitle"})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"subtitleAr",label:e==="ar"?"العنوان الفرعي (عربي)":"Subtitle (Arabic)",children:l.jsx(ye,{placeholder:e==="ar"?"أدخل العنوان الفرعي العربي":"Enter Arabic subtitle"})})})]}),l.jsx(W.Item,{name:"description",label:e==="ar"?"الوصف (إنجليزي)":"Description (English)",children:l.jsx(vO,{rows:3,placeholder:e==="ar"?"أدخل الوصف":"Enter description"})}),l.jsx(W.Item,{name:"descriptionAr",label:e==="ar"?"الوصف (عربي)":"Description (Arabic)",children:l.jsx(vO,{rows:3,placeholder:e==="ar"?"أدخل الوصف العربي":"Enter Arabic description"})}),l.jsxs(W.Item,{name:"image",label:e==="ar"?"الصورة":"Image",rules:[{required:!0,message:e==="ar"?"يرجى رفع الصورة":"Please upload image"}],children:[l.jsx(Vt,{beforeUpload:x,showUploadList:!1,accept:"image/*",children:l.jsx(J,{icon:l.jsx(Sn,{}),children:e==="ar"?"رفع الصورة":"Upload Image"})}),(f||m.getFieldValue("image"))&&l.jsx("div",{className:"mt-4",children:l.jsx(Sr,{src:f||m.getFieldValue("image"),alt:"Preview",width:200,className:"rounded"})})]}),l.jsxs(W.Item,{name:"icon",label:e==="ar"?"الأيقونة (اختياري)":"Icon (Optional)",children:[l.jsx(Vt,{beforeUpload:b,showUploadList:!1,accept:"image/*",children:l.jsx(J,{icon:l.jsx(Sn,{}),children:e==="ar"?"رفع الأيقونة":"Upload Icon"})}),(y||m.getFieldValue("icon"))&&l.jsx("div",{className:"mt-4",children:l.jsx(Sr,{src:y||m.getFieldValue("icon"),alt:"Icon Preview",width:80,height:80,className:"rounded object-contain"})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"buttonText",label:e==="ar"?"نص الزر (إنجليزي)":"Button Text (English)",children:l.jsx(ye,{placeholder:e==="ar"?"مثال: ابدأ الآن":"e.g., Get Started"})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"buttonTextAr",label:e==="ar"?"نص الزر (عربي)":"Button Text (Arabic)",children:l.jsx(ye,{placeholder:e==="ar"?"مثال: ابدأ الآن":"e.g., ابدأ الآن"})})})]}),l.jsx(W.Item,{name:"buttonLink",label:e==="ar"?"رابط الزر":"Button Link",children:l.jsx(ye,{placeholder:e==="ar"?"مثال: /services":"e.g., /services"})}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"order",label:e==="ar"?"الترتيب":"Order",children:l.jsx(Na,{min:0,style:{width:"100%"}})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"isActive",label:e==="ar"?"الحالة":"Status",valuePropName:"checked",children:l.jsx(pi,{checkedChildren:e==="ar"?"نشط":"Active",unCheckedChildren:e==="ar"?"غير نشط":"Inactive"})})})]}),l.jsx(W.Item,{children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-amber-600 hover:bg-amber-700",children:d?e==="ar"?"تحديث":"Update":e==="ar"?"إنشاء":"Create"}),l.jsx(J,{onClick:()=>{u(!1),h(null),p(null),g(null),m.resetFields()},children:e==="ar"?"إلغاء":"Cancel"})]})})]})})]})};var Bp={exports:{}};var tde=Bp.exports,xO;function nde(){return xO||(xO=1,(function(n,e){(function(r,i){n.exports=i()})(typeof self<"u"?self:tde,function(){return(function(t){var r={};function i(a){if(r[a])return r[a].exports;var s=r[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=r,i.d=function(a,s,o){i.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:o})},i.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(s,"a",s),s},i.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},i.p="",i(i.s=109)})([(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(17),s=i(18),o=i(19),c=i(45),u=i(46),d=i(47),h=i(48),f=i(49),p=i(12),y=i(32),g=i(33),m=i(31),v=i(1),x={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:a.default,Format:s.default,Leaf:o.default,Embed:h.default,Scroll:c.default,Block:d.default,Inline:u.default,Text:f.default,Attributor:{Attribute:p.default,Class:y.default,Style:g.default,Store:m.default}};r.default=x}),(function(t,r,i){var a=this&&this.__extends||(function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,x){v.__proto__=x}||function(v,x){for(var b in x)x.hasOwnProperty(b)&&(v[b]=x[b])};return function(v,x){m(v,x);function b(){this.constructor=v}v.prototype=x===null?Object.create(x):(b.prototype=x.prototype,new b)}})();Object.defineProperty(r,"__esModule",{value:!0});var s=(function(m){a(v,m);function v(x){var b=this;return x="[Parchment] "+x,b=m.call(this,x)||this,b.message=x,b.name=b.constructor.name,b}return v})(Error);r.ParchmentError=s;var o={},c={},u={},d={};r.DATA_KEY="__blot";var h;(function(m){m[m.TYPE=3]="TYPE",m[m.LEVEL=12]="LEVEL",m[m.ATTRIBUTE=13]="ATTRIBUTE",m[m.BLOT=14]="BLOT",m[m.INLINE=7]="INLINE",m[m.BLOCK=11]="BLOCK",m[m.BLOCK_BLOT=10]="BLOCK_BLOT",m[m.INLINE_BLOT=6]="INLINE_BLOT",m[m.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",m[m.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",m[m.ANY=15]="ANY"})(h=r.Scope||(r.Scope={}));function f(m,v){var x=y(m);if(x==null)throw new s("Unable to create "+m+" blot");var b=x,A=m instanceof Node||m.nodeType===Node.TEXT_NODE?m:b.create(v);return new b(A,v)}r.create=f;function p(m,v){return v===void 0&&(v=!1),m==null?null:m[r.DATA_KEY]!=null?m[r.DATA_KEY].blot:v?p(m.parentNode,v):null}r.find=p;function y(m,v){v===void 0&&(v=h.ANY);var x;if(typeof m=="string")x=d[m]||o[m];else if(m instanceof Text||m.nodeType===Node.TEXT_NODE)x=d.text;else if(typeof m=="number")m&h.LEVEL&h.BLOCK?x=d.block:m&h.LEVEL&h.INLINE&&(x=d.inline);else if(m instanceof HTMLElement){var b=(m.getAttribute("class")||"").split(/\s+/);for(var A in b)if(x=c[b[A]],x)break;x=x||u[m.tagName]}return x==null?null:v&h.LEVEL&x.scope&&v&h.TYPE&x.scope?x:null}r.query=y;function g(){for(var m=[],v=0;v<arguments.length;v++)m[v]=arguments[v];if(m.length>1)return m.map(function(A){return g(A)});var x=m[0];if(typeof x.blotName!="string"&&typeof x.attrName!="string")throw new s("Invalid definition");if(x.blotName==="abstract")throw new s("Cannot register abstract class");if(d[x.blotName||x.attrName]=x,typeof x.keyName=="string")o[x.keyName]=x;else if(x.className!=null&&(c[x.className]=x),x.tagName!=null){Array.isArray(x.tagName)?x.tagName=x.tagName.map(function(A){return A.toUpperCase()}):x.tagName=x.tagName.toUpperCase();var b=Array.isArray(x.tagName)?x.tagName:[x.tagName];b.forEach(function(A){(u[A]==null||x.className==null)&&(u[A]=x)})}return x}r.register=g}),(function(t,r,i){var a=i(51),s=i(11),o=i(3),c=i(20),u="\0",d=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};d.prototype.insert=function(h,f){var p={};return h.length===0?this:(p.insert=h,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p))},d.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},d.prototype.retain=function(h,f){if(h<=0)return this;var p={retain:h};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p)},d.prototype.push=function(h){var f=this.ops.length,p=this.ops[f-1];if(h=o(!0,{},h),typeof p=="object"){if(typeof h.delete=="number"&&typeof p.delete=="number")return this.ops[f-1]={delete:p.delete+h.delete},this;if(typeof p.delete=="number"&&h.insert!=null&&(f-=1,p=this.ops[f-1],typeof p!="object"))return this.ops.unshift(h),this;if(s(h.attributes,p.attributes)){if(typeof h.insert=="string"&&typeof p.insert=="string")return this.ops[f-1]={insert:p.insert+h.insert},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof p.retain=="number")return this.ops[f-1]={retain:p.retain+h.retain},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this}}return f===this.ops.length?this.ops.push(h):this.ops.splice(f,0,h),this},d.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},d.prototype.filter=function(h){return this.ops.filter(h)},d.prototype.forEach=function(h){this.ops.forEach(h)},d.prototype.map=function(h){return this.ops.map(h)},d.prototype.partition=function(h){var f=[],p=[];return this.forEach(function(y){var g=h(y)?f:p;g.push(y)}),[f,p]},d.prototype.reduce=function(h,f){return this.ops.reduce(h,f)},d.prototype.changeLength=function(){return this.reduce(function(h,f){return f.insert?h+c.length(f):f.delete?h-f.delete:h},0)},d.prototype.length=function(){return this.reduce(function(h,f){return h+c.length(f)},0)},d.prototype.slice=function(h,f){h=h||0,typeof f!="number"&&(f=1/0);for(var p=[],y=c.iterator(this.ops),g=0;g<f&&y.hasNext();){var m;g<h?m=y.next(h-g):(m=y.next(f-g),p.push(m)),g+=c.length(m)}return new d(p)},d.prototype.compose=function(h){var f=c.iterator(this.ops),p=c.iterator(h.ops),y=[],g=p.peek();if(g!=null&&typeof g.retain=="number"&&g.attributes==null){for(var m=g.retain;f.peekType()==="insert"&&f.peekLength()<=m;)m-=f.peekLength(),y.push(f.next());g.retain-m>0&&p.next(g.retain-m)}for(var v=new d(y);f.hasNext()||p.hasNext();)if(p.peekType()==="insert")v.push(p.next());else if(f.peekType()==="delete")v.push(f.next());else{var x=Math.min(f.peekLength(),p.peekLength()),b=f.next(x),A=p.next(x);if(typeof A.retain=="number"){var w={};typeof b.retain=="number"?w.retain=x:w.insert=b.insert;var S=c.attributes.compose(b.attributes,A.attributes,typeof b.retain=="number");if(S&&(w.attributes=S),v.push(w),!p.hasNext()&&s(v.ops[v.ops.length-1],w)){var E=new d(f.rest());return v.concat(E).chop()}}else typeof A.delete=="number"&&typeof b.retain=="number"&&v.push(A)}return v.chop()},d.prototype.concat=function(h){var f=new d(this.ops.slice());return h.ops.length>0&&(f.push(h.ops[0]),f.ops=f.ops.concat(h.ops.slice(1))),f},d.prototype.diff=function(h,f){if(this.ops===h.ops)return new d;var p=[this,h].map(function(x){return x.map(function(b){if(b.insert!=null)return typeof b.insert=="string"?b.insert:u;var A=x===h?"on":"with";throw new Error("diff() called "+A+" non-document")}).join("")}),y=new d,g=a(p[0],p[1],f),m=c.iterator(this.ops),v=c.iterator(h.ops);return g.forEach(function(x){for(var b=x[1].length;b>0;){var A=0;switch(x[0]){case a.INSERT:A=Math.min(v.peekLength(),b),y.push(v.next(A));break;case a.DELETE:A=Math.min(b,m.peekLength()),m.next(A),y.delete(A);break;case a.EQUAL:A=Math.min(m.peekLength(),v.peekLength(),b);var w=m.next(A),S=v.next(A);s(w.insert,S.insert)?y.retain(A,c.attributes.diff(w.attributes,S.attributes)):y.push(S).delete(A);break}b-=A}}),y.chop()},d.prototype.eachLine=function(h,f){f=f||`
`;for(var p=c.iterator(this.ops),y=new d,g=0;p.hasNext();){if(p.peekType()!=="insert")return;var m=p.peek(),v=c.length(m)-p.peekLength(),x=typeof m.insert=="string"?m.insert.indexOf(f,v)-v:-1;if(x<0)y.push(p.next());else if(x>0)y.push(p.next(x));else{if(h(y,p.next(1).attributes||{},g)===!1)return;g+=1,y=new d}}y.length()>0&&h(y,{},g)},d.prototype.transform=function(h,f){if(f=!!f,typeof h=="number")return this.transformPosition(h,f);for(var p=c.iterator(this.ops),y=c.iterator(h.ops),g=new d;p.hasNext()||y.hasNext();)if(p.peekType()==="insert"&&(f||y.peekType()!=="insert"))g.retain(c.length(p.next()));else if(y.peekType()==="insert")g.push(y.next());else{var m=Math.min(p.peekLength(),y.peekLength()),v=p.next(m),x=y.next(m);if(v.delete)continue;x.delete?g.push(x):g.retain(m,c.attributes.transform(v.attributes,x.attributes,f))}return g.chop()},d.prototype.transformPosition=function(h,f){f=!!f;for(var p=c.iterator(this.ops),y=0;p.hasNext()&&y<=h;){var g=p.peekLength(),m=p.peekType();if(p.next(),m==="delete"){h-=Math.min(g,h-y);continue}else m==="insert"&&(y<h||!f)&&(h+=g);y+=g}return h},t.exports=d}),(function(t,r){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,s=Object.defineProperty,o=Object.getOwnPropertyDescriptor,c=function(p){return typeof Array.isArray=="function"?Array.isArray(p):a.call(p)==="[object Array]"},u=function(p){if(!p||a.call(p)!=="[object Object]")return!1;var y=i.call(p,"constructor"),g=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!y&&!g)return!1;var m;for(m in p);return typeof m>"u"||i.call(p,m)},d=function(p,y){s&&y.name==="__proto__"?s(p,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):p[y.name]=y.newValue},h=function(p,y){if(y==="__proto__")if(i.call(p,y)){if(o)return o(p,y).value}else return;return p[y]};t.exports=function f(){var p,y,g,m,v,x,b=arguments[0],A=1,w=arguments.length,S=!1;for(typeof b=="boolean"&&(S=b,b=arguments[1]||{},A=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});A<w;++A)if(p=arguments[A],p!=null)for(y in p)g=h(b,y),m=h(p,y),b!==m&&(S&&m&&(u(m)||(v=c(m)))?(v?(v=!1,x=g&&c(g)?g:[]):x=g&&u(g)?g:{},d(b,{name:y,newValue:f(S,x,m)})):typeof m<"u"&&d(b,{name:y,newValue:m}));return b}}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var a=(function(){function k(T,N){for(var j=0;j<N.length;j++){var R=N[j];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(T,R.key,R)}}return function(T,N,j){return N&&k(T.prototype,N),j&&k(T,j),T}})(),s=function k(T,N,j){T===null&&(T=Function.prototype);var R=Object.getOwnPropertyDescriptor(T,N);if(R===void 0){var P=Object.getPrototypeOf(T);return P===null?void 0:k(P,N,j)}else{if("value"in R)return R.value;var F=R.get;return F===void 0?void 0:F.call(j)}},o=i(3),c=b(o),u=i(2),d=b(u),h=i(0),f=b(h),p=i(16),y=b(p),g=i(6),m=b(g),v=i(7),x=b(v);function b(k){return k&&k.__esModule?k:{default:k}}function A(k,T){if(!(k instanceof T))throw new TypeError("Cannot call a class as a function")}function w(k,T){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:k}function S(k,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);k.prototype=Object.create(T&&T.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(k,T):k.__proto__=T)}var E=1,_=(function(k){S(T,k);function T(){return A(this,T),w(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return a(T,[{key:"attach",value:function(){s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new d.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(j,R){var P=f.default.query(j,f.default.Scope.BLOCK_ATTRIBUTE);P!=null&&this.attributes.attribute(P,R)}},{key:"formatAt",value:function(j,R,P,F){this.format(P,F)}},{key:"insertAt",value:function(j,R,P){if(typeof R=="string"&&R.endsWith(`
`)){var F=f.default.create(D.blotName);this.parent.insertBefore(F,j===0?this:this.next),F.insertAt(0,R.slice(0,-1))}else s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,j,R,P)}}]),T})(f.default.Embed);_.scope=f.default.Scope.BLOCK_BLOT;var D=(function(k){S(T,k);function T(N){A(this,T);var j=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,N));return j.cache={},j}return a(T,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(j,R){return R.length()===0?j:j.insert(R.value(),C(R))},new d.default).insert(`
`,C(this))),this.cache.delta}},{key:"deleteAt",value:function(j,R){s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"deleteAt",this).call(this,j,R),this.cache={}}},{key:"formatAt",value:function(j,R,P,F){R<=0||(f.default.query(P,f.default.Scope.BLOCK)?j+R===this.length()&&this.format(P,F):s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"formatAt",this).call(this,j,Math.min(R,this.length()-j-1),P,F),this.cache={})}},{key:"insertAt",value:function(j,R,P){if(P!=null)return s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,j,R,P);if(R.length!==0){var F=R.split(`
`),q=F.shift();q.length>0&&(j<this.length()-1||this.children.tail==null?s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,Math.min(j,this.length()-1),q):this.children.tail.insertAt(this.children.tail.length(),q),this.cache={});var $=this;F.reduce(function(B,I){return $=$.split(B,!0),$.insertAt(0,I),I.length},j+q.length)}}},{key:"insertBefore",value:function(j,R){var P=this.children.head;s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,j,R),P instanceof y.default&&P.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"length",this).call(this)+E),this.cache.length}},{key:"moveChildren",value:function(j,R){s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"moveChildren",this).call(this,j,R),this.cache={}}},{key:"optimize",value:function(j){s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,j),this.cache={}}},{key:"path",value:function(j){return s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"path",this).call(this,j,!0)}},{key:"removeChild",value:function(j){s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"removeChild",this).call(this,j),this.cache={}}},{key:"split",value:function(j){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(R&&(j===0||j>=this.length()-E)){var P=this.clone();return j===0?(this.parent.insertBefore(P,this),this):(this.parent.insertBefore(P,this.next),P)}else{var F=s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"split",this).call(this,j,R);return this.cache={},F}}}]),T})(f.default.Block);D.blotName="block",D.tagName="P",D.defaultChild="break",D.allowedChildren=[m.default,f.default.Embed,x.default];function C(k){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k==null||(typeof k.formats=="function"&&(T=(0,c.default)(T,k.formats())),k.parent==null||k.parent.blotName=="scroll"||k.parent.statics.scope!==k.statics.scope)?T:C(k.parent,T)}r.bubbleFormats=C,r.BlockEmbed=_,r.default=D}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},s=(function(){function $(B,I){var L=[],U=!0,G=!1,H=void 0;try{for(var V=B[Symbol.iterator](),K;!(U=(K=V.next()).done)&&(L.push(K.value),!(I&&L.length===I));U=!0);}catch(ae){G=!0,H=ae}finally{try{!U&&V.return&&V.return()}finally{if(G)throw H}}return L}return function(B,I){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return $(B,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function $(B,I){for(var L=0;L<I.length;L++){var U=I[L];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(B,U.key,U)}}return function(B,I,L){return I&&$(B.prototype,I),L&&$(B,L),B}})();i(50);var c=i(2),u=C(c),d=i(14),h=C(d),f=i(8),p=C(f),y=i(9),g=C(y),m=i(0),v=C(m),x=i(15),b=C(x),A=i(3),w=C(A),S=i(10),E=C(S),_=i(34),D=C(_);function C($){return $&&$.__esModule?$:{default:$}}function k($,B,I){return B in $?Object.defineProperty($,B,{value:I,enumerable:!0,configurable:!0,writable:!0}):$[B]=I,$}function T($,B){if(!($ instanceof B))throw new TypeError("Cannot call a class as a function")}var N=(0,E.default)("quill"),j=(function(){o($,null,[{key:"debug",value:function(I){I===!0&&(I="log"),E.default.level(I)}},{key:"find",value:function(I){return I.__quill||v.default.find(I)}},{key:"import",value:function(I){return this.imports[I]==null&&N.error("Cannot import "+I+". Are you sure it was registered?"),this.imports[I]}},{key:"register",value:function(I,L){var U=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof I!="string"){var H=I.attrName||I.blotName;typeof H=="string"?this.register("formats/"+H,I,L):Object.keys(I).forEach(function(V){U.register(V,I[V],L)})}else this.imports[I]!=null&&!G&&N.warn("Overwriting "+I+" with",L),this.imports[I]=L,(I.startsWith("blots/")||I.startsWith("formats/"))&&L.blotName!=="abstract"?v.default.register(L):I.startsWith("modules")&&typeof L.register=="function"&&L.register()}}]);function $(B){var I=this,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(T(this,$),this.options=R(B,L),this.container=this.options.container,this.container==null)return N.error("Invalid Quill container",B);this.options.debug&&$.debug(this.options.debug);var U=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new b.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(H){H===p.default.events.TEXT_CHANGE&&I.root.classList.toggle("ql-blank",I.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(H,V){var K=I.selection.lastRange,ae=K&&K.length===0?K.index:void 0;P.call(I,function(){return I.editor.update(null,V,ae)},H)});var G=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+U+"<p><br></p></div>");this.setContents(G),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o($,[{key:"addContainer",value:function(I){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof I=="string"){var U=I;I=document.createElement("div"),I.classList.add(U)}return this.container.insertBefore(I,L),I}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(I,L,U){var G=this,H=F(I,L,U),V=s(H,4);return I=V[0],L=V[1],U=V[3],P.call(this,function(){return G.editor.deleteText(I,L)},U,I,-1*L)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(I),this.container.classList.toggle("ql-disabled",!I)}},{key:"focus",value:function(){var I=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=I,this.scrollIntoView()}},{key:"format",value:function(I,L){var U=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return P.call(this,function(){var H=U.getSelection(!0),V=new u.default;if(H==null)return V;if(v.default.query(I,v.default.Scope.BLOCK))V=U.editor.formatLine(H.index,H.length,k({},I,L));else{if(H.length===0)return U.selection.format(I,L),V;V=U.editor.formatText(H.index,H.length,k({},I,L))}return U.setSelection(H,p.default.sources.SILENT),V},G)}},{key:"formatLine",value:function(I,L,U,G,H){var V=this,K=void 0,ae=F(I,L,U,G,H),te=s(ae,4);return I=te[0],L=te[1],K=te[2],H=te[3],P.call(this,function(){return V.editor.formatLine(I,L,K)},H,I,0)}},{key:"formatText",value:function(I,L,U,G,H){var V=this,K=void 0,ae=F(I,L,U,G,H),te=s(ae,4);return I=te[0],L=te[1],K=te[2],H=te[3],P.call(this,function(){return V.editor.formatText(I,L,K)},H,I,0)}},{key:"getBounds",value:function(I){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=void 0;typeof I=="number"?U=this.selection.getBounds(I,L):U=this.selection.getBounds(I.index,I.length);var G=this.container.getBoundingClientRect();return{bottom:U.bottom-G.top,height:U.height,left:U.left-G.left,right:U.right-G.left,top:U.top-G.top,width:U.width}}},{key:"getContents",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-I,U=F(I,L),G=s(U,2);return I=G[0],L=G[1],this.editor.getContents(I,L)}},{key:"getFormat",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof I=="number"?this.editor.getFormat(I,L):this.editor.getFormat(I.index,I.length)}},{key:"getIndex",value:function(I){return I.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(I){return this.scroll.leaf(I)}},{key:"getLine",value:function(I){return this.scroll.line(I)}},{key:"getLines",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof I!="number"?this.scroll.lines(I.index,I.length):this.scroll.lines(I,L)}},{key:"getModule",value:function(I){return this.theme.modules[I]}},{key:"getSelection",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return I&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-I,U=F(I,L),G=s(U,2);return I=G[0],L=G[1],this.editor.getText(I,L)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(I,L,U){var G=this,H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:$.sources.API;return P.call(this,function(){return G.editor.insertEmbed(I,L,U)},H,I)}},{key:"insertText",value:function(I,L,U,G,H){var V=this,K=void 0,ae=F(I,0,U,G,H),te=s(ae,4);return I=te[0],K=te[2],H=te[3],P.call(this,function(){return V.editor.insertText(I,L,K)},H,I,L.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(I,L,U){this.clipboard.dangerouslyPasteHTML(I,L,U)}},{key:"removeFormat",value:function(I,L,U){var G=this,H=F(I,L,U),V=s(H,4);return I=V[0],L=V[1],U=V[3],P.call(this,function(){return G.editor.removeFormat(I,L)},U,I)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(I){var L=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return P.call(this,function(){I=new u.default(I);var G=L.getLength(),H=L.editor.deleteText(0,G),V=L.editor.applyDelta(I),K=V.ops[V.ops.length-1];K!=null&&typeof K.insert=="string"&&K.insert[K.insert.length-1]===`
`&&(L.editor.deleteText(L.getLength()-1,1),V.delete(1));var ae=H.compose(V);return ae},U)}},{key:"setSelection",value:function(I,L,U){if(I==null)this.selection.setRange(null,L||$.sources.API);else{var G=F(I,L,U),H=s(G,4);I=H[0],L=H[1],U=H[3],this.selection.setRange(new x.Range(I,L),U),U!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(I){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,U=new u.default().insert(I);return this.setContents(U,L)}},{key:"update",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,L=this.scroll.update(I);return this.selection.update(I),L}},{key:"updateContents",value:function(I){var L=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return P.call(this,function(){return I=new u.default(I),L.editor.applyDelta(I,U)},U,!0)}}]),$})();j.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},j.events=p.default.events,j.sources=p.default.sources,j.version="1.3.7",j.imports={delta:u.default,parchment:v.default,"core/module":g.default,"core/theme":D.default};function R($,B){if(B=(0,w.default)(!0,{container:$,modules:{clipboard:!0,keyboard:!0,history:!0}},B),!B.theme||B.theme===j.DEFAULTS.theme)B.theme=D.default;else if(B.theme=j.import("themes/"+B.theme),B.theme==null)throw new Error("Invalid theme "+B.theme+". Did you register it?");var I=(0,w.default)(!0,{},B.theme.DEFAULTS);[I,B].forEach(function(G){G.modules=G.modules||{},Object.keys(G.modules).forEach(function(H){G.modules[H]===!0&&(G.modules[H]={})})});var L=Object.keys(I.modules).concat(Object.keys(B.modules)),U=L.reduce(function(G,H){var V=j.import("modules/"+H);return V==null?N.error("Cannot load "+H+" module. Are you sure you registered it?"):G[H]=V.DEFAULTS||{},G},{});return B.modules!=null&&B.modules.toolbar&&B.modules.toolbar.constructor!==Object&&(B.modules.toolbar={container:B.modules.toolbar}),B=(0,w.default)(!0,{},j.DEFAULTS,{modules:U},I,B),["bounds","container","scrollingContainer"].forEach(function(G){typeof B[G]=="string"&&(B[G]=document.querySelector(B[G]))}),B.modules=Object.keys(B.modules).reduce(function(G,H){return B.modules[H]&&(G[H]=B.modules[H]),G},{}),B}function P($,B,I,L){if(this.options.strict&&!this.isEnabled()&&B===p.default.sources.USER)return new u.default;var U=I==null?null:this.getSelection(),G=this.editor.delta,H=$();if(U!=null&&(I===!0&&(I=U.index),L==null?U=q(U,H,B):L!==0&&(U=q(U,I,L,B)),this.setSelection(U,p.default.sources.SILENT)),H.length()>0){var V,K=[p.default.events.TEXT_CHANGE,H,G,B];if((V=this.emitter).emit.apply(V,[p.default.events.EDITOR_CHANGE].concat(K)),B!==p.default.sources.SILENT){var ae;(ae=this.emitter).emit.apply(ae,K)}}return H}function F($,B,I,L,U){var G={};return typeof $.index=="number"&&typeof $.length=="number"?typeof B!="number"?(U=L,L=I,I=B,B=$.length,$=$.index):(B=$.length,$=$.index):typeof B!="number"&&(U=L,L=I,I=B,B=0),(typeof I>"u"?"undefined":a(I))==="object"?(G=I,U=L):typeof I=="string"&&(L!=null?G[I]=L:U=I),U=U||p.default.sources.API,[$,B,G,U]}function q($,B,I,L){if($==null)return null;var U=void 0,G=void 0;if(B instanceof u.default){var H=[$.index,$.index+$.length].map(function(te){return B.transformPosition(te,L!==p.default.sources.USER)}),V=s(H,2);U=V[0],G=V[1]}else{var K=[$.index,$.index+$.length].map(function(te){return te<B||te===B&&L===p.default.sources.USER?te:I>=0?te+I:Math.max(B,te+I)}),ae=s(K,2);U=ae[0],G=ae[1]}return new x.Range(U,G-U)}r.expandConfig=R,r.overload=F,r.default=j}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function m(v,x){for(var b=0;b<x.length;b++){var A=x[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}return function(v,x,b){return x&&m(v.prototype,x),b&&m(v,b),v}})(),s=function m(v,x,b){v===null&&(v=Function.prototype);var A=Object.getOwnPropertyDescriptor(v,x);if(A===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:m(w,x,b)}else{if("value"in A)return A.value;var S=A.get;return S===void 0?void 0:S.call(b)}},o=i(7),c=h(o),u=i(0),d=h(u);function h(m){return m&&m.__esModule?m:{default:m}}function f(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function p(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function y(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var g=(function(m){y(v,m);function v(){return f(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"formatAt",value:function(b,A,w,S){if(v.compare(this.statics.blotName,w)<0&&d.default.query(w,d.default.Scope.BLOT)){var E=this.isolate(b,A);S&&E.wrap(w,S)}else s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,b,A,w,S)}},{key:"optimize",value:function(b){if(s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,b),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var A=this.parent.isolate(this.offset(),this.length());this.moveChildren(A),A.wrap(this)}}}],[{key:"compare",value:function(b,A){var w=v.order.indexOf(b),S=v.order.indexOf(A);return w>=0||S>=0?w-S:b===A?0:b<A?-1:1}}]),v})(d.default.Inline);g.allowedChildren=[g,d.default.Embed,c.default],g.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=g}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),s=o(a);function o(f){return f&&f.__esModule?f:{default:f}}function c(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function u(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=(function(f){d(p,f);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(s.default.Text);r.default=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function x(b,A){for(var w=0;w<A.length;w++){var S=A[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,A,w){return A&&x(b.prototype,A),w&&x(b,w),b}})(),s=function x(b,A,w){b===null&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,A);if(S===void 0){var E=Object.getPrototypeOf(b);return E===null?void 0:x(E,A,w)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(w)}},o=i(54),c=h(o),u=i(10),d=h(u);function h(x){return x&&x.__esModule?x:{default:x}}function f(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function p(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function y(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var g=(0,d.default)("quill:events"),m=["selectionchange","mousedown","mouseup","click"];m.forEach(function(x){document.addEventListener(x,function(){for(var b=arguments.length,A=Array(b),w=0;w<b;w++)A[w]=arguments[w];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(S){if(S.__quill&&S.__quill.emitter){var E;(E=S.__quill.emitter).handleDOM.apply(E,A)}})})});var v=(function(x){y(b,x);function b(){f(this,b);var A=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return A.listeners={},A.on("error",g.error),A}return a(b,[{key:"emit",value:function(){g.log.apply(g,arguments),s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(w){for(var S=arguments.length,E=Array(S>1?S-1:0),_=1;_<S;_++)E[_-1]=arguments[_];(this.listeners[w.type]||[]).forEach(function(D){var C=D.node,k=D.handler;(w.target===C||C.contains(w.target))&&k.apply(void 0,[w].concat(E))})}},{key:"listenDOM",value:function(w,S,E){this.listeners[w]||(this.listeners[w]=[]),this.listeners[w].push({node:S,handler:E})}}]),b})(c.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},r.default=v}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});function a(o,c){if(!(o instanceof c))throw new TypeError("Cannot call a class as a function")}var s=function o(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,o),this.quill=c,this.options=u};s.DEFAULTS={},r.default=s}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=["error","warn","log","info"],s="warn";function o(u){if(a.indexOf(u)<=a.indexOf(s)){for(var d,h=arguments.length,f=Array(h>1?h-1:0),p=1;p<h;p++)f[p-1]=arguments[p];(d=console)[u].apply(d,f)}}function c(u){return a.reduce(function(d,h){return d[h]=o.bind(console,h,u),d},{})}o.level=c.level=function(u){s=u},r.default=c}),(function(t,r,i){var a=Array.prototype.slice,s=i(52),o=i(53),c=t.exports=function(f,p,y){return y||(y={}),f===p?!0:f instanceof Date&&p instanceof Date?f.getTime()===p.getTime():!f||!p||typeof f!="object"&&typeof p!="object"?y.strict?f===p:f==p:h(f,p,y)};function u(f){return f==null}function d(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function h(f,p,y){var g,m;if(u(f)||u(p)||f.prototype!==p.prototype)return!1;if(o(f))return o(p)?(f=a.call(f),p=a.call(p),c(f,p,y)):!1;if(d(f)){if(!d(p)||f.length!==p.length)return!1;for(g=0;g<f.length;g++)if(f[g]!==p[g])return!1;return!0}try{var v=s(f),x=s(p)}catch{return!1}if(v.length!=x.length)return!1;for(v.sort(),x.sort(),g=v.length-1;g>=0;g--)if(v[g]!=x[g])return!1;for(g=v.length-1;g>=0;g--)if(m=v[g],!c(f[m],p[m],y))return!1;return typeof f==typeof p}}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),s=(function(){function o(c,u,d){d===void 0&&(d={}),this.attrName=c,this.keyName=u;var h=a.Scope.TYPE&a.Scope.ATTRIBUTE;d.scope!=null?this.scope=d.scope&a.Scope.LEVEL|h:this.scope=a.Scope.ATTRIBUTE,d.whitelist!=null&&(this.whitelist=d.whitelist)}return o.keys=function(c){return[].map.call(c.attributes,function(u){return u.name})},o.prototype.add=function(c,u){return this.canAdd(c,u)?(c.setAttribute(this.keyName,u),!0):!1},o.prototype.canAdd=function(c,u){var d=a.query(c,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return d==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},o.prototype.remove=function(c){c.removeAttribute(this.keyName)},o.prototype.value=function(c){var u=c.getAttribute(this.keyName);return this.canAdd(c,u)&&u?u:""},o})();r.default=s}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var a=(function(){function _(D,C){var k=[],T=!0,N=!1,j=void 0;try{for(var R=D[Symbol.iterator](),P;!(T=(P=R.next()).done)&&(k.push(P.value),!(C&&k.length===C));T=!0);}catch(F){N=!0,j=F}finally{try{!T&&R.return&&R.return()}finally{if(N)throw j}}return k}return function(D,C){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return _(D,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),s=(function(){function _(D,C){for(var k=0;k<C.length;k++){var T=C[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(D,T.key,T)}}return function(D,C,k){return C&&_(D.prototype,C),k&&_(D,k),D}})(),o=function _(D,C,k){D===null&&(D=Function.prototype);var T=Object.getOwnPropertyDescriptor(D,C);if(T===void 0){var N=Object.getPrototypeOf(D);return N===null?void 0:_(N,C,k)}else{if("value"in T)return T.value;var j=T.get;return j===void 0?void 0:j.call(k)}},c=i(2),u=x(c),d=i(0),h=x(d),f=i(4),p=x(f),y=i(6),g=x(y),m=i(7),v=x(m);function x(_){return _&&_.__esModule?_:{default:_}}function b(_,D){if(!(_ instanceof D))throw new TypeError("Cannot call a class as a function")}function A(_,D){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:_}function w(_,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);_.prototype=Object.create(D&&D.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(_,D):_.__proto__=D)}var S=(function(_){w(D,_);function D(){return b(this,D),A(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return D})(g.default);S.blotName="code",S.tagName="CODE";var E=(function(_){w(D,_);function D(){return b(this,D),A(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return s(D,[{key:"delta",value:function(){var k=this,T=this.domNode.textContent;return T.endsWith(`
`)&&(T=T.slice(0,-1)),T.split(`
`).reduce(function(N,j){return N.insert(j).insert(`
`,k.formats())},new u.default)}},{key:"format",value:function(k,T){if(!(k===this.statics.blotName&&T)){var N=this.descendant(v.default,this.length()-1),j=a(N,1),R=j[0];R?.deleteAt(R.length()-1,1),o(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"format",this).call(this,k,T)}}},{key:"formatAt",value:function(k,T,N,j){if(T!==0&&!(h.default.query(N,h.default.Scope.BLOCK)==null||N===this.statics.blotName&&j===this.statics.formats(this.domNode))){var R=this.newlineIndex(k);if(!(R<0||R>=k+T)){var P=this.newlineIndex(k,!0)+1,F=R-P+1,q=this.isolate(P,F),$=q.next;q.format(N,j),$ instanceof D&&$.formatAt(0,k-P+T-F,N,j)}}}},{key:"insertAt",value:function(k,T,N){if(N==null){var j=this.descendant(v.default,k),R=a(j,2),P=R[0],F=R[1];P.insertAt(F,T)}}},{key:"length",value:function(){var k=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?k:k+1}},{key:"newlineIndex",value:function(k){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(T)return this.domNode.textContent.slice(0,k).lastIndexOf(`
`);var N=this.domNode.textContent.slice(k).indexOf(`
`);return N>-1?k+N:-1}},{key:"optimize",value:function(k){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),o(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"optimize",this).call(this,k);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===T.statics.formats(T.domNode)&&(T.optimize(k),T.moveChildren(this),T.remove())}},{key:"replace",value:function(k){o(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"replace",this).call(this,k),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(T){var N=h.default.find(T);N==null?T.parentNode.removeChild(T):N instanceof h.default.Embed?N.remove():N.unwrap()})}}],[{key:"create",value:function(k){var T=o(D.__proto__||Object.getPrototypeOf(D),"create",this).call(this,k);return T.setAttribute("spellcheck",!1),T}},{key:"formats",value:function(){return!0}}]),D})(p.default);E.blotName="code-block",E.tagName="PRE",E.TAB="  ",r.Code=S,r.default=E}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},s=(function(){function $(B,I){var L=[],U=!0,G=!1,H=void 0;try{for(var V=B[Symbol.iterator](),K;!(U=(K=V.next()).done)&&(L.push(K.value),!(I&&L.length===I));U=!0);}catch(ae){G=!0,H=ae}finally{try{!U&&V.return&&V.return()}finally{if(G)throw H}}return L}return function(B,I){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return $(B,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function $(B,I){for(var L=0;L<I.length;L++){var U=I[L];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(B,U.key,U)}}return function(B,I,L){return I&&$(B.prototype,I),L&&$(B,L),B}})(),c=i(2),u=T(c),d=i(20),h=T(d),f=i(0),p=T(f),y=i(13),g=T(y),m=i(24),v=T(m),x=i(4),b=T(x),A=i(16),w=T(A),S=i(21),E=T(S),_=i(11),D=T(_),C=i(3),k=T(C);function T($){return $&&$.__esModule?$:{default:$}}function N($,B,I){return B in $?Object.defineProperty($,B,{value:I,enumerable:!0,configurable:!0,writable:!0}):$[B]=I,$}function j($,B){if(!($ instanceof B))throw new TypeError("Cannot call a class as a function")}var R=/^[ -~]*$/,P=(function(){function $(B){j(this,$),this.scroll=B,this.delta=this.getDelta()}return o($,[{key:"applyDelta",value:function(I){var L=this,U=!1;this.scroll.update();var G=this.scroll.length();return this.scroll.batchStart(),I=q(I),I.reduce(function(H,V){var K=V.retain||V.delete||V.insert.length||1,ae=V.attributes||{};if(V.insert!=null){if(typeof V.insert=="string"){var te=V.insert;te.endsWith(`
`)&&U&&(U=!1,te=te.slice(0,-1)),H>=G&&!te.endsWith(`
`)&&(U=!0),L.scroll.insertAt(H,te);var de=L.scroll.line(H),xe=s(de,2),ve=xe[0],Te=xe[1],O=(0,k.default)({},(0,x.bubbleFormats)(ve));if(ve instanceof b.default){var ie=ve.descendant(p.default.Leaf,Te),re=s(ie,1),Z=re[0];O=(0,k.default)(O,(0,x.bubbleFormats)(Z))}ae=h.default.attributes.diff(O,ae)||{}}else if(a(V.insert)==="object"){var z=Object.keys(V.insert)[0];if(z==null)return H;L.scroll.insertAt(H,z,V.insert[z])}G+=K}return Object.keys(ae).forEach(function(X){L.scroll.formatAt(H,K,X,ae[X])}),H+K},0),I.reduce(function(H,V){return typeof V.delete=="number"?(L.scroll.deleteAt(H,V.delete),H):H+(V.retain||V.insert.length||1)},0),this.scroll.batchEnd(),this.update(I)}},{key:"deleteText",value:function(I,L){return this.scroll.deleteAt(I,L),this.update(new u.default().retain(I).delete(L))}},{key:"formatLine",value:function(I,L){var U=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(G).forEach(function(H){if(!(U.scroll.whitelist!=null&&!U.scroll.whitelist[H])){var V=U.scroll.lines(I,Math.max(L,1)),K=L;V.forEach(function(ae){var te=ae.length();if(!(ae instanceof g.default))ae.format(H,G[H]);else{var de=I-ae.offset(U.scroll),xe=ae.newlineIndex(de+K)-de+1;ae.formatAt(de,xe,H,G[H])}K-=te})}}),this.scroll.optimize(),this.update(new u.default().retain(I).retain(L,(0,E.default)(G)))}},{key:"formatText",value:function(I,L){var U=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(G).forEach(function(H){U.scroll.formatAt(I,L,H,G[H])}),this.update(new u.default().retain(I).retain(L,(0,E.default)(G)))}},{key:"getContents",value:function(I,L){return this.delta.slice(I,I+L)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(I,L){return I.concat(L.delta())},new u.default)}},{key:"getFormat",value:function(I){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=[],G=[];L===0?this.scroll.path(I).forEach(function(V){var K=s(V,1),ae=K[0];ae instanceof b.default?U.push(ae):ae instanceof p.default.Leaf&&G.push(ae)}):(U=this.scroll.lines(I,L),G=this.scroll.descendants(p.default.Leaf,I,L));var H=[U,G].map(function(V){if(V.length===0)return{};for(var K=(0,x.bubbleFormats)(V.shift());Object.keys(K).length>0;){var ae=V.shift();if(ae==null)return K;K=F((0,x.bubbleFormats)(ae),K)}return K});return k.default.apply(k.default,H)}},{key:"getText",value:function(I,L){return this.getContents(I,L).filter(function(U){return typeof U.insert=="string"}).map(function(U){return U.insert}).join("")}},{key:"insertEmbed",value:function(I,L,U){return this.scroll.insertAt(I,L,U),this.update(new u.default().retain(I).insert(N({},L,U)))}},{key:"insertText",value:function(I,L){var U=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return L=L.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(I,L),Object.keys(G).forEach(function(H){U.scroll.formatAt(I,L.length,H,G[H])}),this.update(new u.default().retain(I).insert(L,(0,E.default)(G)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var I=this.scroll.children.head;return I.statics.blotName!==b.default.blotName||I.children.length>1?!1:I.children.head instanceof w.default}},{key:"removeFormat",value:function(I,L){var U=this.getText(I,L),G=this.scroll.line(I+L),H=s(G,2),V=H[0],K=H[1],ae=0,te=new u.default;V!=null&&(V instanceof g.default?ae=V.newlineIndex(K)-K+1:ae=V.length()-K,te=V.delta().slice(K,K+ae-1).insert(`
`));var de=this.getContents(I,L+ae),xe=de.diff(new u.default().insert(U).concat(te)),ve=new u.default().retain(I).concat(xe);return this.applyDelta(ve)}},{key:"update",value:function(I){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,G=this.delta;if(L.length===1&&L[0].type==="characterData"&&L[0].target.data.match(R)&&p.default.find(L[0].target)){var H=p.default.find(L[0].target),V=(0,x.bubbleFormats)(H),K=H.offset(this.scroll),ae=L[0].oldValue.replace(v.default.CONTENTS,""),te=new u.default().insert(ae),de=new u.default().insert(H.value()),xe=new u.default().retain(K).concat(te.diff(de,U));I=xe.reduce(function(ve,Te){return Te.insert?ve.insert(Te.insert,V):ve.push(Te)},new u.default),this.delta=G.compose(I)}else this.delta=this.getDelta(),(!I||!(0,D.default)(G.compose(I),this.delta))&&(I=G.diff(this.delta,U));return I}}]),$})();function F($,B){return Object.keys(B).reduce(function(I,L){return $[L]==null||(B[L]===$[L]?I[L]=B[L]:Array.isArray(B[L])?B[L].indexOf($[L])<0&&(I[L]=B[L].concat([$[L]])):I[L]=[B[L],$[L]]),I},{})}function q($){return $.reduce(function(B,I){if(I.insert===1){var L=(0,E.default)(I.attributes);return delete L.image,B.insert({image:I.attributes.image},L)}if(I.attributes!=null&&(I.attributes.list===!0||I.attributes.bullet===!0)&&(I=(0,E.default)(I),I.attributes.list?I.attributes.list="ordered":(I.attributes.list="bullet",delete I.attributes.bullet)),typeof I.insert=="string"){var U=I.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return B.insert(U,I.attributes)}return B.push(I)},new u.default)}r.default=P}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var a=(function(){function _(D,C){var k=[],T=!0,N=!1,j=void 0;try{for(var R=D[Symbol.iterator](),P;!(T=(P=R.next()).done)&&(k.push(P.value),!(C&&k.length===C));T=!0);}catch(F){N=!0,j=F}finally{try{!T&&R.return&&R.return()}finally{if(N)throw j}}return k}return function(D,C){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return _(D,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),s=(function(){function _(D,C){for(var k=0;k<C.length;k++){var T=C[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(D,T.key,T)}}return function(D,C,k){return C&&_(D.prototype,C),k&&_(D,k),D}})(),o=i(0),c=v(o),u=i(21),d=v(u),h=i(11),f=v(h),p=i(8),y=v(p),g=i(10),m=v(g);function v(_){return _&&_.__esModule?_:{default:_}}function x(_){if(Array.isArray(_)){for(var D=0,C=Array(_.length);D<_.length;D++)C[D]=_[D];return C}else return Array.from(_)}function b(_,D){if(!(_ instanceof D))throw new TypeError("Cannot call a class as a function")}var A=(0,m.default)("quill:selection"),w=function _(D){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;b(this,_),this.index=D,this.length=C},S=(function(){function _(D,C){var k=this;b(this,_),this.emitter=C,this.scroll=D,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new w(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){k.mouseDown||setTimeout(k.update.bind(k,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(T,N){T===y.default.events.TEXT_CHANGE&&N.length()>0&&k.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(k.hasFocus()){var T=k.getNativeRange();T!=null&&T.start.node!==k.cursor.textNode&&k.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{k.setNativeRange(T.start.node,T.start.offset,T.end.node,T.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(T,N){if(N.range){var j=N.range,R=j.startNode,P=j.startOffset,F=j.endNode,q=j.endOffset;k.setNativeRange(R,P,F,q)}}),this.update(y.default.sources.SILENT)}return s(_,[{key:"handleComposition",value:function(){var C=this;this.root.addEventListener("compositionstart",function(){C.composing=!0}),this.root.addEventListener("compositionend",function(){if(C.composing=!1,C.cursor.parent){var k=C.cursor.restore();if(!k)return;setTimeout(function(){C.setNativeRange(k.startNode,k.startOffset,k.endNode,k.endOffset)},1)}})}},{key:"handleDragging",value:function(){var C=this;this.emitter.listenDOM("mousedown",document.body,function(){C.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){C.mouseDown=!1,C.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(C,k){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[C])){this.scroll.update();var T=this.getNativeRange();if(!(T==null||!T.native.collapsed||c.default.query(C,c.default.Scope.BLOCK))){if(T.start.node!==this.cursor.textNode){var N=c.default.find(T.start.node,!1);if(N==null)return;if(N instanceof c.default.Leaf){var j=N.split(T.start.offset);N.parent.insertBefore(this.cursor,j)}else N.insertBefore(this.cursor,T.start.node);this.cursor.attach()}this.cursor.format(C,k),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(C){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=this.scroll.length();C=Math.min(C,T-1),k=Math.min(C+k,T-1)-C;var N=void 0,j=this.scroll.leaf(C),R=a(j,2),P=R[0],F=R[1];if(P==null)return null;var q=P.position(F,!0),$=a(q,2);N=$[0],F=$[1];var B=document.createRange();if(k>0){B.setStart(N,F);var I=this.scroll.leaf(C+k),L=a(I,2);if(P=L[0],F=L[1],P==null)return null;var U=P.position(F,!0),G=a(U,2);return N=G[0],F=G[1],B.setEnd(N,F),B.getBoundingClientRect()}else{var H="left",V=void 0;return N instanceof Text?(F<N.data.length?(B.setStart(N,F),B.setEnd(N,F+1)):(B.setStart(N,F-1),B.setEnd(N,F),H="right"),V=B.getBoundingClientRect()):(V=P.domNode.getBoundingClientRect(),F>0&&(H="right")),{bottom:V.top+V.height,height:V.height,left:V[H],right:V[H],top:V.top,width:0}}}},{key:"getNativeRange",value:function(){var C=document.getSelection();if(C==null||C.rangeCount<=0)return null;var k=C.getRangeAt(0);if(k==null)return null;var T=this.normalizeNative(k);return A.info("getNativeRange",T),T}},{key:"getRange",value:function(){var C=this.getNativeRange();if(C==null)return[null,null];var k=this.normalizedToRange(C);return[k,C]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(C){var k=this,T=[[C.start.node,C.start.offset]];C.native.collapsed||T.push([C.end.node,C.end.offset]);var N=T.map(function(P){var F=a(P,2),q=F[0],$=F[1],B=c.default.find(q,!0),I=B.offset(k.scroll);return $===0?I:B instanceof c.default.Container?I+B.length():I+B.index(q,$)}),j=Math.min(Math.max.apply(Math,x(N)),this.scroll.length()-1),R=Math.min.apply(Math,[j].concat(x(N)));return new w(R,j-R)}},{key:"normalizeNative",value:function(C){if(!E(this.root,C.startContainer)||!C.collapsed&&!E(this.root,C.endContainer))return null;var k={start:{node:C.startContainer,offset:C.startOffset},end:{node:C.endContainer,offset:C.endOffset},native:C};return[k.start,k.end].forEach(function(T){for(var N=T.node,j=T.offset;!(N instanceof Text)&&N.childNodes.length>0;)if(N.childNodes.length>j)N=N.childNodes[j],j=0;else if(N.childNodes.length===j)N=N.lastChild,j=N instanceof Text?N.data.length:N.childNodes.length+1;else break;T.node=N,T.offset=j}),k}},{key:"rangeToNative",value:function(C){var k=this,T=C.collapsed?[C.index]:[C.index,C.index+C.length],N=[],j=this.scroll.length();return T.forEach(function(R,P){R=Math.min(j-1,R);var F=void 0,q=k.scroll.leaf(R),$=a(q,2),B=$[0],I=$[1],L=B.position(I,P!==0),U=a(L,2);F=U[0],I=U[1],N.push(F,I)}),N.length<2&&(N=N.concat(N)),N}},{key:"scrollIntoView",value:function(C){var k=this.lastRange;if(k!=null){var T=this.getBounds(k.index,k.length);if(T!=null){var N=this.scroll.length()-1,j=this.scroll.line(Math.min(k.index,N)),R=a(j,1),P=R[0],F=P;if(k.length>0){var q=this.scroll.line(Math.min(k.index+k.length,N)),$=a(q,1);F=$[0]}if(!(P==null||F==null)){var B=C.getBoundingClientRect();T.top<B.top?C.scrollTop-=B.top-T.top:T.bottom>B.bottom&&(C.scrollTop+=T.bottom-B.bottom)}}}}},{key:"setNativeRange",value:function(C,k){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C,N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,j=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(A.info("setNativeRange",C,k,T,N),!(C!=null&&(this.root.parentNode==null||C.parentNode==null||T.parentNode==null))){var R=document.getSelection();if(R!=null)if(C!=null){this.hasFocus()||this.root.focus();var P=(this.getNativeRange()||{}).native;if(P==null||j||C!==P.startContainer||k!==P.startOffset||T!==P.endContainer||N!==P.endOffset){C.tagName=="BR"&&(k=[].indexOf.call(C.parentNode.childNodes,C),C=C.parentNode),T.tagName=="BR"&&(N=[].indexOf.call(T.parentNode.childNodes,T),T=T.parentNode);var F=document.createRange();F.setStart(C,k),F.setEnd(T,N),R.removeAllRanges(),R.addRange(F)}}else R.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(C){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof k=="string"&&(T=k,k=!1),A.info("setRange",C),C!=null){var N=this.rangeToNative(C);this.setNativeRange.apply(this,x(N).concat([k]))}else this.setNativeRange(null);this.update(T)}},{key:"update",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,k=this.lastRange,T=this.getRange(),N=a(T,2),j=N[0],R=N[1];if(this.lastRange=j,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(k,this.lastRange)){var P;!this.composing&&R!=null&&R.native.collapsed&&R.start.node!==this.cursor.textNode&&this.cursor.restore();var F=[y.default.events.SELECTION_CHANGE,(0,d.default)(this.lastRange),(0,d.default)(k),C];if((P=this.emitter).emit.apply(P,[y.default.events.EDITOR_CHANGE].concat(F)),C!==y.default.sources.SILENT){var q;(q=this.emitter).emit.apply(q,F)}}}}]),_})();function E(_,D){try{D.parentNode}catch{return!1}return D instanceof Text&&(D=D.parentNode),_.contains(D)}r.Range=w,r.default=S}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function y(g,m){for(var v=0;v<m.length;v++){var x=m[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,v){return m&&y(g.prototype,m),v&&y(g,v),g}})(),s=function y(g,m,v){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:y(b,m,v)}else{if("value"in x)return x.value;var A=x.get;return A===void 0?void 0:A.call(v)}},o=i(0),c=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function h(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function f(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var p=(function(y){f(g,y);function g(){return d(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"insertInto",value:function(v,x){v.children.length===0?s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertInto",this).call(this,v,x):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),g})(c.default.Embed);p.blotName="break",p.tagName="BR",r.default=p}),(function(t,r,i){var a=this&&this.__extends||(function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var y in p)p.hasOwnProperty(y)&&(f[y]=p[y])};return function(f,p){h(f,p);function y(){this.constructor=f}f.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}})();Object.defineProperty(r,"__esModule",{value:!0});var s=i(44),o=i(30),c=i(1),u=(function(h){a(f,h);function f(p){var y=h.call(this,p)||this;return y.build(),y}return f.prototype.appendChild=function(p){this.insertBefore(p)},f.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},f.prototype.build=function(){var p=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var g=d(y);p.insertBefore(g,p.children.head||void 0)}catch(m){if(m instanceof c.ParchmentError)return;throw m}})},f.prototype.deleteAt=function(p,y){if(p===0&&y===this.length())return this.remove();this.children.forEachAt(p,y,function(g,m,v){g.deleteAt(m,v)})},f.prototype.descendant=function(p,y){var g=this.children.find(y),m=g[0],v=g[1];return p.blotName==null&&p(m)||p.blotName!=null&&m instanceof p?[m,v]:m instanceof f?m.descendant(p,v):[null,-1]},f.prototype.descendants=function(p,y,g){y===void 0&&(y=0),g===void 0&&(g=Number.MAX_VALUE);var m=[],v=g;return this.children.forEachAt(y,g,function(x,b,A){(p.blotName==null&&p(x)||p.blotName!=null&&x instanceof p)&&m.push(x),x instanceof f&&(m=m.concat(x.descendants(p,b,v))),v-=A}),m},f.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),h.prototype.detach.call(this)},f.prototype.formatAt=function(p,y,g,m){this.children.forEachAt(p,y,function(v,x,b){v.formatAt(x,b,g,m)})},f.prototype.insertAt=function(p,y,g){var m=this.children.find(p),v=m[0],x=m[1];if(v)v.insertAt(x,y,g);else{var b=g==null?c.create("text",y):c.create(y,g);this.appendChild(b)}},f.prototype.insertBefore=function(p,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(g){return p instanceof g}))throw new c.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,y)},f.prototype.length=function(){return this.children.reduce(function(p,y){return p+y.length()},0)},f.prototype.moveChildren=function(p,y){this.children.forEach(function(g){p.insertBefore(g,y)})},f.prototype.optimize=function(p){if(h.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var y=c.create(this.statics.defaultChild);this.appendChild(y),y.optimize(p)}else this.remove()},f.prototype.path=function(p,y){y===void 0&&(y=!1);var g=this.children.find(p,y),m=g[0],v=g[1],x=[[this,p]];return m instanceof f?x.concat(m.path(v,y)):(m!=null&&x.push([m,v]),x)},f.prototype.removeChild=function(p){this.children.remove(p)},f.prototype.replace=function(p){p instanceof f&&p.moveChildren(this),h.prototype.replace.call(this,p)},f.prototype.split=function(p,y){if(y===void 0&&(y=!1),!y){if(p===0)return this;if(p===this.length())return this.next}var g=this.clone();return this.parent.insertBefore(g,this.next),this.children.forEachAt(p,this.length(),function(m,v,x){m=m.split(v,y),g.appendChild(m)}),g},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(p,y){var g=this,m=[],v=[];p.forEach(function(x){x.target===g.domNode&&x.type==="childList"&&(m.push.apply(m,x.addedNodes),v.push.apply(v,x.removedNodes))}),v.forEach(function(x){if(!(x.parentNode!=null&&x.tagName!=="IFRAME"&&document.body.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var b=c.find(x);b!=null&&(b.domNode.parentNode==null||b.domNode.parentNode===g.domNode)&&b.detach()}}),m.filter(function(x){return x.parentNode==g.domNode}).sort(function(x,b){return x===b?0:x.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(x){var b=null;x.nextSibling!=null&&(b=c.find(x.nextSibling));var A=d(x);(A.next!=b||A.next==null)&&(A.parent!=null&&A.parent.removeChild(g),g.insertBefore(A,b||void 0))})},f})(o.default);function d(h){var f=c.find(h);if(f==null)try{f=c.create(h)}catch{f=c.create(c.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(y){f.domNode.appendChild(y)}),h.parentNode&&h.parentNode.replaceChild(f.domNode,h),f.attach()}return f}r.default=u}),(function(t,r,i){var a=this&&this.__extends||(function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var y in p)p.hasOwnProperty(y)&&(f[y]=p[y])};return function(f,p){h(f,p);function y(){this.constructor=f}f.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}})();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),o=i(31),c=i(17),u=i(1),d=(function(h){a(f,h);function f(p){var y=h.call(this,p)||this;return y.attributes=new o.default(y.domNode),y}return f.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},f.prototype.format=function(p,y){var g=u.query(p);g instanceof s.default?this.attributes.attribute(g,y):y&&g!=null&&(p!==this.statics.blotName||this.formats()[p]!==y)&&this.replaceWith(p,y)},f.prototype.formats=function(){var p=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(p[this.statics.blotName]=y),p},f.prototype.replaceWith=function(p,y){var g=h.prototype.replaceWith.call(this,p,y);return this.attributes.copy(g),g},f.prototype.update=function(p,y){var g=this;h.prototype.update.call(this,p,y),p.some(function(m){return m.target===g.domNode&&m.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(p,y){var g=h.prototype.wrap.call(this,p,y);return g instanceof f&&g.statics.scope===this.statics.scope&&this.attributes.move(g),g},f})(c.default);r.default=d}),(function(t,r,i){var a=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){u(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}})();Object.defineProperty(r,"__esModule",{value:!0});var s=i(30),o=i(1),c=(function(u){a(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.value=function(h){return!0},d.prototype.index=function(h,f){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},d.prototype.position=function(h,f){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(p+=1),[this.parent.domNode,p]},d.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},d.scope=o.Scope.INLINE_BLOT,d})(s.default);r.default=c}),(function(t,r,i){var a=i(11),s=i(3),o={attributes:{compose:function(u,d,h){typeof u!="object"&&(u={}),typeof d!="object"&&(d={});var f=s(!0,{},d);h||(f=Object.keys(f).reduce(function(y,g){return f[g]!=null&&(y[g]=f[g]),y},{}));for(var p in u)u[p]!==void 0&&d[p]===void 0&&(f[p]=u[p]);return Object.keys(f).length>0?f:void 0},diff:function(u,d){typeof u!="object"&&(u={}),typeof d!="object"&&(d={});var h=Object.keys(u).concat(Object.keys(d)).reduce(function(f,p){return a(u[p],d[p])||(f[p]=d[p]===void 0?null:d[p]),f},{});return Object.keys(h).length>0?h:void 0},transform:function(u,d,h){if(typeof u!="object")return d;if(typeof d=="object"){if(!h)return d;var f=Object.keys(d).reduce(function(p,y){return u[y]===void 0&&(p[y]=d[y]),p},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(u){return new c(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function c(u){this.ops=u,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(u){u||(u=1/0);var d=this.ops[this.index];if(d){var h=this.offset,f=o.length(d);if(u>=f-h?(u=f-h,this.index+=1,this.offset=0):this.offset+=u,typeof d.delete=="number")return{delete:u};var p={};return d.attributes&&(p.attributes=d.attributes),typeof d.retain=="number"?p.retain=u:typeof d.insert=="string"?p.insert=d.insert.substr(h,u):p.insert=d.insert,p}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,d=this.index,h=this.next(),f=this.ops.slice(this.index);return this.offset=u,this.index=d,[h].concat(f)}else return[]},t.exports=o}),(function(t,r){var i=(function(){function a(g,m){return m!=null&&g instanceof m}var s;try{s=Map}catch{s=function(){}}var o;try{o=Set}catch{o=function(){}}var c;try{c=Promise}catch{c=function(){}}function u(g,m,v,x,b){typeof m=="object"&&(v=m.depth,x=m.prototype,b=m.includeNonEnumerable,m=m.circular);var A=[],w=[],S=typeof Buffer<"u";typeof m>"u"&&(m=!0),typeof v>"u"&&(v=1/0);function E(_,D){if(_===null)return null;if(D===0)return _;var C,k;if(typeof _!="object")return _;if(a(_,s))C=new s;else if(a(_,o))C=new o;else if(a(_,c))C=new c(function(B,I){_.then(function(L){B(E(L,D-1))},function(L){I(E(L,D-1))})});else if(u.__isArray(_))C=[];else if(u.__isRegExp(_))C=new RegExp(_.source,y(_)),_.lastIndex&&(C.lastIndex=_.lastIndex);else if(u.__isDate(_))C=new Date(_.getTime());else{if(S&&Buffer.isBuffer(_))return Buffer.allocUnsafe?C=Buffer.allocUnsafe(_.length):C=new Buffer(_.length),_.copy(C),C;a(_,Error)?C=Object.create(_):typeof x>"u"?(k=Object.getPrototypeOf(_),C=Object.create(k)):(C=Object.create(x),k=x)}if(m){var T=A.indexOf(_);if(T!=-1)return w[T];A.push(_),w.push(C)}a(_,s)&&_.forEach(function(B,I){var L=E(I,D-1),U=E(B,D-1);C.set(L,U)}),a(_,o)&&_.forEach(function(B){var I=E(B,D-1);C.add(I)});for(var N in _){var j;k&&(j=Object.getOwnPropertyDescriptor(k,N)),!(j&&j.set==null)&&(C[N]=E(_[N],D-1))}if(Object.getOwnPropertySymbols)for(var R=Object.getOwnPropertySymbols(_),N=0;N<R.length;N++){var P=R[N],F=Object.getOwnPropertyDescriptor(_,P);F&&!F.enumerable&&!b||(C[P]=E(_[P],D-1),F.enumerable||Object.defineProperty(C,P,{enumerable:!1}))}if(b)for(var q=Object.getOwnPropertyNames(_),N=0;N<q.length;N++){var $=q[N],F=Object.getOwnPropertyDescriptor(_,$);F&&F.enumerable||(C[$]=E(_[$],D-1),Object.defineProperty(C,$,{enumerable:!1}))}return C}return E(g,v)}u.clonePrototype=function(m){if(m===null)return null;var v=function(){};return v.prototype=m,new v};function d(g){return Object.prototype.toString.call(g)}u.__objToStr=d;function h(g){return typeof g=="object"&&d(g)==="[object Date]"}u.__isDate=h;function f(g){return typeof g=="object"&&d(g)==="[object Array]"}u.__isArray=f;function p(g){return typeof g=="object"&&d(g)==="[object RegExp]"}u.__isRegExp=p;function y(g){var m="";return g.global&&(m+="g"),g.ignoreCase&&(m+="i"),g.multiline&&(m+="m"),m}return u.__getRegExpFlags=y,u})();typeof t=="object"&&t.exports&&(t.exports=i)}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function C(k,T){var N=[],j=!0,R=!1,P=void 0;try{for(var F=k[Symbol.iterator](),q;!(j=(q=F.next()).done)&&(N.push(q.value),!(T&&N.length===T));j=!0);}catch($){R=!0,P=$}finally{try{!j&&F.return&&F.return()}finally{if(R)throw P}}return N}return function(k,T){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return C(k,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),s=(function(){function C(k,T){for(var N=0;N<T.length;N++){var j=T[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(k,j.key,j)}}return function(k,T,N){return T&&C(k.prototype,T),N&&C(k,N),k}})(),o=function C(k,T,N){k===null&&(k=Function.prototype);var j=Object.getOwnPropertyDescriptor(k,T);if(j===void 0){var R=Object.getPrototypeOf(k);return R===null?void 0:C(R,T,N)}else{if("value"in j)return j.value;var P=j.get;return P===void 0?void 0:P.call(N)}},c=i(0),u=A(c),d=i(8),h=A(d),f=i(4),p=A(f),y=i(16),g=A(y),m=i(13),v=A(m),x=i(25),b=A(x);function A(C){return C&&C.__esModule?C:{default:C}}function w(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function S(C,k){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:C}function E(C,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(C,k):C.__proto__=k)}function _(C){return C instanceof p.default||C instanceof f.BlockEmbed}var D=(function(C){E(k,C);function k(T,N){w(this,k);var j=S(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,T));return j.emitter=N.emitter,Array.isArray(N.whitelist)&&(j.whitelist=N.whitelist.reduce(function(R,P){return R[P]=!0,R},{})),j.domNode.addEventListener("DOMNodeInserted",function(){}),j.optimize(),j.enable(),j}return s(k,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(N,j){var R=this.line(N),P=a(R,2),F=P[0],q=P[1],$=this.line(N+j),B=a($,1),I=B[0];if(o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"deleteAt",this).call(this,N,j),I!=null&&F!==I&&q>0){if(F instanceof f.BlockEmbed||I instanceof f.BlockEmbed){this.optimize();return}if(F instanceof v.default){var L=F.newlineIndex(F.length(),!0);if(L>-1&&(F=F.split(L+1),F===I)){this.optimize();return}}else if(I instanceof v.default){var U=I.newlineIndex(0);U>-1&&I.split(U+1)}var G=I.children.head instanceof g.default?null:I.children.head;F.moveChildren(I,G),F.remove()}this.optimize()}},{key:"enable",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",N)}},{key:"formatAt",value:function(N,j,R,P){this.whitelist!=null&&!this.whitelist[R]||(o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,N,j,R,P),this.optimize())}},{key:"insertAt",value:function(N,j,R){if(!(R!=null&&this.whitelist!=null&&!this.whitelist[j])){if(N>=this.length())if(R==null||u.default.query(j,u.default.Scope.BLOCK)==null){var P=u.default.create(this.statics.defaultChild);this.appendChild(P),R==null&&j.endsWith(`
`)&&(j=j.slice(0,-1)),P.insertAt(0,j,R)}else{var F=u.default.create(j,R);this.appendChild(F)}else o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,N,j,R);this.optimize()}}},{key:"insertBefore",value:function(N,j){if(N.statics.scope===u.default.Scope.INLINE_BLOT){var R=u.default.create(this.statics.defaultChild);R.appendChild(N),N=R}o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,N,j)}},{key:"leaf",value:function(N){return this.path(N).pop()||[null,-1]}},{key:"line",value:function(N){return N===this.length()?this.line(N-1):this.descendant(_,N)}},{key:"lines",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,R=function P(F,q,$){var B=[],I=$;return F.children.forEachAt(q,$,function(L,U,G){_(L)?B.push(L):L instanceof u.default.Container&&(B=B.concat(P(L,U,I))),I-=G}),B};return R(this,N,j)}},{key:"optimize",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,N,j),N.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,N,j))}},{key:"path",value:function(N){return o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"path",this).call(this,N).slice(1)}},{key:"update",value:function(N){if(this.batch!==!0){var j=h.default.sources.USER;typeof N=="string"&&(j=N),Array.isArray(N)||(N=this.observer.takeRecords()),N.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,j,N),o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"update",this).call(this,N.concat([])),N.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,j,N)}}}]),k})(u.default.Scroll);D.blotName="scroll",D.className="ql-editor",D.tagName="DIV",D.defaultChild="block",D.allowedChildren=[p.default,f.BlockEmbed,b.default],r.default=D}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},s=(function(){function V(K,ae){var te=[],de=!0,xe=!1,ve=void 0;try{for(var Te=K[Symbol.iterator](),O;!(de=(O=Te.next()).done)&&(te.push(O.value),!(ae&&te.length===ae));de=!0);}catch(ie){xe=!0,ve=ie}finally{try{!de&&Te.return&&Te.return()}finally{if(xe)throw ve}}return te}return function(K,ae){if(Array.isArray(K))return K;if(Symbol.iterator in Object(K))return V(K,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function V(K,ae){for(var te=0;te<ae.length;te++){var de=ae[te];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(K,de.key,de)}}return function(K,ae,te){return ae&&V(K.prototype,ae),te&&V(K,te),K}})(),c=i(21),u=C(c),d=i(11),h=C(d),f=i(3),p=C(f),y=i(2),g=C(y),m=i(20),v=C(m),x=i(0),b=C(x),A=i(5),w=C(A),S=i(10),E=C(S),_=i(9),D=C(_);function C(V){return V&&V.__esModule?V:{default:V}}function k(V,K,ae){return K in V?Object.defineProperty(V,K,{value:ae,enumerable:!0,configurable:!0,writable:!0}):V[K]=ae,V}function T(V,K){if(!(V instanceof K))throw new TypeError("Cannot call a class as a function")}function N(V,K){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:V}function j(V,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);V.prototype=Object.create(K&&K.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(V,K):V.__proto__=K)}var R=(0,E.default)("quill:keyboard"),P=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",F=(function(V){j(K,V),o(K,null,[{key:"match",value:function(te,de){return de=H(de),["altKey","ctrlKey","metaKey","shiftKey"].some(function(xe){return!!de[xe]!==te[xe]&&de[xe]!==null})?!1:de.key===(te.which||te.keyCode)}}]);function K(ae,te){T(this,K);var de=N(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,ae,te));return de.bindings={},Object.keys(de.options.bindings).forEach(function(xe){xe==="list autofill"&&ae.scroll.whitelist!=null&&!ae.scroll.whitelist.list||de.options.bindings[xe]&&de.addBinding(de.options.bindings[xe])}),de.addBinding({key:K.keys.ENTER,shiftKey:null},L),de.addBinding({key:K.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(de.addBinding({key:K.keys.BACKSPACE},{collapsed:!0},$),de.addBinding({key:K.keys.DELETE},{collapsed:!0},B)):(de.addBinding({key:K.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},$),de.addBinding({key:K.keys.DELETE},{collapsed:!0,suffix:/^.?$/},B)),de.addBinding({key:K.keys.BACKSPACE},{collapsed:!1},I),de.addBinding({key:K.keys.DELETE},{collapsed:!1},I),de.addBinding({key:K.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},$),de.listen(),de}return o(K,[{key:"addBinding",value:function(te){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ve=H(te);if(ve==null||ve.key==null)return R.warn("Attempted to add invalid keyboard binding",ve);typeof de=="function"&&(de={handler:de}),typeof xe=="function"&&(xe={handler:xe}),ve=(0,p.default)(ve,de,xe),this.bindings[ve.key]=this.bindings[ve.key]||[],this.bindings[ve.key].push(ve)}},{key:"listen",value:function(){var te=this;this.quill.root.addEventListener("keydown",function(de){if(!de.defaultPrevented){var xe=de.which||de.keyCode,ve=(te.bindings[xe]||[]).filter(function(Le){return K.match(de,Le)});if(ve.length!==0){var Te=te.quill.getSelection();if(!(Te==null||!te.quill.hasFocus())){var O=te.quill.getLine(Te.index),ie=s(O,2),re=ie[0],Z=ie[1],z=te.quill.getLeaf(Te.index),X=s(z,2),ue=X[0],le=X[1],ee=Te.length===0?[ue,le]:te.quill.getLeaf(Te.index+Te.length),ne=s(ee,2),oe=ne[0],pe=ne[1],Ae=ue instanceof b.default.Text?ue.value().slice(0,le):"",Ne=oe instanceof b.default.Text?oe.value().slice(pe):"",Pe={collapsed:Te.length===0,empty:Te.length===0&&re.length()<=1,format:te.quill.getFormat(Te),offset:Z,prefix:Ae,suffix:Ne},ot=ve.some(function(Le){if(Le.collapsed!=null&&Le.collapsed!==Pe.collapsed||Le.empty!=null&&Le.empty!==Pe.empty||Le.offset!=null&&Le.offset!==Pe.offset)return!1;if(Array.isArray(Le.format)){if(Le.format.every(function(ge){return Pe.format[ge]==null}))return!1}else if(a(Le.format)==="object"&&!Object.keys(Le.format).every(function(ge){return Le.format[ge]===!0?Pe.format[ge]!=null:Le.format[ge]===!1?Pe.format[ge]==null:(0,h.default)(Le.format[ge],Pe.format[ge])}))return!1;return Le.prefix!=null&&!Le.prefix.test(Pe.prefix)||Le.suffix!=null&&!Le.suffix.test(Pe.suffix)?!1:Le.handler.call(te,Te,Pe)!==!0});ot&&de.preventDefault()}}}})}}]),K})(D.default);F.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},F.DEFAULTS={bindings:{bold:G("bold"),italic:G("italic"),underline:G("underline"),indent:{key:F.keys.TAB,format:["blockquote","indent","list"],handler:function(K,ae){if(ae.collapsed&&ae.offset!==0)return!0;this.quill.format("indent","+1",w.default.sources.USER)}},outdent:{key:F.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(K,ae){if(ae.collapsed&&ae.offset!==0)return!0;this.quill.format("indent","-1",w.default.sources.USER)}},"outdent backspace":{key:F.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(K,ae){ae.format.indent!=null?this.quill.format("indent","-1",w.default.sources.USER):ae.format.list!=null&&this.quill.format("list",!1,w.default.sources.USER)}},"indent code-block":U(!0),"outdent code-block":U(!1),"remove tab":{key:F.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(K){this.quill.deleteText(K.index-1,1,w.default.sources.USER)}},tab:{key:F.keys.TAB,handler:function(K){this.quill.history.cutoff();var ae=new g.default().retain(K.index).delete(K.length).insert("	");this.quill.updateContents(ae,w.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(K.index+1,w.default.sources.SILENT)}},"list empty enter":{key:F.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(K,ae){this.quill.format("list",!1,w.default.sources.USER),ae.format.indent&&this.quill.format("indent",!1,w.default.sources.USER)}},"checklist enter":{key:F.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(K){var ae=this.quill.getLine(K.index),te=s(ae,2),de=te[0],xe=te[1],ve=(0,p.default)({},de.formats(),{list:"checked"}),Te=new g.default().retain(K.index).insert(`
`,ve).retain(de.length()-xe-1).retain(1,{list:"unchecked"});this.quill.updateContents(Te,w.default.sources.USER),this.quill.setSelection(K.index+1,w.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:F.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(K,ae){var te=this.quill.getLine(K.index),de=s(te,2),xe=de[0],ve=de[1],Te=new g.default().retain(K.index).insert(`
`,ae.format).retain(xe.length()-ve-1).retain(1,{header:null});this.quill.updateContents(Te,w.default.sources.USER),this.quill.setSelection(K.index+1,w.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(K,ae){var te=ae.prefix.length,de=this.quill.getLine(K.index),xe=s(de,2),ve=xe[0],Te=xe[1];if(Te>te)return!0;var O=void 0;switch(ae.prefix.trim()){case"[]":case"[ ]":O="unchecked";break;case"[x]":O="checked";break;case"-":case"*":O="bullet";break;default:O="ordered"}this.quill.insertText(K.index," ",w.default.sources.USER),this.quill.history.cutoff();var ie=new g.default().retain(K.index-Te).delete(te+1).retain(ve.length()-2-Te).retain(1,{list:O});this.quill.updateContents(ie,w.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(K.index-te,w.default.sources.SILENT)}},"code exit":{key:F.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(K){var ae=this.quill.getLine(K.index),te=s(ae,2),de=te[0],xe=te[1],ve=new g.default().retain(K.index+de.length()-xe-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ve,w.default.sources.USER)}},"embed left":q(F.keys.LEFT,!1),"embed left shift":q(F.keys.LEFT,!0),"embed right":q(F.keys.RIGHT,!1),"embed right shift":q(F.keys.RIGHT,!0)}};function q(V,K){var ae,te=V===F.keys.LEFT?"prefix":"suffix";return ae={key:V,shiftKey:K,altKey:null},k(ae,te,/^$/),k(ae,"handler",function(xe){var ve=xe.index;V===F.keys.RIGHT&&(ve+=xe.length+1);var Te=this.quill.getLeaf(ve),O=s(Te,1),ie=O[0];return ie instanceof b.default.Embed?(V===F.keys.LEFT?K?this.quill.setSelection(xe.index-1,xe.length+1,w.default.sources.USER):this.quill.setSelection(xe.index-1,w.default.sources.USER):K?this.quill.setSelection(xe.index,xe.length+1,w.default.sources.USER):this.quill.setSelection(xe.index+xe.length+1,w.default.sources.USER),!1):!0}),ae}function $(V,K){if(!(V.index===0||this.quill.getLength()<=1)){var ae=this.quill.getLine(V.index),te=s(ae,1),de=te[0],xe={};if(K.offset===0){var ve=this.quill.getLine(V.index-1),Te=s(ve,1),O=Te[0];if(O!=null&&O.length()>1){var ie=de.formats(),re=this.quill.getFormat(V.index-1,1);xe=v.default.attributes.diff(ie,re)||{}}}var Z=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(K.prefix)?2:1;this.quill.deleteText(V.index-Z,Z,w.default.sources.USER),Object.keys(xe).length>0&&this.quill.formatLine(V.index-Z,Z,xe,w.default.sources.USER),this.quill.focus()}}function B(V,K){var ae=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(K.suffix)?2:1;if(!(V.index>=this.quill.getLength()-ae)){var te={},de=0,xe=this.quill.getLine(V.index),ve=s(xe,1),Te=ve[0];if(K.offset>=Te.length()-1){var O=this.quill.getLine(V.index+1),ie=s(O,1),re=ie[0];if(re){var Z=Te.formats(),z=this.quill.getFormat(V.index,1);te=v.default.attributes.diff(Z,z)||{},de=re.length()}}this.quill.deleteText(V.index,ae,w.default.sources.USER),Object.keys(te).length>0&&this.quill.formatLine(V.index+de-1,ae,te,w.default.sources.USER)}}function I(V){var K=this.quill.getLines(V),ae={};if(K.length>1){var te=K[0].formats(),de=K[K.length-1].formats();ae=v.default.attributes.diff(de,te)||{}}this.quill.deleteText(V,w.default.sources.USER),Object.keys(ae).length>0&&this.quill.formatLine(V.index,1,ae,w.default.sources.USER),this.quill.setSelection(V.index,w.default.sources.SILENT),this.quill.focus()}function L(V,K){var ae=this;V.length>0&&this.quill.scroll.deleteAt(V.index,V.length);var te=Object.keys(K.format).reduce(function(de,xe){return b.default.query(xe,b.default.Scope.BLOCK)&&!Array.isArray(K.format[xe])&&(de[xe]=K.format[xe]),de},{});this.quill.insertText(V.index,`
`,te,w.default.sources.USER),this.quill.setSelection(V.index+1,w.default.sources.SILENT),this.quill.focus(),Object.keys(K.format).forEach(function(de){te[de]==null&&(Array.isArray(K.format[de])||de!=="link"&&ae.quill.format(de,K.format[de],w.default.sources.USER))})}function U(V){return{key:F.keys.TAB,shiftKey:!V,format:{"code-block":!0},handler:function(ae){var te=b.default.query("code-block"),de=ae.index,xe=ae.length,ve=this.quill.scroll.descendant(te,de),Te=s(ve,2),O=Te[0],ie=Te[1];if(O!=null){var re=this.quill.getIndex(O),Z=O.newlineIndex(ie,!0)+1,z=O.newlineIndex(re+ie+xe),X=O.domNode.textContent.slice(Z,z).split(`
`);ie=0,X.forEach(function(ue,le){V?(O.insertAt(Z+ie,te.TAB),ie+=te.TAB.length,le===0?de+=te.TAB.length:xe+=te.TAB.length):ue.startsWith(te.TAB)&&(O.deleteAt(Z+ie,te.TAB.length),ie-=te.TAB.length,le===0?de-=te.TAB.length:xe-=te.TAB.length),ie+=ue.length+1}),this.quill.update(w.default.sources.USER),this.quill.setSelection(de,xe,w.default.sources.SILENT)}}}}function G(V){return{key:V[0].toUpperCase(),shortKey:!0,handler:function(ae,te){this.quill.format(V,!te.format[V],w.default.sources.USER)}}}function H(V){if(typeof V=="string"||typeof V=="number")return H({key:V});if((typeof V>"u"?"undefined":a(V))==="object"&&(V=(0,u.default)(V,!1)),typeof V.key=="string")if(F.keys[V.key.toUpperCase()]!=null)V.key=F.keys[V.key.toUpperCase()];else if(V.key.length===1)V.key=V.key.toUpperCase().charCodeAt(0);else return null;return V.shortKey&&(V[P]=V.shortKey,delete V.shortKey),V}r.default=F,r.SHORTKEY=P}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function v(x,b){var A=[],w=!0,S=!1,E=void 0;try{for(var _=x[Symbol.iterator](),D;!(w=(D=_.next()).done)&&(A.push(D.value),!(b&&A.length===b));w=!0);}catch(C){S=!0,E=C}finally{try{!w&&_.return&&_.return()}finally{if(S)throw E}}return A}return function(x,b){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return v(x,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),s=function v(x,b,A){x===null&&(x=Function.prototype);var w=Object.getOwnPropertyDescriptor(x,b);if(w===void 0){var S=Object.getPrototypeOf(x);return S===null?void 0:v(S,b,A)}else{if("value"in w)return w.value;var E=w.get;return E===void 0?void 0:E.call(A)}},o=(function(){function v(x,b){for(var A=0;A<b.length;A++){var w=b[A];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,b,A){return b&&v(x.prototype,b),A&&v(x,A),x}})(),c=i(0),u=f(c),d=i(7),h=f(d);function f(v){return v&&v.__esModule?v:{default:v}}function p(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function y(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function g(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var m=(function(v){g(x,v),o(x,null,[{key:"value",value:function(){}}]);function x(b,A){p(this,x);var w=y(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,b));return w.selection=A,w.textNode=document.createTextNode(x.CONTENTS),w.domNode.appendChild(w.textNode),w._length=0,w}return o(x,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(A,w){if(this._length!==0)return s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,A,w);for(var S=this,E=0;S!=null&&S.statics.scope!==u.default.Scope.BLOCK_BLOT;)E+=S.offset(S.parent),S=S.parent;S!=null&&(this._length=x.CONTENTS.length,S.optimize(),S.formatAt(E,x.CONTENTS.length,A,w),this._length=0)}},{key:"index",value:function(A,w){return A===this.textNode?0:s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"index",this).call(this,A,w)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var A=this.textNode,w=this.selection.getNativeRange(),S=void 0,E=void 0,_=void 0;if(w!=null&&w.start.node===A&&w.end.node===A){var D=[A,w.start.offset,w.end.offset];S=D[0],E=D[1],_=D[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==x.CONTENTS){var C=this.textNode.data.split(x.CONTENTS).join("");this.next instanceof h.default?(S=this.next.domNode,this.next.insertAt(0,C),this.textNode.data=x.CONTENTS):(this.textNode.data=C,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(x.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),E!=null){var k=[E,_].map(function(N){return Math.max(0,Math.min(S.data.length,N-1))}),T=a(k,2);return E=T[0],_=T[1],{startNode:S,startOffset:E,endNode:S,endOffset:_}}}}},{key:"update",value:function(A,w){var S=this;if(A.some(function(_){return _.type==="characterData"&&_.target===S.textNode})){var E=this.restore();E&&(w.range=E)}}},{key:"value",value:function(){return""}}]),x})(u.default.Embed);m.blotName="cursor",m.className="ql-cursor",m.tagName="span",m.CONTENTS="\uFEFF",r.default=m}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),s=u(a),o=i(4),c=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function h(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function f(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var p=(function(y){f(g,y);function g(){return d(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g})(s.default.Container);p.allowedChildren=[c.default,o.BlockEmbed,p],r.default=p}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var a=(function(){function m(v,x){for(var b=0;b<x.length;b++){var A=x[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}return function(v,x,b){return x&&m(v.prototype,x),b&&m(v,b),v}})(),s=function m(v,x,b){v===null&&(v=Function.prototype);var A=Object.getOwnPropertyDescriptor(v,x);if(A===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:m(w,x,b)}else{if("value"in A)return A.value;var S=A.get;return S===void 0?void 0:S.call(b)}},o=i(0),c=u(o);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function h(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function f(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var p=(function(m){f(v,m);function v(){return d(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"value",value:function(b){var A=s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,b);return A.startsWith("rgb(")?(A=A.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+A.split(",").map(function(w){return("00"+parseInt(w).toString(16)).slice(-2)}).join("")):A}}]),v})(c.default.Attributor.Style),y=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),g=new p("color","color",{scope:c.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=y,r.ColorStyle=g}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var a=(function(){function g(m,v){for(var x=0;x<v.length;x++){var b=v[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,v,x){return v&&g(m.prototype,v),x&&g(m,x),m}})(),s=function g(m,v,x){m===null&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,v);if(b===void 0){var A=Object.getPrototypeOf(m);return A===null?void 0:g(A,v,x)}else{if("value"in b)return b.value;var w=b.get;return w===void 0?void 0:w.call(x)}},o=i(6),c=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function h(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function f(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var p=(function(g){f(m,g);function m(){return d(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return a(m,[{key:"format",value:function(x,b){if(x!==this.statics.blotName||!b)return s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,x,b);b=this.constructor.sanitize(b),this.domNode.setAttribute("href",b)}}],[{key:"create",value:function(x){var b=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,x);return x=this.sanitize(x),b.setAttribute("href",x),b.setAttribute("rel","noopener noreferrer"),b.setAttribute("target","_blank"),b}},{key:"formats",value:function(x){return x.getAttribute("href")}},{key:"sanitize",value:function(x){return y(x,this.PROTOCOL_WHITELIST)?x:this.SANITIZED_URL}}]),m})(c.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(g,m){var v=document.createElement("a");v.href=g;var x=v.href.slice(0,v.href.indexOf(":"));return m.indexOf(x)>-1}r.default=p,r.sanitize=y}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},s=(function(){function m(v,x){for(var b=0;b<x.length;b++){var A=x[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}return function(v,x,b){return x&&m(v.prototype,x),b&&m(v,b),v}})(),o=i(23),c=h(o),u=i(107),d=h(u);function h(m){return m&&m.__esModule?m:{default:m}}function f(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}var p=0;function y(m,v){m.setAttribute(v,m.getAttribute(v)!=="true")}var g=(function(){function m(v){var x=this;f(this,m),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){x.togglePicker()}),this.label.addEventListener("keydown",function(b){switch(b.keyCode){case c.default.keys.ENTER:x.togglePicker();break;case c.default.keys.ESCAPE:x.escape(),b.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(m,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(x){var b=this,A=document.createElement("span");return A.tabIndex="0",A.setAttribute("role","button"),A.classList.add("ql-picker-item"),x.hasAttribute("value")&&A.setAttribute("data-value",x.getAttribute("value")),x.textContent&&A.setAttribute("data-label",x.textContent),A.addEventListener("click",function(){b.selectItem(A,!0)}),A.addEventListener("keydown",function(w){switch(w.keyCode){case c.default.keys.ENTER:b.selectItem(A,!0),w.preventDefault();break;case c.default.keys.ESCAPE:b.escape(),w.preventDefault();break}}),A}},{key:"buildLabel",value:function(){var x=document.createElement("span");return x.classList.add("ql-picker-label"),x.innerHTML=d.default,x.tabIndex="0",x.setAttribute("role","button"),x.setAttribute("aria-expanded","false"),this.container.appendChild(x),x}},{key:"buildOptions",value:function(){var x=this,b=document.createElement("span");b.classList.add("ql-picker-options"),b.setAttribute("aria-hidden","true"),b.tabIndex="-1",b.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",b.id),this.options=b,[].slice.call(this.select.options).forEach(function(A){var w=x.buildItem(A);b.appendChild(w),A.selected===!0&&x.selectItem(w)}),this.container.appendChild(b)}},{key:"buildPicker",value:function(){var x=this;[].slice.call(this.select.attributes).forEach(function(b){x.container.setAttribute(b.name,b.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var x=this;this.close(),setTimeout(function(){return x.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(x){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=this.container.querySelector(".ql-selected");if(x!==A&&(A?.classList.remove("ql-selected"),x!=null&&(x.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(x.parentNode.children,x),x.hasAttribute("data-value")?this.label.setAttribute("data-value",x.getAttribute("data-value")):this.label.removeAttribute("data-value"),x.hasAttribute("data-label")?this.label.setAttribute("data-label",x.getAttribute("data-label")):this.label.removeAttribute("data-label"),b))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var w=document.createEvent("Event");w.initEvent("change",!0,!0),this.select.dispatchEvent(w)}this.close()}}},{key:"update",value:function(){var x=void 0;if(this.select.selectedIndex>-1){var b=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];x=this.select.options[this.select.selectedIndex],this.selectItem(b)}else this.selectItem(null);var A=x!=null&&x!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",A)}}]),m})();r.default=g}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),s=R(a),o=i(5),c=R(o),u=i(4),d=R(u),h=i(16),f=R(h),p=i(25),y=R(p),g=i(24),m=R(g),v=i(35),x=R(v),b=i(6),A=R(b),w=i(22),S=R(w),E=i(7),_=R(E),D=i(55),C=R(D),k=i(42),T=R(k),N=i(23),j=R(N);function R(P){return P&&P.__esModule?P:{default:P}}c.default.register({"blots/block":d.default,"blots/block/embed":u.BlockEmbed,"blots/break":f.default,"blots/container":y.default,"blots/cursor":m.default,"blots/embed":x.default,"blots/inline":A.default,"blots/scroll":S.default,"blots/text":_.default,"modules/clipboard":C.default,"modules/history":T.default,"modules/keyboard":j.default}),s.default.register(d.default,f.default,m.default,A.default,S.default,_.default),r.default=c.default}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),s=(function(){function o(c){this.domNode=c,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(o.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),o.create=function(c){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?u=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?u=document.createElement(c):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},o.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},o.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return a.create(c)},o.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},o.prototype.deleteAt=function(c,u){var d=this.isolate(c,u);d.remove()},o.prototype.formatAt=function(c,u,d,h){var f=this.isolate(c,u);if(a.query(d,a.Scope.BLOT)!=null&&h)f.wrap(d,h);else if(a.query(d,a.Scope.ATTRIBUTE)!=null){var p=a.create(this.statics.scope);f.wrap(p),p.format(d,h)}},o.prototype.insertAt=function(c,u,d){var h=d==null?a.create("text",u):a.create(u,d),f=this.split(c);this.parent.insertBefore(h,f)},o.prototype.insertInto=function(c,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var d=null;c.children.insertBefore(this,u),u!=null&&(d=u.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=d)&&c.domNode.insertBefore(this.domNode,d),this.parent=c,this.attach()},o.prototype.isolate=function(c,u){var d=this.split(c);return d.split(u),d},o.prototype.length=function(){return 1},o.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},o.prototype.optimize=function(c){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},o.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},o.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},o.prototype.replaceWith=function(c,u){var d=typeof c=="string"?a.create(c,u):c;return d.replace(this),d},o.prototype.split=function(c,u){return c===0?this:this.next},o.prototype.update=function(c,u){},o.prototype.wrap=function(c,u){var d=typeof c=="string"?a.create(c,u):c;return this.parent!=null&&this.parent.insertBefore(d,this.next),d.appendChild(this),d},o.blotName="abstract",o})();r.default=s}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(12),s=i(32),o=i(33),c=i(1),u=(function(){function d(h){this.attributes={},this.domNode=h,this.build()}return d.prototype.attribute=function(h,f){f?h.add(this.domNode,f)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},d.prototype.build=function(){var h=this;this.attributes={};var f=a.default.keys(this.domNode),p=s.default.keys(this.domNode),y=o.default.keys(this.domNode);f.concat(p).concat(y).forEach(function(g){var m=c.query(g,c.Scope.ATTRIBUTE);m instanceof a.default&&(h.attributes[m.attrName]=m)})},d.prototype.copy=function(h){var f=this;Object.keys(this.attributes).forEach(function(p){var y=f.attributes[p].value(f.domNode);h.format(p,y)})},d.prototype.move=function(h){var f=this;this.copy(h),Object.keys(this.attributes).forEach(function(p){f.attributes[p].remove(f.domNode)}),this.attributes={}},d.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(f,p){return f[p]=h.attributes[p].value(h.domNode),f},{})},d})();r.default=u}),(function(t,r,i){var a=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){u(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}})();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function o(u,d){var h=u.getAttribute("class")||"";return h.split(/\s+/).filter(function(f){return f.indexOf(d+"-")===0})}var c=(function(u){a(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},d.prototype.add=function(h,f){return this.canAdd(h,f)?(this.remove(h),h.classList.add(this.keyName+"-"+f),!0):!1},d.prototype.remove=function(h){var f=o(h,this.keyName);f.forEach(function(p){h.classList.remove(p)}),h.classList.length===0&&h.removeAttribute("class")},d.prototype.value=function(h){var f=o(h,this.keyName)[0]||"",p=f.slice(this.keyName.length+1);return this.canAdd(h,p)?p:""},d})(s.default);r.default=c}),(function(t,r,i){var a=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){u(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}})();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function o(u){var d=u.split("-"),h=d.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return d[0]+h}var c=(function(u){a(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(f){var p=f.split(":");return p[0].trim()})},d.prototype.add=function(h,f){return this.canAdd(h,f)?(h.style[o(this.keyName)]=f,!0):!1},d.prototype.remove=function(h){h.style[o(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},d.prototype.value=function(h){var f=h.style[o(this.keyName)];return this.canAdd(h,f)?f:""},d})(s.default);r.default=c}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function c(u,d){for(var h=0;h<d.length;h++){var f=d[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}return function(u,d,h){return d&&c(u.prototype,d),h&&c(u,h),u}})();function s(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var o=(function(){function c(u,d){s(this,c),this.quill=u,this.options=d,this.modules={}}return a(c,[{key:"init",value:function(){var d=this;Object.keys(this.options.modules).forEach(function(h){d.modules[h]==null&&d.addModule(h)})}},{key:"addModule",value:function(d){var h=this.quill.constructor.import("modules/"+d);return this.modules[d]=new h(this.quill,this.options.modules[d]||{}),this.modules[d]}}]),c})();o.DEFAULTS={modules:{}},o.themes={default:o},r.default=o}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function v(x,b){for(var A=0;A<b.length;A++){var w=b[A];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,b,A){return b&&v(x.prototype,b),A&&v(x,A),x}})(),s=function v(x,b,A){x===null&&(x=Function.prototype);var w=Object.getOwnPropertyDescriptor(x,b);if(w===void 0){var S=Object.getPrototypeOf(x);return S===null?void 0:v(S,b,A)}else{if("value"in w)return w.value;var E=w.get;return E===void 0?void 0:E.call(A)}},o=i(0),c=h(o),u=i(7),d=h(u);function h(v){return v&&v.__esModule?v:{default:v}}function f(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function p(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function y(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var g="\uFEFF",m=(function(v){y(x,v);function x(b){f(this,x);var A=p(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,b));return A.contentNode=document.createElement("span"),A.contentNode.setAttribute("contenteditable",!1),[].slice.call(A.domNode.childNodes).forEach(function(w){A.contentNode.appendChild(w)}),A.leftGuard=document.createTextNode(g),A.rightGuard=document.createTextNode(g),A.domNode.appendChild(A.leftGuard),A.domNode.appendChild(A.contentNode),A.domNode.appendChild(A.rightGuard),A}return a(x,[{key:"index",value:function(A,w){return A===this.leftGuard?0:A===this.rightGuard?1:s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"index",this).call(this,A,w)}},{key:"restore",value:function(A){var w=void 0,S=void 0,E=A.data.split(g).join("");if(A===this.leftGuard)if(this.prev instanceof d.default){var _=this.prev.length();this.prev.insertAt(_,E),w={startNode:this.prev.domNode,startOffset:_+E.length}}else S=document.createTextNode(E),this.parent.insertBefore(c.default.create(S),this),w={startNode:S,startOffset:E.length};else A===this.rightGuard&&(this.next instanceof d.default?(this.next.insertAt(0,E),w={startNode:this.next.domNode,startOffset:E.length}):(S=document.createTextNode(E),this.parent.insertBefore(c.default.create(S),this.next),w={startNode:S,startOffset:E.length}));return A.data=g,w}},{key:"update",value:function(A,w){var S=this;A.forEach(function(E){if(E.type==="characterData"&&(E.target===S.leftGuard||E.target===S.rightGuard)){var _=S.restore(E.target);_&&(w.range=_)}})}}]),x})(c.default.Embed);r.default=m}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var a=i(0),s=o(a);function o(f){return f&&f.__esModule?f:{default:f}}var c={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new s.default.Attributor.Attribute("align","align",c),d=new s.default.Attributor.Class("align","ql-align",c),h=new s.default.Attributor.Style("align","text-align",c);r.AlignAttribute=u,r.AlignClass=d,r.AlignStyle=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var a=i(0),s=c(a),o=i(26);function c(h){return h&&h.__esModule?h:{default:h}}var u=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),d=new o.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});r.BackgroundClass=u,r.BackgroundStyle=d}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var a=i(0),s=o(a);function o(f){return f&&f.__esModule?f:{default:f}}var c={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},u=new s.default.Attributor.Attribute("direction","dir",c),d=new s.default.Attributor.Class("direction","ql-direction",c),h=new s.default.Attributor.Style("direction","direction",c);r.DirectionAttribute=u,r.DirectionClass=d,r.DirectionStyle=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var a=(function(){function v(x,b){for(var A=0;A<b.length;A++){var w=b[A];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,b,A){return b&&v(x.prototype,b),A&&v(x,A),x}})(),s=function v(x,b,A){x===null&&(x=Function.prototype);var w=Object.getOwnPropertyDescriptor(x,b);if(w===void 0){var S=Object.getPrototypeOf(x);return S===null?void 0:v(S,b,A)}else{if("value"in w)return w.value;var E=w.get;return E===void 0?void 0:E.call(A)}},o=i(0),c=u(o);function u(v){return v&&v.__esModule?v:{default:v}}function d(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function h(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function f(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var p={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new c.default.Attributor.Class("font","ql-font",p),g=(function(v){f(x,v);function x(){return d(this,x),h(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return a(x,[{key:"value",value:function(A){return s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"value",this).call(this,A).replace(/["']/g,"")}}]),x})(c.default.Attributor.Style),m=new g("font","font-family",p);r.FontStyle=m,r.FontClass=y}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var a=i(0),s=o(a);function o(d){return d&&d.__esModule?d:{default:d}}var c=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=c,r.SizeStyle=u}),(function(t,r,i){t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var a=(function(){function b(A,w){for(var S=0;S<w.length;S++){var E=w[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(A,E.key,E)}}return function(A,w,S){return w&&b(A.prototype,w),S&&b(A,S),A}})(),s=i(0),o=f(s),c=i(5),u=f(c),d=i(9),h=f(d);function f(b){return b&&b.__esModule?b:{default:b}}function p(b,A){if(!(b instanceof A))throw new TypeError("Cannot call a class as a function")}function y(b,A){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:b}function g(b,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);b.prototype=Object.create(A&&A.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(b,A):b.__proto__=A)}var m=(function(b){g(A,b);function A(w,S){p(this,A);var E=y(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,w,S));return E.lastRecorded=0,E.ignoreChange=!1,E.clear(),E.quill.on(u.default.events.EDITOR_CHANGE,function(_,D,C,k){_!==u.default.events.TEXT_CHANGE||E.ignoreChange||(!E.options.userOnly||k===u.default.sources.USER?E.record(D,C):E.transform(D))}),E.quill.keyboard.addBinding({key:"Z",shortKey:!0},E.undo.bind(E)),E.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},E.redo.bind(E)),/Win/i.test(navigator.platform)&&E.quill.keyboard.addBinding({key:"Y",shortKey:!0},E.redo.bind(E)),E}return a(A,[{key:"change",value:function(S,E){if(this.stack[S].length!==0){var _=this.stack[S].pop();this.stack[E].push(_),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(_[S],u.default.sources.USER),this.ignoreChange=!1;var D=x(_[S]);this.quill.setSelection(D)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(S,E){if(S.ops.length!==0){this.stack.redo=[];var _=this.quill.getContents().diff(E),D=Date.now();if(this.lastRecorded+this.options.delay>D&&this.stack.undo.length>0){var C=this.stack.undo.pop();_=_.compose(C.undo),S=C.redo.compose(S)}else this.lastRecorded=D;this.stack.undo.push({redo:S,undo:_}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(S){this.stack.undo.forEach(function(E){E.undo=S.transform(E.undo,!0),E.redo=S.transform(E.redo,!0)}),this.stack.redo.forEach(function(E){E.undo=S.transform(E.undo,!0),E.redo=S.transform(E.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),A})(h.default);m.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(b){var A=b.ops[b.ops.length-1];return A==null?!1:A.insert!=null?typeof A.insert=="string"&&A.insert.endsWith(`
`):A.attributes!=null?Object.keys(A.attributes).some(function(w){return o.default.query(w,o.default.Scope.BLOCK)!=null}):!1}function x(b){var A=b.reduce(function(S,E){return S+=E.delete||0,S},0),w=b.length()-A;return v(b)&&(w-=1),w}r.default=m,r.getLastChangeIndex=x}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var a=(function(){function L(U,G){for(var H=0;H<G.length;H++){var V=G[H];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(U,V.key,V)}}return function(U,G,H){return G&&L(U.prototype,G),H&&L(U,H),U}})(),s=function L(U,G,H){U===null&&(U=Function.prototype);var V=Object.getOwnPropertyDescriptor(U,G);if(V===void 0){var K=Object.getPrototypeOf(U);return K===null?void 0:L(K,G,H)}else{if("value"in V)return V.value;var ae=V.get;return ae===void 0?void 0:ae.call(H)}},o=i(3),c=D(o),u=i(2),d=D(u),h=i(8),f=D(h),p=i(23),y=D(p),g=i(34),m=D(g),v=i(59),x=D(v),b=i(60),A=D(b),w=i(28),S=D(w),E=i(61),_=D(E);function D(L){return L&&L.__esModule?L:{default:L}}function C(L,U){if(!(L instanceof U))throw new TypeError("Cannot call a class as a function")}function k(L,U){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:L}function T(L,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);L.prototype=Object.create(U&&U.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(L,U):L.__proto__=U)}var N=[!1,"center","right","justify"],j=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],R=[!1,"serif","monospace"],P=["1","2","3",!1],F=["small",!1,"large","huge"],q=(function(L){T(U,L);function U(G,H){C(this,U);var V=k(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,G,H)),K=function ae(te){if(!document.body.contains(G.root))return document.body.removeEventListener("click",ae);V.tooltip!=null&&!V.tooltip.root.contains(te.target)&&document.activeElement!==V.tooltip.textbox&&!V.quill.hasFocus()&&V.tooltip.hide(),V.pickers!=null&&V.pickers.forEach(function(de){de.container.contains(te.target)||de.close()})};return G.emitter.listenDOM("click",document.body,K),V}return a(U,[{key:"addModule",value:function(H){var V=s(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"addModule",this).call(this,H);return H==="toolbar"&&this.extendToolbar(V),V}},{key:"buildButtons",value:function(H,V){H.forEach(function(K){var ae=K.getAttribute("class")||"";ae.split(/\s+/).forEach(function(te){if(te.startsWith("ql-")&&(te=te.slice(3),V[te]!=null))if(te==="direction")K.innerHTML=V[te][""]+V[te].rtl;else if(typeof V[te]=="string")K.innerHTML=V[te];else{var de=K.value||"";de!=null&&V[te][de]&&(K.innerHTML=V[te][de])}})})}},{key:"buildPickers",value:function(H,V){var K=this;this.pickers=H.map(function(te){if(te.classList.contains("ql-align"))return te.querySelector("option")==null&&I(te,N),new A.default(te,V.align);if(te.classList.contains("ql-background")||te.classList.contains("ql-color")){var de=te.classList.contains("ql-background")?"background":"color";return te.querySelector("option")==null&&I(te,j,de==="background"?"#ffffff":"#000000"),new x.default(te,V[de])}else return te.querySelector("option")==null&&(te.classList.contains("ql-font")?I(te,R):te.classList.contains("ql-header")?I(te,P):te.classList.contains("ql-size")&&I(te,F)),new S.default(te)});var ae=function(){K.pickers.forEach(function(de){de.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,ae)}}]),U})(m.default);q.DEFAULTS=(0,c.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var U=this,G=this.container.querySelector("input.ql-image[type=file]");G==null&&(G=document.createElement("input"),G.setAttribute("type","file"),G.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),G.classList.add("ql-image"),G.addEventListener("change",function(){if(G.files!=null&&G.files[0]!=null){var H=new FileReader;H.onload=function(V){var K=U.quill.getSelection(!0);U.quill.updateContents(new d.default().retain(K.index).delete(K.length).insert({image:V.target.result}),f.default.sources.USER),U.quill.setSelection(K.index+1,f.default.sources.SILENT),G.value=""},H.readAsDataURL(G.files[0])}}),this.container.appendChild(G)),G.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var $=(function(L){T(U,L);function U(G,H){C(this,U);var V=k(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,G,H));return V.textbox=V.root.querySelector('input[type="text"]'),V.listen(),V}return a(U,[{key:"listen",value:function(){var H=this;this.textbox.addEventListener("keydown",function(V){y.default.match(V,"enter")?(H.save(),V.preventDefault()):y.default.match(V,"escape")&&(H.cancel(),V.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),V!=null?this.textbox.value=V:H!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+H)||""),this.root.setAttribute("data-mode",H)}},{key:"restoreFocus",value:function(){var H=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=H}},{key:"save",value:function(){var H=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var V=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",H,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",H,f.default.sources.USER)),this.quill.root.scrollTop=V;break}case"video":H=B(H);case"formula":{if(!H)break;var K=this.quill.getSelection(!0);if(K!=null){var ae=K.index+K.length;this.quill.insertEmbed(ae,this.root.getAttribute("data-mode"),H,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ae+1," ",f.default.sources.USER),this.quill.setSelection(ae+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),U})(_.default);function B(L){var U=L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||L.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return U?(U[1]||"https")+"://www.youtube.com/embed/"+U[2]+"?showinfo=0":(U=L.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(U[1]||"https")+"://player.vimeo.com/video/"+U[2]+"/":L}function I(L,U){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;U.forEach(function(H){var V=document.createElement("option");H===G?V.setAttribute("selected","selected"):V.setAttribute("value",H),L.appendChild(V)})}r.BaseTooltip=$,r.default=q}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];this.insertBefore(o[0],null),o.length>1&&this.append.apply(this,o.slice(1))},s.prototype.contains=function(o){for(var c,u=this.iterator();c=u();)if(c===o)return!0;return!1},s.prototype.insertBefore=function(o,c){o&&(o.next=c,c!=null?(o.prev=c.prev,c.prev!=null&&(c.prev.next=o),c.prev=o,c===this.head&&(this.head=o)):this.tail!=null?(this.tail.next=o,o.prev=this.tail,this.tail=o):(o.prev=null,this.head=this.tail=o),this.length+=1)},s.prototype.offset=function(o){for(var c=0,u=this.head;u!=null;){if(u===o)return c;c+=u.length(),u=u.next}return-1},s.prototype.remove=function(o){this.contains(o)&&(o.prev!=null&&(o.prev.next=o.next),o.next!=null&&(o.next.prev=o.prev),o===this.head&&(this.head=o.next),o===this.tail&&(this.tail=o.prev),this.length-=1)},s.prototype.iterator=function(o){return o===void 0&&(o=this.head),function(){var c=o;return o!=null&&(o=o.next),c}},s.prototype.find=function(o,c){c===void 0&&(c=!1);for(var u,d=this.iterator();u=d();){var h=u.length();if(o<h||c&&o===h&&(u.next==null||u.next.length()!==0))return[u,o];o-=h}return[null,0]},s.prototype.forEach=function(o){for(var c,u=this.iterator();c=u();)o(c)},s.prototype.forEachAt=function(o,c,u){if(!(c<=0))for(var d=this.find(o),h=d[0],f=d[1],p,y=o-f,g=this.iterator(h);(p=g())&&y<o+c;){var m=p.length();o>y?u(p,o-y,Math.min(c,y+m-o)):u(p,0,Math.min(m,o+c-y)),y+=m}},s.prototype.map=function(o){return this.reduce(function(c,u){return c.push(o(u)),c},[])},s.prototype.reduce=function(o,c){for(var u,d=this.iterator();u=d();)c=o(c,u);return c},s})();r.default=a}),(function(t,r,i){var a=this&&this.__extends||(function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var y in p)p.hasOwnProperty(y)&&(f[y]=p[y])};return function(f,p){h(f,p);function y(){this.constructor=f}f.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}})();Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),o=i(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,d=(function(h){a(f,h);function f(p){var y=h.call(this,p)||this;return y.scroll=y,y.observer=new MutationObserver(function(g){y.update(g)}),y.observer.observe(y.domNode,c),y.attach(),y}return f.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(p,y){this.update(),p===0&&y===this.length()?this.children.forEach(function(g){g.remove()}):h.prototype.deleteAt.call(this,p,y)},f.prototype.formatAt=function(p,y,g,m){this.update(),h.prototype.formatAt.call(this,p,y,g,m)},f.prototype.insertAt=function(p,y,g){this.update(),h.prototype.insertAt.call(this,p,y,g)},f.prototype.optimize=function(p,y){var g=this;p===void 0&&(p=[]),y===void 0&&(y={}),h.prototype.optimize.call(this,y);for(var m=[].slice.call(this.observer.takeRecords());m.length>0;)p.push(m.pop());for(var v=function(w,S){S===void 0&&(S=!0),!(w==null||w===g)&&w.domNode.parentNode!=null&&(w.domNode[o.DATA_KEY].mutations==null&&(w.domNode[o.DATA_KEY].mutations=[]),S&&v(w.parent))},x=function(w){w.domNode[o.DATA_KEY]==null||w.domNode[o.DATA_KEY].mutations==null||(w instanceof s.default&&w.children.forEach(x),w.optimize(y))},b=p,A=0;b.length>0;A+=1){if(A>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(b.forEach(function(w){var S=o.find(w.target,!0);S!=null&&(S.domNode===w.target&&(w.type==="childList"?(v(o.find(w.previousSibling,!1)),[].forEach.call(w.addedNodes,function(E){var _=o.find(E,!1);v(_,!1),_ instanceof s.default&&_.children.forEach(function(D){v(D,!1)})})):w.type==="attributes"&&v(S.prev)),v(S))}),this.children.forEach(x),b=[].slice.call(this.observer.takeRecords()),m=b.slice();m.length>0;)p.push(m.pop())}},f.prototype.update=function(p,y){var g=this;y===void 0&&(y={}),p=p||this.observer.takeRecords(),p.map(function(m){var v=o.find(m.target,!0);return v==null?null:v.domNode[o.DATA_KEY].mutations==null?(v.domNode[o.DATA_KEY].mutations=[m],v):(v.domNode[o.DATA_KEY].mutations.push(m),null)}).forEach(function(m){m==null||m===g||m.domNode[o.DATA_KEY]==null||m.update(m.domNode[o.DATA_KEY].mutations||[],y)}),this.domNode[o.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,y),this.optimize(p,y)},f.blotName="scroll",f.defaultChild="block",f.scope=o.Scope.BLOCK_BLOT,f.tagName="DIV",f})(s.default);r.default=d}),(function(t,r,i){var a=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var p in f)f.hasOwnProperty(p)&&(h[p]=f[p])};return function(h,f){d(h,f);function p(){this.constructor=h}h.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),o=i(1);function c(d,h){if(Object.keys(d).length!==Object.keys(h).length)return!1;for(var f in d)if(d[f]!==h[f])return!1;return!0}var u=(function(d){a(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.formats=function(f){if(f.tagName!==h.tagName)return d.formats.call(this,f)},h.prototype.format=function(f,p){var y=this;f===this.statics.blotName&&!p?(this.children.forEach(function(g){g instanceof s.default||(g=g.wrap(h.blotName,!0)),y.attributes.copy(g)}),this.unwrap()):d.prototype.format.call(this,f,p)},h.prototype.formatAt=function(f,p,y,g){if(this.formats()[y]!=null||o.query(y,o.Scope.ATTRIBUTE)){var m=this.isolate(f,p);m.format(y,g)}else d.prototype.formatAt.call(this,f,p,y,g)},h.prototype.optimize=function(f){d.prototype.optimize.call(this,f);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var y=this.next;y instanceof h&&y.prev===this&&c(p,y.formats())&&(y.moveChildren(this),y.remove())},h.blotName="inline",h.scope=o.Scope.INLINE_BLOT,h.tagName="SPAN",h})(s.default);r.default=u}),(function(t,r,i){var a=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){u(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}})();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),o=i(1),c=(function(u){a(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.formats=function(h){var f=o.query(d.blotName).tagName;if(h.tagName!==f)return u.formats.call(this,h)},d.prototype.format=function(h,f){o.query(h,o.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!f?this.replaceWith(d.blotName):u.prototype.format.call(this,h,f))},d.prototype.formatAt=function(h,f,p,y){o.query(p,o.Scope.BLOCK)!=null?this.format(p,y):u.prototype.formatAt.call(this,h,f,p,y)},d.prototype.insertAt=function(h,f,p){if(p==null||o.query(f,o.Scope.INLINE)!=null)u.prototype.insertAt.call(this,h,f,p);else{var y=this.split(h),g=o.create(f,p);y.parent.insertBefore(g,y)}},d.prototype.update=function(h,f){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,h,f)},d.blotName="block",d.scope=o.Scope.BLOCK_BLOT,d.tagName="P",d})(s.default);r.default=c}),(function(t,r,i){var a=this&&this.__extends||(function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var h in d)d.hasOwnProperty(h)&&(u[h]=d[h])};return function(u,d){c(u,d);function h(){this.constructor=u}u.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}})();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),o=(function(c){a(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.formats=function(d){},u.prototype.format=function(d,h){c.prototype.formatAt.call(this,0,this.length(),d,h)},u.prototype.formatAt=function(d,h,f,p){d===0&&h===this.length()?this.format(f,p):c.prototype.formatAt.call(this,d,h,f,p)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u})(s.default);r.default=o}),(function(t,r,i){var a=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){u(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}})();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),o=i(1),c=(function(u){a(d,u);function d(h){var f=u.call(this,h)||this;return f.text=f.statics.value(f.domNode),f}return d.create=function(h){return document.createTextNode(h)},d.value=function(h){var f=h.data;return f.normalize&&(f=f.normalize()),f},d.prototype.deleteAt=function(h,f){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+f)},d.prototype.index=function(h,f){return this.domNode===h?f:-1},d.prototype.insertAt=function(h,f,p){p==null?(this.text=this.text.slice(0,h)+f+this.text.slice(h),this.domNode.data=this.text):u.prototype.insertAt.call(this,h,f,p)},d.prototype.length=function(){return this.text.length},d.prototype.optimize=function(h){u.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof d&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},d.prototype.position=function(h,f){return[this.domNode,h]},d.prototype.split=function(h,f){if(f===void 0&&(f=!1),!f){if(h===0)return this;if(h===this.length())return this.next}var p=o.create(this.domNode.splitText(h));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},d.prototype.update=function(h,f){var p=this;h.some(function(y){return y.type==="characterData"&&y.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},d.prototype.value=function(){return this.text},d.blotName="text",d.scope=o.Scope.INLINE_BLOT,d})(s.default);r.default=c}),(function(t,r,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(o,c){return arguments.length>1&&!this.contains(o)==!c?c:s.call(this,o)}}String.prototype.startsWith||(String.prototype.startsWith=function(o,c){return c=c||0,this.substr(c,o.length)===o}),String.prototype.endsWith||(String.prototype.endsWith=function(o,c){var u=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>u.length)&&(c=u.length),c-=o.length;var d=u.indexOf(o,c);return d!==-1&&d===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),d=u.length>>>0,h=arguments[1],f,p=0;p<d;p++)if(f=u[p],c.call(h,f,p,u))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(t,r){var i=-1,a=1,s=0;function o(A,w,S){if(A==w)return A?[[s,A]]:[];(S<0||A.length<S)&&(S=null);var E=h(A,w),_=A.substring(0,E);A=A.substring(E),w=w.substring(E),E=f(A,w);var D=A.substring(A.length-E);A=A.substring(0,A.length-E),w=w.substring(0,w.length-E);var C=c(A,w);return _&&C.unshift([s,_]),D&&C.push([s,D]),y(C),S!=null&&(C=v(C,S)),C=x(C),C}function c(A,w){var S;if(!A)return[[a,w]];if(!w)return[[i,A]];var E=A.length>w.length?A:w,_=A.length>w.length?w:A,D=E.indexOf(_);if(D!=-1)return S=[[a,E.substring(0,D)],[s,_],[a,E.substring(D+_.length)]],A.length>w.length&&(S[0][0]=S[2][0]=i),S;if(_.length==1)return[[i,A],[a,w]];var C=p(A,w);if(C){var k=C[0],T=C[1],N=C[2],j=C[3],R=C[4],P=o(k,N),F=o(T,j);return P.concat([[s,R]],F)}return u(A,w)}function u(A,w){for(var S=A.length,E=w.length,_=Math.ceil((S+E)/2),D=_,C=2*_,k=new Array(C),T=new Array(C),N=0;N<C;N++)k[N]=-1,T[N]=-1;k[D+1]=0,T[D+1]=0;for(var j=S-E,R=j%2!=0,P=0,F=0,q=0,$=0,B=0;B<_;B++){for(var I=-B+P;I<=B-F;I+=2){var L=D+I,U;I==-B||I!=B&&k[L-1]<k[L+1]?U=k[L+1]:U=k[L-1]+1;for(var G=U-I;U<S&&G<E&&A.charAt(U)==w.charAt(G);)U++,G++;if(k[L]=U,U>S)F+=2;else if(G>E)P+=2;else if(R){var H=D+j-I;if(H>=0&&H<C&&T[H]!=-1){var V=S-T[H];if(U>=V)return d(A,w,U,G)}}}for(var K=-B+q;K<=B-$;K+=2){var H=D+K,V;K==-B||K!=B&&T[H-1]<T[H+1]?V=T[H+1]:V=T[H-1]+1;for(var ae=V-K;V<S&&ae<E&&A.charAt(S-V-1)==w.charAt(E-ae-1);)V++,ae++;if(T[H]=V,V>S)$+=2;else if(ae>E)q+=2;else if(!R){var L=D+j-K;if(L>=0&&L<C&&k[L]!=-1){var U=k[L],G=D+U-L;if(V=S-V,U>=V)return d(A,w,U,G)}}}}return[[i,A],[a,w]]}function d(A,w,S,E){var _=A.substring(0,S),D=w.substring(0,E),C=A.substring(S),k=w.substring(E),T=o(_,D),N=o(C,k);return T.concat(N)}function h(A,w){if(!A||!w||A.charAt(0)!=w.charAt(0))return 0;for(var S=0,E=Math.min(A.length,w.length),_=E,D=0;S<_;)A.substring(D,_)==w.substring(D,_)?(S=_,D=S):E=_,_=Math.floor((E-S)/2+S);return _}function f(A,w){if(!A||!w||A.charAt(A.length-1)!=w.charAt(w.length-1))return 0;for(var S=0,E=Math.min(A.length,w.length),_=E,D=0;S<_;)A.substring(A.length-_,A.length-D)==w.substring(w.length-_,w.length-D)?(S=_,D=S):E=_,_=Math.floor((E-S)/2+S);return _}function p(A,w){var S=A.length>w.length?A:w,E=A.length>w.length?w:A;if(S.length<4||E.length*2<S.length)return null;function _(F,q,$){for(var B=F.substring($,$+Math.floor(F.length/4)),I=-1,L="",U,G,H,V;(I=q.indexOf(B,I+1))!=-1;){var K=h(F.substring($),q.substring(I)),ae=f(F.substring(0,$),q.substring(0,I));L.length<ae+K&&(L=q.substring(I-ae,I)+q.substring(I,I+K),U=F.substring(0,$-ae),G=F.substring($+K),H=q.substring(0,I-ae),V=q.substring(I+K))}return L.length*2>=F.length?[U,G,H,V,L]:null}var D=_(S,E,Math.ceil(S.length/4)),C=_(S,E,Math.ceil(S.length/2)),k;if(!D&&!C)return null;C?D?k=D[4].length>C[4].length?D:C:k=C:k=D;var T,N,j,R;A.length>w.length?(T=k[0],N=k[1],j=k[2],R=k[3]):(j=k[0],R=k[1],T=k[2],N=k[3]);var P=k[4];return[T,N,j,R,P]}function y(A){A.push([s,""]);for(var w=0,S=0,E=0,_="",D="",C;w<A.length;)switch(A[w][0]){case a:E++,D+=A[w][1],w++;break;case i:S++,_+=A[w][1],w++;break;case s:S+E>1?(S!==0&&E!==0&&(C=h(D,_),C!==0&&(w-S-E>0&&A[w-S-E-1][0]==s?A[w-S-E-1][1]+=D.substring(0,C):(A.splice(0,0,[s,D.substring(0,C)]),w++),D=D.substring(C),_=_.substring(C)),C=f(D,_),C!==0&&(A[w][1]=D.substring(D.length-C)+A[w][1],D=D.substring(0,D.length-C),_=_.substring(0,_.length-C))),S===0?A.splice(w-E,S+E,[a,D]):E===0?A.splice(w-S,S+E,[i,_]):A.splice(w-S-E,S+E,[i,_],[a,D]),w=w-S-E+(S?1:0)+(E?1:0)+1):w!==0&&A[w-1][0]==s?(A[w-1][1]+=A[w][1],A.splice(w,1)):w++,E=0,S=0,_="",D="";break}A[A.length-1][1]===""&&A.pop();var k=!1;for(w=1;w<A.length-1;)A[w-1][0]==s&&A[w+1][0]==s&&(A[w][1].substring(A[w][1].length-A[w-1][1].length)==A[w-1][1]?(A[w][1]=A[w-1][1]+A[w][1].substring(0,A[w][1].length-A[w-1][1].length),A[w+1][1]=A[w-1][1]+A[w+1][1],A.splice(w-1,1),k=!0):A[w][1].substring(0,A[w+1][1].length)==A[w+1][1]&&(A[w-1][1]+=A[w+1][1],A[w][1]=A[w][1].substring(A[w+1][1].length)+A[w+1][1],A.splice(w+1,1),k=!0)),w++;k&&y(A)}var g=o;g.INSERT=a,g.DELETE=i,g.EQUAL=s,t.exports=g;function m(A,w){if(w===0)return[s,A];for(var S=0,E=0;E<A.length;E++){var _=A[E];if(_[0]===i||_[0]===s){var D=S+_[1].length;if(w===D)return[E+1,A];if(w<D){A=A.slice();var C=w-S,k=[_[0],_[1].slice(0,C)],T=[_[0],_[1].slice(C)];return A.splice(E,1,k,T),[E+1,A]}else S=D}}throw new Error("cursor_pos is out of bounds!")}function v(A,w){var S=m(A,w),E=S[1],_=S[0],D=E[_],C=E[_+1];if(D==null)return A;if(D[0]!==s)return A;if(C!=null&&D[1]+C[1]===C[1]+D[1])return E.splice(_,2,C,D),b(E,_,2);if(C!=null&&C[1].indexOf(D[1])===0){E.splice(_,2,[C[0],D[1]],[0,D[1]]);var k=C[1].slice(D[1].length);return k.length>0&&E.splice(_+2,0,[C[0],k]),b(E,_,3)}else return A}function x(A){for(var w=!1,S=function(C){return C.charCodeAt(0)>=56320&&C.charCodeAt(0)<=57343},E=function(C){return C.charCodeAt(C.length-1)>=55296&&C.charCodeAt(C.length-1)<=56319},_=2;_<A.length;_+=1)A[_-2][0]===s&&E(A[_-2][1])&&A[_-1][0]===i&&S(A[_-1][1])&&A[_][0]===a&&S(A[_][1])&&(w=!0,A[_-1][1]=A[_-2][1].slice(-1)+A[_-1][1],A[_][1]=A[_-2][1].slice(-1)+A[_][1],A[_-2][1]=A[_-2][1].slice(0,-1));if(!w)return A;for(var D=[],_=0;_<A.length;_+=1)A[_][1].length>0&&D.push(A[_]);return D}function b(A,w,S){for(var E=w+S-1;E>=0&&E>=w-1;E--)if(E+1<A.length){var _=A[E],D=A[E+1];_[0]===D[1]&&A.splice(E,2,[_[0],_[1]+D[1]])}return A}}),(function(t,r){r=t.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(a){var s=[];for(var o in a)s.push(o);return s}}),(function(t,r){var i=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";r=t.exports=i?a:s,r.supported=a;function a(o){return Object.prototype.toString.call(o)=="[object Arguments]"}r.unsupported=s;function s(o){return o&&typeof o=="object"&&typeof o.length=="number"&&Object.prototype.hasOwnProperty.call(o,"callee")&&!Object.prototype.propertyIsEnumerable.call(o,"callee")||!1}}),(function(t,r){var i=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function o(u,d,h){this.fn=u,this.context=d,this.once=h||!1}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],h,f;if(this._eventsCount===0)return d;for(f in h=this._events)i.call(h,f)&&d.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},c.prototype.listeners=function(d,h){var f=a?a+d:d,p=this._events[f];if(h)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var y=0,g=p.length,m=new Array(g);y<g;y++)m[y]=p[y].fn;return m},c.prototype.emit=function(d,h,f,p,y,g){var m=a?a+d:d;if(!this._events[m])return!1;var v=this._events[m],x=arguments.length,b,A;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,h),!0;case 3:return v.fn.call(v.context,h,f),!0;case 4:return v.fn.call(v.context,h,f,p),!0;case 5:return v.fn.call(v.context,h,f,p,y),!0;case 6:return v.fn.call(v.context,h,f,p,y,g),!0}for(A=1,b=new Array(x-1);A<x;A++)b[A-1]=arguments[A];v.fn.apply(v.context,b)}else{var w=v.length,S;for(A=0;A<w;A++)switch(v[A].once&&this.removeListener(d,v[A].fn,void 0,!0),x){case 1:v[A].fn.call(v[A].context);break;case 2:v[A].fn.call(v[A].context,h);break;case 3:v[A].fn.call(v[A].context,h,f);break;case 4:v[A].fn.call(v[A].context,h,f,p);break;default:if(!b)for(S=1,b=new Array(x-1);S<x;S++)b[S-1]=arguments[S];v[A].fn.apply(v[A].context,b)}}return!0},c.prototype.on=function(d,h,f){var p=new o(h,f||this),y=a?a+d:d;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],p]:this._events[y].push(p):(this._events[y]=p,this._eventsCount++),this},c.prototype.once=function(d,h,f){var p=new o(h,f||this,!0),y=a?a+d:d;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],p]:this._events[y].push(p):(this._events[y]=p,this._eventsCount++),this},c.prototype.removeListener=function(d,h,f,p){var y=a?a+d:d;if(!this._events[y])return this;if(!h)return--this._eventsCount===0?this._events=new s:delete this._events[y],this;var g=this._events[y];if(g.fn)g.fn===h&&(!p||g.once)&&(!f||g.context===f)&&(--this._eventsCount===0?this._events=new s:delete this._events[y]);else{for(var m=0,v=[],x=g.length;m<x;m++)(g[m].fn!==h||p&&!g[m].once||f&&g[m].context!==f)&&v.push(g[m]);v.length?this._events[y]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new s:delete this._events[y]}return this},c.prototype.removeAllListeners=function(d){var h;return d?(h=a?a+d:d,this._events[h]&&(--this._eventsCount===0?this._events=new s:delete this._events[h])):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=a,c.EventEmitter=c,typeof t<"u"&&(t.exports=c)}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},s=(function(){function z(X,ue){var le=[],ee=!0,ne=!1,oe=void 0;try{for(var pe=X[Symbol.iterator](),Ae;!(ee=(Ae=pe.next()).done)&&(le.push(Ae.value),!(ue&&le.length===ue));ee=!0);}catch(Ne){ne=!0,oe=Ne}finally{try{!ee&&pe.return&&pe.return()}finally{if(ne)throw oe}}return le}return function(X,ue){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return z(X,ue);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function z(X,ue){for(var le=0;le<ue.length;le++){var ee=ue[le];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(X,ee.key,ee)}}return function(X,ue,le){return ue&&z(X.prototype,ue),le&&z(X,le),X}})(),c=i(3),u=T(c),d=i(2),h=T(d),f=i(0),p=T(f),y=i(5),g=T(y),m=i(10),v=T(m),x=i(9),b=T(x),A=i(36),w=i(37),S=i(13),E=T(S),_=i(26),D=i(38),C=i(39),k=i(40);function T(z){return z&&z.__esModule?z:{default:z}}function N(z,X,ue){return X in z?Object.defineProperty(z,X,{value:ue,enumerable:!0,configurable:!0,writable:!0}):z[X]=ue,z}function j(z,X){if(!(z instanceof X))throw new TypeError("Cannot call a class as a function")}function R(z,X){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:z}function P(z,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);z.prototype=Object.create(X&&X.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(z,X):z.__proto__=X)}var F=(0,v.default)("quill:clipboard"),q="__ql-matcher",$=[[Node.TEXT_NODE,Z],[Node.TEXT_NODE,O],["br",xe],[Node.ELEMENT_NODE,O],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,te],[Node.ELEMENT_NODE,re],["li",Te],["b",ae.bind(ae,"bold")],["i",ae.bind(ae,"italic")],["style",ve]],B=[A.AlignAttribute,D.DirectionAttribute].reduce(function(z,X){return z[X.keyName]=X,z},{}),I=[A.AlignStyle,w.BackgroundStyle,_.ColorStyle,D.DirectionStyle,C.FontStyle,k.SizeStyle].reduce(function(z,X){return z[X.keyName]=X,z},{}),L=(function(z){P(X,z);function X(ue,le){j(this,X);var ee=R(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,ue,le));return ee.quill.root.addEventListener("paste",ee.onPaste.bind(ee)),ee.container=ee.quill.addContainer("ql-clipboard"),ee.container.setAttribute("contenteditable",!0),ee.container.setAttribute("tabindex",-1),ee.matchers=[],$.concat(ee.options.matchers).forEach(function(ne){var oe=s(ne,2),pe=oe[0],Ae=oe[1];!le.matchVisual&&Ae===ie||ee.addMatcher(pe,Ae)}),ee}return o(X,[{key:"addMatcher",value:function(le,ee){this.matchers.push([le,ee])}},{key:"convert",value:function(le){if(typeof le=="string")return this.container.innerHTML=le.replace(/\>\r?\n +\</g,"><"),this.convert();var ee=this.quill.getFormat(this.quill.selection.savedRange.index);if(ee[E.default.blotName]){var ne=this.container.innerText;return this.container.innerHTML="",new h.default().insert(ne,N({},E.default.blotName,ee[E.default.blotName]))}var oe=this.prepareMatching(),pe=s(oe,2),Ae=pe[0],Ne=pe[1],Pe=K(this.container,Ae,Ne);return H(Pe,`
`)&&Pe.ops[Pe.ops.length-1].attributes==null&&(Pe=Pe.compose(new h.default().retain(Pe.length()-1).delete(1))),F.log("convert",this.container.innerHTML,Pe),this.container.innerHTML="",Pe}},{key:"dangerouslyPasteHTML",value:function(le,ee){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof le=="string")this.quill.setContents(this.convert(le),ee),this.quill.setSelection(0,g.default.sources.SILENT);else{var oe=this.convert(ee);this.quill.updateContents(new h.default().retain(le).concat(oe),ne),this.quill.setSelection(le+oe.length(),g.default.sources.SILENT)}}},{key:"onPaste",value:function(le){var ee=this;if(!(le.defaultPrevented||!this.quill.isEnabled())){var ne=this.quill.getSelection(),oe=new h.default().retain(ne.index),pe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(g.default.sources.SILENT),setTimeout(function(){oe=oe.concat(ee.convert()).delete(ne.length),ee.quill.updateContents(oe,g.default.sources.USER),ee.quill.setSelection(oe.length()-ne.length,g.default.sources.SILENT),ee.quill.scrollingContainer.scrollTop=pe,ee.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var le=this,ee=[],ne=[];return this.matchers.forEach(function(oe){var pe=s(oe,2),Ae=pe[0],Ne=pe[1];switch(Ae){case Node.TEXT_NODE:ne.push(Ne);break;case Node.ELEMENT_NODE:ee.push(Ne);break;default:[].forEach.call(le.container.querySelectorAll(Ae),function(Pe){Pe[q]=Pe[q]||[],Pe[q].push(Ne)});break}}),[ee,ne]}}]),X})(b.default);L.DEFAULTS={matchers:[],matchVisual:!0};function U(z,X,ue){return(typeof X>"u"?"undefined":a(X))==="object"?Object.keys(X).reduce(function(le,ee){return U(le,ee,X[ee])},z):z.reduce(function(le,ee){return ee.attributes&&ee.attributes[X]?le.push(ee):le.insert(ee.insert,(0,u.default)({},N({},X,ue),ee.attributes))},new h.default)}function G(z){if(z.nodeType!==Node.ELEMENT_NODE)return{};var X="__ql-computed-style";return z[X]||(z[X]=window.getComputedStyle(z))}function H(z,X){for(var ue="",le=z.ops.length-1;le>=0&&ue.length<X.length;--le){var ee=z.ops[le];if(typeof ee.insert!="string")break;ue=ee.insert+ue}return ue.slice(-1*X.length)===X}function V(z){if(z.childNodes.length===0)return!1;var X=G(z);return["block","list-item"].indexOf(X.display)>-1}function K(z,X,ue){return z.nodeType===z.TEXT_NODE?ue.reduce(function(le,ee){return ee(z,le)},new h.default):z.nodeType===z.ELEMENT_NODE?[].reduce.call(z.childNodes||[],function(le,ee){var ne=K(ee,X,ue);return ee.nodeType===z.ELEMENT_NODE&&(ne=X.reduce(function(oe,pe){return pe(ee,oe)},ne),ne=(ee[q]||[]).reduce(function(oe,pe){return pe(ee,oe)},ne)),le.concat(ne)},new h.default):new h.default}function ae(z,X,ue){return U(ue,z,!0)}function te(z,X){var ue=p.default.Attributor.Attribute.keys(z),le=p.default.Attributor.Class.keys(z),ee=p.default.Attributor.Style.keys(z),ne={};return ue.concat(le).concat(ee).forEach(function(oe){var pe=p.default.query(oe,p.default.Scope.ATTRIBUTE);pe!=null&&(ne[pe.attrName]=pe.value(z),ne[pe.attrName])||(pe=B[oe],pe!=null&&(pe.attrName===oe||pe.keyName===oe)&&(ne[pe.attrName]=pe.value(z)||void 0),pe=I[oe],pe!=null&&(pe.attrName===oe||pe.keyName===oe)&&(pe=I[oe],ne[pe.attrName]=pe.value(z)||void 0))}),Object.keys(ne).length>0&&(X=U(X,ne)),X}function de(z,X){var ue=p.default.query(z);if(ue==null)return X;if(ue.prototype instanceof p.default.Embed){var le={},ee=ue.value(z);ee!=null&&(le[ue.blotName]=ee,X=new h.default().insert(le,ue.formats(z)))}else typeof ue.formats=="function"&&(X=U(X,ue.blotName,ue.formats(z)));return X}function xe(z,X){return H(X,`
`)||X.insert(`
`),X}function ve(){return new h.default}function Te(z,X){var ue=p.default.query(z);if(ue==null||ue.blotName!=="list-item"||!H(X,`
`))return X;for(var le=-1,ee=z.parentNode;!ee.classList.contains("ql-clipboard");)(p.default.query(ee)||{}).blotName==="list"&&(le+=1),ee=ee.parentNode;return le<=0?X:X.compose(new h.default().retain(X.length()-1).retain(1,{indent:le}))}function O(z,X){return H(X,`
`)||(V(z)||X.length()>0&&z.nextSibling&&V(z.nextSibling))&&X.insert(`
`),X}function ie(z,X){if(V(z)&&z.nextElementSibling!=null&&!H(X,`

`)){var ue=z.offsetHeight+parseFloat(G(z).marginTop)+parseFloat(G(z).marginBottom);z.nextElementSibling.offsetTop>z.offsetTop+ue*1.5&&X.insert(`
`)}return X}function re(z,X){var ue={},le=z.style||{};return le.fontStyle&&G(z).fontStyle==="italic"&&(ue.italic=!0),le.fontWeight&&(G(z).fontWeight.startsWith("bold")||parseInt(G(z).fontWeight)>=700)&&(ue.bold=!0),Object.keys(ue).length>0&&(X=U(X,ue)),parseFloat(le.textIndent||0)>0&&(X=new h.default().insert("	").concat(X)),X}function Z(z,X){var ue=z.data;if(z.parentNode.tagName==="O:P")return X.insert(ue.trim());if(ue.trim().length===0&&z.parentNode.classList.contains("ql-clipboard"))return X;if(!G(z.parentNode).whiteSpace.startsWith("pre")){var le=function(ne,oe){return oe=oe.replace(/[^\u00a0]/g,""),oe.length<1&&ne?" ":oe};ue=ue.replace(/\r\n/g," ").replace(/\n/g," "),ue=ue.replace(/\s\s+/g,le.bind(le,!0)),(z.previousSibling==null&&V(z.parentNode)||z.previousSibling!=null&&V(z.previousSibling))&&(ue=ue.replace(/^\s+/,le.bind(le,!1))),(z.nextSibling==null&&V(z.parentNode)||z.nextSibling!=null&&V(z.nextSibling))&&(ue=ue.replace(/\s+$/,le.bind(le,!1)))}return X.insert(ue)}r.default=L,r.matchAttributor=te,r.matchBlot=de,r.matchNewline=O,r.matchSpacing=ie,r.matchText=Z}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function y(g,m){for(var v=0;v<m.length;v++){var x=m[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,v){return m&&y(g.prototype,m),v&&y(g,v),g}})(),s=function y(g,m,v){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:y(b,m,v)}else{if("value"in x)return x.value;var A=x.get;return A===void 0?void 0:A.call(v)}},o=i(6),c=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function h(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function f(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var p=(function(y){f(g,y);function g(){return d(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"optimize",value:function(v){s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),g})(c.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var a=(function(){function k(T,N){var j=[],R=!0,P=!1,F=void 0;try{for(var q=T[Symbol.iterator](),$;!(R=($=q.next()).done)&&(j.push($.value),!(N&&j.length===N));R=!0);}catch(B){P=!0,F=B}finally{try{!R&&q.return&&q.return()}finally{if(P)throw F}}return j}return function(T,N){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return k(T,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),s=(function(){function k(T,N){for(var j=0;j<N.length;j++){var R=N[j];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(T,R.key,R)}}return function(T,N,j){return N&&k(T.prototype,N),j&&k(T,j),T}})(),o=i(2),c=v(o),u=i(0),d=v(u),h=i(5),f=v(h),p=i(10),y=v(p),g=i(9),m=v(g);function v(k){return k&&k.__esModule?k:{default:k}}function x(k,T,N){return T in k?Object.defineProperty(k,T,{value:N,enumerable:!0,configurable:!0,writable:!0}):k[T]=N,k}function b(k,T){if(!(k instanceof T))throw new TypeError("Cannot call a class as a function")}function A(k,T){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:k}function w(k,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);k.prototype=Object.create(T&&T.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(k,T):k.__proto__=T)}var S=(0,y.default)("quill:toolbar"),E=(function(k){w(T,k);function T(N,j){b(this,T);var R=A(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,N,j));if(Array.isArray(R.options.container)){var P=document.createElement("div");D(P,R.options.container),N.container.parentNode.insertBefore(P,N.container),R.container=P}else typeof R.options.container=="string"?R.container=document.querySelector(R.options.container):R.container=R.options.container;if(!(R.container instanceof HTMLElement)){var F;return F=S.error("Container required for toolbar",R.options),A(R,F)}return R.container.classList.add("ql-toolbar"),R.controls=[],R.handlers={},Object.keys(R.options.handlers).forEach(function(q){R.addHandler(q,R.options.handlers[q])}),[].forEach.call(R.container.querySelectorAll("button, select"),function(q){R.attach(q)}),R.quill.on(f.default.events.EDITOR_CHANGE,function(q,$){q===f.default.events.SELECTION_CHANGE&&R.update($)}),R.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var q=R.quill.selection.getRange(),$=a(q,1),B=$[0];R.update(B)}),R}return s(T,[{key:"addHandler",value:function(j,R){this.handlers[j]=R}},{key:"attach",value:function(j){var R=this,P=[].find.call(j.classList,function(q){return q.indexOf("ql-")===0});if(P){if(P=P.slice(3),j.tagName==="BUTTON"&&j.setAttribute("type","button"),this.handlers[P]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[P]==null){S.warn("ignoring attaching to disabled format",P,j);return}if(d.default.query(P)==null){S.warn("ignoring attaching to nonexistent format",P,j);return}}var F=j.tagName==="SELECT"?"change":"click";j.addEventListener(F,function(q){var $=void 0;if(j.tagName==="SELECT"){if(j.selectedIndex<0)return;var B=j.options[j.selectedIndex];B.hasAttribute("selected")?$=!1:$=B.value||!1}else j.classList.contains("ql-active")?$=!1:$=j.value||!j.hasAttribute("value"),q.preventDefault();R.quill.focus();var I=R.quill.selection.getRange(),L=a(I,1),U=L[0];if(R.handlers[P]!=null)R.handlers[P].call(R,$);else if(d.default.query(P).prototype instanceof d.default.Embed){if($=prompt("Enter "+P),!$)return;R.quill.updateContents(new c.default().retain(U.index).delete(U.length).insert(x({},P,$)),f.default.sources.USER)}else R.quill.format(P,$,f.default.sources.USER);R.update(U)}),this.controls.push([P,j])}}},{key:"update",value:function(j){var R=j==null?{}:this.quill.getFormat(j);this.controls.forEach(function(P){var F=a(P,2),q=F[0],$=F[1];if($.tagName==="SELECT"){var B=void 0;if(j==null)B=null;else if(R[q]==null)B=$.querySelector("option[selected]");else if(!Array.isArray(R[q])){var I=R[q];typeof I=="string"&&(I=I.replace(/\"/g,'\\"')),B=$.querySelector('option[value="'+I+'"]')}B==null?($.value="",$.selectedIndex=-1):B.selected=!0}else if(j==null)$.classList.remove("ql-active");else if($.hasAttribute("value")){var L=R[q]===$.getAttribute("value")||R[q]!=null&&R[q].toString()===$.getAttribute("value")||R[q]==null&&!$.getAttribute("value");$.classList.toggle("ql-active",L)}else $.classList.toggle("ql-active",R[q]!=null)})}}]),T})(m.default);E.DEFAULTS={};function _(k,T,N){var j=document.createElement("button");j.setAttribute("type","button"),j.classList.add("ql-"+T),N!=null&&(j.value=N),k.appendChild(j)}function D(k,T){Array.isArray(T[0])||(T=[T]),T.forEach(function(N){var j=document.createElement("span");j.classList.add("ql-formats"),N.forEach(function(R){if(typeof R=="string")_(j,R);else{var P=Object.keys(R)[0],F=R[P];Array.isArray(F)?C(j,P,F):_(j,P,F)}}),k.appendChild(j)})}function C(k,T,N){var j=document.createElement("select");j.classList.add("ql-"+T),N.forEach(function(R){var P=document.createElement("option");R!==!1?P.setAttribute("value",R):P.setAttribute("selected","selected"),j.appendChild(P)}),k.appendChild(j)}E.DEFAULTS={container:null,handlers:{clean:function(){var T=this,N=this.quill.getSelection();if(N!=null)if(N.length==0){var j=this.quill.getFormat();Object.keys(j).forEach(function(R){d.default.query(R,d.default.Scope.INLINE)!=null&&T.quill.format(R,!1)})}else this.quill.removeFormat(N,f.default.sources.USER)},direction:function(T){var N=this.quill.getFormat().align;T==="rtl"&&N==null?this.quill.format("align","right",f.default.sources.USER):!T&&N==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",T,f.default.sources.USER)},indent:function(T){var N=this.quill.getSelection(),j=this.quill.getFormat(N),R=parseInt(j.indent||0);if(T==="+1"||T==="-1"){var P=T==="+1"?1:-1;j.direction==="rtl"&&(P*=-1),this.quill.format("indent",R+P,f.default.sources.USER)}},link:function(T){T===!0&&(T=prompt("Enter link URL:")),this.quill.format("link",T,f.default.sources.USER)},list:function(T){var N=this.quill.getSelection(),j=this.quill.getFormat(N);T==="check"?j.list==="checked"||j.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",T,f.default.sources.USER)}}},r.default=E,r.addControls=D}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function y(g,m){for(var v=0;v<m.length;v++){var x=m[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,v){return m&&y(g.prototype,m),v&&y(g,v),g}})(),s=function y(g,m,v){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:y(b,m,v)}else{if("value"in x)return x.value;var A=x.get;return A===void 0?void 0:A.call(v)}},o=i(28),c=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function h(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function f(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var p=(function(y){f(g,y);function g(m,v){d(this,g);var x=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,m));return x.label.innerHTML=v,x.container.classList.add("ql-color-picker"),[].slice.call(x.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(b){b.classList.add("ql-primary")}),x}return a(g,[{key:"buildItem",value:function(v){var x=s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"buildItem",this).call(this,v);return x.style.backgroundColor=v.getAttribute("value")||"",x}},{key:"selectItem",value:function(v,x){s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,v,x);var b=this.label.querySelector(".ql-color-label"),A=v&&v.getAttribute("data-value")||"";b&&(b.tagName==="line"?b.style.stroke=A:b.style.fill=A)}}]),g})(c.default);r.default=p}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function y(g,m){for(var v=0;v<m.length;v++){var x=m[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,v){return m&&y(g.prototype,m),v&&y(g,v),g}})(),s=function y(g,m,v){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:y(b,m,v)}else{if("value"in x)return x.value;var A=x.get;return A===void 0?void 0:A.call(v)}},o=i(28),c=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function h(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function f(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var p=(function(y){f(g,y);function g(m,v){d(this,g);var x=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,m));return x.container.classList.add("ql-icon-picker"),[].forEach.call(x.container.querySelectorAll(".ql-picker-item"),function(b){b.innerHTML=v[b.getAttribute("data-value")||""]}),x.defaultItem=x.container.querySelector(".ql-selected"),x.selectItem(x.defaultItem),x}return a(g,[{key:"selectItem",value:function(v,x){s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,v,x),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),g})(c.default);r.default=p}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function c(u,d){for(var h=0;h<d.length;h++){var f=d[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}return function(u,d,h){return d&&c(u.prototype,d),h&&c(u,h),u}})();function s(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var o=(function(){function c(u,d){var h=this;s(this,c),this.quill=u,this.boundsContainer=d||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return a(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(d){var h=d.left+d.width/2-this.root.offsetWidth/2,f=d.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),g=0;if(y.right>p.right&&(g=p.right-y.right,this.root.style.left=h+g+"px"),y.left<p.left&&(g=p.left-y.left,this.root.style.left=h+g+"px"),y.bottom>p.bottom){var m=y.bottom-y.top,v=d.bottom-d.top+m;this.root.style.top=f-v+"px",this.root.classList.add("ql-flip")}return g}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c})();r.default=o}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function C(k,T){var N=[],j=!0,R=!1,P=void 0;try{for(var F=k[Symbol.iterator](),q;!(j=(q=F.next()).done)&&(N.push(q.value),!(T&&N.length===T));j=!0);}catch($){R=!0,P=$}finally{try{!j&&F.return&&F.return()}finally{if(R)throw P}}return N}return function(k,T){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return C(k,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),s=function C(k,T,N){k===null&&(k=Function.prototype);var j=Object.getOwnPropertyDescriptor(k,T);if(j===void 0){var R=Object.getPrototypeOf(k);return R===null?void 0:C(R,T,N)}else{if("value"in j)return j.value;var P=j.get;return P===void 0?void 0:P.call(N)}},o=(function(){function C(k,T){for(var N=0;N<T.length;N++){var j=T[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(k,j.key,j)}}return function(k,T,N){return T&&C(k.prototype,T),N&&C(k,N),k}})(),c=i(3),u=b(c),d=i(8),h=b(d),f=i(43),p=b(f),y=i(27),g=b(y),m=i(15),v=i(41),x=b(v);function b(C){return C&&C.__esModule?C:{default:C}}function A(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function w(C,k){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:C}function S(C,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(C,k):C.__proto__=k)}var E=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],_=(function(C){S(k,C);function k(T,N){A(this,k),N.modules.toolbar!=null&&N.modules.toolbar.container==null&&(N.modules.toolbar.container=E);var j=w(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,T,N));return j.quill.container.classList.add("ql-snow"),j}return o(k,[{key:"extendToolbar",value:function(N){N.container.classList.add("ql-snow"),this.buildButtons([].slice.call(N.container.querySelectorAll("button")),x.default),this.buildPickers([].slice.call(N.container.querySelectorAll("select")),x.default),this.tooltip=new D(this.quill,this.options.bounds),N.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(j,R){N.handlers.link.call(N,!R.format.link)})}}]),k})(p.default);_.DEFAULTS=(0,u.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){if(k){var T=this.quill.getSelection();if(T==null||T.length==0)return;var N=this.quill.getText(T);/^\S+@\S+\.\S+$/.test(N)&&N.indexOf("mailto:")!==0&&(N="mailto:"+N);var j=this.quill.theme.tooltip;j.edit("link",N)}else this.quill.format("link",!1)}}}}});var D=(function(C){S(k,C);function k(T,N){A(this,k);var j=w(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,T,N));return j.preview=j.root.querySelector("a.ql-preview"),j}return o(k,[{key:"listen",value:function(){var N=this;s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(j){N.root.classList.contains("ql-editing")?N.save():N.edit("link",N.preview.textContent),j.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(j){if(N.linkRange!=null){var R=N.linkRange;N.restoreFocus(),N.quill.formatText(R,"link",!1,h.default.sources.USER),delete N.linkRange}j.preventDefault(),N.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(j,R,P){if(j!=null){if(j.length===0&&P===h.default.sources.USER){var F=N.quill.scroll.descendant(g.default,j.index),q=a(F,2),$=q[0],B=q[1];if($!=null){N.linkRange=new m.Range(j.index-B,$.length());var I=g.default.formats($.domNode);N.preview.textContent=I,N.preview.setAttribute("href",I),N.show(),N.position(N.quill.getBounds(N.linkRange));return}}else delete N.linkRange;N.hide()}})}},{key:"show",value:function(){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),k})(f.BaseTooltip);D.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=_}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(29),s=ee(a),o=i(36),c=i(38),u=i(64),d=i(65),h=ee(d),f=i(66),p=ee(f),y=i(67),g=ee(y),m=i(37),v=i(26),x=i(39),b=i(40),A=i(56),w=ee(A),S=i(68),E=ee(S),_=i(27),D=ee(_),C=i(69),k=ee(C),T=i(70),N=ee(T),j=i(71),R=ee(j),P=i(72),F=ee(P),q=i(73),$=ee(q),B=i(13),I=ee(B),L=i(74),U=ee(L),G=i(75),H=ee(G),V=i(57),K=ee(V),ae=i(41),te=ee(ae),de=i(28),xe=ee(de),ve=i(59),Te=ee(ve),O=i(60),ie=ee(O),re=i(61),Z=ee(re),z=i(108),X=ee(z),ue=i(62),le=ee(ue);function ee(ne){return ne&&ne.__esModule?ne:{default:ne}}s.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":m.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":x.FontClass,"attributors/class/size":b.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":m.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":x.FontStyle,"attributors/style/size":b.SizeStyle},!0),s.default.register({"formats/align":o.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":u.IndentClass,"formats/background":m.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":x.FontClass,"formats/size":b.SizeClass,"formats/blockquote":h.default,"formats/code-block":I.default,"formats/header":p.default,"formats/list":g.default,"formats/bold":w.default,"formats/code":B.Code,"formats/italic":E.default,"formats/link":D.default,"formats/script":k.default,"formats/strike":N.default,"formats/underline":R.default,"formats/image":F.default,"formats/video":$.default,"formats/list/item":y.ListItem,"modules/formula":U.default,"modules/syntax":H.default,"modules/toolbar":K.default,"themes/bubble":X.default,"themes/snow":le.default,"ui/icons":te.default,"ui/picker":xe.default,"ui/icon-picker":ie.default,"ui/color-picker":Te.default,"ui/tooltip":Z.default},!0),r.default=s.default}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var a=(function(){function g(m,v){for(var x=0;x<v.length;x++){var b=v[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,v,x){return v&&g(m.prototype,v),x&&g(m,x),m}})(),s=function g(m,v,x){m===null&&(m=Function.prototype);var b=Object.getOwnPropertyDescriptor(m,v);if(b===void 0){var A=Object.getPrototypeOf(m);return A===null?void 0:g(A,v,x)}else{if("value"in b)return b.value;var w=b.get;return w===void 0?void 0:w.call(x)}},o=i(0),c=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function h(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function f(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var p=(function(g){f(m,g);function m(){return d(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return a(m,[{key:"add",value:function(x,b){if(b==="+1"||b==="-1"){var A=this.value(x)||0;b=b==="+1"?A+1:A-1}return b===0?(this.remove(x),!0):s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"add",this).call(this,x,b)}},{key:"canAdd",value:function(x,b){return s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,x,b)||s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"canAdd",this).call(this,x,parseInt(b))}},{key:"value",value:function(x){return parseInt(s(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,x))||void 0}}]),m})(c.default.Attributor.Class),y=new p("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=y}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(4),s=o(a);function o(f){return f&&f.__esModule?f:{default:f}}function c(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function u(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=(function(f){d(p,f);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(s.default);h.blotName="blockquote",h.tagName="blockquote",r.default=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function p(y,g){for(var m=0;m<g.length;m++){var v=g[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}return function(y,g,m){return g&&p(y.prototype,g),m&&p(y,m),y}})(),s=i(4),o=c(s);function c(p){return p&&p.__esModule?p:{default:p}}function u(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function d(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function h(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var f=(function(p){h(y,p);function y(){return u(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,null,[{key:"formats",value:function(m){return this.tagName.indexOf(m.tagName)+1}}]),y})(o.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],r.default=f}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var a=(function(){function A(w,S){for(var E=0;E<S.length;E++){var _=S[E];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}return function(w,S,E){return S&&A(w.prototype,S),E&&A(w,E),w}})(),s=function A(w,S,E){w===null&&(w=Function.prototype);var _=Object.getOwnPropertyDescriptor(w,S);if(_===void 0){var D=Object.getPrototypeOf(w);return D===null?void 0:A(D,S,E)}else{if("value"in _)return _.value;var C=_.get;return C===void 0?void 0:C.call(E)}},o=i(0),c=p(o),u=i(4),d=p(u),h=i(25),f=p(h);function p(A){return A&&A.__esModule?A:{default:A}}function y(A,w,S){return w in A?Object.defineProperty(A,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):A[w]=S,A}function g(A,w){if(!(A instanceof w))throw new TypeError("Cannot call a class as a function")}function m(A,w){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:A}function v(A,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);A.prototype=Object.create(w&&w.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(A,w):A.__proto__=w)}var x=(function(A){v(w,A);function w(){return g(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"format",value:function(E,_){E===b.blotName&&!_?this.replaceWith(c.default.create(this.statics.scope)):s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,E,_)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(E,_){return this.parent.isolate(this.offset(this.parent),this.length()),E===this.parent.statics.blotName?(this.parent.replaceWith(E,_),this):(this.parent.unwrap(),s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replaceWith",this).call(this,E,_))}}],[{key:"formats",value:function(E){return E.tagName===this.tagName?void 0:s(w.__proto__||Object.getPrototypeOf(w),"formats",this).call(this,E)}}]),w})(d.default);x.blotName="list-item",x.tagName="LI";var b=(function(A){v(w,A),a(w,null,[{key:"create",value:function(E){var _=E==="ordered"?"OL":"UL",D=s(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,_);return(E==="checked"||E==="unchecked")&&D.setAttribute("data-checked",E==="checked"),D}},{key:"formats",value:function(E){if(E.tagName==="OL")return"ordered";if(E.tagName==="UL")return E.hasAttribute("data-checked")?E.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function w(S){g(this,w);var E=m(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,S)),_=function(C){if(C.target.parentNode===S){var k=E.statics.formats(S),T=c.default.find(C.target);k==="checked"?T.format("list","unchecked"):k==="unchecked"&&T.format("list","checked")}};return S.addEventListener("touchstart",_),S.addEventListener("mousedown",_),E}return a(w,[{key:"format",value:function(E,_){this.children.length>0&&this.children.tail.format(E,_)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(E,_){if(E instanceof x)s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertBefore",this).call(this,E,_);else{var D=_==null?this.length():_.offset(this),C=this.split(D);C.parent.insertBefore(E,C)}}},{key:"optimize",value:function(E){s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,E);var _=this.next;_!=null&&_.prev===this&&_.statics.blotName===this.statics.blotName&&_.domNode.tagName===this.domNode.tagName&&_.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(_.moveChildren(this),_.remove())}},{key:"replace",value:function(E){if(E.statics.blotName!==this.statics.blotName){var _=c.default.create(this.statics.defaultChild);E.moveChildren(_),this.appendChild(_)}s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replace",this).call(this,E)}}]),w})(f.default);b.blotName="list",b.scope=c.default.Scope.BLOCK_BLOT,b.tagName=["OL","UL"],b.defaultChild="list-item",b.allowedChildren=[x],r.ListItem=x,r.default=b}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(56),s=o(a);function o(f){return f&&f.__esModule?f:{default:f}}function c(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function u(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=(function(f){d(p,f);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(s.default);h.blotName="italic",h.tagName=["EM","I"],r.default=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function y(g,m){for(var v=0;v<m.length;v++){var x=m[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}return function(g,m,v){return m&&y(g.prototype,m),v&&y(g,v),g}})(),s=function y(g,m,v){g===null&&(g=Function.prototype);var x=Object.getOwnPropertyDescriptor(g,m);if(x===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:y(b,m,v)}else{if("value"in x)return x.value;var A=x.get;return A===void 0?void 0:A.call(v)}},o=i(6),c=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function h(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function f(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var p=(function(y){f(g,y);function g(){return d(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),g})(c.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),s=o(a);function o(f){return f&&f.__esModule?f:{default:f}}function c(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function u(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=(function(f){d(p,f);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(s.default);h.blotName="strike",h.tagName="S",r.default=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),s=o(a);function o(f){return f&&f.__esModule?f:{default:f}}function c(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function u(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=(function(f){d(p,f);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(s.default);h.blotName="underline",h.tagName="U",r.default=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function m(v,x){for(var b=0;b<x.length;b++){var A=x[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}return function(v,x,b){return x&&m(v.prototype,x),b&&m(v,b),v}})(),s=function m(v,x,b){v===null&&(v=Function.prototype);var A=Object.getOwnPropertyDescriptor(v,x);if(A===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:m(w,x,b)}else{if("value"in A)return A.value;var S=A.get;return S===void 0?void 0:S.call(b)}},o=i(0),c=d(o),u=i(27);function d(m){return m&&m.__esModule?m:{default:m}}function h(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function f(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function p(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var y=["alt","height","width"],g=(function(m){p(v,m);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"format",value:function(b,A){y.indexOf(b)>-1?A?this.domNode.setAttribute(b,A):this.domNode.removeAttribute(b):s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,b,A)}}],[{key:"create",value:function(b){var A=s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,b);return typeof b=="string"&&A.setAttribute("src",this.sanitize(b)),A}},{key:"formats",value:function(b){return y.reduce(function(A,w){return b.hasAttribute(w)&&(A[w]=b.getAttribute(w)),A},{})}},{key:"match",value:function(b){return/\.(jpe?g|gif|png)$/.test(b)||/^data:image\/.+;base64/.test(b)}},{key:"sanitize",value:function(b){return(0,u.sanitize)(b,["http","https","data"])?b:"//:0"}},{key:"value",value:function(b){return b.getAttribute("src")}}]),v})(c.default.Embed);g.blotName="image",g.tagName="IMG",r.default=g}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=(function(){function m(v,x){for(var b=0;b<x.length;b++){var A=x[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,A.key,A)}}return function(v,x,b){return x&&m(v.prototype,x),b&&m(v,b),v}})(),s=function m(v,x,b){v===null&&(v=Function.prototype);var A=Object.getOwnPropertyDescriptor(v,x);if(A===void 0){var w=Object.getPrototypeOf(v);return w===null?void 0:m(w,x,b)}else{if("value"in A)return A.value;var S=A.get;return S===void 0?void 0:S.call(b)}},o=i(4),c=i(27),u=d(c);function d(m){return m&&m.__esModule?m:{default:m}}function h(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function f(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function p(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var y=["height","width"],g=(function(m){p(v,m);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"format",value:function(b,A){y.indexOf(b)>-1?A?this.domNode.setAttribute(b,A):this.domNode.removeAttribute(b):s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,b,A)}}],[{key:"create",value:function(b){var A=s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,b);return A.setAttribute("frameborder","0"),A.setAttribute("allowfullscreen",!0),A.setAttribute("src",this.sanitize(b)),A}},{key:"formats",value:function(b){return y.reduce(function(A,w){return b.hasAttribute(w)&&(A[w]=b.getAttribute(w)),A},{})}},{key:"sanitize",value:function(b){return u.default.sanitize(b)}},{key:"value",value:function(b){return b.getAttribute("src")}}]),v})(o.BlockEmbed);g.blotName="video",g.className="ql-video",g.tagName="IFRAME",r.default=g}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var a=(function(){function b(A,w){for(var S=0;S<w.length;S++){var E=w[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(A,E.key,E)}}return function(A,w,S){return w&&b(A.prototype,w),S&&b(A,S),A}})(),s=function b(A,w,S){A===null&&(A=Function.prototype);var E=Object.getOwnPropertyDescriptor(A,w);if(E===void 0){var _=Object.getPrototypeOf(A);return _===null?void 0:b(_,w,S)}else{if("value"in E)return E.value;var D=E.get;return D===void 0?void 0:D.call(S)}},o=i(35),c=p(o),u=i(5),d=p(u),h=i(9),f=p(h);function p(b){return b&&b.__esModule?b:{default:b}}function y(b,A){if(!(b instanceof A))throw new TypeError("Cannot call a class as a function")}function g(b,A){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:b}function m(b,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);b.prototype=Object.create(A&&A.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(b,A):b.__proto__=A)}var v=(function(b){m(A,b);function A(){return y(this,A),g(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return a(A,null,[{key:"create",value:function(S){var E=s(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,S);return typeof S=="string"&&(window.katex.render(S,E,{throwOnError:!1,errorColor:"#f00"}),E.setAttribute("data-value",S)),E}},{key:"value",value:function(S){return S.getAttribute("data-value")}}]),A})(c.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var x=(function(b){m(A,b),a(A,null,[{key:"register",value:function(){d.default.register(v,!0)}}]);function A(){y(this,A);var w=g(this,(A.__proto__||Object.getPrototypeOf(A)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return w}return A})(f.default);r.FormulaBlot=v,r.default=x}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var a=(function(){function S(E,_){for(var D=0;D<_.length;D++){var C=_[D];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(E,C.key,C)}}return function(E,_,D){return _&&S(E.prototype,_),D&&S(E,D),E}})(),s=function S(E,_,D){E===null&&(E=Function.prototype);var C=Object.getOwnPropertyDescriptor(E,_);if(C===void 0){var k=Object.getPrototypeOf(E);return k===null?void 0:S(k,_,D)}else{if("value"in C)return C.value;var T=C.get;return T===void 0?void 0:T.call(D)}},o=i(0),c=g(o),u=i(5),d=g(u),h=i(9),f=g(h),p=i(13),y=g(p);function g(S){return S&&S.__esModule?S:{default:S}}function m(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}function v(S,E){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:S}function x(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(S,E):S.__proto__=E)}var b=(function(S){x(E,S);function E(){return m(this,E),v(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"replaceWith",value:function(D){this.domNode.textContent=this.domNode.textContent,this.attach(),s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,D)}},{key:"highlight",value:function(D){var C=this.domNode.textContent;this.cachedText!==C&&((C.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=D(C),this.domNode.normalize(),this.attach()),this.cachedText=C)}}]),E})(y.default);b.className="ql-syntax";var A=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),w=(function(S){x(E,S),a(E,null,[{key:"register",value:function(){d.default.register(A,!0),d.default.register(b,!0)}}]);function E(_,D){m(this,E);var C=v(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,_,D));if(typeof C.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var k=null;return C.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(k),k=setTimeout(function(){C.highlight(),k=null},C.options.interval)}),C.highlight(),C}return a(E,[{key:"highlight",value:function(){var D=this;if(!this.quill.selection.composing){this.quill.update(d.default.sources.USER);var C=this.quill.getSelection();this.quill.scroll.descendants(b).forEach(function(k){k.highlight(D.options.highlight)}),this.quill.update(d.default.sources.SILENT),C!=null&&this.quill.setSelection(C,d.default.sources.SILENT)}}}]),E})(f.default);w.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(S){var E=window.hljs.highlightAuto(S);return E.value}})(),interval:1e3},r.CodeBlock=b,r.CodeToken=A,r.default=w}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var a=function E(_,D,C){_===null&&(_=Function.prototype);var k=Object.getOwnPropertyDescriptor(_,D);if(k===void 0){var T=Object.getPrototypeOf(_);return T===null?void 0:E(T,D,C)}else{if("value"in k)return k.value;var N=k.get;return N===void 0?void 0:N.call(C)}},s=(function(){function E(_,D){for(var C=0;C<D.length;C++){var k=D[C];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(_,k.key,k)}}return function(_,D,C){return D&&E(_.prototype,D),C&&E(_,C),_}})(),o=i(3),c=m(o),u=i(8),d=m(u),h=i(43),f=m(h),p=i(15),y=i(41),g=m(y);function m(E){return E&&E.__esModule?E:{default:E}}function v(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function x(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:E}function b(E,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}var A=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],w=(function(E){b(_,E);function _(D,C){v(this,_),C.modules.toolbar!=null&&C.modules.toolbar.container==null&&(C.modules.toolbar.container=A);var k=x(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,D,C));return k.quill.container.classList.add("ql-bubble"),k}return s(_,[{key:"extendToolbar",value:function(C){this.tooltip=new S(this.quill,this.options.bounds),this.tooltip.root.appendChild(C.container),this.buildButtons([].slice.call(C.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(C.container.querySelectorAll("select")),g.default)}}]),_})(f.default);w.DEFAULTS=(0,c.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(_){_?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var S=(function(E){b(_,E);function _(D,C){v(this,_);var k=x(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,D,C));return k.quill.on(d.default.events.EDITOR_CHANGE,function(T,N,j,R){if(T===d.default.events.SELECTION_CHANGE)if(N!=null&&N.length>0&&R===d.default.sources.USER){k.show(),k.root.style.left="0px",k.root.style.width="",k.root.style.width=k.root.offsetWidth+"px";var P=k.quill.getLines(N.index,N.length);if(P.length===1)k.position(k.quill.getBounds(N));else{var F=P[P.length-1],q=k.quill.getIndex(F),$=Math.min(F.length()-1,N.index+N.length-q),B=k.quill.getBounds(new p.Range(q,$));k.position(B)}}else document.activeElement!==k.textbox&&k.quill.hasFocus()&&k.hide()}),k}return s(_,[{key:"listen",value:function(){var C=this;a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){C.root.classList.remove("ql-editing")}),this.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!C.root.classList.contains("ql-hidden")){var k=C.quill.getSelection();k!=null&&C.position(C.quill.getBounds(k))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(C){var k=a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"position",this).call(this,C),T=this.root.querySelector(".ql-tooltip-arrow");if(T.style.marginLeft="",k===0)return k;T.style.marginLeft=-1*k-T.offsetWidth/2+"px"}}]),_})(h.BaseTooltip);S.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=S,r.default=w}),(function(t,r,i){t.exports=i(63)})]).default})})(Bp)),Bp.exports}var Qi,bO;function rde(){if(bO)return Qi;bO=1;var n=Qi&&Qi.__extends||(function(){var d=function(h,f){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)y.hasOwnProperty(g)&&(p[g]=y[g])},d(h,f)};return function(h,f){d(h,f);function p(){this.constructor=h}h.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})(),e=Qi&&Qi.__assign||function(){return e=Object.assign||function(d){for(var h,f=1,p=arguments.length;f<p;f++){h=arguments[f];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(d[y]=h[y])}return d},e.apply(this,arguments)},t=Qi&&Qi.__spreadArrays||function(){for(var d=0,h=0,f=arguments.length;h<f;h++)d+=arguments[h].length;for(var p=Array(d),y=0,h=0;h<f;h++)for(var g=arguments[h],m=0,v=g.length;m<v;m++,y++)p[y]=g[m];return p},r=Qi&&Qi.__importDefault||function(d){return d&&d.__esModule?d:{default:d}},i=r(by()),a=r(eR()),s=r(cF()),o=r(nde()),c=(function(d){n(h,d);function h(f){var p=d.call(this,f)||this;p.dirtyProps=["modules","formats","bounds","theme","children"],p.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],p.state={generation:0},p.selection=null,p.onEditorChange=function(g,m,v,x){var b,A,w,S;g==="text-change"?(A=(b=p).onEditorChangeText)===null||A===void 0||A.call(b,p.editor.root.innerHTML,m,x,p.unprivilegedEditor):g==="selection-change"&&((S=(w=p).onEditorChangeSelection)===null||S===void 0||S.call(w,m,x,p.unprivilegedEditor))};var y=p.isControlled()?f.value:f.defaultValue;return p.value=y??"",p}return h.prototype.validateProps=function(f){var p;if(i.default.Children.count(f.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(f.children)){var y=i.default.Children.only(f.children);if(((p=y)===null||p===void 0?void 0:p.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&f.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},h.prototype.shouldComponentUpdate=function(f,p){var y=this,g;if(this.validateProps(f),!this.editor||this.state.generation!==p.generation)return!0;if("value"in f){var m=this.getEditorContents(),v=(g=f.value,g??"");this.isEqualValue(v,m)||this.setEditorContents(this.editor,v)}return f.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,f.readOnly),t(this.cleanProps,this.dirtyProps).some(function(x){return!s.default(f[x],y.props[x])})},h.prototype.shouldComponentRegenerate=function(f){var p=this;return this.dirtyProps.some(function(y){return!s.default(f[y],p.props[y])})},h.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},h.prototype.componentWillUnmount=function(){this.destroyEditor()},h.prototype.componentDidUpdate=function(f,p){var y=this;if(this.editor&&this.shouldComponentRegenerate(f)){var g=this.editor.getContents(),m=this.editor.getSelection();this.regenerationSnapshot={delta:g,selection:m},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==p.generation){var v=this.regenerationSnapshot,g=v.delta,x=v.selection;delete this.regenerationSnapshot,this.instantiateEditor();var b=this.editor;b.setContents(g),u(function(){return y.setEditorSelection(b,x)})}},h.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},h.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},h.prototype.isControlled=function(){return"value"in this.props},h.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},h.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},h.prototype.createEditor=function(f,p){var y=new o.default(f,p);return p.tabIndex!=null&&this.setEditorTabIndex(y,p.tabIndex),this.hookEditor(y),y},h.prototype.hookEditor=function(f){this.unprivilegedEditor=this.makeUnprivilegedEditor(f),f.on("editor-change",this.onEditorChange)},h.prototype.unhookEditor=function(f){f.off("editor-change",this.onEditorChange)},h.prototype.getEditorContents=function(){return this.value},h.prototype.getEditorSelection=function(){return this.selection},h.prototype.isDelta=function(f){return f&&f.ops},h.prototype.isEqualValue=function(f,p){return this.isDelta(f)&&this.isDelta(p)?s.default(f.ops,p.ops):s.default(f,p)},h.prototype.setEditorContents=function(f,p){var y=this;this.value=p;var g=this.getEditorSelection();typeof p=="string"?f.setContents(f.clipboard.convert(p)):f.setContents(p),u(function(){return y.setEditorSelection(f,g)})},h.prototype.setEditorSelection=function(f,p){if(this.selection=p,p){var y=f.getLength();p.index=Math.max(0,Math.min(p.index,y-1)),p.length=Math.max(0,Math.min(p.length,y-1-p.index)),f.setSelection(p)}},h.prototype.setEditorTabIndex=function(f,p){var y,g;!((g=(y=f)===null||y===void 0?void 0:y.scroll)===null||g===void 0)&&g.domNode&&(f.scroll.domNode.tabIndex=p)},h.prototype.setEditorReadOnly=function(f,p){p?f.disable():f.enable()},h.prototype.makeUnprivilegedEditor=function(f){var p=f;return{getHTML:function(){return p.root.innerHTML},getLength:p.getLength.bind(p),getText:p.getText.bind(p),getContents:p.getContents.bind(p),getSelection:p.getSelection.bind(p),getBounds:p.getBounds.bind(p)}},h.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var f=a.default.findDOMNode(this.editingArea);if(!f)throw new Error("Cannot find element for editing area");if(f.nodeType===3)throw new Error("Editing area cannot be a text node");return f},h.prototype.renderEditingArea=function(){var f=this,p=this.props,y=p.children,g=p.preserveWhitespace,m=this.state.generation,v={key:m,ref:function(x){f.editingArea=x}};return i.default.Children.count(y)?i.default.cloneElement(i.default.Children.only(y),v):g?i.default.createElement("pre",e({},v)):i.default.createElement("div",e({},v))},h.prototype.render=function(){var f;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(f=this.props.className,f??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},h.prototype.onEditorChangeText=function(f,p,y,g){var m,v;if(this.editor){var x=this.isDelta(this.value)?g.getContents():g.getHTML();x!==this.getEditorContents()&&(this.lastDeltaChangeSet=p,this.value=x,(v=(m=this.props).onChange)===null||v===void 0||v.call(m,f,p,y,g))}},h.prototype.onEditorChangeSelection=function(f,p,y){var g,m,v,x,b,A;if(this.editor){var w=this.getEditorSelection(),S=!w&&f,E=w&&!f;s.default(f,w)||(this.selection=f,(m=(g=this.props).onChangeSelection)===null||m===void 0||m.call(g,f,p,y),S?(x=(v=this.props).onFocus)===null||x===void 0||x.call(v,f,p,y):E&&((A=(b=this.props).onBlur)===null||A===void 0||A.call(b,w,p,y)))}},h.prototype.focus=function(){this.editor&&this.editor.focus()},h.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},h.displayName="React Quill",h.Quill=o.default,h.defaultProps={theme:"snow",modules:{},readOnly:!1},h})(i.default.Component);function u(d){Promise.resolve().then(d)}return Qi=c,Qi}var ide=rde();const ep=It(ide);var Ti={},Y_="1.13.7",wO=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},d0=Array.prototype,K_=Object.prototype,AO=typeof Symbol<"u"?Symbol.prototype:null,ade=d0.push,bf=d0.slice,Hh=K_.toString,sde=K_.hasOwnProperty,Y9=typeof ArrayBuffer<"u",ode=typeof DataView<"u",lde=Array.isArray,SO=Object.keys,EO=Object.create,_O=Y9&&ArrayBuffer.isView,cde=isNaN,ude=isFinite,K9=!{toString:null}.propertyIsEnumerable("toString"),DO=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],dde=Math.pow(2,53)-1;function zr(n,e){return e=e==null?n.length-1:+e,function(){for(var t=Math.max(arguments.length-e,0),r=Array(t),i=0;i<t;i++)r[i]=arguments[i+e];switch(e){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r);case 2:return n.call(this,arguments[0],arguments[1],r)}var a=Array(e+1);for(i=0;i<e;i++)a[i]=arguments[i];return a[e]=r,n.apply(this,a)}}function xo(n){var e=typeof n;return e==="function"||e==="object"&&!!n}function X9(n){return n===null}function X_(n){return n===void 0}function J_(n){return n===!0||n===!1||Hh.call(n)==="[object Boolean]"}function J9(n){return!!(n&&n.nodeType===1)}function Tr(n){var e="[object "+n+"]";return function(t){return Hh.call(t)===e}}const h0=Tr("String"),Z_=Tr("Number"),Z9=Tr("Date"),Q9=Tr("RegExp"),eL=Tr("Error"),Q_=Tr("Symbol"),eD=Tr("ArrayBuffer");var tL=Tr("Function"),hde=wO.document&&wO.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof hde!="function"&&(tL=function(n){return typeof n=="function"||!1});const Dr=tL,nL=Tr("Object");var rL=ode&&(!/\[native code\]/.test(String(DataView))||nL(new DataView(new ArrayBuffer(8)))),tD=typeof Map<"u"&&nL(new Map),fde=Tr("DataView");function pde(n){return n!=null&&Dr(n.getInt8)&&eD(n.buffer)}const Vh=rL?pde:fde,bo=lde||Tr("Array");function wo(n,e){return n!=null&&sde.call(n,e)}var LS=Tr("Arguments");(function(){LS(arguments)||(LS=function(n){return wo(n,"callee")})})();const f0=LS;function iL(n){return!Q_(n)&&ude(n)&&!isNaN(parseFloat(n))}function nD(n){return Z_(n)&&cde(n)}function rD(n){return function(){return n}}function aL(n){return function(e){var t=n(e);return typeof t=="number"&&t>=0&&t<=dde}}function sL(n){return function(e){return e?.[n]}}const Ag=sL("byteLength"),mde=aL(Ag);var gde=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function yde(n){return _O?_O(n)&&!Vh(n):mde(n)&&gde.test(Hh.call(n))}const iD=Y9?yde:rD(!1),ni=sL("length");function vde(n){for(var e={},t=n.length,r=0;r<t;++r)e[n[r]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,n.push(i)}}}function oL(n,e){e=vde(e);var t=DO.length,r=n.constructor,i=Dr(r)&&r.prototype||K_,a="constructor";for(wo(n,a)&&!e.contains(a)&&e.push(a);t--;)a=DO[t],a in n&&n[a]!==i[a]&&!e.contains(a)&&e.push(a)}function Kn(n){if(!xo(n))return[];if(SO)return SO(n);var e=[];for(var t in n)wo(n,t)&&e.push(t);return K9&&oL(n,e),e}function lL(n){if(n==null)return!0;var e=ni(n);return typeof e=="number"&&(bo(n)||h0(n)||f0(n))?e===0:ni(Kn(n))===0}function aD(n,e){var t=Kn(e),r=t.length;if(n==null)return!r;for(var i=Object(n),a=0;a<r;a++){var s=t[a];if(e[s]!==i[s]||!(s in i))return!1}return!0}function Wt(n){if(n instanceof Wt)return n;if(!(this instanceof Wt))return new Wt(n);this._wrapped=n}Wt.VERSION=Y_;Wt.prototype.value=function(){return this._wrapped};Wt.prototype.valueOf=Wt.prototype.toJSON=Wt.prototype.value;Wt.prototype.toString=function(){return String(this._wrapped)};function jO(n){return new Uint8Array(n.buffer||n,n.byteOffset||0,Ag(n))}var TO="[object DataView]";function US(n,e,t,r){if(n===e)return n!==0||1/n===1/e;if(n==null||e==null)return!1;if(n!==n)return e!==e;var i=typeof n;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:cL(n,e,t,r)}function cL(n,e,t,r){n instanceof Wt&&(n=n._wrapped),e instanceof Wt&&(e=e._wrapped);var i=Hh.call(n);if(i!==Hh.call(e))return!1;if(rL&&i=="[object Object]"&&Vh(n)){if(!Vh(e))return!1;i=TO}switch(i){case"[object RegExp]":case"[object String]":return""+n==""+e;case"[object Number]":return+n!=+n?+e!=+e:+n==0?1/+n===1/e:+n==+e;case"[object Date]":case"[object Boolean]":return+n==+e;case"[object Symbol]":return AO.valueOf.call(n)===AO.valueOf.call(e);case"[object ArrayBuffer]":case TO:return cL(jO(n),jO(e),t,r)}var a=i==="[object Array]";if(!a&&iD(n)){var s=Ag(n);if(s!==Ag(e))return!1;if(n.buffer===e.buffer&&n.byteOffset===e.byteOffset)return!0;a=!0}if(!a){if(typeof n!="object"||typeof e!="object")return!1;var o=n.constructor,c=e.constructor;if(o!==c&&!(Dr(o)&&o instanceof o&&Dr(c)&&c instanceof c)&&"constructor"in n&&"constructor"in e)return!1}t=t||[],r=r||[];for(var u=t.length;u--;)if(t[u]===n)return r[u]===e;if(t.push(n),r.push(e),a){if(u=n.length,u!==e.length)return!1;for(;u--;)if(!US(n[u],e[u],t,r))return!1}else{var d=Kn(n),h;if(u=d.length,Kn(e).length!==u)return!1;for(;u--;)if(h=d[u],!(wo(e,h)&&US(n[h],e[h],t,r)))return!1}return t.pop(),r.pop(),!0}function uL(n,e){return US(n,e)}function Mu(n){if(!xo(n))return[];var e=[];for(var t in n)e.push(t);return K9&&oL(n,e),e}function sD(n){var e=ni(n);return function(t){if(t==null)return!1;var r=Mu(t);if(ni(r))return!1;for(var i=0;i<e;i++)if(!Dr(t[n[i]]))return!1;return n!==fL||!Dr(t[oD])}}var oD="forEach",dL="has",lD=["clear","delete"],hL=["get",dL,"set"],xde=lD.concat(oD,hL),fL=lD.concat(hL),bde=["add"].concat(lD,oD,dL);const pL=tD?sD(xde):Tr("Map"),mL=tD?sD(fL):Tr("WeakMap"),gL=tD?sD(bde):Tr("Set"),yL=Tr("WeakSet");function Rl(n){for(var e=Kn(n),t=e.length,r=Array(t),i=0;i<t;i++)r[i]=n[e[i]];return r}function vL(n){for(var e=Kn(n),t=e.length,r=Array(t),i=0;i<t;i++)r[i]=[e[i],n[e[i]]];return r}function cD(n){for(var e={},t=Kn(n),r=0,i=t.length;r<i;r++)e[n[t[r]]]=t[r];return e}function Gh(n){var e=[];for(var t in n)Dr(n[t])&&e.push(t);return e.sort()}function uD(n,e){return function(t){var r=arguments.length;if(e&&(t=Object(t)),r<2||t==null)return t;for(var i=1;i<r;i++)for(var a=arguments[i],s=n(a),o=s.length,c=0;c<o;c++){var u=s[c];(!e||t[u]===void 0)&&(t[u]=a[u])}return t}}const dD=uD(Mu),gu=uD(Kn),hD=uD(Mu,!0);function wde(){return function(){}}function xL(n){if(!xo(n))return{};if(EO)return EO(n);var e=wde();e.prototype=n;var t=new e;return e.prototype=null,t}function bL(n,e){var t=xL(n);return e&&gu(t,e),t}function wL(n){return xo(n)?bo(n)?n.slice():dD({},n):n}function AL(n,e){return e(n),n}function fD(n){return bo(n)?n:[n]}Wt.toPath=fD;function wf(n){return Wt.toPath(n)}function pD(n,e){for(var t=e.length,r=0;r<t;r++){if(n==null)return;n=n[e[r]]}return t?n:void 0}function mD(n,e,t){var r=pD(n,wf(e));return X_(r)?t:r}function SL(n,e){e=wf(e);for(var t=e.length,r=0;r<t;r++){var i=e[r];if(!wo(n,i))return!1;n=n[i]}return!!t}function p0(n){return n}function xl(n){return n=gu({},n),function(e){return aD(e,n)}}function m0(n){return n=wf(n),function(e){return pD(e,n)}}function Af(n,e,t){if(e===void 0)return n;switch(t??3){case 1:return function(r){return n.call(e,r)};case 3:return function(r,i,a){return n.call(e,r,i,a)};case 4:return function(r,i,a,s){return n.call(e,r,i,a,s)}}return function(){return n.apply(e,arguments)}}function EL(n,e,t){return n==null?p0:Dr(n)?Af(n,e,t):xo(n)&&!bo(n)?xl(n):m0(n)}function g0(n,e){return EL(n,e,1/0)}Wt.iteratee=g0;function ii(n,e,t){return Wt.iteratee!==g0?Wt.iteratee(n,e):EL(n,e,t)}function _L(n,e,t){e=ii(e,t);for(var r=Kn(n),i=r.length,a={},s=0;s<i;s++){var o=r[s];a[o]=e(n[o],o,n)}return a}function gD(){}function DL(n){return n==null?gD:function(e){return mD(n,e)}}function jL(n,e,t){var r=Array(Math.max(0,n));e=Af(e,t,1);for(var i=0;i<n;i++)r[i]=e(i);return r}function Sg(n,e){return e==null&&(e=n,n=0),n+Math.floor(Math.random()*(e-n+1))}const yu=Date.now||function(){return new Date().getTime()};function TL(n){var e=function(a){return n[a]},t="(?:"+Kn(n).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(a){return a=a==null?"":""+a,r.test(a)?a.replace(i,e):a}}const CL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},NL=TL(CL),Ade=cD(CL),kL=TL(Ade),OL=Wt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A2=/(.)^/,Sde={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Ede=/\\|'|\r|\n|\u2028|\u2029/g;function _de(n){return"\\"+Sde[n]}var Dde=/^\s*(\w|\$)+\s*$/;function PL(n,e,t){!e&&t&&(e=t),e=hD({},e,Wt.templateSettings);var r=RegExp([(e.escape||A2).source,(e.interpolate||A2).source,(e.evaluate||A2).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(r,function(u,d,h,f,p){return a+=n.slice(i,p).replace(Ede,_de),i=p+u.length,d?a+=`'+
((__t=(`+d+`))==null?'':_.escape(__t))+
'`:h?a+=`'+
((__t=(`+h+`))==null?'':__t)+
'`:f&&(a+=`';
`+f+`
__p+='`),u}),a+=`';
`;var s=e.variable;if(s){if(!Dde.test(s))throw new Error("variable is not a bare identifier: "+s)}else a=`with(obj||{}){
`+a+`}
`,s="obj";a=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+a+`return __p;
`;var o;try{o=new Function(s,"_",a)}catch(u){throw u.source=a,u}var c=function(u){return o.call(this,u,Wt)};return c.source="function("+s+`){
`+a+"}",c}function IL(n,e,t){e=wf(e);var r=e.length;if(!r)return Dr(t)?t.call(n):t;for(var i=0;i<r;i++){var a=n?.[e[i]];a===void 0&&(a=t,i=r),n=Dr(a)?a.call(n):a}return n}var jde=0;function RL(n){var e=++jde+"";return n?n+e:e}function ML(n){var e=Wt(n);return e._chain=!0,e}function FL(n,e,t,r,i){if(!(r instanceof e))return n.apply(t,i);var a=xL(n.prototype),s=n.apply(a,i);return xo(s)?s:a}var Ml=zr(function(n,e){var t=Ml.placeholder,r=function(){for(var i=0,a=e.length,s=Array(a),o=0;o<a;o++)s[o]=e[o]===t?arguments[i++]:e[o];for(;i<arguments.length;)s.push(arguments[i++]);return FL(n,r,this,this,s)};return r});Ml.placeholder=Wt;const yD=zr(function(n,e,t){if(!Dr(n))throw new TypeError("Bind must be called on a function");var r=zr(function(i){return FL(n,r,e,this,t.concat(i))});return r}),Ai=aL(ni);function Fl(n,e,t,r){if(r=r||[],!e&&e!==0)e=1/0;else if(e<=0)return r.concat(n);for(var i=r.length,a=0,s=ni(n);a<s;a++){var o=n[a];if(Ai(o)&&(bo(o)||f0(o)))if(e>1)Fl(o,e-1,t,r),i=r.length;else for(var c=0,u=o.length;c<u;)r[i++]=o[c++];else t||(r[i++]=o)}return r}const LL=zr(function(n,e){e=Fl(e,!1,!1);var t=e.length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var r=e[t];n[r]=yD(n[r],n)}return n});function UL(n,e){var t=function(r){var i=t.cache,a=""+(e?e.apply(this,arguments):r);return wo(i,a)||(i[a]=n.apply(this,arguments)),i[a]};return t.cache={},t}const vD=zr(function(n,e,t){return setTimeout(function(){return n.apply(null,t)},e)}),BL=Ml(vD,Wt,1);function $L(n,e,t){var r,i,a,s,o=0;t||(t={});var c=function(){o=t.leading===!1?0:yu(),r=null,s=n.apply(i,a),r||(i=a=null)},u=function(){var d=yu();!o&&t.leading===!1&&(o=d);var h=e-(d-o);return i=this,a=arguments,h<=0||h>e?(r&&(clearTimeout(r),r=null),o=d,s=n.apply(i,a),r||(i=a=null)):!r&&t.trailing!==!1&&(r=setTimeout(c,h)),s};return u.cancel=function(){clearTimeout(r),o=0,r=i=a=null},u}function zL(n,e,t){var r,i,a,s,o,c=function(){var d=yu()-i;e>d?r=setTimeout(c,e-d):(r=null,t||(s=n.apply(o,a)),r||(a=o=null))},u=zr(function(d){return o=this,a=d,i=yu(),r||(r=setTimeout(c,e),t&&(s=n.apply(o,a))),s});return u.cancel=function(){clearTimeout(r),r=a=o=null},u}function qL(n,e){return Ml(e,n)}function y0(n){return function(){return!n.apply(this,arguments)}}function WL(){var n=arguments,e=n.length-1;return function(){for(var t=e,r=n[e].apply(this,arguments);t--;)r=n[t].call(this,r);return r}}function HL(n,e){return function(){if(--n<1)return e.apply(this,arguments)}}function xD(n,e){var t;return function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=null),t}}const VL=Ml(xD,2);function bD(n,e,t){e=ii(e,t);for(var r=Kn(n),i,a=0,s=r.length;a<s;a++)if(i=r[a],e(n[i],i,n))return i}function GL(n){return function(e,t,r){t=ii(t,r);for(var i=ni(e),a=n>0?0:i-1;a>=0&&a<i;a+=n)if(t(e[a],a,e))return a;return-1}}const v0=GL(1),wD=GL(-1);function AD(n,e,t,r){t=ii(t,r,1);for(var i=t(e),a=0,s=ni(n);a<s;){var o=Math.floor((a+s)/2);t(n[o])<i?a=o+1:s=o}return a}function YL(n,e,t){return function(r,i,a){var s=0,o=ni(r);if(typeof a=="number")n>0?s=a>=0?a:Math.max(a+o,s):o=a>=0?Math.min(a+1,o):a+o+1;else if(t&&a&&o)return a=t(r,i),r[a]===i?a:-1;if(i!==i)return a=e(bf.call(r,s,o),nD),a>=0?a+s:-1;for(a=n>0?s:o-1;a>=0&&a<o;a+=n)if(r[a]===i)return a;return-1}}const SD=YL(1,v0,AD),KL=YL(-1,wD);function Yh(n,e,t){var r=Ai(n)?v0:bD,i=r(n,e,t);if(i!==void 0&&i!==-1)return n[i]}function XL(n,e){return Yh(n,xl(e))}function da(n,e,t){e=Af(e,t);var r,i;if(Ai(n))for(r=0,i=n.length;r<i;r++)e(n[r],r,n);else{var a=Kn(n);for(r=0,i=a.length;r<i;r++)e(n[a[r]],a[r],n)}return n}function Es(n,e,t){e=ii(e,t);for(var r=!Ai(n)&&Kn(n),i=(r||n).length,a=Array(i),s=0;s<i;s++){var o=r?r[s]:s;a[s]=e(n[o],o,n)}return a}function JL(n){var e=function(t,r,i,a){var s=!Ai(t)&&Kn(t),o=(s||t).length,c=n>0?0:o-1;for(a||(i=t[s?s[c]:c],c+=n);c>=0&&c<o;c+=n){var u=s?s[c]:c;i=r(i,t[u],u,t)}return i};return function(t,r,i,a){var s=arguments.length>=3;return e(t,Af(r,a,4),i,s)}}const Ec=JL(1),Eg=JL(-1);function ao(n,e,t){var r=[];return e=ii(e,t),da(n,function(i,a,s){e(i,a,s)&&r.push(i)}),r}function ZL(n,e,t){return ao(n,y0(ii(e)),t)}function _g(n,e,t){e=ii(e,t);for(var r=!Ai(n)&&Kn(n),i=(r||n).length,a=0;a<i;a++){var s=r?r[a]:a;if(!e(n[s],s,n))return!1}return!0}function Dg(n,e,t){e=ii(e,t);for(var r=!Ai(n)&&Kn(n),i=(r||n).length,a=0;a<i;a++){var s=r?r[a]:a;if(e(n[s],s,n))return!0}return!1}function qi(n,e,t,r){return Ai(n)||(n=Rl(n)),(typeof t!="number"||r)&&(t=0),SD(n,e,t)>=0}const QL=zr(function(n,e,t){var r,i;return Dr(e)?i=e:(e=wf(e),r=e.slice(0,-1),e=e[e.length-1]),Es(n,function(a){var s=i;if(!s){if(r&&r.length&&(a=pD(a,r)),a==null)return;s=a[e]}return s==null?s:s.apply(a,t)})});function x0(n,e){return Es(n,m0(e))}function e7(n,e){return ao(n,xl(e))}function ED(n,e,t){var r=-1/0,i=-1/0,a,s;if(e==null||typeof e=="number"&&typeof n[0]!="object"&&n!=null){n=Ai(n)?n:Rl(n);for(var o=0,c=n.length;o<c;o++)a=n[o],a!=null&&a>r&&(r=a)}else e=ii(e,t),da(n,function(u,d,h){s=e(u,d,h),(s>i||s===-1/0&&r===-1/0)&&(r=u,i=s)});return r}function t7(n,e,t){var r=1/0,i=1/0,a,s;if(e==null||typeof e=="number"&&typeof n[0]!="object"&&n!=null){n=Ai(n)?n:Rl(n);for(var o=0,c=n.length;o<c;o++)a=n[o],a!=null&&a<r&&(r=a)}else e=ii(e,t),da(n,function(u,d,h){s=e(u,d,h),(s<i||s===1/0&&r===1/0)&&(r=u,i=s)});return r}var Tde=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function _D(n){return n?bo(n)?bf.call(n):h0(n)?n.match(Tde):Ai(n)?Es(n,p0):Rl(n):[]}function DD(n,e,t){if(e==null||t)return Ai(n)||(n=Rl(n)),n[Sg(n.length-1)];var r=_D(n),i=ni(r);e=Math.max(Math.min(e,i),0);for(var a=i-1,s=0;s<e;s++){var o=Sg(s,a),c=r[s];r[s]=r[o],r[o]=c}return r.slice(0,e)}function n7(n){return DD(n,1/0)}function r7(n,e,t){var r=0;return e=ii(e,t),x0(Es(n,function(i,a,s){return{value:i,index:r++,criteria:e(i,a,s)}}).sort(function(i,a){var s=i.criteria,o=a.criteria;if(s!==o){if(s>o||s===void 0)return 1;if(s<o||o===void 0)return-1}return i.index-a.index}),"value")}function b0(n,e){return function(t,r,i){var a=e?[[],[]]:{};return r=ii(r,i),da(t,function(s,o){var c=r(s,o,t);n(a,s,c)}),a}}const i7=b0(function(n,e,t){wo(n,t)?n[t].push(e):n[t]=[e]}),a7=b0(function(n,e,t){n[t]=e}),s7=b0(function(n,e,t){wo(n,t)?n[t]++:n[t]=1}),o7=b0(function(n,e,t){n[t?0:1].push(e)},!0);function l7(n){return n==null?0:Ai(n)?n.length:Kn(n).length}function Cde(n,e,t){return e in t}const jD=zr(function(n,e){var t={},r=e[0];if(n==null)return t;Dr(r)?(e.length>1&&(r=Af(r,e[1])),e=Mu(n)):(r=Cde,e=Fl(e,!1,!1),n=Object(n));for(var i=0,a=e.length;i<a;i++){var s=e[i],o=n[s];r(o,s,n)&&(t[s]=o)}return t}),c7=zr(function(n,e){var t=e[0],r;return Dr(t)?(t=y0(t),e.length>1&&(r=e[1])):(e=Es(Fl(e,!1,!1),String),t=function(i,a){return!qi(e,a)}),jD(n,t,r)});function TD(n,e,t){return bf.call(n,0,Math.max(0,n.length-(e==null||t?1:e)))}function _c(n,e,t){return n==null||n.length<1?e==null||t?void 0:[]:e==null||t?n[0]:TD(n,n.length-e)}function al(n,e,t){return bf.call(n,e==null||t?1:e)}function u7(n,e,t){return n==null||n.length<1?e==null||t?void 0:[]:e==null||t?n[n.length-1]:al(n,Math.max(0,n.length-e))}function d7(n){return ao(n,Boolean)}function h7(n,e){return Fl(n,e,!1)}const CD=zr(function(n,e){return e=Fl(e,!0,!0),ao(n,function(t){return!qi(e,t)})}),f7=zr(function(n,e){return CD(n,e)});function Kh(n,e,t,r){J_(e)||(r=t,t=e,e=!1),t!=null&&(t=ii(t,r));for(var i=[],a=[],s=0,o=ni(n);s<o;s++){var c=n[s],u=t?t(c,s,n):c;e&&!t?((!s||a!==u)&&i.push(c),a=u):t?qi(a,u)||(a.push(u),i.push(c)):qi(i,c)||i.push(c)}return i}const p7=zr(function(n){return Kh(Fl(n,!0,!0))});function m7(n){for(var e=[],t=arguments.length,r=0,i=ni(n);r<i;r++){var a=n[r];if(!qi(e,a)){var s;for(s=1;s<t&&qi(arguments[s],a);s++);s===t&&e.push(a)}}return e}function Xh(n){for(var e=n&&ED(n,ni).length||0,t=Array(e),r=0;r<e;r++)t[r]=x0(n,r);return t}const g7=zr(Xh);function y7(n,e){for(var t={},r=0,i=ni(n);r<i;r++)e?t[n[r]]=e[r]:t[n[r][0]]=n[r][1];return t}function v7(n,e,t){e==null&&(e=n||0,n=0),t||(t=e<n?-1:1);for(var r=Math.max(Math.ceil((e-n)/t),0),i=Array(r),a=0;a<r;a++,n+=t)i[a]=n;return i}function x7(n,e){if(e==null||e<1)return[];for(var t=[],r=0,i=n.length;r<i;)t.push(bf.call(n,r,r+=e));return t}function ND(n,e){return n._chain?Wt(e).chain():e}function kD(n){return da(Gh(n),function(e){var t=Wt[e]=n[e];Wt.prototype[e]=function(){var r=[this._wrapped];return ade.apply(r,arguments),ND(this,t.apply(Wt,r))}}),Wt}da(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var e=d0[n];Wt.prototype[n]=function(){var t=this._wrapped;return t!=null&&(e.apply(t,arguments),(n==="shift"||n==="splice")&&t.length===0&&delete t[0]),ND(this,t)}});da(["concat","join","slice"],function(n){var e=d0[n];Wt.prototype[n]=function(){var t=this._wrapped;return t!=null&&(t=e.apply(t,arguments)),ND(this,t)}});const Nde=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Y_,after:HL,all:_g,allKeys:Mu,any:Dg,assign:gu,before:xD,bind:yD,bindAll:LL,chain:ML,chunk:x7,clone:wL,collect:Es,compact:d7,compose:WL,constant:rD,contains:qi,countBy:s7,create:bL,debounce:zL,default:Wt,defaults:hD,defer:BL,delay:vD,detect:Yh,difference:CD,drop:al,each:da,escape:NL,every:_g,extend:dD,extendOwn:gu,filter:ao,find:Yh,findIndex:v0,findKey:bD,findLastIndex:wD,findWhere:XL,first:_c,flatten:h7,foldl:Ec,foldr:Eg,forEach:da,functions:Gh,get:mD,groupBy:i7,has:SL,head:_c,identity:p0,include:qi,includes:qi,indexBy:a7,indexOf:SD,initial:TD,inject:Ec,intersection:m7,invert:cD,invoke:QL,isArguments:f0,isArray:bo,isArrayBuffer:eD,isBoolean:J_,isDataView:Vh,isDate:Z9,isElement:J9,isEmpty:lL,isEqual:uL,isError:eL,isFinite:iL,isFunction:Dr,isMap:pL,isMatch:aD,isNaN:nD,isNull:X9,isNumber:Z_,isObject:xo,isRegExp:Q9,isSet:gL,isString:h0,isSymbol:Q_,isTypedArray:iD,isUndefined:X_,isWeakMap:mL,isWeakSet:yL,iteratee:g0,keys:Kn,last:u7,lastIndexOf:KL,map:Es,mapObject:_L,matcher:xl,matches:xl,max:ED,memoize:UL,methods:Gh,min:t7,mixin:kD,negate:y0,noop:gD,now:yu,object:y7,omit:c7,once:VL,pairs:vL,partial:Ml,partition:o7,pick:jD,pluck:x0,property:m0,propertyOf:DL,random:Sg,range:v7,reduce:Ec,reduceRight:Eg,reject:ZL,rest:al,restArguments:zr,result:IL,sample:DD,select:ao,shuffle:n7,size:l7,some:Dg,sortBy:r7,sortedIndex:AD,tail:al,take:_c,tap:AL,template:PL,templateSettings:OL,throttle:$L,times:jL,toArray:_D,toPath:fD,transpose:Xh,unescape:kL,union:p7,uniq:Kh,unique:Kh,uniqueId:RL,unzip:Xh,values:Rl,where:e7,without:f7,wrap:qL,zip:g7},Symbol.toStringTag,{value:"Module"}));var BS=kD(Nde);BS._=BS;const kde=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Y_,after:HL,all:_g,allKeys:Mu,any:Dg,assign:gu,before:xD,bind:yD,bindAll:LL,chain:ML,chunk:x7,clone:wL,collect:Es,compact:d7,compose:WL,constant:rD,contains:qi,countBy:s7,create:bL,debounce:zL,default:BS,defaults:hD,defer:BL,delay:vD,detect:Yh,difference:CD,drop:al,each:da,escape:NL,every:_g,extend:dD,extendOwn:gu,filter:ao,find:Yh,findIndex:v0,findKey:bD,findLastIndex:wD,findWhere:XL,first:_c,flatten:h7,foldl:Ec,foldr:Eg,forEach:da,functions:Gh,get:mD,groupBy:i7,has:SL,head:_c,identity:p0,include:qi,includes:qi,indexBy:a7,indexOf:SD,initial:TD,inject:Ec,intersection:m7,invert:cD,invoke:QL,isArguments:f0,isArray:bo,isArrayBuffer:eD,isBoolean:J_,isDataView:Vh,isDate:Z9,isElement:J9,isEmpty:lL,isEqual:uL,isError:eL,isFinite:iL,isFunction:Dr,isMap:pL,isMatch:aD,isNaN:nD,isNull:X9,isNumber:Z_,isObject:xo,isRegExp:Q9,isSet:gL,isString:h0,isSymbol:Q_,isTypedArray:iD,isUndefined:X_,isWeakMap:mL,isWeakSet:yL,iteratee:g0,keys:Kn,last:u7,lastIndexOf:KL,map:Es,mapObject:_L,matcher:xl,matches:xl,max:ED,memoize:UL,methods:Gh,min:t7,mixin:kD,negate:y0,noop:gD,now:yu,object:y7,omit:c7,once:VL,pairs:vL,partial:Ml,partition:o7,pick:jD,pluck:x0,property:m0,propertyOf:DL,random:Sg,range:v7,reduce:Ec,reduceRight:Eg,reject:ZL,rest:al,restArguments:zr,result:IL,sample:DD,select:ao,shuffle:n7,size:l7,some:Dg,sortBy:r7,sortedIndex:AD,tail:al,take:_c,tap:AL,template:PL,templateSettings:OL,throttle:$L,times:jL,toArray:_D,toPath:fD,transpose:Xh,unescape:kL,union:p7,uniq:Kh,unique:Kh,uniqueId:RL,unzip:Xh,values:Rl,where:e7,without:f7,wrap:qL,zip:g7},Symbol.toStringTag,{value:"Module"})),On=nz(kde);var tp={},Ci={},S2={exports:{}},np={exports:{}},CO;function Fu(){if(CO)return np.exports;CO=1;var n=(function(){return this===void 0})();if(n)np.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(d,h){var f=Object.getOwnPropertyDescriptor(d,h);return!!(!f||f.writable||f.set)}};else{var e={}.hasOwnProperty,t={}.toString,r={}.constructor.prototype,i=function(d){var h=[];for(var f in d)e.call(d,f)&&h.push(f);return h},a=function(d,h){return{value:d[h]}},s=function(d,h,f){return d[h]=f.value,d},o=function(d){return d},c=function(d){try{return Object(d).constructor.prototype}catch{return r}},u=function(d){try{return t.call(d)==="[object Array]"}catch{return!1}};np.exports={isArray:u,keys:i,names:i,defineProperty:s,getDescriptor:a,freeze:o,getPrototypeOf:c,isES5:n,propertyIsWritable:function(){return!0}}}return np.exports}var ud,NO;function sn(){if(NO)return ud;NO=1;var n={},e=Fu(),t=typeof navigator>"u",r={e:{}},i,a=typeof self<"u"?self:typeof window<"u"?window:typeof Li<"u"?Li:ud!==void 0?ud:null;function s(){try{var U=i;return i=null,U.apply(this,arguments)}catch(G){return r.e=G,r}}function o(U){return i=U,s}var c=function(U,G){var H={}.hasOwnProperty;function V(){this.constructor=U,this.constructor$=G;for(var K in G.prototype)H.call(G.prototype,K)&&K.charAt(K.length-1)!=="$"&&(this[K+"$"]=G.prototype[K])}return V.prototype=G.prototype,U.prototype=new V,U.prototype};function u(U){return U==null||U===!0||U===!1||typeof U=="string"||typeof U=="number"}function d(U){return typeof U=="function"||typeof U=="object"&&U!==null}function h(U){return u(U)?new Error(E(U)):U}function f(U,G){var H=U.length,V=new Array(H+1),K;for(K=0;K<H;++K)V[K]=U[K];return V[K]=G,V}function p(U,G,H){if(e.isES5){var V=Object.getOwnPropertyDescriptor(U,G);if(V!=null)return V.get==null&&V.set==null?V.value:H}else return{}.hasOwnProperty.call(U,G)?U[G]:void 0}function y(U,G,H){if(u(U))return U;var V={value:H,configurable:!0,enumerable:!1,writable:!0};return e.defineProperty(U,G,V),U}function g(U){throw U}var m=(function(){var U=[Array.prototype,Object.prototype,Function.prototype],G=function(K){for(var ae=0;ae<U.length;++ae)if(U[ae]===K)return!0;return!1};if(e.isES5){var H=Object.getOwnPropertyNames;return function(K){for(var ae=[],te=Object.create(null);K!=null&&!G(K);){var de;try{de=H(K)}catch{return ae}for(var xe=0;xe<de.length;++xe){var ve=de[xe];if(!te[ve]){te[ve]=!0;var Te=Object.getOwnPropertyDescriptor(K,ve);Te!=null&&Te.get==null&&Te.set==null&&ae.push(ve)}}K=e.getPrototypeOf(K)}return ae}}else{var V={}.hasOwnProperty;return function(K){if(G(K))return[];var ae=[];e:for(var te in K)if(V.call(K,te))ae.push(te);else{for(var de=0;de<U.length;++de)if(V.call(U[de],te))continue e;ae.push(te)}return ae}}})(),v=/this\s*\.\s*\S+\s*=/;function x(U){try{if(typeof U=="function"){var G=e.names(U.prototype),H=e.isES5&&G.length>1,V=G.length>0&&!(G.length===1&&G[0]==="constructor"),K=v.test(U+"")&&e.names(U).length>0;if(H||V||K)return!0}return!1}catch{return!1}}function b(U){return U}var A=/^[a-z$_][a-z$_0-9]*$/i;function w(U){return A.test(U)}function S(U,G,H){for(var V=new Array(U),K=0;K<U;++K)V[K]=G+K+H;return V}function E(U){try{return U+""}catch{return"[no string representation]"}}function _(U){return U!==null&&typeof U=="object"&&typeof U.message=="string"&&typeof U.name=="string"}function D(U){try{y(U,"isOperational",!0)}catch{}}function C(U){return U==null?!1:U instanceof Error.__BluebirdErrorTypes__.OperationalError||U.isOperational===!0}function k(U){return _(U)&&e.propertyIsWritable(U,"stack")}var T=(function(){return"stack"in new Error?function(U){return k(U)?U:new Error(E(U))}:function(U){if(k(U))return U;try{throw new Error(E(U))}catch(G){return G}}})();function N(U){return{}.toString.call(U)}function j(U,G,H){for(var V=e.names(U),K=0;K<V.length;++K){var ae=V[K];if(H(ae))try{e.defineProperty(G,ae,e.getDescriptor(U,ae))}catch{}}}var R=function(U){return e.isArray(U)?U:null};if(typeof Symbol<"u"&&Symbol.iterator){var P=typeof Array.from=="function"?function(U){return Array.from(U)}:function(U){for(var G=[],H=U[Symbol.iterator](),V;!(V=H.next()).done;)G.push(V.value);return G};R=function(U){return e.isArray(U)?U:U!=null&&typeof U[Symbol.iterator]=="function"?P(U):null}}var F=typeof process<"u"&&N(process).toLowerCase()==="[object process]",q=typeof process<"u"&&typeof n<"u";function $(U){return q?n[U]:void 0}function B(){if(typeof Promise=="function")try{var U=new Promise(function(){});if({}.toString.call(U)==="[object Promise]")return Promise}catch{}}function I(U,G){return U.bind(G)}var L={isClass:x,isIdentifier:w,inheritedDataKeys:m,getDataPropertyOrDefault:p,thrower:g,isArray:e.isArray,asArray:R,notEnumerableProp:y,isPrimitive:u,isObject:d,isError:_,canEvaluate:t,errorObj:r,tryCatch:o,inherits:c,withAppended:f,maybeWrapAsError:h,toFastProperties:b,filledRange:S,toString:E,canAttachTrace:k,ensureErrorObject:T,originatesFromRejection:C,markAsOriginatingFromRejection:D,classString:N,copyDescriptors:j,hasDevTools:typeof chrome<"u"&&chrome&&typeof chrome.loadTimes=="function",isNode:F,hasEnvVariables:q,env:$,global:a,getNativePromise:B,domainBind:I};L.isRecentNode=L.isNode&&(function(){var U=process.versions.node.split(".").map(Number);return U[0]===0&&U[1]>10||U[0]>0})(),L.isNode&&L.toFastProperties(process);try{throw new Error}catch(U){L.lastLineError=U}return ud=L,ud}var rp={exports:{}},E2,kO;function Ode(){if(kO)return E2;kO=1;var n=sn(),e,t=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},r=n.getNativePromise();if(n.isNode&&typeof MutationObserver>"u"){var i=Li.setImmediate,a=process.nextTick;e=n.isRecentNode?function(o){i.call(Li,o)}:function(o){a.call(process,o)}}else if(typeof r=="function"&&typeof r.resolve=="function"){var s=r.resolve();e=function(o){s.then(o)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))?e=(function(){var o=document.createElement("div"),c={attributes:!0},u=!1,d=document.createElement("div"),h=new MutationObserver(function(){o.classList.toggle("foo"),u=!1});h.observe(d,c);var f=function(){u||(u=!0,d.classList.toggle("foo"))};return function(y){var g=new MutationObserver(function(){g.disconnect(),y()});g.observe(o,c),f()}})():typeof setImmediate<"u"?e=function(o){setImmediate(o)}:typeof setTimeout<"u"?e=function(o){setTimeout(o,0)}:e=t;return E2=e,E2}var _2,OO;function Pde(){if(OO)return _2;OO=1;function n(t,r,i,a,s){for(var o=0;o<s;++o)i[o+a]=t[o+r],t[o+r]=void 0}function e(t){this._capacity=t,this._length=0,this._front=0}return e.prototype._willBeOverCapacity=function(t){return this._capacity<t},e.prototype._pushOne=function(t){var r=this.length();this._checkCapacity(r+1);var i=this._front+r&this._capacity-1;this[i]=t,this._length=r+1},e.prototype.push=function(t,r,i){var a=this.length()+3;if(this._willBeOverCapacity(a)){this._pushOne(t),this._pushOne(r),this._pushOne(i);return}var s=this._front+a-3;this._checkCapacity(a);var o=this._capacity-1;this[s+0&o]=t,this[s+1&o]=r,this[s+2&o]=i,this._length=a},e.prototype.shift=function(){var t=this._front,r=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,r},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(t){var r=this._capacity;this._capacity=t;var i=this._front,a=this._length,s=i+a&r-1;n(this,0,this,r,s)},_2=e,_2}var PO;function Ide(){if(PO)return rp.exports;PO=1;var n;try{throw new Error}catch(c){n=c}var e=Ode(),t=Pde(),r=sn();function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new t(16),this._normalQueue=new t(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var c=this;this.drainQueues=function(){c._drainQueues()},this._schedule=e}i.prototype.setScheduler=function(c){var u=this._schedule;return this._schedule=c,this._customScheduler=!0,u},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){r.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(c,u){u?(process.stderr.write("Fatal "+(c instanceof Error?c.stack:c)+`
`),process.exit(2)):this.throwLater(c)},i.prototype.throwLater=function(c,u){if(arguments.length===1&&(u=c,c=function(){throw u}),typeof setTimeout<"u")setTimeout(function(){c(u)},0);else try{this._schedule(function(){c(u)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function a(c,u,d){this._lateQueue.push(c,u,d),this._queueTick()}function s(c,u,d){this._normalQueue.push(c,u,d),this._queueTick()}function o(c){this._normalQueue._pushOne(c),this._queueTick()}return r.hasDevTools?(i.prototype.invokeLater=function(c,u,d){this._trampolineEnabled?a.call(this,c,u,d):this._schedule(function(){setTimeout(function(){c.call(u,d)},100)})},i.prototype.invoke=function(c,u,d){this._trampolineEnabled?s.call(this,c,u,d):this._schedule(function(){c.call(u,d)})},i.prototype.settlePromises=function(c){this._trampolineEnabled?o.call(this,c):this._schedule(function(){c._settlePromises()})}):(i.prototype.invokeLater=a,i.prototype.invoke=s,i.prototype.settlePromises=o),i.prototype._drainQueue=function(c){for(;c.length()>0;){var u=c.shift();if(typeof u!="function"){u._settlePromises();continue}var d=c.shift(),h=c.shift();u.call(d,h)}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},rp.exports=i,rp.exports.firstLineError=n,rp.exports}var D2,IO;function so(){if(IO)return D2;IO=1;var n=Fu(),e=n.freeze,t=sn(),r=t.inherits,i=t.notEnumerableProp;function a(v,x){function b(A){if(!(this instanceof b))return new b(A);i(this,"message",typeof A=="string"?A:x),i(this,"name",v),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return r(b,Error),b}var s,o,c=a("Warning","warning"),u=a("CancellationError","cancellation error"),d=a("TimeoutError","timeout error"),h=a("AggregateError","aggregate error");try{s=TypeError,o=RangeError}catch{s=a("TypeError","type error"),o=a("RangeError","range error")}for(var f="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),p=0;p<f.length;++p)typeof Array.prototype[f[p]]=="function"&&(h.prototype[f[p]]=Array.prototype[f[p]]);n.defineProperty(h.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),h.prototype.isOperational=!0;var y=0;h.prototype.toString=function(){var v=Array(y*4+1).join(" "),x=`
`+v+`AggregateError of:
`;y++,v=Array(y*4+1).join(" ");for(var b=0;b<this.length;++b){for(var A=this[b]===this?"[Circular AggregateError]":this[b]+"",w=A.split(`
`),S=0;S<w.length;++S)w[S]=v+w[S];A=w.join(`
`),x+=A+`
`}return y--,x};function g(v){if(!(this instanceof g))return new g(v);i(this,"name","OperationalError"),i(this,"message",v),this.cause=v,this.isOperational=!0,v instanceof Error?(i(this,"message",v.message),i(this,"stack",v.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}r(g,Error);var m=Error.__BluebirdErrorTypes__;return m||(m=e({CancellationError:u,TimeoutError:d,OperationalError:g,RejectionError:g,AggregateError:h}),n.defineProperty(Error,"__BluebirdErrorTypes__",{value:m,writable:!1,enumerable:!1,configurable:!1})),D2={Error,TypeError:s,RangeError:o,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:c},D2}var j2,RO;function Rde(){return RO||(RO=1,j2=function(n,e){var t=sn(),r=t.errorObj,i=t.isObject;function a(h,f){if(i(h)){if(h instanceof n)return h;var p=o(h);if(p===r){f&&f._pushContext();var y=n.reject(p.e);return f&&f._popContext(),y}else if(typeof p=="function"){if(u(h)){var y=new n(e);return h._then(y._fulfill,y._reject,void 0,y,null),y}return d(h,p,f)}}return h}function s(h){return h.then}function o(h){try{return s(h)}catch(f){return r.e=f,r}}var c={}.hasOwnProperty;function u(h){try{return c.call(h,"_promise0")}catch{return!1}}function d(h,f,p){var y=new n(e),g=y;p&&p._pushContext(),y._captureStackTrace(),p&&p._popContext();var m=!0,v=t.tryCatch(f).call(h,x,b);m=!1,y&&v===r&&(y._rejectCallback(v.e,!0,!0),y=null);function x(A){y&&(y._resolveCallback(A),y=null)}function b(A){y&&(y._rejectCallback(A,m,!0),y=null)}return g}return a}),j2}var T2,MO;function Mde(){return MO||(MO=1,T2=function(n,e,t,r,i){var a=sn();a.isArray;function s(c){switch(c){case-2:return[];case-3:return{}}}function o(c){var u=this._promise=new n(e);c instanceof n&&u._propagateFrom(c,3),u._setOnCancel(this),this._values=c,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.inherits(o,i),o.prototype.length=function(){return this._length},o.prototype.promise=function(){return this._promise},o.prototype._init=function c(u,d){var h=t(this._values,this._promise);if(h instanceof n){h=h._target();var f=h._bitField;if(this._values=h,(f&50397184)===0)return this._promise._setAsyncGuaranteed(),h._then(c,this._reject,void 0,this,d);if((f&33554432)!==0)h=h._value();else return(f&16777216)!==0?this._reject(h._reason()):this._cancel()}if(h=a.asArray(h),h===null){var p=r("expecting an array or an iterable object but got "+a.classString(h)).reason();this._promise._rejectCallback(p,!1);return}if(h.length===0){d===-5?this._resolveEmptyArray():this._resolve(s(d));return}this._iterate(h)},o.prototype._iterate=function(c){var u=this.getActualLength(c.length);this._length=u,this._values=this.shouldCopyValues()?new Array(u):this._values;for(var d=this._promise,h=!1,f=null,p=0;p<u;++p){var y=t(c[p],d);y instanceof n?(y=y._target(),f=y._bitField):f=null,h?f!==null&&y.suppressUnhandledRejections():f!==null?(f&50397184)===0?(y._proxy(this,p),this._values[p]=y):(f&33554432)!==0?h=this._promiseFulfilled(y._value(),p):(f&16777216)!==0?h=this._promiseRejected(y._reason(),p):h=this._promiseCancelled(p):h=this._promiseFulfilled(y,p)}h||d._setAsyncGuaranteed()},o.prototype._isResolved=function(){return this._values===null},o.prototype._resolve=function(c){this._values=null,this._promise._fulfill(c)},o.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},o.prototype._reject=function(c){this._values=null,this._promise._rejectCallback(c,!1)},o.prototype._promiseFulfilled=function(c,u){this._values[u]=c;var d=++this._totalResolved;return d>=this._length?(this._resolve(this._values),!0):!1},o.prototype._promiseCancelled=function(){return this._cancel(),!0},o.prototype._promiseRejected=function(c){return this._totalResolved++,this._reject(c),!0},o.prototype._resultCancelled=function(){if(!this._isResolved()){var c=this._values;if(this._cancel(),c instanceof n)c.cancel();else for(var u=0;u<c.length;++u)c[u]instanceof n&&c[u].cancel()}},o.prototype.shouldCopyValues=function(){return!0},o.prototype.getActualLength=function(c){return c},o}),T2}var C2,FO;function Fde(){return FO||(FO=1,C2=function(n){var e=!1,t=[];n.prototype._promiseCreated=function(){},n.prototype._pushContext=function(){},n.prototype._popContext=function(){return null},n._peekContext=n.prototype._peekContext=function(){};function r(){this._trace=new r.CapturedTrace(a())}r.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,t.push(this._trace))},r.prototype._popContext=function(){if(this._trace!==void 0){var s=t.pop(),o=s._promiseCreated;return s._promiseCreated=null,o}return null};function i(){if(e)return new r}function a(){var s=t.length-1;if(s>=0)return t[s]}return r.CapturedTrace=null,r.create=i,r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var s=n.prototype._pushContext,o=n.prototype._popContext,c=n._peekContext,u=n.prototype._peekContext,d=n.prototype._promiseCreated;r.deactivateLongStackTraces=function(){n.prototype._pushContext=s,n.prototype._popContext=o,n._peekContext=c,n.prototype._peekContext=u,n.prototype._promiseCreated=d,e=!1},e=!0,n.prototype._pushContext=r.prototype._pushContext,n.prototype._popContext=r.prototype._popContext,n._peekContext=n.prototype._peekContext=a,n.prototype._promiseCreated=function(){var h=this._peekContext();h&&h._promiseCreated==null&&(h._promiseCreated=this)}},r}),C2}var N2,LO;function Lde(){return LO||(LO=1,N2=function(n,e){var t=n._getDomain,r=n._async,i=so().Warning,a=sn(),s=a.canAttachTrace,o,c,u=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,h=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,f=null,p=null,y=!1,g,m=!!(a.env("BLUEBIRD_DEBUG")!=0&&(a.env("BLUEBIRD_DEBUG")||a.env("NODE_ENV")==="development")),v=!!(a.env("BLUEBIRD_WARNINGS")!=0&&(m||a.env("BLUEBIRD_WARNINGS"))),x=!!(a.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(m||a.env("BLUEBIRD_LONG_STACK_TRACES"))),b=a.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(v||!!a.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var ne=this._target();ne._bitField=ne._bitField&-1048577|524288},n.prototype._ensurePossibleRejectionHandled=function(){(this._bitField&524288)===0&&(this._setRejectionIsUnhandled(),r.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){ve("rejectionHandled",o,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},n.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var ne=this._settledValue();this._setUnhandledRejectionIsNotified(),ve("unhandledRejection",c,ne,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},n.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},n.prototype._warn=function(ne,oe,pe){return G(ne,oe,pe||this)},n.onPossiblyUnhandledRejection=function(ne){var oe=t();c=typeof ne=="function"?oe===null?ne:a.domainBind(oe,ne):void 0},n.onUnhandledRejectionHandled=function(ne){var oe=t();o=typeof ne=="function"?oe===null?ne:a.domainBind(oe,ne):void 0};var A=function(){};n.longStackTraces=function(){if(r.haveItemsQueued()&&!ee.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!ee.longStackTraces&&ie()){var ne=n.prototype._captureStackTrace,oe=n.prototype._attachExtraTrace;ee.longStackTraces=!0,A=function(){if(r.haveItemsQueued()&&!ee.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);n.prototype._captureStackTrace=ne,n.prototype._attachExtraTrace=oe,e.deactivateLongStackTraces(),r.enableTrampoline(),ee.longStackTraces=!1},n.prototype._captureStackTrace=B,n.prototype._attachExtraTrace=I,e.activateLongStackTraces(),r.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return ee.longStackTraces&&ie()};var w=(function(){try{if(typeof CustomEvent=="function"){var ne=new CustomEvent("CustomEvent");return a.global.dispatchEvent(ne),function(oe,pe){var Ae=new CustomEvent(oe.toLowerCase(),{detail:pe,cancelable:!0});return!a.global.dispatchEvent(Ae)}}else if(typeof Event=="function"){var ne=new Event("CustomEvent");return a.global.dispatchEvent(ne),function(pe,Ae){var Ne=new Event(pe.toLowerCase(),{cancelable:!0});return Ne.detail=Ae,!a.global.dispatchEvent(Ne)}}else{var ne=document.createEvent("CustomEvent");return ne.initCustomEvent("testingtheevent",!1,!0,{}),a.global.dispatchEvent(ne),function(pe,Ae){var Ne=document.createEvent("CustomEvent");return Ne.initCustomEvent(pe.toLowerCase(),!1,!0,Ae),!a.global.dispatchEvent(Ne)}}}catch{}return function(){return!1}})(),S=(function(){return a.isNode?function(){return process.emit.apply(process,arguments)}:a.global?function(ne){var oe="on"+ne.toLowerCase(),pe=a.global[oe];return pe?(pe.apply(a.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}})();function E(ne,oe){return{promise:oe}}var _={promiseCreated:E,promiseFulfilled:E,promiseRejected:E,promiseResolved:E,promiseCancelled:E,promiseChained:function(ne,oe,pe){return{promise:oe,child:pe}},warning:function(ne,oe){return{warning:oe}},unhandledRejection:function(ne,oe,pe){return{reason:oe,promise:pe}},rejectionHandled:E},D=function(ne){var oe=!1;try{oe=S.apply(null,arguments)}catch(Ae){r.throwLater(Ae),oe=!0}var pe=!1;try{pe=w(ne,_[ne].apply(null,arguments))}catch(Ae){r.throwLater(Ae),pe=!0}return pe||oe};n.config=function(ne){if(ne=Object(ne),"longStackTraces"in ne&&(ne.longStackTraces?n.longStackTraces():!ne.longStackTraces&&n.hasLongStackTraces()&&A()),"warnings"in ne){var oe=ne.warnings;ee.warnings=!!oe,b=ee.warnings,a.isObject(oe)&&"wForgottenReturn"in oe&&(b=!!oe.wForgottenReturn)}if("cancellation"in ne&&ne.cancellation&&!ee.cancellation){if(r.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=R,n.prototype._propagateFrom=P,n.prototype._onCancel=N,n.prototype._setOnCancel=j,n.prototype._attachCancellationCallback=T,n.prototype._execute=k,q=P,ee.cancellation=!0}return"monitoring"in ne&&(ne.monitoring&&!ee.monitoring?(ee.monitoring=!0,n.prototype._fireEvent=D):!ne.monitoring&&ee.monitoring&&(ee.monitoring=!1,n.prototype._fireEvent=C)),n};function C(){return!1}n.prototype._fireEvent=C,n.prototype._execute=function(ne,oe,pe){try{ne(oe,pe)}catch(Ae){return Ae}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(ne){},n.prototype._attachCancellationCallback=function(ne){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(ne,oe){};function k(ne,oe,pe){var Ae=this;try{ne(oe,pe,function(Ne){if(typeof Ne!="function")throw new TypeError("onCancel must be a function, got: "+a.toString(Ne));Ae._attachCancellationCallback(Ne)})}catch(Ne){return Ne}}function T(ne){if(!this._isCancellable())return this;var oe=this._onCancel();oe!==void 0?a.isArray(oe)?oe.push(ne):this._setOnCancel([oe,ne]):this._setOnCancel(ne)}function N(){return this._onCancelField}function j(ne){this._onCancelField=ne}function R(){this._cancellationParent=void 0,this._onCancelField=void 0}function P(ne,oe){if((oe&1)!==0){this._cancellationParent=ne;var pe=ne._branchesRemainingToCancel;pe===void 0&&(pe=0),ne._branchesRemainingToCancel=pe+1}(oe&2)!==0&&ne._isBound()&&this._setBoundTo(ne._boundTo)}function F(ne,oe){(oe&2)!==0&&ne._isBound()&&this._setBoundTo(ne._boundTo)}var q=F;function $(){var ne=this._boundTo;return ne!==void 0&&ne instanceof n?ne.isFulfilled()?ne.value():void 0:ne}function B(){this._trace=new ue(this._peekContext())}function I(ne,oe){if(s(ne)){var pe=this._trace;if(pe!==void 0&&oe&&(pe=pe._parent),pe!==void 0)pe.attachExtraTrace(ne);else if(!ne.__stackCleaned__){var Ae=de(ne);a.notEnumerableProp(ne,"stack",Ae.message+`
`+Ae.stack.join(`
`)),a.notEnumerableProp(ne,"__stackCleaned__",!0)}}}function L(ne,oe,pe,Ae,Ne){if(ne===void 0&&oe!==null&&b){if(Ne!==void 0&&Ne._returnedNonUndefined()||(Ae._bitField&65535)===0)return;pe&&(pe=pe+" ");var Pe="",ot="";if(oe._trace){for(var Le=oe._trace.stack.split(`
`),ge=ae(Le),Ie=ge.length-1;Ie>=0;--Ie){var he=ge[Ie];if(!d.test(he)){var Se=he.match(h);Se&&(Pe="at "+Se[1]+":"+Se[2]+":"+Se[3]+" ");break}}if(ge.length>0){for(var Ce=ge[0],Ie=0;Ie<Le.length;++Ie)if(Le[Ie]===Ce){Ie>0&&(ot=`
`+Le[Ie-1]);break}}}var Ue="a promise was created in a "+pe+"handler "+Pe+"but was not returned from it, see http://goo.gl/rRqMUw"+ot;Ae._warn(Ue,!0,oe)}}function U(ne,oe){var pe=ne+" is deprecated and will be removed in a future version.";return oe&&(pe+=" Use "+oe+" instead."),G(pe)}function G(ne,oe,pe){if(ee.warnings){var Ae=new i(ne),Ne;if(oe)pe._attachExtraTrace(Ae);else if(ee.longStackTraces&&(Ne=n._peekContext()))Ne.attachExtraTrace(Ae);else{var Pe=de(Ae);Ae.stack=Pe.message+`
`+Pe.stack.join(`
`)}D("warning",Ae)||xe(Ae,"",!0)}}function H(ne,oe){for(var pe=0;pe<oe.length-1;++pe)oe[pe].push("From previous event:"),oe[pe]=oe[pe].join(`
`);return pe<oe.length&&(oe[pe]=oe[pe].join(`
`)),ne+`
`+oe.join(`
`)}function V(ne){for(var oe=0;oe<ne.length;++oe)(ne[oe].length===0||oe+1<ne.length&&ne[oe][0]===ne[oe+1][0])&&(ne.splice(oe,1),oe--)}function K(ne){for(var oe=ne[0],pe=1;pe<ne.length;++pe){for(var Ae=ne[pe],Ne=oe.length-1,Pe=oe[Ne],ot=-1,Le=Ae.length-1;Le>=0;--Le)if(Ae[Le]===Pe){ot=Le;break}for(var Le=ot;Le>=0;--Le){var ge=Ae[Le];if(oe[Ne]===ge)oe.pop(),Ne--;else break}oe=Ae}}function ae(ne){for(var oe=[],pe=0;pe<ne.length;++pe){var Ae=ne[pe],Ne=Ae==="    (No stack trace)"||f.test(Ae),Pe=Ne&&re(Ae);Ne&&!Pe&&(y&&Ae.charAt(0)!==" "&&(Ae="    "+Ae),oe.push(Ae))}return oe}function te(ne){for(var oe=ne.stack.replace(/\s+$/g,"").split(`
`),pe=0;pe<oe.length;++pe){var Ae=oe[pe];if(Ae==="    (No stack trace)"||f.test(Ae))break}return pe>0&&ne.name!="SyntaxError"&&(oe=oe.slice(pe)),oe}function de(ne){var oe=ne.stack,pe=ne.toString();return oe=typeof oe=="string"&&oe.length>0?te(ne):["    (No stack trace)"],{message:pe,stack:ne.name=="SyntaxError"?oe:ae(oe)}}function xe(ne,oe,pe){if(typeof console<"u"){var Ae;if(a.isObject(ne)){var Ne=ne.stack;Ae=oe+p(Ne,ne)}else Ae=oe+String(ne);typeof g=="function"?g(Ae,pe):(typeof console.log=="function"||typeof console.log=="object")&&console.log(Ae)}}function ve(ne,oe,pe,Ae){var Ne=!1;try{typeof oe=="function"&&(Ne=!0,ne==="rejectionHandled"?oe(Ae):oe(pe,Ae))}catch(Pe){r.throwLater(Pe)}ne==="unhandledRejection"?!D(ne,pe,Ae)&&!Ne&&xe(pe,"Unhandled rejection "):D(ne,Ae)}function Te(ne){var oe;if(typeof ne=="function")oe="[function "+(ne.name||"anonymous")+"]";else{oe=ne&&typeof ne.toString=="function"?ne.toString():a.toString(ne);var pe=/\[object [a-zA-Z0-9$_]+\]/;if(pe.test(oe))try{var Ae=JSON.stringify(ne);oe=Ae}catch{}oe.length===0&&(oe="(empty array)")}return"(<"+O(oe)+">, no stack trace)"}function O(ne){var oe=41;return ne.length<oe?ne:ne.substr(0,oe-3)+"..."}function ie(){return typeof le=="function"}var re=function(){return!1},Z=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function z(ne){var oe=ne.match(Z);if(oe)return{fileName:oe[1],line:parseInt(oe[2],10)}}function X(ne,oe){if(ie()){for(var pe=ne.stack.split(`
`),Ae=oe.stack.split(`
`),Ne=-1,Pe=-1,ot,Le,ge=0;ge<pe.length;++ge){var Ie=z(pe[ge]);if(Ie){ot=Ie.fileName,Ne=Ie.line;break}}for(var ge=0;ge<Ae.length;++ge){var Ie=z(Ae[ge]);if(Ie){Le=Ie.fileName,Pe=Ie.line;break}}Ne<0||Pe<0||!ot||!Le||ot!==Le||Ne>=Pe||(re=function(he){if(u.test(he))return!0;var Se=z(he);return!!(Se&&Se.fileName===ot&&Ne<=Se.line&&Se.line<=Pe)})}}function ue(ne){this._parent=ne,this._promisesCreated=0;var oe=this._length=1+(ne===void 0?0:ne._length);le(this,ue),oe>32&&this.uncycle()}a.inherits(ue,Error),e.CapturedTrace=ue,ue.prototype.uncycle=function(){var ne=this._length;if(!(ne<2)){for(var oe=[],pe={},Ae=0,Ne=this;Ne!==void 0;++Ae)oe.push(Ne),Ne=Ne._parent;ne=this._length=Ae;for(var Ae=ne-1;Ae>=0;--Ae){var Pe=oe[Ae].stack;pe[Pe]===void 0&&(pe[Pe]=Ae)}for(var Ae=0;Ae<ne;++Ae){var ot=oe[Ae].stack,Le=pe[ot];if(Le!==void 0&&Le!==Ae){Le>0&&(oe[Le-1]._parent=void 0,oe[Le-1]._length=1),oe[Ae]._parent=void 0,oe[Ae]._length=1;var ge=Ae>0?oe[Ae-1]:this;Le<ne-1?(ge._parent=oe[Le+1],ge._parent.uncycle(),ge._length=ge._parent._length+1):(ge._parent=void 0,ge._length=1);for(var Ie=ge._length+1,he=Ae-2;he>=0;--he)oe[he]._length=Ie,Ie++;return}}}},ue.prototype.attachExtraTrace=function(ne){if(!ne.__stackCleaned__){this.uncycle();for(var oe=de(ne),pe=oe.message,Ae=[oe.stack],Ne=this;Ne!==void 0;)Ae.push(ae(Ne.stack.split(`
`))),Ne=Ne._parent;K(Ae),V(Ae),a.notEnumerableProp(ne,"stack",H(pe,Ae)),a.notEnumerableProp(ne,"__stackCleaned__",!0)}};var le=(function(){var oe=/^\s*at\s*/,pe=function(ot,Le){return typeof ot=="string"?ot:Le.name!==void 0&&Le.message!==void 0?Le.toString():Te(Le)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,f=oe,p=pe;var Ae=Error.captureStackTrace;return re=function(ot){return u.test(ot)},function(ot,Le){Error.stackTraceLimit+=6,Ae(ot,Le),Error.stackTraceLimit-=6}}var Ne=new Error;if(typeof Ne.stack=="string"&&Ne.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return f=/@/,p=pe,y=!0,function(Le){Le.stack=new Error().stack};var Pe;try{throw new Error}catch(ot){Pe="stack"in ot}return!("stack"in Ne)&&Pe&&typeof Error.stackTraceLimit=="number"?(f=oe,p=pe,function(Le){Error.stackTraceLimit+=6;try{throw new Error}catch(ge){Le.stack=ge.stack}Error.stackTraceLimit-=6}):(p=function(ot,Le){return typeof ot=="string"?ot:(typeof Le=="object"||typeof Le=="function")&&Le.name!==void 0&&Le.message!==void 0?Le.toString():Te(Le)},null)})();typeof console<"u"&&typeof console.warn<"u"&&(g=function(ne){console.warn(ne)},a.isNode&&process.stderr.isTTY?g=function(ne,oe){var pe=oe?"\x1B[33m":"\x1B[31m";console.warn(pe+ne+`\x1B[0m
`)}:!a.isNode&&typeof new Error().stack=="string"&&(g=function(ne,oe){console.warn("%c"+ne,oe?"color: darkorange":"color: red")}));var ee={warnings:v,longStackTraces:!1,cancellation:!1,monitoring:!1};return x&&n.longStackTraces(),{longStackTraces:function(){return ee.longStackTraces},warnings:function(){return ee.warnings},cancellation:function(){return ee.cancellation},monitoring:function(){return ee.monitoring},propagateFromFunction:function(){return q},boundValueFunction:function(){return $},checkForgottenReturns:L,setBounds:X,warn:G,deprecated:U,CapturedTrace:ue,fireDomEvent:w,fireGlobalEvent:S}}),N2}var k2,UO;function Ude(){return UO||(UO=1,k2=function(n,e){var t=sn(),r=n.CancellationError,i=t.errorObj;function a(h,f,p){this.promise=h,this.type=f,this.handler=p,this.called=!1,this.cancelPromise=null}a.prototype.isFinallyHandler=function(){return this.type===0};function s(h){this.finallyHandler=h}s.prototype._resultCancelled=function(){o(this.finallyHandler)};function o(h,f){return h.cancelPromise!=null?(arguments.length>1?h.cancelPromise._reject(f):h.cancelPromise._cancel(),h.cancelPromise=null,!0):!1}function c(){return d.call(this,this.promise._target()._settledValue())}function u(h){if(!o(this,h))return i.e=h,i}function d(h){var f=this.promise,p=this.handler;if(!this.called){this.called=!0;var y=this.isFinallyHandler()?p.call(f._boundValue()):p.call(f._boundValue(),h);if(y!==void 0){f._setReturnedNonUndefined();var g=e(y,f);if(g instanceof n){if(this.cancelPromise!=null)if(g._isCancelled()){var m=new r("late cancellation observer");return f._attachExtraTrace(m),i.e=m,i}else g.isPending()&&g._attachCancellationCallback(new s(this));return g._then(c,u,void 0,this,void 0)}}}return f.isRejected()?(o(this),i.e=h,i):(o(this),h)}return n.prototype._passThrough=function(h,f,p,y){return typeof h!="function"?this.then():this._then(p,y,void 0,new a(this,f,h),void 0)},n.prototype.lastly=n.prototype.finally=function(h){return this._passThrough(h,0,d,d)},n.prototype.tap=function(h){return this._passThrough(h,1,d)},a}),k2}var O2,BO;function Bde(){return BO||(BO=1,O2=function(n){var e=sn(),t=Fu().keys,r=e.tryCatch,i=e.errorObj;function a(s,o,c){return function(u){var d=c._boundValue();e:for(var h=0;h<s.length;++h){var f=s[h];if(f===Error||f!=null&&f.prototype instanceof Error){if(u instanceof f)return r(o).call(d,u)}else if(typeof f=="function"){var p=r(f).call(d,u);if(p===i)return p;if(p)return r(o).call(d,u)}else if(e.isObject(u)){for(var y=t(f),g=0;g<y.length;++g){var m=y[g];if(f[m]!=u[m])continue e}return r(o).call(d,u)}}return n}}return a}),O2}var P2,$O;function b7(){if($O)return P2;$O=1;var n=sn(),e=n.maybeWrapAsError,t=so(),r=t.OperationalError,i=Fu();function a(u){return u instanceof Error&&i.getPrototypeOf(u)===Error.prototype}var s=/^(?:name|message|stack|cause)$/;function o(u){var d;if(a(u)){d=new r(u),d.name=u.name,d.message=u.message,d.stack=u.stack;for(var h=i.keys(u),f=0;f<h.length;++f){var p=h[f];s.test(p)||(d[p]=u[p])}return d}return n.markAsOriginatingFromRejection(u),u}function c(u,d){return function(h,f){if(u!==null){if(h){var p=o(e(h));u._attachExtraTrace(p),u._reject(p)}else if(!d)u._fulfill(f);else{for(var y=arguments.length,g=new Array(Math.max(y-1,0)),m=1;m<y;++m)g[m-1]=arguments[m];u._fulfill(g)}u=null}}}return P2=c,P2}var I2,zO;function $de(){return zO||(zO=1,I2=function(n,e,t,r,i){var a=sn(),s=a.tryCatch;n.method=function(o){if(typeof o!="function")throw new n.TypeError("expecting a function but got "+a.classString(o));return function(){var c=new n(e);c._captureStackTrace(),c._pushContext();var u=s(o).apply(this,arguments),d=c._popContext();return i.checkForgottenReturns(u,d,"Promise.method",c),c._resolveFromSyncValue(u),c}},n.attempt=n.try=function(o){if(typeof o!="function")return r("expecting a function but got "+a.classString(o));var c=new n(e);c._captureStackTrace(),c._pushContext();var u;if(arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var d=arguments[1],h=arguments[2];u=a.isArray(d)?s(o).apply(h,d):s(o).call(h,d)}else u=s(o)();var f=c._popContext();return i.checkForgottenReturns(u,f,"Promise.try",c),c._resolveFromSyncValue(u),c},n.prototype._resolveFromSyncValue=function(o){o===a.errorObj?this._rejectCallback(o.e,!1):this._resolveCallback(o,!0)}}),I2}var R2,qO;function zde(){return qO||(qO=1,R2=function(n,e,t,r){var i=!1,a=function(u,d){this._reject(d)},s=function(u,d){d.promiseRejectionQueued=!0,d.bindingPromise._then(a,a,null,this,u)},o=function(u,d){(this._bitField&50397184)===0&&this._resolveCallback(d.target)},c=function(u,d){d.promiseRejectionQueued||this._reject(u)};n.prototype.bind=function(u){i||(i=!0,n.prototype._propagateFrom=r.propagateFromFunction(),n.prototype._boundValue=r.boundValueFunction());var d=t(u),h=new n(e);h._propagateFrom(this,1);var f=this._target();if(h._setBoundTo(d),d instanceof n){var p={promiseRejectionQueued:!1,promise:h,target:f,bindingPromise:d};f._then(e,s,void 0,h,p),d._then(o,c,void 0,h,p),h._setOnCancel(d)}else h._resolveCallback(f);return h},n.prototype._setBoundTo=function(u){u!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=u):this._bitField=this._bitField&-2097153},n.prototype._isBound=function(){return(this._bitField&2097152)===2097152},n.bind=function(u,d){return n.resolve(d).bind(u)}}),R2}var M2,WO;function qde(){return WO||(WO=1,M2=function(n,e,t,r){var i=sn(),a=i.tryCatch,s=i.errorObj,o=n._async;n.prototype.break=n.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var c=this,u=c;c._isCancellable();){if(!c._cancelBy(u)){u._isFollowing()?u._followee().cancel():u._cancelBranched();break}var d=c._cancellationParent;if(d==null||!d._isCancellable()){c._isFollowing()?c._followee().cancel():c._cancelBranched();break}else c._isFollowing()&&c._followee().cancel(),c._setWillBeCancelled(),u=c,c=d}},n.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},n.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},n.prototype._cancelBy=function(c){return c===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},n.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},n.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),o.invoke(this._cancelPromises,this,void 0))},n.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},n.prototype._unsetOnCancel=function(){this._onCancelField=void 0},n.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},n.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},n.prototype._doInvokeOnCancel=function(c,u){if(i.isArray(c))for(var d=0;d<c.length;++d)this._doInvokeOnCancel(c[d],u);else if(c!==void 0)if(typeof c=="function"){if(!u){var h=a(c).call(this._boundValue());h===s&&(this._attachExtraTrace(h.e),o.throwLater(h.e))}}else c._resultCancelled(this)},n.prototype._invokeOnCancel=function(){var c=this._onCancel();this._unsetOnCancel(),o.invoke(this._doInvokeOnCancel,this,c)},n.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},n.prototype._resultCancelled=function(){this.cancel()}}),M2}var F2,HO;function Wde(){return HO||(HO=1,F2=function(n){function e(){return this.value}function t(){throw this.reason}n.prototype.return=n.prototype.thenReturn=function(r){return r instanceof n&&r.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:r},void 0)},n.prototype.throw=n.prototype.thenThrow=function(r){return this._then(t,void 0,void 0,{reason:r},void 0)},n.prototype.catchThrow=function(r){if(arguments.length<=1)return this._then(void 0,t,void 0,{reason:r},void 0);var i=arguments[1],a=function(){throw i};return this.caught(r,a)},n.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof n&&r.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:r},void 0);var i=arguments[1];i instanceof n&&i.suppressUnhandledRejections();var a=function(){return i};return this.caught(r,a)}}),F2}var L2,VO;function Hde(){return VO||(VO=1,L2=function(n){function e(c){c!==void 0?(c=c._target(),this._bitField=c._bitField,this._settledValueField=c._isFateSealed()?c._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var t=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},i=e.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},a=e.prototype.isRejected=function(){return(this._bitField&16777216)!==0},s=e.prototype.isPending=function(){return(this._bitField&50397184)===0},o=e.prototype.isResolved=function(){return(this._bitField&50331648)!==0};e.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},n.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},n.prototype._isCancelled=function(){return this._target().__isCancelled()},n.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},n.prototype.isPending=function(){return s.call(this._target())},n.prototype.isRejected=function(){return a.call(this._target())},n.prototype.isFulfilled=function(){return i.call(this._target())},n.prototype.isResolved=function(){return o.call(this._target())},n.prototype.value=function(){return t.call(this._target())},n.prototype.reason=function(){var c=this._target();return c._unsetRejectionIsUnhandled(),r.call(c)},n.prototype._value=function(){return this._settledValue()},n.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},n.PromiseInspection=e}),L2}var U2,GO;function Vde(){return GO||(GO=1,U2=function(n,e,t,r,i,a){var s=sn(),o=s.canEvaluate,c=s.tryCatch,u=s.errorObj,d;if(o){for(var h=function(x){return new Function("value","holder",`                             
	            'use strict';                                                    
	            holder.pIndex = value;                                           
	            holder.checkFulfillment(this);                                   
	            `.replace(/Index/g,x))},f=function(x){return new Function("promise","holder",`                           
	            'use strict';                                                    
	            holder.pIndex = promise;                                         
	            `.replace(/Index/g,x))},p=function(x){for(var b=new Array(x),A=0;A<b.length;++A)b[A]="this.p"+(A+1);var w=b.join(" = ")+" = null;",S=`var promise;
`+b.map(function(C){return`                                                         
	                promise = `+C+`;                                      
	                if (promise instanceof Promise) {                            
	                    promise.cancel();                                        
	                }                                                            
	            `}).join(`
`),E=b.join(", "),_="Holder$"+x,D=`return function(tryCatch, errorObj, Promise, async) {    
	            'use strict';                                                    
	            function [TheName](fn) {                                         
	                [TheProperties]                                              
	                this.fn = fn;                                                
	                this.asyncNeeded = true;                                     
	                this.now = 0;                                                
	            }                                                                
	                                                                             
	            [TheName].prototype._callFunction = function(promise) {          
	                promise._pushContext();                                      
	                var ret = tryCatch(this.fn)([ThePassedArguments]);           
	                promise._popContext();                                       
	                if (ret === errorObj) {                                      
	                    promise._rejectCallback(ret.e, false);                   
	                } else {                                                     
	                    promise._resolveCallback(ret);                           
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype.checkFulfillment = function(promise) {       
	                var now = ++this.now;                                        
	                if (now === [TheTotal]) {                                    
	                    if (this.asyncNeeded) {                                  
	                        async.invoke(this._callFunction, this, promise);     
	                    } else {                                                 
	                        this._callFunction(promise);                         
	                    }                                                        
	                                                                             
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype._resultCancelled = function() {              
	                [CancellationCode]                                           
	            };                                                               
	                                                                             
	            return [TheName];                                                
	        }(tryCatch, errorObj, Promise, async);                               
	        `;return D=D.replace(/\[TheName\]/g,_).replace(/\[TheTotal\]/g,x).replace(/\[ThePassedArguments\]/g,E).replace(/\[TheProperties\]/g,w).replace(/\[CancellationCode\]/g,S),new Function("tryCatch","errorObj","Promise","async",D)(c,u,n,i)},y=[],g=[],m=[],v=0;v<8;++v)y.push(p(v+1)),g.push(h(v+1)),m.push(f(v+1));d=function(x){this._reject(x)}}n.join=function(){var x=arguments.length-1,b;if(x>0&&typeof arguments[x]=="function"&&(b=arguments[x],x<=8&&o)){var j=new n(r);j._captureStackTrace();for(var A=y[x-1],w=new A(b),S=g,E=0;E<x;++E){var _=t(arguments[E],j);if(_ instanceof n){_=_._target();var D=_._bitField;(D&50397184)===0?(_._then(S[E],d,void 0,j,w),m[E](_,w),w.asyncNeeded=!1):(D&33554432)!==0?S[E].call(j,_._value(),w):(D&16777216)!==0?j._reject(_._reason()):j._cancel()}else S[E].call(j,_,w)}if(!j._isFateSealed()){if(w.asyncNeeded){var C=a();C!==null&&(w.fn=s.domainBind(C,w.fn))}j._setAsyncGuaranteed(),j._setOnCancel(w)}return j}for(var k=arguments.length,T=new Array(k),N=0;N<k;++N)T[N]=arguments[N];b&&T.pop();var j=new e(T).promise();return b!==void 0?j.spread(b):j}}),U2}var B2,YO;function Gde(){return YO||(YO=1,B2=function(n,e,t,r,i,a){var s=n._getDomain,o=sn(),c=o.tryCatch,u=o.errorObj,d=n._async;function h(p,y,g,m){this.constructor$(p),this._promise._captureStackTrace();var v=s();this._callback=v===null?y:o.domainBind(v,y),this._preservedValues=m===i?new Array(this.length()):null,this._limit=g,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}o.inherits(h,e),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(p,y){var g=this._values,m=this.length(),v=this._preservedValues,x=this._limit;if(y<0){if(y=y*-1-1,g[y]=p,x>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(x>=1&&this._inFlight>=x)return g[y]=p,this._queue.push(y),!1;v!==null&&(v[y]=p);var b=this._promise,A=this._callback,w=b._boundValue();b._pushContext();var S=c(A).call(w,p,y,m),E=b._popContext();if(a.checkForgottenReturns(S,E,v!==null?"Promise.filter":"Promise.map",b),S===u)return this._reject(S.e),!0;var _=r(S,this._promise);if(_ instanceof n){_=_._target();var D=_._bitField;if((D&50397184)===0)return x>=1&&this._inFlight++,g[y]=_,_._proxy(this,(y+1)*-1),!1;if((D&33554432)!==0)S=_._value();else return(D&16777216)!==0?(this._reject(_._reason()),!0):(this._cancel(),!0)}g[y]=S}var C=++this._totalResolved;return C>=m?(v!==null?this._filter(g,v):this._resolve(g),!0):!1},h.prototype._drainQueue=function(){for(var p=this._queue,y=this._limit,g=this._values;p.length>0&&this._inFlight<y;){if(this._isResolved())return;var m=p.pop();this._promiseFulfilled(g[m],m)}},h.prototype._filter=function(p,y){for(var g=y.length,m=new Array(g),v=0,x=0;x<g;++x)p[x]&&(m[v++]=y[x]);m.length=v,this._resolve(m)},h.prototype.preservedValues=function(){return this._preservedValues};function f(p,y,g,m){if(typeof y!="function")return t("expecting a function but got "+o.classString(y));var v=0;if(g!==void 0)if(typeof g=="object"&&g!==null){if(typeof g.concurrency!="number")return n.reject(new TypeError("'concurrency' must be a number but it is "+o.classString(g.concurrency)));v=g.concurrency}else return n.reject(new TypeError("options argument must be an object but it is "+o.classString(g)));return v=typeof v=="number"&&isFinite(v)&&v>=1?v:0,new h(p,y,v,m).promise()}n.prototype.map=function(p,y){return f(this,p,y,null)},n.map=function(p,y,g,m){return f(p,y,g,m)}}),B2}var $2,KO;function Yde(){if(KO)return $2;KO=1;var n=Object.create;if(n){var e=n(null),t=n(null);e[" size"]=t[" size"]=0}return $2=function(r){var i=sn(),a=i.canEvaluate,s=i.isIdentifier,o,c;{var u=function(m){return new Function("ensureMethod",`                                    
	        return function(obj) {                                               
	            'use strict'                                                     
	            var len = this.length;                                           
	            ensureMethod(obj, 'methodName');                                 
	            switch(len) {                                                    
	                case 1: return obj.methodName(this[0]);                      
	                case 2: return obj.methodName(this[0], this[1]);             
	                case 3: return obj.methodName(this[0], this[1], this[2]);    
	                case 0: return obj.methodName();                             
	                default:                                                     
	                    return obj.methodName.apply(obj, this);                  
	            }                                                                
	        };                                                                   
	        `.replace(/methodName/g,m))(f)},d=function(m){return new Function("obj",`                                             
	        'use strict';                                                        
	        return obj.propertyName;                                             
	        `.replace("propertyName",m))},h=function(m,v,x){var b=x[m];if(typeof b!="function"){if(!s(m))return null;if(b=v(m),x[m]=b,x[" size"]++,x[" size"]>512){for(var A=Object.keys(x),w=0;w<256;++w)delete x[A[w]];x[" size"]=A.length-256}}return b};o=function(m){return h(m,u,e)},c=function(m){return h(m,d,t)}}function f(m,v){var x;if(m!=null&&(x=m[v]),typeof x!="function"){var b="Object "+i.classString(m)+" has no method '"+i.toString(v)+"'";throw new r.TypeError(b)}return x}function p(m){var v=this.pop(),x=f(m,v);return x.apply(m,this)}r.prototype.call=function(m){for(var v=arguments.length,x=new Array(Math.max(v-1,0)),b=1;b<v;++b)x[b-1]=arguments[b];if(a){var A=o(m);if(A!==null)return this._then(A,void 0,void 0,x,void 0)}return x.push(m),this._then(p,void 0,void 0,x,void 0)};function y(m){return m[this]}function g(m){var v=+this;return v<0&&(v=Math.max(0,v+m.length)),m[v]}r.prototype.get=function(m){var v=typeof m=="number",x;if(v)x=g;else if(a){var b=c(m);x=b!==null?b:y}else x=y;return this._then(x,void 0,void 0,m,void 0)}},$2}var z2,XO;function Kde(){return XO||(XO=1,z2=function(n,e,t,r,i,a){var s=sn(),o=so().TypeError,c=sn().inherits,u=s.errorObj,d=s.tryCatch,h={};function f(b){setTimeout(function(){throw b},0)}function p(b){var A=t(b);return A!==b&&typeof b._isDisposable=="function"&&typeof b._getDisposer=="function"&&b._isDisposable()&&A._setDisposable(b._getDisposer()),A}function y(b,A){var w=0,S=b.length,E=new n(i);function _(){if(w>=S)return E._fulfill();var D=p(b[w++]);if(D instanceof n&&D._isDisposable()){try{D=t(D._getDisposer().tryDispose(A),b.promise)}catch(C){return f(C)}if(D instanceof n)return D._then(_,f,null,null,null)}_()}return _(),E}function g(b,A,w){this._data=b,this._promise=A,this._context=w}g.prototype.data=function(){return this._data},g.prototype.promise=function(){return this._promise},g.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():h},g.prototype.tryDispose=function(b){var A=this.resource(),w=this._context;w!==void 0&&w._pushContext();var S=A!==h?this.doDispose(A,b):null;return w!==void 0&&w._popContext(),this._promise._unsetDisposable(),this._data=null,S},g.isDisposer=function(b){return b!=null&&typeof b.resource=="function"&&typeof b.tryDispose=="function"};function m(b,A,w){this.constructor$(b,A,w)}c(m,g),m.prototype.doDispose=function(b,A){var w=this.data();return w.call(b,b,A)};function v(b){return g.isDisposer(b)?(this.resources[this.index]._setDisposable(b),b.promise()):b}function x(b){this.length=b,this.promise=null,this[b-1]=null}x.prototype._resultCancelled=function(){for(var b=this.length,A=0;A<b;++A){var w=this[A];w instanceof n&&w.cancel()}},n.using=function(){var b=arguments.length;if(b<2)return e("you must pass at least 2 arguments to Promise.using");var A=arguments[b-1];if(typeof A!="function")return e("expecting a function but got "+s.classString(A));var w,S=!0;b===2&&Array.isArray(arguments[0])?(w=arguments[0],b=w.length,S=!1):(w=arguments,b--);for(var E=new x(b),_=0;_<b;++_){var D=w[_];if(g.isDisposer(D)){var C=D;D=D.promise(),D._setDisposable(C)}else{var k=t(D);k instanceof n&&(D=k._then(v,null,null,{resources:E,index:_},void 0))}E[_]=D}for(var T=new Array(E.length),_=0;_<T.length;++_)T[_]=n.resolve(E[_]).reflect();var N=n.all(T).then(function(R){for(var P=0;P<R.length;++P){var F=R[P];if(F.isRejected())return u.e=F.error(),u;if(!F.isFulfilled()){N.cancel();return}R[P]=F.value()}j._pushContext(),A=d(A);var q=S?A.apply(void 0,R):A(R),$=j._popContext();return a.checkForgottenReturns(q,$,"Promise.using",j),q}),j=N.lastly(function(){var R=new n.PromiseInspection(N);return y(E,R)});return E.promise=j,j._setOnCancel(E),j},n.prototype._setDisposable=function(b){this._bitField=this._bitField|131072,this._disposer=b},n.prototype._isDisposable=function(){return(this._bitField&131072)>0},n.prototype._getDisposer=function(){return this._disposer},n.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},n.prototype.disposer=function(b){if(typeof b=="function")return new m(b,this,r());throw new o}}),z2}var q2,JO;function Xde(){return JO||(JO=1,q2=function(n,e,t){var r=sn(),i=n.TimeoutError;function a(h){this.handle=h}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(h){return o(+this).thenReturn(h)},o=n.delay=function(h,f){var p,y;return f!==void 0?(p=n.resolve(f)._then(s,null,null,h,void 0),t.cancellation()&&f instanceof n&&p._setOnCancel(f)):(p=new n(e),y=setTimeout(function(){p._fulfill()},+h),t.cancellation()&&p._setOnCancel(new a(y)),p._captureStackTrace()),p._setAsyncGuaranteed(),p};n.prototype.delay=function(h){return o(h,this)};var c=function(h,f,p){var y;typeof f!="string"?f instanceof Error?y=f:y=new i("operation timed out"):y=new i(f),r.markAsOriginatingFromRejection(y),h._attachExtraTrace(y),h._reject(y),p?.cancel()};function u(h){return clearTimeout(this.handle),h}function d(h){throw clearTimeout(this.handle),h}n.prototype.timeout=function(h,f){h=+h;var p,y,g=new a(setTimeout(function(){p.isPending()&&c(p,f,y)},h));return t.cancellation()?(y=this.then(),p=y._then(u,d,void 0,g,void 0),p._setOnCancel(g)):p=this._then(u,d,void 0,g,void 0),p}}),q2}var W2,ZO;function Jde(){return ZO||(ZO=1,W2=function(n,e,t,r,i,a){var s=so(),o=s.TypeError,c=sn(),u=c.errorObj,d=c.tryCatch,h=[];function f(y,g,m){for(var v=0;v<g.length;++v){m._pushContext();var x=d(g[v])(y);if(m._popContext(),x===u){m._pushContext();var b=n.reject(u.e);return m._popContext(),b}var A=r(x,m);if(A instanceof n)return A}return null}function p(y,g,m,v){if(a.cancellation()){var x=new n(t),b=this._finallyPromise=new n(t);this._promise=x.lastly(function(){return b}),x._captureStackTrace(),x._setOnCancel(this)}else{var A=this._promise=new n(t);A._captureStackTrace()}this._stack=v,this._generatorFunction=y,this._receiver=g,this._generator=void 0,this._yieldHandlers=typeof m=="function"?[m].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(p,i),p.prototype._isResolved=function(){return this._promise===null},p.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},p.prototype._promiseCancelled=function(){if(!this._isResolved()){var y=typeof this._generator.return<"u",g;if(y)this._promise._pushContext(),g=d(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var m=new n.CancellationError("generator .return() sentinel");n.coroutine.returnSentinel=m,this._promise._attachExtraTrace(m),this._promise._pushContext(),g=d(this._generator.throw).call(this._generator,m),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(g)}},p.prototype._promiseFulfilled=function(y){this._yieldedPromise=null,this._promise._pushContext();var g=d(this._generator.next).call(this._generator,y);this._promise._popContext(),this._continue(g)},p.prototype._promiseRejected=function(y){this._yieldedPromise=null,this._promise._attachExtraTrace(y),this._promise._pushContext();var g=d(this._generator.throw).call(this._generator,y);this._promise._popContext(),this._continue(g)},p.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof n){var y=this._yieldedPromise;this._yieldedPromise=null,y.cancel()}},p.prototype.promise=function(){return this._promise},p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},p.prototype._continue=function(y){var g=this._promise;if(y===u)return this._cleanup(),this._cancellationPhase?g.cancel():g._rejectCallback(y.e,!1);var m=y.value;if(y.done===!0)return this._cleanup(),this._cancellationPhase?g.cancel():g._resolveCallback(m);var v=r(m,this._promise);if(!(v instanceof n)&&(v=f(v,this._yieldHandlers,this._promise),v===null)){this._promiseRejected(new o(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",m)+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}v=v._target();var x=v._bitField;(x&50397184)===0?(this._yieldedPromise=v,v._proxy(this,null)):(x&33554432)!==0?n._async.invoke(this._promiseFulfilled,this,v._value()):(x&16777216)!==0?n._async.invoke(this._promiseRejected,this,v._reason()):this._promiseCancelled()},n.coroutine=function(y,g){if(typeof y!="function")throw new o(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var m=Object(g).yieldHandler,v=p,x=new Error().stack;return function(){var b=y.apply(this,arguments),A=new v(void 0,void 0,m,x),w=A.promise();return A._generator=b,A._promiseFulfilled(void 0),w}},n.coroutine.addYieldHandler=function(y){if(typeof y!="function")throw new o("expecting a function but got "+c.classString(y));h.push(y)},n.spawn=function(y){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),typeof y!="function")return e(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var g=new p(y,this),m=g.promise();return g._run(n.spawn),m}}),W2}var H2,QO;function Zde(){return QO||(QO=1,H2=function(n){var e=sn(),t=n._async,r=e.tryCatch,i=e.errorObj;function a(c,u){var d=this;if(!e.isArray(c))return s.call(d,c,u);var h=r(u).apply(d._boundValue(),[null].concat(c));h===i&&t.throwLater(h.e)}function s(c,u){var d=this,h=d._boundValue(),f=c===void 0?r(u).call(h,null):r(u).call(h,null,c);f===i&&t.throwLater(f.e)}function o(c,u){var d=this;if(!c){var h=new Error(c+"");h.cause=c,c=h}var f=r(u).call(d._boundValue(),c);f===i&&t.throwLater(f.e)}n.prototype.asCallback=n.prototype.nodeify=function(c,u){if(typeof c=="function"){var d=s;u!==void 0&&Object(u).spread&&(d=a),this._then(d,o,void 0,this,c)}return this}}),H2}var V2,e8;function Qde(){return e8||(e8=1,V2=function(n,e){var t={},r=sn(),i=b7(),a=r.withAppended,s=r.maybeWrapAsError,o=r.canEvaluate,c=so().TypeError,u="Async",d={__isPromisified__:!0},h=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],f=new RegExp("^(?:"+h.join("|")+")$"),p=function(N){return r.isIdentifier(N)&&N.charAt(0)!=="_"&&N!=="constructor"};function y(N){return!f.test(N)}function g(N){try{return N.__isPromisified__===!0}catch{return!1}}function m(N,j,R){var P=r.getDataPropertyOrDefault(N,j+R,d);return P?g(P):!1}function v(N,j,R){for(var P=0;P<N.length;P+=2){var F=N[P];if(R.test(F)){for(var q=F.replace(R,""),$=0;$<N.length;$+=2)if(N[$]===q)throw new c(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",j))}}}function x(N,j,R,P){for(var F=r.inheritedDataKeys(N),q=[],$=0;$<F.length;++$){var B=F[$],I=N[B],L=P===p?!0:p(B);typeof I=="function"&&!g(I)&&!m(N,B,j)&&P(B,I,N,L)&&q.push(B,I)}return v(q,j,R),q}var b=function(N){return N.replace(/([$])/,"\\$")},A;{var w=function(N){for(var j=[N],R=Math.max(0,N-1-3),P=N-1;P>=R;--P)j.push(P);for(var P=N+1;P<=3;++P)j.push(P);return j},S=function(N){return r.filledRange(N,"_arg","")},E=function(N){return r.filledRange(Math.max(N,3),"_arg","")},_=function(N){return typeof N.length=="number"?Math.max(Math.min(N.length,1024),0):0};A=function(N,j,R,P,F,q){var $=Math.max(0,_(P)-1),B=w($),I=typeof N=="string"||j===t;function L(V){var K=S(V).join(", "),ae=V>0?", ":"",te;return I?te=`ret = callback.call(this, {{args}}, nodeback); break;
`:te=j===void 0?`ret = callback({{args}}, nodeback); break;
`:`ret = callback.call(receiver, {{args}}, nodeback); break;
`,te.replace("{{args}}",K).replace(", ",ae)}function U(){for(var V="",K=0;K<B.length;++K)V+="case "+B[K]+":"+L(B[K]);return V+=`                                                             
	        default:                                                             
	            var args = new Array(len + 1);                                   
	            var i = 0;                                                       
	            for (var i = 0; i < len; ++i) {                                  
	               args[i] = arguments[i];                                       
	            }                                                                
	            args[i] = nodeback;                                              
	            [CodeForCall]                                                    
	            break;                                                           
	        `.replace("[CodeForCall]",I?`ret = callback.apply(this, args);
`:`ret = callback.apply(receiver, args);
`),V}var G=typeof N=="string"?"this != null ? this['"+N+"'] : fn":"fn",H=`'use strict';                                                
	        var ret = function (Parameters) {                                    
	            'use strict';                                                    
	            var len = arguments.length;                                      
	            var promise = new Promise(INTERNAL);                             
	            promise._captureStackTrace();                                    
	            var nodeback = nodebackForPromise(promise, `+q+`);   
	            var ret;                                                         
	            var callback = tryCatch([GetFunctionCode]);                      
	            switch(len) {                                                    
	                [CodeForSwitchCase]                                          
	            }                                                                
	            if (ret === errorObj) {                                          
	                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);
	            }                                                                
	            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     
	            return promise;                                                  
	        };                                                                   
	        notEnumerableProp(ret, '__isPromisified__', true);                   
	        return ret;                                                          
	    `.replace("[CodeForSwitchCase]",U()).replace("[GetFunctionCode]",G);return H=H.replace("Parameters",E($)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",H)(n,P,j,a,s,i,r.tryCatch,r.errorObj,r.notEnumerableProp,e)}}function D(N,j,R,P,F,q){var $=(function(){return this})(),B=N;typeof B=="string"&&(N=P);function I(){var L=j;j===t&&(L=this);var U=new n(e);U._captureStackTrace();var G=typeof B=="string"&&this!==$?this[B]:N,H=i(U,q);try{G.apply(L,a(arguments,H))}catch(V){U._rejectCallback(s(V),!0,!0)}return U._isFateSealed()||U._setAsyncGuaranteed(),U}return r.notEnumerableProp(I,"__isPromisified__",!0),I}var C=o?A:D;function k(N,j,R,P,F){for(var q=new RegExp(b(j)+"$"),$=x(N,j,q,R),B=0,I=$.length;B<I;B+=2){var L=$[B],U=$[B+1],G=L+j;if(P===C)N[G]=C(L,t,L,U,j,F);else{var H=P(U,function(){return C(L,t,L,U,j,F)});r.notEnumerableProp(H,"__isPromisified__",!0),N[G]=H}}return r.toFastProperties(N),N}function T(N,j,R){return C(N,j,void 0,N,null,R)}n.promisify=function(N,j){if(typeof N!="function")throw new c("expecting a function but got "+r.classString(N));if(g(N))return N;j=Object(j);var R=j.context===void 0?t:j.context,P=!!j.multiArgs,F=T(N,R,P);return r.copyDescriptors(N,F,y),F},n.promisifyAll=function(N,j){if(typeof N!="function"&&typeof N!="object")throw new c(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);j=Object(j);var R=!!j.multiArgs,P=j.suffix;typeof P!="string"&&(P=u);var F=j.filter;typeof F!="function"&&(F=p);var q=j.promisifier;if(typeof q!="function"&&(q=C),!r.isIdentifier(P))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var $=r.inheritedDataKeys(N),B=0;B<$.length;++B){var I=N[$[B]];$[B]!=="constructor"&&r.isClass(I)&&(k(I.prototype,P,F,q,R),k(I,P,F,q,R))}return k(N,P,F,q,R)}}),V2}var G2,t8;function ehe(){return t8||(t8=1,G2=function(n,e,t,r){var i=sn(),a=i.isObject,s=Fu(),o;typeof Map=="function"&&(o=Map);var c=(function(){var f=0,p=0;function y(g,m){this[f]=g,this[f+p]=m,f++}return function(m){p=m.size,f=0;var v=new Array(m.size*2);return m.forEach(y,v),v}})(),u=function(f){for(var p=new o,y=f.length/2|0,g=0;g<y;++g){var m=f[y+g],v=f[g];p.set(m,v)}return p};function d(f){var p=!1,y;if(o!==void 0&&f instanceof o)y=c(f),p=!0;else{var g=s.keys(f),m=g.length;y=new Array(m*2);for(var v=0;v<m;++v){var x=g[v];y[v]=f[x],y[v+m]=x}}this.constructor$(y),this._isMap=p,this._init$(void 0,-3)}i.inherits(d,e),d.prototype._init=function(){},d.prototype._promiseFulfilled=function(f,p){this._values[p]=f;var y=++this._totalResolved;if(y>=this._length){var g;if(this._isMap)g=u(this._values);else{g={};for(var m=this.length(),v=0,x=this.length();v<x;++v)g[this._values[v+m]]=this._values[v]}return this._resolve(g),!0}return!1},d.prototype.shouldCopyValues=function(){return!1},d.prototype.getActualLength=function(f){return f>>1};function h(f){var p,y=t(f);if(a(y))y instanceof n?p=y._then(n.props,void 0,void 0,void 0,void 0):p=new d(y).promise();else return r(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return y instanceof n&&p._propagateFrom(y,2),p}n.prototype.props=function(){return h(this)},n.props=function(f){return h(f)}}),G2}var Y2,n8;function the(){return n8||(n8=1,Y2=function(n,e,t,r){var i=sn(),a=function(o){return o.then(function(c){return s(c,o)})};function s(o,c){var u=t(o);if(u instanceof n)return a(u);if(o=i.asArray(o),o===null)return r("expecting an array or an iterable object but got "+i.classString(o));var d=new n(e);c!==void 0&&d._propagateFrom(c,3);for(var h=d._fulfill,f=d._reject,p=0,y=o.length;p<y;++p){var g=o[p];g===void 0&&!(p in o)||n.cast(g)._then(h,f,void 0,d,null)}return d}n.race=function(o){return s(o,void 0)},n.prototype.race=function(){return s(this,void 0)}}),Y2}var K2,r8;function nhe(){return r8||(r8=1,K2=function(n,e,t,r,i,a){var s=n._getDomain,o=sn(),c=o.tryCatch;function u(y,g,m,v){this.constructor$(y);var x=s();this._fn=x===null?g:o.domainBind(x,g),m!==void 0&&(m=n.resolve(m),m._attachCancellationCallback(this)),this._initialValue=m,this._currentCancellable=null,v===i?this._eachValues=Array(this._length):v===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}o.inherits(u,e),u.prototype._gotAccum=function(y){this._eachValues!==void 0&&this._eachValues!==null&&y!==i&&this._eachValues.push(y)},u.prototype._eachComplete=function(y){return this._eachValues!==null&&this._eachValues.push(y),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(y){this._promise._resolveCallback(y),this._values=null},u.prototype._resultCancelled=function(y){if(y===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof n&&this._currentCancellable.cancel(),this._initialValue instanceof n&&this._initialValue.cancel())},u.prototype._iterate=function(y){this._values=y;var g,m,v=y.length;if(this._initialValue!==void 0?(g=this._initialValue,m=0):(g=n.resolve(y[0]),m=1),this._currentCancellable=g,!g.isRejected())for(;m<v;++m){var x={accum:null,value:y[m],index:m,length:v,array:this};g=g._then(f,void 0,void 0,x,void 0)}this._eachValues!==void 0&&(g=g._then(this._eachComplete,void 0,void 0,this,void 0)),g._then(d,d,void 0,g,this)},n.prototype.reduce=function(y,g){return h(this,y,g,null)},n.reduce=function(y,g,m,v){return h(y,g,m,v)};function d(y,g){this.isFulfilled()?g._resolve(y):g._reject(y)}function h(y,g,m,v){if(typeof g!="function")return t("expecting a function but got "+o.classString(g));var x=new u(y,g,m,v);return x.promise()}function f(y){this.accum=y,this.array._gotAccum(y);var g=r(this.value,this.array._promise);return g instanceof n?(this.array._currentCancellable=g,g._then(p,void 0,void 0,this,void 0)):p.call(this,g)}function p(y){var g=this.array,m=g._promise,v=c(g._fn);m._pushContext();var x;g._eachValues!==void 0?x=v.call(m._boundValue(),y,this.index,this.length):x=v.call(m._boundValue(),this.accum,y,this.index,this.length),x instanceof n&&(g._currentCancellable=x);var b=m._popContext();return a.checkForgottenReturns(x,b,g._eachValues!==void 0?"Promise.each":"Promise.reduce",m),x}}),K2}var X2,i8;function rhe(){return i8||(i8=1,X2=function(n,e,t){var r=n.PromiseInspection,i=sn();function a(s){this.constructor$(s)}i.inherits(a,e),a.prototype._promiseResolved=function(s,o){this._values[s]=o;var c=++this._totalResolved;return c>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseFulfilled=function(s,o){var c=new r;return c._bitField=33554432,c._settledValueField=s,this._promiseResolved(o,c)},a.prototype._promiseRejected=function(s,o){var c=new r;return c._bitField=16777216,c._settledValueField=s,this._promiseResolved(o,c)},n.settle=function(s){return t.deprecated(".settle()",".reflect()"),new a(s).promise()},n.prototype.settle=function(){return n.settle(this)}}),X2}var J2,a8;function ihe(){return a8||(a8=1,J2=function(n,e,t){var r=sn(),i=so().RangeError,a=so().AggregateError,s=r.isArray,o={};function c(d){this.constructor$(d),this._howMany=0,this._unwrap=!1,this._initialized=!1}r.inherits(c,e),c.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var d=s(this._values);!this._isResolved()&&d&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(d){this._howMany=d},c.prototype._promiseFulfilled=function(d){return this._addFulfilled(d),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},c.prototype._promiseRejected=function(d){return this._addRejected(d),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof n||this._values==null?this._cancel():(this._addRejected(o),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var d=new a,h=this.length();h<this._values.length;++h)this._values[h]!==o&&d.push(this._values[h]);return d.length>0?this._reject(d):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(d){this._values.push(d)},c.prototype._addFulfilled=function(d){this._values[this._totalResolved++]=d},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(d){var h="Input array must contain at least "+this._howMany+" items but contains only "+d+" items";return new i(h)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function u(d,h){if((h|0)!==h||h<0)return t(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var f=new c(d),p=f.promise();return f.setHowMany(h),f.init(),p}n.some=function(d,h){return u(d,h)},n.prototype.some=function(d){return u(this,d)},n._SomePromiseArray=c}),J2}var Z2,s8;function ahe(){return s8||(s8=1,Z2=function(n,e){var t=n.map;n.prototype.filter=function(r,i){return t(this,r,i,e)},n.filter=function(r,i,a){return t(r,i,a,e)}}),Z2}var Q2,o8;function she(){return o8||(o8=1,Q2=function(n,e){var t=n.reduce,r=n.all;function i(){return r(this)}function a(s,o){return t(s,o,e,e)}n.prototype.each=function(s){return t(this,s,e,0)._then(i,void 0,void 0,this,void 0)},n.prototype.mapSeries=function(s){return t(this,s,e,e)},n.each=function(s,o){return t(s,o,e,0)._then(i,void 0,void 0,s,void 0)},n.mapSeries=a}),Q2}var ew,l8;function ohe(){return l8||(l8=1,ew=function(n){var e=n._SomePromiseArray;function t(r){var i=new e(r),a=i.promise();return i.setHowMany(1),i.setUnwrap(),i.init(),a}n.any=function(r){return t(r)},n.prototype.any=function(){return t(this)}}),ew}var c8;function lhe(){return c8||(c8=1,(function(n){n.exports=function(){var e=function(){return new f(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},t=function(){return new T.PromiseInspection(this._target())},r=function(P){return T.reject(new f(P))};function i(){}var a={},s=sn(),o;s.isNode?o=function(){var P=process.domain;return P===void 0&&(P=null),P}:o=function(){return null},s.notEnumerableProp(T,"_getDomain",o);var c=Fu(),u=Ide(),d=new u;c.defineProperty(T,"_async",{value:d});var h=so(),f=T.TypeError=h.TypeError;T.RangeError=h.RangeError;var p=T.CancellationError=h.CancellationError;T.TimeoutError=h.TimeoutError,T.OperationalError=h.OperationalError,T.RejectionError=h.OperationalError,T.AggregateError=h.AggregateError;var y=function(){},g={},m={},v=Rde()(T,y),x=Mde()(T,y,v,r,i),b=Fde()(T),A=b.create,w=Lde()(T,b);w.CapturedTrace;var S=Ude()(T,v),E=Bde()(m),_=b7(),D=s.errorObj,C=s.tryCatch;function k(P,F){if(typeof F!="function")throw new f("expecting a function but got "+s.classString(F));if(P.constructor!==T)throw new f(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`)}function T(P){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,P!==y&&(k(this,P),this._resolveFromExecutor(P)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}T.prototype.toString=function(){return"[object Promise]"},T.prototype.caught=T.prototype.catch=function(P){var F=arguments.length;if(F>1){var q=new Array(F-1),$=0,B;for(B=0;B<F-1;++B){var I=arguments[B];if(s.isObject(I))q[$++]=I;else return r("expecting an object but got A catch statement predicate "+s.classString(I))}return q.length=$,P=arguments[B],this.then(void 0,E(q,P,this))}return this.then(void 0,P)},T.prototype.reflect=function(){return this._then(t,t,void 0,this,void 0)},T.prototype.then=function(P,F){if(w.warnings()&&arguments.length>0&&typeof P!="function"&&typeof F!="function"){var q=".then() only accepts functions but was passed: "+s.classString(P);arguments.length>1&&(q+=", "+s.classString(F)),this._warn(q)}return this._then(P,F,void 0,void 0,void 0)},T.prototype.done=function(P,F){var q=this._then(P,F,void 0,void 0,void 0);q._setIsFinal()},T.prototype.spread=function(P){return typeof P!="function"?r("expecting a function but got "+s.classString(P)):this.all()._then(P,void 0,void 0,g,void 0)},T.prototype.toJSON=function(){var P={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(P.fulfillmentValue=this.value(),P.isFulfilled=!0):this.isRejected()&&(P.rejectionReason=this.reason(),P.isRejected=!0),P},T.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new x(this).promise()},T.prototype.error=function(P){return this.caught(s.originatesFromRejection,P)},T.getNewLibraryCopy=n.exports,T.is=function(P){return P instanceof T},T.fromNode=T.fromCallback=function(P){var F=new T(y);F._captureStackTrace();var q=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,$=C(P)(_(F,q));return $===D&&F._rejectCallback($.e,!0),F._isFateSealed()||F._setAsyncGuaranteed(),F},T.all=function(P){return new x(P).promise()},T.cast=function(P){var F=v(P);return F instanceof T||(F=new T(y),F._captureStackTrace(),F._setFulfilled(),F._rejectionHandler0=P),F},T.resolve=T.fulfilled=T.cast,T.reject=T.rejected=function(P){var F=new T(y);return F._captureStackTrace(),F._rejectCallback(P,!0),F},T.setScheduler=function(P){if(typeof P!="function")throw new f("expecting a function but got "+s.classString(P));return d.setScheduler(P)},T.prototype._then=function(P,F,q,$,B){var I=B!==void 0,L=I?B:new T(y),U=this._target(),G=U._bitField;I||(L._propagateFrom(this,3),L._captureStackTrace(),$===void 0&&(this._bitField&2097152)!==0&&((G&50397184)!==0?$=this._boundValue():$=U===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,L));var H=o();if((G&50397184)!==0){var V,K,ae=U._settlePromiseCtx;(G&33554432)!==0?(K=U._rejectionHandler0,V=P):(G&16777216)!==0?(K=U._fulfillmentHandler0,V=F,U._unsetRejectionIsUnhandled()):(ae=U._settlePromiseLateCancellationObserver,K=new p("late cancellation observer"),U._attachExtraTrace(K),V=F),d.invoke(ae,U,{handler:H===null?V:typeof V=="function"&&s.domainBind(H,V),promise:L,receiver:$,value:K})}else U._addCallbacks(P,F,L,$,H);return L},T.prototype._length=function(){return this._bitField&65535},T.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},T.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},T.prototype._setLength=function(P){this._bitField=this._bitField&-65536|P&65535},T.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},T.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},T.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},T.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},T.prototype._isFinal=function(){return(this._bitField&4194304)>0},T.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},T.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},T.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},T.prototype._setAsyncGuaranteed=function(){d.hasCustomScheduler()||(this._bitField=this._bitField|134217728)},T.prototype._receiverAt=function(P){var F=P===0?this._receiver0:this[P*4-4+3];if(F!==a)return F===void 0&&this._isBound()?this._boundValue():F},T.prototype._promiseAt=function(P){return this[P*4-4+2]},T.prototype._fulfillmentHandlerAt=function(P){return this[P*4-4+0]},T.prototype._rejectionHandlerAt=function(P){return this[P*4-4+1]},T.prototype._boundValue=function(){},T.prototype._migrateCallback0=function(P){P._bitField;var F=P._fulfillmentHandler0,q=P._rejectionHandler0,$=P._promise0,B=P._receiverAt(0);B===void 0&&(B=a),this._addCallbacks(F,q,$,B,null)},T.prototype._migrateCallbackAt=function(P,F){var q=P._fulfillmentHandlerAt(F),$=P._rejectionHandlerAt(F),B=P._promiseAt(F),I=P._receiverAt(F);I===void 0&&(I=a),this._addCallbacks(q,$,B,I,null)},T.prototype._addCallbacks=function(P,F,q,$,B){var I=this._length();if(I>=65531&&(I=0,this._setLength(0)),I===0)this._promise0=q,this._receiver0=$,typeof P=="function"&&(this._fulfillmentHandler0=B===null?P:s.domainBind(B,P)),typeof F=="function"&&(this._rejectionHandler0=B===null?F:s.domainBind(B,F));else{var L=I*4-4;this[L+2]=q,this[L+3]=$,typeof P=="function"&&(this[L+0]=B===null?P:s.domainBind(B,P)),typeof F=="function"&&(this[L+1]=B===null?F:s.domainBind(B,F))}return this._setLength(I+1),I},T.prototype._proxy=function(P,F){this._addCallbacks(void 0,void 0,F,P,null)},T.prototype._resolveCallback=function(P,F){if((this._bitField&117506048)===0){if(P===this)return this._rejectCallback(e(),!1);var q=v(P,this);if(!(q instanceof T))return this._fulfill(P);F&&this._propagateFrom(q,2);var $=q._target();if($===this){this._reject(e());return}var B=$._bitField;if((B&50397184)===0){var I=this._length();I>0&&$._migrateCallback0(this);for(var L=1;L<I;++L)$._migrateCallbackAt(this,L);this._setFollowing(),this._setLength(0),this._setFollowee($)}else if((B&33554432)!==0)this._fulfill($._value());else if((B&16777216)!==0)this._reject($._reason());else{var U=new p("late cancellation observer");$._attachExtraTrace(U),this._reject(U)}}},T.prototype._rejectCallback=function(P,F,q){var $=s.ensureErrorObject(P),B=$===P;if(!B&&!q&&w.warnings()){var I="a promise was rejected with a non-error: "+s.classString(P);this._warn(I,!0)}this._attachExtraTrace($,F?B:!1),this._reject(P)},T.prototype._resolveFromExecutor=function(P){var F=this;this._captureStackTrace(),this._pushContext();var q=!0,$=this._execute(P,function(B){F._resolveCallback(B)},function(B){F._rejectCallback(B,q)});q=!1,this._popContext(),$!==void 0&&F._rejectCallback($,!0)},T.prototype._settlePromiseFromHandler=function(P,F,q,$){var B=$._bitField;if((B&65536)===0){$._pushContext();var I;F===g?!q||typeof q.length!="number"?(I=D,I.e=new f("cannot .spread() a non-array: "+s.classString(q))):I=C(P).apply(this._boundValue(),q):I=C(P).call(F,q);var L=$._popContext();B=$._bitField,(B&65536)===0&&(I===m?$._reject(q):I===D?$._rejectCallback(I.e,!1):(w.checkForgottenReturns(I,L,"",$,this),$._resolveCallback(I)))}},T.prototype._target=function(){for(var P=this;P._isFollowing();)P=P._followee();return P},T.prototype._followee=function(){return this._rejectionHandler0},T.prototype._setFollowee=function(P){this._rejectionHandler0=P},T.prototype._settlePromise=function(P,F,q,$){var B=P instanceof T,I=this._bitField,L=(I&134217728)!==0;(I&65536)!==0?(B&&P._invokeInternalOnCancel(),q instanceof S&&q.isFinallyHandler()?(q.cancelPromise=P,C(F).call(q,$)===D&&P._reject(D.e)):F===t?P._fulfill(t.call(q)):q instanceof i?q._promiseCancelled(P):B||P instanceof x?P._cancel():q.cancel()):typeof F=="function"?B?(L&&P._setAsyncGuaranteed(),this._settlePromiseFromHandler(F,q,$,P)):F.call(q,$,P):q instanceof i?q._isResolved()||((I&33554432)!==0?q._promiseFulfilled($,P):q._promiseRejected($,P)):B&&(L&&P._setAsyncGuaranteed(),(I&33554432)!==0?P._fulfill($):P._reject($))},T.prototype._settlePromiseLateCancellationObserver=function(P){var F=P.handler,q=P.promise,$=P.receiver,B=P.value;typeof F=="function"?q instanceof T?this._settlePromiseFromHandler(F,$,B,q):F.call($,B,q):q instanceof T&&q._reject(B)},T.prototype._settlePromiseCtx=function(P){this._settlePromise(P.promise,P.handler,P.receiver,P.value)},T.prototype._settlePromise0=function(P,F,q){var $=this._promise0,B=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise($,P,B,F)},T.prototype._clearCallbackDataAtIndex=function(P){var F=P*4-4;this[F+2]=this[F+3]=this[F+0]=this[F+1]=void 0},T.prototype._fulfill=function(P){var F=this._bitField;if(!((F&117506048)>>>16)){if(P===this){var q=e();return this._attachExtraTrace(q),this._reject(q)}this._setFulfilled(),this._rejectionHandler0=P,(F&65535)>0&&((F&134217728)!==0?this._settlePromises():d.settlePromises(this))}},T.prototype._reject=function(P){var F=this._bitField;if(!((F&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=P,this._isFinal())return d.fatalError(P,s.isNode);(F&65535)>0?d.settlePromises(this):this._ensurePossibleRejectionHandled()}},T.prototype._fulfillPromises=function(P,F){for(var q=1;q<P;q++){var $=this._fulfillmentHandlerAt(q),B=this._promiseAt(q),I=this._receiverAt(q);this._clearCallbackDataAtIndex(q),this._settlePromise(B,$,I,F)}},T.prototype._rejectPromises=function(P,F){for(var q=1;q<P;q++){var $=this._rejectionHandlerAt(q),B=this._promiseAt(q),I=this._receiverAt(q);this._clearCallbackDataAtIndex(q),this._settlePromise(B,$,I,F)}},T.prototype._settlePromises=function(){var P=this._bitField,F=P&65535;if(F>0){if((P&16842752)!==0){var q=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,q,P),this._rejectPromises(F,q)}else{var $=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,$,P),this._fulfillPromises(F,$)}this._setLength(0)}this._clearCancellationData()},T.prototype._settledValue=function(){var P=this._bitField;if((P&33554432)!==0)return this._rejectionHandler0;if((P&16777216)!==0)return this._fulfillmentHandler0};function N(P){this.promise._resolveCallback(P)}function j(P){this.promise._rejectCallback(P,!1)}T.defer=T.pending=function(){w.deprecated("Promise.defer","new Promise");var P=new T(y);return{promise:P,resolve:N,reject:j}},s.notEnumerableProp(T,"_makeSelfResolutionError",e),$de()(T,y,v,r,w),zde()(T,y,v,w),qde()(T,x,r,w),Wde()(T),Hde()(T),Vde()(T,x,v,y,d,o),T.Promise=T,T.version="3.4.7",Gde()(T,x,r,v,y,w),Yde()(T),Kde()(T,r,v,A,y,w),Xde()(T,y,w),Jde()(T,r,y,v,i,w),Zde()(T),Qde()(T,y),ehe()(T,x,v,r),the()(T,y,v,r),nhe()(T,x,r,v,y,w),rhe()(T,x,w),ihe()(T,x,r),ahe()(T,y),she()(T,y),ohe()(T),s.toFastProperties(T),s.toFastProperties(T.prototype);function R(P){var F=new T(y);F._fulfillmentHandler0=P,F._rejectionHandler0=P,F._promise0=P,F._receiver0=P}return R({a:1}),R({b:2}),R({c:3}),R(1),R(function(){}),R(void 0),R(!1),R(new T(y)),w.setBounds(u.firstLineError,s.lastLineError),T}})(S2)),S2.exports}var u8;function Ao(){if(u8)return Ci;u8=1;var n=On,e=lhe()();Ci.defer=t,Ci.when=e.resolve,Ci.resolve=e.resolve,Ci.all=e.all,Ci.props=e.props,Ci.reject=e.reject,Ci.promisify=e.promisify,Ci.mapSeries=e.mapSeries,Ci.attempt=e.attempt,Ci.nfcall=function(r){var i=Array.prototype.slice.call(arguments,1),a=e.promisify(r);return a.apply(null,i)},e.prototype.fail=e.prototype.caught,e.prototype.also=function(r){return this.then(function(i){var a=n.extend({},i,r(i));return e.props(a)})};function t(){var r,i,a=new e.Promise(function(s,o){r=s,i=o});return{resolve:r,reject:i,promise:a}}return Ci}var Ut={},d8;function Ll(){if(d8)return Ut;d8=1;var n=On,e=Ut.types={document:"document",paragraph:"paragraph",run:"run",text:"text",tab:"tab",checkbox:"checkbox",hyperlink:"hyperlink",noteReference:"noteReference",image:"image",note:"note",commentReference:"commentReference",comment:"comment",table:"table",tableRow:"tableRow",tableCell:"tableCell",break:"break",bookmarkStart:"bookmarkStart"};function t(S,E){return E=E||{},{type:e.document,children:S,notes:E.notes||new h({}),comments:E.comments||[]}}function r(S,E){E=E||{};var _=E.indent||{};return{type:e.paragraph,children:S,styleId:E.styleId||null,styleName:E.styleName||null,numbering:E.numbering||null,alignment:E.alignment||null,indent:{start:_.start||null,end:_.end||null,firstLine:_.firstLine||null,hanging:_.hanging||null}}}function i(S,E){return E=E||{},{type:e.run,children:S,styleId:E.styleId||null,styleName:E.styleName||null,isBold:!!E.isBold,isUnderline:!!E.isUnderline,isItalic:!!E.isItalic,isStrikethrough:!!E.isStrikethrough,isAllCaps:!!E.isAllCaps,isSmallCaps:!!E.isSmallCaps,verticalAlignment:E.verticalAlignment||a.baseline,font:E.font||null,fontSize:E.fontSize||null,highlight:E.highlight||null}}var a={baseline:"baseline",superscript:"superscript",subscript:"subscript"};function s(S){return{type:e.text,value:S}}function o(){return{type:e.tab}}function c(S){return{type:e.checkbox,checked:S.checked}}function u(S,E){return{type:e.hyperlink,children:S,href:E.href,anchor:E.anchor,targetFrame:E.targetFrame}}function d(S){return{type:e.noteReference,noteType:S.noteType,noteId:S.noteId}}function h(S){this._notes=n.indexBy(S,function(E){return g(E.noteType,E.noteId)})}h.prototype.resolve=function(S){return this.findNoteByKey(g(S.noteType,S.noteId))},h.prototype.findNoteByKey=function(S){return this._notes[S]||null};function f(S){return{type:e.note,noteType:S.noteType,noteId:S.noteId,body:S.body}}function p(S){return{type:e.commentReference,commentId:S.commentId}}function y(S){return{type:e.comment,commentId:S.commentId,body:S.body,authorName:S.authorName,authorInitials:S.authorInitials}}function g(S,E){return S+"-"+E}function m(S){return{type:e.image,read:function(E){return E?S.readImage(E):S.readImage().then(function(_){return Buffer.from(_)})},readAsArrayBuffer:function(){return S.readImage()},readAsBase64String:function(){return S.readImage("base64")},readAsBuffer:function(){return S.readImage().then(function(E){return Buffer.from(E)})},altText:S.altText,contentType:S.contentType}}function v(S,E){return E=E||{},{type:e.table,children:S,styleId:E.styleId||null,styleName:E.styleName||null}}function x(S,E){return E=E||{},{type:e.tableRow,children:S,isHeader:E.isHeader||!1}}function b(S,E){return E=E||{},{type:e.tableCell,children:S,colSpan:E.colSpan==null?1:E.colSpan,rowSpan:E.rowSpan==null?1:E.rowSpan}}function A(S){return{type:e.break,breakType:S}}function w(S){return{type:e.bookmarkStart,name:S.name}}return Ut.document=Ut.Document=t,Ut.paragraph=Ut.Paragraph=r,Ut.run=Ut.Run=i,Ut.text=Ut.Text=s,Ut.tab=Ut.Tab=o,Ut.checkbox=Ut.Checkbox=c,Ut.Hyperlink=u,Ut.noteReference=Ut.NoteReference=d,Ut.Notes=h,Ut.Note=f,Ut.commentReference=p,Ut.comment=y,Ut.Image=m,Ut.Table=v,Ut.TableRow=x,Ut.TableCell=b,Ut.lineBreak=A("line"),Ut.pageBreak=A("page"),Ut.columnBreak=A("column"),Ut.BookmarkStart=w,Ut.verticalAlignment=a,Ut}var Yl={},h8;function _s(){if(h8)return Yl;h8=1;var n=On;Yl.Result=e,Yl.success=t,Yl.warning=r,Yl.error=i;function e(c,u){this.value=c,this.messages=u||[]}e.prototype.map=function(c){return new e(c(this.value),this.messages)},e.prototype.flatMap=function(c){var u=c(this.value);return new e(u.value,a([this,u]))},e.prototype.flatMapThen=function(c){var u=this;return c(this.value).then(function(d){return new e(d.value,a([u,d]))})},e.combine=function(c){var u=n.flatten(n.pluck(c,"value")),d=a(c);return new e(u,d)};function t(c){return new e(c,[])}function r(c){return{type:"warning",message:c}}function i(c){return{type:"error",message:c.message,error:c}}function a(c){var u=[];return n.flatten(n.pluck(c,"messages"),!0).forEach(function(d){s(u,d)||u.push(d)}),u}function s(c,u){return n.find(c,o.bind(null,u))!==void 0}function o(c,u){return c.type===u.type&&c.message===u.message}return Yl}var dd={},hd={},f8;function che(){if(f8)return hd;f8=1,hd.byteLength=o,hd.toByteArray=u,hd.fromByteArray=f;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=r.length;i<a;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(p){var y=p.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=p.indexOf("=");g===-1&&(g=y);var m=g===y?0:4-g%4;return[g,m]}function o(p){var y=s(p),g=y[0],m=y[1];return(g+m)*3/4-m}function c(p,y,g){return(y+g)*3/4-g}function u(p){var y,g=s(p),m=g[0],v=g[1],x=new t(c(p,m,v)),b=0,A=v>0?m-4:m,w;for(w=0;w<A;w+=4)y=e[p.charCodeAt(w)]<<18|e[p.charCodeAt(w+1)]<<12|e[p.charCodeAt(w+2)]<<6|e[p.charCodeAt(w+3)],x[b++]=y>>16&255,x[b++]=y>>8&255,x[b++]=y&255;return v===2&&(y=e[p.charCodeAt(w)]<<2|e[p.charCodeAt(w+1)]>>4,x[b++]=y&255),v===1&&(y=e[p.charCodeAt(w)]<<10|e[p.charCodeAt(w+1)]<<4|e[p.charCodeAt(w+2)]>>2,x[b++]=y>>8&255,x[b++]=y&255),x}function d(p){return n[p>>18&63]+n[p>>12&63]+n[p>>6&63]+n[p&63]}function h(p,y,g){for(var m,v=[],x=y;x<g;x+=3)m=(p[x]<<16&16711680)+(p[x+1]<<8&65280)+(p[x+2]&255),v.push(d(m));return v.join("")}function f(p){for(var y,g=p.length,m=g%3,v=[],x=16383,b=0,A=g-m;b<A;b+=x)v.push(h(p,b,b+x>A?A:b+x));return m===1?(y=p[g-1],v.push(n[y>>2]+n[y<<4&63]+"==")):m===2&&(y=(p[g-2]<<8)+p[g-1],v.push(n[y>>10]+n[y>>4&63]+n[y<<2&63]+"=")),v.join("")}return hd}function ip(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var tw={exports:{}};var p8;function uhe(){return p8||(p8=1,(function(n,e){(function(t){n.exports=t()})(function(){return(function t(r,i,a){function s(u,d){if(!i[u]){if(!r[u]){var h=typeof ip=="function"&&ip;if(!d&&h)return h(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var p=i[u]={exports:{}};r[u][0].call(p.exports,function(y){var g=r[u][1][y];return s(g||y)},p,p.exports,t,r,i,a)}return i[u].exports}for(var o=typeof ip=="function"&&ip,c=0;c<a.length;c++)s(a[c]);return s})({1:[function(t,r,i){var a=t("./utils"),s=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var u,d,h,f,p,y,g,m=[],v=0,x=c.length,b=x,A=a.getTypeOf(c)!=="string";v<c.length;)b=x-v,h=A?(u=c[v++],d=v<x?c[v++]:0,v<x?c[v++]:0):(u=c.charCodeAt(v++),d=v<x?c.charCodeAt(v++):0,v<x?c.charCodeAt(v++):0),f=u>>2,p=(3&u)<<4|d>>4,y=1<b?(15&d)<<2|h>>6:64,g=2<b?63&h:64,m.push(o.charAt(f)+o.charAt(p)+o.charAt(y)+o.charAt(g));return m.join("")},i.decode=function(c){var u,d,h,f,p,y,g=0,m=0,v="data:";if(c.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var x,b=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&b--,c.charAt(c.length-2)===o.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=s.uint8array?new Uint8Array(0|b):new Array(0|b);g<c.length;)u=o.indexOf(c.charAt(g++))<<2|(f=o.indexOf(c.charAt(g++)))>>4,d=(15&f)<<4|(p=o.indexOf(c.charAt(g++)))>>2,h=(3&p)<<6|(y=o.indexOf(c.charAt(g++))),x[m++]=u,p!==64&&(x[m++]=d),y!==64&&(x[m++]=h);return x}},{"./support":30,"./utils":32}],2:[function(t,r,i){var a=t("./external"),s=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),c=t("./stream/DataLengthProbe");function u(d,h,f,p,y){this.compressedSize=d,this.uncompressedSize=h,this.crc32=f,this.compression=p,this.compressedContent=y}u.prototype={getContentWorker:function(){var d=new s(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new s(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,h,f){return d.pipe(new o).pipe(new c("uncompressedSize")).pipe(h.compressWorker(f)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var a=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var a=t("./utils"),s=(function(){for(var o,c=[],u=0;u<256;u++){o=u;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;c[u]=o}return c})();r.exports=function(o,c){return o!==void 0&&o.length?a.getTypeOf(o)!=="string"?(function(u,d,h,f){var p=s,y=f+h;u^=-1;for(var g=f;g<y;g++)u=u>>>8^p[255&(u^d[g])];return-1^u})(0|c,o,o.length,0):(function(u,d,h,f){var p=s,y=f+h;u^=-1;for(var g=f;g<y;g++)u=u>>>8^p[255&(u^d.charCodeAt(g))];return-1^u})(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var a=null;a=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:a}},{lie:37}],7:[function(t,r,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),o=t("./utils"),c=t("./stream/GenericWorker"),u=a?"uint8array":"array";function d(h,f){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=f,this.meta={}}i.magic="\b\0",o.inherits(d,c),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,h.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(f){h.push({data:f,meta:h.meta})}},i.compressWorker=function(h){return new d("Deflate",h)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){function a(p,y){var g,m="";for(g=0;g<y;g++)m+=String.fromCharCode(255&p),p>>>=8;return m}function s(p,y,g,m,v,x){var b,A,w=p.file,S=p.compression,E=x!==u.utf8encode,_=o.transformTo("string",x(w.name)),D=o.transformTo("string",u.utf8encode(w.name)),C=w.comment,k=o.transformTo("string",x(C)),T=o.transformTo("string",u.utf8encode(C)),N=D.length!==w.name.length,j=T.length!==C.length,R="",P="",F="",q=w.dir,$=w.date,B={crc32:0,compressedSize:0,uncompressedSize:0};y&&!g||(B.crc32=p.crc32,B.compressedSize=p.compressedSize,B.uncompressedSize=p.uncompressedSize);var I=0;y&&(I|=8),E||!N&&!j||(I|=2048);var L=0,U=0;q&&(L|=16),v==="UNIX"?(U=798,L|=(function(H,V){var K=H;return H||(K=V?16893:33204),(65535&K)<<16})(w.unixPermissions,q)):(U=20,L|=(function(H){return 63&(H||0)})(w.dosPermissions)),b=$.getUTCHours(),b<<=6,b|=$.getUTCMinutes(),b<<=5,b|=$.getUTCSeconds()/2,A=$.getUTCFullYear()-1980,A<<=4,A|=$.getUTCMonth()+1,A<<=5,A|=$.getUTCDate(),N&&(P=a(1,1)+a(d(_),4)+D,R+="up"+a(P.length,2)+P),j&&(F=a(1,1)+a(d(k),4)+T,R+="uc"+a(F.length,2)+F);var G="";return G+=`
\0`,G+=a(I,2),G+=S.magic,G+=a(b,2),G+=a(A,2),G+=a(B.crc32,4),G+=a(B.compressedSize,4),G+=a(B.uncompressedSize,4),G+=a(_.length,2),G+=a(R.length,2),{fileRecord:h.LOCAL_FILE_HEADER+G+_+R,dirRecord:h.CENTRAL_FILE_HEADER+a(U,2)+G+a(k.length,2)+"\0\0\0\0"+a(L,4)+a(m,4)+_+R+k}}var o=t("../utils"),c=t("../stream/GenericWorker"),u=t("../utf8"),d=t("../crc32"),h=t("../signature");function f(p,y,g,m){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=g,this.encodeFileName=m,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,c),f.prototype.push=function(p){var y=p.meta.percent||0,g=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,c.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:g?(y+100*(g-m-1))/g:100}}))},f.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var y=this.streamFiles&&!p.file.dir;if(y){var g=s(p,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(p){this.accumulate=!1;var y=this.streamFiles&&!p.file.dir,g=s(p,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),y)this.push({data:(function(m){return h.DATA_DESCRIPTOR+a(m.crc32,4)+a(m.compressedSize,4)+a(m.uncompressedSize,4)})(p),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var p=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var g=this.bytesWritten-p,m=(function(v,x,b,A,w){var S=o.transformTo("string",w(A));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(v,2)+a(v,2)+a(x,4)+a(b,4)+a(S.length,2)+S})(this.dirRecords.length,g,p,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(p){this._sources.push(p);var y=this;return p.on("data",function(g){y.processChunk(g)}),p.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),p.on("error",function(g){y.error(g)}),this},f.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(p){var y=this._sources;if(!c.prototype.error.call(this,p))return!1;for(var g=0;g<y.length;g++)try{y[g].error(p)}catch{}return!0},f.prototype.lock=function(){c.prototype.lock.call(this);for(var p=this._sources,y=0;y<p.length;y++)p[y].lock()},r.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var a=t("../compressions"),s=t("./ZipFileWorker");i.generateWorker=function(o,c,u){var d=new s(c.streamFiles,u,c.platform,c.encodeFileName),h=0;try{o.forEach(function(f,p){h++;var y=(function(x,b){var A=x||b,w=a[A];if(!w)throw new Error(A+" is not a valid compression method !");return w})(p.options.compression,c.compression),g=p.options.compressionOptions||c.compressionOptions||{},m=p.dir,v=p.date;p._compressWorker(y,g).withStreamInfo("file",{name:f,dir:m,date:v,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(f){d.error(f)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new a;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(s,o){return new a().loadAsync(s,o)},a.external=t("./external"),r.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var a=t("./utils"),s=t("./external"),o=t("./utf8"),c=t("./zipEntries"),u=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function h(f){return new s.Promise(function(p,y){var g=f.decompressed.getContentWorker().pipe(new u);g.on("error",function(m){y(m)}).on("end",function(){g.streamInfo.crc32!==f.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(f,p){var y=this;return p=a.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(f)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",f,!0,p.optimizedBinaryString,p.base64).then(function(g){var m=new c(p);return m.load(g),m}).then(function(g){var m=[s.Promise.resolve(g)],v=g.files;if(p.checkCRC32)for(var x=0;x<v.length;x++)m.push(h(v[x]));return s.Promise.all(m)}).then(function(g){for(var m=g.shift(),v=m.files,x=0;x<v.length;x++){var b=v[x],A=b.fileNameStr,w=a.resolve(b.fileNameStr);y.file(w,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:p.createFolders}),b.dir||(y.file(w).unsafeOriginalName=A)}return m.zipComment.length&&(y.comment=m.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var a=t("../utils"),s=t("../stream/GenericWorker");function o(c,u){s.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}a.inherits(o,s),o.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var a=t("readable-stream").Readable;function s(o,c,u){a.call(this,c),this._helper=o;var d=this;o.on("data",function(h,f){d.push(h)||d._helper.pause(),u&&u(f)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}t("../utils").inherits(s,a),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,s);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,s)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var s=new Buffer(a);return s.fill(0),s},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,r,i){function a(w,S,E){var _,D=o.getTypeOf(S),C=o.extend(E||{},d);C.date=C.date||new Date,C.compression!==null&&(C.compression=C.compression.toUpperCase()),typeof C.unixPermissions=="string"&&(C.unixPermissions=parseInt(C.unixPermissions,8)),C.unixPermissions&&16384&C.unixPermissions&&(C.dir=!0),C.dosPermissions&&16&C.dosPermissions&&(C.dir=!0),C.dir&&(w=v(w)),C.createFolders&&(_=m(w))&&x.call(this,_,!0);var k=D==="string"&&C.binary===!1&&C.base64===!1;E&&E.binary!==void 0||(C.binary=!k),(S instanceof h&&S.uncompressedSize===0||C.dir||!S||S.length===0)&&(C.base64=!1,C.binary=!0,S="",C.compression="STORE",D="string");var T=null;T=S instanceof h||S instanceof c?S:y.isNode&&y.isStream(S)?new g(w,S):o.prepareContent(w,S,C.binary,C.optimizedBinaryString,C.base64);var N=new f(w,T,C);this.files[w]=N}var s=t("./utf8"),o=t("./utils"),c=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),d=t("./defaults"),h=t("./compressedObject"),f=t("./zipObject"),p=t("./generate"),y=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),m=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var S=w.lastIndexOf("/");return 0<S?w.substring(0,S):""},v=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},x=function(w,S){return S=S!==void 0?S:d.createFolders,w=v(w),this.files[w]||a.call(this,w,null,{dir:!0,createFolders:S}),this.files[w]};function b(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var S,E,_;for(S in this.files)_=this.files[S],(E=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&w(E,_)},filter:function(w){var S=[];return this.forEach(function(E,_){w(E,_)&&S.push(_)}),S},file:function(w,S,E){if(arguments.length!==1)return w=this.root+w,a.call(this,w,S,E),this;if(b(w)){var _=w;return this.filter(function(C,k){return!k.dir&&_.test(C)})}var D=this.files[this.root+w];return D&&!D.dir?D:null},folder:function(w){if(!w)return this;if(b(w))return this.filter(function(D,C){return C.dir&&w.test(D)});var S=this.root+w,E=x.call(this,S),_=this.clone();return _.root=E.name,_},remove:function(w){w=this.root+w;var S=this.files[w];if(S||(w.slice(-1)!=="/"&&(w+="/"),S=this.files[w]),S&&!S.dir)delete this.files[w];else for(var E=this.filter(function(D,C){return C.name.slice(0,w.length)===w}),_=0;_<E.length;_++)delete this.files[E[_].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var S,E={};try{if((E=o.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");o.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var _=E.comment||this.comment||"";S=p.generateWorker(this,E,_)}catch(D){(S=new c("error")).error(D)}return new u(S,E.type||"string",E.mimeType)},generateAsync:function(w,S){return this.generateInternalStream(w).accumulate(S)},generateNodeStream:function(w,S){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(S)}};r.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var a=t("./DataReader");function s(o){a.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}t("../utils").inherits(s,a),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===c&&this.data[f+1]===u&&this.data[f+2]===d&&this.data[f+3]===h)return f-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),f=this.readData(4);return c===f[0]&&u===f[1]&&d===f[2]&&h===f[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var a=t("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,u=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=o,u},readString:function(o){return a.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=s},{"../utils":32}],19:[function(t,r,i){var a=t("./Uint8ArrayReader");function s(o){a.call(this,o)}t("../utils").inherits(s,a),s.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var a=t("./DataReader");function s(o){a.call(this,o)}t("../utils").inherits(s,a),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var a=t("./ArrayReader");function s(o){a.call(this,o)}t("../utils").inherits(s,a),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var a=t("../utils"),s=t("../support"),o=t("./ArrayReader"),c=t("./StringReader"),u=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");r.exports=function(h){var f=a.getTypeOf(h);return a.checkSupport(f),f!=="string"||s.uint8array?f==="nodebuffer"?new u(h):s.uint8array?new d(a.transformTo("uint8array",h)):new o(a.transformTo("array",h)):new c(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var a=t("./GenericWorker"),s=t("../utils");function o(c){a.call(this,"ConvertWorker to "+c),this.destType=c}s.inherits(o,a),o.prototype.processChunk=function(c){this.push({data:s.transformTo(this.destType,c.data),meta:c.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var a=t("./GenericWorker"),s=t("../crc32");function o(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,a),o.prototype.processChunk=function(c){this.streamInfo.crc32=s(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var a=t("../utils"),s=t("./GenericWorker");function o(c){s.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}a.inherits(o,s),o.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}s.prototype.processChunk.call(this,c)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var a=t("../utils"),s=t("./GenericWorker");function o(c){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=a.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}a.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function a(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var c=0;c<this._listeners[s].length;c++)this._listeners[s][c].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(c){o.processChunk(c)}),s.on("end",function(){o.end()}),s.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=a},{}],29:[function(t,r,i){var a=t("../utils"),s=t("./ConvertWorker"),o=t("./GenericWorker"),c=t("../base64"),u=t("../support"),d=t("../external"),h=null;if(u.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(y,g){return new d.Promise(function(m,v){var x=[],b=y._internalType,A=y._outputType,w=y._mimeType;y.on("data",function(S,E){x.push(S),g&&g(E)}).on("error",function(S){x=[],v(S)}).on("end",function(){try{var S=(function(E,_,D){switch(E){case"blob":return a.newBlob(a.transformTo("arraybuffer",_),D);case"base64":return c.encode(_);default:return a.transformTo(E,_)}})(A,(function(E,_){var D,C=0,k=null,T=0;for(D=0;D<_.length;D++)T+=_[D].length;switch(E){case"string":return _.join("");case"array":return Array.prototype.concat.apply([],_);case"uint8array":for(k=new Uint8Array(T),D=0;D<_.length;D++)k.set(_[D],C),C+=_[D].length;return k;case"nodebuffer":return Buffer.concat(_);default:throw new Error("concat : unsupported type '"+E+"'")}})(b,x),w);m(S)}catch(E){v(E)}x=[]}).resume()})}function p(y,g,m){var v=g;switch(g){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=g,this._mimeType=m,a.checkSupport(v),this._worker=y.pipe(new s(v)),y.lock()}catch(x){this._worker=new o("error"),this._worker.error(x)}}p.prototype={accumulate:function(y){return f(this,y)},on:function(y,g){var m=this;return y==="data"?this._worker.on(y,function(v){g.call(m,v.data,v.meta)}):this._worker.on(y,function(){a.delay(g,arguments,m)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},y)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(a),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var a=t("./utils"),s=t("./support"),o=t("./nodejsUtils"),c=t("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function h(){c.call(this,"utf-8 decode"),this.leftOver=null}function f(){c.call(this,"utf-8 encode")}i.utf8encode=function(p){return s.nodebuffer?o.newBufferFrom(p,"utf-8"):(function(y){var g,m,v,x,b,A=y.length,w=0;for(x=0;x<A;x++)(64512&(m=y.charCodeAt(x)))==55296&&x+1<A&&(64512&(v=y.charCodeAt(x+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),x++),w+=m<128?1:m<2048?2:m<65536?3:4;for(g=s.uint8array?new Uint8Array(w):new Array(w),x=b=0;b<w;x++)(64512&(m=y.charCodeAt(x)))==55296&&x+1<A&&(64512&(v=y.charCodeAt(x+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),x++),m<128?g[b++]=m:(m<2048?g[b++]=192|m>>>6:(m<65536?g[b++]=224|m>>>12:(g[b++]=240|m>>>18,g[b++]=128|m>>>12&63),g[b++]=128|m>>>6&63),g[b++]=128|63&m);return g})(p)},i.utf8decode=function(p){return s.nodebuffer?a.transformTo("nodebuffer",p).toString("utf-8"):(function(y){var g,m,v,x,b=y.length,A=new Array(2*b);for(g=m=0;g<b;)if((v=y[g++])<128)A[m++]=v;else if(4<(x=u[v]))A[m++]=65533,g+=x-1;else{for(v&=x===2?31:x===3?15:7;1<x&&g<b;)v=v<<6|63&y[g++],x--;1<x?A[m++]=65533:v<65536?A[m++]=v:(v-=65536,A[m++]=55296|v>>10&1023,A[m++]=56320|1023&v)}return A.length!==m&&(A.subarray?A=A.subarray(0,m):A.length=m),a.applyFromCharCode(A)})(p=a.transformTo(s.uint8array?"uint8array":"array",p))},a.inherits(h,c),h.prototype.processChunk=function(p){var y=a.transformTo(s.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var g=y;(y=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),y.set(g,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var m=(function(x,b){var A;for((b=b||x.length)>x.length&&(b=x.length),A=b-1;0<=A&&(192&x[A])==128;)A--;return A<0||A===0?b:A+u[x[A]]>b?A:b})(y),v=y;m!==y.length&&(s.uint8array?(v=y.subarray(0,m),this.leftOver=y.subarray(m,y.length)):(v=y.slice(0,m),this.leftOver=y.slice(m,y.length))),this.push({data:i.utf8decode(v),meta:p.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,a.inherits(f,c),f.prototype.processChunk=function(p){this.push({data:i.utf8encode(p.data),meta:p.meta})},i.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var a=t("./support"),s=t("./base64"),o=t("./nodejsUtils"),c=t("./external");function u(g){return g}function d(g,m){for(var v=0;v<g.length;++v)m[v]=255&g.charCodeAt(v);return m}t("setimmediate"),i.newBlob=function(g,m){i.checkSupport("blob");try{return new Blob([g],{type:m})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(g),v.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(g,m,v){var x=[],b=0,A=g.length;if(A<=v)return String.fromCharCode.apply(null,g);for(;b<A;)m==="array"||m==="nodebuffer"?x.push(String.fromCharCode.apply(null,g.slice(b,Math.min(b+v,A)))):x.push(String.fromCharCode.apply(null,g.subarray(b,Math.min(b+v,A)))),b+=v;return x.join("")},stringifyByChar:function(g){for(var m="",v=0;v<g.length;v++)m+=String.fromCharCode(g[v]);return m},applyCanBeUsed:{uint8array:(function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function f(g){var m=65536,v=i.getTypeOf(g),x=!0;if(v==="uint8array"?x=h.applyCanBeUsed.uint8array:v==="nodebuffer"&&(x=h.applyCanBeUsed.nodebuffer),x)for(;1<m;)try{return h.stringifyByChunk(g,v,m)}catch{m=Math.floor(m/2)}return h.stringifyByChar(g)}function p(g,m){for(var v=0;v<g.length;v++)m[v]=g[v];return m}i.applyFromCharCode=f;var y={};y.string={string:u,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return y.string.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:function(g){return d(g,o.allocBuffer(g.length))}},y.array={string:f,array:u,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return o.newBufferFrom(g)}},y.arraybuffer={string:function(g){return f(new Uint8Array(g))},array:function(g){return p(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:u,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return o.newBufferFrom(new Uint8Array(g))}},y.uint8array={string:f,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:u,nodebuffer:function(g){return o.newBufferFrom(g)}},y.nodebuffer={string:f,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return y.nodebuffer.uint8array(g).buffer},uint8array:function(g){return p(g,new Uint8Array(g.length))},nodebuffer:u},i.transformTo=function(g,m){if(m=m||"",!g)return m;i.checkSupport(g);var v=i.getTypeOf(m);return y[v][g](m)},i.resolve=function(g){for(var m=g.split("/"),v=[],x=0;x<m.length;x++){var b=m[x];b==="."||b===""&&x!==0&&x!==m.length-1||(b===".."?v.pop():v.push(b))}return v.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":a.nodebuffer&&o.isBuffer(g)?"nodebuffer":a.uint8array&&g instanceof Uint8Array?"uint8array":a.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!a[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var m,v,x="";for(v=0;v<(g||"").length;v++)x+="\\x"+((m=g.charCodeAt(v))<16?"0":"")+m.toString(16).toUpperCase();return x},i.delay=function(g,m,v){setImmediate(function(){g.apply(v||null,m||[])})},i.inherits=function(g,m){function v(){}v.prototype=m.prototype,g.prototype=new v},i.extend=function(){var g,m,v={};for(g=0;g<arguments.length;g++)for(m in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],m)&&v[m]===void 0&&(v[m]=arguments[g][m]);return v},i.prepareContent=function(g,m,v,x,b){return c.Promise.resolve(m).then(function(A){return a.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new c.Promise(function(w,S){var E=new FileReader;E.onload=function(_){w(_.target.result)},E.onerror=function(_){S(_.target.error)},E.readAsArrayBuffer(A)}):A}).then(function(A){var w=i.getTypeOf(A);return w?(w==="arraybuffer"?A=i.transformTo("uint8array",A):w==="string"&&(b?A=s.decode(A):v&&x!==!0&&(A=(function(S){return d(S,a.uint8array?new Uint8Array(S.length):new Array(S.length))})(A))),A):c.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var a=t("./reader/readerFor"),s=t("./utils"),o=t("./signature"),c=t("./zipEntry"),u=t("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(f)+", expected "+s.pretty(h)+")")}},isSignature:function(h,f){var p=this.reader.index;this.reader.setIndex(h);var y=this.reader.readString(4)===f;return this.reader.setIndex(p),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),f=u.uint8array?"uint8array":"array",p=s.transformTo(f,h);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,f,p,y=this.zip64EndOfCentralSize-44;0<y;)h=this.reader.readInt(2),f=this.reader.readInt(4),p=this.reader.readData(f),this.zip64ExtensibleData[h]={id:h,length:f,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,f;for(h=0;h<this.files.length;h++)f=this.files[h],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var f=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var y=f-p;if(0<y)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(h){this.reader=a(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var a=t("./reader/readerFor"),s=t("./utils"),o=t("./compressedObject"),c=t("./crc32"),u=t("./utf8"),d=t("./compressions"),h=t("./support");function f(p,y){this.options=p,this.loadOptions=y}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var y,g;if(p.skip(22),this.fileNameLength=p.readInt(2),g=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=(function(m){for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&d[v].magic===m)return d[v];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,y,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var y=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(y),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=a(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var y,g,m,v=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<v;)y=p.readInt(2),g=p.readInt(2),m=p.readData(g),this.extraFields[y]={id:y,length:g,value:m};p.setIndex(v)},handleUTF8:function(){var p=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var g=s.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var v=s.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var y=a(p.value);return y.readInt(1)!==1||c(this.fileName)!==y.readInt(4)?null:u.utf8decode(y.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var y=a(p.value);return y.readInt(1)!==1||c(this.fileComment)!==y.readInt(4)?null:u.utf8decode(y.readData(p.length-5))}return null}},r.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){function a(y,g,m){this.name=y,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=g,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var s=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),c=t("./utf8"),u=t("./compressedObject"),d=t("./stream/GenericWorker");a.prototype={internalStream:function(y){var g=null,m="string";try{if(!y)throw new Error("No output type specified.");var v=(m=y.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),g=this._decompressWorker();var x=!this._dataBinary;x&&!v&&(g=g.pipe(new c.Utf8EncodeWorker)),!x&&v&&(g=g.pipe(new c.Utf8DecodeWorker))}catch(b){(g=new d("error")).error(b)}return new s(g,m,"")},async:function(y,g){return this.internalStream(y).accumulate(g)},nodeStream:function(y,g){return this.internalStream(y||"nodebuffer").toNodejsStream(g)},_compressWorker:function(y,g){if(this._data instanceof u&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(m,y,g)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<h.length;p++)a.prototype[h[p]]=f;r.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(a){var s,o,c=a.MutationObserver||a.WebKitMutationObserver;if(c){var u=0,d=new c(y),h=a.document.createTextNode("");d.observe(h,{characterData:!0}),s=function(){h.data=u=++u%2}}else if(a.setImmediate||a.MessageChannel===void 0)s="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var g=a.document.createElement("script");g.onreadystatechange=function(){y(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},a.document.documentElement.appendChild(g)}:function(){setTimeout(y,0)};else{var f=new a.MessageChannel;f.port1.onmessage=y,s=function(){f.port2.postMessage(0)}}var p=[];function y(){var g,m;o=!0;for(var v=p.length;v;){for(m=p,p=[],g=-1;++g<v;)m[g]();v=p.length}o=!1}r.exports=function(g){p.push(g)!==1||o||s()}}).call(this,typeof Li<"u"?Li:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var a=t("immediate");function s(){}var o={},c=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function h(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,v!==s&&g(this,v)}function f(v,x,b){this.promise=v,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function p(v,x,b){a(function(){var A;try{A=x(b)}catch(w){return o.reject(v,w)}A===v?o.reject(v,new TypeError("Cannot resolve promise with itself")):o.resolve(v,A)})}function y(v){var x=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof x=="function")return function(){x.apply(v,arguments)}}function g(v,x){var b=!1;function A(E){b||(b=!0,o.reject(v,E))}function w(E){b||(b=!0,o.resolve(v,E))}var S=m(function(){x(w,A)});S.status==="error"&&A(S.value)}function m(v,x){var b={};try{b.value=v(x),b.status="success"}catch(A){b.status="error",b.value=A}return b}(r.exports=h).prototype.finally=function(v){if(typeof v!="function")return this;var x=this.constructor;return this.then(function(b){return x.resolve(v()).then(function(){return b})},function(b){return x.resolve(v()).then(function(){throw b})})},h.prototype.catch=function(v){return this.then(null,v)},h.prototype.then=function(v,x){if(typeof v!="function"&&this.state===u||typeof x!="function"&&this.state===c)return this;var b=new this.constructor(s);return this.state!==d?p(b,this.state===u?v:x,this.outcome):this.queue.push(new f(b,v,x)),b},f.prototype.callFulfilled=function(v){o.resolve(this.promise,v)},f.prototype.otherCallFulfilled=function(v){p(this.promise,this.onFulfilled,v)},f.prototype.callRejected=function(v){o.reject(this.promise,v)},f.prototype.otherCallRejected=function(v){p(this.promise,this.onRejected,v)},o.resolve=function(v,x){var b=m(y,x);if(b.status==="error")return o.reject(v,b.value);var A=b.value;if(A)g(v,A);else{v.state=u,v.outcome=x;for(var w=-1,S=v.queue.length;++w<S;)v.queue[w].callFulfilled(x)}return v},o.reject=function(v,x){v.state=c,v.outcome=x;for(var b=-1,A=v.queue.length;++b<A;)v.queue[b].callRejected(x);return v},h.resolve=function(v){return v instanceof this?v:o.resolve(new this(s),v)},h.reject=function(v){var x=new this(s);return o.reject(x,v)},h.all=function(v){var x=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=v.length,A=!1;if(!b)return this.resolve([]);for(var w=new Array(b),S=0,E=-1,_=new this(s);++E<b;)D(v[E],E);return _;function D(C,k){x.resolve(C).then(function(T){w[k]=T,++S!==b||A||(A=!0,o.resolve(_,w))},function(T){A||(A=!0,o.reject(_,T))})}},h.race=function(v){var x=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=v.length,A=!1;if(!b)return this.resolve([]);for(var w=-1,S=new this(s);++w<b;)E=v[w],x.resolve(E).then(function(_){A||(A=!0,o.resolve(S,_))},function(_){A||(A=!0,o.reject(S,_))});var E;return S}},{immediate:36}],38:[function(t,r,i){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var a=t("./zlib/deflate"),s=t("./utils/common"),o=t("./utils/strings"),c=t("./zlib/messages"),u=t("./zlib/zstream"),d=Object.prototype.toString,h=0,f=-1,p=0,y=8;function g(v){if(!(this instanceof g))return new g(v);this.options=s.assign({level:f,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},v||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=a.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(b!==h)throw new Error(c[b]);if(x.header&&a.deflateSetHeader(this.strm,x.header),x.dictionary){var A;if(A=typeof x.dictionary=="string"?o.string2buf(x.dictionary):d.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(b=a.deflateSetDictionary(this.strm,A))!==h)throw new Error(c[b]);this._dict_set=!0}}function m(v,x){var b=new g(x);if(b.push(v,!0),b.err)throw b.msg||c[b.err];return b.result}g.prototype.push=function(v,x){var b,A,w=this.strm,S=this.options.chunkSize;if(this.ended)return!1;A=x===~~x?x:x===!0?4:0,typeof v=="string"?w.input=o.string2buf(v):d.call(v)==="[object ArrayBuffer]"?w.input=new Uint8Array(v):w.input=v,w.next_in=0,w.avail_in=w.input.length;do{if(w.avail_out===0&&(w.output=new s.Buf8(S),w.next_out=0,w.avail_out=S),(b=a.deflate(w,A))!==1&&b!==h)return this.onEnd(b),!(this.ended=!0);w.avail_out!==0&&(w.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(w.output,w.next_out))):this.onData(s.shrinkBuf(w.output,w.next_out)))}while((0<w.avail_in||w.avail_out===0)&&b!==1);return A===4?(b=a.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===h):A!==2||(this.onEnd(h),!(w.avail_out=0))},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Deflate=g,i.deflate=m,i.deflateRaw=function(v,x){return(x=x||{}).raw=!0,m(v,x)},i.gzip=function(v,x){return(x=x||{}).gzip=!0,m(v,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var a=t("./zlib/inflate"),s=t("./utils/common"),o=t("./utils/strings"),c=t("./zlib/constants"),u=t("./zlib/messages"),d=t("./zlib/zstream"),h=t("./zlib/gzheader"),f=Object.prototype.toString;function p(g){if(!(this instanceof p))return new p(g);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},g||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||g&&g.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&(15&m.windowBits)==0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var v=a.inflateInit2(this.strm,m.windowBits);if(v!==c.Z_OK)throw new Error(u[v]);this.header=new h,a.inflateGetHeader(this.strm,this.header)}function y(g,m){var v=new p(m);if(v.push(g,!0),v.err)throw v.msg||u[v.err];return v.result}p.prototype.push=function(g,m){var v,x,b,A,w,S,E=this.strm,_=this.options.chunkSize,D=this.options.dictionary,C=!1;if(this.ended)return!1;x=m===~~m?m:m===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof g=="string"?E.input=o.binstring2buf(g):f.call(g)==="[object ArrayBuffer]"?E.input=new Uint8Array(g):E.input=g,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new s.Buf8(_),E.next_out=0,E.avail_out=_),(v=a.inflate(E,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&D&&(S=typeof D=="string"?o.string2buf(D):f.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,v=a.inflateSetDictionary(this.strm,S)),v===c.Z_BUF_ERROR&&C===!0&&(v=c.Z_OK,C=!1),v!==c.Z_STREAM_END&&v!==c.Z_OK)return this.onEnd(v),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&v!==c.Z_STREAM_END&&(E.avail_in!==0||x!==c.Z_FINISH&&x!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=o.utf8border(E.output,E.next_out),A=E.next_out-b,w=o.buf2string(E.output,b),E.next_out=A,E.avail_out=_-A,A&&s.arraySet(E.output,E.output,b,A,0),this.onData(w)):this.onData(s.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(C=!0)}while((0<E.avail_in||E.avail_out===0)&&v!==c.Z_STREAM_END);return v===c.Z_STREAM_END&&(x=c.Z_FINISH),x===c.Z_FINISH?(v=a.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===c.Z_OK):x!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(E.avail_out=0))},p.prototype.onData=function(g){this.chunks.push(g)},p.prototype.onEnd=function(g){g===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=p,i.inflate=y,i.inflateRaw=function(g,m){return(m=m||{}).raw=!0,y(g,m)},i.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(c[h]=d[h])}}return c},i.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var s={arraySet:function(c,u,d,h,f){if(u.subarray&&c.subarray)c.set(u.subarray(d,d+h),f);else for(var p=0;p<h;p++)c[f+p]=u[d+p]},flattenChunks:function(c){var u,d,h,f,p,y;for(u=h=0,d=c.length;u<d;u++)h+=c[u].length;for(y=new Uint8Array(h),u=f=0,d=c.length;u<d;u++)p=c[u],y.set(p,f),f+=p.length;return y}},o={arraySet:function(c,u,d,h,f){for(var p=0;p<h;p++)c[f+p]=u[d+p]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(a)},{}],42:[function(t,r,i){var a=t("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new a.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(h,f){if(f<65537&&(h.subarray&&o||!h.subarray&&s))return String.fromCharCode.apply(null,a.shrinkBuf(h,f));for(var p="",y=0;y<f;y++)p+=String.fromCharCode(h[y]);return p}c[254]=c[254]=1,i.string2buf=function(h){var f,p,y,g,m,v=h.length,x=0;for(g=0;g<v;g++)(64512&(p=h.charCodeAt(g)))==55296&&g+1<v&&(64512&(y=h.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(y-56320),g++),x+=p<128?1:p<2048?2:p<65536?3:4;for(f=new a.Buf8(x),g=m=0;m<x;g++)(64512&(p=h.charCodeAt(g)))==55296&&g+1<v&&(64512&(y=h.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(y-56320),g++),p<128?f[m++]=p:(p<2048?f[m++]=192|p>>>6:(p<65536?f[m++]=224|p>>>12:(f[m++]=240|p>>>18,f[m++]=128|p>>>12&63),f[m++]=128|p>>>6&63),f[m++]=128|63&p);return f},i.buf2binstring=function(h){return d(h,h.length)},i.binstring2buf=function(h){for(var f=new a.Buf8(h.length),p=0,y=f.length;p<y;p++)f[p]=h.charCodeAt(p);return f},i.buf2string=function(h,f){var p,y,g,m,v=f||h.length,x=new Array(2*v);for(p=y=0;p<v;)if((g=h[p++])<128)x[y++]=g;else if(4<(m=c[g]))x[y++]=65533,p+=m-1;else{for(g&=m===2?31:m===3?15:7;1<m&&p<v;)g=g<<6|63&h[p++],m--;1<m?x[y++]=65533:g<65536?x[y++]=g:(g-=65536,x[y++]=55296|g>>10&1023,x[y++]=56320|1023&g)}return d(x,y)},i.utf8border=function(h,f){var p;for((f=f||h.length)>h.length&&(f=h.length),p=f-1;0<=p&&(192&h[p])==128;)p--;return p<0||p===0?f:p+c[h[p]]>f?p:f}},{"./common":41}],43:[function(t,r,i){r.exports=function(a,s,o,c){for(var u=65535&a|0,d=a>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;d=d+(u=u+s[c++]|0)|0,--h;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){var a=(function(){for(var s,o=[],c=0;c<256;c++){s=c;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;o[c]=s}return o})();r.exports=function(s,o,c,u){var d=a,h=u+c;s^=-1;for(var f=u;f<h;f++)s=s>>>8^d[255&(s^o[f])];return-1^s}},{}],46:[function(t,r,i){var a,s=t("../utils/common"),o=t("./trees"),c=t("./adler32"),u=t("./crc32"),d=t("./messages"),h=0,f=4,p=0,y=-2,g=-1,m=4,v=2,x=8,b=9,A=286,w=30,S=19,E=2*A+1,_=15,D=3,C=258,k=C+D+1,T=42,N=113,j=1,R=2,P=3,F=4;function q(O,ie){return O.msg=d[ie],ie}function $(O){return(O<<1)-(4<O?9:0)}function B(O){for(var ie=O.length;0<=--ie;)O[ie]=0}function I(O){var ie=O.state,re=ie.pending;re>O.avail_out&&(re=O.avail_out),re!==0&&(s.arraySet(O.output,ie.pending_buf,ie.pending_out,re,O.next_out),O.next_out+=re,ie.pending_out+=re,O.total_out+=re,O.avail_out-=re,ie.pending-=re,ie.pending===0&&(ie.pending_out=0))}function L(O,ie){o._tr_flush_block(O,0<=O.block_start?O.block_start:-1,O.strstart-O.block_start,ie),O.block_start=O.strstart,I(O.strm)}function U(O,ie){O.pending_buf[O.pending++]=ie}function G(O,ie){O.pending_buf[O.pending++]=ie>>>8&255,O.pending_buf[O.pending++]=255&ie}function H(O,ie){var re,Z,z=O.max_chain_length,X=O.strstart,ue=O.prev_length,le=O.nice_match,ee=O.strstart>O.w_size-k?O.strstart-(O.w_size-k):0,ne=O.window,oe=O.w_mask,pe=O.prev,Ae=O.strstart+C,Ne=ne[X+ue-1],Pe=ne[X+ue];O.prev_length>=O.good_match&&(z>>=2),le>O.lookahead&&(le=O.lookahead);do if(ne[(re=ie)+ue]===Pe&&ne[re+ue-1]===Ne&&ne[re]===ne[X]&&ne[++re]===ne[X+1]){X+=2,re++;do;while(ne[++X]===ne[++re]&&ne[++X]===ne[++re]&&ne[++X]===ne[++re]&&ne[++X]===ne[++re]&&ne[++X]===ne[++re]&&ne[++X]===ne[++re]&&ne[++X]===ne[++re]&&ne[++X]===ne[++re]&&X<Ae);if(Z=C-(Ae-X),X=Ae-C,ue<Z){if(O.match_start=ie,le<=(ue=Z))break;Ne=ne[X+ue-1],Pe=ne[X+ue]}}while((ie=pe[ie&oe])>ee&&--z!=0);return ue<=O.lookahead?ue:O.lookahead}function V(O){var ie,re,Z,z,X,ue,le,ee,ne,oe,pe=O.w_size;do{if(z=O.window_size-O.lookahead-O.strstart,O.strstart>=pe+(pe-k)){for(s.arraySet(O.window,O.window,pe,pe,0),O.match_start-=pe,O.strstart-=pe,O.block_start-=pe,ie=re=O.hash_size;Z=O.head[--ie],O.head[ie]=pe<=Z?Z-pe:0,--re;);for(ie=re=pe;Z=O.prev[--ie],O.prev[ie]=pe<=Z?Z-pe:0,--re;);z+=pe}if(O.strm.avail_in===0)break;if(ue=O.strm,le=O.window,ee=O.strstart+O.lookahead,ne=z,oe=void 0,oe=ue.avail_in,ne<oe&&(oe=ne),re=oe===0?0:(ue.avail_in-=oe,s.arraySet(le,ue.input,ue.next_in,oe,ee),ue.state.wrap===1?ue.adler=c(ue.adler,le,oe,ee):ue.state.wrap===2&&(ue.adler=u(ue.adler,le,oe,ee)),ue.next_in+=oe,ue.total_in+=oe,oe),O.lookahead+=re,O.lookahead+O.insert>=D)for(X=O.strstart-O.insert,O.ins_h=O.window[X],O.ins_h=(O.ins_h<<O.hash_shift^O.window[X+1])&O.hash_mask;O.insert&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[X+D-1])&O.hash_mask,O.prev[X&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=X,X++,O.insert--,!(O.lookahead+O.insert<D)););}while(O.lookahead<k&&O.strm.avail_in!==0)}function K(O,ie){for(var re,Z;;){if(O.lookahead<k){if(V(O),O.lookahead<k&&ie===h)return j;if(O.lookahead===0)break}if(re=0,O.lookahead>=D&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+D-1])&O.hash_mask,re=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),re!==0&&O.strstart-re<=O.w_size-k&&(O.match_length=H(O,re)),O.match_length>=D)if(Z=o._tr_tally(O,O.strstart-O.match_start,O.match_length-D),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=D){for(O.match_length--;O.strstart++,O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+D-1])&O.hash_mask,re=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart,--O.match_length!=0;);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+1])&O.hash_mask;else Z=o._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(Z&&(L(O,!1),O.strm.avail_out===0))return j}return O.insert=O.strstart<D-1?O.strstart:D-1,ie===f?(L(O,!0),O.strm.avail_out===0?P:F):O.last_lit&&(L(O,!1),O.strm.avail_out===0)?j:R}function ae(O,ie){for(var re,Z,z;;){if(O.lookahead<k){if(V(O),O.lookahead<k&&ie===h)return j;if(O.lookahead===0)break}if(re=0,O.lookahead>=D&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+D-1])&O.hash_mask,re=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=D-1,re!==0&&O.prev_length<O.max_lazy_match&&O.strstart-re<=O.w_size-k&&(O.match_length=H(O,re),O.match_length<=5&&(O.strategy===1||O.match_length===D&&4096<O.strstart-O.match_start)&&(O.match_length=D-1)),O.prev_length>=D&&O.match_length<=O.prev_length){for(z=O.strstart+O.lookahead-D,Z=o._tr_tally(O,O.strstart-1-O.prev_match,O.prev_length-D),O.lookahead-=O.prev_length-1,O.prev_length-=2;++O.strstart<=z&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+D-1])&O.hash_mask,re=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),--O.prev_length!=0;);if(O.match_available=0,O.match_length=D-1,O.strstart++,Z&&(L(O,!1),O.strm.avail_out===0))return j}else if(O.match_available){if((Z=o._tr_tally(O,0,O.window[O.strstart-1]))&&L(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return j}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(Z=o._tr_tally(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<D-1?O.strstart:D-1,ie===f?(L(O,!0),O.strm.avail_out===0?P:F):O.last_lit&&(L(O,!1),O.strm.avail_out===0)?j:R}function te(O,ie,re,Z,z){this.good_length=O,this.max_lazy=ie,this.nice_length=re,this.max_chain=Z,this.func=z}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*E),this.dyn_dtree=new s.Buf16(2*(2*w+1)),this.bl_tree=new s.Buf16(2*(2*S+1)),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(_+1),this.heap=new s.Buf16(2*A+1),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*A+1),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xe(O){var ie;return O&&O.state?(O.total_in=O.total_out=0,O.data_type=v,(ie=O.state).pending=0,ie.pending_out=0,ie.wrap<0&&(ie.wrap=-ie.wrap),ie.status=ie.wrap?T:N,O.adler=ie.wrap===2?0:1,ie.last_flush=h,o._tr_init(ie),p):q(O,y)}function ve(O){var ie=xe(O);return ie===p&&(function(re){re.window_size=2*re.w_size,B(re.head),re.max_lazy_match=a[re.level].max_lazy,re.good_match=a[re.level].good_length,re.nice_match=a[re.level].nice_length,re.max_chain_length=a[re.level].max_chain,re.strstart=0,re.block_start=0,re.lookahead=0,re.insert=0,re.match_length=re.prev_length=D-1,re.match_available=0,re.ins_h=0})(O.state),ie}function Te(O,ie,re,Z,z,X){if(!O)return y;var ue=1;if(ie===g&&(ie=6),Z<0?(ue=0,Z=-Z):15<Z&&(ue=2,Z-=16),z<1||b<z||re!==x||Z<8||15<Z||ie<0||9<ie||X<0||m<X)return q(O,y);Z===8&&(Z=9);var le=new de;return(O.state=le).strm=O,le.wrap=ue,le.gzhead=null,le.w_bits=Z,le.w_size=1<<le.w_bits,le.w_mask=le.w_size-1,le.hash_bits=z+7,le.hash_size=1<<le.hash_bits,le.hash_mask=le.hash_size-1,le.hash_shift=~~((le.hash_bits+D-1)/D),le.window=new s.Buf8(2*le.w_size),le.head=new s.Buf16(le.hash_size),le.prev=new s.Buf16(le.w_size),le.lit_bufsize=1<<z+6,le.pending_buf_size=4*le.lit_bufsize,le.pending_buf=new s.Buf8(le.pending_buf_size),le.d_buf=1*le.lit_bufsize,le.l_buf=3*le.lit_bufsize,le.level=ie,le.strategy=X,le.method=re,ve(O)}a=[new te(0,0,0,0,function(O,ie){var re=65535;for(re>O.pending_buf_size-5&&(re=O.pending_buf_size-5);;){if(O.lookahead<=1){if(V(O),O.lookahead===0&&ie===h)return j;if(O.lookahead===0)break}O.strstart+=O.lookahead,O.lookahead=0;var Z=O.block_start+re;if((O.strstart===0||O.strstart>=Z)&&(O.lookahead=O.strstart-Z,O.strstart=Z,L(O,!1),O.strm.avail_out===0)||O.strstart-O.block_start>=O.w_size-k&&(L(O,!1),O.strm.avail_out===0))return j}return O.insert=0,ie===f?(L(O,!0),O.strm.avail_out===0?P:F):(O.strstart>O.block_start&&(L(O,!1),O.strm.avail_out),j)}),new te(4,4,8,4,K),new te(4,5,16,8,K),new te(4,6,32,32,K),new te(4,4,16,16,ae),new te(8,16,32,32,ae),new te(8,16,128,128,ae),new te(8,32,128,256,ae),new te(32,128,258,1024,ae),new te(32,258,258,4096,ae)],i.deflateInit=function(O,ie){return Te(O,ie,x,15,8,0)},i.deflateInit2=Te,i.deflateReset=ve,i.deflateResetKeep=xe,i.deflateSetHeader=function(O,ie){return O&&O.state?O.state.wrap!==2?y:(O.state.gzhead=ie,p):y},i.deflate=function(O,ie){var re,Z,z,X;if(!O||!O.state||5<ie||ie<0)return O?q(O,y):y;if(Z=O.state,!O.output||!O.input&&O.avail_in!==0||Z.status===666&&ie!==f)return q(O,O.avail_out===0?-5:y);if(Z.strm=O,re=Z.last_flush,Z.last_flush=ie,Z.status===T)if(Z.wrap===2)O.adler=0,U(Z,31),U(Z,139),U(Z,8),Z.gzhead?(U(Z,(Z.gzhead.text?1:0)+(Z.gzhead.hcrc?2:0)+(Z.gzhead.extra?4:0)+(Z.gzhead.name?8:0)+(Z.gzhead.comment?16:0)),U(Z,255&Z.gzhead.time),U(Z,Z.gzhead.time>>8&255),U(Z,Z.gzhead.time>>16&255),U(Z,Z.gzhead.time>>24&255),U(Z,Z.level===9?2:2<=Z.strategy||Z.level<2?4:0),U(Z,255&Z.gzhead.os),Z.gzhead.extra&&Z.gzhead.extra.length&&(U(Z,255&Z.gzhead.extra.length),U(Z,Z.gzhead.extra.length>>8&255)),Z.gzhead.hcrc&&(O.adler=u(O.adler,Z.pending_buf,Z.pending,0)),Z.gzindex=0,Z.status=69):(U(Z,0),U(Z,0),U(Z,0),U(Z,0),U(Z,0),U(Z,Z.level===9?2:2<=Z.strategy||Z.level<2?4:0),U(Z,3),Z.status=N);else{var ue=x+(Z.w_bits-8<<4)<<8;ue|=(2<=Z.strategy||Z.level<2?0:Z.level<6?1:Z.level===6?2:3)<<6,Z.strstart!==0&&(ue|=32),ue+=31-ue%31,Z.status=N,G(Z,ue),Z.strstart!==0&&(G(Z,O.adler>>>16),G(Z,65535&O.adler)),O.adler=1}if(Z.status===69)if(Z.gzhead.extra){for(z=Z.pending;Z.gzindex<(65535&Z.gzhead.extra.length)&&(Z.pending!==Z.pending_buf_size||(Z.gzhead.hcrc&&Z.pending>z&&(O.adler=u(O.adler,Z.pending_buf,Z.pending-z,z)),I(O),z=Z.pending,Z.pending!==Z.pending_buf_size));)U(Z,255&Z.gzhead.extra[Z.gzindex]),Z.gzindex++;Z.gzhead.hcrc&&Z.pending>z&&(O.adler=u(O.adler,Z.pending_buf,Z.pending-z,z)),Z.gzindex===Z.gzhead.extra.length&&(Z.gzindex=0,Z.status=73)}else Z.status=73;if(Z.status===73)if(Z.gzhead.name){z=Z.pending;do{if(Z.pending===Z.pending_buf_size&&(Z.gzhead.hcrc&&Z.pending>z&&(O.adler=u(O.adler,Z.pending_buf,Z.pending-z,z)),I(O),z=Z.pending,Z.pending===Z.pending_buf_size)){X=1;break}X=Z.gzindex<Z.gzhead.name.length?255&Z.gzhead.name.charCodeAt(Z.gzindex++):0,U(Z,X)}while(X!==0);Z.gzhead.hcrc&&Z.pending>z&&(O.adler=u(O.adler,Z.pending_buf,Z.pending-z,z)),X===0&&(Z.gzindex=0,Z.status=91)}else Z.status=91;if(Z.status===91)if(Z.gzhead.comment){z=Z.pending;do{if(Z.pending===Z.pending_buf_size&&(Z.gzhead.hcrc&&Z.pending>z&&(O.adler=u(O.adler,Z.pending_buf,Z.pending-z,z)),I(O),z=Z.pending,Z.pending===Z.pending_buf_size)){X=1;break}X=Z.gzindex<Z.gzhead.comment.length?255&Z.gzhead.comment.charCodeAt(Z.gzindex++):0,U(Z,X)}while(X!==0);Z.gzhead.hcrc&&Z.pending>z&&(O.adler=u(O.adler,Z.pending_buf,Z.pending-z,z)),X===0&&(Z.status=103)}else Z.status=103;if(Z.status===103&&(Z.gzhead.hcrc?(Z.pending+2>Z.pending_buf_size&&I(O),Z.pending+2<=Z.pending_buf_size&&(U(Z,255&O.adler),U(Z,O.adler>>8&255),O.adler=0,Z.status=N)):Z.status=N),Z.pending!==0){if(I(O),O.avail_out===0)return Z.last_flush=-1,p}else if(O.avail_in===0&&$(ie)<=$(re)&&ie!==f)return q(O,-5);if(Z.status===666&&O.avail_in!==0)return q(O,-5);if(O.avail_in!==0||Z.lookahead!==0||ie!==h&&Z.status!==666){var le=Z.strategy===2?(function(ee,ne){for(var oe;;){if(ee.lookahead===0&&(V(ee),ee.lookahead===0)){if(ne===h)return j;break}if(ee.match_length=0,oe=o._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++,oe&&(L(ee,!1),ee.strm.avail_out===0))return j}return ee.insert=0,ne===f?(L(ee,!0),ee.strm.avail_out===0?P:F):ee.last_lit&&(L(ee,!1),ee.strm.avail_out===0)?j:R})(Z,ie):Z.strategy===3?(function(ee,ne){for(var oe,pe,Ae,Ne,Pe=ee.window;;){if(ee.lookahead<=C){if(V(ee),ee.lookahead<=C&&ne===h)return j;if(ee.lookahead===0)break}if(ee.match_length=0,ee.lookahead>=D&&0<ee.strstart&&(pe=Pe[Ae=ee.strstart-1])===Pe[++Ae]&&pe===Pe[++Ae]&&pe===Pe[++Ae]){Ne=ee.strstart+C;do;while(pe===Pe[++Ae]&&pe===Pe[++Ae]&&pe===Pe[++Ae]&&pe===Pe[++Ae]&&pe===Pe[++Ae]&&pe===Pe[++Ae]&&pe===Pe[++Ae]&&pe===Pe[++Ae]&&Ae<Ne);ee.match_length=C-(Ne-Ae),ee.match_length>ee.lookahead&&(ee.match_length=ee.lookahead)}if(ee.match_length>=D?(oe=o._tr_tally(ee,1,ee.match_length-D),ee.lookahead-=ee.match_length,ee.strstart+=ee.match_length,ee.match_length=0):(oe=o._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++),oe&&(L(ee,!1),ee.strm.avail_out===0))return j}return ee.insert=0,ne===f?(L(ee,!0),ee.strm.avail_out===0?P:F):ee.last_lit&&(L(ee,!1),ee.strm.avail_out===0)?j:R})(Z,ie):a[Z.level].func(Z,ie);if(le!==P&&le!==F||(Z.status=666),le===j||le===P)return O.avail_out===0&&(Z.last_flush=-1),p;if(le===R&&(ie===1?o._tr_align(Z):ie!==5&&(o._tr_stored_block(Z,0,0,!1),ie===3&&(B(Z.head),Z.lookahead===0&&(Z.strstart=0,Z.block_start=0,Z.insert=0))),I(O),O.avail_out===0))return Z.last_flush=-1,p}return ie!==f?p:Z.wrap<=0?1:(Z.wrap===2?(U(Z,255&O.adler),U(Z,O.adler>>8&255),U(Z,O.adler>>16&255),U(Z,O.adler>>24&255),U(Z,255&O.total_in),U(Z,O.total_in>>8&255),U(Z,O.total_in>>16&255),U(Z,O.total_in>>24&255)):(G(Z,O.adler>>>16),G(Z,65535&O.adler)),I(O),0<Z.wrap&&(Z.wrap=-Z.wrap),Z.pending!==0?p:1)},i.deflateEnd=function(O){var ie;return O&&O.state?(ie=O.state.status)!==T&&ie!==69&&ie!==73&&ie!==91&&ie!==103&&ie!==N&&ie!==666?q(O,y):(O.state=null,ie===N?q(O,-3):p):y},i.deflateSetDictionary=function(O,ie){var re,Z,z,X,ue,le,ee,ne,oe=ie.length;if(!O||!O.state||(X=(re=O.state).wrap)===2||X===1&&re.status!==T||re.lookahead)return y;for(X===1&&(O.adler=c(O.adler,ie,oe,0)),re.wrap=0,oe>=re.w_size&&(X===0&&(B(re.head),re.strstart=0,re.block_start=0,re.insert=0),ne=new s.Buf8(re.w_size),s.arraySet(ne,ie,oe-re.w_size,re.w_size,0),ie=ne,oe=re.w_size),ue=O.avail_in,le=O.next_in,ee=O.input,O.avail_in=oe,O.next_in=0,O.input=ie,V(re);re.lookahead>=D;){for(Z=re.strstart,z=re.lookahead-(D-1);re.ins_h=(re.ins_h<<re.hash_shift^re.window[Z+D-1])&re.hash_mask,re.prev[Z&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=Z,Z++,--z;);re.strstart=Z,re.lookahead=D-1,V(re)}return re.strstart+=re.lookahead,re.block_start=re.strstart,re.insert=re.lookahead,re.lookahead=0,re.match_length=re.prev_length=D-1,re.match_available=0,O.next_in=le,O.input=ee,O.avail_in=ue,re.wrap=X,p},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,i){r.exports=function(a,s){var o,c,u,d,h,f,p,y,g,m,v,x,b,A,w,S,E,_,D,C,k,T,N,j,R;o=a.state,c=a.next_in,j=a.input,u=c+(a.avail_in-5),d=a.next_out,R=a.output,h=d-(s-a.avail_out),f=d+(a.avail_out-257),p=o.dmax,y=o.wsize,g=o.whave,m=o.wnext,v=o.window,x=o.hold,b=o.bits,A=o.lencode,w=o.distcode,S=(1<<o.lenbits)-1,E=(1<<o.distbits)-1;e:do{b<15&&(x+=j[c++]<<b,b+=8,x+=j[c++]<<b,b+=8),_=A[x&S];t:for(;;){if(x>>>=D=_>>>24,b-=D,(D=_>>>16&255)===0)R[d++]=65535&_;else{if(!(16&D)){if((64&D)==0){_=A[(65535&_)+(x&(1<<D)-1)];continue t}if(32&D){o.mode=12;break e}a.msg="invalid literal/length code",o.mode=30;break e}C=65535&_,(D&=15)&&(b<D&&(x+=j[c++]<<b,b+=8),C+=x&(1<<D)-1,x>>>=D,b-=D),b<15&&(x+=j[c++]<<b,b+=8,x+=j[c++]<<b,b+=8),_=w[x&E];n:for(;;){if(x>>>=D=_>>>24,b-=D,!(16&(D=_>>>16&255))){if((64&D)==0){_=w[(65535&_)+(x&(1<<D)-1)];continue n}a.msg="invalid distance code",o.mode=30;break e}if(k=65535&_,b<(D&=15)&&(x+=j[c++]<<b,(b+=8)<D&&(x+=j[c++]<<b,b+=8)),p<(k+=x&(1<<D)-1)){a.msg="invalid distance too far back",o.mode=30;break e}if(x>>>=D,b-=D,(D=d-h)<k){if(g<(D=k-D)&&o.sane){a.msg="invalid distance too far back",o.mode=30;break e}if(N=v,(T=0)===m){if(T+=y-D,D<C){for(C-=D;R[d++]=v[T++],--D;);T=d-k,N=R}}else if(m<D){if(T+=y+m-D,(D-=m)<C){for(C-=D;R[d++]=v[T++],--D;);if(T=0,m<C){for(C-=D=m;R[d++]=v[T++],--D;);T=d-k,N=R}}}else if(T+=m-D,D<C){for(C-=D;R[d++]=v[T++],--D;);T=d-k,N=R}for(;2<C;)R[d++]=N[T++],R[d++]=N[T++],R[d++]=N[T++],C-=3;C&&(R[d++]=N[T++],1<C&&(R[d++]=N[T++]))}else{for(T=d-k;R[d++]=R[T++],R[d++]=R[T++],R[d++]=R[T++],2<(C-=3););C&&(R[d++]=R[T++],1<C&&(R[d++]=R[T++]))}break}}break}}while(c<u&&d<f);c-=C=b>>3,x&=(1<<(b-=C<<3))-1,a.next_in=c,a.next_out=d,a.avail_in=c<u?u-c+5:5-(c-u),a.avail_out=d<f?f-d+257:257-(d-f),o.hold=x,o.bits=b}},{}],49:[function(t,r,i){var a=t("../utils/common"),s=t("./adler32"),o=t("./crc32"),c=t("./inffast"),u=t("./inftrees"),d=1,h=2,f=0,p=-2,y=1,g=852,m=592;function v(T){return(T>>>24&255)+(T>>>8&65280)+((65280&T)<<8)+((255&T)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(T){var N;return T&&T.state?(N=T.state,T.total_in=T.total_out=N.total=0,T.msg="",N.wrap&&(T.adler=1&N.wrap),N.mode=y,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new a.Buf32(g),N.distcode=N.distdyn=new a.Buf32(m),N.sane=1,N.back=-1,f):p}function A(T){var N;return T&&T.state?((N=T.state).wsize=0,N.whave=0,N.wnext=0,b(T)):p}function w(T,N){var j,R;return T&&T.state?(R=T.state,N<0?(j=0,N=-N):(j=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?p:(R.window!==null&&R.wbits!==N&&(R.window=null),R.wrap=j,R.wbits=N,A(T))):p}function S(T,N){var j,R;return T?(R=new x,(T.state=R).window=null,(j=w(T,N))!==f&&(T.state=null),j):p}var E,_,D=!0;function C(T){if(D){var N;for(E=new a.Buf32(512),_=new a.Buf32(32),N=0;N<144;)T.lens[N++]=8;for(;N<256;)T.lens[N++]=9;for(;N<280;)T.lens[N++]=7;for(;N<288;)T.lens[N++]=8;for(u(d,T.lens,0,288,E,0,T.work,{bits:9}),N=0;N<32;)T.lens[N++]=5;u(h,T.lens,0,32,_,0,T.work,{bits:5}),D=!1}T.lencode=E,T.lenbits=9,T.distcode=_,T.distbits=5}function k(T,N,j,R){var P,F=T.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new a.Buf8(F.wsize)),R>=F.wsize?(a.arraySet(F.window,N,j-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(R<(P=F.wsize-F.wnext)&&(P=R),a.arraySet(F.window,N,j-R,P,F.wnext),(R-=P)?(a.arraySet(F.window,N,j-R,R,0),F.wnext=R,F.whave=F.wsize):(F.wnext+=P,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=P))),0}i.inflateReset=A,i.inflateReset2=w,i.inflateResetKeep=b,i.inflateInit=function(T){return S(T,15)},i.inflateInit2=S,i.inflate=function(T,N){var j,R,P,F,q,$,B,I,L,U,G,H,V,K,ae,te,de,xe,ve,Te,O,ie,re,Z,z=0,X=new a.Buf8(4),ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!T||!T.state||!T.output||!T.input&&T.avail_in!==0)return p;(j=T.state).mode===12&&(j.mode=13),q=T.next_out,P=T.output,B=T.avail_out,F=T.next_in,R=T.input,$=T.avail_in,I=j.hold,L=j.bits,U=$,G=B,ie=f;e:for(;;)switch(j.mode){case y:if(j.wrap===0){j.mode=13;break}for(;L<16;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}if(2&j.wrap&&I===35615){X[j.check=0]=255&I,X[1]=I>>>8&255,j.check=o(j.check,X,2,0),L=I=0,j.mode=2;break}if(j.flags=0,j.head&&(j.head.done=!1),!(1&j.wrap)||(((255&I)<<8)+(I>>8))%31){T.msg="incorrect header check",j.mode=30;break}if((15&I)!=8){T.msg="unknown compression method",j.mode=30;break}if(L-=4,O=8+(15&(I>>>=4)),j.wbits===0)j.wbits=O;else if(O>j.wbits){T.msg="invalid window size",j.mode=30;break}j.dmax=1<<O,T.adler=j.check=1,j.mode=512&I?10:12,L=I=0;break;case 2:for(;L<16;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}if(j.flags=I,(255&j.flags)!=8){T.msg="unknown compression method",j.mode=30;break}if(57344&j.flags){T.msg="unknown header flags set",j.mode=30;break}j.head&&(j.head.text=I>>8&1),512&j.flags&&(X[0]=255&I,X[1]=I>>>8&255,j.check=o(j.check,X,2,0)),L=I=0,j.mode=3;case 3:for(;L<32;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}j.head&&(j.head.time=I),512&j.flags&&(X[0]=255&I,X[1]=I>>>8&255,X[2]=I>>>16&255,X[3]=I>>>24&255,j.check=o(j.check,X,4,0)),L=I=0,j.mode=4;case 4:for(;L<16;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}j.head&&(j.head.xflags=255&I,j.head.os=I>>8),512&j.flags&&(X[0]=255&I,X[1]=I>>>8&255,j.check=o(j.check,X,2,0)),L=I=0,j.mode=5;case 5:if(1024&j.flags){for(;L<16;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}j.length=I,j.head&&(j.head.extra_len=I),512&j.flags&&(X[0]=255&I,X[1]=I>>>8&255,j.check=o(j.check,X,2,0)),L=I=0}else j.head&&(j.head.extra=null);j.mode=6;case 6:if(1024&j.flags&&($<(H=j.length)&&(H=$),H&&(j.head&&(O=j.head.extra_len-j.length,j.head.extra||(j.head.extra=new Array(j.head.extra_len)),a.arraySet(j.head.extra,R,F,H,O)),512&j.flags&&(j.check=o(j.check,R,H,F)),$-=H,F+=H,j.length-=H),j.length))break e;j.length=0,j.mode=7;case 7:if(2048&j.flags){if($===0)break e;for(H=0;O=R[F+H++],j.head&&O&&j.length<65536&&(j.head.name+=String.fromCharCode(O)),O&&H<$;);if(512&j.flags&&(j.check=o(j.check,R,H,F)),$-=H,F+=H,O)break e}else j.head&&(j.head.name=null);j.length=0,j.mode=8;case 8:if(4096&j.flags){if($===0)break e;for(H=0;O=R[F+H++],j.head&&O&&j.length<65536&&(j.head.comment+=String.fromCharCode(O)),O&&H<$;);if(512&j.flags&&(j.check=o(j.check,R,H,F)),$-=H,F+=H,O)break e}else j.head&&(j.head.comment=null);j.mode=9;case 9:if(512&j.flags){for(;L<16;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}if(I!==(65535&j.check)){T.msg="header crc mismatch",j.mode=30;break}L=I=0}j.head&&(j.head.hcrc=j.flags>>9&1,j.head.done=!0),T.adler=j.check=0,j.mode=12;break;case 10:for(;L<32;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}T.adler=j.check=v(I),L=I=0,j.mode=11;case 11:if(j.havedict===0)return T.next_out=q,T.avail_out=B,T.next_in=F,T.avail_in=$,j.hold=I,j.bits=L,2;T.adler=j.check=1,j.mode=12;case 12:if(N===5||N===6)break e;case 13:if(j.last){I>>>=7&L,L-=7&L,j.mode=27;break}for(;L<3;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}switch(j.last=1&I,L-=1,3&(I>>>=1)){case 0:j.mode=14;break;case 1:if(C(j),j.mode=20,N!==6)break;I>>>=2,L-=2;break e;case 2:j.mode=17;break;case 3:T.msg="invalid block type",j.mode=30}I>>>=2,L-=2;break;case 14:for(I>>>=7&L,L-=7&L;L<32;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}if((65535&I)!=(I>>>16^65535)){T.msg="invalid stored block lengths",j.mode=30;break}if(j.length=65535&I,L=I=0,j.mode=15,N===6)break e;case 15:j.mode=16;case 16:if(H=j.length){if($<H&&(H=$),B<H&&(H=B),H===0)break e;a.arraySet(P,R,F,H,q),$-=H,F+=H,B-=H,q+=H,j.length-=H;break}j.mode=12;break;case 17:for(;L<14;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}if(j.nlen=257+(31&I),I>>>=5,L-=5,j.ndist=1+(31&I),I>>>=5,L-=5,j.ncode=4+(15&I),I>>>=4,L-=4,286<j.nlen||30<j.ndist){T.msg="too many length or distance symbols",j.mode=30;break}j.have=0,j.mode=18;case 18:for(;j.have<j.ncode;){for(;L<3;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}j.lens[ue[j.have++]]=7&I,I>>>=3,L-=3}for(;j.have<19;)j.lens[ue[j.have++]]=0;if(j.lencode=j.lendyn,j.lenbits=7,re={bits:j.lenbits},ie=u(0,j.lens,0,19,j.lencode,0,j.work,re),j.lenbits=re.bits,ie){T.msg="invalid code lengths set",j.mode=30;break}j.have=0,j.mode=19;case 19:for(;j.have<j.nlen+j.ndist;){for(;te=(z=j.lencode[I&(1<<j.lenbits)-1])>>>16&255,de=65535&z,!((ae=z>>>24)<=L);){if($===0)break e;$--,I+=R[F++]<<L,L+=8}if(de<16)I>>>=ae,L-=ae,j.lens[j.have++]=de;else{if(de===16){for(Z=ae+2;L<Z;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}if(I>>>=ae,L-=ae,j.have===0){T.msg="invalid bit length repeat",j.mode=30;break}O=j.lens[j.have-1],H=3+(3&I),I>>>=2,L-=2}else if(de===17){for(Z=ae+3;L<Z;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}L-=ae,O=0,H=3+(7&(I>>>=ae)),I>>>=3,L-=3}else{for(Z=ae+7;L<Z;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}L-=ae,O=0,H=11+(127&(I>>>=ae)),I>>>=7,L-=7}if(j.have+H>j.nlen+j.ndist){T.msg="invalid bit length repeat",j.mode=30;break}for(;H--;)j.lens[j.have++]=O}}if(j.mode===30)break;if(j.lens[256]===0){T.msg="invalid code -- missing end-of-block",j.mode=30;break}if(j.lenbits=9,re={bits:j.lenbits},ie=u(d,j.lens,0,j.nlen,j.lencode,0,j.work,re),j.lenbits=re.bits,ie){T.msg="invalid literal/lengths set",j.mode=30;break}if(j.distbits=6,j.distcode=j.distdyn,re={bits:j.distbits},ie=u(h,j.lens,j.nlen,j.ndist,j.distcode,0,j.work,re),j.distbits=re.bits,ie){T.msg="invalid distances set",j.mode=30;break}if(j.mode=20,N===6)break e;case 20:j.mode=21;case 21:if(6<=$&&258<=B){T.next_out=q,T.avail_out=B,T.next_in=F,T.avail_in=$,j.hold=I,j.bits=L,c(T,G),q=T.next_out,P=T.output,B=T.avail_out,F=T.next_in,R=T.input,$=T.avail_in,I=j.hold,L=j.bits,j.mode===12&&(j.back=-1);break}for(j.back=0;te=(z=j.lencode[I&(1<<j.lenbits)-1])>>>16&255,de=65535&z,!((ae=z>>>24)<=L);){if($===0)break e;$--,I+=R[F++]<<L,L+=8}if(te&&(240&te)==0){for(xe=ae,ve=te,Te=de;te=(z=j.lencode[Te+((I&(1<<xe+ve)-1)>>xe)])>>>16&255,de=65535&z,!(xe+(ae=z>>>24)<=L);){if($===0)break e;$--,I+=R[F++]<<L,L+=8}I>>>=xe,L-=xe,j.back+=xe}if(I>>>=ae,L-=ae,j.back+=ae,j.length=de,te===0){j.mode=26;break}if(32&te){j.back=-1,j.mode=12;break}if(64&te){T.msg="invalid literal/length code",j.mode=30;break}j.extra=15&te,j.mode=22;case 22:if(j.extra){for(Z=j.extra;L<Z;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}j.length+=I&(1<<j.extra)-1,I>>>=j.extra,L-=j.extra,j.back+=j.extra}j.was=j.length,j.mode=23;case 23:for(;te=(z=j.distcode[I&(1<<j.distbits)-1])>>>16&255,de=65535&z,!((ae=z>>>24)<=L);){if($===0)break e;$--,I+=R[F++]<<L,L+=8}if((240&te)==0){for(xe=ae,ve=te,Te=de;te=(z=j.distcode[Te+((I&(1<<xe+ve)-1)>>xe)])>>>16&255,de=65535&z,!(xe+(ae=z>>>24)<=L);){if($===0)break e;$--,I+=R[F++]<<L,L+=8}I>>>=xe,L-=xe,j.back+=xe}if(I>>>=ae,L-=ae,j.back+=ae,64&te){T.msg="invalid distance code",j.mode=30;break}j.offset=de,j.extra=15&te,j.mode=24;case 24:if(j.extra){for(Z=j.extra;L<Z;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}j.offset+=I&(1<<j.extra)-1,I>>>=j.extra,L-=j.extra,j.back+=j.extra}if(j.offset>j.dmax){T.msg="invalid distance too far back",j.mode=30;break}j.mode=25;case 25:if(B===0)break e;if(H=G-B,j.offset>H){if((H=j.offset-H)>j.whave&&j.sane){T.msg="invalid distance too far back",j.mode=30;break}V=H>j.wnext?(H-=j.wnext,j.wsize-H):j.wnext-H,H>j.length&&(H=j.length),K=j.window}else K=P,V=q-j.offset,H=j.length;for(B<H&&(H=B),B-=H,j.length-=H;P[q++]=K[V++],--H;);j.length===0&&(j.mode=21);break;case 26:if(B===0)break e;P[q++]=j.length,B--,j.mode=21;break;case 27:if(j.wrap){for(;L<32;){if($===0)break e;$--,I|=R[F++]<<L,L+=8}if(G-=B,T.total_out+=G,j.total+=G,G&&(T.adler=j.check=j.flags?o(j.check,P,G,q-G):s(j.check,P,G,q-G)),G=B,(j.flags?I:v(I))!==j.check){T.msg="incorrect data check",j.mode=30;break}L=I=0}j.mode=28;case 28:if(j.wrap&&j.flags){for(;L<32;){if($===0)break e;$--,I+=R[F++]<<L,L+=8}if(I!==(4294967295&j.total)){T.msg="incorrect length check",j.mode=30;break}L=I=0}j.mode=29;case 29:ie=1;break e;case 30:ie=-3;break e;case 31:return-4;default:return p}return T.next_out=q,T.avail_out=B,T.next_in=F,T.avail_in=$,j.hold=I,j.bits=L,(j.wsize||G!==T.avail_out&&j.mode<30&&(j.mode<27||N!==4))&&k(T,T.output,T.next_out,G-T.avail_out)?(j.mode=31,-4):(U-=T.avail_in,G-=T.avail_out,T.total_in+=U,T.total_out+=G,j.total+=G,j.wrap&&G&&(T.adler=j.check=j.flags?o(j.check,P,G,T.next_out-G):s(j.check,P,G,T.next_out-G)),T.data_type=j.bits+(j.last?64:0)+(j.mode===12?128:0)+(j.mode===20||j.mode===15?256:0),(U==0&&G===0||N===4)&&ie===f&&(ie=-5),ie)},i.inflateEnd=function(T){if(!T||!T.state)return p;var N=T.state;return N.window&&(N.window=null),T.state=null,f},i.inflateGetHeader=function(T,N){var j;return T&&T.state?(2&(j=T.state).wrap)==0?p:((j.head=N).done=!1,f):p},i.inflateSetDictionary=function(T,N){var j,R=N.length;return T&&T.state?(j=T.state).wrap!==0&&j.mode!==11?p:j.mode===11&&s(1,N,R,0)!==j.check?-3:k(T,N,R,R)?(j.mode=31,-4):(j.havedict=1,f):p},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var a=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,f,p,y,g,m,v){var x,b,A,w,S,E,_,D,C,k=v.bits,T=0,N=0,j=0,R=0,P=0,F=0,q=0,$=0,B=0,I=0,L=null,U=0,G=new a.Buf16(16),H=new a.Buf16(16),V=null,K=0;for(T=0;T<=15;T++)G[T]=0;for(N=0;N<p;N++)G[h[f+N]]++;for(P=k,R=15;1<=R&&G[R]===0;R--);if(R<P&&(P=R),R===0)return y[g++]=20971520,y[g++]=20971520,v.bits=1,0;for(j=1;j<R&&G[j]===0;j++);for(P<j&&(P=j),T=$=1;T<=15;T++)if($<<=1,($-=G[T])<0)return-1;if(0<$&&(d===0||R!==1))return-1;for(H[1]=0,T=1;T<15;T++)H[T+1]=H[T]+G[T];for(N=0;N<p;N++)h[f+N]!==0&&(m[H[h[f+N]]++]=N);if(E=d===0?(L=V=m,19):d===1?(L=s,U-=257,V=o,K-=257,256):(L=c,V=u,-1),T=j,S=g,q=N=I=0,A=-1,w=(B=1<<(F=P))-1,d===1&&852<B||d===2&&592<B)return 1;for(;;){for(_=T-q,C=m[N]<E?(D=0,m[N]):m[N]>E?(D=V[K+m[N]],L[U+m[N]]):(D=96,0),x=1<<T-q,j=b=1<<F;y[S+(I>>q)+(b-=x)]=_<<24|D<<16|C|0,b!==0;);for(x=1<<T-1;I&x;)x>>=1;if(x!==0?(I&=x-1,I+=x):I=0,N++,--G[T]==0){if(T===R)break;T=h[f+m[N]]}if(P<T&&(I&w)!==A){for(q===0&&(q=P),S+=j,$=1<<(F=T-q);F+q<R&&!(($-=G[F+q])<=0);)F++,$<<=1;if(B+=1<<F,d===1&&852<B||d===2&&592<B)return 1;y[A=I&w]=P<<24|F<<16|S-g|0}}return I!==0&&(y[S+I]=T-q<<24|64<<16|0),v.bits=P,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var a=t("../utils/common"),s=0,o=1;function c(z){for(var X=z.length;0<=--X;)z[X]=0}var u=0,d=29,h=256,f=h+1+d,p=30,y=19,g=2*f+1,m=15,v=16,x=7,b=256,A=16,w=17,S=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],_=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=new Array(2*(f+2));c(k);var T=new Array(2*p);c(T);var N=new Array(512);c(N);var j=new Array(256);c(j);var R=new Array(d);c(R);var P,F,q,$=new Array(p);function B(z,X,ue,le,ee){this.static_tree=z,this.extra_bits=X,this.extra_base=ue,this.elems=le,this.max_length=ee,this.has_stree=z&&z.length}function I(z,X){this.dyn_tree=z,this.max_code=0,this.stat_desc=X}function L(z){return z<256?N[z]:N[256+(z>>>7)]}function U(z,X){z.pending_buf[z.pending++]=255&X,z.pending_buf[z.pending++]=X>>>8&255}function G(z,X,ue){z.bi_valid>v-ue?(z.bi_buf|=X<<z.bi_valid&65535,U(z,z.bi_buf),z.bi_buf=X>>v-z.bi_valid,z.bi_valid+=ue-v):(z.bi_buf|=X<<z.bi_valid&65535,z.bi_valid+=ue)}function H(z,X,ue){G(z,ue[2*X],ue[2*X+1])}function V(z,X){for(var ue=0;ue|=1&z,z>>>=1,ue<<=1,0<--X;);return ue>>>1}function K(z,X,ue){var le,ee,ne=new Array(m+1),oe=0;for(le=1;le<=m;le++)ne[le]=oe=oe+ue[le-1]<<1;for(ee=0;ee<=X;ee++){var pe=z[2*ee+1];pe!==0&&(z[2*ee]=V(ne[pe]++,pe))}}function ae(z){var X;for(X=0;X<f;X++)z.dyn_ltree[2*X]=0;for(X=0;X<p;X++)z.dyn_dtree[2*X]=0;for(X=0;X<y;X++)z.bl_tree[2*X]=0;z.dyn_ltree[2*b]=1,z.opt_len=z.static_len=0,z.last_lit=z.matches=0}function te(z){8<z.bi_valid?U(z,z.bi_buf):0<z.bi_valid&&(z.pending_buf[z.pending++]=z.bi_buf),z.bi_buf=0,z.bi_valid=0}function de(z,X,ue,le){var ee=2*X,ne=2*ue;return z[ee]<z[ne]||z[ee]===z[ne]&&le[X]<=le[ue]}function xe(z,X,ue){for(var le=z.heap[ue],ee=ue<<1;ee<=z.heap_len&&(ee<z.heap_len&&de(X,z.heap[ee+1],z.heap[ee],z.depth)&&ee++,!de(X,le,z.heap[ee],z.depth));)z.heap[ue]=z.heap[ee],ue=ee,ee<<=1;z.heap[ue]=le}function ve(z,X,ue){var le,ee,ne,oe,pe=0;if(z.last_lit!==0)for(;le=z.pending_buf[z.d_buf+2*pe]<<8|z.pending_buf[z.d_buf+2*pe+1],ee=z.pending_buf[z.l_buf+pe],pe++,le===0?H(z,ee,X):(H(z,(ne=j[ee])+h+1,X),(oe=E[ne])!==0&&G(z,ee-=R[ne],oe),H(z,ne=L(--le),ue),(oe=_[ne])!==0&&G(z,le-=$[ne],oe)),pe<z.last_lit;);H(z,b,X)}function Te(z,X){var ue,le,ee,ne=X.dyn_tree,oe=X.stat_desc.static_tree,pe=X.stat_desc.has_stree,Ae=X.stat_desc.elems,Ne=-1;for(z.heap_len=0,z.heap_max=g,ue=0;ue<Ae;ue++)ne[2*ue]!==0?(z.heap[++z.heap_len]=Ne=ue,z.depth[ue]=0):ne[2*ue+1]=0;for(;z.heap_len<2;)ne[2*(ee=z.heap[++z.heap_len]=Ne<2?++Ne:0)]=1,z.depth[ee]=0,z.opt_len--,pe&&(z.static_len-=oe[2*ee+1]);for(X.max_code=Ne,ue=z.heap_len>>1;1<=ue;ue--)xe(z,ne,ue);for(ee=Ae;ue=z.heap[1],z.heap[1]=z.heap[z.heap_len--],xe(z,ne,1),le=z.heap[1],z.heap[--z.heap_max]=ue,z.heap[--z.heap_max]=le,ne[2*ee]=ne[2*ue]+ne[2*le],z.depth[ee]=(z.depth[ue]>=z.depth[le]?z.depth[ue]:z.depth[le])+1,ne[2*ue+1]=ne[2*le+1]=ee,z.heap[1]=ee++,xe(z,ne,1),2<=z.heap_len;);z.heap[--z.heap_max]=z.heap[1],(function(Pe,ot){var Le,ge,Ie,he,Se,Ce,Ue=ot.dyn_tree,Be=ot.max_code,et=ot.stat_desc.static_tree,_t=ot.stat_desc.has_stree,un=ot.stat_desc.extra_bits,Nr=ot.stat_desc.extra_base,Y=ot.stat_desc.max_length,Q=0;for(he=0;he<=m;he++)Pe.bl_count[he]=0;for(Ue[2*Pe.heap[Pe.heap_max]+1]=0,Le=Pe.heap_max+1;Le<g;Le++)Y<(he=Ue[2*Ue[2*(ge=Pe.heap[Le])+1]+1]+1)&&(he=Y,Q++),Ue[2*ge+1]=he,Be<ge||(Pe.bl_count[he]++,Se=0,Nr<=ge&&(Se=un[ge-Nr]),Ce=Ue[2*ge],Pe.opt_len+=Ce*(he+Se),_t&&(Pe.static_len+=Ce*(et[2*ge+1]+Se)));if(Q!==0){do{for(he=Y-1;Pe.bl_count[he]===0;)he--;Pe.bl_count[he]--,Pe.bl_count[he+1]+=2,Pe.bl_count[Y]--,Q-=2}while(0<Q);for(he=Y;he!==0;he--)for(ge=Pe.bl_count[he];ge!==0;)Be<(Ie=Pe.heap[--Le])||(Ue[2*Ie+1]!==he&&(Pe.opt_len+=(he-Ue[2*Ie+1])*Ue[2*Ie],Ue[2*Ie+1]=he),ge--)}})(z,X),K(ne,Ne,z.bl_count)}function O(z,X,ue){var le,ee,ne=-1,oe=X[1],pe=0,Ae=7,Ne=4;for(oe===0&&(Ae=138,Ne=3),X[2*(ue+1)+1]=65535,le=0;le<=ue;le++)ee=oe,oe=X[2*(le+1)+1],++pe<Ae&&ee===oe||(pe<Ne?z.bl_tree[2*ee]+=pe:ee!==0?(ee!==ne&&z.bl_tree[2*ee]++,z.bl_tree[2*A]++):pe<=10?z.bl_tree[2*w]++:z.bl_tree[2*S]++,ne=ee,Ne=(pe=0)===oe?(Ae=138,3):ee===oe?(Ae=6,3):(Ae=7,4))}function ie(z,X,ue){var le,ee,ne=-1,oe=X[1],pe=0,Ae=7,Ne=4;for(oe===0&&(Ae=138,Ne=3),le=0;le<=ue;le++)if(ee=oe,oe=X[2*(le+1)+1],!(++pe<Ae&&ee===oe)){if(pe<Ne)for(;H(z,ee,z.bl_tree),--pe!=0;);else ee!==0?(ee!==ne&&(H(z,ee,z.bl_tree),pe--),H(z,A,z.bl_tree),G(z,pe-3,2)):pe<=10?(H(z,w,z.bl_tree),G(z,pe-3,3)):(H(z,S,z.bl_tree),G(z,pe-11,7));ne=ee,Ne=(pe=0)===oe?(Ae=138,3):ee===oe?(Ae=6,3):(Ae=7,4)}}c($);var re=!1;function Z(z,X,ue,le){G(z,(u<<1)+(le?1:0),3),(function(ee,ne,oe,pe){te(ee),U(ee,oe),U(ee,~oe),a.arraySet(ee.pending_buf,ee.window,ne,oe,ee.pending),ee.pending+=oe})(z,X,ue)}i._tr_init=function(z){re||((function(){var X,ue,le,ee,ne,oe=new Array(m+1);for(ee=le=0;ee<d-1;ee++)for(R[ee]=le,X=0;X<1<<E[ee];X++)j[le++]=ee;for(j[le-1]=ee,ee=ne=0;ee<16;ee++)for($[ee]=ne,X=0;X<1<<_[ee];X++)N[ne++]=ee;for(ne>>=7;ee<p;ee++)for($[ee]=ne<<7,X=0;X<1<<_[ee]-7;X++)N[256+ne++]=ee;for(ue=0;ue<=m;ue++)oe[ue]=0;for(X=0;X<=143;)k[2*X+1]=8,X++,oe[8]++;for(;X<=255;)k[2*X+1]=9,X++,oe[9]++;for(;X<=279;)k[2*X+1]=7,X++,oe[7]++;for(;X<=287;)k[2*X+1]=8,X++,oe[8]++;for(K(k,f+1,oe),X=0;X<p;X++)T[2*X+1]=5,T[2*X]=V(X,5);P=new B(k,E,h+1,f,m),F=new B(T,_,0,p,m),q=new B(new Array(0),D,0,y,x)})(),re=!0),z.l_desc=new I(z.dyn_ltree,P),z.d_desc=new I(z.dyn_dtree,F),z.bl_desc=new I(z.bl_tree,q),z.bi_buf=0,z.bi_valid=0,ae(z)},i._tr_stored_block=Z,i._tr_flush_block=function(z,X,ue,le){var ee,ne,oe=0;0<z.level?(z.strm.data_type===2&&(z.strm.data_type=(function(pe){var Ae,Ne=4093624447;for(Ae=0;Ae<=31;Ae++,Ne>>>=1)if(1&Ne&&pe.dyn_ltree[2*Ae]!==0)return s;if(pe.dyn_ltree[18]!==0||pe.dyn_ltree[20]!==0||pe.dyn_ltree[26]!==0)return o;for(Ae=32;Ae<h;Ae++)if(pe.dyn_ltree[2*Ae]!==0)return o;return s})(z)),Te(z,z.l_desc),Te(z,z.d_desc),oe=(function(pe){var Ae;for(O(pe,pe.dyn_ltree,pe.l_desc.max_code),O(pe,pe.dyn_dtree,pe.d_desc.max_code),Te(pe,pe.bl_desc),Ae=y-1;3<=Ae&&pe.bl_tree[2*C[Ae]+1]===0;Ae--);return pe.opt_len+=3*(Ae+1)+5+5+4,Ae})(z),ee=z.opt_len+3+7>>>3,(ne=z.static_len+3+7>>>3)<=ee&&(ee=ne)):ee=ne=ue+5,ue+4<=ee&&X!==-1?Z(z,X,ue,le):z.strategy===4||ne===ee?(G(z,2+(le?1:0),3),ve(z,k,T)):(G(z,4+(le?1:0),3),(function(pe,Ae,Ne,Pe){var ot;for(G(pe,Ae-257,5),G(pe,Ne-1,5),G(pe,Pe-4,4),ot=0;ot<Pe;ot++)G(pe,pe.bl_tree[2*C[ot]+1],3);ie(pe,pe.dyn_ltree,Ae-1),ie(pe,pe.dyn_dtree,Ne-1)})(z,z.l_desc.max_code+1,z.d_desc.max_code+1,oe+1),ve(z,z.dyn_ltree,z.dyn_dtree)),ae(z),le&&te(z)},i._tr_tally=function(z,X,ue){return z.pending_buf[z.d_buf+2*z.last_lit]=X>>>8&255,z.pending_buf[z.d_buf+2*z.last_lit+1]=255&X,z.pending_buf[z.l_buf+z.last_lit]=255&ue,z.last_lit++,X===0?z.dyn_ltree[2*ue]++:(z.matches++,X--,z.dyn_ltree[2*(j[ue]+h+1)]++,z.dyn_dtree[2*L(X)]++),z.last_lit===z.lit_bufsize-1},i._tr_align=function(z){G(z,2,3),H(z,b,k),(function(X){X.bi_valid===16?(U(X,X.bi_buf),X.bi_buf=0,X.bi_valid=0):8<=X.bi_valid&&(X.pending_buf[X.pending++]=255&X.bi_buf,X.bi_buf>>=8,X.bi_valid-=8)})(z)}},{"../utils/common":41}],53:[function(t,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,i){(function(a){(function(s,o){if(!s.setImmediate){var c,u,d,h,f=1,p={},y=!1,g=s.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(s);m=m&&m.setTimeout?m:s,c={}.toString.call(s.process)==="[object process]"?function(A){process.nextTick(function(){x(A)})}:(function(){if(s.postMessage&&!s.importScripts){var A=!0,w=s.onmessage;return s.onmessage=function(){A=!1},s.postMessage("","*"),s.onmessage=w,A}})()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",b,!1):s.attachEvent("onmessage",b),function(A){s.postMessage(h+A,"*")}):s.MessageChannel?((d=new MessageChannel).port1.onmessage=function(A){x(A.data)},function(A){d.port2.postMessage(A)}):g&&"onreadystatechange"in g.createElement("script")?(u=g.documentElement,function(A){var w=g.createElement("script");w.onreadystatechange=function(){x(A),w.onreadystatechange=null,u.removeChild(w),w=null},u.appendChild(w)}):function(A){setTimeout(x,0,A)},m.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var w=new Array(arguments.length-1),S=0;S<w.length;S++)w[S]=arguments[S+1];var E={callback:A,args:w};return p[f]=E,c(f),f++},m.clearImmediate=v}function v(A){delete p[A]}function x(A){if(y)setTimeout(x,0,A);else{var w=p[A];if(w){y=!0;try{(function(S){var E=S.callback,_=S.args;switch(_.length){case 0:E();break;case 1:E(_[0]);break;case 2:E(_[0],_[1]);break;case 3:E(_[0],_[1],_[2]);break;default:E.apply(o,_)}})(w)}finally{v(A),y=!1}}}}function b(A){A.source===s&&typeof A.data=="string"&&A.data.indexOf(h)===0&&x(+A.data.slice(h.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Li<"u"?Li:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(tw)),tw.exports}var m8;function w7(){if(m8)return dd;m8=1;var n=che(),e=uhe();dd.openArrayBuffer=t,dd.splitPath=r,dd.joinPath=i;function t(a){return e.loadAsync(a).then(function(s){function o(h){return s.file(h)!==null}function c(h,f){return s.file(h).async("uint8array").then(function(p){if(f==="base64")return n.fromByteArray(p);if(f){var y=new TextDecoder(f);return y.decode(p)}else return p})}function u(h,f){s.file(h,f)}function d(){return s.generateAsync({type:"arraybuffer"})}return{exists:o,read:c,write:u,toArrayBuffer:d}})}function r(a){var s=a.lastIndexOf("/");return s===-1?{dirname:"",basename:a}:{dirname:a.substring(0,s),basename:a.substring(s+1)}}function i(){var a=Array.prototype.filter.call(arguments,function(o){return o}),s=[];return a.forEach(function(o){/^\//.test(o)?s=[o]:s.push(o)}),s.join("/")}return dd}var ap={},Ns={},Kl={},g8;function A7(){if(g8)return Kl;g8=1;var n=On;Kl.Element=t,Kl.element=function(a,s,o){return new t(a,s,o)},Kl.text=function(a){return{type:"text",value:a}};var e=Kl.emptyElement={first:function(){return null},firstOrEmpty:function(){return e},attributes:{},children:[]};function t(a,s,o){this.type="element",this.name=a,this.attributes=s||{},this.children=o||[]}t.prototype.first=function(a){return n.find(this.children,function(s){return s.name===a})},t.prototype.firstOrEmpty=function(a){return this.first(a)||e},t.prototype.getElementsByTagName=function(a){var s=n.filter(this.children,function(o){return o.name===a});return i(s)},t.prototype.text=function(){if(this.children.length===0)return"";if(this.children.length!==1||this.children[0].type!=="text")throw new Error("Not implemented");return this.children[0].value};var r={getElementsByTagName:function(a){return i(n.flatten(this.map(function(s){return s.getElementsByTagName(a)},!0)))}};function i(a){return n.extend(a,r)}return Kl}var nw={},sp={},fd={},Ka={},Po={},y8;function w0(){if(y8)return Po;y8=1;function n(a,s,o){if(o===void 0&&(o=Array.prototype),a&&typeof o.find=="function")return o.find.call(a,s);for(var c=0;c<a.length;c++)if(Object.prototype.hasOwnProperty.call(a,c)){var u=a[c];if(s.call(void 0,u,c,a))return u}}function e(a,s){return s===void 0&&(s=Object),s&&typeof s.freeze=="function"?s.freeze(a):a}function t(a,s){if(a===null||typeof a!="object")throw new TypeError("target is not an object");for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o]);return a}var r=e({HTML:"text/html",isHTML:function(a){return a===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Po.assign=t,Po.find=n,Po.freeze=e,Po.MIME_TYPE=r,Po.NAMESPACE=i,Po}var v8;function OD(){if(v8)return Ka;v8=1;var n=w0(),e=n.find,t=n.NAMESPACE;function r(Y){return Y!==""}function i(Y){return Y?Y.split(/[\t\n\f\r ]+/).filter(r):[]}function a(Y,Q){return Y.hasOwnProperty(Q)||(Y[Q]=!0),Y}function s(Y){if(!Y)return[];var Q=i(Y);return Object.keys(Q.reduce(a,{}))}function o(Y){return function(Q){return Y&&Y.indexOf(Q)!==-1}}function c(Y,Q){for(var ce in Y)Object.prototype.hasOwnProperty.call(Y,ce)&&(Q[ce]=Y[ce])}function u(Y,Q){var ce=Y.prototype;if(!(ce instanceof Q)){let we=function(){};we.prototype=Q.prototype,we=new we,c(ce,we),Y.prototype=ce=we}ce.constructor!=Y&&(typeof Y!="function"&&console.error("unknown Class:"+Y),ce.constructor=Y)}var d={},h=d.ELEMENT_NODE=1,f=d.ATTRIBUTE_NODE=2,p=d.TEXT_NODE=3,y=d.CDATA_SECTION_NODE=4,g=d.ENTITY_REFERENCE_NODE=5,m=d.ENTITY_NODE=6,v=d.PROCESSING_INSTRUCTION_NODE=7,x=d.COMMENT_NODE=8,b=d.DOCUMENT_NODE=9,A=d.DOCUMENT_TYPE_NODE=10,w=d.DOCUMENT_FRAGMENT_NODE=11,S=d.NOTATION_NODE=12,E={},_={};E.INDEX_SIZE_ERR=(_[1]="Index size error",1),E.DOMSTRING_SIZE_ERR=(_[2]="DOMString size error",2);var D=E.HIERARCHY_REQUEST_ERR=(_[3]="Hierarchy request error",3);E.WRONG_DOCUMENT_ERR=(_[4]="Wrong document",4),E.INVALID_CHARACTER_ERR=(_[5]="Invalid character",5),E.NO_DATA_ALLOWED_ERR=(_[6]="No data allowed",6),E.NO_MODIFICATION_ALLOWED_ERR=(_[7]="No modification allowed",7);var C=E.NOT_FOUND_ERR=(_[8]="Not found",8);E.NOT_SUPPORTED_ERR=(_[9]="Not supported",9);var k=E.INUSE_ATTRIBUTE_ERR=(_[10]="Attribute in use",10);E.INVALID_STATE_ERR=(_[11]="Invalid state",11),E.SYNTAX_ERR=(_[12]="Syntax error",12),E.INVALID_MODIFICATION_ERR=(_[13]="Invalid modification",13),E.NAMESPACE_ERR=(_[14]="Invalid namespace",14),E.INVALID_ACCESS_ERR=(_[15]="Invalid access",15);function T(Y,Q){if(Q instanceof Error)var ce=Q;else ce=this,Error.call(this,_[Y]),this.message=_[Y],Error.captureStackTrace&&Error.captureStackTrace(this,T);return ce.code=Y,Q&&(this.message=this.message+": "+Q),ce}T.prototype=Error.prototype,c(E,T);function N(){}N.prototype={length:0,item:function(Y){return Y>=0&&Y<this.length?this[Y]:null},toString:function(Y,Q){for(var ce=[],we=0;we<this.length;we++)et(this[we],ce,Y,Q);return ce.join("")},filter:function(Y){return Array.prototype.filter.call(this,Y)},indexOf:function(Y){return Array.prototype.indexOf.call(this,Y)}};function j(Y,Q){this._node=Y,this._refresh=Q,R(this)}function R(Y){var Q=Y._node._inc||Y._node.ownerDocument._inc;if(Y._inc!==Q){var ce=Y._refresh(Y._node);if(Nr(Y,"length",ce.length),!Y.$$length||ce.length<Y.$$length)for(var we=ce.length;we in Y;we++)Object.prototype.hasOwnProperty.call(Y,we)&&delete Y[we];c(ce,Y),Y._inc=Q}}j.prototype.item=function(Y){return R(this),this[Y]||null},u(j,N);function P(){}function F(Y,Q){for(var ce=Y.length;ce--;)if(Y[ce]===Q)return ce}function q(Y,Q,ce,we){if(we?Q[F(Q,we)]=ce:Q[Q.length++]=ce,Y){ce.ownerElement=Y;var Oe=Y.ownerDocument;Oe&&(we&&V(Oe,Y,we),H(Oe,Y,ce))}}function $(Y,Q,ce){var we=F(Q,ce);if(we>=0){for(var Oe=Q.length-1;we<Oe;)Q[we]=Q[++we];if(Q.length=Oe,Y){var ut=Y.ownerDocument;ut&&(V(ut,Y,ce),ce.ownerElement=null)}}else throw new T(C,new Error(Y.tagName+"@"+ce))}P.prototype={length:0,item:N.prototype.item,getNamedItem:function(Y){for(var Q=this.length;Q--;){var ce=this[Q];if(ce.nodeName==Y)return ce}},setNamedItem:function(Y){var Q=Y.ownerElement;if(Q&&Q!=this._ownerElement)throw new T(k);var ce=this.getNamedItem(Y.nodeName);return q(this._ownerElement,this,Y,ce),ce},setNamedItemNS:function(Y){var Q=Y.ownerElement,ce;if(Q&&Q!=this._ownerElement)throw new T(k);return ce=this.getNamedItemNS(Y.namespaceURI,Y.localName),q(this._ownerElement,this,Y,ce),ce},removeNamedItem:function(Y){var Q=this.getNamedItem(Y);return $(this._ownerElement,this,Q),Q},removeNamedItemNS:function(Y,Q){var ce=this.getNamedItemNS(Y,Q);return $(this._ownerElement,this,ce),ce},getNamedItemNS:function(Y,Q){for(var ce=this.length;ce--;){var we=this[ce];if(we.localName==Q&&we.namespaceURI==Y)return we}return null}};function B(){}B.prototype={hasFeature:function(Y,Q){return!0},createDocument:function(Y,Q,ce){var we=new G;if(we.implementation=this,we.childNodes=new N,we.doctype=ce||null,ce&&we.appendChild(ce),Q){var Oe=we.createElementNS(Y,Q);we.appendChild(Oe)}return we},createDocumentType:function(Y,Q,ce){var we=new Pe;return we.name=Y,we.nodeName=Y,we.publicId=Q||"",we.systemId=ce||"",we}};function I(){}I.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(Y,Q){return X(this,Y,Q)},replaceChild:function(Y,Q){X(this,Y,Q,z),Q&&this.removeChild(Q)},removeChild:function(Y){return ae(this,Y)},appendChild:function(Y){return this.insertBefore(Y,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(Y){return un(this.ownerDocument||this,this,Y)},normalize:function(){for(var Y=this.firstChild;Y;){var Q=Y.nextSibling;Q&&Q.nodeType==p&&Y.nodeType==p?(this.removeChild(Q),Y.appendData(Q.data)):(Y.normalize(),Y=Q)}},isSupported:function(Y,Q){return this.ownerDocument.implementation.hasFeature(Y,Q)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(Y){for(var Q=this;Q;){var ce=Q._nsMap;if(ce){for(var we in ce)if(Object.prototype.hasOwnProperty.call(ce,we)&&ce[we]===Y)return we}Q=Q.nodeType==f?Q.ownerDocument:Q.parentNode}return null},lookupNamespaceURI:function(Y){for(var Q=this;Q;){var ce=Q._nsMap;if(ce&&Object.prototype.hasOwnProperty.call(ce,Y))return ce[Y];Q=Q.nodeType==f?Q.ownerDocument:Q.parentNode}return null},isDefaultNamespace:function(Y){var Q=this.lookupPrefix(Y);return Q==null}};function L(Y){return Y=="<"&&"&lt;"||Y==">"&&"&gt;"||Y=="&"&&"&amp;"||Y=='"'&&"&quot;"||"&#"+Y.charCodeAt()+";"}c(d,I),c(d,I.prototype);function U(Y,Q){if(Q(Y))return!0;if(Y=Y.firstChild)do if(U(Y,Q))return!0;while(Y=Y.nextSibling)}function G(){this.ownerDocument=this}function H(Y,Q,ce){Y&&Y._inc++;var we=ce.namespaceURI;we===t.XMLNS&&(Q._nsMap[ce.prefix?ce.localName:""]=ce.value)}function V(Y,Q,ce,we){Y&&Y._inc++;var Oe=ce.namespaceURI;Oe===t.XMLNS&&delete Q._nsMap[ce.prefix?ce.localName:""]}function K(Y,Q,ce){if(Y&&Y._inc){Y._inc++;var we=Q.childNodes;if(ce)we[we.length++]=ce;else{for(var Oe=Q.firstChild,ut=0;Oe;)we[ut++]=Oe,Oe=Oe.nextSibling;we.length=ut,delete we[we.length]}}}function ae(Y,Q){var ce=Q.previousSibling,we=Q.nextSibling;return ce?ce.nextSibling=we:Y.firstChild=we,we?we.previousSibling=ce:Y.lastChild=ce,Q.parentNode=null,Q.previousSibling=null,Q.nextSibling=null,K(Y.ownerDocument,Y),Q}function te(Y){return Y&&(Y.nodeType===I.DOCUMENT_NODE||Y.nodeType===I.DOCUMENT_FRAGMENT_NODE||Y.nodeType===I.ELEMENT_NODE)}function de(Y){return Y&&(ve(Y)||Te(Y)||xe(Y)||Y.nodeType===I.DOCUMENT_FRAGMENT_NODE||Y.nodeType===I.COMMENT_NODE||Y.nodeType===I.PROCESSING_INSTRUCTION_NODE)}function xe(Y){return Y&&Y.nodeType===I.DOCUMENT_TYPE_NODE}function ve(Y){return Y&&Y.nodeType===I.ELEMENT_NODE}function Te(Y){return Y&&Y.nodeType===I.TEXT_NODE}function O(Y,Q){var ce=Y.childNodes||[];if(e(ce,ve)||xe(Q))return!1;var we=e(ce,xe);return!(Q&&we&&ce.indexOf(we)>ce.indexOf(Q))}function ie(Y,Q){var ce=Y.childNodes||[];function we(ut){return ve(ut)&&ut!==Q}if(e(ce,we))return!1;var Oe=e(ce,xe);return!(Q&&Oe&&ce.indexOf(Oe)>ce.indexOf(Q))}function re(Y,Q,ce){if(!te(Y))throw new T(D,"Unexpected parent node type "+Y.nodeType);if(ce&&ce.parentNode!==Y)throw new T(C,"child not in parent");if(!de(Q)||xe(Q)&&Y.nodeType!==I.DOCUMENT_NODE)throw new T(D,"Unexpected node type "+Q.nodeType+" for parent node type "+Y.nodeType)}function Z(Y,Q,ce){var we=Y.childNodes||[],Oe=Q.childNodes||[];if(Q.nodeType===I.DOCUMENT_FRAGMENT_NODE){var ut=Oe.filter(ve);if(ut.length>1||e(Oe,Te))throw new T(D,"More than one element or text in fragment");if(ut.length===1&&!O(Y,ce))throw new T(D,"Element in fragment can not be inserted before doctype")}if(ve(Q)&&!O(Y,ce))throw new T(D,"Only one element can be added and only after doctype");if(xe(Q)){if(e(we,xe))throw new T(D,"Only one doctype is allowed");var Jt=e(we,ve);if(ce&&we.indexOf(Jt)<we.indexOf(ce))throw new T(D,"Doctype can only be inserted before an element");if(!ce&&Jt)throw new T(D,"Doctype can not be appended since element is present")}}function z(Y,Q,ce){var we=Y.childNodes||[],Oe=Q.childNodes||[];if(Q.nodeType===I.DOCUMENT_FRAGMENT_NODE){var ut=Oe.filter(ve);if(ut.length>1||e(Oe,Te))throw new T(D,"More than one element or text in fragment");if(ut.length===1&&!ie(Y,ce))throw new T(D,"Element in fragment can not be inserted before doctype")}if(ve(Q)&&!ie(Y,ce))throw new T(D,"Only one element can be added and only after doctype");if(xe(Q)){if(e(we,function(oi){return xe(oi)&&oi!==ce}))throw new T(D,"Only one doctype is allowed");var Jt=e(we,ve);if(ce&&we.indexOf(Jt)<we.indexOf(ce))throw new T(D,"Doctype can only be inserted before an element")}}function X(Y,Q,ce,we){re(Y,Q,ce),Y.nodeType===I.DOCUMENT_NODE&&(we||Z)(Y,Q,ce);var Oe=Q.parentNode;if(Oe&&Oe.removeChild(Q),Q.nodeType===w){var ut=Q.firstChild;if(ut==null)return Q;var Jt=Q.lastChild}else ut=Jt=Q;var yr=ce?ce.previousSibling:Y.lastChild;ut.previousSibling=yr,Jt.nextSibling=ce,yr?yr.nextSibling=ut:Y.firstChild=ut,ce==null?Y.lastChild=Jt:ce.previousSibling=Jt;do{ut.parentNode=Y;var oi=Y.ownerDocument||Y;ue(ut,oi)}while(ut!==Jt&&(ut=ut.nextSibling));return K(Y.ownerDocument||Y,Y),Q.nodeType==w&&(Q.firstChild=Q.lastChild=null),Q}function ue(Y,Q){if(Y.ownerDocument!==Q){if(Y.ownerDocument=Q,Y.nodeType===h&&Y.attributes)for(var ce=0;ce<Y.attributes.length;ce++){var we=Y.attributes.item(ce);we&&(we.ownerDocument=Q)}for(var Oe=Y.firstChild;Oe;)ue(Oe,Q),Oe=Oe.nextSibling}}function le(Y,Q){Q.parentNode&&Q.parentNode.removeChild(Q),Q.parentNode=Y,Q.previousSibling=Y.lastChild,Q.nextSibling=null,Q.previousSibling?Q.previousSibling.nextSibling=Q:Y.firstChild=Q,Y.lastChild=Q,K(Y.ownerDocument,Y,Q);var ce=Y.ownerDocument||Y;return ue(Q,ce),Q}G.prototype={nodeName:"#document",nodeType:b,doctype:null,documentElement:null,_inc:1,insertBefore:function(Y,Q){if(Y.nodeType==w){for(var ce=Y.firstChild;ce;){var we=ce.nextSibling;this.insertBefore(ce,Q),ce=we}return Y}return X(this,Y,Q),ue(Y,this),this.documentElement===null&&Y.nodeType===h&&(this.documentElement=Y),Y},removeChild:function(Y){return this.documentElement==Y&&(this.documentElement=null),ae(this,Y)},replaceChild:function(Y,Q){X(this,Y,Q,z),ue(Y,this),Q&&this.removeChild(Q),ve(Y)&&(this.documentElement=Y)},importNode:function(Y,Q){return _t(this,Y,Q)},getElementById:function(Y){var Q=null;return U(this.documentElement,function(ce){if(ce.nodeType==h&&ce.getAttribute("id")==Y)return Q=ce,!0}),Q},getElementsByClassName:function(Y){var Q=s(Y);return new j(this,function(ce){var we=[];return Q.length>0&&U(ce.documentElement,function(Oe){if(Oe!==ce&&Oe.nodeType===h){var ut=Oe.getAttribute("class");if(ut){var Jt=Y===ut;if(!Jt){var yr=s(ut);Jt=Q.every(o(yr))}Jt&&we.push(Oe)}}}),we})},createElement:function(Y){var Q=new ee;Q.ownerDocument=this,Q.nodeName=Y,Q.tagName=Y,Q.localName=Y,Q.childNodes=new N;var ce=Q.attributes=new P;return ce._ownerElement=Q,Q},createDocumentFragment:function(){var Y=new Ie;return Y.ownerDocument=this,Y.childNodes=new N,Y},createTextNode:function(Y){var Q=new pe;return Q.ownerDocument=this,Q.appendData(Y),Q},createComment:function(Y){var Q=new Ae;return Q.ownerDocument=this,Q.appendData(Y),Q},createCDATASection:function(Y){var Q=new Ne;return Q.ownerDocument=this,Q.appendData(Y),Q},createProcessingInstruction:function(Y,Q){var ce=new he;return ce.ownerDocument=this,ce.tagName=ce.nodeName=ce.target=Y,ce.nodeValue=ce.data=Q,ce},createAttribute:function(Y){var Q=new ne;return Q.ownerDocument=this,Q.name=Y,Q.nodeName=Y,Q.localName=Y,Q.specified=!0,Q},createEntityReference:function(Y){var Q=new ge;return Q.ownerDocument=this,Q.nodeName=Y,Q},createElementNS:function(Y,Q){var ce=new ee,we=Q.split(":"),Oe=ce.attributes=new P;return ce.childNodes=new N,ce.ownerDocument=this,ce.nodeName=Q,ce.tagName=Q,ce.namespaceURI=Y,we.length==2?(ce.prefix=we[0],ce.localName=we[1]):ce.localName=Q,Oe._ownerElement=ce,ce},createAttributeNS:function(Y,Q){var ce=new ne,we=Q.split(":");return ce.ownerDocument=this,ce.nodeName=Q,ce.name=Q,ce.namespaceURI=Y,ce.specified=!0,we.length==2?(ce.prefix=we[0],ce.localName=we[1]):ce.localName=Q,ce}},u(G,I);function ee(){this._nsMap={}}ee.prototype={nodeType:h,hasAttribute:function(Y){return this.getAttributeNode(Y)!=null},getAttribute:function(Y){var Q=this.getAttributeNode(Y);return Q&&Q.value||""},getAttributeNode:function(Y){return this.attributes.getNamedItem(Y)},setAttribute:function(Y,Q){var ce=this.ownerDocument.createAttribute(Y);ce.value=ce.nodeValue=""+Q,this.setAttributeNode(ce)},removeAttribute:function(Y){var Q=this.getAttributeNode(Y);Q&&this.removeAttributeNode(Q)},appendChild:function(Y){return Y.nodeType===w?this.insertBefore(Y,null):le(this,Y)},setAttributeNode:function(Y){return this.attributes.setNamedItem(Y)},setAttributeNodeNS:function(Y){return this.attributes.setNamedItemNS(Y)},removeAttributeNode:function(Y){return this.attributes.removeNamedItem(Y.nodeName)},removeAttributeNS:function(Y,Q){var ce=this.getAttributeNodeNS(Y,Q);ce&&this.removeAttributeNode(ce)},hasAttributeNS:function(Y,Q){return this.getAttributeNodeNS(Y,Q)!=null},getAttributeNS:function(Y,Q){var ce=this.getAttributeNodeNS(Y,Q);return ce&&ce.value||""},setAttributeNS:function(Y,Q,ce){var we=this.ownerDocument.createAttributeNS(Y,Q);we.value=we.nodeValue=""+ce,this.setAttributeNode(we)},getAttributeNodeNS:function(Y,Q){return this.attributes.getNamedItemNS(Y,Q)},getElementsByTagName:function(Y){return new j(this,function(Q){var ce=[];return U(Q,function(we){we!==Q&&we.nodeType==h&&(Y==="*"||we.tagName==Y)&&ce.push(we)}),ce})},getElementsByTagNameNS:function(Y,Q){return new j(this,function(ce){var we=[];return U(ce,function(Oe){Oe!==ce&&Oe.nodeType===h&&(Y==="*"||Oe.namespaceURI===Y)&&(Q==="*"||Oe.localName==Q)&&we.push(Oe)}),we})}},G.prototype.getElementsByTagName=ee.prototype.getElementsByTagName,G.prototype.getElementsByTagNameNS=ee.prototype.getElementsByTagNameNS,u(ee,I);function ne(){}ne.prototype.nodeType=f,u(ne,I);function oe(){}oe.prototype={data:"",substringData:function(Y,Q){return this.data.substring(Y,Y+Q)},appendData:function(Y){Y=this.data+Y,this.nodeValue=this.data=Y,this.length=Y.length},insertData:function(Y,Q){this.replaceData(Y,0,Q)},appendChild:function(Y){throw new Error(_[D])},deleteData:function(Y,Q){this.replaceData(Y,Q,"")},replaceData:function(Y,Q,ce){var we=this.data.substring(0,Y),Oe=this.data.substring(Y+Q);ce=we+ce+Oe,this.nodeValue=this.data=ce,this.length=ce.length}},u(oe,I);function pe(){}pe.prototype={nodeName:"#text",nodeType:p,splitText:function(Y){var Q=this.data,ce=Q.substring(Y);Q=Q.substring(0,Y),this.data=this.nodeValue=Q,this.length=Q.length;var we=this.ownerDocument.createTextNode(ce);return this.parentNode&&this.parentNode.insertBefore(we,this.nextSibling),we}},u(pe,oe);function Ae(){}Ae.prototype={nodeName:"#comment",nodeType:x},u(Ae,oe);function Ne(){}Ne.prototype={nodeName:"#cdata-section",nodeType:y},u(Ne,oe);function Pe(){}Pe.prototype.nodeType=A,u(Pe,I);function ot(){}ot.prototype.nodeType=S,u(ot,I);function Le(){}Le.prototype.nodeType=m,u(Le,I);function ge(){}ge.prototype.nodeType=g,u(ge,I);function Ie(){}Ie.prototype.nodeName="#document-fragment",Ie.prototype.nodeType=w,u(Ie,I);function he(){}he.prototype.nodeType=v,u(he,I);function Se(){}Se.prototype.serializeToString=function(Y,Q,ce){return Ce.call(Y,Q,ce)},I.prototype.toString=Ce;function Ce(Y,Q){var ce=[],we=this.nodeType==9&&this.documentElement||this,Oe=we.prefix,ut=we.namespaceURI;if(ut&&Oe==null){var Oe=we.lookupPrefix(ut);if(Oe==null)var Jt=[{namespace:ut,prefix:null}]}return et(this,ce,Y,Q,Jt),ce.join("")}function Ue(Y,Q,ce){var we=Y.prefix||"",Oe=Y.namespaceURI;if(!Oe||we==="xml"&&Oe===t.XML||Oe===t.XMLNS)return!1;for(var ut=ce.length;ut--;){var Jt=ce[ut];if(Jt.prefix===we)return Jt.namespace!==Oe}return!0}function Be(Y,Q,ce){Y.push(" ",Q,'="',ce.replace(/[<>&"\t\n\r]/g,L),'"')}function et(Y,Q,ce,we,Oe){if(Oe||(Oe=[]),we)if(Y=we(Y),Y){if(typeof Y=="string"){Q.push(Y);return}}else return;switch(Y.nodeType){case h:var ut=Y.attributes,Jt=ut.length,nt=Y.firstChild,yr=Y.tagName;ce=t.isHTML(Y.namespaceURI)||ce;var oi=yr;if(!ce&&!Y.prefix&&Y.namespaceURI){for(var pa,Si=0;Si<ut.length;Si++)if(ut.item(Si).name==="xmlns"){pa=ut.item(Si).value;break}if(!pa)for(var Va=Oe.length-1;Va>=0;Va--){var kr=Oe[Va];if(kr.prefix===""&&kr.namespace===Y.namespaceURI){pa=kr.namespace;break}}if(pa!==Y.namespaceURI)for(var Va=Oe.length-1;Va>=0;Va--){var kr=Oe[Va];if(kr.namespace===Y.namespaceURI){kr.prefix&&(oi=kr.prefix+":"+yr);break}}}Q.push("<",oi);for(var Ki=0;Ki<Jt;Ki++){var _e=ut.item(Ki);_e.prefix=="xmlns"?Oe.push({prefix:_e.localName,namespace:_e.value}):_e.nodeName=="xmlns"&&Oe.push({prefix:"",namespace:_e.value})}for(var Ki=0;Ki<Jt;Ki++){var _e=ut.item(Ki);if(Ue(_e,ce,Oe)){var Ve=_e.prefix||"",it=_e.namespaceURI;Be(Q,Ve?"xmlns:"+Ve:"xmlns",it),Oe.push({prefix:Ve,namespace:it})}et(_e,Q,ce,we,Oe)}if(yr===oi&&Ue(Y,ce,Oe)){var Ve=Y.prefix||"",it=Y.namespaceURI;Be(Q,Ve?"xmlns:"+Ve:"xmlns",it),Oe.push({prefix:Ve,namespace:it})}if(nt||ce&&!/^(?:meta|link|img|br|hr|input)$/i.test(yr)){if(Q.push(">"),ce&&/^script$/i.test(yr))for(;nt;)nt.data?Q.push(nt.data):et(nt,Q,ce,we,Oe.slice()),nt=nt.nextSibling;else for(;nt;)et(nt,Q,ce,we,Oe.slice()),nt=nt.nextSibling;Q.push("</",oi,">")}else Q.push("/>");return;case b:case w:for(var nt=Y.firstChild;nt;)et(nt,Q,ce,we,Oe.slice()),nt=nt.nextSibling;return;case f:return Be(Q,Y.name,Y.value);case p:return Q.push(Y.data.replace(/[<&>]/g,L));case y:return Q.push("<![CDATA[",Y.data,"]]>");case x:return Q.push("<!--",Y.data,"-->");case A:var bt=Y.publicId,Tt=Y.systemId;if(Q.push("<!DOCTYPE ",Y.name),bt)Q.push(" PUBLIC ",bt),Tt&&Tt!="."&&Q.push(" ",Tt),Q.push(">");else if(Tt&&Tt!=".")Q.push(" SYSTEM ",Tt,">");else{var rt=Y.internalSubset;rt&&Q.push(" [",rt,"]"),Q.push(">")}return;case v:return Q.push("<?",Y.target," ",Y.data,"?>");case g:return Q.push("&",Y.nodeName,";");default:Q.push("??",Y.nodeName)}}function _t(Y,Q,ce){var we;switch(Q.nodeType){case h:we=Q.cloneNode(!1),we.ownerDocument=Y;case w:break;case f:ce=!0;break}if(we||(we=Q.cloneNode(!1)),we.ownerDocument=Y,we.parentNode=null,ce)for(var Oe=Q.firstChild;Oe;)we.appendChild(_t(Y,Oe,ce)),Oe=Oe.nextSibling;return we}function un(Y,Q,ce){var we=new Q.constructor;for(var Oe in Q)if(Object.prototype.hasOwnProperty.call(Q,Oe)){var ut=Q[Oe];typeof ut!="object"&&ut!=we[Oe]&&(we[Oe]=ut)}switch(Q.childNodes&&(we.childNodes=new N),we.ownerDocument=Y,we.nodeType){case h:var Jt=Q.attributes,yr=we.attributes=new P,oi=Jt.length;yr._ownerElement=we;for(var pa=0;pa<oi;pa++)we.setAttributeNode(un(Y,Jt.item(pa),!0));break;case f:ce=!0}if(ce)for(var Si=Q.firstChild;Si;)we.appendChild(un(Y,Si,ce)),Si=Si.nextSibling;return we}function Nr(Y,Q,ce){Y[Q]=ce}try{if(Object.defineProperty){let Y=function(Q){switch(Q.nodeType){case h:case w:var ce=[];for(Q=Q.firstChild;Q;)Q.nodeType!==7&&Q.nodeType!==8&&ce.push(Y(Q)),Q=Q.nextSibling;return ce.join("");default:return Q.nodeValue}};Object.defineProperty(j.prototype,"length",{get:function(){return R(this),this.$$length}}),Object.defineProperty(I.prototype,"textContent",{get:function(){return Y(this)},set:function(Q){switch(this.nodeType){case h:case w:for(;this.firstChild;)this.removeChild(this.firstChild);(Q||String(Q))&&this.appendChild(this.ownerDocument.createTextNode(Q));break;default:this.data=Q,this.value=Q,this.nodeValue=Q}}}),Nr=function(Q,ce,we){Q["$$"+ce]=we}}}catch{}return Ka.DocumentType=Pe,Ka.DOMException=T,Ka.DOMImplementation=B,Ka.Element=ee,Ka.Node=I,Ka.NodeList=N,Ka.XMLSerializer=Se,Ka}var pd={},rw={},x8;function dhe(){return x8||(x8=1,(function(n){var e=w0().freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),n.entityMap=n.HTML_ENTITIES})(rw)),rw}var op={},b8;function hhe(){if(b8)return op;b8=1;var n=w0().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),i=0,a=1,s=2,o=3,c=4,u=5,d=6,h=7;function f(D,C){this.message=D,this.locator=C,Error.captureStackTrace&&Error.captureStackTrace(this,f)}f.prototype=new Error,f.prototype.name=f.name;function p(){}p.prototype={parse:function(D,C,k){var T=this.domBuilder;T.startDocument(),A(C,C={}),y(D,C,k,T,this.errorHandler),T.endDocument()}};function y(D,C,k,T,N){function j(le){if(le>65535){le-=65536;var ee=55296+(le>>10),ne=56320+(le&1023);return String.fromCharCode(ee,ne)}else return String.fromCharCode(le)}function R(le){var ee=le.slice(1,-1);return Object.hasOwnProperty.call(k,ee)?k[ee]:ee.charAt(0)==="#"?j(parseInt(ee.substr(1).replace("x","0x"))):(N.error("entity not found:"+le),le)}function P(le){if(le>G){var ee=D.substring(G,le).replace(/&#?\w+;/g,R);I&&F(G),T.characters(ee,0,le-G),G=le}}function F(le,ee){for(;le>=$&&(ee=B.exec(D));)q=ee.index,$=q+ee[0].length,I.lineNumber++;I.columnNumber=le-q+1}for(var q=0,$=0,B=/.*(?:\r\n?|\n)|.*$/g,I=T.locator,L=[{currentNSMap:C}],U={},G=0;;){try{var H=D.indexOf("<",G);if(H<0){if(!D.substr(G).match(/^\s*$/)){var V=T.doc,K=V.createTextNode(D.substr(G));V.appendChild(K),T.currentElement=K}return}switch(H>G&&P(H),D.charAt(H+1)){case"/":var re=D.indexOf(">",H+3),ae=D.substring(H+2,re).replace(/[ \t\n\r]+$/g,""),te=L.pop();re<0?(ae=D.substring(H+2).replace(/[\s<].*/,""),N.error("end tag name: "+ae+" is not complete:"+te.tagName),re=H+1+ae.length):ae.match(/\s</)&&(ae=ae.replace(/[\s<].*/,""),N.error("end tag name: "+ae+" maybe not complete"),re=H+1+ae.length);var de=te.localNSMap,xe=te.tagName==ae,ve=xe||te.tagName&&te.tagName.toLowerCase()==ae.toLowerCase();if(ve){if(T.endElement(te.uri,te.localName,ae),de)for(var Te in de)Object.prototype.hasOwnProperty.call(de,Te)&&T.endPrefixMapping(Te);xe||N.fatalError("end tag name: "+ae+" is not match the current start tagName:"+te.tagName)}else L.push(te);re++;break;case"?":I&&F(H),re=S(D,H,T);break;case"!":I&&F(H),re=w(D,H,T,N);break;default:I&&F(H);var O=new E,ie=L[L.length-1].currentNSMap,re=m(D,H,O,ie,R,N),Z=O.length;if(!O.closed&&b(D,re,O.tagName,U)&&(O.closed=!0,k.nbsp||N.warning("unclosed xml attribute")),I&&Z){for(var z=g(I,{}),X=0;X<Z;X++){var ue=O[X];F(ue.offset),ue.locator=g(I,{})}T.locator=z,v(O,T,ie)&&L.push(O),T.locator=I}else v(O,T,ie)&&L.push(O);n.isHTML(O.uri)&&!O.closed?re=x(D,re,O.tagName,R,T):re++}}catch(le){if(le instanceof f)throw le;N.error("element parse error: "+le),re=-1}re>G?G=re:P(Math.max(H,G)+1)}}function g(D,C){return C.lineNumber=D.lineNumber,C.columnNumber=D.columnNumber,C}function m(D,C,k,T,N,j){function R(I,L,U){k.attributeNames.hasOwnProperty(I)&&j.fatalError("Attribute "+I+" redefined"),k.addValue(I,L.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,N),U)}for(var P,F,q=++C,$=i;;){var B=D.charAt(q);switch(B){case"=":if($===a)P=D.slice(C,q),$=o;else if($===s)$=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if($===o||$===a)if($===a&&(j.warning('attribute value must after "="'),P=D.slice(C,q)),C=q+1,q=D.indexOf(B,C),q>0)F=D.slice(C,q),R(P,F,C-1),$=u;else throw new Error("attribute value no end '"+B+"' match");else if($==c)F=D.slice(C,q),R(P,F,C),j.warning('attribute "'+P+'" missed start quot('+B+")!!"),C=q+1,$=u;else throw new Error('attribute value must after "="');break;case"/":switch($){case i:k.setTagName(D.slice(C,q));case u:case d:case h:$=h,k.closed=!0;case c:case a:break;case s:k.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return j.error("unexpected end of input"),$==i&&k.setTagName(D.slice(C,q)),q;case">":switch($){case i:k.setTagName(D.slice(C,q));case u:case d:case h:break;case c:case a:F=D.slice(C,q),F.slice(-1)==="/"&&(k.closed=!0,F=F.slice(0,-1));case s:$===s&&(F=P),$==c?(j.warning('attribute "'+F+'" missed quot(")!'),R(P,F,C)):((!n.isHTML(T[""])||!F.match(/^(?:disabled|checked|selected)$/i))&&j.warning('attribute "'+F+'" missed value!! "'+F+'" instead!!'),R(F,F,C));break;case o:throw new Error("attribute value missed!!")}return q;case"":B=" ";default:if(B<=" ")switch($){case i:k.setTagName(D.slice(C,q)),$=d;break;case a:P=D.slice(C,q),$=s;break;case c:var F=D.slice(C,q);j.warning('attribute "'+F+'" missed quot(")!!'),R(P,F,C);case u:$=d;break}else switch($){case s:k.tagName,(!n.isHTML(T[""])||!P.match(/^(?:disabled|checked|selected)$/i))&&j.warning('attribute "'+P+'" missed value!! "'+P+'" instead2!!'),R(P,P,C),C=q,$=a;break;case u:j.warning('attribute space is required"'+P+'"!!');case d:$=a,C=q;break;case o:$=c,C=q;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}q++}}function v(D,C,k){for(var T=D.tagName,N=null,B=D.length;B--;){var j=D[B],R=j.qName,P=j.value,I=R.indexOf(":");if(I>0)var F=j.prefix=R.slice(0,I),q=R.slice(I+1),$=F==="xmlns"&&q;else q=R,F=null,$=R==="xmlns"&&"";j.localName=q,$!==!1&&(N==null&&(N={},A(k,k={})),k[$]=N[$]=P,j.uri=n.XMLNS,C.startPrefixMapping($,P))}for(var B=D.length;B--;){j=D[B];var F=j.prefix;F&&(F==="xml"&&(j.uri=n.XML),F!=="xmlns"&&(j.uri=k[F||""]))}var I=T.indexOf(":");I>0?(F=D.prefix=T.slice(0,I),q=D.localName=T.slice(I+1)):(F=null,q=D.localName=T);var L=D.uri=k[F||""];if(C.startElement(L,q,T,D),D.closed){if(C.endElement(L,q,T),N)for(F in N)Object.prototype.hasOwnProperty.call(N,F)&&C.endPrefixMapping(F)}else return D.currentNSMap=k,D.localNSMap=N,!0}function x(D,C,k,T,N){if(/^(?:script|textarea)$/i.test(k)){var j=D.indexOf("</"+k+">",C),R=D.substring(C+1,j);if(/[&<]/.test(R))return/^script$/i.test(k)?(N.characters(R,0,R.length),j):(R=R.replace(/&#?\w+;/g,T),N.characters(R,0,R.length),j)}return C+1}function b(D,C,k,T){var N=T[k];return N==null&&(N=D.lastIndexOf("</"+k+">"),N<C&&(N=D.lastIndexOf("</"+k)),T[k]=N),N<C}function A(D,C){for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&(C[k]=D[k])}function w(D,C,k,T){var N=D.charAt(C+2);switch(N){case"-":if(D.charAt(C+3)==="-"){var j=D.indexOf("-->",C+4);return j>C?(k.comment(D,C+4,j-C-4),j+3):(T.error("Unclosed comment"),-1)}else return-1;default:if(D.substr(C+3,6)=="CDATA["){var j=D.indexOf("]]>",C+9);return k.startCDATA(),k.characters(D,C+9,j-C-9),k.endCDATA(),j+3}var R=_(D,C),P=R.length;if(P>1&&/!doctype/i.test(R[0][0])){var F=R[1][0],q=!1,$=!1;P>3&&(/^public$/i.test(R[2][0])?(q=R[3][0],$=P>4&&R[4][0]):/^system$/i.test(R[2][0])&&($=R[3][0]));var B=R[P-1];return k.startDTD(F,q,$),k.endDTD(),B.index+B[0].length}}return-1}function S(D,C,k){var T=D.indexOf("?>",C);if(T){var N=D.substring(C,T).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return N?(N[0].length,k.processingInstruction(N[1],N[2]),T+2):-1}return-1}function E(){this.attributeNames={}}E.prototype={setTagName:function(D){if(!r.test(D))throw new Error("invalid tagName:"+D);this.tagName=D},addValue:function(D,C,k){if(!r.test(D))throw new Error("invalid attribute:"+D);this.attributeNames[D]=this.length,this[this.length++]={qName:D,value:C,offset:k}},length:0,getLocalName:function(D){return this[D].localName},getLocator:function(D){return this[D].locator},getQName:function(D){return this[D].qName},getURI:function(D){return this[D].uri},getValue:function(D){return this[D].value}};function _(D,C){var k,T=[],N=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(N.lastIndex=C,N.exec(D);k=N.exec(D);)if(T.push(k),k[1])return T}return op.XMLReader=p,op.ParseError=f,op}var w8;function fhe(){if(w8)return pd;w8=1;var n=w0(),e=OD(),t=dhe(),r=hhe(),i=e.DOMImplementation,a=n.NAMESPACE,s=r.ParseError,o=r.XMLReader;function c(m){return m.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function u(m){this.options=m||{locator:{}}}u.prototype.parseFromString=function(m,v){var x=this.options,b=new o,A=x.domBuilder||new h,w=x.errorHandler,S=x.locator,E=x.xmlns||{},_=/\/x?html?$/.test(v),D=_?t.HTML_ENTITIES:t.XML_ENTITIES;S&&A.setDocumentLocator(S),b.errorHandler=d(w,A,S),b.domBuilder=x.domBuilder||A,_&&(E[""]=a.HTML),E.xml=E.xml||a.XML;var C=x.normalizeLineEndings||c;return m&&typeof m=="string"?b.parse(C(m),E,D):b.errorHandler.error("invalid doc source"),A.doc};function d(m,v,x){if(!m){if(v instanceof h)return v;m=v}var b={},A=m instanceof Function;x=x||{};function w(S){var E=m[S];!E&&A&&(E=m.length==2?function(_){m(S,_)}:m),b[S]=E&&function(_){E("[xmldom "+S+"]	"+_+p(x))}||function(){}}return w("warning"),w("error"),w("fatalError"),b}function h(){this.cdata=!1}function f(m,v){v.lineNumber=m.lineNumber,v.columnNumber=m.columnNumber}h.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(m,v,x,b){var A=this.doc,w=A.createElementNS(m,x||v),S=b.length;g(this,w),this.currentElement=w,this.locator&&f(this.locator,w);for(var E=0;E<S;E++){var m=b.getURI(E),_=b.getValue(E),x=b.getQName(E),D=A.createAttributeNS(m,x);this.locator&&f(b.getLocator(E),D),D.value=D.nodeValue=_,w.setAttributeNode(D)}},endElement:function(m,v,x){var b=this.currentElement;b.tagName,this.currentElement=b.parentNode},startPrefixMapping:function(m,v){},endPrefixMapping:function(m){},processingInstruction:function(m,v){var x=this.doc.createProcessingInstruction(m,v);this.locator&&f(this.locator,x),g(this,x)},ignorableWhitespace:function(m,v,x){},characters:function(m,v,x){if(m=y.apply(this,arguments),m){if(this.cdata)var b=this.doc.createCDATASection(m);else var b=this.doc.createTextNode(m);this.currentElement?this.currentElement.appendChild(b):/^\s*$/.test(m)&&this.doc.appendChild(b),this.locator&&f(this.locator,b)}},skippedEntity:function(m){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(m){(this.locator=m)&&(m.lineNumber=0)},comment:function(m,v,x){m=y.apply(this,arguments);var b=this.doc.createComment(m);this.locator&&f(this.locator,b),g(this,b)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(m,v,x){var b=this.doc.implementation;if(b&&b.createDocumentType){var A=b.createDocumentType(m,v,x);this.locator&&f(this.locator,A),g(this,A),this.doc.doctype=A}},warning:function(m){console.warn("[xmldom warning]	"+m,p(this.locator))},error:function(m){console.error("[xmldom error]	"+m,p(this.locator))},fatalError:function(m){throw new s(m,this.locator)}};function p(m){if(m)return`
@`+(m.systemId||"")+"#[line:"+m.lineNumber+",col:"+m.columnNumber+"]"}function y(m,v,x){return typeof m=="string"?m.substr(v,x):m.length>=v+x||v?new java.lang.String(m,v,x)+"":m}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(m){h.prototype[m]=function(){return null}});function g(m,v){m.currentElement?m.currentElement.appendChild(v):m.doc.appendChild(v)}return pd.__DOMHandler=h,pd.normalizeLineEndings=c,pd.DOMParser=u,pd}var A8;function phe(){if(A8)return fd;A8=1;var n=OD();return fd.DOMImplementation=n.DOMImplementation,fd.XMLSerializer=n.XMLSerializer,fd.DOMParser=fhe().DOMParser,fd}var S8;function mhe(){if(S8)return sp;S8=1;var n=phe(),e=OD();function t(r){var i=null,a=new n.DOMParser({errorHandler:function(o,c){i={level:o,message:c}}}),s=a.parseFromString(r);if(i===null)return s;throw new Error(i.level+": "+i.message)}return sp.parseFromString=t,sp.Node=e.Node,sp}var E8;function ghe(){if(E8)return nw;E8=1;var n=Ao(),e=On,t=mhe(),r=A7(),i=r.Element;nw.readString=s;var a=t.Node;function s(o,c){c=c||{};try{var u=t.parseFromString(o,"text/xml")}catch(p){return n.reject(p)}if(u.documentElement.tagName==="parsererror")return n.resolve(new Error(u.documentElement.textContent));function d(p){switch(p.nodeType){case a.ELEMENT_NODE:return h(p);case a.TEXT_NODE:return r.text(p.nodeValue)}}function h(p){var y=f(p),g=[];e.forEach(p.childNodes,function(v){var x=d(v);x&&g.push(x)});var m={};return e.forEach(p.attributes,function(v){m[f(v)]=v.value}),new i(y,m,g)}function f(p){if(p.namespaceURI){var y=c[p.namespaceURI],g;return y?g=y+":":g="{"+p.namespaceURI+"}",g+p.localName}else return p.localName}return n.resolve(d(u.documentElement))}return nw}var iw={},Io={},ya={},_8;function So(){return _8||(_8=1,(function(){var n,e,t,r,i,a,s,o=[].slice,c={}.hasOwnProperty;n=function(){var u,d,h,f,p,y;if(y=arguments[0],p=2<=arguments.length?o.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(u=0,h=p.length;u<h;u++)if(f=p[u],f!=null)for(d in f)c.call(f,d)&&(y[d]=f[d]);return y},i=function(u){return!!u&&Object.prototype.toString.call(u)==="[object Function]"},a=function(u){var d;return!!u&&((d=typeof u)=="function"||d==="object")},t=function(u){return i(Array.isArray)?Array.isArray(u):Object.prototype.toString.call(u)==="[object Array]"},r=function(u){var d;if(t(u))return!u.length;for(d in u)if(c.call(u,d))return!1;return!0},s=function(u){var d,h;return a(u)&&(h=Object.getPrototypeOf(u))&&(d=h.constructor)&&typeof d=="function"&&d instanceof d&&Function.prototype.toString.call(d)===Function.prototype.toString.call(Object)},e=function(u){return i(u.valueOf)?u.valueOf():u},ya.assign=n,ya.isFunction=i,ya.isObject=a,ya.isArray=t,ya.isEmpty=r,ya.isPlainObject=s,ya.getValue=e}).call(ya)),ya}var $p={exports:{}},zp={exports:{}},qp={exports:{}},Wp={exports:{}},yhe=Wp.exports,D8;function S7(){return D8||(D8=1,(function(){Wp.exports=(function(){function n(e,t,r){if(this.options=e.options,this.stringify=e.stringify,this.parent=e,t==null)throw new Error("Missing attribute name. "+this.debugInfo(t));if(r==null)throw new Error("Missing attribute value. "+this.debugInfo(t));this.name=this.stringify.attName(t),this.value=this.stringify.attValue(r)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.set(e).attribute(this)},n.prototype.debugInfo=function(e){return e=e||this.name,e==null?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},n})()}).call(yhe)),Wp.exports}var vhe=qp.exports,j8;function A0(){return j8||(j8=1,(function(){var n,e,t,r,i,a,s=function(c,u){for(var d in u)o.call(u,d)&&(c[d]=u[d]);function h(){this.constructor=c}return h.prototype=u.prototype,c.prototype=new h,c.__super__=u.prototype,c},o={}.hasOwnProperty;a=So(),i=a.isObject,r=a.isFunction,t=a.getValue,e=ai(),n=S7(),qp.exports=(function(c){s(u,c);function u(d,h,f){if(u.__super__.constructor.call(this,d),h==null)throw new Error("Missing element name. "+this.debugInfo());this.name=this.stringify.eleName(h),this.attributes={},f!=null&&this.attribute(f),d.isDocument&&(this.isRoot=!0,this.documentObject=d,d.rootObject=this)}return u.prototype.clone=function(){var d,h,f,p;f=Object.create(this),f.isRoot&&(f.documentObject=null),f.attributes={},p=this.attributes;for(h in p)o.call(p,h)&&(d=p[h],f.attributes[h]=d.clone());return f.children=[],this.children.forEach(function(y){var g;return g=y.clone(),g.parent=f,f.children.push(g)}),f},u.prototype.attribute=function(d,h){var f,p;if(d!=null&&(d=t(d)),i(d))for(f in d)o.call(d,f)&&(p=d[f],this.attribute(f,p));else r(h)&&(h=h.apply()),(!this.options.skipNullAttributes||h!=null)&&(this.attributes[d]=new n(this,d,h));return this},u.prototype.removeAttribute=function(d){var h,f,p;if(d==null)throw new Error("Missing attribute name. "+this.debugInfo());if(d=t(d),Array.isArray(d))for(f=0,p=d.length;f<p;f++)h=d[f],delete this.attributes[h];else delete this.attributes[d];return this},u.prototype.toString=function(d){return this.options.writer.set(d).element(this)},u.prototype.att=function(d,h){return this.attribute(d,h)},u.prototype.a=function(d,h){return this.attribute(d,h)},u})(e)}).call(vhe)),qp.exports}var Hp={exports:{}},xhe=Hp.exports,T8;function S0(){return T8||(T8=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function s(){this.constructor=r}return s.prototype=i.prototype,r.prototype=new s,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=ai(),Hp.exports=(function(r){e(i,r);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.text=this.stringify.cdata(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).cdata(this)},i})(n)}).call(xhe)),Hp.exports}var Vp={exports:{}},bhe=Vp.exports,C8;function E0(){return C8||(C8=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function s(){this.constructor=r}return s.prototype=i.prototype,r.prototype=new s,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=ai(),Vp.exports=(function(r){e(i,r);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing comment text. "+this.debugInfo());this.text=this.stringify.comment(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).comment(this)},i})(n)}).call(bhe)),Vp.exports}var Gp={exports:{}},whe=Gp.exports,N8;function _0(){return N8||(N8=1,(function(){var n,e,t=function(i,a){for(var s in a)r.call(a,s)&&(i[s]=a[s]);function o(){this.constructor=i}return o.prototype=a.prototype,i.prototype=new o,i.__super__=a.prototype,i},r={}.hasOwnProperty;e=So().isObject,n=ai(),Gp.exports=(function(i){t(a,i);function a(s,o,c,u){var d;a.__super__.constructor.call(this,s),e(o)&&(d=o,o=d.version,c=d.encoding,u=d.standalone),o||(o="1.0"),this.version=this.stringify.xmlVersion(o),c!=null&&(this.encoding=this.stringify.xmlEncoding(c)),u!=null&&(this.standalone=this.stringify.xmlStandalone(u))}return a.prototype.toString=function(s){return this.options.writer.set(s).declaration(this)},a})(n)}).call(whe)),Gp.exports}var Yp={exports:{}},Kp={exports:{}},Ahe=Kp.exports,k8;function D0(){return k8||(k8=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function s(){this.constructor=r}return s.prototype=i.prototype,r.prototype=new s,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=ai(),Kp.exports=(function(r){e(i,r);function i(a,s,o,c,u,d){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(o==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(s));if(!c)throw new Error("Missing DTD attribute type. "+this.debugInfo(s));if(!u)throw new Error("Missing DTD attribute default. "+this.debugInfo(s));if(u.indexOf("#")!==0&&(u="#"+u),!u.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(s));if(d&&!u.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(s));this.elementName=this.stringify.eleName(s),this.attributeName=this.stringify.attName(o),this.attributeType=this.stringify.dtdAttType(c),this.defaultValue=this.stringify.dtdAttDefault(d),this.defaultValueType=u}return i.prototype.toString=function(a){return this.options.writer.set(a).dtdAttList(this)},i})(n)}).call(Ahe)),Kp.exports}var Xp={exports:{}},She=Xp.exports,O8;function j0(){return O8||(O8=1,(function(){var n,e,t=function(i,a){for(var s in a)r.call(a,s)&&(i[s]=a[s]);function o(){this.constructor=i}return o.prototype=a.prototype,i.prototype=new o,i.__super__=a.prototype,i},r={}.hasOwnProperty;e=So().isObject,n=ai(),Xp.exports=(function(i){t(a,i);function a(s,o,c,u){if(a.__super__.constructor.call(this,s),c==null)throw new Error("Missing DTD entity name. "+this.debugInfo(c));if(u==null)throw new Error("Missing DTD entity value. "+this.debugInfo(c));if(this.pe=!!o,this.name=this.stringify.eleName(c),!e(u))this.value=this.stringify.dtdEntityValue(u);else{if(!u.pubID&&!u.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(c));if(u.pubID&&!u.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(c));if(u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID)),u.nData!=null&&(this.nData=this.stringify.dtdNData(u.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(c))}}return a.prototype.toString=function(s){return this.options.writer.set(s).dtdEntity(this)},a})(n)}).call(She)),Xp.exports}var Jp={exports:{}},Ehe=Jp.exports,P8;function T0(){return P8||(P8=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function s(){this.constructor=r}return s.prototype=i.prototype,r.prototype=new s,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=ai(),Jp.exports=(function(r){e(i,r);function i(a,s,o){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());o||(o="(#PCDATA)"),Array.isArray(o)&&(o="("+o.join(",")+")"),this.name=this.stringify.eleName(s),this.value=this.stringify.dtdElementValue(o)}return i.prototype.toString=function(a){return this.options.writer.set(a).dtdElement(this)},i})(n)}).call(Ehe)),Jp.exports}var Zp={exports:{}},_he=Zp.exports,I8;function C0(){return I8||(I8=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function s(){this.constructor=r}return s.prototype=i.prototype,r.prototype=new s,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=ai(),Zp.exports=(function(r){e(i,r);function i(a,s,o){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing DTD notation name. "+this.debugInfo(s));if(!o.pubID&&!o.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(s));this.name=this.stringify.eleName(s),o.pubID!=null&&(this.pubID=this.stringify.dtdPubID(o.pubID)),o.sysID!=null&&(this.sysID=this.stringify.dtdSysID(o.sysID))}return i.prototype.toString=function(a){return this.options.writer.set(a).dtdNotation(this)},i})(n)}).call(_he)),Zp.exports}var Dhe=Yp.exports,R8;function N0(){return R8||(R8=1,(function(){var n,e,t,r,i,a,s=function(c,u){for(var d in u)o.call(u,d)&&(c[d]=u[d]);function h(){this.constructor=c}return h.prototype=u.prototype,c.prototype=new h,c.__super__=u.prototype,c},o={}.hasOwnProperty;a=So().isObject,i=ai(),n=D0(),t=j0(),e=T0(),r=C0(),Yp.exports=(function(c){s(u,c);function u(d,h,f){var p,y;u.__super__.constructor.call(this,d),this.name="!DOCTYPE",this.documentObject=d,a(h)&&(p=h,h=p.pubID,f=p.sysID),f==null&&(y=[h,f],f=y[0],h=y[1]),h!=null&&(this.pubID=this.stringify.dtdPubID(h)),f!=null&&(this.sysID=this.stringify.dtdSysID(f))}return u.prototype.element=function(d,h){var f;return f=new e(this,d,h),this.children.push(f),this},u.prototype.attList=function(d,h,f,p,y){var g;return g=new n(this,d,h,f,p,y),this.children.push(g),this},u.prototype.entity=function(d,h){var f;return f=new t(this,!1,d,h),this.children.push(f),this},u.prototype.pEntity=function(d,h){var f;return f=new t(this,!0,d,h),this.children.push(f),this},u.prototype.notation=function(d,h){var f;return f=new r(this,d,h),this.children.push(f),this},u.prototype.toString=function(d){return this.options.writer.set(d).docType(this)},u.prototype.ele=function(d,h){return this.element(d,h)},u.prototype.att=function(d,h,f,p,y){return this.attList(d,h,f,p,y)},u.prototype.ent=function(d,h){return this.entity(d,h)},u.prototype.pent=function(d,h){return this.pEntity(d,h)},u.prototype.not=function(d,h){return this.notation(d,h)},u.prototype.up=function(){return this.root()||this.documentObject},u})(i)}).call(Dhe)),Yp.exports}var Qp={exports:{}},jhe=Qp.exports,M8;function k0(){return M8||(M8=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function s(){this.constructor=r}return s.prototype=i.prototype,r.prototype=new s,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=ai(),Qp.exports=(function(r){e(i,r);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing raw text. "+this.debugInfo());this.value=this.stringify.raw(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).raw(this)},i})(n)}).call(jhe)),Qp.exports}var em={exports:{}},The=em.exports,F8;function O0(){return F8||(F8=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function s(){this.constructor=r}return s.prototype=i.prototype,r.prototype=new s,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=ai(),em.exports=(function(r){e(i,r);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing element text. "+this.debugInfo());this.value=this.stringify.eleText(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).text(this)},i})(n)}).call(The)),em.exports}var tm={exports:{}},Che=tm.exports,L8;function P0(){return L8||(L8=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function s(){this.constructor=r}return s.prototype=i.prototype,r.prototype=new s,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=ai(),tm.exports=(function(r){e(i,r);function i(a,s,o){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing instruction target. "+this.debugInfo());this.target=this.stringify.insTarget(s),o&&(this.value=this.stringify.insValue(o))}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).processingInstruction(this)},i})(n)}).call(Che)),tm.exports}var nm={exports:{}},Nhe=nm.exports,U8;function PD(){return U8||(U8=1,(function(){var n,e=function(r,i){for(var a in i)t.call(i,a)&&(r[a]=i[a]);function s(){this.constructor=r}return s.prototype=i.prototype,r.prototype=new s,r.__super__=i.prototype,r},t={}.hasOwnProperty;n=ai(),nm.exports=(function(r){e(i,r);function i(a){i.__super__.constructor.call(this,a),this.isDummy=!0}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return""},i})(n)}).call(Nhe)),nm.exports}var khe=zp.exports,B8;function ai(){return B8||(B8=1,(function(){var n,e,t,r,i,a,s,o,c,u,d,h,f,p,y={}.hasOwnProperty;p=So(),f=p.isObject,h=p.isFunction,d=p.isEmpty,u=p.getValue,a=null,n=null,e=null,t=null,r=null,o=null,c=null,s=null,i=null,zp.exports=(function(){function g(m){this.parent=m,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],a||(a=A0(),n=S0(),e=E0(),t=_0(),r=N0(),o=k0(),c=O0(),s=P0(),i=PD())}return g.prototype.element=function(m,v,x){var b,A,w,S,E,_,D,C,k,T,N;if(_=null,v===null&&x==null&&(k=[{},null],v=k[0],x=k[1]),v==null&&(v={}),v=u(v),f(v)||(T=[v,x],x=T[0],v=T[1]),m!=null&&(m=u(m)),Array.isArray(m))for(w=0,D=m.length;w<D;w++)A=m[w],_=this.element(A);else if(h(m))_=this.element(m.apply());else if(f(m)){for(E in m)if(y.call(m,E))if(N=m[E],h(N)&&(N=N.apply()),f(N)&&d(N)&&(N=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&E.indexOf(this.stringify.convertAttKey)===0)_=this.attribute(E.substr(this.stringify.convertAttKey.length),N);else if(!this.options.separateArrayItems&&Array.isArray(N))for(S=0,C=N.length;S<C;S++)A=N[S],b={},b[E]=A,_=this.element(b);else f(N)?(_=this.element(E),_.element(N)):_=this.element(E,N)}else this.options.skipNullNodes&&x===null?_=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&m.indexOf(this.stringify.convertTextKey)===0?_=this.text(x):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&m.indexOf(this.stringify.convertCDataKey)===0?_=this.cdata(x):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&m.indexOf(this.stringify.convertCommentKey)===0?_=this.comment(x):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&m.indexOf(this.stringify.convertRawKey)===0?_=this.raw(x):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&m.indexOf(this.stringify.convertPIKey)===0?_=this.instruction(m.substr(this.stringify.convertPIKey.length),x):_=this.node(m,v,x);if(_==null)throw new Error("Could not create any elements with: "+m+". "+this.debugInfo());return _},g.prototype.insertBefore=function(m,v,x){var b,A,w;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(m));return A=this.parent.children.indexOf(this),w=this.parent.children.splice(A),b=this.parent.element(m,v,x),Array.prototype.push.apply(this.parent.children,w),b},g.prototype.insertAfter=function(m,v,x){var b,A,w;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(m));return A=this.parent.children.indexOf(this),w=this.parent.children.splice(A+1),b=this.parent.element(m,v,x),Array.prototype.push.apply(this.parent.children,w),b},g.prototype.remove=function(){var m;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return m=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[m,m-m+1].concat([])),this.parent},g.prototype.node=function(m,v,x){var b,A;return m!=null&&(m=u(m)),v||(v={}),v=u(v),f(v)||(A=[v,x],x=A[0],v=A[1]),b=new a(this,m,v),x!=null&&b.text(x),this.children.push(b),b},g.prototype.text=function(m){var v;return v=new c(this,m),this.children.push(v),this},g.prototype.cdata=function(m){var v;return v=new n(this,m),this.children.push(v),this},g.prototype.comment=function(m){var v;return v=new e(this,m),this.children.push(v),this},g.prototype.commentBefore=function(m){var v,x;return v=this.parent.children.indexOf(this),x=this.parent.children.splice(v),this.parent.comment(m),Array.prototype.push.apply(this.parent.children,x),this},g.prototype.commentAfter=function(m){var v,x;return v=this.parent.children.indexOf(this),x=this.parent.children.splice(v+1),this.parent.comment(m),Array.prototype.push.apply(this.parent.children,x),this},g.prototype.raw=function(m){var v;return v=new o(this,m),this.children.push(v),this},g.prototype.dummy=function(){var m;return m=new i(this),this.children.push(m),m},g.prototype.instruction=function(m,v){var x,b,A,w,S;if(m!=null&&(m=u(m)),v!=null&&(v=u(v)),Array.isArray(m))for(w=0,S=m.length;w<S;w++)x=m[w],this.instruction(x);else if(f(m))for(x in m)y.call(m,x)&&(b=m[x],this.instruction(x,b));else h(v)&&(v=v.apply()),A=new s(this,m,v),this.children.push(A);return this},g.prototype.instructionBefore=function(m,v){var x,b;return x=this.parent.children.indexOf(this),b=this.parent.children.splice(x),this.parent.instruction(m,v),Array.prototype.push.apply(this.parent.children,b),this},g.prototype.instructionAfter=function(m,v){var x,b;return x=this.parent.children.indexOf(this),b=this.parent.children.splice(x+1),this.parent.instruction(m,v),Array.prototype.push.apply(this.parent.children,b),this},g.prototype.declaration=function(m,v,x){var b,A;return b=this.document(),A=new t(b,m,v,x),b.children[0]instanceof t?b.children[0]=A:b.children.unshift(A),b.root()||b},g.prototype.doctype=function(m,v){var x,b,A,w,S,E,_,D,C,k;for(b=this.document(),A=new r(b,m,v),C=b.children,w=S=0,_=C.length;S<_;w=++S)if(x=C[w],x instanceof r)return b.children[w]=A,A;for(k=b.children,w=E=0,D=k.length;E<D;w=++E)if(x=k[w],x.isRoot)return b.children.splice(w,0,A),A;return b.children.push(A),A},g.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},g.prototype.root=function(){var m;for(m=this;m;){if(m.isDocument)return m.rootObject;if(m.isRoot)return m;m=m.parent}},g.prototype.document=function(){var m;for(m=this;m;){if(m.isDocument)return m;m=m.parent}},g.prototype.end=function(m){return this.document().end(m)},g.prototype.prev=function(){var m;for(m=this.parent.children.indexOf(this);m>0&&this.parent.children[m-1].isDummy;)m=m-1;if(m<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[m-1]},g.prototype.next=function(){var m;for(m=this.parent.children.indexOf(this);m<this.parent.children.length-1&&this.parent.children[m+1].isDummy;)m=m+1;if(m===-1||m===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[m+1]},g.prototype.importDocument=function(m){var v;return v=m.root().clone(),v.parent=this,v.isRoot=!1,this.children.push(v),this},g.prototype.debugInfo=function(m){var v,x;return m=m||this.name,m==null&&!((v=this.parent)!=null&&v.name)?"":m==null?"parent: <"+this.parent.name+">":(x=this.parent)!=null&&x.name?"node: <"+m+">, parent: <"+this.parent.name+">":"node: <"+m+">"},g.prototype.ele=function(m,v,x){return this.element(m,v,x)},g.prototype.nod=function(m,v,x){return this.node(m,v,x)},g.prototype.txt=function(m){return this.text(m)},g.prototype.dat=function(m){return this.cdata(m)},g.prototype.com=function(m){return this.comment(m)},g.prototype.ins=function(m,v){return this.instruction(m,v)},g.prototype.doc=function(){return this.document()},g.prototype.dec=function(m,v,x){return this.declaration(m,v,x)},g.prototype.dtd=function(m,v){return this.doctype(m,v)},g.prototype.e=function(m,v,x){return this.element(m,v,x)},g.prototype.n=function(m,v,x){return this.node(m,v,x)},g.prototype.t=function(m){return this.text(m)},g.prototype.d=function(m){return this.cdata(m)},g.prototype.c=function(m){return this.comment(m)},g.prototype.r=function(m){return this.raw(m)},g.prototype.i=function(m,v){return this.instruction(m,v)},g.prototype.u=function(){return this.up()},g.prototype.importXMLBuilder=function(m){return this.importDocument(m)},g})()}).call(khe)),zp.exports}var rm={exports:{}},Ohe=rm.exports,$8;function E7(){return $8||($8=1,(function(){var n=function(t,r){return function(){return t.apply(r,arguments)}},e={}.hasOwnProperty;rm.exports=(function(){function t(r){this.assertLegalChar=n(this.assertLegalChar,this);var i,a,s;r||(r={}),this.noDoubleEncoding=r.noDoubleEncoding,a=r.stringify||{};for(i in a)e.call(a,i)&&(s=a[i],this[i]=s)}return t.prototype.eleName=function(r){return r=""+r||"",this.assertLegalChar(r)},t.prototype.eleText=function(r){return r=""+r||"",this.assertLegalChar(this.elEscape(r))},t.prototype.cdata=function(r){return r=""+r||"",r=r.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(r)},t.prototype.comment=function(r){if(r=""+r||"",r.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+r);return this.assertLegalChar(r)},t.prototype.raw=function(r){return""+r||""},t.prototype.attName=function(r){return r=""+r||""},t.prototype.attValue=function(r){return r=""+r||"",this.attEscape(r)},t.prototype.insTarget=function(r){return""+r||""},t.prototype.insValue=function(r){if(r=""+r||"",r.match(/\?>/))throw new Error("Invalid processing instruction value: "+r);return r},t.prototype.xmlVersion=function(r){if(r=""+r||"",!r.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+r);return r},t.prototype.xmlEncoding=function(r){if(r=""+r||"",!r.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+r);return r},t.prototype.xmlStandalone=function(r){return r?"yes":"no"},t.prototype.dtdPubID=function(r){return""+r||""},t.prototype.dtdSysID=function(r){return""+r||""},t.prototype.dtdElementValue=function(r){return""+r||""},t.prototype.dtdAttType=function(r){return""+r||""},t.prototype.dtdAttDefault=function(r){return r!=null?""+r||"":r},t.prototype.dtdEntityValue=function(r){return""+r||""},t.prototype.dtdNData=function(r){return""+r||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(r){var i;if(i=r.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),i)throw new Error("Invalid character in string: "+r+" at index "+i.index);return r},t.prototype.elEscape=function(r){var i;return i=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,r.replace(i,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(r){var i;return i=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,r.replace(i,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t})()}).call(Ohe)),rm.exports}var im={exports:{}},am={exports:{}},Phe=am.exports,z8;function _7(){return z8||(z8=1,(function(){var n={}.hasOwnProperty;am.exports=(function(){function e(t){var r,i,a,s,o,c,u,d,h;t||(t={}),this.pretty=t.pretty||!1,this.allowEmpty=(i=t.allowEmpty)!=null?i:!1,this.pretty?(this.indent=(a=t.indent)!=null?a:"  ",this.newline=(s=t.newline)!=null?s:`
`,this.offset=(o=t.offset)!=null?o:0,this.dontprettytextnodes=(c=t.dontprettytextnodes)!=null?c:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=(u=t.spacebeforeslash)!=null?u:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,d=t.writer||{};for(r in d)n.call(d,r)&&(h=d[r],this[r]=h)}return e.prototype.set=function(t){var r,i,a;t||(t={}),"pretty"in t&&(this.pretty=t.pretty),"allowEmpty"in t&&(this.allowEmpty=t.allowEmpty),this.pretty?(this.indent="indent"in t?t.indent:"  ",this.newline="newline"in t?t.newline:`
`,this.offset="offset"in t?t.offset:0,this.dontprettytextnodes="dontprettytextnodes"in t?t.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in t?t.spacebeforeslash:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,i=t.writer||{};for(r in i)n.call(i,r)&&(a=i[r],this[r]=a);return this},e.prototype.space=function(t){var r;return this.pretty?(r=(t||0)+this.offset+1,r>0?new Array(r).join(this.indent):""):""},e})()}).call(Phe)),am.exports}var Ihe=im.exports,q8;function ID(){return q8||(q8=1,(function(){var n,e,t,r,i,a,s,o,c,u,d,h,f,p,y=function(m,v){for(var x in v)g.call(v,x)&&(m[x]=v[x]);function b(){this.constructor=m}return b.prototype=v.prototype,m.prototype=new b,m.__super__=v.prototype,m},g={}.hasOwnProperty;s=_0(),o=N0(),n=S0(),e=E0(),u=A0(),h=k0(),f=O0(),d=P0(),c=PD(),t=D0(),r=T0(),i=j0(),a=C0(),p=_7(),im.exports=(function(m){y(v,m);function v(x){v.__super__.constructor.call(this,x)}return v.prototype.document=function(x){var b,A,w,S,E;for(this.textispresent=!1,S="",E=x.children,A=0,w=E.length;A<w;A++)b=E[A],!(b instanceof c)&&(S+=(function(){switch(!1){case!(b instanceof s):return this.declaration(b);case!(b instanceof o):return this.docType(b);case!(b instanceof e):return this.comment(b);case!(b instanceof d):return this.processingInstruction(b);default:return this.element(b,0)}}).call(this));return this.pretty&&S.slice(-this.newline.length)===this.newline&&(S=S.slice(0,-this.newline.length)),S},v.prototype.attribute=function(x){return" "+x.name+'="'+x.value+'"'},v.prototype.cdata=function(x,b){return this.space(b)+"<![CDATA["+x.text+"]]>"+this.newline},v.prototype.comment=function(x,b){return this.space(b)+"<!-- "+x.text+" -->"+this.newline},v.prototype.declaration=function(x,b){var A;return A=this.space(b),A+='<?xml version="'+x.version+'"',x.encoding!=null&&(A+=' encoding="'+x.encoding+'"'),x.standalone!=null&&(A+=' standalone="'+x.standalone+'"'),A+=this.spacebeforeslash+"?>",A+=this.newline,A},v.prototype.docType=function(x,b){var A,w,S,E,_;if(b||(b=0),E=this.space(b),E+="<!DOCTYPE "+x.root().name,x.pubID&&x.sysID?E+=' PUBLIC "'+x.pubID+'" "'+x.sysID+'"':x.sysID&&(E+=' SYSTEM "'+x.sysID+'"'),x.children.length>0){for(E+=" [",E+=this.newline,_=x.children,w=0,S=_.length;w<S;w++)A=_[w],E+=(function(){switch(!1){case!(A instanceof t):return this.dtdAttList(A,b+1);case!(A instanceof r):return this.dtdElement(A,b+1);case!(A instanceof i):return this.dtdEntity(A,b+1);case!(A instanceof a):return this.dtdNotation(A,b+1);case!(A instanceof n):return this.cdata(A,b+1);case!(A instanceof e):return this.comment(A,b+1);case!(A instanceof d):return this.processingInstruction(A,b+1);default:throw new Error("Unknown DTD node type: "+A.constructor.name)}}).call(this);E+="]"}return E+=this.spacebeforeslash+">",E+=this.newline,E},v.prototype.element=function(x,b){var A,w,S,E,_,D,C,k,T,N,j,R,P;b||(b=0),P=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),R=this.space(b),k="",k+=R+"<"+x.name,T=x.attributes;for(C in T)g.call(T,C)&&(A=T[C],k+=this.attribute(A));if(x.children.length===0||x.children.every(function(F){return F.value===""}))this.allowEmpty?k+="></"+x.name+">"+this.newline:k+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&x.children.length===1&&x.children[0].value!=null)k+=">",k+=x.children[0].value,k+="</"+x.name+">"+this.newline;else{if(this.dontprettytextnodes){for(N=x.children,S=0,_=N.length;S<_;S++)if(w=N[S],w.value!=null){this.textispresent++,P=!0;break}}for(this.textispresent&&(this.newline="",this.pretty=!1,R=this.space(b)),k+=">"+this.newline,j=x.children,E=0,D=j.length;E<D;E++)w=j[E],k+=(function(){switch(!1){case!(w instanceof n):return this.cdata(w,b+1);case!(w instanceof e):return this.comment(w,b+1);case!(w instanceof u):return this.element(w,b+1);case!(w instanceof h):return this.raw(w,b+1);case!(w instanceof f):return this.text(w,b+1);case!(w instanceof d):return this.processingInstruction(w,b+1);case!(w instanceof c):return"";default:throw new Error("Unknown XML node type: "+w.constructor.name)}}).call(this);P&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),k+=R+"</"+x.name+">"+this.newline}return k},v.prototype.processingInstruction=function(x,b){var A;return A=this.space(b)+"<?"+x.target,x.value&&(A+=" "+x.value),A+=this.spacebeforeslash+"?>"+this.newline,A},v.prototype.raw=function(x,b){return this.space(b)+x.value+this.newline},v.prototype.text=function(x,b){return this.space(b)+x.value+this.newline},v.prototype.dtdAttList=function(x,b){var A;return A=this.space(b)+"<!ATTLIST "+x.elementName+" "+x.attributeName+" "+x.attributeType,x.defaultValueType!=="#DEFAULT"&&(A+=" "+x.defaultValueType),x.defaultValue&&(A+=' "'+x.defaultValue+'"'),A+=this.spacebeforeslash+">"+this.newline,A},v.prototype.dtdElement=function(x,b){return this.space(b)+"<!ELEMENT "+x.name+" "+x.value+this.spacebeforeslash+">"+this.newline},v.prototype.dtdEntity=function(x,b){var A;return A=this.space(b)+"<!ENTITY",x.pe&&(A+=" %"),A+=" "+x.name,x.value?A+=' "'+x.value+'"':(x.pubID&&x.sysID?A+=' PUBLIC "'+x.pubID+'" "'+x.sysID+'"':x.sysID&&(A+=' SYSTEM "'+x.sysID+'"'),x.nData&&(A+=" NDATA "+x.nData)),A+=this.spacebeforeslash+">"+this.newline,A},v.prototype.dtdNotation=function(x,b){var A;return A=this.space(b)+"<!NOTATION "+x.name,x.pubID&&x.sysID?A+=' PUBLIC "'+x.pubID+'" "'+x.sysID+'"':x.pubID?A+=' PUBLIC "'+x.pubID+'"':x.sysID&&(A+=' SYSTEM "'+x.sysID+'"'),A+=this.spacebeforeslash+">"+this.newline,A},v.prototype.openNode=function(x,b){var A,w,S,E;if(b||(b=0),x instanceof u){S=this.space(b)+"<"+x.name,E=x.attributes;for(w in E)g.call(E,w)&&(A=E[w],S+=this.attribute(A));return S+=(x.children?">":"/>")+this.newline,S}else return S=this.space(b)+"<!DOCTYPE "+x.rootNodeName,x.pubID&&x.sysID?S+=' PUBLIC "'+x.pubID+'" "'+x.sysID+'"':x.sysID&&(S+=' SYSTEM "'+x.sysID+'"'),S+=(x.children?" [":">")+this.newline,S},v.prototype.closeNode=function(x,b){switch(b||(b=0),!1){case!(x instanceof u):return this.space(b)+"</"+x.name+">"+this.newline;case!(x instanceof o):return this.space(b)+"]>"+this.newline}},v})(p)}).call(Ihe)),im.exports}var Rhe=$p.exports,W8;function Mhe(){return W8||(W8=1,(function(){var n,e,t,r,i=function(s,o){for(var c in o)a.call(o,c)&&(s[c]=o[c]);function u(){this.constructor=s}return u.prototype=o.prototype,s.prototype=new u,s.__super__=o.prototype,s},a={}.hasOwnProperty;r=So().isPlainObject,n=ai(),t=E7(),e=ID(),$p.exports=(function(s){i(o,s);function o(c){o.__super__.constructor.call(this,null),this.name="?xml",c||(c={}),c.writer||(c.writer=new e),this.options=c,this.stringify=new t(c),this.isDocument=!0}return o.prototype.end=function(c){var u;return c?r(c)&&(u=c,c=this.options.writer.set(u)):c=this.options.writer,c.document(this)},o.prototype.toString=function(c){return this.options.writer.set(c).document(this)},o})(n)}).call(Rhe)),$p.exports}var sm={exports:{}},Fhe=sm.exports,H8;function Lhe(){return H8||(H8=1,(function(){var n,e,t,r,i,a,s,o,c,u,d,h,f,p,y,g,m,v,x,b,A={}.hasOwnProperty;b=So(),v=b.isObject,m=b.isFunction,x=b.isPlainObject,g=b.getValue,u=A0(),e=S0(),t=E0(),h=k0(),y=O0(),d=P0(),o=_0(),c=N0(),r=D0(),a=j0(),i=T0(),s=C0(),n=S7(),p=E7(),f=ID(),sm.exports=(function(){function w(S,E,_){var D;this.name="?xml",S||(S={}),S.writer?x(S.writer)&&(D=S.writer,S.writer=new f(D)):S.writer=new f(S),this.options=S,this.writer=S.writer,this.stringify=new p(S),this.onDataCallback=E||function(){},this.onEndCallback=_||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return w.prototype.node=function(S,E,_){var D,C;if(S==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(S));return this.openCurrent(),S=g(S),E===null&&_==null&&(D=[{},null],E=D[0],_=D[1]),E==null&&(E={}),E=g(E),v(E)||(C=[E,_],_=C[0],E=C[1]),this.currentNode=new u(this,S,E),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,_!=null&&this.text(_),this},w.prototype.element=function(S,E,_){return this.currentNode&&this.currentNode instanceof c?this.dtdElement.apply(this,arguments):this.node(S,E,_)},w.prototype.attribute=function(S,E){var _,D;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(S));if(S!=null&&(S=g(S)),v(S))for(_ in S)A.call(S,_)&&(D=S[_],this.attribute(_,D));else m(E)&&(E=E.apply()),(!this.options.skipNullAttributes||E!=null)&&(this.currentNode.attributes[S]=new n(this,S,E));return this},w.prototype.text=function(S){var E;return this.openCurrent(),E=new y(this,S),this.onData(this.writer.text(E,this.currentLevel+1),this.currentLevel+1),this},w.prototype.cdata=function(S){var E;return this.openCurrent(),E=new e(this,S),this.onData(this.writer.cdata(E,this.currentLevel+1),this.currentLevel+1),this},w.prototype.comment=function(S){var E;return this.openCurrent(),E=new t(this,S),this.onData(this.writer.comment(E,this.currentLevel+1),this.currentLevel+1),this},w.prototype.raw=function(S){var E;return this.openCurrent(),E=new h(this,S),this.onData(this.writer.raw(E,this.currentLevel+1),this.currentLevel+1),this},w.prototype.instruction=function(S,E){var _,D,C,k,T;if(this.openCurrent(),S!=null&&(S=g(S)),E!=null&&(E=g(E)),Array.isArray(S))for(_=0,k=S.length;_<k;_++)D=S[_],this.instruction(D);else if(v(S))for(D in S)A.call(S,D)&&(C=S[D],this.instruction(D,C));else m(E)&&(E=E.apply()),T=new d(this,S,E),this.onData(this.writer.processingInstruction(T,this.currentLevel+1),this.currentLevel+1);return this},w.prototype.declaration=function(S,E,_){var D;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return D=new o(this,S,E,_),this.onData(this.writer.declaration(D,this.currentLevel+1),this.currentLevel+1),this},w.prototype.doctype=function(S,E,_){if(this.openCurrent(),S==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new c(this,E,_),this.currentNode.rootNodeName=S,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},w.prototype.dtdElement=function(S,E){var _;return this.openCurrent(),_=new i(this,S,E),this.onData(this.writer.dtdElement(_,this.currentLevel+1),this.currentLevel+1),this},w.prototype.attList=function(S,E,_,D,C){var k;return this.openCurrent(),k=new r(this,S,E,_,D,C),this.onData(this.writer.dtdAttList(k,this.currentLevel+1),this.currentLevel+1),this},w.prototype.entity=function(S,E){var _;return this.openCurrent(),_=new a(this,!1,S,E),this.onData(this.writer.dtdEntity(_,this.currentLevel+1),this.currentLevel+1),this},w.prototype.pEntity=function(S,E){var _;return this.openCurrent(),_=new a(this,!0,S,E),this.onData(this.writer.dtdEntity(_,this.currentLevel+1),this.currentLevel+1),this},w.prototype.notation=function(S,E){var _;return this.openCurrent(),_=new s(this,S,E),this.onData(this.writer.dtdNotation(_,this.currentLevel+1),this.currentLevel+1),this},w.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},w.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},w.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},w.prototype.openNode=function(S){if(!S.isOpen)return!this.root&&this.currentLevel===0&&S instanceof u&&(this.root=S),this.onData(this.writer.openNode(S,this.currentLevel),this.currentLevel),S.isOpen=!0},w.prototype.closeNode=function(S){if(!S.isClosed)return this.onData(this.writer.closeNode(S,this.currentLevel),this.currentLevel),S.isClosed=!0},w.prototype.onData=function(S,E){return this.documentStarted=!0,this.onDataCallback(S,E+1)},w.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},w.prototype.debugInfo=function(S){return S==null?"":"node: <"+S+">"},w.prototype.ele=function(){return this.element.apply(this,arguments)},w.prototype.nod=function(S,E,_){return this.node(S,E,_)},w.prototype.txt=function(S){return this.text(S)},w.prototype.dat=function(S){return this.cdata(S)},w.prototype.com=function(S){return this.comment(S)},w.prototype.ins=function(S,E){return this.instruction(S,E)},w.prototype.dec=function(S,E,_){return this.declaration(S,E,_)},w.prototype.dtd=function(S,E,_){return this.doctype(S,E,_)},w.prototype.e=function(S,E,_){return this.element(S,E,_)},w.prototype.n=function(S,E,_){return this.node(S,E,_)},w.prototype.t=function(S){return this.text(S)},w.prototype.d=function(S){return this.cdata(S)},w.prototype.c=function(S){return this.comment(S)},w.prototype.r=function(S){return this.raw(S)},w.prototype.i=function(S,E){return this.instruction(S,E)},w.prototype.att=function(){return this.currentNode&&this.currentNode instanceof c?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},w.prototype.a=function(){return this.currentNode&&this.currentNode instanceof c?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},w.prototype.ent=function(S,E){return this.entity(S,E)},w.prototype.pent=function(S,E){return this.pEntity(S,E)},w.prototype.not=function(S,E){return this.notation(S,E)},w})()}).call(Fhe)),sm.exports}var om={exports:{}},Uhe=om.exports,V8;function Bhe(){return V8||(V8=1,(function(){var n,e,t,r,i,a,s,o,c,u,d,h,f,p,y=function(m,v){for(var x in v)g.call(v,x)&&(m[x]=v[x]);function b(){this.constructor=m}return b.prototype=v.prototype,m.prototype=new b,m.__super__=v.prototype,m},g={}.hasOwnProperty;s=_0(),o=N0(),n=S0(),e=E0(),u=A0(),h=k0(),f=O0(),d=P0(),c=PD(),t=D0(),r=T0(),i=j0(),a=C0(),p=_7(),om.exports=(function(m){y(v,m);function v(x,b){v.__super__.constructor.call(this,b),this.stream=x}return v.prototype.document=function(x){var b,A,w,S,E,_,D,C;for(_=x.children,A=0,S=_.length;A<S;A++)b=_[A],b.isLastRootNode=!1;for(x.children[x.children.length-1].isLastRootNode=!0,D=x.children,C=[],w=0,E=D.length;w<E;w++)if(b=D[w],!(b instanceof c))switch(!1){case!(b instanceof s):C.push(this.declaration(b));break;case!(b instanceof o):C.push(this.docType(b));break;case!(b instanceof e):C.push(this.comment(b));break;case!(b instanceof d):C.push(this.processingInstruction(b));break;default:C.push(this.element(b))}return C},v.prototype.attribute=function(x){return this.stream.write(" "+x.name+'="'+x.value+'"')},v.prototype.cdata=function(x,b){return this.stream.write(this.space(b)+"<![CDATA["+x.text+"]]>"+this.endline(x))},v.prototype.comment=function(x,b){return this.stream.write(this.space(b)+"<!-- "+x.text+" -->"+this.endline(x))},v.prototype.declaration=function(x,b){return this.stream.write(this.space(b)),this.stream.write('<?xml version="'+x.version+'"'),x.encoding!=null&&this.stream.write(' encoding="'+x.encoding+'"'),x.standalone!=null&&this.stream.write(' standalone="'+x.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(x))},v.prototype.docType=function(x,b){var A,w,S,E;if(b||(b=0),this.stream.write(this.space(b)),this.stream.write("<!DOCTYPE "+x.root().name),x.pubID&&x.sysID?this.stream.write(' PUBLIC "'+x.pubID+'" "'+x.sysID+'"'):x.sysID&&this.stream.write(' SYSTEM "'+x.sysID+'"'),x.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(x)),E=x.children,w=0,S=E.length;w<S;w++)switch(A=E[w],!1){case!(A instanceof t):this.dtdAttList(A,b+1);break;case!(A instanceof r):this.dtdElement(A,b+1);break;case!(A instanceof i):this.dtdEntity(A,b+1);break;case!(A instanceof a):this.dtdNotation(A,b+1);break;case!(A instanceof n):this.cdata(A,b+1);break;case!(A instanceof e):this.comment(A,b+1);break;case!(A instanceof d):this.processingInstruction(A,b+1);break;default:throw new Error("Unknown DTD node type: "+A.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(x))},v.prototype.element=function(x,b){var A,w,S,E,_,D,C,k;b||(b=0),k=this.space(b),this.stream.write(k+"<"+x.name),D=x.attributes;for(_ in D)g.call(D,_)&&(A=D[_],this.attribute(A));if(x.children.length===0||x.children.every(function(T){return T.value===""}))this.allowEmpty?this.stream.write("></"+x.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&x.children.length===1&&x.children[0].value!=null)this.stream.write(">"),this.stream.write(x.children[0].value),this.stream.write("</"+x.name+">");else{for(this.stream.write(">"+this.newline),C=x.children,S=0,E=C.length;S<E;S++)switch(w=C[S],!1){case!(w instanceof n):this.cdata(w,b+1);break;case!(w instanceof e):this.comment(w,b+1);break;case!(w instanceof u):this.element(w,b+1);break;case!(w instanceof h):this.raw(w,b+1);break;case!(w instanceof f):this.text(w,b+1);break;case!(w instanceof d):this.processingInstruction(w,b+1);break;case!(w instanceof c):break;default:throw new Error("Unknown XML node type: "+w.constructor.name)}this.stream.write(k+"</"+x.name+">")}return this.stream.write(this.endline(x))},v.prototype.processingInstruction=function(x,b){return this.stream.write(this.space(b)+"<?"+x.target),x.value&&this.stream.write(" "+x.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(x))},v.prototype.raw=function(x,b){return this.stream.write(this.space(b)+x.value+this.endline(x))},v.prototype.text=function(x,b){return this.stream.write(this.space(b)+x.value+this.endline(x))},v.prototype.dtdAttList=function(x,b){return this.stream.write(this.space(b)+"<!ATTLIST "+x.elementName+" "+x.attributeName+" "+x.attributeType),x.defaultValueType!=="#DEFAULT"&&this.stream.write(" "+x.defaultValueType),x.defaultValue&&this.stream.write(' "'+x.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(x))},v.prototype.dtdElement=function(x,b){return this.stream.write(this.space(b)+"<!ELEMENT "+x.name+" "+x.value),this.stream.write(this.spacebeforeslash+">"+this.endline(x))},v.prototype.dtdEntity=function(x,b){return this.stream.write(this.space(b)+"<!ENTITY"),x.pe&&this.stream.write(" %"),this.stream.write(" "+x.name),x.value?this.stream.write(' "'+x.value+'"'):(x.pubID&&x.sysID?this.stream.write(' PUBLIC "'+x.pubID+'" "'+x.sysID+'"'):x.sysID&&this.stream.write(' SYSTEM "'+x.sysID+'"'),x.nData&&this.stream.write(" NDATA "+x.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(x))},v.prototype.dtdNotation=function(x,b){return this.stream.write(this.space(b)+"<!NOTATION "+x.name),x.pubID&&x.sysID?this.stream.write(' PUBLIC "'+x.pubID+'" "'+x.sysID+'"'):x.pubID?this.stream.write(' PUBLIC "'+x.pubID+'"'):x.sysID&&this.stream.write(' SYSTEM "'+x.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(x))},v.prototype.endline=function(x){return x.isLastRootNode?"":this.newline},v})(p)}).call(Uhe)),om.exports}var G8;function $he(){return G8||(G8=1,(function(){var n,e,t,r,i,a,s;s=So(),i=s.assign,a=s.isFunction,n=Mhe(),e=Lhe(),r=ID(),t=Bhe(),Io.create=function(o,c,u,d){var h,f;if(o==null)throw new Error("Root element needs a name.");return d=i({},c,u,d),h=new n(d),f=h.element(o),d.headless||(h.declaration(d),(d.pubID!=null||d.sysID!=null)&&h.doctype(d)),f},Io.begin=function(o,c,u){var d;return a(o)&&(d=[o,c],c=d[0],u=d[1],o={}),c?new e(o,c,u):new n(o)},Io.stringWriter=function(o){return new r(o)},Io.streamWriter=function(o,c){return new t(o,c)}}).call(Io)),Io}var Y8;function zhe(){if(Y8)return iw;Y8=1;var n=On,e=$he();iw.writeString=t;function t(i,a){var s=n.invert(a),o={element:u,text:r};function c(f,p){return o[p.type](f,p)}function u(f,p){var y=f.element(d(p.name),p.attributes);p.children.forEach(function(g){c(y,g)})}function d(f){var p=/^\{(.*)\}(.*)$/.exec(f);if(p){var y=s[p[1]];return y+(y===""?"":":")+p[2]}else return f}function h(f){var p=e.create(d(f.name),{version:"1.0",encoding:"UTF-8",standalone:!0});return n.forEach(a,function(y,g){var m="xmlns"+(g===""?"":":"+g);p.attribute(m,y)}),f.children.forEach(function(y){c(p,y)}),p.end()}return h(i)}function r(i,a){i.text(a.value)}return iw}var K8;function RD(){if(K8)return Ns;K8=1;var n=A7();return Ns.Element=n.Element,Ns.element=n.element,Ns.emptyElement=n.emptyElement,Ns.text=n.text,Ns.readString=ghe().readString,Ns.writeString=zhe().writeString,Ns}var X8;function qhe(){if(X8)return ap;X8=1;var n=On,e=Ao(),t=RD();ap.read=i,ap.readXmlFromZipFile=a;var r={"http://schemas.openxmlformats.org/wordprocessingml/2006/main":"w","http://schemas.openxmlformats.org/officeDocument/2006/relationships":"r","http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing":"wp","http://schemas.openxmlformats.org/drawingml/2006/main":"a","http://schemas.openxmlformats.org/drawingml/2006/picture":"pic","http://purl.oclc.org/ooxml/wordprocessingml/main":"w","http://purl.oclc.org/ooxml/officeDocument/relationships":"r","http://purl.oclc.org/ooxml/drawingml/wordprocessingDrawing":"wp","http://purl.oclc.org/ooxml/drawingml/main":"a","http://purl.oclc.org/ooxml/drawingml/picture":"pic","http://schemas.openxmlformats.org/package/2006/content-types":"content-types","http://schemas.openxmlformats.org/package/2006/relationships":"relationships","http://schemas.openxmlformats.org/markup-compatibility/2006":"mc","urn:schemas-microsoft-com:vml":"v","urn:schemas-microsoft-com:office:word":"office-word","http://schemas.microsoft.com/office/word/2010/wordml":"wordml"};function i(c){return t.readString(c,r).then(function(u){return o(u)[0]})}function a(c,u){return c.exists(u)?c.read(u,"utf-8").then(s).then(i):e.resolve(null)}function s(c){return c.replace(/^\uFEFF/g,"")}function o(c){return c.type==="element"?c.name==="mc:AlternateContent"?c.firstOrEmpty("mc:Fallback").children:(c.children=n.flatten(c.children.map(o,!0)),[c]):[c]}return ap}var lp={},ea={},cp={},J8;function Whe(){if(J8)return cp;J8=1,Object.defineProperty(cp,"__esModule",{value:!0});var n=[{"Typeface name":"Symbol","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Symbol","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"33","Unicode hex":"21"},{"Typeface name":"Symbol","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"8704","Unicode hex":"2200"},{"Typeface name":"Symbol","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"35","Unicode hex":"23"},{"Typeface name":"Symbol","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"8707","Unicode hex":"2203"},{"Typeface name":"Symbol","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"37","Unicode hex":"25"},{"Typeface name":"Symbol","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"38","Unicode hex":"26"},{"Typeface name":"Symbol","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"8717","Unicode hex":"220D"},{"Typeface name":"Symbol","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"40","Unicode hex":"28"},{"Typeface name":"Symbol","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"41","Unicode hex":"29"},{"Typeface name":"Symbol","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"42","Unicode hex":"2A"},{"Typeface name":"Symbol","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"43","Unicode hex":"2B"},{"Typeface name":"Symbol","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"44","Unicode hex":"2C"},{"Typeface name":"Symbol","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"8722","Unicode hex":"2212"},{"Typeface name":"Symbol","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"46","Unicode hex":"2E"},{"Typeface name":"Symbol","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"47","Unicode hex":"2F"},{"Typeface name":"Symbol","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"48","Unicode hex":"30"},{"Typeface name":"Symbol","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"49","Unicode hex":"31"},{"Typeface name":"Symbol","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"50","Unicode hex":"32"},{"Typeface name":"Symbol","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"51","Unicode hex":"33"},{"Typeface name":"Symbol","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"52","Unicode hex":"34"},{"Typeface name":"Symbol","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"53","Unicode hex":"35"},{"Typeface name":"Symbol","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"54","Unicode hex":"36"},{"Typeface name":"Symbol","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"55","Unicode hex":"37"},{"Typeface name":"Symbol","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"56","Unicode hex":"38"},{"Typeface name":"Symbol","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"57","Unicode hex":"39"},{"Typeface name":"Symbol","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"58","Unicode hex":"3A"},{"Typeface name":"Symbol","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"59","Unicode hex":"3B"},{"Typeface name":"Symbol","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"60","Unicode hex":"3C"},{"Typeface name":"Symbol","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"61","Unicode hex":"3D"},{"Typeface name":"Symbol","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"62","Unicode hex":"3E"},{"Typeface name":"Symbol","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"63","Unicode hex":"3F"},{"Typeface name":"Symbol","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"8773","Unicode hex":"2245"},{"Typeface name":"Symbol","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"913","Unicode hex":"391"},{"Typeface name":"Symbol","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"914","Unicode hex":"392"},{"Typeface name":"Symbol","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"935","Unicode hex":"3A7"},{"Typeface name":"Symbol","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"916","Unicode hex":"394"},{"Typeface name":"Symbol","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"917","Unicode hex":"395"},{"Typeface name":"Symbol","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"934","Unicode hex":"3A6"},{"Typeface name":"Symbol","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"915","Unicode hex":"393"},{"Typeface name":"Symbol","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"919","Unicode hex":"397"},{"Typeface name":"Symbol","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"921","Unicode hex":"399"},{"Typeface name":"Symbol","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"977","Unicode hex":"3D1"},{"Typeface name":"Symbol","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"922","Unicode hex":"39A"},{"Typeface name":"Symbol","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"923","Unicode hex":"39B"},{"Typeface name":"Symbol","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"924","Unicode hex":"39C"},{"Typeface name":"Symbol","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"925","Unicode hex":"39D"},{"Typeface name":"Symbol","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"927","Unicode hex":"39F"},{"Typeface name":"Symbol","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"928","Unicode hex":"3A0"},{"Typeface name":"Symbol","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"920","Unicode hex":"398"},{"Typeface name":"Symbol","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"929","Unicode hex":"3A1"},{"Typeface name":"Symbol","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"931","Unicode hex":"3A3"},{"Typeface name":"Symbol","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"932","Unicode hex":"3A4"},{"Typeface name":"Symbol","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"933","Unicode hex":"3A5"},{"Typeface name":"Symbol","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"962","Unicode hex":"3C2"},{"Typeface name":"Symbol","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"937","Unicode hex":"3A9"},{"Typeface name":"Symbol","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"926","Unicode hex":"39E"},{"Typeface name":"Symbol","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"936","Unicode hex":"3A8"},{"Typeface name":"Symbol","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"918","Unicode hex":"396"},{"Typeface name":"Symbol","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"91","Unicode hex":"5B"},{"Typeface name":"Symbol","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"8756","Unicode hex":"2234"},{"Typeface name":"Symbol","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"93","Unicode hex":"5D"},{"Typeface name":"Symbol","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"8869","Unicode hex":"22A5"},{"Typeface name":"Symbol","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"95","Unicode hex":"5F"},{"Typeface name":"Symbol","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"8254","Unicode hex":"203E"},{"Typeface name":"Symbol","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"945","Unicode hex":"3B1"},{"Typeface name":"Symbol","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"946","Unicode hex":"3B2"},{"Typeface name":"Symbol","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"967","Unicode hex":"3C7"},{"Typeface name":"Symbol","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"948","Unicode hex":"3B4"},{"Typeface name":"Symbol","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"949","Unicode hex":"3B5"},{"Typeface name":"Symbol","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"966","Unicode hex":"3C6"},{"Typeface name":"Symbol","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"947","Unicode hex":"3B3"},{"Typeface name":"Symbol","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"951","Unicode hex":"3B7"},{"Typeface name":"Symbol","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"953","Unicode hex":"3B9"},{"Typeface name":"Symbol","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"981","Unicode hex":"3D5"},{"Typeface name":"Symbol","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"954","Unicode hex":"3BA"},{"Typeface name":"Symbol","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"955","Unicode hex":"3BB"},{"Typeface name":"Symbol","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"956","Unicode hex":"3BC"},{"Typeface name":"Symbol","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"957","Unicode hex":"3BD"},{"Typeface name":"Symbol","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"959","Unicode hex":"3BF"},{"Typeface name":"Symbol","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"960","Unicode hex":"3C0"},{"Typeface name":"Symbol","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"952","Unicode hex":"3B8"},{"Typeface name":"Symbol","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"961","Unicode hex":"3C1"},{"Typeface name":"Symbol","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"963","Unicode hex":"3C3"},{"Typeface name":"Symbol","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"964","Unicode hex":"3C4"},{"Typeface name":"Symbol","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"965","Unicode hex":"3C5"},{"Typeface name":"Symbol","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"982","Unicode hex":"3D6"},{"Typeface name":"Symbol","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"969","Unicode hex":"3C9"},{"Typeface name":"Symbol","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"958","Unicode hex":"3BE"},{"Typeface name":"Symbol","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"968","Unicode hex":"3C8"},{"Typeface name":"Symbol","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"950","Unicode hex":"3B6"},{"Typeface name":"Symbol","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"123","Unicode hex":"7B"},{"Typeface name":"Symbol","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"124","Unicode hex":"7C"},{"Typeface name":"Symbol","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"125","Unicode hex":"7D"},{"Typeface name":"Symbol","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"126","Unicode hex":"7E"},{"Typeface name":"Symbol","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"8364","Unicode hex":"20AC"},{"Typeface name":"Symbol","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"978","Unicode hex":"3D2"},{"Typeface name":"Symbol","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"8242","Unicode hex":"2032"},{"Typeface name":"Symbol","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"8804","Unicode hex":"2264"},{"Typeface name":"Symbol","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"8260","Unicode hex":"2044"},{"Typeface name":"Symbol","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"8734","Unicode hex":"221E"},{"Typeface name":"Symbol","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"402","Unicode hex":"192"},{"Typeface name":"Symbol","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9827","Unicode hex":"2663"},{"Typeface name":"Symbol","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9830","Unicode hex":"2666"},{"Typeface name":"Symbol","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"9829","Unicode hex":"2665"},{"Typeface name":"Symbol","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"9824","Unicode hex":"2660"},{"Typeface name":"Symbol","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"8596","Unicode hex":"2194"},{"Typeface name":"Symbol","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"8592","Unicode hex":"2190"},{"Typeface name":"Symbol","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"8593","Unicode hex":"2191"},{"Typeface name":"Symbol","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"8594","Unicode hex":"2192"},{"Typeface name":"Symbol","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"8595","Unicode hex":"2193"},{"Typeface name":"Symbol","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"176","Unicode hex":"B0"},{"Typeface name":"Symbol","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"177","Unicode hex":"B1"},{"Typeface name":"Symbol","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"8243","Unicode hex":"2033"},{"Typeface name":"Symbol","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"8805","Unicode hex":"2265"},{"Typeface name":"Symbol","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"215","Unicode hex":"D7"},{"Typeface name":"Symbol","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"8733","Unicode hex":"221D"},{"Typeface name":"Symbol","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"8706","Unicode hex":"2202"},{"Typeface name":"Symbol","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Symbol","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"247","Unicode hex":"F7"},{"Typeface name":"Symbol","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"8800","Unicode hex":"2260"},{"Typeface name":"Symbol","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"8801","Unicode hex":"2261"},{"Typeface name":"Symbol","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"8776","Unicode hex":"2248"},{"Typeface name":"Symbol","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"8230","Unicode hex":"2026"},{"Typeface name":"Symbol","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Symbol","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"9135","Unicode hex":"23AF"},{"Typeface name":"Symbol","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"8629","Unicode hex":"21B5"},{"Typeface name":"Symbol","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"8501","Unicode hex":"2135"},{"Typeface name":"Symbol","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"8465","Unicode hex":"2111"},{"Typeface name":"Symbol","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"8476","Unicode hex":"211C"},{"Typeface name":"Symbol","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"8472","Unicode hex":"2118"},{"Typeface name":"Symbol","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"8855","Unicode hex":"2297"},{"Typeface name":"Symbol","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"8853","Unicode hex":"2295"},{"Typeface name":"Symbol","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"8709","Unicode hex":"2205"},{"Typeface name":"Symbol","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"8745","Unicode hex":"2229"},{"Typeface name":"Symbol","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"8746","Unicode hex":"222A"},{"Typeface name":"Symbol","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"8835","Unicode hex":"2283"},{"Typeface name":"Symbol","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"8839","Unicode hex":"2287"},{"Typeface name":"Symbol","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"8836","Unicode hex":"2284"},{"Typeface name":"Symbol","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"8834","Unicode hex":"2282"},{"Typeface name":"Symbol","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"8838","Unicode hex":"2286"},{"Typeface name":"Symbol","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"8712","Unicode hex":"2208"},{"Typeface name":"Symbol","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"8713","Unicode hex":"2209"},{"Typeface name":"Symbol","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"8736","Unicode hex":"2220"},{"Typeface name":"Symbol","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"8711","Unicode hex":"2207"},{"Typeface name":"Symbol","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"8719","Unicode hex":"220F"},{"Typeface name":"Symbol","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8730","Unicode hex":"221A"},{"Typeface name":"Symbol","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Symbol","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"172","Unicode hex":"AC"},{"Typeface name":"Symbol","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"8743","Unicode hex":"2227"},{"Typeface name":"Symbol","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"8744","Unicode hex":"2228"},{"Typeface name":"Symbol","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"8660","Unicode hex":"21D4"},{"Typeface name":"Symbol","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"8656","Unicode hex":"21D0"},{"Typeface name":"Symbol","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"8657","Unicode hex":"21D1"},{"Typeface name":"Symbol","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"8658","Unicode hex":"21D2"},{"Typeface name":"Symbol","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"8659","Unicode hex":"21D3"},{"Typeface name":"Symbol","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Symbol","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"12296","Unicode hex":"3008"},{"Typeface name":"Symbol","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"8721","Unicode hex":"2211"},{"Typeface name":"Symbol","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"9115","Unicode hex":"239B"},{"Typeface name":"Symbol","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"9116","Unicode hex":"239C"},{"Typeface name":"Symbol","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9117","Unicode hex":"239D"},{"Typeface name":"Symbol","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9121","Unicode hex":"23A1"},{"Typeface name":"Symbol","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"9122","Unicode hex":"23A2"},{"Typeface name":"Symbol","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"9123","Unicode hex":"23A3"},{"Typeface name":"Symbol","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"9127","Unicode hex":"23A7"},{"Typeface name":"Symbol","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"9128","Unicode hex":"23A8"},{"Typeface name":"Symbol","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"9129","Unicode hex":"23A9"},{"Typeface name":"Symbol","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"9130","Unicode hex":"23AA"},{"Typeface name":"Symbol","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"63743","Unicode hex":"F8FF"},{"Typeface name":"Symbol","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"12297","Unicode hex":"3009"},{"Typeface name":"Symbol","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8747","Unicode hex":"222B"},{"Typeface name":"Symbol","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"8992","Unicode hex":"2320"},{"Typeface name":"Symbol","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"9134","Unicode hex":"23AE"},{"Typeface name":"Symbol","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"8993","Unicode hex":"2321"},{"Typeface name":"Symbol","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"9118","Unicode hex":"239E"},{"Typeface name":"Symbol","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"9119","Unicode hex":"239F"},{"Typeface name":"Symbol","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"9120","Unicode hex":"23A0"},{"Typeface name":"Symbol","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"9124","Unicode hex":"23A4"},{"Typeface name":"Symbol","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"9125","Unicode hex":"23A5"},{"Typeface name":"Symbol","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"9126","Unicode hex":"23A6"},{"Typeface name":"Symbol","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"9131","Unicode hex":"23AB"},{"Typeface name":"Symbol","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"9132","Unicode hex":"23AC"},{"Typeface name":"Symbol","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"9133","Unicode hex":"23AD"},{"Typeface name":"Webdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Webdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128375","Unicode hex":"1F577"},{"Typeface name":"Webdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128376","Unicode hex":"1F578"},{"Typeface name":"Webdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128370","Unicode hex":"1F572"},{"Typeface name":"Webdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128374","Unicode hex":"1F576"},{"Typeface name":"Webdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"127942","Unicode hex":"1F3C6"},{"Typeface name":"Webdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"127894","Unicode hex":"1F396"},{"Typeface name":"Webdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128391","Unicode hex":"1F587"},{"Typeface name":"Webdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128488","Unicode hex":"1F5E8"},{"Typeface name":"Webdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128489","Unicode hex":"1F5E9"},{"Typeface name":"Webdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128496","Unicode hex":"1F5F0"},{"Typeface name":"Webdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128497","Unicode hex":"1F5F1"},{"Typeface name":"Webdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"127798","Unicode hex":"1F336"},{"Typeface name":"Webdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"127895","Unicode hex":"1F397"},{"Typeface name":"Webdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128638","Unicode hex":"1F67E"},{"Typeface name":"Webdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128636","Unicode hex":"1F67C"},{"Typeface name":"Webdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128469","Unicode hex":"1F5D5"},{"Typeface name":"Webdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128470","Unicode hex":"1F5D6"},{"Typeface name":"Webdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128471","Unicode hex":"1F5D7"},{"Typeface name":"Webdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"9204","Unicode hex":"23F4"},{"Typeface name":"Webdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"9205","Unicode hex":"23F5"},{"Typeface name":"Webdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"9206","Unicode hex":"23F6"},{"Typeface name":"Webdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"9207","Unicode hex":"23F7"},{"Typeface name":"Webdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"9194","Unicode hex":"23EA"},{"Typeface name":"Webdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"9193","Unicode hex":"23E9"},{"Typeface name":"Webdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"9198","Unicode hex":"23EE"},{"Typeface name":"Webdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"9197","Unicode hex":"23ED"},{"Typeface name":"Webdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"9208","Unicode hex":"23F8"},{"Typeface name":"Webdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"9209","Unicode hex":"23F9"},{"Typeface name":"Webdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"9210","Unicode hex":"23FA"},{"Typeface name":"Webdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128474","Unicode hex":"1F5DA"},{"Typeface name":"Webdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128499","Unicode hex":"1F5F3"},{"Typeface name":"Webdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128736","Unicode hex":"1F6E0"},{"Typeface name":"Webdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"127959","Unicode hex":"1F3D7"},{"Typeface name":"Webdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"127960","Unicode hex":"1F3D8"},{"Typeface name":"Webdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"127961","Unicode hex":"1F3D9"},{"Typeface name":"Webdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"127962","Unicode hex":"1F3DA"},{"Typeface name":"Webdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"127964","Unicode hex":"1F3DC"},{"Typeface name":"Webdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"127981","Unicode hex":"1F3ED"},{"Typeface name":"Webdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"127963","Unicode hex":"1F3DB"},{"Typeface name":"Webdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"127968","Unicode hex":"1F3E0"},{"Typeface name":"Webdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"127958","Unicode hex":"1F3D6"},{"Typeface name":"Webdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"127965","Unicode hex":"1F3DD"},{"Typeface name":"Webdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128739","Unicode hex":"1F6E3"},{"Typeface name":"Webdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128269","Unicode hex":"1F50D"},{"Typeface name":"Webdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"127956","Unicode hex":"1F3D4"},{"Typeface name":"Webdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128065","Unicode hex":"1F441"},{"Typeface name":"Webdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128066","Unicode hex":"1F442"},{"Typeface name":"Webdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127966","Unicode hex":"1F3DE"},{"Typeface name":"Webdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"127957","Unicode hex":"1F3D5"},{"Typeface name":"Webdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"128740","Unicode hex":"1F6E4"},{"Typeface name":"Webdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127967","Unicode hex":"1F3DF"},{"Typeface name":"Webdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"128755","Unicode hex":"1F6F3"},{"Typeface name":"Webdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128364","Unicode hex":"1F56C"},{"Typeface name":"Webdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"128363","Unicode hex":"1F56B"},{"Typeface name":"Webdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128360","Unicode hex":"1F568"},{"Typeface name":"Webdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"128264","Unicode hex":"1F508"},{"Typeface name":"Webdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"127892","Unicode hex":"1F394"},{"Typeface name":"Webdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"127893","Unicode hex":"1F395"},{"Typeface name":"Webdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128492","Unicode hex":"1F5EC"},{"Typeface name":"Webdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128637","Unicode hex":"1F67D"},{"Typeface name":"Webdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"128493","Unicode hex":"1F5ED"},{"Typeface name":"Webdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128490","Unicode hex":"1F5EA"},{"Typeface name":"Webdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128491","Unicode hex":"1F5EB"},{"Typeface name":"Webdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"11156","Unicode hex":"2B94"},{"Typeface name":"Webdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"10004","Unicode hex":"2714"},{"Typeface name":"Webdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128690","Unicode hex":"1F6B2"},{"Typeface name":"Webdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"11036","Unicode hex":"2B1C"},{"Typeface name":"Webdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128737","Unicode hex":"1F6E1"},{"Typeface name":"Webdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128230","Unicode hex":"1F4E6"},{"Typeface name":"Webdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128753","Unicode hex":"1F6F1"},{"Typeface name":"Webdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"11035","Unicode hex":"2B1B"},{"Typeface name":"Webdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128657","Unicode hex":"1F691"},{"Typeface name":"Webdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"128712","Unicode hex":"1F6C8"},{"Typeface name":"Webdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128745","Unicode hex":"1F6E9"},{"Typeface name":"Webdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128752","Unicode hex":"1F6F0"},{"Typeface name":"Webdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"128968","Unicode hex":"1F7C8"},{"Typeface name":"Webdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128372","Unicode hex":"1F574"},{"Typeface name":"Webdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"11044","Unicode hex":"2B24"},{"Typeface name":"Webdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128741","Unicode hex":"1F6E5"},{"Typeface name":"Webdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128660","Unicode hex":"1F694"},{"Typeface name":"Webdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"128472","Unicode hex":"1F5D8"},{"Typeface name":"Webdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"128473","Unicode hex":"1F5D9"},{"Typeface name":"Webdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"10067","Unicode hex":"2753"},{"Typeface name":"Webdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"128754","Unicode hex":"1F6F2"},{"Typeface name":"Webdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"128647","Unicode hex":"1F687"},{"Typeface name":"Webdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"128653","Unicode hex":"1F68D"},{"Typeface name":"Webdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9971","Unicode hex":"26F3"},{"Typeface name":"Webdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Webdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"8854","Unicode hex":"2296"},{"Typeface name":"Webdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"128685","Unicode hex":"1F6AD"},{"Typeface name":"Webdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"128494","Unicode hex":"1F5EE"},{"Typeface name":"Webdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Webdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128495","Unicode hex":"1F5EF"},{"Typeface name":"Webdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128498","Unicode hex":"1F5F2"},{"Typeface name":"Webdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128697","Unicode hex":"1F6B9"},{"Typeface name":"Webdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"128698","Unicode hex":"1F6BA"},{"Typeface name":"Webdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"128713","Unicode hex":"1F6C9"},{"Typeface name":"Webdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"128714","Unicode hex":"1F6CA"},{"Typeface name":"Webdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"128700","Unicode hex":"1F6BC"},{"Typeface name":"Webdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"128125","Unicode hex":"1F47D"},{"Typeface name":"Webdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"127947","Unicode hex":"1F3CB"},{"Typeface name":"Webdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"9975","Unicode hex":"26F7"},{"Typeface name":"Webdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"127938","Unicode hex":"1F3C2"},{"Typeface name":"Webdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"127948","Unicode hex":"1F3CC"},{"Typeface name":"Webdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"127946","Unicode hex":"1F3CA"},{"Typeface name":"Webdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127940","Unicode hex":"1F3C4"},{"Typeface name":"Webdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"127949","Unicode hex":"1F3CD"},{"Typeface name":"Webdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"127950","Unicode hex":"1F3CE"},{"Typeface name":"Webdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128664","Unicode hex":"1F698"},{"Typeface name":"Webdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128480","Unicode hex":"1F5E0"},{"Typeface name":"Webdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128738","Unicode hex":"1F6E2"},{"Typeface name":"Webdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128176","Unicode hex":"1F4B0"},{"Typeface name":"Webdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"127991","Unicode hex":"1F3F7"},{"Typeface name":"Webdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128179","Unicode hex":"1F4B3"},{"Typeface name":"Webdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128106","Unicode hex":"1F46A"},{"Typeface name":"Webdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"128481","Unicode hex":"1F5E1"},{"Typeface name":"Webdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128482","Unicode hex":"1F5E2"},{"Typeface name":"Webdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128483","Unicode hex":"1F5E3"},{"Typeface name":"Webdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Webdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128388","Unicode hex":"1F584"},{"Typeface name":"Webdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128389","Unicode hex":"1F585"},{"Typeface name":"Webdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Webdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128390","Unicode hex":"1F586"},{"Typeface name":"Webdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128441","Unicode hex":"1F5B9"},{"Typeface name":"Webdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"128442","Unicode hex":"1F5BA"},{"Typeface name":"Webdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128443","Unicode hex":"1F5BB"},{"Typeface name":"Webdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128373","Unicode hex":"1F575"},{"Typeface name":"Webdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"128368","Unicode hex":"1F570"},{"Typeface name":"Webdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128445","Unicode hex":"1F5BD"},{"Typeface name":"Webdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128446","Unicode hex":"1F5BE"},{"Typeface name":"Webdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Webdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128466","Unicode hex":"1F5D2"},{"Typeface name":"Webdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128467","Unicode hex":"1F5D3"},{"Typeface name":"Webdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Webdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128218","Unicode hex":"1F4DA"},{"Typeface name":"Webdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128478","Unicode hex":"1F5DE"},{"Typeface name":"Webdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128479","Unicode hex":"1F5DF"},{"Typeface name":"Webdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128451","Unicode hex":"1F5C3"},{"Typeface name":"Webdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128450","Unicode hex":"1F5C2"},{"Typeface name":"Webdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128444","Unicode hex":"1F5BC"},{"Typeface name":"Webdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"127917","Unicode hex":"1F3AD"},{"Typeface name":"Webdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"127900","Unicode hex":"1F39C"},{"Typeface name":"Webdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"127896","Unicode hex":"1F398"},{"Typeface name":"Webdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"127897","Unicode hex":"1F399"},{"Typeface name":"Webdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"127911","Unicode hex":"1F3A7"},{"Typeface name":"Webdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128191","Unicode hex":"1F4BF"},{"Typeface name":"Webdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"127902","Unicode hex":"1F39E"},{"Typeface name":"Webdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128247","Unicode hex":"1F4F7"},{"Typeface name":"Webdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"127903","Unicode hex":"1F39F"},{"Typeface name":"Webdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"127916","Unicode hex":"1F3AC"},{"Typeface name":"Webdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128253","Unicode hex":"1F4FD"},{"Typeface name":"Webdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128249","Unicode hex":"1F4F9"},{"Typeface name":"Webdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128254","Unicode hex":"1F4FE"},{"Typeface name":"Webdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128251","Unicode hex":"1F4FB"},{"Typeface name":"Webdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"127898","Unicode hex":"1F39A"},{"Typeface name":"Webdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"127899","Unicode hex":"1F39B"},{"Typeface name":"Webdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128250","Unicode hex":"1F4FA"},{"Typeface name":"Webdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128187","Unicode hex":"1F4BB"},{"Typeface name":"Webdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128421","Unicode hex":"1F5A5"},{"Typeface name":"Webdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128422","Unicode hex":"1F5A6"},{"Typeface name":"Webdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128423","Unicode hex":"1F5A7"},{"Typeface name":"Webdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"128377","Unicode hex":"1F579"},{"Typeface name":"Webdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"127918","Unicode hex":"1F3AE"},{"Typeface name":"Webdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"128379","Unicode hex":"1F57B"},{"Typeface name":"Webdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128380","Unicode hex":"1F57C"},{"Typeface name":"Webdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128223","Unicode hex":"1F4DF"},{"Typeface name":"Webdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128385","Unicode hex":"1F581"},{"Typeface name":"Webdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128384","Unicode hex":"1F580"},{"Typeface name":"Webdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128424","Unicode hex":"1F5A8"},{"Typeface name":"Webdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128425","Unicode hex":"1F5A9"},{"Typeface name":"Webdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128447","Unicode hex":"1F5BF"},{"Typeface name":"Webdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128426","Unicode hex":"1F5AA"},{"Typeface name":"Webdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128476","Unicode hex":"1F5DC"},{"Typeface name":"Webdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128274","Unicode hex":"1F512"},{"Typeface name":"Webdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128275","Unicode hex":"1F513"},{"Typeface name":"Webdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128477","Unicode hex":"1F5DD"},{"Typeface name":"Webdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128229","Unicode hex":"1F4E5"},{"Typeface name":"Webdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128228","Unicode hex":"1F4E4"},{"Typeface name":"Webdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128371","Unicode hex":"1F573"},{"Typeface name":"Webdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"127779","Unicode hex":"1F323"},{"Typeface name":"Webdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"127780","Unicode hex":"1F324"},{"Typeface name":"Webdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"127781","Unicode hex":"1F325"},{"Typeface name":"Webdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"127782","Unicode hex":"1F326"},{"Typeface name":"Webdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"9729","Unicode hex":"2601"},{"Typeface name":"Webdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"127784","Unicode hex":"1F328"},{"Typeface name":"Webdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"127783","Unicode hex":"1F327"},{"Typeface name":"Webdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"127785","Unicode hex":"1F329"},{"Typeface name":"Webdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"127786","Unicode hex":"1F32A"},{"Typeface name":"Webdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"127788","Unicode hex":"1F32C"},{"Typeface name":"Webdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"127787","Unicode hex":"1F32B"},{"Typeface name":"Webdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"127772","Unicode hex":"1F31C"},{"Typeface name":"Webdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"127777","Unicode hex":"1F321"},{"Typeface name":"Webdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128715","Unicode hex":"1F6CB"},{"Typeface name":"Webdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128719","Unicode hex":"1F6CF"},{"Typeface name":"Webdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"127869","Unicode hex":"1F37D"},{"Typeface name":"Webdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"127864","Unicode hex":"1F378"},{"Typeface name":"Webdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128718","Unicode hex":"1F6CE"},{"Typeface name":"Webdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128717","Unicode hex":"1F6CD"},{"Typeface name":"Webdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9413","Unicode hex":"24C5"},{"Typeface name":"Webdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9855","Unicode hex":"267F"},{"Typeface name":"Webdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128710","Unicode hex":"1F6C6"},{"Typeface name":"Webdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"128392","Unicode hex":"1F588"},{"Typeface name":"Webdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"127891","Unicode hex":"1F393"},{"Typeface name":"Webdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128484","Unicode hex":"1F5E4"},{"Typeface name":"Webdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128485","Unicode hex":"1F5E5"},{"Typeface name":"Webdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128486","Unicode hex":"1F5E6"},{"Typeface name":"Webdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"128487","Unicode hex":"1F5E7"},{"Typeface name":"Webdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128746","Unicode hex":"1F6EA"},{"Typeface name":"Webdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128063","Unicode hex":"1F43F"},{"Typeface name":"Webdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"128038","Unicode hex":"1F426"},{"Typeface name":"Webdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128031","Unicode hex":"1F41F"},{"Typeface name":"Webdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128021","Unicode hex":"1F415"},{"Typeface name":"Webdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"128008","Unicode hex":"1F408"},{"Typeface name":"Webdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"128620","Unicode hex":"1F66C"},{"Typeface name":"Webdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"128622","Unicode hex":"1F66E"},{"Typeface name":"Webdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"128621","Unicode hex":"1F66D"},{"Typeface name":"Webdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"128623","Unicode hex":"1F66F"},{"Typeface name":"Webdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128506","Unicode hex":"1F5FA"},{"Typeface name":"Webdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"127757","Unicode hex":"1F30D"},{"Typeface name":"Webdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"127759","Unicode hex":"1F30F"},{"Typeface name":"Webdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"127758","Unicode hex":"1F30E"},{"Typeface name":"Webdings","Dingbat dec":"255","Dingbat hex":"FF","Unicode dec":"128330","Unicode hex":"1F54A"},{"Typeface name":"Wingdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128393","Unicode hex":"1F589"},{"Typeface name":"Wingdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"9986","Unicode hex":"2702"},{"Typeface name":"Wingdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"9985","Unicode hex":"2701"},{"Typeface name":"Wingdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128083","Unicode hex":"1F453"},{"Typeface name":"Wingdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"128365","Unicode hex":"1F56D"},{"Typeface name":"Wingdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Wingdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128367","Unicode hex":"1F56F"},{"Typeface name":"Wingdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128383","Unicode hex":"1F57F"},{"Typeface name":"Wingdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"9990","Unicode hex":"2706"},{"Typeface name":"Wingdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128386","Unicode hex":"1F582"},{"Typeface name":"Wingdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Wingdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128234","Unicode hex":"1F4EA"},{"Typeface name":"Wingdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128235","Unicode hex":"1F4EB"},{"Typeface name":"Wingdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128236","Unicode hex":"1F4EC"},{"Typeface name":"Wingdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128237","Unicode hex":"1F4ED"},{"Typeface name":"Wingdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128448","Unicode hex":"1F5C0"},{"Typeface name":"Wingdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128449","Unicode hex":"1F5C1"},{"Typeface name":"Wingdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128462","Unicode hex":"1F5CE"},{"Typeface name":"Wingdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128463","Unicode hex":"1F5CF"},{"Typeface name":"Wingdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128464","Unicode hex":"1F5D0"},{"Typeface name":"Wingdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128452","Unicode hex":"1F5C4"},{"Typeface name":"Wingdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"8987","Unicode hex":"231B"},{"Typeface name":"Wingdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128430","Unicode hex":"1F5AE"},{"Typeface name":"Wingdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128432","Unicode hex":"1F5B0"},{"Typeface name":"Wingdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128434","Unicode hex":"1F5B2"},{"Typeface name":"Wingdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128435","Unicode hex":"1F5B3"},{"Typeface name":"Wingdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128436","Unicode hex":"1F5B4"},{"Typeface name":"Wingdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128427","Unicode hex":"1F5AB"},{"Typeface name":"Wingdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128428","Unicode hex":"1F5AC"},{"Typeface name":"Wingdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"9991","Unicode hex":"2707"},{"Typeface name":"Wingdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"9997","Unicode hex":"270D"},{"Typeface name":"Wingdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128398","Unicode hex":"1F58E"},{"Typeface name":"Wingdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"9996","Unicode hex":"270C"},{"Typeface name":"Wingdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128399","Unicode hex":"1F58F"},{"Typeface name":"Wingdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128077","Unicode hex":"1F44D"},{"Typeface name":"Wingdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128078","Unicode hex":"1F44E"},{"Typeface name":"Wingdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"9756","Unicode hex":"261C"},{"Typeface name":"Wingdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"9758","Unicode hex":"261E"},{"Typeface name":"Wingdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"9757","Unicode hex":"261D"},{"Typeface name":"Wingdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"9759","Unicode hex":"261F"},{"Typeface name":"Wingdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128400","Unicode hex":"1F590"},{"Typeface name":"Wingdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"9786","Unicode hex":"263A"},{"Typeface name":"Wingdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128528","Unicode hex":"1F610"},{"Typeface name":"Wingdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"9785","Unicode hex":"2639"},{"Typeface name":"Wingdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128163","Unicode hex":"1F4A3"},{"Typeface name":"Wingdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128369","Unicode hex":"1F571"},{"Typeface name":"Wingdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"127987","Unicode hex":"1F3F3"},{"Typeface name":"Wingdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127985","Unicode hex":"1F3F1"},{"Typeface name":"Wingdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"9992","Unicode hex":"2708"},{"Typeface name":"Wingdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9788","Unicode hex":"263C"},{"Typeface name":"Wingdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127778","Unicode hex":"1F322"},{"Typeface name":"Wingdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"10052","Unicode hex":"2744"},{"Typeface name":"Wingdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128326","Unicode hex":"1F546"},{"Typeface name":"Wingdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"10014","Unicode hex":"271E"},{"Typeface name":"Wingdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128328","Unicode hex":"1F548"},{"Typeface name":"Wingdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10016","Unicode hex":"2720"},{"Typeface name":"Wingdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"10017","Unicode hex":"2721"},{"Typeface name":"Wingdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"9770","Unicode hex":"262A"},{"Typeface name":"Wingdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"9775","Unicode hex":"262F"},{"Typeface name":"Wingdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128329","Unicode hex":"1F549"},{"Typeface name":"Wingdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"9784","Unicode hex":"2638"},{"Typeface name":"Wingdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"9800","Unicode hex":"2648"},{"Typeface name":"Wingdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"9801","Unicode hex":"2649"},{"Typeface name":"Wingdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"9802","Unicode hex":"264A"},{"Typeface name":"Wingdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"9803","Unicode hex":"264B"},{"Typeface name":"Wingdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"9804","Unicode hex":"264C"},{"Typeface name":"Wingdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"9805","Unicode hex":"264D"},{"Typeface name":"Wingdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"9806","Unicode hex":"264E"},{"Typeface name":"Wingdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"9807","Unicode hex":"264F"},{"Typeface name":"Wingdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"9808","Unicode hex":"2650"},{"Typeface name":"Wingdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"9809","Unicode hex":"2651"},{"Typeface name":"Wingdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"9810","Unicode hex":"2652"},{"Typeface name":"Wingdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9811","Unicode hex":"2653"},{"Typeface name":"Wingdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128624","Unicode hex":"1F670"},{"Typeface name":"Wingdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128629","Unicode hex":"1F675"},{"Typeface name":"Wingdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9899","Unicode hex":"26AB"},{"Typeface name":"Wingdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128318","Unicode hex":"1F53E"},{"Typeface name":"Wingdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9724","Unicode hex":"25FC"},{"Typeface name":"Wingdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128911","Unicode hex":"1F78F"},{"Typeface name":"Wingdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128912","Unicode hex":"1F790"},{"Typeface name":"Wingdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"10065","Unicode hex":"2751"},{"Typeface name":"Wingdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"10066","Unicode hex":"2752"},{"Typeface name":"Wingdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"128927","Unicode hex":"1F79F"},{"Typeface name":"Wingdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"10731","Unicode hex":"29EB"},{"Typeface name":"Wingdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9670","Unicode hex":"25C6"},{"Typeface name":"Wingdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10070","Unicode hex":"2756"},{"Typeface name":"Wingdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"8999","Unicode hex":"2327"},{"Typeface name":"Wingdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"11193","Unicode hex":"2BB9"},{"Typeface name":"Wingdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"8984","Unicode hex":"2318"},{"Typeface name":"Wingdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"127989","Unicode hex":"1F3F5"},{"Typeface name":"Wingdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"127990","Unicode hex":"1F3F6"},{"Typeface name":"Wingdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128630","Unicode hex":"1F676"},{"Typeface name":"Wingdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128631","Unicode hex":"1F677"},{"Typeface name":"Wingdings","Dingbat dec":"127","Dingbat hex":"7F","Unicode dec":"9647","Unicode hex":"25AF"},{"Typeface name":"Wingdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"127243","Unicode hex":"1F10B"},{"Typeface name":"Wingdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"10112","Unicode hex":"2780"},{"Typeface name":"Wingdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"10113","Unicode hex":"2781"},{"Typeface name":"Wingdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"10114","Unicode hex":"2782"},{"Typeface name":"Wingdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"10115","Unicode hex":"2783"},{"Typeface name":"Wingdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10116","Unicode hex":"2784"},{"Typeface name":"Wingdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"10117","Unicode hex":"2785"},{"Typeface name":"Wingdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"10118","Unicode hex":"2786"},{"Typeface name":"Wingdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"10119","Unicode hex":"2787"},{"Typeface name":"Wingdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"10120","Unicode hex":"2788"},{"Typeface name":"Wingdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"10121","Unicode hex":"2789"},{"Typeface name":"Wingdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127244","Unicode hex":"1F10C"},{"Typeface name":"Wingdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"10122","Unicode hex":"278A"},{"Typeface name":"Wingdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"10123","Unicode hex":"278B"},{"Typeface name":"Wingdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"10124","Unicode hex":"278C"},{"Typeface name":"Wingdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"10125","Unicode hex":"278D"},{"Typeface name":"Wingdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"10126","Unicode hex":"278E"},{"Typeface name":"Wingdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"10127","Unicode hex":"278F"},{"Typeface name":"Wingdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"10128","Unicode hex":"2790"},{"Typeface name":"Wingdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"10129","Unicode hex":"2791"},{"Typeface name":"Wingdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"10130","Unicode hex":"2792"},{"Typeface name":"Wingdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"10131","Unicode hex":"2793"},{"Typeface name":"Wingdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128610","Unicode hex":"1F662"},{"Typeface name":"Wingdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128608","Unicode hex":"1F660"},{"Typeface name":"Wingdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"128609","Unicode hex":"1F661"},{"Typeface name":"Wingdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128611","Unicode hex":"1F663"},{"Typeface name":"Wingdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128606","Unicode hex":"1F65E"},{"Typeface name":"Wingdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128604","Unicode hex":"1F65C"},{"Typeface name":"Wingdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128605","Unicode hex":"1F65D"},{"Typeface name":"Wingdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128607","Unicode hex":"1F65F"},{"Typeface name":"Wingdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"8729","Unicode hex":"2219"},{"Typeface name":"Wingdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Wingdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"11037","Unicode hex":"2B1D"},{"Typeface name":"Wingdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"11096","Unicode hex":"2B58"},{"Typeface name":"Wingdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128902","Unicode hex":"1F786"},{"Typeface name":"Wingdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128904","Unicode hex":"1F788"},{"Typeface name":"Wingdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128906","Unicode hex":"1F78A"},{"Typeface name":"Wingdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128907","Unicode hex":"1F78B"},{"Typeface name":"Wingdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128319","Unicode hex":"1F53F"},{"Typeface name":"Wingdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9642","Unicode hex":"25AA"},{"Typeface name":"Wingdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128910","Unicode hex":"1F78E"},{"Typeface name":"Wingdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128961","Unicode hex":"1F7C1"},{"Typeface name":"Wingdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128965","Unicode hex":"1F7C5"},{"Typeface name":"Wingdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"9733","Unicode hex":"2605"},{"Typeface name":"Wingdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128971","Unicode hex":"1F7CB"},{"Typeface name":"Wingdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128975","Unicode hex":"1F7CF"},{"Typeface name":"Wingdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"128979","Unicode hex":"1F7D3"},{"Typeface name":"Wingdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"128977","Unicode hex":"1F7D1"},{"Typeface name":"Wingdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"11216","Unicode hex":"2BD0"},{"Typeface name":"Wingdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"8982","Unicode hex":"2316"},{"Typeface name":"Wingdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"11214","Unicode hex":"2BCE"},{"Typeface name":"Wingdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"11215","Unicode hex":"2BCF"},{"Typeface name":"Wingdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"11217","Unicode hex":"2BD1"},{"Typeface name":"Wingdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"10026","Unicode hex":"272A"},{"Typeface name":"Wingdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"10032","Unicode hex":"2730"},{"Typeface name":"Wingdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"128336","Unicode hex":"1F550"},{"Typeface name":"Wingdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128337","Unicode hex":"1F551"},{"Typeface name":"Wingdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128338","Unicode hex":"1F552"},{"Typeface name":"Wingdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128339","Unicode hex":"1F553"},{"Typeface name":"Wingdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128340","Unicode hex":"1F554"},{"Typeface name":"Wingdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"128341","Unicode hex":"1F555"},{"Typeface name":"Wingdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"128342","Unicode hex":"1F556"},{"Typeface name":"Wingdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128343","Unicode hex":"1F557"},{"Typeface name":"Wingdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128344","Unicode hex":"1F558"},{"Typeface name":"Wingdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128345","Unicode hex":"1F559"},{"Typeface name":"Wingdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128346","Unicode hex":"1F55A"},{"Typeface name":"Wingdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128347","Unicode hex":"1F55B"},{"Typeface name":"Wingdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11184","Unicode hex":"2BB0"},{"Typeface name":"Wingdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11185","Unicode hex":"2BB1"},{"Typeface name":"Wingdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11186","Unicode hex":"2BB2"},{"Typeface name":"Wingdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"11187","Unicode hex":"2BB3"},{"Typeface name":"Wingdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"11188","Unicode hex":"2BB4"},{"Typeface name":"Wingdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"11189","Unicode hex":"2BB5"},{"Typeface name":"Wingdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11190","Unicode hex":"2BB6"},{"Typeface name":"Wingdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11191","Unicode hex":"2BB7"},{"Typeface name":"Wingdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128618","Unicode hex":"1F66A"},{"Typeface name":"Wingdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128619","Unicode hex":"1F66B"},{"Typeface name":"Wingdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128597","Unicode hex":"1F655"},{"Typeface name":"Wingdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128596","Unicode hex":"1F654"},{"Typeface name":"Wingdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128599","Unicode hex":"1F657"},{"Typeface name":"Wingdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128598","Unicode hex":"1F656"},{"Typeface name":"Wingdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128592","Unicode hex":"1F650"},{"Typeface name":"Wingdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128593","Unicode hex":"1F651"},{"Typeface name":"Wingdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128594","Unicode hex":"1F652"},{"Typeface name":"Wingdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128595","Unicode hex":"1F653"},{"Typeface name":"Wingdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"9003","Unicode hex":"232B"},{"Typeface name":"Wingdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8998","Unicode hex":"2326"},{"Typeface name":"Wingdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"11160","Unicode hex":"2B98"},{"Typeface name":"Wingdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"11162","Unicode hex":"2B9A"},{"Typeface name":"Wingdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"11161","Unicode hex":"2B99"},{"Typeface name":"Wingdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"11163","Unicode hex":"2B9B"},{"Typeface name":"Wingdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"11144","Unicode hex":"2B88"},{"Typeface name":"Wingdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"11146","Unicode hex":"2B8A"},{"Typeface name":"Wingdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"11145","Unicode hex":"2B89"},{"Typeface name":"Wingdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"11147","Unicode hex":"2B8B"},{"Typeface name":"Wingdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129128","Unicode hex":"1F868"},{"Typeface name":"Wingdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129130","Unicode hex":"1F86A"},{"Typeface name":"Wingdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129129","Unicode hex":"1F869"},{"Typeface name":"Wingdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129131","Unicode hex":"1F86B"},{"Typeface name":"Wingdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129132","Unicode hex":"1F86C"},{"Typeface name":"Wingdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129133","Unicode hex":"1F86D"},{"Typeface name":"Wingdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129135","Unicode hex":"1F86F"},{"Typeface name":"Wingdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129134","Unicode hex":"1F86E"},{"Typeface name":"Wingdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129144","Unicode hex":"1F878"},{"Typeface name":"Wingdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129146","Unicode hex":"1F87A"},{"Typeface name":"Wingdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129145","Unicode hex":"1F879"},{"Typeface name":"Wingdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129147","Unicode hex":"1F87B"},{"Typeface name":"Wingdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129148","Unicode hex":"1F87C"},{"Typeface name":"Wingdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129149","Unicode hex":"1F87D"},{"Typeface name":"Wingdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129151","Unicode hex":"1F87F"},{"Typeface name":"Wingdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129150","Unicode hex":"1F87E"},{"Typeface name":"Wingdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"8678","Unicode hex":"21E6"},{"Typeface name":"Wingdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"8680","Unicode hex":"21E8"},{"Typeface name":"Wingdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"8679","Unicode hex":"21E7"},{"Typeface name":"Wingdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8681","Unicode hex":"21E9"},{"Typeface name":"Wingdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"11012","Unicode hex":"2B04"},{"Typeface name":"Wingdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"8691","Unicode hex":"21F3"},{"Typeface name":"Wingdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"11009","Unicode hex":"2B01"},{"Typeface name":"Wingdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11008","Unicode hex":"2B00"},{"Typeface name":"Wingdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11011","Unicode hex":"2B03"},{"Typeface name":"Wingdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"11010","Unicode hex":"2B02"},{"Typeface name":"Wingdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"129196","Unicode hex":"1F8AC"},{"Typeface name":"Wingdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"129197","Unicode hex":"1F8AD"},{"Typeface name":"Wingdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128502","Unicode hex":"1F5F6"},{"Typeface name":"Wingdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"10003","Unicode hex":"2713"},{"Typeface name":"Wingdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"128503","Unicode hex":"1F5F7"},{"Typeface name":"Wingdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"128505","Unicode hex":"1F5F9"},{"Typeface name":"Wingdings 2","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 2","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128394","Unicode hex":"1F58A"},{"Typeface name":"Wingdings 2","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128395","Unicode hex":"1F58B"},{"Typeface name":"Wingdings 2","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128396","Unicode hex":"1F58C"},{"Typeface name":"Wingdings 2","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128397","Unicode hex":"1F58D"},{"Typeface name":"Wingdings 2","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"9988","Unicode hex":"2704"},{"Typeface name":"Wingdings 2","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"9984","Unicode hex":"2700"},{"Typeface name":"Wingdings 2","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128382","Unicode hex":"1F57E"},{"Typeface name":"Wingdings 2","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128381","Unicode hex":"1F57D"},{"Typeface name":"Wingdings 2","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128453","Unicode hex":"1F5C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128454","Unicode hex":"1F5C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128455","Unicode hex":"1F5C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128456","Unicode hex":"1F5C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128457","Unicode hex":"1F5C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128458","Unicode hex":"1F5CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128459","Unicode hex":"1F5CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128460","Unicode hex":"1F5CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128461","Unicode hex":"1F5CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128465","Unicode hex":"1F5D1"},{"Typeface name":"Wingdings 2","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128468","Unicode hex":"1F5D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128437","Unicode hex":"1F5B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"128438","Unicode hex":"1F5B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128439","Unicode hex":"1F5B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128440","Unicode hex":"1F5B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128429","Unicode hex":"1F5AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128431","Unicode hex":"1F5AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128433","Unicode hex":"1F5B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128402","Unicode hex":"1F592"},{"Typeface name":"Wingdings 2","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128403","Unicode hex":"1F593"},{"Typeface name":"Wingdings 2","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128408","Unicode hex":"1F598"},{"Typeface name":"Wingdings 2","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128409","Unicode hex":"1F599"},{"Typeface name":"Wingdings 2","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128410","Unicode hex":"1F59A"},{"Typeface name":"Wingdings 2","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"128411","Unicode hex":"1F59B"},{"Typeface name":"Wingdings 2","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128072","Unicode hex":"1F448"},{"Typeface name":"Wingdings 2","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128073","Unicode hex":"1F449"},{"Typeface name":"Wingdings 2","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128412","Unicode hex":"1F59C"},{"Typeface name":"Wingdings 2","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"128413","Unicode hex":"1F59D"},{"Typeface name":"Wingdings 2","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"128414","Unicode hex":"1F59E"},{"Typeface name":"Wingdings 2","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"128415","Unicode hex":"1F59F"},{"Typeface name":"Wingdings 2","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"128416","Unicode hex":"1F5A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128417","Unicode hex":"1F5A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"128070","Unicode hex":"1F446"},{"Typeface name":"Wingdings 2","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128071","Unicode hex":"1F447"},{"Typeface name":"Wingdings 2","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128418","Unicode hex":"1F5A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128419","Unicode hex":"1F5A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128401","Unicode hex":"1F591"},{"Typeface name":"Wingdings 2","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128500","Unicode hex":"1F5F4"},{"Typeface name":"Wingdings 2","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"128504","Unicode hex":"1F5F8"},{"Typeface name":"Wingdings 2","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"128501","Unicode hex":"1F5F5"},{"Typeface name":"Wingdings 2","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9745","Unicode hex":"2611"},{"Typeface name":"Wingdings 2","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"11197","Unicode hex":"2BBD"},{"Typeface name":"Wingdings 2","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"9746","Unicode hex":"2612"},{"Typeface name":"Wingdings 2","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"11198","Unicode hex":"2BBE"},{"Typeface name":"Wingdings 2","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"11199","Unicode hex":"2BBF"},{"Typeface name":"Wingdings 2","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128711","Unicode hex":"1F6C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"128625","Unicode hex":"1F671"},{"Typeface name":"Wingdings 2","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"128628","Unicode hex":"1F674"},{"Typeface name":"Wingdings 2","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128626","Unicode hex":"1F672"},{"Typeface name":"Wingdings 2","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128627","Unicode hex":"1F673"},{"Typeface name":"Wingdings 2","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"8253","Unicode hex":"203D"},{"Typeface name":"Wingdings 2","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128633","Unicode hex":"1F679"},{"Typeface name":"Wingdings 2","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128634","Unicode hex":"1F67A"},{"Typeface name":"Wingdings 2","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"128635","Unicode hex":"1F67B"},{"Typeface name":"Wingdings 2","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"128614","Unicode hex":"1F666"},{"Typeface name":"Wingdings 2","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128612","Unicode hex":"1F664"},{"Typeface name":"Wingdings 2","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"128613","Unicode hex":"1F665"},{"Typeface name":"Wingdings 2","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128615","Unicode hex":"1F667"},{"Typeface name":"Wingdings 2","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128602","Unicode hex":"1F65A"},{"Typeface name":"Wingdings 2","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128600","Unicode hex":"1F658"},{"Typeface name":"Wingdings 2","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"128601","Unicode hex":"1F659"},{"Typeface name":"Wingdings 2","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128603","Unicode hex":"1F65B"},{"Typeface name":"Wingdings 2","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9450","Unicode hex":"24EA"},{"Typeface name":"Wingdings 2","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"9312","Unicode hex":"2460"},{"Typeface name":"Wingdings 2","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"9313","Unicode hex":"2461"},{"Typeface name":"Wingdings 2","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9314","Unicode hex":"2462"},{"Typeface name":"Wingdings 2","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"9315","Unicode hex":"2463"},{"Typeface name":"Wingdings 2","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9316","Unicode hex":"2464"},{"Typeface name":"Wingdings 2","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"9317","Unicode hex":"2465"},{"Typeface name":"Wingdings 2","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9318","Unicode hex":"2466"},{"Typeface name":"Wingdings 2","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9319","Unicode hex":"2467"},{"Typeface name":"Wingdings 2","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9320","Unicode hex":"2468"},{"Typeface name":"Wingdings 2","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9321","Unicode hex":"2469"},{"Typeface name":"Wingdings 2","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9471","Unicode hex":"24FF"},{"Typeface name":"Wingdings 2","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"10102","Unicode hex":"2776"},{"Typeface name":"Wingdings 2","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10103","Unicode hex":"2777"},{"Typeface name":"Wingdings 2","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"10104","Unicode hex":"2778"},{"Typeface name":"Wingdings 2","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10105","Unicode hex":"2779"},{"Typeface name":"Wingdings 2","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"10106","Unicode hex":"277A"},{"Typeface name":"Wingdings 2","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"10107","Unicode hex":"277B"},{"Typeface name":"Wingdings 2","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"10108","Unicode hex":"277C"},{"Typeface name":"Wingdings 2","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"10109","Unicode hex":"277D"},{"Typeface name":"Wingdings 2","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"10110","Unicode hex":"277E"},{"Typeface name":"Wingdings 2","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"10111","Unicode hex":"277F"},{"Typeface name":"Wingdings 2","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"9737","Unicode hex":"2609"},{"Typeface name":"Wingdings 2","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"127765","Unicode hex":"1F315"},{"Typeface name":"Wingdings 2","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"9789","Unicode hex":"263D"},{"Typeface name":"Wingdings 2","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"9790","Unicode hex":"263E"},{"Typeface name":"Wingdings 2","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11839","Unicode hex":"2E3F"},{"Typeface name":"Wingdings 2","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10013","Unicode hex":"271D"},{"Typeface name":"Wingdings 2","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"128327","Unicode hex":"1F547"},{"Typeface name":"Wingdings 2","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"128348","Unicode hex":"1F55C"},{"Typeface name":"Wingdings 2","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"128349","Unicode hex":"1F55D"},{"Typeface name":"Wingdings 2","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"128350","Unicode hex":"1F55E"},{"Typeface name":"Wingdings 2","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"128351","Unicode hex":"1F55F"},{"Typeface name":"Wingdings 2","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"128352","Unicode hex":"1F560"},{"Typeface name":"Wingdings 2","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"128353","Unicode hex":"1F561"},{"Typeface name":"Wingdings 2","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"128354","Unicode hex":"1F562"},{"Typeface name":"Wingdings 2","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128355","Unicode hex":"1F563"},{"Typeface name":"Wingdings 2","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128356","Unicode hex":"1F564"},{"Typeface name":"Wingdings 2","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128357","Unicode hex":"1F565"},{"Typeface name":"Wingdings 2","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128358","Unicode hex":"1F566"},{"Typeface name":"Wingdings 2","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"128359","Unicode hex":"1F567"},{"Typeface name":"Wingdings 2","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128616","Unicode hex":"1F668"},{"Typeface name":"Wingdings 2","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128617","Unicode hex":"1F669"},{"Typeface name":"Wingdings 2","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128900","Unicode hex":"1F784"},{"Typeface name":"Wingdings 2","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"10625","Unicode hex":"2981"},{"Typeface name":"Wingdings 2","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"9679","Unicode hex":"25CF"},{"Typeface name":"Wingdings 2","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"9675","Unicode hex":"25CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128901","Unicode hex":"1F785"},{"Typeface name":"Wingdings 2","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128903","Unicode hex":"1F787"},{"Typeface name":"Wingdings 2","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128905","Unicode hex":"1F789"},{"Typeface name":"Wingdings 2","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"8857","Unicode hex":"2299"},{"Typeface name":"Wingdings 2","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"10687","Unicode hex":"29BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128908","Unicode hex":"1F78C"},{"Typeface name":"Wingdings 2","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128909","Unicode hex":"1F78D"},{"Typeface name":"Wingdings 2","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"9726","Unicode hex":"25FE"},{"Typeface name":"Wingdings 2","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"9632","Unicode hex":"25A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"9633","Unicode hex":"25A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128913","Unicode hex":"1F791"},{"Typeface name":"Wingdings 2","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128914","Unicode hex":"1F792"},{"Typeface name":"Wingdings 2","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128915","Unicode hex":"1F793"},{"Typeface name":"Wingdings 2","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128916","Unicode hex":"1F794"},{"Typeface name":"Wingdings 2","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9635","Unicode hex":"25A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128917","Unicode hex":"1F795"},{"Typeface name":"Wingdings 2","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128918","Unicode hex":"1F796"},{"Typeface name":"Wingdings 2","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128919","Unicode hex":"1F797"},{"Typeface name":"Wingdings 2","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128920","Unicode hex":"1F798"},{"Typeface name":"Wingdings 2","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings 2","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"11045","Unicode hex":"2B25"},{"Typeface name":"Wingdings 2","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"9671","Unicode hex":"25C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"128922","Unicode hex":"1F79A"},{"Typeface name":"Wingdings 2","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"9672","Unicode hex":"25C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"128923","Unicode hex":"1F79B"},{"Typeface name":"Wingdings 2","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128924","Unicode hex":"1F79C"},{"Typeface name":"Wingdings 2","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"128925","Unicode hex":"1F79D"},{"Typeface name":"Wingdings 2","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128926","Unicode hex":"1F79E"},{"Typeface name":"Wingdings 2","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"11050","Unicode hex":"2B2A"},{"Typeface name":"Wingdings 2","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"11047","Unicode hex":"2B27"},{"Typeface name":"Wingdings 2","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128928","Unicode hex":"1F7A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"9686","Unicode hex":"25D6"},{"Typeface name":"Wingdings 2","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"9687","Unicode hex":"25D7"},{"Typeface name":"Wingdings 2","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"11210","Unicode hex":"2BCA"},{"Typeface name":"Wingdings 2","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"11211","Unicode hex":"2BCB"},{"Typeface name":"Wingdings 2","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"11200","Unicode hex":"2BC0"},{"Typeface name":"Wingdings 2","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"11201","Unicode hex":"2BC1"},{"Typeface name":"Wingdings 2","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"11039","Unicode hex":"2B1F"},{"Typeface name":"Wingdings 2","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"11202","Unicode hex":"2BC2"},{"Typeface name":"Wingdings 2","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"11043","Unicode hex":"2B23"},{"Typeface name":"Wingdings 2","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11042","Unicode hex":"2B22"},{"Typeface name":"Wingdings 2","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11203","Unicode hex":"2BC3"},{"Typeface name":"Wingdings 2","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11204","Unicode hex":"2BC4"},{"Typeface name":"Wingdings 2","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128929","Unicode hex":"1F7A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128930","Unicode hex":"1F7A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128931","Unicode hex":"1F7A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128932","Unicode hex":"1F7A4"},{"Typeface name":"Wingdings 2","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128933","Unicode hex":"1F7A5"},{"Typeface name":"Wingdings 2","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128934","Unicode hex":"1F7A6"},{"Typeface name":"Wingdings 2","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128935","Unicode hex":"1F7A7"},{"Typeface name":"Wingdings 2","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128936","Unicode hex":"1F7A8"},{"Typeface name":"Wingdings 2","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128937","Unicode hex":"1F7A9"},{"Typeface name":"Wingdings 2","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128938","Unicode hex":"1F7AA"},{"Typeface name":"Wingdings 2","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128939","Unicode hex":"1F7AB"},{"Typeface name":"Wingdings 2","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128940","Unicode hex":"1F7AC"},{"Typeface name":"Wingdings 2","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128941","Unicode hex":"1F7AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128942","Unicode hex":"1F7AE"},{"Typeface name":"Wingdings 2","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128943","Unicode hex":"1F7AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"128944","Unicode hex":"1F7B0"},{"Typeface name":"Wingdings 2","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"128945","Unicode hex":"1F7B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"128946","Unicode hex":"1F7B2"},{"Typeface name":"Wingdings 2","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"128947","Unicode hex":"1F7B3"},{"Typeface name":"Wingdings 2","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"128948","Unicode hex":"1F7B4"},{"Typeface name":"Wingdings 2","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"128949","Unicode hex":"1F7B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"128950","Unicode hex":"1F7B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"128951","Unicode hex":"1F7B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"128952","Unicode hex":"1F7B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"128953","Unicode hex":"1F7B9"},{"Typeface name":"Wingdings 2","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"128954","Unicode hex":"1F7BA"},{"Typeface name":"Wingdings 2","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"128955","Unicode hex":"1F7BB"},{"Typeface name":"Wingdings 2","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"128956","Unicode hex":"1F7BC"},{"Typeface name":"Wingdings 2","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128957","Unicode hex":"1F7BD"},{"Typeface name":"Wingdings 2","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128958","Unicode hex":"1F7BE"},{"Typeface name":"Wingdings 2","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"128959","Unicode hex":"1F7BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"128960","Unicode hex":"1F7C0"},{"Typeface name":"Wingdings 2","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128962","Unicode hex":"1F7C2"},{"Typeface name":"Wingdings 2","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128964","Unicode hex":"1F7C4"},{"Typeface name":"Wingdings 2","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"128966","Unicode hex":"1F7C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"128969","Unicode hex":"1F7C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128970","Unicode hex":"1F7CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"10038","Unicode hex":"2736"},{"Typeface name":"Wingdings 2","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"128972","Unicode hex":"1F7CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128974","Unicode hex":"1F7CE"},{"Typeface name":"Wingdings 2","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128976","Unicode hex":"1F7D0"},{"Typeface name":"Wingdings 2","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128978","Unicode hex":"1F7D2"},{"Typeface name":"Wingdings 2","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"10041","Unicode hex":"2739"},{"Typeface name":"Wingdings 2","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128963","Unicode hex":"1F7C3"},{"Typeface name":"Wingdings 2","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128967","Unicode hex":"1F7C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Wingdings 2","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128973","Unicode hex":"1F7CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128980","Unicode hex":"1F7D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11212","Unicode hex":"2BCC"},{"Typeface name":"Wingdings 2","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11213","Unicode hex":"2BCD"},{"Typeface name":"Wingdings 2","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"8251","Unicode hex":"203B"},{"Typeface name":"Wingdings 2","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"8258","Unicode hex":"2042"},{"Typeface name":"Wingdings 3","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 3","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"11104","Unicode hex":"2B60"},{"Typeface name":"Wingdings 3","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"11106","Unicode hex":"2B62"},{"Typeface name":"Wingdings 3","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"11105","Unicode hex":"2B61"},{"Typeface name":"Wingdings 3","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"11107","Unicode hex":"2B63"},{"Typeface name":"Wingdings 3","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"11110","Unicode hex":"2B66"},{"Typeface name":"Wingdings 3","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"11111","Unicode hex":"2B67"},{"Typeface name":"Wingdings 3","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"11113","Unicode hex":"2B69"},{"Typeface name":"Wingdings 3","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"11112","Unicode hex":"2B68"},{"Typeface name":"Wingdings 3","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"11120","Unicode hex":"2B70"},{"Typeface name":"Wingdings 3","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"11122","Unicode hex":"2B72"},{"Typeface name":"Wingdings 3","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"11121","Unicode hex":"2B71"},{"Typeface name":"Wingdings 3","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"11123","Unicode hex":"2B73"},{"Typeface name":"Wingdings 3","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"11126","Unicode hex":"2B76"},{"Typeface name":"Wingdings 3","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"11128","Unicode hex":"2B78"},{"Typeface name":"Wingdings 3","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"11131","Unicode hex":"2B7B"},{"Typeface name":"Wingdings 3","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"11133","Unicode hex":"2B7D"},{"Typeface name":"Wingdings 3","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"11108","Unicode hex":"2B64"},{"Typeface name":"Wingdings 3","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"11109","Unicode hex":"2B65"},{"Typeface name":"Wingdings 3","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"11114","Unicode hex":"2B6A"},{"Typeface name":"Wingdings 3","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"11116","Unicode hex":"2B6C"},{"Typeface name":"Wingdings 3","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"11115","Unicode hex":"2B6B"},{"Typeface name":"Wingdings 3","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"11117","Unicode hex":"2B6D"},{"Typeface name":"Wingdings 3","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"11085","Unicode hex":"2B4D"},{"Typeface name":"Wingdings 3","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"11168","Unicode hex":"2BA0"},{"Typeface name":"Wingdings 3","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"11169","Unicode hex":"2BA1"},{"Typeface name":"Wingdings 3","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"11170","Unicode hex":"2BA2"},{"Typeface name":"Wingdings 3","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"11171","Unicode hex":"2BA3"},{"Typeface name":"Wingdings 3","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"11172","Unicode hex":"2BA4"},{"Typeface name":"Wingdings 3","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"11173","Unicode hex":"2BA5"},{"Typeface name":"Wingdings 3","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"11174","Unicode hex":"2BA6"},{"Typeface name":"Wingdings 3","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"11175","Unicode hex":"2BA7"},{"Typeface name":"Wingdings 3","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"11152","Unicode hex":"2B90"},{"Typeface name":"Wingdings 3","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"11153","Unicode hex":"2B91"},{"Typeface name":"Wingdings 3","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"11154","Unicode hex":"2B92"},{"Typeface name":"Wingdings 3","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"11155","Unicode hex":"2B93"},{"Typeface name":"Wingdings 3","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"11136","Unicode hex":"2B80"},{"Typeface name":"Wingdings 3","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"11139","Unicode hex":"2B83"},{"Typeface name":"Wingdings 3","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"11134","Unicode hex":"2B7E"},{"Typeface name":"Wingdings 3","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"11135","Unicode hex":"2B7F"},{"Typeface name":"Wingdings 3","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"11140","Unicode hex":"2B84"},{"Typeface name":"Wingdings 3","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"11142","Unicode hex":"2B86"},{"Typeface name":"Wingdings 3","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"11141","Unicode hex":"2B85"},{"Typeface name":"Wingdings 3","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"11143","Unicode hex":"2B87"},{"Typeface name":"Wingdings 3","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"11151","Unicode hex":"2B8F"},{"Typeface name":"Wingdings 3","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"11149","Unicode hex":"2B8D"},{"Typeface name":"Wingdings 3","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"11150","Unicode hex":"2B8E"},{"Typeface name":"Wingdings 3","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"11148","Unicode hex":"2B8C"},{"Typeface name":"Wingdings 3","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"11118","Unicode hex":"2B6E"},{"Typeface name":"Wingdings 3","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"11119","Unicode hex":"2B6F"},{"Typeface name":"Wingdings 3","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9099","Unicode hex":"238B"},{"Typeface name":"Wingdings 3","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"8996","Unicode hex":"2324"},{"Typeface name":"Wingdings 3","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"8963","Unicode hex":"2303"},{"Typeface name":"Wingdings 3","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"8997","Unicode hex":"2325"},{"Typeface name":"Wingdings 3","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"9251","Unicode hex":"2423"},{"Typeface name":"Wingdings 3","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"9085","Unicode hex":"237D"},{"Typeface name":"Wingdings 3","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"8682","Unicode hex":"21EA"},{"Typeface name":"Wingdings 3","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"11192","Unicode hex":"2BB8"},{"Typeface name":"Wingdings 3","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"129184","Unicode hex":"1F8A0"},{"Typeface name":"Wingdings 3","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"129185","Unicode hex":"1F8A1"},{"Typeface name":"Wingdings 3","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"129186","Unicode hex":"1F8A2"},{"Typeface name":"Wingdings 3","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"129187","Unicode hex":"1F8A3"},{"Typeface name":"Wingdings 3","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"129188","Unicode hex":"1F8A4"},{"Typeface name":"Wingdings 3","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"129189","Unicode hex":"1F8A5"},{"Typeface name":"Wingdings 3","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"129190","Unicode hex":"1F8A6"},{"Typeface name":"Wingdings 3","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"129191","Unicode hex":"1F8A7"},{"Typeface name":"Wingdings 3","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"129192","Unicode hex":"1F8A8"},{"Typeface name":"Wingdings 3","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"129193","Unicode hex":"1F8A9"},{"Typeface name":"Wingdings 3","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"129194","Unicode hex":"1F8AA"},{"Typeface name":"Wingdings 3","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"129195","Unicode hex":"1F8AB"},{"Typeface name":"Wingdings 3","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"129104","Unicode hex":"1F850"},{"Typeface name":"Wingdings 3","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"129106","Unicode hex":"1F852"},{"Typeface name":"Wingdings 3","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"129105","Unicode hex":"1F851"},{"Typeface name":"Wingdings 3","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"129107","Unicode hex":"1F853"},{"Typeface name":"Wingdings 3","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"129108","Unicode hex":"1F854"},{"Typeface name":"Wingdings 3","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"129109","Unicode hex":"1F855"},{"Typeface name":"Wingdings 3","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"129111","Unicode hex":"1F857"},{"Typeface name":"Wingdings 3","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"129110","Unicode hex":"1F856"},{"Typeface name":"Wingdings 3","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"129112","Unicode hex":"1F858"},{"Typeface name":"Wingdings 3","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"129113","Unicode hex":"1F859"},{"Typeface name":"Wingdings 3","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9650","Unicode hex":"25B2"},{"Typeface name":"Wingdings 3","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9660","Unicode hex":"25BC"},{"Typeface name":"Wingdings 3","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9651","Unicode hex":"25B3"},{"Typeface name":"Wingdings 3","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9661","Unicode hex":"25BD"},{"Typeface name":"Wingdings 3","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9664","Unicode hex":"25C0"},{"Typeface name":"Wingdings 3","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9654","Unicode hex":"25B6"},{"Typeface name":"Wingdings 3","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"9665","Unicode hex":"25C1"},{"Typeface name":"Wingdings 3","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9655","Unicode hex":"25B7"},{"Typeface name":"Wingdings 3","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"9699","Unicode hex":"25E3"},{"Typeface name":"Wingdings 3","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"9698","Unicode hex":"25E2"},{"Typeface name":"Wingdings 3","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"9700","Unicode hex":"25E4"},{"Typeface name":"Wingdings 3","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"9701","Unicode hex":"25E5"},{"Typeface name":"Wingdings 3","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"128896","Unicode hex":"1F780"},{"Typeface name":"Wingdings 3","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128898","Unicode hex":"1F782"},{"Typeface name":"Wingdings 3","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128897","Unicode hex":"1F781"},{"Typeface name":"Wingdings 3","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128899","Unicode hex":"1F783"},{"Typeface name":"Wingdings 3","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"11205","Unicode hex":"2BC5"},{"Typeface name":"Wingdings 3","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"11206","Unicode hex":"2BC6"},{"Typeface name":"Wingdings 3","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"11207","Unicode hex":"2BC7"},{"Typeface name":"Wingdings 3","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11208","Unicode hex":"2BC8"},{"Typeface name":"Wingdings 3","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"11164","Unicode hex":"2B9C"},{"Typeface name":"Wingdings 3","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"11166","Unicode hex":"2B9E"},{"Typeface name":"Wingdings 3","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"11165","Unicode hex":"2B9D"},{"Typeface name":"Wingdings 3","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"11167","Unicode hex":"2B9F"},{"Typeface name":"Wingdings 3","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"129040","Unicode hex":"1F810"},{"Typeface name":"Wingdings 3","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"129042","Unicode hex":"1F812"},{"Typeface name":"Wingdings 3","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"129041","Unicode hex":"1F811"},{"Typeface name":"Wingdings 3","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"129043","Unicode hex":"1F813"},{"Typeface name":"Wingdings 3","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"129044","Unicode hex":"1F814"},{"Typeface name":"Wingdings 3","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"129046","Unicode hex":"1F816"},{"Typeface name":"Wingdings 3","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"129045","Unicode hex":"1F815"},{"Typeface name":"Wingdings 3","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"129047","Unicode hex":"1F817"},{"Typeface name":"Wingdings 3","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"129048","Unicode hex":"1F818"},{"Typeface name":"Wingdings 3","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"129050","Unicode hex":"1F81A"},{"Typeface name":"Wingdings 3","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"129049","Unicode hex":"1F819"},{"Typeface name":"Wingdings 3","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"129051","Unicode hex":"1F81B"},{"Typeface name":"Wingdings 3","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"129052","Unicode hex":"1F81C"},{"Typeface name":"Wingdings 3","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"129054","Unicode hex":"1F81E"},{"Typeface name":"Wingdings 3","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"129053","Unicode hex":"1F81D"},{"Typeface name":"Wingdings 3","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"129055","Unicode hex":"1F81F"},{"Typeface name":"Wingdings 3","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"129024","Unicode hex":"1F800"},{"Typeface name":"Wingdings 3","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"129026","Unicode hex":"1F802"},{"Typeface name":"Wingdings 3","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"129025","Unicode hex":"1F801"},{"Typeface name":"Wingdings 3","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"129027","Unicode hex":"1F803"},{"Typeface name":"Wingdings 3","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"129028","Unicode hex":"1F804"},{"Typeface name":"Wingdings 3","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"129030","Unicode hex":"1F806"},{"Typeface name":"Wingdings 3","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"129029","Unicode hex":"1F805"},{"Typeface name":"Wingdings 3","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"129031","Unicode hex":"1F807"},{"Typeface name":"Wingdings 3","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"129032","Unicode hex":"1F808"},{"Typeface name":"Wingdings 3","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"129034","Unicode hex":"1F80A"},{"Typeface name":"Wingdings 3","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"129033","Unicode hex":"1F809"},{"Typeface name":"Wingdings 3","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"129035","Unicode hex":"1F80B"},{"Typeface name":"Wingdings 3","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"129056","Unicode hex":"1F820"},{"Typeface name":"Wingdings 3","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"129058","Unicode hex":"1F822"},{"Typeface name":"Wingdings 3","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"129060","Unicode hex":"1F824"},{"Typeface name":"Wingdings 3","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"129062","Unicode hex":"1F826"},{"Typeface name":"Wingdings 3","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"129064","Unicode hex":"1F828"},{"Typeface name":"Wingdings 3","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"129066","Unicode hex":"1F82A"},{"Typeface name":"Wingdings 3","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"129068","Unicode hex":"1F82C"},{"Typeface name":"Wingdings 3","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"129180","Unicode hex":"1F89C"},{"Typeface name":"Wingdings 3","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"129181","Unicode hex":"1F89D"},{"Typeface name":"Wingdings 3","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"129182","Unicode hex":"1F89E"},{"Typeface name":"Wingdings 3","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"129183","Unicode hex":"1F89F"},{"Typeface name":"Wingdings 3","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"129070","Unicode hex":"1F82E"},{"Typeface name":"Wingdings 3","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"129072","Unicode hex":"1F830"},{"Typeface name":"Wingdings 3","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"129074","Unicode hex":"1F832"},{"Typeface name":"Wingdings 3","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"129076","Unicode hex":"1F834"},{"Typeface name":"Wingdings 3","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"129078","Unicode hex":"1F836"},{"Typeface name":"Wingdings 3","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"129080","Unicode hex":"1F838"},{"Typeface name":"Wingdings 3","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"129082","Unicode hex":"1F83A"},{"Typeface name":"Wingdings 3","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"129081","Unicode hex":"1F839"},{"Typeface name":"Wingdings 3","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"129083","Unicode hex":"1F83B"},{"Typeface name":"Wingdings 3","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"129176","Unicode hex":"1F898"},{"Typeface name":"Wingdings 3","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"129178","Unicode hex":"1F89A"},{"Typeface name":"Wingdings 3","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"129177","Unicode hex":"1F899"},{"Typeface name":"Wingdings 3","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"129179","Unicode hex":"1F89B"},{"Typeface name":"Wingdings 3","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"129084","Unicode hex":"1F83C"},{"Typeface name":"Wingdings 3","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"129086","Unicode hex":"1F83E"},{"Typeface name":"Wingdings 3","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"129085","Unicode hex":"1F83D"},{"Typeface name":"Wingdings 3","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"129087","Unicode hex":"1F83F"},{"Typeface name":"Wingdings 3","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"129088","Unicode hex":"1F840"},{"Typeface name":"Wingdings 3","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"129090","Unicode hex":"1F842"},{"Typeface name":"Wingdings 3","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"129089","Unicode hex":"1F841"},{"Typeface name":"Wingdings 3","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"129091","Unicode hex":"1F843"},{"Typeface name":"Wingdings 3","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"129092","Unicode hex":"1F844"},{"Typeface name":"Wingdings 3","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"129094","Unicode hex":"1F846"},{"Typeface name":"Wingdings 3","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"129093","Unicode hex":"1F845"},{"Typeface name":"Wingdings 3","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"129095","Unicode hex":"1F847"},{"Typeface name":"Wingdings 3","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11176","Unicode hex":"2BA8"},{"Typeface name":"Wingdings 3","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11177","Unicode hex":"2BA9"},{"Typeface name":"Wingdings 3","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"11178","Unicode hex":"2BAA"},{"Typeface name":"Wingdings 3","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"11179","Unicode hex":"2BAB"},{"Typeface name":"Wingdings 3","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"11180","Unicode hex":"2BAC"},{"Typeface name":"Wingdings 3","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"11181","Unicode hex":"2BAD"},{"Typeface name":"Wingdings 3","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"11182","Unicode hex":"2BAE"},{"Typeface name":"Wingdings 3","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"11183","Unicode hex":"2BAF"},{"Typeface name":"Wingdings 3","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"129120","Unicode hex":"1F860"},{"Typeface name":"Wingdings 3","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"129122","Unicode hex":"1F862"},{"Typeface name":"Wingdings 3","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"129121","Unicode hex":"1F861"},{"Typeface name":"Wingdings 3","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"129123","Unicode hex":"1F863"},{"Typeface name":"Wingdings 3","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"129124","Unicode hex":"1F864"},{"Typeface name":"Wingdings 3","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"129125","Unicode hex":"1F865"},{"Typeface name":"Wingdings 3","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"129127","Unicode hex":"1F867"},{"Typeface name":"Wingdings 3","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"129126","Unicode hex":"1F866"},{"Typeface name":"Wingdings 3","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"129136","Unicode hex":"1F870"},{"Typeface name":"Wingdings 3","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"129138","Unicode hex":"1F872"},{"Typeface name":"Wingdings 3","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"129137","Unicode hex":"1F871"},{"Typeface name":"Wingdings 3","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"129139","Unicode hex":"1F873"},{"Typeface name":"Wingdings 3","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"129140","Unicode hex":"1F874"},{"Typeface name":"Wingdings 3","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"129141","Unicode hex":"1F875"},{"Typeface name":"Wingdings 3","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129143","Unicode hex":"1F877"},{"Typeface name":"Wingdings 3","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129142","Unicode hex":"1F876"},{"Typeface name":"Wingdings 3","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129152","Unicode hex":"1F880"},{"Typeface name":"Wingdings 3","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129154","Unicode hex":"1F882"},{"Typeface name":"Wingdings 3","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129153","Unicode hex":"1F881"},{"Typeface name":"Wingdings 3","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129155","Unicode hex":"1F883"},{"Typeface name":"Wingdings 3","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129156","Unicode hex":"1F884"},{"Typeface name":"Wingdings 3","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129157","Unicode hex":"1F885"},{"Typeface name":"Wingdings 3","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129159","Unicode hex":"1F887"},{"Typeface name":"Wingdings 3","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129158","Unicode hex":"1F886"},{"Typeface name":"Wingdings 3","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129168","Unicode hex":"1F890"},{"Typeface name":"Wingdings 3","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129170","Unicode hex":"1F892"},{"Typeface name":"Wingdings 3","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129169","Unicode hex":"1F891"},{"Typeface name":"Wingdings 3","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129171","Unicode hex":"1F893"},{"Typeface name":"Wingdings 3","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129172","Unicode hex":"1F894"},{"Typeface name":"Wingdings 3","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129174","Unicode hex":"1F896"},{"Typeface name":"Wingdings 3","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"129173","Unicode hex":"1F895"},{"Typeface name":"Wingdings 3","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"129175","Unicode hex":"1F897"}];return cp.default=n,cp}var Z8;function Hhe(){if(Z8)return ea;Z8=1;var n=ea&&ea.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(ea,"__esModule",{value:!0}),ea.hex=ea.dec=ea.codePoint=void 0;for(var e=n(Whe()),t={},r=String.fromCodePoint?String.fromCodePoint:f,i=0,a=e.default;i<a.length;i++){var s=a[i],o=parseInt(s["Unicode dec"],10),c={codePoint:o,string:r(o)};t[s["Typeface name"].toUpperCase()+"_"+s["Dingbat dec"]]=c}function u(p,y){return t[p.toUpperCase()+"_"+y]}ea.codePoint=u;function d(p,y){return u(p,parseInt(y,10))}ea.dec=d;function h(p,y){return u(p,parseInt(y,16))}ea.hex=h;function f(p){if(p<=65535)return String.fromCharCode(p);var y=Math.floor((p-65536)/1024)+55296,g=(p-65536)%1024+56320;return String.fromCharCode(y,g)}return ea}var ks={},Q8;function D7(){if(Q8)return ks;Q8=1;var n=On;ks.paragraph=e,ks.run=t,ks._elements=i,ks._elementsOfType=r,ks.getDescendantsOfType=a,ks.getDescendants=s;function e(c){return r("paragraph",c)}function t(c){return r("run",c)}function r(c,u){return i(function(d){return d.type===c?u(d):d})}function i(c){return function u(d){if(d.children){var h=n.map(d.children,u);d=n.extend(d,{children:h})}return c(d)}}function a(c,u){return s(c).filter(function(d){return d.type===u})}function s(c){var u=[];return o(c,function(d){u.push(d)}),u}function o(c,u){c.children&&c.children.forEach(function(d){o(d,u),u(d)})}return ks}var up={},e5;function Vhe(){if(e5)return up;e5=1,up.uriToZipEntryName=n,up.replaceFragment=e;function n(t,r){return r.charAt(0)==="/"?r.substr(1):t+"/"+r}function e(t,r){var i=t.indexOf("#");return i!==-1&&(t=t.substring(0,i)),t+"#"+r}return up}var t5;function Ghe(){if(t5)return lp;t5=1,lp.createBodyReader=c,lp._readNumberingProperties=d;var n=Hhe(),e=On,t=Ll(),r=_s().Result,i=_s().warning,a=RD(),s=D7(),o=Vhe();function c(w){return{readXmlElement:function(S){return new u(w).readXmlElement(S)},readXmlElements:function(S){return new u(w).readXmlElements(S)}}}function u(w){var S=[],E=[],_=[],D=w.relationships,C=w.contentTypes,k=w.docxFile,T=w.files,N=w.numbering,j=w.styles;function R(he){var Se=he.map(P);return x(Se)}function P(he){if(he.type==="element"){var Se=Z[he.name];if(Se)return Se(he);if(!Object.prototype.hasOwnProperty.call(f,he.name)){var Ce=i("An unrecognised element was ignored: "+he.name);return p([Ce])}}return y()}function F(he){return G(he).map(function(Se){return{type:"paragraphProperties",styleId:Se.styleId,styleName:Se.name,alignment:he.firstOrEmpty("w:jc").attributes["w:val"],numbering:d(Se.styleId,he.firstOrEmpty("w:numPr"),N),indent:q(he.firstOrEmpty("w:ind"))}})}function q(he){return{start:he.attributes["w:start"]||he.attributes["w:left"],end:he.attributes["w:end"]||he.attributes["w:right"],firstLine:he.attributes["w:firstLine"],hanging:he.attributes["w:hanging"]}}function $(he){return H(he).map(function(Se){var Ce=he.firstOrEmpty("w:sz").attributes["w:val"],Ue=/^[0-9]+$/.test(Ce)?parseInt(Ce,10)/2:null;return{type:"runProperties",styleId:Se.styleId,styleName:Se.name,verticalAlignment:he.firstOrEmpty("w:vertAlign").attributes["w:val"],font:he.firstOrEmpty("w:rFonts").attributes["w:ascii"],fontSize:Ue,isBold:I(he.first("w:b")),isUnderline:B(he.first("w:u")),isItalic:I(he.first("w:i")),isStrikethrough:I(he.first("w:strike")),isAllCaps:I(he.first("w:caps")),isSmallCaps:I(he.first("w:smallCaps")),highlight:U(he.firstOrEmpty("w:highlight").attributes["w:val"])}})}function B(he){if(he){var Se=he.attributes["w:val"];return Se!==void 0&&Se!=="false"&&Se!=="0"&&Se!=="none"}else return!1}function I(he){if(he){var Se=he.attributes["w:val"];return Se!=="false"&&Se!=="0"}else return!1}function L(he){return he!=="false"&&he!=="0"}function U(he){return!he||he==="none"?null:he}function G(he){return K(he,"w:pStyle","Paragraph",j.findParagraphStyleById)}function H(he){return K(he,"w:rStyle","Run",j.findCharacterStyleById)}function V(he){return K(he,"w:tblStyle","Table",j.findTableStyleById)}function K(he,Se,Ce,Ue){var Be=[],et=he.first(Se),_t=null,un=null;if(et&&(_t=et.attributes["w:val"],_t)){var Nr=Ue(_t);Nr?un=Nr.name:Be.push(Ie(Ce,_t))}return m({styleId:_t,name:un},Be)}function ae(he){var Se=he.attributes["w:fldCharType"];if(Se==="begin")S.push({type:"begin",fldChar:he}),E=[];else if(Se==="end"){var Ce=S.pop();if(Ce.type==="begin"&&(Ce=de(Ce)),Ce.type==="checkbox")return g(t.checkbox({checked:Ce.checked}))}else if(Se==="separate"){var Ue=S.pop(),Be=de(Ue);S.push(Be)}return y()}function te(){var he=e.last(S.filter(function(Se){return Se.type==="hyperlink"}));return he?he.options:null}function de(he){return xe(E.join(""),he.type==="begin"?he.fldChar:a.emptyElement)}function xe(he,Se){var Ce=/\s*HYPERLINK "(.*)"/.exec(he);if(Ce)return{type:"hyperlink",options:{href:Ce[1]}};var Ue=/\s*HYPERLINK\s+\\l\s+"(.*)"/.exec(he);if(Ue)return{type:"hyperlink",options:{anchor:Ue[1]}};var Be=/\s*FORMCHECKBOX\s*/.exec(he);if(Be){var et=Se.firstOrEmpty("w:ffData").firstOrEmpty("w:checkBox"),_t=et.first("w:checked"),un=_t==null?I(et.first("w:default")):I(_t);return{type:"checkbox",checked:un}}return{type:"unknown"}}function ve(he){return E.push(he.text()),y()}function Te(he){var Se=he.attributes["w:font"],Ce=he.attributes["w:char"],Ue=n.hex(Se,Ce);return Ue==null&&/^F0..$/.test(Ce)&&(Ue=n.hex(Se,Ce.substring(2))),Ue==null?p([i("A w:sym element with an unsupported character was ignored: char "+Ce+" in font "+Se)]):g(new t.Text(Ue.string))}function O(he){return function(Se){var Ce=Se.attributes["w:id"];return g(new t.NoteReference({noteType:he,noteId:Ce}))}}function ie(he){return g(t.commentReference({commentId:he.attributes["w:id"]}))}function re(he){return R(he.children)}var Z={"w:p":function(he){var Se=he.firstOrEmpty("w:pPr"),Ce=!!Se.firstOrEmpty("w:rPr").first("w:del");if(Ce)return he.children.forEach(function(Be){_.push(Be)}),y();var Ue=he.children;return _.length>0&&(Ue=_.concat(Ue),_=[]),v.map(F(Se),R(Ue),function(Be,et){return new t.Paragraph(et,Be)}).insertExtra()},"w:r":function(he){return v.map($(he.firstOrEmpty("w:rPr")),R(he.children),function(Se,Ce){var Ue=te();return Ue!==null&&(Ce=[new t.Hyperlink(Ce,Ue)]),new t.Run(Ce,Se)})},"w:fldChar":ae,"w:instrText":ve,"w:t":function(he){return g(new t.Text(he.text()))},"w:tab":function(he){return g(new t.Tab)},"w:noBreakHyphen":function(){return g(new t.Text("‑"))},"w:softHyphen":function(he){return g(new t.Text("­"))},"w:sym":Te,"w:hyperlink":function(he){var Se=he.attributes["r:id"],Ce=he.attributes["w:anchor"];return R(he.children).map(function(Ue){function Be(_t){var un=he.attributes["w:tgtFrame"]||null;return new t.Hyperlink(Ue,e.extend({targetFrame:un},_t))}if(Se){var et=D.findTargetByRelationshipId(Se);return Ce&&(et=o.replaceFragment(et,Ce)),Be({href:et})}else return Ce?Be({anchor:Ce}):Ue})},"w:tbl":z,"w:tr":ue,"w:tc":le,"w:footnoteReference":O("footnote"),"w:endnoteReference":O("endnote"),"w:commentReference":ie,"w:br":function(he){var Se=he.attributes["w:type"];return Se==null||Se==="textWrapping"?g(t.lineBreak):Se==="page"?g(t.pageBreak):Se==="column"?g(t.columnBreak):p([i("Unsupported break type: "+Se)])},"w:bookmarkStart":function(he){var Se=he.attributes["w:name"];return Se==="_GoBack"?y():g(new t.BookmarkStart({name:Se}))},"mc:AlternateContent":function(he){return re(he.firstOrEmpty("mc:Fallback"))},"w:sdt":function(he){var Se=R(he.firstOrEmpty("w:sdtContent").children);return Se.map(function(Ce){var Ue=he.firstOrEmpty("w:sdtPr").first("wordml:checkbox");if(Ue){var Be=Ue.first("wordml:checked"),et=!!Be&&L(Be.attributes["wordml:val"]),_t=t.checkbox({checked:et}),un=!1,Nr=Ce.map(s._elementsOfType(t.types.text,function(Y){return Y.value.length>0&&!un?(un=!0,_t):Y}));return un?Nr:_t}else return Ce})},"w:ins":re,"w:object":re,"w:smartTag":re,"w:drawing":re,"w:pict":function(he){return re(he).toExtra()},"v:roundrect":re,"v:shape":re,"v:textbox":re,"w:txbxContent":re,"wp:inline":pe,"wp:anchor":pe,"v:imagedata":ot,"v:group":re,"v:rect":re};return{readXmlElement:P,readXmlElements:R};function z(he){var Se=X(he.firstOrEmpty("w:tblPr"));return R(he.children).flatMap(ne).flatMap(function(Ce){return Se.map(function(Ue){return t.Table(Ce,Ue)})})}function X(he){return V(he).map(function(Se){return{styleId:Se.styleId,styleName:Se.name}})}function ue(he){var Se=he.firstOrEmpty("w:trPr"),Ce=!!Se.first("w:del");if(Ce)return y();var Ue=!!Se.first("w:tblHeader");return R(he.children).map(function(Be){return t.TableRow(Be,{isHeader:Ue})})}function le(he){return R(he.children).map(function(Se){var Ce=he.firstOrEmpty("w:tcPr"),Ue=Ce.firstOrEmpty("w:gridSpan").attributes["w:val"],Be=Ue?parseInt(Ue,10):1,et=t.TableCell(Se,{colSpan:Be});return et._vMerge=ee(Ce),et})}function ee(he){var Se=he.first("w:vMerge");if(Se){var Ce=Se.attributes["w:val"];return Ce==="continue"||!Ce}else return null}function ne(he){var Se=e.any(he,function(Be){return Be.type!==t.types.tableRow});if(Se)return oe(he),m(he,[i("unexpected non-row element in table, cell merging may be incorrect")]);var Ce=e.any(he,function(Be){return e.any(Be.children,function(et){return et.type!==t.types.tableCell})});if(Ce)return oe(he),m(he,[i("unexpected non-cell element in table row, cell merging may be incorrect")]);var Ue={};return he.forEach(function(Be){var et=0;Be.children.forEach(function(_t){_t._vMerge&&Ue[et]?Ue[et].rowSpan++:(Ue[et]=_t,_t._vMerge=!1),et+=_t.colSpan})}),he.forEach(function(Be){Be.children=Be.children.filter(function(et){return!et._vMerge}),Be.children.forEach(function(et){delete et._vMerge})}),g(he)}function oe(he){he.forEach(function(Se){var Ce=s.getDescendantsOfType(Se,t.types.tableCell);Ce.forEach(function(Ue){delete Ue._vMerge})})}function pe(he){var Se=he.getElementsByTagName("a:graphic").getElementsByTagName("a:graphicData").getElementsByTagName("pic:pic").getElementsByTagName("pic:blipFill").getElementsByTagName("a:blip");return x(Se.map(Ae.bind(null,he)))}function Ae(he,Se){var Ce=he.first("wp:docPr").attributes,Ue=Ne(Ce.descr)?Ce.title:Ce.descr,Be=Pe(Se);return Be===null?p([i("Could not find image file for a:blip element")]):ge(Be,Ue)}function Ne(he){return he==null||/^\s*$/.test(he)}function Pe(he){var Se=he.attributes["r:embed"],Ce=he.attributes["r:link"];if(Se)return Le(Se);if(Ce){var Ue=D.findTargetByRelationshipId(Ce);return{path:Ue,read:T.read.bind(T,Ue)}}else return null}function ot(he){var Se=he.attributes["r:id"];return Se?ge(Le(Se),he.attributes["o:title"]):p([i("A v:imagedata element without a relationship ID was ignored")])}function Le(he){var Se=o.uriToZipEntryName("word",D.findTargetByRelationshipId(he));return{path:Se,read:k.read.bind(k,Se)}}function ge(he,Se){var Ce=C.findContentType(he.path),Ue=t.Image({readImage:he.read,altText:Se,contentType:Ce}),Be=h[Ce]?[]:i("Image of type "+Ce+" is unlikely to display in web browsers");return m(Ue,Be)}function Ie(he,Se){return i(he+" style with ID "+Se+" was referenced but not defined in the document")}}function d(w,S,E){var _=S.firstOrEmpty("w:ilvl").attributes["w:val"],D=S.firstOrEmpty("w:numId").attributes["w:val"];if(_!==void 0&&D!==void 0)return E.findLevel(D,_);if(w!=null){var C=E.findLevelByParagraphStyleId(w);if(C!=null)return C}return D!==void 0?E.findLevel(D,"0"):null}var h={"image/png":!0,"image/gif":!0,"image/jpeg":!0,"image/svg+xml":!0,"image/tiff":!0},f={"office-word:wrap":!0,"v:shadow":!0,"v:shapetype":!0,"w:annotationRef":!0,"w:bookmarkEnd":!0,"w:sectPr":!0,"w:proofErr":!0,"w:lastRenderedPageBreak":!0,"w:commentRangeStart":!0,"w:commentRangeEnd":!0,"w:del":!0,"w:footnoteRef":!0,"w:endnoteRef":!0,"w:pPr":!0,"w:rPr":!0,"w:tblPr":!0,"w:tblGrid":!0,"w:trPr":!0,"w:tcPr":!0};function p(w){return new v(null,null,w)}function y(){return new v(null)}function g(w){return new v(w)}function m(w,S){return new v(w,null,S)}function v(w,S,E){this.value=w||[],this.extra=S||[],this._result=new r({element:this.value,extra:S},E),this.messages=this._result.messages}v.prototype.toExtra=function(){return new v(null,b(this.extra,this.value),this.messages)},v.prototype.insertExtra=function(){var w=this.extra;return w&&w.length?new v(b(this.value,w),null,this.messages):this},v.prototype.map=function(w){var S=this._result.map(function(E){return w(E.element)});return new v(S.value,this.extra,S.messages)},v.prototype.flatMap=function(w){var S=this._result.flatMap(function(E){return w(E.element)._result});return new v(S.value.element,b(this.extra,S.value.extra),S.messages)},v.map=function(w,S,E){return new v(E(w.value,S.value),b(w.extra,S.extra),w.messages.concat(S.messages))};function x(w){var S=r.combine(e.pluck(w,"_result"));return new v(e.flatten(e.pluck(S.value,"element")),e.filter(e.flatten(e.pluck(S.value,"extra")),A),S.messages)}function b(w,S){return e.flatten([w,S])}function A(w){return w}return lp}var aw={},n5;function Yhe(){if(n5)return aw;n5=1,aw.DocumentXmlReader=t;var n=Ll(),e=_s().Result;function t(r){var i=r.bodyReader;function a(s){var o=s.first("w:body");if(o==null)throw new Error("Could not find the body element: are you sure this is a docx file?");var c=i.readXmlElements(o.children).map(function(u){return new n.Document(u,{notes:r.notes,comments:r.comments})});return new e(c.value,c.messages)}return{convertXmlToDocument:a}}return aw}var md={},r5;function Khe(){if(r5)return md;r5=1,md.readRelationships=n,md.defaultValue=new e([]),md.Relationships=e;function n(t){var r=[];return t.children.forEach(function(i){if(i.name==="relationships:Relationship"){var a={relationshipId:i.attributes.Id,target:i.attributes.Target,type:i.attributes.Type};r.push(a)}}),new e(r)}function e(t){var r={};t.forEach(function(a){r[a.relationshipId]=a.target});var i={};return t.forEach(function(a){i[a.type]||(i[a.type]=[]),i[a.type].push(a.target)}),{findTargetByRelationshipId:function(a){return r[a]},findTargetsByType:function(a){return i[a]||[]}}}return md}var dp={},i5;function Xhe(){if(i5)return dp;i5=1,dp.readContentTypesFromXml=e;var n={png:"png",gif:"gif",jpeg:"jpeg",jpg:"jpeg",tif:"tiff",tiff:"tiff",bmp:"bmp"};dp.defaultContentTypes=t({},{});function e(r){var i={},a={};return r.children.forEach(function(s){if(s.name==="content-types:Default"&&(i[s.attributes.Extension]=s.attributes.ContentType),s.name==="content-types:Override"){var o=s.attributes.PartName;o.charAt(0)==="/"&&(o=o.substring(1)),a[o]=s.attributes.ContentType}}),t(a,i)}function t(r,i){return{findContentType:function(a){var s=r[a];if(s)return s;var o=a.split("."),c=o[o.length-1];if(i.hasOwnProperty(c))return i[c];var u=n[c.toLowerCase()];return u?"image/"+u:null}}}return dp}var gd={},a5;function Jhe(){if(a5)return gd;a5=1;var n=On;gd.readNumberingXml=t,gd.Numbering=e,gd.defaultNumbering=new e({},{});function e(s,o,c){var u=n.flatten(n.values(o).map(function(p){return n.values(p.levels)})),d=n.indexBy(u.filter(function(p){return p.paragraphStyleId!=null}),"paragraphStyleId");function h(p,y){var g=s[p];if(g){var m=o[g.abstractNumId];if(m){if(m.numStyleLink==null)return o[g.abstractNumId].levels[y];var v=c.findNumberingStyleById(m.numStyleLink);return h(v.numId,y)}else return null}else return null}function f(p){return d[p]||null}return{findLevel:h,findLevelByParagraphStyleId:f}}function t(s,o){if(!o||!o.styles)throw new Error("styles is missing");var c=r(s),u=a(s);return new e(u,c,o.styles)}function r(s){var o={};return s.getElementsByTagName("w:abstractNum").forEach(function(c){var u=c.attributes["w:abstractNumId"];o[u]=i(c)}),o}function i(s){var o={},c=null;s.getElementsByTagName("w:lvl").forEach(function(d){var h=d.attributes["w:ilvl"],f=d.firstOrEmpty("w:numFmt").attributes["w:val"],p=f!=="bullet",y=d.firstOrEmpty("w:pStyle").attributes["w:val"];h===void 0?c={isOrdered:p,level:"0",paragraphStyleId:y}:o[h]={isOrdered:p,level:h,paragraphStyleId:y}}),c!==null&&o[c.level]===void 0&&(o[c.level]=c);var u=s.firstOrEmpty("w:numStyleLink").attributes["w:val"];return{levels:o,numStyleLink:u}}function a(s){var o={};return s.getElementsByTagName("w:num").forEach(function(c){var u=c.attributes["w:numId"],d=c.first("w:abstractNumId").attributes["w:val"];o[u]={abstractNumId:d}}),o}return gd}var yd={},s5;function Zhe(){if(s5)return yd;s5=1,yd.readStylesXml=e,yd.Styles=n,yd.defaultStyles=new n({},{});function n(s,o,c,u){return{findParagraphStyleById:function(d){return s[d]},findCharacterStyleById:function(d){return o[d]},findTableStyleById:function(d){return c[d]},findNumberingStyleById:function(d){return u[d]}}}n.EMPTY=new n({},{},{},{});function e(s){var o={},c={},u={},d={},h={paragraph:o,character:c,table:u,numbering:d};return s.getElementsByTagName("w:style").forEach(function(f){var p=t(f),y=h[p.type];y&&y[p.styleId]===void 0&&(y[p.styleId]=p)}),new n(o,c,u,d)}function t(s){var o=s.attributes["w:type"];if(o==="numbering")return i(o,s);var c=a(s),u=r(s);return{type:o,styleId:c,name:u}}function r(s){var o=s.first("w:name");return o?o.attributes["w:val"]:null}function i(s,o){var c=a(o),u=o.firstOrEmpty("w:pPr").firstOrEmpty("w:numPr").firstOrEmpty("w:numId").attributes["w:val"];return{type:s,numId:u,styleId:c}}function a(s){return s.attributes["w:styleId"]}return yd}var Xl={},o5;function Qhe(){if(o5)return Xl;o5=1;var n=Ll(),e=_s().Result;Xl.createFootnotesReader=t.bind(Xl,"footnote"),Xl.createEndnotesReader=t.bind(Xl,"endnote");function t(r,i){function a(c){return e.combine(c.getElementsByTagName("w:"+r).filter(s).map(o))}function s(c){var u=c.attributes["w:type"];return u!=="continuationSeparator"&&u!=="separator"}function o(c){var u=c.attributes["w:id"];return i.readXmlElements(c.children).map(function(d){return n.Note({noteType:r,noteId:u,body:d})})}return a}return Xl}var sw={},l5;function efe(){if(l5)return sw;l5=1;var n=Ll(),e=_s().Result;function t(r){function i(s){return e.combine(s.getElementsByTagName("w:comment").map(a))}function a(s){var o=s.attributes["w:id"];function c(u){return(s.attributes[u]||"").trim()||null}return r.readXmlElements(s.children).map(function(u){return n.comment({commentId:o,body:u,authorName:c("w:author"),authorInitials:c("w:initials")})})}return i}return sw.createCommentsReader=t,sw}var ow={},c5;function tfe(){if(c5)return ow;c5=1;var n=Ao();ow.Files=e;function e(){function t(r){return n.reject(new Error("could not open external image: '"+r+`'
cannot open linked files from a web browser`))}return{read:t}}return ow}var u5;function nfe(){if(u5)return tp;u5=1,tp.read=y,tp._findPartPaths=g;var n=Ao(),e=Ll(),t=_s().Result,r=w7(),i=qhe().readXmlFromZipFile,a=Ghe().createBodyReader,s=Yhe().DocumentXmlReader,o=Khe(),c=Xhe(),u=Jhe(),d=Zhe(),h=Qhe(),f=efe(),p=tfe().Files;function y(D,C,k){C=C||{},k=k||{};var T=new p({externalFileAccess:k.externalFileAccess,relativeToFile:C.path});return n.props({contentTypes:w(D),partPaths:g(D),docxFile:D,files:T}).also(function(N){return{styles:E(D,N.partPaths.styles)}}).also(function(N){return{numbering:S(D,N.partPaths.numbering,N.styles)}}).also(function(N){return{footnotes:b(N.partPaths.footnotes,N,function(j,R){return R?h.createFootnotesReader(j)(R):new t([])}),endnotes:b(N.partPaths.endnotes,N,function(j,R){return R?h.createEndnotesReader(j)(R):new t([])}),comments:b(N.partPaths.comments,N,function(j,R){return R?f.createCommentsReader(j)(R):new t([])})}}).also(function(N){return{notes:N.footnotes.flatMap(function(j){return N.endnotes.map(function(R){return new e.Notes(j.concat(R))})})}}).then(function(N){return b(N.partPaths.mainDocument,N,function(j,R){return N.notes.flatMap(function(P){return N.comments.flatMap(function(F){var q=new s({bodyReader:j,notes:P,comments:F});return q.convertXmlToDocument(R)})})})})}function g(D){return _(D).then(function(C){var k=m({docxFile:D,relationships:C,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",basePath:"",fallbackPath:"word/document.xml"});if(!D.exists(k))throw new Error("Could not find main document part. Are you sure this is a valid .docx file?");return x({filename:A(k),readElement:o.readRelationships,defaultValue:o.defaultValue})(D).then(function(T){function N(j){return m({docxFile:D,relationships:T,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/"+j,basePath:r.splitPath(k).dirname,fallbackPath:"word/"+j+".xml"})}return{mainDocument:k,comments:N("comments"),endnotes:N("endnotes"),footnotes:N("footnotes"),numbering:N("numbering"),styles:N("styles")}})})}function m(D){var C=D.docxFile,k=D.relationships,T=D.relationshipType,N=D.basePath,j=D.fallbackPath,R=k.findTargetsByType(T),P=R.map(function(q){return v(r.joinPath(N,q),"/")}),F=P.filter(function(q){return C.exists(q)});return F.length===0?j:F[0]}function v(D,C){return D.substring(0,C.length)===C?D.substring(C.length):D}function x(D){return function(C){return i(C,D.filename).then(function(k){return k?D.readElement(k):D.defaultValue})}}function b(D,C,k){var T=x({filename:A(D),readElement:o.readRelationships,defaultValue:o.defaultValue});return T(C.docxFile).then(function(N){var j=new a({relationships:N,contentTypes:C.contentTypes,docxFile:C.docxFile,numbering:C.numbering,styles:C.styles,files:C.files});return i(C.docxFile,D).then(function(R){return k(j,R)})})}function A(D){var C=r.splitPath(D);return r.joinPath(C.dirname,"_rels",C.basename+".rels")}var w=x({filename:"[Content_Types].xml",readElement:c.readContentTypesFromXml,defaultValue:c.defaultContentTypes});function S(D,C,k){return x({filename:C,readElement:function(T){return u.readNumberingXml(T,{styles:k})},defaultValue:u.defaultNumbering})(D)}function E(D,C){return x({filename:C,readElement:d.readStylesXml,defaultValue:d.defaultStyles})(D)}var _=x({filename:"_rels/.rels",readElement:o.readRelationships,defaultValue:o.defaultValue});return tp}var hp={},d5;function rfe(){if(d5)return hp;d5=1;var n=On,e=Ao(),t=RD();hp.writeStyleMap=s,hp.readStyleMap=d;var r="http://schemas.zwobble.org/mammoth/style-map",i="mammoth/style-map",a="/"+i;function s(h,f){return h.write(i,f),o(h).then(function(){return c(h)})}function o(h){var f="word/_rels/document.xml.rels",p="http://schemas.openxmlformats.org/package/2006/relationships",y="{"+p+"}Relationship";return h.read(f,"utf8").then(t.readString).then(function(g){var m=g.children;u(m,y,"Id",{Id:"rMammothStyleMap",Type:r,Target:a});var v={"":p};return h.write(f,t.writeString(g,v))})}function c(h){var f="[Content_Types].xml",p="http://schemas.openxmlformats.org/package/2006/content-types",y="{"+p+"}Override";return h.read(f,"utf8").then(t.readString).then(function(g){var m=g.children;u(m,y,"PartName",{PartName:a,ContentType:"text/prs.mammoth.style-map"});var v={"":p};return h.write(f,t.writeString(g,v))})}function u(h,f,p,y){var g=n.find(h,function(m){return m.name===f&&m.attributes[p]===y[p]});g?g.attributes=y:h.push(t.element(f,y))}function d(h){return h.exists(i)?h.read(i,"utf8"):e.resolve(null)}return hp}var fp={},Ro={},Xa={},Os={},h5;function j7(){if(h5)return Os;h5=1;var n=R0();function e(c,u,d){return r(n.element(c,u,{fresh:!1}),d)}function t(c,u,d){var h=n.element(c,u,{fresh:!0});return r(h,d)}function r(c,u){return{type:"element",tag:c,children:u||[]}}function i(c){return{type:"text",value:c}}var a={type:"forceWrite"};Os.freshElement=t,Os.nonFreshElement=e,Os.elementWithTag=r,Os.text=i,Os.forceWrite=a;var s={br:!0,hr:!0,img:!0,input:!0};function o(c){return c.children.length===0&&s[c.tag.tagName]}return Os.isVoidElement=o,Os}var lw,f5;function ife(){if(f5)return lw;f5=1;var n=On,e=j7();function t(g){return r(u(g))}function r(g){var m=[];return g.map(i).forEach(function(v){c(m,v)}),m}function i(g){return a[g.type](g)}var a={element:s,text:o,forceWrite:o};function s(g){return e.elementWithTag(g.tag,r(g.children))}function o(g){return g}function c(g,m){var v=g[g.length-1];m.type==="element"&&!m.tag.fresh&&v&&v.type==="element"&&m.tag.matchesElement(v.tag)?(m.tag.separator&&c(v.children,e.text(m.tag.separator)),m.children.forEach(function(x){c(v.children,x)})):g.push(m)}function u(g){return d(g,function(m){return h[m.type](m)})}function d(g,m){return n.flatten(n.map(g,m),!0)}var h={element:p,text:y,forceWrite:f};function f(g){return[g]}function p(g){var m=u(g.children);return m.length===0&&!e.isVoidElement(g)?[]:[e.elementWithTag(g.tag,m)]}function y(g){return g.value.length===0?[]:[g]}return lw=t,lw}var p5;function I0(){if(p5)return Xa;p5=1;var n=j7();Xa.freshElement=n.freshElement,Xa.nonFreshElement=n.nonFreshElement,Xa.elementWithTag=n.elementWithTag,Xa.text=n.text,Xa.forceWrite=n.forceWrite,Xa.simplify=ife();function e(s,o){o.forEach(function(c){t(s,c)})}function t(s,o){r[o.type](s,o)}var r={element:i,text:a,forceWrite:function(){}};function i(s,o){n.isVoidElement(o)?s.selfClosing(o.tag.tagName,o.tag.attributes):(s.open(o.tag.tagName,o.tag.attributes),e(s,o.children),s.close(o.tag.tagName))}function a(s,o){s.text(o.value)}return Xa.write=e,Xa}var m5;function R0(){if(m5)return Ro;m5=1;var n=On,e=I0();Ro.topLevelElement=t,Ro.elements=r,Ro.element=a;function t(o,c){return r([a(o,c,{fresh:!0})])}function r(o){return new i(o.map(function(c){return n.isString(c)?a(c):c}))}function i(o){this._elements=o}i.prototype.wrap=function(c){for(var u=c(),d=this._elements.length-1;d>=0;d--)u=this._elements[d].wrapNodes(u);return u};function a(o,c,u){return u=u||{},new s(o,c,u)}function s(o,c,u){var d={};n.isArray(o)?(o.forEach(function(h){d[h]=!0}),o=o[0]):d[o]=!0,this.tagName=o,this.tagNames=d,this.attributes=c||{},this.fresh=u.fresh,this.separator=u.separator}return s.prototype.matchesElement=function(o){return this.tagNames[o.tagName]&&n.isEqual(this.attributes||{},o.attributes||{})},s.prototype.wrap=function(c){return this.wrapNodes(c())},s.prototype.wrapNodes=function(c){return[e.elementWithTag(this,c)]},Ro.empty=r([]),Ro.ignore={wrap:function(){return[]}},Ro}var cw={},g5;function T7(){return g5||(g5=1,(function(n){var e=On,t=Ao(),r=I0();n.imgElement=i;function i(a){return function(s,o){return t.when(a(s)).then(function(c){var u={};return s.altText&&(u.alt=s.altText),e.extend(u,c),[r.freshElement("img",u)]})}}n.inline=n.imgElement,n.dataUri=i(function(a){return a.readAsBase64String().then(function(s){return{src:"data:"+a.contentType+";base64,"+s}})})})(cw)),cw}var uw={},dw={},y5;function afe(){if(y5)return dw;y5=1;var n=On;dw.writer=e;function e(o){return o=o||{},o.prettyPrint?r():i()}var t={div:!0,p:!0,ul:!0,li:!0};function r(){var o=0,c="  ",u=[],d=!0,h=!1,f=i();function p(w,S){t[w]&&b(),u.push(w),f.open(w,S),t[w]&&o++,d=!1}function y(w){t[w]&&(o--,b()),u.pop(),f.close(w)}function g(w){x();var S=A()?w:w.replace(`
`,`
`+c);f.text(S)}function m(w,S){b(),f.selfClosing(w,S)}function v(){return u.length===0||t[u[u.length-1]]}function x(){h||(b(),h=!0)}function b(){if(h=!1,!d&&v()&&!A()){f._append(`
`);for(var w=0;w<o;w++)f._append(c)}}function A(){return n.some(u,function(w){return w==="pre"})}return{asString:f.asString,open:p,close:y,text:g,selfClosing:m}}function i(){var o=[];function c(g,m){var v=h(m);o.push("<"+g+v+">")}function u(g){o.push("</"+g+">")}function d(g,m){var v=h(m);o.push("<"+g+v+" />")}function h(g){return n.map(g,function(m,v){return" "+v+'="'+s(m)+'"'}).join("")}function f(g){o.push(a(g))}function p(g){o.push(g)}function y(){return o.join("")}return{asString:y,open:c,close:u,text:f,selfClosing:d,_append:p}}function a(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(o){return o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return dw}var hw={},v5;function sfe(){if(v5)return hw;v5=1;var n=On;function e(h){return t(h,h)}function t(h,f){return function(){return{start:h,end:f}}}function r(h){var f=h.href||"";return f?{start:"[",end:"]("+f+")",anchorPosition:"before"}:{}}function i(h){var f=h.src||"",p=h.alt||"";return f||p?{start:"!["+p+"]("+f+")"}:{}}function a(h){return function(f,p){return{start:p?`
`:"",end:p?"":`
`,list:{isOrdered:h.isOrdered,indent:p?p.indent+1:0,count:0}}}}function s(h,f,p){f=f||{indent:0,isOrdered:!1,count:0},f.count++,p.hasClosed=!1;var y=f.isOrdered?f.count+".":"-",g=c("	",f.indent)+y+" ";return{start:g,end:function(){if(!p.hasClosed)return p.hasClosed=!0,`
`}}}var o={p:t("",`

`),br:t("",`  
`),ul:a({isOrdered:!1}),ol:a({isOrdered:!0}),li:s,strong:e("__"),em:e("*"),a:r,img:i};(function(){for(var h=1;h<=6;h++)o["h"+h]=t(c("#",h)+" ",`

`)})();function c(h,f){return new Array(f+1).join(h)}function u(){var h=[],f=[],p=null,y={};function g(w,S){S=S||{};var E=o[w]||function(){return{}},_=E(S,p,y);f.push({end:_.end,list:p}),_.list&&(p=_.list);var D=_.anchorPosition==="before";D&&m(S),h.push(_.start||""),D||m(S)}function m(w){w.id&&h.push('<a id="'+w.id+'"></a>')}function v(w){var S=f.pop();p=S.list;var E=n.isFunction(S.end)?S.end():S.end;h.push(E||"")}function x(w,S){g(w,S),v()}function b(w){h.push(d(w))}function A(){return h.join("")}return{asString:A,open:g,close:v,text:b,selfClosing:x}}hw.writer=u;function d(h){return h.replace(/\\/g,"\\\\").replace(/([\`\*_\{\}\[\]\(\)\#\+\-\.\!])/g,"\\$1")}return hw}var x5;function ofe(){if(x5)return uw;x5=1;var n=afe(),e=sfe();uw.writer=t;function t(r){return r=r||{},r.outputFormat==="markdown"?e.writer():n.writer(r)}return uw}var b5;function lfe(){if(b5)return fp;b5=1;var n=On,e=Ao(),t=Ll(),r=R0(),i=_s(),a=T7(),s=I0(),o=ofe();fp.DocumentConverter=c;function c(m){return{convertToHtml:function(v){var x=n.indexBy(v.type===t.types.document?v.comments:[],"commentId"),b=new u(m,x);return b.convertToHtml(v)}}}function u(m,v){var x=1,b=[],A=[];m=n.extend({ignoreEmptyParagraphs:!0},m);var w=m.idPrefix===void 0?"":m.idPrefix,S=m.ignoreEmptyParagraphs,E=r.topLevelElement("p"),_=m.styleMap||[];function D(O){var ie=[],re=k(O,ie,{}),Z=[];y(re,function(X){X.type==="deferred"&&Z.push(X)});var z={};return e.mapSeries(Z,function(X){return X.value().then(function(ue){z[X.id]=ue})}).then(function(){function X(le){return p(le,function(ee){return ee.type==="deferred"?z[ee.id]:ee.children?[n.extend({},ee,{children:X(ee.children)})]:[ee]})}var ue=o.writer({prettyPrint:m.prettyPrint,outputFormat:m.outputFormat});return s.write(ue,s.simplify(X(re))),new i.Result(ue.asString(),ie)})}function C(O,ie,re){return p(O,function(Z){return k(Z,ie,re)})}function k(O,ie,re){if(!re)throw new Error("options not set");var Z=Te[O.type];return Z?Z(O,ie,re):[]}function T(O,ie,re){return N(O,ie).wrap(function(){var Z=C(O.children,ie,re);return S?Z:[s.forceWrite].concat(Z)})}function N(O,ie){var re=F(O);return re?re.to:(O.styleId&&ie.push(f("paragraph",O)),E)}function j(O,ie,re){var Z=function(){return C(O.children,ie,re)},z=[];if(O.highlight!==null){var X=P({type:"highlight",color:O.highlight});X&&z.push(X)}O.isSmallCaps&&z.push(R("smallCaps")),O.isAllCaps&&z.push(R("allCaps")),O.isStrikethrough&&z.push(R("strikethrough","s")),O.isUnderline&&z.push(R("underline")),O.verticalAlignment===t.verticalAlignment.subscript&&z.push(r.element("sub",{},{fresh:!1})),O.verticalAlignment===t.verticalAlignment.superscript&&z.push(r.element("sup",{},{fresh:!1})),O.isItalic&&z.push(R("italic","em")),O.isBold&&z.push(R("bold","strong"));var ue=r.empty,le=F(O);return le?ue=le.to:O.styleId&&ie.push(f("run",O)),z.push(ue),z.forEach(function(ee){Z=ee.wrap.bind(ee,Z)}),Z()}function R(O,ie){var re=P({type:O});return re||(ie?r.element(ie,{},{fresh:!1}):r.empty)}function P(O,ie){var re=F(O);return re?re.to:ie}function F(O){for(var ie=0;ie<_.length;ie++)if(_[ie].from.matches(O))return _[ie]}function q(O){return function(ie,re){return e.attempt(function(){return O(ie,re)}).caught(function(Z){return re.push(i.error(Z)),[]})}}function $(O){return I(O.noteType,O.noteId)}function B(O){return L(O.noteType,O.noteId)}function I(O,ie){return U(O+"-"+ie)}function L(O,ie){return U(O+"-ref-"+ie)}function U(O){return w+O}var G=r.elements([r.element("table",{},{fresh:!0})]);function H(O,ie,re){return P(O,G).wrap(function(){return V(O,ie,re)})}function V(O,ie,re){var Z=n.findIndex(O.children,function(le){return!le.type===t.types.tableRow||!le.isHeader});Z===-1&&(Z=O.children.length);var z;if(Z===0)z=C(O.children,ie,n.extend({},re,{isTableHeader:!1}));else{var X=C(O.children.slice(0,Z),ie,n.extend({},re,{isTableHeader:!0})),ue=C(O.children.slice(Z),ie,n.extend({},re,{isTableHeader:!1}));z=[s.freshElement("thead",{},X),s.freshElement("tbody",{},ue)]}return[s.forceWrite].concat(z)}function K(O,ie,re){var Z=C(O.children,ie,re);return[s.freshElement("tr",{},[s.forceWrite].concat(Z))]}function ae(O,ie,re){var Z=re.isTableHeader?"th":"td",z=C(O.children,ie,re),X={};return O.colSpan!==1&&(X.colspan=O.colSpan.toString()),O.rowSpan!==1&&(X.rowspan=O.rowSpan.toString()),[s.freshElement(Z,X,[s.forceWrite].concat(z))]}function te(O,ie,re){return P(O,r.ignore).wrap(function(){var Z=v[O.commentId],z=A.length+1,X="["+g(Z)+z+"]";return A.push({label:X,comment:Z}),[s.freshElement("a",{href:"#"+I("comment",O.commentId),id:L("comment",O.commentId)},[s.text(X)])]})}function de(O,ie,re){var Z=O.label,z=O.comment,X=C(z.body,ie,re).concat([s.nonFreshElement("p",{},[s.text(" "),s.freshElement("a",{href:"#"+L("comment",z.commentId)},[s.text("↑")])])]);return[s.freshElement("dt",{id:I("comment",z.commentId)},[s.text("Comment "+Z)]),s.freshElement("dd",{},X)]}function xe(O,ie,re){return ve(O).wrap(function(){return[]})}function ve(O){var ie=F(O);return ie?ie.to:O.breakType==="line"?r.topLevelElement("br"):r.empty}var Te={document:function(O,ie,re){var Z=C(O.children,ie,re),z=b.map(function(ue){return O.notes.resolve(ue)}),X=C(z,ie,re);return Z.concat([s.freshElement("ol",{},X),s.freshElement("dl",{},p(A,function(ue){return de(ue,ie,re)}))])},paragraph:T,run:j,text:function(O,ie,re){return[s.text(O.value)]},tab:function(O,ie,re){return[s.text("	")]},hyperlink:function(O,ie,re){var Z=O.anchor?"#"+U(O.anchor):O.href,z={href:Z};O.targetFrame!=null&&(z.target=O.targetFrame);var X=C(O.children,ie,re);return[s.nonFreshElement("a",z,X)]},checkbox:function(O){var ie={type:"checkbox"};return O.checked&&(ie.checked="checked"),[s.freshElement("input",ie)]},bookmarkStart:function(O,ie,re){var Z=s.freshElement("a",{id:U(O.name)},[s.forceWrite]);return[Z]},noteReference:function(O,ie,re){b.push(O);var Z=s.freshElement("a",{href:"#"+$(O),id:B(O)},[s.text("["+x+++"]")]);return[s.freshElement("sup",{},[Z])]},note:function(O,ie,re){var Z=C(O.body,ie,re),z=s.elementWithTag(r.element("p",{},{fresh:!1}),[s.text(" "),s.freshElement("a",{href:"#"+B(O)},[s.text("↑")])]),X=Z.concat([z]);return s.freshElement("li",{id:$(O)},X)},commentReference:te,comment:de,image:h(q(m.convertImage||a.dataUri)),table:H,tableRow:K,tableCell:ae,break:xe};return{convertToHtml:D}}var d=1;function h(m){return function(v,x,b){return[{type:"deferred",id:d++,value:function(){return m(v,x,b)}}]}}function f(m,v){return i.warning("Unrecognised "+m+" style: '"+v.styleName+"' (Style ID: "+v.styleId+")")}function p(m,v){return n.flatten(m.map(v),!0)}function y(m,v){m.forEach(function(x){v(x),x.children&&y(x.children,v)})}var g=fp.commentAuthorLabel=function(v){return v.authorInitials||""};return fp}var fw={},w5;function cfe(){if(w5)return fw;w5=1;var n=Ll();function e(t){if(t.type==="text")return t.value;if(t.type===n.types.tab)return"	";var r=t.type==="paragraph"?`

`:"";return(t.children||[]).map(e).join("")+r}return fw.convertElementToRawText=e,fw}var vd={},ta={},pw={},mw={exports:{}},A5;function ufe(){if(A5)return mw.exports;A5=1;var n=mw.exports=function(e,t){this._tokens=e,this._startIndex=t||0};return n.prototype.head=function(){return this._tokens[this._startIndex]},n.prototype.tail=function(e){return new n(this._tokens,this._startIndex+1)},n.prototype.toArray=function(){return this._tokens.slice(this._startIndex)},n.prototype.end=function(){return this._tokens[this._tokens.length-1]},n.prototype.to=function(e){var t=this.head().source,r=e.head()||e.end();return t.to(r.source)},mw.exports}var S5;function dfe(){if(S5)return pw;S5=1;var n=ufe();return pw.Parser=function(e){var t=function(r,i){return r(new n(i))};return{parseTokens:t}},pw}var gw={},yw={},E5;function hfe(){return E5||(E5=1,(function(n){n.none=Object.create({value:function(){throw new Error("Called value on none")},isNone:function(){return!0},isSome:function(){return!1},map:function(){return n.none},flatMap:function(){return n.none},filter:function(){return n.none},toArray:function(){return[]},orElse:e,valueOrElse:e});function e(r){return typeof r=="function"?r():r}n.some=function(r){return new t(r)};var t=function(r){this._value=r};t.prototype.value=function(){return this._value},t.prototype.isNone=function(){return!1},t.prototype.isSome=function(){return!0},t.prototype.map=function(r){return new t(r(this._value))},t.prototype.flatMap=function(r){return r(this._value)},t.prototype.filter=function(r){return r(this._value)?this:n.none},t.prototype.toArray=function(){return[this._value]},t.prototype.orElse=function(r){return this},t.prototype.valueOrElse=function(r){return this._value},n.isOption=function(r){return r===n.none||r instanceof t},n.fromNullable=function(r){return r==null?n.none:new t(r)}})(yw)),yw}var vw,_5;function MD(){if(_5)return vw;_5=1,vw={failure:function(e,t){if(e.length<1)throw new Error("Failure must have errors");return new n({status:"failure",remaining:t,errors:e})},error:function(e,t){if(e.length<1)throw new Error("Failure must have errors");return new n({status:"error",remaining:t,errors:e})},success:function(e,t,r){return new n({status:"success",value:e,source:r,remaining:t,errors:[]})},cut:function(e){return new n({status:"cut",remaining:e,errors:[]})}};var n=function(e){this._value=e.value,this._status=e.status,this._hasValue=e.value!==void 0,this._remaining=e.remaining,this._source=e.source,this._errors=e.errors};return n.prototype.map=function(e){return this._hasValue?new n({value:e(this._value,this._source),status:this._status,remaining:this._remaining,source:this._source,errors:this._errors}):this},n.prototype.changeRemaining=function(e){return new n({value:this._value,status:this._status,remaining:e,source:this._source,errors:this._errors})},n.prototype.isSuccess=function(){return this._status==="success"||this._status==="cut"},n.prototype.isFailure=function(){return this._status==="failure"},n.prototype.isError=function(){return this._status==="error"},n.prototype.isCut=function(){return this._status==="cut"},n.prototype.value=function(){return this._value},n.prototype.remaining=function(){return this._remaining},n.prototype.source=function(){return this._source},n.prototype.errors=function(){return this._errors},vw}var xw={},D5;function C7(){if(D5)return xw;D5=1,xw.error=function(e){return new n(e)};var n=function(e){this.expected=e.expected,this.actual=e.actual,this._location=e.location};return n.prototype.describe=function(){var e=this._location?this._location.describe()+`:
`:"";return e+"Expected "+this.expected+`
but got `+this.actual},n.prototype.lineNumber=function(){return this._location.lineNumber()},n.prototype.characterNumber=function(){return this._location.characterNumber()},xw}var bw={},j5;function ffe(){if(j5)return bw;j5=1,bw.fromArray=function(e){var t=0,r=function(){return t<e.length};return new n({hasNext:r,next:function(){if(r())return e[t++];throw new Error("No more elements")}})};var n=function(e){this._iterator=e};return n.prototype.map=function(e){var t=this._iterator;return new n({hasNext:function(){return t.hasNext()},next:function(){return e(t.next())}})},n.prototype.filter=function(e){var t=this._iterator,r=!1,i=!1,a,s=function(){if(!r)for(r=!0,i=!1;t.hasNext()&&!i;)a=t.next(),i=e(a)};return new n({hasNext:function(){return s(),i},next:function(){s();var o=a;return r=!1,o}})},n.prototype.first=function(){var e=this._iterator;return this._iterator.hasNext()?e.next():null},n.prototype.toArray=function(){for(var e=[];this._iterator.hasNext();)e.push(this._iterator.next());return e},bw}var T5;function N7(){return T5||(T5=1,(function(n){var e=On,t=hfe(),r=MD(),i=C7(),a=ffe();n.token=function(f,p){var y=p!==void 0;return function(g){var m=g.head();if(m&&m.name===f&&(!y||m.value===p))return r.success(m.value,g.tail(),m.source);var v=d({name:f,value:p});return h(g,v)}},n.tokenOfType=function(f){return n.token(f)},n.firstOf=function(f,p){return e.isArray(p)||(p=Array.prototype.slice.call(arguments,1)),function(y){return a.fromArray(p).map(function(g){return g(y)}).filter(function(g){return g.isSuccess()||g.isError()}).first()||h(y,f)}},n.then=function(f,p){return function(y){var g=f(y);return g.map||console.log(g),g.map(p)}},n.sequence=function(){var f=Array.prototype.slice.call(arguments,0),p=function(g){var m=e.foldl(f,function(x,b){var A=x.result,w=x.hasCut;if(!A.isSuccess())return{result:A,hasCut:w};var S=b(A.remaining());if(S.isCut())return{result:A,hasCut:!0};if(S.isSuccess()){var E;b.isCaptured?E=A.value().withValue(b,S.value()):E=A.value();var _=S.remaining(),D=g.to(_);return{result:r.success(E,_,D),hasCut:w}}else return w?{result:r.error(S.errors(),S.remaining()),hasCut:w}:{result:S,hasCut:w}},{result:r.success(new s,g),hasCut:!1}).result,v=g.to(m.remaining());return m.map(function(x){return x.withValue(n.sequence.source,v)})};p.head=function(){var g=e.find(f,y);return n.then(p,n.sequence.extract(g))},p.map=function(g){return n.then(p,function(m){return g.apply(this,m.toArray())})};function y(g){return g.isCaptured}return p};var s=function(f,p){this._values=f||{},this._valuesArray=p||[]};s.prototype.withValue=function(f,p){if(f.captureName&&f.captureName in this._values)throw new Error('Cannot add second value for capture "'+f.captureName+'"');var y=e.clone(this._values);y[f.captureName]=p;var g=this._valuesArray.concat([p]);return new s(y,g)},s.prototype.get=function(f){if(f.captureName in this._values)return this._values[f.captureName];throw new Error('No value for capture "'+f.captureName+'"')},s.prototype.toArray=function(){return this._valuesArray},n.sequence.capture=function(f,p){var y=function(){return f.apply(this,arguments)};return y.captureName=p,y.isCaptured=!0,y},n.sequence.extract=function(f){return function(p){return p.get(f)}},n.sequence.applyValues=function(f){var p=Array.prototype.slice.call(arguments,1);return function(y){var g=p.map(function(m){return y.get(m)});return f.apply(this,g)}},n.sequence.source={captureName:"☃source☃"},n.sequence.cut=function(){return function(f){return r.cut(f)}},n.optional=function(f){return function(p){var y=f(p);return y.isSuccess()?y.map(t.some):y.isFailure()?r.success(t.none,p):y}},n.zeroOrMoreWithSeparator=function(f,p){return u(f,p,!1)},n.oneOrMoreWithSeparator=function(f,p){return u(f,p,!0)};var o=n.zeroOrMore=function(f){return function(p){for(var y=[],g;(g=f(p))&&g.isSuccess();)p=g.remaining(),y.push(g.value());return g.isError()?g:r.success(y,p)}};n.oneOrMore=function(f){return n.oneOrMoreWithSeparator(f,c)};function c(f){return r.success(null,f)}var u=function(f,p,y){return function(g){var m=f(g);if(m.isSuccess()){var v=n.sequence.capture(f,"main"),x=o(n.then(n.sequence(p,v),n.sequence.extract(v))),b=x(m.remaining());return r.success([m.value()].concat(b.value()),b.remaining())}else return y||m.isError()?m:r.success([],g)}};n.leftAssociative=function(f,p,y){var g;y?g=[{func:y,rule:p}]:g=p,g=g.map(function(v){return n.then(v.rule,function(x){return function(b,A){return v.func(b,x,A)}})});var m=n.firstOf.apply(null,["rules"].concat(g));return function(v){var x=v,b=f(v);if(!b.isSuccess())return b;for(var A=m(b.remaining());A.isSuccess();){var w=A.remaining(),S=x.to(A.remaining()),E=A.value();b=r.success(E(b.value(),S),w,S),A=m(b.remaining())}return A.isError()?A:b}},n.leftAssociative.firstOf=function(){return Array.prototype.slice.call(arguments,0)},n.nonConsuming=function(f){return function(p){return f(p).changeRemaining(p)}};var d=function(f){return f.value?f.name+' "'+f.value+'"':f.name};function h(f,p){var y,g=f.head();return g?y=i.error({expected:p,actual:d(g),location:g.source}):y=i.error({expected:p,actual:"end of tokens"}),r.failure([y],f)}})(gw)),gw}var ww={exports:{}},C5;function k7(){if(C5)return ww.exports;C5=1,ww.exports=function(e,t){var r={asString:function(){return e},range:function(i,a){return new n(e,t,i,a)}};return r};var n=function(e,t,r,i){this._string=e,this._description=t,this._startIndex=r,this._endIndex=i};return n.prototype.to=function(e){return new n(this._string,this._description,this._startIndex,e._endIndex)},n.prototype.describe=function(){var e=this._position(),t=this._description?this._description+`
`:"";return t+"Line number: "+e.lineNumber+`
Character number: `+e.characterNumber},n.prototype.lineNumber=function(){return this._position().lineNumber},n.prototype.characterNumber=function(){return this._position().characterNumber},n.prototype._position=function(){for(var e=this,t=0,r=function(){return e._string.indexOf(`
`,t)},i=1;r()!==-1&&r()<this._startIndex;)t=r()+1,i+=1;var a=this._startIndex-t+1;return{lineNumber:i,characterNumber:a}},ww.exports}var Aw,N5;function O7(){return N5||(N5=1,Aw=function(n,e,t){this.name=n,this.value=e,t&&(this.source=t)}),Aw}var Sw={},k5;function pfe(){return k5||(k5=1,(function(n){var e=N7(),t=MD();n.parser=function(a,s,o){var c={rule:f,leftAssociative:p,rightAssociative:y},u=new r(o.map(h)),d=e.firstOf(a,s);function h(v){return{name:v.name,rule:i(v.ruleBuilder.bind(null,c))}}function f(){return g(u)}function p(v){return g(u.untilExclusive(v))}function y(v){return g(u.untilInclusive(v))}function g(v){return m.bind(null,v)}function m(v,x){var b=d(x);return b.isSuccess()?v.apply(b):b}return c};function r(a){function s(h){return new r(a.slice(0,c().indexOf(h)))}function o(h){return new r(a.slice(0,c().indexOf(h)+1))}function c(){return a.map(function(h){return h.name})}function u(h){for(var f,p;;)if(f=d(h.remaining()),f.isSuccess())p=h.source().to(f.source()),h=t.success(f.value()(h.value(),p),f.remaining(),p);else return f.isFailure()?h:f}function d(h){return e.firstOf("infix",a.map(function(f){return f.rule}))(h)}return{apply:u,untilExclusive:s,untilInclusive:o}}n.infix=function(a,s){function o(c){return n.infix(a,function(u){var d=s(u);return function(h){var f=d(h);return f.map(function(p){return function(y,g){return c(y,p,g)}})}})}return{name:a,ruleBuilder:s,map:o}};var i=function(a){var s;return function(o){return s||(s=a()),s(o)}}})(Sw)),Sw}var Ew={},O5;function mfe(){if(O5)return Ew;O5=1;var n=O7(),e=k7();Ew.RegexTokeniser=t;function t(r){r=r.map(function(o){return{name:o.name,regex:new RegExp(o.regex.source,"g")}});function i(o,c){for(var u=new e(o,c),d=0,h=[];d<o.length;){var f=a(o,d,u);d=f.endIndex,h.push(f.token)}return h.push(s(o,u)),h}function a(o,c,u){for(var d=0;d<r.length;d++){var h=r[d].regex;h.lastIndex=c;var f=h.exec(o);if(f){var y=c+f[0].length;if(f.index===c&&y>c){var p=f[1],g=new n(r[d].name,p,u.range(c,y));return{token:g,endIndex:y}}}}var y=c+1,g=new n("unrecognisedCharacter",o.substring(c,y),u.range(c,y));return{token:g,endIndex:y}}function s(o,c){return new n("end",null,c.range(o.length,o.length))}return{tokenise:i}}return Ew}var P5;function P7(){return P5||(P5=1,ta.Parser=dfe().Parser,ta.rules=N7(),ta.errors=C7(),ta.results=MD(),ta.StringSource=k7(),ta.Token=O7(),ta.bottomUp=pfe(),ta.RegexTokeniser=mfe().RegexTokeniser,ta.rule=function(n){var e;return function(t){return e||(e=n()),e(t)}}),ta}var Qn={},I5;function gfe(){if(I5)return Qn;I5=1,Qn.paragraph=n,Qn.run=e,Qn.table=t,Qn.bold=new i("bold"),Qn.italic=new i("italic"),Qn.underline=new i("underline"),Qn.strikethrough=new i("strikethrough"),Qn.allCaps=new i("allCaps"),Qn.smallCaps=new i("smallCaps"),Qn.highlight=r,Qn.commentReference=new i("commentReference"),Qn.lineBreak=new s({breakType:"line"}),Qn.pageBreak=new s({breakType:"page"}),Qn.columnBreak=new s({breakType:"column"}),Qn.equalTo=c,Qn.startsWith=u;function n(f){return new i("paragraph",f)}function e(f){return new i("run",f)}function t(f){return new i("table",f)}function r(f){return new a(f)}function i(f,p){p=p||{},this._elementType=f,this._styleId=p.styleId,this._styleName=p.styleName,p.list&&(this._listIndex=p.list.levelIndex,this._listIsOrdered=p.list.isOrdered)}i.prototype.matches=function(f){return f.type===this._elementType&&(this._styleId===void 0||f.styleId===this._styleId)&&(this._styleName===void 0||f.styleName&&this._styleName.operator(this._styleName.operand,f.styleName))&&(this._listIndex===void 0||o(f,this._listIndex,this._listIsOrdered))&&(this._breakType===void 0||this._breakType===f.breakType)};function a(f){f=f||{},this._color=f.color}a.prototype.matches=function(f){return f.type==="highlight"&&(this._color===void 0||f.color===this._color)};function s(f){f=f||{},this._breakType=f.breakType}s.prototype.matches=function(f){return f.type==="break"&&(this._breakType===void 0||f.breakType===this._breakType)};function o(f,p,y){return f.numbering&&f.numbering.level==p&&f.numbering.isOrdered==y}function c(f){return{operator:d,operand:f}}function u(f){return{operator:h,operand:f}}function d(f,p){return f.toUpperCase()===p.toUpperCase()}function h(f,p){return p.toUpperCase().indexOf(f.toUpperCase())===0}return Qn}var _w={},R5;function yfe(){if(R5)return _w;R5=1;var n=P7(),e=n.RegexTokeniser;_w.tokenise=r;var t="'((?:\\\\.|[^'])*)";function r(i){var a="(?:[a-zA-Z\\-_]|\\\\.)",s=new e([{name:"identifier",regex:new RegExp("("+a+"(?:"+a+"|[0-9])*)")},{name:"dot",regex:/\./},{name:"colon",regex:/:/},{name:"gt",regex:/>/},{name:"whitespace",regex:/\s+/},{name:"arrow",regex:/=>/},{name:"equals",regex:/=/},{name:"startsWith",regex:/\^=/},{name:"open-paren",regex:/\(/},{name:"close-paren",regex:/\)/},{name:"open-square-bracket",regex:/\[/},{name:"close-square-bracket",regex:/\]/},{name:"string",regex:new RegExp(t+"'")},{name:"unterminated-string",regex:new RegExp(t)},{name:"integer",regex:/([0-9]+)/},{name:"choice",regex:/\|/},{name:"bang",regex:/(!)/}]);return s.tokenise(i)}return _w}var M5;function vfe(){if(M5)return vd;M5=1;var n=On,e=P7(),t=gfe(),r=R0(),i=yfe().tokenise,a=_s();vd.readHtmlPath=d,vd.readDocumentMatcher=c,vd.readStyle=s;function s(_){return A(E,_)}function o(){return e.rules.sequence(e.rules.sequence.capture(u()),e.rules.tokenOfType("whitespace"),e.rules.tokenOfType("arrow"),e.rules.sequence.capture(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("whitespace"),e.rules.sequence.capture(h())).head())),e.rules.tokenOfType("end")).map(function(_,D){return{from:_,to:D.valueOrElse(r.empty)}})}function c(_){return A(u(),_)}function u(){var _=e.rules.sequence,D=function(de,xe){return e.rules.then(e.rules.token("identifier",de),function(){return xe})},C=D("p",t.paragraph),k=D("r",t.run),T=e.rules.firstOf("p or r or table",C,k),N=e.rules.sequence(e.rules.tokenOfType("dot"),e.rules.sequence.cut(),e.rules.sequence.capture(f)).map(function(de){return{styleId:de}}),j=e.rules.firstOf("style name matcher",e.rules.then(e.rules.sequence(e.rules.tokenOfType("equals"),e.rules.sequence.cut(),e.rules.sequence.capture(y)).head(),function(de){return{styleName:t.equalTo(de)}}),e.rules.then(e.rules.sequence(e.rules.tokenOfType("startsWith"),e.rules.sequence.cut(),e.rules.sequence.capture(y)).head(),function(de){return{styleName:t.startsWith(de)}})),R=e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.token("identifier","style-name"),e.rules.sequence.capture(j),e.rules.tokenOfType("close-square-bracket")).head(),P=e.rules.firstOf("list type",D("ordered-list",{isOrdered:!0}),D("unordered-list",{isOrdered:!1})),F=_(e.rules.tokenOfType("colon"),_.capture(P),_.cut(),e.rules.tokenOfType("open-paren"),_.capture(p),e.rules.tokenOfType("close-paren")).map(function(de,xe){return{list:{isOrdered:de.isOrdered,levelIndex:xe-1}}});function q(de){var xe=e.rules.firstOf.apply(e.rules.firstOf,["matcher suffix"].concat(de)),ve=e.rules.zeroOrMore(xe);return e.rules.then(ve,function(Te){var O={};return Te.forEach(function(ie){n.extend(O,ie)}),O})}var $=_(_.capture(T),_.capture(q([N,R,F]))).map(function(de,xe){return de(xe)}),B=_(e.rules.token("identifier","table"),_.capture(q([N,R]))).map(function(de){return t.table(de)}),I=D("b",t.bold),L=D("i",t.italic),U=D("u",t.underline),G=D("strike",t.strikethrough),H=D("all-caps",t.allCaps),V=D("small-caps",t.smallCaps),K=_(e.rules.token("identifier","highlight"),e.rules.sequence.capture(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.token("identifier","color"),e.rules.tokenOfType("equals"),e.rules.sequence.capture(y),e.rules.tokenOfType("close-square-bracket")).head()))).map(function(de){return t.highlight({color:de.valueOrElse(void 0)})}),ae=D("comment-reference",t.commentReference),te=_(e.rules.token("identifier","br"),_.cut(),e.rules.tokenOfType("open-square-bracket"),e.rules.token("identifier","type"),e.rules.tokenOfType("equals"),_.capture(y),e.rules.tokenOfType("close-square-bracket")).map(function(de){switch(de){case"line":return t.lineBreak;case"page":return t.pageBreak;case"column":return t.columnBreak}});return e.rules.firstOf("element type",$,B,I,L,U,G,H,V,K,ae,te)}function d(_){return A(h(),_)}function h(){var _=e.rules.sequence.capture,D=e.rules.tokenOfType("whitespace"),C=e.rules.then(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("colon"),e.rules.token("identifier","fresh"))),function(j){return j.map(function(){return!0}).valueOrElse(!1)}),k=e.rules.then(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("colon"),e.rules.token("identifier","separator"),e.rules.tokenOfType("open-paren"),_(y),e.rules.tokenOfType("close-paren")).head()),function(j){return j.valueOrElse("")}),T=e.rules.oneOrMoreWithSeparator(f,e.rules.tokenOfType("choice")),N=e.rules.sequence(_(T),_(e.rules.zeroOrMore(b)),_(C),_(k)).map(function(j,R,P,F){var q={},$={};return R.forEach(function(B){B.append&&q[B.name]?q[B.name]+=" "+B.value:q[B.name]=B.value}),P&&($.fresh=!0),F&&($.separator=F),r.element(j,q,$)});return e.rules.firstOf("html path",e.rules.then(e.rules.tokenOfType("bang"),function(){return r.ignore}),e.rules.then(e.rules.zeroOrMoreWithSeparator(N,e.rules.sequence(D,e.rules.tokenOfType("gt"),D)),r.elements))}var f=e.rules.then(e.rules.tokenOfType("identifier"),m),p=e.rules.tokenOfType("integer"),y=e.rules.then(e.rules.tokenOfType("string"),m),g={n:`
`,r:"\r",t:"	"};function m(_){return _.replace(/\\(.)/g,function(D,C){return g[C]||C})}var v=e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.sequence.capture(f),e.rules.tokenOfType("equals"),e.rules.sequence.capture(y),e.rules.tokenOfType("close-square-bracket")).map(function(_,D){return{name:_,value:D,append:!1}}),x=e.rules.sequence(e.rules.tokenOfType("dot"),e.rules.sequence.cut(),e.rules.sequence.capture(f)).map(function(_){return{name:"class",value:_,append:!0}}),b=e.rules.firstOf("attribute or class",v,x);function A(_,D){var C=i(D),k=e.Parser(),T=k.parseTokens(_,C);return T.isSuccess()?a.success(T.value()):new a.Result(null,[a.warning(w(D,T))])}function w(_,D){return"Did not understand this style mapping, so ignored it: "+_+`
`+D.errors().map(S).join(`
`)}function S(_){return"Error was at character number "+_.characterNumber()+": Expected "+_.expected+" but got "+_.actual}var E=o();return vd}var xd={},F5;function xfe(){if(F5)return xd;F5=1,xd.readOptions=r;var n=On,e=xd._defaultStyleMap=["p.Heading1 => h1:fresh","p.Heading2 => h2:fresh","p.Heading3 => h3:fresh","p.Heading4 => h4:fresh","p.Heading5 => h5:fresh","p.Heading6 => h6:fresh","p[style-name='Heading 1'] => h1:fresh","p[style-name='Heading 2'] => h2:fresh","p[style-name='Heading 3'] => h3:fresh","p[style-name='Heading 4'] => h4:fresh","p[style-name='Heading 5'] => h5:fresh","p[style-name='Heading 6'] => h6:fresh","p[style-name='heading 1'] => h1:fresh","p[style-name='heading 2'] => h2:fresh","p[style-name='heading 3'] => h3:fresh","p[style-name='heading 4'] => h4:fresh","p[style-name='heading 5'] => h5:fresh","p[style-name='heading 6'] => h6:fresh","p.Heading => h1:fresh","p[style-name='Heading'] => h1:fresh","r[style-name='Strong'] => strong","p[style-name='footnote text'] => p:fresh","r[style-name='footnote reference'] =>","p[style-name='endnote text'] => p:fresh","r[style-name='endnote reference'] =>","p[style-name='annotation text'] => p:fresh","r[style-name='annotation reference'] =>","p[style-name='Footnote'] => p:fresh","r[style-name='Footnote anchor'] =>","p[style-name='Endnote'] => p:fresh","r[style-name='Endnote anchor'] =>","p:unordered-list(1) => ul > li:fresh","p:unordered-list(2) => ul|ol > li > ul > li:fresh","p:unordered-list(3) => ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:ordered-list(1) => ol > li:fresh","p:ordered-list(2) => ul|ol > li > ol > li:fresh","p:ordered-list(3) => ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","r[style-name='Hyperlink'] =>","p[style-name='Normal'] => p:fresh","p.Body => p:fresh","p[style-name='Body'] => p:fresh"],t=xd._standardOptions={externalFileAccess:!1,transformDocument:a,includeDefaultStyleMap:!0,includeEmbeddedStyleMap:!0};function r(s){return s=s||{},n.extend({},t,s,{customStyleMap:i(s.styleMap),readStyleMap:function(){var o=this.customStyleMap;return this.includeEmbeddedStyleMap&&(o=o.concat(i(this.embeddedStyleMap))),this.includeDefaultStyleMap&&(o=o.concat(e)),o}})}function i(s){return s?n.isString(s)?s.split(`
`).map(function(o){return o.trim()}).filter(function(o){return o!==""&&o.charAt(0)!=="#"}):s:[]}function a(s){return s}return xd}var Dw={},L5;function bfe(){if(L5)return Dw;L5=1;var n=Ao(),e=w7();Dw.openZip=t;function t(r){return r.arrayBuffer?n.resolve(e.openArrayBuffer(r.arrayBuffer)):n.reject(new Error("Could not find file in options"))}return Dw}var jw={},U5;function wfe(){if(U5)return jw;U5=1;var n=R0(),e=I0();jw.element=t;function t(r){return function(i){return e.elementWithTag(n.element(r),[i])}}return jw}var B5;function Afe(){if(B5)return Ti;B5=1;var n=On,e=nfe(),t=rfe(),r=lfe().DocumentConverter,i=cfe().convertElementToRawText,a=vfe().readStyle,s=xfe().readOptions,o=bfe(),c=_s().Result;Ti.convertToHtml=u,Ti.convertToMarkdown=d,Ti.convert=h,Ti.extractRawText=g,Ti.images=T7(),Ti.transforms=D7(),Ti.underline=wfe(),Ti.embedStyleMap=m,Ti.readEmbeddedStyleMap=f;function u(v,x){return h(v,x)}function d(v,x){var b=Object.create(x||{});return b.outputFormat="markdown",h(v,b)}function h(v,x){return x=s(x),o.openZip(v).tap(function(b){return t.readStyleMap(b).then(function(A){x.embeddedStyleMap=A})}).then(function(b){return e.read(b,v,x).then(function(A){return A.map(x.transformDocument)}).then(function(A){return p(A,x)})})}function f(v){return o.openZip(v).then(t.readStyleMap)}function p(v,x){var b=y(x.readStyleMap()),A=n.extend({},x,{styleMap:b.value}),w=new r(A);return v.flatMapThen(function(S){return b.flatMapThen(function(E){return w.convertToHtml(S)})})}function y(v){return c.combine((v||[]).map(a)).map(function(x){return x.filter(function(b){return!!b})})}function g(v){return o.openZip(v).then(e.read).then(function(x){return x.map(i)})}function m(v,x){return o.openZip(v).tap(function(b){return t.writeStyleMap(b,x)}).then(function(b){return b.toArrayBuffer()}).then(function(b){return{toArrayBuffer:function(){return b},toBuffer:function(){return Buffer.from(b)}}})}return Ti.styleMapping=function(){throw new Error(`Use a raw string instead of mammoth.styleMapping e.g. "p[style-name='Title'] => h1" instead of mammoth.styleMapping("p[style-name='Title'] => h1")`)},Ti}var Sfe=Afe();const Or=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),$S=[.001,0,0,.001,0,0],Tw=1.35,ci={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},$s={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Jh="pdfjs_internal_editor_",vt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Efe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},zS={TRIANGLES:1,LATTICE:2},qn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},lm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},In={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},tc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},M0={ERRORS:0,WARNINGS:1,INFOS:5},Zh={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},bd={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},_fe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let F0=M0.WARNINGS;function Dfe(n){Number.isInteger(n)&&(F0=n)}function jfe(){return F0}function L0(n){F0>=M0.INFOS&&console.info(`Info: ${n}`)}function gt(n){F0>=M0.WARNINGS&&console.warn(`Warning: ${n}`)}function tn(n){throw new Error(n)}function Nt(n,e){n||tn(e)}function Tfe(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function I7(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=Pfe(n)}catch{}const r=e?URL.parse(n,e):URL.parse(n);return Tfe(r)?r:null}function R7(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&I7(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function yt(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Ul=(function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e})();class $5 extends Ul{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Cw extends Ul{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class qS extends Ul{constructor(e){super(e,"InvalidPDFException")}}class jg extends Ul{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class Cfe extends Ul{constructor(e){super(e,"FormatError")}}class oo extends Ul{constructor(e){super(e,"AbortException")}}function M7(n){(typeof n!="object"||n?.length===void 0)&&tn("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),s=n.subarray(i,a);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function Sf(n){typeof n!="string"&&tn("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function Nfe(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function kfe(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Ofe(){try{return new Function(""),!0}catch{return!1}}class Gn{static get isLittleEndian(){return yt(this,"isLittleEndian",kfe())}static get isEvalSupported(){return yt(this,"isEvalSupported",Ofe())}static get isOffscreenCanvasSupported(){return yt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return yt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return yt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return yt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return yt(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return yt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Nw=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class Ge{static makeHexColor(e,t,r){return`#${Nw[e]}${Nw[t]}${Nw[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,r=0){const i=e[r],a=e[r+1];e[r]=i*t[0]+a*t[2]+t[4],e[r+1]=i*t[1]+a*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const i=t[0],a=t[1],s=t[2],o=t[3],c=t[4],u=t[5];for(let d=0;d<6;d+=2){const h=e[r+d],f=e[r+d+1];e[r+d]=h*i+f*s+c,e[r+d+1]=h*a+f*o+u}}static applyInverseTransform(e,t){const r=e[0],i=e[1],a=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/a,e[1]=(-r*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/a}static axialAlignedBoundingBox(e,t,r){const i=t[0],a=t[1],s=t[2],o=t[3],c=t[4],u=t[5],d=e[0],h=e[1],f=e[2],p=e[3];let y=i*d+c,g=y,m=i*f+c,v=m,x=o*h+u,b=x,A=o*p+u,w=A;if(a!==0||s!==0){const S=a*d,E=a*f,_=s*h,D=s*p;y+=_,v+=_,m+=D,g+=D,x+=S,w+=S,A+=E,b+=E}r[0]=Math.min(r[0],y,m,g,v),r[1]=Math.min(r[1],x,A,b,w),r[2]=Math.max(r[2],y,m,g,v),r[3]=Math.max(r[3],x,A,b,w)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],i=e[1],a=e[2],s=e[3],o=r**2+i**2,c=r*a+i*s,u=a**2+s**2,d=(o+u)/2,h=Math.sqrt(d**2-(o*u-c**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>s?null:[r,a,i,s]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,i,a){a[0]=Math.min(a[0],e,r),a[1]=Math.min(a[1],t,i),a[2]=Math.max(a[2],e,r),a[3]=Math.max(a[3],t,i)}static#e(e,t,r,i,a,s,o,c,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,p=f*u,y=h*(h*(h*e+3*u*t)+3*f*r)+p*i,g=h*(h*(h*a+3*u*s)+3*f*o)+p*c;d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],y),d[3]=Math.max(d[3],g)}static#t(e,t,r,i,a,s,o,c,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&this.#e(e,t,r,i,a,s,o,c,-h/d,f);return}const p=d**2-4*h*u;if(p<0)return;const y=Math.sqrt(p),g=2*u;this.#e(e,t,r,i,a,s,o,c,(-d+y)/g,f),this.#e(e,t,r,i,a,s,o,c,(-d-y)/g,f)}static bezierBoundingBox(e,t,r,i,a,s,o,c,u){u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,c),this.#t(e,r,a,o,t,i,s,c,3*(-e+3*(r-a)+o),6*(e-2*r+a),3*(r-e),u),this.#t(e,r,a,o,t,i,s,c,3*(-t+3*(i-s)+c),6*(t-2*i+s),3*(i-t),u)}}function Pfe(n){return decodeURIComponent(escape(n))}let kw=null,z5=null;function Ife(n){return kw||(kw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,z5=new Map([["ﬅ","ſt"]])),n.replaceAll(kw,(e,t,r)=>t?t.normalize("NFKC"):z5.get(r))}function F7(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),M7(n)}const mc="pdfjs_internal_id_";function Rfe(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,i,...a]=t;if(!n(r)&&!Number.isInteger(r)||!e(i))return!1;const s=a.length;let o=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;o=!1;break;default:return!1}for(const c of a)if(!(typeof c=="number"||o&&c===null))return!1;return!0}function Pr(n,e,t){return Math.min(Math.max(n,e),t)}function L7(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(M7(n))}function Mfe(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Sf(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class Qh{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(a){if(!a)return;let s=null;const o=a.name;if(o==="#text")s=a.value;else if(Qh.shouldBuildText(o))a?.attributes?.textContent?s=a.attributes.textContent:a.value&&(s=a.value);else return;if(s!==null&&t.push({str:s}),!!a.children)for(const c of a.children)i(c)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class U7{static setupStorage(e,t,r,i,a){const s=i.getValue(t,{value:null});switch(r.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),a==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(s.value===r.attributes.xfaOn?e.setAttribute("checked",!0):s.value===r.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",o=>{i.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),a==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(const o of r.children)o.attributes.value===s.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:a}){const{attributes:s}=t,o=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(const[c,u]of Object.entries(s))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}o&&a.addLinkAttributes(e,s.href,s.newWindow),r&&s.dataId&&this.setupStorage(e,s.dataId,t,r)}static render(e){const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,a=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:a,linkService:r});const o=a!=="richText",c=e.div;if(c.append(s),e.viewport){const h=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=h}o&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const h=document.createTextNode(i.value);s.append(h),o&&Qh.shouldBuildText(i.name)&&u.push(h)}return{textDivs:u}}const d=[[i,-1,s]];for(;d.length>0;){const[h,f,p]=d.at(-1);if(f+1===h.children.length){d.pop();continue}const y=h.children[++d.at(-1)[1]];if(y===null)continue;const{name:g}=y;if(g==="#text"){const v=document.createTextNode(y.value);u.push(v),p.append(v);continue}const m=y?.attributes?.xmlns?document.createElementNS(y.attributes.xmlns,g):document.createElement(g);if(p.append(m),y.attributes&&this.setAttributes({html:m,element:y,storage:t,intent:a,linkService:r}),y.children?.length>0)d.push([y,-1,m]);else if(y.value){const v=document.createTextNode(y.value);o&&Qh.shouldBuildText(g)&&u.push(v),m.append(v)}}for(const h of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const es="http://www.w3.org/2000/svg";class vu{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ef(n,e="text"){if(Id(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class _f{constructor({viewBox:e,userUnit:t,scale:r,rotation:i,offsetX:a=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=i,this.offsetX=a,this.offsetY=s,r*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,h,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:d=-1,h=0,f=0,p=1;break;case 90:d=0,h=1,f=1,p=0;break;case 270:d=0,h=-1,f=-1,p=0;break;case 0:d=1,h=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let y,g,m,v;d===0?(y=Math.abs(u-e[1])*r+a,g=Math.abs(c-e[0])*r+s,m=(e[3]-e[1])*r,v=(e[2]-e[0])*r):(y=Math.abs(c-e[0])*r+a,g=Math.abs(u-e[1])*r+s,m=(e[2]-e[0])*r,v=(e[3]-e[1])*r),this.transform=[d*r,h*r,f*r,p*r,y-d*r*c-f*r*u,g-h*r*c-p*r*u],this.width=m,this.height=v}get rawDims(){const e=this.viewBox;return yt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new _f({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){const r=[e,t];return Ge.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];Ge.applyTransform(t,this.transform);const r=[e[2],e[3]];return Ge.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return Ge.applyInverseTransform(r,this.transform),r}}class FD extends Ul{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function U0(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function LD(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Ffe(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function Lfe(n,e="document.pdf"){if(typeof n!="string")return e;if(U0(n))return gt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const i=o=>{try{let c=decodeURIComponent(o);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:o):c}catch{return o}},a=/\.pdf$/i,s=r.pathname.split("/").at(-1);if(a.test(s))return i(s);if(r.searchParams.size>0){const o=Array.from(r.searchParams.values()).reverse();for(const u of o)if(a.test(u))return i(u);const c=Array.from(r.searchParams.keys()).reverse();for(const u of c)if(a.test(u))return i(u)}if(r.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return i(c[0])}return e}class q5{started=Object.create(null);times=[];time(e){e in this.started&&gt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||gt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:a}of this.times)e.push(`${r.padEnd(t)} ${a-i}ms
`);return e.join("")}}function Id(n,e){const t=e?URL.parse(n,e):URL.parse(n);return t?.protocol==="http:"||t?.protocol==="https:"}function Gi(n){n.preventDefault()}function _n(n){n.preventDefault(),n.stopPropagation()}function Ufe(n){console.log("Deprecated API usage: "+n)}class WS{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(s+=d,o+=h):u==="+"&&(s-=d,o-=h),new Date(Date.UTC(r,i,a,s,o,c))}}function Bfe(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,a=[0,0,parseInt(r),parseInt(i)];return new _f({viewBox:a,userUnit:1,scale:e,rotation:t})}function Df(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(gt(`Not a valid color format: "${n}"`),[0,0,0])}function $fe(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,Df(r))}e.remove()}function gn(n){const{a:e,b:t,c:r,d:i,e:a,f:s}=n.getTransform();return[e,t,r,i,a,s]}function va(n){const{a:e,b:t,c:r,d:i,e:a,f:s}=n.getTransform().invertSelf();return[e,t,r,i,a,s]}function bl(n,e,t=!1,r=!0){if(e instanceof _f){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:s}=n,o=Gn.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${a}px`,d=o?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(s.width=d,s.height=h):(s.width=h,s.height=d)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Ba{constructor(){const{pixelRatio:e}=Ba;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,i,a=-1){let s=1/0,o=1/0,c=1/0;r=Ba.capPixels(r,a),r>0&&(s=Math.sqrt(r/(e*t))),i!==-1&&(o=i/e,c=i/t);const u=Math.min(s,o,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const HS=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class zfe{static get isDarkMode(){return yt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class qfe{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),yt(this,"commentForegroundColor",Df(r))}}function Wfe(n,e,t,r){r=Math.min(Math.max(r??1,0),1);const i=255*(1-r);return n=Math.round(n*r+i),e=Math.round(e*r+i),t=Math.round(t*r+i),[n,e,t]}function W5(n,e){const t=n[0]/255,r=n[1]/255,i=n[2]/255,a=Math.max(t,r,i),s=Math.min(t,r,i),o=(a+s)/2;if(a===s)e[0]=e[1]=0;else{const c=a-s;switch(e[1]=o<.5?c/(a+s):c/(2-a-s),a){case t:e[0]=((r-i)/c+(r<i?6:0))*60;break;case r:e[0]=((i-t)/c+2)*60;break;case i:e[0]=((t-r)/c+4)*60;break}}e[2]=o}function VS(n,e){const t=n[0],r=n[1],i=n[2],a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(t/60%2-1)),o=i-a/2;switch(Math.floor(t/60)){case 0:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 1:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 2:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 3:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 4:e[0]=s+o,e[1]=o,e[2]=a+o;break;case 5:case 6:e[0]=a+o,e[1]=o,e[2]=s+o;break}}function H5(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function V5(n,e,t){VS(n,t),t.map(H5);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];VS(e,t),t.map(H5);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}const G5=new Map;function Hfe(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=G5.get(t);if(r)return r;const i=new Float32Array(9),a=i.subarray(0,3),s=i.subarray(3,6);W5(n,s);const o=i.subarray(6,9);W5(e,o);const c=o[2]<.5,u=c?12:4.5;if(s[2]=c?Math.sqrt(s[2]):1-Math.sqrt(1-s[2]),V5(s,o,a)<u){let d,h;c?(d=s[2],h=1):(d=0,h=s[2]);const f=.005;for(;h-d>f;){const p=s[2]=(d+h)/2;c===V5(s,o,a)<u?d=p:h=p}s[2]=c?h:d}return VS(s,a),r=Ge.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),G5.set(t,r),r}function B7({html:n,dir:e,className:t},r){const i=document.createDocumentFragment();if(typeof n=="string"){const a=document.createElement("p");a.dir=e||"auto";const s=n.split(/(?:\r\n?|\n)/);for(let o=0,c=s.length;o<c;++o){const u=s[o];a.append(document.createTextNode(u)),o<c-1&&a.append(document.createElement("br"))}i.append(a)}else U7.render({xfaHtml:n,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",t),r.append(i)}function $7(n){const e=new Path2D;if(!n)return e;for(let t=0,r=n.length;t<r;)switch(n[t++]){case bd.moveTo:e.moveTo(n[t++],n[t++]);break;case bd.lineTo:e.lineTo(n[t++],n[t++]);break;case bd.curveTo:e.bezierCurveTo(n[t++],n[t++],n[t++],n[t++],n[t++],n[t++]);break;case bd.quadraticCurveTo:e.quadraticCurveTo(n[t++],n[t++],n[t++],n[t++]);break;case bd.closePath:e.closePath();break;default:gt(`Unrecognized drawing path operator: ${n[t-1]}`);break}return e}class Gd{#e=null;#t=null;#r;#n=null;#s=null;#a=null;#i=null;#o=null;static#c=null;constructor(e){this.#r=e,Gd.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#r._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Gi,{signal:t}),e.addEventListener("pointerdown",Gd.#l,{signal:t}));const r=this.#n=document.createElement("div");r.className="buttons",e.append(r);const i=this.#r.toolbarPosition;if(i){const{style:a}=e,s=this.#r._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#r._focusEventsAllowed=!1,_n(e)}#d(e){this.#r._focusEventsAllowed=!0,_n(e)}#f(e){const t=this.#r._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Gi,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#r,r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",Gd.#c[e]),this.#f(r)&&r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#n.append(r)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#g),this.#s=e}addComment(e,t=null){if(this.#a)return;const r=e.renderForToolbar();if(!r)return;this.#f(r);const i=this.#i=this.#g;t?(this.#n.insertBefore(r,t),this.#n.insertBefore(i,t)):this.#n.append(r,i),this.#a=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#r);this.#f(t),this.#n.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#a?.removeToolbarCommentButton(),this.#a=null,this.#i?.remove(),this.#i=null)}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,r){if(!t&&e==="comment")return;const i=this.#n.querySelector(r);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Vfe{#e=null;#t=null;#r;constructor(e){this.#r=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#r._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Gi,{signal:t});const r=this.#e=document.createElement("div");return r.className="buttons",e.append(r),this.#r.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#r.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#r.highlightSelection("floating_button")}),e}#s(e,t){let r=0,i=0;for(const a of e){const s=a.y+a.height;if(s<r)continue;const o=a.x+(t?a.width:0);if(s>r){i=o,r=s;continue}t?o>i&&(i=o):o<i&&(i=o)}return[t?1-i:i,r]}show(e,t,r){const[i,a]=this.#s(t,r),{style:s}=this.#t||=this.#n();e.append(this.#t),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#a(e,t,r,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",t);const s=document.createElement("span");a.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",r);const o=this.#r._signal;o instanceof AbortSignal&&!o.aborted&&(a.addEventListener("contextmenu",Gi,{signal:o}),a.addEventListener("click",i,{signal:o})),this.#e.append(a)}}function z7(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}class $t{static#e=NaN;static#t=null;static#r=NaN;static#n=null;static initializeAndAddPointerId(e){($t.#t||=new Set).add(e)}static setPointer(e,t){$t.#e||=t,$t.#n??=e}static setTimeStamp(e){$t.#r=e}static isSamePointerId(e){return $t.#e===e}static isSamePointerIdOrRemove(e){return $t.#e===e?!0:($t.#t?.delete(e),!1)}static isSamePointerType(e){return $t.#n===e}static isInitializedAndDifferentPointerType(e){return $t.#n!==null&&!$t.isSamePointerType(e)}static isSameTimeStamp(e){return $t.#r===e}static isUsingMultiplePointers(){return $t.#t?.size>=1}static clearPointerType(){$t.#n=null}static clearPointerIds(){$t.#e=NaN,$t.#t=null}static clearTimeStamp(){$t.#r=NaN}}class Gfe{#e=0;get id(){return`${Jh}${this.#e++}`}}class UD{#e=F7();#t=0;#r=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return yt(this,"_isSVGFittingCanvas",a)}async#n(e,t){this.#r||=new Map;let r=this.#r.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(r.url=t,i=await Ef(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=UD._isSVGFittingCanvas,s=new FileReader,o=new Image,c=new Promise((u,d)=>{o.onload=()=>{r.bitmap=o,r.isSvg=!0,u()},s.onload=async()=>{const h=r.svgUrl=s.result;o.src=await a?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=s.onerror=d});s.readAsDataURL(i),await c}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){gt(i),r=null}return this.#r.set(e,r),r&&this.#r.set(r.id,r),r}async getFromFile(e){const{lastModified:t,name:r,size:i,type:a}=e;return this.#n(`${t}_${r}_${i}_${a}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const r=await t;return this.#n(e,r)}async getFromId(e){this.#r||=new Map;const t=this.#r.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#r||=new Map;let r=this.#r.get(e);if(r?.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#r.set(e,r),this.#r.set(r.id,r),r}getSvgUrl(e){const t=this.#r.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#r||=new Map;const t=this.#r.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}let Yfe=class{#e=[];#t=!1;#r;#n=-1;constructor(e=128){this.#r=e}add({cmd:e,undo:t,post:r,mustExec:i,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:o=!1}){if(i&&e(),this.#t)return;const c={cmd:e,undo:t,post:r,type:a};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(c);return}if(s&&this.#e[this.#n].type===a){o&&(c.undo=this.#e[this.#n].undo),this.#e[this.#n]=c;return}const u=this.#n+1;u===this.#r?this.#e.splice(0,1):(this.#n=u,u<this.#e.length&&this.#e.splice(u)),this.#e.push(c)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}};class jf{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Gn.platform;for(const[r,i,a={}]of e)for(const s of r){const o=s.startsWith("mac+");t&&o?(this.callbacks.set(s.slice(4),{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1))):!t&&!o&&(this.callbacks.set(s,{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(this.#e(t));if(!r)return;const{callback:i,options:{bubbles:a=!1,args:s=[],checker:o=null}}=r;o&&!o(e,t)||(i.bind(e,...s,t)(),a||_n(t))}}class BD{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return $fe(e),yt(this,"_colors",e)}convert(e){const t=Df(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((a,s)=>a===t[s]))return BD._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?Ge.makeHexColor(...t):e}}class lo{#e=new AbortController;#t=null;#r=null;#n=new Map;#s=new Map;#a=null;#i=null;#o=null;#c=new Yfe;#l=null;#h=null;#d=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#x=!1;#v=!1;#_=null;#S=null;#w=null;#j=null;#b=!1;#E=null;#N=new Gfe;#T=!1;#C=!1;#F=!1;#O=null;#I=null;#L=null;#R=null;#W=null;#D=vt.NONE;#A=new Set;#P=null;#U=null;#$=null;#G=null;#V=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#M=null;#H=null;#Z=null;#Q=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=lo.prototype,t=s=>s.#H.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),r=(s,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return yt(this,"_keyboardManager",new jf([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&s.#H.contains(o)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&s.#H.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}constructor(e,t,r,i,a,s,o,c,u,d,h,f,p,y,g,m){const v=this._signal=this.#e.signal;this.#H=e,this.#Z=t,this.#Q=r,this.#a=i,this.#l=a,this.#U=s,this.#V=c,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:v}),window.addEventListener("pointerdown",()=>{this.#C=!0},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{this.#C=!1},{capture:!0,signal:v}),this.#se(),this.#he(),this.#te(),this.#i=c.annotationStorage,this.#_=c.filterFactory,this.#$=u,this.#j=d||null,this.#y=h,this.#x=f,this.#v=p,this.#W=y||null,this.viewParameters={realScale:vu.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=m!==!1,a?.setSidebarUiManager(this)}destroy(){this.#B?.resolve(),this.#B=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#s.values())e.destroy();this.#s.clear(),this.#n.clear(),this.#p.clear(),this.#R?.clear(),this.#t=null,this.#A.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#E?.hide(),this.#E=null,this.#L?.destroy(),this.#L=null,this.#r=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#M&&(clearTimeout(this.#M),this.#M=null),this._editorUndoBar?.destroy(),this.#V=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#W}get useNewAltTextFlow(){return this.#x}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return yt(this,"hcmFilter",this.#$?this.#_.addHCMFilter(this.#$.foreground,this.#$.background):"none")}get direction(){return yt(this,"direction",getComputedStyle(this.#H).direction)}get _highlightColors(){return yt(this,"_highlightColors",this.#j?new Map(this.#j.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return yt(this,"highlightColors",null);const t=new Map,r=!!this.#$;for(const[i,a]of e){const s=i.endsWith("_HCM");if(r&&s){t.set(i.replace("_HCM",""),a);continue}!r&&!s&&t.set(i,a)}return yt(this,"highlightColors",t)}get highlightColorNames(){return yt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#L=e}editAltText(e,t=!1){this.#a?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,r,i){this.#l?.showDialog(this,e,t,r,i)}selectComment(e,t){this.#s.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,r=void 0){this.#l?.toggleCommentPopup(e,t,r)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#s.has(e-1))return;const{resolve:t,promise:r}=Promise.withResolvers(),i=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await r}getSignature(e){this.#U?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#U}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#v=t)}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#H.focus()}findParent(e,t){for(const r of this.#s.values()){const{x:i,y:a,width:s,height:o}=r.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=a&&t<=a+o)return r}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*vu.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#J({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of this.#s.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e="",t=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:o}=r,c=r.toString(),d=this.#J(r).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;r.empty();const f=this.#ee(d),p=this.#D===vt.NONE,y=()=>{const g=f?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:o,text:c});p&&this.showAllEditors("highlight",!0,!0),t&&g?.editComment()};if(p){this.switchToMode(vt.HIGHLIGHT,y);return}y()}commentSelection(e=""){this.highlightSelection(e,!0)}#ie(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#J(e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(this.#E||=new Vfe(this),this.#E.show(r,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#i)return null;const t=`${Jh}${e}`,r=this.#i.getRawValue(t);return r&&this.#i.remove(t),r}addToAnnotationStorage(e){!e.isEmpty()&&this.#i&&!this.#i.has(e.id)&&this.#i.setValue(e.id,e)}a11yAlert(e,t=null){const r=this.#Q;r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}#ae(){const e=document.getSelection();if(!e||e.isCollapsed){this.#P&&(this.#E?.hide(),this.#P=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#P)return;const i=this.#J(e).closest(".textLayer");if(!i){this.#P&&(this.#E?.hide(),this.#P=null,this.#k({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#P=t,this.#k({hasSelectedText:!0}),!(this.#D!==vt.HIGHLIGHT&&this.#D!==vt.NONE)&&(this.#D===vt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#b=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#D===vt.HIGHLIGHT?this.#ee(i):null;if(a?.toggleDrawing(),this.#C){const s=new AbortController,o=this.combinedSignal(s),c=u=>{u.type==="pointerup"&&u.button!==0||(s.abort(),a?.toggleDrawing(!0),u.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})}else a?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(e=""){this.#D===vt.HIGHLIGHT?this.highlightSelection(e):this.#y&&this.#ie()}#se(){document.addEventListener("selectionchange",this.#ae.bind(this),{signal:this._signal})}#oe(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#le(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#b&&(this.#b=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#A)if(t.div.contains(e)){this.#I=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#I)return;const[e,t]=this.#I;this.#I=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#O)return;this.#O=new AbortController;const e=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ce(){this.#O?.abort(),this.#O=null}#ue(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#de(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.setEditingState(!0)}removeEditListeners(){this.#ce(),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of this.#u)if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of this.#u)if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of this.#A){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(a.type)){s.paste(a,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(a){gt(`paste: "${a.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const c of r){const u=await i.deserialize(c);if(!u)return;a.push(u)}const s=()=>{for(const c of a)this.#ne(c);this.#re(a)},o=()=>{for(const c of a)c.remove()};this.addCommands({cmd:s,undo:o,mustExec:!0})}catch(a){gt(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#D!==vt.NONE&&!this.isEditorHandlingKeyboard&&lo._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#b&&(this.#b=!1,this.#K("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#k(e){Object.entries(e).some(([r,i])=>this.#Y[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)}),this.#D===vt.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#q([[Ct.HIGHLIGHT_FREE,!0]]))}#q(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#oe(),this.#ue(),this.#k({isEditing:this.#D!==vt.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#le(),this.#de(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#q(t.defaultPropertiesToUpdate)}}getId(){return this.#N.id}get currentLayer(){return this.#s.get(this.#f)}getLayer(e){return this.#s.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#s.set(e.pageIndex,e),this.#T?e.enable():e.disable()}removeLayer(e){this.#s.delete(e.pageIndex)}async updateMode(e,t=null,r=!1,i=!1,a=!1,s=!1){if(this.#D!==e&&!(this.#B&&(await this.#B.promise,!this.#B))){if(this.#B=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#D===vt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#D=e,e===vt.NONE){this.setEditingState(!1),this.#pe();for(const o of this.#n.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#B.resolve();return}for(const o of this.#n.values())o.addStandaloneCommentButton();e===vt.SIGNATURE&&await this.#U?.loadSignatures(),r&&$t.clearPointerType(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const o of this.#s.values())o.updateMode(e);if(e===vt.POPUP){this.#r||=await this.#V.getAnnotationsByType(new Set(this.#u.map(u=>u._editorType)));const o=new Set,c=[];for(const u of this.#n.values()){const{annotationElementId:d,hasComment:h,deleted:f}=u;d&&o.add(d),h&&!f&&c.push(u.getData())}for(const u of this.#r){const{id:d,popupRef:h,contentsObj:f}=u;h&&f?.str&&!o.has(d)&&!this.#g.has(d)&&c.push(u)}this.#l?.showSidebar(c)}if(!t){i&&this.addNewEditorFromKeyboard(),this.#B.resolve();return}for(const o of this.#n.values())o.uid===t?(this.setSelected(o),s?o.editComment():a?o.enterInEditMode():o.focus()):o.unselect();this.#B.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#D&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case Ct.CREATE:this.currentLayer.addNewEditor(t);return;case Ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#G||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of this.#A)r.updateParams(e,t);else for(const r of this.#u)r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){for(const a of this.#n.values())a.editorType===e&&a.show(t);(this.#G?.get(Ct.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#q([[Ct.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#F!==e){this.#F=e;for(const t of this.#s.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#T){this.#T=!0;const e=[];for(const t of this.#s.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#pe(){if(this.unselectAll(),this.#T){this.#T=!1;for(const e of this.#s.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#R?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#i?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ne(e){const t=this.#s.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#q(e.propertiesToUpdate))}get#me(){let e=null;for(e of this.#A);return e}updateUI(e){this.#me===e&&this.#q(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#q(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#A.has(e)){this.#A.delete(e),e.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#A.add(e),e.select(),this.#q(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),this.#d?.commitOrRemove();for(const t of this.#A)t!==e&&t.unselect();this.#A.clear(),this.#A.add(e),e.select(),this.#q(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(e){return this.#A.has(e)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(e){e.unselect(),this.#A.delete(e),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#A.size!==0}get isEnterHandled(){return this.#A.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(e){this.#c.add(e),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(e){this.#c.cleanType(e)}#X(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#A],r=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const a of t)this.#ne(a)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#re(e){for(const t of this.#A)t.unselect();this.#A.clear();for(const t of e)t.isEmpty()||(this.#A.add(t),t.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#A)e.commit();this.#re(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#D!==vt.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#A)e.unselect();this.#A.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=e,this.#z[1]+=t;const[i,a]=this.#z,s=[...this.#A],o=1e3;this.#M&&clearTimeout(this.#M),this.#M=setTimeout(()=>{this.#M=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const c of s)this.#n.has(c.id)&&(c.translateInPage(i,a),c.translationDone())},undo:()=>{for(const c of s)this.#n.has(c.id)&&(c.translateInPage(-i,-a),c.translationDone())},mustExec:!1})},o);for(const c of s)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#A)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let t=!1;for(const[{x:i,y:a,pageIndex:s},o]of e)o.newX=i,o.newY=a,o.newPageIndex=s,t||=i!==o.savedX||a!==o.savedY||s!==o.savedPageIndex;if(!t)return!1;const r=(i,a,s,o)=>{if(this.#n.has(i.id)){const c=this.#s.get(o);c?i._setParentAndPosition(c,a,s):(i.pageIndex=o,i.x=a,i.y=s)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:s,newPageIndex:o}]of e)r(i,a,s,o)},undo:()=>{for(const[i,{savedX:a,savedY:s,savedPageIndex:o}]of e)r(i,a,s,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#m)for(const r of this.#m.keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#A.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#D}isEditingMode(){return this.#D!==vt.NONE}get imageManager(){return yt(this,"imageManager",new UD)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:i,width:a,height:s}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,d,h,f)=>({x:(d-i)/s,y:1-(u+h-r)/a,width:f/s,height:h/a});break;case"180":o=(u,d,h,f)=>({x:1-(u+h-r)/a,y:1-(d+f-i)/s,width:h/a,height:f/s});break;case"270":o=(u,d,h,f)=>({x:1-(d+f-i)/s,y:(u-r)/a,width:f/s,height:h/a});break;default:o=(u,d,h,f)=>({x:(u-r)/a,y:(d-i)/s,width:h/a,height:f/s});break}const c=[];for(let u=0,d=t.rangeCount;u<d;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:p,width:y,height:g}of h.getClientRects())y===0||g===0||c.push(o(f,p,y,g))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const r=this.#i.getRawValue(t);r&&(this.#D===vt.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){const i=this.#R?.get(e);i&&(i.setCanvas(t,r),this.#R.delete(e))}addMissingCanvas(e,t){(this.#R||=new Map).set(e,t)}}class _a{#e=null;#t=!1;#r=null;#n=null;#s=null;#a=null;#i=!1;#o=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,_a.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){_a._l10n??=e}async render(){const e=this.#r=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",_a.#f.missing),t.setAttribute("data-l10n-id",_a.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#c._uiManager._signal;e.addEventListener("contextmenu",Gi,{signal:r}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#i=!0,i(a))},{signal:r}),await this.#m(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#r&&(this.#r.focus({focusVisible:this.#i}),this.#i=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await _a._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:a=!1}){r&&(this.#l=r,this.#h=i),!(this.#e===e&&this.#t===t)&&(a||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#r&&(!e&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#r?.remove(),this.#r=null,this.#n=null,this.#s=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#r;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",_a.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",_a.#f[`${this.#g}-label`]),!this.#e){this.#s?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#s;if(!t){this.#s=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const i=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#s.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:a}),e.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#s?.classList.remove("show")},{signal:a})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class pp{#e=null;#t=null;#r=!1;#n=null;#s=null;#a=null;#i=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:r}=e;r.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(r.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:r}=this.#e.getBoundingClientRect(),{x:i,y:a,width:s,height:o}=this.#n.parent.boundingClientRect;return[(e-i)/s,(t+r-a)/o]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const r=this.#n._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",Gi,{signal:r}),t&&(e.addEventListener("focusin",a=>{this.#n._focusEventsAllowed=!1,_n(a)},{capture:!0,signal:r}),e.addEventListener("focusout",a=>{this.#n._focusEventsAllowed=!0,_n(a)},{capture:!0,signal:r})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#r=!0,i(a))},{signal:r}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:r}),e}edit(e){const t=this.commentPopupPositionInLayer;let r,i;if(t)[r,i]=t;else{[r,i]=this.#n.commentButtonPosition;const{width:d,height:h,x:f,y:p}=this.#n;r=f+r*d,i=p+i*h}const a=this.#n.parent.boundingClientRect,{x:s,y:o,width:c,height:u}=a;this.#n._uiManager.editComment(this.#n,s+r*c,o+i*u,{...e,parentDimensions:a})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#r}),this.#r=!1)}isDeleted(){return this.#c||this.#i===""}isEmpty(){return this.#i===null}hasBeenEdited(){return this.isDeleted()||this.#i!==this.#s}serialize(){return this.data}get data(){return{text:this.#i,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#i&&(this.#a=null),e===null){this.#i="",this.#c=!0;return}this.#i=e,this.#o=new Date,this.#c=!1}setInitialText(e,t=null){this.#s=e,this.data=e,this.#o=null,this.#a=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#i="",this.#a=null,this.#o=null,this.#n=null,this.#r=!1,this.#c=!1}}class B0{#e;#t=!1;#r=null;#n;#s;#a;#i;#o=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:s=null,signal:o}){this.#e=e,this.#r=r,this.#n=t,this.#s=i,this.#a=a,this.#i=s,this.#h=new AbortController,this.#c=AbortSignal.any([o,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ba.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,a=AbortSignal.any([this.#c,i.signal]),s=this.#e,o={capture:!0,signal:a,passive:!1},c=u=>{u.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};s.addEventListener("pointerdown",u=>{u.pointerType==="touch"&&(_n(u),c(u))},o),s.addEventListener("pointerup",c,o),s.addEventListener("pointercancel",c,o);return}if(!this.#d){this.#d=new AbortController;const i=AbortSignal.any([this.#c,this.#d.signal]),a=this.#e,s={signal:i,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),s);const o=this.#m.bind(this);a.addEventListener("touchend",o,s),a.addEventListener("touchcancel",o,s),s.capture=!0,a.addEventListener("pointerdown",_n,s),a.addEventListener("pointermove",_n,s),a.addEventListener("pointercancel",_n,s),a.addEventListener("pointerup",_n,s),this.#s?.()}if(_n(e),e.touches.length!==2||this.#r?.()){this.#l=null;return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;_n(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:i,screenY:a}=t,{screenX:s,screenY:o}=r,c=this.#l,{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=c,p=h-u,y=f-d,g=s-i,m=o-a,v=Math.hypot(g,m)||1,x=Math.hypot(p,y)||1;if(!this.#t&&Math.abs(x-v)<=B0.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=a,c.touch1X=s,c.touch1Y=o,!this.#t){this.#t=!0;return}const b=[(i+s)/2,(a+o)/2];this.#a?.(b,x,v)}#m(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#i?.()),this.#l&&(_n(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class st{#e=null;#t=null;#r=null;#n=null;#s=null;#a=!1;#i=null;#o="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#y=!1;#x=!1;#v=null;#_=0;#S=0;#w=null;#j=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#b=!1;#E=st._zIndex++;static _borderLineWidth=-1;static _colorManager=new BD;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=st.prototype._resizeWithKeyboard,t=lo.TRANSLATE_SMALL,r=lo.TRANSLATE_BIG;return yt(this,"_resizerKeyboardManager",new jf([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],st.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[a,s];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return yt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Kfe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(st._l10n??=e,st._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),st._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);st._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){tn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#b}set _isDraggable(e){this.#b=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#M(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[a,s]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/a,this.y=(t+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i),this._onTranslated()}#N([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#N(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#N(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:r,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[c,u]=this.getBaseTranslation();s+=c,o+=u;const{style:d}=r;d.left=`${(100*s).toFixed(2)}%`,d.top=`${(100*o).toFixed(2)}%`,this._onTranslating(s,o),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=st,i=r/e,a=r/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,i]}=this;let{x:a,y:s,width:o,height:c}=this;if(o*=r,c*=i,a*=r,s*=i,this._mustFixPosition)switch(e){case 0:a=Pr(a,0,r-o),s=Pr(s,0,i-c);break;case 90:a=Pr(a,0,r-c),s=Pr(s,o,i);break;case 180:a=Pr(a,o,r),s=Pr(s,c,i);break;case 270:a=Pr(a,c,r),s=Pr(s,0,i-o);break}this.x=a/=r,this.y=s/=i;const[u,d]=this.getBaseTranslation();a+=u,s+=d,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#T(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return st.#T(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return st.#T(e,t,360-this.parentRotation)}#C(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(){const{div:{style:e},width:t,height:r}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",this.#O.bind(this,r),{signal:t}),i.addEventListener("contextmenu",Gi,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#c)}#O(e,t){t.preventDefault();const{isMac:r}=Gn.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#r?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#R.bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",_n,{passive:!1,signal:s}),window.addEventListener("contextmenu",Gi,{signal:s}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const o=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#r?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=c,this.#L()};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})}#I(e,t,r,i){this.width=r,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#L(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=this.#h;this.#h=null;const a=this.x,s=this.y,o=this.width,c=this.height;a===e&&s===t&&o===r&&c===i||this.addCommands({cmd:this.#I.bind(this,a,s,o,c),undo:this.#I.bind(this,e,t,r,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#R(e,t){const[r,i]=this.parentDimensions,a=this.x,s=this.y,o=this.width,c=this.height,u=st.MIN_SIZE/r,d=st.MIN_SIZE/i,h=this.#C(this.rotation),f=(P,F)=>[h[0]*P+h[2]*F,h[1]*P+h[3]*F],p=this.#C(360-this.rotation),y=(P,F)=>[p[0]*P+p[2]*F,p[1]*P+p[3]*F];let g,m,v=!1,x=!1;switch(e){case"topLeft":v=!0,g=(P,F)=>[0,0],m=(P,F)=>[P,F];break;case"topMiddle":g=(P,F)=>[P/2,0],m=(P,F)=>[P/2,F];break;case"topRight":v=!0,g=(P,F)=>[P,0],m=(P,F)=>[0,F];break;case"middleRight":x=!0,g=(P,F)=>[P,F/2],m=(P,F)=>[0,F/2];break;case"bottomRight":v=!0,g=(P,F)=>[P,F],m=(P,F)=>[0,0];break;case"bottomMiddle":g=(P,F)=>[P/2,F],m=(P,F)=>[P/2,0];break;case"bottomLeft":v=!0,g=(P,F)=>[0,F],m=(P,F)=>[P,0];break;case"middleLeft":x=!0,g=(P,F)=>[0,F/2],m=(P,F)=>[P,F/2];break}const b=g(o,c),A=m(o,c);let w=f(...A);const S=st._round(a+w[0]),E=st._round(s+w[1]);let _=1,D=1,C,k;if(t.fromKeyboard)({deltaX:C,deltaY:k}=t);else{const{screenX:P,screenY:F}=t,[q,$]=this.#l;[C,k]=this.screenToPageTranslation(P-q,F-$),this.#l[0]=P,this.#l[1]=F}if([C,k]=y(C/r,k/i),v){const P=Math.hypot(o,c);_=D=Math.max(Math.min(Math.hypot(A[0]-b[0]-C,A[1]-b[1]-k)/P,1/o,1/c),u/o,d/c)}else x?_=Pr(Math.abs(A[0]-b[0]-C),u,1)/o:D=Pr(Math.abs(A[1]-b[1]-k),d,1)/c;const T=st._round(o*_),N=st._round(c*D);w=f(...m(T,N));const j=S-w[0],R=E-w[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=T,this.height=N,this.x=j,this.y=R,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#r?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Gd(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#r?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#r||(_a.initialize(st._l10n),this.#r=new _a(this),this.#e&&(this.#r.data=this.#e,this.#e=null)),this.#r}get altTextData(){return this.#r?.data}set altTextData(e){this.#r&&(this.#r.data=e)}get guessedAltText(){return this.#r?.guessedText}async setGuessedAltText(e){await this.#r?.setGuessedText(e)}serializeAltText(e){return this.#r?.serialize(e)}hasAltText(){return!!this.#r&&!this.#r.isEmpty()}hasAltTextData(){return this.#r?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new pp(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#s){this._uiManager.isEditingMode()&&this.#s.classList.remove("hidden");return}this.hasComment&&(this.#s=this.#n.renderForStandalone(),this.div.append(this.#s))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#s=null}hideStandaloneCommentButton(){this.#s?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:r,deleted:i}}=this.#n;return{text:t,richText:e,date:r,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new pp(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:r}){if(!t||(this.#n||=new pp(this),this.#n.setInitialText(e,r),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new pp(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[s]=this.pageTranslation,o=s+a+1,c=i-100,u=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,c,u,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#a?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#$();const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),z7(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#j||=new B0({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#W.bind(this),onPinching:this.#D.bind(this),onPinchEnd:this.#A.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#W(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#r?.toggle(!1),this.parent.togglePointerEvents(!1)}#D(e,t,r){let a=.7*(r/t)+1-.7;if(a===1)return;const s=this.#C(this.rotation),o=(S,E)=>[s[0]*S+s[2]*E,s[1]*S+s[3]*E],[c,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,p=this.height,y=st.MIN_SIZE/c,g=st.MIN_SIZE/u;a=Math.max(Math.min(a,1/f,1/p),y/f,g/p);const m=st._round(f*a),v=st._round(p*a);if(m===f&&v===p)return;this.#u||=[d,h,f,p];const x=o(f/2,p/2),b=st._round(d+x[0]),A=st._round(h+x[1]),w=o(m/2,v/2);this.x=b-w[0],this.y=A-w[1],this.width=m,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#A(){this.#r?.toggle(!0),this.parent.togglePointerEvents(!0),this.#L()}pointerdown(e){const{isMac:t}=Gn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#U(e);return}this.#P(e)}#P(e){const{isMac:t}=Gn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:a},o=u=>{i.abort(),this.#i=null,this.#m=!1,this._uiManager.endDragSession()||this.#P(u),r&&this._onStopDragging()};t&&(this.#_=e.clientX,this.#S=e.clientY,this.#i=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",u=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==this.#i){_n(u);return}const[p,y]=this.screenToPageTranslation(d-this.#_,h-this.#S);this.#_=d,this.#S=h,this._uiManager.dragSelectedEditors(p,y)},s),window.addEventListener("touchmove",_n,s),window.addEventListener("pointerdown",u=>{u.pointerType===this.#o&&(this.#j||u.isPrimary)&&o(u),_n(u)},s));const c=u=>{if(!this.#i||this.#i===u.pointerId){o(u);return}_n(u)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const i=this.parentScale,[a,s]=this.pageDimensions,[o,c]=this.pageTranslation,u=e/i,d=t/i,h=this.x*a,f=this.y*s,p=this.width*a,y=this.height*s;switch(r){case 0:return[h+u+o,s-f-d-y+c,h+u+p+o,s-f-d+c];case 90:return[h+d+o,s-f+u+c,h+d+y+o,s-f+u+p+c];case 180:return[h-u-p+o,s-f+d+c,h-u+o,s-f+d+y+c];case 270:return[h-d-y+o,s-f-u-p+c,h-d+o,s-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,a,s]=e,o=a-r,c=s-i;switch(this.rotation){case 0:return[r,t-s,o,c];case 90:return[r,t-i,c,o];case 180:return[a,t-i,o,c];case 270:return[a,t-s,c,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&st._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:r,opacity:i,deleted:a,richText:s},uid:o,pageIndex:c,creationDate:u,modificationDate:d}=this;return{id:o,pageIndex:c,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:u,modificationDate:r||d,popupRef:!a,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#x}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:s}=window;return t<s&&i>0&&e<a&&r>0}#$(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#$()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[a,s]=i.pageDimensions,[o,c,u,d]=i.getRectInCurrentCoords(e.rect,s);return i.x=o/a,i.y=c/s,i.width=u/a,i.height=d/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#M(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#j?.destroy(),this.#j=null,this.#d?.remove(),this.#d=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[r,i,a,s]=this.getPDFRect();return[st._round(r+(a-r)*e),st._round(i+(s-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const s=this.#G.bind(this),o=this.#V.bind(this),c=this._uiManager._signal;for(const u of this.#t){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",s,{signal:c}),u.addEventListener("blur",o,{signal:c}),u.addEventListener("focus",this.#Y.bind(this,d),{signal:c}),u.setAttribute("data-l10n-id",st._l10nResizer[d])}}const r=this.#t[0];let i=0;for(const s of t){if(s===r)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(a!==i){if(a<i)for(let o=0;o<i-a;o++)this.#c.append(this.#c.firstElementChild);else if(a>i)for(let o=0;o<a-i;o++)this.#c.firstElementChild.before(this.#c.lastElementChild);let s=0;for(const o of t){const u=this.#t[s++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",st._l10nResizer[u])}}this.#z(0),this.#x=!0,this.#c.firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#G(e){st._resizerKeyboardManager.exec(this,e)}#V(e){this.#x&&e.relatedTarget?.parentNode!==this.#c&&this.#M()}#Y(e){this.#g=this.#x?e:""}#z(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#x&&this.#R(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#M(){this.#x=!1,this.#z(-1),this.#L()}_stopResizingWithKeyboard(){this.#M(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#r?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#r?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#w||=new Map;const{action:r}=e;let i=this.#w.get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(r),this.#w.size===0&&(this.#w=null)},st._telemetryTimeout),this.#w.set(r,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class Kfe extends st{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Y5=3285377520,Ni=4294901760,xa=65535;class q7{constructor(e){this.h1=e?e&4294967295:Y5,this.h2=e?e&4294967295:Y5}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let g=0,m=e.length;g<m;g++){const v=e.charCodeAt(g);v<=255?t[r++]=v:(t[r++]=v>>>8,t[r++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,a=r-i*4,s=new Uint32Array(t.buffer,0,i);let o=0,c=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,p=h&xa,y=f&xa;for(let g=0;g<i;g++)g&1?(o=s[g],o=o*h&Ni|o*p&xa,o=o<<15|o>>>17,o=o*f&Ni|o*y&xa,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(c=s[g],c=c*h&Ni|c*p&xa,c=c<<15|c>>>17,c=c*f&Ni|c*y&xa,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,a){case 3:o^=t[i*4+2]<<16;case 2:o^=t[i*4+1]<<8;case 1:o^=t[i*4],o=o*h&Ni|o*p&xa,o=o<<15|o>>>17,o=o*f&Ni|o*y&xa,i&1?u^=o:d^=o}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ni|e*36045&xa,t=t*4283543511&Ni|((t<<16|e>>>16)*2950163797&Ni)>>>16,e^=t>>>1,e=e*444984403&Ni|e*60499&xa,t=t*3301882366&Ni|((t<<16|e>>>16)*3120437893&Ni)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const GS=Object.freeze({map:null,hash:"",transfer:void 0});class $D{#e=!1;#t=null;#r=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=this.#n.get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof st&&this.#r.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of this.#n.values())if(r instanceof st)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=this.#n.get(e);let i=!1;if(r!==void 0)for(const[a,s]of Object.entries(t))r[a]!==s&&(i=!0,r[a]=s);else i=!0,this.#n.set(e,t);i&&this.#s(),t instanceof st&&((this.#r||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#s(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new W7(this)}get serializable(){if(this.#n.size===0)return GS;const e=new Map,t=new q7,r=[],i=Object.create(null);let a=!1;for(const[s,o]of this.#n){const c=o instanceof st?o.serialize(!1,i):o;c&&(e.set(s,c),t.update(`${s}:${JSON.stringify(c)}`),a||=!!c.bitmap)}if(a)for(const s of e.values())s.bitmap&&r.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:GS}get editorStats(){let e=null;const t=new Map;let r=0,i=0;for(const a of this.#n.values()){if(!(a instanceof st)){a.popup&&(a.popup.deleted?i+=1:r+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(r+=1);const s=a.telemetryFinalData;if(!s)continue;const{type:o}=s;t.has(o)||t.set(o,Object.getPrototypeOf(a).constructor),e||=Object.create(null);const c=e[o]||=new Map;for(const[u,d]of Object.entries(s)){if(u==="type")continue;let h=c.get(u);h||(h=new Map,c.set(u,h));const f=h.get(d)??0;h.set(d,f+1)}}if((i>0||r>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:r}),!e)return null;for(const[a,s]of t)e[a]=s.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const r=this.#r?.get(e);return r?(r.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#r?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#r)for(const t of this.#r.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class W7 extends $D{#e;constructor(e){super();const{map:t,hash:r,transfer:i}=e.serializable,a=structuredClone(t,i?{transfer:i}:null);this.#e={map:a,hash:r,transfer:i}}get print(){tn("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return yt(this,"modifiedIds",{ids:new Set,hash:""})}}class Xfe{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||this.#e.has(e.loadedName))){if(Nt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:s}=e,o=new FontFace(i,a,s);this.addNativeFontFace(o);try{await o.load(),this.#e.add(i),r?.(e)}catch{gt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}tn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw gt(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return yt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return yt(this,"isSyncFontLoadingSupported",Or||Gn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Nt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const a=r.shift();setTimeout(a.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return yt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(A,w){return A.charCodeAt(w)<<24|A.charCodeAt(w+1)<<16|A.charCodeAt(w+2)<<8|A.charCodeAt(w+3)&255}function i(A,w,S,E){const _=A.substring(0,w),D=A.substring(w+S);return _+E+D}let a,s;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let u=0;function d(A,w){if(++u>30){gt("Load test font never loaded."),w();return}if(c.font="30px "+A,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){w();return}setTimeout(d.bind(null,A,w))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,h.length,h);const y=16,g=1482184792;let m=r(f,y);for(a=0,s=h.length-3;a<s;a+=4)m=m-g+r(h,a)|0;a<h.length&&(m=m-g+r(h+"XXX",a)|0),f=i(f,y,4,Nfe(m));const v=`url(data:font/opentype;base64,${btoa(f)});`,x=`@font-face {font-family:"${h}";src:${v}}`;this.insertRule(x);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const A of[e.loadedName,h]){const w=this._document.createElement("span");w.textContent="Hi",w.style.fontFamily=A,b.append(w)}this._document.body.append(b),d(h,()=>{b.remove(),t.complete()})}}class Jfe{#e;constructor(e,t=null,r,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,r&&Object.assign(this,r),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${L7(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let i;try{i=e.get(r)}catch(s){gt(`getPathGenerator - ignoring character: "${s}".`)}const a=$7(i?.path);return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=a}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}set disableFontFace(e){yt(this,"disableFontFace",!!e)}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}set bbox(e){yt(this,"bbox",e)}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}class Dc{#e;#t;#r;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,r={};let i=0;for(const u of Dc.strings){const d=t.encode(e[u]);r[u]=d,i+=4+d.length}const a=new ArrayBuffer(i),s=new Uint8Array(a),o=new DataView(a);let c=0;for(const u of Dc.strings){const d=r[u],h=d.length;o.setUint32(c,h),s.set(d,c+4),c+=4+h}return Nt(c===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#r=new TextDecoder}#n(e){Nt(e<Dc.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const r=this.#t.getUint32(t);return this.#r.decode(new Uint8Array(this.#e,t+4,r))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class jc{#e;#t;#r;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,r={};let i=0;for(const f of jc.strings){const p=t.encode(e[f]);r[f]=p,i+=4+p.length}i+=4;let a,s,o=1+i;e.style&&(a=t.encode(e.style.style),s=t.encode(e.style.weight),o+=4+a.length+4+s.length);const c=new ArrayBuffer(o),u=new Uint8Array(c),d=new DataView(c);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,i=0;for(const f of jc.strings){const p=r[f],y=p.length;i+=4+y,d.setUint32(h,y),u.set(p,h+4),h+=4+y}return d.setUint32(h-i-4,i),e.style&&(d.setUint32(h,a.length),u.set(a,h+4),h+=4+a.length,d.setUint32(h,s.length),u.set(s,h+4),h+=4+s.length),Nt(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#r=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){Nt(e<jc.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const r=this.#t.getUint32(t);return this.#r.decode(new Uint8Array(this.#e,t+4,r))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),r=this.#r.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const i=this.#t.getUint32(e),a=this.#r.decode(new Uint8Array(this.#e,e+4,i));return{style:r,weight:a}}}class Gt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#r=this.#t+1+8;static#n=this.#r+1+48;static#s=this.#n+1+6;#a;#i;#o;constructor({data:e,extra:t}){this.#a=e,this.#i=new TextDecoder,this.#o=new DataView(this.#a),t&&Object.assign(this,t)}#c(e){Nt(e<Gt.bools.length,"Invalid boolean index");const t=Math.floor(e/4),r=e*2%8,i=this.#o.getUint8(t)>>r&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return Nt(e<Gt.numbers.length,"Invalid number index"),this.#o.getFloat64(Gt.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=Gt.#t;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<4;i++)r.push(this.#o.getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=Gt.#r;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<6;i++)r.push(this.#o.getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=Gt.#n;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<3;i++)r.push(this.#o.getInt16(e,!0)),e+=2;return r}#h(e){Nt(e<Gt.strings.length,"Invalid string index");let t=Gt.#s+4;for(let a=0;a<e;a++)t+=this.#o.getUint32(t)+4;const r=this.#o.getUint32(t),i=new Uint8Array(r);return i.set(new Uint8Array(this.#a,t+4,r)),this.#i.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=Gt.#s;const t=this.#o.getUint32(e);e+=4+t;const r=this.#o.getUint32(e);e+=4+r;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);if(a!==0)return new Uint8Array(this.#a,e+4,a)}clearData(){let e=Gt.#s;const t=this.#o.getUint32(e);e+=4+t;const r=this.#o.getUint32(e);e+=4+r;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);new Uint8Array(this.#a,e+4,a).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=Gt.#s;const t=this.#o.getUint32(e);e+=4+t;const r=this.#o.getUint32(e);e+=4+r;const i=this.#o.getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#a,e+4,i)),new Dc(a.buffer)}get systemFontInfo(){let e=Gt.#s;const t=this.#o.getUint32(e);e+=4+t;const r=this.#o.getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(this.#a,e+4,r)),new jc(i.buffer)}static write(e){const t=e.systemFontInfo?jc.write(e.systemFontInfo):null,r=e.cssFontInfo?Dc.write(e.cssFontInfo):null,i=new TextEncoder,a={};let s=0;for(const g of Gt.strings)a[g]=i.encode(e[g]),s+=4+a[g].length;const o=Gt.#s+4+s+4+(t?t.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(o),u=new Uint8Array(c),d=new DataView(c);let h=0;const f=Gt.bools.length;let p=0,y=0;for(let g=0;g<f;g++){const m=e[Gt.bools[g]];p|=(m===void 0?0:m?2:1)<<y,y+=2,(y===8||g===f-1)&&(d.setUint8(h++,p),p=0,y=0)}Nt(h===Gt.#e,"FontInfo.write: Boolean properties offset mismatch");for(const g of Gt.numbers)d.setFloat64(h,e[g]),h+=8;if(Nt(h===Gt.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const g of e.bbox)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=8;if(Nt(h===Gt.#r,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const g of e.fontMatrix)d.setFloat64(h,g,!0),h+=8}else d.setUint8(h++,0),h+=48;if(Nt(h===Gt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const g of e.defaultVMetrics)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=6;Nt(h===Gt.#s,"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(Gt.#s,0),h+=4;for(const g of Gt.strings){const m=a[g],v=m.length;d.setUint32(h,v),u.set(m,h+4),h+=4+v}if(d.setUint32(Gt.#s,h-Gt.#s-4),!t)d.setUint32(h,0),h+=4;else{const g=t.byteLength;d.setUint32(h,g),Nt(h+4+g<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),h+4),h+=4+g}if(!r)d.setUint32(h,0),h+=4;else{const g=r.byteLength;d.setUint32(h,g),Nt(h+4+g<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(r),h+4),h+=4+g}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),Nt(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}}class er{static#e=0;static#t=1;static#r=2;static#n=3;static#s=4;static#a=8;static#i=12;static#o=16;constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,r=null,i=[],a=[],s=[],o=[],c=null,u=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,r=e[2],s=e[3],t===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,c=e[1],i=e[2],a=e[3],o=e[4]||[],r=e[6],u=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const d=Math.floor(i.length/2),h=Math.floor(a.length/3),f=s.length,p=o.length;let y=0;for(const w of o)y+=1,y=Math.ceil(y/4)*4,y+=4+w.coords.length*4,y+=4+w.colors.length*4,w.verticesPerRow!==void 0&&(y+=4);const g=20+d*8+h*3+f*8+(r?16:0)+(u?3:0)+y,m=new ArrayBuffer(g),v=new DataView(m),x=new Uint8Array(m);v.setUint8(er.#e,t),v.setUint8(er.#t,r?1:0),v.setUint8(er.#r,u?1:0),v.setUint8(er.#n,c),v.setUint32(er.#s,d,!0),v.setUint32(er.#a,h,!0),v.setUint32(er.#i,f,!0),v.setUint32(er.#o,p,!0);let b=20;new Float32Array(m,b,d*2).set(i),b+=d*8,x.set(a,b),b+=h*3;for(const[w,S]of s)v.setFloat32(b,w,!0),b+=4,v.setUint32(b,parseInt(S.slice(1),16),!0),b+=4;if(r)for(const w of r)v.setFloat32(b,w,!0),b+=4;u&&(x.set(u,b),b+=3);for(let w=0;w<o.length;w++){const S=o[w];v.setUint8(b,S.type),b+=1,b=Math.ceil(b/4)*4,v.setUint32(b,S.coords.length,!0),b+=4,new Int32Array(m,b,S.coords.length).set(S.coords),b+=S.coords.length*4,v.setUint32(b,S.colors.length,!0),b+=4,new Int32Array(m,b,S.colors.length).set(S.colors),b+=S.colors.length*4,S.verticesPerRow!==void 0&&(v.setUint32(b,S.verticesPerRow,!0),b+=4)}return m}getIR(){const e=this.view,t=this.data[er.#e],r=!!this.data[er.#t],i=!!this.data[er.#r],a=e.getUint32(er.#s,!0),s=e.getUint32(er.#a,!0),o=e.getUint32(er.#i,!0),c=e.getUint32(er.#o,!0);let u=20;const d=new Float32Array(this.buffer,u,a*2);u+=a*8;const h=new Uint8Array(this.buffer,u,s*3);u+=s*3;const f=[];for(let m=0;m<o;++m){const v=e.getFloat32(u,!0);u+=4;const x=e.getUint32(u,!0);u+=4,f.push([v,`#${x.toString(16).padStart(6,"0")}`])}let p=null;if(r){p=[];for(let m=0;m<4;++m)p.push(e.getFloat32(u,!0)),u+=4}let y=null;i&&(y=new Uint8Array(this.buffer,u,3),u+=3);const g=[];for(let m=0;m<c;++m){const v=e.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const x=e.getUint32(u,!0);u+=4;const b=new Int32Array(this.buffer,u,x);u+=x*4;const A=e.getUint32(u,!0);u+=4;const w=new Int32Array(this.buffer,u,A);u+=A*4;const S={type:v,coords:b,colors:w};v===zS.LATTICE&&(S.verticesPerRow=e.getUint32(u,!0),u+=4),g.push(S)}if(t===1)return["RadialAxial","axial",p,f,Array.from(d.slice(0,2)),Array.from(d.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",p,f,[d[0],d[1]],[d[3],d[4]],d[2],d[5]];if(t===3){const m=this.data[er.#n];let v=null;if(d.length>0){let x=d[0],b=d[0],A=d[1],w=d[1];for(let S=0;S<d.length;S+=2){const E=d[S],_=d[S+1];x=x>E?E:x,A=A>_?_:A,b=b<E?E:b,w=w<_?_:w}v=[x,A,b,w]}return["Mesh",m,d,h,g,v,p,y]}throw new Error(`Unsupported pattern kind: ${t}`)}}class Zfe{static write(e){let t,r;return Gn.isFloat16ArraySupported?(r=new ArrayBuffer(e.length*2),t=new Float16Array(r)):(r=new ArrayBuffer(e.length*4),t=new Float32Array(r)),t.set(e),r}#e;constructor(e){this.#e=e}get path(){return Gn.isFloat16ArraySupported?new Float16Array(this.#e):new Float32Array(this.#e)}}function Qfe(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Or)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function epe(n){if(Or&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Sf(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function mp(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const YS=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,tpe=n=>typeof n=="object"&&typeof n?.name=="string",npe=Rfe.bind(null,YS,tpe);class rpe{#e=new Map;#t=Promise.resolve();postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if(r?.signal instanceof AbortSignal){const{signal:a}=r;if(a.aborted){gt("LoopbackPort - cannot use an `aborted` signal.");return}const s=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",s),a.addEventListener("abort",s)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const gp={DATA:1,ERROR:2},Pn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function K5(){}function Vr(n){if(n instanceof oo||n instanceof qS||n instanceof $5||n instanceof jg||n instanceof Cw)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||tn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new oo(n.message);case"InvalidPDFException":return new qS(n.message);case"PasswordException":return new $5(n.message,n.code);case"ResponseException":return new jg(n.message,n.status,n.missing);case"UnknownErrorException":return new Cw(n.message,n.details)}return new Cw(n.message,n.toString())}class Rd{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===gp.DATA)i.resolve(e.data);else if(e.callback===gp.ERROR)i.reject(Vr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(s){a.postMessage({sourceName:r,targetName:i,callback:gp.DATA,callbackId:e.callbackId,data:s})},function(s){a.postMessage({sourceName:r,targetName:i,callback:gp.ERROR,callbackId:e.callbackId,reason:Vr(s)})});return}if(e.streamId){this.#r(e);return}t(e.data)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,t,r,i){const a=this.streamId++,s=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[a]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:s,targetName:o,action:e,streamId:a,data:t,desiredSize:u.desiredSize},i),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[a].pullCall=d,c.postMessage({sourceName:s,targetName:o,stream:Pn.PULL,streamId:a,desiredSize:u.desiredSize}),d.promise},cancel:u=>{Nt(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[a].cancelCall=d,this.streamControllers[a].isClosed=!0,c.postMessage({sourceName:s,targetName:o,stream:Pn.CANCEL,streamId:a,reason:Vr(u)}),d.promise}},r)}#r(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,s=this,o=this.actionHandler[e.action],c={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:r,targetName:i,stream:Pn.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:Pn.CLOSE,streamId:t}),delete s.streamSinks[t])},error(u){Nt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:Pn.ERROR,streamId:t,reason:Vr(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(o,e.data,c).then(function(){a.postMessage({sourceName:r,targetName:i,stream:Pn.START_COMPLETE,streamId:t,success:!0})},function(u){a.postMessage({sourceName:r,targetName:i,stream:Pn.START_COMPLETE,streamId:t,reason:Vr(u)})})}#n(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,s=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Pn.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(Vr(e.reason));break;case Pn.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(Vr(e.reason));break;case Pn.PULL:if(!o){a.postMessage({sourceName:r,targetName:i,stream:Pn.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||K5).then(function(){a.postMessage({sourceName:r,targetName:i,stream:Pn.PULL_COMPLETE,streamId:t,success:!0})},function(u){a.postMessage({sourceName:r,targetName:i,stream:Pn.PULL_COMPLETE,streamId:t,reason:Vr(u)})});break;case Pn.ENQUEUE:if(Nt(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case Pn.CLOSE:if(Nt(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this.#s(s,t);break;case Pn.ERROR:Nt(s,"error should have stream controller"),s.controller.error(Vr(e.reason)),this.#s(s,t);break;case Pn.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(Vr(e.reason)),this.#s(s,t);break;case Pn.CANCEL:if(!o)break;const c=Vr(e.reason);Promise.try(o.onCancel||K5,c).then(function(){a.postMessage({sourceName:r,targetName:i,stream:Pn.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){a.postMessage({sourceName:r,targetName:i,stream:Pn.CANCEL_COMPLETE,streamId:t,reason:Vr(u)})}),o.sinkCapability.reject(c),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#s(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class H7{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){tn("Abstract method `_createCanvas` called.")}}class ipe extends H7{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class V7{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){tn("Abstract method `_fetch` called.")}}class X5 extends V7{async _fetch(e){const t=await Ef(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Sf(t)}}class G7{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,a){return"none"}destroy(e=!1){}}class ape extends G7{#e;#t;#r;#n;#s;#a;#i=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#s=t}get#o(){return this.#t||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#r){const e=this.#s.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const r=this.#s.createElementNS(es,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#r=this.#s.createElementNS(es,"defs"),e.append(r),r.append(this.#r),this.#s.body.append(e)}return this.#r}#h(e){if(e.length===1){const c=e[0],u=new Array(256);for(let h=0;h<256;h++)u[h]=c[h]/255;const d=u.join(",");return[d,d,d]}const[t,r,i]=e,a=new Array(256),s=new Array(256),o=new Array(256);for(let c=0;c<256;c++)a[c]=t[c]/255,s[c]=r[c]/255,o[c]=i[c]/255;return[a.join(","),s.join(","),o.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#s.URL;t!==this.#s.baseURI&&(U0(t)?gt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=R7(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[r,i,a]=this.#h(e),s=e.length===1?r:`${r}${i}${a}`;if(t=this.#o.get(s),t)return this.#o.set(e,t),t;const o=`g_${this.#n}_transfer_map_${this.#i++}`,c=this.#d(o);this.#o.set(e,c),this.#o.set(s,c);const u=this.#m(o);return this.#p(r,i,a,u),c}addHCMFilter(e,t){const r=`${e}-${t}`,i="base";let a=this.#c.get(i);if(a?.key===r||(a?(a.filter?.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},this.#c.set(i,a)),!e||!t))return a.url;const s=this.#x(e);e=Ge.makeHexColor(...s);const o=this.#x(t);if(t=Ge.makeHexColor(...o),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return a.url;const c=new Array(256);for(let p=0;p<=255;p++){const y=p/255;c[p]=y<=.03928?y/12.92:((y+.055)/1.055)**2.4}const u=c.join(","),d=`g_${this.#n}_hcm_filter`,h=a.filter=this.#m(d);this.#p(u,u,u,h),this.#g(h);const f=(p,y)=>{const g=s[p]/255,m=o[p]/255,v=new Array(y+1);for(let x=0;x<=y;x++)v[x]=g+x/y*(m-g);return v.join(",")};return this.#p(f(0,5),f(1,5),f(2,5),h),a.url=this.#d(d),a.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[r]=this.#h([e]),i=`alpha_${r}`;if(t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_alpha_map_${this.#i++}`,s=this.#d(a);this.#o.set(e,s),this.#o.set(i,s);const o=this.#m(a);return this.#y(r,o),s}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let r,i;if(e?([r]=this.#h([e]),i=`luminosity_${r}`):i="luminosity",t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_luminosity_map_${this.#i++}`,s=this.#d(a);this.#o.set(e,s),this.#o.set(i,s);const o=this.#m(a);return this.#f(o),e&&this.#y(r,o),s}addHighlightHCMFilter(e,t,r,i,a){const s=`${t}-${r}-${i}-${a}`;let o=this.#c.get(e);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(e,o)),!t||!r))return o.url;const[c,u]=[t,r].map(this.#x.bind(this));let d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[f,p]=[i,a].map(this.#x.bind(this));h<d&&([d,h,f,p]=[h,d,p,f]),this.#l.style.color="";const y=(v,x,b)=>{const A=new Array(256),w=(h-d)/b,S=v/255,E=(x-v)/(255*b);let _=0;for(let D=0;D<=b;D++){const C=Math.round(d+D*w),k=S+D*E;for(let T=_;T<=C;T++)A[T]=k;_=C+1}for(let D=_;D<256;D++)A[D]=A[_-1];return A.join(",")},g=`g_${this.#n}_hcm_${e}_filter`,m=o.filter=this.#m(g);return this.#g(m),this.#p(y(f[0],p[0],5),y(f[1],p[1],5),y(f[2],p[2],5),m),o.url=this.#d(g),o.url}destroy(e=!1){e&&this.#a?.size||(this.#r?.parentNode.parentNode.remove(),this.#r=null,this.#t?.clear(),this.#t=null,this.#a?.clear(),this.#a=null,this.#i=0)}#f(e){const t=this.#s.createElementNS(es,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#s.createElementNS(es,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){const t=this.#s.createElementNS(es,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,r){const i=this.#s.createElementNS(es,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),e.append(i)}#p(e,t,r,i){const a=this.#s.createElementNS(es,"feComponentTransfer");i.append(a),this.#u(a,"feFuncR",e),this.#u(a,"feFuncG",t),this.#u(a,"feFuncB",r)}#y(e,t){const r=this.#s.createElementNS(es,"feComponentTransfer");t.append(r),this.#u(r,"feFuncA",e)}#x(e){return this.#l.style.color=e,Df(getComputedStyle(this.#l).getPropertyValue("color"))}}class Y7{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){tn("Abstract method `_fetch` called.")}}class J5 extends Y7{async _fetch(e){const t=await Ef(e,"arraybuffer");return new Uint8Array(t)}}class K7{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){tn("Abstract method `_fetch` called.")}}class Z5 extends K7{async _fetch(e){const t=await Ef(e,"arraybuffer");return new Uint8Array(t)}}Or&&gt("Please use the `legacy` build in Node.js environments.");async function zD(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class spe extends G7{}class ope extends H7{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class lpe extends V7{async _fetch(e){return zD(e)}}class cpe extends Y7{async _fetch(e){return zD(e)}}class upe extends K7{async _fetch(e){return zD(e)}}const Jl="__forcedDependency",{floor:Q5,ceil:eP}=Math;function yp(n,e,t,r,i,a){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],r),n[e*4+2]=Math.max(n[e*4+2],i),n[e*4+3]=Math.max(n[e*4+3],a)}const KS=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class dpe{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===KS}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const vp=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};class hpe{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[Jl]:[]};#r=new Map;#n=[];#s=[];#a=[[1,0,0,1,0,0]];#i=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#m;#u;#p;constructor(e,t,r=!1){this.#f=e.width,this.#g=e.height,this.#y(t),r&&(this.#p=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#y(e,this.#u)}#y(e,t){const r=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(r),this.#u=new Uint32Array(r),t&&t.length>0?(this.#u.set(t),this.#u.fill(KS,t.length)):this.#u.fill(KS)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[Jl]:{__proto__:this.#t[Jl]}},this.#i={__proto__:this.#i},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#i=Object.getPrototypeOf(this.#i);const r=this.#n.pop();return r!==void 0&&(vp(this.#p,e)?.dependencies.add(r),this.#u[e]=this.#u[r]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(vp(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#s.push(e),this}endMarkedContent(e){const t=this.#s.pop();return t!==void 0&&(vp(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#a.push(Ge.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#r.set(e,t),this}recordSimpleDataFromNamed(e,t,r){this.#e[e]=this.#r.get(t)??r}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Jl,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(Jl,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,r,i,a,s){const o=Ge.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];Ge.axialAlignedBoundingBox([r,a,i,s],o,c);const u=Ge.intersect(this.#i,c);return u?(this.#i[0]=u[0],this.#i[1]=u[1],this.#i[2]=u[2],this.#i[3]=u[3]):(this.#i[0]=this.#i[1]=1/0,this.#i[2]=this.#i[3]=-1/0),this}recordBBox(e,t,r,i,a,s){const o=this.#i;if(o[0]===1/0)return this;const c=Ge.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform());if(o[0]===-1/0)return Ge.axialAlignedBoundingBox([r,a,i,s],c,this.#o),this;const u=[1/0,1/0,-1/0,-1/0];return Ge.axialAlignedBoundingBox([r,a,i,s],c,u),this.#o[0]=Math.min(this.#o[0],Math.max(u[0],o[0])),this.#o[1]=Math.min(this.#o[1],Math.max(u[1],o[1])),this.#o[2]=Math.max(this.#o[2],Math.min(u[2],o[2])),this.#o[3]=Math.max(this.#o[3],Math.min(u[3],o[3])),this}recordCharacterBBox(e,t,r,i=1,a=0,s=0,o){const c=r.bbox;let u,d;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&this.#d.get(r),u!==!1&&(d=[0,0,0,0],Ge.axialAlignedBoundingBox(c,r.fontMatrix,d),(i!==1||a!==0||s!==0)&&Ge.scaleMinMax([i,0,0,-i,a,s],d),u)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!o)return this.recordFullPageBBox(e);const h=o();return c&&d&&u===void 0&&(u=d[0]<=a-h.actualBoundingBoxLeft&&d[2]>=a+h.actualBoundingBoxRight&&d[1]<=s-h.actualBoundingBoxAscent&&d[3]>=s+h.actualBoundingBoxDescent,this.#d.set(r,u),u)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,a-h.actualBoundingBoxLeft,a+h.actualBoundingBoxRight,s-h.actualBoundingBoxAscent,s+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#i[0]),this.#o[1]=Math.max(0,this.#i[1]),this.#o[2]=Math.min(this.#f,this.#i[2]),this.#o[3]=Math.min(this.#g,this.#i[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const r=this.#l,i=this.#e,a=this.#t;for(const s of t)s in this.#e?r.add(i[s]):s in a&&a[s].forEach(r.add,r);return this}recordNamedDependency(e,t){return this.#r.has(t)&&this.#l.add(this.#r.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Jl]),this.#p){const r=vp(this.#p,e),{dependencies:i}=r;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#s.forEach(i.add,i),i.delete(e),r.isRenderingOperation=!0}if(this.#c===e){const r=Q5(this.#o[0]*256/this.#f),i=Q5(this.#o[1]*256/this.#g),a=eP(this.#o[2]*256/this.#f),s=eP(this.#o[3]*256/this.#g);yp(this.#m,e,r,i,a,s);for(const o of this.#l)o!==e&&yp(this.#m,o,r,i,a,s);for(const o of this.#n)o!==e&&yp(this.#m,o,r,i,a,s);for(const o of this.#s)o!==e&&yp(this.#m,o,r,i,a,s);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const r=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of r)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#i[0]=Math.max(this.#i[0],this.#o[0]),this.#i[1]=Math.max(this.#i[1],this.#o[1]),this.#i[2]=Math.min(this.#i[2],this.#o[2]),this.#i[3]=Math.min(this.#i[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new dpe(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class Tg{#e;#t;#r;#n=0;#s=0;constructor(e,t,r){if(e instanceof Tg&&e.#r===!!r)return e;this.#e=e,this.#t=t,this.#r=!!r}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#s++,this.#e.save(this.#t),this}restore(e){return this.#s>0&&(this.#e.restore(this.#t),this.#s--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,r){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#r||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,r,i,a,s){return this.#r||this.#e.recordClipBox(this.#t,t,r,i,a,s),this}recordBBox(e,t,r,i,a,s){return this.#r||this.#e.recordBBox(this.#t,t,r,i,a,s),this}recordCharacterBBox(e,t,r,i,a,s,o){return this.#r||this.#e.recordCharacterBBox(this.#t,t,r,i,a,s,o),this}recordFullPageBBox(e){return this.#r||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#r||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const ki={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},fr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function XS(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class qD{isModifyingCurrentTransform(){return!1}getPattern(){tn("Abstract method `getPattern` called.")}}class fpe extends qD{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let r,i=this._p0,a=this._p1;if(t&&(i=i.slice(),a=a.slice(),Ge.applyTransform(i,t),Ge.applyTransform(a,t)),this._type==="axial")r=e.createLinearGradient(i[0],i[1],a[0],a[1]);else if(this._type==="radial"){let s=this._r0,o=this._r1;if(t){const c=new Float32Array(2);Ge.singularValueDecompose2dScale(t,c),s*=c[0],o*=c[0]}r=e.createRadialGradient(i[0],i[1],s,a[0],a[1],o)}for(const s of this._colorStops)r.addColorStop(s[0],s[1]);return r}getPattern(e,t,r,i){let a;if(i===fr.STROKE||i===fr.FILL){if(this.isOriginBased()){let f=Ge.transform(r,t.baseTransform);this.matrix&&(f=Ge.transform(f,this.matrix));const p=.001,y=Math.hypot(f[0],f[1]),g=Math.hypot(f[2],f[3]),m=(f[0]*f[2]+f[1]*f[3])/(y*g);if(Math.abs(m)<p)if(this.isRadial()){if(Math.abs(y-g)<p)return this._createGradient(e,f)}else return this._createGradient(e,f)}const s=t.current.getClippedPathBoundingBox(i,gn(e))||[0,0,0,0],o=Math.ceil(s[2]-s[0])||1,c=Math.ceil(s[3]-s[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,c),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-s[0],-s[1]),r=Ge.transform(r,[1,0,0,1,s[0],s[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),XS(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),a=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(r);a.setTransform(h)}else XS(e,this._bbox),a=this._createGradient(e);return a}}function Ow(n,e,t,r,i,a,s,o){const c=e.coords,u=e.colors,d=n.data,h=n.width*4;let f;c[t+1]>c[r+1]&&(f=t,t=r,r=f,f=a,a=s,s=f),c[r+1]>c[i+1]&&(f=r,r=i,i=f,f=s,s=o,o=f),c[t+1]>c[r+1]&&(f=t,t=r,r=f,f=a,a=s,s=f);const p=(c[t]+e.offsetX)*e.scaleX,y=(c[t+1]+e.offsetY)*e.scaleY,g=(c[r]+e.offsetX)*e.scaleX,m=(c[r+1]+e.offsetY)*e.scaleY,v=(c[i]+e.offsetX)*e.scaleX,x=(c[i+1]+e.offsetY)*e.scaleY;if(y>=x)return;const b=u[a],A=u[a+1],w=u[a+2],S=u[s],E=u[s+1],_=u[s+2],D=u[o],C=u[o+1],k=u[o+2],T=Math.round(y),N=Math.round(x);let j,R,P,F,q,$,B,I;for(let L=T;L<=N;L++){if(L<m){const K=L<y?0:(y-L)/(y-m);j=p-(p-g)*K,R=b-(b-S)*K,P=A-(A-E)*K,F=w-(w-_)*K}else{let K;L>x?K=1:m===x?K=0:K=(m-L)/(m-x),j=g-(g-v)*K,R=S-(S-D)*K,P=E-(E-C)*K,F=_-(_-k)*K}let U;L<y?U=0:L>x?U=1:U=(y-L)/(y-x),q=p-(p-v)*U,$=b-(b-D)*U,B=A-(A-C)*U,I=w-(w-k)*U;const G=Math.round(Math.min(j,q)),H=Math.round(Math.max(j,q));let V=h*L+G*4;for(let K=G;K<=H;K++)U=(j-K)/(j-q),U<0?U=0:U>1&&(U=1),d[V++]=R-(R-$)*U|0,d[V++]=P-(P-B)*U|0,d[V++]=F-(F-I)*U|0,d[V++]=255}}function ppe(n,e,t){const r=e.coords,i=e.colors;let a,s;switch(e.type){case zS.LATTICE:const o=e.verticesPerRow,c=Math.floor(r.length/o)-1,u=o-1;for(a=0;a<c;a++){let d=a*o;for(let h=0;h<u;h++,d++)Ow(n,t,r[d],r[d+1],r[d+o],i[d],i[d+1],i[d+o]),Ow(n,t,r[d+o+1],r[d+1],r[d+o],i[d+o+1],i[d+1],i[d+o])}break;case zS.TRIANGLES:for(a=0,s=r.length;a<s;a+=3)Ow(n,t,r[a],r[a+1],r[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class mpe extends qD{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),p=u/h,y=d/f,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/p,scaleY:1/y},m=h+4,v=f+4,x=r.getCanvas("mesh",m,v),b=x.context,A=b.createImageData(h,f);if(t){const S=A.data;for(let E=0,_=S.length;E<_;E+=4)S[E]=t[0],S[E+1]=t[1],S[E+2]=t[2],S[E+3]=255}for(const S of this._figures)ppe(A,S,g);return b.putImageData(A,2,2),{canvas:x.canvas,offsetX:o-2*p,offsetY:c-2*y,scaleX:p,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,i){XS(e,this._bbox);const a=new Float32Array(2);if(i===fr.SHADING)Ge.singularValueDecompose2dScale(gn(e),a);else if(this.matrix){Ge.singularValueDecompose2dScale(this.matrix,a);const[o,c]=a;Ge.singularValueDecompose2dScale(t.baseTransform,a),a[0]*=o,a[1]*=c}else Ge.singularValueDecompose2dScale(t.baseTransform,a);const s=this._createMeshCanvas(a,i===fr.SHADING?null:this._background,t.cachedCanvases);return i!==fr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class gpe extends qD{getPattern(){return"hotpink"}}function ype(n){switch(n[0]){case"RadialAxial":return new fpe(n);case"Mesh":return new mpe(n);case"Dummy":return new gpe}throw new Error(`Unknown IR type: ${n[0]}`)}const tP={COLORED:1,UNCOLORED:2};class WD{static MAX_PATTERN_SIZE=3e3;constructor(e,t,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e,t){const{bbox:r,operatorList:i,paintType:a,tilingType:s,color:o,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),L0("TilingType: "+s);const h=r[0],f=r[1],p=r[2],y=r[3],g=p-h,m=y-f,v=new Float32Array(2);Ge.singularValueDecompose2dScale(this.matrix,v);const[x,b]=v;Ge.singularValueDecompose2dScale(this.baseTransform,v);const A=x*v[0],w=b*v[1];let S=g,E=m,_=!1,D=!1;const C=Math.ceil(u*A),k=Math.ceil(d*w),T=Math.ceil(g*A),N=Math.ceil(m*w);C>=T?S=u:_=!0,k>=N?E=d:D=!0;const j=this.getSizeAndScale(S,this.ctx.canvas.width,A),R=this.getSizeAndScale(E,this.ctx.canvas.height,w),P=e.cachedCanvases.getCanvas("pattern",j.size,R.size),F=P.context,q=c.createCanvasGraphics(F,t);if(q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(q,a,o),F.translate(-j.scale*h,-R.scale*f),q.transform(0,j.scale,0,0,R.scale,0,0),F.save(),q.dependencyTracker?.save(),this.clipBbox(q,h,f,p,y),q.baseTransform=gn(q.ctx),q.executeOperatorList(i),q.endDrawing(),q.dependencyTracker?.restore(),F.restore(),_||D){const $=P.canvas;_&&(S=u),D&&(E=d);const B=this.getSizeAndScale(S,this.ctx.canvas.width,A),I=this.getSizeAndScale(E,this.ctx.canvas.height,w),L=B.size,U=I.size,G=e.cachedCanvases.getCanvas("pattern-workaround",L,U),H=G.context,V=_?Math.floor(g/u):0,K=D?Math.floor(m/d):0;for(let ae=0;ae<=V;ae++)for(let te=0;te<=K;te++)H.drawImage($,L*ae,U*te,L,U,0,0,L,U);return{canvas:G.canvas,scaleX:B.scale,scaleY:I.scale,offsetX:h,offsetY:f}}return{canvas:P.canvas,scaleX:j.scale,scaleY:R.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,r){const i=Math.max(WD.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*r);return a>=i?a=i:r=a/e,{scale:r,size:a}}clipBbox(e,t,r,i,a){const s=i-t,o=a-r;e.ctx.rect(t,r,s,o),Ge.axialAlignedBoundingBox([t,r,i,a],gn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,a=e.current;switch(t){case tP.COLORED:const{fillStyle:s,strokeStyle:o}=this.ctx;i.fillStyle=a.fillColor=s,i.strokeStyle=a.strokeColor=o;break;case tP.UNCOLORED:i.fillStyle=i.strokeStyle=r,a.fillColor=a.strokeColor=r;break;default:throw new Cfe(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,i,a){let s=r;i!==fr.SHADING&&(s=Ge.transform(s,t.baseTransform),this.matrix&&(s=Ge.transform(s,this.matrix)));const o=this.createPatternCanvas(t,a);let c=new DOMMatrix(s);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(c),u}}function vpe({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:a=4294967295,inverseDecode:s=!1}){const o=Gn.isLittleEndian?4278190080:255,[c,u]=s?[a,o]:[o,a],d=r>>3,h=r&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let y=0;y<i;y++){for(const m=e+d;e<m;e++){const v=e<f?n[e]:255;t[p++]=v&128?u:c,t[p++]=v&64?u:c,t[p++]=v&32?u:c,t[p++]=v&16?u:c,t[p++]=v&8?u:c,t[p++]=v&4?u:c,t[p++]=v&2?u:c,t[p++]=v&1?u:c}if(h===0)continue;const g=e<f?n[e++]:255;for(let m=0;m<h;m++)t[p++]=g&1<<7-m?u:c}return{srcPos:e,destPos:p}}const nP=16,rP=100,xpe=15,iP=10,Gr=16,Pw=new DOMMatrix,fi=new Float32Array(2),gc=new Float32Array([1/0,1/0,-1/0,-1/0]);function bpe(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,i,a,s,o){e.transform(t,r,i,a,s,o),this.__originalTransform(t,r,i,a,s,o)},n.setTransform=function(t,r,i,a,s,o){e.setTransform(t,r,i,a,s,o),this.__originalSetTransform(t,r,i,a,s,o)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,a,s,o){e.bezierCurveTo(t,r,i,a,s,o),this.__originalBezierCurveTo(t,r,i,a,s,o)},n.rect=function(t,r,i,a){e.rect(t,r,i,a),this.__originalRect(t,r,i,a)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class wpe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function xp(n,e,t,r,i,a,s,o,c,u){const[d,h,f,p,y,g]=gn(n);if(h===0&&f===0){const x=s*d+y,b=Math.round(x),A=o*p+g,w=Math.round(A),S=(s+c)*d+y,E=Math.abs(Math.round(S)-b)||1,_=(o+u)*p+g,D=Math.abs(Math.round(_)-w)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(p),b,w),n.drawImage(e,t,r,i,a,0,0,E,D),n.setTransform(d,h,f,p,y,g),[E,D]}if(d===0&&p===0){const x=o*f+y,b=Math.round(x),A=s*h+g,w=Math.round(A),S=(o+u)*f+y,E=Math.abs(Math.round(S)-b)||1,_=(s+c)*h+g,D=Math.abs(Math.round(_)-w)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,b,w),n.drawImage(e,t,r,i,a,0,0,D,E),n.setTransform(d,h,f,p,y,g),[D,E]}n.drawImage(e,t,r,i,a,s,o,c,u);const m=Math.hypot(d,h),v=Math.hypot(f,p);return[m*c,v*u]}class aP{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=$S;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=qn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,r){r?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=gc.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=fr.FILL,t=null){const r=this.minMax.slice();if(e===fr.STROKE){t||tn("Stroke bounding box must include transform."),Ge.singularValueDecompose2dScale(t,fi);const i=fi[0]*this.lineWidth/2,a=fi[1]*this.lineWidth/2;r[0]-=i,r[1]-=a,r[2]+=i,r[3]+=a}return r}updateClipFromPath(){const e=Ge.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(gc,0)}getClippedPathBoundingBox(e=fr.FILL,t=null){return Ge.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function sP(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%Gr,a=(t-i)/Gr,s=i===0?a:a+1,o=n.createImageData(r,Gr);let c=0,u;const d=e.data,h=o.data;let f,p,y,g;if(e.kind===lm.GRAYSCALE_1BPP){const m=d.byteLength,v=new Uint32Array(h.buffer,0,h.byteLength>>2),x=v.length,b=r+7>>3,A=4294967295,w=Gn.isLittleEndian?4278190080:255;for(f=0;f<s;f++){for(y=f<a?Gr:i,u=0,p=0;p<y;p++){const S=m-c;let E=0;const _=S>b?r:S*8-7,D=_&-8;let C=0,k=0;for(;E<D;E+=8)k=d[c++],v[u++]=k&128?A:w,v[u++]=k&64?A:w,v[u++]=k&32?A:w,v[u++]=k&16?A:w,v[u++]=k&8?A:w,v[u++]=k&4?A:w,v[u++]=k&2?A:w,v[u++]=k&1?A:w;for(;E<_;E++)C===0&&(k=d[c++],C=128),v[u++]=k&C?A:w,C>>=1}for(;u<x;)v[u++]=0;n.putImageData(o,0,f*Gr)}}else if(e.kind===lm.RGBA_32BPP){for(p=0,g=r*Gr*4,f=0;f<a;f++)h.set(d.subarray(c,c+g)),c+=g,n.putImageData(o,0,p),p+=Gr;f<s&&(g=r*i*4,h.set(d.subarray(c,c+g)),n.putImageData(o,0,p))}else if(e.kind===lm.RGB_24BPP)for(y=Gr,g=r*y,f=0;f<s;f++){for(f>=a&&(y=i,g=r*y),u=0,p=g;p--;)h[u++]=d[c++],h[u++]=d[c++],h[u++]=d[c++],h[u++]=255;n.putImageData(o,0,f*Gr)}else throw new Error(`bad image kind: ${e.kind}`)}function oP(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%Gr,a=(t-i)/Gr,s=i===0?a:a+1,o=n.createImageData(r,Gr);let c=0;const u=e.data,d=o.data;for(let h=0;h<s;h++){const f=h<a?Gr:i;({srcPos:c}=vpe({src:u,srcPos:c,dest:d,width:r,height:f,nonBlackColor:0})),n.putImageData(o,0,h*Gr)}}function wd(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function bp(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function lP(n,e){if(e)return!0;Ge.singularValueDecompose2dScale(n,fi);const t=Math.fround(Ba.pixelRatio*vu.PDF_TO_CSS_UNITS);return fi[0]<=t&&fi[1]<=t}const Ape=["butt","round","square"],Spe=["miter","round","bevel"],Epe={},cP={};class Tc{constructor(e,t,r,i,a,{optionalContentConfig:s,markedContentStack:o=null},c,u,d){this.ctx=e,this.current=new aP(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=s,this.cachedCanvases=new wpe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,r=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):r}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const a=this.ctx.canvas.width,s=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=o,r){const c=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...gn(this.compositeCtx))}this.ctx.save(),bp(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=gn(this.ctx)}executeOperatorList(e,t,r,i,a){const s=e.argsArray,o=e.fnArray;let c=t||0;const u=s.length;if(u===c)return c;const d=u-c>iP&&typeof r=="function",h=d?Date.now()+xpe:0;let f=0;const p=this.commonObjs,y=this.objs;let g,m;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,r),c;if(!a||a(c))if(g=o[c],m=s[c]??null,g!==Zh.dependency)m===null?this[g](c):this[g](c,...m);else for(const v of m){this.dependencyTracker?.recordNamedData(v,c);const x=v.startsWith("g_")?p:y;if(!x.has(v))return x.get(v,r),c}if(c++,c===u)return c;if(d&&++f>iP){if(Date.now()>h)return r(),c;f=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),o=r,c=i,u="prescale1",d,h;for(;a>2&&o>1||s>2&&c>1;){let f=o,p=c;a>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),a/=o/f),s>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,s/=c/p),d=this.cachedCanvases.getCanvas(u,f,p),h=d.context,h.clearRect(0,0,f,p),h.drawImage(e,0,0,o,c,0,0,f,p),e=d.canvas,o=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e,t){const r=this.ctx,{width:i,height:a}=t,s=this.current.fillColor,o=this.current.patternFill,c=gn(r);let u,d,h,f;if((t.bitmap||t.data)&&t.count>1){const C=t.bitmap||t.data.buffer;d=JSON.stringify(o?c:[c.slice(0,4),s]),u=this._cachedBitmapsMap.get(C),u||(u=new Map,this._cachedBitmapsMap.set(C,u));const k=u.get(d);if(k&&!o){const T=Math.round(Math.min(c[0],c[2])+c[4]),N=Math.round(Math.min(c[1],c[3])+c[5]);return this.dependencyTracker?.recordDependencies(e,ki.transformAndFill),{canvas:k,offsetX:T,offsetY:N}}h=k}h||(f=this.cachedCanvases.getCanvas("maskCanvas",i,a),oP(f.context,t));let p=Ge.transform(c,[1/i,0,0,-1/a,0,0]);p=Ge.transform(p,[1,0,0,1,0,-a]);const y=gc.slice();Ge.axialAlignedBoundingBox([0,0,i,a],p,y);const[g,m,v,x]=y,b=Math.round(v-g)||1,A=Math.round(x-m)||1,w=this.cachedCanvases.getCanvas("fillCanvas",b,A),S=w.context,E=g,_=m;S.translate(-E,-_),S.transform(...p),h||(h=this._scaleImage(f.canvas,va(S)),h=h.img,u&&o&&u.set(d,h)),S.imageSmoothingEnabled=lP(gn(S),t.interpolate),xp(S,h,0,0,h.width,h.height,0,0,i,a),S.globalCompositeOperation="source-in";const D=Ge.transform(va(S),[1,0,0,1,-E,-_]);return S.fillStyle=o?s.getPattern(r,this,D,fr.FILL,e):s,S.fillRect(0,0,i,a),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,w.canvas)),this.dependencyTracker?.recordDependencies(e,ki.transformAndFill),{canvas:w.canvas,offsetX:Math.round(E),offsetY:Math.round(_)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=Ape[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=Spe[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,r){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=r)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[r,i]of t)switch(r){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,r);this.suspendedCtx=this.ctx;const s=this.ctx=a.context;s.setTransform(this.suspendedCtx.getTransform()),wd(this.suspendedCtx,s),bpe(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),wd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const a=i[0],s=i[1],o=i[2]-a,c=i[3]-s;o===0||c===0||(this.genericComposeSMask(t.context,r,o,c,t.subtype,t.backdrop,t.transferMap,a,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,a,s,o,c,u,d,h){let f=e.canvas,p=c-d,y=u-h;if(s)if(p<0||y<0||p+r>f.width||y+i>f.height){const m=this.cachedCanvases.getCanvas("maskExtension",r,i),v=m.context;v.drawImage(f,-p,-y),v.globalCompositeOperation="destination-atop",v.fillStyle=s,v.fillRect(0,0,r,i),v.globalCompositeOperation="source-over",f=m.canvas,p=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const m=new Path2D;m.rect(p,y,r,i),e.clip(m),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(p,y,r,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(c,u,r,i),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(f,p,y,r,i,c,u,r,i),t.restore()}save(e){this.inSMaskMode&&wd(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&wd(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,i,a,s,o){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,r,i,a,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r,i){let[a]=r;if(!i){a||=r[0]=new Path2D,this[t](e,a);return}if(this.dependencyTracker!==null){const s=t===Zh.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(e,["transform"])}a instanceof Path2D||(a=r[0]=$7(a)),Ge.axialAlignedBoundingBox(i,gn(this.ctx),this.current.minMax),this[t](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,r=!0){const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const s=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,va(i),fr.STROKE,e),s){const o=new Path2D;o.addPath(t,i.getTransform().invertSelf().multiplySelf(s)),t=o}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,ki.stroke),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(fr.STROKE,gn(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,r=!0){const i=this.ctx,a=this.current.fillColor,s=this.current.patternFill;let o=!1;if(s){const u=a.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=a.getPattern(i,this,va(i),fr.FILL,e),u){const d=new Path2D;d.addPath(t,i.getTransform().invertSelf().multiplySelf(u)),t=d}o=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,ki.fill),o&&(i.restore(),this.dependencyTracker?.restore(e)),r&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,ki.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=Epe}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=cP}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,a=r.getTransform().invertSelf();for(const{transform:s,x:o,y:c,fontSize:u,path:d}of t)d&&i.addPath(d,new DOMMatrix(s).preMultiplySelf(a).translate(o,c).scale(u,-u));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,r){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix||$S,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&gt("Invalid font matrix for font "+t),r<0?(r=-r,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const u=i.italic?"italic":"normal";let d=r;r<nP?d=nP:r>rP&&(d=rP),this.current.fontSizeScale=r/d,this.ctx.font=`${u} ${c} ${d}px ${o}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,r){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,t,r){this.setLeading(e,-r),this.moveText(e,t,r)}setTextMatrix(e,t){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#r(e,t,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),i}paintChar(e,t,r,i,a,s){const o=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,f=d&qn.FILL_STROKE_MASK,p=!!(d&qn.ADD_TO_PATH_FLAG),y=c.patternFill&&!u.missingFile,g=c.patternStroke&&!u.missingFile;let m;if((u.disableFontFace||p||y||g)&&!u.missingFile&&(m=u.getPathGenerator(this.commonObjs,t)),m&&(u.disableFontFace||y||g)){o.save(),o.translate(r,i),o.scale(h,-h),this.dependencyTracker?.recordCharacterBBox(e,o,u);let v;if(f===qn.FILL||f===qn.FILL_STROKE)if(a){v=o.getTransform(),o.setTransform(...a);const x=this.#r(m,v,a);o.fill(x)}else o.fill(m);if(f===qn.STROKE||f===qn.FILL_STROKE)if(s){v||=o.getTransform(),o.setTransform(...s);const{a:x,b,c:A,d:w}=v,S=Ge.inverseTransform(s),E=Ge.transform([x,b,A,w,0,0],S);Ge.singularValueDecompose2dScale(E,fi),o.lineWidth*=Math.max(fi[0],fi[1])/h,o.stroke(this.#r(m,v,s))}else o.lineWidth/=h,o.stroke(m);o.restore()}else(f===qn.FILL||f===qn.FILL_STROKE)&&(o.fillText(t,r,i),this.dependencyTracker?.recordCharacterBBox(e,o,u,h,r,i,()=>o.measureText(t))),(f===qn.STROKE||f===qn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,o,u,h,r,i,()=>o.measureText(t)).recordDependencies(e,ki.stroke),o.strokeText(t,r,i));p&&((this.pendingTextPaths||=[]).push({transform:gn(o),x:r,y:i,fontSize:h,path:m}),this.dependencyTracker?.recordCharacterBBox(e,o,u,h,r,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return yt(this,"isFontSubpixelAAEnabled",r)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,ki.showText).resetBBox(e),this.current.textRenderingMode&qn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const a=r.fontSize;if(a===0){this.dependencyTracker?.recordOperation(e);return}const s=this.ctx,o=r.fontSizeScale,c=r.charSpacing,u=r.wordSpacing,d=r.fontDirection,h=r.textHScale*d,f=t.length,p=i.vertical,y=p?1:-1,g=i.defaultVMetrics,m=a*r.fontMatrix[0],v=r.textRenderingMode===qn.FILL&&!i.disableFontFace&&!r.patternFill;s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),d>0?s.scale(h,-1):s.scale(h,1);let x,b;const A=r.textRenderingMode&qn.FILL_STROKE_MASK,w=A===qn.FILL||A===qn.FILL_STROKE,S=A===qn.STROKE||A===qn.FILL_STROKE;if(w&&r.patternFill){s.save();const k=r.fillColor.getPattern(s,this,va(s),fr.FILL,e);x=gn(s),s.restore(),s.fillStyle=k}if(S&&r.patternStroke){s.save();const k=r.strokeColor.getPattern(s,this,va(s),fr.STROKE,e);b=gn(s),s.restore(),s.strokeStyle=k}let E=r.lineWidth;const _=r.textMatrixScale;if(_===0||E===0?S&&(E=this.getSinglePixelWidth()):E/=_,o!==1&&(s.scale(o,o),E/=o),s.lineWidth=E,i.isInvalidPDFjsFont){const k=[];let T=0;for(const j of t)k.push(j.unicode),T+=j.width;const N=k.join("");if(s.fillText(N,0,0),this.dependencyTracker!==null){const j=s.measureText(N);this.dependencyTracker.recordBBox(e,this.ctx,-j.actualBoundingBoxLeft,j.actualBoundingBoxRight,-j.actualBoundingBoxAscent,j.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=T*m*h,s.restore(),this.compose();return}let D=0,C;for(C=0;C<f;++C){const k=t[C];if(typeof k=="number"){D+=y*k*a/1e3;continue}let T=!1;const N=(k.isSpace?u:0)+c,j=k.fontChar,R=k.accent;let P,F,q=k.width;if(p){const I=k.vmetric||g,L=-(k.vmetric?I[1]:q*.5)*m,U=I[2]*m;q=I?-I[0]:q,P=L/o,F=(D+U)/o}else P=D/o,F=0;let $;if(i.remeasure&&q>0){$=s.measureText(j);const I=$.width*1e3/a*o;if(q<I&&this.isFontSubpixelAAEnabled){const L=q/I;T=!0,s.save(),s.scale(L,1),P/=L}else q!==I&&(P+=(q-I)/2e3*a/o)}if(this.contentVisible&&(k.isInFont||i.missingFile)){if(v&&!R)s.fillText(j,P,F),this.dependencyTracker?.recordCharacterBBox(e,s,$?{bbox:null}:i,a/o,P,F,()=>$??s.measureText(j));else if(this.paintChar(e,j,P,F,x,b),R){const I=P+a*R.offset.x/o,L=F-a*R.offset.y/o;this.paintChar(e,R.fontChar,I,L,x,b)}}const B=p?q*m-N*d:q*m+N*d;D+=B,T&&s.restore()}p?r.y-=D:r.x+=D*h,s.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const r=this.ctx,i=this.current,a=i.font,s=i.fontSize,o=i.fontDirection,c=a.vertical?1:-1,u=i.charSpacing,d=i.wordSpacing,h=i.textHScale*o,f=i.fontMatrix||$S,p=t.length,y=i.textRenderingMode===qn.INVISIBLE;let g,m,v,x;if(y||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(h,o);const b=this.dependencyTracker;for(this.dependencyTracker=b?new Tg(b,e):null,g=0;g<p;++g){if(m=t[g],typeof m=="number"){x=c*m*s/1e3,this.ctx.translate(x,0),i.x+=x*h;continue}const A=(m.isSpace?d:0)+u,w=a.charProcOperatorList[m.operatorListId];w?this.contentVisible&&(this.save(),r.scale(s,s),r.transform(...f),this.executeOperatorList(w),this.restore()):gt(`Type3 character "${m.operatorListId}" is not available.`);const S=[m.width,0];Ge.applyTransform(S,f),v=S[0]*s+A,r.translate(v,0),i.x+=v*h}r.restore(),b&&(this.dependencyTracker=b)}setCharWidth(e,t,r){}setCharWidthAndBounds(e,t,r,i,a,s,o){const c=new Path2D;c.rect(i,a,s-i,o-a),this.ctx.clip(c),this.dependencyTracker?.recordBBox(e,this.ctx,i,s,a,o).recordClipBox(e,this.ctx,i,s,a,o),this.endPath(e)}getColorN_Pattern(e,t){let r;if(t[0]==="TilingPattern"){const i=this.baseTransform||gn(this.ctx),a={createCanvasGraphics:(s,o)=>new Tc(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Tg(this.dependencyTracker,o,!0):null)};r=new WD(t,this.ctx,a,i)}else r=this._getPattern(e,t[1],t[2]);return r}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,r=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=ype(this.getObject(e,t)),this.cachedPatterns.set(t,i)),r&&(i.matrix=r),i}shadingFill(e,t){if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,t);r.fillStyle=i.getPattern(r,this,va(r),fr.SHADING,e);const a=va(r);if(a){const{width:s,height:o}=r.canvas,c=gc.slice();Ge.axialAlignedBoundingBox([0,0,s,o],a,c);const[u,d,h,f]=c;this.ctx.fillRect(u,d,h-u,f-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ki.transform).recordDependencies(e,ki.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){tn("Should not call beginInlineImage")}beginImageData(){tn("Should not call beginImageData")}paintFormXObjectBegin(e,t,r){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=gn(this.ctx),r)){Ge.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[i,a,s,o]=r,c=new Path2D;c.rect(i,a,s-i,o-a),this.ctx.clip(c),this.dependencyTracker?.recordClipBox(e,this.ctx,i,s,a,o),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||L0("TODO: Support non-isolated groups."),t.knockout&&gt("Knockout groups not supported.");const i=gn(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=gc.slice();Ge.axialAlignedBoundingBox(t.bbox,gn(r),a);const s=[0,0,r.canvas.width,r.canvas.height];a=Ge.intersect(a,s)||[0,0,0,0];const o=Math.floor(a[0]),c=Math.floor(a[1]),u=Math.max(Math.ceil(a[2])-o,1),d=Math.max(Math.ceil(a[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,d]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,u,d),p=f.context;p.translate(-o,-c),p.transform(...i);let y=new Path2D;const[g,m,v,x]=t.bbox;if(y.rect(g,m,v-g,x-m),t.matrix){const b=new Path2D;b.addPath(y,new DOMMatrix(t.matrix)),y=b}p.clip(y),t.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(o,c),r.save()),wd(r,p),this.ctx=p,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=gn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const s=gc.slice();Ge.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],a,s),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,r,i,a,s){if(this.#e(),bp(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const o=r[2]-r[0],c=r[3]-r[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=o,r[3]=c,Ge.singularValueDecompose2dScale(gn(this.ctx),fi);const{viewportScale:u}=this,d=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(fi[0],0,0,-fi[1],0,c*fi[1]),bp(this.ctx)}else{bp(this.ctx),this.endPath(e);const u=new Path2D;u.rect(r[0],r[1],o,c),this.ctx.clip(u)}}this.current=new aP(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const r=t.count;t=this.getObject(e,t.data,t),t.count=r;const i=this.ctx,a=this._createMaskCanvas(e,t),s=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+s.width,a.offsetY,a.offsetY+s.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r,i=0,a=0,s,o){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const u=gn(c);c.transform(r,i,a,s,0,0);const d=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,d.offsetX-u[4],d.offsetY-u[5]),this.dependencyTracker?.resetBBox(e);for(let h=0,f=o.length;h<f;h+=2){const p=Ge.transform(u,[r,i,a,s,o[h],o[h+1]]);c.drawImage(d.canvas,p[4],p[5]),this.dependencyTracker?.recordBBox(e,this.ctx,p[4],p[4]+d.canvas.width,p[5],p[5]+d.canvas.height)}c.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx,i=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,ki.transformAndFill);for(const s of t){const{data:o,width:c,height:u,transform:d}=s,h=this.cachedCanvases.getCanvas("maskCanvas",c,u),f=h.context;f.save();const p=this.getObject(e,o,s);oP(f,p),f.globalCompositeOperation="source-in",f.fillStyle=a?i.getPattern(f,this,va(r),fr.FILL,e):i,f.fillRect(0,0,c,u),f.restore(),r.save(),r.transform(...d),r.scale(1,-1),xp(r,h.canvas,0,0,c,u,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,c,0,u),r.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const r=this.getObject(e,t);if(!r){gt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,t,r,i,a){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){gt("Dependent image isn't ready yet");return}const o=s.width,c=s.height,u=[];for(let d=0,h=a.length;d<h;d+=2)u.push({transform:[r,0,0,i,a[d],a[d+1]],x:0,y:0,w:o,h:c});this.paintInlineImageXObjectGroup(e,s,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",r,i),s=a.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",a.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const r=t.width,i=t.height,a=this.ctx;this.save(e);const{filter:s}=a;s!=="none"&&s!==""&&(a.filter="none"),a.scale(1/r,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",r,i).context;sP(d,t),o=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(o,va(a));a.imageSmoothingEnabled=lP(gn(a),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,a,0,r,-i,0).recordDependencies(e,ki.imageXObject).recordOperation(e),xp(a,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,r){if(!this.contentVisible)return;const i=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const s=t.width,o=t.height,u=this.cachedCanvases.getCanvas("inlineImage",s,o).context;sP(u,t),a=this.applyTransferMapsToCanvas(u)}this.dependencyTracker?.resetBBox(e);for(const s of r)i.save(),i.transform(...s.transform),i.scale(1,-1),xp(i,a,s.x,s.y,s.w,s.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,ki.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,r){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,r){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,r){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===cP?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=gn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:a}=this.ctx.getTransform();let s,o;if(r===0&&i===0){const c=Math.abs(t),u=Math.abs(a);if(c===u)if(e===0)s=o=1/c;else{const d=c*e;s=o=d<1?1/d:1}else if(e===0)s=1/c,o=1/u;else{const d=c*e,h=u*e;s=d<1?1/d:1,o=h<1?1/h:1}}else{const c=Math.abs(t*a-r*i),u=Math.hypot(t,r),d=Math.hypot(i,a);if(e===0)s=d/c,o=u/c;else{const h=e*c;s=d>h?d/h:1,o=u>h?u/h:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:i}}=this,[a,s]=this.getScaleForStroking();if(a===s){r.lineWidth=(i||1)*a,r.stroke(e);return}const o=r.getLineDash();t&&r.save(),r.scale(a,s),Pw.a=1/a,Pw.d=1/s;const c=new Path2D;if(c.addPath(e,Pw),o.length>0){const u=Math.max(a,s);r.setLineDash(o.map(d=>d/u)),r.lineDashOffset/=u}r.lineWidth=i||1,r.stroke(c),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Zh)Tc.prototype[n]!==void 0&&(Tc.prototype[Zh[n]]=Tc.prototype[n]);class Cc{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class _pe{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const nc=Symbol("INTERNAL");class Dpe{#e=!1;#t=!1;#r=!1;#n=!0;constructor(e,{name:t,intent:r,usage:i,rbGroups:a}){this.#e=!!(e&ci.DISPLAY),this.#t=!!(e&ci.PRINT),this.name=t,this.intent=r,this.usage=i,this.rbGroups=a}get visible(){if(this.#r)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,r=!1){e!==nc&&tn("Internal method `_setVisible` called."),this.#r=r,this.#n=t}}class jpe{#e=null;#t=new Map;#r=null;#n=null;constructor(e,t=ci.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const r of e.groups)this.#t.set(r.id,new Dpe(t,r));if(e.baseState==="OFF")for(const r of this.#t.values())r._setVisible(nc,!1);for(const r of e.on)this.#t.get(r)._setVisible(nc,!0);for(const r of e.off)this.#t.get(r)._setVisible(nc,!1);this.#r=this.getHash()}}#s(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const a=e[i];let s;if(Array.isArray(a))s=this.#s(a);else if(this.#t.has(a))s=this.#t.get(a).visible;else return gt(`Optional content group not found: ${a}`),!0;switch(r){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return L0("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(gt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#s(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return gt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return gt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return gt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return gt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return gt(`Unknown optional content policy ${e.policy}.`),!0}return gt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){const i=this.#t.get(e);if(!i){gt(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const s of a)s!==e&&this.#t.get(s)?._setVisible(nc,!1,!0);i._setVisible(nc,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const a=this.#t.get(i);if(a)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#r===null||this.getHash()===this.#r}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new q7;for(const[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class Tpe{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Nt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:s,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=o,a?.length>0){const c=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(r),!0)});Nt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Nt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Cpe(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new Npe(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class Cpe{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=LD(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Npe{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function kpe(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let d=o(t);return d=unescape(d),d=c(d),d=u(d),a(d)}if(t=s(n),t){const d=u(t);return a(d)}if(t=r("filename","i").exec(n),t){t=t[1];let d=o(t);return d=u(d),a(d)}function r(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),p=Sf(h);h=f.decode(p),e=!1}catch{}}return h}function a(d){return e&&/[\x80-\xff]/.test(d)&&(d=i("utf-8",d),e&&(d=i("iso-8859-1",d))),d}function s(d){const h=[];let f;const p=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(d))!==null;){let[,g,m,v]=f;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[m,v]}const y=[];for(let g=0;g<h.length&&g in h;++g){let[m,v]=h[g];v=o(v),m&&(v=unescape(v),g===0&&(v=c(v))),y.push(v)}return y.join("")}function o(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const p=h[f].indexOf('"');p!==-1&&(h[f]=h[f].slice(0,p),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),y=d.slice(h+1).replace(/^[^']*'/,"");return i(f,y)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,p,y){if(p==="q"||p==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,m){return String.fromCharCode(parseInt(m,16))}),i(f,y);try{y=atob(y)}catch{}return i(f,y)})}return""}function X7(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function $0(n){return URL.parse(n)?.origin??null}function J7({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(n.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function Z7(n){const e=n.get("Content-Disposition");if(e){let t=kpe(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(LD(t))return t}return null}function Tf(n,e){return new jg(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function Q7(n){return n===200||n===206}function eU(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function tU(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(gt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Ope{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=X7(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Nt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Ppe(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new Ipe(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Ppe{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,eU(r,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=$0(a.url),!Q7(a.status))throw Tf(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const s=a.headers,{allowRangeRequests:o,suggestedLength:c}=J7({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=Z7(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new oo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:tU(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class Ipe{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${r-1}`);const s=i.url;fetch(s,eU(a,this._withCredentials,this._abortController)).then(o=>{const c=$0(o.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!Q7(o.status))throw Tf(o.status,s);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:tU(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Iw=200,Rw=206;function Rpe(n){const e=n.response;return typeof e!="string"?e:Sf(e).buffer}class Mpe{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=X7(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,s]of this.headers)t.setRequestHeader(a,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Rw):i.expectedStatus=Iw,t.responseType="arraybuffer",Nt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const a=i.status||Iw;if(!(a===Iw&&r.expectedStatus===Rw)&&a!==r.expectedStatus){r.onError(i.status);return}const o=Rpe(i);if(a===Rw){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?r.onDone({begin:parseInt(u[1],10),chunk:o}):(gt('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone({begin:0,chunk:o}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Fpe{constructor(e){this._source=e,this._manager=new Mpe(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Nt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Lpe(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new Upe(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Lpe{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=$0(t.responseURL);const r=t.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[c,...u]=o.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:s}=J7({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=Z7(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Tf(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Upe{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=$0(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Tf(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Bpe=/^[a-z][a-z0-9\-+.]+:/i;function $pe(n){if(Bpe.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class zpe{constructor(e){this.source=e,this.url=$pe(e.url),Nt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Nt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new qpe(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new Wpe(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class qpe{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Tf(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new oo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Wpe{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ad=Symbol("INITIAL_DATA");class nU{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Ad}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const r=this.#e[e];if(!r||r.data===Ad)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=this.#e[e];return!!t&&t.data!==Ad}delete(e){const t=this.#e[e];return!t||t.data===Ad?!1:(delete this.#e[e],!0)}resolve(e,t=null){const r=this.#t(e);r.data=t,r.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Ad&&(yield[e,t])}}}const Hpe=1e5,uP=30;class ui{#e=Promise.withResolvers();#t=null;#r=!1;#n=!!globalThis.FontInspector?.enabled;#s=null;#a=null;#i=0;#o=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#y=null;static#x=new Map;static#v=new Map;static#_=new WeakMap;static#S=null;static#w=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(c){c.enqueue(e),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=r.scale*Ba.pixelRatio,this.#h=r.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:a,pageX:s,pageY:o}=r.rawDims;this.#y=[1,0,0,-1,-s,o+a],this.#o=i,this.#i=a,ui.#C(),t.style.setProperty("--min-font-size",ui.#S),bl(t,r),this.#e.promise.finally(()=>{ui.#w.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Gn.platform;return yt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:r})=>{if(r){this.#e.resolve();return}this.#s??=t.lang,Object.assign(this.#f,t.styles),this.#j(t.items),e()},this.#e.reject)};return this.#c=this.#m.getReader(),ui.#w.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const r=e.scale*Ba.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,bl(this.#l,{rotation:i})),r!==this.#d){t?.(),this.#d=r;const a={div:null,properties:null,ctx:ui.#N(this.#s)};for(const s of this.#u)a.properties=this.#p.get(s),a.div=s,this.#E(a)}}cancel(){const e=new oo("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#j(e){if(this.#r)return;this.#a.ctx??=ui.#N(this.#s);const t=this.#u,r=this.#g;for(const i of e){if(t.length>Hpe){gt("Ignoring additional textDivs for performance reasons."),this.#r=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const a=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),a.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(i.str),this.#b(i)}}#b(e){const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const i=Ge.transform(this.#y,e.transform);let a=Math.atan2(i[1],i[0]);const s=this.#f[e.fontName];s.vertical&&(a+=Math.PI/2);let o=this.#n&&s.fontSubstitution||s.fontFamily;o=ui.fontFamilyMap.get(o)||o;const c=Math.hypot(i[2],i[3]),u=c*ui.#F(o,s,this.#s);let d,h;a===0?(d=i[4],h=i[5]-u):(d=i[4]+u*Math.sin(a),h=i[5]-u*Math.cos(a));const f=t.style;f.left=`${(100*d/this.#o).toFixed(2)}%`,f.top=`${(100*h/this.#i).toFixed(2)}%`,f.setProperty("--font-height",`${c.toFixed(2)}px`),f.fontFamily=o,r.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),a!==0&&(r.angle=a*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const y=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);y!==g&&Math.max(y,g)/Math.min(y,g)>1.5&&(p=!0)}if(p&&(r.canvasWidth=s.vertical?e.height:e.width),this.#p.set(t,r),this.#a.div=t,this.#a.properties=r,this.#E(this.#a),r.hasText&&this.#t.append(t),r.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),this.#t.append(y)}}#E(e){const{div:t,properties:r,ctx:i}=e,{style:a}=t;if(r.canvasWidth!==0&&r.hasText){const{fontFamily:s}=a,{canvasWidth:o,fontSize:c}=r;ui.#T(i,c*this.#d,s);const{width:u}=i.measureText(t.textContent);u>0&&a.setProperty("--scale-x",o*this.#d/u)}r.angle!==0&&a.setProperty("--rotate",`${r.angle}deg`)}static cleanup(){if(!(this.#w.size>0)){this.#x.clear();for(const{canvas:e}of this.#v.values())e.remove();this.#v.clear()}}static#N(e=null){let t=this.#v.get(e||="");if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(e,t),this.#_.set(t,{size:0,family:""})}return t}static#T(e,t,r){const i=this.#_.get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)}static#C(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#F(e,t,r){const i=this.#x.get(e);if(i)return i;const a=this.#N(r);a.canvas.width=a.canvas.height=uP,this.#T(a,uP,e);const s=a.measureText(""),o=s.fontBoundingBoxAscent,c=Math.abs(s.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let u=.8;return o?u=o/(o+c):(Gn.platform.isFirefox&&gt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),this.#x.set(e,u),u}}const Vpe=100;function rU(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new HD,{docId:t}=e,r=n.url?Qfe(n.url):null,i=n.data?epe(n.data):null,a=n.httpHeaders||null,s=n.withCredentials===!0,o=n.password??null,c=n.range instanceof iU?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof ef?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!U0(n.docBaseUrl)?n.docBaseUrl:null,p=mp(n.cMapUrl),y=n.cMapPacked!==!1,g=n.CMapReaderFactory||(Or?lpe:X5),m=mp(n.iccUrl),v=mp(n.standardFontDataUrl),x=n.StandardFontDataFactory||(Or?cpe:J5),b=mp(n.wasmUrl),A=n.WasmFactory||(Or?upe:Z5),w=n.stopAtErrors!==!0,S=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,E=n.isEvalSupported!==!1,_=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Or,D=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Or&&(Gn.platform.isFirefox||!globalThis.chrome),C=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,k=typeof n.disableFontFace=="boolean"?n.disableFontFace:Or,T=n.fontExtraProperties===!0,N=n.enableXfa===!0,j=n.ownerDocument||globalThis.document,R=n.disableRange===!0,P=n.disableStream===!0,F=n.disableAutoFetch===!0,q=n.pdfBug===!0,$=n.CanvasFactory||(Or?ope:ipe),B=n.FilterFactory||(Or?spe:ape),I=n.enableHWA===!0,L=n.useWasm!==!1,U=c?c.length:n.length??NaN,G=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Or&&!k,H=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===X5&&x===J5&&A===Z5&&p&&v&&b&&Id(p,document.baseURI)&&Id(v,document.baseURI)&&Id(b,document.baseURI)),V=null;Dfe(h);const K={canvasFactory:new $({ownerDocument:j,enableHWA:I}),filterFactory:new B({docId:t,ownerDocument:j}),cMapReaderFactory:H?null:new g({baseUrl:p,isCompressed:y}),standardFontDataFactory:H?null:new x({baseUrl:v}),wasmFactory:H?null:new A({baseUrl:b})};d||(d=ef.create({verbosity:h,port:Cc.workerPort}),e._worker=d);const ae={docId:t,apiVersion:"5.4.530",data:i,password:o,disableAutoFetch:F,rangeChunkSize:u,length:U,docBaseUrl:f,enableXfa:N,evaluatorOptions:{maxImageSize:S,disableFontFace:k,ignoreErrors:w,isEvalSupported:E,isOffscreenCanvasSupported:_,isImageDecoderSupported:D,canvasMaxAreaInBytes:C,fontExtraProperties:T,useSystemFonts:G,useWasm:L,useWorkerFetch:H,cMapUrl:p,iccUrl:m,standardFontDataUrl:v,wasmUrl:b}},te={ownerDocument:j,pdfBug:q,styleElement:V,loadingParams:{disableAutoFetch:F,enableXfa:N}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const de=d.messageHandler.sendWithPromise("GetDocRequest",ae,i?[i.buffer]:null);let xe;if(c)xe=new Tpe(c,{disableRange:R,disableStream:P});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const ve=Id(r)?Ope:Or?zpe:Fpe;xe=new ve({url:r,length:U,httpHeaders:a,withCredentials:s,rangeChunkSize:u,disableRange:R,disableStream:P})}return de.then(ve=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Te=new Rd(t,ve,d.port),O=new Kpe(Te,e,xe,te,K,I);e._transport=O,Te.send("Ready",null)})}).catch(e._capability.reject),e}class HD{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${HD.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class iU{#e=Promise.withResolvers();#t=[];#r=[];#n=[];#s=[];constructor(e,t,r=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){this.#s.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#r.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const r of this.#s)r(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const r of this.#n)r(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#r)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){tn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Gpe{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return yt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Ype{#e=!1;constructor(e,t,r,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new q5:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new nU,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:a=!1}={}){return new _f({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return yt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:i="display",annotationMode:a=$s.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:y=null}){this._stats?.time("Overall");const g=this._transport.getRenderingIntent(i,a,h,f),{renderingIntent:m,cacheKey:v}=g;this.#e=!1,c||=this._transport.getOptionalContentConfig(m);let x=this._intentStates.get(v);x||(x=Object.create(null),this._intentStates.set(v,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const b=!!(m&ci.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(g));const A=!!(this._pdfBug&&globalThis.StepperManager?.enabled),w=!this.recordedBBoxes&&(p||A),S=D=>{if(x.renderTasks.delete(E),w){const C=E.gfx?.dependencyTracker.take();C&&(E.stepper&&E.stepper.setOperatorBBoxes(C,E.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=C))}b&&(this.#e=!0),this.#t(),D?(E.capability.reject(D),this._abortOperatorList({intentState:x,reason:D instanceof Error?D:new Error(D)})):E.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},E=new yc({callback:S,params:{canvas:t,canvasContext:e,dependencyTracker:w?new hpe(t,x.operatorList.length,A):null,viewport:r,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:y});(x.renderTasks||=new Set).add(E);const _=E.task;return Promise.all([x.displayReadyCapability.promise,c]).then(([D,C])=>{if(this.destroyed){S();return}if(this._stats?.time("Rendering"),!(C.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");E.initializeGraphics({transparency:D,optionalContentConfig:C}),E.operatorListChanged()}).catch(S),_}getOperatorList({intent:e="display",annotationMode:t=$s.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){function a(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const s=this._transport.getRenderingIntent(e,t,r,i,!0);let o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=a,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Qh.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function a(){s.read().then(function({value:c,done:u}){if(u){r(o);return}o.lang??=c.lang,Object.assign(o.styles,c.styles),o.items.push(...c.items),a()},i)}const s=t.getReader(),o={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new q5),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:a,transfer:s}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},s).getReader(),u=this._intentStates.get(t);u.streamReader=c;const d=()=>{c.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();this.#t()}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof FD){let i=Vpe;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new oo(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Ws,ra,as,Qo,xy,el,tl,$r,cm,aU,sU,Md,Oc,um;const hn=class hn{constructor({name:e=null,port:t=null,verbosity:r=jfe()}={}){ma(this,$r);ma(this,Ws,Promise.withResolvers());ma(this,ra,null);ma(this,as,null);ma(this,Qo,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(dn(hn,tl).has(t))throw new Error("Cannot use more than one PDFWorker per port.");dn(hn,tl).set(t,this),ga(this,$r,aU).call(this,t)}else ga(this,$r,sU).call(this)}get promise(){return dn(this,Ws).promise}get port(){return dn(this,as)}get messageHandler(){return dn(this,ra)}destroy(){this.destroyed=!0,dn(this,Qo)?.terminate(),Hr(this,Qo,null),dn(hn,tl).delete(dn(this,as)),Hr(this,as,null),dn(this,ra)?.destroy(),Hr(this,ra,null)}static create(e){const t=dn(this,tl).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new hn(e)}static get workerSrc(){if(Cc.workerSrc)return Cc.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return yt(this,"_setupFakeWorkerGlobal",(async()=>dn(this,Oc,um)?dn(this,Oc,um):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ws=new WeakMap,ra=new WeakMap,as=new WeakMap,Qo=new WeakMap,xy=new WeakMap,el=new WeakMap,tl=new WeakMap,$r=new WeakSet,cm=function(){dn(this,Ws).resolve(),dn(this,ra).send("configure",{verbosity:this.verbosity})},aU=function(e){Hr(this,as,e),Hr(this,ra,new Rd("main","worker",e)),dn(this,ra).on("ready",()=>{}),ga(this,$r,cm).call(this)},sU=function(){if(dn(hn,el)||dn(hn,Oc,um)){ga(this,$r,Md).call(this);return}let{workerSrc:e}=hn;try{hn._isSameOrigin(window.location,e)||(e=hn._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Rd("main","worker",t),i=()=>{a.abort(),r.destroy(),t.terminate(),this.destroyed?dn(this,Ws).reject(new Error("Worker was destroyed")):ga(this,$r,Md).call(this)},a=new AbortController;t.addEventListener("error",()=>{dn(this,Qo)||i()},{signal:a.signal}),r.on("test",o=>{if(a.abort(),this.destroyed||!o){i();return}Hr(this,ra,r),Hr(this,as,t),Hr(this,Qo,t),ga(this,$r,cm).call(this)}),r.on("ready",o=>{if(a.abort(),this.destroyed){i();return}try{s()}catch{ga(this,$r,Md).call(this)}});const s=()=>{const o=new Uint8Array;r.send("test",o,[o.buffer])};s();return}catch{L0("The worker has been disabled.")}ga(this,$r,Md).call(this)},Md=function(){dn(hn,el)||(gt("Setting up fake worker."),Hr(hn,el,!0)),hn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){dn(this,Ws).reject(new Error("Worker was destroyed"));return}const t=new rpe;Hr(this,as,t);const r=`fake${Lj(hn,xy)._++}`,i=new Rd(r+"_worker",r,t);e.setup(i,t),Hr(this,ra,new Rd(r,r+"_worker",t)),ga(this,$r,cm).call(this)}).catch(e=>{dn(this,Ws).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Oc=new WeakSet,um=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},ma(hn,Oc),ma(hn,xy,0),ma(hn,el,!1),ma(hn,tl,new WeakMap),Or&&(Hr(hn,el,!0),Cc.workerSrc||="./pdf.worker.mjs"),hn._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!r?.origin||r.origin==="null")return!1;const i=new URL(t,r);return r.origin===i.origin},hn._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},hn.fromPort=e=>{if(Ufe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return hn.create(e)};let ef=hn;class Kpe{#e=new Map;#t=new Map;#r=new Map;#n=new Map;#s=null;constructor(e,t,r,i,a,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new nU,this.fontLoader=new Xfe({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}#a(e,t=null){const r=this.#e.get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return yt(this,"annotationStorage",new $D)}getRenderingIntent(e,t=$s.ENABLE,r=null,i=!1,a=!1){let s=ci.DISPLAY,o=GS;switch(e){case"any":s=ci.ANY;break;case"display":break;case"print":s=ci.PRINT;break;default:gt(`getRenderingIntent - invalid intent: ${e}`)}const c=s&ci.PRINT&&r instanceof W7?r:this.annotationStorage;switch(t){case $s.DISABLE:s+=ci.ANNOTATIONS_DISABLE;break;case $s.ENABLE:break;case $s.ENABLE_FORMS:s+=ci.ANNOTATIONS_FORMS;break;case $s.ENABLE_STORAGE:s+=ci.ANNOTATIONS_STORAGE,o=c.serializable;break;default:gt(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(s+=ci.IS_EDITING),a&&(s+=ci.OPLIST);const{ids:u,hash:d}=c.modifiedIds,h=[s,o.hash,d];return{renderingIntent:s,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#r.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),ui.cleanup(),this._networkStream?.cancelAllRequests(new oo("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{Nt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:s}){if(s){i.close();return}Nt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:s}=this._fullReader;return(!i||!a)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{t.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:s}}),e.on("GetRangeReader",(r,i)=>{Nt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(r.begin,r.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:s,done:o}){if(o){i.close();return}Nt(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{a.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new Gpe(r,this))}),e.on("DocException",r=>{t._capability.reject(Vr(r))}),e.on("PasswordRequest",r=>{this.#s=Promise.withResolvers();try{if(!t.onPassword)throw Vr(r);const i=a=>{a instanceof Error?this.#s.reject(a):this.#s.resolve({password:a})};t.onPassword(i,r.code)}catch(i){this.#s.reject(i)}return this.#s.promise}),e.on("DataLoaded",r=>{t.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,a])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in a){const h=a.error;gt(`Error during font loading: ${h}`),this.commonObjs.resolve(r,h);break}const s=new Gt(a),o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,c=new Jfe(s,o,a.extra,a.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:u}=a;Nt(u,"The imageRef must be defined.");for(const h of this.#t.values())for(const[,f]of h.objs)if(f?.ref===u)return f.dataLen?(this.commonObjs.resolve(r,structuredClone(f)),f.dataLen):null;break;case"FontPath":this.commonObjs.resolve(r,new Zfe(a));break;case"Image":this.commonObjs.resolve(r,a);break;case"Pattern":const d=new er(a);this.commonObjs.resolve(r,d.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,a,s])=>{if(this.destroyed)return;const o=this.#t.get(i);if(!o.objs.has(r)){if(o._intentStates.size===0){s?.bitmap?.close();return}switch(a){case"Image":case"Pattern":o.objs.resolve(r,s);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",r=>{this.destroyed||t.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&gt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=this.#r.get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,e);const s=new Ype(t,a,this,this._params.pdfBug);return this.#t.set(t,s),s});return this.#r.set(t,i),i}getPageIndex(e){return YS(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#a("GetOptionalContentConfig").then(t=>new jpe(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new _pe(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:i[2]}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),ui.cleanup()}}cachedPageNumber(e){if(!YS(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class Xpe{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class yc{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:a,operatorList:s,pageIndex:o,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:y=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Xpe(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=p,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(yc.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");yc.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:a,dependencyTracker:s}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Tc(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),yc.#t.delete(this._canvas),e||=new FD(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),yc.#t.delete(this._canvas),this.callback())))}}const Jpe="5.4.530",Zpe="50cc4adac";class Ii{#e=null;#t=null;#r;#n=null;#s=!1;#a=!1;#i=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return yt(this,"_keyboardManager",new jf([[["Escape","mac+Escape"],Ii.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ii.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ii.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ii.prototype._moveToPrevious],[["Home","mac+Home"],Ii.prototype._moveToBeginning],[["End","mac+End"],Ii.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#a=!1,this.#i=e):this.#a=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#r=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Ii.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#i&&(e.ariaControls=`${this.#i.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const r=this.#t=document.createElement("span");return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=this.#r,e.append(r),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",Gi,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#i&&(e.id=`${this.#i.id}_colorpicker_dropdown`);for(const[r,i]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=r,a.setAttribute("data-l10n-id",Ii.#h[r]);const s=document.createElement("span");a.append(s),s.className="swatch",s.style.backgroundColor=i,a.ariaSelected=i===this.#r,a.addEventListener("click",this.#f.bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ct.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#p){this.#m(e);return}if(e.target===this.#e){this.#n.firstElementChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstElementChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#m(e);return}this.#n.firstElementChild?.focus()}_moveToEnd(e){if(!this.#p){this.#m(e);return}this.#n.lastElementChild?.focus()}#g(e){Ii._keyboardManager.exec(this,e)}#m(e){if(this.#p){this.hideDropdown();return}if(this.#s=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#i?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const r of this.#n.children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class tf{#e=null;#t=null;#r=null;static#n=null;constructor(e){this.#t=e,this.#r=e._uiManager,tf.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,color:r}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",tf.#n[e]),i.addEventListener("input",()=>{this.#r.updateParams(t,i.value)},{signal:this.#r._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function dP(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Sd(n){return Math.max(0,Math.min(255,255*n))}class hP{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Sd(e),[e,e,e]}static G_HTML([e]){const t=dP(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(Sd)}static RGB_HTML(e){return`#${e.map(dP).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[Sd(1-Math.min(1,e+i)),Sd(1-Math.min(1,r+i)),Sd(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,a=1-t,s=1-r,o=Math.min(i,a,s);return["CMYK",i,a,s,o]}}class Qpe{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){tn("Abstract method `_createSVG` called.")}}class Cg extends Qpe{_createSVG(e){return document.createElementNS(es,e)}}const eme=9,wl=new WeakSet,tme=new Date().getTimezoneOffset()*60*1e3;class Mw{static create(e){switch(e.data.annotationType){case In.LINK:return new VD(e);case In.TEXT:return new rme(e);case In.WIDGET:switch(e.data.fieldType){case"Tx":return new ime(e);case"Btn":return e.data.radioButton?new oU(e):e.data.checkBox?new sme(e):new ome(e);case"Ch":return new lme(e);case"Sig":return new ame(e)}return new Bl(e);case In.POPUP:return new JS(e);case In.FREETEXT:return new lU(e);case In.LINE:return new ume(e);case In.SQUARE:return new dme(e);case In.CIRCLE:return new hme(e);case In.POLYLINE:return new cU(e);case In.CARET:return new pme(e);case In.INK:return new GD(e);case In.POLYGON:return new fme(e);case In.HIGHLIGHT:return new uU(e);case In.UNDERLINE:return new mme(e);case In.SQUIGGLY:return new gme(e);case In.STRIKEOUT:return new yme(e);case In.STAMP:return new dU(e);case In.FILEATTACHMENT:return new vme(e);default:return new xn(e)}}}class xn{#e=null;#t=!1;#r=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return xn._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:r,rect:i}=this.data;let a=-1/0,s=-1/0;if(t?.length>=8){for(let o=0;o<t.length;o+=8)t[o+1]>s?(s=t[o+1],a=t[o+2]):t[o+1]===s&&(a=Math.max(a,t[o+2]));return[a,s]}if(r?.length>=1){for(const o of r)for(let c=0,u=o.length;c<u;c+=2)o[c+1]>s?(s=o[c+1],a=o[c]):o[c+1]===s&&(a=Math.max(a,o[c]));if(a!==1/0)return[a,s]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:s}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-a)/r,e[1]=100*(e[1]-s)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Jh}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:r})||this.annotationStorage.setValue(`${Jh}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#r?.popup||this.popup)?.remove(),this.#r=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:r}=e;t&&this.#n(t);let i=this.#r?.popup||this.popup;!i&&r?.text&&(this._createPopup(r),i=this.#r.popup),i&&(i.updateEdited(e),r?.deleted&&(i.remove(),this.#r=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#r?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:c}}}}=this;r?.splice(0,4,...e),t.left=`${100*(e[0]-o)/a}%`,t.top=`${100*(s-e[3]+c)/s}%`,i===0?(t.width=`${100*(e[2]-e[0])/a}%`,t.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),!(this instanceof Bl)&&!(this instanceof VD)&&(a.tabIndex=0);const{style:s}=a;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof JS){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,a),a}const{width:o,height:c}=this;if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,m=t.borderStyle.verticalCornerRadius;if(g>0||m>0){const x=`calc(${g}px * var(--total-scale-factor)) / calc(${m}px * var(--total-scale-factor))`;s.borderRadius=x}else if(this instanceof oU){const x=`calc(${o}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;s.borderRadius=x}switch(t.borderStyle.style){case tc.SOLID:s.borderStyle="solid";break;case tc.DASHED:s.borderStyle="dashed";break;case tc.BEVELED:gt("Unimplemented border style: beveled");break;case tc.INSET:gt("Unimplemented border style: inset");break;case tc.UNDERLINE:s.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(this.#t=!0,s.borderColor=Ge.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):s.borderWidth=0}const u=Ge.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:p}=i.rawDims;s.left=`${100*(u[0]-f)/d}%`,s.top=`${100*(u[1]-p)/h}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(s.width=`${100*o/d}%`,s.height=`${100*c/h}%`):this.setRotation(y,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:s}=this;e%180!==0&&([a,s]=[s,a]),t.style.width=`${100*a/r}%`,t.style.height=`${100*s/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const a=i.detail[t],s=a[0],o=a.slice(1);i.target.style[r]=hP[`${s}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[r]:hP[`${s}_rgb`](o)})};return yt(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||r[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,a]of Object.entries(t)){const s=r[i];if(s){const o={detail:{[i]:a},target:e};s(o),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,a]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,m,v,x]=e.subarray(2,6);if(i===g&&a===m&&t===v&&r===x)return}const{style:s}=this.container;let o;if(this.#t){const{borderColor:g,borderWidth:m}=s;s.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${m}">`],this.container.classList.add("hasBorder")}const c=i-t,u=a-r,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const p=d.createElement("clipPath"),y=`clippath_${this.data.id}`;p.setAttribute("id",y),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let g=2,m=e.length;g<m;g+=8){const v=e[g],x=e[g+1],b=e[g+2],A=e[g+3],w=d.createElement("rect"),S=(b-t)/c,E=(a-x)/u,_=(v-b)/c,D=(x-A)/u;w.setAttribute("x",S),w.setAttribute("y",E),w.setAttribute("width",_),w.setAttribute("height",D),p.append(w),o?.push(`<rect vector-effect="non-scaling-stroke" x="${S}" y="${E}" width="${_}" height="${D}"/>`)}this.#t&&(o.push("</g></svg>')"),s.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let r,i;e?(r={str:e.text},i=e.date):(r=t.contentsObj,i=t.modificationDate),this.#r=new JS({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#r||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#r}render(){tn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:s,exportValues:o}of i){if(a===-1||s===t)continue;const c=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${s}"]`);if(u&&!wl.has(u)){gt(`_getElementsByName - element not allowed: ${s}`);continue}r.push({id:s,exportValue:c,domElement:u})}return r}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,s=i.getAttribute("data-element-id");s!==t&&wl.has(i)&&r.push({id:s,exportValue:a,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class nme extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class VD extends xn{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(r,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#r(r,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),i=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=r,this.container.append(r)),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,r=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),r&&(e.title=r)}_bindNamedAction(e,t,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),r&&(e.title=r),this.#e()}#t(e,t,r="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:r&&(e.title=r),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#r(e,t,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),r&&(e.title=r),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const a=r.get(i);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){gt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:i,refs:a,include:s}=t,o=[];if(i.length!==0||a.length!==0){const d=new Set(a);for(const h of i){const f=this._fieldObjects[h]||[];for(const{id:p}of f)d.add(p)}for(const h of Object.values(this._fieldObjects))for(const f of h)d.has(f.id)===s&&o.push(f)}else for(const d of Object.values(this._fieldObjects))o.push(...d);const c=this.annotationStorage,u=[];for(const d of o){const{id:h}=d;switch(u.push(h),d.type){case"text":{const p=d.defaultValue||"";c.setValue(h,{value:p});break}case"checkbox":case"radiobutton":{const p=d.defaultValue===d.exportValues;c.setValue(h,{value:p});break}case"combobox":case"listbox":{const p=d.defaultValue||"";c.setValue(h,{value:p});break}default:continue}const f=document.querySelector(`[data-element-id="${h}"]`);if(f){if(!wl.has(f)){gt(`_bindResetFormAction - element not allowed: ${h}`);continue}}else continue;f.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}}),!1}}}class rme extends xn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class Bl extends xn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Gn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,a){r.includes("mouse")?e.addEventListener(r,s=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(r,s=>{if(r==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s)}})})}_setEventListeners(e,t,r,i){for(const[a,s]of r)(s==="Action"||this.data.actions?.[s])&&((s==="Focus"||s==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,a,s,i),s==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):s==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ge.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||eme,a=e.style;let s;const o=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(u/(Tw*i))||1,h=u/d;s=Math.min(i,c(h/Tw))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);s=Math.min(i,c(u/Tw))}a.fontSize=`calc(${s}px * var(--total-scale-factor))`,a.color=Ge.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class ime extends Bl{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const a=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=r),a.setValue(s.id,{[i]:r})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let a=i.value||"";const s=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;s&&a.length>s&&(a=a.slice(0,s));let o=i.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=o??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",o??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),wl.add(r),this.contentElement=r,r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:u,datetimeType:d,timeStep:h}=this.data,f=!!d&&this.enableScripting;u&&(r.title=u),this._setRequired(r,this.data.required),s&&(r.maxLength=s),r.addEventListener("input",y=>{e.setValue(t,{value:y.target.value}),this.setPropertyOnSiblings(r,"value",y.target.value,"value"),c.formattedValue=null}),r.addEventListener("resetform",y=>{const g=this.data.defaultFieldValue??"";r.value=c.userValue=g,c.formattedValue=null});let p=y=>{const{formattedValue:g}=c;g!=null&&(y.target.value=g),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",g=>{if(c.focused)return;const{target:m}=g;if(f&&(m.type=d,h&&(m.step=h)),c.userValue){const v=c.userValue;if(f)if(d==="time"){const x=new Date(v),b=[x.getHours(),x.getMinutes(),x.getSeconds()];m.value=b.map(A=>A.toString().padStart(2,"0")).join(":")}else m.value=new Date(v-tme).toISOString().split(d==="date"?"T":".",1)[0];else m.value=v}c.lastCommittedValue=m.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),r.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const m={value(v){c.userValue=v.detail.value??"",f||e.setValue(t,{value:c.userValue.toString()}),v.target.value=c.userValue},formattedValue(v){const{formattedValue:x}=v.detail;c.formattedValue=x,x!=null&&v.target!==document.activeElement&&(v.target.value=x);const b={formattedValue:x};f&&(b.value=x),e.setValue(t,b)},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{const{charLimit:x}=v.detail,{target:b}=v;if(x===0){b.removeAttribute("maxLength");return}b.setAttribute("maxLength",x);let A=c.userValue;!A||A.length<=x||(A=A.slice(0,x),b.value=c.userValue=A,e.setValue(t,{value:A}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:b.selectionStart,selEnd:b.selectionEnd}}))}};this._dispatchEventFromSandbox(m,g)}),r.addEventListener("keydown",g=>{c.commitKey=1;let m=-1;if(g.key==="Escape"?m=0:g.key==="Enter"&&!this.data.multiLine?m=2:g.key==="Tab"&&(c.commitKey=3),m===-1)return;const{value:v}=g.target;c.lastCommittedValue!==v&&(c.lastCommittedValue=v,c.userValue=v,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:m,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const y=p;p=null,r.addEventListener("blur",g=>{if(!c.focused||!g.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);const{target:m}=g;let{value:v}=m;if(f){if(v&&d==="time"){const x=v.split(":").map(b=>parseInt(b,10));v=new Date(2e3,0,1,x[0],x[1],x[2]||0).valueOf(),m.step=""}else v.includes("T")||(v=`${v}T00:00`),v=new Date(v).valueOf();m.type="text"}c.userValue=v,c.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:c.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}),y(g)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",g=>{c.lastCommittedValue=null;const{data:m,target:v}=g,{value:x,selectionStart:b,selectionEnd:A}=v;let w=b,S=A;switch(g.inputType){case"deleteWordBackward":{const E=x.substring(0,b).match(/\w*[^\w]*$/);E&&(w-=E[0].length);break}case"deleteWordForward":{const E=x.substring(b).match(/^[^\w]*\w*/);E&&(S+=E[0].length);break}case"deleteContentBackward":b===A&&(w-=1);break;case"deleteContentForward":b===A&&(S+=1);break}g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,change:m||"",willCommit:!1,selStart:w,selEnd:S}})}),this._setEventListeners(r,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(p&&r.addEventListener("blur",p),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/s;r.classList.add("comb"),r.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class ame extends Bl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class sme extends Bl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return wl.add(a),a.setAttribute("data-element-id",r),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=0,a.addEventListener("change",s=>{const{name:o,checked:c}=s.target;for(const u of this._getElementsByName(o,r)){const d=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(r,{value:c})}),a.addEventListener("resetform",s=>{const o=t.defaultFieldValue||"Off";s.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",s=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class oU extends Bl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const s of this._getElementsByName(t.fieldName,r))e.setValue(s.id,{value:!1});const a=document.createElement("input");if(wl.add(a),a.setAttribute("data-element-id",r),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",s=>{const{name:o,checked:c}=s.target;for(const u of this._getElementsByName(o,r))e.setValue(u.id,{value:!1});e.setValue(r,{value:c})}),a.addEventListener("resetform",s=>{const o=t.defaultFieldValue;s.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const s=t.buttonValue;a.addEventListener("updatefromsandbox",o=>{const c={value:u=>{const d=s===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===r;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class ome extends VD{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class lme extends Bl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");wl.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,r.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),a=!1),i.append(h)}let s=null;if(a){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),i.prepend(d),s=()=>{d.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const o=d=>{const h=d?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=o(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",d=>{const h={value(f){s?.();const p=f.detail.value,y=new Set(Array.isArray(p)?p:[p]);for(const g of i.options)g.selected=y.has(g.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,y=f.detail.remove;p[y].selected=!1,i.remove(y),p.length>0&&Array.prototype.findIndex.call(p,m=>m.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(f){const{index:p,displayValue:y,exportValue:g}=f.detail.insert,m=i.children[p],v=document.createElement("option");v.textContent=y,v.value=g,m?m.before(v):i.append(v),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const y of p){const{displayValue:g,exportValue:m}=y,v=document.createElement("option");v.textContent=g,v.value=m,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const y of f.target.options)y.selected=p.has(y.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),i.addEventListener("input",d=>{const h=o(!0),f=o(!1);e.setValue(t,{value:h}),d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):i.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class JS extends xn{constructor(e){const{data:t,elements:r,parent:i}=e,a=!!i._commentManager;if(super(e,{isRenderable:!a&&xn._hasPopupData(t)}),this.elements=r,a&&xn._hasPopupData(t)){const s=this.popup=this.#e();for(const o of r)o.popup=s}else this.popup=null}#e(){return new cme({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),r=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${mc}${i}`).join(",")),this.container}}class cme{#e=null;#t=this.#W.bind(this);#r=this.#U.bind(this);#n=this.#P.bind(this);#s=this.#A.bind(this);#a=null;#i=null;#o=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#y=null;#x=null;#v=null;#_=null;#S=null;#w=null;#j=!1;#b=null;#E=null;constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:a,contentsObj:s,richText:o,parent:c,rect:u,parentRect:d,open:h,commentManager:f=null}){this.#i=e,this.#S=i,this.#o=s,this.#_=o,this.#h=c,this.#a=t,this.#v=u,this.#d=d,this.#l=r,this.#e=f,this.#b=r[0],this.#c=WS.toDateObject(a),this.trigger=r.flatMap(p=>p.getElementsToTriggerPopup()),f||(this.#N(),this.#i.hidden=!0,h&&this.#A())}#N(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const t of this.trigger)t.addEventListener("click",this.#s,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#r,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#T(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#y=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#b.container.after(this.#p);return}if(this.#y||this.#T(),!this.#y)return;const{signal:e}=this.#m=new AbortController,t=this.#b.hasOwnCommentButton,r=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},a=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#p=this.#b.container;for(const s of this.trigger)s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.addEventListener("keydown",this.#t,{signal:e}),s.addEventListener("click",r,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),s.classList.add("popupTriggerArea")}else{const s=this.#p=document.createElement("button");s.className="annotationCommentButton";const o=this.#b.container;s.style.zIndex=o.style.zIndex+1,s.tabIndex=0,s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#C(),s.addEventListener("keydown",this.#t,{signal:e}),s.addEventListener("click",r,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),o.after(s)}}#C(){if(this.#b.extraPopupElement&&!this.#b.editor)return;this.#p||this.renderCommentButton();const[e,t]=this.#y,{style:r}=this.#p;r.left=`calc(${e}%)`,r.top=`calc(${t}% - var(--comment-button-dim))`}#F(){this.#b.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#b.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:t,opacity:r,creationDate:i,modificationDate:a}=this.#b.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:r,creationDate:i,modificationDate:a}}get elementBeforePopup(){return this.#p}get comment(){return this.#E||=this.#b.commentText,this.#E}set comment(e){e!==this.comment&&(this.#b.commentText=this.#E=e)}focus(){this.#b.container?.focus()}get parentBoundingClientRect(){return this.#b.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=t)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#x)return this.#x;const{x:e,y:t,height:r}=this.#p.getBoundingClientRect(),{x:i,y:a,width:s,height:o}=this.#b.layer.getBoundingClientRect();return[(e-i)/s,(t+r-a)/o]}set commentPopupPosition(e){this.#x=e}hasDefaultPopupPosition(){return this.#x===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,r]=this.#x||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:a,y:s,width:o,height:c}=i;this.#e.showDialog(null,this,a+t*o,s+r*c,{...e,parentDimensions:i})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#a){const r=e.style.outlineColor=Ge.makeHexColor(...this.#a);e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#S?.str){const r=document.createElement("span");r.className="title",t.append(r),{dir:r.dir,str:r.textContent}=this.#S}if(e.append(t),this.#c){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),r.dateTime=this.#c.toISOString(),t.append(r)}B7({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#i.append(e)}get#O(){const e=this.#_,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#_.html||null}get#I(){return this.#O?.attributes?.style?.fontSize||0}get#L(){return this.#O?.attributes?.style?.color||null}#R(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#L,fontSize:this.#I?`calc(${this.#I}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return r}#W(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#A()}updateEdited({rect:e,popup:t,deleted:r}){if(this.#e){r?(this.remove(),this.#E=null):t&&(t.deleted?this.remove():(this.#F(),this.#E=t.text)),e&&(this.#y=null,this.#T(),this.#C());return}if(r||t?.deleted){this.remove();return}this.#N(),this.#w||={contentsObj:this.#o,richText:this.#_},e&&(this.#u=null),t&&t.text&&(this.#_=this.#R(t.text),this.#c=WS.toDateObject(t.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#_}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#j=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#D(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:a}}}=this.#h;let s=!!this.#d,o=s?this.#d:this.#v;for(const y of this.#l)if(!o||Ge.intersect(y.data.rect,o)!==null){o=y.data.rect,s=!0;break}const c=Ge.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),d=s?o[2]-o[0]+5:0,h=c[0]+d,f=c[1];this.#u=[100*(h-i)/t,100*(f-a)/r];const{style:p}=this.#i;p.left=`${this.#u[0]}%`,p.top=`${this.#u[1]}%`}#A(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#P(),this.#i.addEventListener("click",this.#s),this.#i.addEventListener("keydown",this.#t)):(this.#U(),this.#i.removeEventListener("click",this.#s),this.#i.removeEventListener("keydown",this.#t))}#P(){this.#g||this.render(),this.isVisible?this.#f&&this.#i.classList.add("focused"):(this.#D(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#U(){this.#i.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#j=this.isVisible,this.#j&&(this.#i.hidden=!0)}maybeShow(){this.#e||(this.#N(),this.#j&&(this.#g||this.#P(),this.#j=!1,this.#i.hidden=!1))}get isVisible(){return this.#e?!1:this.#i.hidden===!1}}class lU extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=vt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class ume extends xn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:r}=this,i=this.svgFactory.create(t,r,!0),a=this.#e=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class dme extends xn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:r}=this,i=this.svgFactory.create(t,r,!0),a=e.borderStyle.width,s=this.#e=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",a/2),s.setAttribute("y",a/2),s.setAttribute("width",t-a),s.setAttribute("height",r-a),s.setAttribute("stroke-width",a||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class hme extends xn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:r}=this,i=this.svgFactory.create(t,r,!0),a=e.borderStyle.width,s=this.#e=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",t/2),s.setAttribute("cy",r/2),s.setAttribute("rx",t/2-a/2),s.setAttribute("ry",r/2-a/2),s.setAttribute("stroke-width",a||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class cU extends xn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:r,popupRef:i},width:a,height:s}=this;if(!t)return this.container;const o=this.svgFactory.create(a,s,!0);let c=[];for(let d=0,h=t.length;d<h;d+=2){const f=t[d]-e[0],p=e[3]-t[d+1];c.push(`${f},${p}`)}c=c.join(" ");const u=this.#e=this.svgFactory.createElement(this.svgElementName);return u.setAttribute("points",c),u.setAttribute("stroke-width",r.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class fme extends cU{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pme extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class GD extends xn{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?vt.HIGHLIGHT:vt.INK}#r(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:r,borderStyle:i,popupRef:a}}=this,{transform:s,width:o,height:c}=this.#r(t,e),u=this.svgFactory.create(o,c,!0),d=this.#e=this.svgFactory.createElement("svg:g");u.append(d),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",s);for(let h=0,f=r.length;h<f;h++){const p=this.svgFactory.createElement(this.svgElementName);this.#t.push(p),p.setAttribute("points",r[h].join(",")),d.append(p)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:r,rect:i}=e,a=this.#e;if(t>=0&&a.setAttribute("stroke-width",t||1),r)for(let s=0,o=this.#t.length;s<o;s++)this.#t[s].setAttribute("points",r[s].join(","));if(i){const{transform:s,width:o,height:c}=this.#r(this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${o} ${c}`),a.setAttribute("transform",s)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class uU extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=vt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class mme extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class gme extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class yme extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class dU extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=vt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class vme extends xn{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let r;t.hasAppearance||t.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:i}=Gn.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class YD{#e=null;#t=null;#r=null;#n=new Map;#s=null;#a=null;#i=[];#o=!1;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:a,viewport:s,structTreeLayer:o,commentManager:c,linkService:u,annotationStorage:d}){this.div=e,this.#e=t,this.#t=r,this.#s=o||null,this.#a=u||null,this.#r=d||new $D,this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=c||null}hasEditableAnnotations(){return this.#n.size>0}async render(e){const{annotations:t}=e,r=this.div;bl(r,this.viewport);const i=new Map,a=[],s={data:null,layer:r,linkService:this.#a,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Cg,annotationStorage:this.#r,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===In.POPUP;if(c){const h=i.get(o.id);if(!h)continue;if(!this._commentManager){a.push(o);continue}s.elements=h}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;s.data=o;const u=Mw.create(s);if(!u.isRenderable)continue;if(!c&&(this.#i.push(u),o.popupRef)){const h=i.get(o.popupRef);h?h.push(u):i.set(o.popupRef,[u])}const d=u.render();o.hidden&&(d.style.visibility="hidden"),u._isEditable&&(this.#n.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}await this.#c();for(const o of a){const c=s.elements=i.get(o.id);s.data=o;const u=Mw.create(s);if(!u.isRenderable)continue;const d=u.render();u.contentElement.id=`${mc}${o.id}`,o.hidden&&(d.style.visibility="hidden"),c.at(-1).container.after(d)}this.#l()}async#c(){if(this.#i.length===0)return;this.div.replaceChildren();const e=[];if(!this.#o){this.#o=!0;for(const{contentElement:r,data:{id:i}}of this.#i){const a=r.id=`${mc}${i}`;e.push(this.#s?.getAriaAttributes(a).then(s=>{if(s)for(const[o,c]of s)r.setAttribute(o,c)}))}}this.#i.sort(({data:{rect:[r,i,a,s]}},{data:{rect:[o,c,u,d]}})=>{if(r===a&&i===s)return 1;if(o===u&&c===d)return-1;const h=s,f=i,p=(i+s)/2,y=d,g=c,m=(c+d)/2;if(p>=y&&m<=f)return-1;if(m>=h&&p<=g)return 1;const v=(r+a)/2,x=(o+u)/2;return v-x});const t=document.createDocumentFragment();for(const r of this.#i)t.append(r.container),this._commentManager?(r.extraPopupElement?.popup||r.popup)?.renderCommentButton():r.extraPopupElement&&t.append(r.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),this.#e)for(const r of this.#i)this.#e.addPointerInTextLayer(r.contentElement,!1)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#a,svgFactory:new Cg,parent:this};for(const r of e){r.borderStyle||=YD._defaultBorderStyle,t.data=r;const i=Mw.create(t);i.isRenderable&&(i.render(),i.contentElement.id=`${mc}${r.id}`,this.#i.push(i))}await this.#c()}update({viewport:e}){const t=this.div;this.viewport=e,bl(t,{rotation:e.rotation}),this.#l(),t.hidden=!1}#l(){if(!this.#t)return;const e=this.div;for(const[t,r]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):i.append(r);const s=this.#n.get(t);s&&(s._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,r),s._hasNoCanvas=!1):s.canvas=r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:r,rotation:i}=e,a=new nme({data:{id:r,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#r});return a.render(),a.contentElement.id=`${mc}${r}`,a.createOrUpdatePopup(),this.#i.push(a),a}removeAnnotation(e){const t=this.#i.findIndex(i=>i.data.id===e);if(t<0)return;const[r]=this.#i.splice(t,1);this.#e?.removePointerInTextLayer(r.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return yt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:tc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const wp=/\r\n?|\n/g;class tr extends st{#e="";#t=`${this.id}-editor`;#r=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=tr.prototype,t=a=>a.isEmpty(),r=lo.TRANSLATE_SMALL,i=lo.TRANSLATE_BIG;return yt(this,"_keyboardManager",new jf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=vt.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||tr._defaultColor||st._defaultLineColor,this.#n=e.fontSize||tr._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,t){st.initialize(e,t);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Ct.FREETEXT_SIZE:tr._defaultFontSize=t;break;case Ct.FREETEXT_COLOR:tr._defaultColor=t;break}}updateParams(e,t){switch(e){case Ct.FREETEXT_SIZE:this.#s(t);break;case Ct.FREETEXT_COLOR:this.#a(t);break}}static get defaultPropertiesToUpdate(){return[[Ct.FREETEXT_SIZE,tr._defaultFontSize],[Ct.FREETEXT_COLOR,tr._defaultColor||st._defaultLineColor]]}get propertiesToUpdate(){return[[Ct.FREETEXT_SIZE,this.#n],[Ct.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new tf(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ct.FREETEXT_COLOR}#s(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#o()},r=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(e){const t=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-tr._internalPadding*e,-(tr._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const e=this._uiManager.combinedSignal(this.#r);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#i(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(tr.#c(r)),t=r);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,s=a.style.display,o=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=s,a.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#i().trimEnd();if(e===t)return;const r=i=>{if(this.#e=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){tr._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[o,c]=this.getInitialTranslation();[o,c]=this.pageTranslationToScreen(o,c);const[u,d]=this.pageDimensions,[h,f]=this.pageTranslation;let p,y;switch(this.rotation){case 0:p=e+(s[0]-h)/u,y=t+this.height-(s[1]-f)/d;break;case 90:p=e+(s[0]-h)/u,y=t-(s[1]-f)/d,[o,c]=[c,-o];break;case 180:p=e-this.width+(s[0]-h)/u,y=t-(s[1]-f)/d,[o,c]=[-o,-c];break;case 270:p=e+(s[0]-h-this.height*d)/u,y=t+(s[1]-f-this.width*u)/d,[o,c]=[-c,o];break}this.setAt(p*i,y*a,o,c)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(wp,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:r}=t;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const i=tr.#d(t.getData("text")||"").replaceAll(wp,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const s=a.getRangeAt(0);if(!i.includes(`
`)){s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:o,startOffset:c}=s,u=[],d=[];if(o.nodeType===Node.TEXT_NODE){const p=o.parentElement;if(d.push(o.nodeValue.slice(c).replaceAll(wp,"")),p!==this.editorDiv){let y=u;for(const g of this.editorDiv.childNodes){if(g===p){y=d;continue}y.push(tr.#c(g))}}u.push(o.nodeValue.slice(0,c).replaceAll(wp,""))}else if(o===this.editorDiv){let p=u,y=0;for(const g of this.editorDiv.childNodes)y++===c&&(p=d),p.push(tr.#c(g))}this.#e=`${u.join(`
`)}${i}${d.join(`
`)}`,this.#l();const h=new Range;let f=Math.sumPrecise(u.map(p=>p.length));for(const{firstChild:p}of this.editorDiv.childNodes)if(p.nodeType===Node.TEXT_NODE){const y=p.nodeValue.length;if(f<=y){h.setStart(p,f),h.setEnd(p,f);break}f-=y}a.removeAllRanges(),a.addRange(h)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(" "," ")}static#d(e){return e.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=tr._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,r){let i=null;if(e instanceof lU){const{data:{defaultAppearanceData:{fontSize:s,fontColor:o},rect:c,rotation:u,id:d,popupRef:h,richText:f,contentsObj:p,creationDate:y,modificationDate:g},textContent:m,textPosition:v,parent:{page:{pageNumber:x}}}=e;if(!m||m.length===0)return null;i=e={annotationType:vt.FREETEXT,color:Array.from(o),fontSize:s,value:m.join(`
`),position:v,pageIndex:x-1,rect:c.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:h,comment:p?.str||null,richText:f,creationDate:y,modificationDate:g}}const a=await super.deserialize(e,t,r);return a.#n=e.fontSize,a.color=Ge.makeHexColor(...e.color),a.#e=tr.#d(e.value),a._initialData=i,e.comment&&a.setCommentData(e),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=st._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!this.#f(r)?null:(r.id=this.annotationElementId,r)}#f(e){const{value:t,fontSize:r,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((s,o)=>s!==i[o])||e.pageIndex!==a}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:r}=t;r.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,r.color=this.color,t.replaceChildren();for(const i of this.#e.split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),t.append(a)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Ke{static PRECISION=1e-4;toSVGPath(){tn("Abstract method `toSVGPath` must be implemented.")}get box(){tn("Abstract getter `box` must be implemented.")}serialize(e,t){tn("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,i,a,s){s||=new Float32Array(e.length);for(let o=0,c=e.length;o<c;o+=2)s[o]=t+e[o]*i,s[o+1]=r+e[o+1]*a;return s}static _rescaleAndSwap(e,t,r,i,a,s){s||=new Float32Array(e.length);for(let o=0,c=e.length;o<c;o+=2)s[o]=t+e[o+1]*i,s[o+1]=r+e[o]*a;return s}static _translate(e,t,r,i){i||=new Float32Array(e.length);for(let a=0,s=e.length;a<s;a+=2)i[a]=t+e[a],i[a+1]=r+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,i,a){switch(a){case 90:return[1-t/r,e/i];case 180:return[1-e/r,1-t/i];case 270:return[t/r,1-e/i];default:return[e/r,t/i]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,i,a,s){return[(e+5*r)/6,(t+5*i)/6,(5*r+a)/6,(5*i+s)/6,(r+a)/2,(i+s)/2]}}class Yo{#e;#t=[];#r;#n;#s=[];#a=new Float32Array(18);#i;#o;#c;#l;#h;#d;#f=[];static#g=8;static#m=2;static#u=Yo.#g+Yo.#m;constructor({x:e,y:t},r,i,a,s,o=0){this.#e=r,this.#d=a*i,this.#n=s,this.#a.set([NaN,NaN,NaN,NaN,e,t],6),this.#r=o,this.#l=Yo.#g*i,this.#c=Yo.#u*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#a[8])}#p(){const e=this.#a.subarray(4,6),t=this.#a.subarray(16,18),[r,i,a,s]=this.#e;return[(this.#i+(e[0]-t[0])/2-r)/a,(this.#o+(e[1]-t[1])/2-i)/s,(this.#i+(t[0]-e[0])/2-r)/a,(this.#o+(t[1]-e[1])/2-i)/s]}add({x:e,y:t}){this.#i=e,this.#o=t;const[r,i,a,s]=this.#e;let[o,c,u,d]=this.#a.subarray(8,12);const h=e-u,f=t-d,p=Math.hypot(h,f);if(p<this.#c)return!1;const y=p-this.#l,g=y/p,m=g*h,v=g*f;let x=o,b=c;o=u,c=d,u+=m,d+=v,this.#f?.push(e,t);const A=-v/y,w=m/y,S=A*this.#d,E=w*this.#d;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([u+S,d+E],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([u-S,d-E],16),isNaN(this.#a[6])?(this.#s.length===0&&(this.#a.set([o+S,c+E],2),this.#s.push(NaN,NaN,NaN,NaN,(o+S-r)/a,(c+E-i)/s),this.#a.set([o-S,c-E],14),this.#t.push(NaN,NaN,NaN,NaN,(o-S-r)/a,(c-E-i)/s)),this.#a.set([x,b,o,c,u,d],6),!this.isEmpty()):(this.#a.set([x,b,o,c,u,d],6),Math.abs(Math.atan2(b-c,x-o)-Math.atan2(v,m))<Math.PI/2?([o,c,u,d]=this.#a.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((o+u)/2-r)/a,((c+d)/2-i)/s),[o,c,x,b]=this.#a.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((x+o)/2-r)/a,((b+c)/2-i)/s),!0):([x,b,o,c,u,d]=this.#a.subarray(0,6),this.#s.push(((x+5*o)/6-r)/a,((b+5*c)/6-i)/s,((5*o+u)/6-r)/a,((5*c+d)/6-i)/s,((o+u)/2-r)/a,((c+d)/2-i)/s),[u,d,o,c,x,b]=this.#a.subarray(12,18),this.#t.push(((x+5*o)/6-r)/a,((b+5*c)/6-i)/s,((5*o+u)/6-r)/a,((5*c+d)/6-i)/s,((o+u)/2-r)/a,((c+d)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#s,t=this.#t;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#y();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#v(r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#x(r),r.join(" ")}#y(){const[e,t,r,i]=this.#e,[a,s,o,c]=this.#p();return`M${(this.#a[2]-e)/r} ${(this.#a[3]-t)/i} L${(this.#a[4]-e)/r} ${(this.#a[5]-t)/i} L${a} ${s} L${o} ${c} L${(this.#a[16]-e)/r} ${(this.#a[17]-t)/i} L${(this.#a[14]-e)/r} ${(this.#a[15]-t)/i} Z`}#x(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#v(e){const[t,r,i,a]=this.#e,s=this.#a.subarray(4,6),o=this.#a.subarray(16,18),[c,u,d,h]=this.#p();e.push(`L${(s[0]-t)/i} ${(s[1]-r)/a} L${c} ${u} L${d} ${h} L${(o[0]-t)/i} ${(o[1]-r)/a}`)}newFreeDrawOutline(e,t,r,i,a,s){return new hU(e,t,r,i,a,s)}getOutlines(){const e=this.#s,t=this.#t,r=this.#a,[i,a,s,o]=this.#e,c=new Float32Array((this.#f?.length??0)+2);for(let h=0,f=c.length-2;h<f;h+=2)c[h]=(this.#f[h]-i)/s,c[h+1]=(this.#f[h+1]-a)/o;if(c[c.length-2]=(this.#i-i)/s,c[c.length-1]=(this.#o-a)/o,isNaN(r[6])&&!this.isEmpty())return this.#_(c);const u=new Float32Array(this.#s.length+24+this.#t.length);let d=e.length;for(let h=0;h<d;h+=2){if(isNaN(e[h])){u[h]=u[h+1]=NaN;continue}u[h]=e[h],u[h+1]=e[h+1]}d=this.#w(u,d);for(let h=t.length-6;h>=6;h-=6)for(let f=0;f<6;f+=2){if(isNaN(t[h+f])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[h+f],u[d+1]=t[h+f+1],d+=2}return this.#S(u,d),this.newFreeDrawOutline(u,c,this.#e,this.#h,this.#r,this.#n)}#_(e){const t=this.#a,[r,i,a,s]=this.#e,[o,c,u,d]=this.#p(),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-r)/a,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-r)/a,(t[5]-i)/s,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-r)/a,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-r)/a,(t[15]-i)/s],0),this.newFreeDrawOutline(h,e,this.#e,this.#h,this.#r,this.#n)}#S(e,t){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6}#w(e,t){const r=this.#a.subarray(4,6),i=this.#a.subarray(16,18),[a,s,o,c]=this.#e,[u,d,h,f]=this.#p();return e.set([NaN,NaN,NaN,NaN,(r[0]-a)/o,(r[1]-s)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(i[0]-a)/o,(i[1]-s)/c],t),t+=24}}class hU extends Ke{#e;#t=new Float32Array(4);#r;#n;#s;#a;#i;constructor(e,t,r,i,a,s){super(),this.#i=e,this.#s=t,this.#e=r,this.#a=i,this.#r=a,this.#n=s,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(s);const[o,c,u,d]=this.#t;for(let h=0,f=e.length;h<f;h+=2)e[h]=(e[h]-o)/u,e[h+1]=(e[h+1]-c)/d;for(let h=0,f=t.length;h<f;h+=2)t[h]=(t[h]-o)/u,t[h+1]=(t[h+1]-c)/d}toSVGPath(){const e=[`M${this.#i[4]} ${this.#i[5]}`];for(let t=6,r=this.#i.length;t<r;t+=6){if(isNaN(this.#i[t])){e.push(`L${this.#i[t+4]} ${this.#i[t+5]}`);continue}e.push(`C${this.#i[t]} ${this.#i[t+1]} ${this.#i[t+2]} ${this.#i[t+3]} ${this.#i[t+4]} ${this.#i[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,r,i],a){const s=r-e,o=i-t;let c,u;switch(a){case 0:c=Ke._rescale(this.#i,e,i,s,-o),u=Ke._rescale(this.#s,e,i,s,-o);break;case 90:c=Ke._rescaleAndSwap(this.#i,e,t,s,o),u=Ke._rescaleAndSwap(this.#s,e,t,s,o);break;case 180:c=Ke._rescale(this.#i,r,t,-s,o),u=Ke._rescale(this.#s,r,t,-s,o);break;case 270:c=Ke._rescaleAndSwap(this.#i,r,i,-s,-o),u=Ke._rescaleAndSwap(this.#s,r,i,-s,-o);break}return{outline:Array.from(c),points:[Array.from(u)]}}#o(e){const t=this.#i;let r=t[4],i=t[5];const a=[r,i,r,i];let s=r,o=i,c=r,u=i;const d=e?Math.max:Math.min,h=new Float32Array(4);for(let p=6,y=t.length;p<y;p+=6){const g=t[p+4],m=t[p+5];isNaN(t[p])?(Ge.pointBoundingBox(g,m,a),o>m?(s=g,o=m):o===m&&(s=d(s,g)),u<m?(c=g,u=m):u===m&&(c=d(c,g))):(h[0]=h[1]=1/0,h[2]=h[3]=-1/0,Ge.bezierBoundingBox(r,i,...t.slice(p,p+6),h),Ge.rectBoundingBox(h[0],h[1],h[2],h[3],a),o>h[1]?(s=h[0],o=h[1]):o===h[1]&&(s=d(s,h[0])),u<h[3]?(c=h[2],u=h[3]):u===h[3]&&(c=d(c,h[2]))),r=g,i=m}const f=this.#t;f[0]=a[0]-this.#r,f[1]=a[1]-this.#r,f[2]=a[2]-a[0]+2*this.#r,f[3]=a[3]-a[1]+2*this.#r,this.firstPoint=[s,o],this.lastPoint=[c,u]}get box(){return this.#t}newOutliner(e,t,r,i,a,s=0){return new Yo(e,t,r,i,a,s)}getNewOutline(e,t){const[r,i,a,s]=this.#t,[o,c,u,d]=this.#e,h=a*u,f=s*d,p=r*u+o,y=i*d+c,g=this.newOutliner({x:this.#s[0]*h+p,y:this.#s[1]*f+y},this.#e,this.#a,e,this.#n,t??this.#r);for(let m=2;m<this.#s.length;m+=2)g.add({x:this.#s[m]*h+p,y:this.#s[m+1]*f+y});return g.getOutlines()}}class ZS{#e;#t;#r;#n=[];#s=[];constructor(e,t=0,r=0,i=!0){const a=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:g,y:m,width:v,height:x}of e){const b=Math.floor((g-t)/s)*s,A=Math.ceil((g+v+t)/s)*s,w=Math.floor((m-t)/s)*s,S=Math.ceil((m+x+t)/s)*s,E=[b,w,S,!0],_=[A,w,S,!1];this.#n.push(E,_),Ge.rectBoundingBox(b,w,A,S,a)}const o=a[2]-a[0]+2*r,c=a[3]-a[1]+2*r,u=a[0]-r,d=a[1]-r;let h=i?-1/0:1/0,f=1/0;const p=this.#n.at(i?-1:-2),y=[p[0],p[2]];for(const g of this.#n){const[m,v,x,b]=g;!b&&i?v<f?(f=v,h=m):v===f&&(h=Math.max(h,m)):b&&!i&&(v<f?(f=v,h=m):v===f&&(h=Math.min(h,m))),g[0]=(m-u)/o,g[1]=(v-d)/c,g[2]=(x-d)/c}this.#e=new Float32Array([u,d,o,c]),this.#t=[h,f],this.#r=y}getOutlines(){this.#n.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#a(e)}#a(e){const t=[],r=new Set;for(const s of e){const[o,c,u]=s;t.push([o,c,s],[o,u,s])}t.sort((s,o)=>s[1]-o[1]||s[0]-o[0]);for(let s=0,o=t.length;s<o;s+=2){const c=t[s][2],u=t[s+1][2];c.push(u),u.push(c),r.add(c),r.add(u)}const i=[];let a;for(;r.size>0;){const s=r.values().next().value;let[o,c,u,d,h]=s;r.delete(s);let f=o,p=c;for(a=[o,u],i.push(a);;){let y;if(r.has(d))y=d;else if(r.has(h))y=h;else break;r.delete(y),[o,c,u,d,h]=y,f!==o&&(a.push(f,p,o,p===c?c:u),f=o),p=p===c?u:c}a.push(f,p)}return new xme(i,this.#e,this.#t,this.#r)}#i(e){const t=this.#s;let r=0,i=t.length-1;for(;r<=i;){const a=r+i>>1,s=t[a][0];if(s===e)return a;s<e?r=a+1:i=a-1}return i+1}#o([,e,t]){const r=this.#i(e);this.#s.splice(r,0,[e,t])}#c([,e,t]){const r=this.#i(e);for(let i=r;i<this.#s.length;i++){const[a,s]=this.#s[i];if(a!==e)break;if(a===e&&s===t){this.#s.splice(i,1);return}}for(let i=r-1;i>=0;i--){const[a,s]=this.#s[i];if(a!==e)break;if(a===e&&s===t){this.#s.splice(i,1);return}}}#l(e){const[t,r,i]=e,a=[[t,r,i]],s=this.#i(i);for(let o=0;o<s;o++){const[c,u]=this.#s[o];for(let d=0,h=a.length;d<h;d++){const[,f,p]=a[d];if(!(u<=f||p<=c)){if(f>=c){if(p>u)a[d][1]=u;else{if(h===1)return[];a.splice(d,1),d--,h--}continue}a[d][2]=c,p>u&&a.push([t,u,p])}}}return a}}class xme extends Ke{#e;#t;constructor(e,t,r,i){super(),this.#t=e,this.#e=t,this.firstPoint=r,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[r,i]=t;e.push(`M${r} ${i}`);for(let a=2;a<t.length;a+=2){const s=t[a],o=t[a+1];s===r?(e.push(`V${o}`),i=o):o===i&&(e.push(`H${s}`),r=s)}e.push("Z")}return e.join(" ")}serialize([e,t,r,i],a){const s=[],o=r-e,c=i-t;for(const u of this.#t){const d=new Array(u.length);for(let h=0;h<u.length;h+=2)d[h]=e+u[h]*o,d[h+1]=i-u[h+1]*c;s.push(d)}return s}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class QS extends Yo{newFreeDrawOutline(e,t,r,i,a,s){return new bme(e,t,r,i,a,s)}}class bme extends hU{newOutliner(e,t,r,i,a,s=0){return new QS(e,t,r,i,a,s)}}class Cn extends st{#e=null;#t=0;#r;#n=null;#s=null;#a=null;#i=null;#o=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#m=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=vt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Cn.prototype;return yt(this,"_keyboardManager",new jf([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Cn._defaultColor,this.#p=e.thickness||Cn._defaultThickness,this.opacity=e.opacity||Cn._defaultOpacity,this.#r=e.boxes||null,this.#y=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#v(e),this.#b()):this.#r&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#i=e.focusNode,this.#o=e.focusOffset,this.#x(),this.#b(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#x(){const e=new ZS(this.#r,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new ZS(this.#r,.0025,.001,this._uiManager.direction==="ltr");this.#a=t.getOutlines();const{firstPoint:r}=this.#l;this.#f=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height];const{lastPoint:i}=this.#a;this.#g=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#v({highlightOutlines:e,highlightId:t,clipPathId:r}){this.#l=e;const i=1.5;if(this.#a=e.getNewOutline(this.#p/2+i,.0025),t>=0)this.#h=t,this.#n=r,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const h=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Cn.#E(this.#l.box,(h-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:Cn.#E(this.#a.box,h),path:{d:this.#a.toSVGPath()}})}const[a,s,o,c]=e.box;switch(this.rotation){case 0:this.x=a,this.y=s,this.width=o,this.height=c;break;case 90:{const[h,f]=this.parentDimensions;this.x=s,this.y=1-a,this.width=o*f/h,this.height=c*h/f;break}case 180:this.x=1-a,this.y=1-s,this.width=o,this.height=c;break;case 270:{const[h,f]=this.parentDimensions;this.x=1-s,this.y=a,this.width=o*f/h,this.height=c*h/f;break}}const{firstPoint:u}=e;this.#f=[(u[0]-a)/o,(u[1]-s)/c];const{lastPoint:d}=this.#a;this.#g=[(d[0]-a)/o,(d[1]-s)/c]}static initialize(e,t){st.initialize(e,t),Cn._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Ct.HIGHLIGHT_COLOR:Cn._defaultColor=t;break;case Ct.HIGHLIGHT_THICKNESS:Cn._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case Ct.HIGHLIGHT_COLOR:this.#_(t);break;case Ct.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[Ct.HIGHLIGHT_COLOR,Cn._defaultColor],[Ct.HIGHLIGHT_THICKNESS,Cn._defaultThickness]]}get propertiesToUpdate(){return[[Ct.HIGHLIGHT_COLOR,this.color||Cn._defaultColor],[Ct.HIGHLIGHT_THICKNESS,this.#p||Cn._defaultThickness],[Ct.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#s?.updateColor(this.color),super.onUpdatedColor()}#_(e){const t=(a,s)=>{this.color=a,this.opacity=s,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,Cn._defaultOpacity),undo:t.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#S(e){const t=this.#p,r=i=>{this.#p=i,this.#w(i)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#s=new Ii({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#C())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#C())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#j(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#b(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#j():e&&(this.#b(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#w(e){this.#d&&(this.#v({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}#j(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#b(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([e,t,r,i],a){switch(a){case 90:return[1-t-i,e,i,r];case 180:return[1-e-r,1-t-i,r,i];case 270:return[t,1-e-r,i,r]}return[e,t,r,i]}rotate(e){const{drawLayer:t}=this.parent;let r;this.#d?(e=(e-this.rotation+360)%360,r=Cn.#E(this.#l.box,e)):r=Cn.#E([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:r,root:{"data-main-rotation":e}}),t.updateProperties(this.#m,{bbox:Cn.#E(this.#a.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#N.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(),z7(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#N(e){Cn._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#i,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#d||this.#T(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#C(){return this.#d?this.rotation:0}#F(){if(this.#d)return null;const[e,t]=this.pageDimensions,[r,i]=this.pageTranslation,a=this.#r,s=new Float32Array(a.length*8);let o=0;for(const{x:c,y:u,width:d,height:h}of a){const f=c*e+r,p=(1-u)*t+i;s[o]=s[o+4]=f,s[o+1]=s[o+3]=p,s[o+2]=s[o+6]=f+d*e,s[o+5]=s[o+7]=p-h*t,o+=8}return s}#O(e){return this.#l.serialize(e,this.#C())}static startHighlighting(e,t,{target:r,x:i,y:a}){const{x:s,y:o,width:c,height:u}=r.getBoundingClientRect(),d=new AbortController,h=e.combinedSignal(d),f=p=>{d.abort(),this.#L(e,p)};window.addEventListener("blur",f,{signal:h}),window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("pointerdown",_n,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",Gi,{signal:h}),r.addEventListener("pointermove",this.#I.bind(this,e),{signal:h}),this._freeHighlight=new QS({x:i,y:a},[s,o,c,u],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#I(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#L(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,r){let i=null;if(e instanceof uU){const{data:{quadPoints:y,rect:g,rotation:m,id:v,color:x,opacity:b,popupRef:A,richText:w,contentsObj:S,creationDate:E,modificationDate:_},parent:{page:{pageNumber:D}}}=e;i=e={annotationType:vt.HIGHLIGHT,color:Array.from(x),opacity:b,quadPoints:y,boxes:null,pageIndex:D-1,rect:g.slice(0),rotation:m,annotationElementId:v,id:v,deleted:!1,popupRef:A,richText:w,comment:S?.str||null,creationDate:E,modificationDate:_}}else if(e instanceof GD){const{data:{inkLists:y,rect:g,rotation:m,id:v,color:x,borderStyle:{rawWidth:b},popupRef:A,richText:w,contentsObj:S,creationDate:E,modificationDate:_},parent:{page:{pageNumber:D}}}=e;i=e={annotationType:vt.HIGHLIGHT,color:Array.from(x),thickness:b,inkLists:y,boxes:null,pageIndex:D-1,rect:g.slice(0),rotation:m,annotationElementId:v,id:v,deleted:!1,popupRef:A,richText:w,comment:S?.str||null,creationDate:E,modificationDate:_}}const{color:a,quadPoints:s,inkLists:o,opacity:c}=e,u=await super.deserialize(e,t,r);u.color=Ge.makeHexColor(...a),u.opacity=c||1,o&&(u.#p=e.thickness),u._initialData=i,e.comment&&u.setCommentData(e);const[d,h]=u.pageDimensions,[f,p]=u.pageTranslation;if(s){const y=u.#r=[];for(let g=0;g<s.length;g+=8)y.push({x:(s[g]-f)/d,y:1-(s[g+1]-p)/h,width:(s[g+2]-s[g])/d,height:(s[g+1]-s[g+5])/h});u.#x(),u.#b(),u.rotate(u.rotation)}else if(o){u.#d=!0;const y=o[0],g={x:y[0]-f,y:h-(y[1]-p)},m=new QS(g,[0,0,d,h],1,u.#p/2,!0,.001);for(let b=0,A=y.length;b<A;b+=2)g.x=y[b]-f,g.y=h-(y[b+1]-p),m.add(g);const{id:v,clipPathId:x}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:m.toSVGPath()}},!0,!0);u.#v({highlightOutlines:m.getOutlines(),highlightId:v,clipPathId:x}),u.#b(),u.rotate(u.parentRotation)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=st._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(e);return Object.assign(r,{color:t,opacity:this.opacity,thickness:this.#p,quadPoints:this.#F(),outlines:this.#O(r.rect)}),this.addComment(r),this.annotationElementId&&!this.#R(r)?null:(r.id=this.annotationElementId,r)}#R(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((r,i)=>r!==t[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class fU{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){tn("Not implemented")}}class Bt extends st{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#r=null;static#n=null;static#s=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#a(e),this.#c())}#a({drawOutlines:e,drawId:t,drawingOptions:r}){this.#e=e,this._drawingOptions||=r,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#i(e,this.parent),this.#d(e.box)}#i(e,t){const{id:r}=t.drawLayer.draw(Bt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(e,t){const r=new Set(Object.keys(e));for(const[i,a]of Object.entries(t))r.has(i)?Object.assign(e[i],a):e[i]=a;return e}static getDefaultDrawingOptions(e){tn("Not implemented")}static get typesMap(){tn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,t),this._currentParent&&(Bt.#r.updateProperty(r,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)e.push([r,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[r,i]of this.constructor.typesMap)e.push([r,t[i]]);return e}_updateProperty(e,t,r){const i=this._drawingOptions,a=i[t],s=o=>{i.updateProperty(t,o);const c=this.#e.updateProperty(t,o);c&&this.#d(c),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:s.bind(this,r),undo:s.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Bt._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#h()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Bt._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#h()),{bbox:this.#f()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Bt._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#h(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#o()):e&&(this._uiManager.addShouldRescale(this),this.#c(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#i(this.#e,e)}}#l([e,t,r,i]){const{parentDimensions:[a,s],rotation:o}=this;switch(o){case 90:return[t,1-e,r*(s/a),i*(a/s)];case 180:return[1-e,1-t,r,i];case 270:return[1-t,e,r*(s/a),i*(a/s)];default:return[e,t,r,i]}}#h(){const{x:e,y:t,width:r,height:i,parentDimensions:[a,s],rotation:o}=this;switch(o){case 90:return[1-t,e,r*(a/s),i*(s/a)];case 180:return[1-e,1-t,r,i];case 270:return[t,1-e,r*(a/s),i*(s/a)];default:return[e,t,r,i]}}#d(e){[this.x,this.y,this.width,this.height]=this.#l(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:e,y:t,width:r,height:i,rotation:a,parentRotation:s,parentDimensions:[o,c]}=this;switch((a*4+s)/90){case 1:return[1-t-i,e,i,r];case 2:return[1-e-r,1-t-i,r,i];case 3:return[t,1-e-r,i,r];case 4:return[e,t-r*(o/c),i*(c/o),r*(o/c)];case 5:return[1-t,e,r*(o/c),i*(c/o)];case 6:return[1-e-i*(c/o),1-t,i*(c/o),r*(o/c)];case 7:return[t-r*(o/c),1-e-i*(c/o),r*(o/c),i*(c/o)];case 8:return[e-r,t-i,r,i];case 9:return[1-t,e-r,i,r];case 10:return[1-e,1-t,r,i];case 11:return[t-i,1-e,i,r];case 12:return[e-i*(c/o),t,i*(c/o),r*(o/c)];case 13:return[1-t-r*(o/c),e-i*(c/o),r*(o/c),i*(c/o)];case 14:return[1-e,1-t-r*(o/c),i*(c/o),r*(o/c)];case 15:return[t,1-e,r*(o/c),i*(c/o)];default:return[e,t,r,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Bt._mergeSVGProperties({bbox:this.#f()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),r}static createDrawerInstance(e,t,r,i,a){tn("Not implemented")}static startDrawing(e,t,r,i){const{target:a,offsetX:s,offsetY:o,pointerId:c,pointerType:u}=i;if($t.isInitializedAndDifferentPointerType(u))return;const{viewport:{rotation:d}}=e,{width:h,height:f}=a.getBoundingClientRect(),p=Bt.#n=new AbortController,y=e.combinedSignal(p);if($t.setPointer(u,c),window.addEventListener("pointerup",g=>{$t.isSamePointerIdOrRemove(g.pointerId)&&this._endDraw(g)},{signal:y}),window.addEventListener("pointercancel",g=>{$t.isSamePointerIdOrRemove(g.pointerId)&&this._currentParent.endDrawingSession()},{signal:y}),window.addEventListener("pointerdown",g=>{$t.isSamePointerType(g.pointerType)&&($t.initializeAndAddPointerId(g.pointerId),Bt.#r.isCancellable()&&(Bt.#r.removeLastElement(),Bt.#r.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Gi,{signal:y}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),a.addEventListener("touchmove",g=>{$t.isSameTimeStamp(g.timeStamp)&&_n(g)},{signal:y}),e.toggleDrawing(),t._editorUndoBar?.hide(),Bt.#r){e.drawLayer.updateProperties(this._currentDrawId,Bt.#r.startNew(s,o,h,f,d));return}t.updateUIForDefaultProperties(this),Bt.#r=this.createDrawerInstance(s,o,h,f,d),Bt.#s=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Bt.#s.toSVGProperties(),Bt.#r.defaultSVGProperties),!0,!1)}static _drawMove(e){if($t.isSameTimeStamp(e.timeStamp),!Bt.#r)return;const{offsetX:t,offsetY:r,pointerId:i}=e;if($t.isSamePointerId(i)){if($t.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Bt.#r.add(t,r)),$t.setTimeStamp(e.timeStamp),_n(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Bt.#r=null,Bt.#s=null,$t.clearTimeStamp()),Bt.#n&&(Bt.#n.abort(),Bt.#n=null,$t.clearPointerIds())}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Bt.#r.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=Bt.#r,i=this._currentDrawId,a=r.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,r.setLastElement(a))},undo:()=>{t.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:Ct.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Ct.DRAW_STEP),!Bt.#r.isEmpty()){const{pageDimensions:[r,i],scale:a}=t,s=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Bt.#r.getOutlines(r*a,i*a,a,this._INNER_MARGIN),drawingOptions:Bt.#s,mustBeCommitted:!e});return this._cleanup(!0),s}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,r,i,a,s){tn("Not implemented")}static async deserialize(e,t,r){const{rawDims:{pageWidth:i,pageHeight:a,pageX:s,pageY:o}}=t.viewport,c=this.deserializeDraw(s,o,i,a,this._INNER_MARGIN,e),u=await super.deserialize(e,t,r);return u.createDrawingOptions(e),u.#a({drawOutlines:c}),u.#c(),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[t,r]=this.pageTranslation,[i,a]=this.pageDimensions;return this.#e.serialize([t,r,i,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class wme{#e=new Float64Array(6);#t;#r;#n;#s;#a;#i="";#o=0;#c=new Cf;#l;#h;constructor(e,t,r,i,a,s){this.#l=r,this.#h=i,this.#n=a,this.#s=s,[e,t]=this.#d(e,t);const o=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#a=[e,t],this.#r=[{line:o,points:this.#a}],this.#e.set(o,0)}updateProperty(e,t){e==="stroke-width"&&(this.#s=t)}#d(e,t){return Ke._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#r||this.#r.length===0}isCancellable(){return this.#a.length<=10}add(e,t){[e,t]=this.#d(e,t);const[r,i,a,s]=this.#e.subarray(2,6),o=e-a,c=t-s;return Math.hypot(this.#l*o,this.#h*c)<=2?null:(this.#a.push(e,t),isNaN(r)?(this.#e.set([a,s,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([r,i,a,s,e,t],0),this.#t.push(...Ke.createBezierPoints(r,i,a,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,i,a){this.#l=r,this.#h=i,this.#n=a,[e,t]=this.#d(e,t);const s=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#a=[e,t];const o=this.#r.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#r.push({line:s,points:this.#a}),this.#e.set(s,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#r.at(-1)}setLastElement(e){return this.#r?(this.#r.push(e),this.#t=e.line,this.#a=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#r)return this.#c.removeLastElement();this.#r.pop(),this.#i="";for(let e=0,t=this.#r.length;e<t;e++){const{line:r,points:i}=this.#r[e];this.#t=r,this.#a=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#i}}}toSVGPath(){const e=Ke.svgRound(this.#t[4]),t=Ke.svgRound(this.#t[5]);if(this.#a.length===2)return this.#i=`${this.#i} M ${e} ${t} Z`,this.#i;if(this.#a.length<=6){const i=this.#i.lastIndexOf("M");this.#i=`${this.#i.slice(0,i)} M ${e} ${t}`,this.#o=6}if(this.#a.length===4){const i=Ke.svgRound(this.#t[10]),a=Ke.svgRound(this.#t[11]);return this.#i=`${this.#i} L ${i} ${a}`,this.#o=12,this.#i}const r=[];this.#o===0&&(r.push(`M ${e} ${t}`),this.#o=6);for(let i=this.#o,a=this.#t.length;i<a;i+=6){const[s,o,c,u,d,h]=this.#t.slice(i,i+6).map(Ke.svgRound);r.push(`C${s} ${o} ${c} ${u} ${d} ${h}`)}return this.#i+=r.join(" "),this.#o=this.#t.length,this.#i}getOutlines(e,t,r,i){const a=this.#r.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#r,e,t,r,this.#n,this.#s,i),this.#e=null,this.#t=null,this.#r=null,this.#i=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Cf extends Ke{#e;#t=0;#r;#n;#s;#a;#i;#o;#c;build(e,t,r,i,a,s,o){this.#s=t,this.#a=r,this.#i=i,this.#o=a,this.#c=s,this.#r=o??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${Ke.svgRound(t[4])} ${Ke.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${Ke.svgRound(t[10])} ${Ke.svgRound(t[11])}`);continue}for(let r=6,i=t.length;r<i;r+=6){const[a,s,o,c,u,d]=t.subarray(r,r+6).map(Ke.svgRound);e.push(`C${a} ${s} ${o} ${c} ${u} ${d}`)}}return e.join("")}serialize([e,t,r,i],a){const s=[],o=[],[c,u,d,h]=this.#h();let f,p,y,g,m,v,x,b,A;switch(this.#o){case 0:A=Ke._rescale,f=e,p=t+i,y=r,g=-i,m=e+c*r,v=t+(1-u-h)*i,x=e+(c+d)*r,b=t+(1-u)*i;break;case 90:A=Ke._rescaleAndSwap,f=e,p=t,y=r,g=i,m=e+u*r,v=t+c*i,x=e+(u+h)*r,b=t+(c+d)*i;break;case 180:A=Ke._rescale,f=e+r,p=t,y=-r,g=i,m=e+(1-c-d)*r,v=t+u*i,x=e+(1-c)*r,b=t+(u+h)*i;break;case 270:A=Ke._rescaleAndSwap,f=e+r,p=t+i,y=-r,g=-i,m=e+(1-u-h)*r,v=t+(1-c-d)*i,x=e+(1-u)*r,b=t+(1-c)*i;break}for(const{line:w,points:S}of this.#n)s.push(A(w,f,p,y,g,a?new Array(w.length):null)),o.push(A(S,f,p,y,g,a?new Array(S.length):null));return{lines:s,points:o,rect:[m,v,x,b]}}static deserialize(e,t,r,i,a,{paths:{lines:s,points:o},rotation:c,thickness:u}){const d=[];let h,f,p,y,g;switch(c){case 0:g=Ke._rescale,h=-e/r,f=t/i+1,p=1/r,y=-1/i;break;case 90:g=Ke._rescaleAndSwap,h=-t/i,f=-e/r,p=1/i,y=1/r;break;case 180:g=Ke._rescale,h=e/r+1,f=-t/i,p=-1/r,y=1/i;break;case 270:g=Ke._rescaleAndSwap,h=t/i+1,f=e/r+1,p=-1/i,y=-1/r;break}if(!s){s=[];for(const v of o){const x=v.length;if(x===2){s.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1]]));continue}if(x===4){s.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1],NaN,NaN,NaN,NaN,v[2],v[3]]));continue}const b=new Float32Array(3*(x-2));s.push(b);let[A,w,S,E]=v.subarray(0,4);b.set([NaN,NaN,NaN,NaN,A,w],0);for(let _=4;_<x;_+=2){const D=v[_],C=v[_+1];b.set(Ke.createBezierPoints(A,w,S,E,D,C),(_-2)*3),[A,w,S,E]=[S,E,D,C]}}}for(let v=0,x=s.length;v<x;v++)d.push({line:g(s[v].map(b=>b??NaN),h,f,p,y),points:g(o[v].map(b=>b??NaN),h,f,p,y)});const m=new this.prototype.constructor;return m.build(d,r,i,1,c,u,a),m}#l(e=this.#c){const t=this.#r+e/2*this.#i;return this.#o%180===0?[t/this.#s,t/this.#a]:[t/this.#a,t/this.#s]}#h(){const[e,t,r,i]=this.#e,[a,s]=this.#l(0);return[e+a,t+s,r-2*a,i-2*s]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let o=4,c=i.length;o<c;o+=6)Ge.pointBoundingBox(i[o],i[o+1],e);continue}let a=i[4],s=i[5];for(let o=6,c=i.length;o<c;o+=6){const[u,d,h,f,p,y]=i.subarray(o,o+6);Ge.bezierBoundingBox(a,s,u,d,h,f,p,y,e),a=p,s=y}}const[t,r]=this.#l();e[0]=Pr(e[0]-t,0,1),e[1]=Pr(e[1]-r,0,1),e[2]=Pr(e[2]+t,0,1),e[3]=Pr(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,r]=this.#l();this.#c=e;const[i,a]=this.#l(),[s,o]=[i-t,a-r],c=this.#e;return c[0]-=s,c[1]-=o,c[2]+=2*s,c[3]+=2*o,c}updateParentDimensions([e,t],r){const[i,a]=this.#l();this.#s=e,this.#a=t,this.#i=r;const[s,o]=this.#l(),c=s-i,u=o-a,d=this.#e;return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Ke.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ke.svgRound(e)} ${Ke.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let r=0,i=0,a=0,s=0,o=0,c=0;switch(this.#t){case 90:i=t/e,a=-e/t,o=e;break;case 180:r=-1,s=-1,o=e,c=t;break;case 270:i=-t/e,a=e/t,c=t;break;default:return""}return`matrix(${r} ${i} ${a} ${s} ${Ke.svgRound(o)} ${Ke.svgRound(c)})`}getPathResizingSVGProperties([e,t,r,i]){const[a,s]=this.#l(),[o,c,u,d]=this.#e;if(Math.abs(u-a)<=Ke.PRECISION||Math.abs(d-s)<=Ke.PRECISION){const g=e+r/2-(o+u/2),m=t+i/2-(c+d/2);return{path:{"transform-origin":`${Ke.svgRound(e)} ${Ke.svgRound(t)}`,transform:`${this.rotationTransform} translate(${g} ${m})`}}}const h=(r-2*a)/(u-2*a),f=(i-2*s)/(d-2*s),p=u/r,y=d/i;return{path:{"transform-origin":`${Ke.svgRound(o)} ${Ke.svgRound(c)}`,transform:`${this.rotationTransform} scale(${p} ${y}) translate(${Ke.svgRound(a)} ${Ke.svgRound(s)}) scale(${h} ${f}) translate(${Ke.svgRound(-a)} ${Ke.svgRound(-s)})`}}}getPathResizedSVGProperties([e,t,r,i]){const[a,s]=this.#l(),o=this.#e,[c,u,d,h]=o;if(o[0]=e,o[1]=t,o[2]=r,o[3]=i,Math.abs(d-a)<=Ke.PRECISION||Math.abs(h-s)<=Ke.PRECISION){const m=e+r/2-(c+d/2),v=t+i/2-(u+h/2);for(const{line:x,points:b}of this.#n)Ke._translate(x,m,v,x),Ke._translate(b,m,v,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ke.svgRound(e)} ${Ke.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const f=(r-2*a)/(d-2*a),p=(i-2*s)/(h-2*s),y=-f*(c+a)+e+a,g=-p*(u+s)+t+s;if(f!==1||p!==1||y!==0||g!==0)for(const{line:m,points:v}of this.#n)Ke._rescale(m,y,g,f,p,m),Ke._rescale(v,y,g,f,p,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ke.svgRound(e)} ${Ke.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],r){const[i,a]=r,s=this.#e,o=e-s[0],c=t-s[1];if(this.#s===i&&this.#a===a)for(const{line:u,points:d}of this.#n)Ke._translate(u,o,c,u),Ke._translate(d,o,c,d);else{const u=this.#s/i,d=this.#a/a;this.#s=i,this.#a=a;for(const{line:h,points:f}of this.#n)Ke._rescale(h,o,c,u,d,h),Ke._rescale(f,o,c,u,d,f);s[2]*=u,s[3]*=d}return s[0]=e,s[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ke.svgRound(e)} ${Ke.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ke.svgRound(e[0])} ${Ke.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class z0 extends fU{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:st._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new z0(this._viewParameters);return e.updateAll(this),e}}class KD extends Bt{static _type="ink";static _editorType=vt.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){st.initialize(e,t),this._defaultDrawingOptions=new z0(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return yt(this,"typesMap",new Map([[Ct.INK_THICKNESS,"stroke-width"],[Ct.INK_COLOR,"stroke"],[Ct.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,r,i,a){return new wme(e,t,r,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,r,i,a,s){return Cf.deserialize(e,t,r,i,a,s)}static async deserialize(e,t,r){let i=null;if(e instanceof GD){const{data:{inkLists:s,rect:o,rotation:c,id:u,color:d,opacity:h,borderStyle:{rawWidth:f},popupRef:p,richText:y,contentsObj:g,creationDate:m,modificationDate:v},parent:{page:{pageNumber:x}}}=e;i=e={annotationType:vt.INK,color:Array.from(d),thickness:f,opacity:h,paths:{points:s},boxes:null,pageIndex:x-1,rect:o.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:p,richText:y,comment:g?.str||null,creationDate:m,modificationDate:v}}const a=await super.deserialize(e,t,r);return a._initialData=i,e.comment&&a.setCommentData(e),a}get toolbarButtons(){return this._colorPicker||=new tf(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ct.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:r}=this;t.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:r}){this._drawingOptions=KD.getDefaultDrawingOptions({stroke:Ge.makeHexColor(...e),"stroke-width":t,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:r}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":s}}=this,o=Object.assign(super.serialize(e),{color:st._colorManager.convert(i),opacity:a,thickness:s,paths:{lines:t,points:r}});return this.addComment(o),e?(o.isCopy=!0,o):this.annotationElementId&&!this.#e(o)?null:(o.id=this.annotationElementId,o)}#e(e){const{color:t,thickness:r,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((s,o)=>s!==t[o])||e.thickness!==r||e.opacity!==i||e.pageIndex!==a}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class eE extends Cf{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Ap=8,Ed=3;class rc{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,r,i){return r-=e,i-=t,r===0?i>0?0:4:r===1?i+6:2-i}static#r=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,r,i,a,s,o){const c=this.#t(r,i,a,s);for(let u=0;u<8;u++){const d=(-u+c-o+16)%8,h=this.#r[2*d],f=this.#r[2*d+1];if(e[(r+h)*t+(i+f)]!==0)return d}return-1}static#s(e,t,r,i,a,s,o){const c=this.#t(r,i,a,s);for(let u=0;u<8;u++){const d=(u+c+o+16)%8,h=this.#r[2*d],f=this.#r[2*d+1];if(e[(r+h)*t+(i+f)]!==0)return d}return-1}static#a(e,t,r,i){const a=e.length,s=new Int32Array(a);for(let d=0;d<a;d++)s[d]=e[d]<=i?1:0;for(let d=1;d<r-1;d++)s[d*t]=s[d*t+t-1]=0;for(let d=0;d<t;d++)s[d]=s[t*r-1-d]=0;let o=1,c;const u=[];for(let d=1;d<r-1;d++){c=1;for(let h=1;h<t-1;h++){const f=d*t+h,p=s[f];if(p===0)continue;let y=d,g=h;if(p===1&&s[f-1]===0)o+=1,g-=1;else if(p>=1&&s[f+1]===0)o+=1,g+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const m=[h,d],v=g===h+1,x={isHole:v,points:m,id:o,parent:0};u.push(x);let b;for(const k of u)if(k.id===c){b=k;break}b?b.isHole?x.parent=v?b.parent:c:x.parent=v?c:b.parent:x.parent=v?c:0;const A=this.#n(s,t,d,h,y,g,0);if(A===-1){s[f]=-o,s[f]!==1&&(c=Math.abs(s[f]));continue}let w=this.#r[2*A],S=this.#r[2*A+1];const E=d+w,_=h+S;y=E,g=_;let D=d,C=h;for(;;){const k=this.#s(s,t,D,C,y,g,1);w=this.#r[2*k],S=this.#r[2*k+1];const T=D+w,N=C+S;m.push(N,T);const j=D*t+C;if(s[j+1]===0?s[j]=-o:s[j]===1&&(s[j]=o),T===d&&N===h&&D===E&&C===_){s[f]!==1&&(c=Math.abs(s[f]));break}else y=D,g=C,D=T,C=N}}}return u}static#i(e,t,r,i){if(r-t<=4){for(let E=t;E<r-2;E+=2)i.push(e[E],e[E+1]);return}const a=e[t],s=e[t+1],o=e[r-4]-a,c=e[r-3]-s,u=Math.hypot(o,c),d=o/u,h=c/u,f=d*s-h*a,p=c/o,y=1/u,g=Math.atan(p),m=Math.cos(g),v=Math.sin(g),x=y*(Math.abs(m)+Math.abs(v)),b=y*(1-x+x**2),A=Math.max(Math.atan(Math.abs(v+m)*b),Math.atan(Math.abs(v-m)*b));let w=0,S=t;for(let E=t+2;E<r-2;E+=2){const _=Math.abs(f-d*e[E+1]+h*e[E]);_>w&&(S=E,w=_)}w>(u*A)**2?(this.#i(e,t,S+2,i),this.#i(e,S,r,i)):i.push(a,s)}static#o(e){const t=[],r=e.length;return this.#i(e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t}static#c(e,t,r,i,a,s){const o=new Float32Array(s**2),c=-2*i**2,u=s>>1;for(let g=0;g<s;g++){const m=(g-u)**2;for(let v=0;v<s;v++)o[g*s+v]=Math.exp((m+(v-u)**2)/c)}const d=new Float32Array(256),h=-2*a**2;for(let g=0;g<256;g++)d[g]=Math.exp(g**2/h);const f=e.length,p=new Uint8Array(f),y=new Uint32Array(256);for(let g=0;g<r;g++)for(let m=0;m<t;m++){const v=g*t+m,x=e[v];let b=0,A=0;for(let S=0;S<s;S++){const E=g+S-u;if(!(E<0||E>=r))for(let _=0;_<s;_++){const D=m+_-u;if(D<0||D>=t)continue;const C=e[E*t+D],k=o[S*s+_]*d[Math.abs(C-x)];b+=C*k,A+=k}}const w=p[v]=Math.round(b/A);y[w]++}return[p,y]}static#l(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t}static#h(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let i=-1/0,a=1/0;for(let o=0,c=r.length;o<c;o++){const u=r[o]=e[o<<2];i=Math.max(i,u),a=Math.min(a,u)}const s=255/(i-a);for(let o=0,c=r.length;o<c;o++)r[o]=(r[o]-a)*s;return r}static#d(e){let t,r=-1/0,i=-1/0;const a=e.findIndex(c=>c!==0);let s=a,o=a;for(t=a;t<256;t++){const c=e[t];c>r&&(t-s>i&&(i=t-s,o=t-1),r=c,s=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:r,height:i}=e,{maxDim:a}=this.#e;let s=r,o=i;if(r>a||i>a){let f=r,p=i,y=Math.log2(Math.max(r,i)/a);const g=Math.floor(y);y=y===g?g-1:g;for(let v=0;v<y;v++){s=Math.ceil(f/2),o=Math.ceil(p/2);const x=new OffscreenCanvas(s,o);x.getContext("2d").drawImage(e,0,0,f,p,0,0,s,o),f=s,p=o,e!==t&&e.close(),e=x.transferToImageBitmap()}const m=Math.min(a/s,a/o);s=Math.round(s*m),o=Math.round(o*m)}const u=new OffscreenCanvas(s,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,s,o),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,s,o);const d=u.getImageData(0,0,s,o).data;return[this.#h(d),s,o]}static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:i},a,s,o,c){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const h=200,f=d.font=`${r} ${i} ${h}px ${t}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:m,fontBoundingBoxAscent:v,fontBoundingBoxDescent:x,width:b}=d.measureText(e),A=1.5,w=Math.ceil(Math.max(Math.abs(p)+Math.abs(y)||0,b)*A),S=Math.ceil(Math.max(Math.abs(g)+Math.abs(m)||h,Math.abs(v)+Math.abs(x)||h)*A);u=new OffscreenCanvas(w,S),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,w,S),d.fillStyle="black",d.fillText(e,w*(A-1)/2,S*(3-A)/2);const E=this.#h(d.getImageData(0,0,w,S).data),_=this.#l(E),D=this.#d(_),C=this.#a(E,w,S,D);return this.processDrawnLines({lines:{curves:C,width:w,height:S},pageWidth:a,pageHeight:s,rotation:o,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,r,i,a){const[s,o,c]=this.#f(e),[u,d]=this.#c(s,o,c,Math.hypot(o,c)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),h=this.#d(d),f=this.#a(u,o,c,h);return this.processDrawnLines({lines:{curves:f,width:o,height:c},pageWidth:t,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:s,areContours:o}){i%180!==0&&([t,r]=[r,t]);const{curves:c,width:u,height:d}=e,h=e.thickness??0,f=[],p=Math.min(t/u,r/d),y=p/t,g=p/r,m=[];for(const{points:x}of c){const b=s?this.#o(x):x;if(!b)continue;m.push(b);const A=b.length,w=new Float32Array(A),S=new Float32Array(3*(A===2?2:A-2));if(f.push({line:S,points:w}),A===2){w[0]=b[0]*y,w[1]=b[1]*g,S.set([NaN,NaN,NaN,NaN,w[0],w[1]],0);continue}let[E,_,D,C]=b;E*=y,_*=g,D*=y,C*=g,w.set([E,_,D,C],0),S.set([NaN,NaN,NaN,NaN,E,_],0);for(let k=4;k<A;k+=2){const T=w[k]=b[k]*y,N=w[k+1]=b[k+1]*g;S.set(Ke.createBezierPoints(E,_,D,C,T,N),(k-2)*3),[E,_,D,C]=[D,C,T,N]}}if(f.length===0)return null;const v=o?new eE:new Cf;return v.build(f,t,r,1,i,o?0:h,a),{outline:v,newCurves:m,areContours:o,thickness:h,width:u,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:i,height:a}){let s=1/0,o=-1/0,c=0;for(const b of e){c+=b.length;for(let A=2,w=b.length;A<w;A++){const S=b[A]-b[A-2];s=Math.min(s,S),o=Math.max(o,S)}}let u;s>=-128&&o<=127?u=Int8Array:s>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const d=e.length,h=Ap+Ed*d,f=new Uint32Array(h);let p=0;f[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=i,f[p++]=a,f[p++]=t?0:1,f[p++]=Math.max(0,Math.floor(r??0)),f[p++]=d,f[p++]=u.BYTES_PER_ELEMENT;for(const b of e)f[p++]=b.length-2,f[p++]=b[0],f[p++]=b[1];const y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(f);const m=u.prototype.constructor;for(const b of e){const A=new m(b.length-2);for(let w=2,S=b.length;w<S;w++)A[w-2]=b[w]-b[w-2];g.write(A)}g.close();const v=await new Response(y.readable).arrayBuffer(),x=new Uint8Array(v);return L7(x)}static async decompressSignature(e){try{const t=Mfe(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(t).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let s=null,o=0;for await(const b of r)s||=new Uint8Array(new Uint32Array(b.buffer,0,4)[0]),s.set(b,o),o+=b.length;const c=new Uint32Array(s.buffer,0,s.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=c[2],h=c[3],f=c[4]===0,p=c[5],y=c[6],g=c[7],m=[],v=(Ap+Ed*y)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(g){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(s.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(s.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(s.buffer,v);break}o=0;for(let b=0;b<y;b++){const A=c[Ed*b+Ap],w=new Float32Array(A+2);m.push(w);for(let S=0;S<Ed-1;S++)w[S]=c[Ed*b+Ap+S+1];for(let S=0;S<A;S++)w[S+2]=w[S]+x[o++]}return{areContours:f,thickness:p,outlines:m,width:d,height:h}}catch(t){return gt(`decompressSignature: ${t}`),null}}}class XD extends fU{constructor(){super(),super.updateProperties({fill:st._defaultLineColor,"stroke-width":0})}clone(){const e=new XD;return e.updateAll(this),e}}class JD extends z0{constructor(e){super(e),super.updateProperties({stroke:st._defaultLineColor,"stroke-width":1})}clone(){const e=new JD(this._viewParameters);return e.updateAll(this),e}}class wa extends Bt{#e=!1;#t=null;#r=null;#n=null;static _type="signature";static _editorType=vt.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#r=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){st.initialize(e,t),this._defaultDrawingOptions=new XD,this._defaultDrawnSignatureOptions=new JD(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return yt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#r){const{lines:i,mustSmooth:a,areContours:s,description:o,uuid:c,heightInPage:u}=this.#r,{rawDims:{pageWidth:d,pageHeight:h},rotation:f}=this.parent.viewport,p=rc.processDrawnLines({lines:i,pageWidth:d,pageHeight:h,rotation:f,innerMargin:wa._INNER_MARGIN,mustSmooth:a,areContours:s});this.addSignature(p,u,o,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:r,width:i,height:a}=this.#r,s=Math.max(i,a),o=rc.processDrawnLines({lines:{curves:e.map(c=>({points:c})),thickness:r,width:i,height:a},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:o.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,r,i){const{x:a,y:s}=this,{outline:o}=this.#r=e;this.#e=o instanceof eE,this.description=r;let c;this.#e?c=wa.getDefaultDrawingOptions():(c=wa._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":o.thickness})),this._addOutlines({drawOutlines:o,drawingOptions:c});const[,u]=this.pageDimensions;let d=t/u;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=a,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:r},rotation:i}=this.parent.viewport;return rc.process(e,t,r,i,wa._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return rc.extractContoursFromText(e,t,r,i,a,wa._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:r},rotation:i}=this.parent.viewport;return rc.processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:i,innerMargin:wa._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=wa.getDefaultDrawingOptions():(this._drawingOptions=wa._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(a),e?(a.paths={lines:t,points:r},a.uuid=this.#n,a.isCopy=!0):a.lines=t,this.#t&&(a.accessibilityData={type:"Figure",alt:this.#t}),a}static deserializeDraw(e,t,r,i,a,s){return s.areContours?eE.deserialize(e,t,r,i,a,s):Cf.deserialize(e,t,r,i,a,s)}static async deserialize(e,t,r){const i=await super.deserialize(e,t,r);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class Ame extends st{#e=null;#t=null;#r=null;#n=null;#s=null;#a="";#i=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=vt.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#s=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){st.initialize(e,t)}static isHandlingMimeForPasting(e){return HS.includes(e)}static paste(e,t){t.pasteEditor({mode:vt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#a=e.file.name),this.#m()}#f(){if(this.#r=null,this._uiManager.enableWaiting(!1),!!this.#i){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:s}=e||this.copyCanvas(null,null,!0).imageData,o=await r.guess({name:"altText",request:{data:i,width:a,height:s,channels:i.length/(a*s)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const c=o.output;return await this.setGuessedAltText(c),t&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#d(r,!0)).finally(()=>this.#f());return}if(this.#n){const r=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromUrl(r).then(i=>this.#d(i)).finally(()=>this.#f());return}if(this.#s){const r=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromFile(r).then(i=>this.#d(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=HS.join(",");const t=this._uiManager._signal;this.#r=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(i)}r()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#i?.remove(),this.#i=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#i===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#r||this.#e||this.#n||this.#s||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(this.#t=r,i&&(this.#e=i),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},e)}#m(){const{div:e}=this;let{width:t,height:r}=this.#e;const[i,a]=this.pageDimensions,s=.75;if(this.width)t=this.width*i,r=this.height*a;else if(t>s*i||r>s*a){const c=Math.min(s*i/t,s*a/r);t*=c,r*=c}this._uiManager.enableWaiting(!1);const o=this.#i=document.createElement("canvas");o.setAttribute("role","img"),this.addContainer(o),this.width=t/i,this.height=r/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,r=!1){e||(e=224);const{width:i,height:a}=this.#e,s=new Ba;let o=this.#e,c=i,u=a,d=null;if(t){if(i>t||a>t){const S=Math.min(t/i,t/a);c=Math.floor(i*S),u=Math.floor(a*S)}d=document.createElement("canvas");const f=d.width=Math.ceil(c*s.sx),p=d.height=Math.ceil(u*s.sy);this.#l||(o=this.#u(f,p));const y=d.getContext("2d");y.filter=this._uiManager.hcmFilter;let g="white",m="#cfcfd8";this._uiManager.hcmFilter!=="none"?m="black":zfe.isDarkMode&&(g="#8f8f9d",m="#42414d");const v=15,x=v*s.sx,b=v*s.sy,A=new OffscreenCanvas(x*2,b*2),w=A.getContext("2d");w.fillStyle=g,w.fillRect(0,0,x*2,b*2),w.fillStyle=m,w.fillRect(0,0,x,b),w.fillRect(x,b,x,b),y.fillStyle=y.createPattern(A,"repeat"),y.fillRect(0,0,f,p),y.drawImage(o,0,0,o.width,o.height,0,0,f,p)}let h=null;if(r){let f,p;if(s.symmetric&&o.width<e&&o.height<e)f=o.width,p=o.height;else if(o=this.#e,i>e||a>e){const m=Math.min(e/i,e/a);f=Math.floor(i*m),p=Math.floor(a*m),this.#l||(o=this.#u(f,p))}const g=new OffscreenCanvas(f,p).getContext("2d",{willReadFrequently:!0});g.drawImage(o,0,0,o.width,o.height,0,0,f,p),h={width:f,height:p,data:g.getImageData(0,0,f,p).data}}return{canvas:d,width:c,height:u,imageData:h}}#u(e,t){const{width:r,height:i}=this.#e;let a=r,s=i,o=this.#e;for(;a>2*e||s>2*t;){const c=a,u=s;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const d=new OffscreenCanvas(a,s);d.getContext("2d").drawImage(o,0,0,c,u,0,0,a,s),o=d.transferToImageBitmap()}return o}#p(){const[e,t]=this.parentDimensions,{width:r,height:i}=this,a=new Ba,s=Math.ceil(r*e*a.sx),o=Math.ceil(i*t*a.sy),c=this.#i;if(!c||c.width===s&&c.height===o)return;c.width=s,c.height=o;const u=this.#l?this.#e:this.#u(s,o),d=c.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,s,o)}#y(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,r]=this.pageDimensions,i=Math.round(this.width*t*vu.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*vu.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(i,a);return s.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,a),s.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,r){let i=null,a=!1;if(e instanceof dU){const{data:{rect:g,rotation:m,id:v,structParent:x,popupRef:b,richText:A,contentsObj:w,creationDate:S,modificationDate:E},container:_,parent:{page:{pageNumber:D}},canvas:C}=e;let k,T;C?(delete e.canvas,{id:k,bitmap:T}=r.imageManager.getFromCanvas(_.id,C),C.remove()):(a=!0,e._hasNoCanvas=!0);const N=(await t._structTree.getAriaAttributes(`${mc}${v}`))?.get("aria-label")||"";i=e={annotationType:vt.STAMP,bitmapId:k,bitmap:T,pageIndex:D-1,rect:g.slice(0),rotation:m,annotationElementId:v,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:N},isSvg:!1,structParent:x,popupRef:b,richText:A,comment:w?.str||null,creationDate:S,modificationDate:E}}const s=await super.deserialize(e,t,r),{rect:o,bitmap:c,bitmapUrl:u,bitmapId:d,isSvg:h,accessibilityData:f}=e;a?(r.addMissingCanvas(e.id,s),s.#o=!0):d&&r.imageManager.isValidId(d)?(s.#t=d,c&&(s.#e=c)):s.#n=u,s.#l=h;const[p,y]=s.pageDimensions;return s.width=(o[2]-o[0])/p,s.height=(o[3]-o[1])/y,f&&(s.altTextData=f),s._initialData=i,e.comment&&s.setCommentData(e),s.#h=!!i,s}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(r),e)return r.bitmapUrl=this.#y(!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const o=this.#x(r);return o.isSame?null:(o.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(t===null)return r;t.stamps||=new Map;const s=this.#l?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:s,serialized:r}),r.bitmap=this.#y(!1);else if(this.#l){const o=t.stamps.get(this.#t);s>o.area&&(o.area=s,o.serialized.bitmap.close(),o.serialized.bitmap=this.#y(!1))}return r}#x(e){const{pageIndex:t,accessibilityData:{altText:r}}=this._initialData,i=e.pageIndex===t,a=(e.accessibilityData?.alt||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class rs{#e;#t=!1;#r=null;#n=null;#s=null;#a=new Map;#i=!1;#o=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([tr,KD,Ame,Cn,wa].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:a,annotationLayer:s,drawLayer:o,textLayer:c,viewport:u,l10n:d}){const h=[...rs.#p.values()];if(!rs._initialized){rs._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),this.#u=e,this.pageIndex=t,this.div=r,this.#e=a,this.#r=s,this.viewport=u,this.#d=c,this.drawLayer=o,this._structTree=i,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===vt.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#w(),e){case vt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case vt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case vt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===vt.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const r of rs.#p.values())t.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#r?.togglePointerEvents(e)}get#y(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const r of this.#y)r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#u.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=this.#r;if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),this.#u.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const i=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",a=>{const{clientX:o,clientY:c,timeStamp:u}=a,d=this.#m;if(u-d>500){this.#m=u;return}this.#m=-1;const{classList:h}=this.div;h.toggle("getElements",!0);const f=document.elementsFromPoint(o,c);if(h.toggle("getElements",!1),!this.div.contains(f[0]))return;let p;const y=new RegExp(`^${Jh}[0-9]+$`);for(const m of f)if(y.test(m.id)){p=m.id;break}if(!p)return;const g=this.#a.get(p);g?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),g.dblclick(a))},{signal:i,capture:!0})}const e=this.#r,t=[];if(e){const i=new Map,a=new Map;for(const o of this.#y){if(o.disableEditing(),!o.annotationElementId){t.push(o);continue}if(o.serialize()!==null){i.set(o.annotationElementId,o);continue}else a.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const s=e.getEditableAnnotations();for(const o of s){const{id:c}=o.data;if(this.#u.isDeletedAnnotationElement(c)){o.updateEdited({deleted:!0});continue}let u=a.get(c);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=i.get(c),u&&(this.#u.addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of rs.#p.values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(t),this.#o=!1}getEditableAnnotation(e){return this.#r?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#x.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#x(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:r}=Gn.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Cn.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#a.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#a.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e),st.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getEditorByUID(e){for(const t of this.#a.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#v(){return rs.#p.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#_(e){const t=this.#v;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:r,offsetY:i}=this.#S(),a=this.getNextId(),s=this.#_({parent:this,id:a,x:r,y:i,uiManager:this.#u,isCentered:!0,...t});s&&this.add(s)}async deserialize(e){return await rs.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),a=this.#_({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...r});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:e,y:t,width:r,height:i}=this.boundingClientRect,a=Math.max(0,e),s=Math.max(0,t),o=Math.min(window.innerWidth,e+r),c=Math.min(window.innerHeight,t+i),u=(a+o)/2-e,d=(s+c)/2-t,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}}addNewEditor(e={}){this.createAndAddNewEditor(this.#S(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=Gn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#i||(this.#i=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const r=this.#u.getMode();if(r===vt.STAMP||r===vt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===vt.HIGHLIGHT&&this.enableTextSelection(),this.#i){this.#i=!1;return}const{isMac:t}=Gn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#i=!0,this.#v?.isDrawer){this.startDrawingSession(e);return}const r=this.#u.getActive();this.#t=!r||r.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#v.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#v.endDrawing(e)):null}findNewParent(e,t,r){const i=this.#u.findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const e of this.#a.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#w(){for(const e of this.#a.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,bl(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#w();const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,bl(this.div,{rotation:r}),t!==r)for(const i of this.#a.values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class ur{#e=null;#t=new Map;#r=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return yt(this,"_svgFactory",new Cg)}static#s(e,[t,r,i,a]){const{style:s}=e;s.top=`${100*r}%`,s.left=`${100*t}%`,s.width=`${100*i}%`,s.height=`${100*a}%`}#a(){const e=ur._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#i(e,t){const r=ur._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const a=ur._svgFactory.createElement("use");return r.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i}#o(e,t){for(const[r,i]of Object.entries(t))i===null?e.removeAttribute(r):e.setAttribute(r,i)}draw(e,t=!1,r=!1){const i=ur.#n++,a=this.#a(),s=ur._svgFactory.createElement("defs");a.append(s);const o=ur._svgFactory.createElement("path");s.append(o);const c=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#r.set(i,o);const u=r?this.#i(s,c):null,d=ur._svgFactory.createElement("use");return a.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(a,e),this.#t.set(i,a),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const r=ur.#n++,i=this.#a(),a=ur._svgFactory.createElement("defs");i.append(a);const s=ur._svgFactory.createElement("path");a.append(s);const o=`path_p${this.pageIndex}_${r}`;s.setAttribute("id",o),s.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const h=ur._svgFactory.createElement("mask");a.append(h),c=`mask_p${this.pageIndex}_${r}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=ur._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=ur._svgFactory.createElement("use");h.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=ur._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),c&&u.setAttribute("mask",`url(#${c})`);const d=u.cloneNode();return i.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(r,i),r}finalizeDraw(e,t){this.#r.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:r,bbox:i,rootClass:a,path:s}=t,o=typeof e=="number"?this.#t.get(e):e;if(o){if(r&&this.#o(o,r),i&&ur.#s(o,i),a){const{classList:c}=o;for(const[u,d]of Object.entries(a))c.toggle(u,d)}if(s){const u=o.firstElementChild.firstElementChild;this.#o(u,s)}}}updateParent(e,t){if(t===this)return;const r=this.#t.get(e);r&&(t.#e.append(r),this.#t.delete(e),t.#t.set(e,r))}remove(e){this.#r.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#r.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:ZS};globalThis.pdfjsLib={AbortException:oo,AnnotationEditorLayer:rs,AnnotationEditorParamsType:Ct,AnnotationEditorType:vt,AnnotationEditorUIManager:lo,AnnotationLayer:YD,AnnotationMode:$s,AnnotationType:In,applyOpacity:Wfe,build:Zpe,ColorPicker:Ii,createValidAbsoluteUrl:I7,CSSConstants:qfe,DOMSVGFactory:Cg,DrawLayer:ur,FeatureTest:Gn,fetchData:Ef,findContrastColor:Hfe,getDocument:rU,getFilenameFromUrl:Ffe,getPdfFilenameFromUrl:Lfe,getRGB:Df,getUuid:F7,getXfaPageViewport:Bfe,GlobalWorkerOptions:Cc,ImageKind:lm,InvalidPDFException:qS,isDataScheme:U0,isPdfFile:LD,isValidExplicitDest:npe,MathClamp:Pr,noContextMenu:Gi,normalizeUnicode:Ife,OPS:Zh,OutputScale:Ba,PasswordResponses:_fe,PDFDataRangeTransport:iU,PDFDateString:WS,PDFWorker:ef,PermissionFlag:Efe,PixelsPerInch:vu,RenderingCancelledException:FD,renderRichText:B7,ResponseException:jg,setLayerDimensions:bl,shadow:yt,SignatureExtractor:rc,stopEvent:_n,SupportedImageMimeTypes:HS,TextLayer:ui,TouchManager:B0,updateUrlHash:R7,Util:Ge,VerbosityLevel:M0,version:Jpe,XfaLayer:U7};Cc.workerSrc="/pdf.worker.min.mjs";const{Title:vr,Text:wn,Paragraph:e2e}=Du,{TextArea:Sme}=ye,Eme=()=>{const{t:n,language:e}=Ze(),{theme:t,toggleTheme:r,settings:i,updateSettings:a}=ha(),[s]=W.useForm(),[o]=W.useForm(),[c]=W.useForm(),[u]=W.useForm(),[d]=W.useForm(),[h,f]=M.useState(!1),[p,y]=M.useState("general"),[g,m]=M.useState({termsClient:"",termsClientEn:"",termsConsultant:"",termsConsultantEn:""}),v=(j,R)=>{m(P=>({...P,[j]:R})),d.setFieldValue(j,R)};M.useEffect(()=>{u.setFieldsValue({dashboardName:i.dashboardName,dashboardNameAr:i.dashboardNameAr,websiteName:i.websiteName||i.dashboardName,websiteNameAr:i.websiteNameAr||i.dashboardNameAr,showConsultantContactInfo:i.showConsultantContactInfo,primaryFont:i.primaryFont,arabicFont:i.arabicFont,animationsEnabled:i.animationsEnabled,animationSpeed:i.animationSpeed,primaryColor:i.primaryColor,secondaryColor:i.secondaryColor}),d.setFieldsValue({termsClient:i.termsClient,termsClientEn:i.termsClientEn,termsConsultant:i.termsConsultant,termsConsultantEn:i.termsConsultantEn}),m({termsClient:i.termsClient||"",termsClientEn:i.termsClientEn||"",termsConsultant:i.termsConsultant||"",termsConsultantEn:i.termsConsultantEn||""})},[i,u,d]),M.useEffect(()=>{x()},[]);const x=async()=>{try{const j=await Fo.getGeneralSettings();j.settings&&s.setFieldsValue({platformName:j.settings.platformName||"Jadwa Consulting",email:j.settings.platformEmail||"info@jadwa.com",phone:j.settings.platformPhone||"+966 12 345 6789",address:j.settings.platformAddress||"",enableNotifications:j.settings.enableNotifications!==!1,enableEmailNotifications:j.settings.enableEmailNotifications!==!1})}catch(j){console.error("Error fetching general settings:",j)}},b=async j=>{try{f(!0),await Fo.updateGeneralSettings({platformName:j.platformName,platformEmail:j.email,platformPhone:j.phone,platformAddress:j.address,enableNotifications:j.enableNotifications,enableEmailNotifications:j.enableEmailNotifications}),se.success(e==="ar"?"تم حفظ الإعدادات العامة بنجاح":"General settings saved successfully")}catch(R){se.error(R.message||(e==="ar"?"فشل حفظ الإعدادات":"Failed to save settings"))}finally{f(!1)}};M.useEffect(()=>{A()},[]);const A=async()=>{try{const j=await Fo.getPaymentSettings();j.settings&&o.setFieldsValue({gateway:j.settings.paymentGateway||"tap",apiKey:j.settings.paymentApiKey||"",secretKey:j.settings.paymentSecretKey||"",commissionRate:j.settings.commissionRate||15,enableAutoPayout:j.settings.enableAutoPayout||!1})}catch(j){console.error("Error fetching payment settings:",j)}},w=async j=>{try{f(!0),await Fo.updatePaymentSettings({paymentGateway:j.gateway,paymentApiKey:j.apiKey,paymentSecretKey:j.secretKey,commissionRate:j.commissionRate,enableAutoPayout:j.enableAutoPayout}),se.success(e==="ar"?"تم حفظ إعدادات الدفع بنجاح":"Payment settings saved successfully")}catch(R){se.error(R.message||(e==="ar"?"فشل حفظ الإعدادات":"Failed to save settings"))}finally{f(!1)}};M.useEffect(()=>{S()},[]);const S=async()=>{try{const j=await Fo.getIntegrationSettings();j.settings&&c.setFieldsValue({videoService:j.settings.videoService||"zoom",videoApiKey:j.settings.videoApiKey||"",emailService:j.settings.emailService||"smtp",smtpHost:j.settings.smtpHost||"",smtpPort:j.settings.smtpPort||"",smtpUser:j.settings.smtpUser||"",smtpPassword:j.settings.smtpPassword||""})}catch(j){console.error("Error fetching integration settings:",j)}},E=async j=>{try{f(!0),await Fo.updateIntegrationSettings({videoService:j.videoService,videoApiKey:j.videoApiKey,emailService:j.emailService,smtpHost:j.smtpHost,smtpPort:j.smtpPort,smtpUser:j.smtpUser,smtpPassword:j.smtpPassword}),se.success(e==="ar"?"تم حفظ إعدادات التكامل بنجاح":"Integration settings saved successfully")}catch(R){se.error(R.message||(e==="ar"?"فشل حفظ الإعدادات":"Failed to save settings"))}finally{f(!1)}},_=async j=>{try{f(!0),a({dashboardName:j.dashboardName,dashboardNameAr:j.dashboardNameAr,websiteName:j.websiteName,websiteNameAr:j.websiteNameAr,showConsultantContactInfo:j.showConsultantContactInfo,primaryFont:j.primaryFont,arabicFont:j.arabicFont,animationsEnabled:j.animationsEnabled,animationSpeed:j.animationSpeed,primaryColor:j.primaryColor,secondaryColor:j.secondaryColor}),await new Promise(R=>setTimeout(R,500)),se.success(e==="ar"?"تم حفظ إعدادات المظهر بنجاح":"Appearance settings saved successfully")}catch{se.error(e==="ar"?"فشل حفظ الإعدادات":"Failed to save settings")}finally{f(!1)}},D=async j=>{try{f(!0),a({termsClient:j.termsClient,termsClientEn:j.termsClientEn,termsConsultant:j.termsConsultant,termsConsultantEn:j.termsConsultantEn}),await new Promise(R=>setTimeout(R,500)),se.success(e==="ar"?"تم حفظ الشروط والأحكام بنجاح":"Terms & Conditions saved successfully")}catch{se.error(e==="ar"?"فشل حفظ الإعدادات":"Failed to save settings")}finally{f(!1)}},C=async(j,R)=>{console.log("Starting file import:",j.name,"Type:",j.type);try{f(!0);const P=await j.arrayBuffer();let F="";if(j.type==="application/pdf"){console.log("Processing PDF...");try{const q=await rU({data:P}).promise;console.log("PDF loaded, pages:",q.numPages);let $="";for(let B=1;B<=q.numPages;B++){const L=await(await q.getPage(B)).getTextContent(),U=[];L.items.forEach(G=>{const H=G.str;if(!H||H.trim()==="")return;const V=G.transform[4],K=G.transform[5];let ae=U.find(te=>Math.abs(te.y-K)<=8);ae||(ae={y:K,items:[]},U.push(ae)),ae.items.push({str:H,x:V})}),U.sort((G,H)=>H.y-G.y);for(const G of U){const H=G.items.map(K=>K.str).join("");/[\u0600-\u06FF]/.test(H)?G.items.sort((K,ae)=>ae.x-K.x):G.items.sort((K,ae)=>K.x-ae.x),$+=G.items.map(K=>K.str).join(" ")+"<br/>"}$+="<br/>"}F=$,console.log("PDF extracted text length:",F.length)}catch(q){throw console.error("PDF Parsing Error:",q),q}}else if(j.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"){console.log("Processing Docx...");try{const q=await Sfe.convertToHtml({arrayBuffer:P});F=q.value,console.log("Docx extracted HTML length:",F.length),q.messages&&q.messages.length>0&&console.log("Mammoth messages:",q.messages)}catch(q){throw console.error("Docx Parsing Error:",q),q}}else return console.warn("Unsupported file type:",j.type),se.warning("Unsupported file type. Please upload .docx or .pdf"),f(!1),!1;if(!F)return console.warn("No text extracted"),se.warning("Could not extract text from file"),f(!1),!1;console.log(`Setting content for ${R} (Length: ${F.length})`),v(R,F),se.success(e==="ar"?"تم استيراد الملف بنجاح":"File imported successfully")}catch(P){console.error("General Import Error:",P),se.error(e==="ar"?"فشل استيراد الملف: "+P.message:"Failed to import file: "+P.message)}finally{f(!1)}return!1},k=j=>{const R=new FileReader;return R.onload=P=>{a({logo:P.target.result,websiteLogo:P.target.result}),se.success(e==="ar"?"تم تحديث شعار المنصة والموقع بنجاح":"Platform and Website logo updated successfully")},R.readAsDataURL(j),!1},T=j=>{const R=new FileReader;return R.onload=P=>{a({websiteLogo:P.target.result}),se.success(e==="ar"?"تم رفع شعار الموقع بنجاح":"Website logo uploaded successfully")},R.readAsDataURL(j),!1},N=[{key:"general",label:l.jsxs(ze,{children:[l.jsx(Uc,{}),l.jsx("span",{children:e==="ar"?"عام":"General"})]}),children:l.jsxs("div",{className:"space-y-6",children:[l.jsx(Ee,{className:"glass-card border-0 shadow-professional-lg rounded-xl mb-6",title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:l.jsx(Ra,{className:"text-white text-xl"})}),l.jsxs("div",{children:[l.jsx(vr,{level:4,className:"mb-1 font-bold",children:e==="ar"?"معلومات المنصة":"Platform Information"}),l.jsx(wn,{type:"secondary",className:"text-sm",children:e==="ar"?"المعلومات الأساسية للمنصة":"Basic platform information"})]})]}),styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:l.jsx(W,{form:s,layout:"vertical",onFinish:b,children:l.jsxs(Re,{gutter:[16,0],children:[l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"platformName",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم المنصة":"Platform Name"}),rules:[{required:!0,message:e==="ar"?"يرجى إدخال اسم المنصة":"Please enter platform name"}],children:l.jsx(ye,{size:"large",placeholder:e==="ar"?"اسم المنصة":"Platform Name",prefix:l.jsx(Ra,{className:"text-gray-400"})})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"email",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"البريد الإلكتروني":"Email"}),rules:[{required:!0,message:e==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email"},{type:"email",message:e==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email"}],children:l.jsx(ye,{size:"large",type:"email",placeholder:e==="ar"?"البريد الإلكتروني":"Email",prefix:l.jsx(vi,{className:"text-gray-400"})})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"phone",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"رقم الهاتف":"Phone"}),rules:[{required:!0,message:e==="ar"?"يرجى إدخال رقم الهاتف":"Please enter phone number"}],children:l.jsx(ye,{size:"large",placeholder:e==="ar"?"رقم الهاتف":"Phone",prefix:l.jsx(Ma,{className:"text-gray-400"})})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"address",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"العنوان":"Address"}),children:l.jsx(Sme,{rows:3,placeholder:e==="ar"?"العنوان":"Address",size:"large"})})})]})})}),l.jsx(Ee,{className:"glass-card border-0 shadow-professional-lg rounded-xl mb-6",title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-lg",children:l.jsx(ah,{className:"text-white text-xl"})}),l.jsxs("div",{children:[l.jsx(vr,{level:4,className:"mb-1 font-bold",children:e==="ar"?"الإشعارات":"Notifications"}),l.jsx(wn,{type:"secondary",className:"text-sm",children:e==="ar"?"إعدادات الإشعارات":"Notification settings"})]})]}),styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:l.jsx(W,{form:s,layout:"vertical",children:l.jsxs(Re,{gutter:[16,16],children:[l.jsx(me,{xs:24,md:12,children:l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ah,{className:"text-lg text-gray-600"}),l.jsxs("div",{children:[l.jsx(wn,{strong:!0,children:e==="ar"?"تفعيل الإشعارات":"Enable Notifications"}),l.jsx("br",{}),l.jsx(wn,{type:"secondary",className:"text-xs",children:e==="ar"?"تفعيل الإشعارات العامة":"Enable general notifications"})]})]}),l.jsx(W.Item,{name:"enableNotifications",valuePropName:"checked",className:"mb-0",children:l.jsx(pi,{})})]})}),l.jsx(me,{xs:24,md:12,children:l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(vi,{className:"text-lg text-gray-600"}),l.jsxs("div",{children:[l.jsx(wn,{strong:!0,children:e==="ar"?"إشعارات البريد الإلكتروني":"Email Notifications"}),l.jsx("br",{}),l.jsx(wn,{type:"secondary",className:"text-xs",children:e==="ar"?"تفعيل إشعارات البريد الإلكتروني":"Enable email notifications"})]})]}),l.jsx(W.Item,{name:"enableEmailNotifications",valuePropName:"checked",className:"mb-0",children:l.jsx(pi,{})})]})})]})})}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx(J,{size:"large",onClick:()=>s.resetFields(),children:e==="ar"?"إعادة تعيين":"Reset"}),l.jsx(J,{type:"primary",htmlType:"submit",icon:l.jsx(ja,{}),size:"large",loading:h,onClick:()=>s.submit(),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ الإعدادات":"Save Settings"})]})]})},{key:"payment",label:l.jsxs(ze,{children:[l.jsx(Yn,{}),l.jsx("span",{children:e==="ar"?"المدفوعات":"Payments"})]}),children:l.jsxs("div",{className:"space-y-6",children:[l.jsx(Fn,{message:e==="ar"?"إعدادات الدفع":"Payment Settings",description:e==="ar"?"قم بتكوين إعدادات بوابة الدفع الخاصة بك. تأكد من الحفاظ على أمان مفاتيح API.":"Configure your payment gateway settings. Make sure to keep API keys secure.",type:"info",showIcon:!0,icon:l.jsx(Fp,{}),className:"mb-6"}),l.jsx(Ee,{className:"glass-card border-0 shadow-professional-lg rounded-xl mb-6",title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg",children:l.jsx(Yn,{className:"text-white text-xl"})}),l.jsxs("div",{children:[l.jsx(vr,{level:4,className:"mb-1 font-bold",children:e==="ar"?"بوابة الدفع":"Payment Gateway"}),l.jsx(wn,{type:"secondary",className:"text-sm",children:e==="ar"?"إعدادات بوابة الدفع":"Payment gateway configuration"})]})]}),styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:l.jsx(W,{form:o,layout:"vertical",onFinish:w,children:l.jsxs(Re,{gutter:[16,0],children:[l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"gateway",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"بوابة الدفع":"Payment Gateway"}),rules:[{required:!0}],children:l.jsxs(be,{size:"large",children:[l.jsx(be.Option,{value:"tap",children:"Tap Payments"}),l.jsx(be.Option,{value:"moyasar",children:"Moyasar"}),l.jsx(be.Option,{value:"stc",children:"STC Pay"}),l.jsx(be.Option,{value:"paypal",children:"PayPal"})]})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"commissionRate",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"نسبة العمولة (%)":"Commission Rate (%)"}),rules:[{required:!0,type:"number",min:0,max:100}],children:l.jsx(ye,{type:"number",min:0,max:100,placeholder:"15",size:"large",suffix:"%"})})}),l.jsx(me,{xs:24,children:l.jsx(W.Item,{name:"apiKey",label:l.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[l.jsx(Nn,{}),e==="ar"?"مفتاح API":"API Key"]}),rules:[{required:!0}],children:l.jsx(ye.Password,{size:"large",placeholder:e==="ar"?"أدخل مفتاح API":"Enter API Key",iconRender:j=>j?l.jsx(Wn,{}):l.jsx(Nn,{})})})}),l.jsx(me,{xs:24,children:l.jsx(W.Item,{name:"secretKey",label:l.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[l.jsx(Nn,{}),e==="ar"?"المفتاح السري":"Secret Key"]}),rules:[{required:!0}],children:l.jsx(ye.Password,{size:"large",placeholder:e==="ar"?"أدخل المفتاح السري":"Enter Secret Key",iconRender:j=>j?l.jsx(Wn,{}):l.jsx(Nn,{})})})}),l.jsx(me,{xs:24,children:l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Zt,{className:"text-lg text-gray-600"}),l.jsxs("div",{children:[l.jsx(wn,{strong:!0,children:e==="ar"?"الدفع التلقائي للمستشارين":"Auto Payout for Consultants"}),l.jsx("br",{}),l.jsx(wn,{type:"secondary",className:"text-xs",children:e==="ar"?"تفعيل الدفع التلقائي للمستشارين":"Enable automatic payout for consultants"})]})]}),l.jsx(W.Item,{name:"enableAutoPayout",valuePropName:"checked",className:"mb-0",children:l.jsx(pi,{})})]})})]})})}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx(J,{size:"large",onClick:()=>o.resetFields(),children:e==="ar"?"إعادة تعيين":"Reset"}),l.jsx(J,{type:"primary",htmlType:"submit",icon:l.jsx(ja,{}),size:"large",loading:h,onClick:()=>o.submit(),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ الإعدادات":"Save Settings"})]})]})},{key:"integrations",label:l.jsxs(ze,{children:[l.jsx(cT,{}),l.jsx("span",{children:e==="ar"?"التكاملات":"Integrations"})]}),children:l.jsxs("div",{className:"space-y-6",children:[l.jsx(Fn,{message:e==="ar"?"التكاملات الخارجية":"External Integrations",description:e==="ar"?"قم بتكوين التكاملات مع الخدمات الخارجية مثل خدمات الفيديو والبريد الإلكتروني.":"Configure integrations with external services such as video services and email.",type:"info",showIcon:!0,icon:l.jsx(Fp,{}),className:"mb-6"}),l.jsx(Ee,{className:"border-0 shadow-sm",title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center",children:l.jsx(ka,{className:"text-white text-lg"})}),l.jsxs("div",{children:[l.jsx(vr,{level:5,className:"mb-0",children:e==="ar"?"خدمة الفيديو":"Video Service"}),l.jsx(wn,{type:"secondary",className:"text-xs",children:e==="ar"?"إعدادات خدمة الفيديو":"Video service configuration"})]})]}),children:l.jsx(W,{form:c,layout:"vertical",onFinish:E,children:l.jsxs(Re,{gutter:[16,0],children:[l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"videoService",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"خدمة الفيديو":"Video Service"}),rules:[{required:!0}],children:l.jsxs(be,{size:"large",children:[l.jsx(be.Option,{value:"zoom",children:"Zoom"}),l.jsx(be.Option,{value:"twilio",children:"Twilio"}),l.jsx(be.Option,{value:"jitsi",children:"Jitsi Meet"}),l.jsx(be.Option,{value:"google-meet",children:"Google Meet"})]})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"videoApiKey",label:l.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[l.jsx(cT,{}),e==="ar"?"مفتاح API للفيديو":"Video API Key"]}),children:l.jsx(ye.Password,{size:"large",placeholder:e==="ar"?"أدخل مفتاح API":"Enter API Key",iconRender:j=>j?l.jsx(Wn,{}):l.jsx(Nn,{})})})})]})})}),l.jsx(Ee,{className:"border-0 shadow-sm",title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:l.jsx(vi,{className:"text-white text-lg"})}),l.jsxs("div",{children:[l.jsx(vr,{level:5,className:"mb-0",children:e==="ar"?"خدمة البريد الإلكتروني":"Email Service"}),l.jsx(wn,{type:"secondary",className:"text-xs",children:e==="ar"?"إعدادات خدمة البريد الإلكتروني":"Email service configuration"})]})]}),children:l.jsx(W,{form:c,layout:"vertical",children:l.jsxs(Re,{gutter:[16,0],children:[l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"emailService",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"خدمة البريد الإلكتروني":"Email Service"}),rules:[{required:!0}],children:l.jsxs(be,{size:"large",children:[l.jsx(be.Option,{value:"smtp",children:"SMTP"}),l.jsx(be.Option,{value:"sendgrid",children:"SendGrid"}),l.jsx(be.Option,{value:"mailgun",children:"Mailgun"}),l.jsx(be.Option,{value:"ses",children:"AWS SES"})]})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"smtpHost",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"خادم SMTP":"SMTP Host"}),children:l.jsx(ye,{size:"large",placeholder:"smtp.example.com"})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"smtpPort",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"منفذ SMTP":"SMTP Port"}),children:l.jsx(ye,{type:"number",size:"large",placeholder:"587"})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"smtpUser",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم المستخدم":"Username"}),children:l.jsx(ye,{size:"large",placeholder:e==="ar"?"اسم المستخدم":"Username"})})}),l.jsx(me,{xs:24,children:l.jsx(W.Item,{name:"smtpPassword",label:l.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[l.jsx(Nn,{}),e==="ar"?"كلمة المرور":"Password"]}),children:l.jsx(ye.Password,{size:"large",placeholder:e==="ar"?"كلمة المرور":"Password",iconRender:j=>j?l.jsx(Wn,{}):l.jsx(Nn,{})})})})]})})}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx(J,{size:"large",onClick:()=>c.resetFields(),children:e==="ar"?"إعادة تعيين":"Reset"}),l.jsx(J,{type:"primary",htmlType:"submit",icon:l.jsx(ja,{}),size:"large",loading:h,onClick:()=>c.submit(),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ الإعدادات":"Save Settings"})]})]})},{key:"appearance",label:l.jsxs(ze,{children:[l.jsx(uT,{}),l.jsx("span",{children:e==="ar"?"المظهر":"Appearance"})]}),children:l.jsx(W,{form:u,onFinish:_,layout:"vertical",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx(Ee,{className:"border-0 shadow-sm",title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center",children:l.jsx(UE,{className:"text-white text-lg"})}),l.jsxs("div",{children:[l.jsx(vr,{level:5,className:"mb-0",children:e==="ar"?"الشعار والاسم":"Logo & Name"}),l.jsx(wn,{type:"secondary",className:"text-xs",children:e==="ar"?"تخصيص شعار واسم لوحة التحكم":"Customize dashboard logo and name"})]})]}),children:l.jsxs(Re,{gutter:[16,16],children:[l.jsx(me,{xs:24,children:l.jsx("div",{className:"mb-4 pb-4 border-b border-gray-200",children:l.jsx(vr,{level:5,className:"mb-2",children:e==="ar"?"إعدادات لوحة التحكم":"Dashboard Settings"})})}),l.jsx(me,{xs:24,md:12,children:l.jsxs(W.Item,{name:"logo",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"شعار لوحة التحكم":"Dashboard Logo"}),children:[l.jsx(Vt,{beforeUpload:k,showUploadList:!1,accept:"image/*",children:l.jsx(J,{icon:l.jsx(Sn,{}),size:"large",block:!0,children:e==="ar"?"رفع شعار":"Upload Logo"})}),i.logo&&l.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsx("img",{src:i.logo,alt:"Dashboard Logo",className:"h-20 object-contain mx-auto"}),l.jsx(J,{type:"link",danger:!0,size:"small",className:"mt-2",onClick:()=>{a({logo:null}),se.success(e==="ar"?"تم حذف الشعار":"Logo removed")},children:e==="ar"?"حذف الشعار":"Remove Logo"})]})]})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"dashboardName",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم لوحة التحكم (إنجليزي)":"Dashboard Name (English)"}),rules:[{required:!0}],children:l.jsx(ye,{size:"large",placeholder:"Jadwa"})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"dashboardNameAr",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم لوحة التحكم (عربي)":"Dashboard Name (Arabic)"}),rules:[{required:!0}],children:l.jsx(ye,{size:"large",placeholder:"جدوى"})})}),l.jsx(me,{xs:24,children:l.jsx("div",{className:"mb-4 pb-4 mt-6 border-b border-gray-200",children:l.jsx(vr,{level:5,className:"mb-2",children:e==="ar"?"إعدادات الموقع":"Website Settings"})})}),l.jsx(me,{xs:24,md:12,children:l.jsxs(W.Item,{name:"websiteLogo",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"شعار الموقع":"Website Logo"}),children:[l.jsx(Vt,{beforeUpload:T,showUploadList:!1,accept:"image/*",children:l.jsx(J,{icon:l.jsx(Sn,{}),size:"large",block:!0,children:e==="ar"?"رفع شعار الموقع":"Upload Website Logo"})}),i.websiteLogo&&l.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsx("img",{src:i.websiteLogo,alt:"Website Logo",className:"h-20 object-contain mx-auto"}),l.jsx(J,{type:"link",danger:!0,size:"small",className:"mt-2",onClick:()=>{a({websiteLogo:null}),se.success(e==="ar"?"تم حذف شعار الموقع":"Website logo removed")},children:e==="ar"?"حذف شعار الموقع":"Remove Logo"})]})]})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"websiteName",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم الموقع (إنجليزي)":"Website Name (English)"}),rules:[{required:!0}],children:l.jsx(ye,{size:"large",placeholder:"Jadwa"})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"websiteNameAr",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"اسم الموقع (عربي)":"Website Name (Arabic)"}),rules:[{required:!0}],children:l.jsx(ye,{size:"large",placeholder:"جدوى"})})})]})}),l.jsx(Ee,{className:"border-0 shadow-sm",title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center",children:l.jsx(Jq,{className:"text-white text-lg"})}),l.jsxs("div",{children:[l.jsx(vr,{level:5,className:"mb-0",children:e==="ar"?"الخطوط":"Fonts"}),l.jsx(wn,{type:"secondary",className:"text-xs",children:e==="ar"?"تخصيص الخطوط":"Customize fonts"})]})]}),children:l.jsxs(Re,{gutter:[16,0],children:[l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"primaryFont",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"الخط الأساسي (إنجليزي)":"Primary Font (English)"}),rules:[{required:!0}],children:l.jsxs(be,{size:"large",children:[l.jsx(be.Option,{value:"Inter",children:"Inter"}),l.jsx(be.Option,{value:"Roboto",children:"Roboto"}),l.jsx(be.Option,{value:"Open Sans",children:"Open Sans"}),l.jsx(be.Option,{value:"Poppins",children:"Poppins"}),l.jsx(be.Option,{value:"Montserrat",children:"Montserrat"}),l.jsx(be.Option,{value:"Lato",children:"Lato"})]})})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"arabicFont",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"الخط العربي":"Arabic Font"}),rules:[{required:!0}],children:l.jsxs(be,{size:"large",children:[l.jsx(be.Option,{value:"Cairo",children:"Cairo"}),l.jsx(be.Option,{value:"Tajawal",children:"Tajawal"}),l.jsx(be.Option,{value:"Almarai",children:"Almarai"}),l.jsx(be.Option,{value:"Changa",children:"Changa"}),l.jsx(be.Option,{value:"IBM Plex Sans Arabic",children:"IBM Plex Sans Arabic"}),l.jsx(be.Option,{value:"Noto Sans Arabic",children:"Noto Sans Arabic"})]})})})]})}),l.jsx(Ee,{className:"border-0 shadow-sm",title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500 to-pink-600 flex items-center justify-center",children:l.jsx(uT,{className:"text-white text-lg"})}),l.jsxs("div",{children:[l.jsx(vr,{level:5,className:"mb-0",children:e==="ar"?"الألوان":"Colors"}),l.jsx(wn,{type:"secondary",className:"text-xs",children:e==="ar"?"تخصيص ألوان المنصة":"Customize platform colors"})]})]}),children:l.jsxs(Re,{gutter:[16,16],children:[l.jsx(me,{xs:24,md:12,children:l.jsxs(W.Item,{name:"primaryColor",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"اللون الأساسي":"Primary Color"}),rules:[{required:!0}],children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ye,{type:"color",value:i.primaryColor,onChange:j=>{u.setFieldValue("primaryColor",j.target.value),a({primaryColor:j.target.value})},className:"w-16 h-12 rounded-lg cursor-pointer",style:{border:"none"}}),l.jsx(ye,{size:"large",value:i.primaryColor,onChange:j=>{u.setFieldValue("primaryColor",j.target.value),a({primaryColor:j.target.value})},placeholder:"#7a8c66"})]}),l.jsx("div",{className:"mt-2 h-8 rounded-lg",style:{backgroundColor:i.primaryColor}})]})}),l.jsx(me,{xs:24,md:12,children:l.jsxs(W.Item,{name:"secondaryColor",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"اللون الثانوي":"Secondary Color"}),rules:[{required:!0}],children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ye,{type:"color",value:i.secondaryColor,onChange:j=>{u.setFieldValue("secondaryColor",j.target.value),a({secondaryColor:j.target.value})},className:"w-16 h-12 rounded-lg cursor-pointer",style:{border:"none"}}),l.jsx(ye,{size:"large",value:i.secondaryColor,onChange:j=>{u.setFieldValue("secondaryColor",j.target.value),a({secondaryColor:j.target.value})},placeholder:"#14b8a6"})]}),l.jsx("div",{className:"mt-2 h-8 rounded-lg",style:{backgroundColor:i.secondaryColor}})]})})]})}),l.jsx(Ee,{className:"border-0 shadow-sm",title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center",children:l.jsx(ka,{className:"text-white text-lg"})}),l.jsxs("div",{children:[l.jsx(vr,{level:5,className:"mb-0",children:e==="ar"?"الرسوم المتحركة":"Animations"}),l.jsx(wn,{type:"secondary",className:"text-xs",children:e==="ar"?"إعدادات الرسوم المتحركة":"Animation settings"})]})]}),children:l.jsxs(Re,{gutter:[16,16],children:[l.jsx(me,{xs:24,md:12,children:l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ka,{className:"text-lg text-gray-600"}),l.jsxs("div",{children:[l.jsx(wn,{strong:!0,children:e==="ar"?"تفعيل الرسوم المتحركة":"Enable Animations"}),l.jsx("br",{}),l.jsx(wn,{type:"secondary",className:"text-xs",children:e==="ar"?"تفعيل أو تعطيل الرسوم المتحركة":"Enable or disable animations"})]})]}),l.jsx(W.Item,{name:"animationsEnabled",valuePropName:"checked",className:"mb-0",children:l.jsx(pi,{})})]})}),l.jsx(me,{xs:24,md:12,children:l.jsx(W.Item,{name:"animationSpeed",label:l.jsx("span",{className:"font-semibold",children:e==="ar"?"سرعة الرسوم المتحركة":"Animation Speed"}),children:l.jsxs(Ui.Group,{size:"large",children:[l.jsx(Ui.Button,{value:"slow",children:e==="ar"?"بطيء":"Slow"}),l.jsx(Ui.Button,{value:"normal",children:e==="ar"?"عادي":"Normal"}),l.jsx(Ui.Button,{value:"fast",children:e==="ar"?"سريع":"Fast"})]})})})]})}),l.jsx(Ee,{className:"border-0 shadow-sm",title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500 to-cyan-600 flex items-center justify-center",children:l.jsx(Wn,{className:"text-white text-lg"})}),l.jsxs("div",{children:[l.jsx(vr,{level:5,className:"mb-0",children:e==="ar"?"عرض المحتوى":"Content Visibility"}),l.jsx(wn,{type:"secondary",className:"text-xs",children:e==="ar"?"التحكم في ظهور البيانات":"Control data visibility"})]})]}),children:l.jsx(Re,{gutter:[16,16],children:l.jsx(me,{xs:24,md:12,children:l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(tt,{className:"text-lg text-gray-600"}),l.jsxs("div",{children:[l.jsx(wn,{strong:!0,children:e==="ar"?"بيانات اتصال المستشار":"Consultant Contact Info"}),l.jsx("br",{}),l.jsx(wn,{type:"secondary",className:"text-xs",children:e==="ar"?"إظهار البريد والهاتف في صفحة المستشار":"Show email and phone on consultant page"})]})]}),l.jsx(W.Item,{name:"showConsultantContactInfo",valuePropName:"checked",className:"mb-0",children:l.jsx(pi,{})})]})})})}),l.jsx(Fn,{message:e==="ar"?"الوضع الفاتح فقط":"Light Mode Only",description:e==="ar"?"المنصة تعمل في الوضع الفاتح فقط لضمان تجربة مستخدم أفضل":"Platform operates in light mode only for better user experience",type:"info",showIcon:!0,icon:l.jsx(Fp,{}),className:"mb-4"}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx(J,{size:"large",onClick:()=>{u.setFieldsValue({dashboardName:i.dashboardName,dashboardNameAr:i.dashboardNameAr,websiteName:i.websiteName||i.dashboardName,websiteNameAr:i.websiteNameAr||i.dashboardNameAr,primaryFont:i.primaryFont,arabicFont:i.arabicFont,animationsEnabled:i.animationsEnabled,animationSpeed:i.animationSpeed,primaryColor:i.primaryColor,secondaryColor:i.secondaryColor})},children:e==="ar"?"إعادة تعيين":"Reset"}),l.jsx(J,{type:"primary",htmlType:"submit",icon:l.jsx(ja,{}),size:"large",loading:h,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ الإعدادات":"Save Settings"})]})]})})},{key:"legal",label:l.jsxs(ze,{children:[l.jsx(Kt,{}),l.jsx("span",{children:e==="ar"?"الشروط والأحكام":"Terms & Conditions"})]}),children:l.jsx("div",{className:"space-y-6",children:l.jsx(Ee,{className:"glass-card border-0 shadow-professional-lg rounded-xl mb-6",title:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center shadow-lg",children:l.jsx(Kt,{className:"text-white text-xl"})}),l.jsxs("div",{children:[l.jsx(vr,{level:4,className:"mb-1 font-bold",children:e==="ar"?"إدارة الشروط والأحكام":"Manage Terms & Conditions"}),l.jsx(wn,{type:"secondary",className:"text-sm",children:e==="ar"?"تعديل سياسات الاستخدام للعملاء والمستشارين":"Edit usage policies for clients and consultants"})]})]}),styles:{body:{padding:"24px"},head:{background:"transparent",borderBottom:"2px solid rgba(0,0,0,0.05)",padding:"20px 24px"}},children:l.jsxs(W,{form:d,layout:"vertical",onFinish:D,children:[l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx(vr,{level:5,className:"mb-4 text-gray-700",children:e==="ar"?"شروط العملاء":"Client Terms"}),l.jsx(la,{type:"card",items:[{key:"client-ar",label:e==="ar"?"العربية":"Arabic",children:l.jsxs("div",{className:"pt-2",children:[l.jsx("div",{className:"flex justify-end mb-2",children:l.jsx(Vt,{showUploadList:!1,accept:".docx,.pdf",beforeUpload:j=>C(j,"termsClient"),children:l.jsx(J,{icon:l.jsx(Sn,{}),children:e==="ar"?"استيراد من Word/PDF":"Import from Word/PDF"})})}),l.jsx(W.Item,{name:"termsClient",hidden:!0,children:l.jsx(ye,{})}),l.jsx(W.Item,{children:l.jsx("div",{dir:"rtl",children:l.jsx(ep,{theme:"snow",value:g.termsClient,onChange:j=>v("termsClient",j),style:{height:"300px",marginBottom:"50px",direction:"rtl",textAlign:"right"},placeholder:e==="ar"?"أدخل الشروط والأحكام الخاصة بالعملاء (عربي)...":"Enter terms for clients (Arabic)..."})})})]})},{key:"client-en",label:e==="ar"?"الإنجليزية":"English",children:l.jsxs("div",{className:"pt-2",children:[l.jsx("div",{className:"flex justify-end mb-2",children:l.jsx(Vt,{showUploadList:!1,accept:".docx,.pdf",beforeUpload:j=>C(j,"termsClientEn"),children:l.jsx(J,{icon:l.jsx(Sn,{}),children:e==="ar"?"استيراد من Word/PDF":"Import from Word/PDF"})})}),l.jsx(W.Item,{name:"termsClientEn",hidden:!0,children:l.jsx(ye,{})}),l.jsx(W.Item,{children:l.jsx("div",{dir:"ltr",children:l.jsx(ep,{theme:"snow",value:g.termsClientEn,onChange:j=>v("termsClientEn",j),style:{height:"300px",marginBottom:"50px",direction:"ltr",textAlign:"left"},placeholder:e==="ar"?"أدخل الشروط والأحكام الخاصة بالعملاء (إنجليزي)...":"Enter terms for clients (English)..."})})})]})}]})]}),l.jsx(cn,{}),l.jsxs("div",{children:[l.jsx(vr,{level:5,className:"mb-4 text-gray-700",children:e==="ar"?"شروط المستشارين":"Consultant Terms"}),l.jsx(la,{type:"card",items:[{key:"consultant-ar",label:e==="ar"?"العربية":"Arabic",children:l.jsxs("div",{className:"pt-2",children:[l.jsx("div",{className:"flex justify-end mb-2",children:l.jsx(Vt,{showUploadList:!1,accept:".docx,.pdf",beforeUpload:j=>C(j,"termsConsultant"),children:l.jsx(J,{icon:l.jsx(Sn,{}),children:e==="ar"?"استيراد من Word/PDF":"Import from Word/PDF"})})}),l.jsx(W.Item,{name:"termsConsultant",hidden:!0,children:l.jsx(ye,{})}),l.jsx(W.Item,{children:l.jsx("div",{dir:"rtl",children:l.jsx(ep,{theme:"snow",value:g.termsConsultant,onChange:j=>v("termsConsultant",j),style:{height:"300px",marginBottom:"50px",direction:"rtl",textAlign:"right"},placeholder:e==="ar"?"أدخل الشروط والأحكام الخاصة بالمستشارين (عربي)...":"Enter terms for consultants (Arabic)..."})})})]})},{key:"consultant-en",label:e==="ar"?"الإنجليزية":"English",children:l.jsxs("div",{className:"pt-2",children:[l.jsx("div",{className:"flex justify-end mb-2",children:l.jsx(Vt,{showUploadList:!1,accept:".docx,.pdf",beforeUpload:j=>C(j,"termsConsultantEn"),children:l.jsx(J,{icon:l.jsx(Sn,{}),children:e==="ar"?"استيراد من Word/PDF":"Import from Word/PDF"})})}),l.jsx(W.Item,{name:"termsConsultantEn",hidden:!0,children:l.jsx(ye,{})}),l.jsx(W.Item,{children:l.jsx("div",{dir:"ltr",children:l.jsx(ep,{theme:"snow",value:g.termsConsultantEn,onChange:j=>v("termsConsultantEn",j),style:{height:"300px",marginBottom:"50px",direction:"ltr",textAlign:"left"},placeholder:e==="ar"?"أدخل الشروط والأحكام الخاصة بالمستشارين (إنجليزي)...":"Enter terms for consultants (English)..."})})})]})}]})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx(J,{type:"primary",htmlType:"submit",icon:l.jsx(ja,{}),size:"large",loading:h,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"حفظ التغييرات":"Save Changes"})})]})})})}];return l.jsx("div",{className:"min-h-screen dashboard-bg",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx(vr,{level:1,className:"mb-3 gradient-text text-4xl sm:text-5xl font-extrabold",children:e==="ar"?"الإعدادات":"Settings"}),l.jsx(wn,{className:"text-gray-600 text-lg font-medium",children:e==="ar"?"إدارة إعدادات المنصة والتكاملات والمظهر":"Manage platform settings, integrations, and appearance"})]}),l.jsx(gs,{count:4,showZero:!1,children:l.jsx(J,{icon:l.jsx(Uc,{}),size:"large",className:"glass-card border-0 shadow-professional",children:e==="ar"?"الإعدادات السريعة":"Quick Settings"})})]})}),l.jsx(Ee,{className:"glass-card shadow-professional-xl rounded-2xl border-0 overflow-hidden",styles:{body:{padding:0}},children:l.jsx(la,{items:N,activeKey:p,onChange:y,size:"large",type:"line",className:"settings-tabs px-6 pt-4",tabBarStyle:{marginBottom:0,borderBottom:"1px solid #f0f0f0"}})})]})})},_me=()=>{const{t:n,language:e}=Ze(),[t,r]=M.useState([]),[i,a]=M.useState([]),[s,o]=M.useState(null),[c,u]=M.useState({logs:!1,stats:!1}),[d,h]=M.useState("all"),[f,p]=M.useState("all");M.useEffect(()=>{y(),g(),m()},[d,f]);const y=async()=>{try{u(E=>({...E,stats:!0}));const S=await Mp.getSecurityStats();o(S)}catch(S){console.error("Error fetching security stats:",S)}finally{u(S=>({...S,stats:!1}))}},g=async()=>{try{u(_=>({..._,logs:!0}));const S={};d!=="all"&&(S.level=d);const E=await Mp.getSystemLogs(S);r(E.logs||[])}catch(S){console.error("Error fetching system logs:",S)}finally{u(S=>({...S,logs:!1}))}},m=async()=>{try{const S={};f!=="all"&&(S.action=f);const E=await Mp.getAuditLogs(S);a(E.logs||[])}catch(S){console.error("Error fetching audit logs:",S)}},v=S=>({INFO:"blue",WARNING:"orange",ERROR:"red",CRITICAL:"magenta"})[S]||"default",x=S=>({CREATE:"green",UPDATE:"blue",DELETE:"red",LOGIN:"cyan",LOGOUT:"gray"})[S]||"default",b=[{title:e==="ar"?"المستوى":"Level",dataIndex:"level",key:"level",render:S=>l.jsx($e,{color:v(S),children:S})},{title:e==="ar"?"الرسالة":"Message",dataIndex:"message",key:"message",ellipsis:!0},{title:e==="ar"?"المستخدم":"User",dataIndex:["user","email"],key:"user",render:S=>S||"-"},{title:e==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:S=>qe(S).format("YYYY-MM-DD HH:mm:ss")}],A=[{title:e==="ar"?"الإجراء":"Action",dataIndex:"action",key:"action",render:S=>l.jsx($e,{color:x(S),children:S})},{title:e==="ar"?"النوع":"Resource Type",dataIndex:"resourceType",key:"resourceType"},{title:e==="ar"?"المستخدم":"User",dataIndex:["user","email"],key:"user"},{title:e==="ar"?"الوصف":"Description",dataIndex:"description",key:"description",ellipsis:!0},{title:e==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:S=>qe(S).format("YYYY-MM-DD HH:mm:ss")}],w=[{key:"security",label:e==="ar"?"الأمان":"Security",icon:l.jsx(JW,{}),children:l.jsxs("div",{children:[s&&l.jsxs(Re,{gutter:[16,16],className:"mb-6",children:[l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:e==="ar"?"تسجيلات الدخول":"Total Logins",value:s.stats?.totalLogins||0,valueStyle:{color:"#1890ff"}})})}),l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:e==="ar"?"فشل تسجيل الدخول":"Failed Logins",value:s.stats?.failedLogins||0,valueStyle:{color:"#ff4d4f"}})})}),l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:e==="ar"?"أنشطة مشبوهة":"Suspicious Activities",value:s.stats?.suspiciousActivities||0,valueStyle:{color:"#faad14"}})})}),l.jsx(me,{xs:24,sm:12,md:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:e==="ar"?"المستخدمون النشطون":"Active Users",value:s.stats?.activeUsers||0,valueStyle:{color:"#52c41a"}})})})]}),s?.recentAudits&&s.recentAudits.length>0&&l.jsx(Ee,{title:e==="ar"?"العمليات الأخيرة":"Recent Activities",children:l.jsx(Pt,{columns:A,dataSource:s.recentAudits,rowKey:"id",pagination:!1,size:"small"})})]})},{key:"system-logs",label:e==="ar"?"سجلات النظام":"System Logs",icon:l.jsx(Kt,{}),children:l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[l.jsxs(be,{value:d,onChange:h,style:{width:150},children:[l.jsx(be.Option,{value:"all",children:e==="ar"?"الكل":"All"}),l.jsx(be.Option,{value:"INFO",children:"INFO"}),l.jsx(be.Option,{value:"WARNING",children:"WARNING"}),l.jsx(be.Option,{value:"ERROR",children:"ERROR"}),l.jsx(be.Option,{value:"CRITICAL",children:"CRITICAL"})]}),l.jsx(J,{icon:l.jsx(Er,{}),onClick:g,loading:c.logs,children:e==="ar"?"تحديث":"Refresh"})]}),l.jsx(Ee,{children:l.jsx(Pt,{columns:b,dataSource:t,rowKey:"id",loading:c.logs,pagination:{pageSize:20}})})]})},{key:"audit-logs",label:e==="ar"?"سجلات التدقيق":"Audit Logs",icon:l.jsx(BH,{}),children:l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[l.jsxs(be,{value:f,onChange:p,style:{width:150},children:[l.jsx(be.Option,{value:"all",children:e==="ar"?"الكل":"All"}),l.jsx(be.Option,{value:"CREATE",children:"CREATE"}),l.jsx(be.Option,{value:"UPDATE",children:"UPDATE"}),l.jsx(be.Option,{value:"DELETE",children:"DELETE"}),l.jsx(be.Option,{value:"LOGIN",children:"LOGIN"})]}),l.jsx(J,{icon:l.jsx(Er,{}),onClick:m,children:e==="ar"?"تحديث":"Refresh"})]}),l.jsx(Ee,{children:l.jsx(Pt,{columns:A,dataSource:i,rowKey:"id",pagination:{pageSize:20}})})]})}];return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:e==="ar"?"المراقبة والأمان":"Monitoring & Security"}),l.jsx("p",{className:"text-gray-500",children:e==="ar"?"مراقبة النظام وسجلات الأمان":"System monitoring and security logs"})]}),l.jsx("h1",{className:"text-3xl font-bold mb-6",children:e==="ar"?"المراقبة والأمان":"Monitoring & Security"}),l.jsx(Ee,{className:"shadow-lg rounded-xl border-0",children:l.jsx(la,{items:w})})]})},Dme=()=>{const{t:n,language:e}=Ze(),[t,r]=M.useState([]),[i,a]=M.useState([]),[s,o]=M.useState(!1),[c,u]=M.useState(!1),[d,h]=M.useState(null),[f]=W.useForm();M.useEffect(()=>{p(),y()},[]);const p=async()=>{try{o(!0);const S=await Lo.getPermissions();r(S.permissions||[])}catch(S){console.error("Error fetching permissions:",S),se.error(e==="ar"?"فشل تحميل الصلاحيات":"Failed to load permissions")}finally{o(!1)}},y=async()=>{try{const S=await Lo.getRoles();a(S.roles||[])}catch(S){console.error("Error fetching roles:",S),se.error(e==="ar"?"فشل تحميل الأدوار":"Failed to load roles")}},g=async()=>{try{await Lo.initializePermissions(),se.success(e==="ar"?"تم تهيئة الصلاحيات بنجاح":"Permissions initialized successfully"),p()}catch(S){se.error(S.message||(e==="ar"?"فشل تهيئة الصلاحيات":"Failed to initialize permissions"))}},m=async S=>{try{d?(await Lo.updateRole(d.id,S),se.success(e==="ar"?"تم تحديث الدور بنجاح":"Role updated successfully")):(await Lo.createRole(S),se.success(e==="ar"?"تم إنشاء الدور بنجاح":"Role created successfully")),u(!1),h(null),f.resetFields(),y()}catch(E){se.error(E.message||(e==="ar"?"فشل حفظ الدور":"Failed to save role"))}},v=async S=>{try{await Lo.deleteRole(S),se.success(e==="ar"?"تم حذف الدور بنجاح":"Role deleted successfully"),y()}catch(E){se.error(E.message||(e==="ar"?"فشل حذف الدور":"Failed to delete role"))}},x={totalPermissions:t.length,totalRoles:i.length,systemRoles:i.filter(S=>S.isSystem).length,customRoles:i.filter(S=>!S.isSystem).length},b=[{title:e==="ar"?"الاسم":"Name",dataIndex:"name",key:"name",render:(S,E)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Da,{className:"text-olive-green-600"}),l.jsx("span",{className:"font-semibold",children:S}),E.nameAr&&l.jsx($e,{color:"blue",className:"text-xs",children:E.nameAr})]})},{title:e==="ar"?"المورد":"Resource",dataIndex:"resource",key:"resource",render:S=>l.jsx($e,{color:"purple",children:S})},{title:e==="ar"?"الإجراء":"Action",dataIndex:"action",key:"action",render:S=>l.jsx($e,{color:"orange",children:S})},{title:e==="ar"?"الوصف":"Description",dataIndex:"description",key:"description",ellipsis:{showTitle:!1},render:S=>l.jsx(yi,{placement:"topLeft",title:S,children:S||"-"})}],A=[{title:e==="ar"?"الدور":"Role",key:"role",render:(S,E)=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-olive-green-400 to-turquoise-400 rounded-lg flex items-center justify-center",children:l.jsx(Xr,{className:"text-white text-lg"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900",children:E.name}),E.nameAr&&l.jsx("div",{className:"text-sm text-gray-500",children:E.nameAr})]})]})},{title:e==="ar"?"الصلاحيات":"Permissions",key:"permissions",render:(S,E)=>l.jsx(gs,{count:E.permissions?.length||0,showZero:!0,style:{backgroundColor:"#52c41a"},children:l.jsxs($e,{color:"green",icon:l.jsx(Zt,{}),children:[E.permissions?.length||0," ",e==="ar"?"صلاحية":"permissions"]})})},{title:e==="ar"?"المستخدمون":"Users",key:"users",render:(S,E)=>l.jsx(gs,{count:E._count?.userRoles||0,showZero:!0,style:{backgroundColor:"#1890ff"},children:l.jsxs($e,{color:"blue",icon:l.jsx(tt,{}),children:[E._count?.userRoles||0," ",e==="ar"?"مستخدم":"users"]})})},{title:e==="ar"?"النوع":"Type",key:"type",render:(S,E)=>l.jsx($e,{color:E.isSystem?"blue":"default",icon:E.isSystem?l.jsx(Nn,{}):l.jsx(hT,{}),children:E.isSystem?e==="ar"?"نظام":"System":e==="ar"?"مخصص":"Custom"})},{title:e==="ar"?"الإجراءات":"Actions",key:"actions",render:(S,E)=>l.jsxs(ze,{children:[l.jsx(yi,{title:e==="ar"?"تعديل":"Edit",children:l.jsx(J,{type:"primary",icon:l.jsx(_r,{}),onClick:()=>{h(E),f.setFieldsValue({name:E.name,nameAr:E.nameAr,description:E.description,permissionIds:E.permissions?.map(_=>_.permissionId)||[]}),u(!0)}})}),!E.isSystem&&l.jsx(ys,{title:e==="ar"?"حذف الدور":"Delete Role",description:e==="ar"?"هل أنت متأكد من حذف هذا الدور؟":"Are you sure you want to delete this role?",onConfirm:()=>v(E.id),okText:e==="ar"?"نعم":"Yes",cancelText:e==="ar"?"لا":"No",children:l.jsx(yi,{title:e==="ar"?"حذف":"Delete",children:l.jsx(J,{danger:!0,icon:l.jsx(wi,{})})})})]})}],w=[{key:"permissions",label:l.jsxs("span",{children:[l.jsx(Da,{className:"mr-2"}),e==="ar"?"الصلاحيات":"Permissions"]}),children:l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[l.jsx(J,{icon:l.jsx(Er,{}),onClick:p,loading:s,children:e==="ar"?"تحديث":"Refresh"}),l.jsx(J,{type:"primary",icon:l.jsx(Zt,{}),onClick:g,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:e==="ar"?"تهيئة الصلاحيات الافتراضية":"Initialize Default Permissions"})]}),l.jsx(Ee,{className:"shadow-sm",children:l.jsx(Pt,{columns:b,dataSource:t,rowKey:"id",loading:s,pagination:{pageSize:20}})})]})},{key:"roles",label:l.jsxs("span",{children:[l.jsx(Xr,{className:"mr-2"}),e==="ar"?"الأدوار":"Roles"]}),children:l.jsxs("div",{children:[l.jsx("div",{className:"mb-6 flex justify-end",children:l.jsx(J,{type:"primary",icon:l.jsx(gr,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",onClick:()=>{h(null),f.resetFields(),u(!0)},children:e==="ar"?"إضافة دور":"Add Role"})}),l.jsx(Ee,{className:"shadow-sm",children:l.jsx(Pt,{columns:A,dataSource:i,rowKey:"id",pagination:{pageSize:10}})})]})}];return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:e==="ar"?"الصلاحيات والأدوار":"Permissions & Roles"}),l.jsx("p",{className:"text-gray-500 text-lg",children:e==="ar"?"إدارة الصلاحيات والأدوار للمستخدمين والتحكم في الوصول":"Manage user permissions and roles, control access"})]}),l.jsxs(Re,{gutter:[16,16],className:"mb-6",children:[l.jsx(me,{xs:24,sm:12,lg:6,children:l.jsx(Ee,{className:"shadow-sm border-l-4 border-l-blue-500",children:l.jsx(pt,{title:e==="ar"?"إجمالي الصلاحيات":"Total Permissions",value:x.totalPermissions,prefix:l.jsx(Da,{className:"text-blue-500"}),valueStyle:{color:"#1890ff"}})})}),l.jsx(me,{xs:24,sm:12,lg:6,children:l.jsx(Ee,{className:"shadow-sm border-l-4 border-l-green-500",children:l.jsx(pt,{title:e==="ar"?"إجمالي الأدوار":"Total Roles",value:x.totalRoles,prefix:l.jsx(Xr,{className:"text-green-500"}),valueStyle:{color:"#52c41a"}})})}),l.jsx(me,{xs:24,sm:12,lg:6,children:l.jsx(Ee,{className:"shadow-sm border-l-4 border-l-purple-500",children:l.jsx(pt,{title:e==="ar"?"أدوار النظام":"System Roles",value:x.systemRoles,prefix:l.jsx(Nn,{className:"text-purple-500"}),valueStyle:{color:"#722ed1"}})})}),l.jsx(me,{xs:24,sm:12,lg:6,children:l.jsx(Ee,{className:"shadow-sm border-l-4 border-l-orange-500",children:l.jsx(pt,{title:e==="ar"?"أدوار مخصصة":"Custom Roles",value:x.customRoles,prefix:l.jsx(hT,{className:"text-orange-500"}),valueStyle:{color:"#fa8c16"}})})})]}),l.jsx(Ee,{className:"shadow-lg rounded-xl border-0",children:l.jsx(la,{items:w,size:"large"})}),l.jsx(At,{title:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Xr,{className:"text-olive-green-600"}),l.jsx("span",{children:d?e==="ar"?"تعديل الدور":"Edit Role":e==="ar"?"إضافة دور":"Add Role"})]}),open:c,onCancel:()=>{u(!1),h(null),f.resetFields()},maskClosable:!0,keyboard:!0,footer:null,width:800,destroyOnHidden:!0,className:"modern-modal",children:l.jsxs(W,{form:f,layout:"vertical",onFinish:m,className:"mt-4",children:[l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"name",label:e==="ar"?"الاسم":"Name",rules:[{required:!0,message:e==="ar"?"الرجاء إدخال الاسم":"Please enter name"}],children:l.jsx(ye,{placeholder:e==="ar"?"اسم الدور":"Role name",prefix:l.jsx(Xr,{})})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"nameAr",label:e==="ar"?"الاسم (عربي)":"Name (Arabic)",children:l.jsx(ye,{placeholder:e==="ar"?"اسم الدور بالعربية":"Role name in Arabic"})})})]}),l.jsx(W.Item,{name:"description",label:e==="ar"?"الوصف":"Description",children:l.jsx(ye.TextArea,{rows:3,placeholder:e==="ar"?"وصف الدور":"Role description"})}),l.jsxs(cn,{orientation:"left",children:[l.jsx(Da,{className:"mr-2"}),e==="ar"?"الصلاحيات":"Permissions"]}),l.jsx(W.Item,{name:"permissionIds",label:e==="ar"?"اختر الصلاحيات":"Select Permissions",children:l.jsx(ba.Group,{className:"w-full",children:l.jsx(Re,{gutter:[16,16],children:t.map(S=>l.jsx(me,{xs:24,sm:12,lg:8,children:l.jsx(ba,{value:S.id,className:"w-full",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Da,{className:"text-olive-green-600"}),l.jsx("span",{className:"font-medium",children:S.nameAr||S.name}),l.jsx($e,{color:"purple",className:"text-xs",children:S.resource})]})})},S.id))})})}),l.jsx(cn,{}),l.jsx(W.Item,{className:"mb-0",children:l.jsxs(ze,{className:"w-full justify-end",children:[l.jsx(J,{onClick:()=>{u(!1),h(null),f.resetFields()},children:e==="ar"?"إلغاء":"Cancel"}),l.jsx(J,{type:"primary",htmlType:"submit",className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",icon:d?l.jsx(_r,{}):l.jsx(gr,{}),children:d?e==="ar"?"تحديث":"Update":e==="ar"?"إنشاء":"Create"})]})})]})})]})},{TextArea:fP}=ye,jme=()=>{const{id:n}=qa(),e=Rt(),{language:t}=Ze(),[r,i]=M.useState(!0),[a,s]=M.useState(null),[o,c]=M.useState([]),[u,d]=M.useState([]),[h,f]=M.useState([]),[p,y]=M.useState({deduction:!1,suspend:!1}),[g]=W.useForm();M.useEffect(()=>{m()},[n]);const m=async()=>{try{i(!0);const[S,E,_,D]=await Promise.all([jt.getClientById(n),jt.getClientBookings(n),jt.getClientPayments(n),jt.getClientReports(n)]);s(S.client),c(E.bookings||[]),d(_.payments||[]),f(D.reports||[])}catch(S){console.error("Error fetching client details:",S),se.error(S.message||(t==="ar"?"فشل تحميل البيانات":"Failed to load data"))}finally{i(!1)}},v=async S=>{try{await jt.deductFromClient(n,S.amount,S.reason),se.success(t==="ar"?"تم خصم المبلغ بنجاح":"Amount deducted successfully"),y({...p,deduction:!1}),g.resetFields(),m()}catch(E){se.error(E.message||(t==="ar"?"فشل الخصم":"Failed to deduct"))}},x=async S=>{try{await jt.suspendClient(n,S.reason,S.duration),se.success(t==="ar"?"تم تعليق الحساب بنجاح":"Account suspended successfully"),y({...p,suspend:!1}),g.resetFields(),m()}catch(E){se.error(E.message||(t==="ar"?"فشل تعليق الحساب":"Failed to suspend account"))}},b=[{title:t==="ar"?"التاريخ":"Date",dataIndex:"scheduledAt",key:"scheduledAt",render:S=>qe(S).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"المستشار":"Consultant",dataIndex:"consultantName",key:"consultantName"},{title:t==="ar"?"الخدمة":"Service",dataIndex:"serviceName",key:"serviceName"},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:S=>{const E={PENDING:"orange",CONFIRMED:"blue",COMPLETED:"green",CANCELLED:"red"};return l.jsx($e,{color:E[S],children:S})}},{title:t==="ar"?"السعر":"Price",dataIndex:"price",key:"price",render:S=>`${S} SAR`}],A=[{title:t==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:S=>qe(S).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:S=>`${S} SAR`},{title:t==="ar"?"الطريقة":"Method",dataIndex:"method",key:"method"},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:S=>{const E={PENDING:"orange",COMPLETED:"green",FAILED:"red",REFUNDED:"blue"};return l.jsx($e,{color:E[S],children:S})}},{title:t==="ar"?"رقم المعاملة":"Transaction ID",dataIndex:"transactionId",key:"transactionId"}];if(r)return l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx(kt,{size:"large"})});if(!a)return l.jsx(Fn,{message:t==="ar"?"العميل غير موجود":"Client not found",type:"error",action:l.jsx(J,{onClick:()=>e("/admin/clients"),children:t==="ar"?"العودة":"Go Back"})});const w=[{key:"overview",label:t==="ar"?"نظرة عامة":"Overview",icon:l.jsx(tt,{}),children:l.jsx(Ee,{children:l.jsxs(Je,{title:t==="ar"?"معلومات العميل":"Client Information",column:2,children:[l.jsxs(Je.Item,{label:t==="ar"?"الاسم الكامل":"Full Name",children:[a.firstName," ",a.lastName]}),l.jsx(Je.Item,{label:t==="ar"?"البريد الإلكتروني":"Email",children:a.user?.email}),l.jsx(Je.Item,{label:t==="ar"?"رقم الهاتف":"Phone",children:a.user?.phone||"-"}),l.jsx(Je.Item,{label:t==="ar"?"المدينة":"City",children:a.city||"-"}),l.jsx(Je.Item,{label:t==="ar"?"القطاع":"Sector",children:a.sector||"-"}),l.jsx(Je.Item,{label:t==="ar"?"اسم الشركة":"Company Name",children:a.companyName||"-"}),l.jsx(Je.Item,{label:t==="ar"?"الحالة":"Status",children:l.jsx($e,{color:a.user?.isActive?"green":"red",children:a.user?.isActive?t==="ar"?"نشط":"Active":t==="ar"?"معلق":"Suspended"})}),l.jsx(Je.Item,{label:t==="ar"?"تاريخ التسجيل":"Registration Date",children:qe(a.createdAt).format("YYYY-MM-DD")})]})})},{key:"bookings",label:t==="ar"?"الحجوزات":"Bookings",icon:l.jsx(vn,{}),children:l.jsx(Pt,{columns:b,dataSource:o,rowKey:"id",pagination:{pageSize:10}})},{key:"payments",label:t==="ar"?"المدفوعات":"Payments",icon:l.jsx(Yn,{}),children:l.jsx(Pt,{columns:A,dataSource:u,rowKey:"id",pagination:{pageSize:10}})},{key:"reports",label:t==="ar"?"التقارير":"Reports",icon:l.jsx(Kt,{}),children:l.jsx("div",{children:h.map(S=>l.jsxs(Ee,{className:"mb-4",children:[l.jsx("h3",{children:S.title}),l.jsx("p",{className:"text-gray-600",children:S.summary}),l.jsx($e,{children:S.status})]},S.id))})}];return l.jsx("div",{className:"min-h-screen bg-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(J,{icon:l.jsx(bs,{}),onClick:()=>e("/admin/clients"),children:t==="ar"?"العودة":"Back"}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[a.firstName," ",a.lastName]}),l.jsx("p",{className:"text-gray-500",children:a.user?.email})]})]}),l.jsxs(ze,{children:[l.jsx(J,{icon:l.jsx(xR,{}),onClick:()=>y({...p,deduction:!0}),children:t==="ar"?"خصم":"Deduction"}),l.jsx(J,{danger:!0,icon:l.jsx($c,{}),onClick:()=>y({...p,suspend:!0}),children:t==="ar"?"تعليق الحساب":"Suspend Account"})]})]}),l.jsxs(Re,{gutter:16,className:"mb-6",children:[l.jsx(me,{span:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:t==="ar"?"إجمالي الحجوزات":"Total Bookings",value:o.length,prefix:l.jsx(vn,{})})})}),l.jsx(me,{span:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:t==="ar"?"إجمالي المدفوعات":"Total Payments",value:u.reduce((S,E)=>S+(parseFloat(E.amount)||0),0),prefix:l.jsx(Yn,{}),suffix:"SAR"})})}),l.jsx(me,{span:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:t==="ar"?"التقارير":"Reports",value:h.length,prefix:l.jsx(Kt,{})})})}),l.jsx(me,{span:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:t==="ar"?"الحالة":"Status",value:a.user?.isActive?t==="ar"?"نشط":"Active":t==="ar"?"معلق":"Suspended",valueStyle:{color:a.user?.isActive?"#52c41a":"#ff4d4f"}})})})]}),l.jsx(Ee,{children:l.jsx(la,{items:w})}),l.jsx(At,{title:t==="ar"?"خصم من العميل":"Deduct from Client",open:p.deduction,onCancel:()=>{y({...p,deduction:!1}),g.resetFields()},footer:null,children:l.jsxs(W,{form:g,onFinish:v,layout:"vertical",children:[l.jsx(W.Item,{name:"amount",label:t==="ar"?"المبلغ":"Amount",rules:[{required:!0,type:"number",min:.01}],children:l.jsx(Na,{prefix:"SAR",style:{width:"100%"},min:.01,step:.01})}),l.jsx(W.Item,{name:"reason",label:t==="ar"?"السبب":"Reason",rules:[{required:!0}],children:l.jsx(fP,{rows:4})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",danger:!0,block:!0,children:t==="ar"?"خصم":"Deduct"})})]})}),l.jsx(At,{title:t==="ar"?"تعليق حساب العميل":"Suspend Client Account",open:p.suspend,onCancel:()=>{y({...p,suspend:!1}),g.resetFields()},footer:null,children:l.jsxs(W,{form:g,onFinish:x,layout:"vertical",children:[l.jsx(W.Item,{name:"reason",label:t==="ar"?"السبب":"Reason",rules:[{required:!0}],children:l.jsx(fP,{rows:4})}),l.jsx(W.Item,{name:"duration",label:t==="ar"?"المدة (أيام)":"Duration (days)",rules:[{required:!0,type:"number",min:1}],children:l.jsx(Na,{style:{width:"100%"},min:1,placeholder:t==="ar"?"0 = دائم":"0 = Permanent"})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",danger:!0,block:!0,children:t==="ar"?"تعليق":"Suspend"})})]})})]})})},{TextArea:Fw}=ye,Tme=()=>{const{id:n}=qa(),e=Rt(),{language:t}=Ze(),[r,i]=M.useState(!0),[a,s]=M.useState(null),[o,c]=M.useState([]),[u,d]=M.useState([]),[h,f]=M.useState([]),[p,y]=M.useState({profit:!1,deduction:!1,suspend:!1}),[g]=W.useForm();M.useEffect(()=>{m()},[n]);const m=async()=>{try{i(!0);const[C,k,T,N]=await Promise.all([jt.getConsultantById(n),jt.getConsultantBookings(n),jt.getConsultantEarnings(n),jt.getConsultantWithdrawals(n)]);s(C.consultant),c(k.bookings||[]),d(T.earnings||[]),f(N.withdrawals||[])}catch(C){console.error("Error fetching consultant details:",C),se.error(C.message||(t==="ar"?"فشل تحميل البيانات":"Failed to load data"))}finally{i(!1)}},v=async C=>{try{await jt.sendProfitToConsultant(n,C.amount,C.notes),se.success(t==="ar"?"تم إرسال الربح بنجاح":"Profit sent successfully"),y({...p,profit:!1}),g.resetFields(),m()}catch(k){se.error(k.message||(t==="ar"?"فشل إرسال الربح":"Failed to send profit"))}},x=async C=>{try{await jt.deductFromConsultant(n,C.amount,C.reason),se.success(t==="ar"?"تم خصم المبلغ بنجاح":"Amount deducted successfully"),y({...p,deduction:!1}),g.resetFields(),m()}catch(k){se.error(k.message||(t==="ar"?"فشل الخصم":"Failed to deduct"))}},b=async C=>{try{await jt.suspendConsultant(n,C.reason,C.duration),se.success(t==="ar"?"تم تعليق الحساب بنجاح":"Account suspended successfully"),y({...p,suspend:!1}),g.resetFields(),m()}catch(k){se.error(k.message||(t==="ar"?"فشل تعليق الحساب":"Failed to suspend account"))}},A=[{title:t==="ar"?"التاريخ":"Date",dataIndex:"scheduledAt",key:"scheduledAt",render:C=>qe(C).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"العميل":"Client",dataIndex:"clientName",key:"clientName"},{title:t==="ar"?"الخدمة":"Service",dataIndex:"serviceName",key:"serviceName"},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:C=>{const k={PENDING:"orange",CONFIRMED:"blue",COMPLETED:"green",CANCELLED:"red"};return l.jsx($e,{color:k[C],children:C})}},{title:t==="ar"?"السعر":"Price",dataIndex:"price",key:"price",render:C=>`${C} SAR`}],w=[{title:t==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:C=>qe(C).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:C=>`${C} SAR`},{title:t==="ar"?"العمولة":"Platform Fee",dataIndex:"platformFee",key:"platformFee",render:C=>`${C} SAR`},{title:t==="ar"?"صافي المبلغ":"Net Amount",dataIndex:"netAmount",key:"netAmount",render:C=>`${C} SAR`},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:C=>{const k={pending:"orange",available:"green",withdrawn:"blue"};return l.jsx($e,{color:k[C],children:C})}}],S=[{title:t==="ar"?"التاريخ":"Date",dataIndex:"createdAt",key:"createdAt",render:C=>qe(C).format("YYYY-MM-DD HH:mm")},{title:t==="ar"?"المبلغ":"Amount",dataIndex:"amount",key:"amount",render:C=>`${C} SAR`},{title:t==="ar"?"اسم البنك":"Bank Name",dataIndex:"bankName",key:"bankName"},{title:t==="ar"?"رقم الحساب":"Account Number",dataIndex:"accountNumber",key:"accountNumber"},{title:t==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:C=>{const k={PENDING:"orange",APPROVED:"green",REJECTED:"red",COMPLETED:"blue"};return l.jsx($e,{color:k[C],children:C})}}];if(r)return l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx(kt,{size:"large"})});if(!a)return l.jsx(Fn,{message:t==="ar"?"المستشار غير موجود":"Consultant not found",type:"error",action:l.jsx(J,{onClick:()=>e("/admin/consultants"),children:t==="ar"?"العودة":"Go Back"})});const E=u.reduce((C,k)=>C+(parseFloat(k.netAmount)||0),0),_=u.filter(C=>C.status==="available").reduce((C,k)=>C+(parseFloat(k.netAmount)||0),0),D=[{key:"overview",label:t==="ar"?"نظرة عامة":"Overview",children:l.jsxs(Ee,{children:[l.jsxs(Je,{title:t==="ar"?"معلومات المستشار":"Consultant Information",column:2,children:[l.jsxs(Je.Item,{label:t==="ar"?"الاسم الكامل":"Full Name",children:[a.firstName," ",a.lastName]}),l.jsx(Je.Item,{label:t==="ar"?"البريد الإلكتروني":"Email",children:a.user?.email}),l.jsx(Je.Item,{label:t==="ar"?"الدرجة العلمية":"Academic Degree",children:a.academicDegree}),l.jsx(Je.Item,{label:t==="ar"?"التخصص":"Specialization",children:a.specialization}),l.jsxs(Je.Item,{label:t==="ar"?"سعر الجلسة":"Price Per Session",children:[a.pricePerSession," SAR"]}),l.jsxs(Je.Item,{label:t==="ar"?"التقييم":"Rating",children:[l.jsx(Ia,{disabled:!0,value:a.rating||0,allowHalf:!0}),l.jsxs("span",{className:"ml-2",children:["(",a.totalRatings||0," ",t==="ar"?"تقييم":"ratings",")"]})]}),l.jsx(Je.Item,{label:t==="ar"?"الحالة":"Status",children:l.jsxs(ze,{children:[l.jsx($e,{color:a.user?.isActive?"green":"red",children:a.user?.isActive?t==="ar"?"نشط":"Active":t==="ar"?"معلق":"Suspended"}),a.isVerified&&l.jsx($e,{color:"blue",icon:l.jsx(iR,{}),children:t==="ar"?"موثق":"Verified"}),l.jsx($e,{color:a.isAvailable?"green":"orange",children:a.isAvailable?t==="ar"?"متاح":"Available":t==="ar"?"غير متاح":"Unavailable"})]})}),l.jsxs(Je.Item,{label:t==="ar"?"إجمالي الأرباح":"Total Earnings",children:[a.totalEarnings||0," SAR"]})]}),a.bio&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h3",{className:"font-bold mb-2",children:t==="ar"?"السيرة الذاتية":"Bio"}),l.jsx("p",{className:"text-gray-600",children:a.bio})]})]})},{key:"bookings",label:t==="ar"?"الحجوزات":"Bookings",children:l.jsx(Pt,{columns:A,dataSource:o,rowKey:"id",pagination:{pageSize:10}})},{key:"earnings",label:t==="ar"?"الأرباح":"Earnings",children:l.jsx(Pt,{columns:w,dataSource:u,rowKey:"id",pagination:{pageSize:10}})},{key:"withdrawals",label:t==="ar"?"السحوبات":"Withdrawals",children:l.jsx(Pt,{columns:S,dataSource:h,rowKey:"id",pagination:{pageSize:10}})}];return l.jsx("div",{className:"min-h-screen bg-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(J,{icon:l.jsx(bs,{}),onClick:()=>e("/admin/consultants"),children:t==="ar"?"العودة":"Back"}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[a.firstName," ",a.lastName]}),l.jsx("p",{className:"text-gray-500",children:a.user?.email})]})]}),l.jsxs(ze,{children:[l.jsx(J,{type:"primary",icon:l.jsx(BW,{}),onClick:()=>y({...p,profit:!0}),children:t==="ar"?"إرسال ربح":"Send Profit"}),l.jsx(J,{icon:l.jsx(xR,{}),onClick:()=>y({...p,deduction:!0}),children:t==="ar"?"خصم":"Deduction"}),l.jsx(J,{danger:!0,icon:l.jsx($c,{}),onClick:()=>y({...p,suspend:!0}),children:t==="ar"?"تعليق الحساب":"Suspend Account"})]})]}),l.jsxs(Re,{gutter:16,className:"mb-6",children:[l.jsx(me,{span:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:t==="ar"?"إجمالي الحجوزات":"Total Bookings",value:o.length,prefix:l.jsx(vn,{})})})}),l.jsx(me,{span:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:t==="ar"?"إجمالي الأرباح":"Total Earnings",value:E,prefix:l.jsx(Yn,{}),suffix:"SAR"})})}),l.jsx(me,{span:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:t==="ar"?"الأرباح المتاحة":"Available Earnings",value:_,prefix:l.jsx(FH,{}),suffix:"SAR",valueStyle:{color:"#52c41a"}})})}),l.jsx(me,{span:6,children:l.jsx(Ee,{children:l.jsx(pt,{title:t==="ar"?"التقييم":"Rating",value:a.rating||0,prefix:l.jsx(Bc,{}),suffix:"/ 5",valueStyle:{color:"#faad14"}})})})]}),l.jsx(Ee,{children:l.jsx(la,{items:D})}),l.jsx(At,{title:t==="ar"?"إرسال ربح للمستشار":"Send Profit to Consultant",open:p.profit,onCancel:()=>{y({...p,profit:!1}),g.resetFields()},footer:null,children:l.jsxs(W,{form:g,onFinish:v,layout:"vertical",children:[l.jsx(W.Item,{name:"amount",label:t==="ar"?"المبلغ":"Amount",rules:[{required:!0,type:"number",min:.01}],children:l.jsx(Na,{prefix:"SAR",style:{width:"100%"},min:.01,step:.01})}),l.jsx(W.Item,{name:"notes",label:t==="ar"?"ملاحظات":"Notes",children:l.jsx(Fw,{rows:4})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",block:!0,children:t==="ar"?"إرسال":"Send"})})]})}),l.jsx(At,{title:t==="ar"?"خصم من المستشار":"Deduct from Consultant",open:p.deduction,onCancel:()=>{y({...p,deduction:!1}),g.resetFields()},footer:null,children:l.jsxs(W,{form:g,onFinish:x,layout:"vertical",children:[l.jsx(W.Item,{name:"amount",label:t==="ar"?"المبلغ":"Amount",rules:[{required:!0,type:"number",min:.01}],children:l.jsx(Na,{prefix:"SAR",style:{width:"100%"},min:.01,step:.01})}),l.jsx(W.Item,{name:"reason",label:t==="ar"?"السبب":"Reason",rules:[{required:!0}],children:l.jsx(Fw,{rows:4})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",danger:!0,block:!0,children:t==="ar"?"خصم":"Deduct"})})]})}),l.jsx(At,{title:t==="ar"?"تعليق حساب المستشار":"Suspend Consultant Account",open:p.suspend,onCancel:()=>{y({...p,suspend:!1}),g.resetFields()},footer:null,children:l.jsxs(W,{form:g,onFinish:b,layout:"vertical",children:[l.jsx(W.Item,{name:"reason",label:t==="ar"?"السبب":"Reason",rules:[{required:!0}],children:l.jsx(Fw,{rows:4})}),l.jsx(W.Item,{name:"duration",label:t==="ar"?"المدة (أيام)":"Duration (days)",rules:[{required:!0,type:"number",min:1}],children:l.jsx(Na,{style:{width:"100%"},min:1,placeholder:t==="ar"?"0 = دائم":"0 = Permanent"})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",danger:!0,block:!0,children:t==="ar"?"تعليق":"Suspend"})})]})})]})})};var Lw={exports:{}},Uw={};var pP;function Cme(){if(pP)return Uw;pP=1;var n=by();function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function o(h,f){var p=f(),y=r({inst:{value:p,getSnapshot:f}}),g=y[0].inst,m=y[1];return a(function(){g.value=p,g.getSnapshot=f,c(g)&&m({inst:g})},[h,p,f]),i(function(){return c(g)&&m({inst:g}),h(function(){c(g)&&m({inst:g})})},[h]),s(p),p}function c(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!t(h,p)}catch{return!0}}function u(h,f){return f()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return Uw.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:d,Uw}var mP;function pU(){return mP||(mP=1,Lw.exports=Cme()),Lw.exports}var mU=pU();function hr(n){this.content=n}hr.prototype={constructor:hr,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),a=r.content.slice();return i==-1?a.push(t||n,e):(a[i+1]=e,t&&(a[i]=t)),new hr(a)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new hr(t)},addToStart:function(n,e){return new hr([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new hr(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),a=r.find(n);return i.splice(a==-1?i.length:a,0,e,t),new hr(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=hr.from(n),n.size?new hr(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=hr.from(n),n.size?new hr(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=hr.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};hr.from=function(n){if(n instanceof hr)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new hr(e)};function gU(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),a=e.child(r);if(i==a){t+=i.nodeSize;continue}if(!i.sameMarkup(a))return t;if(i.isText&&i.text!=a.text){for(let s=0;i.text[s]==a.text[s];s++)t++;return t}if(i.content.size||a.content.size){let s=gU(i.content,a.content,t+1);if(s!=null)return s}t+=i.nodeSize}}function yU(n,e,t,r){for(let i=n.childCount,a=e.childCount;;){if(i==0||a==0)return i==a?null:{a:t,b:r};let s=n.child(--i),o=e.child(--a),c=s.nodeSize;if(s==o){t-=c,r-=c;continue}if(!s.sameMarkup(o))return{a:t,b:r};if(s.isText&&s.text!=o.text){let u=0,d=Math.min(s.text.length,o.text.length);for(;u<d&&s.text[s.text.length-u-1]==o.text[o.text.length-u-1];)u++,t--,r--;return{a:t,b:r}}if(s.content.size||o.content.size){let u=yU(s.content,o.content,t-1,r-1);if(u)return u}t-=c,r-=c}}class ke{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,a){for(let s=0,o=0;o<t;s++){let c=this.content[s],u=o+c.nodeSize;if(u>e&&r(c,i+o,a||null,s)!==!1&&c.content.size){let d=o+1;c.nodesBetween(Math.max(0,e-d),Math.min(c.content.size,t-d),r,i+d)}o=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let a="",s=!0;return this.nodesBetween(e,t,(o,c)=>{let u=o.isText?o.text.slice(Math.max(e,c)-c,t-c):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&u||o.isTextblock)&&r&&(s?s=!1:a+=r),a+=u},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),a=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),a=1);a<e.content.length;a++)i.push(e.content[a]);return new ke(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let a=0,s=0;s<t;a++){let o=this.content[a],c=s+o.nodeSize;c>e&&((s<e||c>t)&&(o.isText?o=o.cut(Math.max(0,e-s),Math.min(o.text.length,t-s)):o=o.cut(Math.max(0,e-s-1),Math.min(o.content.size,t-s-1))),r.push(o),i+=o.nodeSize),s=c}return new ke(r,i)}cutByIndex(e,t){return e==t?ke.empty:e==0&&t==this.content.length?this:new ke(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),a=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ke(i,a)}addToStart(e){return new ke([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ke(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return gU(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return yU(this,e,t,r)}findIndex(e){if(e==0)return Sp(0,e);if(e==this.size)return Sp(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let i=this.child(t),a=r+i.nodeSize;if(a>=e)return a==e?Sp(t+1,a):Sp(t,r);r=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ke.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ke(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ke.empty;let t,r=0;for(let i=0;i<e.length;i++){let a=e[i];r+=a.nodeSize,i&&a.isText&&e[i-1].sameMarkup(a)?(t||(t=e.slice(0,i)),t[t.length-1]=a.withText(t[t.length-1].text+a.text)):t&&t.push(a)}return new ke(t||e,r)}static from(e){if(!e)return ke.empty;if(e instanceof ke)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ke([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ke.empty=new ke([],0);const Bw={index:0,offset:0};function Sp(n,e){return Bw.index=n,Bw.offset=e,Bw}function Ng(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Ng(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Ng(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Qt=class tE{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let a=e[i];if(this.eq(a))return e;if(this.type.excludes(a.type))t||(t=e.slice(0,i));else{if(a.type.excludes(this.type))return e;!r&&a.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(a)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ng(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return tE.none;if(e instanceof tE)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Qt.none=[];class kg extends Error{}class Ye{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=xU(this.content,e+this.openStart,t);return r&&new Ye(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Ye(vU(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Ye.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ye(ke.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let a=e.firstChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.firstChild)r++;for(let a=e.lastChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.lastChild)i++;return new Ye(e,r,i)}}Ye.empty=new Ye(ke.empty,0,0);function vU(n,e,t){let{index:r,offset:i}=n.findIndex(e),a=n.maybeChild(r),{index:s,offset:o}=n.findIndex(t);if(i==e||a.isText){if(o!=t&&!n.child(s).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=s)throw new RangeError("Removing non-flat range");return n.replaceChild(r,a.copy(vU(a.content,e-i-1,t-i-1)))}function xU(n,e,t,r){let{index:i,offset:a}=n.findIndex(e),s=n.maybeChild(i);if(a==e||s.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let o=xU(s.content,e-a-1,t,s);return o&&n.replaceChild(i,s.copy(o))}function Nme(n,e,t){if(t.openStart>n.depth)throw new kg("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new kg("Inconsistent open depths");return bU(n,e,t,0)}function bU(n,e,t,r){let i=n.index(r),a=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let s=bU(n,e,t,r+1);return a.copy(a.content.replaceChild(i,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let s=n.parent,o=s.content;return ol(s,o.cut(0,n.parentOffset).append(t.content).append(o.cut(e.parentOffset)))}else{let{start:s,end:o}=kme(t,n);return ol(a,AU(n,s,o,e,r))}else return ol(a,Og(n,e,r))}function wU(n,e){if(!e.type.compatibleContent(n.type))throw new kg("Cannot join "+e.type.name+" onto "+n.type.name)}function nE(n,e,t){let r=n.node(t);return wU(r,e.node(t)),r}function sl(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Yd(n,e,t,r){let i=(e||n).node(t),a=0,s=e?e.index(t):i.childCount;n&&(a=n.index(t),n.depth>t?a++:n.textOffset&&(sl(n.nodeAfter,r),a++));for(let o=a;o<s;o++)sl(i.child(o),r);e&&e.depth==t&&e.textOffset&&sl(e.nodeBefore,r)}function ol(n,e){return n.type.checkContent(e),n.copy(e)}function AU(n,e,t,r,i){let a=n.depth>i&&nE(n,e,i+1),s=r.depth>i&&nE(t,r,i+1),o=[];return Yd(null,n,i,o),a&&s&&e.index(i)==t.index(i)?(wU(a,s),sl(ol(a,AU(n,e,t,r,i+1)),o)):(a&&sl(ol(a,Og(n,e,i+1)),o),Yd(e,t,i,o),s&&sl(ol(s,Og(t,r,i+1)),o)),Yd(r,null,i,o),new ke(o)}function Og(n,e,t){let r=[];if(Yd(null,n,t,r),n.depth>t){let i=nE(n,e,t+1);sl(ol(i,Og(n,e,t+1)),r)}return Yd(e,null,t,r),new ke(r)}function kme(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let a=t-1;a>=0;a--)i=e.node(a).copy(ke.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class nf{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let a=0;a<e;a++)i+=r.child(a).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Qt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let o=r;r=i,i=o}let a=r.marks;for(var s=0;s<a.length;s++)a[s].type.spec.inclusive===!1&&(!i||!a[s].isInSet(i.marks))&&(a=a[s--].removeFromSet(a));return a}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var a=0;a<r.length;a++)r[a].type.spec.inclusive===!1&&(!i||!r[a].isInSet(i.marks))&&(r=r[a--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Pg(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,a=t;for(let s=e;;){let{index:o,offset:c}=s.content.findIndex(a),u=a-c;if(r.push(s,o,i+c),!u||(s=s.child(o),s.isText))break;a=u-1,i+=c+1}return new nf(t,r,a)}static resolveCached(e,t){let r=gP.get(e);if(r)for(let a=0;a<r.elts.length;a++){let s=r.elts[a];if(s.pos==t)return s}else gP.set(e,r=new Ome);let i=r.elts[r.i]=nf.resolve(e,t);return r.i=(r.i+1)%Pme,i}}class Ome{constructor(){this.elts=[],this.i=0}}const Pme=12,gP=new WeakMap;class Pg{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Ime=Object.create(null);let Qs=class rE{constructor(e,t,r,i=Qt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||ke.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Ng(this.attrs,t||e.defaultAttrs||Ime)&&Qt.sameSet(this.marks,r||Qt.none)}copy(e=null){return e==this.content?this:new rE(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new rE(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Ye.empty;let i=this.resolve(e),a=this.resolve(t),s=r?0:i.sharedDepth(t),o=i.start(s),u=i.node(s).content.cut(i.pos-o,a.pos-o);return new Ye(u,i.depth-s,a.depth-s)}replace(e,t,r){return Nme(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return nf.resolveCached(this,e)}resolveNoCache(e){return nf.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,a=>(r.isInSet(a.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),SU(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=ke.empty,i=0,a=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,a),o=s&&s.matchFragment(this.content,t);if(!o||!o.validEnd)return!1;for(let c=i;c<a;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let a=this.contentMatchAt(e).matchType(r),s=a&&a.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Qt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Qt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=ke.fromJSON(e,t.content),a=e.nodeType(t.type).create(t.attrs,i,r);return a.type.checkAttrs(a.attrs),a}};Qs.prototype.text=void 0;class Ig extends Qs{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):SU(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ig(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ig(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function SU(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Al{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new Rme(e,t);if(r.next==null)return Al.empty;let i=EU(r);r.next&&r.err("Unexpected trailing text");let a=zme($me(i));return qme(a,r),a}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let a=t;i&&a<r;a++)i=i.matchType(e.child(a).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function a(s,o){let c=s.matchFragment(e,r);if(c&&(!t||c.validEnd))return ke.from(o.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:d,next:h}=s.next[u];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let f=a(h,o.concat(d));if(f)return f}}return null}return a(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),a=i.match;if(a.matchType(e)){let s=[];for(let o=i;o.type;o=o.via)s.push(o.type);return s.reverse()}for(let s=0;s<a.next.length;s++){let{type:o,next:c}=a.next[s];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in t)&&(!i.type||c.validEnd)&&(r.push({match:o.contentMatch,type:o,via:i}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let a=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)a+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return a}).join(`
`)}}Al.empty=new Al(!0);class Rme{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function EU(n){let e=[];do e.push(Mme(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Mme(n){let e=[];do e.push(Fme(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Fme(n){let e=Bme(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=Lme(n,e);else break;return e}function yP(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function Lme(n,e){let t=yP(n),r=t;return n.eat(",")&&(n.next!="}"?r=yP(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function Ume(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let a in t){let s=t[a];s.isInGroup(e)&&i.push(s)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function Bme(n){if(n.eat("(")){let e=EU(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=Ume(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function $me(n){let e=[[]];return i(a(n,0),t()),e;function t(){return e.push([])-1}function r(s,o,c){let u={term:c,to:o};return e[s].push(u),u}function i(s,o){s.forEach(c=>c.to=o)}function a(s,o){if(s.type=="choice")return s.exprs.reduce((c,u)=>c.concat(a(u,o)),[]);if(s.type=="seq")for(let c=0;;c++){let u=a(s.exprs[c],o);if(c==s.exprs.length-1)return u;i(u,o=t())}else if(s.type=="star"){let c=t();return r(o,c),i(a(s.expr,c),c),[r(c)]}else if(s.type=="plus"){let c=t();return i(a(s.expr,o),c),i(a(s.expr,c),c),[r(c)]}else{if(s.type=="opt")return[r(o)].concat(a(s.expr,o));if(s.type=="range"){let c=o;for(let u=0;u<s.min;u++){let d=t();i(a(s.expr,c),d),c=d}if(s.max==-1)i(a(s.expr,c),c);else for(let u=s.min;u<s.max;u++){let d=t();r(c,d),i(a(s.expr,c),d),c=d}return[r(c)]}else{if(s.type=="name")return[r(o,void 0,s.value)];throw new Error("Unknown expr type")}}}}function _U(n,e){return e-n}function vP(n,e){let t=[];return r(e),t.sort(_U);function r(i){let a=n[i];if(a.length==1&&!a[0].term)return r(a[0].to);t.push(i);for(let s=0;s<a.length;s++){let{term:o,to:c}=a[s];!o&&t.indexOf(c)==-1&&r(c)}}}function zme(n){let e=Object.create(null);return t(vP(n,0));function t(r){let i=[];r.forEach(s=>{n[s].forEach(({term:o,to:c})=>{if(!o)return;let u;for(let d=0;d<i.length;d++)i[d][0]==o&&(u=i[d][1]);vP(n,c).forEach(d=>{u||i.push([o,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let a=e[r.join(",")]=new Al(r.indexOf(n.length-1)>-1);for(let s=0;s<i.length;s++){let o=i[s][1].sort(_U);a.next.push({type:i[s][0],next:e[o.join(",")]||t(o)})}return a}}function qme(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],a=!i.validEnd,s=[];for(let o=0;o<i.next.length;o++){let{type:c,next:u}=i.next[o];s.push(c.name),a&&!(c.isText||c.hasRequiredAttrs())&&(a=!1),r.indexOf(u)==-1&&r.push(u)}a&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function DU(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function jU(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let a=n[r];if(a.hasDefault)i=a.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function TU(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let a=n[i];a.validate&&a.validate(e[i])}}function CU(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new Hme(n,r,e[r]);return t}let xP=class NU{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=CU(e,r.attrs),this.defaultAttrs=DU(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Al.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:jU(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Qs(this,this.computeAttrs(e),ke.from(t),Qt.setFrom(r))}createChecked(e=null,t,r){return t=ke.from(t),this.checkContent(t),new Qs(this,this.computeAttrs(e),t,Qt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=ke.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let i=this.contentMatch.matchFragment(t),a=i&&i.fillBefore(ke.empty,!0);return a?new Qs(this,e,t.append(a),Qt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){TU(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Qt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((a,s)=>r[a]=new NU(a,t,s));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let a in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Wme(n,e,t){let r=t.split("|");return i=>{let a=i===null?"null":typeof i;if(r.indexOf(a)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${a}`)}}class Hme{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Wme(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class q0{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=CU(e,i.attrs),this.excluded=null;let a=DU(this.attrs);this.instance=a?new Qt(this,a):null}create(e=null){return!e&&this.instance?this.instance:new Qt(this,jU(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((a,s)=>r[a]=new q0(a,i++,t,s)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){TU(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class kU{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=hr.from(e.nodes),t.marks=hr.from(e.marks||{}),this.nodes=xP.compile(this.spec.nodes,this),this.marks=q0.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let a=this.nodes[i],s=a.spec.content||"",o=a.spec.marks;if(a.contentMatch=r[s]||(r[s]=Al.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=o=="_"?null:o?bP(this,o.split(" ")):o==""||!a.inlineContent?[]:null}for(let i in this.marks){let a=this.marks[i],s=a.spec.excludes;a.excluded=s==null?[a]:s==""?[]:bP(this,s.split(" "))}this.nodeFromJSON=i=>Qs.fromJSON(this,i),this.markFromJSON=i=>Qt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof xP){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new Ig(r,r.defaultAttrs,e,Qt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function bP(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],a=n.marks[i],s=a;if(a)t.push(a);else for(let o in n.marks){let c=n.marks[o];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&t.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function Vme(n){return n.tag!=null}function Gme(n){return n.style!=null}class eo{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(Vme(i))this.tags.push(i);else if(Gme(i)){let a=/[^=]*/.exec(i.style)[0];r.indexOf(a)<0&&r.push(a),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let a=e.nodes[i.node];return a.contentMatch.matchType(a)})}parse(e,t={}){let r=new AP(this,t,!1);return r.addAll(e,Qt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new AP(this,t,!0);return r.addAll(e,Qt.none,t.from,t.to),Ye.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let a=this.tags[i];if(Xme(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||t.matchesContext(a.context))){if(a.getAttrs){let s=a.getAttrs(e);if(s===!1)continue;a.attrs=s||void 0}return a}}}matchStyle(e,t,r,i){for(let a=i?this.styles.indexOf(i)+1:0;a<this.styles.length;a++){let s=this.styles[a],o=s.style;if(!(o.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||o.length>e.length&&(o.charCodeAt(e.length)!=61||o.slice(e.length+1)!=t))){if(s.getAttrs){let c=s.getAttrs(t);if(c===!1)continue;s.attrs=c||void 0}return s}}}static schemaRules(e){let t=[];function r(i){let a=i.priority==null?50:i.priority,s=0;for(;s<t.length;s++){let o=t[s];if((o.priority==null?50:o.priority)<a)break}t.splice(s,0,i)}for(let i in e.marks){let a=e.marks[i].spec.parseDOM;a&&a.forEach(s=>{r(s=SP(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let a=e.nodes[i].spec.parseDOM;a&&a.forEach(s=>{r(s=SP(s)),s.node||s.ignore||s.mark||(s.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new eo(e,eo.schemaRules(e)))}}const OU={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Yme={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},PU={ol:!0,ul:!0},rf=1,iE=2,Kd=4;function wP(n,e,t){return e!=null?(e?rf:0)|(e==="full"?iE:0):n&&n.whitespace=="pre"?rf|iE:t&~Kd}class Ep{constructor(e,t,r,i,a,s){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=Qt.none,this.match=a||(s&Kd?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ke.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&rf)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let a=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-i[0].length))}}let t=ke.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ke.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!OU.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class AP{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,a,s=wP(null,t.preserveWhitespace,0)|(r?Kd:0);i?a=new Ep(i.type,i.attrs,Qt.none,!0,t.topMatch||i.type.contentMatch,s):r?a=new Ep(null,null,Qt.none,!0,null,s):a=new Ep(e.schema.topNodeType,null,Qt.none,!0,null,s),this.nodes=[a],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,a=i.options&iE?"full":this.localPreserveWS||(i.options&rf)>0,{schema:s}=this.parser;if(a==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(a)if(a==="full")r=r.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let o=r.split(/\r?\n|\r/);for(let c=0;c<o.length;c++)c&&this.insertNode(s.linebreakReplacement.create(),t,!0),o[c]&&this.insertNode(s.text(o[c]),t,!/\S/.test(o[c]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],c=e.previousSibling;(!o||c&&c.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),o;PU.hasOwnProperty(s)&&this.parser.normalizeLists&&Kme(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,r));e:if(c?c.ignore:Yme.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let u,d=this.needsBlock;if(OU.hasOwnProperty(s))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),u=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let h=c&&c.skip?t:this.readStyles(e,t);h&&this.addAll(e,h),u&&this.sync(a),this.needsBlock=d}else{let u=this.readStyles(e,t);u&&this.addElementByRule(e,c,u,c.consuming===!1?o:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let a=this.parser.matchedStyles[i],s=r.getPropertyValue(a);if(s)for(let o=void 0;;){let c=this.parser.matchStyle(a,s,this,o);if(!c)break;if(c.ignore)return null;if(c.clearMark?t=t.filter(u=>!c.clearMark(u)):t=t.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)o=c;else break}}return t}addElementByRule(e,t,r,i){let a,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(s,t.attrs||null,r,t.preserveWhitespace);c&&(a=!0,r=c)}else{let c=this.parser.schema.marks[t.mark];r=r.concat(c.create(t.attrs))}let o=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}a&&this.sync(o)&&this.open--}addAll(e,t,r,i){let a=r||0;for(let s=r?e.childNodes[r]:e.firstChild,o=i==null?null:e.childNodes[i];s!=o;s=s.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(s,t);this.findAtPoint(e,a)}findPlace(e,t,r){let i,a;for(let s=this.open,o=0;s>=0;s--){let c=this.nodes[s],u=c.findWrapping(e);if(u&&(!i||i.length>u.length+o)&&(i=u,a=c,!u.length))break;if(c.solid){if(r)break;o+=2}}if(!i)return null;this.sync(a);for(let s=0;s<i.length;s++)t=this.enterInner(i[s],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(t=this.enterInner(a,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let s=Qt.none;for(let o of i.concat(e.marks))(a.type?a.type.allowsMarkType(o.type):EP(o.type,e.type))&&(s=o.addToSet(s));return a.content.push(e.mark(s)),!0}return!1}enter(e,t,r,i){let a=this.findPlace(e.create(t),r,!1);return a&&(a=this.enterInner(e,t,r,!0,i)),a}enterInner(e,t,r,i=!1,a){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let o=wP(e,a,s.options);s.options&Kd&&s.content.length==0&&(o|=Kd);let c=Qt.none;return r=r.filter(u=>(s.type?s.type.allowsMarkType(u.type):EP(u.type,e))?(c=u.addToSet(c),!1):!0),this.nodes.push(new Ep(e,t,c,i,null,o)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=rf)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),a=-(r?r.depth+1:0)+(i?0:1),s=(o,c)=>{for(;o>=0;o--){let u=t[o];if(u==""){if(o==t.length-1||o==0)continue;for(;c>=a;c--)if(s(o-1,c))return!0;return!1}else{let d=c>0||c==0&&i?this.nodes[c].type:r&&c>=a?r.node(c-a).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;c--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function Kme(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&PU.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Xme(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function SP(n){let e={};for(let t in n)e[t]=n[t];return e}function EP(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let a=[],s=o=>{a.push(o);for(let c=0;c<o.edgeCount;c++){let{type:u,next:d}=o.edge(c);if(u==e||a.indexOf(d)<0&&s(d))return!0}};if(s(i.contentMatch))return!0}}class $l{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=$w(t).createDocumentFragment());let i=r,a=[];return e.forEach(s=>{if(a.length||s.marks.length){let o=0,c=0;for(;o<a.length&&c<s.marks.length;){let u=s.marks[c];if(!this.marks[u.type.name]){c++;continue}if(!u.eq(a[o][0])||u.type.spec.spanning===!1)break;o++,c++}for(;o<a.length;)i=a.pop()[1];for(;c<s.marks.length;){let u=s.marks[c++],d=this.serializeMark(u,s.isInline,t);d&&(a.push([u,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(s,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=dm($w(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let a=this.serializeMark(e.marks[i],e.isInline,t);a&&((a.contentDOM||a.dom).appendChild(r),r=a.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&dm($w(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return dm(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new $l(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=_P(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return _P(e.marks)}}function _P(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function $w(n){return n.document||window.document}const DP=new WeakMap;function Jme(n){let e=DP.get(n);return e===void 0&&DP.set(n,e=Zme(n)),e}function Zme(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function dm(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],a;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(a=Jme(r))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(t=i.slice(0,s),i=i.slice(s+1));let o,c=t?n.createElementNS(t,i):n.createElement(i),u=e[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let h in u)if(u[h]!=null){let f=h.indexOf(" ");f>0?c.setAttributeNS(h.slice(0,f),h.slice(f+1),u[h]):h=="style"&&c.style?c.style.cssText=u[h]:c.setAttribute(h,u[h])}}for(let h=d;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:p,contentDOM:y}=dm(n,f,t,r);if(c.appendChild(p),y){if(o)throw new RangeError("Multiple content holes");o=y}}}return{dom:c,contentDOM:o}}const IU=65535,RU=Math.pow(2,16);function Qme(n,e){return n+e*RU}function jP(n){return n&IU}function ege(n){return(n-(n&IU))/RU}const MU=1,FU=2,hm=4,LU=8;class aE{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&LU)>0}get deletedBefore(){return(this.delInfo&(MU|hm))>0}get deletedAfter(){return(this.delInfo&(FU|hm))>0}get deletedAcross(){return(this.delInfo&hm)>0}}class gi{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&gi.empty)return gi.empty}recover(e){let t=0,r=jP(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+ege(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let c=this.ranges[o]-(this.inverted?i:0);if(c>e)break;let u=this.ranges[o+a],d=this.ranges[o+s],h=c+u;if(e<=h){let f=u?e==c?-1:e==h?1:t:t,p=c+i+(f<0?0:d);if(r)return p;let y=e==(t<0?c:h)?null:Qme(o/3,e-c),g=e==c?FU:e==h?MU:hm;return(t<0?e!=c:e!=h)&&(g|=LU),new aE(p,g,y)}i+=d-u}return r?e+i:new aE(e+i,0,null)}touches(e,t){let r=0,i=jP(t),a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let c=this.ranges[o]-(this.inverted?r:0);if(c>e)break;let u=this.ranges[o+a],d=c+u;if(e<=d&&o==i*3)return!0;r+=this.ranges[o+s]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,a=0;i<this.ranges.length;i+=3){let s=this.ranges[i],o=s-(this.inverted?a:0),c=s+(this.inverted?0:a),u=this.ranges[i+t],d=this.ranges[i+r];e(o,o+u,c,c+d),a+=d-u}}invert(){return new gi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?gi.empty:new gi(e<0?[0,-e,0]:[0,0,e])}}gi.empty=new gi([]);class af{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new af(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new af;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let a=this.from;a<this.to;a++){let s=this._maps[a],o=s.mapResult(e,t);if(o.recover!=null){let c=this.getMirror(a);if(c!=null&&c>a&&c<this.to){a=c,e=this._maps[c].recover(o.recover);continue}}i|=o.delInfo,e=o.pos}return r?e:new aE(e,i,null)}}const zw=Object.create(null);class Cr{getMap(){return gi.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=zw[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in zw)throw new RangeError("Duplicate use of step JSON ID "+e);return zw[e]=t,t.prototype.jsonID=e,t}}class Mn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Mn(e,null)}static fail(e){return new Mn(null,e)}static fromReplace(e,t,r,i){try{return Mn.ok(e.replace(t,r,i))}catch(a){if(a instanceof kg)return Mn.fail(a.message);throw a}}}function ZD(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let a=n.child(i);a.content.size&&(a=a.copy(ZD(a.content,e,a))),a.isInline&&(a=e(a,t,i)),r.push(a)}return ke.fromArray(r)}class Ys extends Cr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),a=new Ye(ZD(t.content,(s,o)=>!s.isAtom||!o.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return Mn.fromReplace(e,this.from,this.to,a)}invert(){return new oa(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ys(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ys&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ys(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ys(t.from,t.to,e.markFromJSON(t.mark))}}Cr.jsonID("addMark",Ys);class oa extends Cr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Ye(ZD(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Mn.fromReplace(e,this.from,this.to,r)}invert(){return new Ys(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new oa(t.pos,r.pos,this.mark)}merge(e){return e instanceof oa&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new oa(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new oa(t.from,t.to,e.markFromJSON(t.mark))}}Cr.jsonID("removeMark",oa);class Ks extends Cr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Mn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Mn.fromReplace(e,this.pos,this.pos+1,new Ye(ke.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Ks(this.pos,t.marks[i]);return new Ks(this.pos,this.mark)}}return new Sl(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ks(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ks(t.pos,e.markFromJSON(t.mark))}}Cr.jsonID("addNodeMark",Ks);class Sl extends Cr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Mn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Mn.fromReplace(e,this.pos,this.pos+1,new Ye(ke.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ks(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Sl(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Sl(t.pos,e.markFromJSON(t.mark))}}Cr.jsonID("removeNodeMark",Sl);class ir extends Cr{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&sE(e,this.from,this.to)?Mn.fail("Structure replace would overwrite content"):Mn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new gi([this.from,this.to-this.from,this.slice.size])}invert(e){return new ir(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new ir(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ir)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Ye.empty:new Ye(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ir(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Ye.empty:new Ye(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ir(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ir(t.from,t.to,Ye.fromJSON(e,t.slice),!!t.structure)}}Cr.jsonID("replace",ir);class or extends Cr{constructor(e,t,r,i,a,s,o=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=a,this.insert=s,this.structure=o}apply(e){if(this.structure&&(sE(e,this.from,this.gapFrom)||sE(e,this.gapTo,this.to)))return Mn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Mn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Mn.fromReplace(e,this.from,this.to,r):Mn.fail("Content does not fit in gap")}getMap(){return new gi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new or(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||a>r.pos?null:new or(t.pos,r.pos,i,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new or(t.from,t.to,t.gapFrom,t.gapTo,Ye.fromJSON(e,t.slice),t.insert,!!t.structure)}}Cr.jsonID("replaceAround",or);function sE(n,e,t){let r=n.resolve(e),i=t-e,a=r.depth;for(;i>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,i--;if(i>0){let s=r.node(a).maybeChild(r.indexAfter(a));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function tge(n,e,t,r){let i=[],a=[],s,o;n.doc.nodesBetween(e,t,(c,u,d)=>{if(!c.isInline)return;let h=c.marks;if(!r.isInSet(h)&&d.type.allowsMarkType(r.type)){let f=Math.max(u,e),p=Math.min(u+c.nodeSize,t),y=r.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(y)||(s&&s.to==f&&s.mark.eq(h[g])?s.to=p:i.push(s=new oa(f,p,h[g])));o&&o.to==f?o.to=p:a.push(o=new Ys(f,p,r))}}),i.forEach(c=>n.step(c)),a.forEach(c=>n.step(c))}function nge(n,e,t,r){let i=[],a=0;n.doc.nodesBetween(e,t,(s,o)=>{if(!s.isInline)return;a++;let c=null;if(r instanceof q0){let u=s.marks,d;for(;d=r.isInSet(u);)(c||(c=[])).push(d),u=d.removeFromSet(u)}else r?r.isInSet(s.marks)&&(c=[r]):c=s.marks;if(c&&c.length){let u=Math.min(o+s.nodeSize,t);for(let d=0;d<c.length;d++){let h=c[d],f;for(let p=0;p<i.length;p++){let y=i[p];y.step==a-1&&h.eq(i[p].style)&&(f=y)}f?(f.to=u,f.step=a):i.push({style:h,from:Math.max(o,e),to:u,step:a})}}}),i.forEach(s=>n.step(new oa(s.from,s.to,s.style)))}function QD(n,e,t,r=t.contentMatch,i=!0){let a=n.doc.nodeAt(e),s=[],o=e+1;for(let c=0;c<a.childCount;c++){let u=a.child(c),d=o+u.nodeSize,h=r.matchType(u.type);if(!h)s.push(new ir(o,d,Ye.empty));else{r=h;for(let f=0;f<u.marks.length;f++)t.allowsMarkType(u.marks[f].type)||n.step(new oa(o,d,u.marks[f]));if(i&&u.isText&&t.whitespace!="pre"){let f,p=/\r?\n|\r/g,y;for(;f=p.exec(u.text);)y||(y=new Ye(ke.from(t.schema.text(" ",t.allowedMarks(u.marks))),0,0)),s.push(new ir(o+f.index,o+f.index+f[0].length,y))}}o=d}if(!r.validEnd){let c=r.fillBefore(ke.empty,!0);n.replace(o,o,new Ye(c,0,0))}for(let c=s.length-1;c>=0;c--)n.step(s[c])}function rge(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Lu(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth,i=0,a=0;;--r){let s=n.$from.node(r),o=n.$from.index(r)+i,c=n.$to.indexAfter(r)-a;if(r<n.depth&&s.canReplace(o,c,t))return r;if(r==0||s.type.spec.isolating||!rge(s,o,c))break;o&&(i=1),c<s.childCount&&(a=1)}return null}function ige(n,e,t){let{$from:r,$to:i,depth:a}=e,s=r.before(a+1),o=i.after(a+1),c=s,u=o,d=ke.empty,h=0;for(let y=a,g=!1;y>t;y--)g||r.index(y)>0?(g=!0,d=ke.from(r.node(y).copy(d)),h++):c--;let f=ke.empty,p=0;for(let y=a,g=!1;y>t;y--)g||i.after(y+1)<i.end(y)?(g=!0,f=ke.from(i.node(y).copy(f)),p++):u++;n.step(new or(c,u,s,o,new Ye(d.append(f),h,p),d.size-h,!0))}function ej(n,e,t=null,r=n){let i=age(n,e),a=i&&sge(r,e);return a?i.map(TP).concat({type:e,attrs:t}).concat(a.map(TP)):null}function TP(n){return{type:n,attrs:null}}function age(n,e){let{parent:t,startIndex:r,endIndex:i}=n,a=t.contentMatchAt(r).findWrapping(e);if(!a)return null;let s=a.length?a[0]:e;return t.canReplaceWith(r,i,s)?a:null}function sge(n,e){let{parent:t,startIndex:r,endIndex:i}=n,a=t.child(r),s=e.contentMatch.findWrapping(a.type);if(!s)return null;let c=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;c&&u<i;u++)c=c.matchType(t.child(u).type);return!c||!c.validEnd?null:s}function oge(n,e,t){let r=ke.empty;for(let s=t.length-1;s>=0;s--){if(r.size){let o=t[s].type.contentMatch.matchFragment(r);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ke.from(t[s].type.create(t[s].attrs,r))}let i=e.start,a=e.end;n.step(new or(i,a,i,a,new Ye(r,0,0),t.length,!0))}function lge(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=n.steps.length;n.doc.nodesBetween(e,t,(s,o)=>{let c=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,c)&&cge(n.doc,n.mapping.slice(a).map(o),r)){let u=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!y?u=!1:!p&&y&&(u=!0)}u===!1&&BU(n,s,o,a),QD(n,n.mapping.slice(a).map(o,1),r,void 0,u===null);let d=n.mapping.slice(a),h=d.map(o,1),f=d.map(o+s.nodeSize,1);return n.step(new or(h,f,h+1,f-1,new Ye(ke.from(r.create(c,null,s.marks)),0,0),1,!0)),u===!0&&UU(n,s,o,a),!1}})}function UU(n,e,t,r){e.forEach((i,a)=>{if(i.isText){let s,o=/\r?\n|\r/g;for(;s=o.exec(i.text);){let c=n.mapping.slice(r).map(t+1+a+s.index);n.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function BU(n,e,t,r){e.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let s=n.mapping.slice(r).map(t+1+a);n.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function cge(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function uge(n,e,t,r,i){let a=n.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");t||(t=a.type);let s=t.create(r,null,i||a.marks);if(a.isLeaf)return n.replaceWith(e,e+a.nodeSize,s);if(!t.validContent(a.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new or(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new Ye(ke.from(s),0,0),1,!0))}function ps(n,e,t=1,r){let i=n.resolve(e),a=i.depth-t,s=r&&r[r.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,d=t-2;u>a;u--,d--){let h=i.node(u),f=i.index(u);if(h.type.spec.isolating)return!1;let p=h.content.cutByIndex(f,h.childCount),y=r&&r[d+1];y&&(p=p.replaceChild(0,y.type.create(y.attrs)));let g=r&&r[d]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(p))return!1}let o=i.indexAfter(a),c=r&&r[0];return i.node(a).canReplaceWith(o,o,c?c.type:i.node(a+1).type)}function dge(n,e,t=1,r){let i=n.doc.resolve(e),a=ke.empty,s=ke.empty;for(let o=i.depth,c=i.depth-t,u=t-1;o>c;o--,u--){a=ke.from(i.node(o).copy(a));let d=r&&r[u];s=ke.from(d?d.type.create(d.attrs,s):i.node(o).copy(s))}n.step(new ir(e,e,new Ye(a.append(s),t,t),!0))}function Eo(n,e){let t=n.resolve(e),r=t.index();return $U(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function hge(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let a=e.child(i),s=a.type==r?n.type.schema.nodes.text:a.type;if(t=t.matchType(s),!t||!n.type.allowsMarks(a.marks))return!1}return t.validEnd}function $U(n,e){return!!(n&&e&&!n.isLeaf&&hge(n,e))}function W0(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let a,s,o=r.index(i);if(i==r.depth?(a=r.nodeBefore,s=r.nodeAfter):t>0?(a=r.node(i+1),o++,s=r.node(i).maybeChild(o)):(a=r.node(i).maybeChild(o-1),s=r.node(i+1)),a&&!a.isTextblock&&$U(a,s)&&r.node(i).canReplace(o,o+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function fge(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,a=n.doc.resolve(e-t),s=a.node().type;if(i&&s.inlineContent){let d=s.whitespace=="pre",h=!!s.contentMatch.matchType(i);d&&!h?r=!1:!d&&h&&(r=!0)}let o=n.steps.length;if(r===!1){let d=n.doc.resolve(e+t);BU(n,d.node(),d.before(),o)}s.inlineContent&&QD(n,e+t-1,s,a.node().contentMatchAt(a.index()),r==null);let c=n.mapping.slice(o),u=c.map(e-t);if(n.step(new ir(u,c.map(e+t,-1),Ye.empty,!0)),r===!0){let d=n.doc.resolve(u);UU(n,d.node(),d.before(),n.steps.length)}return n}function pge(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let a=r.index(i);if(r.node(i).canReplaceWith(a,a,t))return r.before(i+1);if(a>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let a=r.indexAfter(i);if(r.node(i).canReplaceWith(a,a,t))return r.after(i+1);if(a<r.node(i).childCount)return null}return null}function zU(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let a=0;a<t.openStart;a++)i=i.firstChild.content;for(let a=1;a<=(t.openStart==0&&t.size?2:1);a++)for(let s=r.depth;s>=0;s--){let o=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(o>0?1:0),u=r.node(s),d=!1;if(a==1)d=u.canReplace(c,c,i);else{let h=u.contentMatchAt(c).findWrapping(i.firstChild.type);d=h&&u.canReplaceWith(c,c,h[0])}if(d)return o==0?r.pos:o<0?r.before(s+1):r.after(s+1)}return null}function H0(n,e,t=e,r=Ye.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),a=n.resolve(t);return qU(i,a,r)?new ir(e,t,r):new mge(i,a,r).fit()}function qU(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class mge{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=ke.empty;for(let i=0;i<=e.depth;i++){let a=e.node(i);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ke.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let a=this.placed,s=r.depth,o=i.depth;for(;s&&o&&a.childCount==1;)a=a.firstChild.content,s--,o--;let c=new Ye(a,s,o);return e>-1?new or(r.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||r.pos!=this.$to.pos?new ir(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let a=t.firstChild;if(t.childCount>1&&(i=0),a.type.spec.isolating&&i<=r){e=r;break}t=a.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,a=null;r?(a=qw(this.unplaced.content,r-1).firstChild,i=a.content):i=this.unplaced.content;let s=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:c,match:u}=this.frontier[o],d,h=null;if(t==1&&(s?u.matchType(s.type)||(h=u.fillBefore(ke.from(s),!1)):a&&c.compatibleContent(a.type)))return{sliceDepth:r,frontierDepth:o,parent:a,inject:h};if(t==2&&s&&(d=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:o,parent:a,wrap:d};if(a&&u.matchType(a.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=qw(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ye(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=qw(e,t);if(i.childCount<=1&&t>0){let a=e.size-t<=t+i.size;this.unplaced=new Ye(Fd(e,t-1,1),t-1,a?t-1:r)}else this.unplaced=new Ye(Fd(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:a}){for(;this.depth>t;)this.closeFrontierNode();if(a)for(let g=0;g<a.length;g++)this.openFrontierNode(a[g]);let s=this.unplaced,o=r?r.content:s.content,c=s.openStart-e,u=0,d=[],{match:h,type:f}=this.frontier[t];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));h=h.matchFragment(i)}let p=o.size+e-(s.content.size-s.openEnd);for(;u<o.childCount;){let g=o.child(u),m=h.matchType(g.type);if(!m)break;u++,(u>1||c==0||g.content.size)&&(h=m,d.push(WU(g.mark(f.allowedMarks(g.marks)),u==1?c:0,u==o.childCount?p:-1)))}let y=u==o.childCount;y||(p=-1),this.placed=Ld(this.placed,t,ke.from(d)),this.frontier[t].match=h,y&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,m=o;g<p;g++){let v=m.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),m=v.content}this.unplaced=y?e==0?Ye.empty:new Ye(Fd(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new Ye(Fd(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ww(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],a=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Ww(e,t,i,r,a);if(s){for(let o=t-1;o>=0;o--){let{match:c,type:u}=this.frontier[o],d=Ww(e,o,u,c,!0);if(!d||d.childCount)continue e}return{depth:t,fit:s,move:a?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ld(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),a=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,a)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ld(this.placed,this.depth,ke.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ke.empty,!0);t.childCount&&(this.placed=Ld(this.placed,this.frontier.length,t))}}function Fd(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Fd(n.firstChild.content,e-1,t)))}function Ld(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Ld(n.lastChild.content,e-1,t)))}function qw(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function WU(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,WU(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(ke.empty,!0)))),n.copy(r)}function Ww(n,e,t,r,i){let a=n.node(e),s=i?n.indexAfter(e):n.index(e);if(s==a.childCount&&!t.compatibleContent(a.type))return null;let o=r.fillBefore(a.content,!0,s);return o&&!gge(t,a.content,s)?o:null}function gge(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function yge(n){return n.spec.defining||n.spec.definingForContent}function vge(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),a=n.doc.resolve(t);if(qU(i,a,r))return n.step(new ir(e,t,r));let s=VU(i,a);s[s.length-1]==0&&s.pop();let o=-(i.depth+1);s.unshift(o);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let y=i.node(f).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;s.indexOf(f)>-1?o=f:i.before(f)==p&&s.splice(1,0,-f)}let c=s.indexOf(o),u=[],d=r.openStart;for(let f=r.content,p=0;;p++){let y=f.firstChild;if(u.push(y),p==r.openStart)break;f=y.content}for(let f=d-1;f>=0;f--){let p=u[f],y=yge(p.type);if(y&&!p.sameMarkup(i.node(Math.abs(o)-1)))d=f;else if(y||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+d+1)%(r.openStart+1),y=u[p];if(y)for(let g=0;g<s.length;g++){let m=s[(g+c)%s.length],v=!0;m<0&&(v=!1,m=-m);let x=i.node(m-1),b=i.index(m-1);if(x.canReplaceWith(b,b,y.type,y.marks))return n.replace(i.before(m),v?a.after(m):t,new Ye(HU(r.content,0,r.openStart,p),p,r.openEnd))}}let h=n.steps.length;for(let f=s.length-1;f>=0&&(n.replace(e,t,r),!(n.steps.length>h));f--){let p=s[f];p<0||(e=i.before(p),t=a.after(p))}}function HU(n,e,t,r,i){if(e<t){let a=n.firstChild;n=n.replaceChild(0,a.copy(HU(a.content,e+1,t,r,a)))}if(e>r){let a=i.contentMatchAt(0),s=a.fillBefore(n).append(n);n=s.append(a.matchFragment(s).fillBefore(ke.empty,!0))}return n}function xge(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=pge(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new Ye(ke.from(r),0,0))}function bge(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),a=VU(r,i);for(let s=0;s<a.length;s++){let o=a[s],c=s==a.length-1;if(c&&o==0||r.node(o).type.contentMatch.validEnd)return n.delete(r.start(o),i.end(o));if(o>0&&(c||r.node(o-1).canReplace(r.index(o-1),i.indexAfter(o-1))))return n.delete(r.before(o),i.after(o))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&t>r.end(s)&&i.end(s)-t!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return n.delete(r.before(s),t);n.delete(e,t)}function VU(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let a=n.start(i);if(a<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(a==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==a-1)&&t.push(i)}return t}class Nc extends Cr{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Mn.fail("No node at attribute step's position");let r=Object.create(null);for(let a in t.attrs)r[a]=t.attrs[a];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Mn.fromReplace(e,this.pos,this.pos+1,new Ye(ke.from(i),0,t.isLeaf?0:1))}getMap(){return gi.empty}invert(e){return new Nc(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Nc(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Nc(t.pos,t.attr,t.value)}}Cr.jsonID("attr",Nc);class sf extends Cr{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Mn.ok(r)}getMap(){return gi.empty}invert(e){return new sf(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new sf(t.attr,t.value)}}Cr.jsonID("docAttr",sf);let xu=class extends Error{};xu=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};xu.prototype=Object.create(Error.prototype);xu.prototype.constructor=xu;xu.prototype.name="TransformError";class GU{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new af}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new xu(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Ye.empty){let i=H0(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new Ye(ke.from(r),0,0))}delete(e,t){return this.replace(e,t,Ye.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return vge(this,e,t,r),this}replaceRangeWith(e,t,r){return xge(this,e,t,r),this}deleteRange(e,t){return bge(this,e,t),this}lift(e,t){return ige(this,e,t),this}join(e,t=1){return fge(this,e,t),this}wrap(e,t){return oge(this,e,t),this}setBlockType(e,t=e,r,i=null){return lge(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return uge(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Nc(e,t,r)),this}setDocAttribute(e,t){return this.step(new sf(e,t)),this}addNodeMark(e,t){return this.step(new Ks(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Qt)t.isInSet(r.marks)&&this.step(new Sl(e,t));else{let i=r.marks,a,s=[];for(;a=t.isInSet(i);)s.push(new Sl(e,a)),i=a.removeFromSet(i);for(let o=s.length-1;o>=0;o--)this.step(s[o])}return this}split(e,t=1,r){return dge(this,e,t,r),this}addMark(e,t,r){return tge(this,e,t,r),this}removeMark(e,t,r){return nge(this,e,t,r),this}clearIncompatible(e,t,r){return QD(this,e,t,r),this}}const Hw=Object.create(null);class Et{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new wge(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Ye.empty){let r=t.content.lastChild,i=null;for(let o=0;o<t.openEnd;o++)i=r,r=r.lastChild;let a=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:c,$to:u}=s[o],d=e.mapping.slice(a);e.replaceRange(d.map(c.pos),d.map(u.pos),o?Ye.empty:t),o==0&&kP(e,a,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:s,$to:o}=i[a],c=e.mapping.slice(r),u=c.map(s.pos),d=c.map(o.pos);a?e.deleteRange(u,d):(e.replaceRangeWith(u,d,t),kP(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new mt(e):ic(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let a=e.depth-1;a>=0;a--){let s=t<0?ic(e.node(0),e.node(a),e.before(a+1),e.index(a),t,r):ic(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,t,r);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new bi(e.node(0))}static atStart(e){return ic(e,e,0,0,1)||new bi(e)}static atEnd(e){return ic(e,e,e.content.size,e.childCount,-1)||new bi(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Hw[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Hw)throw new RangeError("Duplicate use of selection JSON ID "+e);return Hw[e]=t,t.prototype.jsonID=e,t}getBookmark(){return mt.between(this.$anchor,this.$head).getBookmark()}}Et.prototype.visible=!0;class wge{constructor(e,t){this.$from=e,this.$to=t}}let CP=!1;function NP(n){!CP&&!n.parent.inlineContent&&(CP=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class mt extends Et{constructor(e,t=e){NP(e),NP(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Et.near(r);let i=e.resolve(t.map(this.anchor));return new mt(i.parent.inlineContent?i:r,r)}replace(e,t=Ye.empty){if(super.replace(e,t),t==Ye.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof mt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new V0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new mt(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let a=Et.findFrom(t,r,!0)||Et.findFrom(t,-r,!0);if(a)t=a.$head;else return Et.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(Et.findFrom(e,-r,!0)||Et.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new mt(e,t)}}Et.jsonID("text",mt);class V0{constructor(e,t){this.anchor=e,this.head=t}map(e){return new V0(e.map(this.anchor),e.map(this.head))}resolve(e){return mt.between(e.resolve(this.anchor),e.resolve(this.head))}}class ct extends Et{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),a=e.resolve(i);return r?Et.near(a):new ct(a)}content(){return new Ye(ke.from(this.node),0,0)}eq(e){return e instanceof ct&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new tj(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ct(e.resolve(t.anchor))}static create(e,t){return new ct(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ct.prototype.visible=!1;Et.jsonID("node",ct);class tj{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new V0(r,r):new tj(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&ct.isSelectable(r)?new ct(t):Et.near(t)}}class bi extends Et{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Ye.empty){if(t==Ye.empty){e.delete(0,e.doc.content.size);let r=Et.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new bi(e)}map(e){return new bi(e)}eq(e){return e instanceof bi}getBookmark(){return Age}}Et.jsonID("all",bi);const Age={map(){return this},resolve(n){return new bi(n)}};function ic(n,e,t,r,i,a=!1){if(e.inlineContent)return mt.create(n,t);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let o=e.child(s);if(o.isAtom){if(!a&&ct.isSelectable(o))return ct.create(n,t-(i<0?o.nodeSize:0))}else{let c=ic(n,o,t+i,i<0?o.childCount:0,i,a);if(c)return c}t+=o.nodeSize*i}return null}function kP(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof ir||i instanceof or))return;let a=n.mapping.maps[r],s;a.forEach((o,c,u,d)=>{s==null&&(s=d)}),n.setSelection(Et.near(n.doc.resolve(s),t))}const OP=1,_p=2,PP=4;class Sge extends GU{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|OP)&~_p,this.storedMarks=null,this}get selectionSet(){return(this.updated&OP)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=_p,this}ensureMarks(e){return Qt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&_p)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~_p,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Qt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),!e)return this.deleteRange(t,r);let a=this.storedMarks;if(!a){let s=this.doc.resolve(t);a=r==t?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,a)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(Et.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=PP,this}get scrolledIntoView(){return(this.updated&PP)>0}}function IP(n,e){return!e||!n?n:n.bind(e)}class Ud{constructor(e,t,r){this.name=e,this.init=IP(t.init,r),this.apply=IP(t.apply,r)}}const Ege=[new Ud("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Ud("selection",{init(n,e){return n.selection||Et.atStart(e.doc)},apply(n){return n.selection}}),new Ud("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Ud("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Vw{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Ege.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ud(r.key,r.spec.state,r))})}}class vc{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let a=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let c=i?i[s].n:0,u=i?i[s].state:this,d=c<t.length&&o.spec.appendTransaction.call(o,c?t.slice(c):t,u,r);if(d&&r.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<s?{state:r,n:t.length}:{state:this,n:0})}t.push(d),r=r.applyInner(d),a=!0}i&&(i[s]={state:r,n:t.length})}}if(!a)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new vc(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let a=r[i];t[a.name]=a.apply(e,this[a.name],this,t)}return t}get tr(){return new Sge(this)}static create(e){let t=new Vw(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new vc(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Vw(this.schema,e.plugins),r=t.fields,i=new vc(t);for(let a=0;a<r.length;a++){let s=r[a].name;i[s]=this.hasOwnProperty(s)?this[s]:r[a].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],a=i.spec.state;a&&a.toJSON&&(t[r]=a.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Vw(e.schema,e.plugins),a=new vc(i);return i.fields.forEach(s=>{if(s.name=="doc")a.doc=Qs.fromJSON(e.schema,t.doc);else if(s.name=="selection")a.selection=Et.fromJSON(a.doc,t.selection);else if(s.name=="storedMarks")t.storedMarks&&(a.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let o in r){let c=r[o],u=c.spec.state;if(c.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(t,o)){a[s.name]=u.fromJSON.call(c,e,t[o],a);return}}a[s.name]=s.init(e,a)}}),a}}function YU(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=YU(i,e,{})),t[r]=i}return t}class bn{constructor(e){this.spec=e,this.props={},e.props&&YU(e.props,this,this.props),this.key=e.key?e.key.key:KU("plugin")}getState(e){return e[this.key]}}const Gw=Object.create(null);function KU(n){return n in Gw?n+"$"+ ++Gw[n]:(Gw[n]=0,n+"$")}class Zn{constructor(e="key"){this.key=KU(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const nj=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function XU(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const JU=(n,e,t)=>{let r=XU(n,t);if(!r)return!1;let i=rj(r);if(!i){let s=r.blockRange(),o=s&&Lu(s);return o==null?!1:(e&&e(n.tr.lift(s,o).scrollIntoView()),!0)}let a=i.nodeBefore;if(sB(n,i,e,-1))return!0;if(r.parent.content.size==0&&(bu(a,"end")||ct.isSelectable(a)))for(let s=r.depth;;s--){let o=H0(n.doc,r.before(s),r.after(s),Ye.empty);if(o&&o.slice.size<o.to-o.from){if(e){let c=n.tr.step(o);c.setSelection(bu(a,"end")?Et.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):ct.create(c.doc,i.pos-a.nodeSize)),e(c.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return a.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0):!1},_ge=(n,e,t)=>{let r=XU(n,t);if(!r)return!1;let i=rj(r);return i?ZU(n,i,e):!1},Dge=(n,e,t)=>{let r=eB(n,t);if(!r)return!1;let i=ij(r);return i?ZU(n,i,e):!1};function ZU(n,e,t){let r=e.nodeBefore,i=r,a=e.pos-1;for(;!i.isTextblock;a--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let s=e.nodeAfter,o=s,c=e.pos+1;for(;!o.isTextblock;c++){if(o.type.spec.isolating)return!1;let d=o.firstChild;if(!d)return!1;o=d}let u=H0(n.doc,a,c,Ye.empty);if(!u||u.from!=a||u instanceof ir&&u.slice.size>=c-a)return!1;if(t){let d=n.tr.step(u);d.setSelection(mt.create(d.doc,a)),t(d.scrollIntoView())}return!0}function bu(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const QU=(n,e,t)=>{let{$head:r,empty:i}=n.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;a=rj(r)}let s=a&&a.nodeBefore;return!s||!ct.isSelectable(s)?!1:(e&&e(n.tr.setSelection(ct.create(n.doc,a.pos-s.nodeSize)).scrollIntoView()),!0)};function rj(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function eB(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const tB=(n,e,t)=>{let r=eB(n,t);if(!r)return!1;let i=ij(r);if(!i)return!1;let a=i.nodeAfter;if(sB(n,i,e,1))return!0;if(r.parent.content.size==0&&(bu(a,"start")||ct.isSelectable(a))){let s=H0(n.doc,r.before(),r.after(),Ye.empty);if(s&&s.slice.size<s.to-s.from){if(e){let o=n.tr.step(s);o.setSelection(bu(a,"start")?Et.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):ct.create(o.doc,o.mapping.map(i.pos))),e(o.scrollIntoView())}return!0}}return a.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0):!1},nB=(n,e,t)=>{let{$head:r,empty:i}=n.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;a=ij(r)}let s=a&&a.nodeAfter;return!s||!ct.isSelectable(s)?!1:(e&&e(n.tr.setSelection(ct.create(n.doc,a.pos)).scrollIntoView()),!0)};function ij(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const jge=(n,e)=>{let t=n.selection,r=t instanceof ct,i;if(r){if(t.node.isTextblock||!Eo(n.doc,t.from))return!1;i=t.from}else if(i=W0(n.doc,t.from,-1),i==null)return!1;if(e){let a=n.tr.join(i);r&&a.setSelection(ct.create(a.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},Tge=(n,e)=>{let t=n.selection,r;if(t instanceof ct){if(t.node.isTextblock||!Eo(n.doc,t.to))return!1;r=t.to}else if(r=W0(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},Cge=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),a=i&&Lu(i);return a==null?!1:(e&&e(n.tr.lift(i,a).scrollIntoView()),!0)},rB=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function aj(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Nge=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),a=t.indexAfter(-1),s=aj(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(e){let o=t.after(),c=n.tr.replaceWith(o,o,s.createAndFill());c.setSelection(Et.near(c.doc.resolve(o),1)),e(c.scrollIntoView())}return!0},iB=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof bi||r.parent.inlineContent||i.parent.inlineContent)return!1;let a=aj(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,o=n.tr.insert(s,a.createAndFill());o.setSelection(mt.create(o.doc,s+1)),e(o.scrollIntoView())}return!0},aB=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let a=t.before();if(ps(n.doc,a))return e&&e(n.tr.split(a).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Lu(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function kge(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof ct&&e.selection.node.isBlock)return!r.parentOffset||!ps(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let a=[],s,o,c=!1,u=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){c=r.end(p)==r.pos+(r.depth-p),u=r.start(p)==r.pos-(r.depth-p),o=aj(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),a.unshift(c&&o?{type:o}:null),s=p;break}else{if(p==1)return!1;a.unshift(null)}let d=e.tr;(e.selection instanceof mt||e.selection instanceof bi)&&d.deleteSelection();let h=d.mapping.map(r.pos),f=ps(d.doc,h,a.length,a);if(f||(a[0]=o?{type:o}:null,f=ps(d.doc,h,a.length,a)),!f)return!1;if(d.split(h,a.length,a),!c&&u&&r.node(s).type!=o){let p=d.mapping.map(r.before(s)),y=d.doc.resolve(p);o&&r.node(s-1).canReplaceWith(y.index(),y.index()+1,o)&&d.setNodeMarkup(d.mapping.map(r.before(s)),o)}return t&&t(d.scrollIntoView()),!0}}const Oge=kge(),Pge=(n,e)=>{let{$from:t,to:r}=n.selection,i,a=t.sharedDepth(r);return a==0?!1:(i=t.before(a),e&&e(n.tr.setSelection(ct.create(n.doc,i))),!0)};function Ige(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,a=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(a-1,a)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(i.isTextblock||Eo(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function sB(n,e,t,r){let i=e.nodeBefore,a=e.nodeAfter,s,o,c=i.type.spec.isolating||a.type.spec.isolating;if(!c&&Ige(n,e,t))return!0;let u=!c&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(s=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(s[0]||a.type).validEnd){if(t){let p=e.pos+a.nodeSize,y=ke.empty;for(let v=s.length-1;v>=0;v--)y=ke.from(s[v].create(null,y));y=ke.from(i.copy(y));let g=n.tr.step(new or(e.pos-1,p,e.pos,p,new Ye(y,1,0),s.length,!0)),m=g.doc.resolve(p+2*s.length);m.nodeAfter&&m.nodeAfter.type==i.type&&Eo(g.doc,m.pos)&&g.join(m.pos),t(g.scrollIntoView())}return!0}let d=a.type.spec.isolating||r>0&&c?null:Et.findFrom(e,1),h=d&&d.$from.blockRange(d.$to),f=h&&Lu(h);if(f!=null&&f>=e.depth)return t&&t(n.tr.lift(h,f).scrollIntoView()),!0;if(u&&bu(a,"start",!0)&&bu(i,"end")){let p=i,y=[];for(;y.push(p),!p.isTextblock;)p=p.lastChild;let g=a,m=1;for(;!g.isTextblock;g=g.firstChild)m++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(t){let v=ke.empty;for(let b=y.length-1;b>=0;b--)v=ke.from(y[b].copy(v));let x=n.tr.step(new or(e.pos-y.length,e.pos+a.nodeSize,e.pos+m,e.pos+a.nodeSize-m,new Ye(v,y.length,0),0,!0));t(x.scrollIntoView())}return!0}}return!1}function oB(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return i.node(a).isTextblock?(t&&t(e.tr.setSelection(mt.create(e.doc,n<0?i.start(a):i.end(a)))),!0):!1}}const Rge=oB(-1),Mge=oB(1);function Fge(n,e=null){return function(t,r){let{$from:i,$to:a}=t.selection,s=i.blockRange(a),o=s&&ej(s,n,e);return o?(r&&r(t.tr.wrap(s,o).scrollIntoView()),!0):!1}}function RP(n,e=null){return function(t,r){let i=!1;for(let a=0;a<t.selection.ranges.length&&!i;a++){let{$from:{pos:s},$to:{pos:o}}=t.selection.ranges[a];t.doc.nodesBetween(s,o,(c,u)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(n,e)))if(c.type==n)i=!0;else{let d=t.doc.resolve(u),h=d.index();i=d.parent.canReplaceWith(h,h+1,n)}})}if(!i)return!1;if(r){let a=t.tr;for(let s=0;s<t.selection.ranges.length;s++){let{$from:{pos:o},$to:{pos:c}}=t.selection.ranges[s];a.setBlockType(o,c,n,e)}r(a.scrollIntoView())}return!0}}function sj(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}sj(nj,JU,QU);sj(nj,tB,nB);sj(rB,iB,aB,Oge);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Lge(n,e=null){return function(t,r){let{$from:i,$to:a}=t.selection,s=i.blockRange(a);if(!s)return!1;let o=r?t.tr:null;return Uge(o,s,n,e)?(r&&r(o.scrollIntoView()),!0):!1}}function Uge(n,e,t,r=null){let i=!1,a=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=s.resolve(e.start-2);a=new Pg(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new Pg(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let o=ej(a,t,r,e);return o?(n&&Bge(n,e,o,i,t),!0):!1}function Bge(n,e,t,r,i){let a=ke.empty;for(let d=t.length-1;d>=0;d--)a=ke.from(t[d].type.create(t[d].attrs,a));n.step(new or(e.start-(r?2:0),e.end,e.start,e.end,new Ye(a,0,0),t.length,!0));let s=0;for(let d=0;d<t.length;d++)t[d].type==i&&(s=d+1);let o=t.length-s,c=e.start+t.length-(r?2:0),u=e.parent;for(let d=e.startIndex,h=e.endIndex,f=!0;d<h;d++,f=!1)!f&&ps(n.doc,c,o)&&(n.split(c,o),c+=2*o),c+=u.child(d).nodeSize;return n}function $ge(n){return function(e,t){let{$from:r,$to:i}=e.selection,a=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==n);return a?t?r.node(a.depth-1).type==n?zge(e,t,n,a):qge(e,t,a):!0:!1}}function zge(n,e,t,r){let i=n.tr,a=r.end,s=r.$to.end(r.depth);a<s&&(i.step(new or(a-1,s,a,s,new Ye(ke.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Pg(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const o=Lu(r);if(o==null)return!1;i.lift(r,o);let c=i.doc.resolve(i.mapping.map(a,-1)-1);return Eo(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function qge(n,e,t){let r=n.tr,i=t.parent;for(let p=t.end,y=t.endIndex-1,g=t.startIndex;y>g;y--)p-=i.child(y).nodeSize,r.delete(p-1,p+1);let a=r.doc.resolve(t.start),s=a.nodeAfter;if(r.mapping.map(t.end)!=t.start+a.nodeAfter.nodeSize)return!1;let o=t.startIndex==0,c=t.endIndex==i.childCount,u=a.node(-1),d=a.index(-1);if(!u.canReplace(d+(o?0:1),d+1,s.content.append(c?ke.empty:ke.from(i))))return!1;let h=a.pos,f=h+s.nodeSize;return r.step(new or(h-(o?1:0),f+(c?1:0),h+1,f-1,new Ye((o?ke.empty:ke.from(i.copy(ke.empty))).append(c?ke.empty:ke.from(i.copy(ke.empty))),o?0:1,c?0:1),o?0:1)),e(r.scrollIntoView()),!0}function Wge(n){return function(e,t){let{$from:r,$to:i}=e.selection,a=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==n);if(!a)return!1;let s=a.startIndex;if(s==0)return!1;let o=a.parent,c=o.child(s-1);if(c.type!=n)return!1;if(t){let u=c.lastChild&&c.lastChild.type==o.type,d=ke.from(u?n.create():null),h=new Ye(ke.from(n.create(null,ke.from(o.type.create(null,d)))),u?3:1,0),f=a.start,p=a.end;t(e.tr.step(new or(f-(u?3:1),p,f,p,h,1,!0)).scrollIntoView())}return!0}}const pr=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},wu=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let oE=null;const is=function(n,e,t){let r=oE||(oE=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},Hge=function(){oE=null},El=function(n,e,t,r){return t&&(MP(n,e,t,r,-1)||MP(n,e,t,r,1))},Vge=/^(img|br|input|textarea|hr)$/i;function MP(n,e,t,r,i){for(var a;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Fi(n))){let s=n.parentNode;if(!s||s.nodeType!=1||Nf(n)||Vge.test(n.nodeName)||n.contentEditable=="false")return!1;e=pr(n)+(i<0?0:1),n=s}else if(n.nodeType==1){let s=n.childNodes[e+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((a=s.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=i;else return!1;else n=s,e=i<0?Fi(n):0}else return!1}}function Fi(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Gge(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Fi(n)}else if(n.parentNode&&!Nf(n))e=pr(n),n=n.parentNode;else return null}}function Yge(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Nf(n))e=pr(n)+1,n=n.parentNode;else return null}}function Kge(n,e,t){for(let r=e==0,i=e==Fi(n);r||i;){if(n==t)return!0;let a=pr(n);if(n=n.parentNode,!n)return!1;r=r&&a==0,i=i&&a==Fi(n)}}function Nf(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const G0=function(n){return n.focusNode&&El(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function zo(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function Xge(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Jge(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Fi(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Fi(r.startContainer),r.startOffset)}}}const $a=typeof navigator<"u"?navigator:null,FP=typeof document<"u"?document:null,_o=$a&&$a.userAgent||"",lE=/Edge\/(\d+)/.exec(_o),lB=/MSIE \d/.exec(_o),cE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_o),ti=!!(lB||cE||lE),to=lB?document.documentMode:cE?+cE[1]:lE?+lE[1]:0,Wi=!ti&&/gecko\/(\d+)/i.test(_o);Wi&&+(/Firefox\/(\d+)/.exec(_o)||[0,0])[1];const uE=!ti&&/Chrome\/(\d+)/.exec(_o),sr=!!uE,cB=uE?+uE[1]:0,jr=!ti&&!!$a&&/Apple Computer/.test($a.vendor),Au=jr&&(/Mobile\/\w+/.test(_o)||!!$a&&$a.maxTouchPoints>2),Ri=Au||($a?/Mac/.test($a.platform):!1),uB=$a?/Win/.test($a.platform):!1,us=/Android \d/.test(_o),kf=!!FP&&"webkitFontSmoothing"in FP.documentElement.style,Zge=kf?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Qge(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Ja(n,e){return typeof n=="number"?n:n[e]}function eye(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function LP(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,a=n.dom.ownerDocument;for(let s=t||n.dom;s;){if(s.nodeType!=1){s=wu(s);continue}let o=s,c=o==a.body,u=c?Qge(a):eye(o),d=0,h=0;if(e.top<u.top+Ja(r,"top")?h=-(u.top-e.top+Ja(i,"top")):e.bottom>u.bottom-Ja(r,"bottom")&&(h=e.bottom-e.top>u.bottom-u.top?e.top+Ja(i,"top")-u.top:e.bottom-u.bottom+Ja(i,"bottom")),e.left<u.left+Ja(r,"left")?d=-(u.left-e.left+Ja(i,"left")):e.right>u.right-Ja(r,"right")&&(d=e.right-u.right+Ja(i,"right")),d||h)if(c)a.defaultView.scrollBy(d,h);else{let p=o.scrollLeft,y=o.scrollTop;h&&(o.scrollTop+=h),d&&(o.scrollLeft+=d);let g=o.scrollLeft-p,m=o.scrollTop-y;e={left:e.left-g,top:e.top-m,right:e.right-g,bottom:e.bottom-m}}let f=c?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(f))break;s=f=="absolute"?s.offsetParent:wu(s)}}function tye(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let a=(e.left+e.right)/2,s=t+1;s<Math.min(innerHeight,e.bottom);s+=5){let o=n.root.elementFromPoint(a,s);if(!o||o==n.dom||!n.dom.contains(o))continue;let c=o.getBoundingClientRect();if(c.top>=t-20){r=o,i=c.top;break}}return{refDOM:r,refTop:i,stack:dB(n.dom)}}function dB(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=wu(r));return e}function nye({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;hB(t,r==0?0:r-e)}function hB(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:a}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=a&&(r.scrollLeft=a)}}let Zl=null;function rye(n){if(n.setActive)return n.setActive();if(Zl)return n.focus(Zl);let e=dB(n);n.focus(Zl==null?{get preventScroll(){return Zl={preventScroll:!0},!0}}:void 0),Zl||(Zl=!1,hB(e,0))}function fB(n,e){let t,r=2e8,i,a=0,s=e.top,o=e.top,c,u;for(let d=n.firstChild,h=0;d;d=d.nextSibling,h++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=is(d).getClientRects();else continue;for(let p=0;p<f.length;p++){let y=f[p];if(y.top<=s&&y.bottom>=o){s=Math.max(y.bottom,s),o=Math.min(y.top,o);let g=y.left>e.left?y.left-e.left:y.right<e.left?e.left-y.right:0;if(g<r){t=d,r=g,i=g&&t.nodeType==3?{left:y.right<e.left?y.right:y.left,top:e.top}:e,d.nodeType==1&&g&&(a=h+(e.left>=(y.left+y.right)/2?1:0));continue}}else y.top>e.top&&!c&&y.left<=e.left&&y.right>=e.left&&(c=d,u={left:Math.max(y.left,Math.min(y.right,e.left)),top:y.top});!t&&(e.left>=y.right&&e.top>=y.top||e.left>=y.left&&e.top>=y.bottom)&&(a=h+1)}}return!t&&c&&(t=c,i=u,r=0),t&&t.nodeType==3?iye(t,i):!t||r&&t.nodeType==1?{node:n,offset:a}:fB(t,i)}function iye(n,e){let t=n.nodeValue.length,r=document.createRange(),i;for(let a=0;a<t;a++){r.setEnd(n,a+1),r.setStart(n,a);let s=Rs(r,1);if(s.top!=s.bottom&&oj(e,s)){i={node:n,offset:a+(e.left>=(s.left+s.right)/2?1:0)};break}}return r.detach(),i||{node:n,offset:0}}function oj(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function aye(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function sye(n,e,t){let{node:r,offset:i}=fB(e,t),a=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();a=s.left!=s.right&&t.left>(s.left+s.right)/2?1:-1}return n.docView.posFromDOM(r,i,a)}function oye(n,e,t,r){let i=-1;for(let a=e,s=!1;a!=n.dom;){let o=n.docView.nearestDesc(a,!0),c;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((c=o.dom.getBoundingClientRect()).width||c.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!s&&c.left>r.left||c.top>r.top?i=o.posBefore:(!s&&c.right<r.left||c.bottom<r.top)&&(i=o.posAfter),s=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?o.posBefore:o.posAfter;a=o.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function pB(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),a=i;;){let s=n.childNodes[a];if(s.nodeType==1){let o=s.getClientRects();for(let c=0;c<o.length;c++){let u=o[c];if(oj(e,u))return pB(s,e,u)}}if((a=(a+1)%r)==i)break}return n}function lye(n,e){let t=n.dom.ownerDocument,r,i=0,a=Jge(t,e.left,e.top);a&&({node:r,offset:i}=a);let s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),o;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=n.dom.getBoundingClientRect();if(!oj(e,u)||(s=pB(n.dom,e,u),!s))return null}if(jr)for(let u=s;r&&u;u=wu(u))u.draggable&&(r=void 0);if(s=aye(s,e),r){if(Wi&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],h;d.nodeName=="IMG"&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let u;kf&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?o=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=oye(n,r,i,e))}o==null&&(o=sye(n,s,e));let c=n.docView.nearestDesc(s,!0);return{pos:o,inside:c?c.posAtStart-c.border:-1}}function UP(n){return n.top<n.bottom||n.left<n.right}function Rs(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(UP(r))return r}return Array.prototype.find.call(t,UP)||n.getBoundingClientRect()}const cye=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function mB(n,e,t){let{node:r,offset:i,atom:a}=n.docView.domFromPos(e,t<0?-1:1),s=kf||Wi;if(r.nodeType==3)if(s&&(cye.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let c=Rs(is(r,i,i),t);if(Wi&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Rs(is(r,i-1,i-1),-1);if(u.top==c.top){let d=Rs(is(r,i,i+1),-1);if(d.top!=c.top)return _d(d,d.left<u.left)}}return c}else{let c=i,u=i,d=t<0?1:-1;return t<0&&!i?(u++,d=-1):t>=0&&i==r.nodeValue.length?(c--,d=1):t<0?c--:u++,_d(Rs(is(r,c,u),d),d<0)}if(!n.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&i&&(t<0||i==Fi(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return Yw(c.getBoundingClientRect(),!1)}if(a==null&&i<Fi(r)){let c=r.childNodes[i];if(c.nodeType==1)return Yw(c.getBoundingClientRect(),!0)}return Yw(r.getBoundingClientRect(),t>=0)}if(a==null&&i&&(t<0||i==Fi(r))){let c=r.childNodes[i-1],u=c.nodeType==3?is(c,Fi(c)-(s?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(u)return _d(Rs(u,1),!1)}if(a==null&&i<Fi(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let u=c?c.nodeType==3?is(c,0,s?0:1):c.nodeType==1?c:null:null;if(u)return _d(Rs(u,-1),!0)}return _d(Rs(r.nodeType==3?is(r):r,-t),t>=0)}function _d(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Yw(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function gB(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function uye(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return gB(n,e,()=>{let{node:a}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let o=n.docView.nearestDesc(a,!0);if(!o)break;if(o.node.isBlock){a=o.contentDOM||o.dom;break}a=o.dom.parentNode}let s=mB(n,i.pos,1);for(let o=a.firstChild;o;o=o.nextSibling){let c;if(o.nodeType==1)c=o.getClientRects();else if(o.nodeType==3)c=is(o,0,o.nodeValue.length).getClientRects();else continue;for(let u=0;u<c.length;u++){let d=c[u];if(d.bottom>d.top+1&&(t=="up"?s.top-d.top>(d.bottom-s.top)*2:d.bottom-s.bottom>(s.bottom-d.top)*2))return!1}}return!0})}const dye=/[\u0590-\u08ac]/;function hye(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,a=!i,s=i==r.parent.content.size,o=n.domSelection();return o?!dye.test(r.parent.textContent)||!o.modify?t=="left"||t=="backward"?a:s:gB(n,e,()=>{let{focusNode:c,focusOffset:u,anchorNode:d,anchorOffset:h}=n.domSelectionRange(),f=o.caretBidiLevel;o.modify("move",t,"character");let p=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:y,focusOffset:g}=n.domSelectionRange(),m=y&&!p.contains(y.nodeType==1?y:y.parentNode)||c==y&&u==g;try{o.collapse(d,h),c&&(c!=d||u!=h)&&o.extend&&o.extend(c,u)}catch{}return f!=null&&(o.caretBidiLevel=f),m}):r.pos==r.start()||r.pos==r.end()}let BP=null,$P=null,zP=!1;function fye(n,e,t){return BP==e&&$P==t?zP:(BP=e,$P=t,zP=t=="up"||t=="down"?uye(n,e,t):hye(n,e,t))}const Hi=0,qP=1,Ko=2,za=3;class Of{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Hi,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let a,s;if(e==this.contentDOM)a=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(s)+s.size:this.posAtStart}else{let a,s;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>pr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!1;break}if(a.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!0;break}if(a.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let a=this.getDesc(i),s;if(a&&(!t||a.node))if(r&&(s=a.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return a}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let a=this.getDesc(i);if(a)return a.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],a=r+i.size;if(r==e&&a!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let o=i.children[s];if(o.size){i=o;break}}return i}if(e<a)return i.descAt(e-r-i.border);r=a}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let a=0;r<this.children.length;r++){let s=this.children[r],o=a+s.size;if(o>e||s instanceof vB){i=e-a;break}a=o}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let a;r&&!(a=this.children[r-1]).size&&a instanceof yB&&a.side>=0;r--);if(t<=0){let a,s=!0;for(;a=r?this.children[r-1]:null,!(!a||a.dom.parentNode==this.contentDOM);r--,s=!1);return a&&t&&s&&!a.border&&!a.domAtom?a.domFromPos(a.size,t):{node:this.contentDOM,offset:a?pr(a.dom)+1:0}}else{let a,s=!0;for(;a=r<this.children.length?this.children[r]:null,!(!a||a.dom.parentNode==this.contentDOM);r++,s=!1);return a&&s&&!a.border&&!a.domAtom?a.domFromPos(0,t):{node:this.contentDOM,offset:a?pr(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,a=-1;for(let s=r,o=0;;o++){let c=this.children[o],u=s+c.size;if(i==-1&&e<=u){let d=s+c.border;if(e>=d&&t<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,d);e=s;for(let h=o;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=pr(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(u>t||o==this.children.length-1)){t=u;for(let d=o+1;d<this.children.length;d++){let h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){a=pr(h.dom);break}t+=h.size}a==-1&&(a=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let a=Math.min(e,t),s=Math.max(e,t);for(let p=0,y=0;p<this.children.length;p++){let g=this.children[p],m=y+g.size;if(a>y&&s<m)return g.setSelection(e-y-g.border,t-y-g.border,r,i);y=m}let o=this.domFromPos(e,e?-1:1),c=t==e?o:this.domFromPos(t,t?-1:1),u=r.root.getSelection(),d=r.domSelectionRange(),h=!1;if((Wi||jr)&&e==t){let{node:p,offset:y}=o;if(p.nodeType==3){if(h=!!(y&&p.nodeValue[y-1]==`
`),h&&y==p.nodeValue.length)for(let g=p,m;g;g=g.parentNode){if(m=g.nextSibling){m.nodeName=="BR"&&(o=c={node:m.parentNode,offset:pr(m)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=p.childNodes[y-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Wi&&d.focusNode&&d.focusNode!=c.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||h&&jr)&&El(o.node,o.offset,d.anchorNode,d.anchorOffset)&&El(c.node,c.offset,d.focusNode,d.focusOffset))return;let f=!1;if((u.extend||e==t)&&!(h&&Wi)){u.collapse(o.node,o.offset);try{e!=t&&u.extend(c.node,c.offset),f=!0}catch{}}if(!f){if(e>t){let y=o;o=c,c=y}let p=document.createRange();p.setEnd(c.node,c.offset),p.setStart(o.node,o.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let a=this.children[i],s=r+a.size;if(r==s?e<=s&&t>=r:e<s&&t>r){let o=r+a.border,c=s-a.border;if(e>=o&&t<=c){this.dirty=e==r||t==s?Ko:qP,e==o&&t==c&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=za:a.markDirty(e-o,t-o);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Ko:za}r=s}this.dirty=Ko}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Ko:qP;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class yB extends Of{constructor(e,t,r,i){let a,s=t.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)})),!t.type.spec.raw){if(s.nodeType!=1){let o=document.createElement("span");o.appendChild(s),s=o}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,a=this}matchesWidget(e){return this.dirty==Hi&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class pye extends Of{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class _l extends Of{constructor(e,t,r,i,a){super(e,[],r,i),this.mark=t,this.spec=a}static create(e,t,r,i){let a=i.nodeViews[t.type.name],s=a&&a(t,i,r);return(!s||!s.dom)&&(s=$l.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new _l(e,t,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&za||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=za&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Hi){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Hi}}slice(e,t,r){let i=_l.create(this.parent,this.mark,!0,r),a=this.children,s=this.size;t<s&&(a=hE(a,t,s,r)),e>0&&(a=hE(a,0,e,r));for(let o=0;o<a.length;o++)a[o].parent=i;return i.children=a,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class no extends Of{constructor(e,t,r,i,a,s,o,c,u){super(e,[],a,s),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=o}static create(e,t,r,i,a,s){let o=a.nodeViews[t.type.name],c,u=o&&o(t,a,()=>{if(!c)return s;if(c.parent)return c.parent.posBeforeChild(c)},r,i),d=u&&u.dom,h=u&&u.contentDOM;if(t.isText){if(!d)d=document.createTextNode(t.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:h}=$l.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!h&&!t.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),t.type.spec.draggable&&(d.draggable=!0));let f=d;return d=wB(d,r,t),u?c=new mye(e,t,r,i,d,h||null,f,u,a,s+1):t.isText?new Y0(e,t,r,i,d,f,a):new no(e,t,r,i,d,h||null,f,a,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ke.empty)}return e}matchesNode(e,t,r){return this.dirty==Hi&&e.eq(this.node)&&Rg(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,a=e.composing?this.localCompositionInfo(e,t):null,s=a&&a.pos>-1?a:null,o=a&&a.pos<0,c=new yye(this,s&&s.node,e);bye(this.node,this.innerDeco,(u,d,h)=>{u.spec.marks?c.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!h&&c.syncToMarks(d==this.node.childCount?Qt.none:this.node.child(d).marks,r,e),c.placeWidget(u,e,i)},(u,d,h,f)=>{c.syncToMarks(u.marks,r,e);let p;c.findNodeMatch(u,d,h,f)||o&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(p=c.findIndexWithChild(a.node))>-1&&c.updateNodeAt(u,d,h,p,e)||c.updateNextNode(u,d,h,e,f,i)||c.addNode(u,d,h,e,i),i+=u.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Ko)&&(s&&this.protectLocalComposition(e,s),xB(this.contentDOM,this.children,e),Au&&wye(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof mt)||r<t||i>t+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let s=a.nodeValue,o=Aye(this.node.content,s,r-t,i-t);return o<0?null:{node:a,pos:o,text:s}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let a=t;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let s=new pye(this,a,t,i);e.input.compositionNodes.push(s),this.children=hE(this.children,r,r+i.length,e,s)}update(e,t,r,i){return this.dirty==za||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Hi}updateOuterDeco(e){if(Rg(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=bB(this.dom,this.nodeDOM,dE(this.outerDeco,this.node,t),dE(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function WP(n,e,t,r,i){wB(r,e,n);let a=new no(void 0,n,e,t,r,r,r,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class Y0 extends no{constructor(e,t,r,i,a,s,o){super(e,t,r,i,a,null,s,o,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==za||this.dirty!=Hi&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Hi||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Hi,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),a=document.createTextNode(i.text);return new Y0(this.parent,i,this.outerDeco,this.innerDeco,a,a,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=za)}get domAtom(){return!1}isText(e){return this.node.text==e}}class vB extends Of{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Hi&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class mye extends no{constructor(e,t,r,i,a,s,o,c,u,d){super(e,t,r,i,a,s,o,u,d),this.spec=c}update(e,t,r,i){if(this.dirty==za)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,t,r);return a&&this.updateInner(e,t,r,i),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function xB(n,e,t){let r=n.firstChild,i=!1;for(let a=0;a<e.length;a++){let s=e[a],o=s.dom;if(o.parentNode==n){for(;o!=r;)r=HP(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(o,r);if(s instanceof _l){let c=r?r.previousSibling:n.lastChild;xB(s.contentDOM,s.children,t),r=c?c.nextSibling:n.firstChild}}for(;r;)r=HP(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Xd=function(n){n&&(this.nodeName=n)};Xd.prototype=Object.create(null);const Xo=[new Xd];function dE(n,e,t){if(n.length==0)return Xo;let r=t?Xo[0]:new Xd,i=[r];for(let a=0;a<n.length;a++){let s=n[a].type.attrs;if(s){s.nodeName&&i.push(r=new Xd(s.nodeName));for(let o in s){let c=s[o];c!=null&&(t&&i.length==1&&i.push(r=new Xd(e.isInline?"span":"div")),o=="class"?r.class=(r.class?r.class+" ":"")+c:o=="style"?r.style=(r.style?r.style+";":"")+c:o!="nodeName"&&(r[o]=c))}}}return i}function bB(n,e,t,r){if(t==Xo&&r==Xo)return e;let i=e;for(let a=0;a<r.length;a++){let s=r[a],o=t[a];if(a){let c;o&&o.nodeName==s.nodeName&&i!=n&&(c=i.parentNode)&&c.nodeName.toLowerCase()==s.nodeName||(c=document.createElement(s.nodeName),c.pmIsDeco=!0,c.appendChild(i),o=Xo[0]),i=c}gye(i,o||Xo[0],s)}return i}function gye(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let a=0;a<r.length;a++)i.indexOf(r[a])==-1&&n.classList.remove(r[a]);for(let a=0;a<i.length;a++)r.indexOf(i[a])==-1&&n.classList.add(i[a]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function wB(n,e,t){return bB(n,n,Xo,dE(e,t,n.nodeType!=1))}function Rg(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function HP(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class yye{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=vye(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,a=this.stack.length>>1,s=Math.min(a,e.length);for(;i<s&&(i==a-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<a;)this.destroyRest(),this.top.dirty=Hi,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let u=this.top.children[c];if(u.matchesMark(e[a])&&!this.isLocked(u.dom)){o=c;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let c=_l.create(this.top,e[a],t,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,a++}}findNodeMatch(e,t,r,i){let a=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,r))a=this.top.children.indexOf(s,this.index);else for(let o=this.index,c=Math.min(this.top.children.length,o+5);o<c;o++){let u=this.top.children[o];if(u.matchesNode(e,t,r)&&!this.preMatch.matched.has(u)){a=o;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,t,r,i,a){let s=this.top.children[i];return s.dirty==za&&s.dom==s.contentDOM&&(s.dirty=Ko),s.update(e,t,r,a)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,a,s){for(let o=this.index;o<this.top.children.length;o++){let c=this.top.children[o];if(c instanceof no){let u=this.preMatch.matched.get(c);if(u!=null&&u!=a)return!1;let d=c.dom,h,f=this.isLocked(d)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=za&&Rg(t,c.outerDeco));if(!f&&c.update(e,t,r,i))return this.destroyBetween(this.index,o),c.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(c,e,t,r,i,s)))return this.destroyBetween(this.index,o),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Ko,h.updateChildren(i,s+1),h.dirty=Hi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,a,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Rg(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let o=no.create(this.top,t,r,i,a,s);if(o.contentDOM){o.children=e.children,e.children=[];for(let c of o.children)c.parent=o}return e.destroy(),o}addNode(e,t,r,i,a){let s=no.create(this.top,e,t,r,i,a);s.contentDOM&&s.updateChildren(i,a+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let a=new yB(this.top,e,t,r);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof _l;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Y0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((jr||sr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new vB(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function vye(n,e){let t=e,r=t.children.length,i=n.childCount,a=new Map,s=[];e:for(;i>0;){let o;for(;;)if(r){let u=t.children[r-1];if(u instanceof _l)t=u,r=u.children.length;else{o=u,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let c=o.node;if(c){if(c!=n.child(i-1))break;--i,a.set(o,i),s.push(o)}}return{index:i,matched:a,matches:s.reverse()}}function xye(n,e){return n.type.side-e.type.side}function bye(n,e,t,r){let i=e.locals(n),a=0;if(i.length==0){for(let u=0;u<n.childCount;u++){let d=n.child(u);r(d,i,e.forChild(a,d),u),a+=d.nodeSize}return}let s=0,o=[],c=null;for(let u=0;;){let d,h;for(;s<i.length&&i[s].to==a;){let m=i[s++];m.widget&&(d?(h||(h=[d])).push(m):d=m)}if(d)if(h){h.sort(xye);for(let m=0;m<h.length;m++)t(h[m],u,!!c)}else t(d,u,!!c);let f,p;if(c)p=-1,f=c,c=null;else if(u<n.childCount)p=u,f=n.child(u++);else break;for(let m=0;m<o.length;m++)o[m].to<=a&&o.splice(m--,1);for(;s<i.length&&i[s].from<=a&&i[s].to>a;)o.push(i[s++]);let y=a+f.nodeSize;if(f.isText){let m=y;s<i.length&&i[s].from<m&&(m=i[s].from);for(let v=0;v<o.length;v++)o[v].to<m&&(m=o[v].to);m<y&&(c=f.cut(m-a),f=f.cut(0,m-a),y=m,p=-1)}else for(;s<i.length&&i[s].to<y;)s++;let g=f.isInline&&!f.isLeaf?o.filter(m=>!m.inline):o.slice();r(f,g,e.forChild(a,f),p),a=y}}function wye(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function Aye(n,e,t,r){for(let i=0,a=0;i<n.childCount&&a<=r;){let s=n.child(i++),o=a;if(a+=s.nodeSize,!s.isText)continue;let c=s.text;for(;i<n.childCount;){let u=n.child(i++);if(a+=u.nodeSize,!u.isText)break;c+=u.text}if(a>=t){if(a>=r&&c.slice(r-e.length-o,r-o)==e)return r-e.length;let u=o<r?c.lastIndexOf(e,r-o-1):-1;if(u>=0&&u+e.length+o>=t)return o+u;if(t==r&&c.length>=r+e.length-o&&c.slice(r-o,r-o+e.length)==e)return r}}return-1}function hE(n,e,t,r,i){let a=[];for(let s=0,o=0;s<n.length;s++){let c=n[s],u=o,d=o+=c.size;u>=t||d<=e?a.push(c):(u<e&&a.push(c.slice(0,e-u,r)),i&&(a.push(i),i=void 0),d>t&&a.push(c.slice(t-u,c.size,r)))}return a}function lj(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),a=i&&i.size==0,s=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let o=r.resolve(s),c,u;if(G0(t)){for(c=s;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&ct.isSelectable(h)&&i.parent&&!(h.isInline&&Kge(t.focusNode,t.focusOffset,i.dom))){let f=i.posBefore;u=new ct(s==f?o:r.resolve(f))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let h=s,f=s;for(let p=0;p<t.rangeCount;p++){let y=t.getRangeAt(p);h=Math.min(h,n.docView.posFromDOM(y.startContainer,y.startOffset,1)),f=Math.max(f,n.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(h<0)return null;[c,s]=f==n.state.selection.anchor?[f,h]:[h,f],o=r.resolve(s)}else c=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null}let d=r.resolve(c);if(!u){let h=e=="pointer"||n.state.selection.head<o.pos&&!a?1:-1;u=cj(n,d,o,h)}return u}function AB(n){return n.editable?n.hasFocus():EB(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function ms(n,e=!1){let t=n.state.selection;if(SB(n,t),!!AB(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&sr){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&El(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Eye(n);else{let{anchor:r,head:i}=t,a,s;VP&&!(t instanceof mt)&&(t.$from.parent.inlineContent||(a=GP(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(s=GP(n,t.to))),n.docView.setSelection(r,i,n,e),VP&&(a&&YP(a),s&&YP(s)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Sye(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const VP=jr||sr&&cB<63;function GP(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,a=r?t.childNodes[r-1]:null;if(jr&&i&&i.contentEditable=="false")return Kw(i);if((!i||i.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(i)return Kw(i);if(a)return Kw(a)}}function Kw(n){return n.contentEditable="true",jr&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function YP(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Sye(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!AB(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Eye(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,pr(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&ti&&to<=11&&(t.disabled=!0,t.disabled=!1)}function SB(n,e){if(e instanceof ct){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(KP(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else KP(n)}function KP(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function cj(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||mt.between(e,t,r)}function XP(n){return n.editable&&!n.hasFocus()?!1:EB(n)}function EB(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function _ye(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return El(e.node,e.offset,t.anchorNode,t.anchorOffset)}function fE(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),a=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return a&&Et.findFrom(a,e)}function Fs(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function JP(n,e,t){let r=n.state.selection;if(r instanceof mt)if(t.indexOf("s")>-1){let{$head:i}=r,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let s=n.state.doc.resolve(i.pos+a.nodeSize*(e<0?-1:1));return Fs(n,new mt(r.$anchor,s))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=fE(n.state,e);return i&&i instanceof ct?Fs(n,i):!1}else if(!(Ri&&t.indexOf("m")>-1)){let i=r.$head,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!a||a.isText)return!1;let o=e<0?i.pos-a.nodeSize:i.pos;return a.isAtom||(s=n.docView.descAt(o))&&!s.contentDOM?ct.isSelectable(a)?Fs(n,new ct(e<0?n.state.doc.resolve(i.pos-a.nodeSize):i)):kf?Fs(n,new mt(n.state.doc.resolve(e<0?o:o+a.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ct&&r.node.isInline)return Fs(n,new mt(e>0?r.$to:r.$from));{let i=fE(n.state,e);return i?Fs(n,i):!1}}}function Mg(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Jd(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Ql(n,e){return e<0?Dye(n):jye(n)}function Dye(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,a,s=!1;for(Wi&&t.nodeType==1&&r<Mg(t)&&Jd(t.childNodes[r],-1)&&(s=!0);;)if(r>0){if(t.nodeType!=1)break;{let o=t.childNodes[r-1];if(Jd(o,-1))i=t,a=--r;else if(o.nodeType==3)t=o,r=t.nodeValue.length;else break}}else{if(_B(t))break;{let o=t.previousSibling;for(;o&&Jd(o,-1);)i=t.parentNode,a=pr(o),o=o.previousSibling;if(o)t=o,r=Mg(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}s?pE(n,t,r):i&&pE(n,i,a)}function jye(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Mg(t),a,s;for(;;)if(r<i){if(t.nodeType!=1)break;let o=t.childNodes[r];if(Jd(o,1))a=t,s=++r;else break}else{if(_B(t))break;{let o=t.nextSibling;for(;o&&Jd(o,1);)a=o.parentNode,s=pr(o)+1,o=o.nextSibling;if(o)t=o,r=0,i=Mg(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}a&&pE(n,a,s)}function _B(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function Tye(n,e){for(;n&&e==n.childNodes.length&&!Nf(n);)e=pr(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function Cye(n,e){for(;n&&!e&&!Nf(n);)e=pr(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function pE(n,e,t){if(e.nodeType!=3){let a,s;(s=Tye(e,t))?(e=s,t=0):(a=Cye(e,t))&&(e=a,t=a.nodeValue.length)}let r=n.domSelection();if(!r)return;if(G0(r)){let a=document.createRange();a.setEnd(e,t),a.setStart(e,t),r.removeAllRanges(),r.addRange(a)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&ms(n)},50)}function ZP(n,e){let t=n.state.doc.resolve(e);if(!(sr||uB)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let a=n.coordsAtPos(e-1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left<i.left?"ltr":"rtl"}if(e<t.end()){let a=n.coordsAtPos(e+1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function QP(n,e,t){let r=n.state.selection;if(r instanceof mt&&!r.empty||t.indexOf("s")>-1||Ri&&t.indexOf("m")>-1)return!1;let{$from:i,$to:a}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let s=fE(n.state,e);if(s&&s instanceof ct)return Fs(n,s)}if(!i.parent.inlineContent){let s=e<0?i:a,o=r instanceof bi?Et.near(s,e):Et.findFrom(s,e);return o?Fs(n,o):!1}return!1}function eI(n,e){if(!(n.state.selection instanceof mt))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(a&&!a.isText){let s=n.state.tr;return e<0?s.delete(t.pos-a.nodeSize,t.pos):s.delete(t.pos,t.pos+a.nodeSize),n.dispatch(s),!0}return!1}function tI(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function Nye(n){if(!jr||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;tI(n,r,"true"),setTimeout(()=>tI(n,r,"false"),20)}return!1}function kye(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Oye(n,e){let t=e.keyCode,r=kye(e);if(t==8||Ri&&t==72&&r=="c")return eI(n,-1)||Ql(n,-1);if(t==46&&!e.shiftKey||Ri&&t==68&&r=="c")return eI(n,1)||Ql(n,1);if(t==13||t==27)return!0;if(t==37||Ri&&t==66&&r=="c"){let i=t==37?ZP(n,n.state.selection.from)=="ltr"?-1:1:-1;return JP(n,i,r)||Ql(n,i)}else if(t==39||Ri&&t==70&&r=="c"){let i=t==39?ZP(n,n.state.selection.from)=="ltr"?1:-1:1;return JP(n,i,r)||Ql(n,i)}else{if(t==38||Ri&&t==80&&r=="c")return QP(n,-1,r)||Ql(n,-1);if(t==40||Ri&&t==78&&r=="c")return Nye(n)||QP(n,1,r)||Ql(n,1);if(r==(Ri?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function uj(n,e){n.someProp("transformCopied",p=>{e=p(e,n)});let t=[],{content:r,openStart:i,openEnd:a}=e;for(;i>1&&a>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,a--;let p=r.firstChild;t.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let s=n.someProp("clipboardSerializer")||$l.fromSchema(n.state.schema),o=kB(),c=o.createElement("div");c.appendChild(s.serializeFragment(r,{document:o}));let u=c.firstChild,d,h=0;for(;u&&u.nodeType==1&&(d=NB[u.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let y=o.createElement(d[p]);for(;c.firstChild;)y.appendChild(c.firstChild);c.appendChild(y),h++}u=c.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${a}${h?` -${h}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",p=>p(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:f,slice:e}}function DB(n,e,t,r,i){let a=i.parent.type.spec.code,s,o;if(!t&&!e)return null;let c=!!e&&(r||a||!t);if(c){if(n.someProp("transformPastedText",f=>{e=f(e,a||r,n)}),a)return o=new Ye(ke.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",f=>{o=f(o,n,!0)}),o;let h=n.someProp("clipboardTextParser",f=>f(e,i,r,n));if(h)o=h;else{let f=i.marks(),{schema:p}=n.state,y=$l.fromSchema(p);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let m=s.appendChild(document.createElement("p"));g&&m.appendChild(y.serializeNode(p.text(g,f)))})}}else n.someProp("transformPastedHTML",h=>{t=h(t,n)}),s=Mye(t),kf&&Fye(s);let u=s&&s.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let h=+d[3];h>0;h--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(o||(o=(n.someProp("clipboardParser")||n.someProp("domParser")||eo.fromSchema(n.state.schema)).parseSlice(s,{preserveWhitespace:!!(c||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Pye.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)o=Lye(nI(o,+d[1],+d[2]),d[4]);else if(o=Ye.maxOpen(Iye(o.content,i),!0),o.openStart||o.openEnd){let h=0,f=0;for(let p=o.content.firstChild;h<o.openStart&&!p.type.spec.isolating;h++,p=p.firstChild);for(let p=o.content.lastChild;f<o.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);o=nI(o,h,f)}return n.someProp("transformPasted",h=>{o=h(o,n,c)}),o}const Pye=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Iye(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),a,s=[];if(n.forEach(o=>{if(!s)return;let c=i.findWrapping(o.type),u;if(!c)return s=null;if(u=s.length&&a.length&&TB(c,a,o,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=CB(s[s.length-1],a.length));let d=jB(o,c);s.push(d),i=i.matchType(d.type),a=c}}),s)return ke.from(s)}return n}function jB(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,ke.from(n));return n}function TB(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let a=TB(n,e,t,r.lastChild,i+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(ke.from(jB(t,n,i+1))))}}function CB(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,CB(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(ke.empty,!0);return n.copy(t.append(r))}function mE(n,e,t,r,i,a){let s=e<0?n.firstChild:n.lastChild,o=s.content;return n.childCount>1&&(a=0),i<r-1&&(o=mE(o,e,t,r,i+1,a)),i>=t&&(o=e<0?s.contentMatchAt(0).fillBefore(o,a<=i).append(o):o.append(s.contentMatchAt(s.childCount).fillBefore(ke.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,s.copy(o))}function nI(n,e,t){return e<n.openStart&&(n=new Ye(mE(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Ye(mE(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const NB={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let rI=null;function kB(){return rI||(rI=document.implementation.createHTMLDocument("title"))}let Xw=null;function Rye(n){let e=window.trustedTypes;return e?(Xw||(Xw=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Xw.createHTML(n)):n}function Mye(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=kB().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&NB[r[1].toLowerCase()])&&(n=i.map(a=>"<"+a+">").join("")+n+i.map(a=>"</"+a+">").reverse().join("")),t.innerHTML=Rye(n),i)for(let a=0;a<i.length;a++)t=t.querySelector(i[a])||t;return t}function Fye(n){let e=n.querySelectorAll(sr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function Lye(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:a,openEnd:s}=n;for(let o=r.length-2;o>=0;o-=2){let c=t.nodes[r[o]];if(!c||c.hasRequiredAttrs())break;i=ke.from(c.create(r[o+1],i)),a++,s++}return new Ye(i,a,s)}const qr={},Wr={},Uye={touchstart:!0,touchmove:!0};class Bye{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function $ye(n){for(let e in qr){let t=qr[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{qye(n,r)&&!dj(n,r)&&(n.editable||!(r.type in Wr))&&t(n,r)},Uye[e]?{passive:!0}:void 0)}jr&&n.dom.addEventListener("input",()=>null),gE(n)}function Xs(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function zye(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function gE(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>dj(n,r))})}function dj(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function qye(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Wye(n,e){!dj(n,e)&&qr[e.type]&&(n.editable||!(e.type in Wr))&&qr[e.type](n,e)}Wr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!PB(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(us&&sr&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Au&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,zo(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||Oye(n,t)?t.preventDefault():Xs(n,"key")};Wr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Wr.keypress=(n,e)=>{let t=e;if(PB(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Ri&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof mt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode),a=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i,a))&&n.dispatch(a()),t.preventDefault()}};function K0(n){return{left:n.clientX,top:n.clientY}}function Hye(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function hj(n,e,t,r,i){if(r==-1)return!1;let a=n.state.doc.resolve(r);for(let s=a.depth+1;s>0;s--)if(n.someProp(e,o=>s>a.depth?o(n,t,a.nodeAfter,a.before(s),i,!0):o(n,t,a.node(s),a.before(s),i,!1)))return!0;return!1}function kc(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function Vye(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&ct.isSelectable(r)?(kc(n,new ct(t)),!0):!1}function Gye(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof ct&&(r=t.node);let a=n.state.doc.resolve(e);for(let s=a.depth+1;s>0;s--){let o=s>a.depth?a.nodeAfter:a.node(s);if(ct.isSelectable(o)){r&&t.$from.depth>0&&s>=t.$from.depth&&a.before(t.$from.depth+1)==t.$from.pos?i=a.before(t.$from.depth):i=a.before(s);break}}return i!=null?(kc(n,ct.create(n.state.doc,i)),!0):!1}function Yye(n,e,t,r,i){return hj(n,"handleClickOn",e,t,r)||n.someProp("handleClick",a=>a(n,e,r))||(i?Gye(n,t):Vye(n,t))}function Kye(n,e,t,r){return hj(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function Xye(n,e,t,r){return hj(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||Jye(n,t,r)}function Jye(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(kc(n,mt.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let a=i.depth+1;a>0;a--){let s=a>i.depth?i.nodeAfter:i.node(a),o=i.before(a);if(s.inlineContent)kc(n,mt.create(r,o+1,o+1+s.content.size));else if(ct.isSelectable(s))kc(n,ct.create(r,o));else continue;return!0}}function fj(n){return Fg(n)}const OB=Ri?"metaKey":"ctrlKey";qr.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=fj(n),i=Date.now(),a="singleClick";i-n.input.lastClick.time<500&&Hye(t,n.input.lastClick)&&!t[OB]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?a="doubleClick":n.input.lastClick.type=="doubleClick"&&(a="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:a,button:t.button};let s=n.posAtCoords(K0(t));s&&(a=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new Zye(n,s,t,!!r)):(a=="doubleClick"?Kye:Xye)(n,s.pos,s.inside,t)?t.preventDefault():Xs(n,"pointer"))};class Zye{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[OB],this.allowDefault=r.shiftKey;let a,s;if(t.inside>-1)a=e.state.doc.nodeAt(t.inside),s=t.inside;else{let d=e.state.doc.resolve(t.pos);a=d.parent,s=d.depth?d.before():0}const o=i?null:r.target,c=o?e.docView.nearestDesc(o,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:u}=e.state;(r.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||u instanceof ct&&u.from<=s&&u.to>s)&&(this.mightDrag={node:a,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Wi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ms(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(K0(e))),this.updateAllowDefault(e),this.allowDefault||!t?Xs(this.view,"pointer"):Yye(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||jr&&this.mightDrag&&!this.mightDrag.node.isAtom||sr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(kc(this.view,Et.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Xs(this.view,"pointer")}move(e){this.updateAllowDefault(e),Xs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}qr.touchstart=n=>{n.input.lastTouch=Date.now(),fj(n),Xs(n,"pointer")};qr.touchmove=n=>{n.input.lastTouch=Date.now(),Xs(n,"pointer")};qr.contextmenu=n=>fj(n);function PB(n,e){return n.composing?!0:jr&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const Qye=us?5e3:-1;Wr.compositionstart=Wr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof mt&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||sr&&uB&&e0e(n)))n.markCursor=n.state.storedMarks||t.marks(),Fg(n,!0),n.markCursor=null;else if(Fg(n,!e.selection.empty),Wi&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,a=r.focusOffset;i&&i.nodeType==1&&a!=0;){let s=a<0?i.lastChild:i.childNodes[a-1];if(!s)break;if(s.nodeType==3){let o=n.domSelection();o&&o.collapse(s,s.nodeValue.length);break}else i=s,a=-1}}n.input.composing=!0}IB(n,Qye)};function e0e(n){let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let r=e.childNodes[t];return r.nodeType==1&&r.contentEditable=="false"}Wr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,IB(n,20))};function IB(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Fg(n),e))}function RB(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=n0e());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function t0e(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=Gge(e.focusNode,e.focusOffset),r=Yge(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,a=n.domObserver.lastChangedTextNode;if(t==a||r==a)return a;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let s=t.pmViewDesc;if(!(!s||!s.isText(t.nodeValue)))return r}}return t||r}function n0e(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Fg(n,e=!1){if(!(us&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),RB(n),e||n.docView&&n.docView.dirty){let t=lj(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function r0e(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const of=ti&&to<15||Au&&Zge<604;qr.copy=Wr.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let a=of?null:t.clipboardData,s=r.content(),{dom:o,text:c}=uj(n,s);a?(t.preventDefault(),a.clearData(),a.setData("text/html",o.innerHTML),a.setData("text/plain",c)):r0e(n,o),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function i0e(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function a0e(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?lf(n,r.value,null,i,e):lf(n,r.textContent,r.innerHTML,i,e)},50)}function lf(n,e,t,r,i){let a=DB(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",c=>c(n,i,a||Ye.empty)))return!0;if(!a)return!1;let s=i0e(a),o=s?n.state.tr.replaceSelectionWith(s,r):n.state.tr.replaceSelection(a);return n.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function MB(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Wr.paste=(n,e)=>{let t=e;if(n.composing&&!us)return;let r=of?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&lf(n,MB(r),r.getData("text/html"),i,t)?t.preventDefault():a0e(n,t)};class FB{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const s0e=Ri?"altKey":"ctrlKey";function LB(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[s0e]}qr.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,a=i.empty?null:n.posAtCoords(K0(t)),s;if(!(a&&a.pos>=i.from&&a.pos<=(i instanceof ct?i.to-1:i.to))){if(r&&r.mightDrag)s=ct.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let h=n.docView.nearestDesc(t.target,!0);h&&h.node.type.spec.draggable&&h!=n.docView&&(s=ct.create(n.state.doc,h.posBefore))}}let o=(s||n.state.selection).content(),{dom:c,text:u,slice:d}=uj(n,o);(!t.dataTransfer.files.length||!sr||cB>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(of?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",of||t.dataTransfer.setData("text/plain",u),n.dragging=new FB(d,LB(n,t),s)};qr.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Wr.dragover=Wr.dragenter=(n,e)=>e.preventDefault();Wr.drop=(n,e)=>{try{o0e(n,e,n.dragging)}finally{n.dragging=null}};function o0e(n,e,t){if(!e.dataTransfer)return;let r=n.posAtCoords(K0(e));if(!r)return;let i=n.state.doc.resolve(r.pos),a=t&&t.slice;a?n.someProp("transformPasted",p=>{a=p(a,n,!1)}):a=DB(n,MB(e.dataTransfer),of?null:e.dataTransfer.getData("text/html"),!1,i);let s=!!(t&&LB(n,e));if(n.someProp("handleDrop",p=>p(n,e,a||Ye.empty,s))){e.preventDefault();return}if(!a)return;e.preventDefault();let o=a?zU(n.state.doc,i.pos,a):i.pos;o==null&&(o=i.pos);let c=n.state.tr;if(s){let{node:p}=t;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(o),d=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,a.content.firstChild):c.replaceRange(u,u,a),c.doc.eq(h))return;let f=c.doc.resolve(u);if(d&&ct.isSelectable(a.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(a.content.firstChild))c.setSelection(new ct(f));else{let p=c.mapping.map(o);c.mapping.maps[c.mapping.maps.length-1].forEach((y,g,m,v)=>p=v),c.setSelection(cj(n,f,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))}qr.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&ms(n)},20))};qr.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};qr.beforeinput=(n,e)=>{if(sr&&us&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",a=>a(n,zo(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Wr)qr[n]=Wr[n];function cf(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Lg{constructor(e,t){this.toDOM=e,this.spec=t||ll,this.side=this.spec.side||0}map(e,t,r,i){let{pos:a,deleted:s}=e.mapResult(t.from+i,this.side<0?-1:1);return s?null:new Br(a-r,a-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Lg&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&cf(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ro{constructor(e,t){this.attrs=e,this.spec=t||ll}map(e,t,r,i){let a=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return a>=s?null:new Br(a,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ro&&cf(this.attrs,e.attrs)&&cf(this.spec,e.spec)}static is(e){return e.type instanceof ro}destroy(){}}class pj{constructor(e,t){this.attrs=e,this.spec=t||ll}map(e,t,r,i){let a=e.mapResult(t.from+i,1);if(a.deleted)return null;let s=e.mapResult(t.to+i,-1);return s.deleted||s.pos<=a.pos?null:new Br(a.pos-r,s.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),a;return i==t.from&&!(a=e.child(r)).isText&&i+a.nodeSize==t.to}eq(e){return this==e||e instanceof pj&&cf(this.attrs,e.attrs)&&cf(this.spec,e.spec)}destroy(){}}class Br{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Br(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Br(e,e,new Lg(t,r))}static inline(e,t,r,i){return new Br(e,t,new ro(r,i))}static node(e,t,r,i){return new Br(e,t,new pj(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ro}get widget(){return this.type instanceof Lg}}const ac=[],ll={};class yn{constructor(e,t){this.local=e.length?e:ac,this.children=t.length?t:ac}static create(e,t){return t.length?Ug(t,e,0,ll):br}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,a){for(let s=0;s<this.local.length;s++){let o=this.local[s];o.from<=t&&o.to>=e&&(!a||a(o.spec))&&r.push(o.copy(o.from+i,o.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let o=this.children[s]+1;this.children[s+2].findInner(e-o,t-o,r,i+o,a)}}map(e,t,r){return this==br||e.maps.length==0?this:this.mapInner(e,t,0,0,r||ll)}mapInner(e,t,r,i,a){let s;for(let o=0;o<this.local.length;o++){let c=this.local[o].map(e,r,i);c&&c.type.valid(t,c)?(s||(s=[])).push(c):a.onRemove&&a.onRemove(this.local[o].spec)}return this.children.length?l0e(this.children,s||[],e,t,r,i,a):s?new yn(s.sort(cl),ac):br}add(e,t){return t.length?this==br?yn.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,a=0;e.forEach((o,c)=>{let u=c+r,d;if(d=BB(t,o,u)){for(i||(i=this.children.slice());a<i.length&&i[a]<c;)a+=3;i[a]==c?i[a+2]=i[a+2].addInner(o,d,u+1):i.splice(a,0,c,c+o.nodeSize,Ug(d,o,u+1,ll)),a+=3}});let s=UB(a?$B(t):t,-r);for(let o=0;o<s.length;o++)s[o].type.valid(e,s[o])||s.splice(o--,1);return new yn(s.length?this.local.concat(s).sort(cl):this.local,i||this.children)}remove(e){return e.length==0||this==br?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let a=0;a<r.length;a+=3){let s,o=r[a]+t,c=r[a+1]+t;for(let d=0,h;d<e.length;d++)(h=e[d])&&h.from>o&&h.to<c&&(e[d]=null,(s||(s=[])).push(h));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[a+2].removeInner(s,o+1);u!=br?r[a+2]=u:(r.splice(a,3),a-=3)}if(i.length){for(let a=0,s;a<e.length;a++)if(s=e[a])for(let o=0;o<i.length;o++)i[o].eq(s,t)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new yn(i,r):br}forChild(e,t){if(this==br)return this;if(t.isLeaf)return yn.empty;let r,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(r=this.children[o+2]);break}let a=e+1,s=a+t.content.size;for(let o=0;o<this.local.length;o++){let c=this.local[o];if(c.from<s&&c.to>a&&c.type instanceof ro){let u=Math.max(a,c.from)-a,d=Math.min(s,c.to)-a;u<d&&(i||(i=[])).push(c.copy(u,d))}}if(i){let o=new yn(i.sort(cl),ac);return r?new zs([o,r]):o}return r||br}eq(e){if(this==e)return!0;if(!(e instanceof yn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return mj(this.localsInner(e))}localsInner(e){if(this==br)return ac;if(e.inlineContent||!this.local.some(ro.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ro||t.push(this.local[r]);return t}forEachSet(e){e(this)}}yn.empty=new yn([],[]);yn.removeOverlap=mj;const br=yn.empty;class zs{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,ll));return zs.from(r)}forChild(e,t){if(t.isLeaf)return yn.empty;let r=[];for(let i=0;i<this.members.length;i++){let a=this.members[i].forChild(e,t);a!=br&&(a instanceof zs?r=r.concat(a.members):r.push(a))}return zs.from(r)}eq(e){if(!(e instanceof zs)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let a=this.members[i].localsInner(e);if(a.length)if(!t)t=a;else{r&&(t=t.slice(),r=!1);for(let s=0;s<a.length;s++)t.push(a[s])}}return t?mj(r?t:t.sort(cl)):ac}static from(e){switch(e.length){case 0:return br;case 1:return e[0];default:return new zs(e.every(t=>t instanceof yn)?e:e.reduce((t,r)=>t.concat(r instanceof yn?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function l0e(n,e,t,r,i,a,s){let o=n.slice();for(let u=0,d=a;u<t.maps.length;u++){let h=0;t.maps[u].forEach((f,p,y,g)=>{let m=g-y-(p-f);for(let v=0;v<o.length;v+=3){let x=o[v+1];if(x<0||f>x+d-h)continue;let b=o[v]+d-h;p>=b?o[v+1]=f<=b?-2:-1:f>=d&&m&&(o[v]+=m,o[v+1]+=m)}h+=m}),d=t.maps[u].map(d,-1)}let c=!1;for(let u=0;u<o.length;u+=3)if(o[u+1]<0){if(o[u+1]==-2){c=!0,o[u+1]=-1;continue}let d=t.map(n[u]+a),h=d-i;if(h<0||h>=r.content.size){c=!0;continue}let f=t.map(n[u+1]+a,-1),p=f-i,{index:y,offset:g}=r.content.findIndex(h),m=r.maybeChild(y);if(m&&g==h&&g+m.nodeSize==p){let v=o[u+2].mapInner(t,m,d+1,n[u]+a+1,s);v!=br?(o[u]=h,o[u+1]=p,o[u+2]=v):(o[u+1]=-2,c=!0)}else c=!0}if(c){let u=c0e(o,n,e,t,i,a,s),d=Ug(u,r,0,s);e=d.local;for(let h=0;h<o.length;h+=3)o[h+1]<0&&(o.splice(h,3),h-=3);for(let h=0,f=0;h<d.children.length;h+=3){let p=d.children[h];for(;f<o.length&&o[f]<p;)f+=3;o.splice(f,0,d.children[h],d.children[h+1],d.children[h+2])}}return new yn(e.sort(cl),o)}function UB(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Br(i.from+e,i.to+e,i.type))}return t}function c0e(n,e,t,r,i,a,s){function o(c,u){for(let d=0;d<c.local.length;d++){let h=c.local[d].map(r,i,u);h?t.push(h):s.onRemove&&s.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)o(c.children[d+2],c.children[d]+u+1)}for(let c=0;c<n.length;c+=3)n[c+1]==-1&&o(n[c+2],e[c]+a+1);return t}function BB(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let a=0,s;a<n.length;a++)(s=n[a])&&s.from>t&&s.to<r&&((i||(i=[])).push(s),n[a]=null);return i}function $B(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Ug(n,e,t,r){let i=[],a=!1;e.forEach((o,c)=>{let u=BB(n,o,c+t);if(u){a=!0;let d=Ug(u,o,t+c+1,r);d!=br&&i.push(c,c+o.nodeSize,d)}});let s=UB(a?$B(n):n,-t).sort(cl);for(let o=0;o<s.length;o++)s[o].type.valid(e,s[o])||(r.onRemove&&r.onRemove(s[o].spec),s.splice(o--,1));return s.length||i.length?new yn(s,i):br}function cl(n,e){return n.from-e.from||n.to-e.to}function mj(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let a=e[i];if(a.from==r.from){a.to!=r.to&&(e==n&&(e=n.slice()),e[i]=a.copy(a.from,r.to),iI(e,i+1,a.copy(r.to,a.to)));continue}else{a.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,a.from),iI(e,i,r.copy(a.from,r.to)));break}}}return e}function iI(n,e,t){for(;e<n.length&&cl(t,n[e])>0;)e++;n.splice(e,0,t)}function Jw(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=br&&e.push(r)}),n.cursorWrapper&&e.push(yn.create(n.state.doc,[n.cursorWrapper.deco])),zs.from(e)}const u0e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},d0e=ti&&to<=11;class h0e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class f0e{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new h0e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ti&&to<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),d0e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,u0e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(XP(this.view)){if(this.suppressingSelectionUpdates)return ms(this.view);if(ti&&to<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&El(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let a=e.focusNode;a;a=wu(a))t.add(a);for(let a=e.anchorNode;a;a=wu(a))if(t.has(a)){r=a;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&XP(e)&&!this.ignoreSelectionChange(r),a=-1,s=-1,o=!1,c=[];if(e.editable)for(let d=0;d<t.length;d++){let h=this.registerMutation(t[d],c);h&&(a=a<0?h.from:Math.min(h.from,a),s=s<0?h.to:Math.max(h.to,s),h.typeOver&&(o=!0))}if(Wi&&c.length){let d=c.filter(h=>h.nodeName=="BR");if(d.length==2){let[h,f]=d;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of d){let p=f.parentNode;p&&p.nodeName=="LI"&&(!h||g0e(e,h)!=p)&&f.remove()}}}else if((sr||jr)&&c.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of c)if(d.nodeName=="BR"&&d.parentNode){let h=d.nextSibling;h&&h.nodeType==1&&h.contentEditable=="false"&&d.parentNode.removeChild(d)}}let u=null;a<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&G0(r)&&(u=lj(e))&&u.eq(Et.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ms(e),this.currentSelection.set(r),e.scrollToSelection()):(a>-1||i)&&(a>-1&&(e.docView.markDirty(a,s),p0e(e)),this.handleDOMChange(a,s,o,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ms(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let h=e.addedNodes[d];t.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,a=e.nextSibling;if(ti&&to<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:h,nextSibling:f}=e.addedNodes[d];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(a=f)}let s=i&&i.parentNode==e.target?pr(i)+1:0,o=r.localPosFromDOM(e.target,s,-1),c=a&&a.parentNode==e.target?pr(a):e.target.childNodes.length,u=r.localPosFromDOM(e.target,c,1);return{from:o,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let aI=new WeakMap,sI=!1;function p0e(n){if(!aI.has(n)&&(aI.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Wi,sI)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),sI=!0}}function oI(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,a=e.endOffset,s=n.domAtPos(n.state.selection.anchor);return El(s.node,s.offset,i,a)&&([t,r,i,a]=[i,a,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:a}}function m0e(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return oI(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?oI(n,t):null}function g0e(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function y0e(n,e,t){let{node:r,fromOffset:i,toOffset:a,from:s,to:o}=n.docView.parseRange(e,t),c=n.domSelectionRange(),u,d=c.anchorNode;if(d&&n.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:c.anchorOffset}],G0(c)||u.push({node:c.focusNode,offset:c.focusOffset})),sr&&n.input.lastKeyCode===8)for(let m=a;m>i;m--){let v=r.childNodes[m-1],x=v.pmViewDesc;if(v.nodeName=="BR"&&!x){a=m;break}if(!x||x.size)break}let h=n.state.doc,f=n.someProp("domParser")||eo.fromSchema(n.state.schema),p=h.resolve(s),y=null,g=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:a,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:v0e,context:p});if(u&&u[0].pos!=null){let m=u[0].pos,v=u[1]&&u[1].pos;v==null&&(v=m),y={anchor:m+s,head:v+s}}return{doc:g,sel:y,from:s,to:o}}function v0e(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(jr&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||jr&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const x0e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function b0e(n,e,t,r,i){let a=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let E=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,_=lj(n,E);if(_&&!n.state.selection.eq(_)){if(sr&&us&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",C=>C(n,zo(13,"Enter"))))return;let D=n.state.tr.setSelection(_);E=="pointer"?D.setMeta("pointer",!0):E=="key"&&D.scrollIntoView(),a&&D.setMeta("composition",a),n.dispatch(D)}return}let s=n.state.doc.resolve(e),o=s.sharedDepth(t);e=s.before(o+1),t=n.state.doc.resolve(t).after(o+1);let c=n.state.selection,u=y0e(n,e,t),d=n.state.doc,h=d.slice(u.from,u.to),f,p;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(f=n.state.selection.to,p="end"):(f=n.state.selection.from,p="start"),n.input.lastKeyCode=null;let y=S0e(h.content,u.doc.content,u.from,f,p);if(y&&n.input.domChangeCount++,(Au&&n.input.lastIOSEnter>Date.now()-225||us)&&i.some(E=>E.nodeType==1&&!x0e.test(E.nodeName))&&(!y||y.endA>=y.endB)&&n.someProp("handleKeyDown",E=>E(n,zo(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!y)if(r&&c instanceof mt&&!c.empty&&c.$head.sameParent(c.$anchor)&&!n.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))y={start:c.from,endA:c.to,endB:c.to};else{if(u.sel){let E=lI(n,n.state.doc,u.sel);if(E&&!E.eq(n.state.selection)){let _=n.state.tr.setSelection(E);a&&_.setMeta("composition",a),n.dispatch(_)}}return}n.state.selection.from<n.state.selection.to&&y.start==y.endB&&n.state.selection instanceof mt&&(y.start>n.state.selection.from&&y.start<=n.state.selection.from+2&&n.state.selection.from>=u.from?y.start=n.state.selection.from:y.endA<n.state.selection.to&&y.endA>=n.state.selection.to-2&&n.state.selection.to<=u.to&&(y.endB+=n.state.selection.to-y.endA,y.endA=n.state.selection.to)),ti&&to<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>u.from&&u.doc.textBetween(y.start-u.from-1,y.start-u.from+1)=="  "&&(y.start--,y.endA--,y.endB--);let g=u.doc.resolveNoCache(y.start-u.from),m=u.doc.resolveNoCache(y.endB-u.from),v=d.resolve(y.start),x=g.sameParent(m)&&g.parent.inlineContent&&v.end()>=y.endA;if((Au&&n.input.lastIOSEnter>Date.now()-225&&(!x||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!x&&g.pos<u.doc.content.size&&(!g.sameParent(m)||!g.parent.inlineContent)&&g.pos<m.pos&&!/\S/.test(u.doc.textBetween(g.pos,m.pos,"","")))&&n.someProp("handleKeyDown",E=>E(n,zo(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>y.start&&A0e(d,y.start,y.endA,g,m)&&n.someProp("handleKeyDown",E=>E(n,zo(8,"Backspace")))){us&&sr&&n.domObserver.suppressSelectionUpdates();return}sr&&y.endB==y.start&&(n.input.lastChromeDelete=Date.now()),us&&!x&&g.start()!=m.start()&&m.parentOffset==0&&g.depth==m.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==y.endA&&(y.endB-=2,m=u.doc.resolveNoCache(y.endB-u.from),setTimeout(()=>{n.someProp("handleKeyDown",function(E){return E(n,zo(13,"Enter"))})},20));let b=y.start,A=y.endA,w=E=>{let _=E||n.state.tr.replace(b,A,u.doc.slice(y.start-u.from,y.endB-u.from));if(u.sel){let D=lI(n,_.doc,u.sel);D&&!(sr&&n.composing&&D.empty&&(y.start!=y.endB||n.input.lastChromeDelete<Date.now()-100)&&(D.head==b||D.head==_.mapping.map(A)-1)||ti&&D.empty&&D.head==b)&&_.setSelection(D)}return a&&_.setMeta("composition",a),_.scrollIntoView()},S;if(x)if(g.pos==m.pos){ti&&to<=11&&g.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>ms(n),20));let E=w(n.state.tr.delete(b,A)),_=d.resolve(y.start).marksAcross(d.resolve(y.endA));_&&E.ensureMarks(_),n.dispatch(E)}else if(y.endA==y.endB&&(S=w0e(g.parent.content.cut(g.parentOffset,m.parentOffset),v.parent.content.cut(v.parentOffset,y.endA-v.start())))){let E=w(n.state.tr);S.type=="add"?E.addMark(b,A,S.mark):E.removeMark(b,A,S.mark),n.dispatch(E)}else if(g.parent.child(g.index()).isText&&g.index()==m.index()-(m.textOffset?0:1)){let E=g.parent.textBetween(g.parentOffset,m.parentOffset),_=()=>w(n.state.tr.insertText(E,b,A));n.someProp("handleTextInput",D=>D(n,b,A,E,_))||n.dispatch(_())}else n.dispatch(w());else n.dispatch(w())}function lI(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:cj(n,e.resolve(t.anchor),e.resolve(t.head))}function w0e(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,a=r,s,o,c;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<t.length;d++)a=t[d].removeFromSet(a);if(i.length==1&&a.length==0)o=i[0],s="add",c=d=>d.mark(o.addToSet(d.marks));else if(i.length==0&&a.length==1)o=a[0],s="remove",c=d=>d.mark(o.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<e.childCount;d++)u.push(c(e.child(d)));if(ke.from(u).eq(n))return{mark:o,type:s}}function A0e(n,e,t,r,i){if(t-e<=i.pos-r.pos||Zw(r,!0,!1)<i.pos)return!1;let a=n.resolve(e);if(!r.parent.isTextblock){let o=a.nodeAfter;return o!=null&&t==e+o.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let s=n.resolve(Zw(a,!0,!0));return!s.parent.isTextblock||s.pos>t||Zw(s,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Zw(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let a=n.node(r).maybeChild(n.indexAfter(r));for(;a&&!a.isLeaf;)a=a.firstChild,i++}return i}function S0e(n,e,t,r,i){let a=n.findDiffStart(e,t);if(a==null)return null;let{a:s,b:o}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let c=Math.max(0,a-Math.min(s,o));r-=s+c-a}if(s<a&&n.size<e.size){let c=r<=a&&r>=s?a-r:0;a-=c,a&&a<e.size&&cI(e.textBetween(a-1,a+1))&&(a+=c?1:-1),o=a+(o-s),s=a}else if(o<a){let c=r<=a&&r>=o?a-r:0;a-=c,a&&a<n.size&&cI(n.textBetween(a-1,a+1))&&(a+=c?1:-1),s=a+(s-o),o=a}return{start:a,endA:s,endB:o}}function cI(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class zB{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Bye,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(pI),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=hI(this),dI(this),this.nodeViews=fI(this),this.docView=WP(this.state.doc,uI(this),Jw(this),this.dom,this),this.domObserver=new f0e(this,(r,i,a,s)=>b0e(this,r,i,a,s)),this.domObserver.start(),$ye(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&gE(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(pI),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,a=!1,s=!1;e.storedMarks&&this.composing&&(RB(this),s=!0),this.state=e;let o=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let p=fI(this);_0e(p,this.nodeViews)&&(this.nodeViews=p,a=!0)}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&gE(this),this.editable=hI(this),dI(this);let c=Jw(this),u=uI(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=a||!this.docView.matchesNode(e.doc,u,c);(h||!e.selection.eq(i.selection))&&(s=!0);let f=d=="preserve"&&s&&this.dom.style.overflowAnchor==null&&tye(this);if(s){this.domObserver.stop();let p=h&&(ti||sr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&E0e(i.selection,e.selection);if(h){let y=sr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=t0e(this)),(a||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=WP(e.doc,u,c,this.dom,this)),y&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&_ye(this))?ms(this,p):(SB(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&nye(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof ct){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&LP(this,t.getBoundingClientRect(),e)}else LP(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let a=r.from+(this.state.doc.content.size-t.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==r.node&&(i=a)}this.dragging=new FB(e.slice,e.move,i<0?void 0:ct.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let o=this.directPlugins[s].props[e];if(o!=null&&(i=t?t(o):o))return i}let a=this.state.plugins;if(a)for(let s=0;s<a.length;s++){let o=a[s].props[e];if(o!=null&&(i=t?t(o):o))return i}}hasFocus(){if(ti){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&rye(this.dom),ms(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return lye(this,e)}coordsAtPos(e,t=1){return mB(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return fye(this,t||this.state,e)}pasteHTML(e,t){return lf(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return lf(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return uj(this,e)}destroy(){this.docView&&(zye(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Jw(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Hge())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Wye(this,e)}domSelectionRange(){let e=this.domSelection();return e?jr&&this.root.nodeType===11&&Xge(this.dom.ownerDocument)==this.dom&&m0e(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}zB.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function uI(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Br.node(0,n.state.doc.content.size,e)]}function dI(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Br.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function hI(n){return!n.someProp("editable",e=>e(n.state)===!1)}function E0e(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function fI(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function _0e(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function pI(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var co={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Bg={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},D0e=typeof navigator<"u"&&/Mac/.test(navigator.platform),j0e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var mr=0;mr<10;mr++)co[48+mr]=co[96+mr]=String(mr);for(var mr=1;mr<=24;mr++)co[mr+111]="F"+mr;for(var mr=65;mr<=90;mr++)co[mr]=String.fromCharCode(mr+32),Bg[mr]=String.fromCharCode(mr);for(var Qw in co)Bg.hasOwnProperty(Qw)||(Bg[Qw]=co[Qw]);function T0e(n){var e=D0e&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||j0e&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Bg:co)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const C0e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),N0e=typeof navigator<"u"&&/Win/.test(navigator.platform);function k0e(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,a,s;for(let o=0;o<e.length-1;o++){let c=e[o];if(/^(cmd|meta|m)$/i.test(c))s=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))C0e?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Meta-"+t),a&&(t="Shift-"+t),t}function O0e(n){let e=Object.create(null);for(let t in n)e[k0e(t)]=n[t];return e}function eA(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function P0e(n){return new bn({props:{handleKeyDown:qB(n)}})}function qB(n){let e=O0e(n);return function(t,r){let i=T0e(r),a,s=e[eA(i,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let o=e[eA(i,r,!1)];if(o&&o(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(N0e&&r.ctrlKey&&r.altKey)&&(a=co[r.keyCode])&&a!=i){let o=e[eA(a,r)];if(o&&o(t.state,t.dispatch,t))return!0}}return!1}}var I0e=Object.defineProperty,gj=(n,e)=>{for(var t in e)I0e(n,t,{get:e[t],enumerable:!0})};function X0(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:a}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,a=t.storedMarks,t}}}var J0=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:r}=e,{tr:i}=t,a=this.buildProps(i);return Object.fromEntries(Object.entries(n).map(([s,o])=>[s,(...u)=>{const d=o(...u)(a);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:r,state:i}=this,{view:a}=r,s=[],o=!!n,c=n||i.tr,u=()=>(!o&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(c),s.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(t).map(([h,f])=>[h,(...y)=>{const g=this.buildProps(c,e),m=f(...y)(g);return s.push(m),d}])),run:u};return d}createCan(n){const{rawCommands:e,state:t}=this,r=!1,i=n||t.tr,a=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([o,c])=>[o,(...u)=>c(...u)({...a,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(n,e=!0){const{rawCommands:t,editor:r,state:i}=this,{view:a}=r,s={tr:n,editor:r,view:a,state:X0({state:i,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([o,c])=>[o,(...u)=>c(...u)(s)]))}};return s}},WB={};gj(WB,{blur:()=>R0e,clearContent:()=>M0e,clearNodes:()=>F0e,command:()=>L0e,createParagraphNear:()=>U0e,cut:()=>B0e,deleteCurrentNode:()=>$0e,deleteNode:()=>z0e,deleteRange:()=>q0e,deleteSelection:()=>W0e,enter:()=>H0e,exitCode:()=>V0e,extendMarkRange:()=>G0e,first:()=>Y0e,focus:()=>X0e,forEach:()=>J0e,insertContent:()=>Z0e,insertContentAt:()=>tve,joinBackward:()=>ive,joinDown:()=>rve,joinForward:()=>ave,joinItemBackward:()=>sve,joinItemForward:()=>ove,joinTextblockBackward:()=>lve,joinTextblockForward:()=>cve,joinUp:()=>nve,keyboardShortcut:()=>dve,lift:()=>hve,liftEmptyBlock:()=>fve,liftListItem:()=>pve,newlineInCode:()=>mve,resetAttributes:()=>gve,scrollIntoView:()=>yve,selectAll:()=>vve,selectNodeBackward:()=>xve,selectNodeForward:()=>bve,selectParentNode:()=>wve,selectTextblockEnd:()=>Ave,selectTextblockStart:()=>Sve,setContent:()=>Eve,setMark:()=>Wve,setMeta:()=>Hve,setNode:()=>Vve,setNodeSelection:()=>Gve,setTextDirection:()=>Yve,setTextSelection:()=>Kve,sinkListItem:()=>Xve,splitBlock:()=>Jve,splitListItem:()=>Zve,toggleList:()=>Qve,toggleMark:()=>exe,toggleNode:()=>txe,toggleWrap:()=>nxe,undoInputRule:()=>rxe,unsetAllMarks:()=>ixe,unsetMark:()=>axe,unsetTextDirection:()=>sxe,updateAttributes:()=>oxe,wrapIn:()=>lxe,wrapInList:()=>cxe});var R0e=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())==null||t.removeAllRanges())}),!0),M0e=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),F0e=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:a,$to:s})=>{n.doc.nodesBetween(a.pos,s.pos,(o,c)=>{if(o.type.isText)return;const{doc:u,mapping:d}=e,h=u.resolve(d.map(c)),f=u.resolve(d.map(c+o.nodeSize)),p=h.blockRange(f);if(!p)return;const y=Lu(p);if(o.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(p.start,g)}(y||y===0)&&e.lift(p,y)})}),!0},L0e=n=>e=>n(e),U0e=()=>({state:n,dispatch:e})=>iB(n,e),B0e=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,a=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const s=r.mapping.map(e);return r.insert(s,a.content),r.setSelection(new mt(r.doc.resolve(Math.max(s-1,0)))),!0},$0e=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===r.type){if(e){const o=i.before(a),c=i.after(a);n.delete(o,c).scrollIntoView()}return!0}return!1};function Un(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}var z0e=n=>({tr:e,state:t,dispatch:r})=>{const i=Un(n,t.schema),a=e.selection.$anchor;for(let s=a.depth;s>0;s-=1)if(a.node(s).type===i){if(r){const c=a.before(s),u=a.after(s);e.delete(c,u).scrollIntoView()}return!0}return!1},q0e=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},W0e=()=>({state:n,dispatch:e})=>nj(n,e),H0e=()=>({commands:n})=>n.keyboardShortcut("Enter"),V0e=()=>({state:n,dispatch:e})=>Nge(n,e);function yj(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function $g(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:yj(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function HB(n,e,t={}){return n.find(r=>r.type===e&&$g(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function mI(n,e,t={}){return!!HB(n,e,t)}function vj(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(t=t||((r=i.node.marks[0])==null?void 0:r.attrs),!HB([...i.node.marks],e,t)))return;let s=i.index,o=n.start()+i.offset,c=s+1,u=o+i.node.nodeSize;for(;s>0&&mI([...n.parent.child(s-1).marks],e,t);)s-=1,o-=n.parent.child(s).nodeSize;for(;c<n.parent.childCount&&mI([...n.parent.child(c).marks],e,t);)u+=n.parent.child(c).nodeSize,c+=1;return{from:o,to:u}}function Cs(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var G0e=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const a=Cs(n,r.schema),{doc:s,selection:o}=t,{$from:c,from:u,to:d}=o;if(i){const h=vj(c,a,e);if(h&&h.from<=u&&h.to>=d){const f=mt.create(s,h.from,h.to);t.setSelection(f)}}return!0},Y0e=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function VB(n){return n instanceof mt}function Jo(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function GB(n,e=null){if(!e)return null;const t=Et.atStart(n),r=Et.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,a=r.to;return e==="all"?mt.create(n,Jo(0,i,a),Jo(n.content.size,i,a)):mt.create(n,Jo(e,i,a),Jo(e,i,a))}function gI(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function zg(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function K0e(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var X0e=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:a})=>{e={scrollIntoView:!0,...e};const s=()=>{(zg()||gI())&&r.dom.focus(),K0e()&&!zg()&&!gI()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(a&&n===null&&!VB(t.state.selection))return s(),!0;const o=GB(i.doc,n)||t.state.selection,c=t.state.selection.eq(o);return a&&(c||i.setSelection(o),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},J0e=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),Z0e=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),YB=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&YB(r)}return n};function Dp(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return YB(t)}function uf(n,e,t){if(n instanceof Qs||n instanceof ke)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return ke.fromArray(n.map(o=>e.nodeFromJSON(o)));const s=e.nodeFromJSON(n);return t.errorOnInvalidContent&&s.check(),s}catch(a){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",a),uf("",e,t)}if(i){if(t.errorOnInvalidContent){let s=!1,o="";const c=new kU({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(s=!0,o=typeof u=="string"?u:u.outerHTML,null)}]}})});if(t.slice?eo.fromSchema(c).parseSlice(Dp(n),t.parseOptions):eo.fromSchema(c).parse(Dp(n),t.parseOptions),t.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const a=eo.fromSchema(e);return t.slice?a.parseSlice(Dp(n),t.parseOptions).content:a.parse(Dp(n),t.parseOptions)}return uf("",e,t)}function Q0e(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof ir||i instanceof or))return;const a=n.mapping.maps[r];let s=0;a.forEach((o,c,u,d)=>{s===0&&(s=d)}),n.setSelection(Et.near(n.doc.resolve(s),t))}var eve=n=>!("type"in n),tve=(n,e,t)=>({tr:r,dispatch:i,editor:a})=>{var s;if(i){t={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let o;const c=m=>{a.emit("contentError",{editor:a,error:m,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{uf(e,a.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(m){c(m)}try{o=uf(e,a.schema,{parseOptions:u,errorOnInvalidContent:(s=t.errorOnInvalidContent)!=null?s:a.options.enableContentCheck})}catch(m){return c(m),!1}let{from:d,to:h}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},f=!0,p=!0;if((eve(o)?o:[o]).forEach(m=>{m.check(),f=f?m.isText&&m.marks.length===0:!1,p=p?m.isBlock:!1}),d===h&&p){const{parent:m}=r.doc.resolve(d);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(d-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(m=>m.text||"").join("");else if(e instanceof ke){let m="";e.forEach(v=>{v.text&&(m+=v.text)}),g=m}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,d,h)}else{g=o;const m=r.doc.resolve(d),v=m.node(),x=m.parentOffset===0,b=v.isText||v.isTextblock,A=v.content.size>0;x&&b&&A&&(d=Math.max(0,d-1)),r.replaceWith(d,h,g)}t.updateSelection&&Q0e(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:g}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:g})}return!0},nve=()=>({state:n,dispatch:e})=>jge(n,e),rve=()=>({state:n,dispatch:e})=>Tge(n,e),ive=()=>({state:n,dispatch:e})=>JU(n,e),ave=()=>({state:n,dispatch:e})=>tB(n,e),sve=()=>({state:n,dispatch:e,tr:t})=>{try{const r=W0(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},ove=()=>({state:n,dispatch:e,tr:t})=>{try{const r=W0(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},lve=()=>({state:n,dispatch:e})=>_ge(n,e),cve=()=>({state:n,dispatch:e})=>Dge(n,e);function KB(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function uve(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,a,s;for(let o=0;o<e.length-1;o+=1){const c=e[o];if(/^(cmd|meta|m)$/i.test(c))s=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))zg()||KB()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),s&&(t=`Meta-${t}`),a&&(t=`Shift-${t}`),t}var dve=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const a=uve(n).split(/-(?!$)/),s=a.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),o=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{t.someProp("handleKeyDown",u=>u(t,o))});return c?.steps.forEach(u=>{const d=u.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function uo(n,e,t={}){const{from:r,to:i,empty:a}=n.selection,s=e?Un(e,n.schema):null,o=[];n.doc.nodesBetween(r,i,(h,f)=>{if(h.isText)return;const p=Math.max(r,f),y=Math.min(i,f+h.nodeSize);o.push({node:h,from:p,to:y})});const c=i-r,u=o.filter(h=>s?s.name===h.node.type.name:!0).filter(h=>$g(h.node.attrs,t,{strict:!1}));return a?!!u.length:u.reduce((h,f)=>h+f.to-f.from,0)>=c}var hve=(n,e={})=>({state:t,dispatch:r})=>{const i=Un(n,t.schema);return uo(t,i,e)?Cge(t,r):!1},fve=()=>({state:n,dispatch:e})=>aB(n,e),pve=n=>({state:e,dispatch:t})=>{const r=Un(n,e.schema);return $ge(r)(e,t)},mve=()=>({state:n,dispatch:e})=>rB(n,e);function Z0(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function yI(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}var gve=(n,e)=>({tr:t,state:r,dispatch:i})=>{let a=null,s=null;const o=Z0(typeof n=="string"?n:n.name,r.schema);if(!o)return!1;o==="node"&&(a=Un(n,r.schema)),o==="mark"&&(s=Cs(n,r.schema));let c=!1;return t.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{a&&a===d.type&&(c=!0,i&&t.setNodeMarkup(h,void 0,yI(d.attrs,e))),s&&d.marks.length&&d.marks.forEach(f=>{s===f.type&&(c=!0,i&&t.addMark(h,h+d.nodeSize,s.create(yI(f.attrs,e))))})})}),c},yve=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),vve=()=>({tr:n,dispatch:e})=>{if(e){const t=new bi(n.doc);n.setSelection(t)}return!0},xve=()=>({state:n,dispatch:e})=>QU(n,e),bve=()=>({state:n,dispatch:e})=>nB(n,e),wve=()=>({state:n,dispatch:e})=>Pge(n,e),Ave=()=>({state:n,dispatch:e})=>Mge(n,e),Sve=()=>({state:n,dispatch:e})=>Rge(n,e);function yE(n,e,t={},r={}){return uf(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}var Eve=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:r={}}={})=>({editor:i,tr:a,dispatch:s,commands:o})=>{const{doc:c}=a;if(r.preserveWhitespace!=="full"){const u=yE(n,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return s&&a.replaceWith(0,c.content.size,u).setMeta("preventUpdate",!t),!0}return s&&a.setMeta("preventUpdate",!t),o.insertContentAt({from:0,to:c.content.size},n,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function XB(n,e){const t=Cs(e,n.schema),{from:r,to:i,empty:a}=n.selection,s=[];a?(n.storedMarks&&s.push(...n.storedMarks),s.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,c=>{s.push(...c.marks)});const o=s.find(c=>c.type.name===t.name);return o?{...o.attrs}:{}}function JB(n,e){const t=new GU(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function _ve(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Dve(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,a)=>{t(i)&&r.push({node:i,pos:a})}),r}function jve(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Q0(n){return e=>jve(e.$from,n)}function at(n,e,t){return n.config[e]===void 0&&n.parent?at(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?at(n.parent,e,t):null}):n.config[e]}function xj(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},r=at(e,"addExtensions",t);return r?[e,...xj(r())]:e}).flat(10)}function bj(n,e){const t=$l.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function ZB(n){return typeof n=="function"}function Ht(n,e=void 0,...t){return ZB(n)?e?n.bind(e)(...t):n(...t):n}function Tve(n={}){return Object.keys(n).length===0&&n.constructor===Object}function Su(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function QB(n){const e=[],{nodeExtensions:t,markExtensions:r}=Su(n),i=[...t,...r],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage,extensions:i},c=at(s,"addGlobalAttributes",o);if(!c)return;c().forEach(d=>{d.types.forEach(h=>{Object.entries(d.attributes).forEach(([f,p])=>{e.push({type:h,name:f,attribute:{...a,...p}})})})})}),i.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage},c=at(s,"addAttributes",o);if(!c)return;const u=c();Object.entries(u).forEach(([d,h])=>{const f={...a,...h};typeof f?.default=="function"&&(f.default=f.default()),f?.isRequired&&f?.default===void 0&&delete f.default,e.push({type:s.name,name:d,attribute:f})})}),e}function Tn(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,a])=>{if(!r[i]){r[i]=a;return}if(i==="class"){const o=a?String(a).split(" "):[],c=r[i]?r[i].split(" "):[],u=o.filter(d=>!c.includes(d));r[i]=[...c,...u].join(" ")}else if(i==="style"){const o=a?a.split(";").map(d=>d.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;c.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());u.set(h,f)}),o.forEach(d=>{const[h,f]=d.split(":").map(p=>p.trim());u.set(h,f)}),r[i]=Array.from(u.entries()).map(([d,h])=>`${d}: ${h}`).join("; ")}else r[i]=a}),r},{})}function df(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Tn(t,r),{})}function Cve(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function vI(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((a,s)=>{const o=s.attribute.parseHTML?s.attribute.parseHTML(t):Cve(t.getAttribute(s.name));return o==null?a:{...a,[s.name]:o}},{});return{...r,...i}}}}function xI(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&Tve(t)?!1:t!=null))}function bI(n){var e,t;const r={};return!((e=n?.attribute)!=null&&e.isRequired)&&"default"in(n?.attribute||{})&&(r.default=n.attribute.default),((t=n?.attribute)==null?void 0:t.validate)!==void 0&&(r.validate=n.attribute.validate),[n.name,r]}function Nve(n,e){var t;const r=QB(n),{nodeExtensions:i,markExtensions:a}=Su(n),s=(t=i.find(u=>at(u,"topNode")))==null?void 0:t.name,o=Object.fromEntries(i.map(u=>{const d=r.filter(v=>v.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},f=n.reduce((v,x)=>{const b=at(x,"extendNodeSchema",h);return{...v,...b?b(u):{}}},{}),p=xI({...f,content:Ht(at(u,"content",h)),marks:Ht(at(u,"marks",h)),group:Ht(at(u,"group",h)),inline:Ht(at(u,"inline",h)),atom:Ht(at(u,"atom",h)),selectable:Ht(at(u,"selectable",h)),draggable:Ht(at(u,"draggable",h)),code:Ht(at(u,"code",h)),whitespace:Ht(at(u,"whitespace",h)),linebreakReplacement:Ht(at(u,"linebreakReplacement",h)),defining:Ht(at(u,"defining",h)),isolating:Ht(at(u,"isolating",h)),attrs:Object.fromEntries(d.map(bI))}),y=Ht(at(u,"parseHTML",h));y&&(p.parseDOM=y.map(v=>vI(v,d)));const g=at(u,"renderHTML",h);g&&(p.toDOM=v=>g({node:v,HTMLAttributes:df(v,d)}));const m=at(u,"renderText",h);return m&&(p.toText=m),[u.name,p]})),c=Object.fromEntries(a.map(u=>{const d=r.filter(m=>m.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},f=n.reduce((m,v)=>{const x=at(v,"extendMarkSchema",h);return{...m,...x?x(u):{}}},{}),p=xI({...f,inclusive:Ht(at(u,"inclusive",h)),excludes:Ht(at(u,"excludes",h)),group:Ht(at(u,"group",h)),spanning:Ht(at(u,"spanning",h)),code:Ht(at(u,"code",h)),attrs:Object.fromEntries(d.map(bI))}),y=Ht(at(u,"parseHTML",h));y&&(p.parseDOM=y.map(m=>vI(m,d)));const g=at(u,"renderHTML",h);return g&&(p.toDOM=m=>g({mark:m,HTMLAttributes:df(m,d)})),[u.name,p]}));return new kU({topNode:s,nodes:o,marks:c})}function kve(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}function qg(n){return n.sort((t,r)=>{const i=at(t,"priority")||100,a=at(r,"priority")||100;return i>a?-1:i<a?1:0})}function e$(n){const e=qg(xj(n)),t=kve(e.map(r=>r.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function t$(n,e,t){const{from:r,to:i}=e,{blockSeparator:a=`

`,textSerializers:s={}}=t||{};let o="";return n.nodesBetween(r,i,(c,u,d,h)=>{var f;c.isBlock&&u>r&&(o+=a);const p=s?.[c.type.name];if(p)return d&&(o+=p({node:c,pos:u,parent:d,index:h,range:e})),!1;c.isText&&(o+=(f=c?.text)==null?void 0:f.slice(Math.max(r,u)-u,i-u))}),o}function Ove(n,e){const t={from:0,to:n.content.size};return t$(n,t,e)}function n$(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function Pve(n,e){const t=Un(e,n.schema),{from:r,to:i}=n.selection,a=[];n.doc.nodesBetween(r,i,o=>{a.push(o)});const s=a.reverse().find(o=>o.type.name===t.name);return s?{...s.attrs}:{}}function r$(n,e){const t=Z0(typeof e=="string"?e:e.name,n.schema);return t==="node"?Pve(n,e):t==="mark"?XB(n,e):{}}function Ive(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function Rve(n){const e=Ive(n);return e.length===1?e:e.filter((t,r)=>!e.filter((a,s)=>s!==r).some(a=>t.oldRange.from>=a.oldRange.from&&t.oldRange.to<=a.oldRange.to&&t.newRange.from>=a.newRange.from&&t.newRange.to<=a.newRange.to))}function i$(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,a)=>{const s=[];if(i.ranges.length)i.forEach((o,c)=>{s.push({from:o,to:c})});else{const{from:o,to:c}=t[a];if(o===void 0||c===void 0)return;s.push({from:o,to:c})}s.forEach(({from:o,to:c})=>{const u=e.slice(a).map(o,-1),d=e.slice(a).map(c),h=e.invert().map(u,-1),f=e.invert().map(d);r.push({oldRange:{from:h,to:f},newRange:{from:u,to:d}})})}),Rve(r)}function wj(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const a=t.resolve(n),s=vj(a,i.type);s&&r.push({mark:i,...s})}):t.nodesBetween(n,e,(i,a)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(s=>({from:a,to:a+i.nodeSize,mark:s})))}),r}var Mve=(n,e,t,r=20)=>{const i=n.doc.resolve(t);let a=r,s=null;for(;a>0&&s===null;){const o=i.node(a);o?.type.name===e?s=o:a-=1}return[s,a]};function jp(n,e){return e.nodes[n]||e.marks[n]||null}function fm(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(a=>a.type===e&&a.name===r);return i?i.attribute.keepOnSplit:!1}))}var Fve=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,a,s,o)=>{var c,u;const d=((u=(c=i.type.spec).toText)==null?void 0:u.call(c,{node:i,pos:a,parent:s,index:o}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-a))}),t};function vE(n,e,t={}){const{empty:r,ranges:i}=n.selection,a=e?Cs(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(h=>a?a.name===h.type.name:!0).find(h=>$g(h.attrs,t,{strict:!1}));let s=0;const o=[];if(i.forEach(({$from:h,$to:f})=>{const p=h.pos,y=f.pos;n.doc.nodesBetween(p,y,(g,m)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(p,m),x=Math.min(y,m+g.nodeSize),b=x-v;s+=b,o.push(...g.marks.map(A=>({mark:A,from:v,to:x})))})}),s===0)return!1;const c=o.filter(h=>a?a.name===h.mark.type.name:!0).filter(h=>$g(h.mark.attrs,t,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),u=o.filter(h=>a?h.mark.type!==a&&h.mark.type.excludes(a):!0).reduce((h,f)=>h+f.to-f.from,0);return(c>0?c+u:c)>=s}function Lve(n,e,t={}){if(!e)return uo(n,null,t)||vE(n,null,t);const r=Z0(e,n.schema);return r==="node"?uo(n,e,t):r==="mark"?vE(n,e,t):!1}var Uve=(n,e)=>{const{$from:t,$to:r,$anchor:i}=n.selection;if(e){const a=Q0(o=>o.type.name===e)(n.selection);if(!a)return!1;const s=n.doc.resolve(a.pos+1);return i.pos+1===s.end()}return!(r.parentOffset<r.parent.nodeSize-2||t.pos!==r.pos)},Bve=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function wI(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function AI(n,e){const{nodeExtensions:t}=Su(e),r=t.find(s=>s.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},a=Ht(at(r,"group",i));return typeof a!="string"?!1:a.split(" ").includes("list")}function ev(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!=null?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(a=>{i!==!1&&(ev(a,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function a$(n){return n instanceof ct}var s$=class o${constructor(e){this.position=e}static fromJSON(e){return new o$(e.position)}toJSON(){return{position:this.position}}};function $ve(n,e){const t=e.mapping.mapResult(n.position);return{position:new s$(t.pos),mapResult:t}}function zve(n){return new s$(n)}function qve(n,e,t){var r;const{selection:i}=e;let a=null;if(VB(i)&&(a=i.$cursor),a){const o=(r=n.storedMarks)!=null?r:a.marks();return a.parent.type.allowsMarkType(t)&&(!!t.isInSet(o)||!o.some(u=>u.type.excludes(t)))}const{ranges:s}=i;return s.some(({$from:o,$to:c})=>{let u=o.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(o.pos,c.pos,(d,h,f)=>{if(u)return!1;if(d.isInline){const p=!f||f.type.allowsMarkType(t),y=!!t.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(t));u=p&&y}return!u}),u})}var Wve=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:a}=t,{empty:s,ranges:o}=a,c=Cs(n,r.schema);if(i)if(s){const u=XB(r,c);t.addStoredMark(c.create({...u,...e}))}else o.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;r.doc.nodesBetween(d,h,(f,p)=>{const y=Math.max(p,d),g=Math.min(p+f.nodeSize,h);f.marks.find(v=>v.type===c)?f.marks.forEach(v=>{c===v.type&&t.addMark(y,g,c.create({...v.attrs,...e}))}):t.addMark(y,g,c.create(e))})});return qve(r,t,c)},Hve=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Vve=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const a=Un(n,t.schema);let s;return t.selection.$anchor.sameParent(t.selection.$head)&&(s=t.selection.$anchor.parent.attrs),a.isTextblock?i().command(({commands:o})=>RP(a,{...s,...e})(t)?!0:o.clearNodes()).command(({state:o})=>RP(a,{...s,...e})(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Gve=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Jo(n,0,r.content.size),a=ct.create(r,i);e.setSelection(a)}return!0},Yve=(n,e)=>({tr:t,state:r,dispatch:i})=>{const{selection:a}=r;let s,o;return typeof e=="number"?(s=e,o=e):e&&"from"in e&&"to"in e?(s=e.from,o=e.to):(s=a.from,o=a.to),i&&t.doc.nodesBetween(s,o,(c,u)=>{c.isText||t.setNodeMarkup(u,void 0,{...c.attrs,dir:n})}),!0},Kve=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:a}=typeof n=="number"?{from:n,to:n}:n,s=mt.atStart(r).from,o=mt.atEnd(r).to,c=Jo(i,s,o),u=Jo(a,s,o),d=mt.create(r,c,u);e.setSelection(d)}return!0},Xve=n=>({state:e,dispatch:t})=>{const r=Un(n,e.schema);return Wge(r)(e,t)};function SI(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e?.includes(i.type.name));n.tr.ensureMarks(r)}}var Jve=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:a,doc:s}=e,{$from:o,$to:c}=a,u=i.extensionManager.attributes,d=fm(u,o.node().type.name,o.node().attrs);if(a instanceof ct&&a.node.isBlock)return!o.parentOffset||!ps(s,o.pos)?!1:(r&&(n&&SI(t,i.extensionManager.splittableMarks),e.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const h=c.parentOffset===c.parent.content.size,f=o.depth===0?void 0:_ve(o.node(-1).contentMatchAt(o.indexAfter(-1)));let p=h&&f?[{type:f,attrs:d}]:void 0,y=ps(e.doc,e.mapping.map(o.pos),1,p);if(!p&&!y&&ps(e.doc,e.mapping.map(o.pos),1,f?[{type:f}]:void 0)&&(y=!0,p=f?[{type:f,attrs:d}]:void 0),r){if(y&&(a instanceof mt&&e.deleteSelection(),e.split(e.mapping.map(o.pos),1,p),f&&!h&&!o.parentOffset&&o.parent.type!==f)){const g=e.mapping.map(o.before()),m=e.doc.resolve(g);o.node(-1).canReplaceWith(m.index(),m.index()+1,f)&&e.setNodeMarkup(e.mapping.map(o.before()),f)}n&&SI(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return y},Zve=(n,e={})=>({tr:t,state:r,dispatch:i,editor:a})=>{var s;const o=Un(n,r.schema),{$from:c,$to:u}=r.selection,d=r.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(u))return!1;const h=c.node(-1);if(h.type!==o)return!1;const f=a.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==o||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let v=ke.empty;const x=c.index(-1)?1:c.index(-2)?2:3;for(let _=c.depth-x;_>=c.depth-3;_-=1)v=ke.from(c.node(_).copy(v));const b=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,A={...fm(f,c.node().type.name,c.node().attrs),...e},w=((s=o.contentMatch.defaultType)==null?void 0:s.createAndFill(A))||void 0;v=v.append(ke.from(o.createAndFill(null,w)||void 0));const S=c.before(c.depth-(x-1));t.replace(S,c.after(-b),new Ye(v,4-x,0));let E=-1;t.doc.nodesBetween(S,t.doc.content.size,(_,D)=>{if(E>-1)return!1;_.isTextblock&&_.content.size===0&&(E=D+1)}),E>-1&&t.setSelection(mt.near(t.doc.resolve(E))),t.scrollIntoView()}return!0}const p=u.pos===c.end()?h.contentMatchAt(0).defaultType:null,y={...fm(f,h.type.name,h.attrs),...e},g={...fm(f,c.node().type.name,c.node().attrs),...e};t.delete(c.pos,u.pos);const m=p?[{type:o,attrs:y},{type:p,attrs:g}]:[{type:o,attrs:y}];if(!ps(t.doc,c.pos,2))return!1;if(i){const{selection:v,storedMarks:x}=r,{splittableMarks:b}=a.extensionManager,A=x||v.$to.parentOffset&&v.$from.marks();if(t.split(c.pos,2,m).scrollIntoView(),!A||!i)return!0;const w=A.filter(S=>b.includes(S.type.name));t.ensureMarks(w)}return!0},tA=(n,e)=>{const t=Q0(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===i?.type&&Eo(n.doc,t.pos)&&n.join(t.pos),!0},nA=(n,e)=>{const t=Q0(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===i?.type&&Eo(n.doc,r)&&n.join(r),!0},Qve=(n,e,t,r={})=>({editor:i,tr:a,state:s,dispatch:o,chain:c,commands:u,can:d})=>{const{extensions:h,splittableMarks:f}=i.extensionManager,p=Un(n,s.schema),y=Un(e,s.schema),{selection:g,storedMarks:m}=s,{$from:v,$to:x}=g,b=v.blockRange(x),A=m||g.$to.parentOffset&&g.$from.marks();if(!b)return!1;const w=Q0(S=>AI(S.type.name,h))(g);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===p)return u.liftListItem(y);if(AI(w.node.type.name,h)&&p.validContent(w.node.content)&&o)return c().command(()=>(a.setNodeMarkup(w.pos,p),!0)).command(()=>tA(a,p)).command(()=>nA(a,p)).run()}return!t||!A||!o?c().command(()=>d().wrapInList(p,r)?!0:u.clearNodes()).wrapInList(p,r).command(()=>tA(a,p)).command(()=>nA(a,p)).run():c().command(()=>{const S=d().wrapInList(p,r),E=A.filter(_=>f.includes(_.type.name));return a.ensureMarks(E),S?!0:u.clearNodes()}).wrapInList(p,r).command(()=>tA(a,p)).command(()=>nA(a,p)).run()},exe=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:a=!1}=t,s=Cs(n,r.schema);return vE(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:a}):i.setMark(s,e)},txe=(n,e,t={})=>({state:r,commands:i})=>{const a=Un(n,r.schema),s=Un(e,r.schema),o=uo(r,a,t);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),o?i.setNode(s,c):i.setNode(a,{...c,...t})},nxe=(n,e={})=>({state:t,commands:r})=>{const i=Un(n,t.schema);return uo(t,i,e)?r.lift(i):r.wrapIn(i,e)},rxe=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let a;if(i.spec.isInputRules&&(a=i.getState(n))){if(e){const s=n.tr,o=a.transform;for(let c=o.steps.length-1;c>=0;c-=1)s.step(o.steps[c].invert(o.docs[c]));if(a.text){const c=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,n.schema.text(a.text,c))}else s.delete(a.from,a.to)}return!0}}return!1},ixe=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(a=>{n.removeMark(a.$from.pos,a.$to.pos)}),!0},axe=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var a;const{extendEmptyMarkRange:s=!1}=e,{selection:o}=t,c=Cs(n,r.schema),{$from:u,empty:d,ranges:h}=o;if(!i)return!0;if(d&&s){let{from:f,to:p}=o;const y=(a=u.marks().find(m=>m.type===c))==null?void 0:a.attrs,g=vj(u,c,y);g&&(f=g.from,p=g.to),t.removeMark(f,p,c)}else h.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,c)});return t.removeStoredMark(c),!0},sxe=n=>({tr:e,state:t,dispatch:r})=>{const{selection:i}=t;let a,s;return typeof n=="number"?(a=n,s=n):n&&"from"in n&&"to"in n?(a=n.from,s=n.to):(a=i.from,s=i.to),r&&e.doc.nodesBetween(a,s,(o,c)=>{if(o.isText)return;const u={...o.attrs};delete u.dir,e.setNodeMarkup(c,void 0,u)}),!0},oxe=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let a=null,s=null;const o=Z0(typeof n=="string"?n:n.name,r.schema);if(!o)return!1;o==="node"&&(a=Un(n,r.schema)),o==="mark"&&(s=Cs(n,r.schema));let c=!1;return t.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let f,p,y,g;t.selection.empty?r.doc.nodesBetween(d,h,(m,v)=>{a&&a===m.type&&(c=!0,y=Math.max(v,d),g=Math.min(v+m.nodeSize,h),f=v,p=m)}):r.doc.nodesBetween(d,h,(m,v)=>{v<d&&a&&a===m.type&&(c=!0,y=Math.max(v,d),g=Math.min(v+m.nodeSize,h),f=v,p=m),v>=d&&v<=h&&(a&&a===m.type&&(c=!0,i&&t.setNodeMarkup(v,void 0,{...m.attrs,...e})),s&&m.marks.length&&m.marks.forEach(x=>{if(s===x.type&&(c=!0,i)){const b=Math.max(v,d),A=Math.min(v+m.nodeSize,h);t.addMark(b,A,s.create({...x.attrs,...e}))}}))}),p&&(f!==void 0&&i&&t.setNodeMarkup(f,void 0,{...p.attrs,...e}),s&&p.marks.length&&p.marks.forEach(m=>{s===m.type&&i&&t.addMark(y,g,s.create({...m.attrs,...e}))}))}),c},lxe=(n,e={})=>({state:t,dispatch:r})=>{const i=Un(n,t.schema);return Fge(i,e)(t,r)},cxe=(n,e={})=>({state:t,dispatch:r})=>{const i=Un(n,t.schema);return Lge(i,e)(t,r)},uxe=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(r=>r.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(r=>r!==e):delete this.callbacks[n]),this}once(n,e){const t=(...r)=>{this.off(n,t),e.apply(this,r)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}},tv=class{constructor(n){var e;this.find=n.find,this.handler=n.handler,this.undoable=(e=n.undoable)!=null?e:!0}},dxe=(n,e)=>{if(yj(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Tp(n){var e;const{editor:t,from:r,to:i,text:a,rules:s,plugin:o}=n,{view:c}=t;if(c.composing)return!1;const u=c.state.doc.resolve(r);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const h=Fve(u)+a;return s.forEach(f=>{if(d)return;const p=dxe(h,f.find);if(!p)return;const y=c.state.tr,g=X0({state:c.state,transaction:y}),m={from:r-(p[0].length-a.length),to:i},{commands:v,chain:x,can:b}=new J0({editor:t,state:g});f.handler({state:g,range:m,match:p,commands:v,chain:x,can:b})===null||!y.steps.length||(f.undoable&&y.setMeta(o,{transform:y,from:r,to:i,text:a}),c.dispatch(y),d=!0)}),d}function hxe(n){const{editor:e,rules:t}=n,r=new bn({state:{init(){return null},apply(i,a,s){const o=i.getMeta(r);if(o)return o;const c=i.getMeta("applyInputRules");return c&&setTimeout(()=>{let{text:d}=c;typeof d=="string"?d=d:d=bj(ke.from(d),s.schema);const{from:h}=c,f=h+d.length;Tp({editor:e,from:h,to:f,text:d,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:a}},props:{handleTextInput(i,a,s,o){return Tp({editor:e,from:a,to:s,text:o,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:a}=i.state.selection;a&&Tp({editor:e,from:a.pos,to:a.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,a){if(a.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Tp({editor:e,from:s.pos,to:s.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function fxe(n){return Object.prototype.toString.call(n).slice(8,-1)}function Cp(n){return fxe(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function l$(n,e){const t={...n};return Cp(n)&&Cp(e)&&Object.keys(e).forEach(r=>{Cp(e[r])&&Cp(n[r])?t[r]=l$(n[r],e[r]):t[r]=e[r]}),t}var Aj=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...Ht(at(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ht(at(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>l$(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},Do=class c$ extends Aj{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new c$(t)}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>u?.type.name===t.name))return!1;const c=s.find(u=>u?.type.name===t.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function pxe(n){return typeof n=="number"}var mxe=class{constructor(n){this.find=n.find,this.handler=n.handler}},gxe=(n,e,t)=>{if(yj(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const a=[i.text];return a.index=i.index,a.input=n,a.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(i.replaceWith)),a}):[]};function yxe(n){const{editor:e,state:t,from:r,to:i,rule:a,pasteEvent:s,dropEvent:o}=n,{commands:c,chain:u,can:d}=new J0({editor:e,state:t}),h=[];return t.doc.nodesBetween(r,i,(p,y)=>{var g,m,v,x,b;if((m=(g=p.type)==null?void 0:g.spec)!=null&&m.code||!(p.isText||p.isTextblock||p.isInline))return;const A=(b=(x=(v=p.content)==null?void 0:v.size)!=null?x:p.nodeSize)!=null?b:0,w=Math.max(r,y),S=Math.min(i,y+A);if(w>=S)return;const E=p.isText?p.text||"":p.textBetween(w-y,S-y,void 0,"￼");gxe(E,a.find,s).forEach(D=>{if(D.index===void 0)return;const C=w+D.index+1,k=C+D[0].length,T={from:t.tr.mapping.map(C),to:t.tr.mapping.map(k)},N=a.handler({state:t,range:T,match:D,commands:c,chain:u,can:d,pasteEvent:s,dropEvent:o});h.push(N)})}),h.every(p=>p!==null)}var Np=null,vxe=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function xxe(n){const{editor:e,rules:t}=n;let r=null,i=!1,a=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}const c=({state:d,from:h,to:f,rule:p,pasteEvt:y})=>{const g=d.tr,m=X0({state:d,transaction:g});if(!(!yxe({editor:e,state:m,from:Math.max(h-1,0),to:f.b-1,rule:p,pasteEvent:y,dropEvent:o})||!g.steps.length)){try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return t.map(d=>new bn({view(h){const f=y=>{var g;r=(g=h.dom.parentElement)!=null&&g.contains(y.target)?h.dom.parentElement:null,r&&(Np=e)},p=()=>{Np&&(Np=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(a=r===h.dom.parentElement,o=f,!a){const p=Np;p?.isEditable&&setTimeout(()=>{const y=p.state.selection;y&&p.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(h,f)=>{var p;const y=(p=f.clipboardData)==null?void 0:p.getData("text/html");return s=f,i=!!y?.includes("data-pm-slice"),!1}}},appendTransaction:(h,f,p)=>{const y=h[0],g=y.getMeta("uiEvent")==="paste"&&!i,m=y.getMeta("uiEvent")==="drop"&&!a,v=y.getMeta("applyPasteRules"),x=!!v;if(!g&&!m&&!x)return;if(x){let{text:w}=v;typeof w=="string"?w=w:w=bj(ke.from(w),p.schema);const{from:S}=v,E=S+w.length,_=vxe(w);return c({rule:d,state:p,from:S,to:{b:E},pasteEvt:_})}const b=f.doc.content.findDiffStart(p.doc.content),A=f.doc.content.findDiffEnd(p.doc.content);if(!(!pxe(b)||!A||b===A.b))return c({rule:d,state:p,from:b,to:A,pasteEvt:s})}}))}var nv=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=n,this.extensions=e$(n),this.schema=Nve(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:jp(e.name,this.schema)},r=at(e,"addCommands",t);return r?{...n,...r()}:n},{})}get plugins(){const{editor:n}=this;return qg([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:n,type:jp(r.name,this.schema)},a=[],s=at(r,"addKeyboardShortcuts",i);let o={};if(r.type==="mark"&&at(r,"exitable",i)&&(o.ArrowRight=()=>Do.handleExit({editor:n,mark:r})),s){const f=Object.fromEntries(Object.entries(s()).map(([p,y])=>[p,()=>y({editor:n})]));o={...o,...f}}const c=P0e(o);a.push(c);const u=at(r,"addInputRules",i);if(wI(r,n.options.enableInputRules)&&u){const f=u();if(f&&f.length){const p=hxe({editor:n,rules:f}),y=Array.isArray(p)?p:[p];a.push(...y)}}const d=at(r,"addPasteRules",i);if(wI(r,n.options.enablePasteRules)&&d){const f=d();if(f&&f.length){const p=xxe({editor:n,rules:f});a.push(...p)}}const h=at(r,"addProseMirrorPlugins",i);if(h){const f=h();a.push(...f)}return a})}get attributes(){return QB(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=Su(this.extensions);return Object.fromEntries(e.filter(t=>!!at(t,"addNodeView")).map(t=>{const r=this.attributes.filter(c=>c.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Un(t.name,this.schema)},a=at(t,"addNodeView",i);if(!a)return[];const s=a();if(!s)return[];const o=(c,u,d,h,f)=>{const p=df(c,r);return s({node:c,view:u,getPos:d,decorations:h,innerDecorations:f,editor:n,extension:t,HTMLAttributes:p})};return[t.name,o]}))}dispatchTransaction(n){const{editor:e}=this;return qg([...this.extensions].reverse()).reduceRight((r,i)=>{const a={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:jp(i.name,this.schema)},s=at(i,"dispatchTransaction",a);return s?o=>{s.call(a,{transaction:o,next:r})}:r},n)}get markViews(){const{editor:n}=this,{markExtensions:e}=Su(this.extensions);return Object.fromEntries(e.filter(t=>!!at(t,"addMarkView")).map(t=>{const r=this.attributes.filter(o=>o.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Cs(t.name,this.schema)},a=at(t,"addMarkView",i);if(!a)return[];const s=(o,c,u)=>{const d=df(o,r);return a()({mark:o,view:c,inline:u,editor:n,extension:t,HTMLAttributes:d,updateAttributes:h=>{Ixe(o,n,h)}})};return[t.name,s]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:jp(e.name,this.schema)};e.type==="mark"&&((t=Ht(at(e,"keepOnSplit",r)))==null||t)&&this.splittableMarks.push(e.name);const i=at(e,"onBeforeCreate",r),a=at(e,"onCreate",r),s=at(e,"onUpdate",r),o=at(e,"onSelectionUpdate",r),c=at(e,"onTransaction",r),u=at(e,"onFocus",r),d=at(e,"onBlur",r),h=at(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),a&&this.editor.on("create",a),s&&this.editor.on("update",s),o&&this.editor.on("selectionUpdate",o),c&&this.editor.on("transaction",c),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),h&&this.editor.on("destroy",h)})}};nv.resolve=e$;nv.sort=qg;nv.flatten=xj;var bxe={};gj(bxe,{ClipboardTextSerializer:()=>d$,Commands:()=>h$,Delete:()=>f$,Drop:()=>p$,Editable:()=>m$,FocusEvents:()=>y$,Keymap:()=>v$,Paste:()=>x$,Tabindex:()=>b$,TextDirection:()=>w$,focusEventsPluginKey:()=>g$});var Xt=class u$ extends Aj{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new u$(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},d$=Xt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new bn({key:new Zn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:a}=i,s=Math.min(...a.map(d=>d.$from.pos)),o=Math.max(...a.map(d=>d.$to.pos)),c=n$(t);return t$(r,{from:s,to:o},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),h$=Xt.create({name:"commands",addCommands(){return{...WB}}}),f$=Xt.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,r,i;const a=()=>{var s,o,c,u;if((u=(c=(o=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:o.filterTransaction)==null?void 0:c.call(o,n))!=null?u:n.getMeta("y-sync$"))return;const d=JB(n.before,[n,...e]);i$(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(y,g)=>{const m=g+y.nodeSize-2,v=p.oldRange.from<=g&&m<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:y,from:g,to:m,newFrom:d.mapping.map(g),newTo:d.mapping.map(m),deletedRange:p.oldRange,newRange:p.newRange,partial:!v,editor:this.editor,transaction:n,combinedTransform:d})})});const f=d.mapping;d.steps.forEach((p,y)=>{var g,m;if(p instanceof oa){const v=f.slice(y).map(p.from,-1),x=f.slice(y).map(p.to),b=f.invert().map(v,-1),A=f.invert().map(x),w=(g=d.doc.nodeAt(v-1))==null?void 0:g.marks.some(E=>E.eq(p.mark)),S=(m=d.doc.nodeAt(x))==null?void 0:m.marks.some(E=>E.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:b,to:A},newRange:{from:v,to:x},partial:!!(S||w),editor:this.editor,transaction:n,combinedTransform:d})}})};(i=(r=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:r.async)==null||i?setTimeout(a,0):a()}}),p$=Xt.create({name:"drop",addProseMirrorPlugins(){return[new bn({key:new Zn("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),m$=Xt.create({name:"editable",addProseMirrorPlugins(){return[new bn({key:new Zn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),g$=new Zn("focusEvents"),y$=Xt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new bn({key:g$,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),v$=Xt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:o})=>{const{selection:c,doc:u}=o,{empty:d,$anchor:h}=c,{pos:f,parent:p}=h,y=h.parent.isTextblock&&f>0?o.doc.resolve(f-1):h,g=y.parent.type.spec.isolating,m=h.pos-h.parentOffset,v=g&&y.parent.childCount===1?m===h.pos:Et.atStart(u).from===f;return!d||!p.type.isTextblock||p.textContent.length||!v||v&&h.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},a={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return zg()||KB()?a:i},addProseMirrorPlugins(){return[new bn({key:new Zn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(g=>g.getMeta("composition")))return;const r=n.some(g=>g.docChanged)&&!e.doc.eq(t.doc),i=n.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:a,from:s,to:o}=e.selection,c=Et.atStart(e.doc).from,u=Et.atEnd(e.doc).to;if(a||!(s===c&&o===u)||!ev(t.doc))return;const f=t.tr,p=X0({state:t,transaction:f}),{commands:y}=new J0({editor:this.editor,state:p});if(y.clearNodes(),!!f.steps.length)return f}})]}}),x$=Xt.create({name:"paste",addProseMirrorPlugins(){return[new bn({key:new Zn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),b$=Xt.create({name:"tabindex",addProseMirrorPlugins(){return[new bn({key:new Zn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),w$=Xt.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:n}=Su(this.extensions);return[{types:n.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const t=e.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new bn({key:new Zn("textDirection"),props:{attributes:()=>{const n=this.options.direction;return n?{dir:n}:{}}}})]}}),wxe=class sc{constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new sc(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new sc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new sc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,a=t.isAtom&&!t.isText,s=this.pos+r+(a?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const c=new sc(o,this.editor,i,i?t:null);i&&(c.actualDepth=this.depth+1),e.push(new sc(o,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const a=i.node.attrs,s=Object.keys(t);for(let o=0;o<s.length;o+=1){const c=s[o];if(a[c]!==t[c])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const a=Object.keys(t);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&a.every(c=>t[c]===s.node.attrs[c])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},Axe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Sxe(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}var Exe=class extends uxe{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:$ve,createMappablePosition:zve},this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:a})=>this.options.onDrop(r,i,a)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=GB(e,this.options.autofocus);this.editorState=vc.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n?.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Sxe(Axe,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=ZB(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(i=>{const a=typeof i=="string"?`${i}$`:i.key;t=t.filter(s=>!s.key.startsWith(a))}),e.length===t.length)return;const r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}createExtensionManager(){var n,e;const r=[...this.options.enableCoreExtensions?[m$,d$.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),h$,y$,v$,b$,p$,x$,f$,w$.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new nv(r,this)}createCommandManager(){this.commandManager=new J0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=yE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=yE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){const{editorProps:e,enableExtensionDispatchTransaction:t}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=t?this.extensionManager.dispatchTransaction(r):r;this.editorView=new zB(n,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const a=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(a),this.prependClass(),this.injectCSS();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(u=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(u)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),r=!this.state.selection.eq(e.selection),i=t.includes(n),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:n});const s=t.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),o=s?.getMeta("focus"),c=s?.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:s}),c&&this.emit("blur",{editor:this,event:c.event,transaction:s}),!(n.getMeta("preventUpdate")||!t.some(u=>u.docChanged)||a.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return r$(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,r=typeof n=="string"?e:n;return Lve(this.state,t,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return bj(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return Ove(this.state.doc,{blockSeparator:e,textSerializers:{...n$(this.schema),...t}})}get isEmpty(){return ev(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new wxe(e,this)}get $doc(){return this.$pos(0)}};function Eu(n){return new tv({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Ht(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:a}=e,s=r[r.length-1],o=r[0];if(s){const c=o.search(/\S/),u=t.from+o.indexOf(s),d=u+s.length;if(wj(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>u).length)return null;d<t.to&&a.delete(d,t.to),u>t.from&&a.delete(t.from+c,u);const f=t.from+c+s.length;a.addMark(t.from+c,f,n.type.create(i||{})),a.removeStoredMark(n.type)}},undoable:n.undoable})}function A$(n){return new tv({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Ht(n.getAttributes,void 0,r)||{},{tr:a}=e,s=t.from;let o=t.to;const c=n.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let d=s+u;d>o?d=o:o=d+r[1].length;const h=r[0][r[0].length-1];a.insertText(h,s+r[0].length-1),a.replaceWith(d,o,c)}else if(r[0]){const u=n.type.isInline?s:s-1;a.insert(u,n.type.create(i)).delete(a.mapping.map(s),a.mapping.map(o))}a.scrollIntoView()},undoable:n.undoable})}function xE(n){return new tv({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),a=Ht(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,a)},undoable:n.undoable})}function _u(n){return new tv({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const a=Ht(n.getAttributes,void 0,r)||{},s=e.tr.delete(t.from,t.to),c=s.doc.resolve(t.from).blockRange(),u=c&&ej(c,n.type,a);if(!u)return null;if(s.wrap(c,u),n.keepMarks&&n.editor){const{selection:h,storedMarks:f}=e,{splittableMarks:p}=n.editor.extensionManager,y=f||h.$to.parentOffset&&h.$from.marks();if(y){const g=y.filter(m=>p.includes(m.type.name));s.ensureMarks(g)}}if(n.keepAttributes){const h=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,a).run()}const d=s.doc.resolve(t.from-1).nodeBefore;d&&d.type===n.type&&Eo(s.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,d))&&s.join(t.from-1)},undoable:n.undoable})}var _xe=n=>"touches"in n,Dxe=class{constructor(n){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=o=>{if(!this.isResizing||!this.activeHandle)return;const c=o.clientX-this.startX,u=o.clientY-this.startY;this.handleResize(c,u)},this.handleTouchMove=o=>{if(!this.isResizing||!this.activeHandle)return;const c=o.touches[0];if(!c)return;const u=c.clientX-this.startX,d=c.clientY-this.startY;this.handleResize(u,d)},this.handleMouseUp=()=>{if(!this.isResizing)return;const o=this.element.offsetWidth,c=this.element.offsetHeight;this.onCommit(o,c),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=o=>{o.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=o=>{o.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,t,r,i,a,s;this.node=n.node,this.editor=n.editor,this.element=n.element,this.contentElement=n.contentElement,this.getPos=n.getPos,this.onResize=n.onResize,this.onCommit=n.onCommit,this.onUpdate=n.onUpdate,(e=n.options)!=null&&e.min&&(this.minSize={...this.minSize,...n.options.min}),(t=n.options)!=null&&t.max&&(this.maxSize=n.options.max),(r=n?.options)!=null&&r.directions&&(this.directions=n.options.directions),(i=n.options)!=null&&i.preserveAspectRatio&&(this.preserveAspectRatio=n.options.preserveAspectRatio),(a=n.options)!=null&&a.className&&(this.classNames={container:n.options.className.container||"",wrapper:n.options.className.wrapper||"",handle:n.options.className.handle||"",resizing:n.options.className.resizing||""}),(s=n.options)!=null&&s.createCustomHandle&&(this.createCustomHandle=n.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const n=this.editor.isEditable;n!==this.lastEditableState&&(this.lastEditableState=n,n?n&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(n,e,t){return n.type!==this.node.type?!1:(this.node=n,this.onUpdate?this.onUpdate(n,e,t):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const n=document.createElement("div");return n.dataset.resizeContainer="",n.dataset.node=this.node.type.name,n.style.display="flex",this.classNames.container&&(n.className=this.classNames.container),n.appendChild(this.wrapper),n}createWrapper(){const n=document.createElement("div");return n.style.position="relative",n.style.display="block",n.dataset.resizeWrapper="",this.classNames.wrapper&&(n.className=this.classNames.wrapper),n.appendChild(this.element),n}createHandle(n){const e=document.createElement("div");return e.dataset.resizeHandle=n,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(n,e){const t=e.includes("top"),r=e.includes("bottom"),i=e.includes("left"),a=e.includes("right");t&&(n.style.top="0"),r&&(n.style.bottom="0"),i&&(n.style.left="0"),a&&(n.style.right="0"),(e==="top"||e==="bottom")&&(n.style.left="0",n.style.right="0"),(e==="left"||e==="right")&&(n.style.top="0",n.style.bottom="0")}attachHandles(){this.directions.forEach(n=>{let e;this.createCustomHandle?e=this.createCustomHandle(n):e=this.createHandle(n),e instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${n}") did not return an HTMLElement. Falling back to default handle.`),e=this.createHandle(n)),this.createCustomHandle||this.positionHandle(e,n),e.addEventListener("mousedown",t=>this.handleResizeStart(t,n)),e.addEventListener("touchstart",t=>this.handleResizeStart(t,n)),this.handleMap.set(n,e),this.wrapper.appendChild(e)})}removeHandles(){this.handleMap.forEach(n=>n.remove()),this.handleMap.clear()}applyInitialSize(){const n=this.node.attrs.width,e=this.node.attrs.height;n?(this.element.style.width=`${n}px`,this.initialWidth=n):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(n,e){n.preventDefault(),n.stopPropagation(),this.isResizing=!0,this.activeHandle=e,_xe(n)?(this.startX=n.touches[0].clientX,this.startY=n.touches[0].clientY):(this.startX=n.clientX,this.startY=n.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(n,e){if(!this.activeHandle)return;const t=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:i}=this.calculateNewDimensions(this.activeHandle,n,e),a=this.applyConstraints(r,i,t);this.element.style.width=`${a.width}px`,this.element.style.height=`${a.height}px`,this.onResize&&this.onResize(a.width,a.height)}calculateNewDimensions(n,e,t){let r=this.startWidth,i=this.startHeight;const a=n.includes("right"),s=n.includes("left"),o=n.includes("bottom"),c=n.includes("top");return a?r=this.startWidth+e:s&&(r=this.startWidth-e),o?i=this.startHeight+t:c&&(i=this.startHeight-t),(n==="right"||n==="left")&&(r=this.startWidth+(a?e:-e)),(n==="top"||n==="bottom")&&(i=this.startHeight+(o?t:-t)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,i,n):{width:r,height:i}}applyConstraints(n,e,t){var r,i,a,s;if(!t){let u=Math.max(this.minSize.width,n),d=Math.max(this.minSize.height,e);return(r=this.maxSize)!=null&&r.width&&(u=Math.min(this.maxSize.width,u)),(i=this.maxSize)!=null&&i.height&&(d=Math.min(this.maxSize.height,d)),{width:u,height:d}}let o=n,c=e;return o<this.minSize.width&&(o=this.minSize.width,c=o/this.aspectRatio),c<this.minSize.height&&(c=this.minSize.height,o=c*this.aspectRatio),(a=this.maxSize)!=null&&a.width&&o>this.maxSize.width&&(o=this.maxSize.width,c=o/this.aspectRatio),(s=this.maxSize)!=null&&s.height&&c>this.maxSize.height&&(c=this.maxSize.height,o=c*this.aspectRatio),{width:o,height:c}}applyAspectRatio(n,e,t){const r=t==="left"||t==="right",i=t==="top"||t==="bottom";return r?{width:n,height:n/this.aspectRatio}:i?{width:e*this.aspectRatio,height:e}:{width:n,height:n/this.aspectRatio}}};function jxe(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof ct){const a=r.index();return r.parent.canReplaceWith(a,a+1,e)}let i=r.depth;for(;i>=0;){const a=r.index(i);if(r.node(i).contentMatchAt(a).matchType(e))return!0;i-=1}return!1}var Txe={};gj(Txe,{createAtomBlockMarkdownSpec:()=>Cxe,createBlockMarkdownSpec:()=>Nxe,createInlineMarkdownSpec:()=>Pxe,parseAttributes:()=>Sj,parseIndentedBlocks:()=>bE,renderNestedMarkdownContent:()=>_j,serializeAttributes:()=>Ej});function Sj(n){if(!n?.trim())return{};const e={},t=[],r=n.replace(/["']([^"']*)["']/g,u=>(t.push(u),`__QUOTED_${t.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(d=>d.trim().slice(1));e.class=u.join(" ")}const a=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);a&&(e.id=a[1]);const s=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(s)).forEach(([,u,d])=>{var h;const f=parseInt(((h=d.match(/__QUOTED_(\d+)__/))==null?void 0:h[1])||"0",10),p=t[f];p&&(e[u]=p.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function Ej(n){if(!n||Object.keys(n).length===0)return"";const e=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),n.id&&e.push(`#${n.id}`),Object.entries(n).forEach(([t,r])=>{t==="class"||t==="id"||(r===!0?e.push(t):r!==!1&&r!=null&&e.push(`${t}="${String(r)}"`))}),e.join(" ")}function Cxe(n){const{nodeName:e,name:t,parseAttributes:r=Sj,serializeAttributes:i=Ej,defaultAttributes:a={},requiredAttributes:s=[],allowedAttributes:o}=n,c=t||e,u=d=>{if(!o)return d;const h={};return o.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{const f={...a,...d.attributes};return h.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${c}(?:\\s|$)`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){const p=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),y=d.match(p);if(!y)return;const g=y[1]||"",m=r(g);if(!s.find(x=>!(x in m)))return{type:e,raw:y[0],attributes:m}}},renderMarkdown:d=>{const h=u(d.attrs||{}),f=i(h),p=f?` {${f}}`:"";return`:::${c}${p} :::`}}}function Nxe(n){const{nodeName:e,name:t,getContent:r,parseAttributes:i=Sj,serializeAttributes:a=Ej,defaultAttributes:s={},content:o="block",allowedAttributes:c}=n,u=t||e,d=h=>{if(!c)return h;const f={};return c.forEach(p=>{p in h&&(f[p]=h[p])}),f};return{parseMarkdown:(h,f)=>{let p;if(r){const g=r(h);p=typeof g=="string"?[{type:"text",text:g}]:g}else o==="block"?p=f.parseChildren(h.tokens||[]):p=f.parseInline(h.tokens||[]);const y={...s,...h.attributes};return f.createNode(e,y,p)},markdownTokenizer:{name:e,level:"block",start(h){var f;const p=new RegExp(`^:::${u}`,"m"),y=(f=h.match(p))==null?void 0:f.index;return y!==void 0?y:-1},tokenize(h,f,p){var y;const g=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),m=h.match(g);if(!m)return;const[v,x=""]=m,b=i(x);let A=1;const w=v.length;let S="";const E=/^:::([\w-]*)(\s.*)?/gm,_=h.slice(w);for(E.lastIndex=0;;){const D=E.exec(_);if(D===null)break;const C=D.index,k=D[1];if(!((y=D[2])!=null&&y.endsWith(":::"))){if(k)A+=1;else if(A-=1,A===0){const T=_.slice(0,C);S=T.trim();const N=h.slice(0,w+C+D[0].length);let j=[];if(S)if(o==="block")for(j=p.blockTokens(T),j.forEach(R=>{R.text&&(!R.tokens||R.tokens.length===0)&&(R.tokens=p.inlineTokens(R.text))});j.length>0;){const R=j[j.length-1];if(R.type==="paragraph"&&(!R.text||R.text.trim()===""))j.pop();else break}else j=p.inlineTokens(S);return{type:e,raw:N,attributes:b,content:S,tokens:j}}}}}},renderMarkdown:(h,f)=>{const p=d(h.attrs||{}),y=a(p),g=y?` {${y}}`:"",m=f.renderChildren(h.content||[],`

`);return`:::${u}${g}

${m}

:::`}}}function kxe(n){if(!n.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=t.exec(n);for(;r!==null;){const[,i,a,s]=r;e[i]=a||s,r=t.exec(n)}return e}function Oxe(n){return Object.entries(n).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function Pxe(n){const{nodeName:e,name:t,getContent:r,parseAttributes:i=kxe,serializeAttributes:a=Oxe,defaultAttributes:s={},selfClosing:o=!1,allowedAttributes:c}=n,u=t||e,d=f=>{if(!c)return f;const p={};return c.forEach(y=>{const g=typeof y=="string"?y:y.name,m=typeof y=="string"?void 0:y.skipIfDefault;if(g in f){const v=f[g];if(m!==void 0&&v===m)return;p[g]=v}}),p},h=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const y={...s,...f.attributes};if(o)return p.createNode(e,y);const g=r?r(f):f.content||"";return g?p.createNode(e,y,[p.createTextNode(g)]):p.createNode(e,y,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=o?new RegExp(`\\[${h}\\s*[^\\]]*\\]`):new RegExp(`\\[${h}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${h}\\]`),y=f.match(p),g=y?.index;return g!==void 0?g:-1},tokenize(f,p,y){const g=o?new RegExp(`^\\[${h}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${h}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${h}\\]`),m=f.match(g);if(!m)return;let v="",x="";if(o){const[,A]=m;x=A}else{const[,A,w]=m;x=A,v=w||""}const b=i(x.trim());return{type:e,raw:m[0],content:v.trim(),attributes:b}}},renderMarkdown:f=>{let p="";r?p=r(f):f.content&&f.content.length>0&&(p=f.content.filter(v=>v.type==="text").map(v=>v.text).join(""));const y=d(f.attrs||{}),g=a(y),m=g?` ${g}`:"";return o?`[${u}${m}]`:`[${u}${m}]${p}[/${u}]`}}}function bE(n,e,t){var r,i,a,s;const o=n.split(`
`),c=[];let u="",d=0;const h=e.baseIndentSize||2;for(;d<o.length;){const f=o[d],p=f.match(e.itemPattern);if(!p){if(c.length>0)break;if(f.trim()===""){d+=1,u=`${u}${f}
`;continue}else return}const y=e.extractItemData(p),{indentLevel:g,mainContent:m}=y;u=`${u}${f}
`;const v=[m];for(d+=1;d<o.length;){const w=o[d];if(w.trim()===""){const E=o.slice(d+1).findIndex(C=>C.trim()!=="");if(E===-1)break;if((((i=(r=o[d+1+E].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>g){v.push(w),u=`${u}${w}
`,d+=1;continue}else break}if((((s=(a=w.match(/^(\s*)/))==null?void 0:a[1])==null?void 0:s.length)||0)>g)v.push(w),u=`${u}${w}
`,d+=1;else break}let x;const b=v.slice(1);if(b.length>0){const w=b.map(S=>S.slice(g+h)).join(`
`);w.trim()&&(e.customNestedParser?x=e.customNestedParser(w):x=t.blockTokens(w))}const A=e.createToken(y,x);c.push(A)}if(c.length!==0)return{items:c,raw:u}}function _j(n,e,t,r){if(!n||!Array.isArray(n.content))return"";const i=typeof t=="function"?t(r):t,[a,...s]=n.content,o=e.renderChildren([a]),c=[`${i}${o}`];return s&&s.length>0&&s.forEach(u=>{const d=e.renderChildren([u]);if(d){const h=d.split(`
`).map(f=>f?e.indent(f):"").join(`
`);c.push(h)}}),c.join(`
`)}function Ixe(n,e,t={}){const{state:r}=e,{doc:i,tr:a}=r,s=n;i.descendants((o,c)=>{const u=a.mapping.map(c),d=a.mapping.map(c)+o.nodeSize;let h=null;if(o.marks.forEach(p=>{if(p!==s)return!1;h=p}),!h)return;let f=!1;if(Object.keys(t).forEach(p=>{t[p]!==h.attrs[p]&&(f=!0)}),f){const p=n.type.create({...n.attrs,...t});a.removeMark(u,d,n.type),a.addMark(u,d,p)}}),a.docChanged&&e.view.dispatch(a)}var si=class S$ extends Aj{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new S$(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function Dl(n){return new mxe({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const a=Ht(n.getAttributes,void 0,r,i);if(a===!1||a===null)return null;const{tr:s}=e,o=r[r.length-1],c=r[0];let u=t.to;if(o){const d=c.search(/\S/),h=t.from+c.indexOf(o),f=h+o.length;if(wj(t.from,t.to,e.doc).filter(y=>y.mark.type.excluded.find(m=>m===n.type&&m!==y.mark.type)).filter(y=>y.to>h).length)return null;f<t.to&&s.delete(f,t.to),h>t.from&&s.delete(t.from+d,h),u=t.from+d+o.length,s.addMark(t.from+d,u,n.type.create(a||{})),s.removeStoredMark(n.type)}}})}var rA={exports:{}},iA={};var EI;function Rxe(){if(EI)return iA;EI=1;var n=by(),e=pU();function t(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,o=n.useMemo,c=n.useDebugValue;return iA.useSyncExternalStoreWithSelector=function(u,d,h,f,p){var y=a(null);if(y.current===null){var g={hasValue:!1,value:null};y.current=g}else g=y.current;y=o(function(){function v(S){if(!x){if(x=!0,b=S,S=f(S),p!==void 0&&g.hasValue){var E=g.value;if(p(E,S))return A=E}return A=S}if(E=A,r(b,S))return E;var _=f(S);return p!==void 0&&p(E,_)?(b=S,E):(b=S,A=_)}var x=!1,b,A,w=h===void 0?null:h;return[function(){return v(d())},w===null?void 0:function(){return v(w())}]},[d,h,f,p]);var m=i(u,y[0],y[1]);return s(function(){g.hasValue=!0,g.value=m},[m]),c(m),m},iA}var _I;function Mxe(){return _I||(_I=1,rA.exports=Rxe()),rA.exports}var Fxe=Mxe(),Lxe=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},Uxe=({contentComponent:n})=>{const e=mU.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return l.jsx(l.Fragment,{children:Object.values(e)})};function Bxe(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:rz.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}var $xe=class extends fe.Component{constructor(n){var e;super(n),this.editorContentRef=fe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var n;const e=this.props.editor;if(e&&!e.isDestroyed&&((n=e.view.dom)!=null&&n.parentNode)){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t}),e.contentComponent=Bxe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((n=e.view.dom)!=null&&n.parentNode))return;const t=document.createElement("div");t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t})}catch{}}}render(){const{editor:n,innerRef:e,...t}=this.props;return l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:Lxe(e,this.editorContentRef),...t}),n?.contentComponent&&l.jsx(Uxe,{contentComponent:n.contentComponent})]})}},zxe=M.forwardRef((n,e)=>{const t=fe.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return fe.createElement($xe,{key:t,innerRef:e,...n})}),DI=fe.memo(zxe),qxe=typeof window<"u"?M.useLayoutEffect:M.useEffect,Wxe=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function Hxe(n){var e;const[t]=M.useState(()=>new Wxe(n.editor)),r=Fxe.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:zF);return qxe(()=>t.watch(n.editor),[n.editor,t]),M.useDebugValue(r),r}var Vxe=!1,wE=typeof window>"u",Gxe=wE||!!(typeof window<"u"&&window.next),Yxe=class E${constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?wE||Gxe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,a;return(a=(i=this.options.current).onBeforeCreate)==null?void 0:a.call(i,...r)},onBlur:(...r)=>{var i,a;return(a=(i=this.options.current).onBlur)==null?void 0:a.call(i,...r)},onCreate:(...r)=>{var i,a;return(a=(i=this.options.current).onCreate)==null?void 0:a.call(i,...r)},onDestroy:(...r)=>{var i,a;return(a=(i=this.options.current).onDestroy)==null?void 0:a.call(i,...r)},onFocus:(...r)=>{var i,a;return(a=(i=this.options.current).onFocus)==null?void 0:a.call(i,...r)},onSelectionUpdate:(...r)=>{var i,a;return(a=(i=this.options.current).onSelectionUpdate)==null?void 0:a.call(i,...r)},onTransaction:(...r)=>{var i,a;return(a=(i=this.options.current).onTransaction)==null?void 0:a.call(i,...r)},onUpdate:(...r)=>{var i,a;return(a=(i=this.options.current).onUpdate)==null?void 0:a.call(i,...r)},onContentError:(...r)=>{var i,a;return(a=(i=this.options.current).onContentError)==null?void 0:a.call(i,...r)},onDrop:(...r)=>{var i,a;return(a=(i=this.options.current).onDrop)==null?void 0:a.call(i,...r)},onPaste:(...r)=>{var i,a;return(a=(i=this.options.current).onPaste)==null?void 0:a.call(i,...r)},onDelete:(...r)=>{var i,a;return(a=(i=this.options.current).onDelete)==null?void 0:a.call(i,...r)}};return new Exe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,a)=>{var s;return i===((s=t.extensions)==null?void 0:s[a])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?E$.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function jI(n={},e=[]){const t=M.useRef(n);t.current=n;const[r]=M.useState(()=>new Yxe(t)),i=mU.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return M.useDebugValue(i),M.useEffect(r.onRender(e)),Hxe({editor:i,selector:({transactionNumber:a})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&a===0?0:a+1}),i}var Kxe=M.createContext({editor:null});Kxe.Consumer;var Xxe=M.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Jxe=()=>M.useContext(Xxe);fe.forwardRef((n,e)=>{const{onDragStart:t}=Jxe(),r=n.as||"div";return l.jsx(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});fe.createContext({markViewContentRef:()=>{}});var Wg=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...r}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,r,t]},Zxe=/^\s*>\s$/,Qxe=si.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return Wg("blockquote",{...Tn(this.options.HTMLAttributes,n),children:Wg("slot",{})})},parseMarkdown:(n,e)=>e.createNode("blockquote",void 0,e.parseChildren(n.tokens||[])),renderMarkdown:(n,e)=>{if(!n.content)return"";const t=">",r=[];return n.content.forEach(i=>{const o=e.renderChildren([i]).split(`
`).map(c=>c.trim()===""?t:`${t} ${c}`);r.push(o.join(`
`))}),r.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[_u({find:Zxe,type:this.type})]}}),ebe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,tbe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,nbe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,rbe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,ibe=Do.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return Wg("strong",{...Tn(this.options.HTMLAttributes,n),children:Wg("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,e)=>e.applyMark("bold",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`**${e.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Eu({find:ebe,type:this.type}),Eu({find:nbe,type:this.type})]},addPasteRules(){return[Dl({find:tbe,type:this.type}),Dl({find:rbe,type:this.type})]}}),abe=/(^|[^`])`([^`]+)`(?!`)$/,sbe=/(^|[^`])`([^`]+)`(?!`)/g,obe=Do.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Tn(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,e)=>e.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,e)=>n.content?`\`${e.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Eu({find:abe,type:this.type})]},addPasteRules(){return[Dl({find:sbe,type:this.type})]}}),aA=4,lbe=/^```([a-z]+)?[\s\n]$/,cbe=/^~~~([a-z]+)?[\s\n]$/,ube=si.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:aA,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const a=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(s=>s.startsWith(t)).map(s=>s.replace(t,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Tn(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(n,e)=>{var t;return((t=n.raw)==null?void 0:t.startsWith("```"))===!1&&n.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:n.lang||null},n.text?[e.createTextNode(n.text)]:[])},renderMarkdown:(n,e)=>{var t;let r="";const i=((t=n.attrs)==null?void 0:t.language)||"";return n.content?r=[`\`\`\`${i}`,e.renderChildren(n.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:aA,{state:r}=n,{selection:i}=r,{$from:a,empty:s}=i;if(a.parent.type!==this.type)return!1;const o=" ".repeat(t);return s?n.commands.insertContent(o):n.commands.command(({tr:c})=>{const{from:u,to:d}=i,p=r.doc.textBetween(u,d,`
`,`
`).split(`
`).map(y=>o+y).join(`
`);return c.replaceWith(u,d,r.schema.text(p)),!0})},"Shift-Tab":({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:aA,{state:r}=n,{selection:i}=r,{$from:a,empty:s}=i;return a.parent.type!==this.type?!1:s?n.commands.command(({tr:o})=>{var c;const{pos:u}=a,d=a.start(),h=a.end(),p=r.doc.textBetween(d,h,`
`,`
`).split(`
`);let y=0,g=0;const m=u-d;for(let S=0;S<p.length;S+=1){if(g+p[S].length>=m){y=S;break}g+=p[S].length+1}const x=((c=p[y].match(/^ */))==null?void 0:c[0])||"",b=Math.min(x.length,t);if(b===0)return!0;let A=d;for(let S=0;S<y;S+=1)A+=p[S].length+1;return o.delete(A,A+b),u-A<=b&&o.setSelection(mt.create(o.doc,A)),!0}):n.commands.command(({tr:o})=>{const{from:c,to:u}=i,f=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(p=>{var y;const g=((y=p.match(/^ */))==null?void 0:y[0])||"",m=Math.min(g.length,t);return p.slice(m)}).join(`
`);return o.replaceWith(c,u,r.schema.text(f)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!a||!s?!1:n.chain().command(({tr:o})=>(o.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:a}=t;if(!a||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const o=i.after();return o===void 0?!1:r.nodeAt(o)?n.commands.command(({tr:u})=>(u.setSelection(Et.near(r.resolve(o))),!0)):n.commands.exitCode()}}},addInputRules(){return[xE({find:lbe,type:this.type,getAttributes:n=>({language:n[1]})}),xE({find:cbe,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new bn({key:new Zn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,a=i?.mode;if(!t||!a)return!1;const{tr:s,schema:o}=n.state,c=o.text(t.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:a},c)),s.selection.$from.parent.type!==this.type&&s.setSelection(mt.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),n.dispatch(s),!0}}})]}}),dbe=si.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`

`):""}),hbe=si.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Tn(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:a}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:o}=r.extensionManager,c=a||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&c&&s){const h=c.filter(f=>o.includes(f.type.name));u.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),fbe=si.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Tn(this.options.HTMLAttributes,e),0]},parseMarkdown:(n,e)=>e.createNode("heading",{level:n.depth||1},e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>{var t;const r=(t=n.attrs)!=null&&t.level?parseInt(n.attrs.level,10):1,i="#".repeat(r);return n.content?`${i} ${e.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>xE({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),pbe=si.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Tn(this.options.HTMLAttributes,n)]},markdownTokenName:"hr",parseMarkdown:(n,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!jxe(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:r}=t,i=n();return a$(t)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:a,tr:s,dispatch:o})=>{if(o){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(mt.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(ct.create(s.doc,c.pos)):s.setSelection(mt.create(s.doc,c.pos));else{const d=a.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,h=d?.create();h&&(s.insert(u,h),s.setSelection(mt.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[A$({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),mbe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,gbe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ybe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,vbe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,xbe=Do.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Tn(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,e)=>e.applyMark("italic",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`*${e.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Eu({find:mbe,type:this.type}),Eu({find:ybe,type:this.type})]},addPasteRules(){return[Dl({find:gbe,type:this.type}),Dl({find:vbe,type:this.type})]}});const bbe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",wbe="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",AE="numeric",SE="ascii",EE="alpha",Zd="asciinumeric",Bd="alphanumeric",_E="domain",_$="emoji",Abe="scheme",Sbe="slashscheme",sA="whitespace";function Ebe(n,e){return n in e||(e[n]=[]),e[n]}function Zo(n,e,t){e[AE]&&(e[Zd]=!0,e[Bd]=!0),e[SE]&&(e[Zd]=!0,e[EE]=!0),e[Zd]&&(e[Bd]=!0),e[EE]&&(e[Bd]=!0),e[Bd]&&(e[_E]=!0),e[_$]&&(e[_E]=!0);for(const r in e){const i=Ebe(r,t);i.indexOf(n)<0&&i.push(n)}}function _be(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function Kr(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}Kr.groups={};Kr.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],a=e.jr[r][1];if(a&&i.test(n))return a}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||Kr.groups;let i;return e&&e.j?i=e:(i=new Kr(e),t&&r&&Zo(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const a=n.length;if(!a)return i;for(let s=0;s<a-1;s++)i=i.tt(n[s]);return i.tt(n[a-1],e,t,r)},tt(n,e,t,r){r=r||Kr.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const a=e;let s,o=i.go(n);if(o?(s=new Kr,Object.assign(s.j,o.j),s.jr.push.apply(s.jr,o.jr),s.jd=o.jd,s.t=o.t):s=new Kr,a){if(r)if(s.t&&typeof s.t=="string"){const c=Object.assign(_be(s.t,r),t);Zo(a,c,r)}else t&&Zo(a,t,r);s.t=a}return i.j[n]=s,s}};const St=(n,e,t,r,i)=>n.ta(e,t,r,i),An=(n,e,t,r,i)=>n.tr(e,t,r,i),TI=(n,e,t,r,i)=>n.ts(e,t,r,i),Me=(n,e,t,r,i)=>n.tt(e,t,r,i),ts="WORD",DE="UWORD",D$="ASCIINUMERICAL",j$="ALPHANUMERICAL",hf="LOCALHOST",jE="TLD",TE="UTLD",pm="SCHEME",oc="SLASH_SCHEME",Dj="NUM",CE="WS",jj="NL",Qd="OPENBRACE",eh="CLOSEBRACE",Hg="OPENBRACKET",Vg="CLOSEBRACKET",Gg="OPENPAREN",Yg="CLOSEPAREN",Kg="OPENANGLEBRACKET",Xg="CLOSEANGLEBRACKET",Jg="FULLWIDTHLEFTPAREN",Zg="FULLWIDTHRIGHTPAREN",Qg="LEFTCORNERBRACKET",ey="RIGHTCORNERBRACKET",ty="LEFTWHITECORNERBRACKET",ny="RIGHTWHITECORNERBRACKET",ry="FULLWIDTHLESSTHAN",iy="FULLWIDTHGREATERTHAN",ay="AMPERSAND",sy="APOSTROPHE",oy="ASTERISK",Ls="AT",ly="BACKSLASH",cy="BACKTICK",uy="CARET",qs="COLON",Tj="COMMA",dy="DOLLAR",Aa="DOT",hy="EQUALS",Cj="EXCLAMATION",Pi="HYPHEN",th="PERCENT",fy="PIPE",py="PLUS",my="POUND",nh="QUERY",Nj="QUOTE",T$="FULLWIDTHMIDDLEDOT",kj="SEMI",Sa="SLASH",rh="TILDE",gy="UNDERSCORE",C$="EMOJI",yy="SYM";var N$=Object.freeze({__proto__:null,ALPHANUMERICAL:j$,AMPERSAND:ay,APOSTROPHE:sy,ASCIINUMERICAL:D$,ASTERISK:oy,AT:Ls,BACKSLASH:ly,BACKTICK:cy,CARET:uy,CLOSEANGLEBRACKET:Xg,CLOSEBRACE:eh,CLOSEBRACKET:Vg,CLOSEPAREN:Yg,COLON:qs,COMMA:Tj,DOLLAR:dy,DOT:Aa,EMOJI:C$,EQUALS:hy,EXCLAMATION:Cj,FULLWIDTHGREATERTHAN:iy,FULLWIDTHLEFTPAREN:Jg,FULLWIDTHLESSTHAN:ry,FULLWIDTHMIDDLEDOT:T$,FULLWIDTHRIGHTPAREN:Zg,HYPHEN:Pi,LEFTCORNERBRACKET:Qg,LEFTWHITECORNERBRACKET:ty,LOCALHOST:hf,NL:jj,NUM:Dj,OPENANGLEBRACKET:Kg,OPENBRACE:Qd,OPENBRACKET:Hg,OPENPAREN:Gg,PERCENT:th,PIPE:fy,PLUS:py,POUND:my,QUERY:nh,QUOTE:Nj,RIGHTCORNERBRACKET:ey,RIGHTWHITECORNERBRACKET:ny,SCHEME:pm,SEMI:kj,SLASH:Sa,SLASH_SCHEME:oc,SYM:yy,TILDE:rh,TLD:jE,UNDERSCORE:gy,UTLD:TE,UWORD:DE,WORD:ts,WS:CE});const Za=/[a-z]/,Dd=new RegExp("\\p{L}","u"),oA=new RegExp("\\p{Emoji}","u"),Qa=/\d/,lA=/\s/,CI="\r",cA=`
`,Dbe="️",jbe="‍",uA="￼";let kp=null,Op=null;function Tbe(n=[]){const e={};Kr.groups=e;const t=new Kr;kp==null&&(kp=NI(bbe)),Op==null&&(Op=NI(wbe)),Me(t,"'",sy),Me(t,"{",Qd),Me(t,"}",eh),Me(t,"[",Hg),Me(t,"]",Vg),Me(t,"(",Gg),Me(t,")",Yg),Me(t,"<",Kg),Me(t,">",Xg),Me(t,"（",Jg),Me(t,"）",Zg),Me(t,"「",Qg),Me(t,"」",ey),Me(t,"『",ty),Me(t,"』",ny),Me(t,"＜",ry),Me(t,"＞",iy),Me(t,"&",ay),Me(t,"*",oy),Me(t,"@",Ls),Me(t,"`",cy),Me(t,"^",uy),Me(t,":",qs),Me(t,",",Tj),Me(t,"$",dy),Me(t,".",Aa),Me(t,"=",hy),Me(t,"!",Cj),Me(t,"-",Pi),Me(t,"%",th),Me(t,"|",fy),Me(t,"+",py),Me(t,"#",my),Me(t,"?",nh),Me(t,'"',Nj),Me(t,"/",Sa),Me(t,";",kj),Me(t,"~",rh),Me(t,"_",gy),Me(t,"\\",ly),Me(t,"・",T$);const r=An(t,Qa,Dj,{[AE]:!0});An(r,Qa,r);const i=An(r,Za,D$,{[Zd]:!0}),a=An(r,Dd,j$,{[Bd]:!0}),s=An(t,Za,ts,{[SE]:!0});An(s,Qa,i),An(s,Za,s),An(i,Qa,i),An(i,Za,i);const o=An(t,Dd,DE,{[EE]:!0});An(o,Za),An(o,Qa,a),An(o,Dd,o),An(a,Qa,a),An(a,Za),An(a,Dd,a);const c=Me(t,cA,jj,{[sA]:!0}),u=Me(t,CI,CE,{[sA]:!0}),d=An(t,lA,CE,{[sA]:!0});Me(t,uA,d),Me(u,cA,c),Me(u,uA,d),An(u,lA,d),Me(d,CI),Me(d,cA),An(d,lA,d),Me(d,uA,d);const h=An(t,oA,C$,{[_$]:!0});Me(h,"#"),An(h,oA,h),Me(h,Dbe,h);const f=Me(h,jbe);Me(f,"#"),An(f,oA,h);const p=[[Za,s],[Qa,i]],y=[[Za,null],[Dd,o],[Qa,a]];for(let g=0;g<kp.length;g++)Ps(t,kp[g],jE,ts,p);for(let g=0;g<Op.length;g++)Ps(t,Op[g],TE,DE,y);Zo(jE,{tld:!0,ascii:!0},e),Zo(TE,{utld:!0,alpha:!0},e),Ps(t,"file",pm,ts,p),Ps(t,"mailto",pm,ts,p),Ps(t,"http",oc,ts,p),Ps(t,"https",oc,ts,p),Ps(t,"ftp",oc,ts,p),Ps(t,"ftps",oc,ts,p),Zo(pm,{scheme:!0,ascii:!0},e),Zo(oc,{slashscheme:!0,ascii:!0},e),n=n.sort((g,m)=>g[0]>m[0]?1:-1);for(let g=0;g<n.length;g++){const m=n[g][0],x=n[g][1]?{[Abe]:!0}:{[Sbe]:!0};m.indexOf("-")>=0?x[_E]=!0:Za.test(m)?Qa.test(m)?x[Zd]=!0:x[SE]=!0:x[AE]=!0,TI(t,m,m,x)}return TI(t,"localhost",hf,{ascii:!0}),t.jd=new Kr(yy),{start:t,tokens:Object.assign({groups:e},N$)}}function k$(n,e){const t=Cbe(e.replace(/[A-Z]/g,o=>o.toLowerCase())),r=t.length,i=[];let a=0,s=0;for(;s<r;){let o=n,c=null,u=0,d=null,h=-1,f=-1;for(;s<r&&(c=o.go(t[s]));)o=c,o.accepts()?(h=0,f=0,d=o):h>=0&&(h+=t[s].length,f++),u+=t[s].length,a+=t[s].length,s++;a-=h,s-=f,u-=h,i.push({t:d.t,v:e.slice(a-u,a),s:a-u,e:a})}return i}function Cbe(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),a,s=i<55296||i>56319||r+1===t||(a=n.charCodeAt(r+1))<56320||a>57343?n[r]:n.slice(r,r+2);e.push(s),r+=s.length}return e}function Ps(n,e,t,r,i){let a;const s=e.length;for(let o=0;o<s-1;o++){const c=e[o];n.j[c]?a=n.j[c]:(a=new Kr(r),a.jr=i.slice(),n.j[c]=a),n=a}return a=new Kr(t),a.jr=i.slice(),n.j[e[s-1]]=a,a}function NI(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let a=0;for(;i.indexOf(n[r+a])>=0;)a++;if(a>0){e.push(t.join(""));for(let s=parseInt(n.substring(r,r+a),10);s>0;s--)t.pop();r+=a}else t.push(n[r]),r++}return e}const ff={defaultProtocol:"http",events:null,format:kI,formatHref:kI,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Oj(n,e=null){let t=Object.assign({},ff);n&&(t=Object.assign(t,n instanceof Oj?n.o:n));const r=t.ignoreTags,i=[];for(let a=0;a<r.length;a++)i.push(r[a].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}Oj.prototype={o:ff,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:ff[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function kI(n){return n}function O$(n,e){this.t="token",this.v=n,this.tk=e}O$.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"…":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=ff.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),a=this.toFormattedString(n),s={},o=n.get("className",t,e),c=n.get("target",t,e),u=n.get("rel",t,e),d=n.getObj("attributes",t,e),h=n.getObj("events",t,e);return s.href=r,o&&(s.class=o),c&&(s.target=c),u&&(s.rel=u),d&&Object.assign(s,d),{tagName:i,attributes:s,content:a,eventListeners:h}}};function rv(n,e){class t extends O${constructor(i,a){super(i,a),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const OI=rv("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),PI=rv("text"),Nbe=rv("nl"),Pp=rv("url",{isLink:!0,toHref(n=ff.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==hf&&n[1].t===qs}}),Oi=n=>new Kr(n);function kbe({groups:n}){const e=n.domain.concat([ay,oy,Ls,ly,cy,uy,dy,hy,Pi,Dj,th,fy,py,my,Sa,yy,rh,gy]),t=[sy,qs,Tj,Aa,Cj,th,nh,Nj,kj,Kg,Xg,Qd,eh,Vg,Hg,Gg,Yg,Jg,Zg,Qg,ey,ty,ny,ry,iy],r=[ay,sy,oy,ly,cy,uy,dy,hy,Pi,Qd,eh,th,fy,py,my,nh,Sa,yy,rh,gy],i=Oi(),a=Me(i,rh);St(a,r,a),St(a,n.domain,a);const s=Oi(),o=Oi(),c=Oi();St(i,n.domain,s),St(i,n.scheme,o),St(i,n.slashscheme,c),St(s,r,a),St(s,n.domain,s);const u=Me(s,Ls);Me(a,Ls,u),Me(o,Ls,u),Me(c,Ls,u);const d=Me(a,Aa);St(d,r,a),St(d,n.domain,a);const h=Oi();St(u,n.domain,h),St(h,n.domain,h);const f=Me(h,Aa);St(f,n.domain,h);const p=Oi(OI);St(f,n.tld,p),St(f,n.utld,p),Me(u,hf,p);const y=Me(h,Pi);Me(y,Pi,y),St(y,n.domain,h),St(p,n.domain,h),Me(p,Aa,f),Me(p,Pi,y);const g=Me(p,qs);St(g,n.numeric,OI);const m=Me(s,Pi),v=Me(s,Aa);Me(m,Pi,m),St(m,n.domain,s),St(v,r,a),St(v,n.domain,s);const x=Oi(Pp);St(v,n.tld,x),St(v,n.utld,x),St(x,n.domain,s),St(x,r,a),Me(x,Aa,v),Me(x,Pi,m),Me(x,Ls,u);const b=Me(x,qs),A=Oi(Pp);St(b,n.numeric,A);const w=Oi(Pp),S=Oi();St(w,e,w),St(w,t,S),St(S,e,w),St(S,t,S),Me(x,Sa,w),Me(A,Sa,w);const E=Me(o,qs),_=Me(c,qs),D=Me(_,Sa),C=Me(D,Sa);St(o,n.domain,s),Me(o,Aa,v),Me(o,Pi,m),St(c,n.domain,s),Me(c,Aa,v),Me(c,Pi,m),St(E,n.domain,w),Me(E,Sa,w),Me(E,nh,w),St(C,n.domain,w),St(C,e,w),Me(C,Sa,w);const k=[[Qd,eh],[Hg,Vg],[Gg,Yg],[Kg,Xg],[Jg,Zg],[Qg,ey],[ty,ny],[ry,iy]];for(let T=0;T<k.length;T++){const[N,j]=k[T],R=Me(w,N);Me(S,N,R),Me(R,j,w);const P=Oi(Pp);St(R,e,P);const F=Oi();St(R,t),St(P,e,P),St(P,t,F),St(F,e,P),St(F,t,F),Me(P,j,w),Me(F,j,w)}return Me(i,hf,x),Me(i,jj,Nbe),{start:i,tokens:N$}}function Obe(n,e,t){let r=t.length,i=0,a=[],s=[];for(;i<r;){let o=n,c=null,u=null,d=0,h=null,f=-1;for(;i<r&&!(c=o.go(t[i].t));)s.push(t[i++]);for(;i<r&&(u=c||o.go(t[i].t));)c=null,o=u,o.accepts()?(f=0,h=o):f>=0&&f++,i++,d++;if(f<0)i-=d,i<r&&(s.push(t[i]),i++);else{s.length>0&&(a.push(dA(PI,e,s)),s=[]),i-=f,d-=f;const p=h.t,y=t.slice(i-d,i);a.push(dA(p,e,y))}}return s.length>0&&a.push(dA(PI,e,s)),a}function dA(n,e,t){const r=t[0].s,i=t[t.length-1].e,a=e.slice(r,i);return new n(a,t)}const Pbe=typeof console<"u"&&console&&console.warn||(()=>{}),Ibe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",on={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Rbe(){return Kr.groups={},on.scanner=null,on.parser=null,on.tokenQueue=[],on.pluginQueue=[],on.customSchemes=[],on.initialized=!1,on}function II(n,e=!1){if(on.initialized&&Pbe(`linkifyjs: already initialized - will not register custom scheme "${n}" ${Ibe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);on.customSchemes.push([n,e])}function Mbe(){on.scanner=Tbe(on.customSchemes);for(let n=0;n<on.tokenQueue.length;n++)on.tokenQueue[n][1]({scanner:on.scanner});on.parser=kbe(on.scanner.tokens);for(let n=0;n<on.pluginQueue.length;n++)on.pluginQueue[n][1]({scanner:on.scanner,parser:on.parser});return on.initialized=!0,on}function Pj(n){return on.initialized||Mbe(),Obe(on.parser.start,n,k$(on.scanner.start,n))}Pj.scan=k$;function P$(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new Oj(t),i=Pj(n),a=[];for(let s=0;s<i.length;s++){const o=i[s];o.isLink&&(!e||o.t===e)&&r.check(o)&&a.push(o.toFormattedObject(r))}return a}var Ij="[\0-   ᠎ -\u2029 　]",Fbe=new RegExp(Ij),Lbe=new RegExp(`${Ij}$`),Ube=new RegExp(Ij,"g");function Bbe(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function $be(n){return new bn({key:new Zn("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(u=>u.docChanged)&&!t.doc.eq(r.doc),a=e.some(u=>u.getMeta("preventAutolink"));if(!i||a)return;const{tr:s}=r,o=JB(t.doc,[...e]);if(i$(o).forEach(({newRange:u})=>{const d=Dve(r.doc,u,p=>p.isTextblock);let h,f;if(d.length>1)h=d[0],f=r.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(d.length){const p=r.doc.textBetween(u.from,u.to," "," ");if(!Lbe.test(p))return;h=d[0],f=r.doc.textBetween(h.pos,u.to,void 0," ")}if(h&&f){const p=f.split(Fbe).filter(Boolean);if(p.length<=0)return!1;const y=p[p.length-1],g=h.pos+f.lastIndexOf(y);if(!y)return!1;const m=Pj(y).map(v=>v.toObject(n.defaultProtocol));if(!Bbe(m))return!1;m.filter(v=>v.isLink).map(v=>({...v,from:g+v.start+1,to:g+v.end+1})).filter(v=>r.schema.marks.code?!r.doc.rangeHasMark(v.from,v.to,r.schema.marks.code):!0).filter(v=>n.validate(v.value)).filter(v=>n.shouldAutoLink(v.value)).forEach(v=>{wj(v.from,v.to,r.doc).some(x=>x.mark.type===n.type)||s.addMark(v.from,v.to,n.type.create({href:v.href}))})}}),!!s.steps.length)return s}})}function zbe(n){return new bn({key:new Zn("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,a;if(r.button!==0||!e.editable)return!1;let s=!1;if(n.enableClickSelection&&(s=n.editor.commands.extendMarkRange(n.type.name)),n.openOnClick){let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let h=r.target;const f=[];for(;h.nodeName!=="DIV";)f.push(h),h=h.parentNode;o=f.find(p=>p.nodeName==="A")}if(!o)return s;const c=r$(e.state,n.type.name),u=(i=o?.href)!=null?i:c.href,d=(a=o?.target)!=null?a:c.target;o&&u&&(window.open(u,d),s=!0)}return s}}})}function qbe(n){return new bn({key:new Zn("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{shouldAutoLink:i}=n,{state:a}=e,{selection:s}=a,{empty:o}=s;if(o)return!1;let c="";r.content.forEach(d=>{c+=d.textContent});const u=P$(c,{defaultProtocol:n.defaultProtocol}).find(d=>d.isLink&&d.value===c);return!c||!u||i!==void 0&&!i(u.value)?!1:n.editor.commands.setMark(n.type,{href:u.href})}}})}function Mo(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(Ube,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var I$=Do.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){II(n);return}II(n.scheme,n.optionalSlashes)})},onDestroy(){Rbe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Mo(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(n),t=/^[a-z][a-z0-9+.-]*:/i.test(n);if(e||t&&!n.includes("@"))return!0;const i=(n.includes("@")?n.split("@").pop():n).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Mo(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Mo(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Tn(this.options.HTMLAttributes,n),0]:["a",Tn(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,e)=>e.applyMark("link",e.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,e)=>{var t;const r=((t=n.attrs)==null?void 0:t.href)||"";return`[${e.renderChildren(n)}](${r})`},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Mo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:r=>!!Mo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Dl({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=P$(n).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:s=>!!Mo(s,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(a=>{this.options.shouldAutoLink(a.value)&&e.push({text:a.value,data:{href:a.href},index:a.start})})}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push($be({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Mo(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),n.push(zbe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(qbe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),RI=I$,Wbe=Object.defineProperty,Hbe=(n,e)=>{for(var t in e)Wbe(n,t,{get:e[t],enumerable:!0})},Vbe="listItem",MI="textStyle",FI=/^\s*([-+*])\s$/,R$=si.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Tn(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?e.parseChildren(n.items):[]},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Vbe,this.editor.getAttributes(MI)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=_u({find:FI,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=_u({find:FI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(MI),editor:this.editor})),[n]}}),M$=si.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Tn(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,e)=>{if(n.type!=="list_item")return[];let t=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(i=>i.type==="paragraph"))t=e.parseChildren(n.tokens);else{const i=n.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(i.tokens)}],n.tokens.length>1){const s=n.tokens.slice(1),o=e.parseChildren(s);t.push(...o)}}else t=e.parseChildren(n.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(n,e,t)=>_j(n,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Gbe={};Hbe(Gbe,{findListItemPos:()=>Pf,getNextListDepth:()=>Rj,handleBackspace:()=>NE,handleDelete:()=>kE,hasListBefore:()=>F$,hasListItemAfter:()=>Ybe,hasListItemBefore:()=>L$,listItemHasSubList:()=>U$,nextListIsDeeper:()=>B$,nextListIsHigher:()=>$$});var Pf=(n,e)=>{const{$from:t}=e.selection,r=Un(n,e.schema);let i=null,a=t.depth,s=t.pos,o=null;for(;a>0&&o===null;)i=t.node(a),i.type===r?o=a:(a-=1,s-=1);return o===null?null:{$pos:e.doc.resolve(s),depth:o}},Rj=(n,e)=>{const t=Pf(n,e);if(!t)return!1;const[,r]=Mve(e,n,t.$pos.pos+4);return r},F$=(n,e,t)=>{const{$anchor:r}=n.selection,i=Math.max(0,r.pos-2),a=n.doc.resolve(i).node();return!(!a||!t.includes(a.type.name))},L$=(n,e)=>{var t;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((t=i.nodeBefore)==null?void 0:t.type.name)!==n)},U$=(n,e,t)=>{if(!t)return!1;const r=Un(n,e.schema);let i=!1;return t.descendants(a=>{a.type===r&&(i=!0)}),i},NE=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!uo(n.state,e)&&F$(n.state,e,t)){const{$anchor:o}=n.state.selection,c=n.state.doc.resolve(o.before()-1),u=[];c.node().descendants((f,p)=>{f.type.name===e&&u.push({node:f,pos:p})});const d=u.at(-1);if(!d)return!1;const h=n.state.doc.resolve(c.start()+d.pos+1);return n.chain().cut({from:o.start()-1,to:o.end()+1},h.end()).joinForward().run()}if(!uo(n.state,e)||!Bve(n.state))return!1;const r=Pf(e,n.state);if(!r)return!1;const a=n.state.doc.resolve(r.$pos.pos-2).node(r.depth),s=U$(e,n.state,a);return L$(e,n.state)&&!s?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},B$=(n,e)=>{const t=Rj(n,e),r=Pf(n,e);return!r||!t?!1:t>r.depth},$$=(n,e)=>{const t=Rj(n,e),r=Pf(n,e);return!r||!t?!1:t<r.depth},kE=(n,e)=>{if(!uo(n.state,e)||!Uve(n.state,e))return!1;const{selection:t}=n.state,{$from:r,$to:i}=t;return!t.empty&&r.sameParent(i)?!1:B$(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():$$(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},Ybe=(n,e)=>{var t;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((t=i.nodeAfter)==null?void 0:t.type.name)!==n)},z$=Xt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&kE(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&kE(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&NE(n,t,r)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&NE(n,t,r)&&(e=!0)}),e}}}}),LI=/^(\s*)(\d+)\.\s+(.*)$/,Kbe=/^\s/;function Xbe(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t],a=i.match(LI);if(!a)break;const[,s,o,c]=a,u=s.length;let d=c,h=t+1;const f=[i];for(;h<n.length;){const p=n[h];if(p.match(LI))break;if(p.trim()==="")f.push(p),d+=`
`,h+=1;else if(p.match(Kbe))f.push(p),d+=`
${p.slice(u+2)}`,h+=1;else break}e.push({indent:u,number:parseInt(o,10),content:d.trim(),raw:f.join(`
`)}),r=h,t=h}return[e,r]}function q$(n,e,t){var r;const i=[];let a=0;for(;a<n.length;){const s=n[a];if(s.indent===e){const o=s.content.split(`
`),c=((r=o[0])==null?void 0:r.trim())||"",u=[];c&&u.push({type:"paragraph",raw:c,tokens:t.inlineTokens(c)});const d=o.slice(1).join(`
`).trim();if(d){const p=t.blockTokens(d);u.push(...p)}let h=a+1;const f=[];for(;h<n.length&&n[h].indent>e;)f.push(n[h]),h+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),y=q$(f,p,t);u.push({type:"list",ordered:!0,start:f[0].number,items:y,raw:f.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:s.raw,tokens:u}),a=h}else a+=1}return i}function Jbe(n,e){return n.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const r=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const a=e.parseChildren([i]);r.push({type:"paragraph",content:a})}else{const a=e.parseChildren([i]);a.length>0&&r.push(...a)}}),{type:"listItem",content:r}})}var Zbe="listItem",UI="textStyle",BI=/^(\d+)\.\s$/,W$=si.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Tn(this.options.HTMLAttributes,t),0]:["ol",Tn(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>{if(n.type!=="list"||!n.ordered)return[];const t=n.start||1,r=n.items?Jbe(n.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:r}:{type:"orderedList",content:r}},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const e=n.match(/^(\s*)(\d+)\.\s+/),t=e?.index;return t!==void 0?t:-1},tokenize:(n,e,t)=>{var r;const i=n.split(`
`),[a,s]=Xbe(i);if(a.length===0)return;const o=q$(a,0,t);return o.length===0?void 0:{type:"list",ordered:!0,start:((r=a[0])==null?void 0:r.number)||1,items:o,raw:i.slice(0,s).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Zbe,this.editor.getAttributes(UI)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=_u({find:BI,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=_u({find:BI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(UI)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),Qbe=/^\s*(\[([( |x])?\])\s$/,e1e=si.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",Tn(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,e)=>{const t=[];if(n.tokens&&n.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(n.tokens))):n.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:n.text})])):t.push(e.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const r=e.parseChildren(n.nestedTokens);t.push(...r)}return e.createNode("taskItem",{checked:n.checked||!1},t)},renderMarkdown:(n,e)=>{var t;const i=`- [${(t=n.attrs)!=null&&t.checked?"x":" "}] `;return _j(n,e,i)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const i=document.createElement("li"),a=document.createElement("label"),s=document.createElement("span"),o=document.createElement("input"),c=document.createElement("div"),u=h=>{var f,p;o.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,h,o.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};u(n),a.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",h=>h.preventDefault()),o.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:f}=h.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const y=t();if(typeof y!="number")return!1;const g=p.doc.nodeAt(y);return p.setNodeMarkup(y,void 0,{...g?.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,f)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,f])=>{i.setAttribute(h,f)}),i.dataset.checked=n.attrs.checked,o.checked=n.attrs.checked,a.append(o,s),i.append(a,c),Object.entries(e).forEach(([h,f])=>{i.setAttribute(h,f)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:c,update:h=>{if(h.type!==this.type)return!1;i.dataset.checked=h.attrs.checked,o.checked=h.attrs.checked,u(h);const f=r.extensionManager.attributes,p=df(h,f),y=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return d.forEach(m=>{y.has(m)||(m in g?i.setAttribute(m,g[m]):i.removeAttribute(m))}),Object.entries(p).forEach(([m,v])=>{v==null?m in g?i.setAttribute(m,g[m]):i.removeAttribute(m):i.setAttribute(m,v)}),d=y,!0}}}},addInputRules(){return[_u({find:Qbe,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),t1e=si.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",Tn(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,e)=>e.createNode("taskList",{},e.parseChildren(n.items||[])),renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var e;const t=(e=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(n,e,t){const r=a=>{const s=bE(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,c)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:t.inlineTokens(o.mainContent),nestedTokens:c}),customNestedParser:r},t);return s?[{type:"taskList",raw:s.raw,items:s.items}]:t.blockTokens(a)},i=bE(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,s)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:t.inlineTokens(a.mainContent),nestedTokens:s}),customNestedParser:r},t);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Xt.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(R$.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(M$.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(z$.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(W$.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(e1e.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(t1e.configure(this.options.taskList)),n}});var n1e=si.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Tn(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,e)=>{const t=n.tokens||[];return t.length===1&&t[0].type==="image"?e.parseChildren([t[0]]):e.createNode("paragraph",void 0,e.parseInline(t))},renderMarkdown:(n,e)=>!n||!Array.isArray(n.content)?"":e.renderChildren(n.content),addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),r1e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,i1e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,a1e=Do.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Tn(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,e)=>e.applyMark("strike",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`~~${e.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Eu({find:r1e,type:this.type})]},addPasteRules(){return[Dl({find:i1e,type:this.type})]}}),s1e=si.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),H$=Do.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Tn(this.options.HTMLAttributes,n),0]},parseMarkdown(n,e){return e.applyMark(this.name||"underline",e.parseInline(n.tokens||[]))},renderMarkdown(n,e){return`++${e.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,e,t){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!i)return;const a=i[2].trim();return{type:"underline",raw:i[0],text:a,tokens:t.inlineTokens(a)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),$I=H$;function o1e(n={}){return new bn({view(e){return new l1e(e,n)}})}class l1e{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let a=s=>{this[i](s)};return e.dom.addEventListener(i,a),{name:i,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,a=i.getBoundingClientRect(),s=a.width/i.offsetWidth,o=a.height/i.offsetHeight;if(t){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let p=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(p){let y=p.getBoundingClientRect(),g=h?y.bottom:y.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let m=this.width/2*o;r={left:y.left,right:y.right,top:g-m,bottom:g+m}}}}if(!r){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*s;r={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let u,d;if(!c||c==document.body&&getComputedStyle(c).position=="static")u=-pageXOffset,d=-pageYOffset;else{let h=c.getBoundingClientRect(),f=h.width/c.offsetWidth,p=h.height/c.offsetHeight;u=h.left-c.scrollLeft*f,d=h.top-c.scrollTop*p}this.element.style.left=(r.left-u)/s+"px",this.element.style.top=(r.top-d)/o+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/o+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,a=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!a){let s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=zU(this.editorView.state.doc,s,this.editorView.dragging.slice);o!=null&&(s=o)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Dn extends Et{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Dn.valid(r)?new Dn(r):Et.near(r)}content(){return Ye.empty}eq(e){return e instanceof Dn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Dn(e.resolve(t.pos))}getBookmark(){return new Mj(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!c1e(e)||!u1e(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Dn.valid(e))return e;let i=e.pos,a=null;for(let s=e.depth;;s--){let o=e.node(s);if(t>0?e.indexAfter(s)<o.childCount:e.index(s)>0){a=o.child(t>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=t;let c=e.doc.resolve(i);if(Dn.valid(c))return c}for(;;){let s=t>0?a.firstChild:a.lastChild;if(!s){if(a.isAtom&&!a.isText&&!ct.isSelectable(a)){e=e.doc.resolve(i+a.nodeSize*t),r=!1;continue e}break}a=s,i+=t;let o=e.doc.resolve(i);if(Dn.valid(o))return o}return null}}}Dn.prototype.visible=!1;Dn.findFrom=Dn.findGapCursorFrom;Et.jsonID("gapcursor",Dn);class Mj{constructor(e){this.pos=e}map(e){return new Mj(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Dn.valid(t)?new Dn(t):Et.near(t)}}function V$(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function c1e(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||V$(i.type))return!0;if(i.inlineContent)return!1}}return!0}function u1e(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||V$(i.type))return!0;if(i.inlineContent)return!1}}return!0}function d1e(){return new bn({props:{decorations:m1e,createSelectionBetween(n,e,t){return e.pos==t.pos&&Dn.valid(t)?new Dn(t):null},handleClick:f1e,handleKeyDown:h1e,handleDOMEvents:{beforeinput:p1e}}})}const h1e=qB({ArrowLeft:Ip("horiz",-1),ArrowRight:Ip("horiz",1),ArrowUp:Ip("vert",-1),ArrowDown:Ip("vert",1)});function Ip(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,a){let s=r.selection,o=e>0?s.$to:s.$from,c=s.empty;if(s instanceof mt){if(!a.endOfTextblock(t)||o.depth==0)return!1;c=!1,o=r.doc.resolve(e>0?o.after():o.before())}let u=Dn.findGapCursorFrom(o,e,c);return u?(i&&i(r.tr.setSelection(new Dn(u))),!0):!1}}function f1e(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Dn.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&ct.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Dn(r))),!0)}function p1e(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Dn))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=ke.empty;for(let s=r.length-1;s>=0;s--)i=ke.from(r[s].createAndFill(null,i));let a=n.state.tr.replace(t.pos,t.pos,new Ye(i,0,0));return a.setSelection(mt.near(a.doc.resolve(t.pos+1))),n.dispatch(a),!1}function m1e(n){if(!(n.selection instanceof Dn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",yn.create(n.doc,[Br.widget(n.selection.head,e,{key:"gapcursor"})])}var vy=200,lr=function(){};lr.prototype.append=function(e){return e.length?(e=lr.from(e),!this.length&&e||e.length<vy&&this.leafAppend(e)||this.length<vy&&e.leafPrepend(this)||this.appendInner(e)):this};lr.prototype.prepend=function(e){return e.length?lr.from(e).append(this):this};lr.prototype.appendInner=function(e){return new g1e(this,e)};lr.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?lr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};lr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};lr.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};lr.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(a,s){return i.push(e(a,s))},t,r),i};lr.from=function(e){return e instanceof lr?e:e&&e.length?new G$(e):lr.empty};var G$=(function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,a){return i==0&&a==this.length?this:new e(this.values.slice(i,a))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,a,s,o){for(var c=a;c<s;c++)if(i(this.values[c],o+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,a,s,o){for(var c=a-1;c>=s;c--)if(i(this.values[c],o+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=vy)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=vy)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(lr);lr.empty=new G$([]);var g1e=(function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,a,s){var o=this.left.length;if(i<o&&this.left.forEachInner(r,i,Math.min(a,o),s)===!1||a>o&&this.right.forEachInner(r,Math.max(i-o,0),Math.min(this.length,a)-o,s+o)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,a,s){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(r,i-o,Math.max(a,o)-o,s+o)===!1||a<o&&this.left.forEachInvertedInner(r,Math.min(i,o),a,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var a=this.left.length;return i<=a?this.left.slice(r,i):r>=a?this.right.slice(r-a,i-a):this.left.slice(r,a).append(this.right.slice(0,i-a))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(lr);const y1e=500;class sa{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,a;t&&(i=this.remapping(r,this.items.length),a=i.maps.length);let s=e.tr,o,c,u=[],d=[];return this.items.forEach((h,f)=>{if(!h.step){i||(i=this.remapping(r,f+1),a=i.maps.length),a--,d.push(h);return}if(i){d.push(new Ea(h.map));let p=h.step.map(i.slice(a)),y;p&&s.maybeStep(p).doc&&(y=s.mapping.maps[s.mapping.maps.length-1],u.push(new Ea(y,void 0,void 0,u.length+d.length))),a--,y&&i.appendMap(y,a)}else s.maybeStep(h.step);if(h.selection)return o=i?h.selection.map(i.slice(a)):h.selection,c=new sa(this.items.slice(0,r).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:s,selection:o}}addTransform(e,t,r,i){let a=[],s=this.eventCount,o=this.items,c=!i&&o.length?o.get(o.length-1):null;for(let d=0;d<e.steps.length;d++){let h=e.steps[d].invert(e.docs[d]),f=new Ea(e.mapping.maps[d],h,t),p;(p=c&&c.merge(f))&&(f=p,d?a.pop():o=o.slice(0,o.length-1)),a.push(f),t&&(s++,t=void 0),i||(c=f)}let u=s-r.depth;return u>x1e&&(o=v1e(o,u),s-=u),new sa(o.append(a),s)}remapping(e,t){let r=new af;return this.items.forEach((i,a)=>{let s=i.mirrorOffset!=null&&a-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,t),r}addMaps(e){return this.eventCount==0?this:new sa(this.items.append(e.map(t=>new Ea(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),a=e.mapping,s=e.steps.length,o=this.eventCount;this.items.forEach(f=>{f.selection&&o--},i);let c=t;this.items.forEach(f=>{let p=a.getMirror(--c);if(p==null)return;s=Math.min(s,p);let y=a.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),m=f.selection&&f.selection.map(a.slice(c+1,p));m&&o++,r.push(new Ea(y,g,m))}else r.push(new Ea(y))},i);let u=[];for(let f=t;f<s;f++)u.push(new Ea(a.maps[f]));let d=this.items.slice(0,i).append(u).append(r),h=new sa(d,o);return h.emptyItemCount()>y1e&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],a=0;return this.items.forEach((s,o)=>{if(o>=e)i.push(s),s.selection&&a++;else if(s.step){let c=s.step.map(t.slice(r)),u=c&&c.getMap();if(r--,u&&t.appendMap(u,r),c){let d=s.selection&&s.selection.map(t.slice(r));d&&a++;let h=new Ea(u.invert(),c,d),f,p=i.length-1;(f=i.length&&i[p].merge(h))?i[p]=f:i.push(h)}}else s.map&&r--},this.items.length,0),new sa(lr.from(i.reverse()),a)}}sa.empty=new sa(lr.empty,0);function v1e(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Ea{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ea(t.getMap().invert(),t,this.selection)}}}class Us{constructor(e,t,r,i,a){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=a}}const x1e=20;function b1e(n,e,t,r){let i=t.getMeta(ul),a;if(i)return i.historyState;t.getMeta(S1e)&&(n=new Us(n.done,n.undone,null,0,-1));let s=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(s&&s.getMeta(ul))return s.getMeta(ul).redo?new Us(n.done.addTransform(t,void 0,r,mm(e)),n.undone,zI(t.mapping.maps),n.prevTime,n.prevComposition):new Us(n.done,n.undone.addTransform(t,void 0,r,mm(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let o=t.getMeta("composition"),c=n.prevTime==0||!s&&n.prevComposition!=o&&(n.prevTime<(t.time||0)-r.newGroupDelay||!w1e(t,n.prevRanges)),u=s?hA(n.prevRanges,t.mapping):zI(t.mapping.maps);return new Us(n.done.addTransform(t,c?e.selection.getBookmark():void 0,r,mm(e)),sa.empty,u,t.time,o??n.prevComposition)}else return(a=t.getMeta("rebased"))?new Us(n.done.rebased(t,a),n.undone.rebased(t,a),hA(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Us(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),hA(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function w1e(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let a=0;a<e.length;a+=2)r<=e[a+1]&&i>=e[a]&&(t=!0)}),t}function zI(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,a,s)=>e.push(a,s));return e}function hA(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),a=e.map(n[r+1],-1);i<=a&&t.push(i,a)}return t}function A1e(n,e,t){let r=mm(e),i=ul.get(e).spec.config,a=(t?n.undone:n.done).popEvent(e,r);if(!a)return null;let s=a.selection.resolve(a.transform.doc),o=(t?n.done:n.undone).addTransform(a.transform,e.selection.getBookmark(),i,r),c=new Us(t?o:a.remaining,t?a.remaining:o,null,0,-1);return a.transform.setSelection(s).setMeta(ul,{redo:t,historyState:c})}let fA=!1,qI=null;function mm(n){let e=n.plugins;if(qI!=e){fA=!1,qI=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){fA=!0;break}}return fA}const ul=new Zn("history"),S1e=new Zn("closeHistory");function E1e(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new bn({key:ul,state:{init(){return new Us(sa.empty,sa.empty,null,0,-1)},apply(e,t,r){return b1e(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?K$:r=="historyRedo"?X$:null;return!i||!e.editable?!1:(t.preventDefault(),i(e.state,e.dispatch))}}}})}function Y$(n,e){return(t,r)=>{let i=ul.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let a=A1e(i,t,n);a&&r(e?a.scrollIntoView():a)}return!0}}const K$=Y$(!1,!0),X$=Y$(!0,!0);Xt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=n?.node||this.editor.state.doc;if((n?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=n=>{const e=n?.node||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new bn({key:new Zn("characterCount"),appendTransaction:(e,t,r)=>{if(n)return;const i=this.options.limit;if(i==null||i===0){n=!0;return}const a=this.storage.characters({node:r.doc});if(a>i){const s=a-i,o=0,c=s;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(o,c);return n=!0,u}n=!0},filterTransaction:(e,t)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:t.doc}),a=this.storage.characters({node:e.doc});if(a<=r||i>r&&a>r&&a<=i)return!0;if(i>r&&a>r&&a>i||!e.getMeta("paste"))return!1;const o=e.selection.$head.pos,c=a-r,u=o-c,d=o;return e.deleteRange(u,d),!(this.storage.characters({node:e.doc})>r)}})]}});var _1e=Xt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[o1e(this.options)]}});Xt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new bn({key:new Zn("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:r}=this.editor,{anchor:i}=e,a=[];if(!t||!r)return yn.create(n,[]);let s=0;this.options.mode==="deepest"&&n.descendants((c,u)=>{if(c.isText)return;if(!(i>=u&&i<=u+c.nodeSize-1))return!1;s+=1});let o=0;return n.descendants((c,u)=>{if(c.isText||!(i>=u&&i<=u+c.nodeSize-1))return!1;if(o+=1,this.options.mode==="deepest"&&s-o>0||this.options.mode==="shallowest"&&o>1)return this.options.mode==="deepest";a.push(Br.node(u,u+c.nodeSize,{class:this.options.className}))}),yn.create(n,a)}}})]}});var D1e=Xt.create({name:"gapCursor",addProseMirrorPlugins(){return[d1e()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Ht(at(n,"allowGapCursor",t)))!=null?e:null}}});Xt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new bn({key:new Zn("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!t)return null;const a=this.editor.isEmpty;return n.descendants((s,o)=>{const c=r>=o&&r<=o+s.nodeSize,u=!s.isLeaf&&ev(s);if((c||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];a&&d.push(this.options.emptyEditorClass);const h=Br.node(o,o+s.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:o,hasAnchor:c}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),yn.create(n,i)}}})]}});Xt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new bn({key:new Zn("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||a$(t.selection)||n.view.dragging?null:yn.create(t.doc,[Br.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function WI({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||e?.type===n}var j1e=Xt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const e=new Zn(this.name),t=this.options.node||((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(t).includes(i.name));return[new bn({key:e,appendTransaction:(i,a,s)=>{const{doc:o,tr:c,schema:u}=s,d=e.getState(s),h=o.content.size,f=u.nodes[t];if(d)return c.insert(h,f.create())},state:{init:(i,a)=>{const s=a.tr.doc.lastChild;return!WI({node:s,types:r})},apply:(i,a)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return a;const s=i.doc.lastChild;return!WI({node:s,types:r})}}})]}}),T1e=Xt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>K$(n,e),redo:()=>({state:n,dispatch:e})=>X$(n,e)}},addProseMirrorPlugins(){return[E1e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),C1e=Xt.create({name:"starterKit",addExtensions(){var n,e,t,r;const i=[];return this.options.bold!==!1&&i.push(ibe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(Qxe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(R$.configure(this.options.bulletList)),this.options.code!==!1&&i.push(obe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(ube.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(dbe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(_1e.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(D1e.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(hbe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(fbe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(T1e.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(pbe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(xbe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(M$.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(z$.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&i.push(I$.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(W$.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(n1e.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(a1e.configure(this.options.strike)),this.options.text!==!1&&i.push(s1e.configure(this.options.text)),this.options.underline!==!1&&i.push(H$.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&i.push(j1e.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),HI=C1e,N1e=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,k1e=si.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",Tn(this.options.HTMLAttributes,n)]},parseMarkdown:(n,e)=>e.createNode("image",{src:n.href,title:n.title,alt:n.text}),renderMarkdown:n=>{var e,t,r,i,a,s;const o=(t=(e=n.attrs)==null?void 0:e.src)!=null?t:"",c=(i=(r=n.attrs)==null?void 0:r.alt)!=null?i:"",u=(s=(a=n.attrs)==null?void 0:a.title)!=null?s:"";return u?`![${c}](${o} "${u}")`:`![${c}](${o})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:n,minWidth:e,minHeight:t,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:i,getPos:a,HTMLAttributes:s,editor:o})=>{const c=document.createElement("img");Object.entries(s).forEach(([h,f])=>{if(f!=null)switch(h){case"width":case"height":break;default:c.setAttribute(h,f);break}}),c.src=s.src;const u=new Dxe({element:c,editor:o,node:i,getPos:a,onResize:(h,f)=>{c.style.width=`${h}px`,c.style.height=`${f}px`},onCommit:(h,f)=>{const p=a();p!==void 0&&this.editor.chain().setNodeSelection(p).updateAttributes(this.name,{width:h,height:f}).run()},onUpdate:(h,f,p)=>h.type===i.type,options:{directions:n,min:{width:e,height:t},preserveAspectRatio:r===!0}}),d=u.dom;return d.style.visibility="hidden",d.style.pointerEvents="none",c.onload=()=>{d.style.visibility="",d.style.pointerEvents=""},u}},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[A$({find:N1e,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}}),VI=k1e,O1e=Xt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign?{style:`text-align: ${n.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).some(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:n=>({editor:e,commands:t})=>this.options.alignments.includes(n)?e.isActive({textAlign:n})?t.unsetTextAlign():t.setTextAlign(n):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),GI=O1e,P1e=20,J$=(n,e=0)=>{const t=[];return!n.children.length||e>P1e||Array.from(n.children).forEach(r=>{r.tagName==="SPAN"?t.push(r):r.children.length&&t.push(...J$(r,e+1))}),t},I1e=n=>{if(!n.children.length)return;const e=J$(n);e&&e.forEach(t=>{var r,i;const a=t.getAttribute("style"),s=(i=(r=t.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");t.setAttribute("style",`${s};${a}`)})},OE=Do.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&I1e(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",Tn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleTextStyle:n=>({commands:e})=>e.toggleMark(this.name,n),removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(a=>!!a))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),R1e=Xt.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:n=>{var e;const t=n.getAttribute("style");if(t){const r=t.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const a=r[i].split(":");if(a.length>=2){const s=a[0].trim().toLowerCase(),o=a.slice(1).join(":").trim();if(s==="background-color")return o.replace(/['"]+/g,"")}}}return(e=n.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.backgroundColor?{style:`background-color: ${n.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:n=>({chain:e})=>e().setMark("textStyle",{backgroundColor:n}).run(),unsetBackgroundColor:()=>({chain:n})=>n().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),PE=Xt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;const t=n.getAttribute("style");if(t){const r=t.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const a=r[i].split(":");if(a.length>=2){const s=a[0].trim().toLowerCase(),o=a.slice(1).join(":").trim();if(s==="color")return o.replace(/['"]+/g,"")}}}return(e=n.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),M1e=Xt.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:n=>n.style.fontFamily,renderHTML:n=>n.fontFamily?{style:`font-family: ${n.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:n=>({chain:e})=>e().setMark("textStyle",{fontFamily:n}).run(),unsetFontFamily:()=>({chain:n})=>n().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),F1e=Xt.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:n=>n.style.fontSize,renderHTML:n=>n.fontSize?{style:`font-size: ${n.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:n=>({chain:e})=>e().setMark("textStyle",{fontSize:n}).run(),unsetFontSize:()=>({chain:n})=>n().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),L1e=Xt.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:n=>n.style.lineHeight,renderHTML:n=>n.lineHeight?{style:`line-height: ${n.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:n=>({chain:e})=>e().setMark("textStyle",{lineHeight:n}).run(),unsetLineHeight:()=>({chain:n})=>n().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Xt.create({name:"textStyleKit",addExtensions(){const n=[];return this.options.backgroundColor!==!1&&n.push(R1e.configure(this.options.backgroundColor)),this.options.color!==!1&&n.push(PE.configure(this.options.color)),this.options.fontFamily!==!1&&n.push(M1e.configure(this.options.fontFamily)),this.options.fontSize!==!1&&n.push(F1e.configure(this.options.fontSize)),this.options.lineHeight!==!1&&n.push(L1e.configure(this.options.lineHeight)),this.options.textStyle!==!1&&n.push(OE.configure(this.options.textStyle)),n}});const{TextArea:YI}=ye,{Option:KI}=be,XI=()=>{const{t:n,language:e}=Ze(),t=Rt(),{id:r}=qa(),[i]=W.useForm(),[a,s]=M.useState(!1),[o,c]=M.useState(!1),[u,d]=M.useState(""),[h,f]=M.useState(""),[p,y]=M.useState(null),[g,m]=M.useState([]),[v,x]=M.useState(!1),b=!!r;M.useEffect(()=>{b&&A()},[r]);const A=async()=>{try{s(!0);const j=(await ar.getArticleById(r)).article;if(j&&(i.setFieldsValue({title:j.title,titleAr:j.titleAr,excerpt:j.excerpt,excerptAr:j.excerptAr,category:j.category,status:j.status,tags:j.tags?typeof j.tags=="string"?JSON.parse(j.tags).join(", "):j.tags.join(", "):""}),d(j.content||""),f(j.contentAr||""),y(j.featuredImage),j.images)){const R=typeof j.images=="string"?JSON.parse(j.images):j.images;m(R||[])}}catch{se.error(e==="ar"?"فشل تحميل المقال":"Failed to load article")}finally{s(!1)}},w=async(N,j=!1)=>{try{x(!0);const R=new FormData;R.append("file",N),R.append("ownerType","ARTICLE"),b&&R.append("ownerId",r);const P=dl("accessToken"),F=await fetch("https://jadwa.developteam.siteapi/files/upload",{method:"POST",headers:{Authorization:`Bearer ${P}`},body:R});if(!F.ok)throw new Error("Upload failed");const $=(await F.json()).file.fileUrl;return j?(y($),i.setFieldValue("featuredImage",$)):m(B=>[...B,$]),se.success(e==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully"),$}catch{return se.error(e==="ar"?"فشل رفع الصورة":"Failed to upload image"),null}finally{x(!1)}},S=N=>{m(j=>j.filter((R,P)=>P!==N))},E=()=>{y(null),i.setFieldValue("featuredImage",null)},_=jI({extensions:[HI.configure({link:!1,underline:!1}),VI.configure({inline:!0,allowBase64:!0}),RI.configure({openOnClick:!1}),GI.configure({types:["heading","paragraph"]}),$I,OE,PE],content:u||"",onUpdate:({editor:N})=>{const j=N.getHTML();j!==u&&d(j)},editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none min-h-[400px] p-4","data-placeholder":e==="ar"?"اكتب محتوى المقال بالإنجليزية...":"Write article content in English..."}}}),D=jI({extensions:[HI.configure({link:!1,underline:!1}),VI.configure({inline:!0,allowBase64:!0}),RI.configure({openOnClick:!1}),GI.configure({types:["heading","paragraph"],defaultAlignment:"right"}),$I,OE,PE],content:h||"",onUpdate:({editor:N})=>{const j=N.getHTML();j!==h&&f(j)},editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none min-h-[400px] p-4",dir:"rtl","data-placeholder":e==="ar"?"اكتب محتوى المقال بالعربية...":"Write article content in Arabic..."}}});M.useEffect(()=>{if(_&&u!==void 0){const N=_.getHTML();u!==N&&u!=="<p></p>"&&_.commands.setContent(u||"",!1)}},[u,_]),M.useEffect(()=>{if(D&&h!==void 0){const N=D.getHTML();h!==N&&h!=="<p></p>"&&D.commands.setContent(h||"",!1)}},[h,D]);const C=async N=>{try{c(!0);const j=N.tags?N.tags.split(",").map(q=>q.trim()).filter(Boolean):[],R=_?.getHTML()||u||"",P=D?.getHTML()||h||"",F={...N,content:R,contentAr:P,featuredImage:p||null,images:g.length>0?JSON.stringify(g):null,tags:j};if((F.images==="[]"||F.images==="")&&(F.images=null),console.log("Saving article with data:",{...F,content:R.substring(0,50)+"..."}),b){const q=await ar.updateArticle(r,F);console.log("Article updated:",q),se.success(e==="ar"?"تم تحديث المقال بنجاح":"Article updated successfully"),setTimeout(()=>{t("/admin/articles")},1e3)}else{const q=await ar.createArticle(F);console.log("Article created:",q),se.success(e==="ar"?"تم إنشاء المقال بنجاح":"Article created successfully"),t("/admin/articles")}}catch(j){console.error("Error saving article:",j),se.error(j.message||(e==="ar"?"فشل حفظ المقال":"Failed to save article"))}finally{c(!1)}},k=({editor:N,isArabic:j=!1})=>N?l.jsxs("div",{className:"border-b border-gray-200 p-2 flex flex-wrap gap-2 bg-gray-50 rounded-t-lg",children:[l.jsxs("div",{className:"flex gap-1 border-r pr-2 mr-2",children:[l.jsx("button",{type:"button",onClick:()=>N.chain().focus().toggleBold().run(),className:`px-2 py-1 rounded ${N.isActive("bold")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Bold",children:l.jsx("strong",{children:"B"})}),l.jsx("button",{type:"button",onClick:()=>N.chain().focus().toggleItalic().run(),className:`px-2 py-1 rounded ${N.isActive("italic")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Italic",children:l.jsx("em",{children:"I"})}),l.jsx("button",{type:"button",onClick:()=>N.chain().focus().toggleUnderline().run(),className:`px-2 py-1 rounded ${N.isActive("underline")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Underline",children:l.jsx("u",{children:"U"})}),l.jsx("button",{type:"button",onClick:()=>N.chain().focus().toggleStrike().run(),className:`px-2 py-1 rounded ${N.isActive("strike")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Strike",children:l.jsx("s",{children:"S"})})]}),l.jsxs("div",{className:"flex gap-1 border-r pr-2 mr-2",children:[l.jsx("button",{type:"button",onClick:()=>N.chain().focus().toggleHeading({level:1}).run(),className:`px-2 py-1 rounded ${N.isActive("heading",{level:1})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Heading 1",children:"H1"}),l.jsx("button",{type:"button",onClick:()=>N.chain().focus().toggleHeading({level:2}).run(),className:`px-2 py-1 rounded ${N.isActive("heading",{level:2})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Heading 2",children:"H2"}),l.jsx("button",{type:"button",onClick:()=>N.chain().focus().toggleHeading({level:3}).run(),className:`px-2 py-1 rounded ${N.isActive("heading",{level:3})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Heading 3",children:"H3"})]}),l.jsxs("div",{className:"flex gap-1 border-r pr-2 mr-2",children:[l.jsx("button",{type:"button",onClick:()=>N.chain().focus().toggleBulletList().run(),className:`px-2 py-1 rounded ${N.isActive("bulletList")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Bullet List",children:"•"}),l.jsx("button",{type:"button",onClick:()=>N.chain().focus().toggleOrderedList().run(),className:`px-2 py-1 rounded ${N.isActive("orderedList")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Ordered List",children:"1."}),l.jsx("button",{type:"button",onClick:()=>N.chain().focus().toggleBlockquote().run(),className:`px-2 py-1 rounded ${N.isActive("blockquote")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Quote",children:'"'}),l.jsx("button",{type:"button",onClick:()=>N.chain().focus().toggleCodeBlock().run(),className:`px-2 py-1 rounded ${N.isActive("codeBlock")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Code Block",children:"</>"})]}),l.jsxs("div",{className:"flex gap-1 border-r pr-2 mr-2",children:[l.jsx("button",{type:"button",onClick:()=>N.chain().focus().setTextAlign("left").run(),className:`px-2 py-1 rounded ${N.isActive({textAlign:"left"})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Align Left",children:"⬅"}),l.jsx("button",{type:"button",onClick:()=>N.chain().focus().setTextAlign("center").run(),className:`px-2 py-1 rounded ${N.isActive({textAlign:"center"})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Align Center",children:"⬌"}),l.jsx("button",{type:"button",onClick:()=>N.chain().focus().setTextAlign("right").run(),className:`px-2 py-1 rounded ${N.isActive({textAlign:"right"})?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Align Right",children:"➡"})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{type:"button",onClick:()=>{const R=document.createElement("input");R.setAttribute("type","file"),R.setAttribute("accept","image/*"),R.click(),R.onchange=async()=>{const P=R.files[0];if(P){const F=await w(P,!1);F&&N.chain().focus().setImage({src:F}).run()}}},className:"px-2 py-1 rounded bg-white hover:bg-gray-100",title:"Insert Image",children:"🖼"}),l.jsx("button",{type:"button",onClick:()=>{const R=window.prompt("Enter URL:");R&&N.chain().focus().setLink({href:R}).run()},className:`px-2 py-1 rounded ${N.isActive("link")?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"}`,title:"Insert Link",children:"🔗"}),l.jsx("button",{type:"button",onClick:()=>N.chain().focus().unsetLink().run(),className:"px-2 py-1 rounded bg-white hover:bg-gray-100",title:"Remove Link",disabled:!N.isActive("link"),children:"🔗❌"})]})]}):null,T=[{key:"en",label:e==="ar"?"المحتوى الإنجليزي":"English Content",children:l.jsx("div",{className:"editor-tab",children:l.jsx(W.Item,{label:e==="ar"?"المحتوى (إنجليزي)":"Content (English)",children:l.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[l.jsx(k,{editor:_}),l.jsx(DI,{editor:_})]})})})},{key:"ar",label:e==="ar"?"المحتوى العربي":"Arabic Content",children:l.jsx("div",{className:"editor-tab",children:l.jsx(W.Item,{label:e==="ar"?"المحتوى (عربي)":"Content (Arabic)",children:l.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[l.jsx(k,{editor:D,isArabic:!0}),l.jsx(DI,{editor:D})]})})})}];return l.jsxs("div",{className:"article-editor-page",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx(J,{icon:l.jsx(bs,{}),onClick:()=>t("/admin/articles"),className:"mb-4",children:e==="ar"?"العودة إلى القائمة":"Back to List"}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-olive-green-600 to-turquoise-500 bg-clip-text text-transparent mb-2",children:b?e==="ar"?"تعديل المقال":"Edit Article":e==="ar"?"إضافة مقال جديد":"Add New Article"})]}),l.jsxs(W,{form:i,layout:"vertical",onFinish:C,initialValues:{status:"DRAFT"},children:[l.jsxs(Re,{gutter:24,children:[l.jsx(me,{xs:24,lg:16,children:l.jsxs(Ee,{className:"mb-6",children:[l.jsxs(Re,{gutter:16,children:[l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"title",label:e==="ar"?"العنوان (إنجليزي)":"Title (English)",rules:[{required:!0,message:e==="ar"?"يرجى إدخال العنوان":"Please enter title"}],children:l.jsx(ye,{size:"large",placeholder:e==="ar"?"عنوان المقال بالإنجليزية":"Article title in English"})})}),l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"titleAr",label:e==="ar"?"العنوان (عربي)":"Title (Arabic)",children:l.jsx(ye,{size:"large",placeholder:e==="ar"?"عنوان المقال بالعربية":"Article title in Arabic"})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"excerpt",label:e==="ar"?"الملخص (إنجليزي)":"Excerpt (English)",children:l.jsx(YI,{rows:3,placeholder:e==="ar"?"ملخص المقال بالإنجليزية":"Article excerpt in English"})})}),l.jsx(me,{span:12,children:l.jsx(W.Item,{name:"excerptAr",label:e==="ar"?"الملخص (عربي)":"Excerpt (Arabic)",children:l.jsx(YI,{rows:3,placeholder:e==="ar"?"ملخص المقال بالعربية":"Article excerpt in Arabic"})})})]}),l.jsx(cn,{children:e==="ar"?"محرر المحتوى":"Content Editor"}),l.jsx(la,{items:T,defaultActiveKey:e==="ar"?"ar":"en",destroyOnHidden:!1})]})}),l.jsxs(me,{xs:24,lg:8,children:[l.jsxs(Ee,{title:e==="ar"?"الإعدادات":"Settings",className:"mb-6",children:[l.jsx(W.Item,{name:"status",label:e==="ar"?"الحالة":"Status",children:l.jsxs(be,{size:"large",children:[l.jsx(KI,{value:"DRAFT",children:e==="ar"?"مسودة":"Draft"}),l.jsx(KI,{value:"PUBLISHED",children:e==="ar"?"منشور":"Published"})]})}),l.jsx(W.Item,{name:"category",label:e==="ar"?"الفئة":"Category",children:l.jsx(ye,{placeholder:e==="ar"?"الفئة":"Category"})}),l.jsx(W.Item,{name:"tags",label:e==="ar"?"العلامات":"Tags",children:l.jsx(ye,{placeholder:e==="ar"?"علامات مفصولة بفواصل":"Tags separated by commas"})})]}),l.jsx(Ee,{title:e==="ar"?"الصورة الرئيسية":"Featured Image",className:"mb-6",children:p?l.jsxs("div",{className:"relative mb-4",children:[l.jsx(Sr,{src:p,alt:"Featured",className:"w-full rounded-lg",preview:!1}),l.jsx(J,{danger:!0,icon:l.jsx(wi,{}),onClick:E,className:"mt-2 w-full",children:e==="ar"?"حذف الصورة":"Remove Image"})]}):l.jsx(Vt,{accept:"image/*",showUploadList:!1,beforeUpload:N=>(w(N,!0),!1),disabled:v,children:l.jsx(J,{icon:l.jsx(Sn,{}),loading:v,className:"w-full",size:"large",children:e==="ar"?"رفع صورة رئيسية":"Upload Featured Image"})})}),l.jsx(Ee,{title:e==="ar"?"معرض الصور":"Image Gallery",children:l.jsxs("div",{className:"space-y-4",children:[g.map((N,j)=>l.jsxs("div",{className:"relative",children:[l.jsx(Sr,{src:N,alt:`Gallery ${j+1}`,className:"w-full rounded-lg mb-2",preview:!1}),l.jsx(J,{danger:!0,size:"small",icon:l.jsx(wi,{}),onClick:()=>S(j),className:"w-full",children:e==="ar"?"حذف":"Remove"})]},j)),l.jsx(Vt,{accept:"image/*",showUploadList:!1,beforeUpload:N=>(w(N,!1),!1),disabled:v,children:l.jsx(J,{icon:l.jsx(gr,{}),loading:v,className:"w-full",block:!0,children:e==="ar"?"إضافة صورة":"Add Image"})})]})})]})]}),l.jsx(Ee,{className:"mt-6",children:l.jsxs(ze,{children:[l.jsx(J,{type:"primary",icon:l.jsx(ja,{}),htmlType:"submit",loading:o,size:"large",className:"bg-olive-green-600",children:e==="ar"?"حفظ المقال":"Save Article"}),l.jsx(J,{icon:l.jsx(Wn,{}),onClick:()=>{se.info(e==="ar"?"معاينة المقال":"Preview article")},size:"large",children:e==="ar"?"معاينة":"Preview"})]})})]})]})},{TextArea:U1e}=ye,{Text:ec}=Du,JI=()=>{const{language:n}=Ze(),{user:e}=Xn(),{sessionId:t}=qa();Rt();const[r,i]=M.useState([]),[a,s]=M.useState(null),[o,c]=M.useState([]),[u,d]=M.useState(""),[h,f]=M.useState(!1),[p,y]=M.useState(!1),[g,m]=M.useState(null),[v,x]=M.useState(!1),[b,A]=M.useState([]),[w,S]=M.useState(!1),[E,_]=M.useState(!1),[D,C]=M.useState([]),[k,T]=M.useState(!1),N=M.useRef(null);M.useRef(null);const{isRecording:j,recordingTime:R,audioBlob:P,audioUrl:F,startRecording:q,stopRecording:$,cancelRecording:B,formatTime:I}=zE();M.useEffect(()=>{(e?.role==="ADMIN"||e?.role==="SUPER_ADMIN")&&(G(),L())},[e]),M.useEffect(()=>{if(t&&r.length>0){const O=r.find(ie=>ie.sessionId===t);O&&(s(O),H(O.sessionId))}},[t,r]);const L=async()=>{try{S(!0);const O=await jt.getAllUsers();A(O.users||[])}catch(O){console.error("Error fetching users:",O)}finally{S(!1)}};M.useEffect(()=>{if(a){H(a.sessionId);const O=setInterval(()=>{H(a.sessionId)},5e3);return()=>clearInterval(O)}},[a]),M.useEffect(()=>{U()},[o]);const U=()=>{N.current?.scrollIntoView({behavior:"smooth"})},G=async()=>{try{f(!0);const O=await pn.getConversations();i(O.conversations||[])}catch(O){console.error("Error fetching conversations:",O),se.error(O.message||(n==="ar"?"فشل تحميل المحادثات":"Failed to load conversations"))}finally{f(!1)}},H=async O=>{if(O)try{const ie=await pn.getMessages(O);if(c(ie.messages||[]),ie.messages&&ie.messages.length>0)try{await pn.markAsRead(O)}catch(re){console.error("Error marking messages as read:",re)}}catch(ie){console.error("Error fetching messages:",ie),se.error(ie.message||(n==="ar"?"فشل تحميل الرسائل":"Failed to load messages"))}},V=async O=>{try{f(!0);const ie=await jt.createDirectSession(O,"chat"),re={id:ie.session.id,sessionId:ie.session.id,bookingId:null,name:b.find(Z=>Z.id===O)?.email||"User",clientName:null,consultantName:null,clientId:O,consultantUserId:null,avatar:b.find(Z=>Z.id===O)?.avatar,lastMessage:"",lastMessageTime:new Date,status:"IN_PROGRESS",unreadCount:0,isDirect:!0};s(re),_(!1),G(),se.success(n==="ar"?"تم بدء المحادثة":"Conversation started")}catch(ie){console.error("Error starting conversation:",ie),se.error(ie.message||(n==="ar"?"فشل بدء المحادثة":"Failed to start conversation"))}finally{f(!1)}},K=async O=>{try{const ie=new FormData;ie.append("file",O),ie.append("ownerType","MESSAGE"),ie.append("ownerId",a?.sessionId||"");const re=await Zr.uploadFile(ie),Z=[...D,re.file.fileUrl];C(Z),se.success(n==="ar"?"تم رفع الملف":"File uploaded")}catch(ie){console.error("Error uploading file:",ie),se.error(ie.message||(n==="ar"?"فشل رفع الملف":"Failed to upload file"))}return!1},ae=async()=>{j?$():await q()},te=async()=>{if(!(!P||!a))try{y(!0);const O=new File([P],`voice-${Date.now()}.webm`,{type:"audio/webm"}),ie=new FormData;ie.append("file",O),ie.append("ownerType","MESSAGE"),ie.append("ownerId",a.sessionId);const Z=(await Zr.uploadFile(ie)).file.fileUrl;let z=null;const X=g||e?.id;(a.isDirect||!a.bookingId)&&(a.clientId&&a.clientId!==X?z=a.clientId:a.consultantUserId&&a.consultantUserId!==X&&(z=a.consultantUserId)),await pn.sendMessageAsAdmin(a.sessionId,{content:n==="ar"?"رسالة صوتية":"Voice message",messageType:"audio",attachments:[Z],senderId:X,...z&&{receiverId:z}}),B(),await H(a.sessionId),se.success(n==="ar"?"تم إرسال الرسالة الصوتية":"Voice message sent")}catch(O){console.error("Error sending voice message:",O),se.error(O.message||(n==="ar"?"فشل إرسال الرسالة الصوتية":"Failed to send voice message"))}finally{y(!1)}},de=async()=>{if(!(!u.trim()&&D.length===0||!a))try{y(!0);let O="text";if(D.length>0){const Z=D.some(ue=>/\.(jpg|jpeg|png|gif|webp)$/i.test(ue)),z=D.some(ue=>/\.(mp3|wav|ogg|m4a|webm)$/i.test(ue)),X=D.some(ue=>/\.(mp4|webm|ogg)$/i.test(ue));Z?O="image":z?O="audio":X?O="video":O="file"}const ie=g||e?.id;let re=null;(a.isDirect||!a.bookingId)&&(a.clientId&&a.clientId!==ie?re=a.clientId:a.consultantUserId&&a.consultantUserId!==ie&&(re=a.consultantUserId)),await pn.sendMessageAsAdmin(a.sessionId,{content:u||(D.length>0?"📎 ملف مرفق":""),messageType:O,attachments:D.length>0?D:[],senderId:ie,...re&&{receiverId:re}}),d(""),C([]),await H(a.sessionId),se.success(n==="ar"?"تم إرسال الرسالة":"Message sent")}catch(O){console.error("Error sending message:",O),se.error(O.message||(n==="ar"?"فشل إرسال الرسالة":"Failed to send message"))}finally{y(!1)}},xe=async O=>{try{await jt.deleteSession(O),se.success(n==="ar"?"تم حذف المحادثة":"Session deleted"),a?.sessionId===O&&(s(null),c([])),G()}catch(ie){console.error("Error deleting session:",ie),se.error(ie.message||(n==="ar"?"فشل حذف المحادثة":"Failed to delete session"))}},ve=async O=>{try{await jt.stopSession(O),se.success(n==="ar"?"تم إيقاف المحادثة":"Session stopped"),G(),a?.sessionId===O&&H(O)}catch(ie){console.error("Error stopping session:",ie),se.error(ie.message||(n==="ar"?"فشل إيقاف المحادثة":"Failed to stop session"))}},Te=O=>O.clientName&&O.consultantName?`${O.clientName} ↔ ${O.consultantName}`:O.name||(n==="ar"?"محادثة":"Conversation");return l.jsx(l.Fragment,{children:l.jsxs("div",{className:"flex h-[calc(100vh-64px)] dashboard-bg relative",style:{margin:"-12px -12px 0 -12px",width:"calc(100% + 24px)"},children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/20 to-turquoise-100/20 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/20 to-olive-green-100/20 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"w-1/3 min-w-[300px] max-w-[400px] glass-card border-r border-gray-200/50 flex flex-col shadow-professional-lg relative z-10",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-gray-200/50 backdrop-blur-sm flex items-center justify-between flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kn,{className:"text-olive-green-600"}),l.jsx("span",{className:"font-semibold text-gray-900",children:n==="ar"?"المحادثات":"Conversations"})]}),l.jsxs(ze,{children:[l.jsx(J,{type:"text",size:"small",icon:l.jsx(tt,{}),onClick:()=>_(!0),className:"text-gray-600 hover:text-gray-900",children:n==="ar"?"جديد":"New"}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(kn,{}),onClick:()=>x(!0),className:"text-gray-600 hover:text-gray-900",children:n==="ar"?"إرسال كـ":"Send As"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:h&&r.length===0?l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsx(kt,{size:"small"})}):r.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[l.jsx(kn,{className:"text-4xl text-gray-300 mb-4"}),l.jsx(ec,{type:"secondary",children:n==="ar"?"لا توجد محادثات":"No conversations"})]}):l.jsx(qt,{className:"px-0",dataSource:r,renderItem:O=>{const ie=a?.sessionId===O.sessionId;return l.jsxs(qt.Item,{className:`cursor-pointer px-4 py-3 border-b border-gray-100  ${ie?"bg-olive-green-50 border-l-4 border-l-olive-green-600":"hover:bg-gray-50"}`,onClick:()=>{s(O),H(O.sessionId)},children:[l.jsx(qt.Item.Meta,{avatar:l.jsx(gs,{count:O.unreadCount>0?O.unreadCount:0,size:"small",offset:[-5,5],showZero:!1,children:l.jsx(Mt,{icon:l.jsx(tt,{}),size:48,className:"shadow-sm"})}),title:l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("span",{className:`font-semibold text-sm ${ie?"text-olive-green-700":"text-gray-900"}`,children:Te(O)}),O.status&&l.jsx($e,{color:O.status==="ACTIVE"||O.status==="IN_PROGRESS"?"green":O.status==="COMPLETED"?"blue":"default",size:"small",className:"text-xs",children:O.status})]}),description:l.jsxs("div",{className:"mt-1",children:[l.jsx("p",{className:"text-xs text-gray-600 truncate mb-1",children:O.lastMessage||(n==="ar"?"لا توجد رسائل":"No messages")}),l.jsx("p",{className:"text-xs text-gray-400",children:O.lastMessageTime?qe(O.lastMessageTime).fromNow():""})]})}),l.jsxs(ze,{className:"ml-2",children:[l.jsx(ys,{title:n==="ar"?"إيقاف المحادثة؟":"Stop session?",onConfirm:()=>ve(O.sessionId),okText:n==="ar"?"نعم":"Yes",cancelText:n==="ar"?"لا":"No",children:l.jsx(J,{type:"text",icon:l.jsx($c,{}),danger:!0,size:"small",onClick:re=>re.stopPropagation()})}),l.jsx(ys,{title:n==="ar"?"حذف المحادثة؟":"Delete session?",description:n==="ar"?"هل أنت متأكد من حذف هذه المحادثة؟":"Are you sure you want to delete this conversation?",onConfirm:()=>xe(O.sessionId),okText:n==="ar"?"نعم":"Yes",cancelText:n==="ar"?"لا":"No",okButtonProps:{danger:!0},children:l.jsx(J,{type:"text",icon:l.jsx(wi,{}),danger:!0,size:"small",onClick:re=>re.stopPropagation()})})]})]})}})})]}),l.jsx("div",{className:"flex-1 flex flex-col glass-card overflow-hidden shadow-professional-lg relative z-10",children:a?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"border-b border-gray-200/50 px-4 py-3 flex items-center justify-between shadow-professional z-10 sticky top-0 flex-shrink-0 backdrop-blur-sm",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[l.jsx(Mt,{icon:l.jsx(tt,{}),size:40,className:"flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h2",{className:"text-base font-semibold text-gray-900 truncate",children:Te(a)}),l.jsx("p",{className:"text-xs text-gray-500 truncate",children:a?.status==="ACTIVE"||a?.status==="IN_PROGRESS"?n==="ar"?"نشط":"Active":a?.status==="STOPPED"?n==="ar"?"متوقف":"Stopped":a?.status==="COMPLETED"?n==="ar"?"مكتمل":"Completed":n==="ar"?"مجدول":"Scheduled"})]})]}),l.jsxs(ze,{className:"flex-shrink-0",children:[g&&l.jsx($e,{color:"orange",className:"text-xs",children:n==="ar"?"إرسال كـ مستخدم آخر":"Sending as user"}),l.jsx(J,{type:"text",icon:l.jsx(kn,{}),className:"text-gray-600 hover:text-gray-900",onClick:()=>x(!0),title:n==="ar"?"إرسال كـ":"Send As"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 min-h-0",style:{scrollBehavior:"smooth",backgroundImage:"radial-gradient(circle, rgba(122, 140, 102, 0.1) 1px, transparent 1px)",backgroundSize:"20px 20px"},children:l.jsxs("div",{className:"max-w-4xl mx-auto space-y-3",children:[h&&o.length===0?l.jsx("div",{className:"flex justify-center items-center py-12",children:l.jsx(kt,{size:"large"})}):o.length===0?l.jsxs("div",{className:"text-center text-gray-400 py-12",children:[l.jsx("div",{className:"text-4xl mb-2",children:"💬"}),l.jsx("p",{children:n==="ar"?"لا توجد رسائل بعد":"No messages yet"})]}):o.map((O,ie)=>{const re=O.senderId===(g||e?.id),Z=O.attachments?typeof O.attachments=="string"?JSON.parse(O.attachments):O.attachments:[],z=ie>0?o[ie-1]:null,X=!z||z.senderId!==O.senderId,ue=!z||qe(O.createdAt).diff(qe(z.createdAt),"minute")>5;return l.jsxs("div",{className:`flex ${re?"justify-end":"justify-start"} items-end gap-2 ${ue?"mt-4":""}`,children:[!re&&l.jsx(Mt,{src:O.sender?.avatar,icon:l.jsx(tt,{}),size:32,className:"flex-shrink-0"}),l.jsxs("div",{className:`flex flex-col ${re?"items-end":"items-start"} max-w-[70%] md:max-w-[60%]`,children:[ue&&l.jsx("div",{className:"text-center w-full mb-2",children:l.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:qe(O.createdAt).format("MMM DD, YYYY HH:mm")})}),!re&&X&&l.jsx(ec,{type:"secondary",className:"text-xs mb-1 px-1",children:O.sender?.email||"Unknown"}),l.jsxs("div",{className:`rounded-2xl px-4 py-2 ${re?"bg-[#dcf8c6] text-gray-900 rounded-tr-sm":"bg-white text-gray-900 rounded-tl-sm shadow-sm"}`,children:[Z.length>0&&l.jsx("div",{className:"mb-2 space-y-2",children:Z.map((le,ee)=>{const ne=le.startsWith("data:image/")||le.startsWith("data:video/")||le.startsWith("data:audio/"),oe=O.messageType==="image"||/\.(jpg|jpeg|png|gif|webp)$/i.test(le)||ne&&le.startsWith("data:image/"),pe=O.messageType==="audio"||/\.(mp3|wav|ogg|m4a|webm)$/i.test(le)||ne&&le.startsWith("data:audio/"),Ae=O.messageType==="video"||/\.(mp4|webm)$/i.test(le)&&O.messageType!=="audio"||ne&&le.startsWith("data:video/");if(oe)return l.jsx("div",{className:"image-attachment mb-2 -mx-2",children:ne?l.jsx("img",{src:le,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},onError:Ne=>{Ne.target.style.display="none"}}):l.jsx(Sr,{src:le.startsWith("http")?le:le.startsWith("/uploads")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${le}`:le.startsWith("/")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${le}`:`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}/uploads/MESSAGE/${le.split("/").pop()}`,alt:"Image attachment",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",display:"block",objectFit:"cover",width:"100%"},preview:{mask:n==="ar"?"معاينة":"Preview"},onError:Ne=>{console.error("Image failed to load:",le),Ne.target.style.display="none"}},ee)},ee);if(pe){const Ne=le.startsWith("http")?le:le.startsWith("/uploads")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${le}`:le.startsWith("/")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${le}`:`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}/uploads/MESSAGE/${le.split("/").pop()}`;return l.jsx("div",{className:"audio-attachment",children:l.jsx(qE,{src:Ne,isOwnMessage:re,language:n})},ee)}else return Ae?l.jsx("div",{className:"video-attachment",children:l.jsx("video",{controls:!0,src:le,className:"w-full max-w-md rounded"})},ee):l.jsxs("div",{className:`file-attachment flex items-center gap-2 p-2 rounded ${re?"bg-white/50":"bg-gray-100"}`,children:[l.jsx(Rc,{className:re?"text-gray-700":"text-blue-600"}),l.jsx("a",{href:le,download:!0,target:"_blank",rel:"noopener noreferrer",className:`text-sm ${re?"text-gray-700 hover:text-gray-900":"text-blue-600 hover:text-blue-800"}`,children:le.split("/").pop()})]},ee)})}),O.content&&O.content.trim()&&!(O.messageType==="image"&&Z.length>0&&!O.content.includes("📎"))&&l.jsx("p",{className:`text-sm ${Z.length>0?"mt-2":""} whitespace-pre-wrap break-words`,children:O.content}),l.jsx("span",{className:`text-xs mt-1 ${re?"text-gray-600":"text-gray-500"} self-end`,children:qe(O.createdAt).format("HH:mm")})]})]}),re&&l.jsx(Mt,{src:e?.avatar,icon:l.jsx(tt,{}),size:32,className:"flex-shrink-0"})]},O.id)}),l.jsx("div",{ref:N})]})}),D.length>0&&l.jsx("div",{className:"mb-3 pb-3 border-b border-gray-200 px-4",children:l.jsx("div",{className:"flex flex-wrap gap-3",children:D.map((O,ie)=>{const re=/\.(jpg|jpeg|png|gif|webp)$/i.test(O),Z=/\.(mp4|webm|ogg)$/i.test(O),z=/\.(mp3|wav|ogg|m4a|webm)$/i.test(O),X=O.split("/").pop(),ue=O.startsWith("http")?O:O.startsWith("/uploads")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${O}`:O.startsWith("/")?`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}${O}`:`${"https://jadwa.developteam.siteapi".replace("/api","")||"https://jadwa.developteam.site"}/uploads/MESSAGE/${O.split("/").pop()}`;return l.jsx("div",{className:"relative group",children:re?l.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm",children:[l.jsx(Sr,{src:ue,alt:X,width:200,height:200,className:"object-cover",preview:!1,onError:le=>{console.error("Image failed to load:",ue),le.target.style.display="none"}}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(Ar,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>C(D.filter((le,ee)=>ee!==ie))})]}):Z?l.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 shadow-sm w-[200px]",children:[l.jsx("video",{src:ue,className:"w-full h-[150px] object-cover",controls:!1,muted:!0,onError:le=>{console.error("Video failed to load:",ue)}}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:l.jsx(io,{className:"text-white text-2xl"})}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(Ar,{}),className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full w-7 h-7 p-0 flex items-center justify-center opacity-0 group-hover:opacity-100 ",onClick:()=>C(D.filter((le,ee)=>ee!==ie))})]}):z?l.jsxs("div",{className:"relative rounded-lg border border-gray-200 shadow-sm bg-gray-50 p-3 min-w-[200px]",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Mc,{className:"text-gray-600 text-lg"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-xs text-gray-600 truncate",children:X}),l.jsx("audio",{src:ue,controls:!0,className:"w-full mt-1",preload:"metadata"})]})]}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(Ar,{}),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center",onClick:()=>C(D.filter((le,ee)=>ee!==ie))})]}):l.jsxs("div",{className:"relative flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 shadow-sm min-w-[200px]",children:[l.jsx(Rc,{className:"text-gray-600 text-xl"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm text-gray-700 truncate font-medium",children:X}),l.jsx("p",{className:"text-xs text-gray-500",children:n==="ar"?"ملف":"File"})]}),l.jsx(J,{type:"text",size:"small",icon:l.jsx(Ar,{}),className:"bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 p-0 flex items-center justify-center flex-shrink-0",onClick:()=>C(D.filter((le,ee)=>ee!==ie))})]})},ie)})})}),F&&!j&&l.jsxs("div",{className:"p-3 bg-blue-50 border-t border-blue-200 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("audio",{src:F,controls:!0,className:"max-w-xs"}),l.jsx("span",{className:"text-sm text-gray-600",children:I(R)})]}),l.jsxs(ze,{children:[l.jsx(J,{type:"primary",size:"small",onClick:te,loading:p,children:n==="ar"?"إرسال":"Send"}),l.jsx(J,{size:"small",icon:l.jsx(Ar,{}),onClick:B})]})]}),j&&l.jsxs("div",{className:"p-3 bg-red-50 border-t border-red-200 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),l.jsxs("span",{className:"text-red-600 font-semibold",children:[n==="ar"?"جاري التسجيل...":"Recording..."," ",I(R)]})]}),l.jsx(J,{danger:!0,size:"small",icon:l.jsx($c,{}),onClick:$,children:n==="ar"?"إيقاف":"Stop"})]}),l.jsxs("div",{className:"border-t border-gray-200/50 px-4 py-3 shadow-professional backdrop-blur-sm flex-shrink-0 bg-white/80",children:[l.jsxs("div",{className:"flex items-end gap-2",children:[l.jsx(Vt,{showUploadList:!1,beforeUpload:K,accept:"image/*,audio/*,video/*,.pdf,.doc,.docx",multiple:!0,children:l.jsx(J,{icon:l.jsx(IE,{}),type:"text",className:"text-gray-600 hover:text-gray-900",size:"large"})}),l.jsx(J,{type:j?"primary":"text",danger:j,icon:j?l.jsx(LE,{}):l.jsx(Mc,{}),onClick:ae,disabled:a?.status==="STOPPED"||a?.status==="COMPLETED",title:n==="ar"?"تسجيل صوتي":"Voice recording",className:j?"":"text-gray-600 hover:text-gray-900",size:"large"}),l.jsx(J,{icon:l.jsx(BE,{}),onClick:()=>T(!k),type:"text",className:`text-gray-600 hover:text-gray-900 ${k?"bg-gray-100":""}`,size:"large"}),l.jsx("div",{className:"flex-1 relative",children:l.jsx(U1e,{value:u,onChange:O=>d(O.target.value),placeholder:n==="ar"?"اكتب رسالة...":"Type a message...",rows:1,autoSize:{minRows:1,maxRows:4},variant:"borderless",disabled:a?.status==="STOPPED"||a?.status==="COMPLETED"||j,onPressEnter:O=>{O.shiftKey||(O.preventDefault(),de())},style:{resize:"none",borderRadius:"24px",padding:"10px 16px",backgroundColor:"#f0f0f0",border:"none",fontSize:"14px"}})}),l.jsx(J,{type:"primary",icon:l.jsx(Ty,{}),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0 rounded-full",onClick:de,loading:p,disabled:!u.trim()&&D.length===0||a?.status==="STOPPED"||a?.status==="COMPLETED"||j,size:"large",shape:"circle"})]}),k&&l.jsx("div",{className:"p-3 bg-white border-t border-gray-200 max-h-48 overflow-y-auto shadow-inner",children:l.jsx("div",{className:"grid grid-cols-8 gap-1",children:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃"].map(O=>l.jsx(J,{type:"text",className:"text-xl p-1",onClick:()=>{d(ie=>ie+O),T(!1)},children:O},O))})})]})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsxs("div",{className:"text-center py-12 px-6",children:[l.jsx("div",{className:"mb-6",children:l.jsx(kn,{className:"text-7xl text-gray-300"})}),l.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700",children:n==="ar"?"اختر محادثة للبدء":"Select a Conversation to Start"}),l.jsx("p",{className:"text-gray-500 max-w-md mx-auto text-base",children:n==="ar"?"اختر محادثة من القائمة الجانبية للبدء في الدردشة":"Select a conversation from the sidebar to start chatting"})]})})}),l.jsx(At,{title:n==="ar"?"إرسال الرسالة كـ":"Send Message As",open:v,onCancel:()=>x(!1),footer:[l.jsx(J,{onClick:()=>{x(!1),m(null)},children:n==="ar"?"إلغاء":"Cancel"},"cancel"),l.jsx(J,{onClick:()=>{m(null),se.info(n==="ar"?"سيتم الإرسال كمدير":"Will send as admin")},children:n==="ar"?"إرسال كمدير":"Send as Admin"},"clear")],children:l.jsxs("div",{className:"space-y-4",children:[l.jsx(ec,{type:"secondary",children:n==="ar"?"اختر المستخدم الذي تريد الإرسال باسمه. اتركه فارغاً للإرسال كمدير.":"Select the user you want to send as. Leave empty to send as admin."}),l.jsxs("div",{children:[l.jsx(ec,{strong:!0,children:n==="ar"?"اختر المستخدم:":"Select User:"}),w?l.jsx("div",{className:"flex justify-center py-4",children:l.jsx(kt,{})}):l.jsx(be,{className:"w-full mt-2",placeholder:n==="ar"?"اختر مستخدم للإرسال باسمه":"Select user to send as",showSearch:!0,filterOption:(O,ie)=>(ie?.label??"").toLowerCase().includes(O.toLowerCase()),options:b.map(O=>({value:O.id,label:`${O.email}${O.client?` (${O.client.firstName} ${O.client.lastName})`:""}${O.consultant?` (${O.consultant.firstName} ${O.consultant.lastName})`:""} - ${O.role}`})),onChange:O=>{m(O);const ie=b.find(re=>re.id===O);se.success(n==="ar"?`سيتم الإرسال كـ ${ie?.email}`:`Will send as ${ie?.email}`)},allowClear:!0,onClear:()=>{m(null),se.info(n==="ar"?"سيتم الإرسال كمدير":"Will send as admin")}}),a&&l.jsxs("div",{className:"mt-4",children:[l.jsx(ec,{strong:!0,children:n==="ar"?"المشاركون في المحادثة:":"Conversation Participants:"}),l.jsxs("div",{className:"mt-2 space-y-2",children:[a?.clientId&&l.jsxs(J,{block:!0,onClick:()=>{m(a.clientId),x(!1),se.success(n==="ar"?"سيتم الإرسال كعميل":"Will send as client")},children:[n==="ar"?"إرسال كعميل":"Send as Client"," (",a.clientName||"Client",")"]}),a?.consultantUserId&&l.jsxs(J,{block:!0,onClick:()=>{m(a.consultantUserId),x(!1),se.success(n==="ar"?"سيتم الإرسال كمستشار":"Will send as consultant")},children:[n==="ar"?"إرسال كمستشار":"Send as Consultant"," ","(",a.consultantName||"Consultant",")"]})]})]})]})]})}),l.jsx(At,{title:n==="ar"?"اختر مستخدم للدردشة":"Select User to Chat",open:E,onCancel:()=>_(!1),footer:null,width:600,children:w?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx(kt,{size:"large"})}):l.jsx(qt,{dataSource:b.filter(O=>O.id!==e?.id),renderItem:O=>l.jsx(qt.Item,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>V(O.id),children:l.jsx(qt.Item.Meta,{avatar:l.jsx(Mt,{src:O.avatar,icon:l.jsx(tt,{})}),title:l.jsxs("div",{children:[l.jsxs(ec,{strong:!0,children:[O.email,O.client&&` (${O.client.firstName} ${O.client.lastName})`,O.consultant&&` (${O.consultant.firstName} ${O.consultant.lastName})`]}),l.jsx($e,{color:"blue",className:"ml-2",children:O.role})]}),description:O.client?"Client":O.consultant?"Consultant":"User"})})})})]})})},{TextArea:ZI}=ye,{Option:$n}=be,B1e=()=>{const{language:n}=Ze(),[e,t]=M.useState([]),[r,i]=M.useState(!1),[a,s]=M.useState(!1),[o,c]=M.useState(!1),[u,d]=M.useState(null),[h,f]=M.useState(!1),[p,y]=M.useState({}),[g]=W.useForm(),[m]=W.useForm();M.useEffect(()=>{v()},[p]);const v=async()=>{try{i(!0);const E=await Rr.getAllTickets(p);t(E.tickets||[])}catch{se.error(n==="ar"?"فشل تحميل التذاكر":"Failed to load tickets")}finally{i(!1)}},x=async E=>{try{if(await Rr.updateTicket(u.id,E),se.success(n==="ar"?"تم تحديث التذكرة":"Ticket updated"),c(!1),g.resetFields(),v(),a){const _=await Rr.getTicketById(u.id);d(_.ticket)}}catch{se.error(n==="ar"?"فشل تحديث التذكرة":"Failed to update ticket")}},b=async E=>{try{if(await Rr.addComment(u.id,E.content),se.success(n==="ar"?"تم إضافة التعليق":"Comment added"),f(!1),m.resetFields(),v(),a){const _=await Rr.getTicketById(u.id);d(_.ticket)}}catch{se.error(n==="ar"?"فشل إضافة التعليق":"Failed to add comment")}},A=E=>({OPEN:"blue",IN_PROGRESS:"orange",RESOLVED:"green",CLOSED:"default"})[E]||"default",w=E=>({LOW:"default",MEDIUM:"blue",HIGH:"orange",URGENT:"red"})[E]||"default",S=[{title:n==="ar"?"رقم التذكرة":"Ticket Number",dataIndex:"ticketNumber",key:"ticketNumber"},{title:n==="ar"?"المستخدم":"User",key:"user",render:(E,_)=>l.jsxs(ze,{children:[l.jsx(tt,{}),l.jsx("span",{children:_.user?.email||"-"})]})},{title:n==="ar"?"الموضوع":"Subject",dataIndex:"subject",key:"subject"},{title:n==="ar"?"الفئة":"Category",dataIndex:"category",key:"category",render:E=>E||"-"},{title:n==="ar"?"الأولوية":"Priority",dataIndex:"priority",key:"priority",render:E=>l.jsx($e,{color:w(E),children:E})},{title:n==="ar"?"الحالة":"Status",dataIndex:"status",key:"status",render:E=>l.jsx($e,{color:A(E),children:E})},{title:n==="ar"?"مُخصص إلى":"Assigned To",dataIndex:"assignedTo",key:"assignedTo",render:E=>E||l.jsx($e,{color:"default",children:n==="ar"?"غير مُخصص":"Unassigned"})},{title:n==="ar"?"تاريخ الإنشاء":"Created At",dataIndex:"createdAt",key:"createdAt",render:E=>qe(E).format("YYYY-MM-DD HH:mm")},{title:n==="ar"?"الإجراءات":"Actions",key:"actions",render:(E,_)=>l.jsxs(ze,{children:[l.jsx(J,{icon:l.jsx(Wn,{}),size:"small",onClick:()=>{d(_),s(!0)},children:n==="ar"?"عرض":"View"}),l.jsx(J,{icon:l.jsx(_r,{}),size:"small",onClick:()=>{d(_),g.setFieldsValue({status:_.status,priority:_.priority,assignedTo:_.assignedTo,resolution:_.resolution}),c(!0)},children:n==="ar"?"تعديل":"Edit"})]})}];return l.jsxs("div",{children:[l.jsx("div",{className:"flex justify-between items-center mb-6",children:l.jsx("h1",{className:"text-3xl font-bold",children:n==="ar"?"إدارة تذاكر الدعم الفني":"Support Tickets Management"})}),l.jsx(Ee,{className:"mb-4",children:l.jsxs(ze,{wrap:!0,children:[l.jsxs(be,{placeholder:n==="ar"?"الحالة":"Status",style:{width:150},allowClear:!0,onChange:E=>y({...p,status:E}),children:[l.jsx($n,{value:"OPEN",children:n==="ar"?"مفتوحة":"Open"}),l.jsx($n,{value:"IN_PROGRESS",children:n==="ar"?"قيد المعالجة":"In Progress"}),l.jsx($n,{value:"RESOLVED",children:n==="ar"?"محلولة":"Resolved"}),l.jsx($n,{value:"CLOSED",children:n==="ar"?"مغلقة":"Closed"})]}),l.jsxs(be,{placeholder:n==="ar"?"الأولوية":"Priority",style:{width:150},allowClear:!0,onChange:E=>y({...p,priority:E}),children:[l.jsx($n,{value:"LOW",children:n==="ar"?"منخفضة":"Low"}),l.jsx($n,{value:"MEDIUM",children:n==="ar"?"متوسطة":"Medium"}),l.jsx($n,{value:"HIGH",children:n==="ar"?"عالية":"High"}),l.jsx($n,{value:"URGENT",children:n==="ar"?"عاجلة":"Urgent"})]}),l.jsxs(be,{placeholder:n==="ar"?"الفئة":"Category",style:{width:150},allowClear:!0,onChange:E=>y({...p,category:E}),children:[l.jsx($n,{value:"technical",children:n==="ar"?"تقني":"Technical"}),l.jsx($n,{value:"billing",children:n==="ar"?"مالي":"Billing"}),l.jsx($n,{value:"general",children:n==="ar"?"عام":"General"})]})]})}),l.jsx(Ee,{children:l.jsx(Pt,{columns:S,dataSource:e,loading:r,rowKey:"id",locale:{emptyText:l.jsx(jn,{description:n==="ar"?"لا توجد تذاكر":"No tickets"})}})}),l.jsx(At,{title:n==="ar"?"تفاصيل التذكرة":"Ticket Details",open:a,onCancel:()=>{s(!1),d(null)},footer:null,width:800,className:"modern-modal",children:u&&l.jsxs("div",{children:[l.jsxs(Je,{bordered:!0,column:2,children:[l.jsx(Je.Item,{label:n==="ar"?"رقم التذكرة":"Ticket Number",children:u.ticketNumber}),l.jsx(Je.Item,{label:n==="ar"?"المستخدم":"User",children:u.user?.email||"-"}),l.jsx(Je.Item,{label:n==="ar"?"الحالة":"Status",children:l.jsx($e,{color:A(u.status),children:u.status})}),l.jsx(Je.Item,{label:n==="ar"?"الأولوية":"Priority",children:l.jsx($e,{color:w(u.priority),children:u.priority})}),l.jsx(Je.Item,{label:n==="ar"?"مُخصص إلى":"Assigned To",children:u.assignedTo||l.jsx($e,{color:"default",children:n==="ar"?"غير مُخصص":"Unassigned"})}),l.jsx(Je.Item,{label:n==="ar"?"الفئة":"Category",children:u.category||"-"}),l.jsx(Je.Item,{label:n==="ar"?"الموضوع":"Subject",span:2,children:u.subject}),l.jsx(Je.Item,{label:n==="ar"?"الوصف":"Description",span:2,children:u.description}),u.resolution&&l.jsx(Je.Item,{label:n==="ar"?"الحل":"Resolution",span:2,children:u.resolution})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:n==="ar"?"التعليقات":"Comments"}),l.jsx(J,{type:"primary",icon:l.jsx(kn,{}),onClick:()=>f(!0),children:n==="ar"?"إضافة تعليق":"Add Comment"})]}),l.jsx(RE,{items:u.comments?.map(E=>({key:E.id,children:l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("span",{className:"font-semibold",children:E.user?.email}),l.jsx("span",{className:"text-gray-500 text-sm",children:qe(E.createdAt).format("YYYY-MM-DD HH:mm")})]}),l.jsx("p",{children:E.comment||E.content})]})}))||[]}),(!u.comments||u.comments.length===0)&&l.jsx(jn,{description:n==="ar"?"لا توجد تعليقات":"No comments"})]})]})}),l.jsx(At,{title:n==="ar"?"تعديل التذكرة":"Edit Ticket",open:o,onCancel:()=>{c(!1),g.resetFields()},footer:null,width:600,className:"modern-modal",children:l.jsxs(W,{form:g,layout:"vertical",onFinish:x,children:[l.jsx(W.Item,{name:"status",label:n==="ar"?"الحالة":"Status",children:l.jsxs(be,{children:[l.jsx($n,{value:"OPEN",children:n==="ar"?"مفتوحة":"Open"}),l.jsx($n,{value:"IN_PROGRESS",children:n==="ar"?"قيد المعالجة":"In Progress"}),l.jsx($n,{value:"RESOLVED",children:n==="ar"?"محلولة":"Resolved"}),l.jsx($n,{value:"CLOSED",children:n==="ar"?"مغلقة":"Closed"})]})}),l.jsx(W.Item,{name:"priority",label:n==="ar"?"الأولوية":"Priority",children:l.jsxs(be,{children:[l.jsx($n,{value:"LOW",children:n==="ar"?"منخفضة":"Low"}),l.jsx($n,{value:"MEDIUM",children:n==="ar"?"متوسطة":"Medium"}),l.jsx($n,{value:"HIGH",children:n==="ar"?"عالية":"High"}),l.jsx($n,{value:"URGENT",children:n==="ar"?"عاجلة":"Urgent"})]})}),l.jsx(W.Item,{name:"assignedTo",label:n==="ar"?"مُخصص إلى":"Assigned To",children:l.jsx(ye,{placeholder:n==="ar"?"معرف المستخدم":"User ID"})}),l.jsx(W.Item,{name:"resolution",label:n==="ar"?"الحل":"Resolution",children:l.jsx(ZI,{rows:4})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",block:!0,children:n==="ar"?"تحديث التذكرة":"Update Ticket"})})]})}),l.jsx(At,{title:n==="ar"?"إضافة تعليق":"Add Comment",open:h,onCancel:()=>{f(!1),m.resetFields()},footer:null,className:"modern-modal",children:l.jsxs(W,{form:m,layout:"vertical",onFinish:b,children:[l.jsx(W.Item,{name:"content",label:n==="ar"?"التعليق":"Comment",rules:[{required:!0,message:n==="ar"?"الرجاء إدخال التعليق":"Please enter comment"}],children:l.jsx(ZI,{rows:4})}),l.jsx(W.Item,{children:l.jsx(J,{type:"primary",htmlType:"submit",block:!0,children:n==="ar"?"إضافة التعليق":"Add Comment"})})]})})]})},{authAPI:jd,filesAPI:QI}=xs,$1e=()=>{const{language:n}=Ze(),{theme:e}=ha(),{user:t,checkAuth:r}=Xn(),[i]=W.useForm(),[a]=W.useForm(),[s,o]=M.useState(!1),[c,u]=M.useState(null),[d,h]=M.useState(!1),[f,p]=M.useState(!1);M.useEffect(()=>{y()},[]);const y=async()=>{try{o(!0);const w=await jd.getProfile();w.user&&(u(w.user),w.user.admin?i.setFieldsValue({firstName:w.user.admin.firstName||"",lastName:w.user.admin.lastName||"",email:w.user.email||"",phone:w.user.phone||""}):i.setFieldsValue({email:w.user.email||"",phone:w.user.phone||""}))}catch(w){console.error("Error fetching profile:",w),se.error(w.message||(n==="ar"?"فشل تحميل الملف الشخصي":"Failed to load profile"))}finally{o(!1)}},g=async w=>{const S=QI||xs?.filesAPI;if(!S)return console.error("filesAPI is not defined",{filesAPI:QI,apiService:xs}),se.error(n==="ar"?"خطأ في تحميل API":"API loading error"),!1;const E=new FormData;E.append("file",w),E.append("ownerType","USER"),E.append("ownerId",t?.id||"");try{o(!0);const _=await S.uploadFile(E);_.file?.fileUrl&&(await jd.updateProfile({avatar:_.file.fileUrl}),se.success(n==="ar"?"تم رفع الصورة بنجاح":"Avatar uploaded successfully"),u(D=>({...D,avatar:_.file.fileUrl})),await y(),await r())}catch(_){se.error(_.message||(n==="ar"?"فشل رفع الصورة":"Failed to upload avatar"))}finally{o(!1)}return!1},m=async w=>{try{o(!0);const S={...w};w.email&&w.email!==c?.email&&await jd.updateEmail(w.email),await jd.updateProfile(S),se.success(n==="ar"?"تم حفظ التغييرات بنجاح":"Profile updated successfully"),h(!1),await y(),await r()}catch(S){se.error(S.message||(n==="ar"?"فشل حفظ التغييرات":"Failed to save changes"))}finally{o(!1)}},v=async w=>{try{o(!0),await jd.changePassword(w.currentPassword,w.newPassword),se.success(n==="ar"?"تم تغيير كلمة المرور بنجاح":"Password changed successfully"),a.resetFields(),p(!1)}catch(S){se.error(S.message||(n==="ar"?"فشل تغيير كلمة المرور":"Failed to change password"))}finally{o(!1)}};if(s&&!c)return l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx(kt,{size:"large"})});const x=c?.admin?.adminRole||t?.role,b={SUPER_ADMIN:{ar:"مدير عام",en:"Super Admin",color:"red"},ADMIN:{ar:"مدير",en:"Admin",color:"blue"},ANALYST:{ar:"محلل",en:"Analyst",color:"purple"},SUPPORT:{ar:"دعم فني",en:"Support",color:"orange"},FINANCE:{ar:"مالي",en:"Finance",color:"green"}},A=b[x]||b.ADMIN;return l.jsxs("div",{className:"relative min-h-screen pb-8 dashboard-bg",children:[l.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-br from-olive-green-100/40 to-turquoise-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 md:w-[600px] md:h-[600px] bg-gradient-to-tr from-teal-100/40 to-olive-green-100/40 rounded-full blur-3xl opacity-30 -z-10"}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 relative z-10",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold gradient-text mb-3",children:n==="ar"?"الملف الشخصي":"Profile Settings"}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 font-medium",children:n==="ar"?"إدارة معلوماتك الشخصية وإعدادات الحساب":"Manage your personal information and account settings"})]}),l.jsxs(Re,{gutter:[24,24],children:[l.jsx(me,{xs:24,md:8,children:l.jsxs(Ee,{className:`text-center shadow-professional-lg border-0 card-hover ${e==="dark"?"bg-gray-800":"bg-white"}`,style:{animationDelay:"0.1s"},children:[l.jsx(Vt,{showUploadList:!1,beforeUpload:g,accept:"image/*",children:l.jsxs("div",{className:"relative inline-block mb-4 cursor-pointer group",children:[l.jsx(Mt,{size:140,src:c?.avatar||t?.avatar,icon:l.jsx(tt,{}),className:"ring-4 ring-olive-green-200 group-hover:ring-olive-green-400 transition-all duration-300"}),l.jsx(J,{type:"primary",shape:"circle",icon:l.jsx(Ey,{}),className:"absolute bottom-0 right-0 shadow-lg",size:"small",style:{backgroundColor:"#7a8c66"},loading:s})]})}),l.jsx("h2",{className:`text-2xl font-bold mb-2 ${e==="dark"?"text-white":"text-gray-900"}`,children:c?.admin?`${c.admin.firstName||""} ${c.admin.lastName||""}`.trim():t?.email||(n==="ar"?"المدير":"Admin")}),l.jsx($e,{color:A.color,className:"mb-4",icon:l.jsx(Da,{}),children:n==="ar"?A.ar:A.en}),l.jsx(cn,{className:"my-4"}),l.jsxs("div",{className:"space-y-3 text-left",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(vi,{className:"text-gray-400"}),l.jsx("span",{className:`text-sm ${e==="dark"?"text-gray-300":"text-gray-600"}`,children:c?.email||t?.email})]}),c?.phone&&l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Ma,{className:"text-gray-400"}),l.jsx("span",{className:`text-sm ${e==="dark"?"text-gray-300":"text-gray-600"}`,children:c.phone})]})]})]})}),l.jsxs(me,{xs:24,md:16,children:[l.jsx(Ee,{className:`shadow-professional-lg border-0 ${e==="dark"?"bg-gray-800":"bg-white"}`,title:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:`${e==="dark"?"text-white":"text-gray-900"}`,children:n==="ar"?"معلومات الحساب":"Account Information"}),!d&&l.jsx(J,{type:"primary",icon:l.jsx(_r,{}),onClick:()=>h(!0),className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:n==="ar"?"تعديل":"Edit"})]}),style:{animationDelay:"0.2s"},children:l.jsxs(W,{form:i,layout:"vertical",onFinish:m,disabled:!d,children:[l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"firstName",label:n==="ar"?"الاسم الأول":"First Name",rules:[{required:!0,message:n==="ar"?"يرجى إدخال الاسم الأول":"Please enter first name"}],children:l.jsx(ye,{prefix:l.jsx(tt,{}),placeholder:n==="ar"?"الاسم الأول":"First Name"})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"lastName",label:n==="ar"?"اسم العائلة":"Last Name",rules:[{required:!0,message:n==="ar"?"يرجى إدخال اسم العائلة":"Please enter last name"}],children:l.jsx(ye,{prefix:l.jsx(tt,{}),placeholder:n==="ar"?"اسم العائلة":"Last Name"})})})]}),l.jsxs(Re,{gutter:16,children:[l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"email",label:n==="ar"?"البريد الإلكتروني":"Email",rules:[{required:!0,message:n==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email"},{type:"email",message:n==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email"}],children:l.jsx(ye,{prefix:l.jsx(vi,{}),placeholder:n==="ar"?"البريد الإلكتروني":"Email"})})}),l.jsx(me,{xs:24,sm:12,children:l.jsx(W.Item,{name:"phone",label:n==="ar"?"رقم الهاتف":"Phone Number",children:l.jsx(ye,{prefix:l.jsx(Ma,{}),placeholder:n==="ar"?"رقم الهاتف":"Phone Number"})})})]}),d&&l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx(J,{type:"primary",htmlType:"submit",icon:l.jsx(ja,{}),loading:s,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:n==="ar"?"حفظ":"Save"}),l.jsx(J,{onClick:()=>{h(!1),y()},children:n==="ar"?"إلغاء":"Cancel"})]})]})}),l.jsx(Ee,{className:`shadow-professional-lg border-0 mt-6 ${e==="dark"?"bg-gray-800":"bg-white"}`,title:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Nn,{className:e==="dark"?"text-white":"text-gray-900"}),l.jsx("span",{className:e==="dark"?"text-white":"text-gray-900",children:n==="ar"?"الأمان":"Security"})]}),style:{animationDelay:"0.3s"},extra:!f&&l.jsx(J,{type:"text",onClick:()=>p(!0),className:"text-olive-green-600 hover:text-olive-green-700",children:n==="ar"?"تغيير كلمة المرور":"Change Password"}),children:f?l.jsxs(W,{form:a,layout:"vertical",onFinish:v,children:[l.jsx(W.Item,{name:"currentPassword",label:n==="ar"?"كلمة المرور الحالية":"Current Password",rules:[{required:!0,message:n==="ar"?"يرجى إدخال كلمة المرور الحالية":"Please enter current password"}],children:l.jsx(ye.Password,{prefix:l.jsx(Nn,{}),placeholder:n==="ar"?"كلمة المرور الحالية":"Current Password"})}),l.jsx(W.Item,{name:"newPassword",label:n==="ar"?"كلمة المرور الجديدة":"New Password",rules:[{required:!0,message:n==="ar"?"يرجى إدخال كلمة المرور الجديدة":"Please enter new password"},{min:8,message:n==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":"Password must be at least 8 characters"}],children:l.jsx(ye.Password,{prefix:l.jsx(Da,{}),placeholder:n==="ar"?"كلمة المرور الجديدة":"New Password"})}),l.jsx(W.Item,{name:"confirmPassword",label:n==="ar"?"تأكيد كلمة المرور":"Confirm Password",dependencies:["newPassword"],rules:[{required:!0,message:n==="ar"?"يرجى تأكيد كلمة المرور":"Please confirm password"},({getFieldValue:w})=>({validator(S,E){return!E||w("newPassword")===E?Promise.resolve():Promise.reject(new Error(n==="ar"?"كلمات المرور غير متطابقة":"Passwords do not match"))}})],children:l.jsx(ye.Password,{prefix:l.jsx(Da,{}),placeholder:n==="ar"?"تأكيد كلمة المرور":"Confirm Password"})}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx(J,{type:"primary",htmlType:"submit",icon:l.jsx(ja,{}),loading:s,className:"bg-olive-green-600 hover:bg-olive-green-700 border-0",children:n==="ar"?"تغيير كلمة المرور":"Change Password"}),l.jsx(J,{onClick:()=>{p(!1),a.resetFields()},children:n==="ar"?"إلغاء":"Cancel"})]})]}):l.jsx("div",{className:`p-4 rounded-lg ${e==="dark"?"bg-gray-700":"bg-gray-50"}`,children:l.jsx("p",{className:`${e==="dark"?"text-gray-300":"text-gray-600"}`,children:n==="ar"?"لحماية حسابك، استخدم كلمة مرور قوية لا تستخدمها في حسابات أخرى.":"To protect your account, use a strong password that you don't use elsewhere."})})})]})]})]})]})},z1e=()=>l.jsx(hG,{children:l.jsxs(wy,{children:[l.jsx(Qe,{path:"/",element:l.jsx($ue,{})}),l.jsx(Qe,{path:"/profile",element:l.jsx($1e,{})}),l.jsx(Qe,{path:"/clients",element:l.jsx(zue,{})}),l.jsx(Qe,{path:"/clients/:id",element:l.jsx(jme,{})}),l.jsx(Qe,{path:"/consultants",element:l.jsx(que,{})}),l.jsx(Qe,{path:"/consultants/:id",element:l.jsx(Tme,{})}),l.jsx(Qe,{path:"/sessions",element:l.jsx(Wue,{})}),l.jsx(Qe,{path:"/payments",element:l.jsx(Vue,{})}),l.jsx(Qe,{path:"/cms",element:l.jsx(Gue,{})}),l.jsx(Qe,{path:"/articles",element:l.jsx(Yue,{})}),l.jsx(Qe,{path:"/articles/new",element:l.jsx(XI,{})}),l.jsx(Qe,{path:"/articles/edit/:id",element:l.jsx(XI,{})}),l.jsx(Qe,{path:"/chat",element:l.jsx(JI,{})}),l.jsx(Qe,{path:"/chat/:sessionId",element:l.jsx(JI,{})}),l.jsx(Qe,{path:"/services",element:l.jsx(Kue,{})}),l.jsx(Qe,{path:"/reports",element:l.jsx(Jue,{})}),l.jsx(Qe,{path:"/partners",element:l.jsx(Zue,{})}),l.jsx(Qe,{path:"/categories",element:l.jsx(Que,{})}),l.jsx(Qe,{path:"/sliders",element:l.jsx(ede,{})}),l.jsx(Qe,{path:"/monitoring",element:l.jsx(_me,{})}),l.jsx(Qe,{path:"/permissions",element:l.jsx(Dme,{})}),l.jsx(Qe,{path:"/support",element:l.jsx(B1e,{})}),l.jsx(Qe,{path:"/settings",element:l.jsx(Eme,{})}),l.jsx(Qe,{path:"*",element:l.jsx(na,{to:"/admin",replace:!0})})]})}),q1e=()=>{const{id:n}=qa(),e=Rt(),{user:t}=Xn();return M.useEffect(()=>{if(!t){e("/login",{replace:!0});return}const r=t.role;r==="CLIENT"?e(`/client/chat/${n}`,{replace:!0}):r==="CONSULTANT"?e(`/consultant/chat/${n}`,{replace:!0}):["ADMIN","SUPER_ADMIN"].includes(r)?e(`/admin/chat/${n}`,{replace:!0}):e("/",{replace:!0})},[n,t,e]),null};function W1e(){return l.jsx(kz,{children:l.jsx(Nz,{children:l.jsx(Pz,{children:l.jsx(iz,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:l.jsxs(wy,{children:[l.jsx(Qe,{path:"/",element:l.jsx(tV,{})}),l.jsx(Qe,{path:"/about",element:l.jsx(rV,{})}),l.jsx(Qe,{path:"/services",element:l.jsx(aV,{})}),l.jsx(Qe,{path:"/consultants",element:l.jsx(lV,{})}),l.jsx(Qe,{path:"/consultants/:id",element:l.jsx(cV,{})}),l.jsx(Qe,{path:"/reports",element:l.jsx(fT,{})}),l.jsx(Qe,{path:"/reports/:id",element:l.jsx(fT,{})}),l.jsx(Qe,{path:"/blog",element:l.jsx(fV,{})}),l.jsx(Qe,{path:"/blog/:slug",element:l.jsx(pV,{})}),l.jsx(Qe,{path:"/contact",element:l.jsx(yV,{})}),l.jsx(Qe,{path:"/login",element:l.jsx(xV,{})}),l.jsx(Qe,{path:"/register",element:l.jsx(SV,{})}),l.jsx(Qe,{path:"/terms",element:l.jsx(DV,{})}),l.jsx(Qe,{path:"/chat/:id",element:l.jsx(q1e,{})}),l.jsx(Qe,{path:"/client/*",element:l.jsx(mv,{requiredRole:"CLIENT",children:l.jsx(VV,{})})}),l.jsx(Qe,{path:"/consultant/*",element:l.jsx(mv,{requiredRole:"CONSULTANT",children:l.jsx(lG,{})})}),l.jsx(Qe,{path:"/admin/*",element:l.jsx(mv,{adminOnly:!0,children:l.jsx(z1e,{})})})]})})})})})}const H1e=console.error,V1e=console.warn;console.error=(...n)=>{(n[0]?.toString()||"").includes("findDOMNode is deprecated")||H1e.apply(console,n)};console.warn=(...n)=>{(n[0]?.toString()||"").includes("findDOMNode is deprecated")||V1e.apply(console,n)};document.documentElement.setAttribute("dir","rtl");document.documentElement.setAttribute("lang","ar");hz.createRoot(document.getElementById("root")).render(l.jsx(fe.StrictMode,{children:l.jsx(tR,{locale:uR,direction:"rtl",children:l.jsx(W1e,{})})}));
